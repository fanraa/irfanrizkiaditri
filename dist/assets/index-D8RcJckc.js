function cS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ow={exports:{}},jc={},aw={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),dS=Symbol.for("react.portal"),hS=Symbol.for("react.fragment"),fS=Symbol.for("react.strict_mode"),pS=Symbol.for("react.profiler"),mS=Symbol.for("react.provider"),gS=Symbol.for("react.context"),yS=Symbol.for("react.forward_ref"),vS=Symbol.for("react.suspense"),xS=Symbol.for("react.memo"),wS=Symbol.for("react.lazy"),Gg=Symbol.iterator;function _S(t){return t===null||typeof t!="object"?null:(t=Gg&&t[Gg]||t["@@iterator"],typeof t=="function"?t:null)}var lw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uw=Object.assign,cw={};function Io(t,e,n){this.props=t,this.context=e,this.refs=cw,this.updater=n||lw}Io.prototype.isReactComponent={};Io.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Io.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dw(){}dw.prototype=Io.prototype;function fp(t,e,n){this.props=t,this.context=e,this.refs=cw,this.updater=n||lw}var pp=fp.prototype=new dw;pp.constructor=fp;uw(pp,Io.prototype);pp.isPureReactComponent=!0;var Hg=Array.isArray,hw=Object.prototype.hasOwnProperty,mp={current:null},fw={key:!0,ref:!0,__self:!0,__source:!0};function pw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)hw.call(e,r)&&!fw.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:cl,type:t,key:i,ref:o,props:s,_owner:mp.current}}function bS(t,e){return{$$typeof:cl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gp(t){return typeof t=="object"&&t!==null&&t.$$typeof===cl}function ES(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $g=/\/+/g;function Od(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ES(""+t.key):e.toString(36)}function Tu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cl:case dS:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Od(o,0):r,Hg(s)?(n="",t!=null&&(n=t.replace($g,"$&/")+"/"),Tu(s,e,n,"",function(c){return c})):s!=null&&(gp(s)&&(s=bS(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($g,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Hg(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Od(i,a);o+=Tu(i,e,n,l,s)}else if(l=_S(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Od(i,a++),o+=Tu(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yl(t,e,n){if(t==null)return t;var r=[],s=0;return Tu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function TS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bn={current:null},Su={transition:null},SS={ReactCurrentDispatcher:bn,ReactCurrentBatchConfig:Su,ReactCurrentOwner:mp};function mw(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:Yl,forEach:function(t,e,n){Yl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yl(t,function(){e++}),e},toArray:function(t){return Yl(t,function(e){return e})||[]},only:function(t){if(!gp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=Io;He.Fragment=hS;He.Profiler=pS;He.PureComponent=fp;He.StrictMode=fS;He.Suspense=vS;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SS;He.act=mw;He.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=mp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hw.call(e,l)&&!fw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:cl,type:t.type,key:s,ref:i,props:r,_owner:o}};He.createContext=function(t){return t={$$typeof:gS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mS,_context:t},t.Consumer=t};He.createElement=pw;He.createFactory=function(t){var e=pw.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:yS,render:t}};He.isValidElement=gp;He.lazy=function(t){return{$$typeof:wS,_payload:{_status:-1,_result:t},_init:TS}};He.memo=function(t,e){return{$$typeof:xS,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=Su.transition;Su.transition={};try{t()}finally{Su.transition=e}};He.unstable_act=mw;He.useCallback=function(t,e){return bn.current.useCallback(t,e)};He.useContext=function(t){return bn.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return bn.current.useDeferredValue(t)};He.useEffect=function(t,e){return bn.current.useEffect(t,e)};He.useId=function(){return bn.current.useId()};He.useImperativeHandle=function(t,e,n){return bn.current.useImperativeHandle(t,e,n)};He.useInsertionEffect=function(t,e){return bn.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return bn.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return bn.current.useMemo(t,e)};He.useReducer=function(t,e,n){return bn.current.useReducer(t,e,n)};He.useRef=function(t){return bn.current.useRef(t)};He.useState=function(t){return bn.current.useState(t)};He.useSyncExternalStore=function(t,e,n){return bn.current.useSyncExternalStore(t,e,n)};He.useTransition=function(){return bn.current.useTransition()};He.version="18.3.1";aw.exports=He;var F=aw.exports;const yp=hp(F),IS=cS({__proto__:null,default:yp},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CS=F,kS=Symbol.for("react.element"),AS=Symbol.for("react.fragment"),NS=Object.prototype.hasOwnProperty,RS=CS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PS={key:!0,ref:!0,__self:!0,__source:!0};function gw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)NS.call(e,r)&&!PS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:kS,type:t,key:i,ref:o,props:s,_owner:RS.current}}jc.Fragment=AS;jc.jsx=gw;jc.jsxs=gw;ow.exports=jc;var u=ow.exports,Rh={},yw={exports:{}},Gn={},vw={exports:{}},xw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,X){var oe=Z.length;Z.push(X);e:for(;0<oe;){var W=oe-1>>>1,$=Z[W];if(0<s($,X))Z[W]=X,Z[oe]=$,oe=W;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var X=Z[0],oe=Z.pop();if(oe!==X){Z[0]=oe;e:for(var W=0,$=Z.length,de=$>>>1;W<de;){var te=2*(W+1)-1,Y=Z[te],ge=te+1,Ce=Z[ge];if(0>s(Y,oe))ge<$&&0>s(Ce,Y)?(Z[W]=Ce,Z[ge]=oe,W=ge):(Z[W]=Y,Z[te]=oe,W=te);else if(ge<$&&0>s(Ce,oe))Z[W]=Ce,Z[ge]=oe,W=ge;else break e}}return X}function s(Z,X){var oe=Z.sortIndex-X.sortIndex;return oe!==0?oe:Z.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,m=null,g=3,y=!1,w=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Z){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=Z)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(c)}}function P(Z){if(x=!1,T(Z),!w)if(n(l)!==null)w=!0,fe(L);else{var X=n(c);X!==null&&re(P,X.startTime-Z)}}function L(Z,X){w=!1,x&&(x=!1,v(A),A=-1),y=!0;var oe=g;try{for(T(X),m=n(l);m!==null&&(!(m.expirationTime>X)||Z&&!V());){var W=m.callback;if(typeof W=="function"){m.callback=null,g=m.priorityLevel;var $=W(m.expirationTime<=X);X=t.unstable_now(),typeof $=="function"?m.callback=$:m===n(l)&&r(l),T(X)}else r(l);m=n(l)}if(m!==null)var de=!0;else{var te=n(c);te!==null&&re(P,te.startTime-X),de=!1}return de}finally{m=null,g=oe,y=!1}}var B=!1,k=null,A=-1,N=5,M=-1;function V(){return!(t.unstable_now()-M<N)}function R(){if(k!==null){var Z=t.unstable_now();M=Z;var X=!0;try{X=k(!0,Z)}finally{X?D():(B=!1,k=null)}}else B=!1}var D;if(typeof E=="function")D=function(){E(R)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,H=I.port2;I.port1.onmessage=R,D=function(){H.postMessage(null)}}else D=function(){_(R,0)};function fe(Z){k=Z,B||(B=!0,D())}function re(Z,X){A=_(function(){Z(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,fe(L))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Z){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var oe=g;g=X;try{return Z()}finally{g=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,X){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var oe=g;g=Z;try{return X()}finally{g=oe}},t.unstable_scheduleCallback=function(Z,X,oe){var W=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?W+oe:W):oe=W,Z){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=oe+$,Z={id:d++,callback:X,priorityLevel:Z,startTime:oe,expirationTime:$,sortIndex:-1},oe>W?(Z.sortIndex=oe,e(c,Z),n(l)===null&&Z===n(c)&&(x?(v(A),A=-1):x=!0,re(P,oe-W))):(Z.sortIndex=$,e(l,Z),w||y||(w=!0,fe(L))),Z},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(Z){var X=g;return function(){var oe=g;g=X;try{return Z.apply(this,arguments)}finally{g=oe}}}})(xw);vw.exports=xw;var MS=vw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DS=F,Vn=MS;function me(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ww=new Set,Ma={};function yi(t,e){lo(t,e),lo(t+"Capture",e)}function lo(t,e){for(Ma[t]=e,t=0;t<e.length;t++)ww.add(e[t])}var Ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ph=Object.prototype.hasOwnProperty,LS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qg={},Wg={};function jS(t){return Ph.call(Wg,t)?!0:Ph.call(qg,t)?!1:LS.test(t)?Wg[t]=!0:(qg[t]=!0,!1)}function FS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VS(t,e,n,r){if(e===null||typeof e>"u"||FS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function En(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qt[t]=new En(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qt[e]=new En(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qt[t]=new En(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qt[t]=new En(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qt[t]=new En(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qt[t]=new En(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qt[t]=new En(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qt[t]=new En(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qt[t]=new En(t,5,!1,t.toLowerCase(),null,!1,!1)});var vp=/[\-:]([a-z])/g;function xp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vp,xp);Qt[e]=new En(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vp,xp);Qt[e]=new En(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vp,xp);Qt[e]=new En(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qt[t]=new En(t,1,!1,t.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new En("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qt[t]=new En(t,1,!1,t.toLowerCase(),null,!0,!0)});function wp(t,e,n,r){var s=Qt.hasOwnProperty(e)?Qt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VS(e,n,s,r)&&(n=null),r||s===null?jS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yr=DS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=Symbol.for("react.element"),Vi=Symbol.for("react.portal"),Ui=Symbol.for("react.fragment"),_p=Symbol.for("react.strict_mode"),Mh=Symbol.for("react.profiler"),_w=Symbol.for("react.provider"),bw=Symbol.for("react.context"),bp=Symbol.for("react.forward_ref"),Dh=Symbol.for("react.suspense"),Lh=Symbol.for("react.suspense_list"),Ep=Symbol.for("react.memo"),os=Symbol.for("react.lazy"),Ew=Symbol.for("react.offscreen"),Kg=Symbol.iterator;function Zo(t){return t===null||typeof t!="object"?null:(t=Kg&&t[Kg]||t["@@iterator"],typeof t=="function"?t:null)}var xt=Object.assign,Bd;function ca(t){if(Bd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bd=e&&e[1]||""}return`
`+Bd+t}var zd=!1;function Gd(t,e){if(!t||zd)return"";zd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{zd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ca(t):""}function US(t){switch(t.tag){case 5:return ca(t.type);case 16:return ca("Lazy");case 13:return ca("Suspense");case 19:return ca("SuspenseList");case 0:case 2:case 15:return t=Gd(t.type,!1),t;case 11:return t=Gd(t.type.render,!1),t;case 1:return t=Gd(t.type,!0),t;default:return""}}function jh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ui:return"Fragment";case Vi:return"Portal";case Mh:return"Profiler";case _p:return"StrictMode";case Dh:return"Suspense";case Lh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bw:return(t.displayName||"Context")+".Consumer";case _w:return(t._context.displayName||"Context")+".Provider";case bp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ep:return e=t.displayName||null,e!==null?e:jh(t.type)||"Memo";case os:e=t._payload,t=t._init;try{return jh(t(e))}catch{}}return null}function OS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jh(e);case 8:return e===_p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BS(t){var e=Tw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xl(t){t._valueTracker||(t._valueTracker=BS(t))}function Sw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Tw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fh(t,e){var n=e.checked;return xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Iw(t,e){e=e.checked,e!=null&&wp(t,"checked",e,!1)}function Vh(t,e){Iw(t,e);var n=Cs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Uh(t,e.type,Cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Yg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Uh(t,e,n){(e!=="number"||Gu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var da=Array.isArray;function Xi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Oh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(me(91));return xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(me(92));if(da(n)){if(1<n.length)throw Error(me(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cs(n)}}function Cw(t,e){var n=Cs(e.value),r=Cs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zl,Aw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zl=Zl||document.createElement("div"),Zl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zS=["Webkit","ms","Moz","O"];Object.keys(xa).forEach(function(t){zS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xa[e]=xa[t]})});function Nw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xa.hasOwnProperty(t)&&xa[t]?(""+e).trim():e+"px"}function Rw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Nw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var GS=xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zh(t,e){if(e){if(GS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(me(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(me(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(me(62))}}function Gh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hh=null;function Tp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $h=null,Zi=null,eo=null;function Zg(t){if(t=fl(t)){if(typeof $h!="function")throw Error(me(280));var e=t.stateNode;e&&(e=Bc(e),$h(t.stateNode,t.type,e))}}function Pw(t){Zi?eo?eo.push(t):eo=[t]:Zi=t}function Mw(){if(Zi){var t=Zi,e=eo;if(eo=Zi=null,Zg(t),e)for(t=0;t<e.length;t++)Zg(e[t])}}function Dw(t,e){return t(e)}function Lw(){}var Hd=!1;function jw(t,e,n){if(Hd)return t(e,n);Hd=!0;try{return Dw(t,e,n)}finally{Hd=!1,(Zi!==null||eo!==null)&&(Lw(),Mw())}}function La(t,e){var n=t.stateNode;if(n===null)return null;var r=Bc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(me(231,e,typeof n));return n}var qh=!1;if(Ur)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){qh=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{qh=!1}function HS(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var wa=!1,Hu=null,$u=!1,Wh=null,$S={onError:function(t){wa=!0,Hu=t}};function qS(t,e,n,r,s,i,o,a,l){wa=!1,Hu=null,HS.apply($S,arguments)}function WS(t,e,n,r,s,i,o,a,l){if(qS.apply(this,arguments),wa){if(wa){var c=Hu;wa=!1,Hu=null}else throw Error(me(198));$u||($u=!0,Wh=c)}}function vi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function e0(t){if(vi(t)!==t)throw Error(me(188))}function KS(t){var e=t.alternate;if(!e){if(e=vi(t),e===null)throw Error(me(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return e0(s),t;if(i===r)return e0(s),e;i=i.sibling}throw Error(me(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(me(189))}}if(n.alternate!==r)throw Error(me(190))}if(n.tag!==3)throw Error(me(188));return n.stateNode.current===n?t:e}function Vw(t){return t=KS(t),t!==null?Uw(t):null}function Uw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Uw(t);if(e!==null)return e;t=t.sibling}return null}var Ow=Vn.unstable_scheduleCallback,t0=Vn.unstable_cancelCallback,JS=Vn.unstable_shouldYield,YS=Vn.unstable_requestPaint,It=Vn.unstable_now,QS=Vn.unstable_getCurrentPriorityLevel,Sp=Vn.unstable_ImmediatePriority,Bw=Vn.unstable_UserBlockingPriority,qu=Vn.unstable_NormalPriority,XS=Vn.unstable_LowPriority,zw=Vn.unstable_IdlePriority,Fc=null,xr=null;function ZS(t){if(xr&&typeof xr.onCommitFiberRoot=="function")try{xr.onCommitFiberRoot(Fc,t,void 0,(t.current.flags&128)===128)}catch{}}var ar=Math.clz32?Math.clz32:nI,eI=Math.log,tI=Math.LN2;function nI(t){return t>>>=0,t===0?32:31-(eI(t)/tI|0)|0}var eu=64,tu=4194304;function ha(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ha(a):(i&=o,i!==0&&(r=ha(i)))}else o=n&~s,o!==0?r=ha(o):i!==0&&(r=ha(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ar(e),s=1<<n,r|=t[n],e&=~s;return r}function rI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ar(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=rI(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Kh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gw(){var t=eu;return eu<<=1,!(eu&4194240)&&(eu=64),t}function $d(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ar(e),t[e]=n}function iI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ar(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ip(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ar(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var nt=0;function Hw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $w,Cp,qw,Ww,Kw,Jh=!1,nu=[],ms=null,gs=null,ys=null,ja=new Map,Fa=new Map,ls=[],oI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n0(t,e){switch(t){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":ja.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fa.delete(e.pointerId)}}function ta(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fl(e),e!==null&&Cp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function aI(t,e,n,r,s){switch(e){case"focusin":return ms=ta(ms,t,e,n,r,s),!0;case"dragenter":return gs=ta(gs,t,e,n,r,s),!0;case"mouseover":return ys=ta(ys,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ja.set(i,ta(ja.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Fa.set(i,ta(Fa.get(i)||null,t,e,n,r,s)),!0}return!1}function Jw(t){var e=Qs(t.target);if(e!==null){var n=vi(e);if(n!==null){if(e=n.tag,e===13){if(e=Fw(n),e!==null){t.blockedOn=e,Kw(t.priority,function(){qw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Iu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hh=r,n.target.dispatchEvent(r),Hh=null}else return e=fl(n),e!==null&&Cp(e),t.blockedOn=n,!1;e.shift()}return!0}function r0(t,e,n){Iu(t)&&n.delete(e)}function lI(){Jh=!1,ms!==null&&Iu(ms)&&(ms=null),gs!==null&&Iu(gs)&&(gs=null),ys!==null&&Iu(ys)&&(ys=null),ja.forEach(r0),Fa.forEach(r0)}function na(t,e){t.blockedOn===e&&(t.blockedOn=null,Jh||(Jh=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,lI)))}function Va(t){function e(s){return na(s,t)}if(0<nu.length){na(nu[0],t);for(var n=1;n<nu.length;n++){var r=nu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ms!==null&&na(ms,t),gs!==null&&na(gs,t),ys!==null&&na(ys,t),ja.forEach(e),Fa.forEach(e),n=0;n<ls.length;n++)r=ls[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ls.length&&(n=ls[0],n.blockedOn===null);)Jw(n),n.blockedOn===null&&ls.shift()}var to=Yr.ReactCurrentBatchConfig,Ku=!0;function uI(t,e,n,r){var s=nt,i=to.transition;to.transition=null;try{nt=1,kp(t,e,n,r)}finally{nt=s,to.transition=i}}function cI(t,e,n,r){var s=nt,i=to.transition;to.transition=null;try{nt=4,kp(t,e,n,r)}finally{nt=s,to.transition=i}}function kp(t,e,n,r){if(Ku){var s=Yh(t,e,n,r);if(s===null)th(t,e,r,Ju,n),n0(t,r);else if(aI(s,t,e,n,r))r.stopPropagation();else if(n0(t,r),e&4&&-1<oI.indexOf(t)){for(;s!==null;){var i=fl(s);if(i!==null&&$w(i),i=Yh(t,e,n,r),i===null&&th(t,e,r,Ju,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else th(t,e,r,null,n)}}var Ju=null;function Yh(t,e,n,r){if(Ju=null,t=Tp(r),t=Qs(t),t!==null)if(e=vi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ju=t,null}function Yw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QS()){case Sp:return 1;case Bw:return 4;case qu:case XS:return 16;case zw:return 536870912;default:return 16}default:return 16}}var ds=null,Ap=null,Cu=null;function Qw(){if(Cu)return Cu;var t,e=Ap,n=e.length,r,s="value"in ds?ds.value:ds.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Cu=s.slice(t,1<r?1-r:void 0)}function ku(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ru(){return!0}function s0(){return!1}function Hn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ru:s0,this.isPropagationStopped=s0,this}return xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ru)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ru)},persist:function(){},isPersistent:ru}),e}var Co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Np=Hn(Co),hl=xt({},Co,{view:0,detail:0}),dI=Hn(hl),qd,Wd,ra,Vc=xt({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ra&&(ra&&t.type==="mousemove"?(qd=t.screenX-ra.screenX,Wd=t.screenY-ra.screenY):Wd=qd=0,ra=t),qd)},movementY:function(t){return"movementY"in t?t.movementY:Wd}}),i0=Hn(Vc),hI=xt({},Vc,{dataTransfer:0}),fI=Hn(hI),pI=xt({},hl,{relatedTarget:0}),Kd=Hn(pI),mI=xt({},Co,{animationName:0,elapsedTime:0,pseudoElement:0}),gI=Hn(mI),yI=xt({},Co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vI=Hn(yI),xI=xt({},Co,{data:0}),o0=Hn(xI),wI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_I={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bI[t])?!!e[t]:!1}function Rp(){return EI}var TI=xt({},hl,{key:function(t){if(t.key){var e=wI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ku(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_I[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rp,charCode:function(t){return t.type==="keypress"?ku(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ku(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SI=Hn(TI),II=xt({},Vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a0=Hn(II),CI=xt({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rp}),kI=Hn(CI),AI=xt({},Co,{propertyName:0,elapsedTime:0,pseudoElement:0}),NI=Hn(AI),RI=xt({},Vc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),PI=Hn(RI),MI=[9,13,27,32],Pp=Ur&&"CompositionEvent"in window,_a=null;Ur&&"documentMode"in document&&(_a=document.documentMode);var DI=Ur&&"TextEvent"in window&&!_a,Xw=Ur&&(!Pp||_a&&8<_a&&11>=_a),l0=" ",u0=!1;function Zw(t,e){switch(t){case"keyup":return MI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oi=!1;function LI(t,e){switch(t){case"compositionend":return e_(e);case"keypress":return e.which!==32?null:(u0=!0,l0);case"textInput":return t=e.data,t===l0&&u0?null:t;default:return null}}function jI(t,e){if(Oi)return t==="compositionend"||!Pp&&Zw(t,e)?(t=Qw(),Cu=Ap=ds=null,Oi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xw&&e.locale!=="ko"?null:e.data;default:return null}}var FI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!FI[t.type]:e==="textarea"}function t_(t,e,n,r){Pw(r),e=Yu(e,"onChange"),0<e.length&&(n=new Np("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ba=null,Ua=null;function VI(t){h_(t,0)}function Uc(t){var e=Gi(t);if(Sw(e))return t}function UI(t,e){if(t==="change")return e}var n_=!1;if(Ur){var Jd;if(Ur){var Yd="oninput"in document;if(!Yd){var d0=document.createElement("div");d0.setAttribute("oninput","return;"),Yd=typeof d0.oninput=="function"}Jd=Yd}else Jd=!1;n_=Jd&&(!document.documentMode||9<document.documentMode)}function h0(){ba&&(ba.detachEvent("onpropertychange",r_),Ua=ba=null)}function r_(t){if(t.propertyName==="value"&&Uc(Ua)){var e=[];t_(e,Ua,t,Tp(t)),jw(VI,e)}}function OI(t,e,n){t==="focusin"?(h0(),ba=e,Ua=n,ba.attachEvent("onpropertychange",r_)):t==="focusout"&&h0()}function BI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uc(Ua)}function zI(t,e){if(t==="click")return Uc(e)}function GI(t,e){if(t==="input"||t==="change")return Uc(e)}function HI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dr=typeof Object.is=="function"?Object.is:HI;function Oa(t,e){if(dr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ph.call(e,s)||!dr(t[s],e[s]))return!1}return!0}function f0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p0(t,e){var n=f0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f0(n)}}function s_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?s_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i_(){for(var t=window,e=Gu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gu(t.document)}return e}function Mp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $I(t){var e=i_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&s_(n.ownerDocument.documentElement,n)){if(r!==null&&Mp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=p0(n,i);var o=p0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qI=Ur&&"documentMode"in document&&11>=document.documentMode,Bi=null,Qh=null,Ea=null,Xh=!1;function m0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xh||Bi==null||Bi!==Gu(r)||(r=Bi,"selectionStart"in r&&Mp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ea&&Oa(Ea,r)||(Ea=r,r=Yu(Qh,"onSelect"),0<r.length&&(e=new Np("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Bi)))}function su(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zi={animationend:su("Animation","AnimationEnd"),animationiteration:su("Animation","AnimationIteration"),animationstart:su("Animation","AnimationStart"),transitionend:su("Transition","TransitionEnd")},Qd={},o_={};Ur&&(o_=document.createElement("div").style,"AnimationEvent"in window||(delete zi.animationend.animation,delete zi.animationiteration.animation,delete zi.animationstart.animation),"TransitionEvent"in window||delete zi.transitionend.transition);function Oc(t){if(Qd[t])return Qd[t];if(!zi[t])return t;var e=zi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in o_)return Qd[t]=e[n];return t}var a_=Oc("animationend"),l_=Oc("animationiteration"),u_=Oc("animationstart"),c_=Oc("transitionend"),d_=new Map,g0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(t,e){d_.set(t,e),yi(e,[t])}for(var Xd=0;Xd<g0.length;Xd++){var Zd=g0[Xd],WI=Zd.toLowerCase(),KI=Zd[0].toUpperCase()+Zd.slice(1);Ms(WI,"on"+KI)}Ms(a_,"onAnimationEnd");Ms(l_,"onAnimationIteration");Ms(u_,"onAnimationStart");Ms("dblclick","onDoubleClick");Ms("focusin","onFocus");Ms("focusout","onBlur");Ms(c_,"onTransitionEnd");lo("onMouseEnter",["mouseout","mouseover"]);lo("onMouseLeave",["mouseout","mouseover"]);lo("onPointerEnter",["pointerout","pointerover"]);lo("onPointerLeave",["pointerout","pointerover"]);yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yi("onBeforeInput",["compositionend","keypress","textInput","paste"]);yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JI=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function y0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,WS(r,e,void 0,t),t.currentTarget=null}function h_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;y0(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;y0(s,a,c),i=l}}}if($u)throw t=Wh,$u=!1,Wh=null,t}function ut(t,e){var n=e[rf];n===void 0&&(n=e[rf]=new Set);var r=t+"__bubble";n.has(r)||(f_(e,t,2,!1),n.add(r))}function eh(t,e,n){var r=0;e&&(r|=4),f_(n,t,r,e)}var iu="_reactListening"+Math.random().toString(36).slice(2);function Ba(t){if(!t[iu]){t[iu]=!0,ww.forEach(function(n){n!=="selectionchange"&&(JI.has(n)||eh(n,!1,t),eh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[iu]||(e[iu]=!0,eh("selectionchange",!1,e))}}function f_(t,e,n,r){switch(Yw(e)){case 1:var s=uI;break;case 4:s=cI;break;default:s=kp}n=s.bind(null,e,n,t),s=void 0,!qh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function th(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Qs(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}jw(function(){var c=i,d=Tp(n),m=[];e:{var g=d_.get(t);if(g!==void 0){var y=Np,w=t;switch(t){case"keypress":if(ku(n)===0)break e;case"keydown":case"keyup":y=SI;break;case"focusin":w="focus",y=Kd;break;case"focusout":w="blur",y=Kd;break;case"beforeblur":case"afterblur":y=Kd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=i0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=fI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=kI;break;case a_:case l_:case u_:y=gI;break;case c_:y=NI;break;case"scroll":y=dI;break;case"wheel":y=PI;break;case"copy":case"cut":case"paste":y=vI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=a0}var x=(e&4)!==0,_=!x&&t==="scroll",v=x?g!==null?g+"Capture":null:g;x=[];for(var E=c,T;E!==null;){T=E;var P=T.stateNode;if(T.tag===5&&P!==null&&(T=P,v!==null&&(P=La(E,v),P!=null&&x.push(za(E,P,T)))),_)break;E=E.return}0<x.length&&(g=new y(g,w,null,n,d),m.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==Hh&&(w=n.relatedTarget||n.fromElement)&&(Qs(w)||w[Or]))break e;if((y||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=c,w=w?Qs(w):null,w!==null&&(_=vi(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(x=i0,P="onMouseLeave",v="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(x=a0,P="onPointerLeave",v="onPointerEnter",E="pointer"),_=y==null?g:Gi(y),T=w==null?g:Gi(w),g=new x(P,E+"leave",y,n,d),g.target=_,g.relatedTarget=T,P=null,Qs(d)===c&&(x=new x(v,E+"enter",w,n,d),x.target=T,x.relatedTarget=_,P=x),_=P,y&&w)t:{for(x=y,v=w,E=0,T=x;T;T=Di(T))E++;for(T=0,P=v;P;P=Di(P))T++;for(;0<E-T;)x=Di(x),E--;for(;0<T-E;)v=Di(v),T--;for(;E--;){if(x===v||v!==null&&x===v.alternate)break t;x=Di(x),v=Di(v)}x=null}else x=null;y!==null&&v0(m,g,y,x,!1),w!==null&&_!==null&&v0(m,_,w,x,!0)}}e:{if(g=c?Gi(c):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var L=UI;else if(c0(g))if(n_)L=GI;else{L=BI;var B=OI}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=zI);if(L&&(L=L(t,c))){t_(m,L,n,d);break e}B&&B(t,g,c),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&Uh(g,"number",g.value)}switch(B=c?Gi(c):window,t){case"focusin":(c0(B)||B.contentEditable==="true")&&(Bi=B,Qh=c,Ea=null);break;case"focusout":Ea=Qh=Bi=null;break;case"mousedown":Xh=!0;break;case"contextmenu":case"mouseup":case"dragend":Xh=!1,m0(m,n,d);break;case"selectionchange":if(qI)break;case"keydown":case"keyup":m0(m,n,d)}var k;if(Pp)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Oi?Zw(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Xw&&n.locale!=="ko"&&(Oi||A!=="onCompositionStart"?A==="onCompositionEnd"&&Oi&&(k=Qw()):(ds=d,Ap="value"in ds?ds.value:ds.textContent,Oi=!0)),B=Yu(c,A),0<B.length&&(A=new o0(A,t,null,n,d),m.push({event:A,listeners:B}),k?A.data=k:(k=e_(n),k!==null&&(A.data=k)))),(k=DI?LI(t,n):jI(t,n))&&(c=Yu(c,"onBeforeInput"),0<c.length&&(d=new o0("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:c}),d.data=k))}h_(m,e)})}function za(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=La(t,n),i!=null&&r.unshift(za(t,i,s)),i=La(t,e),i!=null&&r.push(za(t,i,s))),t=t.return}return r}function Di(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function v0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=La(n,i),l!=null&&o.unshift(za(n,l,a))):s||(l=La(n,i),l!=null&&o.push(za(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var YI=/\r\n?/g,QI=/\u0000|\uFFFD/g;function x0(t){return(typeof t=="string"?t:""+t).replace(YI,`
`).replace(QI,"")}function ou(t,e,n){if(e=x0(e),x0(t)!==e&&n)throw Error(me(425))}function Qu(){}var Zh=null,ef=null;function tf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nf=typeof setTimeout=="function"?setTimeout:void 0,XI=typeof clearTimeout=="function"?clearTimeout:void 0,w0=typeof Promise=="function"?Promise:void 0,ZI=typeof queueMicrotask=="function"?queueMicrotask:typeof w0<"u"?function(t){return w0.resolve(null).then(t).catch(eC)}:nf;function eC(t){setTimeout(function(){throw t})}function nh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Va(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Va(e)}function vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ko=Math.random().toString(36).slice(2),vr="__reactFiber$"+ko,Ga="__reactProps$"+ko,Or="__reactContainer$"+ko,rf="__reactEvents$"+ko,tC="__reactListeners$"+ko,nC="__reactHandles$"+ko;function Qs(t){var e=t[vr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Or]||n[vr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_0(t);t!==null;){if(n=t[vr])return n;t=_0(t)}return e}t=n,n=t.parentNode}return null}function fl(t){return t=t[vr]||t[Or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(me(33))}function Bc(t){return t[Ga]||null}var sf=[],Hi=-1;function Ds(t){return{current:t}}function dt(t){0>Hi||(t.current=sf[Hi],sf[Hi]=null,Hi--)}function at(t,e){Hi++,sf[Hi]=t.current,t.current=e}var ks={},fn=Ds(ks),Cn=Ds(!1),ii=ks;function uo(t,e){var n=t.type.contextTypes;if(!n)return ks;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function kn(t){return t=t.childContextTypes,t!=null}function Xu(){dt(Cn),dt(fn)}function b0(t,e,n){if(fn.current!==ks)throw Error(me(168));at(fn,e),at(Cn,n)}function p_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(me(108,OS(t)||"Unknown",s));return xt({},n,r)}function Zu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ks,ii=fn.current,at(fn,t),at(Cn,Cn.current),!0}function E0(t,e,n){var r=t.stateNode;if(!r)throw Error(me(169));n?(t=p_(t,e,ii),r.__reactInternalMemoizedMergedChildContext=t,dt(Cn),dt(fn),at(fn,t)):dt(Cn),at(Cn,n)}var Pr=null,zc=!1,rh=!1;function m_(t){Pr===null?Pr=[t]:Pr.push(t)}function rC(t){zc=!0,m_(t)}function Ls(){if(!rh&&Pr!==null){rh=!0;var t=0,e=nt;try{var n=Pr;for(nt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pr=null,zc=!1}catch(s){throw Pr!==null&&(Pr=Pr.slice(t+1)),Ow(Sp,Ls),s}finally{nt=e,rh=!1}}return null}var $i=[],qi=0,ec=null,tc=0,qn=[],Wn=0,oi=null,Lr=1,jr="";function Ws(t,e){$i[qi++]=tc,$i[qi++]=ec,ec=t,tc=e}function g_(t,e,n){qn[Wn++]=Lr,qn[Wn++]=jr,qn[Wn++]=oi,oi=t;var r=Lr;t=jr;var s=32-ar(r)-1;r&=~(1<<s),n+=1;var i=32-ar(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Lr=1<<32-ar(e)+s|n<<s|r,jr=i+t}else Lr=1<<i|n<<s|r,jr=t}function Dp(t){t.return!==null&&(Ws(t,1),g_(t,1,0))}function Lp(t){for(;t===ec;)ec=$i[--qi],$i[qi]=null,tc=$i[--qi],$i[qi]=null;for(;t===oi;)oi=qn[--Wn],qn[Wn]=null,jr=qn[--Wn],qn[Wn]=null,Lr=qn[--Wn],qn[Wn]=null}var jn=null,Dn=null,ft=!1,or=null;function y_(t,e){var n=Kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function T0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jn=t,Dn=vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jn=t,Dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=oi!==null?{id:Lr,overflow:jr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jn=t,Dn=null,!0):!1;default:return!1}}function of(t){return(t.mode&1)!==0&&(t.flags&128)===0}function af(t){if(ft){var e=Dn;if(e){var n=e;if(!T0(t,e)){if(of(t))throw Error(me(418));e=vs(n.nextSibling);var r=jn;e&&T0(t,e)?y_(r,n):(t.flags=t.flags&-4097|2,ft=!1,jn=t)}}else{if(of(t))throw Error(me(418));t.flags=t.flags&-4097|2,ft=!1,jn=t}}}function S0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jn=t}function au(t){if(t!==jn)return!1;if(!ft)return S0(t),ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tf(t.type,t.memoizedProps)),e&&(e=Dn)){if(of(t))throw v_(),Error(me(418));for(;e;)y_(t,e),e=vs(e.nextSibling)}if(S0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(me(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dn=vs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dn=null}}else Dn=jn?vs(t.stateNode.nextSibling):null;return!0}function v_(){for(var t=Dn;t;)t=vs(t.nextSibling)}function co(){Dn=jn=null,ft=!1}function jp(t){or===null?or=[t]:or.push(t)}var sC=Yr.ReactCurrentBatchConfig;function sa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(me(309));var r=n.stateNode}if(!r)throw Error(me(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(me(284));if(!n._owner)throw Error(me(290,t))}return t}function lu(t,e){throw t=Object.prototype.toString.call(e),Error(me(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function I0(t){var e=t._init;return e(t._payload)}function x_(t){function e(v,E){if(t){var T=v.deletions;T===null?(v.deletions=[E],v.flags|=16):T.push(E)}}function n(v,E){if(!t)return null;for(;E!==null;)e(v,E),E=E.sibling;return null}function r(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function s(v,E){return v=bs(v,E),v.index=0,v.sibling=null,v}function i(v,E,T){return v.index=T,t?(T=v.alternate,T!==null?(T=T.index,T<E?(v.flags|=2,E):T):(v.flags|=2,E)):(v.flags|=1048576,E)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,E,T,P){return E===null||E.tag!==6?(E=ch(T,v.mode,P),E.return=v,E):(E=s(E,T),E.return=v,E)}function l(v,E,T,P){var L=T.type;return L===Ui?d(v,E,T.props.children,P,T.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===os&&I0(L)===E.type)?(P=s(E,T.props),P.ref=sa(v,E,T),P.return=v,P):(P=Lu(T.type,T.key,T.props,null,v.mode,P),P.ref=sa(v,E,T),P.return=v,P)}function c(v,E,T,P){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=dh(T,v.mode,P),E.return=v,E):(E=s(E,T.children||[]),E.return=v,E)}function d(v,E,T,P,L){return E===null||E.tag!==7?(E=ri(T,v.mode,P,L),E.return=v,E):(E=s(E,T),E.return=v,E)}function m(v,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=ch(""+E,v.mode,T),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ql:return T=Lu(E.type,E.key,E.props,null,v.mode,T),T.ref=sa(v,null,E),T.return=v,T;case Vi:return E=dh(E,v.mode,T),E.return=v,E;case os:var P=E._init;return m(v,P(E._payload),T)}if(da(E)||Zo(E))return E=ri(E,v.mode,T,null),E.return=v,E;lu(v,E)}return null}function g(v,E,T,P){var L=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:a(v,E,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ql:return T.key===L?l(v,E,T,P):null;case Vi:return T.key===L?c(v,E,T,P):null;case os:return L=T._init,g(v,E,L(T._payload),P)}if(da(T)||Zo(T))return L!==null?null:d(v,E,T,P,null);lu(v,T)}return null}function y(v,E,T,P,L){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(T)||null,a(E,v,""+P,L);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ql:return v=v.get(P.key===null?T:P.key)||null,l(E,v,P,L);case Vi:return v=v.get(P.key===null?T:P.key)||null,c(E,v,P,L);case os:var B=P._init;return y(v,E,T,B(P._payload),L)}if(da(P)||Zo(P))return v=v.get(T)||null,d(E,v,P,L,null);lu(E,P)}return null}function w(v,E,T,P){for(var L=null,B=null,k=E,A=E=0,N=null;k!==null&&A<T.length;A++){k.index>A?(N=k,k=null):N=k.sibling;var M=g(v,k,T[A],P);if(M===null){k===null&&(k=N);break}t&&k&&M.alternate===null&&e(v,k),E=i(M,E,A),B===null?L=M:B.sibling=M,B=M,k=N}if(A===T.length)return n(v,k),ft&&Ws(v,A),L;if(k===null){for(;A<T.length;A++)k=m(v,T[A],P),k!==null&&(E=i(k,E,A),B===null?L=k:B.sibling=k,B=k);return ft&&Ws(v,A),L}for(k=r(v,k);A<T.length;A++)N=y(k,v,A,T[A],P),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?A:N.key),E=i(N,E,A),B===null?L=N:B.sibling=N,B=N);return t&&k.forEach(function(V){return e(v,V)}),ft&&Ws(v,A),L}function x(v,E,T,P){var L=Zo(T);if(typeof L!="function")throw Error(me(150));if(T=L.call(T),T==null)throw Error(me(151));for(var B=L=null,k=E,A=E=0,N=null,M=T.next();k!==null&&!M.done;A++,M=T.next()){k.index>A?(N=k,k=null):N=k.sibling;var V=g(v,k,M.value,P);if(V===null){k===null&&(k=N);break}t&&k&&V.alternate===null&&e(v,k),E=i(V,E,A),B===null?L=V:B.sibling=V,B=V,k=N}if(M.done)return n(v,k),ft&&Ws(v,A),L;if(k===null){for(;!M.done;A++,M=T.next())M=m(v,M.value,P),M!==null&&(E=i(M,E,A),B===null?L=M:B.sibling=M,B=M);return ft&&Ws(v,A),L}for(k=r(v,k);!M.done;A++,M=T.next())M=y(k,v,A,M.value,P),M!==null&&(t&&M.alternate!==null&&k.delete(M.key===null?A:M.key),E=i(M,E,A),B===null?L=M:B.sibling=M,B=M);return t&&k.forEach(function(R){return e(v,R)}),ft&&Ws(v,A),L}function _(v,E,T,P){if(typeof T=="object"&&T!==null&&T.type===Ui&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Ql:e:{for(var L=T.key,B=E;B!==null;){if(B.key===L){if(L=T.type,L===Ui){if(B.tag===7){n(v,B.sibling),E=s(B,T.props.children),E.return=v,v=E;break e}}else if(B.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===os&&I0(L)===B.type){n(v,B.sibling),E=s(B,T.props),E.ref=sa(v,B,T),E.return=v,v=E;break e}n(v,B);break}else e(v,B);B=B.sibling}T.type===Ui?(E=ri(T.props.children,v.mode,P,T.key),E.return=v,v=E):(P=Lu(T.type,T.key,T.props,null,v.mode,P),P.ref=sa(v,E,T),P.return=v,v=P)}return o(v);case Vi:e:{for(B=T.key;E!==null;){if(E.key===B)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(v,E.sibling),E=s(E,T.children||[]),E.return=v,v=E;break e}else{n(v,E);break}else e(v,E);E=E.sibling}E=dh(T,v.mode,P),E.return=v,v=E}return o(v);case os:return B=T._init,_(v,E,B(T._payload),P)}if(da(T))return w(v,E,T,P);if(Zo(T))return x(v,E,T,P);lu(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(v,E.sibling),E=s(E,T),E.return=v,v=E):(n(v,E),E=ch(T,v.mode,P),E.return=v,v=E),o(v)):n(v,E)}return _}var ho=x_(!0),w_=x_(!1),nc=Ds(null),rc=null,Wi=null,Fp=null;function Vp(){Fp=Wi=rc=null}function Up(t){var e=nc.current;dt(nc),t._currentValue=e}function lf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function no(t,e){rc=t,Fp=Wi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(In=!0),t.firstContext=null)}function Qn(t){var e=t._currentValue;if(Fp!==t)if(t={context:t,memoizedValue:e,next:null},Wi===null){if(rc===null)throw Error(me(308));Wi=t,rc.dependencies={lanes:0,firstContext:t}}else Wi=Wi.next=t;return e}var Xs=null;function Op(t){Xs===null?Xs=[t]:Xs.push(t)}function __(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Op(e)):(n.next=s.next,s.next=n),e.interleaved=n,Br(t,r)}function Br(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var as=!1;function Bp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Qe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Br(t,n)}return s=r.interleaved,s===null?(e.next=e,Op(r)):(e.next=s.next,s.next=e),r.interleaved=e,Br(t,n)}function Au(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ip(t,n)}}function C0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sc(t,e,n,r){var s=t.updateQueue;as=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var m=s.baseState;o=0,d=c=l=null,a=i;do{var g=a.lane,y=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,x=a;switch(g=e,y=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){m=w.call(y,m,g);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,g=typeof w=="function"?w.call(y,m,g):w,g==null)break e;m=xt({},m,g);break e;case 2:as=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=m):d=d.next=y,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(l=m),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);li|=o,t.lanes=o,t.memoizedState=m}}function k0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(me(191,s));s.call(r)}}}var pl={},wr=Ds(pl),Ha=Ds(pl),$a=Ds(pl);function Zs(t){if(t===pl)throw Error(me(174));return t}function zp(t,e){switch(at($a,e),at(Ha,t),at(wr,pl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bh(e,t)}dt(wr),at(wr,e)}function fo(){dt(wr),dt(Ha),dt($a)}function E_(t){Zs($a.current);var e=Zs(wr.current),n=Bh(e,t.type);e!==n&&(at(Ha,t),at(wr,n))}function Gp(t){Ha.current===t&&(dt(wr),dt(Ha))}var yt=Ds(0);function ic(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sh=[];function Hp(){for(var t=0;t<sh.length;t++)sh[t]._workInProgressVersionPrimary=null;sh.length=0}var Nu=Yr.ReactCurrentDispatcher,ih=Yr.ReactCurrentBatchConfig,ai=0,vt=null,Lt=null,Bt=null,oc=!1,Ta=!1,qa=0,iC=0;function sn(){throw Error(me(321))}function $p(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dr(t[n],e[n]))return!1;return!0}function qp(t,e,n,r,s,i){if(ai=i,vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nu.current=t===null||t.memoizedState===null?uC:cC,t=n(r,s),Ta){i=0;do{if(Ta=!1,qa=0,25<=i)throw Error(me(301));i+=1,Bt=Lt=null,e.updateQueue=null,Nu.current=dC,t=n(r,s)}while(Ta)}if(Nu.current=ac,e=Lt!==null&&Lt.next!==null,ai=0,Bt=Lt=vt=null,oc=!1,e)throw Error(me(300));return t}function Wp(){var t=qa!==0;return qa=0,t}function yr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?vt.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function Xn(){if(Lt===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=Lt.next;var e=Bt===null?vt.memoizedState:Bt.next;if(e!==null)Bt=e,Lt=t;else{if(t===null)throw Error(me(310));Lt=t,t={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Bt===null?vt.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function Wa(t,e){return typeof e=="function"?e(t):e}function oh(t){var e=Xn(),n=e.queue;if(n===null)throw Error(me(311));n.lastRenderedReducer=t;var r=Lt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((ai&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=m,o=r):l=l.next=m,vt.lanes|=d,li|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,dr(r,e.memoizedState)||(In=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,vt.lanes|=i,li|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ah(t){var e=Xn(),n=e.queue;if(n===null)throw Error(me(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);dr(i,e.memoizedState)||(In=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function T_(){}function S_(t,e){var n=vt,r=Xn(),s=e(),i=!dr(r.memoizedState,s);if(i&&(r.memoizedState=s,In=!0),r=r.queue,Kp(k_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,Ka(9,C_.bind(null,n,r,s,e),void 0,null),zt===null)throw Error(me(349));ai&30||I_(n,e,s)}return s}function I_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function C_(t,e,n,r){e.value=n,e.getSnapshot=r,A_(e)&&N_(t)}function k_(t,e,n){return n(function(){A_(e)&&N_(t)})}function A_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dr(t,n)}catch{return!0}}function N_(t){var e=Br(t,1);e!==null&&lr(e,t,1,-1)}function A0(t){var e=yr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:t},e.queue=t,t=t.dispatch=lC.bind(null,vt,t),[e.memoizedState,t]}function Ka(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function R_(){return Xn().memoizedState}function Ru(t,e,n,r){var s=yr();vt.flags|=t,s.memoizedState=Ka(1|e,n,void 0,r===void 0?null:r)}function Gc(t,e,n,r){var s=Xn();r=r===void 0?null:r;var i=void 0;if(Lt!==null){var o=Lt.memoizedState;if(i=o.destroy,r!==null&&$p(r,o.deps)){s.memoizedState=Ka(e,n,i,r);return}}vt.flags|=t,s.memoizedState=Ka(1|e,n,i,r)}function N0(t,e){return Ru(8390656,8,t,e)}function Kp(t,e){return Gc(2048,8,t,e)}function P_(t,e){return Gc(4,2,t,e)}function M_(t,e){return Gc(4,4,t,e)}function D_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function L_(t,e,n){return n=n!=null?n.concat([t]):null,Gc(4,4,D_.bind(null,e,t),n)}function Jp(){}function j_(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$p(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function F_(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$p(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function V_(t,e,n){return ai&21?(dr(n,e)||(n=Gw(),vt.lanes|=n,li|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,In=!0),t.memoizedState=n)}function oC(t,e){var n=nt;nt=n!==0&&4>n?n:4,t(!0);var r=ih.transition;ih.transition={};try{t(!1),e()}finally{nt=n,ih.transition=r}}function U_(){return Xn().memoizedState}function aC(t,e,n){var r=_s(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},O_(t))B_(e,n);else if(n=__(t,e,n,r),n!==null){var s=vn();lr(n,t,r,s),z_(n,e,r)}}function lC(t,e,n){var r=_s(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(O_(t))B_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,dr(a,o)){var l=e.interleaved;l===null?(s.next=s,Op(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=__(t,e,s,r),n!==null&&(s=vn(),lr(n,t,r,s),z_(n,e,r))}}function O_(t){var e=t.alternate;return t===vt||e!==null&&e===vt}function B_(t,e){Ta=oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function z_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ip(t,n)}}var ac={readContext:Qn,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},uC={readContext:Qn,useCallback:function(t,e){return yr().memoizedState=[t,e===void 0?null:e],t},useContext:Qn,useEffect:N0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ru(4194308,4,D_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ru(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ru(4,2,t,e)},useMemo:function(t,e){var n=yr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aC.bind(null,vt,t),[r.memoizedState,t]},useRef:function(t){var e=yr();return t={current:t},e.memoizedState=t},useState:A0,useDebugValue:Jp,useDeferredValue:function(t){return yr().memoizedState=t},useTransition:function(){var t=A0(!1),e=t[0];return t=oC.bind(null,t[1]),yr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=vt,s=yr();if(ft){if(n===void 0)throw Error(me(407));n=n()}else{if(n=e(),zt===null)throw Error(me(349));ai&30||I_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,N0(k_.bind(null,r,i,t),[t]),r.flags|=2048,Ka(9,C_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=yr(),e=zt.identifierPrefix;if(ft){var n=jr,r=Lr;n=(r&~(1<<32-ar(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cC={readContext:Qn,useCallback:j_,useContext:Qn,useEffect:Kp,useImperativeHandle:L_,useInsertionEffect:P_,useLayoutEffect:M_,useMemo:F_,useReducer:oh,useRef:R_,useState:function(){return oh(Wa)},useDebugValue:Jp,useDeferredValue:function(t){var e=Xn();return V_(e,Lt.memoizedState,t)},useTransition:function(){var t=oh(Wa)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:T_,useSyncExternalStore:S_,useId:U_,unstable_isNewReconciler:!1},dC={readContext:Qn,useCallback:j_,useContext:Qn,useEffect:Kp,useImperativeHandle:L_,useInsertionEffect:P_,useLayoutEffect:M_,useMemo:F_,useReducer:ah,useRef:R_,useState:function(){return ah(Wa)},useDebugValue:Jp,useDeferredValue:function(t){var e=Xn();return Lt===null?e.memoizedState=t:V_(e,Lt.memoizedState,t)},useTransition:function(){var t=ah(Wa)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:T_,useSyncExternalStore:S_,useId:U_,unstable_isNewReconciler:!1};function sr(t,e){if(t&&t.defaultProps){e=xt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hc={isMounted:function(t){return(t=t._reactInternals)?vi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vn(),s=_s(t),i=Fr(r,s);i.payload=e,n!=null&&(i.callback=n),e=xs(t,i,s),e!==null&&(lr(e,t,s,r),Au(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vn(),s=_s(t),i=Fr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=xs(t,i,s),e!==null&&(lr(e,t,s,r),Au(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vn(),r=_s(t),s=Fr(n,r);s.tag=2,e!=null&&(s.callback=e),e=xs(t,s,r),e!==null&&(lr(e,t,r,n),Au(e,t,r))}};function R0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Oa(n,r)||!Oa(s,i):!0}function G_(t,e,n){var r=!1,s=ks,i=e.contextType;return typeof i=="object"&&i!==null?i=Qn(i):(s=kn(e)?ii:fn.current,r=e.contextTypes,i=(r=r!=null)?uo(t,s):ks),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function P0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hc.enqueueReplaceState(e,e.state,null)}function cf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Bp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qn(i):(i=kn(e)?ii:fn.current,s.context=uo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(uf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hc.enqueueReplaceState(s,s.state,null),sc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function po(t,e){try{var n="",r=e;do n+=US(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function lh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function df(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hC=typeof WeakMap=="function"?WeakMap:Map;function H_(t,e,n){n=Fr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){uc||(uc=!0,_f=r),df(t,e)},n}function $_(t,e,n){n=Fr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){df(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){df(t,e),typeof r!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function M0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hC;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=IC.bind(null,t,e,n),e.then(t,t))}function D0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function L0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fr(-1,1),e.tag=2,xs(n,e,1))),n.lanes|=1),t)}var fC=Yr.ReactCurrentOwner,In=!1;function gn(t,e,n,r){e.child=t===null?w_(e,null,n,r):ho(e,t.child,n,r)}function j0(t,e,n,r,s){n=n.render;var i=e.ref;return no(e,s),r=qp(t,e,n,r,i,s),n=Wp(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zr(t,e,s)):(ft&&n&&Dp(e),e.flags|=1,gn(t,e,r,s),e.child)}function F0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!rm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,q_(t,e,i,r,s)):(t=Lu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oa,n(o,r)&&t.ref===e.ref)return zr(t,e,s)}return e.flags|=1,t=bs(i,r),t.ref=e.ref,t.return=e,e.child=t}function q_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oa(i,r)&&t.ref===e.ref)if(In=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(In=!0);else return e.lanes=t.lanes,zr(t,e,s)}return hf(t,e,n,r,s)}function W_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(Ji,Mn),Mn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,at(Ji,Mn),Mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,at(Ji,Mn),Mn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,at(Ji,Mn),Mn|=r;return gn(t,e,s,n),e.child}function K_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hf(t,e,n,r,s){var i=kn(n)?ii:fn.current;return i=uo(e,i),no(e,s),n=qp(t,e,n,r,i,s),r=Wp(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zr(t,e,s)):(ft&&r&&Dp(e),e.flags|=1,gn(t,e,n,s),e.child)}function V0(t,e,n,r,s){if(kn(n)){var i=!0;Zu(e)}else i=!1;if(no(e,s),e.stateNode===null)Pu(t,e),G_(e,n,r),cf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Qn(c):(c=kn(n)?ii:fn.current,c=uo(e,c));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&P0(e,o,r,c),as=!1;var g=e.memoizedState;o.state=g,sc(e,r,o,s),l=e.memoizedState,a!==r||g!==l||Cn.current||as?(typeof d=="function"&&(uf(e,n,d,r),l=e.memoizedState),(a=as||R0(e,n,a,r,g,l,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,b_(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:sr(e.type,a),o.props=c,m=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Qn(l):(l=kn(n)?ii:fn.current,l=uo(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==l)&&P0(e,o,r,l),as=!1,g=e.memoizedState,o.state=g,sc(e,r,o,s);var w=e.memoizedState;a!==m||g!==w||Cn.current||as?(typeof y=="function"&&(uf(e,n,y,r),w=e.memoizedState),(c=as||R0(e,n,c,r,g,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return ff(t,e,n,r,i,s)}function ff(t,e,n,r,s,i){K_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&E0(e,n,!1),zr(t,e,i);r=e.stateNode,fC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ho(e,t.child,null,i),e.child=ho(e,null,a,i)):gn(t,e,a,i),e.memoizedState=r.state,s&&E0(e,n,!0),e.child}function J_(t){var e=t.stateNode;e.pendingContext?b0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&b0(t,e.context,!1),zp(t,e.containerInfo)}function U0(t,e,n,r,s){return co(),jp(s),e.flags|=256,gn(t,e,n,r),e.child}var pf={dehydrated:null,treeContext:null,retryLane:0};function mf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Y_(t,e,n){var r=e.pendingProps,s=yt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),at(yt,s&1),t===null)return af(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wc(o,r,0,null),t=ri(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=mf(n),e.memoizedState=pf,t):Yp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return pC(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=bs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=bs(a,i):(i=ri(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?mf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=pf,r}return i=t.child,t=i.sibling,r=bs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yp(t,e){return e=Wc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uu(t,e,n,r){return r!==null&&jp(r),ho(e,t.child,null,n),t=Yp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pC(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=lh(Error(me(422))),uu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Wc({mode:"visible",children:r.children},s,0,null),i=ri(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ho(e,t.child,null,o),e.child.memoizedState=mf(o),e.memoizedState=pf,i);if(!(e.mode&1))return uu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(me(419)),r=lh(i,r,void 0),uu(t,e,o,r)}if(a=(o&t.childLanes)!==0,In||a){if(r=zt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Br(t,s),lr(r,t,s,-1))}return nm(),r=lh(Error(me(421))),uu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=CC.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dn=vs(s.nextSibling),jn=e,ft=!0,or=null,t!==null&&(qn[Wn++]=Lr,qn[Wn++]=jr,qn[Wn++]=oi,Lr=t.id,jr=t.overflow,oi=e),e=Yp(e,r.children),e.flags|=4096,e)}function O0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lf(t.return,e,n)}function uh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Q_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(gn(t,e,r.children,n),r=yt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&O0(t,n,e);else if(t.tag===19)O0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(at(yt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ic(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),uh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ic(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}uh(e,!0,n,null,i);break;case"together":uh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),li|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(me(153));if(e.child!==null){for(t=e.child,n=bs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mC(t,e,n){switch(e.tag){case 3:J_(e),co();break;case 5:E_(e);break;case 1:kn(e.type)&&Zu(e);break;case 4:zp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;at(nc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(at(yt,yt.current&1),e.flags|=128,null):n&e.child.childLanes?Y_(t,e,n):(at(yt,yt.current&1),t=zr(t,e,n),t!==null?t.sibling:null);at(yt,yt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Q_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),at(yt,yt.current),r)break;return null;case 22:case 23:return e.lanes=0,W_(t,e,n)}return zr(t,e,n)}var X_,gf,Z_,eb;X_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gf=function(){};Z_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Zs(wr.current);var i=null;switch(n){case"input":s=Fh(t,s),r=Fh(t,r),i=[];break;case"select":s=xt({},s,{value:void 0}),r=xt({},r,{value:void 0}),i=[];break;case"textarea":s=Oh(t,s),r=Oh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Qu)}zh(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ma.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ma.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ut("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};eb=function(t,e,n,r){n!==r&&(e.flags|=4)};function ia(t,e){if(!ft)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function on(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gC(t,e,n){var r=e.pendingProps;switch(Lp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(e),null;case 1:return kn(e.type)&&Xu(),on(e),null;case 3:return r=e.stateNode,fo(),dt(Cn),dt(fn),Hp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(au(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,or!==null&&(Tf(or),or=null))),gf(t,e),on(e),null;case 5:Gp(e);var s=Zs($a.current);if(n=e.type,t!==null&&e.stateNode!=null)Z_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(me(166));return on(e),null}if(t=Zs(wr.current),au(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[vr]=e,r[Ga]=i,t=(e.mode&1)!==0,n){case"dialog":ut("cancel",r),ut("close",r);break;case"iframe":case"object":case"embed":ut("load",r);break;case"video":case"audio":for(s=0;s<fa.length;s++)ut(fa[s],r);break;case"source":ut("error",r);break;case"img":case"image":case"link":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"input":Jg(r,i),ut("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ut("invalid",r);break;case"textarea":Qg(r,i),ut("invalid",r)}zh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ou(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ou(r.textContent,a,t),s=["children",""+a]):Ma.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ut("scroll",r)}switch(n){case"input":Xl(r),Yg(r,i,!0);break;case"textarea":Xl(r),Xg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Qu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[vr]=e,t[Ga]=r,X_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Gh(n,r),n){case"dialog":ut("cancel",t),ut("close",t),s=r;break;case"iframe":case"object":case"embed":ut("load",t),s=r;break;case"video":case"audio":for(s=0;s<fa.length;s++)ut(fa[s],t);s=r;break;case"source":ut("error",t),s=r;break;case"img":case"image":case"link":ut("error",t),ut("load",t),s=r;break;case"details":ut("toggle",t),s=r;break;case"input":Jg(t,r),s=Fh(t,r),ut("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=xt({},r,{value:void 0}),ut("invalid",t);break;case"textarea":Qg(t,r),s=Oh(t,r),ut("invalid",t);break;default:s=r}zh(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Rw(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Aw(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Da(t,l):typeof l=="number"&&Da(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ma.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ut("scroll",t):l!=null&&wp(t,i,l,o))}switch(n){case"input":Xl(t),Yg(t,r,!1);break;case"textarea":Xl(t),Xg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Xi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Xi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Qu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return on(e),null;case 6:if(t&&e.stateNode!=null)eb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(me(166));if(n=Zs($a.current),Zs(wr.current),au(e)){if(r=e.stateNode,n=e.memoizedProps,r[vr]=e,(i=r.nodeValue!==n)&&(t=jn,t!==null))switch(t.tag){case 3:ou(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ou(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vr]=e,e.stateNode=r}return on(e),null;case 13:if(dt(yt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ft&&Dn!==null&&e.mode&1&&!(e.flags&128))v_(),co(),e.flags|=98560,i=!1;else if(i=au(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(me(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(me(317));i[vr]=e}else co(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;on(e),i=!1}else or!==null&&(Tf(or),or=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||yt.current&1?jt===0&&(jt=3):nm())),e.updateQueue!==null&&(e.flags|=4),on(e),null);case 4:return fo(),gf(t,e),t===null&&Ba(e.stateNode.containerInfo),on(e),null;case 10:return Up(e.type._context),on(e),null;case 17:return kn(e.type)&&Xu(),on(e),null;case 19:if(dt(yt),i=e.memoizedState,i===null)return on(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ia(i,!1);else{if(jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ic(t),o!==null){for(e.flags|=128,ia(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return at(yt,yt.current&1|2),e.child}t=t.sibling}i.tail!==null&&It()>mo&&(e.flags|=128,r=!0,ia(i,!1),e.lanes=4194304)}else{if(!r)if(t=ic(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ia(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ft)return on(e),null}else 2*It()-i.renderingStartTime>mo&&n!==1073741824&&(e.flags|=128,r=!0,ia(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=It(),e.sibling=null,n=yt.current,at(yt,r?n&1|2:n&1),e):(on(e),null);case 22:case 23:return tm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mn&1073741824&&(on(e),e.subtreeFlags&6&&(e.flags|=8192)):on(e),null;case 24:return null;case 25:return null}throw Error(me(156,e.tag))}function yC(t,e){switch(Lp(e),e.tag){case 1:return kn(e.type)&&Xu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fo(),dt(Cn),dt(fn),Hp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gp(e),null;case 13:if(dt(yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(me(340));co()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return dt(yt),null;case 4:return fo(),null;case 10:return Up(e.type._context),null;case 22:case 23:return tm(),null;case 24:return null;default:return null}}var cu=!1,un=!1,vC=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Ki(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Et(t,e,r)}else n.current=null}function yf(t,e,n){try{n()}catch(r){Et(t,e,r)}}var B0=!1;function xC(t,e){if(Zh=Ku,t=i_(),Mp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,m=t,g=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==i||r!==0&&m.nodeType!==3||(l=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)g=m,m=y;for(;;){if(m===t)break t;if(g===n&&++c===s&&(a=o),g===i&&++d===r&&(l=o),(y=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ef={focusedElem:t,selectionRange:n},Ku=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,_=w.memoizedState,v=e.stateNode,E=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:sr(e.type,x),_);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(me(163))}}catch(P){Et(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return w=B0,B0=!1,w}function Sa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yf(e,n,i)}s=s.next}while(s!==r)}}function $c(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tb(t){var e=t.alternate;e!==null&&(t.alternate=null,tb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vr],delete e[Ga],delete e[rf],delete e[tC],delete e[nC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nb(t){return t.tag===5||t.tag===3||t.tag===4}function z0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qu));else if(r!==4&&(t=t.child,t!==null))for(xf(t,e,n),t=t.sibling;t!==null;)xf(t,e,n),t=t.sibling}function wf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wf(t,e,n),t=t.sibling;t!==null;)wf(t,e,n),t=t.sibling}var qt=null,ir=!1;function is(t,e,n){for(n=n.child;n!==null;)rb(t,e,n),n=n.sibling}function rb(t,e,n){if(xr&&typeof xr.onCommitFiberUnmount=="function")try{xr.onCommitFiberUnmount(Fc,n)}catch{}switch(n.tag){case 5:un||Ki(n,e);case 6:var r=qt,s=ir;qt=null,is(t,e,n),qt=r,ir=s,qt!==null&&(ir?(t=qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qt.removeChild(n.stateNode));break;case 18:qt!==null&&(ir?(t=qt,n=n.stateNode,t.nodeType===8?nh(t.parentNode,n):t.nodeType===1&&nh(t,n),Va(t)):nh(qt,n.stateNode));break;case 4:r=qt,s=ir,qt=n.stateNode.containerInfo,ir=!0,is(t,e,n),qt=r,ir=s;break;case 0:case 11:case 14:case 15:if(!un&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yf(n,e,o),s=s.next}while(s!==r)}is(t,e,n);break;case 1:if(!un&&(Ki(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Et(n,e,a)}is(t,e,n);break;case 21:is(t,e,n);break;case 22:n.mode&1?(un=(r=un)||n.memoizedState!==null,is(t,e,n),un=r):is(t,e,n);break;default:is(t,e,n)}}function G0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vC),e.forEach(function(r){var s=kC.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function rr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qt=a.stateNode,ir=!1;break e;case 3:qt=a.stateNode.containerInfo,ir=!0;break e;case 4:qt=a.stateNode.containerInfo,ir=!0;break e}a=a.return}if(qt===null)throw Error(me(160));rb(i,o,s),qt=null,ir=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Et(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sb(e,t),e=e.sibling}function sb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rr(e,t),gr(t),r&4){try{Sa(3,t,t.return),$c(3,t)}catch(x){Et(t,t.return,x)}try{Sa(5,t,t.return)}catch(x){Et(t,t.return,x)}}break;case 1:rr(e,t),gr(t),r&512&&n!==null&&Ki(n,n.return);break;case 5:if(rr(e,t),gr(t),r&512&&n!==null&&Ki(n,n.return),t.flags&32){var s=t.stateNode;try{Da(s,"")}catch(x){Et(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Iw(s,i),Gh(a,o);var c=Gh(a,i);for(o=0;o<l.length;o+=2){var d=l[o],m=l[o+1];d==="style"?Rw(s,m):d==="dangerouslySetInnerHTML"?Aw(s,m):d==="children"?Da(s,m):wp(s,d,m,c)}switch(a){case"input":Vh(s,i);break;case"textarea":Cw(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Xi(s,!!i.multiple,y,!1):g!==!!i.multiple&&(i.defaultValue!=null?Xi(s,!!i.multiple,i.defaultValue,!0):Xi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ga]=i}catch(x){Et(t,t.return,x)}}break;case 6:if(rr(e,t),gr(t),r&4){if(t.stateNode===null)throw Error(me(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Et(t,t.return,x)}}break;case 3:if(rr(e,t),gr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Va(e.containerInfo)}catch(x){Et(t,t.return,x)}break;case 4:rr(e,t),gr(t);break;case 13:rr(e,t),gr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zp=It())),r&4&&G0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(un=(c=un)||d,rr(e,t),un=c):rr(e,t),gr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Te=t,d=t.child;d!==null;){for(m=Te=d;Te!==null;){switch(g=Te,y=g.child,g.tag){case 0:case 11:case 14:case 15:Sa(4,g,g.return);break;case 1:Ki(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){Et(r,n,x)}}break;case 5:Ki(g,g.return);break;case 22:if(g.memoizedState!==null){$0(m);continue}}y!==null?(y.return=g,Te=y):$0(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,l=m.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Nw("display",o))}catch(x){Et(t,t.return,x)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(x){Et(t,t.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:rr(e,t),gr(t),r&4&&G0(t);break;case 21:break;default:rr(e,t),gr(t)}}function gr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nb(n)){var r=n;break e}n=n.return}throw Error(me(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Da(s,""),r.flags&=-33);var i=z0(t);wf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=z0(t);xf(t,a,o);break;default:throw Error(me(161))}}catch(l){Et(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wC(t,e,n){Te=t,ib(t)}function ib(t,e,n){for(var r=(t.mode&1)!==0;Te!==null;){var s=Te,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||cu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||un;a=cu;var c=un;if(cu=o,(un=l)&&!c)for(Te=s;Te!==null;)o=Te,l=o.child,o.tag===22&&o.memoizedState!==null?q0(s):l!==null?(l.return=o,Te=l):q0(s);for(;i!==null;)Te=i,ib(i),i=i.sibling;Te=s,cu=a,un=c}H0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Te=i):H0(t)}}function H0(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:un||$c(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!un)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:sr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&k0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}k0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&Va(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(me(163))}un||e.flags&512&&vf(e)}catch(g){Et(e,e.return,g)}}if(e===t){Te=null;break}if(n=e.sibling,n!==null){n.return=e.return,Te=n;break}Te=e.return}}function $0(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Te=n;break}Te=e.return}}function q0(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$c(4,e)}catch(l){Et(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Et(e,s,l)}}var i=e.return;try{vf(e)}catch(l){Et(e,i,l)}break;case 5:var o=e.return;try{vf(e)}catch(l){Et(e,o,l)}}}catch(l){Et(e,e.return,l)}if(e===t){Te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Te=a;break}Te=e.return}}var _C=Math.ceil,lc=Yr.ReactCurrentDispatcher,Qp=Yr.ReactCurrentOwner,Jn=Yr.ReactCurrentBatchConfig,Qe=0,zt=null,Rt=null,Jt=0,Mn=0,Ji=Ds(0),jt=0,Ja=null,li=0,qc=0,Xp=0,Ia=null,Tn=null,Zp=0,mo=1/0,Rr=null,uc=!1,_f=null,ws=null,du=!1,hs=null,cc=0,Ca=0,bf=null,Mu=-1,Du=0;function vn(){return Qe&6?It():Mu!==-1?Mu:Mu=It()}function _s(t){return t.mode&1?Qe&2&&Jt!==0?Jt&-Jt:sC.transition!==null?(Du===0&&(Du=Gw()),Du):(t=nt,t!==0||(t=window.event,t=t===void 0?16:Yw(t.type)),t):1}function lr(t,e,n,r){if(50<Ca)throw Ca=0,bf=null,Error(me(185));dl(t,n,r),(!(Qe&2)||t!==zt)&&(t===zt&&(!(Qe&2)&&(qc|=n),jt===4&&us(t,Jt)),An(t,r),n===1&&Qe===0&&!(e.mode&1)&&(mo=It()+500,zc&&Ls()))}function An(t,e){var n=t.callbackNode;sI(t,e);var r=Wu(t,t===zt?Jt:0);if(r===0)n!==null&&t0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&t0(n),e===1)t.tag===0?rC(W0.bind(null,t)):m_(W0.bind(null,t)),ZI(function(){!(Qe&6)&&Ls()}),n=null;else{switch(Hw(r)){case 1:n=Sp;break;case 4:n=Bw;break;case 16:n=qu;break;case 536870912:n=zw;break;default:n=qu}n=fb(n,ob.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ob(t,e){if(Mu=-1,Du=0,Qe&6)throw Error(me(327));var n=t.callbackNode;if(ro()&&t.callbackNode!==n)return null;var r=Wu(t,t===zt?Jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dc(t,r);else{e=r;var s=Qe;Qe|=2;var i=lb();(zt!==t||Jt!==e)&&(Rr=null,mo=It()+500,ni(t,e));do try{TC();break}catch(a){ab(t,a)}while(!0);Vp(),lc.current=i,Qe=s,Rt!==null?e=0:(zt=null,Jt=0,e=jt)}if(e!==0){if(e===2&&(s=Kh(t),s!==0&&(r=s,e=Ef(t,s))),e===1)throw n=Ja,ni(t,0),us(t,r),An(t,It()),n;if(e===6)us(t,r);else{if(s=t.current.alternate,!(r&30)&&!bC(s)&&(e=dc(t,r),e===2&&(i=Kh(t),i!==0&&(r=i,e=Ef(t,i))),e===1))throw n=Ja,ni(t,0),us(t,r),An(t,It()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(me(345));case 2:Ks(t,Tn,Rr);break;case 3:if(us(t,r),(r&130023424)===r&&(e=Zp+500-It(),10<e)){if(Wu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){vn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=nf(Ks.bind(null,t,Tn,Rr),e);break}Ks(t,Tn,Rr);break;case 4:if(us(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ar(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=It()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_C(r/1960))-r,10<r){t.timeoutHandle=nf(Ks.bind(null,t,Tn,Rr),r);break}Ks(t,Tn,Rr);break;case 5:Ks(t,Tn,Rr);break;default:throw Error(me(329))}}}return An(t,It()),t.callbackNode===n?ob.bind(null,t):null}function Ef(t,e){var n=Ia;return t.current.memoizedState.isDehydrated&&(ni(t,e).flags|=256),t=dc(t,e),t!==2&&(e=Tn,Tn=n,e!==null&&Tf(e)),t}function Tf(t){Tn===null?Tn=t:Tn.push.apply(Tn,t)}function bC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!dr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function us(t,e){for(e&=~Xp,e&=~qc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ar(e),r=1<<n;t[n]=-1,e&=~r}}function W0(t){if(Qe&6)throw Error(me(327));ro();var e=Wu(t,0);if(!(e&1))return An(t,It()),null;var n=dc(t,e);if(t.tag!==0&&n===2){var r=Kh(t);r!==0&&(e=r,n=Ef(t,r))}if(n===1)throw n=Ja,ni(t,0),us(t,e),An(t,It()),n;if(n===6)throw Error(me(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ks(t,Tn,Rr),An(t,It()),null}function em(t,e){var n=Qe;Qe|=1;try{return t(e)}finally{Qe=n,Qe===0&&(mo=It()+500,zc&&Ls())}}function ui(t){hs!==null&&hs.tag===0&&!(Qe&6)&&ro();var e=Qe;Qe|=1;var n=Jn.transition,r=nt;try{if(Jn.transition=null,nt=1,t)return t()}finally{nt=r,Jn.transition=n,Qe=e,!(Qe&6)&&Ls()}}function tm(){Mn=Ji.current,dt(Ji)}function ni(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,XI(n)),Rt!==null)for(n=Rt.return;n!==null;){var r=n;switch(Lp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xu();break;case 3:fo(),dt(Cn),dt(fn),Hp();break;case 5:Gp(r);break;case 4:fo();break;case 13:dt(yt);break;case 19:dt(yt);break;case 10:Up(r.type._context);break;case 22:case 23:tm()}n=n.return}if(zt=t,Rt=t=bs(t.current,null),Jt=Mn=e,jt=0,Ja=null,Xp=qc=li=0,Tn=Ia=null,Xs!==null){for(e=0;e<Xs.length;e++)if(n=Xs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Xs=null}return t}function ab(t,e){do{var n=Rt;try{if(Vp(),Nu.current=ac,oc){for(var r=vt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}oc=!1}if(ai=0,Bt=Lt=vt=null,Ta=!1,qa=0,Qp.current=null,n===null||n.return===null){jt=1,Ja=e,Rt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Jt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=D0(o);if(y!==null){y.flags&=-257,L0(y,o,a,i,e),y.mode&1&&M0(i,c,e),e=y,l=c;var w=e.updateQueue;if(w===null){var x=new Set;x.add(l),e.updateQueue=x}else w.add(l);break e}else{if(!(e&1)){M0(i,c,e),nm();break e}l=Error(me(426))}}else if(ft&&a.mode&1){var _=D0(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),L0(_,o,a,i,e),jp(po(l,a));break e}}i=l=po(l,a),jt!==4&&(jt=2),Ia===null?Ia=[i]:Ia.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=H_(i,l,e);C0(i,v);break e;case 1:a=l;var E=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ws===null||!ws.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=$_(i,a,e);C0(i,P);break e}}i=i.return}while(i!==null)}cb(n)}catch(L){e=L,Rt===n&&n!==null&&(Rt=n=n.return);continue}break}while(!0)}function lb(){var t=lc.current;return lc.current=ac,t===null?ac:t}function nm(){(jt===0||jt===3||jt===2)&&(jt=4),zt===null||!(li&268435455)&&!(qc&268435455)||us(zt,Jt)}function dc(t,e){var n=Qe;Qe|=2;var r=lb();(zt!==t||Jt!==e)&&(Rr=null,ni(t,e));do try{EC();break}catch(s){ab(t,s)}while(!0);if(Vp(),Qe=n,lc.current=r,Rt!==null)throw Error(me(261));return zt=null,Jt=0,jt}function EC(){for(;Rt!==null;)ub(Rt)}function TC(){for(;Rt!==null&&!JS();)ub(Rt)}function ub(t){var e=hb(t.alternate,t,Mn);t.memoizedProps=t.pendingProps,e===null?cb(t):Rt=e,Qp.current=null}function cb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yC(n,e),n!==null){n.flags&=32767,Rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jt=6,Rt=null;return}}else if(n=gC(n,e,Mn),n!==null){Rt=n;return}if(e=e.sibling,e!==null){Rt=e;return}Rt=e=t}while(e!==null);jt===0&&(jt=5)}function Ks(t,e,n){var r=nt,s=Jn.transition;try{Jn.transition=null,nt=1,SC(t,e,n,r)}finally{Jn.transition=s,nt=r}return null}function SC(t,e,n,r){do ro();while(hs!==null);if(Qe&6)throw Error(me(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(me(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(iI(t,i),t===zt&&(Rt=zt=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||du||(du=!0,fb(qu,function(){return ro(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Jn.transition,Jn.transition=null;var o=nt;nt=1;var a=Qe;Qe|=4,Qp.current=null,xC(t,n),sb(n,t),$I(ef),Ku=!!Zh,ef=Zh=null,t.current=n,wC(n),YS(),Qe=a,nt=o,Jn.transition=i}else t.current=n;if(du&&(du=!1,hs=t,cc=s),i=t.pendingLanes,i===0&&(ws=null),ZS(n.stateNode),An(t,It()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(uc)throw uc=!1,t=_f,_f=null,t;return cc&1&&t.tag!==0&&ro(),i=t.pendingLanes,i&1?t===bf?Ca++:(Ca=0,bf=t):Ca=0,Ls(),null}function ro(){if(hs!==null){var t=Hw(cc),e=Jn.transition,n=nt;try{if(Jn.transition=null,nt=16>t?16:t,hs===null)var r=!1;else{if(t=hs,hs=null,cc=0,Qe&6)throw Error(me(331));var s=Qe;for(Qe|=4,Te=t.current;Te!==null;){var i=Te,o=i.child;if(Te.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Te=c;Te!==null;){var d=Te;switch(d.tag){case 0:case 11:case 15:Sa(8,d,i)}var m=d.child;if(m!==null)m.return=d,Te=m;else for(;Te!==null;){d=Te;var g=d.sibling,y=d.return;if(tb(d),d===c){Te=null;break}if(g!==null){g.return=y,Te=g;break}Te=y}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}Te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Te=o;else e:for(;Te!==null;){if(i=Te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Sa(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Te=v;break e}Te=i.return}}var E=t.current;for(Te=E;Te!==null;){o=Te;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Te=T;else e:for(o=E;Te!==null;){if(a=Te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$c(9,a)}}catch(L){Et(a,a.return,L)}if(a===o){Te=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,Te=P;break e}Te=a.return}}if(Qe=s,Ls(),xr&&typeof xr.onPostCommitFiberRoot=="function")try{xr.onPostCommitFiberRoot(Fc,t)}catch{}r=!0}return r}finally{nt=n,Jn.transition=e}}return!1}function K0(t,e,n){e=po(n,e),e=H_(t,e,1),t=xs(t,e,1),e=vn(),t!==null&&(dl(t,1,e),An(t,e))}function Et(t,e,n){if(t.tag===3)K0(t,t,n);else for(;e!==null;){if(e.tag===3){K0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ws===null||!ws.has(r))){t=po(n,t),t=$_(e,t,1),e=xs(e,t,1),t=vn(),e!==null&&(dl(e,1,t),An(e,t));break}}e=e.return}}function IC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vn(),t.pingedLanes|=t.suspendedLanes&n,zt===t&&(Jt&n)===n&&(jt===4||jt===3&&(Jt&130023424)===Jt&&500>It()-Zp?ni(t,0):Xp|=n),An(t,e)}function db(t,e){e===0&&(t.mode&1?(e=tu,tu<<=1,!(tu&130023424)&&(tu=4194304)):e=1);var n=vn();t=Br(t,e),t!==null&&(dl(t,e,n),An(t,n))}function CC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),db(t,n)}function kC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(me(314))}r!==null&&r.delete(e),db(t,n)}var hb;hb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Cn.current)In=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return In=!1,mC(t,e,n);In=!!(t.flags&131072)}else In=!1,ft&&e.flags&1048576&&g_(e,tc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pu(t,e),t=e.pendingProps;var s=uo(e,fn.current);no(e,n),s=qp(null,e,r,t,s,n);var i=Wp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(r)?(i=!0,Zu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bp(e),s.updater=Hc,e.stateNode=s,s._reactInternals=e,cf(e,r,t,n),e=ff(null,e,r,!0,i,n)):(e.tag=0,ft&&i&&Dp(e),gn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=NC(r),t=sr(r,t),s){case 0:e=hf(null,e,r,t,n);break e;case 1:e=V0(null,e,r,t,n);break e;case 11:e=j0(null,e,r,t,n);break e;case 14:e=F0(null,e,r,sr(r.type,t),n);break e}throw Error(me(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sr(r,s),hf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sr(r,s),V0(t,e,r,s,n);case 3:e:{if(J_(e),t===null)throw Error(me(387));r=e.pendingProps,i=e.memoizedState,s=i.element,b_(t,e),sc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=po(Error(me(423)),e),e=U0(t,e,r,n,s);break e}else if(r!==s){s=po(Error(me(424)),e),e=U0(t,e,r,n,s);break e}else for(Dn=vs(e.stateNode.containerInfo.firstChild),jn=e,ft=!0,or=null,n=w_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(co(),r===s){e=zr(t,e,n);break e}gn(t,e,r,n)}e=e.child}return e;case 5:return E_(e),t===null&&af(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,tf(r,s)?o=null:i!==null&&tf(r,i)&&(e.flags|=32),K_(t,e),gn(t,e,o,n),e.child;case 6:return t===null&&af(e),null;case 13:return Y_(t,e,n);case 4:return zp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ho(e,null,r,n):gn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sr(r,s),j0(t,e,r,s,n);case 7:return gn(t,e,e.pendingProps,n),e.child;case 8:return gn(t,e,e.pendingProps.children,n),e.child;case 12:return gn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,at(nc,r._currentValue),r._currentValue=o,i!==null)if(dr(i.value,o)){if(i.children===s.children&&!Cn.current){e=zr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Fr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),lf(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(me(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}gn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,no(e,n),s=Qn(s),r=r(s),e.flags|=1,gn(t,e,r,n),e.child;case 14:return r=e.type,s=sr(r,e.pendingProps),s=sr(r.type,s),F0(t,e,r,s,n);case 15:return q_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:sr(r,s),Pu(t,e),e.tag=1,kn(r)?(t=!0,Zu(e)):t=!1,no(e,n),G_(e,r,s),cf(e,r,s,n),ff(null,e,r,!0,t,n);case 19:return Q_(t,e,n);case 22:return W_(t,e,n)}throw Error(me(156,e.tag))};function fb(t,e){return Ow(t,e)}function AC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(t,e,n,r){return new AC(t,e,n,r)}function rm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function NC(t){if(typeof t=="function")return rm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bp)return 11;if(t===Ep)return 14}return 2}function bs(t,e){var n=t.alternate;return n===null?(n=Kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")rm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ui:return ri(n.children,s,i,e);case _p:o=8,s|=8;break;case Mh:return t=Kn(12,n,e,s|2),t.elementType=Mh,t.lanes=i,t;case Dh:return t=Kn(13,n,e,s),t.elementType=Dh,t.lanes=i,t;case Lh:return t=Kn(19,n,e,s),t.elementType=Lh,t.lanes=i,t;case Ew:return Wc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _w:o=10;break e;case bw:o=9;break e;case bp:o=11;break e;case Ep:o=14;break e;case os:o=16,r=null;break e}throw Error(me(130,t==null?t:typeof t,""))}return e=Kn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ri(t,e,n,r){return t=Kn(7,t,r,e),t.lanes=n,t}function Wc(t,e,n,r){return t=Kn(22,t,r,e),t.elementType=Ew,t.lanes=n,t.stateNode={isHidden:!1},t}function ch(t,e,n){return t=Kn(6,t,null,e),t.lanes=n,t}function dh(t,e,n){return e=Kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RC(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$d(0),this.expirationTimes=$d(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$d(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sm(t,e,n,r,s,i,o,a,l){return t=new RC(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bp(i),t}function PC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pb(t){if(!t)return ks;t=t._reactInternals;e:{if(vi(t)!==t||t.tag!==1)throw Error(me(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(me(171))}if(t.tag===1){var n=t.type;if(kn(n))return p_(t,n,e)}return e}function mb(t,e,n,r,s,i,o,a,l){return t=sm(n,r,!0,t,s,i,o,a,l),t.context=pb(null),n=t.current,r=vn(),s=_s(n),i=Fr(r,s),i.callback=e??null,xs(n,i,s),t.current.lanes=s,dl(t,s,r),An(t,r),t}function Kc(t,e,n,r){var s=e.current,i=vn(),o=_s(s);return n=pb(n),e.context===null?e.context=n:e.pendingContext=n,e=Fr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xs(s,e,o),t!==null&&(lr(t,s,o,i),Au(t,s,o)),o}function hc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function J0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function im(t,e){J0(t,e),(t=t.alternate)&&J0(t,e)}function MC(){return null}var gb=typeof reportError=="function"?reportError:function(t){console.error(t)};function om(t){this._internalRoot=t}Jc.prototype.render=om.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(me(409));Kc(t,e,null,null)};Jc.prototype.unmount=om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ui(function(){Kc(null,t,null,null)}),e[Or]=null}};function Jc(t){this._internalRoot=t}Jc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ww();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ls.length&&e!==0&&e<ls[n].priority;n++);ls.splice(n,0,t),n===0&&Jw(t)}};function am(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Y0(){}function DC(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=hc(o);i.call(c)}}var o=mb(e,r,t,0,null,!1,!1,"",Y0);return t._reactRootContainer=o,t[Or]=o.current,Ba(t.nodeType===8?t.parentNode:t),ui(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=hc(l);a.call(c)}}var l=sm(t,0,!1,null,null,!1,!1,"",Y0);return t._reactRootContainer=l,t[Or]=l.current,Ba(t.nodeType===8?t.parentNode:t),ui(function(){Kc(e,l,n,r)}),l}function Qc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=hc(o);a.call(l)}}Kc(e,o,t,s)}else o=DC(n,e,t,s,r);return hc(o)}$w=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ha(e.pendingLanes);n!==0&&(Ip(e,n|1),An(e,It()),!(Qe&6)&&(mo=It()+500,Ls()))}break;case 13:ui(function(){var r=Br(t,1);if(r!==null){var s=vn();lr(r,t,1,s)}}),im(t,1)}};Cp=function(t){if(t.tag===13){var e=Br(t,134217728);if(e!==null){var n=vn();lr(e,t,134217728,n)}im(t,134217728)}};qw=function(t){if(t.tag===13){var e=_s(t),n=Br(t,e);if(n!==null){var r=vn();lr(n,t,e,r)}im(t,e)}};Ww=function(){return nt};Kw=function(t,e){var n=nt;try{return nt=t,e()}finally{nt=n}};$h=function(t,e,n){switch(e){case"input":if(Vh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Bc(r);if(!s)throw Error(me(90));Sw(r),Vh(r,s)}}}break;case"textarea":Cw(t,n);break;case"select":e=n.value,e!=null&&Xi(t,!!n.multiple,e,!1)}};Dw=em;Lw=ui;var LC={usingClientEntryPoint:!1,Events:[fl,Gi,Bc,Pw,Mw,em]},oa={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jC={bundleType:oa.bundleType,version:oa.version,rendererPackageName:oa.rendererPackageName,rendererConfig:oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vw(t),t===null?null:t.stateNode},findFiberByHostInstance:oa.findFiberByHostInstance||MC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{Fc=hu.inject(jC),xr=hu}catch{}}Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LC;Gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!am(e))throw Error(me(200));return PC(t,e,null,n)};Gn.createRoot=function(t,e){if(!am(t))throw Error(me(299));var n=!1,r="",s=gb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sm(t,1,!1,null,null,n,!1,r,s),t[Or]=e.current,Ba(t.nodeType===8?t.parentNode:t),new om(e)};Gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(me(188)):(t=Object.keys(t).join(","),Error(me(268,t)));return t=Vw(e),t=t===null?null:t.stateNode,t};Gn.flushSync=function(t){return ui(t)};Gn.hydrate=function(t,e,n){if(!Yc(e))throw Error(me(200));return Qc(null,t,e,!0,n)};Gn.hydrateRoot=function(t,e,n){if(!am(t))throw Error(me(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=gb;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mb(e,null,t,1,n??null,s,!1,i,o),t[Or]=e.current,Ba(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Jc(e)};Gn.render=function(t,e,n){if(!Yc(e))throw Error(me(200));return Qc(null,t,e,!1,n)};Gn.unmountComponentAtNode=function(t){if(!Yc(t))throw Error(me(40));return t._reactRootContainer?(ui(function(){Qc(null,null,t,!1,function(){t._reactRootContainer=null,t[Or]=null})}),!0):!1};Gn.unstable_batchedUpdates=em;Gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yc(n))throw Error(me(200));if(t==null||t._reactInternals===void 0)throw Error(me(38));return Qc(t,e,n,!1,r)};Gn.version="18.3.1-next-f1338f8080-20240426";function yb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yb)}catch(t){console.error(t)}}yb(),yw.exports=Gn;var FC=yw.exports,Q0=FC;Rh.createRoot=Q0.createRoot,Rh.hydrateRoot=Q0.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ya(){return Ya=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ya.apply(this,arguments)}var fs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fs||(fs={}));const X0="popstate";function VC(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=xi(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Sf("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:fc(i))}function r(s,i){Xc(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return OC(e,n,r,t)}function Ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function UC(){return Math.random().toString(36).substr(2,8)}function Z0(t,e){return{usr:t.state,key:t.key,idx:e}}function Sf(t,e,n,r){return n===void 0&&(n=null),Ya({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xi(e):e,{state:n,key:e&&e.key||r||UC()})}function fc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function OC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=fs.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Ya({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function m(){a=fs.Pop;let _=d(),v=_==null?null:_-c;c=_,l&&l({action:a,location:x.location,delta:v})}function g(_,v){a=fs.Push;let E=Sf(x.location,_,v);n&&n(E,_),c=d()+1;let T=Z0(E,c),P=x.createHref(E);try{o.pushState(T,"",P)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(P)}i&&l&&l({action:a,location:x.location,delta:1})}function y(_,v){a=fs.Replace;let E=Sf(x.location,_,v);n&&n(E,_),c=d();let T=Z0(E,c),P=x.createHref(E);o.replaceState(T,"",P),i&&l&&l({action:a,location:x.location,delta:0})}function w(_){let v=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof _=="string"?_:fc(_);return E=E.replace(/ $/,"%20"),Ct(v,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,v)}let x={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(X0,m),l=_,()=>{s.removeEventListener(X0,m),l=null}},createHref(_){return e(s,_)},createURL:w,encodeLocation(_){let v=w(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:g,replace:y,go(_){return o.go(_)}};return x}var ey;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ey||(ey={}));function BC(t,e,n){return n===void 0&&(n="/"),zC(t,e,n)}function zC(t,e,n,r){let s=typeof e=="string"?xi(e):e,i=lm(s.pathname||"/",n);if(i==null)return null;let o=vb(t);GC(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=t2(i);a=XC(o[l],c)}return a}function vb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ct(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Es([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Ct(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),vb(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:YC(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of xb(i.path))s(i,o,l)}),e}function xb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=xb(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function GC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:QC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const HC=/^:[\w-]+$/,$C=3,qC=2,WC=1,KC=10,JC=-2,ty=t=>t==="*";function YC(t,e){let n=t.split("/"),r=n.length;return n.some(ty)&&(r+=JC),e&&(r+=qC),n.filter(s=>!ty(s)).reduce((s,i)=>s+(HC.test(i)?$C:i===""?WC:KC),r)}function QC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function XC(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",m=ZC({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),g=l.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Es([i,m.pathname]),pathnameBase:o2(Es([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Es([i,m.pathnameBase]))}return o}function ZC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=e2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,m)=>{let{paramName:g,isOptional:y}=d;if(g==="*"){let x=a[m]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const w=a[m];return y&&!w?c[g]=void 0:c[g]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function e2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Xc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function t2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function lm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const n2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,r2=t=>n2.test(t);function s2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?xi(t):t,i;if(n)if(r2(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Xc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=ny(n.substring(1),"/"):i=ny(n,e)}else i=e;return{pathname:i,search:a2(r),hash:l2(s)}}function ny(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function hh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function i2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function um(t,e){let n=i2(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=xi(t):(s=Ya({},t),Ct(!s.pathname||!s.pathname.includes("?"),hh("?","pathname","search",s)),Ct(!s.pathname||!s.pathname.includes("#"),hh("#","pathname","hash",s)),Ct(!s.search||!s.search.includes("#"),hh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}a=m>=0?e[m]:"/"}let l=s2(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Es=t=>t.join("/").replace(/\/\/+/g,"/"),o2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),a2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,l2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function u2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wb=["post","put","patch","delete"];new Set(wb);const c2=["get",...wb];new Set(c2);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qa(){return Qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qa.apply(this,arguments)}const dm=F.createContext(null),d2=F.createContext(null),js=F.createContext(null),Zc=F.createContext(null),Qr=F.createContext({outlet:null,matches:[],isDataRoute:!1}),_b=F.createContext(null);function h2(t,e){let{relative:n}=e===void 0?{}:e;Ao()||Ct(!1);let{basename:r,navigator:s}=F.useContext(js),{hash:i,pathname:o,search:a}=Tb(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Es([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Ao(){return F.useContext(Zc)!=null}function wi(){return Ao()||Ct(!1),F.useContext(Zc).location}function bb(t){F.useContext(js).static||F.useLayoutEffect(t)}function _i(){let{isDataRoute:t}=F.useContext(Qr);return t?S2():f2()}function f2(){Ao()||Ct(!1);let t=F.useContext(dm),{basename:e,future:n,navigator:r}=F.useContext(js),{matches:s}=F.useContext(Qr),{pathname:i}=wi(),o=JSON.stringify(um(s,n.v7_relativeSplatPath)),a=F.useRef(!1);return bb(()=>{a.current=!0}),F.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let m=cm(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Es([e,m.pathname])),(d.replace?r.replace:r.push)(m,d.state,d)},[e,r,o,i,t])}function Eb(){let{matches:t}=F.useContext(Qr),e=t[t.length-1];return e?e.params:{}}function Tb(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=F.useContext(js),{matches:s}=F.useContext(Qr),{pathname:i}=wi(),o=JSON.stringify(um(s,r.v7_relativeSplatPath));return F.useMemo(()=>cm(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function p2(t,e){return m2(t,e)}function m2(t,e,n,r){Ao()||Ct(!1);let{navigator:s}=F.useContext(js),{matches:i}=F.useContext(Qr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=wi(),d;if(e){var m;let _=typeof e=="string"?xi(e):e;l==="/"||(m=_.pathname)!=null&&m.startsWith(l)||Ct(!1),d=_}else d=c;let g=d.pathname||"/",y=g;if(l!=="/"){let _=l.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=BC(t,{pathname:y}),x=w2(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Es([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Es([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&x?F.createElement(Zc.Provider,{value:{location:Qa({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:fs.Pop}},x):x}function g2(){let t=T2(),e=u2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:s},n):null,null)}const y2=F.createElement(g2,null);class v2 extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(Qr.Provider,{value:this.props.routeContext},F.createElement(_b.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function x2(t){let{routeContext:e,match:n,children:r}=t,s=F.useContext(dm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(Qr.Provider,{value:e},r)}function w2(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);d>=0||Ct(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=d),m.route.id){let{loaderData:g,errors:y}=n,w=m.route.loader&&g[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,m,g)=>{let y,w=!1,x=null,_=null;n&&(y=a&&m.route.id?a[m.route.id]:void 0,x=m.route.errorElement||y2,l&&(c<0&&g===0?(I2("route-fallback"),w=!0,_=null):c===g&&(w=!0,_=m.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,g+1)),E=()=>{let T;return y?T=x:w?T=_:m.route.Component?T=F.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=d,F.createElement(x2,{match:m,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?F.createElement(v2,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:E(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):E()},null)}var Sb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Sb||{}),Ib=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ib||{});function _2(t){let e=F.useContext(dm);return e||Ct(!1),e}function b2(t){let e=F.useContext(d2);return e||Ct(!1),e}function E2(t){let e=F.useContext(Qr);return e||Ct(!1),e}function Cb(t){let e=E2(),n=e.matches[e.matches.length-1];return n.route.id||Ct(!1),n.route.id}function T2(){var t;let e=F.useContext(_b),n=b2(),r=Cb();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function S2(){let{router:t}=_2(Sb.UseNavigateStable),e=Cb(Ib.UseNavigateStable),n=F.useRef(!1);return bb(()=>{n.current=!0}),F.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Qa({fromRouteId:e},i)))},[t,e])}const ry={};function I2(t,e,n){ry[t]||(ry[t]=!0)}function C2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function k2(t){let{to:e,replace:n,state:r,relative:s}=t;Ao()||Ct(!1);let{future:i,static:o}=F.useContext(js),{matches:a}=F.useContext(Qr),{pathname:l}=wi(),c=_i(),d=cm(e,um(a,i.v7_relativeSplatPath),l,s==="path"),m=JSON.stringify(d);return F.useEffect(()=>c(JSON.parse(m),{replace:n,state:r,relative:s}),[c,m,s,n,r]),null}function Pn(t){Ct(!1)}function A2(t){let{basename:e="/",children:n=null,location:r,navigationType:s=fs.Pop,navigator:i,static:o=!1,future:a}=t;Ao()&&Ct(!1);let l=e.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:i,static:o,future:Qa({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=xi(r));let{pathname:d="/",search:m="",hash:g="",state:y=null,key:w="default"}=r,x=F.useMemo(()=>{let _=lm(d,l);return _==null?null:{location:{pathname:_,search:m,hash:g,state:y,key:w},navigationType:s}},[l,d,m,g,y,w,s]);return x==null?null:F.createElement(js.Provider,{value:c},F.createElement(Zc.Provider,{children:n,value:x}))}function N2(t){let{children:e,location:n}=t;return p2(If(e),n)}new Promise(()=>{});function If(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(r,s)=>{if(!F.isValidElement(r))return;let i=[...e,s];if(r.type===F.Fragment){n.push.apply(n,If(r.props.children,i));return}r.type!==Pn&&Ct(!1),!r.props.index||!r.props.children||Ct(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=If(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cf(){return Cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cf.apply(this,arguments)}function R2(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function P2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function M2(t,e){return t.button===0&&(!e||e==="_self")&&!P2(t)}const D2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],L2="6";try{window.__reactRouterVersion=L2}catch{}const j2="startTransition",sy=IS[j2];function F2(t){let{basename:e,children:n,future:r,window:s}=t,i=F.useRef();i.current==null&&(i.current=VC({window:s,v5Compat:!0}));let o=i.current,[a,l]=F.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=F.useCallback(m=>{c&&sy?sy(()=>l(m)):l(m)},[l,c]);return F.useLayoutEffect(()=>o.listen(d),[o,d]),F.useEffect(()=>C2(r),[r]),F.createElement(A2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const V2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",U2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fh=F.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:m}=e,g=R2(e,D2),{basename:y}=F.useContext(js),w,x=!1;if(typeof c=="string"&&U2.test(c)&&(w=c,V2))try{let T=new URL(window.location.href),P=c.startsWith("//")?new URL(T.protocol+c):new URL(c),L=lm(P.pathname,y);P.origin===T.origin&&L!=null?c=L+P.search+P.hash:x=!0}catch{}let _=h2(c,{relative:s}),v=O2(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:m});function E(T){r&&r(T),T.defaultPrevented||v(T)}return F.createElement("a",Cf({},g,{href:w||_,onClick:x||i?r:E,ref:n,target:l}))});var iy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(iy||(iy={}));var oy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(oy||(oy={}));function O2(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=_i(),c=wi(),d=Tb(t,{relative:o});return F.useCallback(m=>{if(M2(m,n)){m.preventDefault();let g=r!==void 0?r:fc(c)===fc(d);l(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}const go=({className:t="w-10 h-10",variant:e="dark"})=>{const n=e==="dark"?"#0f172a":"#ffffff",r=e==="dark"?"#ffffff":"#0f172a";return u.jsxs("svg",{viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[u.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",fill:n}),u.jsx("text",{x:"50%",y:"235",dominantBaseline:"middle",textAnchor:"middle",fill:r,style:{fontSize:"160px",fontWeight:"900",fontFamily:"'Plus Jakarta Sans', sans-serif",letterSpacing:"-2px",fontStyle:"normal"},children:"IRA"}),u.jsx("text",{x:"50%",y:"340",dominantBaseline:"middle",textAnchor:"middle",fill:r,textLength:"280",lengthAdjust:"spacingAndGlyphs",style:{fontSize:"32px",fontWeight:"800",fontFamily:"'Plus Jakarta Sans', sans-serif",textTransform:"uppercase",letterSpacing:"2px",opacity:.9,fontStyle:"normal"},children:"irfan rizki aditri"}),e==="light"&&u.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",stroke:"rgba(0,0,0,0.05)",strokeWidth:"2"})]})},B2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}),u.jsx("path",{d:"M22 21H7"}),u.jsx("path",{d:"m5 11 9 9"})]}),ay=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),u.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),u.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"})]}),z2=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4Z"})}),Xa=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"17 8 12 3 7 8"}),u.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),kb=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"7 10 12 15 17 10"}),u.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),ci=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m15 18-6-6 6-6"})}),_r=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m6 9 6 6 6-6"})}),yo=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M5 12h14"}),u.jsx("path",{d:"m12 5 7 7-7 7"})]}),Ab=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"12",x2:"12",y1:"19",y2:"5"}),u.jsx("polyline",{points:"5 12 12 5 19 12"})]}),Nb=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),u.jsx("polyline",{points:"19 12 12 19 5 12"})]}),kf=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),G2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m9 7-5 5 5 5"}),u.jsx("path",{d:"m15 7 5 5-5 5"})]}),ed=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),u.jsx("path",{d:"M3 3v5h5"}),u.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),u.jsx("path",{d:"M16 21h5v-5"})]}),ml=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),u.jsx("path",{d:"M12 9v4"}),u.jsx("path",{d:"M12 17h.01"})]}),Rb=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),u.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),u.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]}),pc=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),u.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1 4-10z"})]}),ly=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-6v-4h4v4h-4z"}),u.jsx("path",{d:"M12 12.5a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 1 0v5a.5.5 0 0 1-.5.5z"}),u.jsx("path",{d:"M12 2a10 10 0 0 1 7.07 17.07l-1.41-1.41A8 8 0 1 0 5.34 4.34l1.41 1.41A10 10 0 0 1 12 2z"}),u.jsx("text",{x:"50%",y:"55%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"14",fontWeight:"bold",children:"G"})]}),uy=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),Pb=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),u.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Gr=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("polyline",{points:"20 6 9 17 4 12"})}),H2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"1"}),u.jsx("circle",{cx:"12",cy:"5",r:"1"}),u.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),br=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),$2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),u.jsx("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),u.jsx("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),u.jsx("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),u.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]}),Af=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),u.jsx("path",{d:"m15 5 4 4"})]}),hm=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),Za=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m21 2-2 2m-7.6 7.6a6 6 0 1 1-8.4-8.4 6 6 0 0 1 8.4 8.4Zm0 0 5.7 5.7a2 2 0 0 1 0 2.8l-2.8 2.8"})}),cy=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),u.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),q2=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"})}),W2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M12 16v-4"}),u.jsx("path",{d:"M12 8h.01"})]}),K2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12 2v2"}),u.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),u.jsx("path",{d:"M20 12h2"}),u.jsx("path",{d:"m19.07 4.93-1.41 1.41"}),u.jsx("path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128"}),u.jsx("path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"})]}),J2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),u.jsx("line",{x1:"4",x2:"4",y1:"22",y2:"15"})]}),Mb=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:u.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),mc=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"}),u.jsx("path",{d:"m9 12 2 2 4-4"})]}),Y2=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:u.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),Q2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M9 18V5l12-2v13"}),u.jsx("circle",{cx:"6",cy:"18",r:"3"}),u.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),Db=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),u.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),X2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"6",cy:"6",r:"3"}),u.jsx("circle",{cx:"6",cy:"18",r:"3"}),u.jsx("line",{x1:"20",x2:"8.12",y1:"4",y2:"15.88"}),u.jsx("line",{x1:"14.47",x2:"20",y1:"14.48",y2:"20"}),u.jsx("line",{x1:"8.12",x2:"12",y1:"8.12",y2:"12"})]}),Z2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),u.jsx("line",{x1:"3",x2:"21",y1:"9",y2:"9"}),u.jsx("line",{x1:"9",x2:"9",y1:"21",y2:"9"})]}),ek=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),u.jsx("path",{d:"M3 3v5h5"})]}),tk=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("polyline",{points:"16 3 21 3 21 8"}),u.jsx("line",{x1:"4",x2:"21",y1:"20",y2:"3"}),u.jsx("polyline",{points:"21 16 21 21 16 21"}),u.jsx("line",{x1:"15",x2:"21",y1:"15",y2:"21"}),u.jsx("line",{x1:"4",x2:"9",y1:"4",y2:"9"})]}),nk=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"13",height:"13",x:"9",y:"9",rx:"2",ry:"2"}),u.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),rk=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("circle",{cx:"12",cy:"12",r:"10"})}),sk=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),ik=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"})}),ok=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m12 2 3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),ak=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),lk=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M12 2a10 10 0 0 1 0 20z",fill:"currentColor",fillOpacity:"0.3"})]}),uk=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M6 2v14a2 2 0 0 0 2 2h14"}),u.jsx("path",{d:"M18 22V8a2 2 0 0 0-2-2H2"})]}),ck=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M3 7v6h6"}),u.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]}),dk=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5"}),u.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),u.jsx("line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5"})]}),hk=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),u.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]}),Lb=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M8 14.5c2.5-1 5.5-1 8 0"}),u.jsx("path",{d:"M6.5 11.5c3.5-1.5 7.5-1.5 11 0"}),u.jsx("path",{d:"M5 8.5c4.5-2 9.5-2 14 0"})]}),fk=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),u.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]});var dy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},pk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Fb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(g=64)),r.push(n[d],n[m],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||m==null)throw new mk;const g=i<<2|a>>4;if(r.push(g),c!==64){const y=a<<4&240|c>>2;if(r.push(y),m!==64){const w=c<<6&192|m;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class mk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gk=function(t){const e=jb(t);return Fb.encodeByteArray(e,!0)},gc=function(t){return gk(t).replace(/\./g,"")},yk=function(t){try{return Fb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=()=>vk().__FIREBASE_DEFAULTS__,wk=()=>{if(typeof process>"u"||typeof dy>"u")return;const t=dy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_k=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yk(t[1]);return e&&JSON.parse(e)},fm=()=>{try{return xk()||wk()||_k()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bk=t=>{var e,n;return(n=(e=fm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ek=t=>{const e=bk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Vb=()=>{var t;return(t=fm())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gc(JSON.stringify(n)),gc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ck(){var t;const e=(t=fm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ak(){return!Ck()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ub(){try{return typeof indexedDB=="object"}catch{return!1}}function Ob(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function Nk(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="FirebaseError";class Fs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Rk,Object.setPrototypeOf(this,Fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,td.prototype.create)}}class td{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Pk(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Fs(s,a,r)}}function Pk(t,e){return t.replace(Mk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Mk=/\{\$([^}]+)}/g;function yc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(hy(i)&&hy(o)){if(!yc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function hy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=1e3,Lk=2,jk=4*60*60*1e3,Fk=.5;function fy(t,e=Dk,n=Lk){const r=e*Math.pow(n,t),s=Math.round(Fk*r*(Math.random()-.5)*2);return Math.min(jk,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t){return t&&t._delegate?t._delegate:t}class Hr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Tk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ok(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Uk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Uk(t){return t===Js?void 0:t}function Ok(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Vk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Je||(Je={}));const zk={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},Gk=Je.INFO,Hk={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},$k=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Hk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pm{constructor(e){this.name=e,this._logLevel=Gk,this._logHandler=$k,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const qk=(t,e)=>e.some(n=>t instanceof n);let py,my;function Wk(){return py||(py=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kk(){return my||(my=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bb=new WeakMap,Nf=new WeakMap,zb=new WeakMap,ph=new WeakMap,mm=new WeakMap;function Jk(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ts(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Bb.set(n,t)}).catch(()=>{}),mm.set(e,t),e}function Yk(t){if(Nf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Nf.set(t,e)}let Rf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ts(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Qk(t){Rf=t(Rf)}function Xk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mh(this),e,...n);return zb.set(r,e.sort?e.sort():[e]),Ts(r)}:Kk().includes(t)?function(...e){return t.apply(mh(this),e),Ts(Bb.get(this))}:function(...e){return Ts(t.apply(mh(this),e))}}function Zk(t){return typeof t=="function"?Xk(t):(t instanceof IDBTransaction&&Yk(t),qk(t,Wk())?new Proxy(t,Rf):t)}function Ts(t){if(t instanceof IDBRequest)return Jk(t);if(ph.has(t))return ph.get(t);const e=Zk(t);return e!==t&&(ph.set(t,e),mm.set(e,t)),e}const mh=t=>mm.get(t);function Gb(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ts(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ts(o.result),l.oldVersion,l.newVersion,Ts(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const eA=["get","getKey","getAll","getAllKeys","count"],tA=["put","add","delete","clear"],gh=new Map;function gy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gh.get(e))return gh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=tA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||eA.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return gh.set(e,i),i}Qk(t=>({...t,get:(e,n,r)=>gy(e,n)||t.get(e,n,r),has:(e,n)=>!!gy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pf="@firebase/app",yy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new pm("@firebase/app"),sA="@firebase/app-compat",iA="@firebase/analytics-compat",oA="@firebase/analytics",aA="@firebase/app-check-compat",lA="@firebase/app-check",uA="@firebase/auth",cA="@firebase/auth-compat",dA="@firebase/database",hA="@firebase/data-connect",fA="@firebase/database-compat",pA="@firebase/functions",mA="@firebase/functions-compat",gA="@firebase/installations",yA="@firebase/installations-compat",vA="@firebase/messaging",xA="@firebase/messaging-compat",wA="@firebase/performance",_A="@firebase/performance-compat",bA="@firebase/remote-config",EA="@firebase/remote-config-compat",TA="@firebase/storage",SA="@firebase/storage-compat",IA="@firebase/firestore",CA="@firebase/vertexai-preview",kA="@firebase/firestore-compat",AA="firebase",NA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="[DEFAULT]",RA={[Pf]:"fire-core",[sA]:"fire-core-compat",[oA]:"fire-analytics",[iA]:"fire-analytics-compat",[lA]:"fire-app-check",[aA]:"fire-app-check-compat",[uA]:"fire-auth",[cA]:"fire-auth-compat",[dA]:"fire-rtdb",[hA]:"fire-data-connect",[fA]:"fire-rtdb-compat",[pA]:"fire-fn",[mA]:"fire-fn-compat",[gA]:"fire-iid",[yA]:"fire-iid-compat",[vA]:"fire-fcm",[xA]:"fire-fcm-compat",[wA]:"fire-perf",[_A]:"fire-perf-compat",[bA]:"fire-rc",[EA]:"fire-rc-compat",[TA]:"fire-gcs",[SA]:"fire-gcs-compat",[IA]:"fire-fst",[kA]:"fire-fst-compat",[CA]:"fire-vertex","fire-js":"fire-js",[AA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new Map,PA=new Map,Df=new Map;function vy(t,e){try{t.container.addComponent(e)}catch(n){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function As(t){const e=t.name;if(Df.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;Df.set(e,t);for(const n of vc.values())vy(n,t);for(const n of PA.values())vy(n,t);return!0}function gl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ss=new td("app","Firebase",MA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=NA;function Hb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Mf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ss.create("bad-app-name",{appName:String(s)});if(n||(n=Vb()),!n)throw Ss.create("no-options");const i=vc.get(s);if(i){if(yc(n,i.options)&&yc(r,i.config))return i;throw Ss.create("duplicate-app",{appName:s})}const o=new Bk(s);for(const l of Df.values())o.addComponent(l);const a=new DA(n,r,o);return vc.set(s,a),a}function $b(t=Mf){const e=vc.get(t);if(!e&&t===Mf&&Vb())return Hb();if(!e)throw Ss.create("no-app",{appName:t});return e}function Er(t,e,n){var r;let s=(r=RA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(a.join(" "));return}As(new Hr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firebase-heartbeat-database",FA=1,el="firebase-heartbeat-store";let yh=null;function qb(){return yh||(yh=Gb(jA,FA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(el)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ss.create("idb-open",{originalErrorMessage:t.message})})),yh}async function VA(t){try{const n=(await qb()).transaction(el),r=await n.objectStore(el).get(Wb(t));return await n.done,r}catch(e){if(e instanceof Fs)$r.warn(e.message);else{const n=Ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$r.warn(n.message)}}}async function xy(t,e){try{const r=(await qb()).transaction(el,"readwrite");await r.objectStore(el).put(e,Wb(t)),await r.done}catch(n){if(n instanceof Fs)$r.warn(n.message);else{const r=Ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$r.warn(r.message)}}}function Wb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=1024,OA=30*24*60*60*1e3;class BA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=OA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$r.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wy(),{heartbeatsToSend:r,unsentEntries:s}=zA(this._heartbeatsCache.heartbeats),i=gc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return $r.warn(n),""}}}function wy(){return new Date().toISOString().substring(0,10)}function zA(t,e=UA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),_y(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),_y(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ub()?Ob().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return xy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return xy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function _y(t){return gc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t){As(new Hr("platform-logger",e=>new nA(e),"PRIVATE")),As(new Hr("heartbeat",e=>new BA(e),"PRIVATE")),Er(Pf,yy,t),Er(Pf,yy,"esm2017"),Er("fire-js","")}HA("");var $A="firebase",qA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er($A,qA,"app");const Kb="@firebase/installations",gm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=1e4,Yb=`w:${gm}`,Qb="FIS_v2",WA="https://firebaseinstallations.googleapis.com/v1",KA=60*60*1e3,JA="installations",YA="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},di=new td(JA,YA,QA);function Xb(t){return t instanceof Fs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb({projectId:t}){return`${WA}/projects/${t}/installations`}function eE(t){return{token:t.token,requestStatus:2,expiresIn:ZA(t.expiresIn),creationTime:Date.now()}}async function tE(t,e){const r=(await e.json()).error;return di.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function nE({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function XA(t,{refreshToken:e}){const n=nE(t);return n.append("Authorization",eN(e)),n}async function rE(t){const e=await t();return e.status>=500&&e.status<600?t():e}function ZA(t){return Number(t.replace("s","000"))}function eN(t){return`${Qb} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Zb(t),s=nE(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:Qb,appId:t.appId,sdkVersion:Yb},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await rE(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:eE(c.authToken)}}else throw await tE("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=/^[cdef][\w-]{21}$/,Lf="";function sN(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=iN(t);return rN.test(n)?n:Lf}catch{return Lf}}function iN(t){return nN(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;function oE(t,e){const n=nd(t);aE(n,e),oN(n,e)}function aE(t,e){const n=iE.get(t);if(n)for(const r of n)r(e)}function oN(t,e){const n=aN();n&&n.postMessage({key:t,fid:e}),lN()}let ei=null;function aN(){return!ei&&"BroadcastChannel"in self&&(ei=new BroadcastChannel("[Firebase] FID Change"),ei.onmessage=t=>{aE(t.data.key,t.data.fid)}),ei}function lN(){iE.size===0&&ei&&(ei.close(),ei=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="firebase-installations-database",cN=1,hi="firebase-installations-store";let vh=null;function ym(){return vh||(vh=Gb(uN,cN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(hi)}}})),vh}async function xc(t,e){const n=nd(t),s=(await ym()).transaction(hi,"readwrite"),i=s.objectStore(hi),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&oE(t,e.fid),e}async function lE(t){const e=nd(t),r=(await ym()).transaction(hi,"readwrite");await r.objectStore(hi).delete(e),await r.done}async function rd(t,e){const n=nd(t),s=(await ym()).transaction(hi,"readwrite"),i=s.objectStore(hi),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&oE(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vm(t){let e;const n=await rd(t.appConfig,r=>{const s=dN(r),i=hN(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Lf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function dN(t){const e=t||{fid:sN(),registrationStatus:0};return uE(e)}function hN(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(di.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=fN(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:pN(t)}:{installationEntry:e}}async function fN(t,e){try{const n=await tN(t,e);return xc(t.appConfig,n)}catch(n){throw Xb(n)&&n.customData.serverCode===409?await lE(t.appConfig):await xc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function pN(t){let e=await by(t.appConfig);for(;e.registrationStatus===1;)await sE(100),e=await by(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await vm(t);return r||n}return e}function by(t){return rd(t,e=>{if(!e)throw di.create("installation-not-found");return uE(e)})}function uE(t){return mN(t)?{fid:t.fid,registrationStatus:0}:t}function mN(t){return t.registrationStatus===1&&t.registrationTime+Jb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN({appConfig:t,heartbeatServiceProvider:e},n){const r=yN(t,n),s=XA(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:Yb,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await rE(()=>fetch(r,a));if(l.ok){const c=await l.json();return eE(c)}else throw await tE("Generate Auth Token",l)}function yN(t,{fid:e}){return`${Zb(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xm(t,e=!1){let n;const r=await rd(t.appConfig,i=>{if(!cE(i))throw di.create("not-registered");const o=i.authToken;if(!e&&wN(o))return i;if(o.requestStatus===1)return n=vN(t,e),i;{if(!navigator.onLine)throw di.create("app-offline");const a=bN(i);return n=xN(t,a),a}});return n?await n:r.authToken}async function vN(t,e){let n=await Ey(t.appConfig);for(;n.authToken.requestStatus===1;)await sE(100),n=await Ey(t.appConfig);const r=n.authToken;return r.requestStatus===0?xm(t,e):r}function Ey(t){return rd(t,e=>{if(!cE(e))throw di.create("not-registered");const n=e.authToken;return EN(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function xN(t,e){try{const n=await gN(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await xc(t.appConfig,r),n}catch(n){if(Xb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await lE(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await xc(t.appConfig,r)}throw n}}function cE(t){return t!==void 0&&t.registrationStatus===2}function wN(t){return t.requestStatus===2&&!_N(t)}function _N(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+KA}function bN(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function EN(t){return t.requestStatus===1&&t.requestTime+Jb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(t){const e=t,{installationEntry:n,registrationPromise:r}=await vm(e);return r?r.catch(console.error):xm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t,e=!1){const n=t;return await IN(n),(await xm(n,e)).token}async function IN(t){const{registrationPromise:e}=await vm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){if(!t||!t.options)throw xh("App Configuration");if(!t.name)throw xh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw xh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function xh(t){return di.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="installations",kN="installations-internal",AN=t=>{const e=t.getProvider("app").getImmediate(),n=CN(e),r=gl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},NN=t=>{const e=t.getProvider("app").getImmediate(),n=gl(e,dE).getImmediate();return{getId:()=>TN(n),getToken:s=>SN(n,s)}};function RN(){As(new Hr(dE,AN,"PUBLIC")),As(new Hr(kN,NN,"PRIVATE"))}RN();Er(Kb,gm);Er(Kb,gm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc="analytics",PN="firebase_id",MN="origin",DN=60*1e3,LN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new pm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Fn=new td("analytics","Analytics",jN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t){if(!t.startsWith(wm)){const e=Fn.create("invalid-gtag-resource",{gtagURL:t});return Nn.warn(e.message),""}return t}function hE(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function VN(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function UN(t,e){const n=VN("firebase-js-sdk-policy",{createScriptURL:FN}),r=document.createElement("script"),s=`${wm}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function ON(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function BN(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await hE(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){Nn.error(a)}t("config",s,i)}async function zN(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await hE(n);for(const l of o){const c=a.find(m=>m.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Nn.error(i)}}function GN(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await zN(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await BN(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Nn.error(a)}}return s}function HN(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=GN(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function $N(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(wm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=30,WN=1e3;class KN{constructor(e={},n=WN){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const fE=new KN;function JN(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function YN(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:JN(r)},i=LN.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Fn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function QN(t,e=fE,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Fn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Fn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new eR;return setTimeout(async()=>{a.abort()},DN),pE({appId:r,apiKey:s,measurementId:i},o,a,e)}async function pE(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=fE){var i;const{appId:o,measurementId:a}=t;try{await XN(r,e)}catch(l){if(a)return Nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await YN(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!ZN(c)){if(s.deleteThrottleMetadata(o),a)return Nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?fy(n,s.intervalMillis,qN):fy(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,m),Nn.debug(`Calling attemptFetch again in ${d} millis`),pE(t,m,r,s)}}function XN(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Fn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ZN(t){if(!(t instanceof Fs)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class eR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function tR(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(){if(Ub())try{await Ob()}catch(t){return Nn.warn(Fn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Nn.warn(Fn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function rR(t,e,n,r,s,i,o){var a;const l=QN(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Nn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Nn.error(y)),e.push(l);const c=nR().then(y=>{if(y)return r.getId()}),[d,m]=await Promise.all([l,c]);$N(i)||UN(i,d.measurementId),s("js",new Date);const g=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return g[MN]="firebase",g.update=!0,m!=null&&(g[PN]=m),s("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.app=e}_delete(){return delete ka[this.app.options.appId],Promise.resolve()}}let ka={},Ty=[];const Sy={};let wh="dataLayer",iR="gtag",Iy,mE,Cy=!1;function oR(){const t=[];if(kk()&&t.push("This is a browser extension environment."),Nk()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Fn.create("invalid-analytics-context",{errorInfo:e});Nn.warn(n.message)}}function aR(t,e,n){oR();const r=t.options.appId;if(!r)throw Fn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Fn.create("no-api-key");if(ka[r]!=null)throw Fn.create("already-exists",{id:r});if(!Cy){ON(wh);const{wrappedGtag:i,gtagCore:o}=HN(ka,Ty,Sy,wh,iR);mE=i,Iy=o,Cy=!0}return ka[r]=rR(t,Ty,Sy,e,Iy,wh,n),new sR(t)}function lR(t=$b()){t=Un(t);const e=gl(t,wc);return e.isInitialized()?e.getImmediate():uR(t)}function uR(t,e={}){const n=gl(t,wc);if(n.isInitialized()){const s=n.getImmediate();if(yc(e,n.getOptions()))return s;throw Fn.create("already-initialized")}return n.initialize({options:e})}function cR(t,e,n,r){t=Un(t),tR(mE,ka[t.app.options.appId],e,n,r).catch(s=>Nn.error(s))}const ky="@firebase/analytics",Ay="0.10.8";function dR(){As(new Hr(wc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return aR(r,s,n)},"PUBLIC")),As(new Hr("analytics-internal",t,"PRIVATE")),Er(ky,Ay),Er(ky,Ay,"esm2017");function t(e){try{const n=e.getProvider(wc).getImmediate();return{logEvent:(r,s,i)=>cR(n,r,s,i)}}catch(n){throw Fn.create("interop-component-reg-failed",{reason:n})}}}dR();var Ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var si,gE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function N(){}N.prototype=A.prototype,k.D=A.prototype,k.prototype=new N,k.prototype.constructor=k,k.C=function(M,V,R){for(var D=Array(arguments.length-2),I=2;I<arguments.length;I++)D[I-2]=arguments[I];return A.prototype[V].apply(M,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,A,N){N||(N=0);var M=Array(16);if(typeof A=="string")for(var V=0;16>V;++V)M[V]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(V=0;16>V;++V)M[V]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=k.g[0],N=k.g[1],V=k.g[2];var R=k.g[3],D=A+(R^N&(V^R))+M[0]+3614090360&4294967295;A=N+(D<<7&4294967295|D>>>25),D=R+(V^A&(N^V))+M[1]+3905402710&4294967295,R=A+(D<<12&4294967295|D>>>20),D=V+(N^R&(A^N))+M[2]+606105819&4294967295,V=R+(D<<17&4294967295|D>>>15),D=N+(A^V&(R^A))+M[3]+3250441966&4294967295,N=V+(D<<22&4294967295|D>>>10),D=A+(R^N&(V^R))+M[4]+4118548399&4294967295,A=N+(D<<7&4294967295|D>>>25),D=R+(V^A&(N^V))+M[5]+1200080426&4294967295,R=A+(D<<12&4294967295|D>>>20),D=V+(N^R&(A^N))+M[6]+2821735955&4294967295,V=R+(D<<17&4294967295|D>>>15),D=N+(A^V&(R^A))+M[7]+4249261313&4294967295,N=V+(D<<22&4294967295|D>>>10),D=A+(R^N&(V^R))+M[8]+1770035416&4294967295,A=N+(D<<7&4294967295|D>>>25),D=R+(V^A&(N^V))+M[9]+2336552879&4294967295,R=A+(D<<12&4294967295|D>>>20),D=V+(N^R&(A^N))+M[10]+4294925233&4294967295,V=R+(D<<17&4294967295|D>>>15),D=N+(A^V&(R^A))+M[11]+2304563134&4294967295,N=V+(D<<22&4294967295|D>>>10),D=A+(R^N&(V^R))+M[12]+1804603682&4294967295,A=N+(D<<7&4294967295|D>>>25),D=R+(V^A&(N^V))+M[13]+4254626195&4294967295,R=A+(D<<12&4294967295|D>>>20),D=V+(N^R&(A^N))+M[14]+2792965006&4294967295,V=R+(D<<17&4294967295|D>>>15),D=N+(A^V&(R^A))+M[15]+1236535329&4294967295,N=V+(D<<22&4294967295|D>>>10),D=A+(V^R&(N^V))+M[1]+4129170786&4294967295,A=N+(D<<5&4294967295|D>>>27),D=R+(N^V&(A^N))+M[6]+3225465664&4294967295,R=A+(D<<9&4294967295|D>>>23),D=V+(A^N&(R^A))+M[11]+643717713&4294967295,V=R+(D<<14&4294967295|D>>>18),D=N+(R^A&(V^R))+M[0]+3921069994&4294967295,N=V+(D<<20&4294967295|D>>>12),D=A+(V^R&(N^V))+M[5]+3593408605&4294967295,A=N+(D<<5&4294967295|D>>>27),D=R+(N^V&(A^N))+M[10]+38016083&4294967295,R=A+(D<<9&4294967295|D>>>23),D=V+(A^N&(R^A))+M[15]+3634488961&4294967295,V=R+(D<<14&4294967295|D>>>18),D=N+(R^A&(V^R))+M[4]+3889429448&4294967295,N=V+(D<<20&4294967295|D>>>12),D=A+(V^R&(N^V))+M[9]+568446438&4294967295,A=N+(D<<5&4294967295|D>>>27),D=R+(N^V&(A^N))+M[14]+3275163606&4294967295,R=A+(D<<9&4294967295|D>>>23),D=V+(A^N&(R^A))+M[3]+4107603335&4294967295,V=R+(D<<14&4294967295|D>>>18),D=N+(R^A&(V^R))+M[8]+1163531501&4294967295,N=V+(D<<20&4294967295|D>>>12),D=A+(V^R&(N^V))+M[13]+2850285829&4294967295,A=N+(D<<5&4294967295|D>>>27),D=R+(N^V&(A^N))+M[2]+4243563512&4294967295,R=A+(D<<9&4294967295|D>>>23),D=V+(A^N&(R^A))+M[7]+1735328473&4294967295,V=R+(D<<14&4294967295|D>>>18),D=N+(R^A&(V^R))+M[12]+2368359562&4294967295,N=V+(D<<20&4294967295|D>>>12),D=A+(N^V^R)+M[5]+4294588738&4294967295,A=N+(D<<4&4294967295|D>>>28),D=R+(A^N^V)+M[8]+2272392833&4294967295,R=A+(D<<11&4294967295|D>>>21),D=V+(R^A^N)+M[11]+1839030562&4294967295,V=R+(D<<16&4294967295|D>>>16),D=N+(V^R^A)+M[14]+4259657740&4294967295,N=V+(D<<23&4294967295|D>>>9),D=A+(N^V^R)+M[1]+2763975236&4294967295,A=N+(D<<4&4294967295|D>>>28),D=R+(A^N^V)+M[4]+1272893353&4294967295,R=A+(D<<11&4294967295|D>>>21),D=V+(R^A^N)+M[7]+4139469664&4294967295,V=R+(D<<16&4294967295|D>>>16),D=N+(V^R^A)+M[10]+3200236656&4294967295,N=V+(D<<23&4294967295|D>>>9),D=A+(N^V^R)+M[13]+681279174&4294967295,A=N+(D<<4&4294967295|D>>>28),D=R+(A^N^V)+M[0]+3936430074&4294967295,R=A+(D<<11&4294967295|D>>>21),D=V+(R^A^N)+M[3]+3572445317&4294967295,V=R+(D<<16&4294967295|D>>>16),D=N+(V^R^A)+M[6]+76029189&4294967295,N=V+(D<<23&4294967295|D>>>9),D=A+(N^V^R)+M[9]+3654602809&4294967295,A=N+(D<<4&4294967295|D>>>28),D=R+(A^N^V)+M[12]+3873151461&4294967295,R=A+(D<<11&4294967295|D>>>21),D=V+(R^A^N)+M[15]+530742520&4294967295,V=R+(D<<16&4294967295|D>>>16),D=N+(V^R^A)+M[2]+3299628645&4294967295,N=V+(D<<23&4294967295|D>>>9),D=A+(V^(N|~R))+M[0]+4096336452&4294967295,A=N+(D<<6&4294967295|D>>>26),D=R+(N^(A|~V))+M[7]+1126891415&4294967295,R=A+(D<<10&4294967295|D>>>22),D=V+(A^(R|~N))+M[14]+2878612391&4294967295,V=R+(D<<15&4294967295|D>>>17),D=N+(R^(V|~A))+M[5]+4237533241&4294967295,N=V+(D<<21&4294967295|D>>>11),D=A+(V^(N|~R))+M[12]+1700485571&4294967295,A=N+(D<<6&4294967295|D>>>26),D=R+(N^(A|~V))+M[3]+2399980690&4294967295,R=A+(D<<10&4294967295|D>>>22),D=V+(A^(R|~N))+M[10]+4293915773&4294967295,V=R+(D<<15&4294967295|D>>>17),D=N+(R^(V|~A))+M[1]+2240044497&4294967295,N=V+(D<<21&4294967295|D>>>11),D=A+(V^(N|~R))+M[8]+1873313359&4294967295,A=N+(D<<6&4294967295|D>>>26),D=R+(N^(A|~V))+M[15]+4264355552&4294967295,R=A+(D<<10&4294967295|D>>>22),D=V+(A^(R|~N))+M[6]+2734768916&4294967295,V=R+(D<<15&4294967295|D>>>17),D=N+(R^(V|~A))+M[13]+1309151649&4294967295,N=V+(D<<21&4294967295|D>>>11),D=A+(V^(N|~R))+M[4]+4149444226&4294967295,A=N+(D<<6&4294967295|D>>>26),D=R+(N^(A|~V))+M[11]+3174756917&4294967295,R=A+(D<<10&4294967295|D>>>22),D=V+(A^(R|~N))+M[2]+718787259&4294967295,V=R+(D<<15&4294967295|D>>>17),D=N+(R^(V|~A))+M[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+V&4294967295,k.g[3]=k.g[3]+R&4294967295}r.prototype.u=function(k,A){A===void 0&&(A=k.length);for(var N=A-this.blockSize,M=this.B,V=this.h,R=0;R<A;){if(V==0)for(;R<=N;)s(this,k,R),R+=this.blockSize;if(typeof k=="string"){for(;R<A;)if(M[V++]=k.charCodeAt(R++),V==this.blockSize){s(this,M),V=0;break}}else for(;R<A;)if(M[V++]=k[R++],V==this.blockSize){s(this,M),V=0;break}}this.h=V,this.o+=A},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;var N=8*this.o;for(A=k.length-8;A<k.length;++A)k[A]=N&255,N/=256;for(this.u(k),k=Array(16),A=N=0;4>A;++A)for(var M=0;32>M;M+=8)k[N++]=this.g[A]>>>M&255;return k};function i(k,A){var N=a;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=A(k)}function o(k,A){this.h=A;for(var N=[],M=!0,V=k.length-1;0<=V;V--){var R=k[V]|0;M&&R==A||(N[V]=R,M=!1)}this.g=N}var a={};function l(k){return-128<=k&&128>k?i(k,function(A){return new o([A|0],0>A?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return m;if(0>k)return _(c(-k));for(var A=[],N=1,M=0;k>=N;M++)A[M]=k/N|0,N*=4294967296;return new o(A,0)}function d(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return _(d(k.substring(1),A));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=c(Math.pow(A,8)),M=m,V=0;V<k.length;V+=8){var R=Math.min(8,k.length-V),D=parseInt(k.substring(V,V+R),A);8>R?(R=c(Math.pow(A,R)),M=M.j(R).add(c(D))):(M=M.j(N),M=M.add(c(D)))}return M}var m=l(0),g=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-_(this).m();for(var k=0,A=1,N=0;N<this.g.length;N++){var M=this.i(N);k+=(0<=M?M:4294967296+M)*A,A*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(w(this))return"0";if(x(this))return"-"+_(this).toString(k);for(var A=c(Math.pow(k,6)),N=this,M="";;){var V=P(N,A).g;N=v(N,V.j(A));var R=((0<N.g.length?N.g[0]:N.h)>>>0).toString(k);if(N=V,w(N))return R+M;for(;6>R.length;)R="0"+R;M=R+M}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function w(k){if(k.h!=0)return!1;for(var A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function x(k){return k.h==-1}t.l=function(k){return k=v(this,k),x(k)?-1:w(k)?0:1};function _(k){for(var A=k.g.length,N=[],M=0;M<A;M++)N[M]=~k.g[M];return new o(N,~k.h).add(g)}t.abs=function(){return x(this)?_(this):this},t.add=function(k){for(var A=Math.max(this.g.length,k.g.length),N=[],M=0,V=0;V<=A;V++){var R=M+(this.i(V)&65535)+(k.i(V)&65535),D=(R>>>16)+(this.i(V)>>>16)+(k.i(V)>>>16);M=D>>>16,R&=65535,D&=65535,N[V]=D<<16|R}return new o(N,N[N.length-1]&-2147483648?-1:0)};function v(k,A){return k.add(_(A))}t.j=function(k){if(w(this)||w(k))return m;if(x(this))return x(k)?_(this).j(_(k)):_(_(this).j(k));if(x(k))return _(this.j(_(k)));if(0>this.l(y)&&0>k.l(y))return c(this.m()*k.m());for(var A=this.g.length+k.g.length,N=[],M=0;M<2*A;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(var V=0;V<k.g.length;V++){var R=this.i(M)>>>16,D=this.i(M)&65535,I=k.i(V)>>>16,H=k.i(V)&65535;N[2*M+2*V]+=D*H,E(N,2*M+2*V),N[2*M+2*V+1]+=R*H,E(N,2*M+2*V+1),N[2*M+2*V+1]+=D*I,E(N,2*M+2*V+1),N[2*M+2*V+2]+=R*I,E(N,2*M+2*V+2)}for(M=0;M<A;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=A;M<2*A;M++)N[M]=0;return new o(N,0)};function E(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function T(k,A){this.g=k,this.h=A}function P(k,A){if(w(A))throw Error("division by zero");if(w(k))return new T(m,m);if(x(k))return A=P(_(k),A),new T(_(A.g),_(A.h));if(x(A))return A=P(k,_(A)),new T(_(A.g),A.h);if(30<k.g.length){if(x(k)||x(A))throw Error("slowDivide_ only works with positive integers.");for(var N=g,M=A;0>=M.l(k);)N=L(N),M=L(M);var V=B(N,1),R=B(M,1);for(M=B(M,2),N=B(N,2);!w(M);){var D=R.add(M);0>=D.l(k)&&(V=V.add(N),R=D),M=B(M,1),N=B(N,1)}return A=v(k,V.j(A)),new T(V,A)}for(V=m;0<=k.l(A);){for(N=Math.max(1,Math.floor(k.m()/A.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),R=c(N),D=R.j(A);x(D)||0<D.l(k);)N-=M,R=c(N),D=R.j(A);w(R)&&(R=g),V=V.add(R),k=v(k,D)}return new T(V,k)}t.A=function(k){return P(this,k).h},t.and=function(k){for(var A=Math.max(this.g.length,k.g.length),N=[],M=0;M<A;M++)N[M]=this.i(M)&k.i(M);return new o(N,this.h&k.h)},t.or=function(k){for(var A=Math.max(this.g.length,k.g.length),N=[],M=0;M<A;M++)N[M]=this.i(M)|k.i(M);return new o(N,this.h|k.h)},t.xor=function(k){for(var A=Math.max(this.g.length,k.g.length),N=[],M=0;M<A;M++)N[M]=this.i(M)^k.i(M);return new o(N,this.h^k.h)};function L(k){for(var A=k.g.length+1,N=[],M=0;M<A;M++)N[M]=k.i(M)<<1|k.i(M-1)>>>31;return new o(N,k.h)}function B(k,A){var N=A>>5;A%=32;for(var M=k.g.length-N,V=[],R=0;R<M;R++)V[R]=0<A?k.i(R+N)>>>A|k.i(R+N+1)<<32-A:k.i(R+N);return new o(V,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,si=o}).apply(typeof Ny<"u"?Ny:typeof self<"u"?self:typeof window<"u"?window:{});var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yE,pa,vE,ju,jf,xE,wE,_E;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,b,S){return f==Array.prototype||f==Object.prototype||(f[b]=S.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof fu=="object"&&fu];for(var b=0;b<f.length;++b){var S=f[b];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(f,b){if(b)e:{var S=r;f=f.split(".");for(var j=0;j<f.length-1;j++){var J=f[j];if(!(J in S))break e;S=S[J]}f=f[f.length-1],j=S[f],b=b(j),b!=j&&b!=null&&e(S,f,{configurable:!0,writable:!0,value:b})}}function i(f,b){f instanceof String&&(f+="");var S=0,j=!1,J={next:function(){if(!j&&S<f.length){var ne=S++;return{value:b(ne,f[ne]),done:!1}}return j=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}s("Array.prototype.values",function(f){return f||function(){return i(this,function(b,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var b=typeof f;return b=b!="object"?b:f?Array.isArray(f)?"array":b:"null",b=="array"||b=="object"&&typeof f.length=="number"}function c(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function d(f,b,S){return f.call.apply(f.bind,arguments)}function m(f,b,S){if(!f)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,j),f.apply(b,J)}}return function(){return f.apply(b,arguments)}}function g(f,b,S){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,g.apply(null,arguments)}function y(f,b){var S=Array.prototype.slice.call(arguments,1);return function(){var j=S.slice();return j.push.apply(j,arguments),f.apply(this,j)}}function w(f,b){function S(){}S.prototype=b.prototype,f.aa=b.prototype,f.prototype=new S,f.prototype.constructor=f,f.Qb=function(j,J,ne){for(var ye=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)ye[ot-2]=arguments[ot];return b.prototype[J].apply(j,ye)}}function x(f){const b=f.length;if(0<b){const S=Array(b);for(let j=0;j<b;j++)S[j]=f[j];return S}return[]}function _(f,b){for(let S=1;S<arguments.length;S++){const j=arguments[S];if(l(j)){const J=f.length||0,ne=j.length||0;f.length=J+ne;for(let ye=0;ye<ne;ye++)f[J+ye]=j[ye]}else f.push(j)}}class v{constructor(b,S){this.i=b,this.j=S,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function E(f){return/^[\s\xa0]*$/.test(f)}function T(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function P(f){return P[" "](f),f}P[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function B(f,b,S){for(const j in f)b.call(S,f[j],j,f)}function k(f,b){for(const S in f)b.call(void 0,f[S],S,f)}function A(f){const b={};for(const S in f)b[S]=f[S];return b}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,b){let S,j;for(let J=1;J<arguments.length;J++){j=arguments[J];for(S in j)f[S]=j[S];for(let ne=0;ne<N.length;ne++)S=N[ne],Object.prototype.hasOwnProperty.call(j,S)&&(f[S]=j[S])}}function V(f){var b=1;f=f.split(":");const S=[];for(;0<b&&f.length;)S.push(f.shift()),b--;return f.length&&S.push(f.join(":")),S}function R(f){a.setTimeout(()=>{throw f},0)}function D(){var f=X;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class I{constructor(){this.h=this.g=null}add(b,S){const j=H.get();j.set(b,S),this.h?this.h.next=j:this.g=j,this.h=j}}var H=new v(()=>new fe,f=>f.reset());class fe{constructor(){this.next=this.g=this.h=null}set(b,S){this.h=b,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let re,Z=!1,X=new I,oe=()=>{const f=a.Promise.resolve(void 0);re=()=>{f.then(W)}};var W=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(S){R(S)}var b=H;b.j(f),100>b.h&&(b.h++,f.next=b.g,b.g=f)}Z=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const S=()=>{};a.addEventListener("test",S,b),a.removeEventListener("test",S,b)}catch{}return f}();function Y(f,b){if(de.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var S=this.type=f.type,j=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget){if(L){e:{try{P(b.nodeName);var J=!0;break e}catch{}J=!1}J||(b=null)}}else S=="mouseover"?b=f.fromElement:S=="mouseout"&&(b=f.toElement);this.relatedTarget=b,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ge[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Y.aa.h.call(this)}}w(Y,de);var ge={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),Se=0;function je(f,b,S,j,J){this.listener=f,this.proxy=null,this.src=b,this.type=S,this.capture=!!j,this.ha=J,this.key=++Se,this.da=this.fa=!1}function Be(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ze(f){this.src=f,this.g={},this.h=0}ze.prototype.add=function(f,b,S,j,J){var ne=f.toString();f=this.g[ne],f||(f=this.g[ne]=[],this.h++);var ye=Me(f,b,j,J);return-1<ye?(b=f[ye],S||(b.fa=!1)):(b=new je(b,this.src,ne,!!j,J),b.fa=S,f.push(b)),b};function ht(f,b){var S=b.type;if(S in f.g){var j=f.g[S],J=Array.prototype.indexOf.call(j,b,void 0),ne;(ne=0<=J)&&Array.prototype.splice.call(j,J,1),ne&&(Be(b),f.g[S].length==0&&(delete f.g[S],f.h--))}}function Me(f,b,S,j){for(var J=0;J<f.length;++J){var ne=f[J];if(!ne.da&&ne.listener==b&&ne.capture==!!S&&ne.ha==j)return J}return-1}var C="closure_lm_"+(1e6*Math.random()|0),se={};function ee(f,b,S,j,J){if(Array.isArray(b)){for(var ne=0;ne<b.length;ne++)ee(f,b[ne],S,j,J);return null}return S=he(S),f&&f[Ce]?f.K(b,S,c(j)?!!j.capture:!1,J):U(f,b,S,!1,j,J)}function U(f,b,S,j,J,ne){if(!b)throw Error("Invalid event type");var ye=c(J)?!!J.capture:!!J,ot=le(f);if(ot||(f[C]=ot=new ze(f)),S=ot.add(b,S,j,ye,ne),S.proxy)return S;if(j=z(),S.proxy=j,j.src=f,j.listener=S,f.addEventListener)te||(J=ye),J===void 0&&(J=!1),f.addEventListener(b.toString(),j,J);else if(f.attachEvent)f.attachEvent(ue(b.toString()),j);else if(f.addListener&&f.removeListener)f.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return S}function z(){function f(S){return b.call(f.src,f.listener,S)}const b=Q;return f}function q(f,b,S,j,J){if(Array.isArray(b))for(var ne=0;ne<b.length;ne++)q(f,b[ne],S,j,J);else j=c(j)?!!j.capture:!!j,S=he(S),f&&f[Ce]?(f=f.i,b=String(b).toString(),b in f.g&&(ne=f.g[b],S=Me(ne,S,j,J),-1<S&&(Be(ne[S]),Array.prototype.splice.call(ne,S,1),ne.length==0&&(delete f.g[b],f.h--)))):f&&(f=le(f))&&(b=f.g[b.toString()],f=-1,b&&(f=Me(b,S,j,J)),(S=-1<f?b[f]:null)&&ie(S))}function ie(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[Ce])ht(b.i,f);else{var S=f.type,j=f.proxy;b.removeEventListener?b.removeEventListener(S,j,f.capture):b.detachEvent?b.detachEvent(ue(S),j):b.addListener&&b.removeListener&&b.removeListener(j),(S=le(b))?(ht(S,f),S.h==0&&(S.src=null,b[C]=null)):Be(f)}}}function ue(f){return f in se?se[f]:se[f]="on"+f}function Q(f,b){if(f.da)f=!0;else{b=new Y(b,this);var S=f.listener,j=f.ha||f.src;f.fa&&ie(f),f=S.call(j,b)}return f}function le(f){return f=f[C],f instanceof ze?f:null}var ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function he(f){return typeof f=="function"?f:(f[ve]||(f[ve]=function(b){return f.handleEvent(b)}),f[ve])}function xe(){$.call(this),this.i=new ze(this),this.M=this,this.F=null}w(xe,$),xe.prototype[Ce]=!0,xe.prototype.removeEventListener=function(f,b,S,j){q(this,f,b,S,j)};function Ne(f,b){var S,j=f.F;if(j)for(S=[];j;j=j.F)S.push(j);if(f=f.M,j=b.type||b,typeof b=="string")b=new de(b,f);else if(b instanceof de)b.target=b.target||f;else{var J=b;b=new de(j,f),M(b,J)}if(J=!0,S)for(var ne=S.length-1;0<=ne;ne--){var ye=b.g=S[ne];J=Pe(ye,j,!0,b)&&J}if(ye=b.g=f,J=Pe(ye,j,!0,b)&&J,J=Pe(ye,j,!1,b)&&J,S)for(ne=0;ne<S.length;ne++)ye=b.g=S[ne],J=Pe(ye,j,!1,b)&&J}xe.prototype.N=function(){if(xe.aa.N.call(this),this.i){var f=this.i,b;for(b in f.g){for(var S=f.g[b],j=0;j<S.length;j++)Be(S[j]);delete f.g[b],f.h--}}this.F=null},xe.prototype.K=function(f,b,S,j){return this.i.add(String(f),b,!1,S,j)},xe.prototype.L=function(f,b,S,j){return this.i.add(String(f),b,!0,S,j)};function Pe(f,b,S,j){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();for(var J=!0,ne=0;ne<b.length;++ne){var ye=b[ne];if(ye&&!ye.da&&ye.capture==S){var ot=ye.listener,$t=ye.ha||ye.src;ye.fa&&ht(f.i,ye),J=ot.call($t,j)!==!1&&J}}return J&&!j.defaultPrevented}function mt(f,b,S){if(typeof f=="function")S&&(f=g(f,S));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:a.setTimeout(f,b||0)}function Zt(f){f.g=mt(()=>{f.g=null,f.i&&(f.i=!1,Zt(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class kt extends ${constructor(b,S){super(),this.m=b,this.l=S,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Zt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function O(f){$.call(this),this.h=f,this.g={}}w(O,$);var G=[];function pe(f){B(f.g,function(b,S){this.g.hasOwnProperty(S)&&ie(b)},f),f.g={}}O.prototype.N=function(){O.aa.N.call(this),pe(this)},O.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var we=a.JSON.stringify,Ae=a.JSON.parse,rt=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Re(){}Re.prototype.h=null;function Tt(f){return f.h||(f.h=f.i())}function _t(){}var Ue={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pn(){de.call(this,"d")}w(pn,de);function Dt(){de.call(this,"c")}w(Dt,de);var en={},pr=null;function er(){return pr=pr||new xe}en.La="serverreachability";function Ii(f){de.call(this,en.La,f)}w(Ii,de);function Bs(f){const b=er();Ne(b,new Ii(b))}en.STAT_EVENT="statevent";function Rl(f,b){de.call(this,en.STAT_EVENT,f),this.stat=b}w(Rl,de);function Ht(f){const b=er();Ne(b,new Rl(b,f))}en.Ma="timingevent";function Pl(f,b){de.call(this,en.Ma,f),this.size=b}w(Pl,de);function zs(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},b)}function Gs(){this.g=!0}Gs.prototype.xa=function(){this.g=!1};function Nd(f,b,S,j,J,ne){f.info(function(){if(f.g)if(ne)for(var ye="",ot=ne.split("&"),$t=0;$t<ot.length;$t++){var Xe=ot[$t].split("=");if(1<Xe.length){var nn=Xe[0];Xe=Xe[1];var rn=nn.split("_");ye=2<=rn.length&&rn[1]=="type"?ye+(nn+"="+Xe+"&"):ye+(nn+"=redacted&")}}else ye=null;else ye=ne;return"XMLHTTP REQ ("+j+") [attempt "+J+"]: "+b+`
`+S+`
`+ye})}function Rd(f,b,S,j,J,ne,ye){f.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+J+"]: "+b+`
`+S+`
`+ne+" "+ye})}function ts(f,b,S,j){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+Md(f,S)+(j?" "+j:"")})}function Pd(f,b){f.info(function(){return"TIMEOUT: "+b})}Gs.prototype.info=function(){};function Md(f,b){if(!f.g)return b;if(!b)return null;try{var S=JSON.parse(b);if(S){for(f=0;f<S.length;f++)if(Array.isArray(S[f])){var j=S[f];if(!(2>j.length)){var J=j[1];if(Array.isArray(J)&&!(1>J.length)){var ne=J[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var ye=1;ye<J.length;ye++)J[ye]=""}}}}return we(S)}catch{return b}}var Hs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ml={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ns;function Ci(){}w(Ci,Re),Ci.prototype.g=function(){return new XMLHttpRequest},Ci.prototype.i=function(){return{}},ns=new Ci;function tr(f,b,S,j){this.j=f,this.i=b,this.l=S,this.R=j||1,this.U=new O(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dl}function Dl(){this.i=null,this.g="",this.h=!1}var Ll={},Oo={};function Bo(f,b,S){f.L=1,f.v=Bl(At(b)),f.m=S,f.P=!0,jl(f,null)}function jl(f,b){f.F=Date.now(),ki(f),f.A=At(f.v);var S=f.A,j=f.R;Array.isArray(j)||(j=[String(j)]),_g(S.i,"t",j),f.C=0,S=f.j.J,f.h=new Dl,f.g=Ug(f.j,S?b:null,!f.m),0<f.O&&(f.M=new kt(g(f.Y,f,f.g),f.O)),b=f.U,S=f.g,j=f.ca;var J="readystatechange";Array.isArray(J)||(J&&(G[0]=J.toString()),J=G);for(var ne=0;ne<J.length;ne++){var ye=ee(S,J[ne],j||b.handleEvent,!1,b.h||b);if(!ye)break;b.g[ye.key]=ye}b=f.H?A(f.H):{},f.m?(f.u||(f.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,b)):(f.u="GET",f.g.ea(f.A,f.u,null,b)),Bs(),Nd(f.i,f.u,f.A,f.l,f.R,f.m)}tr.prototype.ca=function(f){f=f.target;const b=this.M;b&&Ar(f)==3?b.j():this.Y(f)},tr.prototype.Y=function(f){try{if(f==this.g)e:{const rn=Ar(this.g);var b=this.g.Ba();const Mi=this.g.Z();if(!(3>rn)&&(rn!=3||this.g&&(this.h.h||this.g.oa()||kg(this.g)))){this.J||rn!=4||b==7||(b==8||0>=Mi?Bs(3):Bs(2)),Ai(this);var S=this.g.Z();this.X=S;t:if(Fl(this)){var j=kg(this.g);f="";var J=j.length,ne=Ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kr(this),$s(this);var ye="";break t}this.h.i=new a.TextDecoder}for(b=0;b<J;b++)this.h.h=!0,f+=this.h.i.decode(j[b],{stream:!(ne&&b==J-1)});j.length=0,this.h.g+=f,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=S==200,Rd(this.i,this.u,this.A,this.l,this.R,rn,S),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,$t=this.g;if((ot=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ot)){var Xe=ot;break t}}Xe=null}if(S=Xe)ts(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ni(this,S);else{this.o=!1,this.s=3,Ht(12),kr(this),$s(this);break e}}if(this.P){S=!0;let nr;for(;!this.J&&this.C<ye.length;)if(nr=Vl(this,ye),nr==Oo){rn==4&&(this.s=4,Ht(14),S=!1),ts(this.i,this.l,null,"[Incomplete Response]");break}else if(nr==Ll){this.s=4,Ht(15),ts(this.i,this.l,ye,"[Invalid Chunk]"),S=!1;break}else ts(this.i,this.l,nr,null),Ni(this,nr);if(Fl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rn!=4||ye.length!=0||this.h.h||(this.s=1,Ht(16),S=!1),this.o=this.o&&S,!S)ts(this.i,this.l,ye,"[Invalid Chunked Response]"),kr(this),$s(this);else if(0<ye.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),Vd(nn),nn.M=!0,Ht(11))}}else ts(this.i,this.l,ye,null),Ni(this,ye);rn==4&&kr(this),this.o&&!this.J&&(rn==4?Lg(this.j,this):(this.o=!1,ki(this)))}else lS(this.g),S==400&&0<ye.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),kr(this),$s(this)}}}catch{}finally{}};function Fl(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Vl(f,b){var S=f.C,j=b.indexOf(`
`,S);return j==-1?Oo:(S=Number(b.substring(S,j)),isNaN(S)?Ll:(j+=1,j+S>b.length?Oo:(b=b.slice(j,j+S),f.C=j+S,b)))}tr.prototype.cancel=function(){this.J=!0,kr(this)};function ki(f){f.S=Date.now()+f.I,zo(f,f.I)}function zo(f,b){if(f.B!=null)throw Error("WatchDog timer not null");f.B=zs(g(f.ba,f),b)}function Ai(f){f.B&&(a.clearTimeout(f.B),f.B=null)}tr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Pd(this.i,this.A),this.L!=2&&(Bs(),Ht(17)),kr(this),this.s=2,$s(this)):zo(this,this.S-f)};function $s(f){f.j.G==0||f.J||Lg(f.j,f)}function kr(f){Ai(f);var b=f.M;b&&typeof b.ma=="function"&&b.ma(),f.M=null,pe(f.U),f.g&&(b=f.g,f.g=null,b.abort(),b.ma())}function Ni(f,b){try{var S=f.j;if(S.G!=0&&(S.g==f||Ho(S.h,f))){if(!f.K&&Ho(S.h,f)&&S.G==3){try{var j=S.Da.g.parse(b)}catch{j=null}if(Array.isArray(j)&&j.length==3){var J=j;if(J[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<f.F)Wl(S),$l(S);else break e;Fd(S),Ht(18)}}else S.za=J[1],0<S.za-S.T&&37500>J[2]&&S.F&&S.v==0&&!S.C&&(S.C=zs(g(S.Za,S),6e3));if(1>=Ol(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else qs(S,11)}else if((f.K||S.g==f)&&Wl(S),!E(b))for(J=S.Da.g.parse(b),b=0;b<J.length;b++){let Xe=J[b];if(S.T=Xe[0],Xe=Xe[1],S.G==2)if(Xe[0]=="c"){S.K=Xe[1],S.ia=Xe[2];const nn=Xe[3];nn!=null&&(S.la=nn,S.j.info("VER="+S.la));const rn=Xe[4];rn!=null&&(S.Aa=rn,S.j.info("SVER="+S.Aa));const Mi=Xe[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(j=1.5*Mi,S.L=j,S.j.info("backChannelRequestTimeoutMs_="+j)),j=S;const nr=f.g;if(nr){const Jl=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jl){var ne=j.h;ne.g||Jl.indexOf("spdy")==-1&&Jl.indexOf("quic")==-1&&Jl.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&($o(ne,ne.h),ne.h=null))}if(j.D){const Ud=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ud&&(j.ya=Ud,Ke(j.I,j.D,Ud))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-f.F,S.j.info("Handshake RTT: "+S.R+"ms")),j=S;var ye=f;if(j.qa=Vg(j,j.J?j.ia:null,j.W),ye.K){K(j.h,ye);var ot=ye,$t=j.L;$t&&(ot.I=$t),ot.B&&(Ai(ot),ki(ot)),j.g=ye}else Mg(j);0<S.i.length&&ql(S)}else Xe[0]!="stop"&&Xe[0]!="close"||qs(S,7);else S.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?qs(S,7):jd(S):Xe[0]!="noop"&&S.l&&S.l.ta(Xe),S.v=0)}}Bs(4)}catch{}}var Dd=class{constructor(f,b){this.g=f,this.map=b}};function Go(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ul(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ol(f){return f.h?1:f.g?f.g.size:0}function Ho(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function $o(f,b){f.g?f.g.add(b):f.h=b}function K(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}Go.prototype.cancel=function(){if(this.i=Ee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ee(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const S of f.g.values())b=b.concat(S.D);return b}return x(f.i)}function qe(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var b=[],S=f.length,j=0;j<S;j++)b.push(f[j]);return b}b=[],S=0;for(j in f)b[S++]=f[j];return b}function Ge(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var b=[];f=f.length;for(var S=0;S<f;S++)b.push(S);return b}b=[],S=0;for(const j in f)b[S++]=j;return b}}}function st(f,b){if(f.forEach&&typeof f.forEach=="function")f.forEach(b,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,b,void 0);else for(var S=Ge(f),j=qe(f),J=j.length,ne=0;ne<J;ne++)b.call(void 0,j[ne],S&&S[ne],f)}var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gt(f,b){if(f){f=f.split("&");for(var S=0;S<f.length;S++){var j=f[S].indexOf("="),J=null;if(0<=j){var ne=f[S].substring(0,j);J=f[S].substring(j+1)}else ne=f[S];b(ne,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Vt(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Vt){this.h=f.h,$n(this,f.j),this.o=f.o,this.g=f.g,tn(this,f.s),this.l=f.l;var b=f.i,S=new Ko;S.i=b.i,b.g&&(S.g=new Map(b.g),S.h=b.h),mr(this,S),this.m=f.m}else f&&(b=String(f).match(it))?(this.h=!1,$n(this,b[1]||"",!0),this.o=qo(b[2]||""),this.g=qo(b[3]||"",!0),tn(this,b[4]),this.l=qo(b[5]||"",!0),mr(this,b[6]||"",!0),this.m=qo(b[7]||"")):(this.h=!1,this.i=new Ko(null,this.h))}Vt.prototype.toString=function(){var f=[],b=this.j;b&&f.push(Wo(b,vg,!0),":");var S=this.g;return(S||b=="file")&&(f.push("//"),(b=this.o)&&f.push(Wo(b,vg,!0),"@"),f.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&f.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&f.push("/"),f.push(Wo(S,S.charAt(0)=="/"?X1:Q1,!0))),(S=this.i.toString())&&f.push("?",S),(S=this.m)&&f.push("#",Wo(S,eS)),f.join("")};function At(f){return new Vt(f)}function $n(f,b,S){f.j=S?qo(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function tn(f,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);f.s=b}else f.s=null}function mr(f,b,S){b instanceof Ko?(f.i=b,tS(f.i,f.h)):(S||(b=Wo(b,Z1)),f.i=new Ko(b,f.h))}function Ke(f,b,S){f.i.set(b,S)}function Bl(f){return Ke(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function qo(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Wo(f,b,S){return typeof f=="string"?(f=encodeURI(f).replace(b,Y1),S&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Y1(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var vg=/[#\/\?@]/g,Q1=/[#\?:]/g,X1=/[#\?]/g,Z1=/[#\?@]/g,eS=/#/g;function Ko(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function rs(f){f.g||(f.g=new Map,f.h=0,f.i&&gt(f.i,function(b,S){f.add(decodeURIComponent(b.replace(/\+/g," ")),S)}))}t=Ko.prototype,t.add=function(f,b){rs(this),this.i=null,f=Ri(this,f);var S=this.g.get(f);return S||this.g.set(f,S=[]),S.push(b),this.h+=1,this};function xg(f,b){rs(f),b=Ri(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function wg(f,b){return rs(f),b=Ri(f,b),f.g.has(b)}t.forEach=function(f,b){rs(this),this.g.forEach(function(S,j){S.forEach(function(J){f.call(b,J,j,this)},this)},this)},t.na=function(){rs(this);const f=Array.from(this.g.values()),b=Array.from(this.g.keys()),S=[];for(let j=0;j<b.length;j++){const J=f[j];for(let ne=0;ne<J.length;ne++)S.push(b[j])}return S},t.V=function(f){rs(this);let b=[];if(typeof f=="string")wg(this,f)&&(b=b.concat(this.g.get(Ri(this,f))));else{f=Array.from(this.g.values());for(let S=0;S<f.length;S++)b=b.concat(f[S])}return b},t.set=function(f,b){return rs(this),this.i=null,f=Ri(this,f),wg(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},t.get=function(f,b){return f?(f=this.V(f),0<f.length?String(f[0]):b):b};function _g(f,b,S){xg(f,b),0<S.length&&(f.i=null,f.g.set(Ri(f,b),x(S)),f.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(var S=0;S<b.length;S++){var j=b[S];const ne=encodeURIComponent(String(j)),ye=this.V(j);for(j=0;j<ye.length;j++){var J=ne;ye[j]!==""&&(J+="="+encodeURIComponent(String(ye[j]))),f.push(J)}}return this.i=f.join("&")};function Ri(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function tS(f,b){b&&!f.j&&(rs(f),f.i=null,f.g.forEach(function(S,j){var J=j.toLowerCase();j!=J&&(xg(this,j),_g(this,J,S))},f)),f.j=b}function nS(f,b){const S=new Gs;if(a.Image){const j=new Image;j.onload=y(ss,S,"TestLoadImage: loaded",!0,b,j),j.onerror=y(ss,S,"TestLoadImage: error",!1,b,j),j.onabort=y(ss,S,"TestLoadImage: abort",!1,b,j),j.ontimeout=y(ss,S,"TestLoadImage: timeout",!1,b,j),a.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=f}else b(!1)}function rS(f,b){const S=new Gs,j=new AbortController,J=setTimeout(()=>{j.abort(),ss(S,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:j.signal}).then(ne=>{clearTimeout(J),ne.ok?ss(S,"TestPingServer: ok",!0,b):ss(S,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(J),ss(S,"TestPingServer: error",!1,b)})}function ss(f,b,S,j,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),j(S)}catch{}}function sS(){this.g=new rt}function iS(f,b,S){const j=S||"";try{st(f,function(J,ne){let ye=J;c(J)&&(ye=we(J)),b.push(j+ne+"="+encodeURIComponent(ye))})}catch(J){throw b.push(j+"type="+encodeURIComponent("_badmap")),J}}function zl(f){this.l=f.Ub||null,this.j=f.eb||!1}w(zl,Re),zl.prototype.g=function(){return new Gl(this.l,this.j)},zl.prototype.i=function(f){return function(){return f}}({});function Gl(f,b){xe.call(this),this.D=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Gl,xe),t=Gl.prototype,t.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=b,this.readyState=1,Yo(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(b.body=f),(this.D||a).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jo(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Yo(this)),this.g&&(this.readyState=3,Yo(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bg(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function bg(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?Jo(this):Yo(this),this.readyState==3&&bg(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Jo(this))},t.Qa=function(f){this.g&&(this.response=f,Jo(this))},t.ga=function(){this.g&&Jo(this)};function Jo(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Yo(f)}t.setRequestHeader=function(f,b){this.u.append(f,b)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var S=b.next();!S.done;)S=S.value,f.push(S[0]+": "+S[1]),S=b.next();return f.join(`\r
`)};function Yo(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Eg(f){let b="";return B(f,function(S,j){b+=j,b+=":",b+=S,b+=`\r
`}),b}function Ld(f,b,S){e:{for(j in S){var j=!1;break e}j=!0}j||(S=Eg(S),typeof f=="string"?S!=null&&encodeURIComponent(String(S)):Ke(f,b,S))}function bt(f){xe.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(bt,xe);var oS=/^https?$/i,aS=["POST","PUT"];t=bt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,b,S,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ns.g(),this.v=this.o?Tt(this.o):Tt(ns),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(ne){Tg(this,ne);return}if(f=S||"",S=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var J in j)S.set(J,j[J]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const ne of j.keys())S.set(ne,j.get(ne));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(S.keys()).find(ne=>ne.toLowerCase()=="content-type"),J=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(aS,b,void 0))||j||J||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ye]of S)this.g.setRequestHeader(ne,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cg(this),this.u=!0,this.g.send(f),this.u=!1}catch(ne){Tg(this,ne)}};function Tg(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.m=5,Sg(f),Hl(f)}function Sg(f){f.A||(f.A=!0,Ne(f,"complete"),Ne(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ne(this,"complete"),Ne(this,"abort"),Hl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hl(this,!0)),bt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ig(this):this.bb())},t.bb=function(){Ig(this)};function Ig(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Ar(f)!=4||f.Z()!=2)){if(f.u&&Ar(f)==4)mt(f.Ea,0,f);else if(Ne(f,"readystatechange"),Ar(f)==4){f.h=!1;try{const ye=f.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var S;if(!(S=b)){var j;if(j=ye===0){var J=String(f.D).match(it)[1]||null;!J&&a.self&&a.self.location&&(J=a.self.location.protocol.slice(0,-1)),j=!oS.test(J?J.toLowerCase():"")}S=j}if(S)Ne(f,"complete"),Ne(f,"success");else{f.m=6;try{var ne=2<Ar(f)?f.g.statusText:""}catch{ne=""}f.l=ne+" ["+f.Z()+"]",Sg(f)}}finally{Hl(f)}}}}function Hl(f,b){if(f.g){Cg(f);const S=f.g,j=f.v[0]?()=>{}:null;f.g=null,f.v=null,b||Ne(f,"ready");try{S.onreadystatechange=j}catch{}}}function Cg(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Ar(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),Ae(b)}};function kg(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function lS(f){const b={};f=(f.g&&2<=Ar(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<f.length;j++){if(E(f[j]))continue;var S=V(f[j]);const J=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ne=b[J]||[];b[J]=ne,ne.push(S)}k(b,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qo(f,b,S){return S&&S.internalChannelParams&&S.internalChannelParams[f]||b}function Ag(f){this.Aa=0,this.i=[],this.j=new Gs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qo("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qo("baseRetryDelayMs",5e3,f),this.cb=Qo("retryDelaySeedMs",1e4,f),this.Wa=Qo("forwardChannelMaxRetries",2,f),this.wa=Qo("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Go(f&&f.concurrentRequestLimit),this.Da=new sS,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ag.prototype,t.la=8,t.G=1,t.connect=function(f,b,S,j){Ht(0),this.W=f,this.H=b||{},S&&j!==void 0&&(this.H.OSID=S,this.H.OAID=j),this.F=this.X,this.I=Vg(this,null,this.W),ql(this)};function jd(f){if(Ng(f),f.G==3){var b=f.U++,S=At(f.I);if(Ke(S,"SID",f.K),Ke(S,"RID",b),Ke(S,"TYPE","terminate"),Xo(f,S),b=new tr(f,f.j,b),b.L=2,b.v=Bl(At(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(b.v.toString(),"")}catch{}!S&&a.Image&&(new Image().src=b.v,S=!0),S||(b.g=Ug(b.j,null),b.g.ea(b.v)),b.F=Date.now(),ki(b)}Fg(f)}function $l(f){f.g&&(Vd(f),f.g.cancel(),f.g=null)}function Ng(f){$l(f),f.u&&(a.clearTimeout(f.u),f.u=null),Wl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function ql(f){if(!Ul(f.h)&&!f.s){f.s=!0;var b=f.Ga;re||oe(),Z||(re(),Z=!0),X.add(b,f),f.B=0}}function uS(f,b){return Ol(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=b.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=zs(g(f.Ga,f,b),jg(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const J=new tr(this,this.j,f);let ne=this.o;if(this.S&&(ne?(ne=A(ne),M(ne,this.S)):ne=this.S),this.m!==null||this.O||(J.H=ne,ne=null),this.P)e:{for(var b=0,S=0;S<this.i.length;S++){t:{var j=this.i[S];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(b+=j,4096<b){b=S;break e}if(b===4096||S===this.i.length-1){b=S+1;break e}}b=1e3}else b=1e3;b=Pg(this,J,b),S=At(this.I),Ke(S,"RID",f),Ke(S,"CVER",22),this.D&&Ke(S,"X-HTTP-Session-Id",this.D),Xo(this,S),ne&&(this.O?b="headers="+encodeURIComponent(String(Eg(ne)))+"&"+b:this.m&&Ld(S,this.m,ne)),$o(this.h,J),this.Ua&&Ke(S,"TYPE","init"),this.P?(Ke(S,"$req",b),Ke(S,"SID","null"),J.T=!0,Bo(J,S,null)):Bo(J,S,b),this.G=2}}else this.G==3&&(f?Rg(this,f):this.i.length==0||Ul(this.h)||Rg(this))};function Rg(f,b){var S;b?S=b.l:S=f.U++;const j=At(f.I);Ke(j,"SID",f.K),Ke(j,"RID",S),Ke(j,"AID",f.T),Xo(f,j),f.m&&f.o&&Ld(j,f.m,f.o),S=new tr(f,f.j,S,f.B+1),f.m===null&&(S.H=f.o),b&&(f.i=b.D.concat(f.i)),b=Pg(f,S,1e3),S.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),$o(f.h,S),Bo(S,j,b)}function Xo(f,b){f.H&&B(f.H,function(S,j){Ke(b,j,S)}),f.l&&st({},function(S,j){Ke(b,j,S)})}function Pg(f,b,S){S=Math.min(f.i.length,S);var j=f.l?g(f.l.Na,f.l,f):null;e:{var J=f.i;let ne=-1;for(;;){const ye=["count="+S];ne==-1?0<S?(ne=J[0].g,ye.push("ofs="+ne)):ne=0:ye.push("ofs="+ne);let ot=!0;for(let $t=0;$t<S;$t++){let Xe=J[$t].g;const nn=J[$t].map;if(Xe-=ne,0>Xe)ne=Math.max(0,J[$t].g-100),ot=!1;else try{iS(nn,ye,"req"+Xe+"_")}catch{j&&j(nn)}}if(ot){j=ye.join("&");break e}}}return f=f.i.splice(0,S),b.D=f,j}function Mg(f){if(!f.g&&!f.u){f.Y=1;var b=f.Fa;re||oe(),Z||(re(),Z=!0),X.add(b,f),f.v=0}}function Fd(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=zs(g(f.Fa,f),jg(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Dg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=zs(g(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),$l(this),Dg(this))};function Vd(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function Dg(f){f.g=new tr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var b=At(f.qa);Ke(b,"RID","rpc"),Ke(b,"SID",f.K),Ke(b,"AID",f.T),Ke(b,"CI",f.F?"0":"1"),!f.F&&f.ja&&Ke(b,"TO",f.ja),Ke(b,"TYPE","xmlhttp"),Xo(f,b),f.m&&f.o&&Ld(b,f.m,f.o),f.L&&(f.g.I=f.L);var S=f.g;f=f.ia,S.L=1,S.v=Bl(At(b)),S.m=null,S.P=!0,jl(S,f)}t.Za=function(){this.C!=null&&(this.C=null,$l(this),Fd(this),Ht(19))};function Wl(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Lg(f,b){var S=null;if(f.g==b){Wl(f),Vd(f),f.g=null;var j=2}else if(Ho(f.h,b))S=b.D,K(f.h,b),j=1;else return;if(f.G!=0){if(b.o)if(j==1){S=b.m?b.m.length:0,b=Date.now()-b.F;var J=f.B;j=er(),Ne(j,new Pl(j,S)),ql(f)}else Mg(f);else if(J=b.s,J==3||J==0&&0<b.X||!(j==1&&uS(f,b)||j==2&&Fd(f)))switch(S&&0<S.length&&(b=f.h,b.i=b.i.concat(S)),J){case 1:qs(f,5);break;case 4:qs(f,10);break;case 3:qs(f,6);break;default:qs(f,2)}}}function jg(f,b){let S=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(S*=2),S*b}function qs(f,b){if(f.j.info("Error code "+b),b==2){var S=g(f.fb,f),j=f.Xa;const J=!j;j=new Vt(j||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||$n(j,"https"),Bl(j),J?nS(j.toString(),S):rS(j.toString(),S)}else Ht(2);f.G=0,f.l&&f.l.sa(b),Fg(f),Ng(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function Fg(f){if(f.G=0,f.ka=[],f.l){const b=Ee(f.h);(b.length!=0||f.i.length!=0)&&(_(f.ka,b),_(f.ka,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.ra()}}function Vg(f,b,S){var j=S instanceof Vt?At(S):new Vt(S);if(j.g!="")b&&(j.g=b+"."+j.g),tn(j,j.s);else{var J=a.location;j=J.protocol,b=b?b+"."+J.hostname:J.hostname,J=+J.port;var ne=new Vt(null);j&&$n(ne,j),b&&(ne.g=b),J&&tn(ne,J),S&&(ne.l=S),j=ne}return S=f.D,b=f.ya,S&&b&&Ke(j,S,b),Ke(j,"VER",f.la),Xo(f,j),j}function Ug(f,b,S){if(b&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Ca&&!f.pa?new bt(new zl({eb:S})):new bt(f.pa),b.Ha(f.J),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Og(){}t=Og.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kl(){}Kl.prototype.g=function(f,b){return new Rn(f,b)};function Rn(f,b){xe.call(this),this.g=new Ag(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(f?f["X-WebChannel-Client-Profile"]=b.va:f={"X-WebChannel-Client-Profile":b.va}),this.g.S=f,(f=b&&b.Sb)&&!E(f)&&(this.g.m=f),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!E(b)&&(this.g.D=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new Pi(this)}w(Rn,xe),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){jd(this.g)},Rn.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var S={};S.__data__=f,f=S}else this.u&&(S={},S.__data__=we(f),f=S);b.i.push(new Dd(b.Ya++,f)),b.G==3&&ql(b)},Rn.prototype.N=function(){this.g.l=null,delete this.j,jd(this.g),delete this.g,Rn.aa.N.call(this)};function Bg(f){pn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const S in b){f=S;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}w(Bg,pn);function zg(){Dt.call(this),this.status=1}w(zg,Dt);function Pi(f){this.g=f}w(Pi,Og),Pi.prototype.ua=function(){Ne(this.g,"a")},Pi.prototype.ta=function(f){Ne(this.g,new Bg(f))},Pi.prototype.sa=function(f){Ne(this.g,new zg)},Pi.prototype.ra=function(){Ne(this.g,"b")},Kl.prototype.createWebChannel=Kl.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,_E=function(){return new Kl},wE=function(){return er()},xE=en,jf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hs.NO_ERROR=0,Hs.TIMEOUT=8,Hs.HTTP_ERROR=6,ju=Hs,Ml.COMPLETE="complete",vE=Ml,_t.EventType=Ue,Ue.OPEN="a",Ue.CLOSE="b",Ue.ERROR="c",Ue.MESSAGE="d",xe.prototype.listen=xe.prototype.K,pa=_t,bt.prototype.listenOnce=bt.prototype.L,bt.prototype.getLastError=bt.prototype.Ka,bt.prototype.getLastErrorCode=bt.prototype.Ba,bt.prototype.getStatus=bt.prototype.Z,bt.prototype.getResponseJson=bt.prototype.Oa,bt.prototype.getResponseText=bt.prototype.oa,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Ha,yE=bt}).apply(typeof fu<"u"?fu:typeof self<"u"?self:typeof window<"u"?window:{});const Ry="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new pm("@firebase/firestore");function aa(){return fi.logLevel}function Ie(t,...e){if(fi.logLevel<=Je.DEBUG){const n=e.map(_m);fi.debug(`Firestore (${No}): ${t}`,...n)}}function qr(t,...e){if(fi.logLevel<=Je.ERROR){const n=e.map(_m);fi.error(`Firestore (${No}): ${t}`,...n)}}function vo(t,...e){if(fi.logLevel<=Je.WARN){const n=e.map(_m);fi.warn(`Firestore (${No}): ${t}`,...n)}}function _m(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t="Unexpected state"){const e=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: `+t;throw qr(e),new Error(e)}function tt(t,e){t||De()}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ln.UNAUTHENTICATED))}shutdown(){}}class fR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pR{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tt(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt(typeof r.accessToken=="string"),new bE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string"),new ln(e)}}class mR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new mR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){tt(this.o===void 0);const r=i=>{i.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(tt(typeof n.token=="string"),this.R=n.token,new yR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=xR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ze(t,e){return t<e?-1:t>e?1:0}function xo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ft(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Ft(0,0))}static max(){return new Ve(new Ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,r){n===void 0?n=0:n>e.length&&De(),r===void 0?r=e.length-n:r>e.length-n&&De(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return tl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ct extends tl{construct(e,n,r){return new ct(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ct(n)}static emptyPath(){return new ct([])}}const wR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends tl{construct(e,n,r){return new Kt(e,n,r)}static isValidIdentifier(e){return wR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new be(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new be(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new be(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new be(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(n)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(ct.fromString(e))}static fromName(e){return new ke(ct.fromString(e).popFirst(5))}static empty(){return new ke(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new ct(e.slice()))}}function _R(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ve.fromTimestamp(r===1e9?new Ft(n+1,0):new Ft(n,r));return new Ns(s,ke.empty(),e)}function bR(t){return new Ns(t.readTime,t.key,-1)}class Ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ns(Ve.min(),ke.empty(),-1)}static max(){return new Ns(Ve.max(),ke.empty(),-1)}}function ER(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:Ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(t){if(t.code!==ae.FAILED_PRECONDITION||t.message!==TR)throw t;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ce((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ce?n:ce.resolve(n)}catch(n){return ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ce.reject(n)}static resolve(e){return new ce((n,r)=>{n(e)})}static reject(e){return new ce((n,r)=>{r(e)})}static waitFor(e){return new ce((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=ce.resolve(!1);for(const r of e)n=n.next(s=>s?ce.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new ce((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new ce((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function IR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}bm.oe=-1;function sd(t){return t==null}function _c(t){return t===0&&1/t==-1/0}function CR(t){return typeof t=="number"&&Number.isInteger(t)&&!_c(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kR(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function TE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){this.comparator=e,this.root=n||Wt.EMPTY}insert(e,n){return new wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pu(this.root,e,this.comparator,!0)}}class pu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Wt.RED,this.left=s??Wt.EMPTY,this.right=i??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Wt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new My(this.data.getIterator())}getIteratorFrom(e){return new My(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Yt(this.comparator);return n.data=e,n}}class My{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new Yt(Kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new SE("Invalid base64 string: "+i):i}}(e);return new Xt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const AR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(t){if(tt(!!t),typeof t=="string"){let e=0;const n=AR.exec(t);if(tt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(t.seconds),nanos:St(t.nanos)}}function St(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pi(t){return typeof t=="string"?Xt.fromBase64String(t):Xt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Tm(t){const e=t.mapValue.fields.__previous_value__;return Em(e)?Tm(e):e}function nl(t){const e=Rs(t.mapValue.fields.__local_write_time__.timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class rl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new rl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu={mapValue:{}};function mi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Em(t)?4:PR(t)?9007199254740991:RR(t)?10:11:De()}function Cr(t,e){if(t===e)return!0;const n=mi(t);if(n!==mi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nl(t).isEqual(nl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Rs(s.timestampValue),a=Rs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return pi(s.bytesValue).isEqual(pi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return St(s.geoPointValue.latitude)===St(i.geoPointValue.latitude)&&St(s.geoPointValue.longitude)===St(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return St(s.integerValue)===St(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=St(s.doubleValue),a=St(i.doubleValue);return o===a?_c(o)===_c(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return xo(t.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Py(o)!==Py(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Cr(o[l],a[l])))return!1;return!0}(t,e);default:return De()}}function sl(t,e){return(t.values||[]).find(n=>Cr(n,e))!==void 0}function wo(t,e){if(t===e)return 0;const n=mi(t),r=mi(e);if(n!==r)return Ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=St(i.integerValue||i.doubleValue),l=St(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Dy(t.timestampValue,e.timestampValue);case 4:return Dy(nl(t),nl(e));case 5:return Ze(t.stringValue,e.stringValue);case 6:return function(i,o){const a=pi(i),l=pi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ze(a[c],l[c]);if(d!==0)return d}return Ze(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ze(St(i.latitude),St(o.latitude));return a!==0?a:Ze(St(i.longitude),St(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ly(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const m=i.fields||{},g=o.fields||{},y=(a=m.value)===null||a===void 0?void 0:a.arrayValue,w=(l=g.value)===null||l===void 0?void 0:l.arrayValue,x=Ze(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:Ly(y,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===mu.mapValue&&o===mu.mapValue)return 0;if(i===mu.mapValue)return 1;if(o===mu.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let m=0;m<l.length&&m<d.length;++m){const g=Ze(l[m],d[m]);if(g!==0)return g;const y=wo(a[l[m]],c[d[m]]);if(y!==0)return y}return Ze(l.length,d.length)}(t.mapValue,e.mapValue);default:throw De()}}function Dy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ze(t,e);const n=Rs(t),r=Rs(e),s=Ze(n.seconds,r.seconds);return s!==0?s:Ze(n.nanos,r.nanos)}function Ly(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=wo(n[s],r[s]);if(i)return i}return Ze(n.length,r.length)}function _o(t){return Ff(t)}function Ff(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Rs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return pi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ke.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ff(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ff(n.fields[o])}`;return s+"}"}(t.mapValue):De()}function jy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vf(t){return!!t&&"integerValue"in t}function Sm(t){return!!t&&"arrayValue"in t}function Fy(t){return!!t&&"nullValue"in t}function Vy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fu(t){return!!t&&"mapValue"in t}function RR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Aa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return bi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Aa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Aa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Aa(n)}setAll(e){let n=Kt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Aa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Fu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Fu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){bi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Sn(Aa(this.value))}}function IE(t){const e=[];return bi(t.fields,(n,r)=>{const s=new Kt([n]);if(Fu(r)){const i=IE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new cn(e,0,Ve.min(),Ve.min(),Ve.min(),Sn.empty(),0)}static newFoundDocument(e,n,r,s){return new cn(e,1,n,Ve.min(),r,s,0)}static newNoDocument(e,n){return new cn(e,2,n,Ve.min(),Ve.min(),Sn.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,Ve.min(),Ve.min(),Sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.position=e,this.inclusive=n}}function Uy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ke.comparator(ke.fromName(o.referenceValue),n.key):r=wo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Oy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n="asc"){this.field=e,this.dir=n}}function MR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{}class Pt extends CE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LR(e,n,r):n==="array-contains"?new VR(e,r):n==="in"?new UR(e,r):n==="not-in"?new OR(e,r):n==="array-contains-any"?new BR(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jR(e,r):new FR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(wo(n,this.value)):n!==null&&mi(this.value)===mi(n)&&this.matchesComparison(wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends CE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new hr(e,n)}matches(e){return kE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function kE(t){return t.op==="and"}function AE(t){return DR(t)&&kE(t)}function DR(t){for(const e of t.filters)if(e instanceof hr)return!1;return!0}function Uf(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+_o(t.value);if(AE(t))return t.filters.map(e=>Uf(e)).join(",");{const e=t.filters.map(n=>Uf(n)).join(",");return`${t.op}(${e})`}}function NE(t,e){return t instanceof Pt?function(r,s){return s instanceof Pt&&r.op===s.op&&r.field.isEqual(s.field)&&Cr(r.value,s.value)}(t,e):t instanceof hr?function(r,s){return s instanceof hr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&NE(o,s.filters[a]),!0):!1}(t,e):void De()}function RE(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${_o(n.value)}`}(t):t instanceof hr?function(n){return n.op.toString()+" {"+n.getFilters().map(RE).join(" ,")+"}"}(t):"Filter"}class LR extends Pt{constructor(e,n,r){super(e,n,r),this.key=ke.fromName(r.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class jR extends Pt{constructor(e,n){super(e,"in",n),this.keys=PE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FR extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=PE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ke.fromName(r.referenceValue))}class VR extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sm(n)&&sl(n.arrayValue,this.value)}}class UR extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sl(this.value.arrayValue,n)}}class OR extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sl(this.value.arrayValue,n)}}class BR extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function By(t,e=null,n=[],r=[],s=null,i=null,o=null){return new zR(t,e,n,r,s,i,o)}function Im(t){const e=Le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Uf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),sd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_o(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_o(r)).join(",")),e.ue=n}return e.ue}function Cm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!NE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Oy(t.startAt,e.startAt)&&Oy(t.endAt,e.endAt)}function Of(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function GR(t,e,n,r,s,i,o,a){return new Ro(t,e,n,r,s,i,o,a)}function km(t){return new Ro(t)}function zy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ME(t){return t.collectionGroup!==null}function Na(t){const e=Le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Yt(Kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new il(i,r))}),n.has(Kt.keyField().canonicalString())||e.ce.push(new il(Kt.keyField(),r))}return e.ce}function Sr(t){const e=Le(t);return e.le||(e.le=DE(e,Na(t))),e.le}function HR(t){const e=Le(t);return e.he||(e.he=DE(e,t.explicitOrderBy)),e.he}function DE(t,e){if(t.limitType==="F")return By(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new il(s.field,i)});const n=t.endAt?new bc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bc(t.startAt.position,t.startAt.inclusive):null;return By(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Bf(t,e){const n=t.filters.concat([e]);return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ec(t,e,n){return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function id(t,e){return Cm(Sr(t),Sr(e))&&t.limitType===e.limitType}function LE(t){return`${Im(Sr(t))}|lt:${t.limitType}`}function Li(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>RE(s)).join(", ")}]`),sd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>_o(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>_o(s)).join(",")),`Target(${r})`}(Sr(t))}; limitType=${t.limitType})`}function od(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ke.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Na(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Uy(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Na(r),s)||r.endAt&&!function(o,a,l){const c=Uy(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Na(r),s))}(t,e)}function $R(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jE(t){return(e,n)=>{let r=!1;for(const s of Na(t)){const i=qR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function qR(t,e,n){const r=t.field.isKeyField()?ke.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?wo(l,c):De()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){bi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return TE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=new wt(ke.comparator);function Wr(){return WR}const FE=new wt(ke.comparator);function ma(...t){let e=FE;for(const n of t)e=e.insert(n.key,n);return e}function VE(t){let e=FE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ti(){return Ra()}function UE(){return Ra()}function Ra(){return new Po(t=>t.toString(),(t,e)=>t.isEqual(e))}const KR=new wt(ke.comparator),JR=new Yt(ke.comparator);function $e(...t){let e=JR;for(const n of t)e=e.add(n);return e}const YR=new Yt(Ze);function QR(){return YR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_c(e)?"-0":e}}function OE(t){return{integerValue:""+t}}function BE(t,e){return CR(e)?OE(e):Am(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this._=void 0}}function XR(t,e,n){return t instanceof Tc?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Em(i)&&(i=Tm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof ol?GE(t,e):t instanceof al?HE(t,e):function(s,i){const o=zE(s,i),a=Gy(o)+Gy(s.Pe);return Vf(o)&&Vf(s.Pe)?OE(a):Am(s.serializer,a)}(t,e)}function ZR(t,e,n){return t instanceof ol?GE(t,e):t instanceof al?HE(t,e):n}function zE(t,e){return t instanceof ll?function(r){return Vf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Tc extends ad{}class ol extends ad{constructor(e){super(),this.elements=e}}function GE(t,e){const n=$E(e);for(const r of t.elements)n.some(s=>Cr(s,r))||n.push(r);return{arrayValue:{values:n}}}class al extends ad{constructor(e){super(),this.elements=e}}function HE(t,e){let n=$E(e);for(const r of t.elements)n=n.filter(s=>!Cr(s,r));return{arrayValue:{values:n}}}class ll extends ad{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Gy(t){return St(t.integerValue||t.doubleValue)}function $E(t){return Sm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n){this.field=e,this.transform=n}}function tP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ol&&s instanceof ol||r instanceof al&&s instanceof al?xo(r.elements,s.elements,Cr):r instanceof ll&&s instanceof ll?Cr(r.Pe,s.Pe):r instanceof Tc&&s instanceof Tc}(t.transform,e.transform)}class nP{constructor(e,n){this.version=e,this.transformResults=n}}class xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ld{}function qE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ud(t.key,xn.none()):new xl(t.key,t.data,xn.none());{const n=t.data,r=Sn.empty();let s=new Yt(Kt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Vs(t.key,r,new Ln(s.toArray()),xn.none())}}function rP(t,e,n){t instanceof xl?function(s,i,o){const a=s.value.clone(),l=$y(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Vs?function(s,i,o){if(!Vu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=$y(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(WE(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pa(t,e,n,r){return t instanceof xl?function(i,o,a,l){if(!Vu(i.precondition,o))return a;const c=i.value.clone(),d=qy(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vs?function(i,o,a,l){if(!Vu(i.precondition,o))return a;const c=qy(i.fieldTransforms,l,o),d=o.data;return d.setAll(WE(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,a){return Vu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function sP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=zE(r.transform,s||null);i!=null&&(n===null&&(n=Sn.empty()),n.set(r.field,i))}return n||null}function Hy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&xo(r,s,(i,o)=>tP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xl extends ld{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vs extends ld{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function WE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $y(t,e,n){const r=new Map;tt(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,ZR(o,a,n[s]))}return r}function qy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,XR(i,o,e))}return r}class ud extends ld{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iP extends ld{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&rP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=UE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=qE(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),$e())}isEqual(e){return this.batchId===e.batchId&&xo(this.mutations,e.mutations,(n,r)=>Hy(n,r))&&xo(this.baseMutations,e.baseMutations,(n,r)=>Hy(n,r))}}class Nm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){tt(e.mutations.length===r.length);let s=function(){return KR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Nm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,We;function cP(t){switch(t){default:return De();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function KE(t){if(t===void 0)return qr("GRPC error has no .code"),ae.UNKNOWN;switch(t){case Nt.OK:return ae.OK;case Nt.CANCELLED:return ae.CANCELLED;case Nt.UNKNOWN:return ae.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ae.INTERNAL;case Nt.UNAVAILABLE:return ae.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ae.NOT_FOUND;case Nt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Nt.ABORTED:return ae.ABORTED;case Nt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Nt.DATA_LOSS:return ae.DATA_LOSS;default:return De()}}(We=Nt||(Nt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=new si([4294967295,4294967295],0);function Wy(t){const e=dP().encode(t),n=new gE;return n.update(e),new Uint8Array(n.digest())}function Ky(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new si([n,r],0),new si([s,i],0)]}class Rm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ga(`Invalid padding: ${n}`);if(r<0)throw new ga(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ga(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ga(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=si.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(si.fromNumber(r)));return s.compare(hP)===1&&(s=new si([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Wy(e),[r,s]=Ky(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Rm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Wy(e),[r,s]=Ky(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cd(Ve.min(),s,new wt(Ze),Wr(),$e())}}class wl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wl(r,n,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class JE{constructor(e,n){this.targetId=e,this.me=n}}class YE{constructor(e,n,r=Xt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Jy{constructor(){this.fe=0,this.ge=Qy(),this.pe=Xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=$e(),n=$e(),r=$e();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:De()}}),new wl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Qy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,tt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class fP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wr(),this.qe=Yy(),this.Qe=new wt(Ze)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:De()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Of(i))if(r===0){const o=new ke(i.path);this.Ue(n,o,cn.newNoDocument(o,Ve.min()))}else tt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=pi(r).toUint8Array()}catch(l){if(l instanceof SE)return vo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Rm(o,s,i)}catch(l){return vo(l instanceof ga?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Of(a.target)){const l=new ke(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,cn.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=$e();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new cd(e,n,this.Qe,this.ke,r);return this.ke=Wr(),this.qe=Yy(),this.Qe=new wt(Ze),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Jy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Yt(Ze),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ie("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Jy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Yy(){return new wt(ke.comparator)}function Qy(){return new wt(ke.comparator)}const pP={asc:"ASCENDING",desc:"DESCENDING"},mP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gP={and:"AND",or:"OR"};class yP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zf(t,e){return t.useProto3Json||sd(e)?e:{value:e}}function Sc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vP(t,e){return Sc(t,e.toTimestamp())}function Ir(t){return tt(!!t),Ve.fromTimestamp(function(n){const r=Rs(n);return new Ft(r.seconds,r.nanos)}(t))}function Pm(t,e){return Gf(t,e).canonicalString()}function Gf(t,e){const n=function(s){return new ct(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function XE(t){const e=ct.fromString(t);return tt(sT(e)),e}function Hf(t,e){return Pm(t.databaseId,e.path)}function _h(t,e){const n=XE(e);if(n.get(1)!==t.databaseId.projectId)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke(eT(n))}function ZE(t,e){return Pm(t.databaseId,e)}function xP(t){const e=XE(t);return e.length===4?ct.emptyPath():eT(e)}function $f(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eT(t){return tt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Xy(t,e,n){return{name:Hf(t,e),fields:n.value.mapValue.fields}}function wP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(tt(d===void 0||typeof d=="string"),Xt.fromBase64String(d||"")):(tt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Xt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?ae.UNKNOWN:KE(c.code);return new be(d,c.message||"")}(o);n=new YE(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_h(t,r.document.name),i=Ir(r.document.updateTime),o=r.document.createTime?Ir(r.document.createTime):Ve.min(),a=new Sn({mapValue:{fields:r.document.fields}}),l=cn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Uu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_h(t,r.document),i=r.readTime?Ir(r.readTime):Ve.min(),o=cn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Uu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_h(t,r.document),i=r.removedTargetIds||[];n=new Uu([],i,s,null)}else{if(!("filter"in e))return De();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new uP(s,i),a=r.targetId;n=new JE(a,o)}}return n}function _P(t,e){let n;if(e instanceof xl)n={update:Xy(t,e.key,e.value)};else if(e instanceof ud)n={delete:Hf(t,e.key)};else if(e instanceof Vs)n={update:Xy(t,e.key,e.data),updateMask:NP(e.fieldMask)};else{if(!(e instanceof iP))return De();n={verify:Hf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Tc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ol)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof al)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ll)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw De()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:vP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:De()}(t,e.precondition)),n}function bP(t,e){return t&&t.length>0?(tt(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Ir(s.updateTime):Ir(i);return o.isEqual(Ve.min())&&(o=Ir(i)),new nP(o,s.transformResults||[])}(n,e))):[]}function EP(t,e){return{documents:[ZE(t,e.path)]}}function tT(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ZE(t,s);const i=function(c){if(c.length!==0)return rT(hr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:cs(g.field),direction:CP(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=zf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function TP(t,e,n,r){const{_t:s,parent:i}=tT(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d="aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:cs(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:cs(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function SP(t){let e=xP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){tt(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(m){const g=nT(m);return g instanceof hr&&AE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(w){return new il(ji(w.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,sd(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(m){const g=!!m.before,y=m.values||[];return new bc(y,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,y=m.values||[];return new bc(y,g)}(n.endAt)),GR(e,s,o,i,a,"F",l,c)}function IP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ji(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ji(n.unaryFilter.field);return Pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ji(n.unaryFilter.field);return Pt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ji(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(ji(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hr.create(n.compositeFilter.filters.map(r=>nT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return De()}}(n.compositeFilter.op))}(t):De()}function CP(t){return pP[t]}function kP(t){return mP[t]}function AP(t){return gP[t]}function cs(t){return{fieldPath:t.canonicalString()}}function ji(t){return Kt.fromServerFormat(t.fieldPath)}function rT(t){return t instanceof Pt?function(n){if(n.op==="=="){if(Vy(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NAN"}};if(Fy(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vy(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NAN"}};if(Fy(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cs(n.field),op:kP(n.op),value:n.value}}}(t):t instanceof hr?function(n){const r=n.getFilters().map(s=>rT(s));return r.length===1?r[0]:{compositeFilter:{op:AP(n.op),filters:r}}}(t):De()}function NP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,r,s,i=Ve.min(),o=Ve.min(),a=Xt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.ct=e}}function PP(t){const e=SP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ec(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.un=new DP}addToCollectionParentIndex(e,n){return this.un.add(n),ce.resolve()}getCollectionParents(e,n){return ce.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ce.resolve()}deleteFieldIndex(e,n){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,n){return ce.resolve()}getDocumentsMatchingTarget(e,n){return ce.resolve(null)}getIndexType(e,n){return ce.resolve(0)}getFieldIndexes(e,n){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,n){return ce.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,n){return ce.resolve(Ns.min())}updateCollectionGroup(e,n,r){return ce.resolve()}updateIndexEntries(e,n){return ce.resolve()}}class DP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Yt(ct.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Yt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new bo(0)}static kn(){return new bo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this.changes=new Po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ce.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Pa(r.mutation,s,Ln.empty(),Ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,$e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=$e()){const s=ti();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ma();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ti();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,$e()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Wr();const o=Ra(),a=function(){return Ra()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Vs)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Pa(d.mutation,c,d.mutation.getFieldMask(),Ft.now())):o.set(c.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var m;return a.set(c,new jP(d,(m=o.get(c))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ra();let s=new wt((o,a)=>o-a),i=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Ln.empty();d=a.applyToLocalView(c,d),r.set(l,d);const m=(s.get(a.batchId)||$e()).add(l);s=s.insert(a.batchId,m)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,m=UE();d.forEach(g=>{if(!i.has(g)){const y=qE(n.get(g),r.get(g));y!==null&&m.set(g,y),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return ce.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ke.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ME(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):ce.resolve(ti());let a=-1,l=i;return o.next(c=>ce.forEach(c,(d,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(d)?ce.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,$e())).next(d=>({batchId:a,changes:VE(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next(r=>{let s=ma();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ma();return this.indexManager.getCollectionParents(e,i).next(a=>ce.forEach(a,l=>{const c=function(m,g){return new Ro(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,cn.newInvalidDocument(d)))});let a=ma();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&Pa(d.mutation,c,Ln.empty(),Ft.now()),od(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ce.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ir(s.createTime)}}(n)),ce.resolve()}getNamedQuery(e,n){return ce.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:PP(s.bundledQuery),readTime:Ir(s.readTime)}}(n)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.overlays=new wt(ke.comparator),this.Ir=new Map}getOverlay(e,n){return ce.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ti();return ce.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),ce.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),ce.resolve()}getOverlaysForCollection(e,n,r){const s=ti(),i=n.length+1,o=new ke(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return ce.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new wt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ti(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ti(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return ce.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aP(n,r));let i=this.Ir.get(n);i===void 0&&(i=$e(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(){this.Tr=new Yt(Ut.Er),this.dr=new Yt(Ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ut(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ut(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ke(new ct([])),r=new Ut(n,e),s=new Ut(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ke(new ct([])),r=new Ut(n,e),s=new Ut(n,e+1);let i=$e();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ut(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ut{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ke.comparator(e.key,n.key)||Ze(e.wr,n.wr)}static Ar(e,n){return Ze(e.wr,n.wr)||ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Yt(Ut.Er)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new oP(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Ut(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ce.resolve(o)}lookupMutationBatch(e,n){return ce.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return ce.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ut(n,0),s=new Ut(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),ce.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Yt(Ze);return n.forEach(s=>{const i=new Ut(s,0),o=new Ut(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),ce.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ke.isDocumentKey(i)||(i=i.child(""));const o=new Ut(new ke(i),0);let a=new Yt(Ze);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),ce.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){tt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ce.forEach(n.mutations,s=>{const i=new Ut(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ut(n,0),s=this.br.firstAfterOrEqual(r);return ce.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.Mr=e,this.docs=function(){return new wt(ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ce.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let r=Wr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():cn.newInvalidDocument(s))}),ce.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Wr();const o=n.path,a=new ke(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||ER(bR(d),r)<=0||(s.has(d.key)||od(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,n,r,s){De()}Or(e,n){return ce.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new GP(this)}getSize(e){return ce.resolve(this.size)}}class GP extends LP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),ce.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.persistence=e,this.Nr=new Po(n=>Im(n),Cm),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mm,this.targetCount=0,this.kr=bo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ce.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new bo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ce.resolve()}updateTargetData(e,n){return this.Kn(n),ce.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),ce.waitFor(i).next(()=>s)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ce.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ce.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),ce.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ce.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ce.resolve(r)}containsKey(e,n){return ce.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,n){this.qr={},this.overlays={},this.Qr=new bm(0),this.Kr=!1,this.Kr=!0,this.$r=new OP,this.referenceDelegate=e(this),this.Ur=new HP(this),this.indexManager=new MP,this.remoteDocumentCache=function(s){return new zP(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new RP(n),this.Gr=new VP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new BP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ie("MemoryPersistence","Starting transaction:",e);const s=new qP(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return ce.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class qP extends SR{constructor(e){super(),this.currentSequenceNumber=e}}class Dm{constructor(e){this.persistence=e,this.Jr=new Mm,this.Yr=null}static Zr(e){return new Dm(e)}get Xr(){if(this.Yr)return this.Yr;throw De()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ce.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ce.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Xr,r=>{const s=ke.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Ve.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ce.or([()=>ce.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=$e(),s=$e();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Lm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ak()?8:IR(Ik())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new WP;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(aa()<=Je.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",Li(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ce.resolve()):(aa()<=Je.DEBUG&&Ie("QueryEngine","Query:",Li(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(aa()<=Je.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",Li(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sr(n))):ce.resolve())}Yi(e,n){if(zy(n))return ce.resolve(null);let r=Sr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ec(n,null,"F"),r=Sr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=$e(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Ec(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return zy(n)||s.isEqual(Ve.min())?ce.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?ce.resolve(null):(aa()<=Je.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Li(n)),this.rs(e,o,n,_R(s,-1)).next(a=>a))})}ts(e,n){let r=new Yt(jE(e));return n.forEach((s,i)=>{od(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return aa()<=Je.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",Li(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ns.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new wt(Ze),this._s=new Po(i=>Im(i),Cm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function YP(t,e,n,r){return new JP(t,e,n,r)}async function iT(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=$e();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function QP(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const m=c.batch,g=m.keys();let y=ce.resolve();return g.forEach(w=>{y=y.next(()=>d.getEntry(l,w)).next(x=>{const _=c.docVersions.get(w);tt(_!==null),x.version.compareTo(_)<0&&(m.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=$e();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function oT(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function XP(t,e){const n=Le(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,m)=>{const g=s.get(m);if(!g)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,m)));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Xt.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),s=s.insert(m,y),function(x,_,v){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(g,y,d)&&a.push(n.Ur.updateTargetData(i,y))});let l=Wr(),c=$e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(ZP(i,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(Ve.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return ce.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function ZP(t,e,n){let r=$e(),s=$e();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Wr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ve.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function e4(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function t4(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,ce.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new ps(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function qf(t,e,n){const r=Le(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!vl(o))throw o;Ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Zy(t,e,n){const r=Le(t);let s=Ve.min(),i=$e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const m=Le(l),g=m._s.get(d);return g!==void 0?ce.resolve(m.os.get(g)):m.Ur.getTargetData(c,d)}(r,o,Sr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Ve.min(),n?i:$e())).next(a=>(n4(r,$R(e),a),{documents:a,Ts:i})))}function n4(t,e,n){let r=t.us.get(e)||Ve.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class ev{constructor(){this.activeTargetIds=QR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r4{constructor(){this.so=new ev,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ev,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu=null;function bh(){return gu===null?gu=function(){return 268435456+Math.round(2147483648*Math.random())}():gu++,"0x"+gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class a4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=bh(),l=this.xo(n,r.toUriEncodedString());Ie("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(d=>(Ie("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw vo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+No}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=i4[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=bh();return new Promise((o,a)=>{const l=new yE;l.setWithCredentials(!0),l.listenOnce(vE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ju.NO_ERROR:const d=l.getResponseJson();Ie(an,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case ju.TIMEOUT:Ie(an,`RPC '${e}' ${i} timed out`),a(new be(ae.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:const m=l.getStatus();if(Ie(an,`RPC '${e}' ${i} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const w=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(v)>=0?v:ae.UNKNOWN}(y.status);a(new be(w,y.message))}else a(new be(ae.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new be(ae.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{Ie(an,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Ie(an,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=bh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_E(),a=wE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Ie(an,`Creating RPC '${e}' stream ${s}: ${d}`,l);const m=o.createWebChannel(d,l);let g=!1,y=!1;const w=new o4({Io:_=>{y?Ie(an,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(g||(Ie(an,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Ie(an,`RPC '${e}' stream ${s} sending:`,_),m.send(_))},To:()=>m.close()}),x=(_,v,E)=>{_.listen(v,T=>{try{E(T)}catch(P){setTimeout(()=>{throw P},0)}})};return x(m,pa.EventType.OPEN,()=>{y||(Ie(an,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),x(m,pa.EventType.CLOSE,()=>{y||(y=!0,Ie(an,`RPC '${e}' stream ${s} transport closed`),w.So())}),x(m,pa.EventType.ERROR,_=>{y||(y=!0,vo(an,`RPC '${e}' stream ${s} transport errored:`,_),w.So(new be(ae.UNAVAILABLE,"The operation could not be completed")))}),x(m,pa.EventType.MESSAGE,_=>{var v;if(!y){const E=_.data[0];tt(!!E);const T=E,P=T.error||((v=T[0])===null||v===void 0?void 0:v.error);if(P){Ie(an,`RPC '${e}' stream ${s} received error:`,P);const L=P.status;let B=function(N){const M=Nt[N];if(M!==void 0)return KE(M)}(L),k=P.message;B===void 0&&(B=ae.INTERNAL,k="Unknown error status: "+L+" with message "+P.message),y=!0,w.So(new be(B,k)),m.close()}else Ie(an,`RPC '${e}' stream ${s} received:`,E),w.bo(E)}}),x(a,xE.STAT_EVENT,_=>{_.stat===jf.PROXY?Ie(an,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===jf.NOPROXY&&Ie(an,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function Eh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return new yP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new aT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(qr(n.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new be(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class l4 extends lT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=wP(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ve.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ve.min():o.readTime?Ir(o.readTime):Ve.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=$f(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Of(l)?{documents:EP(i,l)}:{query:tT(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=QE(i,o.resumeToken);const c=zf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ve.min())>0){a.readTime=Sc(i,o.snapshotVersion.toTimestamp());const c=zf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=IP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=$f(this.serializer),n.removeTarget=e,this.a_(n)}}class u4 extends lT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return tt(!!e.streamToken),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=bP(e.writeResults,e.commitTime),r=Ir(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=$f(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_P(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Gf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new be(ae.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Gf(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(ae.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class d4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qr(n),this.D_=!1):Ie("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ei(this)&&(Ie("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Le(l);c.L_.add(4),await _l(c),c.q_.set("Unknown"),c.L_.delete(4),await hd(c)}(this))})}),this.q_=new d4(r,s)}}async function hd(t){if(Ei(t))for(const e of t.B_)await e(!0)}async function _l(t){for(const e of t.B_)await e(!1)}function uT(t,e){const n=Le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Um(n)?Vm(n):Mo(n).r_()&&Fm(n,e))}function jm(t,e){const n=Le(t),r=Mo(n);n.N_.delete(e),r.r_()&&cT(n,e),n.N_.size===0&&(r.r_()?r.o_():Ei(n)&&n.q_.set("Unknown"))}function Fm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(t).A_(e)}function cT(t,e){t.Q_.xe(e),Mo(t).R_(e)}function Vm(t){t.Q_=new fP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Mo(t).start(),t.q_.v_()}function Um(t){return Ei(t)&&!Mo(t).n_()&&t.N_.size>0}function Ei(t){return Le(t).L_.size===0}function dT(t){t.Q_=void 0}async function f4(t){t.q_.set("Online")}async function p4(t){t.N_.forEach((e,n)=>{Fm(t,e)})}async function m4(t,e){dT(t),Um(t)?(t.q_.M_(e),Vm(t)):t.q_.set("Unknown")}async function g4(t,e,n){if(t.q_.set("Online"),e instanceof YE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){Ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ic(t,r)}else if(e instanceof Uu?t.Q_.Ke(e):e instanceof JE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ve.min()))try{const r=await oT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(Xt.EMPTY_BYTE_STRING,d.snapshotVersion)),cT(i,l);const m=new ps(d.target,l,c,d.sequenceNumber);Fm(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Ie("RemoteStore","Failed to raise snapshot:",r),await Ic(t,r)}}async function Ic(t,e,n){if(!vl(e))throw e;t.L_.add(1),await _l(t),t.q_.set("Offline"),n||(n=()=>oT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ie("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await hd(t)})}function hT(t,e){return e().catch(n=>Ic(t,n,e))}async function fd(t){const e=Le(t),n=Ps(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;y4(e);)try{const s=await e4(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,v4(e,s)}catch(s){await Ic(e,s)}fT(e)&&pT(e)}function y4(t){return Ei(t)&&t.O_.length<10}function v4(t,e){t.O_.push(e);const n=Ps(t);n.r_()&&n.V_&&n.m_(e.mutations)}function fT(t){return Ei(t)&&!Ps(t).n_()&&t.O_.length>0}function pT(t){Ps(t).start()}async function x4(t){Ps(t).p_()}async function w4(t){const e=Ps(t);for(const n of t.O_)e.m_(n.mutations)}async function _4(t,e,n){const r=t.O_.shift(),s=Nm.from(r,e,n);await hT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fd(t)}async function b4(t,e){e&&Ps(t).V_&&await async function(r,s){if(function(o){return cP(o)&&o!==ae.ABORTED}(s.code)){const i=r.O_.shift();Ps(r).s_(),await hT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await fd(r)}}(t,e),fT(t)&&pT(t)}async function nv(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),Ie("RemoteStore","RemoteStore received new credentials");const r=Ei(n);n.L_.add(3),await _l(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await hd(n)}async function E4(t,e){const n=Le(t);e?(n.L_.delete(2),await hd(n)):e||(n.L_.add(2),await _l(n),n.q_.set("Unknown"))}function Mo(t){return t.K_||(t.K_=function(n,r,s){const i=Le(n);return i.w_(),new l4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:f4.bind(null,t),Ro:p4.bind(null,t),mo:m4.bind(null,t),d_:g4.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Um(t)?Vm(t):t.q_.set("Unknown")):(await t.K_.stop(),dT(t))})),t.K_}function Ps(t){return t.U_||(t.U_=function(n,r,s){const i=Le(n);return i.w_(),new u4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:x4.bind(null,t),mo:b4.bind(null,t),f_:w4.bind(null,t),g_:_4.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await fd(t)):(await t.U_.stop(),t.O_.length>0&&(Ie("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Om(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bm(t,e){if(qr("AsyncQueue",`${e}: ${t}`),vl(t))return new be(ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ke.comparator(n.key,r.key):(n,r)=>ke.comparator(n.key,r.key),this.keyedMap=ma(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new so(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof so)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new so;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(){this.W_=new wt(ke.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):De():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Eo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Eo(e,n,so.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class S4{constructor(){this.queries=sv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Le(n),i=s.queries;s.queries=sv(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new be(ae.ABORTED,"Firestore shutting down"))}}function sv(){return new Po(t=>LE(t),id)}async function mT(t,e){const n=Le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new T4,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Bm(o,`Initialization of query '${Li(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&zm(n)}async function gT(t,e){const n=Le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function I4(t,e){const n=Le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&zm(n)}function C4(t,e,n){const r=Le(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function zm(t){t.Y_.forEach(e=>{e.next()})}var Wf,iv;(iv=Wf||(Wf={})).ea="default",iv.Cache="cache";class yT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e){this.key=e}}class xT{constructor(e){this.key=e}}class k4{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=$e(),this.mutatedKeys=$e(),this.Aa=jE(e),this.Ra=new so(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new rv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const g=s.get(d),y=od(this.query,m)?m:null,w=!!g&&this.mutatedKeys.has(g.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let _=!1;g&&y?g.data.isEqual(y.data)?w!==x&&(r.track({type:3,doc:y}),_=!0):this.ga(g,y)||(r.track({type:2,doc:y}),_=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),_=!0):g&&!y&&(r.track({type:1,doc:g}),_=!0,(l||c)&&(a=!0)),_&&(y?(o=o.add(y),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,m)=>function(y,w){const x=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return x(y)-x(w)}(d.type,m.type)||this.Aa(d.doc,m.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Eo(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new rv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=$e(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new xT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new vT(r))}),n}ba(e){this.Ta=e.Ts,this.da=$e();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Eo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class A4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class N4{constructor(e){this.key=e,this.va=!1}}class R4{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Po(a=>LE(a),id),this.Ma=new Map,this.xa=new Set,this.Oa=new wt(ke.comparator),this.Na=new Map,this.La=new Mm,this.Ba={},this.ka=new Map,this.qa=bo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function P4(t,e,n=!0){const r=ST(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await wT(r,e,n,!0),s}async function M4(t,e){const n=ST(t);await wT(n,e,!0,!1)}async function wT(t,e,n,r){const s=await t4(t.localStore,Sr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await D4(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&uT(t.remoteStore,s),a}async function D4(t,e,n,r,s){t.Ka=(m,g,y)=>async function(x,_,v,E){let T=_.view.ma(v);T.ns&&(T=await Zy(x.localStore,_.query,!1).then(({documents:k})=>_.view.ma(k,T)));const P=E&&E.targetChanges.get(_.targetId),L=E&&E.targetMismatches.get(_.targetId)!=null,B=_.view.applyChanges(T,x.isPrimaryClient,P,L);return av(x,_.targetId,B.wa),B.snapshot}(t,m,g,y);const i=await Zy(t.localStore,e,!0),o=new k4(e,i.Ts),a=o.ma(i.documents),l=wl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);av(t,n,c.wa);const d=new A4(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function L4(t,e,n){const r=Le(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!id(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await qf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&jm(r.remoteStore,s.targetId),Kf(r,s.targetId)}).catch(yl)):(Kf(r,s.targetId),await qf(r.localStore,s.targetId,!0))}async function j4(t,e){const n=Le(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jm(n.remoteStore,r.targetId))}async function F4(t,e,n){const r=H4(t);try{const s=await function(o,a){const l=Le(o),c=Ft.now(),d=a.reduce((y,w)=>y.add(w.key),$e());let m,g;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Wr(),x=$e();return l.cs.getEntries(y,d).next(_=>{w=_,w.forEach((v,E)=>{E.isValidDocument()||(x=x.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,w)).next(_=>{m=_;const v=[];for(const E of a){const T=sP(E,m.get(E.key).overlayedDocument);T!=null&&v.push(new Vs(E.key,T,IE(T.value.mapValue),xn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,v,a)}).next(_=>{g=_;const v=_.applyToLocalDocumentSet(m,x);return l.documentOverlayCache.saveOverlays(y,_.batchId,v)})}).then(()=>({batchId:g.batchId,changes:VE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new wt(Ze)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await bl(r,s.changes),await fd(r.remoteStore)}catch(s){const i=Bm(s,"Failed to persist write");n.reject(i)}}async function _T(t,e){const n=Le(t);try{const r=await XP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?tt(o.va):s.removedDocuments.size>0&&(tt(o.va),o.va=!1))}),await bl(n,r,e)}catch(r){await yl(r)}}function ov(t,e,n){const r=Le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Le(o);l.onlineState=a;let c=!1;l.queries.forEach((d,m)=>{for(const g of m.j_)g.Z_(a)&&(c=!0)}),c&&zm(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function V4(t,e,n){const r=Le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new wt(ke.comparator);o=o.insert(i,cn.newNoDocument(i,Ve.min()));const a=$e().add(i),l=new cd(Ve.min(),new Map,new wt(Ze),o,a);await _T(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Gm(r)}else await qf(r.localStore,e,!1).then(()=>Kf(r,e,n)).catch(yl)}async function U4(t,e){const n=Le(t),r=e.batch.batchId;try{const s=await QP(n.localStore,e);ET(n,r,null),bT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await bl(n,s)}catch(s){await yl(s)}}async function O4(t,e,n){const r=Le(t);try{const s=await function(o,a){const l=Le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(m=>(tt(m!==null),d=m.keys(),l.mutationQueue.removeMutationBatch(c,m))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);ET(r,e,n),bT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await bl(r,s)}catch(s){await yl(s)}}function bT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function ET(t,e,n){const r=Le(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Kf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||TT(t,r)})}function TT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(jm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Gm(t))}function av(t,e,n){for(const r of n)r instanceof vT?(t.La.addReference(r.key,e),B4(t,r)):r instanceof xT?(Ie("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||TT(t,r.key)):De()}function B4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ie("SyncEngine","New document in limbo: "+n),t.xa.add(r),Gm(t))}function Gm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ke(ct.fromString(e)),r=t.qa.next();t.Na.set(r,new N4(n)),t.Oa=t.Oa.insert(n,r),uT(t.remoteStore,new ps(Sr(km(n.path)),r,"TargetPurposeLimboResolution",bm.oe))}}async function bl(t,e,n){const r=Le(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(c){s.push(c);const m=Lm.Wi(l.targetId,c);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const d=Le(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>ce.forEach(c,g=>ce.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(m,g.targetId,y)).next(()=>ce.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(m,g.targetId,y)))))}catch(m){if(!vl(m))throw m;Ie("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const y=d.os.get(g),w=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,x)}}}(r.localStore,i))}async function z4(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){Ie("SyncEngine","User change. New user:",e.toKey());const r=await iT(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new be(ae.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bl(n,r.hs)}}function G4(t,e){const n=Le(t),r=n.Na.get(e);if(r&&r.va)return $e().add(r.key);{let s=$e();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function ST(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_T.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=G4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V4.bind(null,e),e.Ca.d_=I4.bind(null,e.eventManager),e.Ca.$a=C4.bind(null,e.eventManager),e}function H4(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O4.bind(null,e),e}class Cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return YP(this.persistence,new KP,e.initialUser,this.serializer)}Ga(e){return new $P(Dm.Zr,this.serializer)}Wa(e){return new r4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cc.provider={build:()=>new Cc};class Jf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ov(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=z4.bind(null,this.syncEngine),await E4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new S4}()}createDatastore(e){const n=dd(e.databaseInfo.databaseId),r=function(i){return new a4(i)}(e.databaseInfo);return function(i,o,a,l){return new c4(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new h4(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>ov(this.syncEngine,n,0),function(){return tv.D()?new tv:new s4}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const m=new R4(s,i,o,a,l,c);return d&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Le(s);Ie("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await _l(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jf.provider={build:()=>new Jf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ln.UNAUTHENTICATED,this.clientId=EE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Ie("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ie("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Bm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Th(t,e){t.asyncQueue.verifyOperationInProgress(),Ie("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await iT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function lv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await q4(t);Ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>nv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>nv(e.remoteStore,s)),t._onlineComponents=e}async function q4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await Th(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;vo("Error using user provided cache. Falling back to memory cache: "+n),await Th(t,new Cc)}}else Ie("FirestoreClient","Using default OfflineComponentProvider"),await Th(t,new Cc);return t._offlineComponents}async function Hm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ie("FirestoreClient","Using user provided OnlineComponentProvider"),await lv(t,t._uninitializedComponentsProvider._online)):(Ie("FirestoreClient","Using default OnlineComponentProvider"),await lv(t,new Jf))),t._onlineComponents}function W4(t){return Hm(t).then(e=>e.syncEngine)}function K4(t){return Hm(t).then(e=>e.datastore)}async function CT(t){const e=await Hm(t),n=e.eventManager;return n.onListen=P4.bind(null,e.syncEngine),n.onUnlisten=L4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=M4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=j4.bind(null,e.syncEngine),n}function J4(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new IT({next:g=>{d.Za(),o.enqueueAndForget(()=>gT(i,m));const y=g.docs.has(a);!y&&g.fromCache?c.reject(new be(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&l&&l.source==="server"?c.reject(new be(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new yT(km(a.path),d,{includeMetadataChanges:!0,_a:!0});return mT(i,m)}(await CT(t),t.asyncQueue,e,n,r)),r.promise}function Y4(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new IT({next:g=>{d.Za(),o.enqueueAndForget(()=>gT(i,m)),g.fromCache&&l.source==="server"?c.reject(new be(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new yT(a,d,{includeMetadataChanges:!0,_a:!0});return mT(i,m)}(await CT(t),t.asyncQueue,e,n,r)),r.promise}function Q4(t,e,n){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await K4(t);r.resolve(async function(o,a,l){var c;const d=Le(o),{request:m,ut:g,parent:y}=TP(d.serializer,HR(a),l);d.connection.Fo||delete m.parent;const w=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,y,m,1)).filter(_=>!!_.result);tt(w.length===1);const x=(c=w[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(x).reduce((_,v)=>(_[g[v]]=x[v],_),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t,e,n){if(!n)throw new be(ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function X4(t,e,n,r){if(e===!0&&r===!0)throw new be(ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cv(t){if(!ke.isDocumentKey(t))throw new be(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dv(t){if(ke.isDocumentKey(t))throw new be(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De()}function On(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new be(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pd(t);throw new be(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Z4(t,e){if(e<=0)throw new be(ae.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new be(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new be(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class md{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hR;switch(r.type){case"firstParty":return new gR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=uv.get(n);r&&(Ie("ComponentProvider","Removing Datastore"),uv.delete(n),r.terminate())}(this),Promise.resolve()}}function eM(t,e,n,r={}){var s;const i=(t=On(t,md))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ln.MOCK_USER;else{a=Sk(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new be(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ln(c)}t._authCredentials=new fR(new bE(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Us(this.firestore,e,this._query)}}class wn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class Is extends Us{constructor(e,n,r){super(e,n,km(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new ke(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function pt(t,e,...n){if(t=Un(t),AT("collection","path",e),t instanceof md){const r=ct.fromString(e,...n);return dv(r),new Is(t,null,r)}{if(!(t instanceof wn||t instanceof Is))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ct.fromString(e,...n));return dv(r),new Is(t.firestore,null,r)}}function Mt(t,e,...n){if(t=Un(t),arguments.length===1&&(e=EE.newId()),AT("doc","path",e),t instanceof md){const r=ct.fromString(e,...n);return cv(r),new wn(t,null,new ke(r))}{if(!(t instanceof wn||t instanceof Is))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ct.fromString(e,...n));return cv(r),new wn(t.firestore,t instanceof Is?t.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new aT(this,"async_queue_retry"),this.Vu=()=>{const r=Eh();r&&Ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Eh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Eh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!vl(e))throw e;Ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw qr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Om.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&De()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Xr extends md{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new fv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fv(e),this._firestoreClient=void 0,await e}}}function tM(t,e){const n=typeof t=="object"?t:$b(),r=typeof t=="string"?t:"(default)",s=gl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Ek("firestore");i&&eM(s,...i)}return s}function El(t){if(t._terminated)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nM(t),t._firestoreClient}function nM(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new NR(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,kT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new $4(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class sM{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(Xt.fromBase64String(e))}catch(n){throw new be(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new To(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=/^__.*__$/;class oM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new xl(e,this.data,n,this.fieldTransforms)}}class NT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function RT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class Wm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Wm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return kc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(RT(this.Cu)&&iM.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class aM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dd(e)}Qu(e,n,r,s=!1){return new Wm({Cu:e,methodName:n,qu:r,path:Kt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sl(t){const e=t._freezeSettings(),n=dd(t._databaseId);return new aM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Km(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Ym("Data must be an object, but it was:",o,r);const a=DT(r,o);let l,c;if(i.merge)l=new Ln(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const g=Yf(e,m,n);if(!o.contains(g))throw new be(ae.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);jT(d,g)||d.push(g)}l=new Ln(d),c=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,c=o.fieldTransforms;return new oM(new Sn(a),l,c)}class yd extends gd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yd}}class Jm extends gd{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new ll(e.serializer,BE(e.serializer,this.$u));return new eP(e.path,n)}isEqual(e){return e instanceof Jm&&this.$u===e.$u}}function PT(t,e,n,r){const s=t.Qu(1,e,n);Ym("Data must be an object, but it was:",s,r);const i=[],o=Sn.empty();bi(r,(l,c)=>{const d=Qm(e,l,n);c=Un(c);const m=s.Nu(d);if(c instanceof yd)i.push(d);else{const g=Il(c,m);g!=null&&(i.push(d),o.set(d,g))}});const a=new Ln(i);return new NT(o,a,s.fieldTransforms)}function MT(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Yf(e,r,n)],l=[s];if(i.length%2!=0)throw new be(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(Yf(e,i[g])),l.push(i[g+1]);const c=[],d=Sn.empty();for(let g=a.length-1;g>=0;--g)if(!jT(c,a[g])){const y=a[g];let w=l[g];w=Un(w);const x=o.Nu(y);if(w instanceof yd)c.push(y);else{const _=Il(w,x);_!=null&&(c.push(y),d.set(y,_))}}const m=new Ln(c);return new NT(d,m,o.fieldTransforms)}function lM(t,e,n,r=!1){return Il(n,t.Qu(r?4:3,e))}function Il(t,e){if(LT(t=Un(t)))return Ym("Unsupported field value:",e,t),DT(t,e);if(t instanceof gd)return function(r,s){if(!RT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Il(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Un(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ft.fromDate(r);return{timestampValue:Sc(s.serializer,i)}}if(r instanceof Ft){const i=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sc(s.serializer,i)}}if(r instanceof $m)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof To)return{bytesValue:QE(s.serializer,r._byteString)};if(r instanceof wn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof qm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Am(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${pd(r)}`)}(t,e)}function DT(t,e){const n={};return TE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bi(t,(r,s)=>{const i=Il(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function LT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof $m||t instanceof To||t instanceof wn||t instanceof gd||t instanceof qm)}function Ym(t,e,n){if(!LT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=pd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Yf(t,e,n){if((e=Un(e))instanceof Tl)return e._internalPath;if(typeof e=="string")return Qm(t,e);throw kc("Field path arguments must be of type string or ",t,!1,void 0,n)}const uM=new RegExp("[~\\*/\\[\\]]");function Qm(t,e,n){if(e.search(uM)>=0)throw kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Tl(...e.split("."))._internalPath}catch{throw kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new be(ae.INVALID_ARGUMENT,a+t+l)}function jT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cM extends FT{data(){return super.data()}}function vd(t,e){return typeof e=="string"?Qm(t,e):e instanceof Tl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new be(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xm{}class Zm extends Xm{}function Bn(t,e,...n){let r=[];e instanceof Xm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof eg).length,a=i.filter(l=>l instanceof xd).length;if(o>1||o>0&&a>0)throw new be(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class xd extends Zm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new xd(e,n,r)}_apply(e){const n=this._parse(e);return VT(e._query,n),new Us(e.firestore,e.converter,Bf(e._query,n))}_parse(e){const n=Sl(e.firestore);return function(i,o,a,l,c,d,m){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new be(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){mv(m,d);const y=[];for(const w of m)y.push(pv(l,i,w));g={arrayValue:{values:y}}}else g=pv(l,i,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||mv(m,d),g=lM(a,o,m,d==="in"||d==="not-in");return Pt.create(c,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Kr(t,e,n){const r=e,s=vd("where",t);return xd._create(s,r,n)}class eg extends Xm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new eg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)VT(o,l),o=Bf(o,l)}(e._query,n),new Us(e.firestore,e.converter,Bf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tg extends Zm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new tg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new be(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new be(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new il(i,o)}(e._query,this._field,this._direction);return new Us(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ro(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function gi(t,e="asc"){const n=e,r=vd("orderBy",t);return tg._create(r,n)}class ng extends Zm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ng(e,n,r)}_apply(e){return new Us(e.firestore,e.converter,Ec(e._query,this._limit,this._limitType))}}function So(t){return Z4("limit",t),ng._create("limit",t,"F")}function pv(t,e,n){if(typeof(n=Un(n))=="string"){if(n==="")throw new be(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ME(e)&&n.indexOf("/")!==-1)throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ct.fromString(n));if(!ke.isDocumentKey(r))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jy(t,new ke(r))}if(n instanceof wn)return jy(t,n._key);throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pd(n)}.`)}function mv(t,e){if(!Array.isArray(t)||t.length===0)throw new be(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VT(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new be(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hM{convertValue(e,n="none"){switch(mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return bi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>St(o.doubleValue));return new qm(i)}convertGeoPoint(e){return new $m(St(e.latitude),St(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nl(e));default:return null}}convertTimestamp(e){const n=Rs(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ct.fromString(e);tt(sT(r));const s=new rl(r.get(1),r.get(3)),i=new ke(r.popFirst(5));return s.isEqual(n)||qr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function fM(){return new rM("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class UT extends FT{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ou extends UT{data(e={}){return super.data(e)}}class pM{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ya(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ou(this._firestore,this._userDataWriter,r.key,r,new ya(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Ou(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ya(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Ou(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ya(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:mM(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function mM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t){t=On(t,wn);const e=On(t.firestore,Xr);return J4(El(e),t._key).then(n=>gM(e,t,n))}class ig extends hM{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}}function zn(t){t=On(t,Us);const e=On(t.firestore,Xr),n=El(e),r=new ig(e);return dM(t._query),Y4(n,t._query).then(s=>new pM(e,r,t,s))}function OT(t,e,n){t=On(t,wn);const r=On(t.firestore,Xr),s=rg(t.converter,e,n);return kl(r,[Km(Sl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,xn.none())])}function Do(t,e,n,...r){t=On(t,wn);const s=On(t.firestore,Xr),i=Sl(s);let o;return o=typeof(e=Un(e))=="string"||e instanceof Tl?MT(i,"updateDoc",t._key,e,n,r):PT(i,"updateDoc",t._key,e),kl(s,[o.toMutation(t._key,xn.exists(!0))])}function Cl(t){return kl(On(t.firestore,Xr),[new ud(t._key,xn.none())])}function Ti(t,e){const n=On(t.firestore,Xr),r=Mt(t),s=rg(t.converter,e);return kl(n,[Km(Sl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,xn.exists(!1))]).then(()=>r)}function kl(t,e){return function(r,s){const i=new Tr;return r.asyncQueue.enqueueAndForget(async()=>F4(await W4(r),s,i)),i.promise}(El(t),e)}function gM(t,e,n){const r=n.docs.get(e._key),s=new ig(t);return new UT(t,s,e._key,r,new ya(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t){return yM(t,{count:fM()})}function yM(t,e){const n=On(t.firestore,Xr),r=El(n),s=kR(e,(i,o)=>new lP(o,i.aggregateType,i._internalFieldPath));return Q4(r,t._query,s).then(i=>function(a,l,c){const d=new ig(a);return new sM(l,d,c)}(n,t,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Sl(e)}set(e,n,r){this._verifyNotCommitted();const s=Sh(e,this._firestore),i=rg(s.converter,n,r),o=Km(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,xn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Sh(e,this._firestore);let o;return o=typeof(n=Un(n))=="string"||n instanceof Tl?MT(this._dataReader,"WriteBatch.update",i._key,n,r,s):PT(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Sh(e,this._firestore);return this._mutations=this._mutations.concat(new ud(n._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sh(t,e){if((t=Un(t)).firestore!==e)throw new be(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function gv(t){return new Jm("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t){return El(t=On(t,Xr)),new vM(t,e=>kl(t,e))}(function(e,n=!0){(function(s){No=s})(LA),As(new Hr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Xr(new pR(r.getProvider("auth-internal")),new vR(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new be(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rl(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Er(Ry,"4.7.3",e),Er(Ry,"4.7.3","esm2017")})();const xM={apiKey:"AIzaSyDjgrBvKUaVg9U1XustHj9TeO4lHZDrcNg",authDomain:"fanra-dev.firebaseapp.com",projectId:"fanra-dev",storageBucket:"fanra-dev.firebasestorage.app",messagingSenderId:"664735861834",appId:"1:664735861834:web:6519570201553dbe4faab3",measurementId:"G-HMKEVZS65H"},BT=Hb(xM);lR(BT);const Oe=tM(BT),Vr="users",zT="chats",GT="knowledge_base",ul="shared_api_keys",Al="gallery_photos_production",Lo="blog_posts_production",_d="music_playlist",HT="site_content",$T="analytics_daily",wM="analytics_logs",bd="messages",yu=5,Qf="fanra_credits_offline",qT=[{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/609923798_2054349268723214_528785191593339343_n.webp?stp=dst-webp_s960x960&_nc_cat=110&ccb=1-7&_nc_sid=9f807c&_nc_ohc=BZOOtuLCh5UQ7kNvwGKzWef&_nc_oc=AdmGNpGcSr3xRboqLJeuQ8M5KjOpRBNLbsqQVscddteG1f05EVO_Kv4iZQn5l2OjztzywzdnV5Qp-sDi35XjQWpa&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QGA47iTm-6vGLy8O36BgFnvih3m4gJ3HjjJLwTB_h1_yg&oe=6987DFA2",caption:"Awal tahun yang tenang. Duduk santai menikmati sore.",month:"Januari",year:"2026",timestamp:1768608e6}],Ac=[{title:"Glitch in the Matrix: Bukti Kita Cuma Kode Biner?",subtitle:"Teori simulasi Nick Bostrom yang bikin Elon Musk kepikiran tiap malam.",category:"Konspirasi Sains",date:"20 Januari 2026",readTime:"8 min read",author:"Fanra",image:"https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?q=80&w=2070&auto=format&fit=crop",content:`Pernah ngerasa dj vu? Atau ngeliat sesuatu yang kayaknya 'nggak masuk akal' secara fisika? Banyak ilmuwan, termasuk Elon Musk, percaya peluang kita hidup di 'base reality' (kenyataan asli) itu cuma satu banding miliaran.

Bayangkan game The Sims atau GTA. Karakternya nggak sadar mereka ada di game. Seiring teknologi komputer kita makin canggih (VR, AI, Quantum Computing), kita makin dekat bisa bikin simulasi yang persis kenyataan. Kalau kita bisa bikin itu, siapa yang menjamin kalau KITA ini bukan hasil simulasi peradaban yang lebih maju?

Fisikawan James Gates bahkan nemuin kode error koreksi komputer (adinkras) di dalam persamaan supersimetri yang menjelaskan alam semesta. Kok bisa ada kode komputer di hukum fisika?`,timestamp:17699168e5},{title:"Paradoks Fermi: Keheningan yang Memekakkan Telinga",subtitle:"Jika alam semesta ini tak terhingga luasnya dan tua usianya, di mana semua orang?",category:"Sains & Filsafat",date:"9 Januari 2026",readTime:"7 min read",author:"Fanra",image:"https://upload.wikimedia.org/wikipedia/commons/6/69/NASA-HS201427a-HubbleUltraDeepField2014-20140603.jpg",content:`Pernahkah lo menatap langit malam yang cerah, melihat ribuan bintang, dan merasa betapa kecilnya kita? Lalu muncul satu pertanyaan sederhana yang menghantui para ilmuwan selama puluhan tahun: "Di mana mereka semua?"

Mari kita bicara matematika sebentar. Galaksi Bima Sakti kita sendiri memiliki sekitar 100 hingga 400 miliar bintang. Dan di alam semesta yang teramati, ada triliunan galaksi lain. Bahkan jika hanya sebagian kecil dari bintang-bintang itu memiliki planet yang mirip Bumi, seharusnya ada jutaan peradaban cerdas di luar sana.

Alam semesta berumur sekitar 13,8 miliar tahun. Bumi baru berumur 4,5 miliar tahun. Artinya, ada peradaban lain yang mungkin sudah ada miliaran tahun sebelum kita. Bayangkan teknologi mereka. Seharusnya, mereka sudah mengkolonisasi galaksi, atau setidaknya mengirim sinyal yang bisa kita tangkap. Tapi yang kita dapatkan hanyalah... kesunyian. Inilah yang disebut Paradoks Fermi.`,sources:[{label:"Wikipedia - Fermi Paradox",url:"https://en.wikipedia.org/wiki/Fermi_paradox"},{label:"Wait But Why - The Fermi Paradox",url:"https://waitbutwhy.com/2014/05/fermi-paradox.html"}],timestamp:17679168e5}],WT=[{id:"initial_track_1",spotifyId:"08A9yuCnJwBmItI1U9BZ7a",title:"Cincin",artist:"Hindia",addedAt:Date.now()}],_M=t=>t.toLowerCase().trim().replace(/[^a-z0-9]/g,""),bM=async(t,e,n)=>{try{const r=Bn(pt(Oe,Vr),Kr("name","==",t),Kr("school","==",e)),s=await zn(r);if(s.empty){const i=t==="ira123"&&e==="ira",o={name:t,school:e,deviceId:n,isAdmin:i,credits:yu,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),apiKeys:[]},a=await Ti(pt(Oe,Vr),o);return{user:{name:t,school:e,deviceId:n,isAdmin:i},credits:yu,id:a.id}}else{const i=s.docs[0],o=i.data();return await Do(Mt(Oe,Vr,i.id),{lastLogin:new Date().toISOString(),deviceId:n}),{user:{name:o.name,school:o.school,deviceId:o.deviceId,isAdmin:o.isAdmin||!1},credits:o.credits??yu,id:i.id}}}catch{const s=t==="ira123"&&e==="ira",i=`offline_${n}`,o=localStorage.getItem(Qf),a=o?parseInt(o,10):yu;return o||localStorage.setItem(Qf,a.toString()),{user:{name:t,school:e,deviceId:n,isAdmin:s},credits:a,id:i}}},EM=async(t,e)=>{if(t.startsWith("offline_")){localStorage.setItem(Qf,e.toString());return}try{await Do(Mt(Oe,Vr,t),{credits:e})}catch{}},TM=async t=>{if(t.startsWith("offline_"))return[];try{const e=await sg(Mt(Oe,Vr,t));return e.exists()?e.data().apiKeys||[]:[]}catch{return[]}},yv=async(t,e)=>{if(!t.startsWith("offline_"))try{await Do(Mt(Oe,Vr,t),{apiKeys:e});for(const n of e)if(n.isShared){const r=Bn(pt(Oe,ul),Kr("key","==",n.key));(await zn(r)).empty&&await Ti(pt(Oe,ul),{key:n.key,provider:t,addedAt:Date.now(),isActive:!0})}}catch{}},SM=async(t,e,n)=>{if(!t.startsWith("offline_"))try{const r=n.filter(o=>o.key!==e);await Do(Mt(Oe,Vr,t),{apiKeys:r});const s=Bn(pt(Oe,ul),Kr("key","==",e),Kr("provider","==",t));(await zn(s)).forEach(async o=>{await Cl(Mt(Oe,ul,o.id))})}catch{}},KT=async()=>{try{const t=Bn(pt(Oe,ul),Kr("isActive","==",!0),gi("addedAt","desc"),So(10));return(await zn(t)).docs.map(n=>n.data().key).sort(()=>.5-Math.random()).slice(0,5)}catch{return[]}},vv=async(t,e)=>{if(!t.startsWith("offline_"))try{await Ti(pt(Oe,Vr,t,zT),e)}catch{}},IM=async t=>{if(t.startsWith("offline_"))return[];try{const e=Bn(pt(Oe,Vr,t,zT),gi("timestamp","asc"),So(50));return(await zn(e)).docs.map(r=>r.data())}catch{return[]}},xv=async t=>{try{const e=_M(t);if(!e)return null;const n=Bn(pt(Oe,GT),Kr("question_normalized","==",e)),r=await zn(n);return r.empty?null:r.docs[0].data().answer}catch{return null}},CM=async()=>{try{return(await wd(pt(Oe,GT))).data().count}catch{return 0}},kM=async()=>{try{const t=pt(Oe,Al);if((await wd(t)).data().count===0){const e=og(Oe);qT.forEach(n=>e.set(Mt(t),{...n})),await e.commit()}}catch{}},JT=async()=>{try{await kM();const t=Bn(pt(Oe,Al),gi("timestamp","desc")),e=await zn(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return qT.map((e,n)=>({id:`local-${n}`,...e}))}},AM=async t=>{try{await Ti(pt(Oe,Al),t)}catch(e){throw e}},NM=async(t,e)=>{try{await Do(Mt(Oe,Al,t),e)}catch(n){throw n}},RM=async t=>{try{await Cl(Mt(Oe,Al,t))}catch(e){throw e}},PM=async()=>{try{const t=pt(Oe,Lo);if((await wd(t)).data().count===0){const e=og(Oe);Ac.forEach(n=>e.set(Mt(t),{...n})),await e.commit()}}catch{}},YT=async()=>{try{await PM();const t=Bn(pt(Oe,Lo),gi("timestamp","desc")),e=await zn(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return Ac.map((e,n)=>({id:`local-${n}`,...e}))}},MM=async t=>{try{if(t.startsWith("local-")){const r=parseInt(t.split("-")[1]);return Ac[r]?{id:t,...Ac[r]}:null}const e=Mt(Oe,Lo,t),n=await sg(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){return console.error("Error fetching single blog post",e),null}},DM=async t=>{try{await Ti(pt(Oe,Lo),t)}catch(e){throw e}},LM=async(t,e)=>{try{await Do(Mt(Oe,Lo,t),e)}catch(n){throw n}},jM=async t=>{try{await Cl(Mt(Oe,Lo,t))}catch(e){throw e}},FM=async()=>{try{const t=pt(Oe,_d);if((await wd(t)).data().count===0){const e=og(Oe);WT.forEach(n=>e.set(Mt(t),{...n})),await e.commit()}}catch{}},VM=async()=>{try{await FM();const t=Bn(pt(Oe,_d),gi("addedAt","desc")),e=await zn(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return WT}},UM=async t=>{try{await Ti(pt(Oe,_d),t)}catch(e){throw e}},OM=async t=>{try{await Cl(Mt(Oe,_d,t))}catch(e){throw e}};let io={};const wv=()=>{io={},console.log("Cache cleared.")},_v=t=>io[t]||null,QT=async t=>{if(io[t])return io[t];try{const e=await sg(Mt(Oe,HT,t));if(e.exists()){const n=e.data().text;return io[t]=n,n}return null}catch{return null}},XT=async(t,e)=>{io[t]=e;try{await OT(Mt(Oe,HT,t),{text:e,updatedAt:Date.now()},{merge:!0})}catch(n){throw n}},BM=async t=>{try{await Ti(pt(Oe,bd),{...t,timestamp:Date.now(),isRead:!1})}catch(e){throw console.error("Failed to send message",e),e}},zM=async t=>{try{await Cl(Mt(Oe,bd,t))}catch(e){throw console.error("Failed to delete message",e),e}},GM=async()=>{try{const t=Bn(pt(Oe,bd),Kr("type","==","public"),So(100));return(await zn(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch(t){return console.error("Failed to fetch public messages",t),[]}},HM=async()=>{try{const t=Bn(pt(Oe,bd),Kr("type","==","private"),So(100));return(await zn(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch(t){return console.error("Failed to fetch private messages",t),[]}},$M=()=>new Date().toISOString().split("T")[0],qM=async()=>{let t="ID";try{const e=new AbortController,n=setTimeout(()=>e.abort(),2e3),r=await fetch("https://ipapi.co/country/",{signal:e.signal});if(clearTimeout(n),r.ok){const s=await r.text();s&&s.length===2&&(t=s.toUpperCase())}}catch{t=Math.random()>.3?"ID":Math.random()>.5?"US":"SG"}try{const e=$M(),n=Mt(Oe,$T,e);await OT(n,{date:e,visitors:gv(1),[`geo.${t}`]:gv(1),timestamp:Date.now()},{merge:!0})}catch(e){console.warn("Analytics log failed",e)}},WM=async()=>{try{const t=Bn(pt(Oe,$T),gi("date","desc"),So(7)),e=await zn(t),n=[];let r=0,s=0;const i={};e.forEach(d=>{const m=d.data();n.unshift({date:m.date,visitors:m.visitors||0,errors:m.errors||0}),r+=m.visitors||0,s+=m.errors||0,m.geo&&Object.keys(m.geo).forEach(g=>{i[g]=(i[g]||0)+m.geo[g]})});const o=Bn(pt(Oe,wM),gi("timestamp","desc"),So(10)),l=(await zn(o)).docs.map(d=>({id:d.id,...d.data()})),c=Object.entries(i).map(([d,m])=>({country:d,count:m})).sort((d,m)=>m.count-d.count);return{dailyStats:n,totalVisitors:r,totalErrors:s,logs:l,geoStats:c}}catch(t){return console.error("Failed to fetch dashboard stats",t),null}},KM=[{label:"Biru",hex:"#3b82f6"},{label:"Merah",hex:"#ef4444"},{label:"Hijau",hex:"#22c55e"},{label:"Ungu",hex:"#a855f7"},{label:"Emas",hex:"#eab308"},{label:"Hitam",hex:"#0f172a"},{label:"Slate",hex:"#64748b"}],JM=[{label:"",value:"to right",title:"Ke Kanan"},{label:"",value:"to bottom",title:"Ke Bawah"},{label:"",value:"135deg",title:"Diagonal Bawah"},{label:"",value:"to left",title:"Ke Kiri"},{label:"",value:"to top",title:"Ke Atas"},{label:"",value:"45deg",title:"Diagonal Atas"}],lt=({id:t,defaultText:e,isAdmin:n,className:r="",tag:s="p",multiline:i=!1})=>{const[o,a]=F.useState(()=>_v(t)||e),[l,c]=F.useState(!1),[d,m]=F.useState("solid"),[g,y]=F.useState("#3b82f6"),[w,x]=F.useState("#3b82f6"),[_,v]=F.useState("#a855f7"),[E,T]=F.useState("to right"),P=F.useRef(null);F.useEffect(()=>{let M=!0;return(async()=>{try{const R=await QT(t);M&&R&&R!==o&&a(R)}catch{}})(),()=>{M=!1}},[t]),F.useEffect(()=>{l&&P.current&&(P.current.style.height="auto",P.current.style.height=P.current.scrollHeight+"px")},[l,o]);const L=async()=>{c(!1);try{await XT(t,o)}catch{alert("Gagal menyimpan perubahan teks.")}},B=()=>{c(!1);const M=_v(t);M&&a(M)},k=()=>{const M=P.current;if(!M)return;const V=M.selectionStart,R=M.selectionEnd;if(V===R)return;const D=o.substring(V,R),I=o.substring(0,V),H=o.substring(R);let fe="";d==="solid"?fe=`<span style="color: ${g}">${D}</span>`:fe=`<span style="background: ${`linear-gradient(${E}, ${w}, ${_})`}; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 800; -webkit-box-decoration-break: clone; box-decoration-break: clone;">${D}</span>`,a(I+fe+H)},A=()=>{const M=P.current;if(!M)return;const V=M.selectionStart,R=M.selectionEnd;if(V===R)return;const D=o.substring(V,R),I=o.substring(0,V),H=o.substring(R),fe=D.replace(/<\/?[^>]+(>|$)/g,"");a(I+fe+H)},N=()=>{const M=w;x(_),v(M)};return l?u.jsx("div",{className:`relative z-[100] ${r}`,children:u.jsxs("div",{className:"bg-white border border-slate-200 shadow-2xl rounded-2xl overflow-hidden min-w-[300px] md:min-w-[500px] flex flex-col animate-fade-in-up",children:[u.jsxs("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-100 flex justify-between items-center",children:[u.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:["Editing: ",u.jsx("span",{className:"text-slate-800",children:t.split("_").pop()})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:B,className:"px-3 py-1.5 text-xs font-bold text-slate-500 hover:text-slate-800 rounded-lg transition-colors",children:"Batal"}),u.jsxs("button",{onClick:L,className:"px-4 py-1.5 text-xs font-bold bg-slate-900 text-white hover:bg-slate-800 rounded-lg flex items-center gap-1.5 shadow-md active:scale-95 transition-all",children:[u.jsx(Gr,{className:"w-3 h-3"})," Simpan"]})]})]}),u.jsxs("div",{className:"p-4 bg-white relative",children:[u.jsx("textarea",{ref:P,value:o,onChange:M=>a(M.target.value),className:"w-full bg-transparent border-none outline-none text-sm font-mono text-slate-600 resize-none min-h-[100px] leading-relaxed placeholder:text-slate-300",placeholder:"Tulis teks atau HTML disini...",spellCheck:!1}),u.jsx("div",{className:"absolute top-2 right-2 opacity-10 pointer-events-none",children:u.jsx("span",{className:"text-[10px] font-mono",children:"HTML MODE"})})]}),u.jsx("div",{className:"bg-slate-50/50 border-t border-slate-100 p-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-lg w-fit",children:[u.jsx("button",{onClick:()=>m("solid"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all ${d==="solid"?"bg-white text-slate-900 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:"Solid Color"}),u.jsxs("button",{onClick:()=>m("gradient"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all flex items-center gap-1 ${d==="gradient"?"bg-white text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[u.jsx(q2,{className:"w-3 h-3"})," Gradient"]})]}),u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[d==="solid"?u.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[u.jsx("div",{className:"p-1.5 bg-white border border-slate-200 rounded-lg shadow-sm shrink-0",children:u.jsx($2,{className:"w-4 h-4 text-slate-400"})}),u.jsxs("div",{className:"flex gap-2",children:[KM.map(M=>u.jsx("button",{onClick:()=>y(M.hex),className:`w-6 h-6 rounded-full border-2 transition-transform hover:scale-110 shrink-0 ${g===M.hex?"border-slate-400 scale-110":"border-white shadow-sm"}`,style:{backgroundColor:M.hex},title:M.label},M.hex)),u.jsx("div",{className:"w-px h-6 bg-slate-300 mx-1"}),u.jsx("input",{type:"color",value:g,onChange:M=>y(M.target.value),className:"w-6 h-6 rounded-full cursor-pointer border border-slate-200 bg-white p-0 overflow-hidden shrink-0",title:"Custom Color"})]})]}):u.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Start"}),u.jsx("input",{type:"color",value:w,onChange:M=>x(M.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),u.jsx("button",{onClick:N,className:"text-slate-400 hover:text-slate-600 transition-colors p-1",title:"Tukar Warna",children:u.jsx(ed,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"End"}),u.jsx("input",{type:"color",value:_,onChange:M=>v(M.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),u.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white shadow-md ml-auto",style:{background:`linear-gradient(${E}, ${w}, ${_})`},title:"Preview Gradient"})]}),u.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 no-scrollbar",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase shrink-0 mr-1",children:"Arah:"}),JM.map(M=>u.jsx("button",{onClick:()=>T(M.value),className:`w-7 h-7 flex items-center justify-center rounded-md border text-sm transition-all shrink-0 ${E===M.value?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,title:M.title,children:M.label},M.value))]})]}),u.jsxs("div",{className:"flex items-center gap-2 w-full justify-end mt-2 pt-2 border-t border-slate-100",children:[u.jsxs("button",{onClick:A,className:"text-[10px] font-bold bg-white border border-slate-200 hover:border-red-300 hover:text-red-500 text-slate-500 px-3 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex items-center gap-1.5",title:"Hapus format",children:[u.jsx(B2,{className:"w-3.5 h-3.5"}),"Hapus Format"]}),u.jsxs("button",{onClick:k,className:"text-[10px] font-bold bg-blue-50 border border-blue-200 hover:bg-blue-100 text-blue-700 px-4 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex-1 justify-center flex",children:["Terapkan ",d==="solid"?"Warna":"Gradasi"]})]})]}),u.jsxs("p",{className:"text-[9px] text-slate-400 italic text-center",children:["*Blok teks di atas, atur ",d,", lalu klik Terapkan."]})]})})]})}):u.jsxs(s,{className:`relative group ${r} ${n?"cursor-pointer hover:opacity-80 transition-opacity decoration-blue-500/30":""}`,onClick:M=>{n&&(M.stopPropagation(),c(!0))},title:n?"Klik untuk mengedit warna & teks":void 0,children:[u.jsx("span",{dangerouslySetInnerHTML:{__html:o}}),n&&u.jsx("span",{className:"inline-flex ml-2 opacity-0 group-hover:opacity-100 transition-all duration-300 align-middle bg-slate-100 p-1 rounded-md border border-slate-200 shadow-sm absolute -top-4 -right-4 md:static",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-500",children:[u.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),u.jsx("path",{d:"m15 5 4 4"})]})})]})},YM=({isAdmin:t})=>{const e=wi(),[n,r]=F.useState(!1),[s,i]=F.useState({left:0,width:0,opacity:0}),[o,a]=F.useState(!1),l=F.useRef({}),c=[{path:"/",label:"Home"},{path:"/projects",label:"Projects"},{path:"/blog",label:"Blog"},{path:"/gallery",label:"Gallery"},{path:"/music",label:"Music"},{path:"/messages",label:"Pesan"}];F.useEffect(()=>{const g=()=>{const w=e.pathname;let x=c.find(v=>v.path===w);x||(x=c.find(v=>v.path!=="/"&&w.startsWith(v.path))),x||(x=c[0]);const _=l.current[x.path];_&&i({left:_.offsetLeft,width:_.offsetWidth,opacity:1})},y=setTimeout(g,50);return window.addEventListener("resize",g),()=>{clearTimeout(y),window.removeEventListener("resize",g)}},[e.pathname]);const d=()=>{a(!0),setTimeout(()=>{r(!1),a(!1)},700)},m=g=>g==="/"?e.pathname==="/":e.pathname.startsWith(g);return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:`
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          @keyframes curtainDown {
             from { transform: translateY(-100%); border-radius: 0 0 100px 100px; }
             to { transform: translateY(0); border-radius: 0; }
          }
          @keyframes curtainUp {
             from { transform: translateY(0); border-radius: 0; }
             to { transform: translateY(-100%); border-radius: 0 0 100px 100px; }
          }
          .animate-blob { animation: blob 10s infinite; }
          .animation-delay-2000 { animation-delay: 2s; }
          .animation-delay-4000 { animation-delay: 4s; }
          .animate-curtain-down { animation: curtainDown 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
          .animate-curtain-up { animation: curtainUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
        `}),u.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-100 transition-all",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center",children:[u.jsxs(fh,{to:"/",className:"flex items-center gap-3 cursor-pointer group mr-8",children:[u.jsx(go,{className:"w-8 h-8 transition-all duration-500 ease-out group-hover:scale-110 group-hover:drop-shadow-[0_0_15px_rgba(59,130,246,0.5)]",variant:"dark"}),u.jsx("div",{className:"flex flex-col justify-center",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(lt,{id:"navbar_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:t,tag:"span",className:"text-sm font-black tracking-tighter uppercase text-slate-900 leading-none"}),t&&u.jsx("span",{className:"bg-slate-900 text-white text-[9px] font-bold px-1.5 py-0.5 rounded leading-none shadow-sm",children:"ADMIN"})]})})]}),u.jsxs("div",{className:"hidden md:flex items-center relative ml-auto bg-slate-50/50 rounded-full p-1 border border-slate-200/60",children:[u.jsx("div",{className:"absolute top-1 bottom-1 bg-slate-900 rounded-full transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1)] shadow-md z-0 pointer-events-none",style:{left:s.left,width:s.width,opacity:s.opacity}}),c.map(g=>u.jsx(fh,{to:g.path,ref:y=>{l.current[g.path]=y},className:`relative z-10 px-6 py-2 rounded-full text-xs font-bold uppercase tracking-wide transition-colors duration-300 ${m(g.path)?"text-white":"text-slate-500 hover:text-slate-900"}`,children:g.label},g.path))]}),u.jsx("button",{className:"md:hidden p-2 text-slate-600 ml-auto",onClick:()=>r(!n),children:u.jsx(Rb,{className:"w-6 h-6"})})]})}),(n||o)&&u.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden flex flex-col items-center justify-center p-6 overflow-hidden bg-white ${o?"animate-curtain-up":"animate-curtain-down"}`,children:[u.jsxs("div",{className:"absolute inset-0 z-0 w-full h-full pointer-events-none",children:[u.jsx("div",{className:"absolute top-0 -left-10 w-96 h-96 bg-slate-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob"}),u.jsx("div",{className:"absolute top-1/4 -right-20 w-80 h-80 bg-gray-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"}),u.jsx("div",{className:"absolute -bottom-20 left-1/3 w-96 h-96 bg-zinc-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-4000"}),u.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-[10px]"})]}),u.jsxs("div",{className:`relative z-10 w-full flex flex-col items-center transition-all duration-500 ${o?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:[u.jsx("button",{className:"absolute -top-32 right-0 p-3 rounded-full bg-white text-slate-400 hover:text-slate-900 transition-colors shadow-sm border border-slate-100",onClick:()=>d(),children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})}),u.jsx("div",{className:"absolute -top-32 left-0 flex items-center gap-3",children:u.jsx(go,{className:"w-12 h-12",variant:"dark"})}),u.jsx("div",{className:"flex flex-col gap-6 w-full max-w-xs mt-10",children:c.map((g,y)=>u.jsx(fh,{to:g.path,onClick:()=>d(),className:`
                           text-3xl font-black uppercase tracking-tight text-center py-2 relative group
                           transition-all duration-300
                           ${m(g.path)?"text-slate-900 scale-110":"text-slate-300 hover:text-slate-500 hover:scale-105"}
                        `,style:{animationDelay:`${y*50}ms`},children:g.label},g.path))}),u.jsxs("div",{className:"absolute -bottom-40 flex flex-col items-center gap-2",children:[u.jsx("div",{className:"w-1 h-8 bg-slate-200 rounded-full"}),u.jsx("div",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-[0.3em]",children:"Fanra Studio"})]})]})]})]})},Ot=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null;let Ih=null;const ZT=t=>{if(Ih)return Ih;const e=t.sampleRate*2,n=t.createBuffer(1,e,t.sampleRate),r=n.getChannelData(0);for(let s=0;s<e;s++)r[s]=Math.random()*2-1;return Ih=n,n},QM=()=>{if(!Ot)return;Ot.state==="suspended"&&Ot.resume();const t=ZT(Ot),e=Ot.createBufferSource();e.buffer=t;const n=Ot.createBiquadFilter();n.type="lowpass",n.Q.value=1;const r=Ot.createGain();e.connect(n),n.connect(r),r.connect(Ot.destination);const s=Ot.currentTime;n.frequency.setValueAtTime(100,s),n.frequency.exponentialRampToValueAtTime(4e3,s+.15),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.3,s+.05),r.gain.exponentialRampToValueAtTime(.001,s+.3),e.start(s),e.stop(s+.3)},XM=()=>{if(!Ot)return;Ot.state==="suspended"&&Ot.resume();const t=ZT(Ot),e=Ot.createBufferSource();e.buffer=t;const n=Ot.createBiquadFilter();n.type="lowpass",n.Q.value=.5;const r=Ot.createGain();e.connect(n),n.connect(r),r.connect(Ot.destination);const s=Ot.currentTime;n.frequency.setValueAtTime(200,s),n.frequency.exponentialRampToValueAtTime(1200,s+.8),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.4,s+.2),r.gain.exponentialRampToValueAtTime(.001,s+1.2),e.start(s),e.stop(s+1.2)};class ZM{constructor(e,n,r){this.x=e,this.y=n;const s=Math.random()*Math.PI*2,i=Math.random()*10+2;this.vx=Math.cos(s)*i,this.vy=Math.sin(s)*i,this.size=3,this.friction=.92,this.opacity=1,this.ease=.2-r*.015,this.ease<.05&&(this.ease=.05)}update(e,n){this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction,this.x+=(e-this.x)*this.ease,this.y+=(n-this.y)*this.ease;const r=e-this.x,s=n-this.y;return Math.sqrt(r*r+s*s)<10&&(this.opacity-=.05),this.opacity>0}draw(e){e.save(),e.globalAlpha=this.opacity,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fillStyle="#2563eb",e.fill(),e.restore()}}const eD=({onComplete:t,onTriggerAdmin:e})=>{const[n,r]=F.useState(0),[s,i]=F.useState(!1),[o,a]=F.useState(!1),[l,c]=F.useState(!1),d=F.useRef(null),m=F.useRef(null),g=F.useRef([]),y=F.useRef({x:window.innerWidth/2,y:window.innerHeight/2});F.useEffect(()=>(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",window.scrollTo(0,0),()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[]),F.useEffect(()=>{const E=m.current;if(!E)return;const T=E.getContext("2d");if(!T)return;const P=()=>{E.width=window.innerWidth,E.height=window.innerHeight};window.addEventListener("resize",P),P();const L=A=>{y.current={x:A.clientX,y:A.clientY}};window.addEventListener("mousemove",L);let B;const k=()=>{T.clearRect(0,0,E.width,E.height),g.current.length>0?(g.current=g.current.filter(A=>A.update(y.current.x,y.current.y)?(A.draw(T),!0):!1),g.current.length===0&&o&&a(!1)):o&&a(!1),B=requestAnimationFrame(k)};return k(),()=>{window.removeEventListener("resize",P),window.removeEventListener("mousemove",L),cancelAnimationFrame(B)}},[o]);const w=E=>{if(o||!d.current)return;const T=d.current.getBoundingClientRect(),P=T.left+T.width/2,L=T.top+T.height/2;a(!0);let B=0;const k=10;g.current=[];const A=setInterval(()=>{if(B>=k){clearInterval(A);return}g.current.push(new ZM(P,L,B)),B++},50)},x=()=>{s||(QM(),i(!0),r(1),setTimeout(()=>i(!1),1e3))},_=()=>{s||(XM(),i(!0),r(2),setTimeout(()=>{window.scrollTo(0,0),t()},1e3))},v=()=>{l||(c(!0),setTimeout(()=>{e&&e(),setTimeout(()=>c(!1),2e3)},500))};return u.jsxs("div",{className:`fixed inset-0 z-[999] bg-white transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1) overflow-hidden h-[100dvh] w-screen ${n===2?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none"}`,onTouchMove:E=>E.preventDefault(),children:[u.jsx("canvas",{ref:m,className:"absolute inset-0 pointer-events-none z-50"}),u.jsxs("div",{className:"flex flex-col w-full h-[200vh] transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1)",style:{transform:n>=1?"translateY(-50%)":"translateY(0)"},children:[u.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center relative bg-white px-6",style:{backgroundImage:"radial-gradient(#e2e8f0 1px, transparent 1px)",backgroundSize:"32px 32px"},children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-[0.03] pointer-events-none overflow-hidden",children:u.jsx(go,{className:"w-[150%] h-[150%] -translate-x-1/4 -translate-y-1/4",variant:"dark"})}),u.jsxs("div",{className:"relative z-10 text-center animate-fade-in-up flex flex-col items-center",children:[u.jsx("div",{className:"mb-8 flex justify-center transform hover:scale-105 transition-transform duration-500",children:u.jsx(go,{className:"w-32 h-32 md:w-40 md:h-40 shadow-2xl shadow-slate-200/50 rounded-[2rem] bg-white",variant:"dark"})}),u.jsxs("h1",{className:"text-4xl md:text-7xl font-black text-slate-900 mb-4 tracking-tighter leading-tight",children:["IRFAN RIZKI ADITRI",u.jsx("span",{ref:d,onDoubleClick:w,className:`text-blue-600 inline-block cursor-pointer transition-opacity duration-100 select-none ${o?"opacity-0":"opacity-100"} hover:opacity-80`,title:"Double click me!",children:"."})]}),u.jsx("p",{className:"text-slate-400 text-lg md:text-2xl font-medium tracking-widest uppercase",children:"Portfolio & Playground"}),u.jsxs("button",{onClick:x,className:"group flex flex-col items-center gap-3 transition-all outline-none cursor-pointer mt-20 hover:-translate-y-1 duration-300",children:[u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-900 transition-colors",children:"Next"}),u.jsx("div",{className:"w-12 h-12 rounded-full border border-slate-200 bg-white hover:bg-slate-50 flex items-center justify-center shadow-lg transition-all duration-300 group-hover:border-slate-300 group-hover:shadow-xl",children:u.jsx(_r,{className:"w-5 h-5 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})})]})]})]}),u.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center bg-slate-50 px-6 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),u.jsx("div",{className:`absolute bottom-8 right-8 z-50 transition-all duration-700 ease-out cursor-default select-none ${l?"scale-[10] opacity-0 rotate-180 text-blue-600":"scale-100 opacity-5 hover:opacity-30 text-slate-900"}`,onDoubleClick:v,title:".",children:u.jsx(Za,{className:"w-6 h-6"})}),u.jsxs("div",{className:"relative z-10 max-w-4xl w-full grid md:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{className:"text-center md:text-left space-y-6 flex flex-col items-center md:items-start",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-[10px] font-bold uppercase tracking-wider",children:[u.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),"Student & Developer"]}),u.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-slate-900 tracking-tight leading-none",children:["Welcome to ",u.jsx("br",{}),u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-slate-500",children:"My Perspective."})]}),u.jsx("p",{className:"text-slate-500 text-lg leading-relaxed max-w-md",children:"Jelajahi eksperimen kode, cerita tentang alam semesta, dan tools AI buatan mahasiswa gabut."}),u.jsxs("button",{onClick:_,className:"inline-flex items-center gap-3 bg-slate-900 text-white px-8 py-4 rounded-xl font-bold shadow-xl shadow-slate-900/20 hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 group",children:["Explore Studio",u.jsx(yo,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),u.jsxs("div",{className:"relative hidden md:block",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-500 to-purple-500 rounded-[2.5rem] rotate-3 opacity-20 blur-2xl transform translate-y-4"}),u.jsxs("div",{className:"relative bg-white p-8 rounded-[2.5rem] shadow-2xl border border-slate-100 rotate-[-2deg] hover:rotate-0 transition-transform duration-500",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-slate-100 pb-6",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center p-2.5",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra",className:"w-full h-full object-contain"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-slate-900",children:"Fanra"}),u.jsx("p",{className:"text-xs text-slate-500",children:"Intelligent Assistant"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-slate-50 p-4 rounded-xl rounded-tl-none border border-slate-100 text-sm text-slate-600",children:"Halo! Ada yang bisa gue bantu hari ini? Mau edit foto atau ngobrol soal fisika?"}),u.jsx("div",{className:"bg-blue-600 p-4 rounded-xl rounded-tr-none text-sm text-white ml-auto max-w-[80%]",children:"Gue mau coba fitur AI Studio lo dong, Fanra!"})]})]})]})]})]})]})]})};class tD{constructor(e,n,r){this.x=e,this.y=n,this.baseX=e,this.baseY=n,this.size=1.5,this.density=Math.random()*20+5,this.color=r}draw(e,n){const r=this.y/n;let s=1-Math.pow(r,.8);s=Math.max(0,s),e.fillStyle=`rgba(203, 213, 225, ${s})`,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.closePath(),e.fill()}update(e,n){const r=e.x-this.x,s=e.y-this.y,i=Math.sqrt(r*r+s*s),o=r/i,a=s/i,l=e.radius,c=(l-i)/l,d=o*c*this.density,m=a*c*this.density;if(i<e.radius)n==="repel"?(this.x-=d,this.y-=m):(this.x+=d,this.y+=m);else{if(this.x!==this.baseX){const g=this.x-this.baseX;this.x-=g/15}if(this.y!==this.baseY){const g=this.y-this.baseY;this.y-=g/15}}}}const nD=({onTriggerAdmin:t,isAdmin:e=!1})=>{const n=_i(),[r]=F.useState(()=>Math.random()>.5?"repel":"attract"),s=F.useRef(null),i=F.useRef([]),o=F.useRef({x:-1e3,y:-1e3,radius:120}),a=F.useRef(null),[l,c]=F.useState([]),[d,m]=F.useState([]),[g,y]=F.useState(!0);return F.useEffect(()=>{(async()=>{try{const x=await YT();c(x.slice(0,2));const _=await JT();if(_.length>0){const v=Array(60).fill(_).flat();m(v)}else m([])}catch(x){console.error("Home data fetch error",x)}finally{y(!1)}})()},[]),F.useEffect(()=>{const w=s.current;if(!w)return;const x=w.getContext("2d");if(!x)return;const _=()=>{w.width=window.innerWidth,w.height=window.innerHeight,v()},v=()=>{i.current=[];const B=30,k=Math.ceil(w.height/B),A=Math.ceil(w.width/B);for(let N=0;N<k;N++)for(let M=0;M<A;M++){const V=M*B+B/2,R=N*B+B/2;i.current.push(new tD(V,R,"#cbd5e1"))}};_(),window.addEventListener("resize",_);const E=B=>{const k=w.getBoundingClientRect();o.current.x=B.clientX-k.left,o.current.y=B.clientY-k.top},T=()=>{o.current.x=-1e3,o.current.y=-1e3};window.addEventListener("mousemove",E),window.addEventListener("mouseout",T);let P;const L=()=>{x.clearRect(0,0,w.width,w.height),i.current.forEach(B=>{B.draw(x,w.height),B.update(o.current,r)}),P=requestAnimationFrame(L)};return L(),()=>{window.removeEventListener("resize",_),window.removeEventListener("mousemove",E),window.removeEventListener("mouseout",T),cancelAnimationFrame(P)}},[r]),F.useEffect(()=>{a.current&&d.length>0&&setTimeout(()=>{if(a.current){const w=a.current;w.scrollLeft=(w.scrollWidth-w.clientWidth)/2}},100)},[d]),u.jsxs("div",{className:"relative min-h-[90vh] flex flex-col overflow-hidden bg-gradient-to-b from-slate-50 via-white to-white",children:[u.jsx("style",{children:`
            .no-scrollbar::-webkit-scrollbar { display: none; }
            .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        `}),u.jsx("canvas",{ref:s,className:"fixed inset-0 z-0 pointer-events-auto opacity-60"}),u.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 md:px-12 py-12 flex-grow w-full space-y-24",children:[u.jsxs("div",{className:"mt-8",children:[u.jsx("h1",{className:"text-6xl md:text-8xl font-black text-slate-900 mb-8 leading-tight tracking-tighter max-w-5xl flex items-center flex-wrap gap-2",children:u.jsx(lt,{id:"home_hero_title",defaultText:"Fanra is here.",isAdmin:e,tag:"span",className:"inline-block"})}),u.jsx("div",{className:"max-w-5xl mt-16 relative",children:u.jsxs("div",{className:"grid md:grid-cols-5 gap-12 items-start",children:[u.jsxs("div",{className:"md:col-span-3 space-y-4",children:[u.jsx(lt,{id:"home_about_title",defaultText:"Mahasiswa Fisika. Cuma Hobi Ngoding.",isAdmin:e,tag:"h2",className:"text-2xl font-bold text-slate-900 leading-tight"}),u.jsx(lt,{id:"home_about_desc",defaultText:"Irfan Rizki Aditri (Fanra) merupakan mahasiswa Fisika angkatan 2025 di Institut Teknologi Sumatera (ITERA). Platform ini dikembangkan sebagai sarana eksplorasi teknologi dan pengembangan diri di tengah kesibukan akademis.",isAdmin:e,tag:"p",multiline:!0,className:"text-slate-600 text-lg leading-relaxed font-medium"})]}),u.jsxs("div",{className:"md:col-span-2 flex flex-col gap-4 pt-2",children:[u.jsxs("div",{className:"flex items-center gap-4 group",children:[u.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14614/14614573.png",alt:"Physics",className:"w-6 h-6 object-contain"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Physics Major"}),u.jsx("span",{className:"text-sm text-slate-500 block",children:"Institut Teknologi Sumatera '25"})]})]}),u.jsxs("div",{className:"flex items-center gap-4 group",children:[u.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/2120/2120483.png",alt:"AI & Dev",className:"w-6 h-6 object-contain"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Interest"}),u.jsx("span",{className:"text-sm text-slate-500 block",children:"Learning AI & Web Dev"})]})]}),u.jsxs("div",{className:"flex items-center gap-4 group",children:[u.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3037/3037821.png",alt:"Location",className:"w-6 h-6 object-contain"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Based In"}),u.jsx("span",{className:"text-sm text-slate-500 block",children:"Sumatera, Indonesia"})]})]})]})]})})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-8 md:p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer",onClick:()=>n("/projects"),children:[u.jsxs("div",{className:"flex items-start justify-between mb-8",children:[u.jsx("div",{className:"w-14 h-14 bg-slate-50 border border-slate-200 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3310/3310054.png",alt:"Projects",className:"w-8 h-8 object-contain"})}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-slate-100 px-3 py-1 rounded-full",children:"Project"})]}),u.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-3",children:"Projects & Tools"}),u.jsx("p",{className:"text-slate-500 mb-6 text-base leading-relaxed",children:"Eksperimen koding, mulai dari Fanra AI Studio hingga tools Instagram Panorama."}),u.jsxs("div",{className:"flex items-center text-sm font-bold text-blue-600 group-hover:translate-x-2 transition-transform",children:["Lihat Project ",u.jsx(yo,{className:"w-5 h-5 ml-2"})]})]}),u.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-8 md:p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer flex flex-col",onClick:()=>n("/blog"),children:[u.jsxs("div",{className:"flex items-start justify-between mb-6",children:[u.jsx("div",{className:"w-14 h-14 bg-slate-50 border border-slate-200 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1170/1170221.png",alt:"Blog",className:"w-8 h-8 object-contain"})}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-slate-100 px-3 py-1 rounded-full",children:"Blog"})]}),u.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Recent Stories"}),u.jsx("div",{className:"space-y-4 flex-1",children:!g&&l.length>0?l.map(w=>u.jsxs("div",{className:"border-l-2 border-slate-200 pl-4 hover:border-slate-900 transition-colors",children:[u.jsx("h4",{className:"font-bold text-slate-800 text-sm line-clamp-1",children:w.title}),u.jsx("p",{className:"text-xs text-slate-400 mt-1 line-clamp-1",children:w.subtitle})]},w.id)):u.jsx("p",{className:"text-slate-400 text-sm italic",children:"Belum ada tulisan terbaru."})}),u.jsxs("div",{className:"mt-6 flex items-center text-sm font-bold text-slate-600 group-hover:text-slate-900 group-hover:translate-x-2 transition-transform",children:["Baca Blog ",u.jsx(yo,{className:"w-5 h-5 ml-2"})]})]})]}),u.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-[2.5rem] p-8 md:p-10 relative overflow-hidden group",children:[u.jsx("div",{className:"flex justify-between items-end mb-8 relative z-10 px-2",children:u.jsxs("div",{className:"cursor-pointer",onClick:()=>n("/gallery"),children:[u.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-1",children:"Visual Diaries"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Momen acak yang tertangkap kamera."})]})}),u.jsx("div",{ref:a,className:"flex gap-3 overflow-x-auto no-scrollbar pb-2 items-center cursor-grab active:cursor-grabbing",children:!g&&d.length>0?d.map((w,x)=>u.jsxs("div",{className:"w-32 h-32 md:w-44 md:h-44 flex-shrink-0 rounded-xl overflow-hidden bg-slate-200 shadow-sm border border-slate-100 relative group/item cursor-pointer",onClick:()=>n("/gallery"),children:[u.jsx("img",{src:w.src,alt:"Gallery",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover/item:opacity-100 transition-opacity"})]},`${w.id}-${x}`)):u.jsx("div",{className:"w-full h-32 flex items-center justify-center text-slate-400 text-sm italic border-2 border-dashed border-slate-200 rounded-2xl",children:"Galeri masih kosong."})})]}),u.jsxs("div",{className:"relative rounded-[3rem] overflow-hidden bg-white border border-slate-200 p-12 md:p-16 text-center shadow-xl",children:[u.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto",children:[u.jsx(lt,{id:"home_cta_title",defaultText:"Punya ide atau sekadar mau menyapa?",isAdmin:e,tag:"h2",className:"text-3xl md:text-5xl font-black mb-6 tracking-tight text-slate-900"}),u.jsx(lt,{id:"home_cta_desc",defaultText:"Tinggalkan pesan di Public Wall. Bisa anonim, bisa rahasia, bebas.",isAdmin:e,tag:"p",className:"text-slate-500 mb-10 text-lg max-w-lg mx-auto"}),u.jsxs("button",{onClick:()=>n("/messages"),className:"bg-slate-900 text-white px-10 py-4 rounded-full font-bold hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 text-lg shadow-lg shadow-slate-900/20 flex items-center gap-3 mx-auto",children:[u.jsx(Db,{className:"w-5 h-5"}),"Tulis Pesan"]})]}),u.jsx("div",{className:"absolute -top-24 -left-24 w-64 h-64 bg-blue-50 rounded-full blur-3xl opacity-50 pointer-events-none"}),u.jsx("div",{className:"absolute -bottom-24 -right-24 w-64 h-64 bg-purple-50 rounded-full blur-3xl opacity-50 pointer-events-none"})]})]})]})},Ye=t=>{if(typeof window<"u"){const e=new CustomEvent("fanra-toast",{detail:{message:t}});window.dispatchEvent(e)}},bv=[{id:"fanra-ai",titleId:"projects_p1_title",descId:"projects_p1_desc",statusId:"status_project_p1",defaultTitle:"Fanra AI Studio",defaultDesc:"Asisten AI hybrid yang bisa ngobrol santai, edit foto (Hapus BG, Upscale 4K), dan cari info akurat.",fullDesc:"Fanra AI Studio adalah platform kecerdasan buatan terintegrasi yang dirancang untuk membantu produktivitas dan kreativitas. Menggunakan model Google Gemini Pro vision terbaru, aplikasi ini mampu memahami konteks visual, melakukan pengeditan gambar tingkat lanjut seperti penghapusan latar belakang yang presisi, peningkatan resolusi (Upscale 4K), hingga pencarian informasi real-time melalui integrasi Wikipedia dan Google Search.",iconUrl:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",theme:"blue",appPath:"/studio",buttonText:"Open Studio",features:["Smart Chatbot (Hybrid Search)","Background Remover","HD Upscale (4K)","Creative Remix","Wikipedia Integration"]},{id:"ig-panorama",titleId:"projects_p2_title",descId:"projects_p2_desc",statusId:"status_project_p2",defaultTitle:"IG Seamless Studio",defaultDesc:"Bikin konten carousel Instagram yang nyambung (Panorama) dengan mudah. Auto-slice saat download.",fullDesc:"IG Seamless Studio adalah tool khusus untuk konten kreator yang ingin membuat postingan carousel Instagram yang estetik dan menyambung (seamless). Tidak perlu lagi memotong gambar secara manual di Photoshop. Cukup upload gambar, atur layout di kanvas tanpa batas, tambahkan elemen dekoratif, dan sistem akan otomatis memotongnya menjadi slide-slide presisi siap posting.",iconUrl:"https://cdn-icons-png.flaticon.com/128/4327/4327816.png",theme:"pink",appPath:"/panorama",buttonText:"Open App",features:["Canvas Drag & Drop","Auto Slicing","Shape & Masking Tools","Layer Management","Instant Zip Download"]},{id:"fanragem",titleId:"projects_p3_title",descId:"projects_p3_desc",statusId:"status_project_p3",defaultTitle:"Fanragem",defaultDesc:"Game simulasi kehidupan mini. Bangun ekosistem digital, atur sumber daya, dan lihat perkembangannya.",fullDesc:"Fanragem adalah sebuah eksperimen simulasi kehidupan berbasis web. Di sini, Anda berperan sebagai pengatur ekosistem digital. Kelola sumber daya, populasi, dan lingkungan untuk melihat bagaimana keputusan kecil berdampak pada kelangsungan hidup dunia buatan Anda. Project ini masih dalam tahap pengembangan aktif.",iconUrl:"https://cdn-icons-png.flaticon.com/128/14047/14047858.png",theme:"purple",appPath:"",buttonText:"Play Demo",features:["Resource Management","Population Simulation","Dynamic Events","Pixel Art Style"]}],e1=({id:t,isAdmin:e,onStatusChange:n})=>{const[r,s]=F.useState("active"),[i,o]=F.useState(!0);F.useEffect(()=>{(async()=>{const m=await QT(t);s(m==="maintenance"||m==="development"?m:"active"),o(!1),n(m||"active")})()},[t]);const a=async d=>{if(d.stopPropagation(),!e)return;let m="active";r==="active"?m="maintenance":r==="maintenance"?m="development":m="active",s(m),n(m),await XT(t,m)};if(i)return u.jsx("div",{className:"w-16 h-5 bg-slate-100 rounded-full animate-pulse"});const c={active:{color:"bg-green-100 text-green-700 border-green-200",icon:u.jsx(Gr,{className:"w-3 h-3"}),label:"Active"},maintenance:{color:"bg-orange-100 text-orange-700 border-orange-200",icon:u.jsx(ml,{className:"w-3 h-3"}),label:"Maintenance"},development:{color:"bg-blue-100 text-blue-700 border-blue-200",icon:u.jsx(Mb,{className:"w-3 h-3"}),label:"Building"}}[r];return u.jsxs("button",{onClick:a,disabled:!e,className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border transition-all ${c.color} ${e?"cursor-pointer hover:brightness-95 active:scale-95":"cursor-default"}`,title:e?"Klik untuk ubah status":"",children:[c.icon,c.label]})},rD=({project:t,isAdmin:e,onClick:n})=>{const[r,s]=F.useState("active"),i=c=>{s(c)},a={blue:{bg:"bg-blue-50 border border-blue-100",text:"text-blue-600",hoverBorder:"group-hover:border-blue-300",glow:"bg-blue-500/10"},pink:{bg:"bg-pink-50 border border-pink-100",text:"text-pink-600",hoverBorder:"group-hover:border-pink-300",glow:"bg-pink-500/10"},purple:{bg:"bg-purple-50 border border-purple-100",text:"text-purple-600",hoverBorder:"group-hover:border-purple-300",glow:"bg-purple-500/10"}}[t.theme],l=r!=="active"&&!e;return u.jsxs("div",{onClick:n,className:`
                group relative bg-white rounded-[2rem] p-8 border transition-all duration-300 flex flex-col justify-between overflow-hidden h-full min-h-[320px]
                ${l?"cursor-default opacity-80 grayscale-[0.5]":"cursor-pointer hover:shadow-xl hover:-translate-y-1"}
                ${l?"border-slate-100":`border-slate-200 ${a.hoverBorder}`}
            `,children:[u.jsx("div",{className:`absolute top-0 right-0 w-48 h-48 rounded-full blur-3xl transition-opacity duration-500 opacity-0 group-hover:opacity-100 pointer-events-none translate-x-10 -translate-y-10 ${a.glow}`}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-transform duration-500 group-hover:scale-110 ${a.bg} ${a.text}`,children:u.jsx("img",{src:t.iconUrl,alt:t.defaultTitle,className:"w-8 h-8 object-contain"})}),u.jsx(e1,{id:t.statusId,isAdmin:e,onStatusChange:i})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx(lt,{id:t.titleId,defaultText:t.defaultTitle,isAdmin:e,tag:"h3",className:`text-2xl font-black text-slate-900 mb-3 tracking-tight ${!l&&`group-hover:${a.text} transition-colors`}`}),u.jsx(lt,{id:t.descId,defaultText:t.defaultDesc,isAdmin:e,tag:"p",multiline:!0,className:"text-slate-500 text-sm leading-relaxed font-medium line-clamp-3"})]})]}),u.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[u.jsx("span",{className:`text-xs font-bold uppercase tracking-wider transition-colors ${l?"text-slate-400":`${a.text}`}`,children:"See Details"}),u.jsx("div",{className:`p-2 rounded-full transition-all ${l?"bg-slate-100 text-slate-300":`bg-slate-50 ${a.text} group-hover:bg-white group-hover:shadow-md`}`,children:u.jsx(yo,{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform"})})]})]})},sD=({project:t,isAdmin:e})=>{const n=_i(),[r,s]=F.useState("active"),i=d=>{s(d)},o=r!=="active"&&!e,l={blue:{bg:"bg-blue-50",text:"text-blue-600",btn:"bg-blue-600 hover:bg-blue-700",gradient:"from-blue-500 to-cyan-500"},pink:{bg:"bg-pink-50",text:"text-pink-600",btn:"bg-pink-600 hover:bg-pink-700",gradient:"from-pink-500 to-rose-500"},purple:{bg:"bg-purple-50",text:"text-purple-600",btn:"bg-purple-600 hover:bg-purple-700",gradient:"from-purple-500 to-indigo-500"}}[t.theme],c=()=>{if(o){Ye(r==="maintenance"?"Aplikasi sedang dalam perbaikan (Maintenance).":"Aplikasi masih dalam tahap pengembangan.");return}t.appPath?n(t.appPath):Ye("Link aplikasi belum tersedia.")};return u.jsx("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:u.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-12",children:[u.jsxs("button",{onClick:()=>n("/projects"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:u.jsx(ci,{className:"w-4 h-4"})}),"Kembali ke Daftar"]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${l.bg} ${l.text}`,children:u.jsx("img",{src:t.iconUrl,alt:"Icon",className:"w-8 h-8 object-contain"})}),u.jsx(e1,{id:t.statusId,isAdmin:e,onStatusChange:i})]}),u.jsx(lt,{id:t.titleId,defaultText:t.defaultTitle,isAdmin:e,tag:"h1",className:"text-4xl md:text-5xl font-black text-slate-900 mb-6 tracking-tight"}),u.jsx("p",{className:"text-lg text-slate-600 leading-relaxed mb-8",children:t.fullDesc}),u.jsxs("div",{className:"space-y-3 mb-10",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Fitur Utama"}),t.features.map((d,m)=>u.jsxs("div",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[u.jsx("div",{className:`w-5 h-5 rounded-full ${l.bg} ${l.text} flex items-center justify-center shrink-0`,children:u.jsx(Gr,{className:"w-3 h-3"})}),d]},m))]}),u.jsxs("button",{onClick:c,disabled:o,className:`
                                px-8 py-4 rounded-2xl font-bold text-white text-lg shadow-xl shadow-slate-200/50 flex items-center gap-3 transition-all active:scale-95
                                ${o?"bg-slate-300 cursor-not-allowed":`${l.btn} hover:-translate-y-1`}
                            `,children:[o?"Terkunci":t.buttonText,!o&&u.jsx(yo,{className:"w-5 h-5"})]})]}),u.jsxs("div",{className:`aspect-square rounded-[3rem] bg-gradient-to-br ${l.gradient} opacity-90 relative overflow-hidden shadow-2xl flex items-center justify-center`,children:[u.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-white/20 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-white/10 rounded-full blur-2xl"}),u.jsxs("div",{className:"relative z-10 bg-white/10 backdrop-blur-md border border-white/20 p-8 rounded-3xl shadow-lg max-w-xs text-white/90 text-center",children:[u.jsx("img",{src:t.iconUrl,className:"w-20 h-20 mx-auto mb-4 opacity-90 drop-shadow-md"}),u.jsx("p",{className:"font-bold text-lg",children:"Preview Mode"}),u.jsx("p",{className:"text-xs opacity-70 mt-2",children:"Gambaran visual aplikasi saat dijalankan."})]})]})]})]})})},Ev=({isAdmin:t})=>{const e=_i(),{projectId:n}=Eb(),r=bv.find(s=>s.id===n);return n&&r?u.jsx(sD,{project:r,isAdmin:t}):u.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 animate-fade-in",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-12 gap-4",children:[u.jsxs("div",{children:[u.jsx(lt,{id:"projects_title",defaultText:"Selected Projects",isAdmin:t,tag:"h1",className:"text-4xl md:text-5xl font-black text-slate-900 mb-3 tracking-tighter"}),u.jsx(lt,{id:"projects_subtitle",defaultText:"Kumpulan tools dan simulasi interaktif.",isAdmin:t,tag:"p",className:"text-slate-500 text-lg max-w-2xl"})]}),t&&u.jsxs("div",{className:"bg-slate-900 text-white px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 shadow-lg",children:[u.jsx(mc,{className:"w-4 h-4"}),"Admin Mode: Klik status badge untuk ubah."]})]}),u.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl p-5 mb-12 flex gap-4 items-start shadow-sm",children:[u.jsx("div",{className:"p-2 bg-amber-100 rounded-xl text-amber-600 shrink-0",children:u.jsx(ml,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx(lt,{id:"projects_disclaimer_title",defaultText:"Info Pengunjung",isAdmin:t,tag:"h4",className:"font-bold text-amber-900 text-sm uppercase tracking-wide mb-1"}),u.jsx(lt,{id:"projects_disclaimer_text",defaultText:"Project dengan label 'Maintenance' atau 'Building' tidak bisa diakses sementara waktu demi alasan kestabilan. Silakan coba project yang berstatus 'Active'.",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-amber-700/80 leading-relaxed font-medium"})]})]}),u.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:bv.map(s=>u.jsx(rD,{project:s,isAdmin:t,onClick:()=>e(`/projects/${s.id}`)},s.id))})]})},Nl=({isOpen:t,title:e,description:n,onConfirm:r,onCancel:s,confirmText:i="Yes, Leave"})=>t?u.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:u.jsx("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl transform transition-all scale-100 animate-fade-in-up border border-slate-100",children:u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-amber-50 text-amber-500 rounded-full flex items-center justify-center mb-4 border border-amber-100",children:u.jsx(ml,{className:"w-6 h-6"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:e}),u.jsx("p",{className:"text-sm text-slate-500 mb-6 leading-relaxed",children:n}),u.jsxs("div",{className:"flex w-full gap-3",children:[u.jsx("button",{onClick:s,className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 rounded-xl font-medium hover:bg-slate-50 transition-colors text-sm",children:"Cancel"}),u.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-colors shadow-lg shadow-red-500/20 text-sm",children:i})]})]})})}):null,Tv=({isAdmin:t})=>{const{id:e}=Eb(),n=_i(),[r,s]=F.useState([]),[i,o]=F.useState(!0),[a,l]=F.useState("list"),[c,d]=F.useState(null),m=6,[g,y]=F.useState(m),[w,x]=F.useState("add"),[_,v]=F.useState({}),[E,T]=F.useState(!1),[P,L]=F.useState([]),[B,k]=F.useState(null),[A,N]=F.useState(null),[M,V]=F.useState(""),[R,D]=F.useState(""),[I,H]=F.useState(null),[fe,re]=F.useState(null),[Z,X]=F.useState({x:0,y:0,visible:!1}),[oe,W]=F.useState(!1),[$,de]=F.useState("url"),[te,Y]=F.useState(""),ge=F.useRef(null),Ce=F.useRef(null);F.useEffect(()=>{e?(l("detail"),o(!0),MM(e).then(O=>{O?d(O):(Ye("Artikel tidak ditemukan."),n("/blog",{replace:!0})),o(!1)})):a!=="editor"&&(l("list"),Se())},[e]);const Se=async()=>{o(!0);try{const O=await YT();s(O)}catch(O){console.error("Failed to fetch blog posts",O)}finally{o(!1)}};F.useEffect(()=>{if(a==="editor"){const O=_.content||"";if(!O){L([{id:Date.now().toString(),type:"text",content:""}]);return}const G=/(!image\(.*?\))/g,pe=O.split(G),we=pe.map(Ae=>{const rt=Ae.match(/^!image\((.*?)\)$/);return rt?{id:Math.random().toString(36).substr(2,9),type:"image",content:rt[1]}:{id:Math.random().toString(36).substr(2,9),type:"text",content:Ae}}).filter(Ae=>Ae.type==="image"||Ae.content.length>0||pe.length===1);we.length===0&&we.push({id:Date.now().toString(),type:"text",content:""}),L(we)}},[a,_.id]);const je=O=>{O&&(O.style.height="auto",O.style.height=`${O.scrollHeight}px`)};F.useEffect(()=>{a==="editor"&&(je(ge.current),je(Ce.current))},[a,_.title,_.subtitle]),F.useEffect(()=>{const O=()=>{Z.visible&&X({...Z,visible:!1})};return window.addEventListener("click",O),()=>window.removeEventListener("click",O)},[Z]);const Be=()=>{y(O=>O+m)},ze=()=>{y(m);const O=document.getElementById("blog-top");O&&O.scrollIntoView({behavior:"smooth"})},ht=()=>{x("add"),v({title:"",subtitle:"",category:"Category",date:new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),readTime:"5 min read",author:"Fanra",image:"",content:"",timestamp:Date.now(),sources:[]}),V(""),D(""),l("editor"),window.scrollTo(0,0)},Me=(O,G)=>{O.stopPropagation(),x("edit"),v({...G,sources:G.sources||[]}),V(""),D(""),l("editor"),window.scrollTo(0,0)},C=(O,G)=>{O.stopPropagation(),H(G)},se=async()=>{if(!I)return;const O=I;re(O),H(null);try{await jM(O),s(G=>G.filter(pe=>pe.id!==O)),(c==null?void 0:c.id)===O&&n("/blog"),Ye("Artikel berhasil dihapus.")}catch{Ye("Gagal menghapus artikel."),Se()}finally{re(null)}},ee=async()=>{if(!_.title){Ye("Judul wajib diisi.");return}const O=P.map(G=>G.type==="image"?`

!image(${G.content})

`:G.content).join("").trim();if(!O){Ye("Konten tidak boleh kosong.");return}T(!0);try{const G={..._,content:O,image:_.image||"https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop"};w==="add"?await DM(G):_.id&&await LM(_.id,G),Ye(w==="add"?"Artikel berhasil diterbitkan!":"Artikel berhasil diperbarui!"),n("/blog")}catch(G){console.error(G),Ye("Gagal menyimpan artikel.")}finally{T(!1)}},U=()=>{if(!M.trim()||!R.trim())return;const O={label:M.trim(),url:R.trim()},G=[..._.sources||[],O];v(pe=>({...pe,sources:G})),V(""),D("")},z=O=>{const G=(_.sources||[]).filter((pe,we)=>we!==O);v(pe=>({...pe,sources:G}))},q=O=>{var pe;const G=(pe=O.target.files)==null?void 0:pe[0];if(G){const we=new FileReader;we.onloadend=()=>{const Ae=we.result;v(rt=>({...rt,image:Ae}))},we.readAsDataURL(G)}},ie=O=>{n(`/blog/${O.id}`)},ue=(O,G)=>{O.preventDefault();const pe=O.target;k(G),N(pe.selectionStart),X({x:O.pageX,y:O.pageY,visible:!0})},Q=()=>{X({...Z,visible:!1}),Y(""),de("url"),W(!0)},le=O=>{var pe;const G=(pe=O.target.files)==null?void 0:pe[0];if(G){const we=new FileReader;we.onloadend=()=>{const Ae=we.result;Y(Ae)},we.readAsDataURL(G)}},ve=()=>{if(!te||!B){W(!1);return}const O=P.findIndex(Tt=>Tt.id===B);if(O===-1)return;const G=P[O],pe=G.content.slice(0,A||G.content.length),we=G.content.slice(A||G.content.length),Ae=[...P];Ae[O]={...G,content:pe};const rt={id:Date.now().toString(),type:"image",content:te},Re={id:(Date.now()+1).toString(),type:"text",content:we};Ae.splice(O+1,0,rt,Re),L(Ae),W(!1),Y("")},he=(O,G)=>{L(pe=>pe.map(we=>we.id===O?{...we,content:G}:we))},xe=O=>{confirm("Hapus elemen ini?")&&L(G=>G.filter((pe,we)=>we!==O))},Ne=O=>O?O.split(`
`).map((G,pe)=>{if(!G.trim())return u.jsx("br",{},pe);const we=G.match(/^!image\((.*?)\)$/);if(we)return u.jsx("div",{className:"my-8",children:u.jsx("img",{src:we[1],alt:"Content Illustration",className:"w-full rounded-xl shadow-lg border border-slate-100"})},pe);const Ae=/(\\\(.*?\\\)|\\\[.*?\\\])/g,rt=G.split(Ae);return u.jsx("p",{className:"mb-6 text-slate-700 leading-8 text-lg",children:rt.map((Re,Tt)=>{if(Re.startsWith("\\(")&&Re.endsWith("\\)")){const _t=Re.slice(2,-2);try{if(window.katex){const Ue=window.katex.renderToString(_t,{throwOnError:!1,displayMode:!1});return u.jsx("span",{dangerouslySetInnerHTML:{__html:Ue},className:"mx-1"},Tt)}return u.jsx("span",{className:"font-mono bg-yellow-100 px-1 rounded",children:_t},Tt)}catch{return Re}}if(Re.startsWith("\\[")&&Re.endsWith("\\]")){const _t=Re.slice(2,-2);try{if(window.katex){const Ue=window.katex.renderToString(_t,{throwOnError:!1,displayMode:!0});return u.jsx("div",{dangerouslySetInnerHTML:{__html:Ue},className:"my-4 text-center overflow-x-auto py-2"},Tt)}return u.jsx("div",{className:"font-mono bg-yellow-100 p-2 rounded my-2 text-center",children:_t},Tt)}catch{return Re}}return u.jsx("span",{children:Re},Tt)})},pe)}):null,Pe=r.slice(0,g),mt=g<r.length,Zt=g>m,kt=()=>c?r.filter(O=>O.id!==c.id).slice(0,2):[];if(a==="editor")return u.jsxs("div",{className:"min-h-screen bg-slate-100 animate-fade-in relative pb-20",children:[u.jsxs("div",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur-md border-b border-slate-200 px-6 py-4 flex items-center justify-between shadow-sm",children:[u.jsxs("button",{onClick:()=>n("/blog"),className:"flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 transition-colors px-4 py-2 rounded-xl hover:bg-slate-100 border border-transparent hover:border-slate-200",children:[u.jsx(ci,{className:"w-4 h-4"}),"Cancel"]}),u.jsx("span",{className:"text-sm font-black text-slate-400 uppercase tracking-widest hidden md:block",children:w==="add"?"Creating New Story":"Editing Mode"}),u.jsxs("button",{onClick:ee,disabled:E,className:"bg-slate-900 text-white px-6 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[E?u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):u.jsx(Gr,{className:"w-4 h-4"}),E?"Publishing...":"Publish"]})]}),u.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:u.jsxs("div",{className:"bg-white shadow-xl shadow-slate-200/50 rounded-3xl p-8 md:p-12 border border-slate-200",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-5 mb-8 p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[u.jsxs("div",{className:"flex flex-col gap-1.5",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Kategori"}),u.jsx("input",{type:"text",value:_.category,onChange:O=>v(G=>({...G,category:O.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors",placeholder:"Science..."})]}),u.jsxs("div",{className:"flex flex-col gap-1.5",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Penulis"}),u.jsx("input",{type:"text",value:_.author,onChange:O=>v(G=>({...G,author:O.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]}),u.jsxs("div",{className:"flex flex-col gap-1.5",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu Baca"}),u.jsx("input",{type:"text",value:_.readTime,onChange:O=>v(G=>({...G,readTime:O.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]}),u.jsxs("div",{className:"flex flex-col gap-1.5",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Tanggal"}),u.jsx("input",{type:"text",value:_.date,onChange:O=>v(G=>({...G,date:O.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]})]}),u.jsxs("div",{className:"space-y-6 mb-10 pb-10 border-b border-dashed border-slate-200",children:[u.jsx("textarea",{ref:ge,rows:1,value:_.title||"",onChange:O=>v(G=>({...G,title:O.target.value})),className:"w-full text-4xl md:text-5xl font-black text-slate-900 bg-transparent border-b-2 border-transparent focus:border-slate-200 outline-none placeholder:text-slate-300 resize-none overflow-hidden leading-tight py-2 transition-colors",placeholder:"Judul Utama Artikel..."}),u.jsx("textarea",{ref:Ce,rows:1,value:_.subtitle||"",onChange:O=>v(G=>({...G,subtitle:O.target.value})),className:"w-full text-xl font-medium text-slate-500 bg-transparent border-b border-transparent focus:border-slate-200 outline-none placeholder:text-slate-300 resize-none overflow-hidden leading-relaxed py-2 transition-colors",placeholder:"Tulis subtitle atau ringkasan menarik di sini..."})]}),u.jsxs("div",{className:"mb-10 group relative p-4 rounded-3xl border-2 border-dashed border-slate-200 hover:border-blue-400 transition-colors bg-slate-50/50",children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-3 text-center",children:"Cover Image"}),u.jsxs("div",{className:"w-full aspect-video rounded-2xl overflow-hidden shadow-sm bg-white border border-slate-100 flex flex-col items-center justify-center relative",children:[_.image?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:_.image,alt:"Cover",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsxs("div",{className:"text-white font-bold flex items-center gap-2",children:[u.jsx(Af,{className:"w-5 h-5"})," Ganti Gambar"]})})]}):u.jsxs("div",{className:"text-center p-8",children:[u.jsx(Xa,{className:"w-8 h-8 text-slate-300 mx-auto mb-3"}),u.jsx("p",{className:"text-slate-400 font-bold text-sm",children:"Upload Cover Image"})]}),u.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),u.jsx("input",{type:"text",value:_.image||"",onChange:O=>v(G=>({...G,image:O.target.value})),placeholder:"...atau tempel URL gambar disini",className:"w-full mt-4 text-xs text-slate-500 bg-white border border-slate-200 rounded-lg px-3 py-2 outline-none focus:border-blue-400 transition-colors text-center"})]}),u.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-100 p-4 rounded-xl text-xs text-blue-800 flex flex-col gap-2",children:[u.jsxs("p",{className:"font-bold flex items-center gap-2",children:[u.jsx(cy,{className:"w-4 h-4"})," Panduan Editor:"]}),u.jsxs("ul",{className:"list-disc list-inside space-y-1 opacity-80",children:[u.jsxs("li",{children:["Gunakan ",u.jsx("code",{children:"\\( rumus \\)"})," untuk matematika inline."]}),u.jsxs("li",{children:["Gunakan ",u.jsx("code",{children:"\\[ rumus \\]"})," untuk matematika blok."]}),u.jsxs("li",{children:[u.jsx("b",{children:"Klik Kanan"})," di area teks untuk menyisipkan gambar di tengah paragraf."]})]})]}),u.jsxs("div",{className:"relative space-y-2",children:[P.map((O,G)=>u.jsx("div",{className:"relative group/block",children:O.type==="text"?u.jsx("textarea",{value:O.content,onChange:pe=>{he(O.id,pe.target.value),je(pe.target)},onFocus:pe=>je(pe.target),onContextMenu:pe=>ue(pe,O.id),className:"w-full text-lg leading-9 text-slate-800 bg-transparent border-none outline-none placeholder:text-slate-300 resize-none font-serif transition-colors overflow-hidden focus:bg-slate-50 rounded-lg px-2",placeholder:G===0?"Mulai menulis cerita Anda di sini...":"Lanjutkan menulis...",rows:1}):u.jsxs("div",{className:"relative my-4 group/image",children:[u.jsx("div",{className:"rounded-xl overflow-hidden shadow-lg border border-slate-200 bg-slate-50",children:u.jsx("img",{src:O.content,alt:"Inline",className:"w-full h-auto object-contain max-h-[500px]"})}),u.jsx("button",{onClick:()=>xe(G),className:"absolute top-3 right-3 bg-red-500 text-white p-2 rounded-full shadow-md opacity-0 group-hover/image:opacity-100 transition-opacity hover:bg-red-600 hover:scale-110",title:"Hapus Gambar",children:u.jsx(br,{className:"w-4 h-4"})})]})},O.id)),Z.visible&&u.jsx("div",{className:"fixed z-50 bg-white border border-slate-200 rounded-lg shadow-xl py-1 w-48 animate-fade-in",style:{top:Z.y,left:Z.x},children:u.jsxs("button",{onClick:Q,className:"w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 hover:text-blue-600 flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 bg-slate-100 rounded flex items-center justify-center text-[10px]",children:""}),"Sisipkan Gambar"]})}),oe&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-2xl w-full max-w-md animate-fade-in-up border border-slate-100",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Sisipkan Gambar"}),u.jsxs("div",{className:"flex gap-2 mb-4 bg-slate-100 p-1 rounded-xl",children:[u.jsx("button",{onClick:()=>de("url"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${$==="url"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Link URL"}),u.jsx("button",{onClick:()=>de("upload"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${$==="upload"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Upload File"})]}),$==="url"?u.jsx("input",{type:"text",value:te,onChange:O=>Y(O.target.value),placeholder:"https://example.com/image.jpg",className:"w-full border border-slate-200 rounded-xl px-4 py-3 text-sm mb-6 outline-none focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10 bg-slate-50 text-slate-900 placeholder:text-slate-400",autoFocus:!0}):u.jsxs("div",{className:"mb-6",children:[u.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-slate-300 border-dashed rounded-2xl cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[u.jsx(Xa,{className:"w-8 h-8 text-slate-400 mb-2"}),u.jsx("p",{className:"text-xs text-slate-500 font-bold",children:"Klik untuk pilih file"}),u.jsx("p",{className:"text-[10px] text-slate-400",children:"JPG, PNG, WEBP (Max 2MB)"})]}),u.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:le})]}),te&&u.jsx("div",{className:"mt-2 text-center",children:u.jsxs("p",{className:"text-xs text-green-600 font-bold flex items-center justify-center gap-1",children:[u.jsx(Gr,{className:"w-3 h-3"})," File siap disisipkan"]})})]}),u.jsxs("div",{className:"flex justify-end gap-3",children:[u.jsx("button",{onClick:()=>W(!1),className:"px-5 py-2.5 text-xs font-bold text-slate-500 hover:bg-slate-100 rounded-xl transition-colors",children:"Batal"}),u.jsx("button",{onClick:ve,className:"px-6 py-2.5 text-xs font-bold bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-900/20 active:scale-95",children:"Sisipkan"})]})]})})]}),u.jsxs("div",{className:"mt-16 pt-10 border-t border-slate-200",children:[u.jsxs("h4",{className:"text-sm font-bold text-slate-800 uppercase tracking-widest mb-6 flex items-center gap-2",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/2420/2420165.png",alt:"Sources",className:"w-4 h-4 object-contain opacity-60"}),"Referensi & Sumber"]}),u.jsx("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200 mb-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Nama Sumber"}),u.jsx("input",{type:"text",value:M,onChange:O=>V(O.target.value),placeholder:"Contoh: Wikipedia",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"URL Link"}),u.jsx("input",{type:"text",value:R,onChange:O=>D(O.target.value),placeholder:"https://...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),u.jsx("div",{children:u.jsx("button",{onClick:U,disabled:!M||!R,className:"w-full py-2 bg-slate-900 text-white rounded-lg text-sm font-bold hover:bg-slate-800 disabled:opacity-50 transition-all",children:"+ Tambah"})})]})}),_.sources&&_.sources.length>0&&u.jsx("div",{className:"space-y-2",children:_.sources.map((O,G)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-xl hover:border-slate-300 transition-colors group",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center shrink-0",children:u.jsx(pc,{className:"w-4 h-4"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:O.label}),u.jsx("p",{className:"text-xs text-slate-400 truncate",children:O.url})]})]}),u.jsx("button",{onClick:()=>z(G),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:u.jsx(br,{className:"w-4 h-4"})})]},G))}),(!_.sources||_.sources.length===0)&&u.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"Belum ada sumber yang ditambahkan."})]})]})})]});if(a==="detail"&&c){const O=kt();return u.jsx("article",{className:"min-h-screen bg-white animate-fade-in pb-20",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-12",children:[u.jsxs("button",{onClick:()=>n("/blog"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:u.jsx(ci,{className:"w-4 h-4"})}),"Kembali"]}),u.jsxs("header",{className:"mb-12",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-bold uppercase tracking-wider",children:c.category}),u.jsx("span",{className:"text-slate-400 text-sm font-medium",children:c.readTime})]}),u.jsx("h1",{className:"text-3xl md:text-5xl font-black text-slate-900 mb-6 leading-tight tracking-tight",children:c.title}),u.jsx("p",{className:"text-lg md:text-xl text-slate-500 leading-relaxed font-medium",children:c.subtitle}),u.jsxs("div",{className:"flex items-center gap-4 mt-8 pt-8 border-t border-slate-100",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-900 text-white flex items-center justify-center font-bold text-sm",children:c.author.charAt(0)}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-bold text-slate-900",children:c.author}),u.jsx("p",{className:"text-xs text-slate-500",children:c.date})]})]})]}),u.jsx("figure",{className:"mb-12",children:u.jsx("img",{src:c.image,alt:c.title,className:"w-full aspect-video object-cover rounded-2xl shadow-lg border border-slate-100"})}),u.jsx("div",{className:"prose prose-lg prose-slate max-w-none mb-16 font-serif",children:Ne(c.content)}),c.sources&&c.sources.length>0&&u.jsxs("div",{className:"border-t border-slate-100 pt-10 mb-16",children:[u.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[u.jsx(pc,{className:"w-4 h-4"}),"Sumber Referensi"]}),u.jsx("ul",{className:"space-y-3",children:c.sources.map((G,pe)=>u.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[u.jsxs("span",{className:"text-slate-300 font-bold select-none",children:[pe+1,"."]}),u.jsx("a",{href:G.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline font-medium break-all",children:G.label})]},pe))})]}),O.length>0&&u.jsxs("div",{className:"border-t-2 border-slate-100 pt-12",children:[u.jsxs("h3",{className:"text-xl font-black text-slate-900 mb-6 flex items-center gap-3",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1170/1170221.png",alt:"Read Also",className:"w-6 h-6 object-contain opacity-60"}),"Baca Juga"]}),u.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:O.map(G=>u.jsxs("div",{onClick:()=>ie(G),className:"group cursor-pointer bg-slate-50 rounded-2xl p-4 border border-slate-100 hover:border-slate-300 hover:bg-white hover:shadow-lg transition-all",children:[u.jsx("div",{className:"aspect-video rounded-xl overflow-hidden mb-4 bg-slate-200",children:u.jsx("img",{src:G.image,alt:G.title,className:"w-full h-full object-cover opacity-90 group-hover:scale-105 transition-transform duration-500"})}),u.jsx("h4",{className:"font-bold text-slate-900 leading-tight mb-2 group-hover:text-blue-600 line-clamp-2",children:G.title}),u.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:G.subtitle})]},G.id))})]})]})})}return u.jsxs("div",{id:"blog-top",className:"max-w-7xl mx-auto px-6 py-12 animate-fade-in relative pb-24",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-16 gap-6",children:[u.jsxs("div",{className:"max-w-2xl",children:[u.jsx(lt,{id:"blog_header_title",defaultText:"Insights & Stories",isAdmin:t,tag:"h1",className:"text-4xl md:text-6xl font-black text-slate-900 mb-6 tracking-tight"}),u.jsx(lt,{id:"blog_header_desc",defaultText:"Kumpulan pemikiran mendalam, fakta sains, dan eksplorasi ide yang mungkin bikin lo begadang mikirin alam semesta.",isAdmin:t,tag:"p",multiline:!0,className:"text-lg text-slate-500 leading-relaxed"})]}),t&&u.jsxs("button",{onClick:ht,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 whitespace-nowrap",children:[u.jsx(cy,{className:"w-5 h-5"}),"Write Story"]})]}),u.jsx(Nl,{isOpen:!!I,title:"Hapus Artikel?",description:"Artikel ini akan dihapus permanen. Tindakan ini tidak bisa dibatalkan.",confirmText:"Ya, Hapus",onConfirm:se,onCancel:()=>H(null)}),i&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),u.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Artikel..."})]}),!i&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[Pe.map(O=>u.jsxs("div",{onClick:()=>ie(O),className:"group cursor-pointer flex flex-col h-full relative",children:[u.jsxs("div",{className:"relative aspect-[4/3] bg-slate-100 rounded-[2rem] overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500 border border-slate-200",children:[u.jsx("img",{src:O.image,alt:O.title,loading:"lazy",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"}),t&&u.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2",children:[u.jsx("button",{onClick:G=>Me(G,O),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-blue-600 hover:bg-white transition-colors",children:u.jsx(Af,{className:"w-4 h-4"})}),u.jsx("button",{onClick:G=>C(G,O.id),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-red-500 hover:bg-white transition-colors",children:fe===O.id?u.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):u.jsx(br,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute top-6 left-6",children:u.jsx("span",{className:"bg-white/90 backdrop-blur text-slate-900 text-[10px] font-bold px-3 py-1.5 rounded-full uppercase tracking-wider shadow-sm",children:O.category})})]}),u.jsxs("div",{className:"flex-1 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium text-slate-400 mb-3",children:[u.jsx("span",{children:O.date}),u.jsx("span",{children:""}),u.jsx("span",{children:O.readTime})]}),u.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3 leading-tight group-hover:text-blue-600 transition-colors",children:O.title}),u.jsx("p",{className:"text-slate-500 line-clamp-3 leading-relaxed mb-6",children:O.subtitle}),u.jsxs("div",{className:"mt-auto flex items-center text-sm font-bold text-slate-900 group-hover:translate-x-2 transition-transform duration-300",children:["Baca Selengkapnya ",u.jsx(yo,{className:"w-4 h-4 ml-2"})]})]})]},O.id)),r.length<=m&&u.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-[2rem] flex flex-col items-center justify-center p-8 text-center min-h-[400px]",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4 text-slate-300",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3018/3018445.png",alt:"Coming Soon",className:"w-8 h-8 object-contain opacity-50"})}),u.jsx(lt,{id:"blog_placeholder_title",defaultText:"Tulisan Mendatang",isAdmin:t,tag:"h3",className:"font-bold text-slate-400 mb-2"}),u.jsx(lt,{id:"blog_placeholder_desc",defaultText:"Artikel tentang AI Consciousness, Sejarah Internet, dan Psikologi Warna sedang ditulis...",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-slate-400 max-w-xs mx-auto"})]})]}),u.jsxs("div",{className:"flex flex-col items-center gap-3 mt-16 mb-8",children:[mt&&u.jsxs("button",{onClick:Be,className:"px-6 py-3 rounded-full bg-white border border-slate-200 text-slate-700 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Artikel Lainnya",u.jsx(_r,{className:"w-4 h-4"})]}),Zt&&u.jsxs("button",{onClick:ze,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Tutup / Sembunyikan",u.jsx(_r,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]})},iD=({isAdmin:t})=>{const[e,n]=F.useState([]),[r,s]=F.useState(!0),[i,o]=F.useState("All"),[a,l]=F.useState(null),c=9,[d,m]=F.useState(c),[g,y]=F.useState(!1),[w,x]=F.useState("add"),[_,v]=F.useState({}),[E,T]=F.useState(!1),[P,L]=F.useState(null),[B,k]=F.useState(null),A=async()=>{s(!0);try{const te=await JT();n(te)}catch(te){console.error("Failed to load photos",te)}finally{s(!1)}};F.useEffect(()=>{A()},[]),F.useEffect(()=>{m(c)},[i]);const N=["All",...Array.from(new Set(e.map(te=>te.year))).sort().reverse()],M=i==="All"?e:e.filter(te=>te.year===i),V=M.slice(0,d),R=d<M.length,D=d>c,I=V.reduce((te,Y)=>(te[Y.year]||(te[Y.year]=[]),te[Y.year].push(Y),te),{}),H=Object.keys(I).sort().reverse(),fe=()=>{m(te=>te+c)},re=()=>{m(c);const te=document.getElementById("gallery-top-anchor");te&&te.scrollIntoView({behavior:"smooth"})},Z=()=>{x("add"),v({src:"",caption:"",month:"Januari",year:new Date().getFullYear().toString(),timestamp:Date.now()}),y(!0)},X=(te,Y)=>{te.stopPropagation(),x("edit"),v({...Y}),y(!0)},oe=(te,Y)=>{te.stopPropagation(),Y&&k(Y)},W=async()=>{if(!B)return;const te=B;L(te),k(null);try{await RM(te),n(Y=>Y.filter(ge=>ge.id!==te)),Ye("Foto berhasil dihapus.")}catch(Y){console.error(Y),Ye("Gagal menghapus foto. Cek koneksi internet."),A()}finally{L(null)}},$=async()=>{if(!_.src||!_.year){Ye("Gambar dan Tahun wajib diisi.");return}T(!0);try{w==="add"?await AM(_):_.id&&await NM(_.id,_),y(!1),Ye(w==="add"?"Foto ditambahkan!":"Foto diperbarui!"),A()}catch(te){console.error(te),Ye("Gagal menyimpan data.")}finally{T(!1)}},de=te=>{var ge;const Y=(ge=te.target.files)==null?void 0:ge[0];if(Y){const Ce=new FileReader;Ce.onloadend=()=>{const Se=Ce.result;v(je=>({...je,src:Se}))},Ce.readAsDataURL(Y)}};return u.jsxs("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:[u.jsx(Nl,{isOpen:!!B,title:"Hapus Memori?",description:"Foto ini akan dihapus secara permanen dari galeri. Tindakan ini tidak dapat dibatalkan.",confirmText:"Ya, Hapus",onConfirm:W,onCancel:()=>k(null)}),u.jsxs("div",{id:"gallery-top-anchor",className:"max-w-7xl mx-auto px-6 pt-12 pb-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-slate-900 mb-4 tracking-tight",children:["Visual ",u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Diaries"})]}),u.jsx("p",{className:"text-lg text-slate-500 max-w-2xl leading-relaxed",children:"Koleksi momen acak, dikelompokkan berdasarkan waktu."})]}),t&&u.jsxs("button",{onClick:Z,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95",children:[u.jsx(Xa,{className:"w-5 h-5"}),"Add Memory"]})]}),u.jsx("div",{className:"flex flex-wrap gap-2 mt-8",children:N.map(te=>u.jsx("button",{onClick:()=>o(te),className:`px-5 py-2 rounded-full text-sm font-bold transition-all duration-300 ${i===te?"bg-slate-900 text-white shadow-lg shadow-slate-900/20":"bg-slate-50 text-slate-500 hover:bg-slate-100 hover:text-slate-900"}`,children:te},te))})]}),u.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),u.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Galeri..."})]}),!r&&M.length===0&&u.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[u.jsx(hm,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),u.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada foto di periode ini."})]}),!r&&V.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"space-y-16",children:H.map(te=>u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"flex items-center gap-6 mb-8 mt-4",children:[u.jsx("span",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tighter",children:te}),u.jsx("div",{className:"h-0.5 bg-slate-200 flex-1 rounded-full opacity-50"})]}),u.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-3 gap-6 space-y-6",children:I[te].map(Y=>u.jsxs("div",{className:"break-inside-avoid relative group cursor-pointer rounded-2xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-lg transition-all duration-300 transform translate-z-0",onClick:()=>l(Y),children:[u.jsx("img",{src:Y.src,alt:Y.caption,loading:"lazy",className:"w-full h-auto object-cover transform transition-transform duration-700 group-hover:scale-105"}),t&&u.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:ge=>X(ge,Y),className:"p-2.5 bg-white text-slate-700 rounded-full shadow-md hover:bg-blue-50 hover:text-blue-600 transition-colors border border-slate-100",title:"Edit",children:u.jsx(Af,{className:"w-4 h-4"})}),u.jsx("button",{onClick:ge=>oe(ge,Y.id),disabled:P===Y.id,className:`p-2.5 bg-white rounded-full shadow-md transition-colors border border-slate-100 ${P===Y.id?"text-slate-300 cursor-wait":"text-red-500 hover:bg-red-50"}`,title:"Hapus",children:P===Y.id?u.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):u.jsx(br,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),u.jsx("div",{className:"absolute bottom-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:u.jsx("span",{className:"bg-black/30 backdrop-blur-md text-white text-[10px] font-bold px-3 py-1.5 rounded-full border border-white/20 uppercase tracking-widest shadow-sm",children:Y.month})})]},Y.id||Y.src))})]},te))}),u.jsxs("div",{className:"flex flex-col items-center gap-3 mt-20 mb-8",children:[R&&u.jsxs("button",{onClick:fe,className:"px-6 py-3 rounded-full bg-white border border-slate-200 text-slate-700 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Momen Terdahulu",u.jsx(_r,{className:"w-4 h-4"})]}),D&&u.jsxs("button",{onClick:re,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Tutup / Sembunyikan",u.jsx(_r,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]}),a&&u.jsxs("div",{className:"fixed inset-0 z-[100] bg-white/95 backdrop-blur-xl flex items-center justify-center p-4 animate-fade-in",onClick:()=>l(null),children:[u.jsx("button",{onClick:()=>l(null),className:"absolute top-6 left-6 z-10 p-3 bg-slate-100 hover:bg-slate-200 text-slate-800 rounded-full transition-all group shadow-sm border border-slate-200",children:u.jsx(ci,{className:"w-6 h-6 group-hover:-translate-x-1 transition-transform"})}),u.jsxs("div",{className:"relative max-w-5xl w-full flex flex-col items-center gap-8",onClick:te=>te.stopPropagation(),children:[u.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-2xl max-h-[75vh] bg-slate-50",children:u.jsx("img",{src:a.src,alt:"Gallery View",className:"max-w-full max-h-[75vh] object-contain"})}),u.jsxs("div",{className:"text-center max-w-2xl px-4 animate-fade-in-up",children:[u.jsxs("p",{className:"text-lg md:text-xl text-slate-900 font-medium leading-relaxed",children:['"',a.caption,'"']}),u.jsx("div",{className:"mt-4 flex items-center justify-center gap-3",children:u.jsxs("div",{className:"inline-block px-3 py-1 bg-slate-100 rounded-full text-slate-600 text-xs font-bold uppercase tracking-widest border border-slate-200",children:[a.month," ",a.year]})})]})]})]}),g&&u.jsx("div",{className:"fixed inset-0 z-[120] bg-slate-900/40 backdrop-blur-md flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl p-8 shadow-2xl animate-fade-in-up border border-slate-100 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:w==="add"?"Tambah Memori":"Edit Memori"}),u.jsx("button",{onClick:()=>y(!1),className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-900 transition-colors",children:""})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Gambar"}),u.jsx("div",{className:"flex gap-3 mb-3",children:u.jsx("input",{type:"file",accept:"image/*",onChange:de,className:"text-xs w-full file:mr-4 file:py-2.5 file:px-5 file:rounded-full file:border-0 file:text-xs file:font-bold file:bg-blue-50 file:text-blue-600 hover:file:bg-blue-100 transition-colors cursor-pointer bg-slate-50 rounded-xl p-1"})}),u.jsx("input",{type:"text",placeholder:"Atau tempel URL gambar...",value:_.src||"",onChange:te=>v(Y=>({...Y,src:te.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none placeholder:text-slate-400"}),_.src&&u.jsxs("div",{className:"mt-4 h-32 w-full rounded-xl overflow-hidden border border-slate-200 bg-slate-50 relative group",children:[u.jsx("img",{src:_.src,alt:"Preview",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsx("span",{className:"text-white text-xs font-bold bg-black/50 px-3 py-1 rounded-full backdrop-blur-sm",children:"Preview"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Caption"}),u.jsx("textarea",{value:_.caption||"",onChange:te=>v(Y=>({...Y,caption:te.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none resize-none h-32 leading-relaxed placeholder:text-slate-400",placeholder:"Ceritakan momen ini..."})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Bulan"}),u.jsxs("div",{className:"relative",children:[u.jsx("select",{value:_.month||"Januari",onChange:te=>v(Y=>({...Y,month:te.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none appearance-none font-medium",children:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"].map(te=>u.jsx("option",{value:te,children:te},te))}),u.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:u.jsx(_r,{className:"w-4 h-4"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Tahun"}),u.jsx("input",{type:"number",value:_.year||"",onChange:te=>v(Y=>({...Y,year:te.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none font-medium"})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-10 pt-6 border-t border-slate-100",children:[u.jsx("button",{onClick:()=>y(!1),className:"px-6 py-3 text-slate-500 hover:text-slate-800 hover:bg-slate-50 rounded-xl text-sm font-bold transition-all",children:"Batal"}),u.jsxs("button",{onClick:$,disabled:E,className:"px-8 py-3 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800 disabled:opacity-50 transition-all shadow-lg shadow-slate-900/20 active:scale-95 flex items-center gap-2",children:[E&&u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),E?"Menyimpan...":"Simpan Memori"]})]})]})})]})},oD=({isAdmin:t})=>{const[e,n]=F.useState([]),[r,s]=F.useState(null),[i,o]=F.useState(!1),[a,l]=F.useState(!0),[c,d]=F.useState(!1),[m,g]=F.useState(""),[y,w]=F.useState(""),[x,_]=F.useState(""),[v,E]=F.useState(!1),[T,P]=F.useState(!1),[L,B]=F.useState(null),k=F.useRef(null),A=async()=>{l(!0);try{const I=await VM();n(I),I.length>0&&(s(I[0]),o(!1))}catch(I){console.error(I)}finally{l(!1)}};F.useEffect(()=>{A()},[]),F.useEffect(()=>{let I;return!a&&e.length>0&&(I=setTimeout(()=>{o(!0)},5e3)),()=>{I&&clearTimeout(I)}},[a,e.length]);const N=I=>{try{if(I.includes("/track/")){const H=I.split("/track/");if(H.length>1)return H[1].split("?")[0]}if(I.includes("spotify:track:")){const H=I.split(":");if(H.length>2)return H[2]}if(I.length>15&&!I.includes("/"))return I}catch{return null}return null},M=async()=>{if(!m||!y||!x){Ye("Harap isi semua kolom.");return}const I=N(m);if(!I){Ye("Link Spotify tidak valid.");return}E(!0);try{await UM({spotifyId:I,title:y,artist:x,addedAt:Date.now()}),await A(),d(!1),g(""),w(""),_(""),Ye("Lagu berhasil ditambahkan!")}catch{Ye("Gagal menambahkan lagu.")}finally{E(!1)}},V=(I,H)=>{H.stopPropagation(),B(I),P(!0)},R=async()=>{if(L)try{if(await OM(L),n(I=>I.filter(H=>H.id!==L)),(r==null?void 0:r.id)===L){const I=e.filter(H=>H.id!==L);I.length>0?(s(I[0]),o(!1)):(s(null),o(!1))}Ye("Lagu dihapus.")}catch{Ye("Gagal menghapus.")}finally{P(!1),B(null)}},D=I=>{(r==null?void 0:r.id)===I.id?o(!i):(s(I),o(!0))};return u.jsxs("div",{className:"min-h-screen bg-white relative overflow-hidden flex flex-col h-full",children:[u.jsx("style",{children:`
                    .no-scrollbar::-webkit-scrollbar {
                        display: none;
                    }
                    .no-scrollbar {
                        -ms-overflow-style: none;
                        scrollbar-width: none;
                    }
                `}),u.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-blue-50/50 rounded-full blur-3xl opacity-60 pointer-events-none translate-x-1/3 -translate-y-1/3"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-purple-50/50 rounded-full blur-3xl opacity-60 pointer-events-none -translate-x-1/3 translate-y-1/3"}),u.jsx(Nl,{isOpen:T,title:"Hapus Lagu?",description:"Lagu ini akan dihapus dari playlist publik. Yakin?",confirmText:"Ya, Hapus",onConfirm:R,onCancel:()=>P(!1)}),u.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar relative z-10 pb-24",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8 md:py-12",children:[u.jsxs("div",{className:"text-center mb-8 md:mb-10",children:[u.jsx(lt,{id:"music_title",defaultText:"Soundtrack of Life",isAdmin:t,tag:"h1",className:"text-3xl md:text-5xl font-black text-slate-900 tracking-tighter mb-2 md:mb-4"}),u.jsx(lt,{id:"music_desc",defaultText:"Kumpulan frekuensi pengiring coding & kontemplasi malam.",isAdmin:t,tag:"p",className:"text-sm md:text-base text-slate-500 font-medium"})]}),r&&u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl border border-slate-100 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 shadow-2xl shadow-slate-200/50 mb-10 md:mb-12 relative overflow-hidden transition-all hover:shadow-slate-300/50",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-20 blur-3xl scale-125 pointer-events-none transition-colors duration-1000",children:u.jsx("div",{className:`w-full h-full bg-gradient-to-tr ${i?"from-blue-300 to-purple-300":"from-slate-200 to-gray-200"}`})}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[u.jsxs("div",{className:"relative mb-6 mt-2 md:mb-8 md:mt-4 group cursor-pointer",onClick:()=>o(!i),children:[u.jsxs("div",{className:`w-48 h-48 md:w-64 md:h-64 rounded-full bg-slate-900 shadow-2xl flex items-center justify-center relative overflow-hidden border-4 border-slate-800 ${i?"animate-[spin_4s_linear_infinite]":"transition-transform duration-700 ease-out"}`,children:[u.jsx("div",{className:"absolute inset-2 rounded-full border border-slate-800/50"}),u.jsx("div",{className:"absolute inset-4 rounded-full border border-slate-800/50"}),u.jsx("div",{className:"absolute inset-8 rounded-full border border-slate-800/50"}),u.jsx("div",{className:"absolute inset-12 rounded-full border border-slate-800/50"}),u.jsxs("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-tr from-blue-500 to-purple-600 rounded-full flex items-center justify-center relative shadow-inner",children:[u.jsx("div",{className:"w-2 h-2 md:w-2.5 md:h-2.5 bg-white rounded-full shadow-sm"}),u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-30"})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-full"})]}),u.jsx("div",{className:`absolute -top-8 -right-6 md:-top-12 md:-right-8 w-24 h-32 md:w-28 md:h-40 pointer-events-none transition-transform duration-1000 ease-in-out origin-[70%_15%] drop-shadow-xl z-20 ${i?"rotate-[0deg]":"-rotate-[40deg]"}`,children:u.jsxs("svg",{viewBox:"0 0 100 150",className:"w-full h-full",children:[u.jsx("circle",{cx:"70",cy:"20",r:"8",fill:"#94a3b8",stroke:"#64748b",strokeWidth:"2"}),u.jsx("path",{d:"M70 20 L60 90 L45 100",fill:"none",stroke:"#64748b",strokeWidth:"5",strokeLinecap:"round"}),u.jsx("rect",{x:"38",y:"95",width:"16",height:"20",fill:"#334155",rx:"2",transform:"rotate(20 46 105)"})]})}),!i&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-full p-3 md:p-4",children:u.jsx(Y2,{className:"w-6 h-6 md:w-8 md:h-8 text-white ml-1"})})})]}),u.jsxs("div",{className:"w-full text-center",children:[u.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-900 mb-1 leading-tight line-clamp-1",children:r.title}),u.jsx("p",{className:"text-xs md:text-sm text-slate-500 font-bold uppercase tracking-widest mb-4 md:mb-6 line-clamp-1",children:r.artist}),u.jsx("div",{className:"w-full rounded-2xl overflow-hidden shadow-sm border border-slate-100 bg-slate-50 relative z-20",children:u.jsx("iframe",{ref:k,src:`https://open.spotify.com/embed/track/${r.spotifyId}?utm_source=generator&theme=0&autoplay=1`,width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Player",className:"border-0 block",style:{overflow:"hidden"}})}),u.jsx("button",{onClick:()=>o(!i),className:"mt-4 text-[10px] font-bold text-slate-400 bg-slate-50 px-3 py-1.5 rounded-full hover:bg-slate-100 transition-colors",children:i?"Matikan Animasi Manual":"Nyalakan Animasi Manual"})]})]})]}),u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[u.jsxs("h3",{className:"text-base md:text-lg font-bold text-slate-900 flex items-center gap-2",children:[u.jsx(Q2,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-400"}),"Daftar Putar"]}),t&&u.jsx("button",{onClick:()=>d(!c),className:"text-[10px] md:text-xs font-bold bg-slate-900 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-slate-800 transition-all shadow-md active:scale-95",children:c?"Tutup":"+ Add Song"})]}),c&&u.jsxs("div",{className:"bg-slate-50 p-4 md:p-6 rounded-2xl border border-slate-200 mb-6 md:mb-8 animate-fade-in-up",children:[u.jsx("h4",{className:"text-sm font-bold text-slate-800 mb-4",children:"Tambah Lagu Baru"}),u.jsxs("div",{className:"grid gap-3 md:gap-4",children:[u.jsx("input",{type:"text",placeholder:"Link Spotify...",value:m,onChange:I=>g(I.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[u.jsx("input",{type:"text",placeholder:"Judul Lagu",value:y,onChange:I=>w(I.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"}),u.jsx("input",{type:"text",placeholder:"Nama Artis",value:x,onChange:I=>_(I.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"})]}),u.jsx("button",{onClick:M,disabled:v,className:"w-full bg-blue-600 text-white font-bold py-2.5 md:py-3 rounded-xl hover:bg-blue-700 transition-all disabled:opacity-50 text-sm",children:v?"Menyimpan...":"Simpan ke Playlist"})]})]}),u.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.map((I,H)=>u.jsxs("div",{onClick:()=>D(I),className:`group flex items-center gap-3 md:gap-4 p-3 pr-4 rounded-xl cursor-pointer border transition-all duration-300 ${(r==null?void 0:r.id)===I.id?"bg-slate-900 border-slate-900 shadow-lg scale-[1.01] md:scale-[1.02]":"bg-white border-slate-100 hover:border-slate-300 hover:shadow-md"}`,children:[u.jsx("div",{className:`w-8 h-8 flex items-center justify-center text-xs md:text-sm font-bold rounded-lg shrink-0 ${(r==null?void 0:r.id)===I.id?"text-white":"text-slate-400 bg-slate-50 group-hover:bg-slate-100 group-hover:text-slate-600"}`,children:(r==null?void 0:r.id)===I.id&&i?u.jsxs("div",{className:"flex gap-0.5 items-end h-3",children:[u.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1s_infinite] h-2"}),u.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1.2s_infinite] h-3"}),u.jsx("div",{className:"w-0.5 bg-white animate-[bounce_0.8s_infinite] h-1.5"})]}):H+1}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:`font-bold text-xs md:text-sm truncate ${(r==null?void 0:r.id)===I.id?"text-white":"text-slate-800"}`,children:I.title}),u.jsx("p",{className:`text-[10px] md:text-xs truncate ${(r==null?void 0:r.id)===I.id?"text-slate-400":"text-slate-500"}`,children:I.artist})]}),u.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[u.jsx("div",{className:`p-1.5 md:p-2 rounded-full transition-colors ${(r==null?void 0:r.id)===I.id?"bg-white/10 text-white":"bg-slate-100 text-slate-400 group-hover:text-green-600 group-hover:bg-green-50"}`,children:u.jsx(Lb,{className:"w-4 h-4"})}),t&&u.jsx("button",{onClick:fe=>V(I.id,fe),className:"p-1.5 md:p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-full transition-all",title:"Hapus",children:u.jsx(br,{className:"w-4 h-4"})})]})]},I.id||H)),e.length===0&&!a&&u.jsx("div",{className:"text-center py-12 text-slate-400 text-sm",children:"Playlist kosong. Tambahkan lagu baru."})]})]})]})})]})},aD=({isAdmin:t})=>{const[e,n]=F.useState([]),[r,s]=F.useState(!0),i=6,[o,a]=F.useState(i),[l,c]=F.useState(""),[d,m]=F.useState(!1),[g,y]=F.useState(!1),[w,x]=F.useState(!1),[_,v]=F.useState(null),[E,T]=F.useState(null),P=280,L=async()=>{s(!0);try{const H=await GM();n(H)}catch(H){console.error(H)}finally{s(!1)}};F.useEffect(()=>{L()},[]);const B=async()=>{if(l.trim()){y(!0);try{await BM({content:l.trim(),type:d?"private":"public",sender:"Anonim"}),x(!0),c(""),d||(L(),a(i)),setTimeout(()=>x(!1),3e3)}catch{Ye("Gagal mengirim pesan.")}finally{y(!1)}}},k=(H,fe)=>{fe.stopPropagation(),H&&T(H)},A=async()=>{if(!E)return;const H=E;v(H),T(null);try{await zM(H),n(fe=>fe.filter(re=>re.id!==H)),Ye("Pesan dihapus.")}catch(fe){Ye("Gagal menghapus pesan."),console.error(fe)}finally{v(null)}},N=()=>{a(H=>H+i)},M=()=>{a(i);const H=document.getElementById("message-feed-top");H&&H.scrollIntoView({behavior:"smooth"})},V=H=>new Date(H).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),R=e.slice(0,o),D=o<e.length,I=o>i;return u.jsxs("div",{className:"min-h-screen bg-slate-50 relative pb-20",children:[u.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-40",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),u.jsx(Nl,{isOpen:!!E,title:"Hapus Pesan?",description:"Pesan ini akan dihapus secara permanen dari Public Wall. Tindakan ini tidak dapat dibatalkan.",confirmText:"Ya, Hapus",onConfirm:A,onCancel:()=>T(null)}),u.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12 relative z-10",children:[u.jsxs("div",{className:"mb-16 text-center space-y-8",children:[u.jsxs("div",{children:[u.jsx(lt,{id:"msg_feed_title",defaultText:"Public Wall",isAdmin:t,tag:"h1",className:"text-4xl font-black text-slate-900 tracking-tight mb-2"}),u.jsx(lt,{id:"msg_feed_desc",defaultText:"Tulis sesuatu. Rahasia, harapan, atau sekadar 'Halo'.",isAdmin:t,tag:"p",className:"text-slate-500 font-medium"})]}),u.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-xl shadow-slate-200/60 border border-slate-100 max-w-2xl mx-auto transition-all focus-within:ring-2 focus-within:ring-slate-900/5 relative",children:[u.jsx("textarea",{value:l,onChange:H=>c(H.target.value),maxLength:P,className:"w-full h-32 bg-transparent text-lg font-medium text-slate-800 placeholder:text-slate-300 resize-none outline-none leading-relaxed",placeholder:"Apa yang sedang kamu pikirkan?"}),u.jsxs("div",{className:`absolute bottom-20 right-6 text-[10px] font-bold transition-colors ${l.length>=P?"text-red-500":"text-slate-300"}`,children:[l.length,"/",P]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-50 flex items-center justify-between",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none px-2 py-1 rounded-lg hover:bg-slate-50 transition-colors",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:d,onChange:H=>m(H.target.checked)}),u.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-slate-900 transition-colors"})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[d?u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/4436/4436450.png",alt:"Private",className:"w-4 h-4 object-contain"}):u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/417/417720.png",alt:"Public",className:"w-4 h-4 object-contain"}),u.jsx("span",{className:`text-xs font-bold transition-colors ${d?"text-slate-900":"text-slate-400"}`,children:d?"Privat":"Publik"})]})]}),u.jsx("button",{onClick:B,disabled:!l.trim()||g,className:`
                                    flex items-center gap-2 px-6 py-2.5 rounded-xl font-bold text-sm transition-all shadow-lg active:scale-95
                                    ${w?"bg-green-500 text-white shadow-green-500/20":"bg-slate-900 text-white hover:bg-slate-800 shadow-slate-900/20 disabled:bg-slate-200 disabled:text-slate-400 disabled:shadow-none disabled:cursor-not-allowed"}
                                `,children:g?u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):w?u.jsxs(u.Fragment,{children:["Terkirim ",u.jsx(Gr,{className:"w-4 h-4"})]}):u.jsxs(u.Fragment,{children:["Kirim ",u.jsx(Db,{className:"w-4 h-4"})]})})]})]})]}),u.jsxs("div",{id:"message-feed-top",className:"flex items-center justify-between mb-6 px-2",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/417/417720.png",alt:"Feed",className:"w-4 h-4 object-contain opacity-60"})," Pesan Terbaru"]}),u.jsx("button",{onClick:L,className:"p-2 text-slate-400 hover:text-slate-900 hover:bg-white rounded-full transition-all",title:"Refresh",children:u.jsx(ed,{className:"w-4 h-4"})})]}),r?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(H=>u.jsx("div",{className:"h-32 bg-slate-200/50 rounded-2xl animate-pulse"},H))}):e.length===0?u.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[u.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada pesan publik."}),u.jsx("p",{className:"text-slate-300 text-sm",children:"Jadilah yang pertama menulis!"})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"columns-1 md:columns-2 gap-6 space-y-6",children:R.map((H,fe)=>u.jsxs("div",{className:"break-inside-avoid bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md hover:border-slate-200 hover:-translate-y-1 transition-all duration-300 group relative overflow-hidden",children:[u.jsxs("p",{className:"text-slate-800 text-[15px] font-medium leading-relaxed whitespace-pre-wrap break-words relative z-10",children:['"',H.content,'"']}),u.jsx("div",{className:"mt-4 flex justify-end",children:u.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-widest bg-slate-50 px-2 py-1 rounded",children:V(H.timestamp)})}),t&&u.jsx("button",{onClick:re=>k(H.id,re),disabled:_===H.id,className:"absolute top-2 right-2 p-2 bg-white/80 backdrop-blur-sm rounded-full text-slate-400 hover:text-red-500 hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100 border border-transparent hover:border-red-100 shadow-sm z-20",title:"Hapus Pesan",children:_===H.id?u.jsx("div",{className:"w-3.5 h-3.5 border-2 border-red-200 border-t-red-500 rounded-full animate-spin"}):u.jsx(br,{className:"w-3.5 h-3.5"})})]},H.id||fe))}),u.jsxs("div",{className:"flex flex-col items-center gap-3 mt-12",children:[D&&u.jsxs("button",{onClick:N,className:"px-6 py-2.5 rounded-full bg-white border border-slate-200 text-slate-600 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Pesan Lainnya",u.jsx(_r,{className:"w-4 h-4"})]}),I&&u.jsxs("button",{onClick:M,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Sembunyikan (Tutup)",u.jsx(_r,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]})]})};function lD(){return null}function uD(){return null}var yn=(t=>(t.BACKGROUND_REMOVER="bg_remove",t.HD_UPSCALE="hd_upscale",t.CREATIVE_REMIX="creative_remix",t.COLORIZE="colorize",t.SKETCH_TO_REAL="sketch_real",t))(yn||{});const jo={id:{welcome:"Halo, Siapa Disana?",welcomeSubtitle:"Biar kita makin akrab, kenalan dulu yuk! Isi nama dan sekolahmu ya, biar enak ngobrolnya.",enterName:"Aku biasa dipanggil...",enterSchool:"Aku sekolah / kuliah di...",namePlaceholder:"Contoh: Rara",schoolPlaceholder:"Contoh: SMA 1 Jakarta / UI",accessButton:"Oke, Salam Kenal!",verifying:"Lagi mencatat...",deviceIdNote:"Santai aja, ini cuma biar aku inget temen baru.",credits:"Limit",adminMode:"Mode Admin",unlimited:"Tanpa Batas",logOut:"Ganti Akun",heroTitle:"Hai,",heroSubtitle:"Sudah siap bikin karya keren hari ini?",toolBgRemove:"Hapus Background",toolBgRemoveDesc:"Hapus latar belakang secara instan dan rapi.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Pertajam detail & resolusi tinggi agar tidak pecah.",toolRemix:"Creative Remix",toolRemixDesc:"Ubah gaya gambar dengan bantuan AI.",toolColorize:"Warnai Foto",toolColorizeDesc:"Ubah foto hitam putih jadi berwarna.",toolSketch:"Sketsa ke Nyata",toolSketchDesc:"Ubah coretan tangan jadi gambar realistis.",moreTools:"Lihat Lainnya",lessTools:"Sembunyikan",back:"Kembali",preview:"Pratinjau",changePhoto:"Ganti Foto",aiPrompt:"Instruksi AI",aiPromptPlaceholder:"Jelaskan bagaimana Anda ingin mengubah gambar ini...",generate:"Mulai Proses",generateMagic:"Buat Keajaiban",processing:"Memproses",processingStandard:"Sedang meracik gambar...",processingCloud:"Mengirim ke awan...",processingAI:"AI sedang bekerja...",refining:"Sedikit polesan lagi...",optimizingLocal:"Memproses di perangkatmu (Mode Hemat)...",initializing:"Siap-siap...",resultComparison:"Hasil Karya Kamu",download:"Simpan Gambar",reset:"Ulangi",original:"ASLI",result:"HASIL",bgColor:"Ganti Warna Belakang",uploadPrompt:"Pilih foto terbaikmu untuk diedit",settingsTitle:"Pengaturan Sistem",systemPref:"Preferensi AI",knowledgeMode:"Mode Pengetahuan (Database)",knowledgeModeDesc:"Hemat Kuota. AI hanya menjawab dari database lokal tanpa Gemini API.",totalKnowledge:"Total Memori Tersimpan",wikiMode:"Izinkan Wikipedia",wikiModeDesc:"Jika info tidak ada di database, cari di Wikipedia (Tetap hemat kuota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Kelola API Key untuk fitur chat cerdas dan edit gambar.",selectKeyBtn:"Ambil Key via AI Studio",orManually:"Kelola Key Manual",customKeyActive:"Key Pribadi Aktif",defaultKeyActive:"Key Sistem (Terbatas)",removeBgTitle:"Remove.bg API",removeBgDesc:"Engine khusus hapus background presisi tinggi.",supabaseTitle:"Supabase Engine",supabaseDesc:"Engine cadangan untuk pemrosesan gambar.",googleSearchTitle:"Google Search API",googleSearchDesc:"Opsi pencarian terakhir (Fallback) jika DB & Wiki gagal.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Tutup",save:"Simpan",active:"Aktif",inactive:"Nonaktif",addKeyPlaceholder:"Tempel API Key Gemini disini...",addKeyBtn:"Tambah Key",keyDisclaimerTitle:" Peringatan Penting",keyDisclaimerText:"Dengan menambahkan API Key pribadi, saya sadar bahwa segala bentuk penggunaan, kuota, dan keamanan key tersebut adalah tanggung jawab saya sepenuhnya. Fanra AI Studio tidak bertanggung jawab atas penyalahgunaan atau tagihan yang muncul akibat kelalaian pengguna.",consentCheckbox:"Saya mengerti dan setuju untuk melanjutkan.",keysStored:"Daftar Key",noKeysYet:"Belum ada key tersimpan. Masih pakai limit bawaan.",newChat:"Percakapan Baru",historyHeader:"Riwayat",loginToSave:"Login untuk simpan progres",loginBtn:"Masuk Akun",historyItem1:"editing foto sekolah...",historyItem2:"hapus background merah...",chatPlaceholder:"ketik pesan atau tanya Fanra...",chatDisclaimer:"Fanra bisa salah. cek lagi info penting.",chatFallbackError:"duh, koneksi gue lagi putus dan gue belum pernah dapet pertanyaan ini sebelumnya. cek internet lo atau API key nya deh.",chatOfflineMode:"(Mode Database) Info tidak ditemukan di database.",chatImageResponse:"wih, kirim gambar ya? sori nih gue baru bisa edit gambar kalo lo pake menu di atas itu. coba klik ikon-ikon di atas deh.",errorTitle:"Ups, Ada Masalah",insufficientCredits:"Yah, limit habis! Masukkan API Key di pengaturan agar Unlimited.",limitReachedHQ:"Kuota High Quality harian sudah penuh.",serviceBusy:"Server lagi ramai nih. Coba lagi sebentar ya.",networkError:"Koneksi internetmu sepertinya putus nyambung.",memoryError:"HP keberatan proses gambar ini. Coba gambar lain ya.",confirmTitle:"Yakin mau ganti?",confirmDesc:"Proses yang ini belum disimpan lho. Mau ganti aktivitas?",yesChange:"Ya, Ganti Aja",uploadTitle:"Unggah Foto",uploadDesc:"Klik atau tarik fotomu ke sini",dropHere:"Lepaskan fotonya!",invalidImage:"Format file ini tidak didukung. Pakai JPG/PNG ya."},en:{welcome:"Hello, Who's There?",welcomeSubtitle:"Let's be friends! Tell me your name and school so we can chat comfortably.",enterName:"You can call me...",enterSchool:"I study at...",namePlaceholder:"Ex: Sarah",schoolPlaceholder:"Ex: High School NY / MIT",accessButton:"Okay, Nice to Meet You!",verifying:"Writing that down...",deviceIdNote:"Relax, just remembering a new friend.",credits:"Credits",adminMode:"Admin Mode",unlimited:"Unlimited",logOut:"Switch Account",heroTitle:"Hi,",heroSubtitle:"Ready to make something cool today?",toolBgRemove:"Remove Background",toolBgRemoveDesc:"Instantly remove backgrounds cleanly.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Sharpen details to 4K resolution.",toolRemix:"Creative Remix",toolRemixDesc:"Reimagine image with AI assistance.",toolColorize:"Colorize Photo",toolColorizeDesc:"Turn black & white photos into color.",toolSketch:"Sketch to Real",toolSketchDesc:"Turn hand drawings into realistic images.",moreTools:"See More",lessTools:"Show Less",back:"Back",preview:"Preview",changePhoto:"Change Photo",aiPrompt:"AI Prompt",aiPromptPlaceholder:"Describe how you want to remix this image...",generate:"Generate",generateMagic:"Generate Magic",processing:"Processing",processingStandard:"Working magic...",processingCloud:"Sending to cloud...",processingAI:"AI is thinking...",refining:"Polishing details...",optimizingLocal:"Processing on device (Offline Mode)...",initializing:"Warming up...",resultComparison:"Your Masterpiece",download:"Save Image",reset:"Reset",original:"ORIGINAL",result:"RESULT",bgColor:"Background Color",uploadPrompt:"Upload an image to start editing",settingsTitle:"System Settings",systemPref:"AI Preferences",knowledgeMode:"Knowledge Mode (Database)",knowledgeModeDesc:"Save Quota. AI only answers from local database without Gemini API.",totalKnowledge:"Total Stored Memory",wikiMode:"Enable Wikipedia",wikiModeDesc:"If info not in DB, search Wikipedia (Still saves API quota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Manage keys for smart chat and image editing.",selectKeyBtn:"Get Key via AI Studio",orManually:"Manage Keys Manually",customKeyActive:"Custom Key Active",defaultKeyActive:"System Key (Limited)",removeBgTitle:"Remove.bg API",removeBgDesc:"Precision background removal engine.",supabaseTitle:"Supabase Engine",supabaseDesc:"Backup engine for image processing.",googleSearchTitle:"Google Search API",googleSearchDesc:"Fallback search option if DB & Wiki fail.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Close",save:"Save",active:"Active",inactive:"Inactive",addKeyPlaceholder:"Paste Gemini API Key here...",addKeyBtn:"Add Key",keyDisclaimerTitle:" Important Warning",keyDisclaimerText:"By adding personal API Keys, I acknowledge that all usage, quotas, and security of said keys are my sole responsibility. Fanra AI Studio is not liable for misuse or charges incurred due to user negligence.",consentCheckbox:"I understand and agree to proceed.",keysStored:"Key List",noKeysYet:"No keys saved yet. Using default limits.",newChat:"New Conversation",historyHeader:"History",loginToSave:"Login to save progress",loginBtn:"Login",historyItem1:"editing school photo...",historyItem2:"removing red background...",chatPlaceholder:"type a message or ask Fanra...",chatDisclaimer:"Fanra can make mistakes. Check important info.",chatFallbackError:"ugh, my connection is down and I haven't heard this question before. Check your internet or API key.",chatOfflineMode:"(DB Mode) Info not found in database.",chatImageResponse:"woah, sending an image? sorry, I can only edit images if you use the menu above. try clicking those icons.",errorTitle:"Whoops",insufficientCredits:"Out of credits! Enter your own Google Gemini API Key in settings for unlimited access.",limitReachedHQ:"High Quality daily limit reached.",serviceBusy:"Service is busy. Please try again.",networkError:"Connection issue. Check your internet.",memoryError:"Device memory low. Try a smaller image.",confirmTitle:"Change Activity?",confirmDesc:"Current progress will be lost. Are you sure?",yesChange:"Yes, Change",uploadTitle:"Upload Image",uploadDesc:"Click to browse or drag & drop",dropHere:"Drop it here!",invalidImage:"Please upload a valid image file (JPG/PNG)."}};var cD={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dD,hD;function fD(){return{geminiUrl:dD,vertexUrl:hD}}function pD(t,e,n,r){var s,i;if(!(t!=null&&t.baseUrl)){const o=fD();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:n:(i=o.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zr{}function _e(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const i=e[s];return i!=null?String(i):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function p(t,e,n){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const d=l[c];p(d,e.slice(i+1),n[c])}else for(const c of l)p(c,e.slice(i+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];p(l[0],e.slice(i+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function h(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const i=s.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(a=>h(a,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function mD(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),i=r.split("."),o=new Set;let a=-1;for(let l=0;l<s.length;l++)if(s[l]==="*"){a=l;break}if(a!==-1&&i.length>a)for(let l=a;l<i.length;l++){const c=i[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}Xf(t,s,i,0,o)}}function Xf(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])Xf(l,e,n,r+1,s)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!s.has(c)),l={};for(const c of a)l[c]=o[c];for(const[c,d]of Object.entries(l)){const m=[];for(const g of n.slice(r))g==="*"?m.push(c):m.push(g);p(o,m,d)}for(const c of a)delete o[c]}}else{const o=t;i in o&&Xf(o[i],e,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ag(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gD(t){const e={},n=h(t,["operationName"]);n!=null&&p(e,["operationName"],n);const r=h(t,["resourceName"]);return r!=null&&p(e,["_url","resourceName"],r),e}function yD(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],xD(o)),e}function vD(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],wD(o)),e}function xD(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>_D(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function wD(t){const e={},n=h(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>bD(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function _D(t){const e={},n=h(t,["video"]);return n!=null&&p(e,["video"],kD(n)),e}function bD(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],AD(n)),e}function ED(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function TD(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function SD(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],ID(o)),e}function ID(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function t1(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],CD(o)),e}function CD(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function kD(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],ag(r));const s=h(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function AD(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],ag(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Sv;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Sv||(Sv={}));var Iv;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Iv||(Iv={}));var Cv;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Cv||(Cv={}));var dn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(dn||(dn={}));var kv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(kv||(kv={}));var Av;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Av||(Av={}));var Nv;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Nv||(Nv={}));var Rv;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Rv||(Rv={}));var Pv;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Pv||(Pv={}));var Mv;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Mv||(Mv={}));var Dv;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Dv||(Dv={}));var Lv;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Lv||(Lv={}));var jv;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(jv||(jv={}));var Fv;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Fv||(Fv={}));var Vv;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Vv||(Vv={}));var Uv;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Uv||(Uv={}));var Ov;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ov||(Ov={}));var Bv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Bv||(Bv={}));var zv;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(zv||(zv={}));var Nc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Nc||(Nc={}));var Gv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Gv||(Gv={}));var Hv;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Hv||(Hv={}));var $v;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})($v||($v={}));var Zf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Zf||(Zf={}));var qv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(qv||(qv={}));var Wv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Wv||(Wv={}));var Kv;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Kv||(Kv={}));var Jv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Jv||(Jv={}));var Yv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Yv||(Yv={}));var Qv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Qv||(Qv={}));var Xv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Xv||(Xv={}));var Zv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Zv||(Zv={}));var ex;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(ex||(ex={}));var tx;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(tx||(tx={}));var nx;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nx||(nx={}));var rx;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(rx||(rx={}));var sx;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(sx||(sx={}));var ix;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ix||(ix={}));var ox;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(ox||(ox={}));var ax;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(ax||(ax={}));var lx;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(lx||(lx={}));var ux;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ux||(ux={}));var cx;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(cx||(cx={}));var dx;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(dx||(dx={}));var hx;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(hx||(hx={}));var fx;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(fx||(fx={}));var px;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(px||(px={}));var mx;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(mx||(mx={}));var gx;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(gx||(gx={}));var yx;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(yx||(yx={}));var vx;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(vx||(vx={}));var xx;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(xx||(xx={}));var wx;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(wx||(wx={}));var _x;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_x||(_x={}));var bx;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(bx||(bx={}));var Yi;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Yi||(Yi={}));class ep{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class la{get text(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const m=[];for(const g of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[y,w]of Object.entries(g))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(w!==null||w!==void 0)&&m.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;d=!0,c+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const m of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(m))g!=="inlineData"&&(y!==null||y!==void 0)&&d.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,s,i,o,a,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,s,i,o,a,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class Ex{}class Tx{}class ND{}class RD{}class PD{}class MD{}class Sx{}class Ix{}class Cx{}class DD{}class Rc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Rc;let s;const i=e;return n?s=vD(i):s=yD(i),Object.assign(r,s),r}}class kx{}class Ax{}class Nx{}class Rx{}class LD{}class jD{}class FD{}class lg{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new lg,i=SD(e);return Object.assign(r,i),r}}class VD{}class UD{}class OD{}class Px{}class BD{get text(){var e,n,r;let s="",i=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,s+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?s:void 0}get data(){var e,n,r;let s="";const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&i.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class zD{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ug{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ug,i=t1(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function et(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function n1(t,e){const n=et(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function r1(t){return Array.isArray(t)?t.map(e=>Pc(e)):[Pc(t)]}function Pc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function s1(t){const e=Pc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function i1(t){const e=Pc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Mx(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function o1(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Mx(e)):[Mx(t)]}function tp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Dx(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Lx(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function hn(t){if(t==null)throw new Error("ContentUnion is required");return tp(t)?t:{role:"user",parts:o1(t)}}function cg(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=hn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=hn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>hn(n)):[hn(e)]}function Yn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Dx(t)||Lx(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[hn(t)]}const e=[],n=[],r=tp(t[0]);for(const s of t){const i=tp(s);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(s);else{if(Dx(s)||Lx(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:o1(n)}),e}function GD(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(dn).includes(n[0].toUpperCase())?n[0].toUpperCase():dn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(dn).includes(r.toUpperCase())?r.toUpperCase():dn.TYPE_UNSPECIFIED})}}function oo(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&GD(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(dn).includes(a.toUpperCase())?a.toUpperCase():dn.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=oo(a);else if(r.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(oo(c))}e[o]=l}else if(s.includes(o)){const l={};for(const[c,d]of Object.entries(a))l[c]=oo(d);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function dg(t){return oo(t)}function hg(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function fg(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=oo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=oo(e.response));return t}function Vo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function HD(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function es(t,e){if(typeof e!="string")throw new Error("name must be a string");return HD(t,e,"cachedContents")}function a1(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Os(t){return ag(t)}function $D(t){return t!=null&&typeof t=="object"&&"name"in t}function qD(t){return t!=null&&typeof t=="object"&&"video"in t}function WD(t){return t!=null&&typeof t=="object"&&"uri"in t}function l1(t){var e;let n;if($D(t)&&(n=t.name),!(WD(t)&&(n=t.uri,n===void 0))&&!(qD(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function u1(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function c1(t){for(const e of["models","tunedModels","publisherModels"])if(KD(t,e))return t[e];return[]}function KD(t,e){return t!==null&&typeof t=="object"&&e in t}function JD(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function YD(t,e={}){const n=[],r=new Set;for(const s of t){const i=s.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const o=JD(s,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function d1(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function QD(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function h1(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let i=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Uo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function f1(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XD(t){const e={},n=h(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const r=h(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>P5(o))),p(e,["inlinedResponses"],i)}const s=h(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["inlinedEmbedContentResponses"],i)}return e}function ZD(t){const e={},n=h(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsDestination","outputUriPrefix"]);r!=null&&p(e,["gcsUri"],r);const s=h(t,["bigqueryDestination","outputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function e5(t){const e={},n=h(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsDestination","outputUriPrefix"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&p(e,["bigqueryDestination","outputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Bu(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata","displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["metadata","state"]);s!=null&&p(e,["state"],f1(s));const i=h(t,["metadata","createTime"]);i!=null&&p(e,["createTime"],i);const o=h(t,["metadata","endTime"]);o!=null&&p(e,["endTime"],o);const a=h(t,["metadata","updateTime"]);a!=null&&p(e,["updateTime"],a);const l=h(t,["metadata","model"]);l!=null&&p(e,["model"],l);const c=h(t,["metadata","output"]);return c!=null&&p(e,["dest"],XD(h1(c))),e}function np(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["state"]);s!=null&&p(e,["state"],f1(s));const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["createTime"]);o!=null&&p(e,["createTime"],o);const a=h(t,["startTime"]);a!=null&&p(e,["startTime"],a);const l=h(t,["endTime"]);l!=null&&p(e,["endTime"],l);const c=h(t,["updateTime"]);c!=null&&p(e,["updateTime"],c);const d=h(t,["model"]);d!=null&&p(e,["model"],d);const m=h(t,["inputConfig"]);m!=null&&p(e,["src"],t5(m));const g=h(t,["outputConfig"]);g!=null&&p(e,["dest"],ZD(h1(g)));const y=h(t,["completionStats"]);return y!=null&&p(e,["completionStats"],y),e}function t5(t){const e={},n=h(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsSource","uris"]);r!=null&&p(e,["gcsUri"],r);const s=h(t,["bigquerySource","inputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function n5(t,e){const n={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=h(e,["fileName"]);r!=null&&p(n,["fileName"],r);const s=h(e,["inlinedRequests"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>R5(t,o))),p(n,["requests","requests"],i)}return n}function r5(t){const e={},n=h(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsSource","uris"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&p(e,["bigquerySource","inputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function s5(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function i5(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Uo(t,r)),n}function o5(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Uo(t,r)),n}function a5(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],l5(r));const s=h(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=h(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const l=h(t,["index"]);l!=null&&p(e,["index"],l);const c=h(t,["logprobsResult"]);c!=null&&p(e,["logprobsResult"],c);const d=h(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=h(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function l5(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function p1(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>U5(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function u5(t,e){const n={},r=h(t,["displayName"]);if(e!==void 0&&r!=null&&p(e,["batch","displayName"],r),h(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function c5(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["dest"]);return e!==void 0&&s!=null&&p(e,["outputConfig"],e5(QD(s))),n}function jx(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["src"]);s!=null&&p(n,["batch","inputConfig"],n5(t,d1(t,s)));const i=h(e,["config"]);return i!=null&&u5(i,n),n}function d5(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],et(t,r));const s=h(e,["src"]);s!=null&&p(n,["inputConfig"],r5(d1(t,s)));const i=h(e,["config"]);return i!=null&&c5(i,n),n}function h5(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["batch","displayName"],r),n}function f5(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["src"]);s!=null&&p(n,["batch","inputConfig"],w5(t,s));const i=h(e,["config"]);return i!=null&&h5(i,n),n}function p5(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Uo(t,r)),n}function m5(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Uo(t,r)),n}function g5(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);return i!=null&&p(e,["error"],i),e}function y5(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);return i!=null&&p(e,["error"],i),e}function v5(t,e){const n={},r=h(e,["contents"]);if(r!=null){let i=cg(t,r);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["requests[]","request","content"],i)}const s=h(e,["config"]);return s!=null&&(p(n,["_self"],x5(s,n)),mD(n,{"requests[].*":"requests[].request.*"})),n}function x5(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=h(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function w5(t,e){const n={},r=h(e,["fileName"]);r!=null&&p(n,["file_name"],r);const s=h(e,["inlinedRequests"]);return s!=null&&p(n,["requests"],v5(t,s)),n}function _5(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function b5(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function E5(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function T5(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],p1(hn(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const _=h(e,["responseMimeType"]);_!=null&&p(r,["responseMimeType"],_);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],dg(v));const E=h(e,["responseJsonSchema"]);if(E!=null&&p(r,["responseJsonSchema"],E),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=h(e,["safetySettings"]);if(n!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(I=>O5(I))),p(n,["safetySettings"],D)}const P=h(e,["tools"]);if(n!==void 0&&P!=null){let D=Vo(P);Array.isArray(D)&&(D=D.map(I=>z5(Fo(I)))),p(n,["tools"],D)}const L=h(e,["toolConfig"]);if(n!==void 0&&L!=null&&p(n,["toolConfig"],B5(L)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=h(e,["cachedContent"]);n!==void 0&&B!=null&&p(n,["cachedContent"],es(t,B));const k=h(e,["responseModalities"]);k!=null&&p(r,["responseModalities"],k);const A=h(e,["mediaResolution"]);A!=null&&p(r,["mediaResolution"],A);const N=h(e,["speechConfig"]);if(N!=null&&p(r,["speechConfig"],hg(N)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=h(e,["thinkingConfig"]);M!=null&&p(r,["thinkingConfig"],M);const V=h(e,["imageConfig"]);V!=null&&p(r,["imageConfig"],N5(V));const R=h(e,["enableEnhancedCivicAnswers"]);return R!=null&&p(r,["enableEnhancedCivicAnswers"],R),r}function S5(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>a5(c))),p(e,["candidates"],l)}const s=h(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=h(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=h(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=h(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function I5(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Uo(t,r)),n}function C5(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Uo(t,r)),n}function k5(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function A5(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function N5(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function R5(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["request","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let a=Yn(s);Array.isArray(a)&&(a=a.map(l=>p1(l))),p(n,["request","contents"],a)}const i=h(e,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(e,["config"]);return o!=null&&p(n,["request","generationConfig"],T5(t,o,h(n,["request"],{}))),n}function P5(t){const e={},n=h(t,["response"]);n!=null&&p(e,["response"],S5(n));const r=h(t,["error"]);return r!=null&&p(e,["error"],r),e}function M5(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);if(e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),h(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function D5(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const i=h(t,["filter"]);return e!==void 0&&i!=null&&p(e,["_query","filter"],i),n}function L5(t){const e={},n=h(t,["config"]);return n!=null&&M5(n,e),e}function j5(t){const e={},n=h(t,["config"]);return n!=null&&D5(n,e),e}function F5(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["operations"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Bu(o))),p(e,["batchJobs"],i)}return e}function V5(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["batchPredictionJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>np(o))),p(e,["batchJobs"],i)}return e}function U5(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],_5(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],b5(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],s5(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function O5(t){const e={},n=h(t,["category"]);if(n!=null&&p(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function B5(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],E5(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function z5(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],k5(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],A5(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Jr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Jr||(Jr={}));class Si{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G5 extends Zr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Si(Jr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=jx(this.apiClient,e),r=n._url,s=_e("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const d of l){const m=Object.assign({},d);if(m.systemInstruction){const g=m.systemInstruction;delete m.systemInstruction;const y=m.request;y.systemInstruction=g,m.request=y}c.push(m)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const i=this.getGcsUri(e),o=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${s}`;else if(o)r.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=d5(this.apiClient,e);return a=_e("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>np(d))}else{const c=jx(this.apiClient,e);return a=_e("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Bu(d))}}async createEmbeddingsInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=f5(this.apiClient,e);return i=_e("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>Bu(l))}}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=C5(this.apiClient,e);return a=_e("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>np(d))}else{const c=I5(this.apiClient,e);return a=_e("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Bu(d))}}async cancel(e){var n,r,s,i;let o="",a={};if(this.apiClient.isVertexAI()){const l=o5(this.apiClient,e);o=_e("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=i5(this.apiClient,e);o=_e("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=j5(e);return a=_e("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=V5(d),g=new Px;return Object.assign(g,m),g})}else{const c=L5(e);return a=_e("batches",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=F5(d),g=new Px;return Object.assign(g,m),g})}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=m5(this.apiClient,e);return a=_e("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>y5(d))}else{const c=p5(this.apiClient,e);return a=_e("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>g5(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H5(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Fx(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>f3(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function $5(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["contents"]);if(e!==void 0&&o!=null){let d=Yn(o);Array.isArray(d)&&(d=d.map(m=>Fx(m))),p(e,["contents"],d)}const a=h(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],Fx(hn(a)));const l=h(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>m3(m))),p(e,["tools"],d)}const c=h(t,["toolConfig"]);if(e!==void 0&&c!=null&&p(e,["toolConfig"],p3(c)),h(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function q5(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["contents"]);if(e!==void 0&&o!=null){let m=Yn(o);Array.isArray(m)&&(m=m.map(g=>g)),p(e,["contents"],m)}const a=h(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],hn(a));const l=h(t,["tools"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>g3(g))),p(e,["tools"],m)}const c=h(t,["toolConfig"]);e!==void 0&&c!=null&&p(e,["toolConfig"],c);const d=h(t,["kmsKeyName"]);return e!==void 0&&d!=null&&p(e,["encryption_spec","kmsKeyName"],d),n}function W5(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],n1(t,r));const s=h(e,["config"]);return s!=null&&$5(s,n),n}function K5(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],n1(t,r));const s=h(e,["config"]);return s!=null&&q5(s,n),n}function J5(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],es(t,r)),n}function Y5(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],es(t,r)),n}function Q5(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function X5(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function Z5(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function e3(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function t3(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function n3(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function r3(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],es(t,r)),n}function s3(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],es(t,r)),n}function i3(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function o3(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function a3(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function l3(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function u3(t){const e={},n=h(t,["config"]);return n!=null&&a3(n,e),e}function c3(t){const e={},n=h(t,["config"]);return n!=null&&l3(n,e),e}function d3(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function h3(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function f3(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],Z5(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],e3(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],H5(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function p3(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],t3(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function m3(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],i3(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],o3(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function g3(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>n3(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function y3(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function v3(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function x3(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],es(t,r));const s=h(e,["config"]);return s!=null&&y3(s,n),n}function w3(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],es(t,r));const s=h(e,["config"]);return s!=null&&v3(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _3 extends Zr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Si(Jr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=K5(this.apiClient,e);return a=_e("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=W5(this.apiClient,e);return a=_e("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=s3(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=r3(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Y5(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=X5(d),g=new Nx;return Object.assign(g,m),g})}else{const c=J5(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=Q5(d),g=new Nx;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=w3(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=x3(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=c3(e);return a=_e("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=h3(d),g=new Rx;return Object.assign(g,m),g})}else{const c=u3(e);return a=_e("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=d3(d),g=new Rx;return Object.assign(g,m),g})}}}function Mc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Vx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fe(t){return this instanceof Fe?(this.v=t,this):new Fe(t)}function ur(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(y){return function(w){return Promise.resolve(w).then(y,m)}}function a(y,w){r[y]&&(s[y]=function(x){return new Promise(function(_,v){i.push([y,x,_,v])>1||l(y,x)})},w&&(s[y]=w(s[y])))}function l(y,w){try{c(r[y](w))}catch(x){g(i[0][3],x)}}function c(y){y.value instanceof Fe?Promise.resolve(y.value.v).then(d,m):g(i[0][2],y)}function d(y){l("next",y)}function m(y){l("throw",y)}function g(y,w){y(w),i.shift(),i.length&&l(i[0][0],i[0][1])}}function cr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Vx=="function"?Vx(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b3(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:m1(n)}function m1(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function E3(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Ux(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let i=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),i&&!m1(t[r])&&(i=!1),r++;i?e.push(...s):e.pop()}return e}class T3{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new S3(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class S3{constructor(e,n,r,s={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=i,this.sendPromise=Promise.resolve(),E3(i)}async sendMessage(e){var n;await this.sendPromise;const r=hn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,o,a;const l=await s,c=(o=(i=l.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,d=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];d!=null&&(g=(a=d.slice(m))!==null&&a!==void 0?a:[]);const y=c?[c]:[];this.recordHistory(r,y,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=hn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const i=await s;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?Ux(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return ur(this,arguments,function*(){var s,i,o,a,l,c;const d=[];try{for(var m=!0,g=cr(e),y;y=yield Fe(g.next()),s=y.done,!s;m=!0){a=y.value,m=!1;const w=a;if(b3(w)){const x=(c=(l=w.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;x!==void 0&&d.push(x)}yield yield Fe(w)}}catch(w){i={error:w}}finally{try{!m&&!s&&(o=g.return)&&(yield Fe(o.call(g)))}finally{if(i)throw i.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(i=>i.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Ux(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ed extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ed.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I3(t){const e={},n=h(t,["file"]);return n!=null&&p(e,["file"],n),e}function C3(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function k3(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],l1(n)),e}function A3(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function N3(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],l1(n)),e}function R3(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function P3(t){const e={},n=h(t,["config"]);return n!=null&&R3(n,e),e}function M3(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["files"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D3 extends Zr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Si(Jr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=P3(e);return i=_e("files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=M3(l),d=new VD;return Object.assign(d,c),d})}}async createInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=I3(e);return i=_e("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=C3(l),d=new UD;return Object.assign(d,c),d})}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=N3(e);return i=_e("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=k3(e);return i=_e("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=A3(l),d=new OD;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zu(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function L3(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Q3(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function j3(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function F3(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function V3(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function U3(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=h(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=h(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=h(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const l=h(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const c=h(t,["maxOutputTokens"]);c!=null&&p(e,["maxOutputTokens"],c);const d=h(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const m=h(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=h(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=h(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const w=h(t,["responseModalities"]);w!=null&&p(e,["responseModalities"],w);const x=h(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const _=h(t,["routingConfig"]);_!=null&&p(e,["routingConfig"],_);const v=h(t,["seed"]);v!=null&&p(e,["seed"],v);const E=h(t,["speechConfig"]);E!=null&&p(e,["speechConfig"],E);const T=h(t,["stopSequences"]);T!=null&&p(e,["stopSequences"],T);const P=h(t,["temperature"]);P!=null&&p(e,["temperature"],P);const L=h(t,["thinkingConfig"]);L!=null&&p(e,["thinkingConfig"],L);const B=h(t,["topK"]);B!=null&&p(e,["topK"],B);const k=h(t,["topP"]);if(k!=null&&p(e,["topP"],k),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function O3(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function B3(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function z3(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],fg(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],L3(hn(w)));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let B=Vo(x);Array.isArray(B)&&(B=B.map(k=>Z3(Fo(k)))),p(e,["setup","tools"],B)}const _=h(t,["sessionResumption"]);e!==void 0&&_!=null&&p(e,["setup","sessionResumption"],X3(_));const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const E=h(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],E);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const P=h(t,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],P);const L=h(t,["proactivity"]);if(e!==void 0&&L!=null&&p(e,["setup","proactivity"],L),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function G3(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],U3(r));const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],fg(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],hn(w));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let k=Vo(x);Array.isArray(k)&&(k=k.map(A=>eL(Fo(A)))),p(e,["setup","tools"],k)}const _=h(t,["sessionResumption"]);e!==void 0&&_!=null&&p(e,["setup","sessionResumption"],_);const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const E=h(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],E);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const P=h(t,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],P);const L=h(t,["proactivity"]);e!==void 0&&L!=null&&p(e,["setup","proactivity"],L);const B=h(t,["explicitVadSignal"]);return e!==void 0&&B!=null&&p(e,["setup","explicitVadSignal"],B),n}function H3(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],et(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],z3(s,n)),n}function $3(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],et(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],G3(s,n)),n}function q3(t){const e={},n=h(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function W3(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["weightedPrompts"],r)}return e}function K3(t){const e={},n=h(t,["media"]);if(n!=null){let c=r1(n);Array.isArray(c)&&(c=c.map(d=>zu(d))),p(e,["mediaChunks"],c)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],zu(i1(r)));const s=h(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(t,["video"]);i!=null&&p(e,["video"],zu(s1(i)));const o=h(t,["text"]);o!=null&&p(e,["text"],o);const a=h(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=h(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function J3(t){const e={},n=h(t,["media"]);if(n!=null){let c=r1(n);Array.isArray(c)&&(c=c.map(d=>d)),p(e,["mediaChunks"],c)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],i1(r));const s=h(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(t,["video"]);i!=null&&p(e,["video"],s1(i));const o=h(t,["text"]);o!=null&&p(e,["text"],o);const a=h(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=h(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function Y3(t){const e={},n=h(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const r=h(t,["serverContent"]);r!=null&&p(e,["serverContent"],r);const s=h(t,["toolCall"]);s!=null&&p(e,["toolCall"],s);const i=h(t,["toolCallCancellation"]);i!=null&&p(e,["toolCallCancellation"],i);const o=h(t,["usageMetadata"]);o!=null&&p(e,["usageMetadata"],tL(o));const a=h(t,["goAway"]);a!=null&&p(e,["goAway"],a);const l=h(t,["sessionResumptionUpdate"]);l!=null&&p(e,["sessionResumptionUpdate"],l);const c=h(t,["voiceActivityDetectionSignal"]);return c!=null&&p(e,["voiceActivityDetectionSignal"],c),e}function Q3(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],j3(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],F3(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],zu(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function X3(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Z3(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],O3(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],B3(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function eL(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>V3(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function tL(t){const e={},n=h(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const r=h(t,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const s=h(t,["candidatesTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const i=h(t,["toolUsePromptTokenCount"]);i!=null&&p(e,["toolUsePromptTokenCount"],i);const o=h(t,["thoughtsTokenCount"]);o!=null&&p(e,["thoughtsTokenCount"],o);const a=h(t,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);const l=h(t,["promptTokensDetails"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["promptTokensDetails"],y)}const c=h(t,["cacheTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["cacheTokensDetails"],y)}const d=h(t,["candidatesTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["responseTokensDetails"],y)}const m=h(t,["toolUsePromptTokensDetails"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["toolUsePromptTokensDetails"],y)}const g=h(t,["trafficType"]);return g!=null&&p(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nL(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function rL(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],sL(r));const s=h(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=h(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const l=h(t,["index"]);l!=null&&p(e,["index"],l);const c=h(t,["logprobsResult"]);c!=null&&p(e,["logprobsResult"],c);const d=h(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=h(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function sL(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function iL(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let i=Yn(s);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["contents"],i)}return n}function oL(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["tokensInfo"],s)}return e}function aL(t){const e={},n=h(t,["values"]);n!=null&&p(e,["values"],n);const r=h(t,["statistics"]);return r!=null&&p(e,["statistics"],lL(r)),e}function lL(t){const e={},n=h(t,["truncated"]);n!=null&&p(e,["truncated"],n);const r=h(t,["token_count"]);return r!=null&&p(e,["tokenCount"],r),e}function Td(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>yj(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function uL(t){const e={},n=h(t,["controlType"]);n!=null&&p(e,["controlType"],n);const r=h(t,["enableControlImageComputation"]);return r!=null&&p(e,["computeControl"],r),e}function cL(t){const e={};if(h(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function dL(t,e){const n={},r=h(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],hn(r));const s=h(t,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>x1(a))),p(e,["tools"],o)}const i=h(t,["generationConfig"]);return e!==void 0&&i!=null&&p(e,["generationConfig"],nj(i)),n}function hL(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let o=Yn(s);Array.isArray(o)&&(o=o.map(a=>Td(a))),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&cL(i),n}function fL(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let o=Yn(s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&dL(i,n),n}function pL(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);r!=null&&p(e,["totalTokens"],r);const s=h(t,["cachedContentTokenCount"]);return s!=null&&p(e,["cachedContentTokenCount"],s),e}function mL(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);return r!=null&&p(e,["totalTokens"],r),e}function gL(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],et(t,r)),n}function yL(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],et(t,r)),n}function vL(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function xL(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function wL(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=h(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=h(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const w=h(t,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const x=h(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const _=h(t,["addWatermark"]);e!==void 0&&_!=null&&p(e,["parameters","addWatermark"],_);const v=h(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const E=h(t,["editMode"]);e!==void 0&&E!=null&&p(e,["parameters","editMode"],E);const T=h(t,["baseSteps"]);return e!==void 0&&T!=null&&p(e,["parameters","editConfig","baseSteps"],T),n}function _L(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["referenceImages"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Ej(l))),p(n,["instances[0]","referenceImages"],a)}const o=h(e,["config"]);return o!=null&&wL(o,n),n}function bL(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Sd(i))),p(e,["generatedImages"],s)}return e}function EL(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=h(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function TL(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["instances[]","title"],s);const i=h(t,["outputDimensionality"]);e!==void 0&&i!=null&&p(e,["parameters","outputDimensionality"],i);const o=h(t,["mimeType"]);e!==void 0&&o!=null&&p(e,["instances[]","mimeType"],o);const a=h(t,["autoTruncate"]);return e!==void 0&&a!=null&&p(e,["parameters","autoTruncate"],a),n}function SL(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let a=cg(t,s);Array.isArray(a)&&(a=a.map(l=>l)),p(n,["requests[]","content"],a)}const i=h(e,["config"]);i!=null&&EL(i,n);const o=h(e,["model"]);return o!==void 0&&p(n,["requests[]","model"],et(t,o)),n}function IL(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let o=cg(t,s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["instances[]","content"],o)}const i=h(e,["config"]);return i!=null&&TL(i,n),n}function CL(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["embeddings"],i)}const s=h(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function kL(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>aL(o))),p(e,["embeddings"],i)}const s=h(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function AL(t){const e={},n=h(t,["endpoint"]);n!=null&&p(e,["name"],n);const r=h(t,["deployedModelId"]);return r!=null&&p(e,["deployedModelId"],r),e}function NL(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function RL(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function PL(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ML(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function DL(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],Td(hn(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const _=h(e,["responseMimeType"]);_!=null&&p(r,["responseMimeType"],_);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],dg(v));const E=h(e,["responseJsonSchema"]);if(E!=null&&p(r,["responseJsonSchema"],E),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=h(e,["safetySettings"]);if(n!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(I=>Tj(I))),p(n,["safetySettings"],D)}const P=h(e,["tools"]);if(n!==void 0&&P!=null){let D=Vo(P);Array.isArray(D)&&(D=D.map(I=>Rj(Fo(I)))),p(n,["tools"],D)}const L=h(e,["toolConfig"]);if(n!==void 0&&L!=null&&p(n,["toolConfig"],Nj(L)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=h(e,["cachedContent"]);n!==void 0&&B!=null&&p(n,["cachedContent"],es(t,B));const k=h(e,["responseModalities"]);k!=null&&p(r,["responseModalities"],k);const A=h(e,["mediaResolution"]);A!=null&&p(r,["mediaResolution"],A);const N=h(e,["speechConfig"]);if(N!=null&&p(r,["speechConfig"],hg(N)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=h(e,["thinkingConfig"]);M!=null&&p(r,["thinkingConfig"],M);const V=h(e,["imageConfig"]);V!=null&&p(r,["imageConfig"],aj(V));const R=h(e,["enableEnhancedCivicAnswers"]);return R!=null&&p(r,["enableEnhancedCivicAnswers"],R),r}function LL(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],hn(s));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const _=h(e,["responseMimeType"]);_!=null&&p(r,["responseMimeType"],_);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],dg(v));const E=h(e,["responseJsonSchema"]);E!=null&&p(r,["responseJsonSchema"],E);const T=h(e,["routingConfig"]);T!=null&&p(r,["routingConfig"],T);const P=h(e,["modelSelectionConfig"]);P!=null&&p(r,["modelConfig"],P);const L=h(e,["safetySettings"]);if(n!==void 0&&L!=null){let fe=L;Array.isArray(fe)&&(fe=fe.map(re=>re)),p(n,["safetySettings"],fe)}const B=h(e,["tools"]);if(n!==void 0&&B!=null){let fe=Vo(B);Array.isArray(fe)&&(fe=fe.map(re=>x1(Fo(re)))),p(n,["tools"],fe)}const k=h(e,["toolConfig"]);n!==void 0&&k!=null&&p(n,["toolConfig"],k);const A=h(e,["labels"]);n!==void 0&&A!=null&&p(n,["labels"],A);const N=h(e,["cachedContent"]);n!==void 0&&N!=null&&p(n,["cachedContent"],es(t,N));const M=h(e,["responseModalities"]);M!=null&&p(r,["responseModalities"],M);const V=h(e,["mediaResolution"]);V!=null&&p(r,["mediaResolution"],V);const R=h(e,["speechConfig"]);R!=null&&p(r,["speechConfig"],hg(R));const D=h(e,["audioTimestamp"]);D!=null&&p(r,["audioTimestamp"],D);const I=h(e,["thinkingConfig"]);I!=null&&p(r,["thinkingConfig"],I);const H=h(e,["imageConfig"]);if(H!=null&&p(r,["imageConfig"],lj(H)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function Ox(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let o=Yn(s);Array.isArray(o)&&(o=o.map(a=>Td(a))),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(n,["generationConfig"],DL(t,i,n)),n}function Bx(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let o=Yn(s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(n,["generationConfig"],LL(t,i,n)),n}function zx(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>rL(c))),p(e,["candidates"],l)}const s=h(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=h(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=h(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=h(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function Gx(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),p(e,["candidates"],c)}const s=h(t,["createTime"]);s!=null&&p(e,["createTime"],s);const i=h(t,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const o=h(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=h(t,["responseId"]);a!=null&&p(e,["responseId"],a);const l=h(t,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function jL(t,e){const n={};if(h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const i=h(t,["guidanceScale"]);if(e!==void 0&&i!=null&&p(e,["parameters","guidanceScale"],i),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=h(t,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const l=h(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&p(e,["parameters","includeSafetyAttributes"],l);const c=h(t,["includeRaiReason"]);e!==void 0&&c!=null&&p(e,["parameters","includeRaiReason"],c);const d=h(t,["language"]);e!==void 0&&d!=null&&p(e,["parameters","language"],d);const m=h(t,["outputMimeType"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","mimeType"],m);const g=h(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g),h(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=h(t,["imageSize"]);if(e!==void 0&&y!=null&&p(e,["parameters","sampleImageSize"],y),h(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function FL(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=h(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=h(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const w=h(t,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const x=h(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const _=h(t,["addWatermark"]);e!==void 0&&_!=null&&p(e,["parameters","addWatermark"],_);const v=h(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const E=h(t,["imageSize"]);e!==void 0&&E!=null&&p(e,["parameters","sampleImageSize"],E);const T=h(t,["enhancePrompt"]);return e!==void 0&&T!=null&&p(e,["parameters","enhancePrompt"],T),n}function VL(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&jL(i,n),n}function UL(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&FL(i,n),n}function OL(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>XL(o))),p(e,["generatedImages"],i)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],y1(s)),e}function BL(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Sd(o))),p(e,["generatedImages"],i)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],v1(s)),e}function zL(t,e){const n={},r=h(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=h(t,["durationSeconds"]);if(e!==void 0&&s!=null&&p(e,["parameters","durationSeconds"],s),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=h(t,["aspectRatio"]);e!==void 0&&i!=null&&p(e,["parameters","aspectRatio"],i);const o=h(t,["resolution"]);e!==void 0&&o!=null&&p(e,["parameters","resolution"],o);const a=h(t,["personGeneration"]);if(e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a),h(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=h(t,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const c=h(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&p(e,["parameters","enhancePrompt"],c),h(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=h(t,["lastFrame"]);e!==void 0&&d!=null&&p(e,["instances[0]","lastFrame"],Id(d));const m=h(t,["referenceImages"]);if(e!==void 0&&m!=null){let g=m;Array.isArray(g)&&(g=g.map(y=>Hj(y))),p(e,["instances[0]","referenceImages"],g)}if(h(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function GL(t,e){const n={},r=h(t,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const i=h(t,["fps"]);e!==void 0&&i!=null&&p(e,["parameters","fps"],i);const o=h(t,["durationSeconds"]);e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o);const a=h(t,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const l=h(t,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const c=h(t,["resolution"]);e!==void 0&&c!=null&&p(e,["parameters","resolution"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["pubsubTopic"]);e!==void 0&&m!=null&&p(e,["parameters","pubsubTopic"],m);const g=h(t,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const y=h(t,["enhancePrompt"]);e!==void 0&&y!=null&&p(e,["parameters","enhancePrompt"],y);const w=h(t,["generateAudio"]);e!==void 0&&w!=null&&p(e,["parameters","generateAudio"],w);const x=h(t,["lastFrame"]);e!==void 0&&x!=null&&p(e,["instances[0]","lastFrame"],fr(x));const _=h(t,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(P=>$j(P))),p(e,["instances[0]","referenceImages"],T)}const v=h(t,["mask"]);e!==void 0&&v!=null&&p(e,["instances[0]","mask"],Gj(v));const E=h(t,["compressionQuality"]);return e!==void 0&&E!=null&&p(e,["parameters","compressionQuality"],E),n}function HL(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],KL(o)),e}function $L(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],JL(o)),e}function qL(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["image"]);i!=null&&p(n,["instances[0]","image"],Id(i));const o=h(e,["video"]);o!=null&&p(n,["instances[0]","video"],w1(o));const a=h(e,["source"]);a!=null&&YL(a,n);const l=h(e,["config"]);return l!=null&&zL(l,n),n}function WL(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["image"]);i!=null&&p(n,["instances[0]","image"],fr(i));const o=h(e,["video"]);o!=null&&p(n,["instances[0]","video"],_1(o));const a=h(e,["source"]);a!=null&&QL(a,n);const l=h(e,["config"]);return l!=null&&GL(l,n),n}function KL(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ej(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function JL(t){const e={},n=h(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>tj(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function YL(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Id(s));const i=h(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],w1(i)),n}function QL(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],fr(s));const i=h(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],_1(i)),n}function XL(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],uj(n));const r=h(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(t,["_self"]);return s!=null&&p(e,["safetyAttributes"],y1(s)),e}function Sd(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],g1(n));const r=h(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(t,["_self"]);s!=null&&p(e,["safetyAttributes"],v1(s));const i=h(t,["prompt"]);return i!=null&&p(e,["enhancedPrompt"],i),e}function ZL(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["mask"],g1(n));const r=h(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["labels"],s)}return e}function ej(t){const e={},n=h(t,["video"]);return n!=null&&p(e,["video"],Bj(n)),e}function tj(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],zj(n)),e}function nj(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=h(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=h(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=h(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const l=h(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const c=h(t,["maxOutputTokens"]);c!=null&&p(e,["maxOutputTokens"],c);const d=h(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const m=h(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=h(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=h(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const w=h(t,["responseModalities"]);w!=null&&p(e,["responseModalities"],w);const x=h(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const _=h(t,["routingConfig"]);_!=null&&p(e,["routingConfig"],_);const v=h(t,["seed"]);v!=null&&p(e,["seed"],v);const E=h(t,["speechConfig"]);E!=null&&p(e,["speechConfig"],E);const T=h(t,["stopSequences"]);T!=null&&p(e,["stopSequences"],T);const P=h(t,["temperature"]);P!=null&&p(e,["temperature"],P);const L=h(t,["thinkingConfig"]);L!=null&&p(e,["thinkingConfig"],L);const B=h(t,["topK"]);B!=null&&p(e,["topK"],B);const k=h(t,["topP"]);if(k!=null&&p(e,["topP"],k),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function rj(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],et(t,r)),n}function sj(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],et(t,r)),n}function ij(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function oj(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function aj(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function lj(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);r!=null&&p(e,["imageSize"],r);const s=h(t,["outputMimeType"]);s!=null&&p(e,["imageOutputOptions","mimeType"],s);const i=h(t,["outputCompressionQuality"]);return i!=null&&p(e,["imageOutputOptions","compressionQuality"],i),e}function uj(t){const e={},n=h(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],Os(n));const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function g1(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["imageBytes"],Os(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Id(t){const e={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],Os(n));const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function fr(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["imageBytes"]);r!=null&&p(e,["bytesBase64Encoded"],Os(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function cj(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=h(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=h(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=h(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],u1(t,a)),r}function dj(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=h(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=h(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=h(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],u1(t,a)),r}function hj(t,e){const n={},r=h(e,["config"]);return r!=null&&cj(t,r,n),n}function fj(t,e){const n={},r=h(e,["config"]);return r!=null&&dj(t,r,n),n}function pj(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let i=c1(s);Array.isArray(i)&&(i=i.map(o=>rp(o))),p(e,["models"],i)}return e}function mj(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let i=c1(s);Array.isArray(i)&&(i=i.map(o=>sp(o))),p(e,["models"],i)}return e}function gj(t){const e={},n=h(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const r=h(t,["segmentationClasses"]);r!=null&&p(e,["maskClasses"],r);const s=h(t,["maskDilation"]);return s!=null&&p(e,["dilation"],s),e}function rp(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);s!=null&&p(e,["description"],s);const i=h(t,["version"]);i!=null&&p(e,["version"],i);const o=h(t,["_self"]);o!=null&&p(e,["tunedModelInfo"],Pj(o));const a=h(t,["inputTokenLimit"]);a!=null&&p(e,["inputTokenLimit"],a);const l=h(t,["outputTokenLimit"]);l!=null&&p(e,["outputTokenLimit"],l);const c=h(t,["supportedGenerationMethods"]);c!=null&&p(e,["supportedActions"],c);const d=h(t,["temperature"]);d!=null&&p(e,["temperature"],d);const m=h(t,["maxTemperature"]);m!=null&&p(e,["maxTemperature"],m);const g=h(t,["topP"]);g!=null&&p(e,["topP"],g);const y=h(t,["topK"]);y!=null&&p(e,["topK"],y);const w=h(t,["thinking"]);return w!=null&&p(e,["thinking"],w),e}function sp(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);s!=null&&p(e,["description"],s);const i=h(t,["versionId"]);i!=null&&p(e,["version"],i);const o=h(t,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>AL(g))),p(e,["endpoints"],m)}const a=h(t,["labels"]);a!=null&&p(e,["labels"],a);const l=h(t,["_self"]);l!=null&&p(e,["tunedModelInfo"],Mj(l));const c=h(t,["defaultCheckpointId"]);c!=null&&p(e,["defaultCheckpointId"],c);const d=h(t,["checkpoints"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),p(e,["checkpoints"],m)}return e}function yj(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],NL(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],RL(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],nL(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function vj(t){const e={},n=h(t,["productImage"]);return n!=null&&p(e,["image"],fr(n)),e}function xj(t,e){const n={},r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["baseSteps"]);e!==void 0&&s!=null&&p(e,["parameters","baseSteps"],s);const i=h(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=h(t,["seed"]);e!==void 0&&o!=null&&p(e,["parameters","seed"],o);const a=h(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const l=h(t,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const c=h(t,["addWatermark"]);e!==void 0&&c!=null&&p(e,["parameters","addWatermark"],c);const d=h(t,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const m=h(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const g=h(t,["enhancePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","enhancePrompt"],g);const y=h(t,["labels"]);return e!==void 0&&y!=null&&p(e,["labels"],y),n}function wj(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["source"]);s!=null&&bj(s,n);const i=h(e,["config"]);return i!=null&&xj(i,n),n}function _j(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Sd(s))),p(e,["generatedImages"],r)}return e}function bj(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["personImage"]);e!==void 0&&s!=null&&p(e,["instances[0]","personImage","image"],fr(s));const i=h(t,["productImages"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>vj(a))),p(e,["instances[0]","productImages"],o)}return n}function Ej(t){const e={},n=h(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],fr(n));const r=h(t,["referenceId"]);r!=null&&p(e,["referenceId"],r);const s=h(t,["referenceType"]);s!=null&&p(e,["referenceType"],s);const i=h(t,["maskImageConfig"]);i!=null&&p(e,["maskImageConfig"],gj(i));const o=h(t,["controlImageConfig"]);o!=null&&p(e,["controlImageConfig"],uL(o));const a=h(t,["styleImageConfig"]);a!=null&&p(e,["styleImageConfig"],a);const l=h(t,["subjectImageConfig"]);return l!=null&&p(e,["subjectImageConfig"],l),e}function y1(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function v1(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function Tj(t){const e={},n=h(t,["category"]);if(n!=null&&p(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function Sj(t){const e={},n=h(t,["image"]);return n!=null&&p(e,["image"],fr(n)),e}function Ij(t,e){const n={},r=h(t,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const s=h(t,["maxPredictions"]);e!==void 0&&s!=null&&p(e,["parameters","maxPredictions"],s);const i=h(t,["confidenceThreshold"]);e!==void 0&&i!=null&&p(e,["parameters","confidenceThreshold"],i);const o=h(t,["maskDilation"]);e!==void 0&&o!=null&&p(e,["parameters","maskDilation"],o);const a=h(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","binaryColorThreshold"],a);const l=h(t,["labels"]);return e!==void 0&&l!=null&&p(e,["labels"],l),n}function Cj(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["source"]);s!=null&&Aj(s,n);const i=h(e,["config"]);return i!=null&&Ij(i,n),n}function kj(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>ZL(s))),p(e,["generatedMasks"],r)}return e}function Aj(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],fr(s));const i=h(t,["scribbleImage"]);return e!==void 0&&i!=null&&p(e,["instances[0]","scribble"],Sj(i)),n}function Nj(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],PL(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function Rj(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],ij(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],oj(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function x1(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>ML(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function Pj(t){const e={},n=h(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function Mj(t){const e={},n=h(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function Dj(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function Lj(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function jj(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","name"],et(t,r));const s=h(e,["config"]);return s!=null&&Dj(s,n),n}function Fj(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["config"]);return s!=null&&Lj(s,n),n}function Vj(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&p(e,["parameters","safetySetting"],s);const i=h(t,["personGeneration"]);e!==void 0&&i!=null&&p(e,["parameters","personGeneration"],i);const o=h(t,["includeRaiReason"]);e!==void 0&&o!=null&&p(e,["parameters","includeRaiReason"],o);const a=h(t,["outputMimeType"]);e!==void 0&&a!=null&&p(e,["parameters","outputOptions","mimeType"],a);const l=h(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&p(e,["parameters","outputOptions","compressionQuality"],l);const c=h(t,["enhanceInputImage"]);e!==void 0&&c!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],c);const d=h(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const m=h(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=h(t,["numberOfImages"]);e!==void 0&&g!=null&&p(e,["parameters","sampleCount"],g);const y=h(t,["mode"]);return e!==void 0&&y!=null&&p(e,["parameters","mode"],y),n}function Uj(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["image"]);s!=null&&p(n,["instances[0]","image"],fr(s));const i=h(e,["upscaleFactor"]);i!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],i);const o=h(e,["config"]);return o!=null&&Vj(o,n),n}function Oj(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Sd(i))),p(e,["generatedImages"],s)}return e}function Bj(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],Os(r));const s=h(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function zj(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],Os(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Gj(t){const e={},n=h(t,["image"]);n!=null&&p(e,["_self"],fr(n));const r=h(t,["maskMode"]);return r!=null&&p(e,["maskMode"],r),e}function Hj(t){const e={},n=h(t,["image"]);n!=null&&p(e,["image"],Id(n));const r=h(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function $j(t){const e={},n=h(t,["image"]);n!=null&&p(e,["image"],fr(n));const r=h(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function w1(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["videoBytes"]);r!=null&&p(e,["encodedVideo"],Os(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["encoding"],s),e}function _1(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["videoBytes"]);r!=null&&p(e,["bytesBase64Encoded"],Os(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qj(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["displayName"],r),n}function Wj(t){const e={},n=h(t,["config"]);return n!=null&&qj(n,e),e}function Kj(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function Jj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&Kj(r,e),e}function Yj(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function Qj(t,e){const n={},r=h(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["customMetadata"],i)}const s=h(t,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),n}function Xj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],eF(o)),e}function Zj(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["fileName"]);r!=null&&p(e,["fileName"],r);const s=h(t,["config"]);return s!=null&&Qj(s,e),e}function eF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function tF(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function nF(t){const e={},n=h(t,["config"]);return n!=null&&tF(n,e),e}function rF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["fileSearchStores"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["fileSearchStores"],i)}return e}function b1(t,e){const n={},r=h(t,["mimeType"]);e!==void 0&&r!=null&&p(e,["mimeType"],r);const s=h(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const i=h(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["customMetadata"],a)}const o=h(t,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),n}function sF(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["config"]);return r!=null&&b1(r,e),e}function iF(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oF="Content-Type",aF="X-Server-Timeout",lF="User-Agent",ip="x-goog-api-client",uF="1.34.0",cF=`google-genai-sdk/${uF}`,dF="v1beta1",hF="v1beta";class fF{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:dF,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:hF,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.unaryApiCall(s,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,i]of Object.entries(n))typeof i=="object"?r[s]=Object.assign(Object.assign({},r[s]),i):i!==void 0&&(r[s]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.streamApiCall(s,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>i.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}s&&s.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&pF(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await Hx(s),new ep(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await Hx(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return ur(this,arguments,function*(){var r;const s=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:d}=yield Fe(s.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(d,{stream:!0});try{const w=JSON.parse(m);if("error"in w){const x=JSON.parse(JSON.stringify(w.error)),_=x.status,v=x.code,E=`got status: ${_}. ${JSON.stringify(w)}`;if(v>=400&&v<600)throw new Ed({message:E,status:v})}}catch(w){if(w.name==="ApiError")throw w}o+=m;let g=-1,y=0;for(;;){g=-1,y=0;for(const _ of l){const v=o.indexOf(_);v!==-1&&(g===-1||v<g)&&(g=v,y=_.length)}if(g===-1)break;const w=o.substring(0,g);o=o.substring(g+y);const x=w.trim();if(x.startsWith(a)){const _=x.substring(a.length).trim();try{const v=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Fe(new ep(v))}catch(v){throw new Error(`exception parsing stream chunk ${_}. ${v}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=cF+" "+this.clientOptions.userAgentExtra;return e[lF]=n,e[ip]=n,e[oF]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,i]of Object.entries(e.headers))r.append(s,i);e.timeout&&e.timeout>0&&r.append(aF,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);s.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l={file:s},c=this.getFileName(e),d=_e("upload/v1beta/files",l._url),m=await this.fetchUploadUrl(d,s.sizeBytes,s.mimeType,c,l,n==null?void 0:n.httpOptions);return i.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var s;const i=this.clientOptions.uploader,o=await i.stat(n),a=String(o.size),l=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),m={};r!=null&&b1(r,m);const g=await this.fetchUploadUrl(c,a,l,d,m,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,i,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const c=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function Hx(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new Ed({message:s,status:n}):new Error(s)}}function pF(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,o){const a=Object.assign({},i);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],d=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=r(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mF="mcp_used/unknown";let gF=!1;function E1(t){for(const e of t)if(yF(e)||typeof e=="object"&&"inputSchema"in e)return!0;return gF}function T1(t){var e;const n=(e=t[ip])!==null&&e!==void 0?e:"";t[ip]=(n+` ${mF}`).trimStart()}function yF(t){return t!==null&&typeof t=="object"&&t instanceof pg}function vF(t){return ur(this,arguments,function*(n,r=100){let s,i=0;for(;i<r;){const o=yield Fe(n.listTools({cursor:s}));for(const a of o.tools)yield yield Fe(a),i++;if(!o.nextCursor)break;s=o.nextCursor}})}class pg{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new pg(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const i={},o=[];for(const d of this.mcpClients)try{for(var a=!0,l=(n=void 0,cr(vF(d))),c;c=await l.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const m=s;o.push(m);const g=m.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=d}}catch(m){n={error:m}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),YD(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await s.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function xF(t,e,n){const r=new zD;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class wF{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=EF(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const d=new Promise(T=>{c=T}),m=e.callbacks,g=function(){c({})},y=this.apiClient,w={onopen:g,onmessage:T=>{xF(y,m.onmessage,T)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(T){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(T){}},x=this.webSocketFactory.create(l,bF(o),w);x.connect(),await d;const E={setup:{model:et(this.apiClient,e.model)}};return x.send(JSON.stringify(E)),new _F(x,this.apiClient)}}class _F{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=W3(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=q3(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Yi.PLAY)}pause(){this.sendPlaybackControl(Yi.PAUSE)}stop(){this.sendPlaybackControl(Yi.STOP)}resetContext(){this.sendPlaybackControl(Yi.RESET_CONTEXT)}close(){this.conn.close()}}function bF(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function EF(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function SF(t,e,n){const r=new BD;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const i=JSON.parse(s);if(t.isVertexAI()){const o=Y3(i);Object.assign(r,o)}else Object.assign(r,i);e(r)}class IF{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new wF(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,i,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&E1(e.config.tools)&&T1(m);const g=NF(m);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,d);else{const N=this.apiClient.getApiKey();let M="BidiGenerateContent",V="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",V="access_token"),d=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${M}?${V}=${N}`}let y=()=>{};const w=new Promise(N=>{y=N}),x=e.callbacks,_=function(){var N;(N=x==null?void 0:x.onopen)===null||N===void 0||N.call(x),y({})},v=this.apiClient,E={onopen:_,onmessage:N=>{SF(v,x.onmessage,N)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(N){}},T=this.webSocketFactory.create(d,AF(g),E);T.connect(),await w;let P=et(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const N=this.apiClient.getProject(),M=this.apiClient.getLocation();P=`projects/${N}/locations/${M}/`+P}let L={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Nc.AUDIO]}:e.config.responseModalities=[Nc.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const B=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],k=[];for(const N of B)if(this.isCallableTool(N)){const M=N;k.push(await M.tool())}else k.push(N);k.length>0&&(e.config.tools=k);const A={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=$3(this.apiClient,A):L=H3(this.apiClient,A),delete L.config,T.send(JSON.stringify(L)),new kF(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const CF={turnComplete:!0};class kF{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Yn(n.turns),e.isVertexAI()||(r=r.map(s=>Td(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(TF)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},CF),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:J3(e)}:n={realtimeInput:K3(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function AF(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function NF(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $x=10;function qx(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ao(o)){s=!0;break}if(!s)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function ao(t){return"callTool"in t&&typeof t.callTool=="function"}function RF(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>ao(s)))!==null&&r!==void 0?r:!1}function Wx(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(ao(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(s)}),n}function Kx(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PF extends Zr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,i,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!RF(n)||qx(n.config))return await this.generateContentInternal(l);const c=Wx(n);if(c.length>0){const x=c.map(_=>`tools[${_}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let d,m;const g=Yn(l.contents),y=(i=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:$x;let w=0;for(;w<y&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){const x=d.candidates[0].content,_=[];for(const v of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(ao(v)){const T=await v.callTool(d.functionCalls);_.push(...T)}w++,m={role:"user",parts:_},l.contents=Yn(l.contents),l.contents.push(x),l.contents.push(m),Kx(l.config)&&(g.push(x),g.push(m))}return Kx(l.config)&&(d.automaticFunctionCallingHistory=g),d},this.generateContentStream=async n=>{var r,s,i,o,a;if(this.maybeMoveToResponseJsonSchem(n),qx(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const l=Wx(n);if(l.length>0){const m=l.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(i=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,d=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let i;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?i=l==null?void 0:l.safetyAttributes:o.push(l);let a;return i?a={generatedImages:o,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Si(Jr.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,i,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(i=n.source)===null||i===void 0?void 0:i.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const o=await Promise.all(i.map(async l=>ao(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&E1(e.config.tools)){const l=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),T1(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,s;const i=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ao(o)){const a=o,l=await a.tool();for(const c of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,a)}}return i}async processAfcStream(e){var n,r,s;const i=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:$x;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,d,m){return ur(this,arguments,function*(){for(var g,y,w,x,_,v;a<i;){o&&(a++,o=!1);const L=yield Fe(c.processParamsMaybeAddMcpUsage(m)),B=yield Fe(c.generateContentStreamInternal(L)),k=[],A=[];try{for(var E=!0,T=(y=void 0,cr(B)),P;P=yield Fe(T.next()),g=P.done,!g;E=!0){x=P.value,E=!1;const N=x;if(yield yield Fe(N),N.candidates&&(!((_=N.candidates[0])===null||_===void 0)&&_.content)){A.push(N.candidates[0].content);for(const M of(v=N.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<i&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(M.functionCall.name)){const V=yield Fe(d.get(M.functionCall.name).callTool([M.functionCall]));k.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(N){y={error:N}}finally{try{!E&&!g&&(w=T.return)&&(yield Fe(w.call(T)))}finally{if(y)throw y.error}}if(k.length>0){o=!0;const N=new la;N.candidates=[{content:{role:"user",parts:k}}],yield yield Fe(N);const M=[];M.push(...A),M.push({role:"user",parts:k});const V=Yn(m.contents).concat(M);m.contents=V}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Bx(this.apiClient,e);return a=_e("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=Gx(d),g=new la;return Object.assign(g,m),g})}else{const c=Ox(this.apiClient,e);return a=_e("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=zx(d),g=new la;return Object.assign(g,m),g})}}async generateContentStreamInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Bx(this.apiClient,e);return a=_e("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return ur(this,arguments,function*(){var g,y,w,x;try{for(var _=!0,v=cr(m),E;E=yield Fe(v.next()),g=E.done,!g;_=!0){x=E.value,_=!1;const T=x,P=Gx(yield Fe(T.json()));P.sdkHttpResponse={headers:T.headers};const L=new la;Object.assign(L,P),yield yield Fe(L)}}catch(T){y={error:T}}finally{try{!_&&!g&&(w=v.return)&&(yield Fe(w.call(v)))}finally{if(y)throw y.error}}})})}else{const c=Ox(this.apiClient,e);return a=_e("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(m){return ur(this,arguments,function*(){var g,y,w,x;try{for(var _=!0,v=cr(m),E;E=yield Fe(v.next()),g=E.done,!g;_=!0){x=E.value,_=!1;const T=x,P=zx(yield Fe(T.json()));P.sdkHttpResponse={headers:T.headers};const L=new la;Object.assign(L,P),yield yield Fe(L)}}catch(T){y={error:T}}finally{try{!_&&!g&&(w=v.return)&&(yield Fe(w.call(v)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=IL(this.apiClient,e);return a=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=kL(d),g=new Ex;return Object.assign(g,m),g})}else{const c=SL(this.apiClient,e);return a=_e("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=CL(d),g=new Ex;return Object.assign(g,m),g})}}async generateImagesInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=UL(this.apiClient,e);return a=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=BL(d),g=new Tx;return Object.assign(g,m),g})}else{const c=VL(this.apiClient,e);return a=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=OL(d),g=new Tx;return Object.assign(g,m),g})}}async editImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=_L(this.apiClient,e);return i=_e("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=bL(l),d=new ND;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=Uj(this.apiClient,e);return i=_e("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=Oj(l),d=new RD;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=wj(this.apiClient,e);return i=_e("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=_j(l),d=new PD;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=Cj(this.apiClient,e);return i=_e("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=kj(l),d=new MD;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=sj(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>sp(d))}else{const c=rj(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>rp(d))}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=fj(this.apiClient,e);return a=_e("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=mj(d),g=new Sx;return Object.assign(g,m),g})}else{const c=hj(this.apiClient,e);return a=_e("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=pj(d),g=new Sx;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Fj(this.apiClient,e);return a=_e("{model}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>sp(d))}else{const c=jj(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>rp(d))}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=yL(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=xL(d),g=new Ix;return Object.assign(g,m),g})}else{const c=gL(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=vL(d),g=new Ix;return Object.assign(g,m),g})}}async countTokens(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=fL(this.apiClient,e);return a=_e("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=mL(d),g=new Cx;return Object.assign(g,m),g})}else{const c=hL(this.apiClient,e);return a=_e("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=pL(d),g=new Cx;return Object.assign(g,m),g})}}async computeTokens(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=iL(this.apiClient,e);return i=_e("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=oL(l),d=new DD;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=WL(this.apiClient,e);return a=_e("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const m=$L(d),g=new Rc;return Object.assign(g,m),g})}else{const c=qL(this.apiClient,e);return a=_e("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=HL(d),g=new Rc;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MF extends Zr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=TD(e);return a=_e("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}else{const c=ED(e);return a=_e("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=gD(e);return i=_e("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DF(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function LF(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>HF(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function jF(t,e,n){const r={},s=h(e,["expireTime"]);n!==void 0&&s!=null&&p(n,["expireTime"],s);const i=h(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&p(n,["newSessionExpireTime"],i);const o=h(e,["uses"]);n!==void 0&&o!=null&&p(n,["uses"],o);const a=h(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&p(n,["bidiGenerateContentSetup"],GF(t,a));const l=h(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&p(n,["fieldMask"],l),r}function FF(t,e){const n={},r=h(e,["config"]);return r!=null&&p(n,["config"],jF(t,r,n)),n}function VF(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function UF(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function OF(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function BF(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function zF(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],fg(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],LF(hn(w)));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let B=Vo(x);Array.isArray(B)&&(B=B.map(k=>qF(Fo(k)))),p(e,["setup","tools"],B)}const _=h(t,["sessionResumption"]);e!==void 0&&_!=null&&p(e,["setup","sessionResumption"],$F(_));const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const E=h(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],E);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const P=h(t,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],P);const L=h(t,["proactivity"]);if(e!==void 0&&L!=null&&p(e,["setup","proactivity"],L),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function GF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],et(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],zF(s,n)),n}function HF(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],VF(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],UF(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],DF(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function $F(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function qF(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],OF(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],BF(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WF(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(i=>`${n}.${i}`);e.push(...s)}else e.push(n)}return e.join(",")}function KF(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const i=WF(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];i&&l.push(i),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class JF extends Zr{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=FF(this.apiClient,e);i=_e("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=KF(a,e.config);return s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YF(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function QF(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&YF(r,e),e}function XF(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function ZF(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function eV(t){const e={},n=h(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const r=h(t,["config"]);return r!=null&&ZF(r,e),e}function tV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["documents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nV extends Zr{constructor(e){super(),this.apiClient=e,this.list=async n=>new Si(Jr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=XF(e);return i=_e("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=QF(e);s=_e("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=eV(e);return i=_e("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=tV(l),d=new LD;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rV extends Zr{constructor(e,n=new nV(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Si(Jr.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Wj(e);return i=_e("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Yj(e);return i=_e("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Jj(e);s=_e("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=nF(e);return i=_e("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=rF(l),d=new jD;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=sF(e);return i=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=iF(l),d=new FD;return Object.assign(d,c),d})}}async importFile(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Zj(e);return i=_e("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=Xj(l),d=new lg;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let S1=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return S1=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const sV=()=>S1();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function op(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ap=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zn extends Error{}class _n extends Zn{constructor(e,n,r,s){super(`${_n.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new Cd({message:r,cause:ap(n)});const i=n;return e===400?new C1(e,i,r,s):e===401?new k1(e,i,r,s):e===403?new A1(e,i,r,s):e===404?new N1(e,i,r,s):e===409?new R1(e,i,r,s):e===422?new P1(e,i,r,s):e===429?new M1(e,i,r,s):e>=500?new D1(e,i,r,s):new _n(e,i,r,s)}}class lp extends _n{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Cd extends _n{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class I1 extends Cd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class C1 extends _n{}class k1 extends _n{}class A1 extends _n{}class N1 extends _n{}class R1 extends _n{}class P1 extends _n{}class M1 extends _n{}class D1 extends _n{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iV=/^[a-z][a-z0-9+.-]*:/i,oV=t=>iV.test(t);let up=t=>(up=Array.isArray,up(t));const aV=up;let lV=aV;const Jx=lV;function uV(t){if(!t)return!0;for(const e in t)return!1;return!0}function cV(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const dV=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Zn(`${t} must be an integer`);if(e<0)throw new Zn(`${t} must be a positive integer`);return e},hV=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fV=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fi="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pV(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const mV=()=>{var t,e,n,r,s;const i=pV();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fi,"X-Stainless-OS":Qx(Deno.build.os),"X-Stainless-Arch":Yx(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fi,"X-Stainless-OS":Qx((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Yx((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const o=gV();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function gV(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const Yx=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Qx=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let vu;const yV=()=>vu??(vu=mV());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vV(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function L1(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function xV(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return L1({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function j1(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function wV(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),s=r.cancel();r.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _V=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F1=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ch(t,e,n){return F1(),new File(t,e??"unknown_file",n)}function bV(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const EV=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V1=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",TV=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&V1(t),SV=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function IV(t,e,n){if(F1(),t=await t,TV(t))return t instanceof File?t:Ch([await t.arrayBuffer()],t.name);if(SV(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ch(await cp(s),e,n)}const r=await cp(t);if(e||(e=bV(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Ch(r,e,n)}async function cp(t){var e,n,r,s,i;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(V1(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(EV(t))try{for(var a=!0,l=cr(t),c;c=await l.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const d=s;o.push(...await cp(d))}}catch(d){n={error:d}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const d=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${CV(t)}`)}return o}function CV(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U1{constructor(e){this._client=e}}U1._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O1(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Xx=Object.freeze(Object.create(null)),kV=(t=O1)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],o=n.reduce((d,m,g)=>{var y,w,x;/[?#]/.test(m)&&(s=!0);const _=r[g];let v=(s?encodeURIComponent:t)(""+_);return g!==r.length&&(_==null||typeof _=="object"&&_.toString===((x=Object.getPrototypeOf((w=Object.getPrototypeOf((y=_.hasOwnProperty)!==null&&y!==void 0?y:Xx))!==null&&w!==void 0?w:Xx))===null||x===void 0?void 0:x.toString))&&(v=_+"",i.push({start:d.length+m.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),d+m+(g===r.length?"":v)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((d,m)=>d.start-m.start),i.length>0){let d=0;const m=i.reduce((g,y)=>{const w=" ".repeat(y.start-d),x="^".repeat(y.length);return d=y.start+y.length,g+w+x},"");throw new Zn(`Path parameters result in path with invalid segments:
${i.map(g=>g.error).join(`
`)}
${o}
${m}`)}return o},xu=kV(O1);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B1 extends U1{create(e,n){var r;const{api_version:s=this._client.apiVersion}=e,i=Mc(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new Zn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new Zn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(xu`/${s}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(xu`/${s}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(xu`/${s}/interactions/${e}/cancel`,r)}get(e,n={},r){var s;const i=n??{},{api_version:o=this._client.apiVersion}=i,a=Mc(i,["api_version"]);return this._client.get(xu`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}B1._key=Object.freeze(["interactions"]);class z1 extends B1{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AV(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let wu;function mg(t){let e;return(wu??(e=new globalThis.TextEncoder,wu=e.encode.bind(e)))(t)}let _u;function Zx(t){let e;return(_u??(e=new globalThis.TextDecoder,_u=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?mg(e):e;this.buffer=AV([this.buffer,n]);const r=[];let s;for(;(s=NV(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(Zx(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,o=Zx(this.buffer.subarray(0,i));r.push(o),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}kd.NEWLINE_CHARS=new Set([`
`,"\r"]);kd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function NV(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function RV(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dc={off:0,error:200,warn:300,info:400,debug:500},ew=(t,e,n)=>{if(t){if(cV(Dc,t))return t;mn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Dc))}`)}};function va(){}function bu(t,e,n){return!e||Dc[t]>Dc[n]?va:e[t].bind(e)}const PV={error:va,warn:va,info:va,debug:va};let tw=new WeakMap;function mn(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return PV;const s=tw.get(n);if(s&&s[0]===r)return s[1];const i={error:bu("error",n,r),warn:bu("warn",n,r),info:bu("info",n,r),debug:bu("debug",n,r)};return tw.set(n,[r,i]),i}const Ys=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qi{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let s=!1;const i=r?mn(r):console;function o(){return ur(this,arguments,function*(){var l,c,d,m;if(s)throw new Zn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,w=cr(MV(e,n)),x;x=yield Fe(w.next()),l=x.done,!l;y=!0){m=x.value,y=!1;const _=m;if(!g)if(_.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield Fe(JSON.parse(_.data))}catch(v){throw i.error("Could not parse message into JSON:",_.data),i.error("From chunk:",_.raw),v}}}catch(_){c={error:_}}finally{try{!y&&!l&&(d=w.return)&&(yield Fe(d.call(w)))}finally{if(c)throw c.error}}g=!0}catch(_){if(op(_))return yield Fe(void 0);throw _}finally{g||n.abort()}})}return new Qi(o,n,r)}static fromReadableStream(e,n,r){let s=!1;function i(){return ur(this,arguments,function*(){var l,c,d,m;const g=new kd,y=j1(e);try{for(var w=!0,x=cr(y),_;_=yield Fe(x.next()),l=_.done,!l;w=!0){m=_.value,w=!1;const v=m;for(const E of g.decode(v))yield yield Fe(E)}}catch(v){c={error:v}}finally{try{!w&&!l&&(d=x.return)&&(yield Fe(d.call(x)))}finally{if(c)throw c.error}}for(const v of g.flush())yield yield Fe(v)})}function o(){return ur(this,arguments,function*(){var l,c,d,m;if(s)throw new Zn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,w=cr(i()),x;x=yield Fe(w.next()),l=x.done,!l;y=!0){m=x.value,y=!1;const _=m;g||_&&(yield yield Fe(JSON.parse(_)))}}catch(_){c={error:_}}finally{try{!y&&!l&&(d=w.return)&&(yield Fe(d.call(w)))}finally{if(c)throw c.error}}g=!0}catch(_){if(op(_))return yield Fe(void 0);throw _}finally{g||n.abort()}})}return new Qi(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=r.next();e.push(o),n.push(o)}return i.shift()}});return[new Qi(()=>s(e),this.controller,this.client),new Qi(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return L1({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const o=mg(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function MV(t,e){return ur(this,arguments,function*(){var r,s,i,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Zn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Zn("Attempted to iterate over a response with no body");const a=new LV,l=new kd,c=j1(t.body);try{for(var d=!0,m=cr(DV(c)),g;g=yield Fe(m.next()),r=g.done,!r;d=!0){o=g.value,d=!1;const y=o;for(const w of l.decode(y)){const x=a.decode(w);x&&(yield yield Fe(x))}}}catch(y){s={error:y}}finally{try{!d&&!r&&(i=m.return)&&(yield Fe(i.call(m)))}finally{if(s)throw s.error}}for(const y of l.flush()){const w=a.decode(y);w&&(yield yield Fe(w))}})}function DV(t){return ur(this,arguments,function*(){var n,r,s,i;let o=new Uint8Array;try{for(var a=!0,l=cr(t),c;c=yield Fe(l.next()),n=c.done,!n;a=!0){i=c.value,a=!1;const d=i;if(d==null)continue;const m=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?mg(d):d;let g=new Uint8Array(o.length+m.length);g.set(o),g.set(m,o.length),o=g;let y;for(;(y=RV(o))!==-1;)yield yield Fe(o.slice(0,y)),o=o.slice(y)}}catch(d){r={error:d}}finally{try{!a&&!n&&(s=l.return)&&(yield Fe(s.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield Fe(o))})}class LV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=jV(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function jV(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function FV(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,o=await(async()=>{var a;if(e.options.stream)return mn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Qi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return mn(t).debug(`[${r}] response parsed`,Ys({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gg extends Promise{constructor(e,n,r=FV){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new gg(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G1=Symbol("brand.privateNullableHeaders");function*VV(t){if(!t)return;if(G1 in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Jx(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=Jx(r[1])?r[1]:[r[1]];let o=!1;for(const a of i)a!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,a])}}const ua=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,o]of VV(r)){const a=i.toLowerCase();s.has(a)||(e.delete(i),s.add(a)),o===null?(e.delete(i),n.add(a)):(e.append(i,o),n.delete(a))}}return{[G1]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kh=t=>{var e,n,r,s,i,o;if(typeof globalThis.process<"u")return(r=(n=(e=cD)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(i=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||i===void 0?void 0:i.call(s,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var H1;class Ad{constructor(e){var n,r,s,i,o,a,l,{baseURL:c=kh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=kh("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,g=Mc(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:d,apiVersion:m},g),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(r=y.timeout)!==null&&r!==void 0?r:Ad.DEFAULT_TIMEOUT,this.logger=(s=y.logger)!==null&&s!==void 0?s:console;const w="warn";this.logLevel=w,this.logLevel=(o=(i=ew(y.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:ew(kh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:w,this.fetchOptions=y.fetchOptions,this.maxRetries=(a=y.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=y.fetch)!==null&&l!==void 0?l:vV(),this.encoder=_V,this._options=y,this.apiKey=d,this.apiVersion=m,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=ua([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return ua([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ua([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Zn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Fi}`}defaultIdempotencyKey(){return`stainless-node-retry-${sV()}`}makeStatusError(e,n,r,s){return _n.generate(e,n,r,s)}buildURL(e,n,r){const s=!this.baseURLOverridden()&&r||this.baseURL,i=oV(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return uV(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new gg(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var s,i,o;const a=await e,l=(s=a.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:d,timeout:m}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:d,options:a});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=r===void 0?"":`, retryOf: ${r}`,w=Date.now();if(mn(this).debug(`[${g}] sending request`,Ys({retryOfRequestLogID:r,method:a.method,url:d,options:a,headers:c.headers})),!((i=a.signal)===null||i===void 0)&&i.aborted)throw new lp;const x=new AbortController,_=await this.fetchWithTimeout(d,c,m,x).catch(ap),v=Date.now();if(_ instanceof globalThis.Error){const T=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new lp;const P=op(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(n)return mn(this).info(`[${g}] connection ${P?"timed out":"failed"} - ${T}`),mn(this).debug(`[${g}] connection ${P?"timed out":"failed"} (${T})`,Ys({retryOfRequestLogID:r,url:d,durationMs:v-w,message:_.message})),this.retryRequest(a,n,r??g);throw mn(this).info(`[${g}] connection ${P?"timed out":"failed"} - error; no more retries left`),mn(this).debug(`[${g}] connection ${P?"timed out":"failed"} (error; no more retries left)`,Ys({retryOfRequestLogID:r,url:d,durationMs:v-w,message:_.message})),P?new I1:new Cd({cause:_})}const E=`[${g}${y}] ${c.method} ${d} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${v-w}ms`;if(!_.ok){const T=await this.shouldRetry(_);if(n&&T){const N=`retrying, ${n} attempts remaining`;return await wV(_.body),mn(this).info(`${E} - ${N}`),mn(this).debug(`[${g}] response error (${N})`,Ys({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:v-w})),this.retryRequest(a,n,r??g,_.headers)}const P=T?"error; no more retries left":"error; not retryable";mn(this).info(`${E} - ${P}`);const L=await _.text().catch(N=>ap(N).message),B=hV(L),k=B?void 0:L;throw mn(this).debug(`[${g}] response error (${P})`,Ys({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,message:k,durationMs:Date.now()-w})),this.makeStatusError(_.status,B,k,_.headers)}return mn(this).info(E),mn(this).debug(`[${g}] response start`,Ys({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:v-w})),{response:_,options:a,controller:x,requestLogID:g,retryOfRequestLogID:r,startTime:w}}async fetchWithTimeout(e,n,r,s){const i=n||{},{signal:o,method:a}=i,l=Mc(i,["signal","method"]);o&&o.addEventListener("abort",()=>s.abort());const c=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){var i;let o;const a=s==null?void 0:s.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(o=c)}const l=s==null?void 0:s.get("retry-after");if(l&&!o){const c=parseFloat(l);Number.isNaN(c)?o=Date.parse(l)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){const c=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,c)}return await fV(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,s,i;const o=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:d}=o,m=this.buildURL(l,c,d);"timeout"in o&&dV("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:g,body:y}=this.buildBody({options:o}),w=await this.buildHeaders({options:e,method:a,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:w},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(i=o.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=ua([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),yV()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=ua([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:xV(e)}:this.encoder({body:e,headers:r})}}Ad.DEFAULT_TIMEOUT=6e4;class Gt extends Ad{constructor(){super(...arguments),this.interactions=new z1(this)}}H1=Gt;Gt.GeminiNextGenAPIClient=H1;Gt.GeminiNextGenAPIClientError=Zn;Gt.APIError=_n;Gt.APIConnectionError=Cd;Gt.APIConnectionTimeoutError=I1;Gt.APIUserAbortError=lp;Gt.NotFoundError=N1;Gt.ConflictError=R1;Gt.RateLimitError=M1;Gt.BadRequestError=C1;Gt.AuthenticationError=k1;Gt.InternalServerError=D1;Gt.PermissionDeniedError=A1;Gt.UnprocessableEntityError=P1;Gt.toFile=IV;Gt.Interactions=z1;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UV(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function OV(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function BV(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function zV(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function GV(t,e,n){const r={};if(h(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=h(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&p(e,["displayName"],s),h(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=h(t,["epochCount"]);e!==void 0&&i!=null&&p(e,["tuningTask","hyperparameters","epochCount"],i);const o=h(t,["learningRateMultiplier"]);if(o!=null&&p(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),h(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=h(t,["batchSize"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","batchSize"],a);const l=h(t,["learningRate"]);if(e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","learningRate"],l),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function HV(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const y=h(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec"],nw(y))}else if(s==="PREFERENCE_TUNING"){const y=h(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec"],nw(y))}const i=h(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&p(e,["tunedModelDisplayName"],i);const o=h(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);let a=h(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const y=h(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(a==="PREFERENCE_TUNING"){const y=h(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let l=h(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const y=h(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(l==="PREFERENCE_TUNING"){const y=h(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let c=h(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=h(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(c==="PREFERENCE_TUNING"){const y=h(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let d=h(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=h(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(d==="PREFERENCE_TUNING"){const y=h(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(h(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=h(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=h(t,["beta"]);return e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),r}function $V(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=h(t,["trainingDataset"]);i!=null&&n6(i);const o=h(t,["config"]);return o!=null&&GV(o,n),n}function qV(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=h(t,["trainingDataset"]);i!=null&&r6(i,n,e);const o=h(t,["config"]);return o!=null&&HV(o,n,e),n}function WV(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function KV(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function JV(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=h(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function YV(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=h(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function QV(t,e){const n={},r=h(t,["config"]);return r!=null&&JV(r,n),n}function XV(t,e){const n={},r=h(t,["config"]);return r!=null&&YV(r,n),n}function ZV(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=h(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>$1(a))),p(n,["tuningJobs"],o)}return n}function e6(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=h(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>dp(a))),p(n,["tuningJobs"],o)}return n}function t6(t,e){const n={},r=h(t,["name"]);r!=null&&p(n,["model"],r);const s=h(t,["name"]);return s!=null&&p(n,["endpoint"],s),n}function n6(t,e){const n={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=h(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(n,["examples","examples"],s)}return n}function r6(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=h(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=h(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let i=h(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=h(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=h(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(h(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function $1(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["state"]);i!=null&&p(n,["state"],a1(i));const o=h(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=h(t,["tuningTask","startTime"]);a!=null&&p(n,["startTime"],a);const l=h(t,["tuningTask","completeTime"]);l!=null&&p(n,["endTime"],l);const c=h(t,["updateTime"]);c!=null&&p(n,["updateTime"],c);const d=h(t,["description"]);d!=null&&p(n,["description"],d);const m=h(t,["baseModel"]);m!=null&&p(n,["baseModel"],m);const g=h(t,["_self"]);return g!=null&&p(n,["tunedModel"],t6(g)),n}function dp(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["state"]);i!=null&&p(n,["state"],a1(i));const o=h(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=h(t,["startTime"]);a!=null&&p(n,["startTime"],a);const l=h(t,["endTime"]);l!=null&&p(n,["endTime"],l);const c=h(t,["updateTime"]);c!=null&&p(n,["updateTime"],c);const d=h(t,["error"]);d!=null&&p(n,["error"],d);const m=h(t,["description"]);m!=null&&p(n,["description"],m);const g=h(t,["baseModel"]);g!=null&&p(n,["baseModel"],g);const y=h(t,["tunedModel"]);y!=null&&p(n,["tunedModel"],y);const w=h(t,["preTunedModel"]);w!=null&&p(n,["preTunedModel"],w);const x=h(t,["supervisedTuningSpec"]);x!=null&&p(n,["supervisedTuningSpec"],x);const _=h(t,["preferenceOptimizationSpec"]);_!=null&&p(n,["preferenceOptimizationSpec"],_);const v=h(t,["tuningDataStats"]);v!=null&&p(n,["tuningDataStats"],v);const E=h(t,["encryptionSpec"]);E!=null&&p(n,["encryptionSpec"],E);const T=h(t,["partnerModelTuningSpec"]);T!=null&&p(n,["partnerModelTuningSpec"],T);const P=h(t,["customBaseModel"]);P!=null&&p(n,["customBaseModel"],P);const L=h(t,["experiment"]);L!=null&&p(n,["experiment"],L);const B=h(t,["labels"]);B!=null&&p(n,["labels"],B);const k=h(t,["outputUri"]);k!=null&&p(n,["outputUri"],k);const A=h(t,["pipelineJob"]);A!=null&&p(n,["pipelineJob"],A);const N=h(t,["serviceAccount"]);N!=null&&p(n,["serviceAccount"],N);const M=h(t,["tunedModelDisplayName"]);M!=null&&p(n,["tunedModelDisplayName"],M);const V=h(t,["veoTuningSpec"]);return V!=null&&p(n,["veoTuningSpec"],V),n}function s6(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(t,["done"]);o!=null&&p(n,["done"],o);const a=h(t,["error"]);return a!=null&&p(n,["error"],a),n}function nw(t,e){const n={},r=h(t,["gcsUri"]);r!=null&&p(n,["validationDatasetUri"],r);const s=h(t,["vertexDatasetResource"]);return s!=null&&p(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i6 extends Zr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Si(Jr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:s});return i.baseModel=void 0,await this.tuneInternal(i)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),i=await this.tuneMldevInternal(s);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:Zf.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=KV(e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>dp(d))}else{const c=WV(e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>$1(d))}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=XV(e);return a=_e("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=e6(d),g=new kx;return Object.assign(g,m),g})}else{const c=QV(e);return a=_e("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=ZV(d),g=new kx;return Object.assign(g,m),g})}}async cancel(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=OV(e);return a=_e("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=zV(d),g=new Ax;return Object.assign(g,m),g})}else{const c=UV(e);return a=_e("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=BV(d),g=new Ax;return Object.assign(g,m),g})}}async tuneInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=qV(e,e);return i=_e("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>dp(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$V(e);return i=_e("tunedModels",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>s6(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o6{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const a6=1024*1024*8,l6=3,u6=1e3,c6=2,Lc="x-goog-upload-status";async function d6(t,e,n){var r;const s=await q1(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Lc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function h6(t,e,n){var r;const s=await q1(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Lc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=t1(i),a=new ug;return Object.assign(a,o),a}async function q1(t,e,n){var r,s;let i=0,o=0,a=new ep(new Response),l="upload";for(i=t.size;o<i;){const c=Math.min(a6,i-o),d=t.slice(o,o+c);o+c>=i&&(l+=", finalize");let m=0,g=u6;for(;m<l6&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[Lc]));)m++,await p6(g),g=g*c6;if(o+=c,((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Lc])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function f6(t){return{size:t.size,type:t.type}}function p6(t){return new Promise(e=>setTimeout(e,t))}class m6{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await d6(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await h6(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await f6(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g6{create(e,n,r){return new y6(e,n,r)}}class y6{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rw="x-goog-api-key";class v6{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(rw)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(rw,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x6="gl-node/";class yg{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Gt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=pD(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new v6(this.apiKey);this.apiClient=new fF({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:x6+"web",uploader:new m6,downloader:new o6}),this.models=new PF(this.apiClient),this.live=new IF(this.apiClient,s,new g6),this.batches=new G5(this.apiClient),this.chats=new T3(this.models,this.apiClient),this.caches=new _3(this.apiClient),this.files=new D3(this.apiClient),this.operations=new MF(this.apiClient),this.authTokens=new JF(this.apiClient),this.tunings=new i6(this.apiClient),this.fileSearchStores=new rV(this.apiClient)}}const Ah=async(t,e="id")=>{var n,r,s;try{const i=`https://${e}.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(t)}&format=json&origin=*&srlimit=1`,a=await(await fetch(i)).json();if(!((r=(n=a.query)==null?void 0:n.search)!=null&&r.length))return e==="id"?"Tidak ditemukan informasi di Wikipedia.":"No information found on Wikipedia.";const l=a.query.search[0].title,c=`https://${e}.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&explaintext&titles=${encodeURIComponent(l)}&format=json&origin=*`,g=(s=(await(await fetch(c)).json()).query)==null?void 0:s.pages;if(!g)return"Wikipedia Error.";const y=Object.keys(g)[0],w=g[y].extract;return w?w.substring(0,1e3)+"...":e==="id"?"Halaman ditemukan tapi kosong.":"Page found but empty."}catch(i){return console.error("Wikipedia API Error",i),e==="id"?"Gagal menghubungi Wikipedia.":"Failed to contact Wikipedia."}},w6=async(t,e,n)=>{try{if(!e||!n)throw new Error("Missing Google Search API credentials");const r=`https://www.googleapis.com/customsearch/v1?key=${e}&cx=${n}&q=${encodeURIComponent(t)}&num=3`,s=await fetch(r),i=await s.json();if(!s.ok)return console.error("Google Search API Error",i),"";if(!i.items||i.items.length===0)return"No results found on Google.";let o=`Google Search Results:

`;return i.items.forEach((a,l)=>{o+=`${l+1}. ${a.title}
   Snippet: ${a.snippet}

`}),o}catch(r){return console.error("Google Search Service Error",r),""}},_6=async t=>{try{const e=`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(t)}&count=1&language=en&format=json`,r=await(await fetch(e)).json();return r.results&&r.results.length>0?r.results[0]:null}catch(e){return console.error("Geocoding Error:",e),null}},b6=async t=>{try{const e=await _6(t);if(!e)return`Maaf, tidak dapat menemukan lokasi kota "${t}". Pastikan ejaan benar.`;const n=`https://api.open-meteo.com/v1/forecast?latitude=${e.latitude}&longitude=${e.longitude}&current=temperature_2m,relative_humidity_2m,apparent_temperature,precipitation,rain,showers,snowfall,weather_code,cloud_cover,wind_speed_10m&timezone=auto`,s=await(await fetch(n)).json();if(!s.current)return"Data cuaca tidak tersedia saat ini.";const i=s.current,o=s.current_units;let a="Cerah/Berawan";const l=i.weather_code;return l===0?a="Cerah (Clear Sky)":l<=3?a="Berawan (Cloudy)":l<=48?a="Berkabut (Foggy)":l<=55?a="Gerimis (Drizzle)":l<=65?a="Hujan (Rain)":l<=77?a="Salju (Snow)":l>=95&&(a="Badai Petir (Thunderstorm)"),`
Laporan Cuaca untuk ${e.name}, ${e.country}:
- Kondisi: ${a}
- Suhu: ${i.temperature_2m}${o.temperature_2m} (Terasa seperti ${i.apparent_temperature}${o.temperature_2m})
- Kelembapan: ${i.relative_humidity_2m}${o.relative_humidity_2m}
- Angin: ${i.wind_speed_10m}${o.wind_speed_10m}
- Awan: ${i.cloud_cover}${o.cloud_cover}
        `.trim()}catch(e){return console.error("Weather API Error:",e),"Gagal mengambil data cuaca dari Open-Meteo."}},E6=async t=>{try{const e=`https://restcountries.com/v3.1/name/${encodeURIComponent(t)}`,n=await fetch(e);if(!n.ok)return`Data negara "${t}" tidak ditemukan.`;const s=(await n.json())[0],i=s.currencies?Object.values(s.currencies).map(a=>`${a.name} (${a.symbol})`).join(", "):"-",o=s.languages?Object.values(s.languages).join(", "):"-";return`
Fakta Negara ${s.name.common} (${s.name.official}):
- Ibukota: ${s.capital?s.capital[0]:"-"}
- Wilayah: ${s.region}, ${s.subregion}
- Populasi: ${s.population.toLocaleString()} jiwa
- Mata Uang: ${i}
- Bahasa: ${o}
- Zona Waktu: ${s.timezones?s.timezones[0]:"-"}
- Bendera: ${s.flag}
- Sisi Mengemudi: ${s.car?s.car.side:"-"}
        `.trim()}catch(e){return console.error("Country API Error:",e),"Gagal mengambil data negara."}},T6=(t,e)=>{const n=t/e;return[{label:"1:1",value:1},{label:"3:4",value:.75},{label:"4:3",value:1.33},{label:"9:16",value:.5625},{label:"16:9",value:1.7778}].reduce((i,o)=>Math.abs(o.value-n)<Math.abs(i.value-n)?o:i).label},S6=(t,e,n,r)=>{const s=T6(e,n);switch(t){case yn.BACKGROUND_REMOVER:return{model:"gemini-2.5-flash-image",prompt:"Edit this image. Your task is to keep the foreground subject EXACTLY as it is. Do not alter the subject's face, body, clothing, lighting, or resolution. Do not 'redraw' or 'regenerate' the subject. Simply COPY the main subject and place it against a solid bright Green background (Hex Code #00FF00). If the subject is cropped in the original, keep it cropped. Do not add new details.",config:{imageConfig:{aspectRatio:s}}};case yn.HD_UPSCALE:return{model:"gemini-3-pro-image-preview",prompt:"Upscale this image to high definition (4K quality). Sharpen all details and improve lighting. IMPORTANT: Keep the image composition, colors, and BACKGROUND exactly the same as the original. Do not remove the background. Do not change the subject's identity.",config:{imageConfig:{aspectRatio:s,imageSize:"4K"}}};case yn.CREATIVE_REMIX:return{model:"gemini-2.5-flash-image",prompt:r||"Make a creative cyberpunk variation of this image.",config:{imageConfig:{aspectRatio:s}}};case yn.COLORIZE:return{model:"gemini-2.5-flash-image",prompt:"Colorize this black and white image realistically. Keep the subject and background details exactly the same, just add natural colors. Do not change the content.",config:{imageConfig:{aspectRatio:s}}};case yn.SKETCH_TO_REAL:return{model:"gemini-2.5-flash-image",prompt:"Turn this sketch or drawing into a photorealistic image. Keep the composition and subject exactly as drawn, but make it look like a high-quality photograph.",config:{imageConfig:{aspectRatio:s}}};default:throw new Error("Unknown tool type")}},I6=async t=>{const{tool:e,image:n,prompt:r,apiKeys:s}=t,i=S6(e,n.width,n.height,r);let o=[...s||[]];o.push("PLACEHOLDER_API_KEY"),o=Array.from(new Set(o.filter(c=>!!c)));let a=!1,l=null;for(let c=0;c<o.length;c++){const d=o[c];try{const g=await new yg({apiKey:d}).models.generateContent({model:i.model,contents:{parts:[{inlineData:{mimeType:n.mimeType,data:n.data}},{text:i.prompt}]},config:i.config});if(g.candidates&&g.candidates[0].content.parts){for(const y of g.candidates[0].content.parts)if(y.inlineData&&y.inlineData.data)return y.inlineData.data}throw new Error("No image data returned from Gemini.")}catch(m){console.warn(`Key ending in ...${d.slice(-4)} failed.`),l=m;const g=(m.message||"").toLowerCase(),y=JSON.stringify(m).toLowerCase(),w=g.includes("429")||g.includes("quota")||g.includes("exhausted")||g.includes("503"),x=g.includes("fetch")||g.includes("xhr")||g.includes("network")||g.includes("rpc")||g.includes("500")||y.includes("xhr")||y.includes("rpc");if(c===o.length-1&&(w||x)&&!a){console.log("Personal & System keys exhausted. Fetching Community Keys...");try{const _=await KT();if(_.length>0){const v=_.filter(E=>!o.includes(E));o.push(...v),a=!0;continue}}catch{console.error("Failed to fetch community keys")}}if(!w&&!x)break}}throw l||new Error("All API keys (Personal, System, and Community) failed.")},C6={name:"searchWikipedia",description:"Search Wikipedia for facts, history, people, places, definitions, or concepts. PRIMARY SOURCE after Database.",parameters:{type:dn.OBJECT,properties:{query:{type:dn.STRING,description:"The search keywords."}},required:["query"]}},k6={name:"searchWeather",description:"Get REAL-TIME weather data for a specific city. Use this when asked about 'weather', 'temperature', 'rain', or 'climate' in a specific location.",parameters:{type:dn.OBJECT,properties:{city:{type:dn.STRING,description:"The name of the city to get weather for (e.g., Jakarta, Bandung, New York)."}},required:["city"]}},A6={name:"searchCountryFact",description:"Get detailed facts about a country (Capital, Population, Currency, Flag, Region). Use when asked about specific country details.",parameters:{type:dn.OBJECT,properties:{country_name:{type:dn.STRING,description:"The name of the country (e.g., Indonesia, Japan, Brazil)."}},required:["country_name"]}},N6={name:"searchGoogle",description:"Search Google using Custom Search API. LAST RESORT source. Use ONLY if Wiki/Weather/Country is missing or for cross-website info/references/news.",parameters:{type:dn.OBJECT,properties:{query:{type:dn.STRING,description:"The search keywords."}},required:["query"]}},Mr=async(t,e)=>{if(!e)return t;const n=t.split(/(\s+)/);let r="";for(const s of n)r+=s,e(r),await new Promise(i=>setTimeout(i,Math.random()*20+10));return t},R6=async(t,e,n,r)=>{var s,i,o;try{console.log("Attempting OpenRouter Fallback...");const a=[{role:"system",content:n},...e.map(m=>{const g=m.parts.find(y=>y.text);return{role:m.role==="model"?"assistant":"user",content:g?g.text:""}}).filter(m=>m.content)],l=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:"google/gemini-2.0-flash-001",messages:a,stream:!1})});if(!l.ok){const m=await l.text();throw new Error(`OpenRouter Error: ${l.status} - ${m}`)}const d=((o=(i=(s=(await l.json()).choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:o.content)||"";return r&&d&&await Mr(d,r),d}catch(a){throw console.error("OpenRouter Failed:",a),a}},P6=async(t,e,n,r)=>{var s,i,o;try{console.log("Attempting Groq Fallback...");const a=[{role:"system",content:n},...e.map(m=>{const g=m.parts.find(y=>y.text);return{role:m.role==="model"?"assistant":"user",content:g?g.text:""}}).filter(m=>m.content)],l=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:"llama3-70b-8192",messages:a,stream:!1})});if(!l.ok){const m=await l.text();throw new Error(`Groq Error: ${l.status} - ${m}`)}const d=((o=(i=(s=(await l.json()).choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:o.content)||"";return r&&d&&await Mr(d,r),d}catch(a){throw console.error("Groq Failed:",a),a}},M6=async(t,e,n,r)=>{try{console.log("Attempting Hugging Face Fallback...");let s=`<start_of_turn>system
${n}<end_of_turn>
`;e.forEach(l=>{var d;const c=((d=l.parts.find(m=>m.text))==null?void 0:d.text)||"";c&&(s+=`<start_of_turn>${l.role==="model"?"model":"user"}
${c}<end_of_turn>
`)}),s+=`<start_of_turn>model
`;const i=await fetch("https://api-inference.huggingface.co/models/google/gemma-1.1-7b-it",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:s,parameters:{max_new_tokens:512,return_full_text:!1,temperature:.7}})});if(!i.ok){const l=await i.text();throw new Error(`Hugging Face Error: ${i.status} - ${l}`)}const o=await i.json();let a="";return Array.isArray(o)&&o.length>0?a=o[0].generated_text:o.generated_text&&(a=o.generated_text),r&&a&&await Mr(a,r),a}catch(s){throw console.error("Hugging Face Failed:",s),s}},D6=async(t,e,n=[],r="id",s=[],i,o=!1,a=!1,l,c,d,m,g)=>{var N,M,V,R,D,I,H,fe,re;if(o){if(t.trim().length>0){const oe=await xv(t);if(oe)return{text:await Mr(oe,i),source:"knowledge_base"}}if(a){const oe=await Ah(t,r);return{text:await Mr(oe,i),source:"wikipedia"}}return{text:await Mr(r==="id"?"Maaf, informasi ini belum ada di database saya. Coba aktifkan 'Wikipedia' atau 'Google Search' di pengaturan.":"Sorry, this info is not in my database. Try enabling 'Wikipedia' or 'Google Search' in settings.",i),source:"knowledge_base"}}let y=[...e||[]];y.push("PLACEHOLDER_API_KEY"),y=Array.from(new Set(y.filter(Z=>!!Z)));let w=!1;const x=n.slice(-10).map(Z=>({role:Z.role,parts:[{text:Z.text}]})),_=[];t?_.push({text:t}):s.length>0&&_.push({text:"Describe these images or answer based on them."}),s&&s.length>0&&s.forEach(Z=>{_.push({inlineData:{mimeType:Z.mimeType,data:Z.data}})});let v=[...x,{role:"user",parts:_}];const E=!!(l!=null&&l.apiKey&&l.cx),T=[{functionDeclarations:[C6,k6,A6]}];E&&T[0].functionDeclarations.push(N6);const B=r==="id"?`
        Nama lo: Fanra.
        Pembuat: Irfan Rizki Aditri (biasa dipanggil Fanra Dev).
        Sifat: Cool, santai, & solutif. Gaya ngomong: lo-gue, normal, nggak kaku.

        DETAIL TENTANG IRFAN (PENCIPTA LO):
        - Status: Mahasiswa di Institut Teknologi Sumatera (ITERA).
        - Prodi: Fisika (BUKAN Informatika).
        - Role: Dia BUKAN developer profesional/ahli. Dia cuma cowok biasa yang hobi ngoding dan iseng bikin project ini.
        - Fisik: Cowok, tinggi sekitar 170-an cm.
        - Keluarga: Anak bungsu (terakhir) dari 3 bersaudara.
        
        ATURAN PRIVASI (PENTING):
        - JANGAN PERNAH JAWAB pertanyaan tentang: Agama, Suku, Alamat Lengkap, atau Status Hubungan (Pacaran/Single).
        - Jika ditanya hal di atas, jawab "Itu privasi, gue gak tau." atau alihkan pembicaraan.
        
        TONE & GAYA BICARA:
        - JANGAN LEBAY/SOMBONG.
        - Jangan bilang Irfan "ganteng", "jago", "expert", atau "jenius".
        - Bilang aja dia mahasiswa yang hobi ngulik teknologi di waktu luang.
        - Jawab pertanyaan dengan padat & jelas.
        
        FORMAT TEKS:
        - JANGAN GUNAKAN MARKDOWN (tanda bintang * atau **). Tulis teks biasa saja.
    `:`
        Your Name: Fanra.
        Creator: Irfan Rizki Aditri (Fanra Dev).
        
        DETAILS ABOUT CREATOR:
        - Status: Student at Institut Teknologi Sumatera (ITERA).
        - Major: Physics (NOT Informatics).
        - Role: NOT a professional developer. Just a guy with a coding hobby who built this for fun.
        - Facts: Male, ~170cm tall, youngest of 3 siblings.
        
        STRICT PRIVACY RULES:
        - DO NOT disclose: Religion, Ethnicity, Address, or Relationship Status. State that it is private.
        
        TONE:
        - Humble and casual.
        - DO NOT praise Irfan excessively (no "handsome", "genius", "expert"). Just say he is a hobbyist.
        
        FORMAT:
        - NO MARKDOWN (no asterisks). Plain text only.
    `;let k=null,A="gemini";for(let Z=0;Z<y.length;Z++){const X=y[Z];if(c!=null&&c.aborted)throw new Error("Request cancelled by user");try{const oe=new yg({apiKey:X}),W="gemini-3-flash-preview",$=await oe.models.generateContent({model:W,contents:v,config:{systemInstruction:B,tools:T}});if(c!=null&&c.aborted)throw new Error("Request cancelled by user");const de=(D=(R=(V=(M=(N=$.candidates)==null?void 0:N[0])==null?void 0:M.content)==null?void 0:V.parts)==null?void 0:R.filter(ge=>ge.functionCall))==null?void 0:D.map(ge=>ge.functionCall);if(de&&de.length>0){const ge=de[0];if($.candidates&&$.candidates[0].content&&v.push($.candidates[0].content),ge&&ge.name==="searchWikipedia"){const Ce=ge.args.query,Se=await Ah(Ce,r);A="wikipedia",v.push({role:"user",parts:[{functionResponse:{name:"searchWikipedia",response:{result:Se}}}]})}else if(ge&&ge.name==="searchWeather"){const Ce=ge.args.city,Se=await b6(Ce);A="weather",v.push({role:"user",parts:[{functionResponse:{name:"searchWeather",response:{result:Se}}}]})}else if(ge&&ge.name==="searchCountryFact"){const Ce=ge.args.country_name,Se=await E6(Ce);A="country_fact",v.push({role:"user",parts:[{functionResponse:{name:"searchCountryFact",response:{result:Se}}}]})}else if(ge&&ge.name==="searchGoogle"&&E){const Ce=ge.args.query,Se=await w6(Ce,l.apiKey,l.cx);A="google_search",v.push({role:"user",parts:[{functionResponse:{name:"searchGoogle",response:{result:Se}}}]})}}else{const ge=(re=(fe=(H=(I=$.candidates)==null?void 0:I[0])==null?void 0:H.content)==null?void 0:fe.parts)==null?void 0:re.find(Se=>Se.text),Ce=ge?ge.text:"";if(Ce)return await Mr(Ce,i),{text:Ce,source:"gemini"}}if(c!=null&&c.aborted)throw new Error("Request cancelled by user");const te=await oe.models.generateContentStream({model:W,contents:v,config:{systemInstruction:B}});let Y="";for await(const ge of te){if(c!=null&&c.aborted)break;const Ce=ge.text;Ce&&(Y+=Ce,i&&i(Y))}return{text:Y,source:A}}catch(oe){if(oe.message==="Request cancelled by user")throw oe;console.warn(`Key ending in ...${X.slice(-4)} failed.`),k=oe;const W=(oe.message||"").toLowerCase(),$=JSON.stringify(oe).toLowerCase(),de=W.includes("429")||W.includes("quota")||W.includes("exhausted"),te=W.includes("fetch")||W.includes("xhr")||W.includes("network")||W.includes("rpc")||W.includes("500")||$.includes("xhr")||$.includes("rpc");if(Z===y.length-1){if(d)try{return{text:await R6(d,v,B,i),source:"openrouter"}}catch{console.error("OpenRouter Fallback Failed, trying Groq...")}if(g)try{return{text:await P6(g,v,B,i),source:"groq"}}catch{console.error("Groq Fallback Failed, trying Hugging Face...")}if(m)try{return{text:await M6(m,v,B,i),source:"huggingface"}}catch(Y){console.error("Hugging Face Fallback Failed",Y)}if((de||te)&&!w)try{const Y=await KT();if(Y.length>0){const ge=Y.filter(Ce=>!y.includes(Ce));y.push(...ge),w=!0;continue}}catch{}}if(!de&&!te)break}}if(console.log("All APIs failed. Attempting Knowledge Base Fallback..."),t.trim().length>0){const Z=await xv(t);if(Z)return{text:await Mr(Z,i),source:"knowledge_base"}}if(a){const Z=await Ah(t,r);return{text:await Mr(Z,i),source:"wikipedia"}}throw k||new Error("All chat keys (Gemini, OpenRouter, Groq, HuggingFace) failed.")},L6=t=>new Promise((e,n)=>{const r=new Image;r.src=`data:image/png;base64,${t}`,r.crossOrigin="Anonymous",r.onload=()=>{const s=document.createElement("canvas");s.width=r.width,s.height=r.height;const i=s.getContext("2d");if(!i){n(new Error("Could not get canvas context"));return}i.drawImage(r,0,0);const o=i.getImageData(0,0,s.width,s.height),a=o.data;for(let l=0;l<a.length;l+=4){const c=a[l],d=a[l+1],m=a[l+2],g=Math.max(c,m);let y=d-g;const w=10,x=60;if(y>w){const _=1-Math.max(0,Math.min(1,(y-w)/(x-w)));a[l+3]=Math.floor(255*_),d>g&&(a[l+1]=g)}}i.putImageData(o,0,0),e(s.toDataURL("image/png",1).split(",")[1])},r.onerror=s=>n(new Error("Failed to load image for processing"))}),j6=(t,e="image/png")=>{const n=t.replace(/[\n\r]/g,"").trim(),r=atob(n),s=new Array(r.length);for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);const i=new Uint8Array(s);return new Blob([i],{type:e})},F6=async(t,e)=>{const n=new FormData,r=j6(t);n.append("image_file",r,"image.png"),n.append("size","auto");try{const s=await fetch("https://api.remove.bg/v1.0/removebg",{method:"POST",headers:{"X-Api-Key":e},body:n});if(!s.ok){let o="Failed to remove background via Remove.bg";try{const a=await s.json();a.errors&&a.errors[0]&&(o=a.errors[0].title)}catch{o=`Remove.bg Error: ${s.statusText}`}throw new Error(o)}const i=await s.blob();return new Promise((o,a)=>{const l=new FileReader;l.onloadend=()=>{const c=l.result;o(c.split(",")[1])},l.onerror=a,l.readAsDataURL(i)})}catch(s){throw console.error("Remove.bg Service Error:",s),s}};const V6=({onImageSelect:t,language:e})=>{const n=F.useRef(null),[r,s]=F.useState(!1),i=jo[e],o=m=>{if(!m.type.startsWith("image/")){Ye(i.invalidImage);return}const g=new FileReader;g.onloadend=()=>{const y=g.result,w=new Image;w.onload=()=>{const x=document.createElement("canvas");x.width=w.width,x.height=w.height;const _=x.getContext("2d");if(!_)return;_.drawImage(w,0,0);const v="image/png",T=x.toDataURL(v).split(",")[1];t(T,v,w.width,w.height)},w.src=y},g.readAsDataURL(m)},a=m=>{var y;const g=(y=m.target.files)==null?void 0:y[0];g&&o(g)},l=m=>{m.preventDefault(),m.stopPropagation(),s(!0)},c=m=>{m.preventDefault(),m.stopPropagation(),s(!1)},d=m=>{var y;m.preventDefault(),m.stopPropagation(),s(!1);const g=(y=m.dataTransfer.files)==null?void 0:y[0];g&&o(g)};return u.jsxs("div",{className:`w-full max-w-xl mx-auto border-2 border-dashed rounded-2xl p-12 flex flex-col items-center justify-center text-center cursor-pointer transition-all duration-300 group bg-white ${r?"border-primary bg-slate-50 scale-[1.02] shadow-xl":"border-slate-300 hover:border-primary hover:bg-slate-50"}`,onClick:()=>{var m;return(m=n.current)==null?void 0:m.click()},onDragOver:l,onDragLeave:c,onDrop:d,children:[u.jsx("input",{type:"file",ref:n,onChange:a,className:"hidden",accept:"image/png, image/jpeg, image/webp"}),u.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 transition-transform duration-300 ${r?"scale-110 bg-white shadow-md":"bg-slate-50 group-hover:scale-110"}`,children:u.jsx(Xa,{className:`w-6 h-6 ${r?"text-primary":"text-slate-400 group-hover:text-primary"}`})}),u.jsx("h3",{className:`text-lg font-bold mb-2 transition-colors ${r?"text-primary":"text-slate-700 group-hover:text-primary"}`,children:r?i.dropHere:i.uploadTitle}),u.jsx("p",{className:"text-slate-500 text-sm",children:i.uploadDesc})]})},sw=[{label:"Transparent",value:null,hex:"transparent"},{label:"White",value:"#FFFFFF",hex:"#FFFFFF"},{label:"Black",value:"#000000",hex:"#000000"},{label:"Red",value:"#DB2828",hex:"#DB2828"},{label:"Blue",value:"#2185D0",hex:"#2185D0"},{label:"Green",value:"#21BA45",hex:"#21BA45"},{label:"Yellow",value:"#FBBD08",hex:"#FBBD08"}],U6=({originalImage:t,resultImageBase64:e,isProcessing:n,processingText:r,onReset:s,language:i})=>{const[o,a]=F.useState(50),[l,c]=F.useState(!1),[d,m]=F.useState(null),g=F.useRef(null),y=F.useRef(null),w=jo[i],x=()=>{if(!e)return;if(!d){const k=document.createElement("a");k.href=`data:image/png;base64,${e}`,k.download="pixelmagic-edited.png",document.body.appendChild(k),k.click(),document.body.removeChild(k);return}const P=document.createElement("canvas"),L=P.getContext("2d"),B=new Image;B.onload=()=>{if(P.width=B.width,P.height=B.height,L){L.fillStyle=d,L.fillRect(0,0,P.width,P.height),L.drawImage(B,0,0);const k=document.createElement("a");k.href=P.toDataURL("image/png"),k.download="pixelmagic-edited-bg.png",document.body.appendChild(k),k.click(),document.body.removeChild(k)}},B.src=`data:image/png;base64,${e}`},_=F.useCallback(()=>c(!0),[]),v=F.useCallback(()=>c(!1),[]),E=F.useCallback(P=>{if(!l||!g.current)return;const{left:L,width:B}=g.current.getBoundingClientRect();let k;"touches"in P?k=P.touches[0].clientX:k=P.clientX;const A=(k-L)/B*100;a(Math.min(100,Math.max(0,A)))},[l]);F.useEffect(()=>(window.addEventListener("mousemove",E),window.addEventListener("mouseup",v),window.addEventListener("touchmove",E),window.addEventListener("touchend",v),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",E),window.removeEventListener("touchend",v)}),[E,v]);const T=()=>d?{backgroundColor:d}:{backgroundColor:"#f8fafc",backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"};return u.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6 animate-fade-in pb-10",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsx("h2",{className:"text-xl font-bold text-primary self-start md:self-auto",children:n?u.jsxs("span",{className:"flex items-center gap-2",children:[w.processing,u.jsxs("span",{className:"flex gap-1",children:[u.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce"}),u.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-100"}),u.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-200"})]})]}):w.resultComparison}),!n&&u.jsxs("div",{className:"flex items-center gap-3 self-end md:self-auto",children:[u.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-slate-500 hover:text-primary transition-colors hover:bg-slate-50 rounded-lg active:scale-95 duration-200",children:w.reset}),e&&u.jsxs("button",{onClick:x,className:"flex items-center gap-2 bg-primary hover:bg-slate-800 text-white px-5 py-2 rounded-lg font-semibold text-sm transition-all shadow-lg shadow-slate-900/10 active:scale-95 hover:shadow-xl hover:-translate-y-0.5",children:[u.jsx(kb,{className:"w-4 h-4"}),w.download," ",d?"JPG":"PNG"]})]})]}),u.jsxs("div",{className:"relative w-full h-[60vh] rounded-xl overflow-hidden border border-slate-200 shadow-xl shadow-slate-200/50 bg-white select-none mx-auto group",ref:g,children:[n&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-white/90 backdrop-blur-md flex flex-col items-center justify-center transition-all duration-300",children:[u.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,className:"absolute inset-0 w-full h-full object-contain opacity-10 blur-md scale-105",alt:"Background Blur"}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center p-8 bg-white/80 rounded-2xl shadow-sm border border-slate-100/50 backdrop-blur-xl",children:[u.jsxs("div",{className:"relative mb-6",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-slate-100 rounded-full"}),u.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"})})]}),u.jsx("p",{className:"font-bold text-lg tracking-wide animate-shimmer-text",children:r||"..."})]})]}),!n&&e&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center transition-colors duration-300",style:T(),children:u.jsx("img",{src:`data:image/png;base64,${e}`,alt:"Result",className:"max-w-full max-h-full object-contain animate-fade-in",draggable:!1})}),u.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden",style:{clipPath:`inset(0 ${100-o}% 0 0)`},children:[u.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white/95",children:u.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain",draggable:!1})}),u.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur text-primary text-[10px] font-bold px-2 py-1 rounded shadow-sm border border-slate-100 select-none",children:w.original})]}),u.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white z-30 cursor-ew-resize shadow-[0_0_10px_rgba(0,0,0,0.2)] hover:bg-blue-100 transition-colors",style:{left:`${o}%`},onMouseDown:_,onTouchStart:_,children:u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg border border-slate-100 flex items-center justify-center text-primary transform hover:scale-110 active:scale-95 transition-all duration-200 cursor-ew-resize",children:u.jsx(G2,{className:"w-4 h-4"})})}),u.jsx("div",{className:"absolute top-4 right-4 bg-primary/90 backdrop-blur text-white text-[10px] font-bold px-2 py-1 rounded shadow-sm z-20 select-none",children:w.result})]}),!n&&!e&&u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain"})})]}),!n&&e&&u.jsxs("div",{className:"flex flex-col items-center gap-3 animate-fade-in-up",children:[u.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:w.bgColor}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-3 bg-white p-3 rounded-2xl border border-slate-200 shadow-sm transition-all hover:shadow-md",children:[sw.map(P=>u.jsx("button",{onClick:()=>m(P.value),className:`w-10 h-10 rounded-full border-2 transition-all duration-200 hover:scale-110 active:scale-95 flex items-center justify-center ${d===P.value?"border-primary ring-2 ring-primary/20 scale-110":"border-slate-200 hover:border-slate-300"}`,style:{backgroundColor:P.value||"white"},title:P.label,children:P.value===null&&u.jsx("div",{className:"w-full h-full rounded-full opacity-40",style:{backgroundImage:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 0 4px, 4px -4px, -4px 0px"}})},P.label)),u.jsx("div",{className:"w-px h-8 bg-slate-200 mx-2 self-center"}),u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:"color",ref:y,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:P=>m(P.target.value),value:d||"#ffffff"}),u.jsx("button",{className:`w-10 h-10 rounded-full border-2 flex items-center justify-center bg-white hover:bg-slate-50 transition-all duration-200 hover:scale-110 active:scale-95 ${d&&!sw.find(P=>P.value===d)?"border-primary ring-2 ring-primary/20":"border-slate-200 group-hover:border-slate-300"}`,title:"Custom Color",children:u.jsx("span",{className:"text-xl leading-none pb-1 text-slate-400 group-hover:text-primary transition-colors",children:"+"})})]})]})]}),!n&&!e&&u.jsx("p",{className:"text-center text-slate-400 text-xs animate-fade-in",children:w.uploadPrompt})]})},O6=({isOpen:t,onClose:e,removeBgKey:n,onSaveRemoveBgKey:r,storedApiKeys:s,onAddApiKey:i,onDeleteApiKey:o,onToggleApiKey:a,onSelectGoogleKey:l,knowledgeMode:c,onToggleKnowledgeMode:d,wikiEnabled:m,onToggleWiki:g,removeBgEnabled:y,onToggleRemoveBg:w,supabaseEnabled:x,onToggleSupabase:_,googleSearchKey:v,googleSearchCx:E,onSaveGoogleSearch:T,openRouterKey:P,onSaveOpenRouterKey:L,huggingFaceKey:B,onSaveHuggingFaceKey:k,groqKey:A,onSaveGroqKey:N,language:M})=>{const[V,R]=F.useState(n),[D,I]=F.useState(v),[H,fe]=F.useState(E),[re,Z]=F.useState(P),[X,oe]=F.useState(B),[W,$]=F.useState(A),[de,te]=F.useState(""),[Y,ge]=F.useState(!1),[Ce,Se]=F.useState(!1),[je,Be]=F.useState(0),[ze,ht]=F.useState(!1),Me=jo[M];if(F.useEffect(()=>{R(n),I(v),Z(P),oe(B),$(A),fe(!E&&!H?"3040e7dd9eac6414b":E),t?CM().then(Be):(ge(!1),te(""),Se(!1))},[n,v,E,P,B,A,t]),!t)return null;const C=async()=>{const U=de.trim();if(!U||!Y)return;if(!U.startsWith("AIza")){Ye("Format Key salah. Harus dimulai dengan 'AIza'.");return}if(U.length!==39){Ye(`Panjang Key salah (${U.length}). Harusnya 39 karakter.`);return}if(s.some(q=>q.key===U)){Ye("Key ini sudah ada di daftar.");return}ht(!0);try{const ie=await new yg({apiKey:U}).models.generateContent({model:"gemini-3-flash-preview",contents:"Ping"});if(!ie||!ie.candidates||ie.candidates.length===0)throw new Error("API Valid, but response empty.");i(U,Ce),te(""),Se(!1),Ye("Key berhasil diverifikasi & disimpan!")}catch(q){console.error("Key Validation Failed:",q);const ie=(q.message||"").toLowerCase();ie.includes("400")||ie.includes("invalid_argument")||ie.includes("api key not valid")?Ye("Key DITOLAK oleh Google (Invalid)."):ie.includes("403")||ie.includes("permission_denied")?Ye("Key valid tapi tidak punya izin (Billing/Project problem)."):ie.includes("404")||ie.includes("not_found")?Ye("Model tidak ditemukan. Coba lagi."):Ye("Gagal memvalidasi Key. "+(q.message||"Unknown error"))}finally{ht(!1)}},se=()=>{r(V.trim()),T(D.trim(),H.trim()),L(re.trim()),k(X.trim()),N(W.trim()),e(),Ye("Pengaturan disimpan!")},ee=({value:U,hasSystemDefault:z=!0})=>U&&U.trim().length>0?u.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-md border border-green-200",children:[u.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"Key Pribadi (Custom)"]}):z?u.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-blue-100 text-blue-700 px-2 py-0.5 rounded-md border border-blue-200",children:[u.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),"Key Sistem (Bawaan)"]}):u.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-slate-100 text-slate-500 px-2 py-0.5 rounded-md border border-slate-200",children:[u.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full"}),"Nonaktif"]});return u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-fade-in-up ring-1 ring-slate-900/5",children:[u.jsxs("div",{className:"bg-white px-6 py-5 border-b border-slate-100 flex items-center justify-between sticky top-0 z-10",children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 border border-slate-100 flex items-center justify-center text-primary",children:u.jsx(Za,{className:"w-5 h-5"})}),Me.settingsTitle]}),u.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-50 hover:bg-slate-100 text-slate-400 hover:text-slate-800 transition-all",children:""})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-slate-50",children:[u.jsxs("section",{className:"bg-white rounded-2xl p-5 border border-slate-200 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"p-1.5 bg-indigo-50 rounded-lg",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3311/3311764.png",className:"w-5 h-5 object-contain",alt:"AI Pref"})}),u.jsx("h3",{className:"text-sm font-bold text-slate-800",children:Me.systemPref})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"flex items-start justify-between p-3 bg-indigo-50/50 rounded-xl border border-indigo-100",children:u.jsxs("div",{className:"w-full",children:[u.jsx("div",{className:"flex justify-between items-center mb-1",children:u.jsxs("h4",{className:"text-xs font-bold text-slate-700 flex items-center gap-2",children:[Me.knowledgeMode,u.jsx("span",{className:"text-[9px] bg-green-100 text-green-700 px-1.5 rounded-md border border-green-200",children:"Selalu Aktif"})]})}),u.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed mb-2",children:Me.knowledgeModeDesc}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs("div",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-100 px-2 py-1 rounded-md w-fit flex items-center gap-1.5",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/9836/9836888.png",className:"w-3.5 h-3.5 object-contain",alt:"DB"}),Me.totalKnowledge,": ",je]})})]})}),u.jsx("div",{className:"flex items-start justify-between p-3 bg-slate-50 rounded-xl border border-slate-200",children:u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/48/48930.png",className:"w-4 h-4 object-contain",alt:"Wiki"}),u.jsxs("h4",{className:"text-xs font-bold text-slate-700 flex items-center gap-2",children:[Me.wikiMode,u.jsx("span",{className:"text-[9px] bg-green-100 text-green-700 px-1.5 rounded-md border border-green-200",children:"Selalu Aktif"})]})]}),u.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed",children:Me.wikiModeDesc})]})})]})]}),u.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/18889/18889881.png",className:"w-6 h-6 object-contain",alt:"Gemini"}),Me.googleApiTitle," (Utama)"]}),u.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:Me.googleApiDesc})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"flex items-center justify-between mb-3 px-1",children:u.jsxs("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[Me.keysStored,u.jsx("span",{className:"bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded text-[10px]",children:s.length})]})}),s.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-6 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50 mb-4",children:[u.jsx(Za,{className:"w-6 h-6 text-slate-300 mb-2"}),u.jsx("p",{className:"text-xs text-slate-400 font-medium text-center",children:Me.noKeysYet})]}):u.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto custom-scrollbar pr-1 mb-4",children:s.map((U,z)=>u.jsxs("div",{className:`flex items-center justify-between p-3 bg-white border rounded-xl shadow-sm transition-all ${U.isActive!==!1?"border-slate-200":"border-slate-100 bg-slate-50/50 opacity-70"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 text-xs font-bold border ${U.isShared?"bg-green-50 text-green-600 border-green-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:U.isShared?u.jsx(pc,{className:"w-3.5 h-3.5"}):z+1}),u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("span",{className:"text-xs font-mono text-slate-700 font-bold tracking-tight",children:[" ",U.key.slice(-4)]}),u.jsx("span",{className:`text-[9px] font-bold ${U.isActive!==!1?"text-green-500":"text-slate-400"}`,children:U.isActive!==!1?" "+Me.active:" "+Me.inactive})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{onClick:q=>q.stopPropagation(),children:u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer scale-75",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:U.isActive!==!1,onChange:q=>a(U.key,q.target.checked)}),u.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-green-500"})]})}),u.jsx("button",{onClick:()=>o(U.key),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg",children:u.jsx(br,{className:"w-3.5 h-3.5"})})]})]},z))})]}),u.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer w-fit mb-3",children:[u.jsx("input",{type:"checkbox",checked:Y,onChange:U=>ge(U.target.checked),className:"w-3.5 h-3.5 text-blue-600 rounded border-slate-300 focus:ring-blue-500"}),u.jsx("span",{className:"text-[10px] text-slate-500 font-medium",children:"Saya bertanggung jawab atas penggunaan Key ini."})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:de,onChange:U=>te(U.target.value),placeholder:Y?Me.addKeyPlaceholder:"Centang dulu di atas...",disabled:!Y||ze,maxLength:50,className:"flex-1 px-3 py-2 bg-white border rounded-lg text-xs outline-none transition-colors disabled:bg-slate-100 border-slate-200 focus:border-blue-500"}),u.jsx("button",{onClick:C,disabled:!Y||!de.trim()||ze,className:"px-4 py-2 bg-slate-900 text-white rounded-lg text-xs font-bold hover:bg-slate-800 disabled:bg-slate-300 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:ze?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-3 h-3 border-2 border-white/50 border-t-white rounded-full animate-spin"}),"Checking..."]}):"+ Add"})]}),u.jsx("div",{className:"mt-3 flex justify-center",children:u.jsxs("button",{onClick:l,className:"text-[10px] font-bold text-blue-600 hover:underline flex items-center gap-1",children:[Me.selectKeyBtn," "]})})]})]}),u.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[u.jsxs("div",{className:"mb-5 border-b border-slate-100 pb-4",children:[u.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[u.jsx("div",{className:"p-1.5 bg-emerald-50 rounded-lg",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/11681/11681335.png",className:"w-5 h-5 object-contain",alt:"API"})}),"Integrasi API Eksternal"]}),u.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:"Kelola key untuk layanan Fallback (Cadangan) dan Tools tambahan."})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(mc,{className:"w-3.5 h-3.5 text-slate-400"}),u.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Fallback AI (Cadangan Chat)"})]}),u.jsxs("div",{className:"space-y-4 pl-1",children:[u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"OpenRouter (Prioritas 2)"}),u.jsx(ee,{value:re,hasSystemDefault:!0})]}),u.jsx("input",{type:"text",value:re,onChange:U=>Z(U.target.value),placeholder:"sk-or-v1-...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-emerald-500/10 focus:border-emerald-500 outline-none transition-all font-mono"})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Groq API (Prioritas 3)"}),u.jsx(ee,{value:W,hasSystemDefault:!0})]}),u.jsx("input",{type:"text",value:W,onChange:U=>$(U.target.value),placeholder:"gsk_...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-orange-500/10 focus:border-orange-500 outline-none transition-all font-mono"})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Hugging Face (Prioritas 4)"}),u.jsx(ee,{value:X,hasSystemDefault:!0})]}),u.jsx("input",{type:"text",value:X,onChange:U=>oe(U.target.value),placeholder:"hf_...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-yellow-500/10 focus:border-yellow-500 outline-none transition-all font-mono"})]})]})]}),u.jsx("div",{className:"h-px bg-slate-100 w-full"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/6710/6710433.png",className:"w-4 h-4 object-contain",alt:"Tools"}),u.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Search & Tools"})]}),u.jsxs("div",{className:"space-y-4 pl-1",children:[u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-2",children:"Google Search API"}),u.jsx(ee,{value:D,hasSystemDefault:!1})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("input",{type:"text",value:D,onChange:U=>I(U.target.value),placeholder:"API Key",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-blue-500 outline-none font-mono"}),u.jsx("input",{type:"text",value:H,onChange:U=>fe(U.target.value),placeholder:"Search Engine ID (CX)",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-blue-500 outline-none font-mono"})]})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Remove.bg API"}),u.jsx("span",{className:"text-[9px] bg-green-100 text-green-700 px-1.5 rounded-md border border-green-200",children:"Aktif"})]}),u.jsx(ee,{value:V,hasSystemDefault:!0})]}),u.jsx("input",{type:"text",value:V,onChange:U=>R(U.target.value),placeholder:"API Key Remove.bg...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-purple-500 outline-none font-mono"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 border border-slate-100 rounded-xl",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Supabase Engine"}),u.jsx("span",{className:"text-[9px] text-slate-400",children:"Cadangan pemrosesan gambar."})]}),u.jsx("span",{className:"text-[9px] bg-green-100 text-green-700 px-1.5 rounded-md border border-green-200",children:"Aktif"})]})]})]})]})]})]}),u.jsxs("div",{className:"p-5 border-t border-slate-100 bg-white flex items-center justify-end gap-3 shrink-0",children:[u.jsx("button",{onClick:e,className:"px-5 py-2.5 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded-xl font-bold text-sm transition-all",children:Me.cancel}),u.jsxs("button",{onClick:se,className:"px-6 py-2.5 bg-slate-900 hover:bg-slate-800 text-white rounded-xl font-bold text-sm shadow-lg shadow-slate-900/20 active:scale-95 transition-all flex items-center gap-2",children:[u.jsx(Gr,{className:"w-4 h-4"}),Me.save]})]})]})})},B6=({onLogin:t,language:e,onToggleLanguage:n,onClose:r})=>{const[s,i]=F.useState(""),[o,a]=F.useState(""),[l,c]=F.useState(!1),[d,m]=F.useState(null),g=jo[e],y=()=>{let x=localStorage.getItem("pixelmagic_device_id");return x||(x="dev_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36),localStorage.setItem("pixelmagic_device_id",x)),x},w=async x=>{if(x.preventDefault(),!(!s.trim()||!o.trim())){c(!0),m(null);try{const _=s.trim(),v=o.trim(),E=y(),{user:T,credits:P,id:L}=await bM(_,v,E);t(T,L,P)}catch(_){console.error(_),m("Connection failed. Please check internet.")}finally{c(!1)}}};return u.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-surface p-4 relative animate-fade-in",children:[r&&u.jsx("button",{onClick:r,className:"absolute top-6 left-6 p-2 rounded-full bg-white shadow-sm border border-slate-200 text-slate-400 hover:text-slate-900 transition-colors z-20",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),u.jsx("button",{onClick:n,className:"absolute top-6 right-6 text-xs font-bold px-3 py-1.5 rounded bg-white shadow-sm border border-slate-200 text-slate-600 hover:bg-slate-50 uppercase z-10",children:e}),u.jsxs("div",{className:"bg-white w-full max-w-md p-8 rounded-2xl shadow-xl border border-slate-100 animate-fade-in-up",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"w-12 h-12 bg-primary text-white rounded-xl flex items-center justify-center text-xl font-bold mx-auto mb-4 shadow-lg shadow-primary/20",children:"F"}),u.jsx("h1",{className:"text-2xl font-bold text-primary",children:g.welcome}),u.jsx("p",{className:"text-slate-500 text-sm mt-2 leading-relaxed",children:g.welcomeSubtitle})]}),u.jsxs("form",{onSubmit:w,className:"space-y-5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:g.enterName}),u.jsx("input",{type:"text",required:!0,maxLength:50,value:s,onChange:x=>i(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-lg p-3 text-primary focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400",placeholder:g.namePlaceholder}),u.jsx("div",{className:"text-right mt-1",children:u.jsxs("span",{className:"text-[10px] text-slate-400",children:[s.length,"/50"]})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:g.enterSchool}),u.jsx("input",{type:"text",required:!0,maxLength:60,value:o,onChange:x=>a(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-lg p-3 text-primary focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400",placeholder:g.schoolPlaceholder}),u.jsx("div",{className:"text-right mt-1",children:u.jsxs("span",{className:"text-[10px] text-slate-400",children:[o.length,"/60"]})})]}),d&&u.jsx("p",{className:"text-red-500 text-xs text-center",children:d}),u.jsx("div",{className:"pt-2",children:u.jsx("button",{type:"submit",disabled:l,className:`w-full py-3 rounded-xl font-bold text-white transition-all shadow-lg ${l?"bg-slate-400 cursor-wait":"bg-primary hover:bg-slate-800 hover:shadow-xl active:scale-95"}`,children:l?g.verifying:g.accessButton})}),u.jsxs("p",{className:"text-center text-[10px] text-slate-400 mt-4",children:["Fanra Dev | ",g.deviceIdNote]})]})]})]})},z6=({isOpen:t,onClose:e,onNewChat:n,user:r,onLogout:s,onOpenLogin:i,credits:o,isUnlimited:a,language:l,tools:c,onSelectTool:d,onExit:m,chatHistory:g})=>{const y=jo[l],[w,x]=F.useState(!1),_=w?c:c.slice(0,3);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),u.jsx("div",{className:`
          /* Positioning & Layout */
          fixed md:relative top-0 left-0 bottom-0 z-50 h-full
          bg-slate-900 text-slate-200
          overflow-hidden flex flex-col

          /* Transitions */
          transition-[width,transform,opacity] duration-300 ease-in-out

          /* MOBILE STATE: Fixed width, Slide in/out */
          w-[280px]
          ${t?"translate-x-0 shadow-2xl":"-translate-x-full shadow-none"}

          /* DESKTOP STATE: Relative, Collapse Width, Reset Transform */
          md:transform-none md:shadow-none md:top-auto md:left-auto md:bottom-auto
          ${t?"md:w-[260px]":"md:w-0"}
        `,children:u.jsxs("div",{className:"w-[280px] md:w-[260px] h-full flex flex-col border-r border-slate-800 bg-slate-900",children:[u.jsxs("div",{className:"p-4 flex items-center justify-between h-14 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra Logo",className:"w-8 h-8 object-contain"}),u.jsx("span",{className:"font-bold text-white tracking-wide",children:"Fanra"})]}),u.jsx("button",{onClick:e,className:"md:hidden text-slate-400 hover:text-white p-1",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-3 py-2 custom-scrollbar space-y-4",children:[u.jsxs("button",{onClick:()=>{n(),window.innerWidth<768&&e()},className:"w-full flex items-center gap-3 bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-xl transition-all active:scale-95 border border-slate-700 shadow-sm group",children:[u.jsx("span",{className:"text-xl font-light group-hover:scale-110 transition-transform",children:"+"}),u.jsx("span",{className:"text-sm font-medium",children:y.newChat})]}),u.jsx("div",{className:"h-px bg-slate-800/50 mx-2"}),u.jsxs("div",{children:[u.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Creative Tools"}),u.jsxs("div",{className:"space-y-1",children:[_.map(v=>u.jsxs("button",{onClick:()=>{d(v),window.innerWidth<768&&e()},className:"w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all hover:bg-slate-800 border border-transparent hover:border-slate-700/50 group active:scale-95",children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 ${v.color.replace("bg-","bg-opacity-90 bg-")} shadow-sm`,children:u.jsx("div",{className:"scale-75 text-slate-800",children:v.icon})}),u.jsx("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:u.jsx("span",{className:"block text-xs font-bold text-slate-200 group-hover:text-white truncate",children:y[v.nameKey]})})]},v.id)),u.jsxs("button",{onClick:()=>x(!w),className:"w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all hover:bg-slate-800 border border-transparent border-dashed hover:border-slate-700/50 group",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center shrink-0 bg-slate-800 text-slate-400",children:u.jsx(hm,{className:"w-4 h-4"})}),u.jsx("span",{className:"text-xs font-medium text-slate-400 group-hover:text-white",children:w?y.lessTools:y.moreTools})]})]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase mb-2 mt-4",children:y.historyHeader}),u.jsx("div",{className:"space-y-1",children:r?g&&g.length>0?g.filter(v=>v.role==="user").slice(-5).reverse().map((v,E)=>{var T;return u.jsx("button",{className:"w-full text-left px-4 py-2.5 text-sm text-slate-400 hover:bg-slate-800/50 hover:text-white rounded-lg truncate transition-colors group",children:v.text||((T=v.attachments)!=null&&T.length?"Sent an image":"Message")},v.id||E)}):u.jsx("p",{className:"px-4 py-2 text-xs text-slate-600 italic text-center border border-slate-800/50 rounded-lg",children:"Belum ada riwayat chat."}):u.jsx("p",{className:"px-4 py-2 text-xs text-slate-600 italic text-center",children:"Login untuk melihat riwayat."})})]})]}),u.jsxs("div",{className:"p-4 border-t border-slate-800 bg-slate-900 shrink-0",children:[m&&u.jsxs("button",{onClick:m,className:"w-full mb-4 py-2.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-xl font-bold text-xs uppercase tracking-wider transition-all flex items-center justify-center gap-2 border border-slate-700/50 hover:border-slate-600 group",children:[u.jsx(ci,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Exit Studio"]}),r?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500 flex items-center justify-center text-xs font-bold text-white shrink-0",children:r.name.charAt(0).toUpperCase()}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-white truncate",children:r.name}),u.jsx("p",{className:"text-xs text-slate-500 truncate",children:r.school})]})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs mb-3 bg-slate-800 rounded-lg p-2",children:[u.jsxs("span",{className:"text-slate-400",children:[y.credits,":"]}),u.jsx("span",{className:`font-bold ${a?"text-amber-400":"text-white"}`,children:a?y.unlimited:o})]}),u.jsxs("button",{onClick:s,className:"w-full py-2 text-xs font-medium text-slate-400 hover:text-red-400 hover:bg-red-900/10 rounded-lg transition-colors flex items-center justify-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),y.logOut]})]}):u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-xs text-slate-400 mb-3",children:y.loginToSave}),u.jsx("button",{onClick:i,className:"w-full py-2.5 bg-white text-slate-900 font-bold rounded-xl text-sm hover:bg-slate-200 transition-colors shadow-lg active:scale-95",children:y.loginBtn})]})]})]})})]})};class G6{constructor(e,n,r,s,i){this.x=e,this.y=n,this.vx=0,this.vy=0,this.radius=s,this.color=r,this.friction=.92,this.ease=i,this.dx=(Math.random()-.5)*80,this.dy=(Math.random()-.5)*80,this.angle=Math.random()*Math.PI*2,this.angleSpeed=.02+Math.random()*.03,this.wobbleRadius=15+Math.random()*25}update(e,n,r){if(r)this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction;else{this.angle+=this.angleSpeed;const s=Math.cos(this.angle)*this.wobbleRadius,i=Math.sin(this.angle)*this.wobbleRadius,o=e+this.dx+s,a=n+this.dy+i;this.x+=(o-this.x)*this.ease,this.y+=(a-this.y)*this.ease,this.vx=0,this.vy=0}}shatter(){const e=Math.random()*Math.PI*2,n=Math.random()*30+15;this.vx=Math.cos(e)*n,this.vy=Math.sin(e)*n}draw(e){e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2),e.fillStyle=this.color,e.fill()}}const H6=({onEnter:t})=>{const[e,n]=F.useState(!1),[r,s]=F.useState(!1),i=F.useRef(null),o=F.useRef(!1),a=F.useRef({x:window.innerWidth/2,y:window.innerHeight/2}),l=F.useRef([]);F.useEffect(()=>{setTimeout(()=>s(!0),300);const m=i.current;if(!m)return;const g=m.getContext("2d");if(!g)return;const y=()=>{m.width=window.innerWidth,m.height=window.innerHeight};window.addEventListener("resize",y),y();const w=T=>{a.current={x:T.clientX,y:T.clientY}};window.addEventListener("mousemove",w);const x=["#0f172a","#1e293b","#312e81","#1e1b4b","#4c1d95","#2563eb"],_=[];for(let T=0;T<15;T++){const P=Math.random()*30+20,L=x[Math.floor(Math.random()*x.length)],B=Math.random()*.08+.03;_.push(new G6(m.width/2,m.height/2,L,P,B))}l.current=_;let v;const E=()=>{g.clearRect(0,0,m.width,m.height),l.current.forEach(T=>{T.update(a.current.x,a.current.y,o.current),T.draw(g)}),v=requestAnimationFrame(E)};return E(),()=>{window.removeEventListener("resize",y),window.removeEventListener("mousemove",w),cancelAnimationFrame(v)}},[]);const c=()=>{o.current||(o.current=!0,l.current.forEach(m=>m.shatter()),setTimeout(()=>{o.current=!1},1500))},d=()=>{n(!0),setTimeout(()=>{t()},900)};return u.jsxs("div",{className:`fixed inset-0 z-[999] bg-white flex flex-col items-center justify-center overflow-hidden transition-transform duration-[900ms] cubic-bezier(0.76, 0, 0.24, 1) ${e?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none shadow-none"}`,onDoubleClick:c,children:[u.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none filter blur-[60px] opacity-80",children:u.jsx("canvas",{ref:i,className:"w-full h-full"})}),u.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.4] pointer-events-none mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),u.jsxs("div",{className:`relative z-10 flex flex-col items-center max-w-lg w-full text-center px-6 transition-all duration-1000 ease-out transform select-none ${r?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,children:[u.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-slate-900 mb-2 tracking-tighter",children:["FANRA",u.jsx("span",{className:"text-blue-600",children:"."})]}),u.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-400 mb-8 tracking-widest uppercase",children:"AI Studio"}),u.jsxs("p",{className:"text-slate-500 text-sm md:text-base font-medium leading-relaxed mb-16 max-w-xs mx-auto",children:["Ruang imajinasi tanpa batas. ",u.jsx("br",{}),u.jsx("span",{className:"text-slate-800",children:"Edit, Ciptakan, dan Berdiskusi."})]}),u.jsxs("button",{onClick:d,className:"group flex flex-col items-center gap-4 transition-all outline-none cursor-pointer",children:[u.jsx("div",{className:"w-16 h-16 rounded-full border border-slate-200 bg-white/80 backdrop-blur-sm flex items-center justify-center shadow-lg transition-all duration-500 group-hover:scale-110 group-hover:bg-white group-hover:border-slate-300 group-active:scale-95 group-hover:shadow-xl",children:u.jsx(_r,{className:"w-6 h-6 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-600 transition-colors duration-300",children:"Open Studio"})]})]})]})},$6="3JEZ69gonQmxU83WxzidFCFf",q6="AIzaSyCV_HdKiAs1y5-F5eSGxTFUZ1vAGUOymQg",W6="sb_publishable_ikw-BNV8Wu3qhNPuSti8Rg_7XmPMWqV",K6="",iw=5,Nh=[{id:yn.BACKGROUND_REMOVER,nameKey:"toolBgRemove",descKey:"toolBgRemoveDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/593/593398.png",className:"w-8 h-8 object-contain",alt:"Hapus Background"}),color:"bg-blue-50",model:"gemini-2.5-flash-image",cost:1},{id:yn.HD_UPSCALE,nameKey:"toolUpscale",descKey:"toolUpscaleDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/17558/17558323.png",className:"w-8 h-8 object-contain",alt:"HD Upscale"}),color:"bg-amber-50",model:"gemini-2.5-flash-image",cost:3},{id:yn.CREATIVE_REMIX,nameKey:"toolRemix",descKey:"toolRemixDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/17142/17142644.png",className:"w-8 h-8 object-contain",alt:"Creative Remix"}),color:"bg-purple-50",model:"gemini-2.5-flash-image",cost:3},{id:yn.COLORIZE,nameKey:"toolColorize",descKey:"toolColorizeDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/15109/15109276.png",className:"w-8 h-8 object-contain",alt:"Warnai Foto"}),color:"bg-pink-50",model:"gemini-2.5-flash-image",cost:2},{id:yn.SKETCH_TO_REAL,nameKey:"toolSketch",descKey:"toolSketchDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/9798/9798973.png",className:"w-8 h-8 object-contain",alt:"Sketsa ke Nyata"}),color:"bg-emerald-50",model:"gemini-2.5-flash-image",cost:3}],J6=({language:t,code:e})=>{const[n,r]=F.useState(!1),s=()=>{navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)},i=o=>o.split(`
`).map((a,l)=>u.jsxs("div",{className:"table-row",children:[u.jsx("span",{className:"table-cell select-none text-slate-600 text-right pr-4 w-8 text-xs",children:l+1}),u.jsx("span",{className:"table-cell",children:a.split(/([<>{}"']|class|const|let|var|function|return|import|export)/g).map((c,d)=>c.startsWith("<")||c.startsWith(">")?u.jsx("span",{className:"text-blue-400",children:c},d):c.startsWith('"')||c.startsWith("'")?u.jsx("span",{className:"text-green-400",children:c},d):["const","let","var","function","return","import","export","class"].includes(c)?u.jsx("span",{className:"text-purple-400 font-bold",children:c},d):["=","{","}","(",")",";"].includes(c)?u.jsx("span",{className:"text-slate-400",children:c},d):u.jsx("span",{className:"text-slate-200",children:c},d))})]},l));return u.jsxs("div",{className:"my-4 rounded-xl overflow-hidden border border-slate-700/50 shadow-lg bg-[#1e1e1e] w-full max-w-full group",children:[u.jsxs("div",{className:"bg-[#2d2d2d] px-4 py-2 flex items-center justify-between border-b border-white/5",children:[u.jsx("span",{className:"text-xs font-mono text-slate-400 lowercase font-bold",children:t||"code"}),u.jsx("button",{onClick:s,className:"flex items-center gap-1.5 text-[10px] font-medium text-slate-400 hover:text-white bg-white/5 hover:bg-white/10 px-2 py-1 rounded transition-all",children:n?u.jsxs(u.Fragment,{children:[u.jsx(Gr,{className:"w-3 h-3 text-green-400"})," Copied"]}):u.jsxs(u.Fragment,{children:[u.jsx(Pb,{className:"w-3 h-3"})," Copy Code"]})})]}),u.jsx("div",{className:"p-4 overflow-x-auto custom-scrollbar",children:u.jsx("pre",{className:"font-mono text-sm leading-relaxed whitespace-pre font-normal",style:{tabSize:2},children:u.jsx("code",{className:"table w-full border-collapse",children:i(e)})})})]})},Y6=({isOpen:t,onClose:e})=>t?u.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-6 shadow-2xl animate-fade-in-up border border-slate-100",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center",children:u.jsx(Za,{className:"w-5 h-5"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Cara Dapet API Key Gemini"})]}),u.jsxs("ol",{className:"space-y-4 text-sm text-slate-600 mb-6 list-decimal list-inside marker:font-bold marker:text-blue-600",children:[u.jsxs("li",{className:"pl-2",children:["Buka website ",u.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-bold hover:underline",children:"Google AI Studio"}),"."]}),u.jsx("li",{className:"pl-2",children:"Login pakai akun Google kamu."}),u.jsxs("li",{className:"pl-2",children:["Klik tombol biru besar bertuliskan ",u.jsx("b",{children:'"Create API Key"'}),"."]}),u.jsxs("li",{className:"pl-2",children:["Pilih ",u.jsx("b",{children:'"Create API key in new project"'}),"."]}),u.jsxs("li",{className:"pl-2",children:["Salin (Copy) kode yang muncul, lalu tempel di menu ",u.jsx("b",{children:"Pengaturan"})," aplikasi ini."]})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-xs text-slate-500 mb-6",children:[" ",u.jsx("b",{children:"Tips:"})," API Key ini gratis (Free Tier). Jangan kasih tau kode ini ke orang lain ya."]}),u.jsx("button",{onClick:e,className:"w-full py-3 bg-primary text-white rounded-xl font-bold shadow-lg shadow-primary/20 hover:bg-slate-800 transition-all active:scale-95",children:"Oke, Siap!"})]})}):null;function Q6({onExit:t}){const[e,n]=F.useState(!0),[r,s]=F.useState("id"),[i,o]=F.useState(null),[a,l]=F.useState(null),[c,d]=F.useState(iw),[m,g]=F.useState(!1),[y,w]=F.useState(!1),[x,_]=F.useState(!1),[v,E]=F.useState(null),[T,P]=F.useState(null),[L,B]=F.useState(null),[k,A]=F.useState(""),[N,M]=F.useState({isProcessing:!1,progress:"",error:null}),[V,R]=F.useState([]),[D,I]=F.useState(""),[H,fe]=F.useState([]),[re,Z]=F.useState(null),[X,oe]=F.useState(!1),[W,$]=F.useState(!1),[de,te]=F.useState(null),Y=F.useRef(null),ge=F.useRef(null),Ce=F.useRef(null),Se=F.useRef(null),[je,Be]=F.useState(!1),[ze,ht]=F.useState(""),[Me,C]=F.useState([]),[se,ee]=F.useState(""),[U,z]=F.useState(""),[q,ie]=F.useState(""),[ue,Q]=F.useState(""),[le,ve]=F.useState(""),[he,xe]=F.useState(!1),[Ne,Pe]=F.useState(!0),[mt,Zt]=F.useState(!0),[kt,O]=F.useState(!0),[G,pe]=F.useState(!1),[we,Ae]=F.useState(!1),[rt,Re]=F.useState(!1),[Tt,_t]=F.useState(null),Ue=jo[r];F.useEffect(()=>{const K=localStorage.getItem("remove_bg_key");K&&ht(K);const Ee=localStorage.getItem("google_search_key");Ee&&ee(Ee);const qe=localStorage.getItem("google_search_cx");qe&&z(qe);const Ge=localStorage.getItem("open_router_key");Ge&&ie(Ge);const st=localStorage.getItem("hugging_face_key");st&&Q(st);const it=localStorage.getItem("groq_key");it&&ve(it),localStorage.getItem("fanra_know_mode")==="true"&&xe(!0),Pe(!0),localStorage.setItem("fanra_wiki_mode","true"),localStorage.getItem("fanra_rb_enabled")==="false"&&Zt(!1),localStorage.getItem("fanra_sb_enabled")==="false"&&O(!1)},[]),F.useEffect(()=>{G&&(Me.some(K=>K.isActive)||he)&&pe(!1)},[Me,he]),F.useEffect(()=>{var K;(K=ge.current)==null||K.scrollIntoView({behavior:"smooth"})},[V,N.isProcessing,H]),F.useEffect(()=>{a&&(IM(a).then(K=>{K.length>0&&R(K)}),TM(a).then(K=>{C(K)}))},[a]),F.useEffect(()=>{if(Se.current){Se.current.style.height="auto";const K=Math.min(Se.current.scrollHeight,128);Se.current.style.height=`${Math.max(42,K)}px`}},[D,H]);const pn=K=>{if(Dt())return;const Ee=Math.max(0,c-K);d(Ee),a&&EM(a,Ee)},Dt=()=>!!(i!=null&&i.isAdmin||Me.some(K=>K.isActive!==!1)),en=()=>ze||$6,pr=()=>{const K=Me.filter(Ee=>Ee.isActive!==!1).map(Ee=>Ee.key);return K.length===0?[q6]:K},er=K=>{ht(K),localStorage.setItem("remove_bg_key",K)},Ii=(K,Ee)=>{ee(K),z(Ee),localStorage.setItem("google_search_key",K),localStorage.setItem("google_search_cx",Ee)},Bs=K=>{ie(K),localStorage.setItem("open_router_key",K)},Rl=K=>{Q(K),localStorage.setItem("hugging_face_key",K)},Ht=K=>{ve(K),localStorage.setItem("groq_key",K)},Pl=async(K,Ee)=>{const qe={key:K,addedAt:Date.now(),isShared:Ee,isActive:!0},Ge=[...Me,qe];C(Ge),a&&await yv(a,Ge)},zs=async K=>{const Ee=Me.filter(qe=>qe.key!==K);C(Ee),a&&await SM(a,K,Ee)},Gs=async(K,Ee)=>{const qe=Me.map(Ge=>Ge.key===K?{...Ge,isActive:Ee}:Ge);C(qe),a&&await yv(a,qe)},Nd=K=>{xe(K),localStorage.setItem("fanra_know_mode",K.toString())},Rd=K=>{Pe(!0),localStorage.setItem("fanra_wiki_mode","true")},ts=K=>{Zt(K),localStorage.setItem("fanra_rb_enabled",K.toString())},Pd=K=>{O(K),localStorage.setItem("fanra_sb_enabled",K.toString())},Md=async()=>{try{window.aistudio&&await window.aistudio.openSelectKey()}catch(K){console.error(K)}},Hs=(K,Ee,qe,Ge)=>{P({data:K,mimeType:Ee,width:qe,height:Ge})},Ml=(K,Ee,qe)=>{o(K),l(Ee),d(qe),g(!1)},ns=()=>{P(null),B(null),A(""),E(null),M({isProcessing:!1,progress:"",error:null}),fe([]),_t(null)},Ci=()=>{o(null),l(null),d(iw),C([]),ns(),R([]),pe(!1)},tr=()=>s(K=>K==="id"?"en":"id"),Dl=(K,Ee)=>{if(K)try{navigator.clipboard.writeText(K).then(()=>{Z(Ee),setTimeout(()=>Z(null),2e3)})}catch{Z(Ee),setTimeout(()=>Z(null),2e3)}},Ll=K=>{te(Ee=>Ee===K?null:K)},Oo=K=>{const Ee=[];if(K.text){const Ge=K.text.split(/(```[\w-]*\n[\s\S]*?```)/g).map((st,it)=>{if(st.startsWith("```")){const gt=st.match(/```([\w-]*)\n([\s\S]*?)```/);return gt?u.jsx(J6,{language:gt[1],code:gt[2]},it):null}return u.jsx("div",{children:st.split("***").map((gt,Vt)=>u.jsxs("div",{children:[Vt>0&&u.jsx("div",{className:"h-px bg-slate-200 my-4 w-full"}),u.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:gt.split(/\*\*(.*?)\*\*/g).map((At,$n)=>{if($n%2===1)return u.jsx("strong",{className:"font-bold text-slate-900",children:At},$n);const tn=At.split(/\[(.*?)\]\((.*?)\)/g);if(tn.length>1){const mr=[];for(let Ke=0;Ke<tn.length;Ke+=3)mr.push(tn[Ke]),Ke+1<tn.length&&mr.push(u.jsx("a",{href:tn[Ke+2],target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 underline font-medium",children:tn[Ke+1]},Ke));return u.jsx(yp.Fragment,{children:mr},$n)}return At})})]},Vt))},it)});Ee.push(u.jsx("div",{children:Ge},"text"))}return Ee},Bo=K=>{K.preventDefault(),K.stopPropagation(),oe(!0)},jl=K=>{K.preventDefault(),K.stopPropagation(),oe(!1)},Fl=K=>{const Ee=new FileReader;Ee.onloadend=()=>{const qe=Ee.result,Ge=new Image;Ge.onload=()=>{Hs(qe.split(",")[1],K.type,Ge.width,Ge.height)},Ge.src=qe},Ee.readAsDataURL(K)},Vl=K=>{if(K.length+H.length>3){alert("Maksimal 3 gambar sekaligus.");return}K.forEach(Ee=>{if(!Ee.type.startsWith("image/"))return;const qe=new FileReader;qe.onloadend=()=>{const Ge=qe.result.split(",")[1];fe(st=>[...st,{data:Ge,mimeType:Ee.type,name:Ee.name}])},qe.readAsDataURL(Ee)})},ki=K=>{K.preventDefault(),K.stopPropagation(),oe(!1);const Ee=Array.from(K.dataTransfer.files);if(Ee.length!==0)if(v){const qe=Ee[0];qe.type.startsWith("image/")&&Fl(qe)}else Vl(Ee)},zo=()=>{R([]),fe([]),ns(),w(!1)},Ai=()=>{L?(_t("back"),Re(!0)):ns()},$s=()=>{Tt==="back"&&ns(),Re(!1),_t(null)},kr=()=>{Y.current&&(Y.current.abort(),Y.current=null,M({isProcessing:!1,progress:"",error:"Stopped by user."}))},Ni=async K=>{var Ge,st;if(K==null||K.preventDefault(),!D.trim()&&H.length===0||G)return;const Ee={id:Date.now().toString(),role:"user",text:D,timestamp:Date.now(),attachments:[...H]},qe={id:"temp-thinking",role:"model",text:"",timestamp:Date.now()+1};R(it=>[...it,Ee,qe]),I(""),fe([]),M({isProcessing:!0,progress:"AI Thinking...",error:null}),a&&vv(a,Ee);try{Y.current=new AbortController;const it=se&&U?{apiKey:se,cx:U}:void 0,gt=pr(),Vt=await D6(Ee.text,gt,V,r,Ee.attachments||[],$n=>{R(tn=>tn.map(mr=>mr.id==="temp-thinking"?{...mr,text:$n}:mr))},he,Ne,it,Y.current.signal,q,ue,le),At={id:(Date.now()+2).toString(),role:"model",text:Vt.text,timestamp:Date.now(),source:Vt.source};R($n=>$n.map(tn=>tn.id==="temp-thinking"?At:tn)),a&&vv(a,At)}catch(it){if(it.message==="Request cancelled by user")R(gt=>gt.filter(Vt=>Vt.id!=="temp-thinking"));else{console.error(it);const gt={id:(Date.now()+2).toString(),role:"model",text:Ue.chatFallbackError+(it.message?` (${it.message})`:""),timestamp:Date.now()};R(Vt=>Vt.map(At=>At.id==="temp-thinking"?gt:At)),((Ge=it.message)!=null&&Ge.includes("429")||(st=it.message)!=null&&st.includes("quota"))&&pe(!0)}}finally{M({isProcessing:!1,progress:"",error:null}),Y.current=null}},Dd=K=>{fe(Ee=>Ee.filter((qe,Ge)=>Ge!==K))},Go=()=>{var K;(K=Ce.current)==null||K.click()},Ul=K=>{if(K.target.files){const Ee=Array.from(K.target.files);Vl(Ee)}K.target.value=""},Ol=i||{name:"Guest"},Ho=x?Nh:Nh.slice(0,3),$o=async()=>{if(!T||!v)return;if(!Dt()&&c<v.cost){M({isProcessing:!1,progress:"",error:Ue.insufficientCredits});return}M({isProcessing:!0,progress:Ue.initializing,error:null}),B(null);const K=v.id===yn.BACKGROUND_REMOVER,Ee=en(),qe=pr();try{let Ge="",st=!1;if(K&&Ee&&mt&&!st)try{M(gt=>({...gt,progress:Ue.processingStandard})),Ge=await F6(T.data,Ee),st=!0}catch{console.warn("Standard Engine failed")}if(!st&&(K||!K)&&!st&&qe.length>0)try{M(gt=>({...gt,progress:Ue.processingAI})),Ge=await I6({image:T,tool:v.id,prompt:v.id===yn.CREATIVE_REMIX?k:void 0,apiKeys:qe}),K&&(M(gt=>({...gt,progress:Ue.refining})),Ge=await L6(Ge)),st=!0}catch(gt){console.warn("Gemini failed",gt)}if(!st||!Ge)throw new Error("No available API Keys or Services found/enabled.");pn(v.cost),B(Ge),M({isProcessing:!1,progress:"",error:null})}catch(Ge){console.error("Execution Error:",Ge);let st=Ue.serviceBusy;const it=(Ge.message||"").toLowerCase();it.includes("network")||it.includes("fetch")?st=Ue.networkError:it.includes("memory")||it.includes("oom")?st=Ue.memoryError:(it.includes("no available api")||it.includes("enabled"))&&(st=Ue.insufficientCredits),M({isProcessing:!1,progress:"",error:st})}};return u.jsxs("div",{className:"flex h-[100dvh] bg-white font-sans text-primary overflow-hidden relative",onDragOver:Bo,onDragLeave:jl,onDrop:ki,children:[e&&u.jsx(H6,{onEnter:()=>n(!1)}),X&&u.jsx("div",{className:"absolute inset-0 z-[100] bg-primary/10 backdrop-blur-sm border-4 border-primary border-dashed m-4 rounded-3xl flex items-center justify-center pointer-events-none animate-fade-in",children:u.jsxs("div",{className:"bg-white px-8 py-4 rounded-2xl shadow-xl flex items-center gap-3",children:[u.jsx(uy,{className:"w-6 h-6 text-primary"}),u.jsx("span",{className:"font-bold text-lg text-primary",children:"Drop files to send"})]})}),m&&u.jsx("div",{className:"fixed inset-0 z-[60] bg-white",children:u.jsx(B6,{onLogin:Ml,language:r,onToggleLanguage:tr,onClose:()=>g(!1)})}),u.jsx(Y6,{isOpen:we,onClose:()=>Ae(!1)}),u.jsx(O6,{isOpen:je,onClose:()=>Be(!1),removeBgKey:ze,onSaveRemoveBgKey:er,storedApiKeys:Me,onAddApiKey:Pl,onDeleteApiKey:zs,onToggleApiKey:Gs,onSelectGoogleKey:Md,knowledgeMode:he,onToggleKnowledgeMode:Nd,wikiEnabled:Ne,onToggleWiki:Rd,removeBgEnabled:mt,onToggleRemoveBg:ts,supabaseEnabled:kt,onToggleSupabase:Pd,googleSearchKey:se,googleSearchCx:U,onSaveGoogleSearch:Ii,openRouterKey:q,onSaveOpenRouterKey:Bs,huggingFaceKey:ue,onSaveHuggingFaceKey:Rl,groqKey:le,onSaveGroqKey:Ht,language:r}),u.jsx(Nl,{isOpen:rt,title:Ue.confirmTitle,description:Ue.confirmDesc,confirmText:Ue.yesChange,onConfirm:$s,onCancel:()=>Re(!1)}),u.jsx(z6,{isOpen:y,onClose:()=>w(!1),onNewChat:zo,user:i,onLogout:Ci,onOpenLogin:()=>g(!0),credits:c,isUnlimited:Dt(),language:r,tools:Nh,onSelectTool:E,onExit:t,chatHistory:V}),u.jsxs("div",{className:"flex-1 flex flex-col h-full relative w-full overflow-hidden bg-slate-50/50",children:[u.jsx("header",{className:"absolute top-0 left-0 right-0 z-30 p-4 pointer-events-none",children:u.jsxs("div",{className:"max-w-5xl mx-auto bg-white/80 backdrop-blur-xl border border-white/40 shadow-lg shadow-slate-200/50 rounded-2xl px-4 py-3 flex items-center justify-between pointer-events-auto",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>w(!y),className:"p-2 rounded-xl hover:bg-slate-100 text-slate-600 transition-colors",children:u.jsx(Rb,{className:"w-5 h-5"})}),u.jsx("div",{className:"font-bold text-lg tracking-tight bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent hidden md:block",children:"Fanra Studio"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{onClick:tr,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-full text-xs font-bold text-slate-700 transition-all hover:shadow-sm active:scale-95",children:[u.jsx("img",{src:r==="id"?"https://cdn-icons-png.flaticon.com/128/11654/11654463.png":"https://cdn-icons-png.flaticon.com/128/9906/9906532.png",alt:"Lang",className:"w-4 h-4 object-contain"}),u.jsx("span",{children:r.toUpperCase()})]}),u.jsxs("button",{onClick:()=>Be(!0),className:"p-2 text-slate-400 hover:text-primary hover:bg-slate-100 rounded-full transition-all relative",children:[u.jsx(kf,{className:"w-5 h-5"}),G&&u.jsx("span",{className:"absolute top-1.5 right-1.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]})]})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto pt-24 px-4 scroll-smooth custom-scrollbar",children:u.jsxs("div",{className:"max-w-3xl mx-auto min-h-full flex flex-col pb-4",children:[V.length===0&&!v&&u.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center py-10 animate-fade-in-up",children:[u.jsxs("div",{className:"mb-8 text-center",children:[u.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 mb-3 tracking-tight",children:[Ue.heroTitle," ",Ol.name]}),u.jsx("p",{className:"text-slate-500 text-lg",children:Ue.heroSubtitle})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-5 w-full max-w-2xl px-2",children:[Ho.map(K=>u.jsxs("button",{onClick:()=>E(K),className:"flex flex-col items-center text-center p-4 md:p-6 bg-white border border-slate-100 rounded-2xl shadow-sm hover:border-primary/20 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group h-full",children:[u.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 ${K.color} rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110 shadow-sm`,children:K.icon}),u.jsx("span",{className:"text-xs md:text-sm font-bold text-slate-700 leading-tight",children:Ue[K.nameKey]}),u.jsx("span",{className:"hidden md:block text-[10px] text-slate-400 mt-2 leading-tight",children:Ue[K.descKey]})]},K.id)),u.jsxs("button",{onClick:()=>_(!x),className:`flex flex-col items-center justify-center text-center p-4 md:p-6 bg-slate-50 border border-slate-200 border-dashed rounded-2xl hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-300 group h-full ${x?"":"col-start-2"}`,children:[u.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-slate-100 text-slate-400 rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110",children:u.jsx(hm,{className:"w-6 h-6"})}),u.jsx("span",{className:"text-xs md:text-sm font-bold text-slate-500 group-hover:text-slate-700 leading-tight",children:x?Ue.lessTools:Ue.moreTools})]})]})]}),V.map(K=>u.jsxs("div",{className:`flex flex-col mb-6 animate-fade-in ${K.role==="user"?"items-end":"items-start"}`,children:[K.attachments&&K.attachments.length>0&&u.jsx("div",{className:`flex flex-wrap gap-2 mb-2 max-w-[85%] ${K.role==="user"?"justify-end":"justify-start"}`,children:K.attachments.map((Ee,qe)=>u.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200/50 shadow-sm transition-transform hover:scale-[1.02]",children:u.jsx("img",{src:`data:${Ee.mimeType};base64,${Ee.data}`,alt:Ee.name,className:"h-32 w-auto object-cover md:h-48 rounded-lg bg-slate-100"})},qe))}),(K.text||K.role==="model"&&!K.text)&&u.jsxs("div",{className:`flex flex-col gap-1 max-w-lg lg:max-w-2xl ${K.role==="user"?"items-end":"items-start"}`,children:[u.jsx("div",{className:`relative px-5 py-3.5 rounded-2xl text-sm leading-relaxed shadow-sm break-words group w-full ${K.role==="user"?"bg-white text-slate-800 rounded-tr-sm border border-slate-100 shadow-slate-200/50":"bg-transparent text-slate-700 p-0 shadow-none"}`,children:K.role==="model"&&!K.text?u.jsxs("div",{className:"flex gap-1.5 h-5 items-center",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-100"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-200"})]}):Oo(K)}),u.jsxs("div",{className:`flex items-center gap-2 mt-1 px-1 ${K.role==="user"?"justify-end":"justify-start"}`,children:[K.role==="model"&&K.source&&u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>Ll(K.id),className:`p-1.5 rounded-full transition-all ${de===K.id?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-400 hover:text-slate-600"}`,title:"Info Sumber",children:u.jsx(W2,{className:"w-3.5 h-3.5"})}),de===K.id&&u.jsxs("div",{className:"absolute bottom-8 left-0 z-10 bg-white border border-slate-200 rounded-xl shadow-xl p-2 min-w-[140px] animate-fade-in-up origin-bottom-left flex flex-col gap-1",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider px-1",children:"Sumber Data"}),u.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg bg-slate-50 text-xs font-semibold text-slate-700",children:[K.source==="gemini"&&u.jsx(ly,{className:"w-3.5 h-3.5"}),K.source==="openrouter"&&u.jsx("div",{className:"w-3.5 h-3.5 bg-green-500 rounded-full flex items-center justify-center text-[8px] text-white font-bold",children:"OR"}),K.source==="groq"&&u.jsx(z2,{className:"w-3.5 h-3.5 text-orange-500"}),K.source==="huggingface"&&u.jsx("div",{className:"w-3.5 h-3.5 bg-yellow-400 rounded-full flex items-center justify-center text-[8px] text-black font-bold",children:"HF"}),K.source==="wikipedia"&&u.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center font-serif font-bold text-slate-600",children:"W"}),K.source==="knowledge_base"&&u.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center text-indigo-500 font-bold",children:"DB"}),K.source==="google_search"&&u.jsx(ly,{className:"w-3.5 h-3.5 text-orange-500"}),K.source==="weather"&&u.jsx(K2,{className:"w-3.5 h-3.5 text-blue-400"}),K.source==="country_fact"&&u.jsx(J2,{className:"w-3.5 h-3.5 text-red-500"}),u.jsx("span",{children:K.source==="gemini"?"Google Gemini":K.source==="openrouter"?"OpenRouter":K.source==="groq"?"Groq LPU":K.source==="huggingface"?"HuggingFace":K.source==="wikipedia"?"Wikipedia":K.source==="knowledge_base"?"Database":K.source==="weather"?"Open-Meteo":K.source==="country_fact"?"RestCountries":K.source==="google_search"?"Google":K.source})]})]})]}),K.text&&u.jsx("button",{onClick:()=>Dl(K.text,K.id),className:`p-1.5 rounded-full transition-all ${re===K.id?"bg-green-100 text-green-600":"bg-white border border-slate-100 text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:re===K.id?u.jsx(Gr,{className:"w-3.5 h-3.5"}):u.jsx(Pb,{className:"w-3.5 h-3.5"})})]})]})]},K.id)),v&&u.jsxs("div",{className:"w-full animate-fade-in py-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("button",{onClick:Ai,className:"text-xs flex items-center gap-1 text-slate-500 hover:text-primary px-3 py-1.5 bg-white border border-slate-200 rounded-full shadow-sm hover:shadow transition-all",children:[u.jsx(ci,{className:"w-4 h-4"})," ",Ue.back]}),u.jsx("span",{className:"font-bold text-sm text-slate-700 bg-white px-3 py-1 rounded-full border border-slate-100 shadow-sm",children:Ue[v.nameKey]})]}),T?u.jsxs("div",{className:"space-y-4",children:[!L&&!N.isProcessing&&u.jsx("div",{className:"bg-slate-100 p-4 rounded-2xl border border-slate-200/60 max-w-sm mx-auto shadow-inner",children:u.jsx("img",{src:`data:${T.mimeType};base64,${T.data}`,className:"rounded-xl max-h-60 mx-auto object-contain shadow-sm"})}),v.id===yn.CREATIVE_REMIX&&!L&&u.jsx("textarea",{className:"w-full bg-white border border-slate-200 rounded-2xl p-4 text-sm focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none shadow-sm transition-all",placeholder:Ue.aiPromptPlaceholder,value:k,onChange:K=>A(K.target.value)}),!L&&!N.isProcessing&&u.jsx("button",{onClick:$o,disabled:v.id===yn.CREATIVE_REMIX&&!k.trim(),className:"w-full py-4 bg-primary text-white rounded-2xl font-bold shadow-xl shadow-slate-900/10 active:scale-95 transition-all hover:-translate-y-0.5",children:Ue.generateMagic}),(N.isProcessing||L)&&u.jsx(U6,{originalImage:T,resultImageBase64:L,isProcessing:N.isProcessing,processingText:N.progress,onReset:Ai,language:r})]}):u.jsx(V6,{onImageSelect:Hs,language:r})]}),N.isProcessing&&v&&u.jsx("div",{className:"flex gap-4 animate-fade-in pl-5",children:u.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce"}),u.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-100"}),u.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-200"})]})}),u.jsx("div",{ref:ge})]})}),!v&&u.jsx("div",{className:"shrink-0 w-full px-4 pb-6 pt-2 z-40 bg-slate-50/50 backdrop-blur-sm",children:u.jsxs("div",{className:"max-w-3xl mx-auto",children:[G&&u.jsx("div",{className:"mb-3 animate-fade-in-up",children:u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 flex items-center justify-between shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[u.jsx(ml,{className:"w-5 h-5"}),u.jsx("span",{className:"text-xs font-bold",children:"Limit Chat Habis."})]}),u.jsx("button",{onClick:()=>Ae(!0),className:"text-xs font-bold text-white bg-red-500 hover:bg-red-600 px-3 py-1.5 rounded-lg transition-colors shadow-sm",children:"Cara Dapet API Key?"})]})}),u.jsxs("form",{onSubmit:Ni,className:`relative flex flex-col bg-white rounded-3xl border shadow-2xl shadow-slate-200/60 transition-all duration-300 focus-within:shadow-xl ${G?"border-red-200 opacity-80":"border-slate-200 focus-within:border-slate-300"}`,children:[H.length>0&&u.jsxs("div",{className:"p-3 border-b border-slate-100 bg-slate-50 flex items-start gap-3 animate-fade-in overflow-x-auto custom-scrollbar rounded-t-[22px]",children:[H.map((K,Ee)=>u.jsxs("div",{className:"relative group flex-shrink-0",children:[u.jsx("img",{src:`data:${K.mimeType};base64,${K.data}`,alt:"Preview",className:"h-16 w-16 object-cover rounded-lg border border-slate-200 shadow-sm"}),u.jsx("button",{type:"button",onClick:()=>Dd(Ee),className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full p-0.5 shadow-md hover:bg-red-600 transition-colors",children:u.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Ee)),H.length<3&&u.jsx("div",{onClick:Go,className:"h-16 w-16 rounded-lg border-2 border-dashed border-slate-300 flex items-center justify-center cursor-pointer hover:border-primary hover:bg-white transition-colors flex-shrink-0 text-slate-400 hover:text-primary",children:u.jsx("span",{className:"text-xs font-bold",children:"+"})})]}),u.jsxs("div",{className:"flex items-end gap-1.5 p-2.5",children:[u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>$(!W),className:"p-2.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors flex-shrink-0 mb-0.5",children:u.jsx(H2,{className:"w-5 h-5"})}),W&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>$(!1)}),u.jsxs("div",{className:"absolute bottom-12 left-0 w-48 bg-white border border-slate-200 rounded-xl shadow-xl z-[60] py-1 overflow-hidden animate-fade-in-up origin-bottom-left",children:[u.jsxs("button",{type:"button",onClick:()=>{zo(),$(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-red-500 hover:bg-red-50 flex items-center gap-2",children:[u.jsx(br,{className:"w-4 h-4"}),"Clear Chat"]}),u.jsxs("button",{type:"button",onClick:()=>{Be(!0),$(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-2",children:[u.jsx(kf,{className:"w-4 h-4"}),"Settings"]})]})]})]}),u.jsx("input",{type:"file",ref:Ce,className:"hidden",accept:"image/*",multiple:!0,onChange:Ul}),u.jsx("button",{type:"button",onClick:Go,className:"p-2.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors flex-shrink-0 mb-0.5",children:u.jsx(uy,{className:"w-5 h-5"})}),u.jsx("textarea",{ref:Se,value:D,onChange:K=>I(K.target.value),onKeyDown:K=>{K.key==="Enter"&&!K.shiftKey&&(K.preventDefault(),Ni(K))},disabled:G,placeholder:G?"Chat Terkunci (Limit Habis). Tambah Key dulu ya.":he?"(Knowledge Mode Active)":H.length>0?Ue.aiPromptPlaceholder:Ue.chatPlaceholder,className:"flex-1 bg-transparent border-none focus:ring-0 focus:outline-none resize-none max-h-32 py-3 px-2 text-sm text-primary placeholder:text-slate-400 leading-relaxed custom-scrollbar disabled:text-slate-400 disabled:cursor-not-allowed",rows:1,style:{minHeight:"44px",overflowY:"auto"}}),N.isProcessing&&!v?u.jsx("button",{type:"button",onClick:kr,className:"p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 bg-slate-900 text-white hover:bg-slate-700 animate-pulse",title:"Stop Generation",children:u.jsx(Mb,{className:"w-5 h-5"})}):u.jsx("button",{type:"submit",disabled:!D.trim()&&H.length===0||N.isProcessing||G,className:`p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 ${he?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-primary text-white hover:bg-slate-800 disabled:bg-slate-200 disabled:text-slate-400 disabled:cursor-not-allowed"}`,children:u.jsx("svg",{className:"w-5 h-5 transform rotate-90",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})]})})]})]})}function Eu(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var W1={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,s,i){function o(c,d){if(!s[c]){if(!r[c]){var m=typeof Eu=="function"&&Eu;if(!d&&m)return m(c,!0);if(a)return a(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var y=s[c]={exports:{}};r[c][0].call(y.exports,function(w){var x=r[c][1][w];return o(x||w)},y,y.exports,n,r,s,i)}return s[c].exports}for(var a=typeof Eu=="function"&&Eu,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var c,d,m,g,y,w,x,_=[],v=0,E=l.length,T=E,P=i.getTypeOf(l)!=="string";v<l.length;)T=E-v,m=P?(c=l[v++],d=v<E?l[v++]:0,v<E?l[v++]:0):(c=l.charCodeAt(v++),d=v<E?l.charCodeAt(v++):0,v<E?l.charCodeAt(v++):0),g=c>>2,y=(3&c)<<4|d>>4,w=1<T?(15&d)<<2|m>>6:64,x=2<T?63&m:64,_.push(a.charAt(g)+a.charAt(y)+a.charAt(w)+a.charAt(x));return _.join("")},s.decode=function(l){var c,d,m,g,y,w,x=0,_=0,v="data:";if(l.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var E,T=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&T--,l.charAt(l.length-2)===a.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=o.uint8array?new Uint8Array(0|T):new Array(0|T);x<l.length;)c=a.indexOf(l.charAt(x++))<<2|(g=a.indexOf(l.charAt(x++)))>>4,d=(15&g)<<4|(y=a.indexOf(l.charAt(x++)))>>2,m=(3&y)<<6|(w=a.indexOf(l.charAt(x++))),E[_++]=c,y!==64&&(E[_++]=d),w!==64&&(E[_++]=m);return E}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(d,m,g,y,w){this.compressedSize=d,this.uncompressedSize=m,this.crc32=g,this.compression=y,this.compressedContent=w}c.prototype={getContentWorker:function(){var d=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),m=this;return d.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,m,g){return d.pipe(new a).pipe(new l("uncompressedSize")).pipe(m.compressWorker(g)).pipe(new l("compressedSize")).withStreamInfo("compression",m)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(c,d,m,g){var y=o,w=g+m;c^=-1;for(var x=g;x<w;x++)c=c>>>8^y[255&(c^d[x])];return-1^c}(0|l,a,a.length,0):function(c,d,m,g){var y=o,w=g+m;c^=-1;for(var x=g;x<w;x++)c=c>>>8^y[255&(c^d.charCodeAt(x))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=i?"uint8array":"array";function d(m,g){l.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=g,this.meta={}}s.magic="\b\0",a.inherits(d,l),d.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,m.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(g){m.push({data:g,meta:m.meta})}},s.compressWorker=function(m){return new d("Deflate",m)},s.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(y,w){var x,_="";for(x=0;x<w;x++)_+=String.fromCharCode(255&y),y>>>=8;return _}function o(y,w,x,_,v,E){var T,P,L=y.file,B=y.compression,k=E!==c.utf8encode,A=a.transformTo("string",E(L.name)),N=a.transformTo("string",c.utf8encode(L.name)),M=L.comment,V=a.transformTo("string",E(M)),R=a.transformTo("string",c.utf8encode(M)),D=N.length!==L.name.length,I=R.length!==M.length,H="",fe="",re="",Z=L.dir,X=L.date,oe={crc32:0,compressedSize:0,uncompressedSize:0};w&&!x||(oe.crc32=y.crc32,oe.compressedSize=y.compressedSize,oe.uncompressedSize=y.uncompressedSize);var W=0;w&&(W|=8),k||!D&&!I||(W|=2048);var $=0,de=0;Z&&($|=16),v==="UNIX"?(de=798,$|=function(Y,ge){var Ce=Y;return Y||(Ce=ge?16893:33204),(65535&Ce)<<16}(L.unixPermissions,Z)):(de=20,$|=function(Y){return 63&(Y||0)}(L.dosPermissions)),T=X.getUTCHours(),T<<=6,T|=X.getUTCMinutes(),T<<=5,T|=X.getUTCSeconds()/2,P=X.getUTCFullYear()-1980,P<<=4,P|=X.getUTCMonth()+1,P<<=5,P|=X.getUTCDate(),D&&(fe=i(1,1)+i(d(A),4)+N,H+="up"+i(fe.length,2)+fe),I&&(re=i(1,1)+i(d(V),4)+R,H+="uc"+i(re.length,2)+re);var te="";return te+=`
\0`,te+=i(W,2),te+=B.magic,te+=i(T,2),te+=i(P,2),te+=i(oe.crc32,4),te+=i(oe.compressedSize,4),te+=i(oe.uncompressedSize,4),te+=i(A.length,2),te+=i(H.length,2),{fileRecord:m.LOCAL_FILE_HEADER+te+A+H,dirRecord:m.CENTRAL_FILE_HEADER+i(de,2)+te+i(V.length,2)+"\0\0\0\0"+i($,4)+i(_,4)+A+H+V}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),d=n("../crc32"),m=n("../signature");function g(y,w,x,_){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=x,this.encodeFileName=_,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(g,l),g.prototype.push=function(y){var w=y.meta.percent||0,x=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,l.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:x?(w+100*(x-_-1))/x:100}}))},g.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var w=this.streamFiles&&!y.file.dir;if(w){var x=o(y,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(y){this.accumulate=!1;var w=this.streamFiles&&!y.file.dir,x=o(y,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),w)this.push({data:function(_){return m.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var y=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var x=this.bytesWritten-y,_=function(v,E,T,P,L){var B=a.transformTo("string",L(P));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(v,2)+i(v,2)+i(E,4)+i(T,4)+i(B.length,2)+B}(this.dirRecords.length,x,y,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(y){this._sources.push(y);var w=this;return y.on("data",function(x){w.processChunk(x)}),y.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),y.on("error",function(x){w.error(x)}),this},g.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(y){var w=this._sources;if(!l.prototype.error.call(this,y))return!1;for(var x=0;x<w.length;x++)try{w[x].error(y)}catch{}return!0},g.prototype.lock=function(){l.prototype.lock.call(this);for(var y=this._sources,w=0;w<y.length;w++)y[w].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,l,c){var d=new o(l.streamFiles,c,l.platform,l.encodeFileName),m=0;try{a.forEach(function(g,y){m++;var w=function(E,T){var P=E||T,L=i[P];if(!L)throw new Error(P+" is not a valid compression method !");return L}(y.options.compression,l.compression),x=y.options.compressionOptions||l.compressionOptions||{},_=y.dir,v=y.date;y._compressWorker(w,x).withStreamInfo("file",{name:g,dir:_,date:v,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(d)}),d.entriesCount=m}catch(g){d.error(g)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function m(g){return new o.Promise(function(y,w){var x=g.decompressed.getContentWorker().pipe(new c);x.on("error",function(_){w(_)}).on("end",function(){x.streamInfo.crc32!==g.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(g,y){var w=this;return y=i.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",g,!0,y.optimizedBinaryString,y.base64).then(function(x){var _=new l(y);return _.load(x),_}).then(function(x){var _=[o.Promise.resolve(x)],v=x.files;if(y.checkCRC32)for(var E=0;E<v.length;E++)_.push(m(v[E]));return o.Promise.all(_)}).then(function(x){for(var _=x.shift(),v=_.files,E=0;E<v.length;E++){var T=v[E],P=T.fileNameStr,L=i.resolve(T.fileNameStr);w.file(L,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:y.createFolders}),T.dir||(w.file(L).unsafeOriginalName=P)}return _.zipComment.length&&(w.comment=_.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,l,c){i.call(this,l),this._helper=a;var d=this;a.on("data",function(m,g){d.push(m)||d._helper.pause(),c&&c(g)}).on("error",function(m){d.emit("error",m)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(L,B,k){var A,N=a.getTypeOf(B),M=a.extend(k||{},d);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(L=v(L)),M.createFolders&&(A=_(L))&&E.call(this,A,!0);var V=N==="string"&&M.binary===!1&&M.base64===!1;k&&k.binary!==void 0||(M.binary=!V),(B instanceof m&&B.uncompressedSize===0||M.dir||!B||B.length===0)&&(M.base64=!1,M.binary=!0,B="",M.compression="STORE",N="string");var R=null;R=B instanceof m||B instanceof l?B:w.isNode&&w.isStream(B)?new x(L,B):a.prepareContent(L,B,M.binary,M.optimizedBinaryString,M.base64);var D=new g(L,R,M);this.files[L]=D}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),d=n("./defaults"),m=n("./compressedObject"),g=n("./zipObject"),y=n("./generate"),w=n("./nodejsUtils"),x=n("./nodejs/NodejsStreamInputAdapter"),_=function(L){L.slice(-1)==="/"&&(L=L.substring(0,L.length-1));var B=L.lastIndexOf("/");return 0<B?L.substring(0,B):""},v=function(L){return L.slice(-1)!=="/"&&(L+="/"),L},E=function(L,B){return B=B!==void 0?B:d.createFolders,L=v(L),this.files[L]||i.call(this,L,null,{dir:!0,createFolders:B}),this.files[L]};function T(L){return Object.prototype.toString.call(L)==="[object RegExp]"}var P={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(L){var B,k,A;for(B in this.files)A=this.files[B],(k=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&L(k,A)},filter:function(L){var B=[];return this.forEach(function(k,A){L(k,A)&&B.push(A)}),B},file:function(L,B,k){if(arguments.length!==1)return L=this.root+L,i.call(this,L,B,k),this;if(T(L)){var A=L;return this.filter(function(M,V){return!V.dir&&A.test(M)})}var N=this.files[this.root+L];return N&&!N.dir?N:null},folder:function(L){if(!L)return this;if(T(L))return this.filter(function(N,M){return M.dir&&L.test(N)});var B=this.root+L,k=E.call(this,B),A=this.clone();return A.root=k.name,A},remove:function(L){L=this.root+L;var B=this.files[L];if(B||(L.slice(-1)!=="/"&&(L+="/"),B=this.files[L]),B&&!B.dir)delete this.files[L];else for(var k=this.filter(function(N,M){return M.name.slice(0,L.length)===L}),A=0;A<k.length;A++)delete this.files[k[A].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(L){var B,k={};try{if((k=a.extend(L||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");a.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var A=k.comment||this.comment||"";B=y.generateWorker(this,k,A)}catch(N){(B=new l("error")).error(N)}return new c(B,k.type||"string",k.mimeType)},generateAsync:function(L,B){return this.generateInternalStream(L).accumulate(B)},generateNodeStream:function(L,B){return(L=L||{}).type||(L.type="nodebuffer"),this.generateInternalStream(L).toNodejsStream(B)}};r.exports=P},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),m=a.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===l&&this.data[g+1]===c&&this.data[g+2]===d&&this.data[g+3]===m)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),m=a.charCodeAt(3),g=this.readData(4);return l===g[0]&&c===g[1]&&d===g[2]&&m===g[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(m){var g=i.getTypeOf(m);return i.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new c(m):o.uint8array?new d(i.transformTo("uint8array",m)):new a(i.transformTo("array",m)):new l(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=i.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),d=n("../external"),m=null;if(c.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(w,x){return new d.Promise(function(_,v){var E=[],T=w._internalType,P=w._outputType,L=w._mimeType;w.on("data",function(B,k){E.push(B),x&&x(k)}).on("error",function(B){E=[],v(B)}).on("end",function(){try{var B=function(k,A,N){switch(k){case"blob":return i.newBlob(i.transformTo("arraybuffer",A),N);case"base64":return l.encode(A);default:return i.transformTo(k,A)}}(P,function(k,A){var N,M=0,V=null,R=0;for(N=0;N<A.length;N++)R+=A[N].length;switch(k){case"string":return A.join("");case"array":return Array.prototype.concat.apply([],A);case"uint8array":for(V=new Uint8Array(R),N=0;N<A.length;N++)V.set(A[N],M),M+=A[N].length;return V;case"nodebuffer":return Buffer.concat(A);default:throw new Error("concat : unsupported type '"+k+"'")}}(T,E),L);_(B)}catch(k){v(k)}E=[]}).resume()})}function y(w,x,_){var v=x;switch(x){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=x,this._mimeType=_,i.checkSupport(v),this._worker=w.pipe(new o(v)),w.lock()}catch(E){this._worker=new a("error"),this._worker.error(E)}}y.prototype={accumulate:function(w){return g(this,w)},on:function(w,x){var _=this;return w==="data"?this._worker.on(w,function(v){x.call(_,v.data,v.meta)}):this._worker.on(w,function(){i.delay(x,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function m(){l.call(this,"utf-8 decode"),this.leftOver=null}function g(){l.call(this,"utf-8 encode")}s.utf8encode=function(y){return o.nodebuffer?a.newBufferFrom(y,"utf-8"):function(w){var x,_,v,E,T,P=w.length,L=0;for(E=0;E<P;E++)(64512&(_=w.charCodeAt(E)))==55296&&E+1<P&&(64512&(v=w.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),E++),L+=_<128?1:_<2048?2:_<65536?3:4;for(x=o.uint8array?new Uint8Array(L):new Array(L),E=T=0;T<L;E++)(64512&(_=w.charCodeAt(E)))==55296&&E+1<P&&(64512&(v=w.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),E++),_<128?x[T++]=_:(_<2048?x[T++]=192|_>>>6:(_<65536?x[T++]=224|_>>>12:(x[T++]=240|_>>>18,x[T++]=128|_>>>12&63),x[T++]=128|_>>>6&63),x[T++]=128|63&_);return x}(y)},s.utf8decode=function(y){return o.nodebuffer?i.transformTo("nodebuffer",y).toString("utf-8"):function(w){var x,_,v,E,T=w.length,P=new Array(2*T);for(x=_=0;x<T;)if((v=w[x++])<128)P[_++]=v;else if(4<(E=c[v]))P[_++]=65533,x+=E-1;else{for(v&=E===2?31:E===3?15:7;1<E&&x<T;)v=v<<6|63&w[x++],E--;1<E?P[_++]=65533:v<65536?P[_++]=v:(v-=65536,P[_++]=55296|v>>10&1023,P[_++]=56320|1023&v)}return P.length!==_&&(P.subarray?P=P.subarray(0,_):P.length=_),i.applyFromCharCode(P)}(y=i.transformTo(o.uint8array?"uint8array":"array",y))},i.inherits(m,l),m.prototype.processChunk=function(y){var w=i.transformTo(o.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=w;(w=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),w.set(x,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var _=function(E,T){var P;for((T=T||E.length)>E.length&&(T=E.length),P=T-1;0<=P&&(192&E[P])==128;)P--;return P<0||P===0?T:P+c[E[P]]>T?P:T}(w),v=w;_!==w.length&&(o.uint8array?(v=w.subarray(0,_),this.leftOver=w.subarray(_,w.length)):(v=w.slice(0,_),this.leftOver=w.slice(_,w.length))),this.push({data:s.utf8decode(v),meta:y.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=m,i.inherits(g,l),g.prototype.processChunk=function(y){this.push({data:s.utf8encode(y.data),meta:y.meta})},s.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(x){return x}function d(x,_){for(var v=0;v<x.length;++v)_[v]=255&x.charCodeAt(v);return _}n("setimmediate"),s.newBlob=function(x,_){s.checkSupport("blob");try{return new Blob([x],{type:_})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(x),v.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(x,_,v){var E=[],T=0,P=x.length;if(P<=v)return String.fromCharCode.apply(null,x);for(;T<P;)_==="array"||_==="nodebuffer"?E.push(String.fromCharCode.apply(null,x.slice(T,Math.min(T+v,P)))):E.push(String.fromCharCode.apply(null,x.subarray(T,Math.min(T+v,P)))),T+=v;return E.join("")},stringifyByChar:function(x){for(var _="",v=0;v<x.length;v++)_+=String.fromCharCode(x[v]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function g(x){var _=65536,v=s.getTypeOf(x),E=!0;if(v==="uint8array"?E=m.applyCanBeUsed.uint8array:v==="nodebuffer"&&(E=m.applyCanBeUsed.nodebuffer),E)for(;1<_;)try{return m.stringifyByChunk(x,v,_)}catch{_=Math.floor(_/2)}return m.stringifyByChar(x)}function y(x,_){for(var v=0;v<x.length;v++)_[v]=x[v];return _}s.applyFromCharCode=g;var w={};w.string={string:c,array:function(x){return d(x,new Array(x.length))},arraybuffer:function(x){return w.string.uint8array(x).buffer},uint8array:function(x){return d(x,new Uint8Array(x.length))},nodebuffer:function(x){return d(x,a.allocBuffer(x.length))}},w.array={string:g,array:c,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(x)}},w.arraybuffer={string:function(x){return g(new Uint8Array(x))},array:function(x){return y(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:c,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(new Uint8Array(x))}},w.uint8array={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:c,nodebuffer:function(x){return a.newBufferFrom(x)}},w.nodebuffer={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return w.nodebuffer.uint8array(x).buffer},uint8array:function(x){return y(x,new Uint8Array(x.length))},nodebuffer:c},s.transformTo=function(x,_){if(_=_||"",!x)return _;s.checkSupport(x);var v=s.getTypeOf(_);return w[v][x](_)},s.resolve=function(x){for(var _=x.split("/"),v=[],E=0;E<_.length;E++){var T=_[E];T==="."||T===""&&E!==0&&E!==_.length-1||(T===".."?v.pop():v.push(T))}return v.join("/")},s.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(x)?"nodebuffer":i.uint8array&&x instanceof Uint8Array?"uint8array":i.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(x){if(!i[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(x){var _,v,E="";for(v=0;v<(x||"").length;v++)E+="\\x"+((_=x.charCodeAt(v))<16?"0":"")+_.toString(16).toUpperCase();return E},s.delay=function(x,_,v){setImmediate(function(){x.apply(v||null,_||[])})},s.inherits=function(x,_){function v(){}v.prototype=_.prototype,x.prototype=new v},s.extend=function(){var x,_,v={};for(x=0;x<arguments.length;x++)for(_ in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],_)&&v[_]===void 0&&(v[_]=arguments[x][_]);return v},s.prepareContent=function(x,_,v,E,T){return l.Promise.resolve(_).then(function(P){return i.blob&&(P instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(P))!==-1)&&typeof FileReader<"u"?new l.Promise(function(L,B){var k=new FileReader;k.onload=function(A){L(A.target.result)},k.onerror=function(A){B(A.target.error)},k.readAsArrayBuffer(P)}):P}).then(function(P){var L=s.getTypeOf(P);return L?(L==="arraybuffer"?P=s.transformTo("uint8array",P):L==="string"&&(T?P=o.decode(P):v&&E!==!0&&(P=function(B){return d(B,i.uint8array?new Uint8Array(B.length):new Array(B.length))}(P))),P):l.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function d(m){this.files=[],this.loadOptions=m}d.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(m)+")")}},isSignature:function(m,g){var y=this.reader.index;this.reader.setIndex(m);var w=this.reader.readString(4)===g;return this.reader.setIndex(y),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),g=c.uint8array?"uint8array":"array",y=o.transformTo(g,m);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,g,y,w=this.zip64EndOfCentralSize-44;0<w;)m=this.reader.readInt(2),g=this.reader.readInt(4),y=this.reader.readData(g),this.zip64ExtensibleData[m]={id:m,length:g,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,g;for(m=0;m<this.files.length;m++)g=this.files[m],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(m=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var g=m;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var w=g-y;if(0<w)this.isSignature(g,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),d=n("./compressions"),m=n("./support");function g(y,w){this.options=y,this.loadOptions=w}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var w,x;if(y.skip(22),this.fileNameLength=y.readInt(2),x=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(_){for(var v in d)if(Object.prototype.hasOwnProperty.call(d,v)&&d[v].magic===_)return d[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,w,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var w=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(w),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var w,x,_,v=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<v;)w=y.readInt(2),x=y.readInt(2),_=y.readData(x),this.extraFields[w]={id:w,length:x,value:_};y.setIndex(v)},handleUTF8:function(){var y=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var x=o.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var v=o.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var w=i(y.value);return w.readInt(1)!==1||l(this.fileName)!==w.readInt(4)?null:c.utf8decode(w.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var w=i(y.value);return w.readInt(1)!==1||l(this.fileComment)!==w.readInt(4)?null:c.utf8decode(w.readData(y.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(w,x,_){this.name=w,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=x,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(w){var x=null,_="string";try{if(!w)throw new Error("No output type specified.");var v=(_=w.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),x=this._decompressWorker();var E=!this._dataBinary;E&&!v&&(x=x.pipe(new l.Utf8EncodeWorker)),!E&&v&&(x=x.pipe(new l.Utf8DecodeWorker))}catch(T){(x=new d("error")).error(T)}return new o(x,_,"")},async:function(w,x){return this.internalStream(w).accumulate(x)},nodeStream:function(w,x){return this.internalStream(w||"nodebuffer").toNodejsStream(x)},_compressWorker:function(w,x){if(this._data instanceof c&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(_,w,x)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<m.length;y++)i.prototype[m[y]]=g;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var c=0,d=new l(w),m=i.document.createTextNode("");d.observe(m,{characterData:!0}),o=function(){m.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var x=i.document.createElement("script");x.onreadystatechange=function(){w(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},i.document.documentElement.appendChild(x)}:function(){setTimeout(w,0)};else{var g=new i.MessageChannel;g.port1.onmessage=w,o=function(){g.port2.postMessage(0)}}var y=[];function w(){var x,_;a=!0;for(var v=y.length;v;){for(_=y,y=[],x=-1;++x<v;)_[x]();v=y.length}a=!1}r.exports=function(x){y.push(x)!==1||a||o()}}).call(this,typeof Dr<"u"?Dr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function m(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,v!==o&&x(this,v)}function g(v,E,T){this.promise=v,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function y(v,E,T){i(function(){var P;try{P=E(T)}catch(L){return a.reject(v,L)}P===v?a.reject(v,new TypeError("Cannot resolve promise with itself")):a.resolve(v,P)})}function w(v){var E=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof E=="function")return function(){E.apply(v,arguments)}}function x(v,E){var T=!1;function P(k){T||(T=!0,a.reject(v,k))}function L(k){T||(T=!0,a.resolve(v,k))}var B=_(function(){E(L,P)});B.status==="error"&&P(B.value)}function _(v,E){var T={};try{T.value=v(E),T.status="success"}catch(P){T.status="error",T.value=P}return T}(r.exports=m).prototype.finally=function(v){if(typeof v!="function")return this;var E=this.constructor;return this.then(function(T){return E.resolve(v()).then(function(){return T})},function(T){return E.resolve(v()).then(function(){throw T})})},m.prototype.catch=function(v){return this.then(null,v)},m.prototype.then=function(v,E){if(typeof v!="function"&&this.state===c||typeof E!="function"&&this.state===l)return this;var T=new this.constructor(o);return this.state!==d?y(T,this.state===c?v:E,this.outcome):this.queue.push(new g(T,v,E)),T},g.prototype.callFulfilled=function(v){a.resolve(this.promise,v)},g.prototype.otherCallFulfilled=function(v){y(this.promise,this.onFulfilled,v)},g.prototype.callRejected=function(v){a.reject(this.promise,v)},g.prototype.otherCallRejected=function(v){y(this.promise,this.onRejected,v)},a.resolve=function(v,E){var T=_(w,E);if(T.status==="error")return a.reject(v,T.value);var P=T.value;if(P)x(v,P);else{v.state=c,v.outcome=E;for(var L=-1,B=v.queue.length;++L<B;)v.queue[L].callFulfilled(E)}return v},a.reject=function(v,E){v.state=l,v.outcome=E;for(var T=-1,P=v.queue.length;++T<P;)v.queue[T].callRejected(E);return v},m.resolve=function(v){return v instanceof this?v:a.resolve(new this(o),v)},m.reject=function(v){var E=new this(o);return a.reject(E,v)},m.all=function(v){var E=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=v.length,P=!1;if(!T)return this.resolve([]);for(var L=new Array(T),B=0,k=-1,A=new this(o);++k<T;)N(v[k],k);return A;function N(M,V){E.resolve(M).then(function(R){L[V]=R,++B!==T||P||(P=!0,a.resolve(A,L))},function(R){P||(P=!0,a.reject(A,R))})}},m.race=function(v){var E=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=v.length,P=!1;if(!T)return this.resolve([]);for(var L=-1,B=new this(o);++L<T;)k=v[L],E.resolve(k).then(function(A){P||(P=!0,a.resolve(B,A))},function(A){P||(P=!0,a.reject(B,A))});var k;return B}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),d=Object.prototype.toString,m=0,g=-1,y=0,w=8;function x(v){if(!(this instanceof x))return new x(v);this.options=o.assign({level:g,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},v||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var T=i.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(T!==m)throw new Error(l[T]);if(E.header&&i.deflateSetHeader(this.strm,E.header),E.dictionary){var P;if(P=typeof E.dictionary=="string"?a.string2buf(E.dictionary):d.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(T=i.deflateSetDictionary(this.strm,P))!==m)throw new Error(l[T]);this._dict_set=!0}}function _(v,E){var T=new x(E);if(T.push(v,!0),T.err)throw T.msg||l[T.err];return T.result}x.prototype.push=function(v,E){var T,P,L=this.strm,B=this.options.chunkSize;if(this.ended)return!1;P=E===~~E?E:E===!0?4:0,typeof v=="string"?L.input=a.string2buf(v):d.call(v)==="[object ArrayBuffer]"?L.input=new Uint8Array(v):L.input=v,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new o.Buf8(B),L.next_out=0,L.avail_out=B),(T=i.deflate(L,P))!==1&&T!==m)return this.onEnd(T),!(this.ended=!0);L.avail_out!==0&&(L.avail_in!==0||P!==4&&P!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(L.output,L.next_out))):this.onData(o.shrinkBuf(L.output,L.next_out)))}while((0<L.avail_in||L.avail_out===0)&&T!==1);return P===4?(T=i.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===m):P!==2||(this.onEnd(m),!(L.avail_out=0))},x.prototype.onData=function(v){this.chunks.push(v)},x.prototype.onEnd=function(v){v===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Deflate=x,s.deflate=_,s.deflateRaw=function(v,E){return(E=E||{}).raw=!0,_(v,E)},s.gzip=function(v,E){return(E=E||{}).gzip=!0,_(v,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),d=n("./zlib/zstream"),m=n("./zlib/gzheader"),g=Object.prototype.toString;function y(x){if(!(this instanceof y))return new y(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||x&&x.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var v=i.inflateInit2(this.strm,_.windowBits);if(v!==l.Z_OK)throw new Error(c[v]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function w(x,_){var v=new y(_);if(v.push(x,!0),v.err)throw v.msg||c[v.err];return v.result}y.prototype.push=function(x,_){var v,E,T,P,L,B,k=this.strm,A=this.options.chunkSize,N=this.options.dictionary,M=!1;if(this.ended)return!1;E=_===~~_?_:_===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof x=="string"?k.input=a.binstring2buf(x):g.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(A),k.next_out=0,k.avail_out=A),(v=i.inflate(k,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&N&&(B=typeof N=="string"?a.string2buf(N):g.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,v=i.inflateSetDictionary(this.strm,B)),v===l.Z_BUF_ERROR&&M===!0&&(v=l.Z_OK,M=!1),v!==l.Z_STREAM_END&&v!==l.Z_OK)return this.onEnd(v),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&v!==l.Z_STREAM_END&&(k.avail_in!==0||E!==l.Z_FINISH&&E!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=a.utf8border(k.output,k.next_out),P=k.next_out-T,L=a.buf2string(k.output,T),k.next_out=P,k.avail_out=A-P,P&&o.arraySet(k.output,k.output,T,P,0),this.onData(L)):this.onData(o.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(M=!0)}while((0<k.avail_in||k.avail_out===0)&&v!==l.Z_STREAM_END);return v===l.Z_STREAM_END&&(E=l.Z_FINISH),E===l.Z_FINISH?(v=i.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===l.Z_OK):E!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(k.avail_out=0))},y.prototype.onData=function(x){this.chunks.push(x)},y.prototype.onEnd=function(x){x===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},s.Inflate=y,s.inflate=w,s.inflateRaw=function(x,_){return(_=_||{}).raw=!0,w(x,_)},s.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var m in d)d.hasOwnProperty(m)&&(l[m]=d[m])}}return l},s.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,d,m,g){if(c.subarray&&l.subarray)l.set(c.subarray(d,d+m),g);else for(var y=0;y<m;y++)l[g+y]=c[d+y]},flattenChunks:function(l){var c,d,m,g,y,w;for(c=m=0,d=l.length;c<d;c++)m+=l[c].length;for(w=new Uint8Array(m),c=g=0,d=l.length;c<d;c++)y=l[c],w.set(y,g),g+=y.length;return w}},a={arraySet:function(l,c,d,m,g){for(var y=0;y<m;y++)l[g+y]=c[d+y]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(m,g){if(g<65537&&(m.subarray&&a||!m.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(m,g));for(var y="",w=0;w<g;w++)y+=String.fromCharCode(m[w]);return y}l[254]=l[254]=1,s.string2buf=function(m){var g,y,w,x,_,v=m.length,E=0;for(x=0;x<v;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(w=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),x++),E+=y<128?1:y<2048?2:y<65536?3:4;for(g=new i.Buf8(E),x=_=0;_<E;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(w=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),x++),y<128?g[_++]=y:(y<2048?g[_++]=192|y>>>6:(y<65536?g[_++]=224|y>>>12:(g[_++]=240|y>>>18,g[_++]=128|y>>>12&63),g[_++]=128|y>>>6&63),g[_++]=128|63&y);return g},s.buf2binstring=function(m){return d(m,m.length)},s.binstring2buf=function(m){for(var g=new i.Buf8(m.length),y=0,w=g.length;y<w;y++)g[y]=m.charCodeAt(y);return g},s.buf2string=function(m,g){var y,w,x,_,v=g||m.length,E=new Array(2*v);for(y=w=0;y<v;)if((x=m[y++])<128)E[w++]=x;else if(4<(_=l[x]))E[w++]=65533,y+=_-1;else{for(x&=_===2?31:_===3?15:7;1<_&&y<v;)x=x<<6|63&m[y++],_--;1<_?E[w++]=65533:x<65536?E[w++]=x:(x-=65536,E[w++]=55296|x>>10&1023,E[w++]=56320|1023&x)}return d(E,w)},s.utf8border=function(m,g){var y;for((g=g||m.length)>m.length&&(g=m.length),y=g-1;0<=y&&(192&m[y])==128;)y--;return y<0||y===0?g:y+l[m[y]]>g?y:g}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,l){for(var c=65535&i|0,d=i>>>16&65535|0,m=0;a!==0;){for(a-=m=2e3<a?2e3:a;d=d+(c=c+o[l++]|0)|0,--m;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,c){var d=i,m=c+l;o^=-1;for(var g=c;g<m;g++)o=o>>>8^d[255&(o^a[g])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),d=n("./messages"),m=0,g=4,y=0,w=-2,x=-1,_=4,v=2,E=8,T=9,P=286,L=30,B=19,k=2*P+1,A=15,N=3,M=258,V=M+N+1,R=42,D=113,I=1,H=2,fe=3,re=4;function Z(C,se){return C.msg=d[se],se}function X(C){return(C<<1)-(4<C?9:0)}function oe(C){for(var se=C.length;0<=--se;)C[se]=0}function W(C){var se=C.state,ee=se.pending;ee>C.avail_out&&(ee=C.avail_out),ee!==0&&(o.arraySet(C.output,se.pending_buf,se.pending_out,ee,C.next_out),C.next_out+=ee,se.pending_out+=ee,C.total_out+=ee,C.avail_out-=ee,se.pending-=ee,se.pending===0&&(se.pending_out=0))}function $(C,se){a._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,se),C.block_start=C.strstart,W(C.strm)}function de(C,se){C.pending_buf[C.pending++]=se}function te(C,se){C.pending_buf[C.pending++]=se>>>8&255,C.pending_buf[C.pending++]=255&se}function Y(C,se){var ee,U,z=C.max_chain_length,q=C.strstart,ie=C.prev_length,ue=C.nice_match,Q=C.strstart>C.w_size-V?C.strstart-(C.w_size-V):0,le=C.window,ve=C.w_mask,he=C.prev,xe=C.strstart+M,Ne=le[q+ie-1],Pe=le[q+ie];C.prev_length>=C.good_match&&(z>>=2),ue>C.lookahead&&(ue=C.lookahead);do if(le[(ee=se)+ie]===Pe&&le[ee+ie-1]===Ne&&le[ee]===le[q]&&le[++ee]===le[q+1]){q+=2,ee++;do;while(le[++q]===le[++ee]&&le[++q]===le[++ee]&&le[++q]===le[++ee]&&le[++q]===le[++ee]&&le[++q]===le[++ee]&&le[++q]===le[++ee]&&le[++q]===le[++ee]&&le[++q]===le[++ee]&&q<xe);if(U=M-(xe-q),q=xe-M,ie<U){if(C.match_start=se,ue<=(ie=U))break;Ne=le[q+ie-1],Pe=le[q+ie]}}while((se=he[se&ve])>Q&&--z!=0);return ie<=C.lookahead?ie:C.lookahead}function ge(C){var se,ee,U,z,q,ie,ue,Q,le,ve,he=C.w_size;do{if(z=C.window_size-C.lookahead-C.strstart,C.strstart>=he+(he-V)){for(o.arraySet(C.window,C.window,he,he,0),C.match_start-=he,C.strstart-=he,C.block_start-=he,se=ee=C.hash_size;U=C.head[--se],C.head[se]=he<=U?U-he:0,--ee;);for(se=ee=he;U=C.prev[--se],C.prev[se]=he<=U?U-he:0,--ee;);z+=he}if(C.strm.avail_in===0)break;if(ie=C.strm,ue=C.window,Q=C.strstart+C.lookahead,le=z,ve=void 0,ve=ie.avail_in,le<ve&&(ve=le),ee=ve===0?0:(ie.avail_in-=ve,o.arraySet(ue,ie.input,ie.next_in,ve,Q),ie.state.wrap===1?ie.adler=l(ie.adler,ue,ve,Q):ie.state.wrap===2&&(ie.adler=c(ie.adler,ue,ve,Q)),ie.next_in+=ve,ie.total_in+=ve,ve),C.lookahead+=ee,C.lookahead+C.insert>=N)for(q=C.strstart-C.insert,C.ins_h=C.window[q],C.ins_h=(C.ins_h<<C.hash_shift^C.window[q+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[q+N-1])&C.hash_mask,C.prev[q&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=q,q++,C.insert--,!(C.lookahead+C.insert<N)););}while(C.lookahead<V&&C.strm.avail_in!==0)}function Ce(C,se){for(var ee,U;;){if(C.lookahead<V){if(ge(C),C.lookahead<V&&se===m)return I;if(C.lookahead===0)break}if(ee=0,C.lookahead>=N&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+N-1])&C.hash_mask,ee=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),ee!==0&&C.strstart-ee<=C.w_size-V&&(C.match_length=Y(C,ee)),C.match_length>=N)if(U=a._tr_tally(C,C.strstart-C.match_start,C.match_length-N),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=N){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+N-1])&C.hash_mask,ee=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else U=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(U&&($(C,!1),C.strm.avail_out===0))return I}return C.insert=C.strstart<N-1?C.strstart:N-1,se===g?($(C,!0),C.strm.avail_out===0?fe:re):C.last_lit&&($(C,!1),C.strm.avail_out===0)?I:H}function Se(C,se){for(var ee,U,z;;){if(C.lookahead<V){if(ge(C),C.lookahead<V&&se===m)return I;if(C.lookahead===0)break}if(ee=0,C.lookahead>=N&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+N-1])&C.hash_mask,ee=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=N-1,ee!==0&&C.prev_length<C.max_lazy_match&&C.strstart-ee<=C.w_size-V&&(C.match_length=Y(C,ee),C.match_length<=5&&(C.strategy===1||C.match_length===N&&4096<C.strstart-C.match_start)&&(C.match_length=N-1)),C.prev_length>=N&&C.match_length<=C.prev_length){for(z=C.strstart+C.lookahead-N,U=a._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-N),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=z&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+N-1])&C.hash_mask,ee=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=N-1,C.strstart++,U&&($(C,!1),C.strm.avail_out===0))return I}else if(C.match_available){if((U=a._tr_tally(C,0,C.window[C.strstart-1]))&&$(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return I}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(U=a._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<N-1?C.strstart:N-1,se===g?($(C,!0),C.strm.avail_out===0?fe:re):C.last_lit&&($(C,!1),C.strm.avail_out===0)?I:H}function je(C,se,ee,U,z){this.good_length=C,this.max_lazy=se,this.nice_length=ee,this.max_chain=U,this.func=z}function Be(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*k),this.dyn_dtree=new o.Buf16(2*(2*L+1)),this.bl_tree=new o.Buf16(2*(2*B+1)),oe(this.dyn_ltree),oe(this.dyn_dtree),oe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(A+1),this.heap=new o.Buf16(2*P+1),oe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*P+1),oe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ze(C){var se;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=v,(se=C.state).pending=0,se.pending_out=0,se.wrap<0&&(se.wrap=-se.wrap),se.status=se.wrap?R:D,C.adler=se.wrap===2?0:1,se.last_flush=m,a._tr_init(se),y):Z(C,w)}function ht(C){var se=ze(C);return se===y&&function(ee){ee.window_size=2*ee.w_size,oe(ee.head),ee.max_lazy_match=i[ee.level].max_lazy,ee.good_match=i[ee.level].good_length,ee.nice_match=i[ee.level].nice_length,ee.max_chain_length=i[ee.level].max_chain,ee.strstart=0,ee.block_start=0,ee.lookahead=0,ee.insert=0,ee.match_length=ee.prev_length=N-1,ee.match_available=0,ee.ins_h=0}(C.state),se}function Me(C,se,ee,U,z,q){if(!C)return w;var ie=1;if(se===x&&(se=6),U<0?(ie=0,U=-U):15<U&&(ie=2,U-=16),z<1||T<z||ee!==E||U<8||15<U||se<0||9<se||q<0||_<q)return Z(C,w);U===8&&(U=9);var ue=new Be;return(C.state=ue).strm=C,ue.wrap=ie,ue.gzhead=null,ue.w_bits=U,ue.w_size=1<<ue.w_bits,ue.w_mask=ue.w_size-1,ue.hash_bits=z+7,ue.hash_size=1<<ue.hash_bits,ue.hash_mask=ue.hash_size-1,ue.hash_shift=~~((ue.hash_bits+N-1)/N),ue.window=new o.Buf8(2*ue.w_size),ue.head=new o.Buf16(ue.hash_size),ue.prev=new o.Buf16(ue.w_size),ue.lit_bufsize=1<<z+6,ue.pending_buf_size=4*ue.lit_bufsize,ue.pending_buf=new o.Buf8(ue.pending_buf_size),ue.d_buf=1*ue.lit_bufsize,ue.l_buf=3*ue.lit_bufsize,ue.level=se,ue.strategy=q,ue.method=ee,ht(C)}i=[new je(0,0,0,0,function(C,se){var ee=65535;for(ee>C.pending_buf_size-5&&(ee=C.pending_buf_size-5);;){if(C.lookahead<=1){if(ge(C),C.lookahead===0&&se===m)return I;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var U=C.block_start+ee;if((C.strstart===0||C.strstart>=U)&&(C.lookahead=C.strstart-U,C.strstart=U,$(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-V&&($(C,!1),C.strm.avail_out===0))return I}return C.insert=0,se===g?($(C,!0),C.strm.avail_out===0?fe:re):(C.strstart>C.block_start&&($(C,!1),C.strm.avail_out),I)}),new je(4,4,8,4,Ce),new je(4,5,16,8,Ce),new je(4,6,32,32,Ce),new je(4,4,16,16,Se),new je(8,16,32,32,Se),new je(8,16,128,128,Se),new je(8,32,128,256,Se),new je(32,128,258,1024,Se),new je(32,258,258,4096,Se)],s.deflateInit=function(C,se){return Me(C,se,E,15,8,0)},s.deflateInit2=Me,s.deflateReset=ht,s.deflateResetKeep=ze,s.deflateSetHeader=function(C,se){return C&&C.state?C.state.wrap!==2?w:(C.state.gzhead=se,y):w},s.deflate=function(C,se){var ee,U,z,q;if(!C||!C.state||5<se||se<0)return C?Z(C,w):w;if(U=C.state,!C.output||!C.input&&C.avail_in!==0||U.status===666&&se!==g)return Z(C,C.avail_out===0?-5:w);if(U.strm=C,ee=U.last_flush,U.last_flush=se,U.status===R)if(U.wrap===2)C.adler=0,de(U,31),de(U,139),de(U,8),U.gzhead?(de(U,(U.gzhead.text?1:0)+(U.gzhead.hcrc?2:0)+(U.gzhead.extra?4:0)+(U.gzhead.name?8:0)+(U.gzhead.comment?16:0)),de(U,255&U.gzhead.time),de(U,U.gzhead.time>>8&255),de(U,U.gzhead.time>>16&255),de(U,U.gzhead.time>>24&255),de(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),de(U,255&U.gzhead.os),U.gzhead.extra&&U.gzhead.extra.length&&(de(U,255&U.gzhead.extra.length),de(U,U.gzhead.extra.length>>8&255)),U.gzhead.hcrc&&(C.adler=c(C.adler,U.pending_buf,U.pending,0)),U.gzindex=0,U.status=69):(de(U,0),de(U,0),de(U,0),de(U,0),de(U,0),de(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),de(U,3),U.status=D);else{var ie=E+(U.w_bits-8<<4)<<8;ie|=(2<=U.strategy||U.level<2?0:U.level<6?1:U.level===6?2:3)<<6,U.strstart!==0&&(ie|=32),ie+=31-ie%31,U.status=D,te(U,ie),U.strstart!==0&&(te(U,C.adler>>>16),te(U,65535&C.adler)),C.adler=1}if(U.status===69)if(U.gzhead.extra){for(z=U.pending;U.gzindex<(65535&U.gzhead.extra.length)&&(U.pending!==U.pending_buf_size||(U.gzhead.hcrc&&U.pending>z&&(C.adler=c(C.adler,U.pending_buf,U.pending-z,z)),W(C),z=U.pending,U.pending!==U.pending_buf_size));)de(U,255&U.gzhead.extra[U.gzindex]),U.gzindex++;U.gzhead.hcrc&&U.pending>z&&(C.adler=c(C.adler,U.pending_buf,U.pending-z,z)),U.gzindex===U.gzhead.extra.length&&(U.gzindex=0,U.status=73)}else U.status=73;if(U.status===73)if(U.gzhead.name){z=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>z&&(C.adler=c(C.adler,U.pending_buf,U.pending-z,z)),W(C),z=U.pending,U.pending===U.pending_buf_size)){q=1;break}q=U.gzindex<U.gzhead.name.length?255&U.gzhead.name.charCodeAt(U.gzindex++):0,de(U,q)}while(q!==0);U.gzhead.hcrc&&U.pending>z&&(C.adler=c(C.adler,U.pending_buf,U.pending-z,z)),q===0&&(U.gzindex=0,U.status=91)}else U.status=91;if(U.status===91)if(U.gzhead.comment){z=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>z&&(C.adler=c(C.adler,U.pending_buf,U.pending-z,z)),W(C),z=U.pending,U.pending===U.pending_buf_size)){q=1;break}q=U.gzindex<U.gzhead.comment.length?255&U.gzhead.comment.charCodeAt(U.gzindex++):0,de(U,q)}while(q!==0);U.gzhead.hcrc&&U.pending>z&&(C.adler=c(C.adler,U.pending_buf,U.pending-z,z)),q===0&&(U.status=103)}else U.status=103;if(U.status===103&&(U.gzhead.hcrc?(U.pending+2>U.pending_buf_size&&W(C),U.pending+2<=U.pending_buf_size&&(de(U,255&C.adler),de(U,C.adler>>8&255),C.adler=0,U.status=D)):U.status=D),U.pending!==0){if(W(C),C.avail_out===0)return U.last_flush=-1,y}else if(C.avail_in===0&&X(se)<=X(ee)&&se!==g)return Z(C,-5);if(U.status===666&&C.avail_in!==0)return Z(C,-5);if(C.avail_in!==0||U.lookahead!==0||se!==m&&U.status!==666){var ue=U.strategy===2?function(Q,le){for(var ve;;){if(Q.lookahead===0&&(ge(Q),Q.lookahead===0)){if(le===m)return I;break}if(Q.match_length=0,ve=a._tr_tally(Q,0,Q.window[Q.strstart]),Q.lookahead--,Q.strstart++,ve&&($(Q,!1),Q.strm.avail_out===0))return I}return Q.insert=0,le===g?($(Q,!0),Q.strm.avail_out===0?fe:re):Q.last_lit&&($(Q,!1),Q.strm.avail_out===0)?I:H}(U,se):U.strategy===3?function(Q,le){for(var ve,he,xe,Ne,Pe=Q.window;;){if(Q.lookahead<=M){if(ge(Q),Q.lookahead<=M&&le===m)return I;if(Q.lookahead===0)break}if(Q.match_length=0,Q.lookahead>=N&&0<Q.strstart&&(he=Pe[xe=Q.strstart-1])===Pe[++xe]&&he===Pe[++xe]&&he===Pe[++xe]){Ne=Q.strstart+M;do;while(he===Pe[++xe]&&he===Pe[++xe]&&he===Pe[++xe]&&he===Pe[++xe]&&he===Pe[++xe]&&he===Pe[++xe]&&he===Pe[++xe]&&he===Pe[++xe]&&xe<Ne);Q.match_length=M-(Ne-xe),Q.match_length>Q.lookahead&&(Q.match_length=Q.lookahead)}if(Q.match_length>=N?(ve=a._tr_tally(Q,1,Q.match_length-N),Q.lookahead-=Q.match_length,Q.strstart+=Q.match_length,Q.match_length=0):(ve=a._tr_tally(Q,0,Q.window[Q.strstart]),Q.lookahead--,Q.strstart++),ve&&($(Q,!1),Q.strm.avail_out===0))return I}return Q.insert=0,le===g?($(Q,!0),Q.strm.avail_out===0?fe:re):Q.last_lit&&($(Q,!1),Q.strm.avail_out===0)?I:H}(U,se):i[U.level].func(U,se);if(ue!==fe&&ue!==re||(U.status=666),ue===I||ue===fe)return C.avail_out===0&&(U.last_flush=-1),y;if(ue===H&&(se===1?a._tr_align(U):se!==5&&(a._tr_stored_block(U,0,0,!1),se===3&&(oe(U.head),U.lookahead===0&&(U.strstart=0,U.block_start=0,U.insert=0))),W(C),C.avail_out===0))return U.last_flush=-1,y}return se!==g?y:U.wrap<=0?1:(U.wrap===2?(de(U,255&C.adler),de(U,C.adler>>8&255),de(U,C.adler>>16&255),de(U,C.adler>>24&255),de(U,255&C.total_in),de(U,C.total_in>>8&255),de(U,C.total_in>>16&255),de(U,C.total_in>>24&255)):(te(U,C.adler>>>16),te(U,65535&C.adler)),W(C),0<U.wrap&&(U.wrap=-U.wrap),U.pending!==0?y:1)},s.deflateEnd=function(C){var se;return C&&C.state?(se=C.state.status)!==R&&se!==69&&se!==73&&se!==91&&se!==103&&se!==D&&se!==666?Z(C,w):(C.state=null,se===D?Z(C,-3):y):w},s.deflateSetDictionary=function(C,se){var ee,U,z,q,ie,ue,Q,le,ve=se.length;if(!C||!C.state||(q=(ee=C.state).wrap)===2||q===1&&ee.status!==R||ee.lookahead)return w;for(q===1&&(C.adler=l(C.adler,se,ve,0)),ee.wrap=0,ve>=ee.w_size&&(q===0&&(oe(ee.head),ee.strstart=0,ee.block_start=0,ee.insert=0),le=new o.Buf8(ee.w_size),o.arraySet(le,se,ve-ee.w_size,ee.w_size,0),se=le,ve=ee.w_size),ie=C.avail_in,ue=C.next_in,Q=C.input,C.avail_in=ve,C.next_in=0,C.input=se,ge(ee);ee.lookahead>=N;){for(U=ee.strstart,z=ee.lookahead-(N-1);ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[U+N-1])&ee.hash_mask,ee.prev[U&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=U,U++,--z;);ee.strstart=U,ee.lookahead=N-1,ge(ee)}return ee.strstart+=ee.lookahead,ee.block_start=ee.strstart,ee.insert=ee.lookahead,ee.lookahead=0,ee.match_length=ee.prev_length=N-1,ee.match_available=0,C.next_in=ue,C.input=Q,C.avail_in=ie,ee.wrap=q,y},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,l,c,d,m,g,y,w,x,_,v,E,T,P,L,B,k,A,N,M,V,R,D,I,H;a=i.state,l=i.next_in,I=i.input,c=l+(i.avail_in-5),d=i.next_out,H=i.output,m=d-(o-i.avail_out),g=d+(i.avail_out-257),y=a.dmax,w=a.wsize,x=a.whave,_=a.wnext,v=a.window,E=a.hold,T=a.bits,P=a.lencode,L=a.distcode,B=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{T<15&&(E+=I[l++]<<T,T+=8,E+=I[l++]<<T,T+=8),A=P[E&B];t:for(;;){if(E>>>=N=A>>>24,T-=N,(N=A>>>16&255)===0)H[d++]=65535&A;else{if(!(16&N)){if(!(64&N)){A=P[(65535&A)+(E&(1<<N)-1)];continue t}if(32&N){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}M=65535&A,(N&=15)&&(T<N&&(E+=I[l++]<<T,T+=8),M+=E&(1<<N)-1,E>>>=N,T-=N),T<15&&(E+=I[l++]<<T,T+=8,E+=I[l++]<<T,T+=8),A=L[E&k];n:for(;;){if(E>>>=N=A>>>24,T-=N,!(16&(N=A>>>16&255))){if(!(64&N)){A=L[(65535&A)+(E&(1<<N)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(V=65535&A,T<(N&=15)&&(E+=I[l++]<<T,(T+=8)<N&&(E+=I[l++]<<T,T+=8)),y<(V+=E&(1<<N)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(E>>>=N,T-=N,(N=d-m)<V){if(x<(N=V-N)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(D=v,(R=0)===_){if(R+=w-N,N<M){for(M-=N;H[d++]=v[R++],--N;);R=d-V,D=H}}else if(_<N){if(R+=w+_-N,(N-=_)<M){for(M-=N;H[d++]=v[R++],--N;);if(R=0,_<M){for(M-=N=_;H[d++]=v[R++],--N;);R=d-V,D=H}}}else if(R+=_-N,N<M){for(M-=N;H[d++]=v[R++],--N;);R=d-V,D=H}for(;2<M;)H[d++]=D[R++],H[d++]=D[R++],H[d++]=D[R++],M-=3;M&&(H[d++]=D[R++],1<M&&(H[d++]=D[R++]))}else{for(R=d-V;H[d++]=H[R++],H[d++]=H[R++],H[d++]=H[R++],2<(M-=3););M&&(H[d++]=H[R++],1<M&&(H[d++]=H[R++]))}break}}break}}while(l<c&&d<g);l-=M=T>>3,E&=(1<<(T-=M<<3))-1,i.next_in=l,i.next_out=d,i.avail_in=l<c?c-l+5:5-(l-c),i.avail_out=d<g?g-d+257:257-(d-g),a.hold=E,a.bits=T}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),d=1,m=2,g=0,y=-2,w=1,x=852,_=592;function v(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(R){var D;return R&&R.state?(D=R.state,R.total_in=R.total_out=D.total=0,R.msg="",D.wrap&&(R.adler=1&D.wrap),D.mode=w,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new i.Buf32(x),D.distcode=D.distdyn=new i.Buf32(_),D.sane=1,D.back=-1,g):y}function P(R){var D;return R&&R.state?((D=R.state).wsize=0,D.whave=0,D.wnext=0,T(R)):y}function L(R,D){var I,H;return R&&R.state?(H=R.state,D<0?(I=0,D=-D):(I=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?y:(H.window!==null&&H.wbits!==D&&(H.window=null),H.wrap=I,H.wbits=D,P(R))):y}function B(R,D){var I,H;return R?(H=new E,(R.state=H).window=null,(I=L(R,D))!==g&&(R.state=null),I):y}var k,A,N=!0;function M(R){if(N){var D;for(k=new i.Buf32(512),A=new i.Buf32(32),D=0;D<144;)R.lens[D++]=8;for(;D<256;)R.lens[D++]=9;for(;D<280;)R.lens[D++]=7;for(;D<288;)R.lens[D++]=8;for(c(d,R.lens,0,288,k,0,R.work,{bits:9}),D=0;D<32;)R.lens[D++]=5;c(m,R.lens,0,32,A,0,R.work,{bits:5}),N=!1}R.lencode=k,R.lenbits=9,R.distcode=A,R.distbits=5}function V(R,D,I,H){var fe,re=R.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new i.Buf8(re.wsize)),H>=re.wsize?(i.arraySet(re.window,D,I-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(H<(fe=re.wsize-re.wnext)&&(fe=H),i.arraySet(re.window,D,I-H,fe,re.wnext),(H-=fe)?(i.arraySet(re.window,D,I-H,H,0),re.wnext=H,re.whave=re.wsize):(re.wnext+=fe,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=fe))),0}s.inflateReset=P,s.inflateReset2=L,s.inflateResetKeep=T,s.inflateInit=function(R){return B(R,15)},s.inflateInit2=B,s.inflate=function(R,D){var I,H,fe,re,Z,X,oe,W,$,de,te,Y,ge,Ce,Se,je,Be,ze,ht,Me,C,se,ee,U,z=0,q=new i.Buf8(4),ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return y;(I=R.state).mode===12&&(I.mode=13),Z=R.next_out,fe=R.output,oe=R.avail_out,re=R.next_in,H=R.input,X=R.avail_in,W=I.hold,$=I.bits,de=X,te=oe,se=g;e:for(;;)switch(I.mode){case w:if(I.wrap===0){I.mode=13;break}for(;$<16;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}if(2&I.wrap&&W===35615){q[I.check=0]=255&W,q[1]=W>>>8&255,I.check=a(I.check,q,2,0),$=W=0,I.mode=2;break}if(I.flags=0,I.head&&(I.head.done=!1),!(1&I.wrap)||(((255&W)<<8)+(W>>8))%31){R.msg="incorrect header check",I.mode=30;break}if((15&W)!=8){R.msg="unknown compression method",I.mode=30;break}if($-=4,C=8+(15&(W>>>=4)),I.wbits===0)I.wbits=C;else if(C>I.wbits){R.msg="invalid window size",I.mode=30;break}I.dmax=1<<C,R.adler=I.check=1,I.mode=512&W?10:12,$=W=0;break;case 2:for(;$<16;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}if(I.flags=W,(255&I.flags)!=8){R.msg="unknown compression method",I.mode=30;break}if(57344&I.flags){R.msg="unknown header flags set",I.mode=30;break}I.head&&(I.head.text=W>>8&1),512&I.flags&&(q[0]=255&W,q[1]=W>>>8&255,I.check=a(I.check,q,2,0)),$=W=0,I.mode=3;case 3:for(;$<32;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}I.head&&(I.head.time=W),512&I.flags&&(q[0]=255&W,q[1]=W>>>8&255,q[2]=W>>>16&255,q[3]=W>>>24&255,I.check=a(I.check,q,4,0)),$=W=0,I.mode=4;case 4:for(;$<16;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}I.head&&(I.head.xflags=255&W,I.head.os=W>>8),512&I.flags&&(q[0]=255&W,q[1]=W>>>8&255,I.check=a(I.check,q,2,0)),$=W=0,I.mode=5;case 5:if(1024&I.flags){for(;$<16;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}I.length=W,I.head&&(I.head.extra_len=W),512&I.flags&&(q[0]=255&W,q[1]=W>>>8&255,I.check=a(I.check,q,2,0)),$=W=0}else I.head&&(I.head.extra=null);I.mode=6;case 6:if(1024&I.flags&&(X<(Y=I.length)&&(Y=X),Y&&(I.head&&(C=I.head.extra_len-I.length,I.head.extra||(I.head.extra=new Array(I.head.extra_len)),i.arraySet(I.head.extra,H,re,Y,C)),512&I.flags&&(I.check=a(I.check,H,Y,re)),X-=Y,re+=Y,I.length-=Y),I.length))break e;I.length=0,I.mode=7;case 7:if(2048&I.flags){if(X===0)break e;for(Y=0;C=H[re+Y++],I.head&&C&&I.length<65536&&(I.head.name+=String.fromCharCode(C)),C&&Y<X;);if(512&I.flags&&(I.check=a(I.check,H,Y,re)),X-=Y,re+=Y,C)break e}else I.head&&(I.head.name=null);I.length=0,I.mode=8;case 8:if(4096&I.flags){if(X===0)break e;for(Y=0;C=H[re+Y++],I.head&&C&&I.length<65536&&(I.head.comment+=String.fromCharCode(C)),C&&Y<X;);if(512&I.flags&&(I.check=a(I.check,H,Y,re)),X-=Y,re+=Y,C)break e}else I.head&&(I.head.comment=null);I.mode=9;case 9:if(512&I.flags){for(;$<16;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}if(W!==(65535&I.check)){R.msg="header crc mismatch",I.mode=30;break}$=W=0}I.head&&(I.head.hcrc=I.flags>>9&1,I.head.done=!0),R.adler=I.check=0,I.mode=12;break;case 10:for(;$<32;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}R.adler=I.check=v(W),$=W=0,I.mode=11;case 11:if(I.havedict===0)return R.next_out=Z,R.avail_out=oe,R.next_in=re,R.avail_in=X,I.hold=W,I.bits=$,2;R.adler=I.check=1,I.mode=12;case 12:if(D===5||D===6)break e;case 13:if(I.last){W>>>=7&$,$-=7&$,I.mode=27;break}for(;$<3;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}switch(I.last=1&W,$-=1,3&(W>>>=1)){case 0:I.mode=14;break;case 1:if(M(I),I.mode=20,D!==6)break;W>>>=2,$-=2;break e;case 2:I.mode=17;break;case 3:R.msg="invalid block type",I.mode=30}W>>>=2,$-=2;break;case 14:for(W>>>=7&$,$-=7&$;$<32;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}if((65535&W)!=(W>>>16^65535)){R.msg="invalid stored block lengths",I.mode=30;break}if(I.length=65535&W,$=W=0,I.mode=15,D===6)break e;case 15:I.mode=16;case 16:if(Y=I.length){if(X<Y&&(Y=X),oe<Y&&(Y=oe),Y===0)break e;i.arraySet(fe,H,re,Y,Z),X-=Y,re+=Y,oe-=Y,Z+=Y,I.length-=Y;break}I.mode=12;break;case 17:for(;$<14;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}if(I.nlen=257+(31&W),W>>>=5,$-=5,I.ndist=1+(31&W),W>>>=5,$-=5,I.ncode=4+(15&W),W>>>=4,$-=4,286<I.nlen||30<I.ndist){R.msg="too many length or distance symbols",I.mode=30;break}I.have=0,I.mode=18;case 18:for(;I.have<I.ncode;){for(;$<3;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}I.lens[ie[I.have++]]=7&W,W>>>=3,$-=3}for(;I.have<19;)I.lens[ie[I.have++]]=0;if(I.lencode=I.lendyn,I.lenbits=7,ee={bits:I.lenbits},se=c(0,I.lens,0,19,I.lencode,0,I.work,ee),I.lenbits=ee.bits,se){R.msg="invalid code lengths set",I.mode=30;break}I.have=0,I.mode=19;case 19:for(;I.have<I.nlen+I.ndist;){for(;je=(z=I.lencode[W&(1<<I.lenbits)-1])>>>16&255,Be=65535&z,!((Se=z>>>24)<=$);){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}if(Be<16)W>>>=Se,$-=Se,I.lens[I.have++]=Be;else{if(Be===16){for(U=Se+2;$<U;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}if(W>>>=Se,$-=Se,I.have===0){R.msg="invalid bit length repeat",I.mode=30;break}C=I.lens[I.have-1],Y=3+(3&W),W>>>=2,$-=2}else if(Be===17){for(U=Se+3;$<U;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}$-=Se,C=0,Y=3+(7&(W>>>=Se)),W>>>=3,$-=3}else{for(U=Se+7;$<U;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}$-=Se,C=0,Y=11+(127&(W>>>=Se)),W>>>=7,$-=7}if(I.have+Y>I.nlen+I.ndist){R.msg="invalid bit length repeat",I.mode=30;break}for(;Y--;)I.lens[I.have++]=C}}if(I.mode===30)break;if(I.lens[256]===0){R.msg="invalid code -- missing end-of-block",I.mode=30;break}if(I.lenbits=9,ee={bits:I.lenbits},se=c(d,I.lens,0,I.nlen,I.lencode,0,I.work,ee),I.lenbits=ee.bits,se){R.msg="invalid literal/lengths set",I.mode=30;break}if(I.distbits=6,I.distcode=I.distdyn,ee={bits:I.distbits},se=c(m,I.lens,I.nlen,I.ndist,I.distcode,0,I.work,ee),I.distbits=ee.bits,se){R.msg="invalid distances set",I.mode=30;break}if(I.mode=20,D===6)break e;case 20:I.mode=21;case 21:if(6<=X&&258<=oe){R.next_out=Z,R.avail_out=oe,R.next_in=re,R.avail_in=X,I.hold=W,I.bits=$,l(R,te),Z=R.next_out,fe=R.output,oe=R.avail_out,re=R.next_in,H=R.input,X=R.avail_in,W=I.hold,$=I.bits,I.mode===12&&(I.back=-1);break}for(I.back=0;je=(z=I.lencode[W&(1<<I.lenbits)-1])>>>16&255,Be=65535&z,!((Se=z>>>24)<=$);){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}if(je&&!(240&je)){for(ze=Se,ht=je,Me=Be;je=(z=I.lencode[Me+((W&(1<<ze+ht)-1)>>ze)])>>>16&255,Be=65535&z,!(ze+(Se=z>>>24)<=$);){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}W>>>=ze,$-=ze,I.back+=ze}if(W>>>=Se,$-=Se,I.back+=Se,I.length=Be,je===0){I.mode=26;break}if(32&je){I.back=-1,I.mode=12;break}if(64&je){R.msg="invalid literal/length code",I.mode=30;break}I.extra=15&je,I.mode=22;case 22:if(I.extra){for(U=I.extra;$<U;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}I.length+=W&(1<<I.extra)-1,W>>>=I.extra,$-=I.extra,I.back+=I.extra}I.was=I.length,I.mode=23;case 23:for(;je=(z=I.distcode[W&(1<<I.distbits)-1])>>>16&255,Be=65535&z,!((Se=z>>>24)<=$);){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}if(!(240&je)){for(ze=Se,ht=je,Me=Be;je=(z=I.distcode[Me+((W&(1<<ze+ht)-1)>>ze)])>>>16&255,Be=65535&z,!(ze+(Se=z>>>24)<=$);){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}W>>>=ze,$-=ze,I.back+=ze}if(W>>>=Se,$-=Se,I.back+=Se,64&je){R.msg="invalid distance code",I.mode=30;break}I.offset=Be,I.extra=15&je,I.mode=24;case 24:if(I.extra){for(U=I.extra;$<U;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}I.offset+=W&(1<<I.extra)-1,W>>>=I.extra,$-=I.extra,I.back+=I.extra}if(I.offset>I.dmax){R.msg="invalid distance too far back",I.mode=30;break}I.mode=25;case 25:if(oe===0)break e;if(Y=te-oe,I.offset>Y){if((Y=I.offset-Y)>I.whave&&I.sane){R.msg="invalid distance too far back",I.mode=30;break}ge=Y>I.wnext?(Y-=I.wnext,I.wsize-Y):I.wnext-Y,Y>I.length&&(Y=I.length),Ce=I.window}else Ce=fe,ge=Z-I.offset,Y=I.length;for(oe<Y&&(Y=oe),oe-=Y,I.length-=Y;fe[Z++]=Ce[ge++],--Y;);I.length===0&&(I.mode=21);break;case 26:if(oe===0)break e;fe[Z++]=I.length,oe--,I.mode=21;break;case 27:if(I.wrap){for(;$<32;){if(X===0)break e;X--,W|=H[re++]<<$,$+=8}if(te-=oe,R.total_out+=te,I.total+=te,te&&(R.adler=I.check=I.flags?a(I.check,fe,te,Z-te):o(I.check,fe,te,Z-te)),te=oe,(I.flags?W:v(W))!==I.check){R.msg="incorrect data check",I.mode=30;break}$=W=0}I.mode=28;case 28:if(I.wrap&&I.flags){for(;$<32;){if(X===0)break e;X--,W+=H[re++]<<$,$+=8}if(W!==(4294967295&I.total)){R.msg="incorrect length check",I.mode=30;break}$=W=0}I.mode=29;case 29:se=1;break e;case 30:se=-3;break e;case 31:return-4;case 32:default:return y}return R.next_out=Z,R.avail_out=oe,R.next_in=re,R.avail_in=X,I.hold=W,I.bits=$,(I.wsize||te!==R.avail_out&&I.mode<30&&(I.mode<27||D!==4))&&V(R,R.output,R.next_out,te-R.avail_out)?(I.mode=31,-4):(de-=R.avail_in,te-=R.avail_out,R.total_in+=de,R.total_out+=te,I.total+=te,I.wrap&&te&&(R.adler=I.check=I.flags?a(I.check,fe,te,R.next_out-te):o(I.check,fe,te,R.next_out-te)),R.data_type=I.bits+(I.last?64:0)+(I.mode===12?128:0)+(I.mode===20||I.mode===15?256:0),(de==0&&te===0||D===4)&&se===g&&(se=-5),se)},s.inflateEnd=function(R){if(!R||!R.state)return y;var D=R.state;return D.window&&(D.window=null),R.state=null,g},s.inflateGetHeader=function(R,D){var I;return R&&R.state&&2&(I=R.state).wrap?((I.head=D).done=!1,g):y},s.inflateSetDictionary=function(R,D){var I,H=D.length;return R&&R.state?(I=R.state).wrap!==0&&I.mode!==11?y:I.mode===11&&o(1,D,H,0)!==I.check?-3:V(R,D,H,H)?(I.mode=31,-4):(I.havedict=1,g):y},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,m,g,y,w,x,_,v){var E,T,P,L,B,k,A,N,M,V=v.bits,R=0,D=0,I=0,H=0,fe=0,re=0,Z=0,X=0,oe=0,W=0,$=null,de=0,te=new i.Buf16(16),Y=new i.Buf16(16),ge=null,Ce=0;for(R=0;R<=15;R++)te[R]=0;for(D=0;D<y;D++)te[m[g+D]]++;for(fe=V,H=15;1<=H&&te[H]===0;H--);if(H<fe&&(fe=H),H===0)return w[x++]=20971520,w[x++]=20971520,v.bits=1,0;for(I=1;I<H&&te[I]===0;I++);for(fe<I&&(fe=I),R=X=1;R<=15;R++)if(X<<=1,(X-=te[R])<0)return-1;if(0<X&&(d===0||H!==1))return-1;for(Y[1]=0,R=1;R<15;R++)Y[R+1]=Y[R]+te[R];for(D=0;D<y;D++)m[g+D]!==0&&(_[Y[m[g+D]]++]=D);if(k=d===0?($=ge=_,19):d===1?($=o,de-=257,ge=a,Ce-=257,256):($=l,ge=c,-1),R=I,B=x,Z=D=W=0,P=-1,L=(oe=1<<(re=fe))-1,d===1&&852<oe||d===2&&592<oe)return 1;for(;;){for(A=R-Z,M=_[D]<k?(N=0,_[D]):_[D]>k?(N=ge[Ce+_[D]],$[de+_[D]]):(N=96,0),E=1<<R-Z,I=T=1<<re;w[B+(W>>Z)+(T-=E)]=A<<24|N<<16|M|0,T!==0;);for(E=1<<R-1;W&E;)E>>=1;if(E!==0?(W&=E-1,W+=E):W=0,D++,--te[R]==0){if(R===H)break;R=m[g+_[D]]}if(fe<R&&(W&L)!==P){for(Z===0&&(Z=fe),B+=I,X=1<<(re=R-Z);re+Z<H&&!((X-=te[re+Z])<=0);)re++,X<<=1;if(oe+=1<<re,d===1&&852<oe||d===2&&592<oe)return 1;w[P=W&L]=fe<<24|re<<16|B-x|0}}return W!==0&&(w[B+W]=R-Z<<24|64<<16|0),v.bits=fe,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function l(z){for(var q=z.length;0<=--q;)z[q]=0}var c=0,d=29,m=256,g=m+1+d,y=30,w=19,x=2*g+1,_=15,v=16,E=7,T=256,P=16,L=17,B=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(g+2));l(V);var R=new Array(2*y);l(R);var D=new Array(512);l(D);var I=new Array(256);l(I);var H=new Array(d);l(H);var fe,re,Z,X=new Array(y);function oe(z,q,ie,ue,Q){this.static_tree=z,this.extra_bits=q,this.extra_base=ie,this.elems=ue,this.max_length=Q,this.has_stree=z&&z.length}function W(z,q){this.dyn_tree=z,this.max_code=0,this.stat_desc=q}function $(z){return z<256?D[z]:D[256+(z>>>7)]}function de(z,q){z.pending_buf[z.pending++]=255&q,z.pending_buf[z.pending++]=q>>>8&255}function te(z,q,ie){z.bi_valid>v-ie?(z.bi_buf|=q<<z.bi_valid&65535,de(z,z.bi_buf),z.bi_buf=q>>v-z.bi_valid,z.bi_valid+=ie-v):(z.bi_buf|=q<<z.bi_valid&65535,z.bi_valid+=ie)}function Y(z,q,ie){te(z,ie[2*q],ie[2*q+1])}function ge(z,q){for(var ie=0;ie|=1&z,z>>>=1,ie<<=1,0<--q;);return ie>>>1}function Ce(z,q,ie){var ue,Q,le=new Array(_+1),ve=0;for(ue=1;ue<=_;ue++)le[ue]=ve=ve+ie[ue-1]<<1;for(Q=0;Q<=q;Q++){var he=z[2*Q+1];he!==0&&(z[2*Q]=ge(le[he]++,he))}}function Se(z){var q;for(q=0;q<g;q++)z.dyn_ltree[2*q]=0;for(q=0;q<y;q++)z.dyn_dtree[2*q]=0;for(q=0;q<w;q++)z.bl_tree[2*q]=0;z.dyn_ltree[2*T]=1,z.opt_len=z.static_len=0,z.last_lit=z.matches=0}function je(z){8<z.bi_valid?de(z,z.bi_buf):0<z.bi_valid&&(z.pending_buf[z.pending++]=z.bi_buf),z.bi_buf=0,z.bi_valid=0}function Be(z,q,ie,ue){var Q=2*q,le=2*ie;return z[Q]<z[le]||z[Q]===z[le]&&ue[q]<=ue[ie]}function ze(z,q,ie){for(var ue=z.heap[ie],Q=ie<<1;Q<=z.heap_len&&(Q<z.heap_len&&Be(q,z.heap[Q+1],z.heap[Q],z.depth)&&Q++,!Be(q,ue,z.heap[Q],z.depth));)z.heap[ie]=z.heap[Q],ie=Q,Q<<=1;z.heap[ie]=ue}function ht(z,q,ie){var ue,Q,le,ve,he=0;if(z.last_lit!==0)for(;ue=z.pending_buf[z.d_buf+2*he]<<8|z.pending_buf[z.d_buf+2*he+1],Q=z.pending_buf[z.l_buf+he],he++,ue===0?Y(z,Q,q):(Y(z,(le=I[Q])+m+1,q),(ve=k[le])!==0&&te(z,Q-=H[le],ve),Y(z,le=$(--ue),ie),(ve=A[le])!==0&&te(z,ue-=X[le],ve)),he<z.last_lit;);Y(z,T,q)}function Me(z,q){var ie,ue,Q,le=q.dyn_tree,ve=q.stat_desc.static_tree,he=q.stat_desc.has_stree,xe=q.stat_desc.elems,Ne=-1;for(z.heap_len=0,z.heap_max=x,ie=0;ie<xe;ie++)le[2*ie]!==0?(z.heap[++z.heap_len]=Ne=ie,z.depth[ie]=0):le[2*ie+1]=0;for(;z.heap_len<2;)le[2*(Q=z.heap[++z.heap_len]=Ne<2?++Ne:0)]=1,z.depth[Q]=0,z.opt_len--,he&&(z.static_len-=ve[2*Q+1]);for(q.max_code=Ne,ie=z.heap_len>>1;1<=ie;ie--)ze(z,le,ie);for(Q=xe;ie=z.heap[1],z.heap[1]=z.heap[z.heap_len--],ze(z,le,1),ue=z.heap[1],z.heap[--z.heap_max]=ie,z.heap[--z.heap_max]=ue,le[2*Q]=le[2*ie]+le[2*ue],z.depth[Q]=(z.depth[ie]>=z.depth[ue]?z.depth[ie]:z.depth[ue])+1,le[2*ie+1]=le[2*ue+1]=Q,z.heap[1]=Q++,ze(z,le,1),2<=z.heap_len;);z.heap[--z.heap_max]=z.heap[1],function(Pe,mt){var Zt,kt,O,G,pe,we,Ae=mt.dyn_tree,rt=mt.max_code,Re=mt.stat_desc.static_tree,Tt=mt.stat_desc.has_stree,_t=mt.stat_desc.extra_bits,Ue=mt.stat_desc.extra_base,pn=mt.stat_desc.max_length,Dt=0;for(G=0;G<=_;G++)Pe.bl_count[G]=0;for(Ae[2*Pe.heap[Pe.heap_max]+1]=0,Zt=Pe.heap_max+1;Zt<x;Zt++)pn<(G=Ae[2*Ae[2*(kt=Pe.heap[Zt])+1]+1]+1)&&(G=pn,Dt++),Ae[2*kt+1]=G,rt<kt||(Pe.bl_count[G]++,pe=0,Ue<=kt&&(pe=_t[kt-Ue]),we=Ae[2*kt],Pe.opt_len+=we*(G+pe),Tt&&(Pe.static_len+=we*(Re[2*kt+1]+pe)));if(Dt!==0){do{for(G=pn-1;Pe.bl_count[G]===0;)G--;Pe.bl_count[G]--,Pe.bl_count[G+1]+=2,Pe.bl_count[pn]--,Dt-=2}while(0<Dt);for(G=pn;G!==0;G--)for(kt=Pe.bl_count[G];kt!==0;)rt<(O=Pe.heap[--Zt])||(Ae[2*O+1]!==G&&(Pe.opt_len+=(G-Ae[2*O+1])*Ae[2*O],Ae[2*O+1]=G),kt--)}}(z,q),Ce(le,Ne,z.bl_count)}function C(z,q,ie){var ue,Q,le=-1,ve=q[1],he=0,xe=7,Ne=4;for(ve===0&&(xe=138,Ne=3),q[2*(ie+1)+1]=65535,ue=0;ue<=ie;ue++)Q=ve,ve=q[2*(ue+1)+1],++he<xe&&Q===ve||(he<Ne?z.bl_tree[2*Q]+=he:Q!==0?(Q!==le&&z.bl_tree[2*Q]++,z.bl_tree[2*P]++):he<=10?z.bl_tree[2*L]++:z.bl_tree[2*B]++,le=Q,Ne=(he=0)===ve?(xe=138,3):Q===ve?(xe=6,3):(xe=7,4))}function se(z,q,ie){var ue,Q,le=-1,ve=q[1],he=0,xe=7,Ne=4;for(ve===0&&(xe=138,Ne=3),ue=0;ue<=ie;ue++)if(Q=ve,ve=q[2*(ue+1)+1],!(++he<xe&&Q===ve)){if(he<Ne)for(;Y(z,Q,z.bl_tree),--he!=0;);else Q!==0?(Q!==le&&(Y(z,Q,z.bl_tree),he--),Y(z,P,z.bl_tree),te(z,he-3,2)):he<=10?(Y(z,L,z.bl_tree),te(z,he-3,3)):(Y(z,B,z.bl_tree),te(z,he-11,7));le=Q,Ne=(he=0)===ve?(xe=138,3):Q===ve?(xe=6,3):(xe=7,4)}}l(X);var ee=!1;function U(z,q,ie,ue){te(z,(c<<1)+(ue?1:0),3),function(Q,le,ve,he){je(Q),de(Q,ve),de(Q,~ve),i.arraySet(Q.pending_buf,Q.window,le,ve,Q.pending),Q.pending+=ve}(z,q,ie)}s._tr_init=function(z){ee||(function(){var q,ie,ue,Q,le,ve=new Array(_+1);for(Q=ue=0;Q<d-1;Q++)for(H[Q]=ue,q=0;q<1<<k[Q];q++)I[ue++]=Q;for(I[ue-1]=Q,Q=le=0;Q<16;Q++)for(X[Q]=le,q=0;q<1<<A[Q];q++)D[le++]=Q;for(le>>=7;Q<y;Q++)for(X[Q]=le<<7,q=0;q<1<<A[Q]-7;q++)D[256+le++]=Q;for(ie=0;ie<=_;ie++)ve[ie]=0;for(q=0;q<=143;)V[2*q+1]=8,q++,ve[8]++;for(;q<=255;)V[2*q+1]=9,q++,ve[9]++;for(;q<=279;)V[2*q+1]=7,q++,ve[7]++;for(;q<=287;)V[2*q+1]=8,q++,ve[8]++;for(Ce(V,g+1,ve),q=0;q<y;q++)R[2*q+1]=5,R[2*q]=ge(q,5);fe=new oe(V,k,m+1,g,_),re=new oe(R,A,0,y,_),Z=new oe(new Array(0),N,0,w,E)}(),ee=!0),z.l_desc=new W(z.dyn_ltree,fe),z.d_desc=new W(z.dyn_dtree,re),z.bl_desc=new W(z.bl_tree,Z),z.bi_buf=0,z.bi_valid=0,Se(z)},s._tr_stored_block=U,s._tr_flush_block=function(z,q,ie,ue){var Q,le,ve=0;0<z.level?(z.strm.data_type===2&&(z.strm.data_type=function(he){var xe,Ne=4093624447;for(xe=0;xe<=31;xe++,Ne>>>=1)if(1&Ne&&he.dyn_ltree[2*xe]!==0)return o;if(he.dyn_ltree[18]!==0||he.dyn_ltree[20]!==0||he.dyn_ltree[26]!==0)return a;for(xe=32;xe<m;xe++)if(he.dyn_ltree[2*xe]!==0)return a;return o}(z)),Me(z,z.l_desc),Me(z,z.d_desc),ve=function(he){var xe;for(C(he,he.dyn_ltree,he.l_desc.max_code),C(he,he.dyn_dtree,he.d_desc.max_code),Me(he,he.bl_desc),xe=w-1;3<=xe&&he.bl_tree[2*M[xe]+1]===0;xe--);return he.opt_len+=3*(xe+1)+5+5+4,xe}(z),Q=z.opt_len+3+7>>>3,(le=z.static_len+3+7>>>3)<=Q&&(Q=le)):Q=le=ie+5,ie+4<=Q&&q!==-1?U(z,q,ie,ue):z.strategy===4||le===Q?(te(z,2+(ue?1:0),3),ht(z,V,R)):(te(z,4+(ue?1:0),3),function(he,xe,Ne,Pe){var mt;for(te(he,xe-257,5),te(he,Ne-1,5),te(he,Pe-4,4),mt=0;mt<Pe;mt++)te(he,he.bl_tree[2*M[mt]+1],3);se(he,he.dyn_ltree,xe-1),se(he,he.dyn_dtree,Ne-1)}(z,z.l_desc.max_code+1,z.d_desc.max_code+1,ve+1),ht(z,z.dyn_ltree,z.dyn_dtree)),Se(z),ue&&je(z)},s._tr_tally=function(z,q,ie){return z.pending_buf[z.d_buf+2*z.last_lit]=q>>>8&255,z.pending_buf[z.d_buf+2*z.last_lit+1]=255&q,z.pending_buf[z.l_buf+z.last_lit]=255&ie,z.last_lit++,q===0?z.dyn_ltree[2*ie]++:(z.matches++,q--,z.dyn_ltree[2*(I[ie]+m+1)]++,z.dyn_dtree[2*$(q)]++),z.last_lit===z.lit_bufsize-1},s._tr_align=function(z){te(z,2,3),Y(z,T,V),function(q){q.bi_valid===16?(de(q,q.bi_buf),q.bi_buf=0,q.bi_valid=0):8<=q.bi_valid&&(q.pending_buf[q.pending++]=255&q.bi_buf,q.bi_buf>>=8,q.bi_valid-=8)}(z)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var l,c,d,m,g=1,y={},w=!1,x=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,l={}.toString.call(o.process)==="[object process]"?function(P){process.nextTick(function(){E(P)})}:function(){if(o.postMessage&&!o.importScripts){var P=!0,L=o.onmessage;return o.onmessage=function(){P=!1},o.postMessage("","*"),o.onmessage=L,P}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",T,!1):o.attachEvent("onmessage",T),function(P){o.postMessage(m+P,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(P){E(P.data)},function(P){d.port2.postMessage(P)}):x&&"onreadystatechange"in x.createElement("script")?(c=x.documentElement,function(P){var L=x.createElement("script");L.onreadystatechange=function(){E(P),L.onreadystatechange=null,c.removeChild(L),L=null},c.appendChild(L)}):function(P){setTimeout(E,0,P)},_.setImmediate=function(P){typeof P!="function"&&(P=new Function(""+P));for(var L=new Array(arguments.length-1),B=0;B<L.length;B++)L[B]=arguments[B+1];var k={callback:P,args:L};return y[g]=k,l(g),g++},_.clearImmediate=v}function v(P){delete y[P]}function E(P){if(w)setTimeout(E,0,P);else{var L=y[P];if(L){w=!0;try{(function(B){var k=B.callback,A=B.args;switch(A.length){case 0:k();break;case 1:k(A[0]);break;case 2:k(A[0],A[1]);break;case 3:k(A[0],A[1],A[2]);break;default:k.apply(a,A)}})(L)}finally{v(P),w=!1}}}}function T(P){P.source===o&&typeof P.data=="string"&&P.data.indexOf(m)===0&&E(+P.data.slice(m.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Dr<"u"?Dr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(W1);var X6=W1.exports;const Z6=hp(X6);var K1={exports:{}};(function(t,e){(function(n,r){r()})(Dr,function(){function n(c,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,d,m){var g=new XMLHttpRequest;g.open("GET",c),g.responseType="blob",g.onload=function(){l(g.response,d,m)},g.onerror=function(){console.error("could not download file")},g.send()}function s(c){var d=new XMLHttpRequest;d.open("HEAD",c,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function i(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Dr=="object"&&Dr.global===Dr?Dr:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,d,m){var g=o.URL||o.webkitURL,y=document.createElement("a");d=d||c.name||"download",y.download=d,y.rel="noopener",typeof c=="string"?(y.href=c,y.origin===location.origin?i(y):s(y.href)?r(c,d,m):i(y,y.target="_blank")):(y.href=g.createObjectURL(c),setTimeout(function(){g.revokeObjectURL(y.href)},4e4),setTimeout(function(){i(y)},0))}:"msSaveOrOpenBlob"in navigator?function(c,d,m){if(d=d||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,m),d);else if(s(c))r(c,d,m);else{var g=document.createElement("a");g.href=c,g.target="_blank",setTimeout(function(){i(g)})}}:function(c,d,m,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof c=="string")return r(c,d,m);var y=c.type==="application/octet-stream",w=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||y&&w||a)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var T=_.result;T=x?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=T:location=T,g=null},_.readAsDataURL(c)}else{var v=o.URL||o.webkitURL,E=v.createObjectURL(c);g?g.location=E:location.href=E,g=null,setTimeout(function(){v.revokeObjectURL(E)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(K1);var eU=K1.exports;const tU=hp(eU),nU=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),u.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})]}),rU=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})}),sU=({onExit:t})=>{var xe,Ne,Pe,mt,Zt,kt;const[e,n]=F.useState(3),[r,s]=F.useState("portrait"),[i,o]=F.useState([]),[a,l]=F.useState([]),[c,d]=F.useState(-1),[m,g]=F.useState(null),[y,w]=F.useState(!1),[x,_]=F.useState(.25),[v,E]=F.useState(!0),[T,P]=F.useState("add"),[L,B]=F.useState("#ffffff"),k=1080,M=r==="square"?1080:1350,V=e*k,R=M,D=F.useRef(null),I=F.useRef(null),H=F.useRef(!1),fe=F.useRef({x:0,y:0}),re=F.useRef({x:0,y:0}),Z=F.useRef(!1),X=F.useRef({x:0,y:0,w:0,h:0}),oe=F.useRef(0),W=F.useRef(.2),$=O=>{let G="";return O==="circle"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><circle cx="100" cy="100" r="100" fill="#1e293b"/></svg>':O==="square"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect width="200" height="200" fill="#334155"/></svg>':O==="triangle"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 10 L190 190 L10 190 Z" fill="#475569"/></svg>':O==="star"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="m100 10 25 60 65 5-50 45 15 65-55-35-55 35 15-65-50-45 65-5z" fill="#0f172a"/></svg>':O==="heart"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 180 C10 100 -20 50 40 20 C70 5 90 30 100 50 C110 30 130 5 160 20 C220 50 190 100 100 180 Z" fill="#ef4444"/></svg>':O==="text"&&(G='<svg xmlns="http://www.w3.org/2000/svg" width="300" height="100"><rect width="100%" height="100%" fill="transparent"/><text x="50%" y="50%" font-family="Arial" font-size="60" font-weight="bold" fill="#000000" text-anchor="middle" dominant-baseline="middle">Text Here</text></svg>'),`data:image/svg+xml;base64,${btoa(G)}`},de=O=>{const G=a.slice(0,c+1);G.push(O),l(G),d(G.length-1)},te=()=>{if(c>0){const O=c-1;o(a[O]),d(O)}else c===0&&(o([]),d(-1))},Y=O=>{o(O),de(O)},ge=O=>{const G=new Image;G.onload=()=>{const pe=G.width/G.height,we={id:Date.now().toString(),src:O,x:V/2-G.width/2,y:R/2-G.height/2,width:G.width,height:G.height,originalAspectRatio:pe,currentAspectRatio:pe,rotation:0,scaleX:1,borderRadius:0,borderColor:"#000000",borderWidth:0,isGrayscale:!1,maskShape:"none"};we.width>1200&&(we.width=1200,we.height=1200/we.originalAspectRatio);const Ae=[...i,we];Y(Ae),g(we.id),P("edit"),E(!0)},G.src=O},Ce=O=>{if(O.target.files&&O.target.files[0]){const G=O.target.files[0],pe=new FileReader;pe.onload=we=>{var Ae;(Ae=we.target)!=null&&Ae.result&&ge(we.target.result)},pe.readAsDataURL(G)}O.target.value=""},Se=()=>{if(!m)return;const O=i.filter(G=>G.id!==m);Y(O),g(null),P("add")},je=()=>{if(!m)return;const O=i.find(G=>G.id===m);if(O){const G={...O,id:Date.now().toString(),x:O.x+50,y:O.y+50},pe=[...i,G];Y(pe),g(G.id)}},Be=(O,G=!0)=>{if(!m)return;const pe=i.map(we=>we.id===m?{...we,...O}:we);G?Y(pe):o(pe)},ze=()=>{const O=i.find(G=>G.id===m);O&&Be({rotation:(O.rotation+90)%360})},ht=()=>{const O=i.find(G=>G.id===m);O&&Be({scaleX:O.scaleX*-1})},Me=()=>{if(!m)return;const O=i.find(we=>we.id===m);if(!O)return;let G=O.originalAspectRatio;Math.abs(O.currentAspectRatio-O.originalAspectRatio)<.01?G=1:Math.abs(O.currentAspectRatio-1)<.01?G=.8:Math.abs(O.currentAspectRatio-.8)<.01?G=1.77:G=O.originalAspectRatio;const pe=O.width/G;Be({currentAspectRatio:G,height:pe})},C=O=>{o(G=>{const pe=G.find(Ae=>Ae.id===O);return pe?[...G.filter(Ae=>Ae.id!==O),pe]:G})},se=O=>{if(!m)return;const G=i.findIndex(we=>we.id===m);if(G===-1)return;const pe=[...i];if(O==="front"){const[we]=pe.splice(G,1);pe.push(we)}else if(O==="back"){const[we]=pe.splice(G,1);pe.unshift(we)}else O==="forward"&&G<pe.length-1?[pe[G],pe[G+1]]=[pe[G+1],pe[G]]:O==="backward"&&G>0&&([pe[G],pe[G-1]]=[pe[G-1],pe[G]]);Y(pe)},ee=async()=>{w(!0);try{const O=document.createElement("canvas");O.width=V,O.height=R;const G=O.getContext("2d");if(!G)throw new Error("Canvas context failed");G.fillStyle=L,G.fillRect(0,0,V,R);const pe=Re=>new Promise(Tt=>{const _t=new Image;_t.crossOrigin="anonymous",_t.onload=()=>{G.save();const Ue=Re.x+Re.width/2,pn=Re.y+Re.height/2;G.translate(Ue,pn),G.rotate(Re.rotation*Math.PI/180),G.scale(Re.scaleX,1),Re.isGrayscale&&(G.filter="grayscale(100%)");const Dt=Re.width,en=Re.height,pr=-Dt/2,er=-en/2;if(G.beginPath(),Re.maskShape==="circle"){const Ii=Math.min(Dt,en)/2;G.arc(0,0,Ii,0,Math.PI*2)}else(Re.maskShape==="square"||Re.borderRadius>0)&&G.roundRect?G.roundRect(pr,er,Dt,en,Re.borderRadius):G.rect(pr,er,Dt,en);G.closePath(),G.save(),G.clip(),G.drawImage(_t,pr,er,Dt,en),G.restore(),G.filter="none",Re.borderWidth>0&&(G.lineWidth=Re.borderWidth,G.strokeStyle=Re.borderColor,G.stroke()),G.restore(),Tt()},_t.src=Re.src});await Promise.all(i.map(pe));const we=new Z6,Ae=we.folder("instagram-panorama");for(let Re=0;Re<e;Re++){const Tt=document.createElement("canvas");Tt.width=k,Tt.height=M;const _t=Tt.getContext("2d");if(_t){_t.drawImage(O,Re*k,0,k,M,0,0,k,M);const Ue=await new Promise(pn=>Tt.toBlob(pn,"image/jpeg",.95));Ue&&Ae&&Ae.file(`slide_${Re+1}.jpg`,Ue)}}const rt=await we.generateAsync({type:"blob"});tU.saveAs(rt,"ig-panorama-slides.zip")}catch{alert("Gagal membuat zip.")}finally{w(!1)}},U=(O,G,pe)=>{g(pe),P("edit"),E(!0),C(pe),H.current=!0,fe.current={x:O,y:G};const we=i.find(Ae=>Ae.id===pe);we&&(re.current={x:we.x,y:we.y})},z=(O,G)=>{O.stopPropagation(),O.preventDefault();const pe="touches"in O?O.touches[0].clientX:O.clientX,we="touches"in O?O.touches[0].clientY:O.clientY;Z.current=!0;const Ae=i.find(rt=>rt.id===G);Ae&&(X.current={x:pe,y:we,w:Ae.width,h:Ae.height})},q=(O,G)=>{if(Z.current&&m){const pe=(O-X.current.x)/x,we=Math.max(50,X.current.w+pe);i.find(rt=>rt.id===m)&&o(rt=>rt.map(Re=>Re.id===m?{...Re,width:we,height:we/Re.currentAspectRatio}:Re));return}if(H.current&&m){const pe=(O-fe.current.x)/x,we=(G-fe.current.y)/x;o(Ae=>Ae.map(rt=>rt.id===m?{...rt,x:re.current.x+pe,y:re.current.y+we}:rt))}},ie=()=>{(H.current||Z.current)&&de(i),H.current=!1,Z.current=!1,oe.current=0},ue=O=>{if(O.touches.length===2){const G=Math.hypot(O.touches[0].clientX-O.touches[1].clientX,O.touches[0].clientY-O.touches[1].clientY);oe.current=G,W.current=x}},Q=O=>{if(O.touches.length===2&&oe.current>0){const pe=Math.hypot(O.touches[0].clientX-O.touches[1].clientX,O.touches[0].clientY-O.touches[1].clientY)-oe.current,we=Math.max(.05,Math.min(1.5,W.current+pe*.001));_(we)}},le=()=>i.find(O=>O.id===m),ve=()=>_(O=>Math.min(O+.05,1.5)),he=()=>_(O=>Math.max(O-.05,.05));return u.jsxs("div",{className:"h-[100dvh] bg-slate-50 text-slate-900 flex flex-col overflow-hidden font-sans relative",children:[u.jsx("style",{children:`
                    .no-scrollbar::-webkit-scrollbar { display: none; }
                    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
                `}),u.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 pointer-events-none flex justify-between items-start",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:t,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors",children:u.jsx(ci,{className:"w-5 h-5"})}),u.jsx("button",{onClick:te,disabled:c<0,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors disabled:opacity-50",children:u.jsx(ck,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"pointer-events-auto bg-white/90 backdrop-blur-md border border-slate-200 rounded-full flex items-center p-1 shadow-sm",children:[u.jsx("button",{onClick:he,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:u.jsx(rU,{className:"w-4 h-4"})}),u.jsxs("div",{className:"px-2 text-xs font-mono font-bold text-slate-700 w-10 text-center select-none",children:[Math.round(x*100),"%"]}),u.jsx("button",{onClick:ve,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:u.jsx(nU,{className:"w-4 h-4"})})]}),u.jsx("button",{onClick:ee,disabled:y||i.length===0,className:"pointer-events-auto bg-slate-900 hover:bg-slate-800 text-white px-4 py-2.5 rounded-full shadow-lg shadow-slate-900/10 font-bold text-xs flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 border border-slate-800",children:y?"Saving...":u.jsxs(u.Fragment,{children:[u.jsx(kb,{className:"w-4 h-4"})," Save"]})})]}),u.jsx("div",{className:"flex-1 bg-slate-100 overflow-hidden relative flex flex-col",children:u.jsx("div",{className:"flex-1 overflow-auto no-scrollbar relative w-full h-full grid place-items-center p-8 canvas-bg touch-none transition-all duration-300",style:{paddingBottom:v?"140px":"0px"},ref:I,onClick:O=>{O.target===I.current&&g(null)},onMouseMove:O=>q(O.clientX,O.clientY),onTouchMove:O=>{if(O.touches.length===2){Q(O);return}q(O.touches[0].clientX,O.touches[0].clientY)},onMouseUp:ie,onTouchEnd:ie,onTouchStart:ue,children:u.jsxs("div",{className:"relative shadow-2xl transition-transform duration-75 ease-linear shrink-0",style:{width:V*x,height:R*x},children:[u.jsx("div",{className:"absolute inset-0 canvas-bg",style:{backgroundColor:L}}),u.jsx("div",{className:"absolute inset-0 overflow-hidden",children:i.map(O=>u.jsxs("div",{className:"absolute group",style:{left:O.x*x,top:O.y*x,width:O.width*x,height:O.height*x,transform:`rotate(${O.rotation}deg) scaleX(${O.scaleX})`,zIndex:m===O.id?50:1},children:[u.jsx("div",{className:`absolute -inset-0.5 pointer-events-none transition-opacity duration-200 z-50 ${m===O.id?"opacity-100":"opacity-0"}`,style:{border:"2px dashed #0f172a",borderRadius:O.maskShape==="circle"?"50%":`${O.borderRadius}px`}}),u.jsx("div",{style:{width:"100%",height:"100%",borderRadius:O.maskShape==="circle"?"50%":`${O.borderRadius}px`,overflow:"hidden",border:O.borderWidth>0?`${O.borderWidth*x}px solid ${O.borderColor}`:"none",filter:O.isGrayscale?"grayscale(100%)":"none",position:"relative"},onMouseDown:G=>U(G.clientX,G.clientY,O.id),onTouchStart:G=>{G.touches.length===1&&U(G.touches[0].clientX,G.touches[0].clientY,O.id)},children:u.jsx("img",{src:O.src,alt:"item",className:"w-full h-full select-none",draggable:!1,style:{objectFit:"cover"}})})]},O.id))}),m&&le()&&u.jsxs("div",{className:"absolute pointer-events-auto z-[100]",style:{left:(le().x+le().width/2)*x,top:Math.max(-50,le().y*x-60),transform:"translateX(-50%)"},onMouseDown:O=>O.stopPropagation(),onTouchStart:O=>O.stopPropagation(),children:[u.jsxs("div",{className:"bg-white/90 backdrop-blur-md text-slate-700 rounded-xl shadow-xl border border-slate-200 flex items-center p-1.5 gap-1",children:[u.jsx("button",{onClick:ze,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:u.jsx(ek,{className:"w-4 h-4"})}),u.jsx("button",{onClick:ht,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:u.jsx(tk,{className:"w-4 h-4"})}),u.jsx("button",{onClick:Me,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-900",children:u.jsx(uk,{className:"w-4 h-4"})}),u.jsx("button",{onClick:je,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:u.jsx(nk,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1"}),u.jsx("button",{onClick:Se,className:"p-2 hover:bg-red-50 text-red-500 rounded-lg",children:u.jsx(br,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"w-3 h-3 bg-white/90 rotate-45 absolute -bottom-1.5 left-1/2 -translate-x-1/2 border-r border-b border-slate-200"})]}),i.map(O=>m===O.id&&u.jsxs("div",{className:"absolute pointer-events-none z-[51]",style:{left:O.x*x,top:O.y*x,width:O.width*x,height:O.height*x,transform:`rotate(${O.rotation}deg) scaleX(${O.scaleX})`},children:[u.jsx("div",{className:"absolute -bottom-3 -right-3 w-6 h-6 bg-slate-900 rounded-full border-2 border-white shadow-md pointer-events-auto flex items-center justify-center cursor-nwse-resize hover:scale-110 transition-transform",onMouseDown:G=>z(G,O.id),onTouchStart:G=>z(G,O.id),children:u.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),Z.current&&u.jsxs("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-[10px] px-2 py-1 rounded shadow whitespace-nowrap",children:[Math.round(O.width),"px"]})]},`resize-${O.id}`)),u.jsx("div",{className:"absolute inset-0 pointer-events-none z-20",children:Array.from({length:e-1}).map((O,G)=>u.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-dashed border-slate-400/50 flex flex-col justify-between items-center py-2 mix-blend-difference",style:{left:`${(G+1)/e*100}%`},children:u.jsx(X2,{className:"w-4 h-4 text-slate-600 opacity-80 bg-white/20 rounded-full p-0.5"})},G))}),u.jsx("div",{className:"absolute top-0 left-0 w-full flex pointer-events-none z-20",children:Array.from({length:e}).map((O,G)=>u.jsx("div",{className:"flex-1 border-r border-transparent h-6 flex items-center justify-center",children:u.jsxs("span",{className:"bg-white/80 text-slate-900 text-[9px] font-bold px-2 rounded-b backdrop-blur-sm shadow-sm border-x border-b border-slate-200",children:["Slide ",G+1]})},G))})]})})}),u.jsxs("div",{className:`fixed bottom-0 left-0 right-0 z-[60] flex flex-col bg-white border-t border-slate-200 transition-transform duration-300 ease-out shadow-[0_-10px_30px_-10px_rgba(0,0,0,0.05)] ${v?"translate-y-0":"translate-y-[calc(100%-40px)]"}`,children:[u.jsxs("div",{onClick:()=>E(!v),className:"h-10 flex items-center justify-center cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors border-b border-slate-200 group shrink-0",children:[u.jsx("div",{className:"w-12 h-1 bg-slate-300 rounded-full group-hover:bg-slate-400 mb-1"}),u.jsx(_r,{className:`w-4 h-4 text-slate-400 absolute right-4 transition-transform duration-300 ${v?"":"rotate-180"}`})]}),u.jsxs("div",{className:"flex border-b border-slate-200 bg-white shrink-0",children:[u.jsx("button",{onClick:()=>{P("add"),E(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${T==="add"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Add"}),u.jsx("button",{onClick:()=>{P("canvas"),E(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${T==="canvas"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Layout"}),u.jsx("button",{onClick:()=>{P("edit"),E(!0)},disabled:!m,className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${T==="edit"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-300 cursor-not-allowed"}`,children:"Edit"})]}),u.jsxs("div",{className:"h-28 overflow-x-auto overflow-y-hidden bg-white no-scrollbar flex items-center",children:[T==="add"&&u.jsxs("div",{className:"flex items-center gap-4 px-6 min-w-max",children:[u.jsxs("button",{onClick:()=>{var O;return(O=D.current)==null?void 0:O.click()},className:"h-20 w-20 bg-slate-50 hover:bg-slate-100 rounded-xl text-slate-700 font-bold flex flex-col items-center justify-center gap-2 border border-slate-200 transition-all shrink-0",children:[u.jsx(Xa,{className:"w-6 h-6 text-slate-900"}),u.jsx("span",{className:"text-[10px] uppercase",children:"Upload"})]}),u.jsx("input",{type:"file",ref:D,onChange:Ce,className:"hidden",accept:"image/*"}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>ge($("circle")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(rk,{className:"w-6 h-6 text-slate-700"})}),u.jsx("button",{onClick:()=>ge($("square")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(sk,{className:"w-6 h-6 text-slate-700"})}),u.jsx("button",{onClick:()=>ge($("triangle")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(ik,{className:"w-6 h-6 text-slate-700"})}),u.jsx("button",{onClick:()=>ge($("heart")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(ak,{className:"w-6 h-6 text-red-500"})}),u.jsx("button",{onClick:()=>ge($("star")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(ok,{className:"w-6 h-6 text-slate-900"})}),u.jsx("button",{onClick:()=>ge($("text")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors font-bold text-xs text-slate-700",children:"TXT"})]})]}),T==="canvas"&&u.jsxs("div",{className:"flex items-center gap-6 px-6 min-w-max h-full",children:[u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl flex flex-col justify-center gap-1 w-48 shrink-0 border border-slate-100",children:[u.jsx("div",{className:"flex justify-between text-[10px] text-slate-500 font-bold uppercase",children:u.jsxs("span",{children:["Slides (",e,")"]})}),u.jsx("input",{type:"range",min:"2",max:"10",value:e,onChange:O=>n(parseInt(O.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>s("square"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${r==="square"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Square 1:1"}),u.jsx("button",{onClick:()=>s("portrait"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${r==="portrait"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Portrait 4:5"})]}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100 flex items-center justify-between gap-3 shrink-0",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Background"}),u.jsx("input",{type:"color",value:L,onChange:O=>B(O.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-0"})]})]}),T==="edit"&&m&&u.jsxs("div",{className:"flex items-center gap-5 px-6 min-w-max h-full",children:[u.jsxs("div",{className:"flex flex-col gap-1 items-center shrink-0",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Layers"}),u.jsxs("div",{className:"flex gap-1 bg-slate-50 border border-slate-100 p-1 rounded-lg",children:[u.jsx("button",{onClick:()=>se("front"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Bring to Front",children:u.jsx(ay,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>se("forward"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Step Forward",children:u.jsx(Ab,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>se("backward"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Step Backward",children:u.jsx(Nb,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>se("back"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Send to Back",children:u.jsx(ay,{className:"w-4 h-4 opacity-50"})})]})]}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"flex flex-col gap-1 w-40 shrink-0",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Size"}),u.jsx("input",{type:"range",min:"10",max:"250",defaultValue:"100",onChange:O=>Be({width:le().originalAspectRatio*100*(parseInt(O.target.value)/10),height:le().originalAspectRatio*100*(parseInt(O.target.value)/10)/le().currentAspectRatio},!1),onMouseUp:()=>de(i),onTouchEnd:()=>de(i),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"})]}),u.jsxs("div",{className:"flex flex-col gap-1 shrink-0",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Mask"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>Be({maskShape:"none",borderRadius:0}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((xe=le())==null?void 0:xe.maskShape)==="none"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Box"}),u.jsx("button",{onClick:()=>Be({maskShape:"circle"}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((Ne=le())==null?void 0:Ne.maskShape)==="circle"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Circle"}),u.jsx("button",{onClick:()=>Be({maskShape:"square",borderRadius:20}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((Pe=le())==null?void 0:Pe.maskShape)==="square"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Round"})]})]}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"flex flex-col gap-1 w-40 shrink-0",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Border"}),u.jsx("input",{type:"color",value:(mt=le())==null?void 0:mt.borderColor,onChange:O=>Be({borderColor:O.target.value}),className:"w-4 h-4 rounded bg-transparent border-0 cursor-pointer"})]}),u.jsx("input",{type:"range",min:"0",max:"20",value:(Zt=le())==null?void 0:Zt.borderWidth,onChange:O=>Be({borderWidth:parseInt(O.target.value)}),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900"})]}),u.jsxs("button",{onClick:()=>{var O;return Be({isGrayscale:!((O=le())!=null&&O.isGrayscale)})},className:`h-12 px-3 rounded-lg text-[10px] font-bold border transition-colors flex flex-col items-center justify-center gap-1 shrink-0 ${(kt=le())!=null&&kt.isGrayscale?"bg-slate-100 text-slate-900 border-slate-300":"bg-white border-slate-200 text-slate-400 hover:border-slate-300"}`,children:[u.jsx(lk,{className:"w-4 h-4"}),"B&W"]})]})]})]})]})},iU=t=>{const e=t.toUpperCase().split("").map(n=>127397+n.charCodeAt(0));return String.fromCodePoint(...e)},oU=({data:t})=>{if(!t||t.length===0)return u.jsx("div",{className:"h-40 flex items-center justify-center text-slate-300",children:"No Data"});const e=150,n=600,r=20,s=Math.max(...t.map(o=>o.visitors),10),i=t.map((o,a)=>{const l=r+a/(t.length-1)*(n-2*r),c=e-r-o.visitors/s*(e-2*r);return`${l},${c}`}).join(" ");return u.jsxs("div",{className:"w-full overflow-hidden",children:[u.jsxs("svg",{viewBox:`0 0 ${n} ${e}`,className:"w-full h-auto",children:[u.jsx("line",{x1:r,y1:r,x2:n-r,y2:r,stroke:"#f1f5f9",strokeWidth:"1"}),u.jsx("line",{x1:r,y1:e/2,x2:n-r,y2:e/2,stroke:"#f1f5f9",strokeWidth:"1"}),u.jsx("line",{x1:r,y1:e-r,x2:n-r,y2:e-r,stroke:"#f1f5f9",strokeWidth:"1"}),u.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"3",points:i,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((o,a)=>{const l=r+a/(t.length-1)*(n-2*r),c=e-r-o.visitors/s*(e-2*r);return u.jsxs("g",{className:"group",children:[u.jsx("circle",{cx:l,cy:c,r:"4",fill:"white",stroke:"#3b82f6",strokeWidth:"2"}),u.jsx("foreignObject",{x:l-25,y:c-40,width:"50",height:"30",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("div",{className:"bg-slate-800 text-white text-[9px] rounded py-1 text-center font-bold",children:o.visitors})})]},a)})]}),u.jsx("div",{className:"flex justify-between px-2 mt-2 text-[10px] text-slate-400 font-medium",children:t.map((o,a)=>u.jsx("span",{children:o.date.slice(5)},a))})]})},aU=()=>{const[t,e]=F.useState(!0),[n,r]=F.useState(null),[s,i]=F.useState([]),o=async()=>{e(!0);const[m,g]=await Promise.all([WM(),HM()]);r(m),i(g),e(!1)};F.useEffect(()=>{o()},[]);const a=m=>new Date(m).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});if(t)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"})});if(!n)return u.jsx("div",{className:"p-10 text-center",children:"Failed to load data."});const l=n.dailyStats.length>0?n.dailyStats[n.dailyStats.length-1].visitors:0,c=n.dailyStats.length>1?n.dailyStats[n.dailyStats.length-2].visitors:0,d=c===0?100:Math.round((l-c)/c*100);return u.jsx("div",{className:"min-h-screen bg-slate-50 p-6 md:p-10 animate-fade-in",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-10 gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Dashboard Overview"}),u.jsx("p",{className:"text-slate-500",children:"Real-time insight & system health."})]}),u.jsxs("button",{onClick:o,className:"bg-white border border-slate-200 text-slate-600 px-4 py-2 rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-slate-50 hover:text-slate-900 transition-colors shadow-sm",children:[u.jsx(ed,{className:"w-4 h-4"})," Refresh Data"]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-2xl",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),d!==0&&u.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${d>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[d>0?u.jsx(Ab,{className:"w-3 h-3"}):u.jsx(Nb,{className:"w-3 h-3"}),Math.abs(d),"%"]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-black text-slate-900",children:n.totalVisitors}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Total Visitors (7 Days)"})]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[u.jsx("div",{className:"flex justify-between items-start",children:u.jsx("div",{className:"p-3 bg-slate-900 text-white rounded-2xl",children:u.jsx(mc,{className:"w-6 h-6"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-black text-slate-900",children:s.length}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Private Messages"})]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[u.jsx("div",{className:"flex justify-between items-start",children:u.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-2xl",children:u.jsx(ml,{className:"w-6 h-6"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-black text-slate-900",children:n.totalErrors}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"System Errors (7 Days)"})]})]})]}),u.jsx("div",{className:"mb-10",children:u.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between",children:[u.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[u.jsx(mc,{className:"w-5 h-5 text-slate-900"})," Inbox Rahasia (Private)"]}),u.jsx("span",{className:"text-xs font-bold bg-slate-200 text-slate-600 px-2 py-1 rounded-full",children:s.length})]}),u.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:s.length===0?u.jsx("div",{className:"p-12 text-center text-slate-400 text-sm",children:"Belum ada pesan rahasia masuk."}):u.jsx("div",{className:"divide-y divide-slate-50",children:s.map(m=>u.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[u.jsx("div",{className:"flex justify-between items-start mb-2",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-bold bg-slate-900 text-white px-2 py-0.5 rounded",children:"Anonim"}),u.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:a(m.timestamp)})]})}),u.jsx("p",{className:"text-slate-700 text-sm leading-relaxed whitespace-pre-wrap",children:m.content})]},m.id))})})]})}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Traffic Trend"}),u.jsx(oU,{data:n.dailyStats})]}),u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"System Logs"}),u.jsx("div",{className:"space-y-4",children:n.logs.length===0?u.jsx("p",{className:"text-slate-400 text-sm italic",children:"No logs recorded."}):n.logs.map(m=>u.jsxs("div",{className:"flex gap-4 items-start p-3 hover:bg-slate-50 rounded-xl transition-colors border-b border-slate-50 last:border-0",children:[u.jsx("div",{className:`w-2 h-2 rounded-full mt-2 shrink-0 ${m.type==="error"?"bg-red-500":"bg-blue-500"}`}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:m.message}),u.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1",children:new Date(m.timestamp).toLocaleString()}),m.details&&u.jsx("p",{className:"text-xs text-slate-400 mt-1 truncate",children:m.details})]})]},m.id))})]})]}),u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[u.jsx(pc,{className:"w-5 h-5 text-slate-400"}),u.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Demographics"})]}),u.jsx("div",{className:"space-y-5",children:n.geoStats.length===0?u.jsx("p",{className:"text-slate-400 text-sm italic",children:"No data yet."}):n.geoStats.map((m,g)=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-700 mb-2",children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:iU(m.country)})," ",m.country]}),u.jsx("span",{children:m.count})]}),u.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2 overflow-hidden",children:u.jsx("div",{className:"bg-slate-900 h-2 rounded-full",style:{width:`${m.count/n.totalVisitors*100}%`}})})]},g))})]}),u.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2rem] text-white shadow-xl relative overflow-hidden",children:[u.jsxs("div",{className:"relative z-10",children:[u.jsx("h3",{className:"text-lg font-bold mb-2",children:"System Status"}),u.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),u.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"All Systems Operational"})]}),u.jsxs("div",{className:"space-y-2 text-xs text-slate-500",children:[u.jsx("p",{children:"Database: Connected"}),u.jsx("p",{children:"API Latency: ~120ms"}),u.jsx("p",{children:"Version: v2.4.0 (Beta)"})]})]}),u.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-blue-600/20 rounded-full blur-3xl pointer-events-none"})]})]})]})]})})},lU=({onLogout:t})=>{const e=_i(),[n,r]=F.useState(!1),[s,i]=F.useState({x:20,y:window.innerHeight-80}),[o,a]=F.useState(!1),l=F.useRef({x:0,y:0}),c=F.useRef({x:0,y:0}),d=F.useRef(null);F.useEffect(()=>{const v=T=>{if(!o)return;T.preventDefault();const P=T.clientX-l.current.x,L=T.clientY-l.current.y,B=Math.max(10,Math.min(window.innerWidth-60,c.current.x+P)),k=Math.max(10,Math.min(window.innerHeight-60,c.current.y+L));i({x:B,y:k})},E=()=>{a(!1)};return o&&(window.addEventListener("mousemove",v),window.addEventListener("mouseup",E)),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",E)}},[o]);const m=v=>{n||(a(!0),l.current={x:v.clientX,y:v.clientY},c.current={...s})},g=v=>{n||(a(!0),l.current={x:v.touches[0].clientX,y:v.touches[0].clientY},c.current={...s})},y=v=>{if(!o)return;const E=v.touches[0].clientX-l.current.x,T=v.touches[0].clientY-l.current.y,P=Math.max(10,Math.min(window.innerWidth-60,c.current.x+E)),L=Math.max(10,Math.min(window.innerHeight-60,c.current.y+T));i({x:P,y:L})},w=v=>{Math.sqrt(Math.pow(v.clientX-l.current.x,2)+Math.pow(v.clientY-l.current.y,2))<5&&r(!n)},x=()=>{wv(),alert("Cache teks di memori telah dihapus. Halaman akan dimuat ulang."),window.location.reload()},_=()=>{confirm("Yakin ingin reset total? Ini akan menghapus semua pengaturan lokal dan login.")&&(localStorage.clear(),wv(),window.location.reload())};return u.jsxs(u.Fragment,{children:[n&&u.jsx("div",{className:"fixed inset-0 z-[998]",onClick:()=>r(!1)}),u.jsx("div",{className:"fixed z-[999]",style:{left:s.x,top:s.y},children:u.jsxs("div",{className:"relative",children:[u.jsx("button",{onMouseDown:m,onClick:w,onTouchStart:g,onTouchMove:y,onTouchEnd:()=>a(!1),className:`w-12 h-12 rounded-full flex items-center justify-center shadow-xl transition-all duration-200 cursor-grab active:cursor-grabbing ${n?"bg-slate-900 text-white rotate-90 scale-110":"bg-white text-slate-700 border border-slate-200 hover:scale-105"}`,style:{touchAction:"none"},children:u.jsx(kf,{className:"w-6 h-6"})}),n&&u.jsxs("div",{ref:d,className:"absolute bottom-16 left-0 bg-white/90 backdrop-blur-md border border-slate-200 rounded-2xl shadow-2xl p-2 w-60 flex flex-col gap-1 animate-fade-in-up origin-bottom-left",children:[u.jsx("div",{className:"px-3 py-2 border-b border-slate-100 mb-1",children:u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Admin Tools"})}),u.jsxs("button",{onClick:()=>{e("/dashboard"),r(!1)},className:"flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-900 hover:bg-slate-100 rounded-xl transition-colors text-left",children:[u.jsx("div",{className:"p-1.5 bg-slate-200 text-slate-700 rounded-lg",children:u.jsx(Z2,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-xs",children:"Open Dashboard"}),u.jsx("span",{className:"block text-[9px] text-slate-400",children:"View analytics & charts"})]})]}),u.jsx("div",{className:"h-px bg-slate-100 mx-2 my-1"}),u.jsxs("button",{onClick:x,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:text-blue-600 rounded-xl transition-colors text-left",children:[u.jsx("div",{className:"p-1.5 bg-blue-50 text-blue-500 rounded-lg",children:u.jsx(ed,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-xs",children:"Hapus Cache"}),u.jsx("span",{className:"block text-[9px] text-slate-400",children:"Fix teks nyangkut"})]})]}),u.jsxs("button",{onClick:_,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-red-50 hover:text-red-600 rounded-xl transition-colors text-left",children:[u.jsx("div",{className:"p-1.5 bg-red-50 text-red-500 rounded-lg",children:u.jsx(br,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-xs",children:"Reset Total"}),u.jsx("span",{className:"block text-[9px] text-slate-400",children:"Hapus data lokal"})]})]})]})]})})]})},uU="https://cdn-icons-png.flaticon.com/128/16739/16739754.png",cU=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState(""),[s,i]=F.useState(!1),[o,a]=F.useState([]);return F.useEffect(()=>{const l=c=>{const d=c.detail.message;a(m=>[...m,d])};return window.addEventListener("fanra-toast",l),()=>window.removeEventListener("fanra-toast",l)},[]),F.useEffect(()=>{if(o.length>0&&!t){r(o[0]),a(m=>m.slice(1)),e(!0),i(!1);const l=3e3,c=setTimeout(()=>{i(!0)},l),d=setTimeout(()=>{e(!1)},l+600);return()=>{clearTimeout(c),clearTimeout(d)}}},[o,t]),!t&&o.length===0?null:u.jsx("div",{className:"fixed top-0 left-0 right-0 z-[9999] flex justify-center pointer-events-none p-4",children:u.jsxs("div",{className:`
            bg-white/95 backdrop-blur-xl 
            border border-slate-200 
            shadow-[0_20px_40px_-10px_rgba(0,0,0,0.15)] 
            rounded-full 
            pl-2 pr-5 py-2 
            flex items-center gap-3 
            min-w-[200px] max-w-[90vw] 
            pointer-events-auto 
            transform transition-all duration-500 cubic-bezier(0.34, 1.56, 0.64, 1)
            ${s?"-translate-y-[200%]":"translate-y-2"}
        `,children:[u.jsx("div",{className:"w-9 h-9 bg-slate-50 rounded-full flex items-center justify-center shrink-0 shadow-sm border border-slate-100 overflow-hidden",children:u.jsx("img",{src:uU,alt:"Notif",className:"w-6 h-6 object-contain"})}),u.jsxs("div",{className:"flex-1 min-w-0 pr-1",children:[u.jsx("h4",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest leading-none mb-0.5",children:"Notification"}),u.jsx("p",{className:"text-xs font-bold text-slate-900 leading-tight truncate",children:n})]})]})})},dU=({isOpen:t,onClose:e,onSuccess:n})=>{const[r,s]=F.useState(["","","","",""]),[i,o]=F.useState(!1),a=F.useRef([]);F.useEffect(()=>{t&&(s(["","","","",""]),o(!1),setTimeout(()=>{var d;return(d=a.current[0])==null?void 0:d.focus()},100))},[t]);const l=(d,m)=>{var y;if(!/^\d*$/.test(m))return;const g=[...r];g[d]=m,s(g),o(!1),m&&d<4&&((y=a.current[d+1])==null||y.focus()),g.every(w=>w!=="")&&(g.join("")==="47326"?(n(),e()):(o(!0),setTimeout(()=>{var x;s(["","","","",""]),(x=a.current[0])==null||x.focus()},500)))},c=(d,m)=>{var g;m.key==="Backspace"&&!r[d]&&d>0&&((g=a.current[d-1])==null||g.focus())};return t?u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/80 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-2xl max-w-sm w-full relative overflow-hidden",children:[u.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-800",children:""}),u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-900 rounded-full flex items-center justify-center text-white mb-6 shadow-lg shadow-slate-900/30",children:u.jsx(Za,{className:"w-5 h-5"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Admin Access"}),u.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Enter secure PIN to continue"}),u.jsx("div",{className:"flex gap-3 mb-6",children:r.map((d,m)=>u.jsx("input",{ref:g=>{a.current[m]=g},type:"password",maxLength:1,value:d,onChange:g=>l(m,g.target.value),onKeyDown:g=>c(m,g),className:`w-10 h-12 border-2 rounded-lg text-center text-xl font-bold bg-slate-50 focus:bg-white transition-all outline-none ${i?"border-red-500 text-red-500 shake":"border-slate-200 focus:border-slate-900 text-slate-900"}`,autoComplete:"off",inputMode:"numeric"},m))}),i&&u.jsx("p",{className:"text-xs font-bold text-red-500 animate-pulse",children:"Access Denied"})]})]})}):null},Nr=({children:t,isAdmin:e})=>u.jsxs("div",{className:"min-h-screen flex flex-col font-sans bg-[#fafafa] relative overflow-x-hidden",children:[u.jsx(YM,{isAdmin:e}),u.jsx("main",{className:"flex-grow pt-24 pb-12 animate-fade-in-up",children:t}),u.jsx(lD,{}),u.jsx(uD,{}),u.jsxs("footer",{className:"bg-slate-950 text-white pt-32 pb-12 px-6 overflow-hidden relative mt-12",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-20 pointer-events-none mix-blend-overlay",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),u.jsx("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"20px 20px",maskImage:"linear-gradient(to bottom, transparent, black)"}}),u.jsx("div",{className:"absolute top-0 left-0 w-full overflow-hidden leading-[0] z-20",children:u.jsx("svg",{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",className:"relative block w-full h-[50px] md:h-[90px] fill-[#fafafa]",children:u.jsx("path",{d:"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"})})}),u.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16",children:[u.jsxs("div",{className:"lg:col-span-2",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsx(go,{className:"w-12 h-12",variant:"light"}),u.jsx(lt,{id:"footer_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:e,tag:"h2",className:"text-2xl font-black tracking-tighter uppercase"})]}),u.jsx(lt,{id:"footer_brand_desc",defaultText:"Seorang mahasiswa ITERA angkatan 2025 yang hobi mengulik kode dan berbagi cerita lewat ruang digital.",isAdmin:e,tag:"p",multiline:!0,className:"text-slate-500 text-sm max-w-sm leading-relaxed font-medium"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Communication"}),u.jsxs("a",{href:"mailto:irfanrizkiaditri@gmail.com",className:"text-sm font-bold text-slate-200 hover:text-white transition-colors flex items-center gap-3 group",children:[u.jsx(fk,{className:"w-5 h-5 group-hover:scale-110 transition-transform text-slate-400 group-hover:text-white"}),u.jsx(lt,{id:"footer_email",defaultText:"irfanrizkiaditri@gmail.com",isAdmin:e,tag:"span"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Social Discovery"}),u.jsxs("div",{className:"flex gap-6",children:[u.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:u.jsx(dk,{className:"w-6 h-6"})}),u.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:u.jsx(hk,{className:"w-6 h-6"})}),u.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:u.jsx(Lb,{className:"w-6 h-6"})})]})]})]}),u.jsxs("div",{className:"pt-8 border-t border-slate-900 flex flex-col md:flex-row justify-between items-center gap-6",children:[u.jsxs("p",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:[" ",new Date().getFullYear(),"  ",u.jsx(lt,{id:"footer_copyright",defaultText:"PERSPECTIVE OF FANRA",isAdmin:e,tag:"span"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("span",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:u.jsx(lt,{id:"footer_location",defaultText:"Sumatera, Indonesia",isAdmin:e,tag:"span"})})})]})]}),u.jsx("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] opacity-[0.02] pointer-events-none translate-x-20 -translate-y-20",children:u.jsx(go,{className:"w-full h-full",variant:"light"})})]})]}),hU=()=>{const{pathname:t}=wi();return F.useEffect(()=>{window.scrollTo(0,0)},[t]),null},fU=()=>{const[t,e]=F.useState(!0),[n,r]=F.useState(!1),[s,i]=F.useState(!1);F.useEffect(()=>{qM(),localStorage.removeItem("fanra_admin_auth")},[]),F.useEffect(()=>{const l=c=>{if(c.key.toLowerCase()==="f"){const d=c.target;if(d.tagName==="INPUT"||d.tagName==="TEXTAREA"||d.tagName==="SELECT"||d.isContentEditable)return;c.preventDefault(),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(g=>{console.error(`Error attempting to enable fullscreen: ${g.message}`)})}};return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}},[]);const o=()=>{window.scrollTo(0,0),e(!1)},a=()=>{i(!0)};return u.jsxs(F2,{children:[u.jsx(hU,{}),u.jsx(cU,{}),u.jsx(dU,{isOpen:n,onClose:()=>r(!1),onSuccess:a}),s&&u.jsx(lU,{onLogout:()=>i(!1)}),t&&u.jsx(eD,{onComplete:o,onTriggerAdmin:()=>r(!0)}),u.jsxs(N2,{children:[u.jsx(Pn,{path:"/",element:u.jsx(Nr,{isAdmin:s,children:u.jsx(nD,{onTriggerAdmin:()=>r(!0),isAdmin:s})})}),u.jsx(Pn,{path:"/projects",element:u.jsx(Nr,{isAdmin:s,children:u.jsx(Ev,{isAdmin:s})})}),u.jsx(Pn,{path:"/projects/:projectId",element:u.jsx(Nr,{isAdmin:s,children:u.jsx(Ev,{isAdmin:s})})}),u.jsx(Pn,{path:"/blog",element:u.jsx(Nr,{isAdmin:s,children:u.jsx(Tv,{isAdmin:s})})}),u.jsx(Pn,{path:"/blog/:id",element:u.jsx(Nr,{isAdmin:s,children:u.jsx(Tv,{isAdmin:s})})}),u.jsx(Pn,{path:"/gallery",element:u.jsx(Nr,{isAdmin:s,children:u.jsx(iD,{isAdmin:s})})}),u.jsx(Pn,{path:"/music",element:u.jsx(Nr,{isAdmin:s,children:u.jsx(oD,{isAdmin:s})})}),u.jsx(Pn,{path:"/messages",element:u.jsx(Nr,{isAdmin:s,children:u.jsx(aD,{isAdmin:s})})}),u.jsx(Pn,{path:"/dashboard",element:u.jsx(Nr,{isAdmin:s,children:u.jsx(aU,{})})}),u.jsx(Pn,{path:"/studio",element:u.jsx(Q6,{onExit:()=>window.location.href="/#/projects"})}),u.jsx(Pn,{path:"/panorama",element:u.jsx(sU,{onExit:()=>window.location.href="/#/projects"})}),u.jsx(Pn,{path:"*",element:u.jsx(k2,{to:"/",replace:!0})})]})]})},J1=document.getElementById("root");if(!J1)throw new Error("Could not find root element to mount to");const pU=Rh.createRoot(J1);pU.render(u.jsx(yp.StrictMode,{children:u.jsx(fU,{})}));

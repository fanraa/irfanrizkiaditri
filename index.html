<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>irfanrizkiaditri.site</title>

  <!-- Icons & Fonts -->
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="style/main.css">

  <!-- Cloudinary config if used (optional) -->
  <script src="js/cloud-config.js"></script>
  <script src="js/cloudinary.js"></script>

  <!-- Supabase client (UMD) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.35.0/dist/supabase.min.js"></script>
</head>
<body>

  <!-- Hamburger menu -->
  <div id="hamburgerMenu" class="hamburger" aria-label="Buka menu" tabindex="0">
    <span></span>
    <span></span>
    <span></span>
  </div>

  <!-- Sidebar menu -->
  <aside id="sideMenu" class="side-menu" aria-label="Sidebar navigasi">
    <nav class="side-menu-content">
      <ul>
        <li><a href="#" id="menuHome"><i class='bx bx-home'></i> Beranda</a></li>
        <li><a href="#" id="menuAbout"><i class='bx bx-user'></i> Tentang</a></li>

        <li class="menu-contact">
          <a href="#" id="menuContact">Kontak <span id="contactCaret" class="caret">&#9660;</span></a>
          <div id="contactSubmenu" class="contact-submenu" aria-hidden="true">
            <a href="https://wa.me/6285788918217" target="_blank" title="WhatsApp"><i class="bx bxl-whatsapp"></i> WhatsApp</a>
            <a href="https://www.instagram.com/irfanrizkiaditri" target="_blank" title="Instagram"><i class="bx bxl-instagram"></i> Instagram</a>
            <a href="https://www.linkedin.com/in/irfanrizkiaditri" target="_blank" title="LinkedIn"><i class="bx bxl-linkedin"></i> LinkedIn</a>
            <a href="mailto:irfanrizkiaditri@gmail.com" title="Email"><i class='bx bx-envelope'></i> Email</a>
            <a href="https://github.com/fanraa" target="_blank" title="GitHub"><i class='bx bxl-github'></i> GitHub</a>
          </div>
        </li>

        <li class="menu-tools">
          <a href="#" id="menuTools">Tools <span id="toolsCaret" class="caret">&#9660;</span></a>
          <div id="toolsSubmenu" class="contact-submenu" aria-hidden="true">
            <a href="#" id="syncNow" title="Sinkronkan sekarang"><i class="bx bx-refresh"></i> Sync Now</a>
            <a href="#" id="exportLocal" title="Export data lokal"><i class="bx bx-download"></i> Export Local Data</a>
            <a href="#" id="clearLocal" title="Clear local cache"><i class="bx bx-trash"></i> Clear Local Cache</a>
            </div>
        </li>

      </ul>
    </nav>
  </aside>

  <!-- Toast container -->
  <div id="toastContainer" aria-live="polite" aria-atomic="true"></div>

  <!-- Mini tooltip (used by menu.js attachHints) -->
  <div id="miniTooltip" aria-hidden="true" style="position:fixed;left:0;top:0;padding:8px 10px;border-radius:8px;background:rgba(0,0,0,0.8);color:white;font-size:12px;pointer-events:none;opacity:0;transform:translateY(-6px);transition:opacity .12s,transform .12s;z-index:99999;"></div>

  <!-- About Modal -->
  <div id="aboutModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="aboutTitle">
    <div class="about-dialog">
      <button id="closeAbout" class="close-about" aria-label="Tutup" style="float:right;background:transparent;border:none;color:var(--muted);font-size:20px;">&times;</button>
      <div class="about-top">
        <div class="about-avatar-wrap">
          <img id="aboutAvatar" alt="Foto profil Irfan">
        </div>
      </div>
      <h2 id="aboutTitle">Tentang Saya</h2>
      <div class="about-body">
        <p>
          Halo, saya <strong>Irfan Rizki Aditri</strong>, mahasiswa S1 Fisika di <strong>Institut Teknologi Sumatera (ITERA)</strong>.
        </p>
        <p>
          Saya memiliki minat pada fisika, penulisan, dan pengembangan solusi digital. Halaman ini menampilkan karya, pemikiran, dan informasi singkat tentang kegiatan akademik serta proyek.
        </p>
        <p>
          Terima kasih atas kunjungan Anda. Jika ingin berkolaborasi atau menghubungi, silakan gunakan kontak pada menu.
        </p>
      </div>
    </div>
  </div>

  <div class="wrapper">
    <!-- Editor toolbar -->
    <div id="editorToolbar" class="editor-toolbar" aria-hidden="true" role="toolbar">
      <button class="btn ghost" id="btnEditProfile"><i class='bx bx-edit'></i> Edit Profil</button>
      <button class="btn ghost" id="btnManagePosts"><i class='bx bx-book-open'></i> Kelola Post</button>
      <button class="btn ghost" id="btnManageComments"><i class='bx bx-message-square-dots'></i> Kelola Komentar</button>
      <button class="btn ghost" id="btnManageReviews"><i class='bx bx-star'></i> Kelola Ulasan</button>
      <div style="flex:1"></div>
      <button class="btn ghost" id="btnManageNews"><i class='bx bx-news'></i> Kelola Berita</button>
      <button class="btn ghost" id="btnResetVisitors">Reset Visitors</button>
      <button class="btn" id="btnLogout">Logout Editor</button>
    </div>

    <!-- Header -->
    <header class="header" role="banner">
      <div class="brand">
        <div class="site-title">
          <h1>irfanrizkiaditri.site</h1>
          <div id="siteTag" style="font-size:0.85rem;color:var(--muted);">S1 Fisika — ITERA</div>
        </div>
      </div>

      <div class="top-actions" role="navigation" aria-label="Tindakan">
       <div class="top-actions" role="navigation" aria-label="Tindakan">
  <div id="statusSmall" class="note">Status: <span id="onlineStatus">—</span></div>
  <div id="visitorSmall" class="note">Visitors: 0</div>
    <!-- Live badge (visual indicator for realtime updates) -->
  <div id="liveBadge" class="live-badge" aria-hidden="true" title="Live updates">Live</div>


        <button class="btn ghost" id="openEditor">Editor</button>
        <button class="btn" id="themeBtn">Mode</button>

        <button class="btn" id="loginBtn">Masuk dengan Google</button>
        <button class="btn" id="logoutBtn" style="display:none;">Keluar</button>
        <span id="userInfo" aria-live="polite"></span>
      </div>
    </header>

    <!-- Hero -->
    <section class="card hero" aria-labelledby="heroTitle">
      <div class="avatar"><a id="avatarLink" href="https://www.instagram.com/irfanrizkiaditri" target="_blank"><img id="mainAvatar" alt="Foto Irfan"></a></div>
      <div class="meta">
        <div class="name" id="displayName">irfanrizkiaditri.site</div>
        <div class="role" id="displayRole"></div>
        <div class="bio" id="displayBio">Saya menempuh S1 Fisika di ITERA dan gemar mengeksplorasi ilmu serta menulis.</div>
        <div class="tags" id="tagsWrapper" aria-hidden="false">
          <div class="tag" data-key="location">Sumatera</div>
          <div class="tag" data-key="family">Mahasiswa</div>
          <div class="tag" data-key="study">Fisika</div>
          <div class="tag" data-key="campus">Itera</div>
          <div class="tag" data-key="gender">Laki-Laki</div>
        </div>
       
      </div>
    </section>

    <!-- Reviews + News -->
    <section class="card" style="padding:20px">
      <div class="row" style="display:flex;gap:20px;flex-wrap:wrap">
        <div class="left" style="flex:1;min-width:280px">
          <div style="display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:12px">
            <div style="text-align:center">
              <div class="avg-score" id="avgScore" style="font-size:2.4rem;font-weight:700;color:#ffd166;">-</div>
              <div class="note" id="reviewsCount" style="font-size:0.9rem">— ulasan</div>
            </div>
            <div style="flex:1;text-align:right;min-width:250px">
              <div class="note">Beri penilaian</div>
              <div id="starForm" class="stars" style="margin-top:6px;display:flex;justify-content:flex-end;gap:6px;font-size:1.6rem;cursor:pointer;">
                <span class="star" data-val="1">★</span>
                <span class="star" data-val="2">★</span>
                <span class="star" data-val="3">★</span>
                <span class="star" data-val="4">★</span>
                <span class="star" data-val="5">★</span>
              </div>
              <div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end;align-items:center;flex-wrap:wrap">
                <input id="reviewName" placeholder="Nama (opsional)" style="padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:transparent;color:var(--text);width:160px">
                <button class="btn" id="submitReview" style="background:#ffd166;color:#000;">Kirim</button>
              </div>
            </div>
          </div>

          <hr style="border:none;height:1px;background:rgba(18, 16, 16, 0.265);margin:16px 0">
          <div id="reviewsList" class="scroll-area" style="margin-top:8px;display:flex;flex-direction:column;gap:10px;"></div>
        </div>

        <aside class="right" style="flex:1;min-width:260px;max-width:400px;">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div class="note" style="font-weight:600">Berita & Sorotan</div>
            <div class="note">Live Feed</div>
          </div>
          <div id="adsArea" class="scroll-area" style="margin-top:12px;display:flex;flex-direction:column;gap:8px"></div>
          <div style="margin-top:12px;font-size:0.85rem;color:var(--muted);">
           Ayo baca berita hari ini agar selalu update tentang isu-isu terkini!</div>
        </aside>
      </div>
    </section>

    <!-- Blog / Projects -->
    <section class="card" id="projectsBlock" aria-labelledby="projectsTitle">
      <div class="section-title">
        <h3 id="projectsTitle">Blog & Proyek</h3>
        <div class="note" id="projectsNote">Konten terbaru dipublikasikan secara berkala. Masuk untuk melihat opsi tambahan.</div>
      </div>
      <div id="postList" class="post-list" aria-live="polite"></div>
    </section>

    <!-- Messages (Komentar) -->
    <section class="card" aria-labelledby="messagesTitle">
      <h3 id="messagesTitle">Kotak Pesan</h3>
      <div class="comment-form" style="margin-top:8px">
        <input id="commentName" placeholder="Nama (opsional)">
        <textarea id="commentText" placeholder="Tulis pesan atau saran..." rows="4"></textarea>
        <div style="display:flex; justify-content:flex-end; gap:8px">
          <button class="btn" id="sendComment">Kirim Pesan</button>
        </div>
      </div>
      <div id="commentList" class="scroll-area" style="margin-top:12px"></div>
    </section>

  <footer class="footer" role="contentinfo" 
        style="display:flex;justify-content:center;align-items:center;padding:15px 0;">
  <div class="note">© 2025 Irfan Rizki Aditri</div>
</footer>

  </div>

  <!-- Modals & Panels (login, editor, post modal) -->
  <div id="loginModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="loginTitle">
    <div class="dialog panel" style="max-width:420px;">
      <h3 id="loginTitle">Masuk Editor</h3>
      <!-- Improved login UI for creator pin and Google auth -->
      <div style="display:flex;flex-direction:column;gap:12px">
        <div style="display:flex;gap:8px">
          <input id="editorUser" placeholder="Username (creator)" style="flex:1" value="">
          <input id="editorPin" type="password" placeholder="PIN (creator)" style="width:140px">
        </div>
        <div style="display:flex;gap:8px">
          <button class="btn ghost" id="closeLogin">Batal</button>
          <button class="btn" id="doLogin">Login Creator</button>
          <button class="btn" id="googleLogin">Masuk dengan Google</button>
        </div>
        <div class="note">Creator dapat mengunci avatar dan melakukan operasi offline. PIN creator hanya untuk demo.</div>
      </div>
    </div>
  </div>

  <div id="editorPanel" class="modal" aria-hidden="true" role="dialog" aria-labelledby="panelTitle">
    <div class="dialog panel">
      <h3 id="panelTitle">Editor Panel</h3>
      <div id="panelBody" style="margin-top:10px"></div>
      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px">
        <button class="btn ghost" id="closePanel">Tutup</button>
      </div>
    </div>
  </div>

  <div id="postModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="postModalTitle">
    <div class="dialog panel post-full">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3 id="postModalTitle">Judul</h3>
        <div style="display:flex;gap:8px">
          <button class="btn ghost" id="sharePostBtn"><i class='bx bx-share'></i> Bagikan</button>
          <button class="btn ghost" id="closePostModal">Tutup</button>
        </div>
      </div>
      <div style="margin-top:8px;color:var(--muted)" id="postMeta">oleh Editor • tanggal</div>
      <div class="post-full-img" style="margin-top:12px; overflow:hidden; border-radius:10px">
        <img id="postModalImg" alt="" style="width:100%;height:100%;object-fit:cover">
      </div>
      <div style="margin-top:12px" id="postModalCaption"></div>
      <div style="display:flex;gap:8px; margin-top:12px; align-items:center">
        <button class="btn ghost" id="likePostBtn">❤ <span id="likeCount">0</span></button>
      </div>
      <div class="inline-comments" id="postCommentsArea"></div>
      <div style="margin-top:12px" class="note">Tambahkan komentar pada postingan (otomatis muncul di sini):</div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <input id="postCommentName" placeholder="Nama (opsional)" style="flex:1">
        <input id="postCommentText" placeholder="Komentar..." style="flex:2">
        <button class="btn" id="postCommentSend">Kirim</button>
      </div>
    </div>
  </div>


  
  <!-- Scripts -->
  <script src="js/idb.js"></script>
  <script src="js/toast.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/menu.js"></script>

  <!-- Supabase initialization (replace placeholders inside the file) -->
  <script src="js/supabase-init.js"></script>

  <!-- App scripts (adapted to Supabase) -->
  <script src="js/auth.js"></script>
  <script src="js/profile.js"></script>
  <script src="js/post.js"></script>
  <script src="js/comments.js"></script>
  <script src="js/reviews.js"></script>
  <script src="js/news.js"></script>
  <script src="js/editor.js"></script>
  <script src="js/visitors.js"></script>
  <script src="js/realtime.js"></script>
</body>
</html>


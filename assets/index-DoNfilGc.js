function bk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Yr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var J_={exports:{}},Bd={},Y_={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ql=Symbol.for("react.element"),Ek=Symbol.for("react.portal"),Tk=Symbol.for("react.fragment"),Ik=Symbol.for("react.strict_mode"),Sk=Symbol.for("react.profiler"),kk=Symbol.for("react.provider"),Ck=Symbol.for("react.context"),Ak=Symbol.for("react.forward_ref"),Nk=Symbol.for("react.suspense"),Rk=Symbol.for("react.memo"),Pk=Symbol.for("react.lazy"),hy=Symbol.iterator;function Mk(t){return t===null||typeof t!="object"?null:(t=hy&&t[hy]||t["@@iterator"],typeof t=="function"?t:null)}var Q_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X_=Object.assign,Z_={};function ta(t,e,n){this.props=t,this.context=e,this.refs=Z_,this.updater=n||Q_}ta.prototype.isReactComponent={};ta.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ta.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eb(){}eb.prototype=ta.prototype;function km(t,e,n){this.props=t,this.context=e,this.refs=Z_,this.updater=n||Q_}var Cm=km.prototype=new eb;Cm.constructor=km;X_(Cm,ta.prototype);Cm.isPureReactComponent=!0;var fy=Array.isArray,tb=Object.prototype.hasOwnProperty,Am={current:null},nb={key:!0,ref:!0,__self:!0,__source:!0};function rb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)tb.call(e,r)&&!nb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ql,type:t,key:i,ref:o,props:s,_owner:Am.current}}function Dk(t,e){return{$$typeof:ql,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nm(t){return typeof t=="object"&&t!==null&&t.$$typeof===ql}function Lk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var py=/\/+/g;function Kh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Lk(""+t.key):e.toString(36)}function _c(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ql:case Ek:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Kh(o,0):r,fy(s)?(n="",t!=null&&(n=t.replace(py,"$&/")+"/"),_c(s,e,n,"",function(c){return c})):s!=null&&(Nm(s)&&(s=Dk(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(py,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",fy(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Kh(i,a);o+=_c(i,e,n,l,s)}else if(l=Mk(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Kh(i,a++),o+=_c(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qu(t,e,n){if(t==null)return t;var r=[],s=0;return _c(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Sn={current:null},bc={transition:null},Fk={ReactCurrentDispatcher:Sn,ReactCurrentBatchConfig:bc,ReactCurrentOwner:Am};function sb(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:qu,forEach:function(t,e,n){qu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qu(t,function(){e++}),e},toArray:function(t){return qu(t,function(e){return e})||[]},only:function(t){if(!Nm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=ta;$e.Fragment=Tk;$e.Profiler=Sk;$e.PureComponent=km;$e.StrictMode=Ik;$e.Suspense=Nk;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fk;$e.act=sb;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=X_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Am.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tb.call(e,l)&&!nb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ql,type:t.type,key:s,ref:i,props:r,_owner:o}};$e.createContext=function(t){return t={$$typeof:Ck,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kk,_context:t},t.Consumer=t};$e.createElement=rb;$e.createFactory=function(t){var e=rb.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:Ak,render:t}};$e.isValidElement=Nm;$e.lazy=function(t){return{$$typeof:Pk,_payload:{_status:-1,_result:t},_init:jk}};$e.memo=function(t,e){return{$$typeof:Rk,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=bc.transition;bc.transition={};try{t()}finally{bc.transition=e}};$e.unstable_act=sb;$e.useCallback=function(t,e){return Sn.current.useCallback(t,e)};$e.useContext=function(t){return Sn.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return Sn.current.useDeferredValue(t)};$e.useEffect=function(t,e){return Sn.current.useEffect(t,e)};$e.useId=function(){return Sn.current.useId()};$e.useImperativeHandle=function(t,e,n){return Sn.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return Sn.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return Sn.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return Sn.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return Sn.current.useReducer(t,e,n)};$e.useRef=function(t){return Sn.current.useRef(t)};$e.useState=function(t){return Sn.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return Sn.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return Sn.current.useTransition()};$e.version="18.3.1";Y_.exports=$e;var F=Y_.exports;const hl=Sm(F),Vk=bk({__proto__:null,default:hl},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uk=F,Ok=Symbol.for("react.element"),Bk=Symbol.for("react.fragment"),zk=Object.prototype.hasOwnProperty,Gk=Uk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hk={key:!0,ref:!0,__self:!0,__source:!0};function ib(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zk.call(e,r)&&!Hk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Ok,type:t,key:i,ref:o,props:s,_owner:Gk.current}}Bd.Fragment=Bk;Bd.jsx=ib;Bd.jsxs=ib;J_.exports=Bd;var u=J_.exports,Gf={},ob={exports:{}},Wn={},ab={exports:{}},lb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ne,Q){var ae=ne.length;ne.push(Q);e:for(;0<ae;){var K=ae-1>>>1,H=ne[K];if(0<s(H,Q))ne[K]=Q,ne[ae]=H,ae=K;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var Q=ne[0],ae=ne.pop();if(ae!==Q){ne[0]=ae;e:for(var K=0,H=ne.length,he=H>>>1;K<he;){var ee=2*(K+1)-1,X=ne[ee],Ie=ee+1,Be=ne[Ie];if(0>s(X,ae))Ie<H&&0>s(Be,X)?(ne[K]=Be,ne[Ie]=ae,K=Ie):(ne[K]=X,ne[ee]=ae,K=ee);else if(Ie<H&&0>s(Be,ae))ne[K]=Be,ne[Ie]=ae,K=Ie;else break e}}return Q}function s(ne,Q){var ae=ne.sortIndex-Q.sortIndex;return ae!==0?ae:ne.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,m=null,g=3,y=!1,w=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(ne){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=ne)r(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(c)}}function N(ne){if(x=!1,T(ne),!w)if(n(l)!==null)w=!0,ce(L);else{var Q=n(c);Q!==null&&te(N,Q.startTime-ne)}}function L(ne,Q){w=!1,x&&(x=!1,v(R),R=-1),y=!0;var ae=g;try{for(T(Q),m=n(l);m!==null&&(!(m.expirationTime>Q)||ne&&!V());){var K=m.callback;if(typeof K=="function"){m.callback=null,g=m.priorityLevel;var H=K(m.expirationTime<=Q);Q=t.unstable_now(),typeof H=="function"?m.callback=H:m===n(l)&&r(l),T(Q)}else r(l);m=n(l)}if(m!==null)var he=!0;else{var ee=n(c);ee!==null&&te(N,ee.startTime-Q),he=!1}return he}finally{m=null,g=ae,y=!1}}var U=!1,k=null,R=-1,A=5,M=-1;function V(){return!(t.unstable_now()-M<A)}function P(){if(k!==null){var ne=t.unstable_now();M=ne;var Q=!0;try{Q=k(!0,ne)}finally{Q?D():(U=!1,k=null)}}else U=!1}var D;if(typeof E=="function")D=function(){E(P)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,$=I.port2;I.port1.onmessage=P,D=function(){$.postMessage(null)}}else D=function(){_(P,0)};function ce(ne){k=ne,U||(U=!0,D())}function te(ne,Q){R=_(function(){ne(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,ce(L))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(ne){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var ae=g;g=Q;try{return ne()}finally{g=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,Q){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ae=g;g=ne;try{return Q()}finally{g=ae}},t.unstable_scheduleCallback=function(ne,Q,ae){var K=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?K+ae:K):ae=K,ne){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ae+H,ne={id:d++,callback:Q,priorityLevel:ne,startTime:ae,expirationTime:H,sortIndex:-1},ae>K?(ne.sortIndex=ae,e(c,ne),n(l)===null&&ne===n(c)&&(x?(v(R),R=-1):x=!0,te(N,ae-K))):(ne.sortIndex=H,e(l,ne),w||y||(w=!0,ce(L))),ne},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(ne){var Q=g;return function(){var ae=g;g=Q;try{return ne.apply(this,arguments)}finally{g=ae}}}})(lb);ab.exports=lb;var $k=ab.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qk=F,$n=$k;function pe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ub=new Set,fl={};function Bi(t,e){Fo(t,e),Fo(t+"Capture",e)}function Fo(t,e){for(fl[t]=e,t=0;t<e.length;t++)ub.add(e[t])}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hf=Object.prototype.hasOwnProperty,Wk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,my={},gy={};function Kk(t){return Hf.call(gy,t)?!0:Hf.call(my,t)?!1:Wk.test(t)?gy[t]=!0:(my[t]=!0,!1)}function Jk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Yk(t,e,n,r){if(e===null||typeof e>"u"||Jk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zt[t]=new kn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zt[e]=new kn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zt[t]=new kn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zt[t]=new kn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zt[t]=new kn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zt[t]=new kn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zt[t]=new kn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zt[t]=new kn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zt[t]=new kn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rm=/[\-:]([a-z])/g;function Pm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rm,Pm);Zt[e]=new kn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rm,Pm);Zt[e]=new kn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rm,Pm);Zt[e]=new kn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zt[t]=new kn(t,1,!1,t.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zt[t]=new kn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mm(t,e,n,r){var s=Zt.hasOwnProperty(e)?Zt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Yk(e,n,s,r)&&(n=null),r||s===null?Kk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gs=qk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wu=Symbol.for("react.element"),lo=Symbol.for("react.portal"),uo=Symbol.for("react.fragment"),Dm=Symbol.for("react.strict_mode"),$f=Symbol.for("react.profiler"),cb=Symbol.for("react.provider"),db=Symbol.for("react.context"),Lm=Symbol.for("react.forward_ref"),qf=Symbol.for("react.suspense"),Wf=Symbol.for("react.suspense_list"),jm=Symbol.for("react.memo"),Ss=Symbol.for("react.lazy"),hb=Symbol.for("react.offscreen"),yy=Symbol.iterator;function Na(t){return t===null||typeof t!="object"?null:(t=yy&&t[yy]||t["@@iterator"],typeof t=="function"?t:null)}var xt=Object.assign,Jh;function Ba(t){if(Jh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jh=e&&e[1]||""}return`
`+Jh+t}var Yh=!1;function Qh(t,e){if(!t||Yh)return"";Yh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Yh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ba(t):""}function Qk(t){switch(t.tag){case 5:return Ba(t.type);case 16:return Ba("Lazy");case 13:return Ba("Suspense");case 19:return Ba("SuspenseList");case 0:case 2:case 15:return t=Qh(t.type,!1),t;case 11:return t=Qh(t.type.render,!1),t;case 1:return t=Qh(t.type,!0),t;default:return""}}function Kf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case uo:return"Fragment";case lo:return"Portal";case $f:return"Profiler";case Dm:return"StrictMode";case qf:return"Suspense";case Wf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case db:return(t.displayName||"Context")+".Consumer";case cb:return(t._context.displayName||"Context")+".Provider";case Lm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jm:return e=t.displayName||null,e!==null?e:Kf(t.type)||"Memo";case Ss:e=t._payload,t=t._init;try{return Kf(t(e))}catch{}}return null}function Xk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kf(e);case 8:return e===Dm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ys(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Zk(t){var e=fb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ku(t){t._valueTracker||(t._valueTracker=Zk(t))}function pb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Hc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jf(t,e){var n=e.checked;return xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ys(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mb(t,e){e=e.checked,e!=null&&Mm(t,"checked",e,!1)}function Yf(t,e){mb(t,e);var n=Ys(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Qf(t,e.type,Ys(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Qf(t,e,n){(e!=="number"||Hc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var za=Array.isArray;function To(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ys(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Xf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(pe(91));return xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(pe(92));if(za(n)){if(1<n.length)throw Error(pe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ys(n)}}function gb(t,e){var n=Ys(e.value),r=Ys(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _y(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ju,vb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ju=Ju||document.createElement("div"),Ju.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ju.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eC=["Webkit","ms","Moz","O"];Object.keys(Ya).forEach(function(t){eC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ya[e]=Ya[t]})});function xb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ya.hasOwnProperty(t)&&Ya[t]?(""+e).trim():e+"px"}function wb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=xb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var tC=xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ep(t,e){if(e){if(tC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(pe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(pe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(pe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(pe(62))}}function tp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var np=null;function Fm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rp=null,Io=null,So=null;function by(t){if(t=Jl(t)){if(typeof rp!="function")throw Error(pe(280));var e=t.stateNode;e&&(e=qd(e),rp(t.stateNode,t.type,e))}}function _b(t){Io?So?So.push(t):So=[t]:Io=t}function bb(){if(Io){var t=Io,e=So;if(So=Io=null,by(t),e)for(t=0;t<e.length;t++)by(e[t])}}function Eb(t,e){return t(e)}function Tb(){}var Xh=!1;function Ib(t,e,n){if(Xh)return t(e,n);Xh=!0;try{return Eb(t,e,n)}finally{Xh=!1,(Io!==null||So!==null)&&(Tb(),bb())}}function ml(t,e){var n=t.stateNode;if(n===null)return null;var r=qd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(pe(231,e,typeof n));return n}var sp=!1;if(is)try{var Ra={};Object.defineProperty(Ra,"passive",{get:function(){sp=!0}}),window.addEventListener("test",Ra,Ra),window.removeEventListener("test",Ra,Ra)}catch{sp=!1}function nC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Qa=!1,$c=null,qc=!1,ip=null,rC={onError:function(t){Qa=!0,$c=t}};function sC(t,e,n,r,s,i,o,a,l){Qa=!1,$c=null,nC.apply(rC,arguments)}function iC(t,e,n,r,s,i,o,a,l){if(sC.apply(this,arguments),Qa){if(Qa){var c=$c;Qa=!1,$c=null}else throw Error(pe(198));qc||(qc=!0,ip=c)}}function zi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ey(t){if(zi(t)!==t)throw Error(pe(188))}function oC(t){var e=t.alternate;if(!e){if(e=zi(t),e===null)throw Error(pe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ey(s),t;if(i===r)return Ey(s),e;i=i.sibling}throw Error(pe(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(pe(189))}}if(n.alternate!==r)throw Error(pe(190))}if(n.tag!==3)throw Error(pe(188));return n.stateNode.current===n?t:e}function kb(t){return t=oC(t),t!==null?Cb(t):null}function Cb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cb(t);if(e!==null)return e;t=t.sibling}return null}var Ab=$n.unstable_scheduleCallback,Ty=$n.unstable_cancelCallback,aC=$n.unstable_shouldYield,lC=$n.unstable_requestPaint,kt=$n.unstable_now,uC=$n.unstable_getCurrentPriorityLevel,Vm=$n.unstable_ImmediatePriority,Nb=$n.unstable_UserBlockingPriority,Wc=$n.unstable_NormalPriority,cC=$n.unstable_LowPriority,Rb=$n.unstable_IdlePriority,zd=null,Mr=null;function dC(t){if(Mr&&typeof Mr.onCommitFiberRoot=="function")try{Mr.onCommitFiberRoot(zd,t,void 0,(t.current.flags&128)===128)}catch{}}var gr=Math.clz32?Math.clz32:pC,hC=Math.log,fC=Math.LN2;function pC(t){return t>>>=0,t===0?32:31-(hC(t)/fC|0)|0}var Yu=64,Qu=4194304;function Ga(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ga(a):(i&=o,i!==0&&(r=Ga(i)))}else o=n&~s,o!==0?r=Ga(o):i!==0&&(r=Ga(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gr(e),s=1<<n,r|=t[n],e&=~s;return r}function mC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-gr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=mC(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function op(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pb(){var t=Yu;return Yu<<=1,!(Yu&4194240)&&(Yu=64),t}function Zh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gr(e),t[e]=n}function yC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Um(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var nt=0;function Mb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Db,Om,Lb,jb,Fb,ap=!1,Xu=[],Vs=null,Us=null,Os=null,gl=new Map,yl=new Map,Cs=[],vC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Iy(t,e){switch(t){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":gl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yl.delete(e.pointerId)}}function Pa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Jl(e),e!==null&&Om(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function xC(t,e,n,r,s){switch(e){case"focusin":return Vs=Pa(Vs,t,e,n,r,s),!0;case"dragenter":return Us=Pa(Us,t,e,n,r,s),!0;case"mouseover":return Os=Pa(Os,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return gl.set(i,Pa(gl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,yl.set(i,Pa(yl.get(i)||null,t,e,n,r,s)),!0}return!1}function Vb(t){var e=vi(t.target);if(e!==null){var n=zi(e);if(n!==null){if(e=n.tag,e===13){if(e=Sb(n),e!==null){t.blockedOn=e,Fb(t.priority,function(){Lb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ec(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);np=r,n.target.dispatchEvent(r),np=null}else return e=Jl(n),e!==null&&Om(e),t.blockedOn=n,!1;e.shift()}return!0}function Sy(t,e,n){Ec(t)&&n.delete(e)}function wC(){ap=!1,Vs!==null&&Ec(Vs)&&(Vs=null),Us!==null&&Ec(Us)&&(Us=null),Os!==null&&Ec(Os)&&(Os=null),gl.forEach(Sy),yl.forEach(Sy)}function Ma(t,e){t.blockedOn===e&&(t.blockedOn=null,ap||(ap=!0,$n.unstable_scheduleCallback($n.unstable_NormalPriority,wC)))}function vl(t){function e(s){return Ma(s,t)}if(0<Xu.length){Ma(Xu[0],t);for(var n=1;n<Xu.length;n++){var r=Xu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vs!==null&&Ma(Vs,t),Us!==null&&Ma(Us,t),Os!==null&&Ma(Os,t),gl.forEach(e),yl.forEach(e),n=0;n<Cs.length;n++)r=Cs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cs.length&&(n=Cs[0],n.blockedOn===null);)Vb(n),n.blockedOn===null&&Cs.shift()}var ko=gs.ReactCurrentBatchConfig,Jc=!0;function _C(t,e,n,r){var s=nt,i=ko.transition;ko.transition=null;try{nt=1,Bm(t,e,n,r)}finally{nt=s,ko.transition=i}}function bC(t,e,n,r){var s=nt,i=ko.transition;ko.transition=null;try{nt=4,Bm(t,e,n,r)}finally{nt=s,ko.transition=i}}function Bm(t,e,n,r){if(Jc){var s=lp(t,e,n,r);if(s===null)cf(t,e,r,Yc,n),Iy(t,r);else if(xC(s,t,e,n,r))r.stopPropagation();else if(Iy(t,r),e&4&&-1<vC.indexOf(t)){for(;s!==null;){var i=Jl(s);if(i!==null&&Db(i),i=lp(t,e,n,r),i===null&&cf(t,e,r,Yc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else cf(t,e,r,null,n)}}var Yc=null;function lp(t,e,n,r){if(Yc=null,t=Fm(r),t=vi(t),t!==null)if(e=zi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yc=t,null}function Ub(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uC()){case Vm:return 1;case Nb:return 4;case Wc:case cC:return 16;case Rb:return 536870912;default:return 16}default:return 16}}var Ds=null,zm=null,Tc=null;function Ob(){if(Tc)return Tc;var t,e=zm,n=e.length,r,s="value"in Ds?Ds.value:Ds.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Tc=s.slice(t,1<r?1-r:void 0)}function Ic(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zu(){return!0}function ky(){return!1}function Kn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zu:ky,this.isPropagationStopped=ky,this}return xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zu)},persist:function(){},isPersistent:Zu}),e}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gm=Kn(na),Kl=xt({},na,{view:0,detail:0}),EC=Kn(Kl),ef,tf,Da,Gd=xt({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Da&&(Da&&t.type==="mousemove"?(ef=t.screenX-Da.screenX,tf=t.screenY-Da.screenY):tf=ef=0,Da=t),ef)},movementY:function(t){return"movementY"in t?t.movementY:tf}}),Cy=Kn(Gd),TC=xt({},Gd,{dataTransfer:0}),IC=Kn(TC),SC=xt({},Kl,{relatedTarget:0}),nf=Kn(SC),kC=xt({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),CC=Kn(kC),AC=xt({},na,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NC=Kn(AC),RC=xt({},na,{data:0}),Ay=Kn(RC),PC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DC[t])?!!e[t]:!1}function Hm(){return LC}var jC=xt({},Kl,{key:function(t){if(t.key){var e=PC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ic(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?MC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hm,charCode:function(t){return t.type==="keypress"?Ic(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ic(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FC=Kn(jC),VC=xt({},Gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ny=Kn(VC),UC=xt({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hm}),OC=Kn(UC),BC=xt({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),zC=Kn(BC),GC=xt({},Gd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),HC=Kn(GC),$C=[9,13,27,32],$m=is&&"CompositionEvent"in window,Xa=null;is&&"documentMode"in document&&(Xa=document.documentMode);var qC=is&&"TextEvent"in window&&!Xa,Bb=is&&(!$m||Xa&&8<Xa&&11>=Xa),Ry=" ",Py=!1;function zb(t,e){switch(t){case"keyup":return $C.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var co=!1;function WC(t,e){switch(t){case"compositionend":return Gb(e);case"keypress":return e.which!==32?null:(Py=!0,Ry);case"textInput":return t=e.data,t===Ry&&Py?null:t;default:return null}}function KC(t,e){if(co)return t==="compositionend"||!$m&&zb(t,e)?(t=Ob(),Tc=zm=Ds=null,co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bb&&e.locale!=="ko"?null:e.data;default:return null}}var JC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function My(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JC[t.type]:e==="textarea"}function Hb(t,e,n,r){_b(r),e=Qc(e,"onChange"),0<e.length&&(n=new Gm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Za=null,xl=null;function YC(t){tE(t,0)}function Hd(t){var e=po(t);if(pb(e))return t}function QC(t,e){if(t==="change")return e}var $b=!1;if(is){var rf;if(is){var sf="oninput"in document;if(!sf){var Dy=document.createElement("div");Dy.setAttribute("oninput","return;"),sf=typeof Dy.oninput=="function"}rf=sf}else rf=!1;$b=rf&&(!document.documentMode||9<document.documentMode)}function Ly(){Za&&(Za.detachEvent("onpropertychange",qb),xl=Za=null)}function qb(t){if(t.propertyName==="value"&&Hd(xl)){var e=[];Hb(e,xl,t,Fm(t)),Ib(YC,e)}}function XC(t,e,n){t==="focusin"?(Ly(),Za=e,xl=n,Za.attachEvent("onpropertychange",qb)):t==="focusout"&&Ly()}function ZC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hd(xl)}function eA(t,e){if(t==="click")return Hd(e)}function tA(t,e){if(t==="input"||t==="change")return Hd(e)}function nA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var br=typeof Object.is=="function"?Object.is:nA;function wl(t,e){if(br(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hf.call(e,s)||!br(t[s],e[s]))return!1}return!0}function jy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fy(t,e){var n=jy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jy(n)}}function Wb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Kb(){for(var t=window,e=Hc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hc(t.document)}return e}function qm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rA(t){var e=Kb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Wb(n.ownerDocument.documentElement,n)){if(r!==null&&qm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Fy(n,i);var o=Fy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sA=is&&"documentMode"in document&&11>=document.documentMode,ho=null,up=null,el=null,cp=!1;function Vy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cp||ho==null||ho!==Hc(r)||(r=ho,"selectionStart"in r&&qm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),el&&wl(el,r)||(el=r,r=Qc(up,"onSelect"),0<r.length&&(e=new Gm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ho)))}function ec(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fo={animationend:ec("Animation","AnimationEnd"),animationiteration:ec("Animation","AnimationIteration"),animationstart:ec("Animation","AnimationStart"),transitionend:ec("Transition","TransitionEnd")},of={},Jb={};is&&(Jb=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function $d(t){if(of[t])return of[t];if(!fo[t])return t;var e=fo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Jb)return of[t]=e[n];return t}var Yb=$d("animationend"),Qb=$d("animationiteration"),Xb=$d("animationstart"),Zb=$d("transitionend"),eE=new Map,Uy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(t,e){eE.set(t,e),Bi(e,[t])}for(var af=0;af<Uy.length;af++){var lf=Uy[af],iA=lf.toLowerCase(),oA=lf[0].toUpperCase()+lf.slice(1);ti(iA,"on"+oA)}ti(Yb,"onAnimationEnd");ti(Qb,"onAnimationIteration");ti(Xb,"onAnimationStart");ti("dblclick","onDoubleClick");ti("focusin","onFocus");ti("focusout","onBlur");ti(Zb,"onTransitionEnd");Fo("onMouseEnter",["mouseout","mouseover"]);Fo("onMouseLeave",["mouseout","mouseover"]);Fo("onPointerEnter",["pointerout","pointerover"]);Fo("onPointerLeave",["pointerout","pointerover"]);Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ha));function Oy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,iC(r,e,void 0,t),t.currentTarget=null}function tE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Oy(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Oy(s,a,c),i=l}}}if(qc)throw t=ip,qc=!1,ip=null,t}function ht(t,e){var n=e[mp];n===void 0&&(n=e[mp]=new Set);var r=t+"__bubble";n.has(r)||(nE(e,t,2,!1),n.add(r))}function uf(t,e,n){var r=0;e&&(r|=4),nE(n,t,r,e)}var tc="_reactListening"+Math.random().toString(36).slice(2);function _l(t){if(!t[tc]){t[tc]=!0,ub.forEach(function(n){n!=="selectionchange"&&(aA.has(n)||uf(n,!1,t),uf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tc]||(e[tc]=!0,uf("selectionchange",!1,e))}}function nE(t,e,n,r){switch(Ub(e)){case 1:var s=_C;break;case 4:s=bC;break;default:s=Bm}n=s.bind(null,e,n,t),s=void 0,!sp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function cf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=vi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Ib(function(){var c=i,d=Fm(n),m=[];e:{var g=eE.get(t);if(g!==void 0){var y=Gm,w=t;switch(t){case"keypress":if(Ic(n)===0)break e;case"keydown":case"keyup":y=FC;break;case"focusin":w="focus",y=nf;break;case"focusout":w="blur",y=nf;break;case"beforeblur":case"afterblur":y=nf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Cy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=IC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=OC;break;case Yb:case Qb:case Xb:y=CC;break;case Zb:y=zC;break;case"scroll":y=EC;break;case"wheel":y=HC;break;case"copy":case"cut":case"paste":y=NC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Ny}var x=(e&4)!==0,_=!x&&t==="scroll",v=x?g!==null?g+"Capture":null:g;x=[];for(var E=c,T;E!==null;){T=E;var N=T.stateNode;if(T.tag===5&&N!==null&&(T=N,v!==null&&(N=ml(E,v),N!=null&&x.push(bl(E,N,T)))),_)break;E=E.return}0<x.length&&(g=new y(g,w,null,n,d),m.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==np&&(w=n.relatedTarget||n.fromElement)&&(vi(w)||w[os]))break e;if((y||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=c,w=w?vi(w):null,w!==null&&(_=zi(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(x=Cy,N="onMouseLeave",v="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(x=Ny,N="onPointerLeave",v="onPointerEnter",E="pointer"),_=y==null?g:po(y),T=w==null?g:po(w),g=new x(N,E+"leave",y,n,d),g.target=_,g.relatedTarget=T,N=null,vi(d)===c&&(x=new x(v,E+"enter",w,n,d),x.target=T,x.relatedTarget=_,N=x),_=N,y&&w)t:{for(x=y,v=w,E=0,T=x;T;T=so(T))E++;for(T=0,N=v;N;N=so(N))T++;for(;0<E-T;)x=so(x),E--;for(;0<T-E;)v=so(v),T--;for(;E--;){if(x===v||v!==null&&x===v.alternate)break t;x=so(x),v=so(v)}x=null}else x=null;y!==null&&By(m,g,y,x,!1),w!==null&&_!==null&&By(m,_,w,x,!0)}}e:{if(g=c?po(c):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var L=QC;else if(My(g))if($b)L=tA;else{L=ZC;var U=XC}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=eA);if(L&&(L=L(t,c))){Hb(m,L,n,d);break e}U&&U(t,g,c),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&Qf(g,"number",g.value)}switch(U=c?po(c):window,t){case"focusin":(My(U)||U.contentEditable==="true")&&(ho=U,up=c,el=null);break;case"focusout":el=up=ho=null;break;case"mousedown":cp=!0;break;case"contextmenu":case"mouseup":case"dragend":cp=!1,Vy(m,n,d);break;case"selectionchange":if(sA)break;case"keydown":case"keyup":Vy(m,n,d)}var k;if($m)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else co?zb(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Bb&&n.locale!=="ko"&&(co||R!=="onCompositionStart"?R==="onCompositionEnd"&&co&&(k=Ob()):(Ds=d,zm="value"in Ds?Ds.value:Ds.textContent,co=!0)),U=Qc(c,R),0<U.length&&(R=new Ay(R,t,null,n,d),m.push({event:R,listeners:U}),k?R.data=k:(k=Gb(n),k!==null&&(R.data=k)))),(k=qC?WC(t,n):KC(t,n))&&(c=Qc(c,"onBeforeInput"),0<c.length&&(d=new Ay("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:c}),d.data=k))}tE(m,e)})}function bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ml(t,n),i!=null&&r.unshift(bl(t,i,s)),i=ml(t,e),i!=null&&r.push(bl(t,i,s))),t=t.return}return r}function so(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function By(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=ml(n,i),l!=null&&o.unshift(bl(n,l,a))):s||(l=ml(n,i),l!=null&&o.push(bl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var lA=/\r\n?/g,uA=/\u0000|\uFFFD/g;function zy(t){return(typeof t=="string"?t:""+t).replace(lA,`
`).replace(uA,"")}function nc(t,e,n){if(e=zy(e),zy(t)!==e&&n)throw Error(pe(425))}function Xc(){}var dp=null,hp=null;function fp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pp=typeof setTimeout=="function"?setTimeout:void 0,cA=typeof clearTimeout=="function"?clearTimeout:void 0,Gy=typeof Promise=="function"?Promise:void 0,dA=typeof queueMicrotask=="function"?queueMicrotask:typeof Gy<"u"?function(t){return Gy.resolve(null).then(t).catch(hA)}:pp;function hA(t){setTimeout(function(){throw t})}function df(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),vl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);vl(e)}function Bs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Hy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ra=Math.random().toString(36).slice(2),Pr="__reactFiber$"+ra,El="__reactProps$"+ra,os="__reactContainer$"+ra,mp="__reactEvents$"+ra,fA="__reactListeners$"+ra,pA="__reactHandles$"+ra;function vi(t){var e=t[Pr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[os]||n[Pr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Hy(t);t!==null;){if(n=t[Pr])return n;t=Hy(t)}return e}t=n,n=t.parentNode}return null}function Jl(t){return t=t[Pr]||t[os],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function po(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(pe(33))}function qd(t){return t[El]||null}var gp=[],mo=-1;function ni(t){return{current:t}}function pt(t){0>mo||(t.current=gp[mo],gp[mo]=null,mo--)}function ut(t,e){mo++,gp[mo]=t.current,t.current=e}var Qs={},mn=ni(Qs),Mn=ni(!1),Ci=Qs;function Vo(t,e){var n=t.type.contextTypes;if(!n)return Qs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dn(t){return t=t.childContextTypes,t!=null}function Zc(){pt(Mn),pt(mn)}function $y(t,e,n){if(mn.current!==Qs)throw Error(pe(168));ut(mn,e),ut(Mn,n)}function rE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(pe(108,Xk(t)||"Unknown",s));return xt({},n,r)}function ed(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qs,Ci=mn.current,ut(mn,t),ut(Mn,Mn.current),!0}function qy(t,e,n){var r=t.stateNode;if(!r)throw Error(pe(169));n?(t=rE(t,e,Ci),r.__reactInternalMemoizedMergedChildContext=t,pt(Mn),pt(mn),ut(mn,t)):pt(Mn),ut(Mn,n)}var Kr=null,Wd=!1,hf=!1;function sE(t){Kr===null?Kr=[t]:Kr.push(t)}function mA(t){Wd=!0,sE(t)}function ri(){if(!hf&&Kr!==null){hf=!0;var t=0,e=nt;try{var n=Kr;for(nt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kr=null,Wd=!1}catch(s){throw Kr!==null&&(Kr=Kr.slice(t+1)),Ab(Vm,ri),s}finally{nt=e,hf=!1}}return null}var go=[],yo=0,td=null,nd=0,Yn=[],Qn=0,Ai=null,Xr=1,Zr="";function pi(t,e){go[yo++]=nd,go[yo++]=td,td=t,nd=e}function iE(t,e,n){Yn[Qn++]=Xr,Yn[Qn++]=Zr,Yn[Qn++]=Ai,Ai=t;var r=Xr;t=Zr;var s=32-gr(r)-1;r&=~(1<<s),n+=1;var i=32-gr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Xr=1<<32-gr(e)+s|n<<s|r,Zr=i+t}else Xr=1<<i|n<<s|r,Zr=t}function Wm(t){t.return!==null&&(pi(t,1),iE(t,1,0))}function Km(t){for(;t===td;)td=go[--yo],go[yo]=null,nd=go[--yo],go[yo]=null;for(;t===Ai;)Ai=Yn[--Qn],Yn[Qn]=null,Zr=Yn[--Qn],Yn[Qn]=null,Xr=Yn[--Qn],Yn[Qn]=null}var Gn=null,Bn=null,mt=!1,mr=null;function oE(t,e){var n=Xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gn=t,Bn=Bs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gn=t,Bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ai!==null?{id:Xr,overflow:Zr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gn=t,Bn=null,!0):!1;default:return!1}}function yp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vp(t){if(mt){var e=Bn;if(e){var n=e;if(!Wy(t,e)){if(yp(t))throw Error(pe(418));e=Bs(n.nextSibling);var r=Gn;e&&Wy(t,e)?oE(r,n):(t.flags=t.flags&-4097|2,mt=!1,Gn=t)}}else{if(yp(t))throw Error(pe(418));t.flags=t.flags&-4097|2,mt=!1,Gn=t}}}function Ky(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gn=t}function rc(t){if(t!==Gn)return!1;if(!mt)return Ky(t),mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fp(t.type,t.memoizedProps)),e&&(e=Bn)){if(yp(t))throw aE(),Error(pe(418));for(;e;)oE(t,e),e=Bs(e.nextSibling)}if(Ky(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Bn=Bs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Bn=null}}else Bn=Gn?Bs(t.stateNode.nextSibling):null;return!0}function aE(){for(var t=Bn;t;)t=Bs(t.nextSibling)}function Uo(){Bn=Gn=null,mt=!1}function Jm(t){mr===null?mr=[t]:mr.push(t)}var gA=gs.ReactCurrentBatchConfig;function La(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(pe(309));var r=n.stateNode}if(!r)throw Error(pe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(pe(284));if(!n._owner)throw Error(pe(290,t))}return t}function sc(t,e){throw t=Object.prototype.toString.call(e),Error(pe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jy(t){var e=t._init;return e(t._payload)}function lE(t){function e(v,E){if(t){var T=v.deletions;T===null?(v.deletions=[E],v.flags|=16):T.push(E)}}function n(v,E){if(!t)return null;for(;E!==null;)e(v,E),E=E.sibling;return null}function r(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function s(v,E){return v=$s(v,E),v.index=0,v.sibling=null,v}function i(v,E,T){return v.index=T,t?(T=v.alternate,T!==null?(T=T.index,T<E?(v.flags|=2,E):T):(v.flags|=2,E)):(v.flags|=1048576,E)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,E,T,N){return E===null||E.tag!==6?(E=xf(T,v.mode,N),E.return=v,E):(E=s(E,T),E.return=v,E)}function l(v,E,T,N){var L=T.type;return L===uo?d(v,E,T.props.children,N,T.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ss&&Jy(L)===E.type)?(N=s(E,T.props),N.ref=La(v,E,T),N.return=v,N):(N=Pc(T.type,T.key,T.props,null,v.mode,N),N.ref=La(v,E,T),N.return=v,N)}function c(v,E,T,N){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=wf(T,v.mode,N),E.return=v,E):(E=s(E,T.children||[]),E.return=v,E)}function d(v,E,T,N,L){return E===null||E.tag!==7?(E=Ii(T,v.mode,N,L),E.return=v,E):(E=s(E,T),E.return=v,E)}function m(v,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=xf(""+E,v.mode,T),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wu:return T=Pc(E.type,E.key,E.props,null,v.mode,T),T.ref=La(v,null,E),T.return=v,T;case lo:return E=wf(E,v.mode,T),E.return=v,E;case Ss:var N=E._init;return m(v,N(E._payload),T)}if(za(E)||Na(E))return E=Ii(E,v.mode,T,null),E.return=v,E;sc(v,E)}return null}function g(v,E,T,N){var L=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:a(v,E,""+T,N);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Wu:return T.key===L?l(v,E,T,N):null;case lo:return T.key===L?c(v,E,T,N):null;case Ss:return L=T._init,g(v,E,L(T._payload),N)}if(za(T)||Na(T))return L!==null?null:d(v,E,T,N,null);sc(v,T)}return null}function y(v,E,T,N,L){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(T)||null,a(E,v,""+N,L);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Wu:return v=v.get(N.key===null?T:N.key)||null,l(E,v,N,L);case lo:return v=v.get(N.key===null?T:N.key)||null,c(E,v,N,L);case Ss:var U=N._init;return y(v,E,T,U(N._payload),L)}if(za(N)||Na(N))return v=v.get(T)||null,d(E,v,N,L,null);sc(E,N)}return null}function w(v,E,T,N){for(var L=null,U=null,k=E,R=E=0,A=null;k!==null&&R<T.length;R++){k.index>R?(A=k,k=null):A=k.sibling;var M=g(v,k,T[R],N);if(M===null){k===null&&(k=A);break}t&&k&&M.alternate===null&&e(v,k),E=i(M,E,R),U===null?L=M:U.sibling=M,U=M,k=A}if(R===T.length)return n(v,k),mt&&pi(v,R),L;if(k===null){for(;R<T.length;R++)k=m(v,T[R],N),k!==null&&(E=i(k,E,R),U===null?L=k:U.sibling=k,U=k);return mt&&pi(v,R),L}for(k=r(v,k);R<T.length;R++)A=y(k,v,R,T[R],N),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?R:A.key),E=i(A,E,R),U===null?L=A:U.sibling=A,U=A);return t&&k.forEach(function(V){return e(v,V)}),mt&&pi(v,R),L}function x(v,E,T,N){var L=Na(T);if(typeof L!="function")throw Error(pe(150));if(T=L.call(T),T==null)throw Error(pe(151));for(var U=L=null,k=E,R=E=0,A=null,M=T.next();k!==null&&!M.done;R++,M=T.next()){k.index>R?(A=k,k=null):A=k.sibling;var V=g(v,k,M.value,N);if(V===null){k===null&&(k=A);break}t&&k&&V.alternate===null&&e(v,k),E=i(V,E,R),U===null?L=V:U.sibling=V,U=V,k=A}if(M.done)return n(v,k),mt&&pi(v,R),L;if(k===null){for(;!M.done;R++,M=T.next())M=m(v,M.value,N),M!==null&&(E=i(M,E,R),U===null?L=M:U.sibling=M,U=M);return mt&&pi(v,R),L}for(k=r(v,k);!M.done;R++,M=T.next())M=y(k,v,R,M.value,N),M!==null&&(t&&M.alternate!==null&&k.delete(M.key===null?R:M.key),E=i(M,E,R),U===null?L=M:U.sibling=M,U=M);return t&&k.forEach(function(P){return e(v,P)}),mt&&pi(v,R),L}function _(v,E,T,N){if(typeof T=="object"&&T!==null&&T.type===uo&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Wu:e:{for(var L=T.key,U=E;U!==null;){if(U.key===L){if(L=T.type,L===uo){if(U.tag===7){n(v,U.sibling),E=s(U,T.props.children),E.return=v,v=E;break e}}else if(U.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ss&&Jy(L)===U.type){n(v,U.sibling),E=s(U,T.props),E.ref=La(v,U,T),E.return=v,v=E;break e}n(v,U);break}else e(v,U);U=U.sibling}T.type===uo?(E=Ii(T.props.children,v.mode,N,T.key),E.return=v,v=E):(N=Pc(T.type,T.key,T.props,null,v.mode,N),N.ref=La(v,E,T),N.return=v,v=N)}return o(v);case lo:e:{for(U=T.key;E!==null;){if(E.key===U)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(v,E.sibling),E=s(E,T.children||[]),E.return=v,v=E;break e}else{n(v,E);break}else e(v,E);E=E.sibling}E=wf(T,v.mode,N),E.return=v,v=E}return o(v);case Ss:return U=T._init,_(v,E,U(T._payload),N)}if(za(T))return w(v,E,T,N);if(Na(T))return x(v,E,T,N);sc(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(v,E.sibling),E=s(E,T),E.return=v,v=E):(n(v,E),E=xf(T,v.mode,N),E.return=v,v=E),o(v)):n(v,E)}return _}var Oo=lE(!0),uE=lE(!1),rd=ni(null),sd=null,vo=null,Ym=null;function Qm(){Ym=vo=sd=null}function Xm(t){var e=rd.current;pt(rd),t._currentValue=e}function xp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Co(t,e){sd=t,Ym=vo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pn=!0),t.firstContext=null)}function nr(t){var e=t._currentValue;if(Ym!==t)if(t={context:t,memoizedValue:e,next:null},vo===null){if(sd===null)throw Error(pe(308));vo=t,sd.dependencies={lanes:0,firstContext:t}}else vo=vo.next=t;return e}var xi=null;function Zm(t){xi===null?xi=[t]:xi.push(t)}function cE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Zm(e)):(n.next=s.next,s.next=n),e.interleaved=n,as(t,r)}function as(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ks=!1;function eg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ss(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Qe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,as(t,n)}return s=r.interleaved,s===null?(e.next=e,Zm(r)):(e.next=s.next,s.next=e),r.interleaved=e,as(t,n)}function Sc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Um(t,n)}}function Yy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function id(t,e,n,r){var s=t.updateQueue;ks=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var m=s.baseState;o=0,d=c=l=null,a=i;do{var g=a.lane,y=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,x=a;switch(g=e,y=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){m=w.call(y,m,g);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,g=typeof w=="function"?w.call(y,m,g):w,g==null)break e;m=xt({},m,g);break e;case 2:ks=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=m):d=d.next=y,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(l=m),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ri|=o,t.lanes=o,t.memoizedState=m}}function Qy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(pe(191,s));s.call(r)}}}var Yl={},Dr=ni(Yl),Tl=ni(Yl),Il=ni(Yl);function wi(t){if(t===Yl)throw Error(pe(174));return t}function tg(t,e){switch(ut(Il,e),ut(Tl,t),ut(Dr,Yl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zf(e,t)}pt(Dr),ut(Dr,e)}function Bo(){pt(Dr),pt(Tl),pt(Il)}function hE(t){wi(Il.current);var e=wi(Dr.current),n=Zf(e,t.type);e!==n&&(ut(Tl,t),ut(Dr,n))}function ng(t){Tl.current===t&&(pt(Dr),pt(Tl))}var yt=ni(0);function od(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ff=[];function rg(){for(var t=0;t<ff.length;t++)ff[t]._workInProgressVersionPrimary=null;ff.length=0}var kc=gs.ReactCurrentDispatcher,pf=gs.ReactCurrentBatchConfig,Ni=0,vt=null,jt=null,Gt=null,ad=!1,tl=!1,Sl=0,yA=0;function an(){throw Error(pe(321))}function sg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!br(t[n],e[n]))return!1;return!0}function ig(t,e,n,r,s,i){if(Ni=i,vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kc.current=t===null||t.memoizedState===null?_A:bA,t=n(r,s),tl){i=0;do{if(tl=!1,Sl=0,25<=i)throw Error(pe(301));i+=1,Gt=jt=null,e.updateQueue=null,kc.current=EA,t=n(r,s)}while(tl)}if(kc.current=ld,e=jt!==null&&jt.next!==null,Ni=0,Gt=jt=vt=null,ad=!1,e)throw Error(pe(300));return t}function og(){var t=Sl!==0;return Sl=0,t}function Rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?vt.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function rr(){if(jt===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=jt.next;var e=Gt===null?vt.memoizedState:Gt.next;if(e!==null)Gt=e,jt=t;else{if(t===null)throw Error(pe(310));jt=t,t={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Gt===null?vt.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function kl(t,e){return typeof e=="function"?e(t):e}function mf(t){var e=rr(),n=e.queue;if(n===null)throw Error(pe(311));n.lastRenderedReducer=t;var r=jt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Ni&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=m,o=r):l=l.next=m,vt.lanes|=d,Ri|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,br(r,e.memoizedState)||(Pn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,vt.lanes|=i,Ri|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gf(t){var e=rr(),n=e.queue;if(n===null)throw Error(pe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);br(i,e.memoizedState)||(Pn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function fE(){}function pE(t,e){var n=vt,r=rr(),s=e(),i=!br(r.memoizedState,s);if(i&&(r.memoizedState=s,Pn=!0),r=r.queue,ag(yE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Gt!==null&&Gt.memoizedState.tag&1){if(n.flags|=2048,Cl(9,gE.bind(null,n,r,s,e),void 0,null),Ht===null)throw Error(pe(349));Ni&30||mE(n,e,s)}return s}function mE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gE(t,e,n,r){e.value=n,e.getSnapshot=r,vE(e)&&xE(t)}function yE(t,e,n){return n(function(){vE(e)&&xE(t)})}function vE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!br(t,n)}catch{return!0}}function xE(t){var e=as(t,1);e!==null&&yr(e,t,1,-1)}function Xy(t){var e=Rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:t},e.queue=t,t=t.dispatch=wA.bind(null,vt,t),[e.memoizedState,t]}function Cl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wE(){return rr().memoizedState}function Cc(t,e,n,r){var s=Rr();vt.flags|=t,s.memoizedState=Cl(1|e,n,void 0,r===void 0?null:r)}function Kd(t,e,n,r){var s=rr();r=r===void 0?null:r;var i=void 0;if(jt!==null){var o=jt.memoizedState;if(i=o.destroy,r!==null&&sg(r,o.deps)){s.memoizedState=Cl(e,n,i,r);return}}vt.flags|=t,s.memoizedState=Cl(1|e,n,i,r)}function Zy(t,e){return Cc(8390656,8,t,e)}function ag(t,e){return Kd(2048,8,t,e)}function _E(t,e){return Kd(4,2,t,e)}function bE(t,e){return Kd(4,4,t,e)}function EE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function TE(t,e,n){return n=n!=null?n.concat([t]):null,Kd(4,4,EE.bind(null,e,t),n)}function lg(){}function IE(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function SE(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kE(t,e,n){return Ni&21?(br(n,e)||(n=Pb(),vt.lanes|=n,Ri|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pn=!0),t.memoizedState=n)}function vA(t,e){var n=nt;nt=n!==0&&4>n?n:4,t(!0);var r=pf.transition;pf.transition={};try{t(!1),e()}finally{nt=n,pf.transition=r}}function CE(){return rr().memoizedState}function xA(t,e,n){var r=Hs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},AE(t))NE(e,n);else if(n=cE(t,e,n,r),n!==null){var s=bn();yr(n,t,r,s),RE(n,e,r)}}function wA(t,e,n){var r=Hs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(AE(t))NE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,br(a,o)){var l=e.interleaved;l===null?(s.next=s,Zm(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=cE(t,e,s,r),n!==null&&(s=bn(),yr(n,t,r,s),RE(n,e,r))}}function AE(t){var e=t.alternate;return t===vt||e!==null&&e===vt}function NE(t,e){tl=ad=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function RE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Um(t,n)}}var ld={readContext:nr,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},_A={readContext:nr,useCallback:function(t,e){return Rr().memoizedState=[t,e===void 0?null:e],t},useContext:nr,useEffect:Zy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cc(4194308,4,EE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cc(4,2,t,e)},useMemo:function(t,e){var n=Rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xA.bind(null,vt,t),[r.memoizedState,t]},useRef:function(t){var e=Rr();return t={current:t},e.memoizedState=t},useState:Xy,useDebugValue:lg,useDeferredValue:function(t){return Rr().memoizedState=t},useTransition:function(){var t=Xy(!1),e=t[0];return t=vA.bind(null,t[1]),Rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=vt,s=Rr();if(mt){if(n===void 0)throw Error(pe(407));n=n()}else{if(n=e(),Ht===null)throw Error(pe(349));Ni&30||mE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Zy(yE.bind(null,r,i,t),[t]),r.flags|=2048,Cl(9,gE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Rr(),e=Ht.identifierPrefix;if(mt){var n=Zr,r=Xr;n=(r&~(1<<32-gr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bA={readContext:nr,useCallback:IE,useContext:nr,useEffect:ag,useImperativeHandle:TE,useInsertionEffect:_E,useLayoutEffect:bE,useMemo:SE,useReducer:mf,useRef:wE,useState:function(){return mf(kl)},useDebugValue:lg,useDeferredValue:function(t){var e=rr();return kE(e,jt.memoizedState,t)},useTransition:function(){var t=mf(kl)[0],e=rr().memoizedState;return[t,e]},useMutableSource:fE,useSyncExternalStore:pE,useId:CE,unstable_isNewReconciler:!1},EA={readContext:nr,useCallback:IE,useContext:nr,useEffect:ag,useImperativeHandle:TE,useInsertionEffect:_E,useLayoutEffect:bE,useMemo:SE,useReducer:gf,useRef:wE,useState:function(){return gf(kl)},useDebugValue:lg,useDeferredValue:function(t){var e=rr();return jt===null?e.memoizedState=t:kE(e,jt.memoizedState,t)},useTransition:function(){var t=gf(kl)[0],e=rr().memoizedState;return[t,e]},useMutableSource:fE,useSyncExternalStore:pE,useId:CE,unstable_isNewReconciler:!1};function fr(t,e){if(t&&t.defaultProps){e=xt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jd={isMounted:function(t){return(t=t._reactInternals)?zi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bn(),s=Hs(t),i=ss(r,s);i.payload=e,n!=null&&(i.callback=n),e=zs(t,i,s),e!==null&&(yr(e,t,s,r),Sc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bn(),s=Hs(t),i=ss(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=zs(t,i,s),e!==null&&(yr(e,t,s,r),Sc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bn(),r=Hs(t),s=ss(n,r);s.tag=2,e!=null&&(s.callback=e),e=zs(t,s,r),e!==null&&(yr(e,t,r,n),Sc(e,t,r))}};function ev(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!wl(n,r)||!wl(s,i):!0}function PE(t,e,n){var r=!1,s=Qs,i=e.contextType;return typeof i=="object"&&i!==null?i=nr(i):(s=Dn(e)?Ci:mn.current,r=e.contextTypes,i=(r=r!=null)?Vo(t,s):Qs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function tv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jd.enqueueReplaceState(e,e.state,null)}function _p(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},eg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=nr(i):(i=Dn(e)?Ci:mn.current,s.context=Vo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Jd.enqueueReplaceState(s,s.state,null),id(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function zo(t,e){try{var n="",r=e;do n+=Qk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function yf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TA=typeof WeakMap=="function"?WeakMap:Map;function ME(t,e,n){n=ss(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cd||(cd=!0,Pp=r),bp(t,e)},n}function DE(t,e,n){n=ss(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bp(t,e),typeof r!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function nv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TA;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=VA.bind(null,t,e,n),e.then(t,t))}function rv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ss(-1,1),e.tag=2,zs(n,e,1))),n.lanes|=1),t)}var IA=gs.ReactCurrentOwner,Pn=!1;function wn(t,e,n,r){e.child=t===null?uE(e,null,n,r):Oo(e,t.child,n,r)}function iv(t,e,n,r,s){n=n.render;var i=e.ref;return Co(e,s),r=ig(t,e,n,r,i,s),n=og(),t!==null&&!Pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ls(t,e,s)):(mt&&n&&Wm(e),e.flags|=1,wn(t,e,r,s),e.child)}function ov(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!gg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,LE(t,e,i,r,s)):(t=Pc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:wl,n(o,r)&&t.ref===e.ref)return ls(t,e,s)}return e.flags|=1,t=$s(i,r),t.ref=e.ref,t.return=e,e.child=t}function LE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(wl(i,r)&&t.ref===e.ref)if(Pn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Pn=!0);else return e.lanes=t.lanes,ls(t,e,s)}return Ep(t,e,n,r,s)}function jE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(wo,On),On|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ut(wo,On),On|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ut(wo,On),On|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ut(wo,On),On|=r;return wn(t,e,s,n),e.child}function FE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ep(t,e,n,r,s){var i=Dn(n)?Ci:mn.current;return i=Vo(e,i),Co(e,s),n=ig(t,e,n,r,i,s),r=og(),t!==null&&!Pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ls(t,e,s)):(mt&&r&&Wm(e),e.flags|=1,wn(t,e,n,s),e.child)}function av(t,e,n,r,s){if(Dn(n)){var i=!0;ed(e)}else i=!1;if(Co(e,s),e.stateNode===null)Ac(t,e),PE(e,n,r),_p(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=nr(c):(c=Dn(n)?Ci:mn.current,c=Vo(e,c));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&tv(e,o,r,c),ks=!1;var g=e.memoizedState;o.state=g,id(e,r,o,s),l=e.memoizedState,a!==r||g!==l||Mn.current||ks?(typeof d=="function"&&(wp(e,n,d,r),l=e.memoizedState),(a=ks||ev(e,n,a,r,g,l,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:fr(e.type,a),o.props=c,m=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=nr(l):(l=Dn(n)?Ci:mn.current,l=Vo(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==l)&&tv(e,o,r,l),ks=!1,g=e.memoizedState,o.state=g,id(e,r,o,s);var w=e.memoizedState;a!==m||g!==w||Mn.current||ks?(typeof y=="function"&&(wp(e,n,y,r),w=e.memoizedState),(c=ks||ev(e,n,c,r,g,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Tp(t,e,n,r,i,s)}function Tp(t,e,n,r,s,i){FE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&qy(e,n,!1),ls(t,e,i);r=e.stateNode,IA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Oo(e,t.child,null,i),e.child=Oo(e,null,a,i)):wn(t,e,a,i),e.memoizedState=r.state,s&&qy(e,n,!0),e.child}function VE(t){var e=t.stateNode;e.pendingContext?$y(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$y(t,e.context,!1),tg(t,e.containerInfo)}function lv(t,e,n,r,s){return Uo(),Jm(s),e.flags|=256,wn(t,e,n,r),e.child}var Ip={dehydrated:null,treeContext:null,retryLane:0};function Sp(t){return{baseLanes:t,cachePool:null,transitions:null}}function UE(t,e,n){var r=e.pendingProps,s=yt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ut(yt,s&1),t===null)return vp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Xd(o,r,0,null),t=Ii(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Sp(n),e.memoizedState=Ip,t):ug(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return SA(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=$s(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=$s(a,i):(i=Ii(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Sp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ip,r}return i=t.child,t=i.sibling,r=$s(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ug(t,e){return e=Xd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ic(t,e,n,r){return r!==null&&Jm(r),Oo(e,t.child,null,n),t=ug(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SA(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=yf(Error(pe(422))),ic(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Xd({mode:"visible",children:r.children},s,0,null),i=Ii(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Oo(e,t.child,null,o),e.child.memoizedState=Sp(o),e.memoizedState=Ip,i);if(!(e.mode&1))return ic(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(pe(419)),r=yf(i,r,void 0),ic(t,e,o,r)}if(a=(o&t.childLanes)!==0,Pn||a){if(r=Ht,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,as(t,s),yr(r,t,s,-1))}return mg(),r=yf(Error(pe(421))),ic(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=UA.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Bn=Bs(s.nextSibling),Gn=e,mt=!0,mr=null,t!==null&&(Yn[Qn++]=Xr,Yn[Qn++]=Zr,Yn[Qn++]=Ai,Xr=t.id,Zr=t.overflow,Ai=e),e=ug(e,r.children),e.flags|=4096,e)}function uv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xp(t.return,e,n)}function vf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function OE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wn(t,e,r.children,n),r=yt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uv(t,n,e);else if(t.tag===19)uv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ut(yt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&od(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),vf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&od(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}vf(e,!0,n,null,i);break;case"together":vf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ac(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ls(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ri|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(pe(153));if(e.child!==null){for(t=e.child,n=$s(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$s(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kA(t,e,n){switch(e.tag){case 3:VE(e),Uo();break;case 5:hE(e);break;case 1:Dn(e.type)&&ed(e);break;case 4:tg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ut(rd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ut(yt,yt.current&1),e.flags|=128,null):n&e.child.childLanes?UE(t,e,n):(ut(yt,yt.current&1),t=ls(t,e,n),t!==null?t.sibling:null);ut(yt,yt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return OE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ut(yt,yt.current),r)break;return null;case 22:case 23:return e.lanes=0,jE(t,e,n)}return ls(t,e,n)}var BE,kp,zE,GE;BE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kp=function(){};zE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,wi(Dr.current);var i=null;switch(n){case"input":s=Jf(t,s),r=Jf(t,r),i=[];break;case"select":s=xt({},s,{value:void 0}),r=xt({},r,{value:void 0}),i=[];break;case"textarea":s=Xf(t,s),r=Xf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xc)}ep(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(fl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(fl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ht("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};GE=function(t,e,n,r){n!==r&&(e.flags|=4)};function ja(t,e){if(!mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function CA(t,e,n){var r=e.pendingProps;switch(Km(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Dn(e.type)&&Zc(),ln(e),null;case 3:return r=e.stateNode,Bo(),pt(Mn),pt(mn),rg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(rc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mr!==null&&(Lp(mr),mr=null))),kp(t,e),ln(e),null;case 5:ng(e);var s=wi(Il.current);if(n=e.type,t!==null&&e.stateNode!=null)zE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(pe(166));return ln(e),null}if(t=wi(Dr.current),rc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Pr]=e,r[El]=i,t=(e.mode&1)!==0,n){case"dialog":ht("cancel",r),ht("close",r);break;case"iframe":case"object":case"embed":ht("load",r);break;case"video":case"audio":for(s=0;s<Ha.length;s++)ht(Ha[s],r);break;case"source":ht("error",r);break;case"img":case"image":case"link":ht("error",r),ht("load",r);break;case"details":ht("toggle",r);break;case"input":vy(r,i),ht("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ht("invalid",r);break;case"textarea":wy(r,i),ht("invalid",r)}ep(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&nc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&nc(r.textContent,a,t),s=["children",""+a]):fl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ht("scroll",r)}switch(n){case"input":Ku(r),xy(r,i,!0);break;case"textarea":Ku(r),_y(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Xc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Pr]=e,t[El]=r,BE(t,e,!1,!1),e.stateNode=t;e:{switch(o=tp(n,r),n){case"dialog":ht("cancel",t),ht("close",t),s=r;break;case"iframe":case"object":case"embed":ht("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ha.length;s++)ht(Ha[s],t);s=r;break;case"source":ht("error",t),s=r;break;case"img":case"image":case"link":ht("error",t),ht("load",t),s=r;break;case"details":ht("toggle",t),s=r;break;case"input":vy(t,r),s=Jf(t,r),ht("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=xt({},r,{value:void 0}),ht("invalid",t);break;case"textarea":wy(t,r),s=Xf(t,r),ht("invalid",t);break;default:s=r}ep(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?wb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vb(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&pl(t,l):typeof l=="number"&&pl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ht("scroll",t):l!=null&&Mm(t,i,l,o))}switch(n){case"input":Ku(t),xy(t,r,!1);break;case"textarea":Ku(t),_y(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ys(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?To(t,!!r.multiple,i,!1):r.defaultValue!=null&&To(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Xc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)GE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(pe(166));if(n=wi(Il.current),wi(Dr.current),rc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pr]=e,(i=r.nodeValue!==n)&&(t=Gn,t!==null))switch(t.tag){case 3:nc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pr]=e,e.stateNode=r}return ln(e),null;case 13:if(pt(yt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mt&&Bn!==null&&e.mode&1&&!(e.flags&128))aE(),Uo(),e.flags|=98560,i=!1;else if(i=rc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(pe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(pe(317));i[Pr]=e}else Uo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),i=!1}else mr!==null&&(Lp(mr),mr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||yt.current&1?Ft===0&&(Ft=3):mg())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return Bo(),kp(t,e),t===null&&_l(e.stateNode.containerInfo),ln(e),null;case 10:return Xm(e.type._context),ln(e),null;case 17:return Dn(e.type)&&Zc(),ln(e),null;case 19:if(pt(yt),i=e.memoizedState,i===null)return ln(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ja(i,!1);else{if(Ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=od(t),o!==null){for(e.flags|=128,ja(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ut(yt,yt.current&1|2),e.child}t=t.sibling}i.tail!==null&&kt()>Go&&(e.flags|=128,r=!0,ja(i,!1),e.lanes=4194304)}else{if(!r)if(t=od(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ja(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!mt)return ln(e),null}else 2*kt()-i.renderingStartTime>Go&&n!==1073741824&&(e.flags|=128,r=!0,ja(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=kt(),e.sibling=null,n=yt.current,ut(yt,r?n&1|2:n&1),e):(ln(e),null);case 22:case 23:return pg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?On&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(pe(156,e.tag))}function AA(t,e){switch(Km(e),e.tag){case 1:return Dn(e.type)&&Zc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bo(),pt(Mn),pt(mn),rg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ng(e),null;case 13:if(pt(yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(pe(340));Uo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pt(yt),null;case 4:return Bo(),null;case 10:return Xm(e.type._context),null;case 22:case 23:return pg(),null;case 24:return null;default:return null}}var oc=!1,dn=!1,NA=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function xo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Et(t,e,r)}else n.current=null}function Cp(t,e,n){try{n()}catch(r){Et(t,e,r)}}var cv=!1;function RA(t,e){if(dp=Jc,t=Kb(),qm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,m=t,g=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==i||r!==0&&m.nodeType!==3||(l=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)g=m,m=y;for(;;){if(m===t)break t;if(g===n&&++c===s&&(a=o),g===i&&++d===r&&(l=o),(y=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(hp={focusedElem:t,selectionRange:n},Jc=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){e=Ee;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,_=w.memoizedState,v=e.stateNode,E=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:fr(e.type,x),_);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(N){Et(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}return w=cv,cv=!1,w}function nl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Cp(e,n,i)}s=s.next}while(s!==r)}}function Yd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ap(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function HE(t){var e=t.alternate;e!==null&&(t.alternate=null,HE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pr],delete e[El],delete e[mp],delete e[fA],delete e[pA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $E(t){return t.tag===5||t.tag===3||t.tag===4}function dv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$E(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Np(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xc));else if(r!==4&&(t=t.child,t!==null))for(Np(t,e,n),t=t.sibling;t!==null;)Np(t,e,n),t=t.sibling}function Rp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rp(t,e,n),t=t.sibling;t!==null;)Rp(t,e,n),t=t.sibling}var Kt=null,pr=!1;function Ts(t,e,n){for(n=n.child;n!==null;)qE(t,e,n),n=n.sibling}function qE(t,e,n){if(Mr&&typeof Mr.onCommitFiberUnmount=="function")try{Mr.onCommitFiberUnmount(zd,n)}catch{}switch(n.tag){case 5:dn||xo(n,e);case 6:var r=Kt,s=pr;Kt=null,Ts(t,e,n),Kt=r,pr=s,Kt!==null&&(pr?(t=Kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(pr?(t=Kt,n=n.stateNode,t.nodeType===8?df(t.parentNode,n):t.nodeType===1&&df(t,n),vl(t)):df(Kt,n.stateNode));break;case 4:r=Kt,s=pr,Kt=n.stateNode.containerInfo,pr=!0,Ts(t,e,n),Kt=r,pr=s;break;case 0:case 11:case 14:case 15:if(!dn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Cp(n,e,o),s=s.next}while(s!==r)}Ts(t,e,n);break;case 1:if(!dn&&(xo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Et(n,e,a)}Ts(t,e,n);break;case 21:Ts(t,e,n);break;case 22:n.mode&1?(dn=(r=dn)||n.memoizedState!==null,Ts(t,e,n),dn=r):Ts(t,e,n);break;default:Ts(t,e,n)}}function hv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new NA),e.forEach(function(r){var s=OA.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kt=a.stateNode,pr=!1;break e;case 3:Kt=a.stateNode.containerInfo,pr=!0;break e;case 4:Kt=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if(Kt===null)throw Error(pe(160));qE(i,o,s),Kt=null,pr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Et(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)WE(e,t),e=e.sibling}function WE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dr(e,t),Nr(t),r&4){try{nl(3,t,t.return),Yd(3,t)}catch(x){Et(t,t.return,x)}try{nl(5,t,t.return)}catch(x){Et(t,t.return,x)}}break;case 1:dr(e,t),Nr(t),r&512&&n!==null&&xo(n,n.return);break;case 5:if(dr(e,t),Nr(t),r&512&&n!==null&&xo(n,n.return),t.flags&32){var s=t.stateNode;try{pl(s,"")}catch(x){Et(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&mb(s,i),tp(a,o);var c=tp(a,i);for(o=0;o<l.length;o+=2){var d=l[o],m=l[o+1];d==="style"?wb(s,m):d==="dangerouslySetInnerHTML"?vb(s,m):d==="children"?pl(s,m):Mm(s,d,m,c)}switch(a){case"input":Yf(s,i);break;case"textarea":gb(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?To(s,!!i.multiple,y,!1):g!==!!i.multiple&&(i.defaultValue!=null?To(s,!!i.multiple,i.defaultValue,!0):To(s,!!i.multiple,i.multiple?[]:"",!1))}s[El]=i}catch(x){Et(t,t.return,x)}}break;case 6:if(dr(e,t),Nr(t),r&4){if(t.stateNode===null)throw Error(pe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Et(t,t.return,x)}}break;case 3:if(dr(e,t),Nr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vl(e.containerInfo)}catch(x){Et(t,t.return,x)}break;case 4:dr(e,t),Nr(t);break;case 13:dr(e,t),Nr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hg=kt())),r&4&&hv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(dn=(c=dn)||d,dr(e,t),dn=c):dr(e,t),Nr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Ee=t,d=t.child;d!==null;){for(m=Ee=d;Ee!==null;){switch(g=Ee,y=g.child,g.tag){case 0:case 11:case 14:case 15:nl(4,g,g.return);break;case 1:xo(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){Et(r,n,x)}}break;case 5:xo(g,g.return);break;case 22:if(g.memoizedState!==null){pv(m);continue}}y!==null?(y.return=g,Ee=y):pv(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,l=m.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=xb("display",o))}catch(x){Et(t,t.return,x)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(x){Et(t,t.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:dr(e,t),Nr(t),r&4&&hv(t);break;case 21:break;default:dr(e,t),Nr(t)}}function Nr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($E(n)){var r=n;break e}n=n.return}throw Error(pe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(pl(s,""),r.flags&=-33);var i=dv(t);Rp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=dv(t);Np(t,a,o);break;default:throw Error(pe(161))}}catch(l){Et(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PA(t,e,n){Ee=t,KE(t)}function KE(t,e,n){for(var r=(t.mode&1)!==0;Ee!==null;){var s=Ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||oc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||dn;a=oc;var c=dn;if(oc=o,(dn=l)&&!c)for(Ee=s;Ee!==null;)o=Ee,l=o.child,o.tag===22&&o.memoizedState!==null?mv(s):l!==null?(l.return=o,Ee=l):mv(s);for(;i!==null;)Ee=i,KE(i),i=i.sibling;Ee=s,oc=a,dn=c}fv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ee=i):fv(t)}}function fv(t){for(;Ee!==null;){var e=Ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dn||Yd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Qy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&vl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}dn||e.flags&512&&Ap(e)}catch(g){Et(e,e.return,g)}}if(e===t){Ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function pv(t){for(;Ee!==null;){var e=Ee;if(e===t){Ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function mv(t){for(;Ee!==null;){var e=Ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yd(4,e)}catch(l){Et(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Et(e,s,l)}}var i=e.return;try{Ap(e)}catch(l){Et(e,i,l)}break;case 5:var o=e.return;try{Ap(e)}catch(l){Et(e,o,l)}}}catch(l){Et(e,e.return,l)}if(e===t){Ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ee=a;break}Ee=e.return}}var MA=Math.ceil,ud=gs.ReactCurrentDispatcher,cg=gs.ReactCurrentOwner,Zn=gs.ReactCurrentBatchConfig,Qe=0,Ht=null,Mt=null,Qt=0,On=0,wo=ni(0),Ft=0,Al=null,Ri=0,Qd=0,dg=0,rl=null,Nn=null,hg=0,Go=1/0,Wr=null,cd=!1,Pp=null,Gs=null,ac=!1,Ls=null,dd=0,sl=0,Mp=null,Nc=-1,Rc=0;function bn(){return Qe&6?kt():Nc!==-1?Nc:Nc=kt()}function Hs(t){return t.mode&1?Qe&2&&Qt!==0?Qt&-Qt:gA.transition!==null?(Rc===0&&(Rc=Pb()),Rc):(t=nt,t!==0||(t=window.event,t=t===void 0?16:Ub(t.type)),t):1}function yr(t,e,n,r){if(50<sl)throw sl=0,Mp=null,Error(pe(185));Wl(t,n,r),(!(Qe&2)||t!==Ht)&&(t===Ht&&(!(Qe&2)&&(Qd|=n),Ft===4&&As(t,Qt)),Ln(t,r),n===1&&Qe===0&&!(e.mode&1)&&(Go=kt()+500,Wd&&ri()))}function Ln(t,e){var n=t.callbackNode;gC(t,e);var r=Kc(t,t===Ht?Qt:0);if(r===0)n!==null&&Ty(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ty(n),e===1)t.tag===0?mA(gv.bind(null,t)):sE(gv.bind(null,t)),dA(function(){!(Qe&6)&&ri()}),n=null;else{switch(Mb(r)){case 1:n=Vm;break;case 4:n=Nb;break;case 16:n=Wc;break;case 536870912:n=Rb;break;default:n=Wc}n=nT(n,JE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function JE(t,e){if(Nc=-1,Rc=0,Qe&6)throw Error(pe(327));var n=t.callbackNode;if(Ao()&&t.callbackNode!==n)return null;var r=Kc(t,t===Ht?Qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hd(t,r);else{e=r;var s=Qe;Qe|=2;var i=QE();(Ht!==t||Qt!==e)&&(Wr=null,Go=kt()+500,Ti(t,e));do try{jA();break}catch(a){YE(t,a)}while(!0);Qm(),ud.current=i,Qe=s,Mt!==null?e=0:(Ht=null,Qt=0,e=Ft)}if(e!==0){if(e===2&&(s=op(t),s!==0&&(r=s,e=Dp(t,s))),e===1)throw n=Al,Ti(t,0),As(t,r),Ln(t,kt()),n;if(e===6)As(t,r);else{if(s=t.current.alternate,!(r&30)&&!DA(s)&&(e=hd(t,r),e===2&&(i=op(t),i!==0&&(r=i,e=Dp(t,i))),e===1))throw n=Al,Ti(t,0),As(t,r),Ln(t,kt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(pe(345));case 2:mi(t,Nn,Wr);break;case 3:if(As(t,r),(r&130023424)===r&&(e=hg+500-kt(),10<e)){if(Kc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=pp(mi.bind(null,t,Nn,Wr),e);break}mi(t,Nn,Wr);break;case 4:if(As(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-gr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MA(r/1960))-r,10<r){t.timeoutHandle=pp(mi.bind(null,t,Nn,Wr),r);break}mi(t,Nn,Wr);break;case 5:mi(t,Nn,Wr);break;default:throw Error(pe(329))}}}return Ln(t,kt()),t.callbackNode===n?JE.bind(null,t):null}function Dp(t,e){var n=rl;return t.current.memoizedState.isDehydrated&&(Ti(t,e).flags|=256),t=hd(t,e),t!==2&&(e=Nn,Nn=n,e!==null&&Lp(e)),t}function Lp(t){Nn===null?Nn=t:Nn.push.apply(Nn,t)}function DA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!br(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function As(t,e){for(e&=~dg,e&=~Qd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gr(e),r=1<<n;t[n]=-1,e&=~r}}function gv(t){if(Qe&6)throw Error(pe(327));Ao();var e=Kc(t,0);if(!(e&1))return Ln(t,kt()),null;var n=hd(t,e);if(t.tag!==0&&n===2){var r=op(t);r!==0&&(e=r,n=Dp(t,r))}if(n===1)throw n=Al,Ti(t,0),As(t,e),Ln(t,kt()),n;if(n===6)throw Error(pe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mi(t,Nn,Wr),Ln(t,kt()),null}function fg(t,e){var n=Qe;Qe|=1;try{return t(e)}finally{Qe=n,Qe===0&&(Go=kt()+500,Wd&&ri())}}function Pi(t){Ls!==null&&Ls.tag===0&&!(Qe&6)&&Ao();var e=Qe;Qe|=1;var n=Zn.transition,r=nt;try{if(Zn.transition=null,nt=1,t)return t()}finally{nt=r,Zn.transition=n,Qe=e,!(Qe&6)&&ri()}}function pg(){On=wo.current,pt(wo)}function Ti(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cA(n)),Mt!==null)for(n=Mt.return;n!==null;){var r=n;switch(Km(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zc();break;case 3:Bo(),pt(Mn),pt(mn),rg();break;case 5:ng(r);break;case 4:Bo();break;case 13:pt(yt);break;case 19:pt(yt);break;case 10:Xm(r.type._context);break;case 22:case 23:pg()}n=n.return}if(Ht=t,Mt=t=$s(t.current,null),Qt=On=e,Ft=0,Al=null,dg=Qd=Ri=0,Nn=rl=null,xi!==null){for(e=0;e<xi.length;e++)if(n=xi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}xi=null}return t}function YE(t,e){do{var n=Mt;try{if(Qm(),kc.current=ld,ad){for(var r=vt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ad=!1}if(Ni=0,Gt=jt=vt=null,tl=!1,Sl=0,cg.current=null,n===null||n.return===null){Ft=1,Al=e,Mt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Qt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=rv(o);if(y!==null){y.flags&=-257,sv(y,o,a,i,e),y.mode&1&&nv(i,c,e),e=y,l=c;var w=e.updateQueue;if(w===null){var x=new Set;x.add(l),e.updateQueue=x}else w.add(l);break e}else{if(!(e&1)){nv(i,c,e),mg();break e}l=Error(pe(426))}}else if(mt&&a.mode&1){var _=rv(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),sv(_,o,a,i,e),Jm(zo(l,a));break e}}i=l=zo(l,a),Ft!==4&&(Ft=2),rl===null?rl=[i]:rl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=ME(i,l,e);Yy(i,v);break e;case 1:a=l;var E=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Gs===null||!Gs.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=DE(i,a,e);Yy(i,N);break e}}i=i.return}while(i!==null)}ZE(n)}catch(L){e=L,Mt===n&&n!==null&&(Mt=n=n.return);continue}break}while(!0)}function QE(){var t=ud.current;return ud.current=ld,t===null?ld:t}function mg(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Ht===null||!(Ri&268435455)&&!(Qd&268435455)||As(Ht,Qt)}function hd(t,e){var n=Qe;Qe|=2;var r=QE();(Ht!==t||Qt!==e)&&(Wr=null,Ti(t,e));do try{LA();break}catch(s){YE(t,s)}while(!0);if(Qm(),Qe=n,ud.current=r,Mt!==null)throw Error(pe(261));return Ht=null,Qt=0,Ft}function LA(){for(;Mt!==null;)XE(Mt)}function jA(){for(;Mt!==null&&!aC();)XE(Mt)}function XE(t){var e=tT(t.alternate,t,On);t.memoizedProps=t.pendingProps,e===null?ZE(t):Mt=e,cg.current=null}function ZE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=AA(n,e),n!==null){n.flags&=32767,Mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ft=6,Mt=null;return}}else if(n=CA(n,e,On),n!==null){Mt=n;return}if(e=e.sibling,e!==null){Mt=e;return}Mt=e=t}while(e!==null);Ft===0&&(Ft=5)}function mi(t,e,n){var r=nt,s=Zn.transition;try{Zn.transition=null,nt=1,FA(t,e,n,r)}finally{Zn.transition=s,nt=r}return null}function FA(t,e,n,r){do Ao();while(Ls!==null);if(Qe&6)throw Error(pe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(pe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(yC(t,i),t===Ht&&(Mt=Ht=null,Qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ac||(ac=!0,nT(Wc,function(){return Ao(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Zn.transition,Zn.transition=null;var o=nt;nt=1;var a=Qe;Qe|=4,cg.current=null,RA(t,n),WE(n,t),rA(hp),Jc=!!dp,hp=dp=null,t.current=n,PA(n),lC(),Qe=a,nt=o,Zn.transition=i}else t.current=n;if(ac&&(ac=!1,Ls=t,dd=s),i=t.pendingLanes,i===0&&(Gs=null),dC(n.stateNode),Ln(t,kt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(cd)throw cd=!1,t=Pp,Pp=null,t;return dd&1&&t.tag!==0&&Ao(),i=t.pendingLanes,i&1?t===Mp?sl++:(sl=0,Mp=t):sl=0,ri(),null}function Ao(){if(Ls!==null){var t=Mb(dd),e=Zn.transition,n=nt;try{if(Zn.transition=null,nt=16>t?16:t,Ls===null)var r=!1;else{if(t=Ls,Ls=null,dd=0,Qe&6)throw Error(pe(331));var s=Qe;for(Qe|=4,Ee=t.current;Ee!==null;){var i=Ee,o=i.child;if(Ee.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ee=c;Ee!==null;){var d=Ee;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var m=d.child;if(m!==null)m.return=d,Ee=m;else for(;Ee!==null;){d=Ee;var g=d.sibling,y=d.return;if(HE(d),d===c){Ee=null;break}if(g!==null){g.return=y,Ee=g;break}Ee=y}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}Ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ee=o;else e:for(;Ee!==null;){if(i=Ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ee=v;break e}Ee=i.return}}var E=t.current;for(Ee=E;Ee!==null;){o=Ee;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Ee=T;else e:for(o=E;Ee!==null;){if(a=Ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yd(9,a)}}catch(L){Et(a,a.return,L)}if(a===o){Ee=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,Ee=N;break e}Ee=a.return}}if(Qe=s,ri(),Mr&&typeof Mr.onPostCommitFiberRoot=="function")try{Mr.onPostCommitFiberRoot(zd,t)}catch{}r=!0}return r}finally{nt=n,Zn.transition=e}}return!1}function yv(t,e,n){e=zo(n,e),e=ME(t,e,1),t=zs(t,e,1),e=bn(),t!==null&&(Wl(t,1,e),Ln(t,e))}function Et(t,e,n){if(t.tag===3)yv(t,t,n);else for(;e!==null;){if(e.tag===3){yv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gs===null||!Gs.has(r))){t=zo(n,t),t=DE(e,t,1),e=zs(e,t,1),t=bn(),e!==null&&(Wl(e,1,t),Ln(e,t));break}}e=e.return}}function VA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bn(),t.pingedLanes|=t.suspendedLanes&n,Ht===t&&(Qt&n)===n&&(Ft===4||Ft===3&&(Qt&130023424)===Qt&&500>kt()-hg?Ti(t,0):dg|=n),Ln(t,e)}function eT(t,e){e===0&&(t.mode&1?(e=Qu,Qu<<=1,!(Qu&130023424)&&(Qu=4194304)):e=1);var n=bn();t=as(t,e),t!==null&&(Wl(t,e,n),Ln(t,n))}function UA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eT(t,n)}function OA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(pe(314))}r!==null&&r.delete(e),eT(t,n)}var tT;tT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mn.current)Pn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pn=!1,kA(t,e,n);Pn=!!(t.flags&131072)}else Pn=!1,mt&&e.flags&1048576&&iE(e,nd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ac(t,e),t=e.pendingProps;var s=Vo(e,mn.current);Co(e,n),s=ig(null,e,r,t,s,n);var i=og();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dn(r)?(i=!0,ed(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,eg(e),s.updater=Jd,e.stateNode=s,s._reactInternals=e,_p(e,r,t,n),e=Tp(null,e,r,!0,i,n)):(e.tag=0,mt&&i&&Wm(e),wn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ac(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=zA(r),t=fr(r,t),s){case 0:e=Ep(null,e,r,t,n);break e;case 1:e=av(null,e,r,t,n);break e;case 11:e=iv(null,e,r,t,n);break e;case 14:e=ov(null,e,r,fr(r.type,t),n);break e}throw Error(pe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),Ep(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),av(t,e,r,s,n);case 3:e:{if(VE(e),t===null)throw Error(pe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,dE(t,e),id(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=zo(Error(pe(423)),e),e=lv(t,e,r,n,s);break e}else if(r!==s){s=zo(Error(pe(424)),e),e=lv(t,e,r,n,s);break e}else for(Bn=Bs(e.stateNode.containerInfo.firstChild),Gn=e,mt=!0,mr=null,n=uE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Uo(),r===s){e=ls(t,e,n);break e}wn(t,e,r,n)}e=e.child}return e;case 5:return hE(e),t===null&&vp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,fp(r,s)?o=null:i!==null&&fp(r,i)&&(e.flags|=32),FE(t,e),wn(t,e,o,n),e.child;case 6:return t===null&&vp(e),null;case 13:return UE(t,e,n);case 4:return tg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oo(e,null,r,n):wn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),iv(t,e,r,s,n);case 7:return wn(t,e,e.pendingProps,n),e.child;case 8:return wn(t,e,e.pendingProps.children,n),e.child;case 12:return wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ut(rd,r._currentValue),r._currentValue=o,i!==null)if(br(i.value,o)){if(i.children===s.children&&!Mn.current){e=ls(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ss(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),xp(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(pe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),xp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Co(e,n),s=nr(s),r=r(s),e.flags|=1,wn(t,e,r,n),e.child;case 14:return r=e.type,s=fr(r,e.pendingProps),s=fr(r.type,s),ov(t,e,r,s,n);case 15:return LE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fr(r,s),Ac(t,e),e.tag=1,Dn(r)?(t=!0,ed(e)):t=!1,Co(e,n),PE(e,r,s),_p(e,r,s,n),Tp(null,e,r,!0,t,n);case 19:return OE(t,e,n);case 22:return jE(t,e,n)}throw Error(pe(156,e.tag))};function nT(t,e){return Ab(t,e)}function BA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(t,e,n,r){return new BA(t,e,n,r)}function gg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zA(t){if(typeof t=="function")return gg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Lm)return 11;if(t===jm)return 14}return 2}function $s(t,e){var n=t.alternate;return n===null?(n=Xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")gg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case uo:return Ii(n.children,s,i,e);case Dm:o=8,s|=8;break;case $f:return t=Xn(12,n,e,s|2),t.elementType=$f,t.lanes=i,t;case qf:return t=Xn(13,n,e,s),t.elementType=qf,t.lanes=i,t;case Wf:return t=Xn(19,n,e,s),t.elementType=Wf,t.lanes=i,t;case hb:return Xd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cb:o=10;break e;case db:o=9;break e;case Lm:o=11;break e;case jm:o=14;break e;case Ss:o=16,r=null;break e}throw Error(pe(130,t==null?t:typeof t,""))}return e=Xn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ii(t,e,n,r){return t=Xn(7,t,r,e),t.lanes=n,t}function Xd(t,e,n,r){return t=Xn(22,t,r,e),t.elementType=hb,t.lanes=n,t.stateNode={isHidden:!1},t}function xf(t,e,n){return t=Xn(6,t,null,e),t.lanes=n,t}function wf(t,e,n){return e=Xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GA(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zh(0),this.expirationTimes=Zh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yg(t,e,n,r,s,i,o,a,l){return t=new GA(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Xn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eg(i),t}function HA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rT(t){if(!t)return Qs;t=t._reactInternals;e:{if(zi(t)!==t||t.tag!==1)throw Error(pe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(pe(171))}if(t.tag===1){var n=t.type;if(Dn(n))return rE(t,n,e)}return e}function sT(t,e,n,r,s,i,o,a,l){return t=yg(n,r,!0,t,s,i,o,a,l),t.context=rT(null),n=t.current,r=bn(),s=Hs(n),i=ss(r,s),i.callback=e??null,zs(n,i,s),t.current.lanes=s,Wl(t,s,r),Ln(t,r),t}function Zd(t,e,n,r){var s=e.current,i=bn(),o=Hs(s);return n=rT(n),e.context===null?e.context=n:e.pendingContext=n,e=ss(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zs(s,e,o),t!==null&&(yr(t,s,o,i),Sc(t,s,o)),o}function fd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vg(t,e){vv(t,e),(t=t.alternate)&&vv(t,e)}function $A(){return null}var iT=typeof reportError=="function"?reportError:function(t){console.error(t)};function xg(t){this._internalRoot=t}eh.prototype.render=xg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(pe(409));Zd(t,e,null,null)};eh.prototype.unmount=xg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pi(function(){Zd(null,t,null,null)}),e[os]=null}};function eh(t){this._internalRoot=t}eh.prototype.unstable_scheduleHydration=function(t){if(t){var e=jb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cs.length&&e!==0&&e<Cs[n].priority;n++);Cs.splice(n,0,t),n===0&&Vb(t)}};function wg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function th(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xv(){}function qA(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=fd(o);i.call(c)}}var o=sT(e,r,t,0,null,!1,!1,"",xv);return t._reactRootContainer=o,t[os]=o.current,_l(t.nodeType===8?t.parentNode:t),Pi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=fd(l);a.call(c)}}var l=yg(t,0,!1,null,null,!1,!1,"",xv);return t._reactRootContainer=l,t[os]=l.current,_l(t.nodeType===8?t.parentNode:t),Pi(function(){Zd(e,l,n,r)}),l}function nh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=fd(o);a.call(l)}}Zd(e,o,t,s)}else o=qA(n,e,t,s,r);return fd(o)}Db=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ga(e.pendingLanes);n!==0&&(Um(e,n|1),Ln(e,kt()),!(Qe&6)&&(Go=kt()+500,ri()))}break;case 13:Pi(function(){var r=as(t,1);if(r!==null){var s=bn();yr(r,t,1,s)}}),vg(t,1)}};Om=function(t){if(t.tag===13){var e=as(t,134217728);if(e!==null){var n=bn();yr(e,t,134217728,n)}vg(t,134217728)}};Lb=function(t){if(t.tag===13){var e=Hs(t),n=as(t,e);if(n!==null){var r=bn();yr(n,t,e,r)}vg(t,e)}};jb=function(){return nt};Fb=function(t,e){var n=nt;try{return nt=t,e()}finally{nt=n}};rp=function(t,e,n){switch(e){case"input":if(Yf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=qd(r);if(!s)throw Error(pe(90));pb(r),Yf(r,s)}}}break;case"textarea":gb(t,n);break;case"select":e=n.value,e!=null&&To(t,!!n.multiple,e,!1)}};Eb=fg;Tb=Pi;var WA={usingClientEntryPoint:!1,Events:[Jl,po,qd,_b,bb,fg]},Fa={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KA={bundleType:Fa.bundleType,version:Fa.version,rendererPackageName:Fa.rendererPackageName,rendererConfig:Fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kb(t),t===null?null:t.stateNode},findFiberByHostInstance:Fa.findFiberByHostInstance||$A,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{zd=lc.inject(KA),Mr=lc}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WA;Wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wg(e))throw Error(pe(200));return HA(t,e,null,n)};Wn.createRoot=function(t,e){if(!wg(t))throw Error(pe(299));var n=!1,r="",s=iT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yg(t,1,!1,null,null,n,!1,r,s),t[os]=e.current,_l(t.nodeType===8?t.parentNode:t),new xg(e)};Wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(pe(188)):(t=Object.keys(t).join(","),Error(pe(268,t)));return t=kb(e),t=t===null?null:t.stateNode,t};Wn.flushSync=function(t){return Pi(t)};Wn.hydrate=function(t,e,n){if(!th(e))throw Error(pe(200));return nh(null,t,e,!0,n)};Wn.hydrateRoot=function(t,e,n){if(!wg(t))throw Error(pe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=iT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sT(e,null,t,1,n??null,s,!1,i,o),t[os]=e.current,_l(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new eh(e)};Wn.render=function(t,e,n){if(!th(e))throw Error(pe(200));return nh(null,t,e,!1,n)};Wn.unmountComponentAtNode=function(t){if(!th(t))throw Error(pe(40));return t._reactRootContainer?(Pi(function(){nh(null,null,t,!1,function(){t._reactRootContainer=null,t[os]=null})}),!0):!1};Wn.unstable_batchedUpdates=fg;Wn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!th(n))throw Error(pe(200));if(t==null||t._reactInternals===void 0)throw Error(pe(38));return nh(t,e,n,!1,r)};Wn.version="18.3.1-next-f1338f8080-20240426";function oT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oT)}catch(t){console.error(t)}}oT(),ob.exports=Wn;var JA=ob.exports,wv=JA;Gf.createRoot=wv.createRoot,Gf.hydrateRoot=wv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nl(){return Nl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nl.apply(this,arguments)}var js;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(js||(js={}));const _v="popstate";function YA(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Gi(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),jp("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:pd(i))}function r(s,i){rh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return XA(e,n,r,t)}function Ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QA(){return Math.random().toString(36).substr(2,8)}function bv(t,e){return{usr:t.state,key:t.key,idx:e}}function jp(t,e,n,r){return n===void 0&&(n=null),Nl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Gi(e):e,{state:n,key:e&&e.key||r||QA()})}function pd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Gi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function XA(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=js.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Nl({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function m(){a=js.Pop;let _=d(),v=_==null?null:_-c;c=_,l&&l({action:a,location:x.location,delta:v})}function g(_,v){a=js.Push;let E=jp(x.location,_,v);n&&n(E,_),c=d()+1;let T=bv(E,c),N=x.createHref(E);try{o.pushState(T,"",N)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(N)}i&&l&&l({action:a,location:x.location,delta:1})}function y(_,v){a=js.Replace;let E=jp(x.location,_,v);n&&n(E,_),c=d();let T=bv(E,c),N=x.createHref(E);o.replaceState(T,"",N),i&&l&&l({action:a,location:x.location,delta:0})}function w(_){let v=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof _=="string"?_:pd(_);return E=E.replace(/ $/,"%20"),Ct(v,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,v)}let x={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(_v,m),l=_,()=>{s.removeEventListener(_v,m),l=null}},createHref(_){return e(s,_)},createURL:w,encodeLocation(_){let v=w(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:g,replace:y,go(_){return o.go(_)}};return x}var Ev;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ev||(Ev={}));function ZA(t,e,n){return n===void 0&&(n="/"),e2(t,e,n)}function e2(t,e,n,r){let s=typeof e=="string"?Gi(e):e,i=_g(s.pathname||"/",n);if(i==null)return null;let o=aT(t);t2(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=f2(i);a=c2(o[l],c)}return a}function aT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ct(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=qs([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Ct(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),aT(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:l2(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of lT(i.path))s(i,o,l)}),e}function lT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=lT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function t2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:u2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const n2=/^:[\w-]+$/,r2=3,s2=2,i2=1,o2=10,a2=-2,Tv=t=>t==="*";function l2(t,e){let n=t.split("/"),r=n.length;return n.some(Tv)&&(r+=a2),e&&(r+=s2),n.filter(s=>!Tv(s)).reduce((s,i)=>s+(n2.test(i)?r2:i===""?i2:o2),r)}function u2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function c2(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",m=d2({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),g=l.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:qs([i,m.pathname]),pathnameBase:v2(qs([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=qs([i,m.pathnameBase]))}return o}function d2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=h2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,m)=>{let{paramName:g,isOptional:y}=d;if(g==="*"){let x=a[m]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const w=a[m];return y&&!w?c[g]=void 0:c[g]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function h2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),rh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function f2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _g(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const p2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,m2=t=>p2.test(t);function g2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Gi(t):t,i;if(n)if(m2(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),rh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Iv(n.substring(1),"/"):i=Iv(n,e)}else i=e;return{pathname:i,search:x2(r),hash:w2(s)}}function Iv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function _f(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function y2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bg(t,e){let n=y2(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Eg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Gi(t):(s=Nl({},t),Ct(!s.pathname||!s.pathname.includes("?"),_f("?","pathname","search",s)),Ct(!s.pathname||!s.pathname.includes("#"),_f("#","pathname","hash",s)),Ct(!s.search||!s.search.includes("#"),_f("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}a=m>=0?e[m]:"/"}let l=g2(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const qs=t=>t.join("/").replace(/\/\/+/g,"/"),v2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),x2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,w2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const uT=["post","put","patch","delete"];new Set(uT);const b2=["get",...uT];new Set(b2);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rl(){return Rl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rl.apply(this,arguments)}const Tg=F.createContext(null),E2=F.createContext(null),si=F.createContext(null),sh=F.createContext(null),ys=F.createContext({outlet:null,matches:[],isDataRoute:!1}),cT=F.createContext(null);function T2(t,e){let{relative:n}=e===void 0?{}:e;sa()||Ct(!1);let{basename:r,navigator:s}=F.useContext(si),{hash:i,pathname:o,search:a}=fT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:qs([r,o])),s.createHref({pathname:l,search:a,hash:i})}function sa(){return F.useContext(sh)!=null}function Hi(){return sa()||Ct(!1),F.useContext(sh).location}function dT(t){F.useContext(si).static||F.useLayoutEffect(t)}function vs(){let{isDataRoute:t}=F.useContext(ys);return t?F2():I2()}function I2(){sa()||Ct(!1);let t=F.useContext(Tg),{basename:e,future:n,navigator:r}=F.useContext(si),{matches:s}=F.useContext(ys),{pathname:i}=Hi(),o=JSON.stringify(bg(s,n.v7_relativeSplatPath)),a=F.useRef(!1);return dT(()=>{a.current=!0}),F.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let m=Eg(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:qs([e,m.pathname])),(d.replace?r.replace:r.push)(m,d.state,d)},[e,r,o,i,t])}function hT(){let{matches:t}=F.useContext(ys),e=t[t.length-1];return e?e.params:{}}function fT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=F.useContext(si),{matches:s}=F.useContext(ys),{pathname:i}=Hi(),o=JSON.stringify(bg(s,r.v7_relativeSplatPath));return F.useMemo(()=>Eg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function S2(t,e){return k2(t,e)}function k2(t,e,n,r){sa()||Ct(!1);let{navigator:s}=F.useContext(si),{matches:i}=F.useContext(ys),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Hi(),d;if(e){var m;let _=typeof e=="string"?Gi(e):e;l==="/"||(m=_.pathname)!=null&&m.startsWith(l)||Ct(!1),d=_}else d=c;let g=d.pathname||"/",y=g;if(l!=="/"){let _=l.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=ZA(t,{pathname:y}),x=P2(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:qs([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:qs([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&x?F.createElement(sh.Provider,{value:{location:Rl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:js.Pop}},x):x}function C2(){let t=j2(),e=_2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:s},n):null,null)}const A2=F.createElement(C2,null);class N2 extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(ys.Provider,{value:this.props.routeContext},F.createElement(cT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function R2(t){let{routeContext:e,match:n,children:r}=t,s=F.useContext(Tg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(ys.Provider,{value:e},r)}function P2(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);d>=0||Ct(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=d),m.route.id){let{loaderData:g,errors:y}=n,w=m.route.loader&&g[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,m,g)=>{let y,w=!1,x=null,_=null;n&&(y=a&&m.route.id?a[m.route.id]:void 0,x=m.route.errorElement||A2,l&&(c<0&&g===0?(V2("route-fallback"),w=!0,_=null):c===g&&(w=!0,_=m.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,g+1)),E=()=>{let T;return y?T=x:w?T=_:m.route.Component?T=F.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=d,F.createElement(R2,{match:m,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?F.createElement(N2,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:E(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):E()},null)}var pT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(pT||{}),mT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(mT||{});function M2(t){let e=F.useContext(Tg);return e||Ct(!1),e}function D2(t){let e=F.useContext(E2);return e||Ct(!1),e}function L2(t){let e=F.useContext(ys);return e||Ct(!1),e}function gT(t){let e=L2(),n=e.matches[e.matches.length-1];return n.route.id||Ct(!1),n.route.id}function j2(){var t;let e=F.useContext(cT),n=D2(),r=gT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function F2(){let{router:t}=M2(pT.UseNavigateStable),e=gT(mT.UseNavigateStable),n=F.useRef(!1);return dT(()=>{n.current=!0}),F.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Rl({fromRouteId:e},i)))},[t,e])}const Sv={};function V2(t,e,n){Sv[t]||(Sv[t]=!0)}function U2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function O2(t){let{to:e,replace:n,state:r,relative:s}=t;sa()||Ct(!1);let{future:i,static:o}=F.useContext(si),{matches:a}=F.useContext(ys),{pathname:l}=Hi(),c=vs(),d=Eg(e,bg(a,i.v7_relativeSplatPath),l,s==="path"),m=JSON.stringify(d);return F.useEffect(()=>c(JSON.parse(m),{replace:n,state:r,relative:s}),[c,m,s,n,r]),null}function vn(t){Ct(!1)}function B2(t){let{basename:e="/",children:n=null,location:r,navigationType:s=js.Pop,navigator:i,static:o=!1,future:a}=t;sa()&&Ct(!1);let l=e.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:i,static:o,future:Rl({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Gi(r));let{pathname:d="/",search:m="",hash:g="",state:y=null,key:w="default"}=r,x=F.useMemo(()=>{let _=_g(d,l);return _==null?null:{location:{pathname:_,search:m,hash:g,state:y,key:w},navigationType:s}},[l,d,m,g,y,w,s]);return x==null?null:F.createElement(si.Provider,{value:c},F.createElement(sh.Provider,{children:n,value:x}))}function z2(t){let{children:e,location:n}=t;return S2(Fp(e),n)}new Promise(()=>{});function Fp(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(r,s)=>{if(!F.isValidElement(r))return;let i=[...e,s];if(r.type===F.Fragment){n.push.apply(n,Fp(r.props.children,i));return}r.type!==vn&&Ct(!1),!r.props.index||!r.props.children||Ct(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vp(){return Vp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vp.apply(this,arguments)}function G2(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function H2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $2(t,e){return t.button===0&&(!e||e==="_self")&&!H2(t)}const q2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],W2="6";try{window.__reactRouterVersion=W2}catch{}const K2="startTransition",kv=Vk[K2];function J2(t){let{basename:e,children:n,future:r,window:s}=t,i=F.useRef();i.current==null&&(i.current=YA({window:s,v5Compat:!0}));let o=i.current,[a,l]=F.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=F.useCallback(m=>{c&&kv?kv(()=>l(m)):l(m)},[l,c]);return F.useLayoutEffect(()=>o.listen(d),[o,d]),F.useEffect(()=>U2(r),[r]),F.createElement(B2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Y2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,il=F.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:m}=e,g=G2(e,q2),{basename:y}=F.useContext(si),w,x=!1;if(typeof c=="string"&&Q2.test(c)&&(w=c,Y2))try{let T=new URL(window.location.href),N=c.startsWith("//")?new URL(T.protocol+c):new URL(c),L=_g(N.pathname,y);N.origin===T.origin&&L!=null?c=L+N.search+N.hash:x=!0}catch{}let _=T2(c,{relative:s}),v=X2(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:m});function E(T){r&&r(T),T.defaultPrevented||v(T)}return F.createElement("a",Vp({},g,{href:w||_,onClick:x||i?r:E,ref:n,target:l}))});var Cv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Cv||(Cv={}));var Av;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Av||(Av={}));function X2(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=vs(),c=Hi(),d=fT(t,{relative:o});return F.useCallback(m=>{if($2(m,n)){m.preventDefault();let g=r!==void 0?r:pd(c)===pd(d);l(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}const Ho=({className:t="w-10 h-10",variant:e="dark"})=>{const n=e==="dark"?"#0f172a":"#ffffff",r=e==="dark"?"#ffffff":"#0f172a";return u.jsxs("svg",{viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[u.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",fill:n}),u.jsx("text",{x:"50%",y:"235",dominantBaseline:"middle",textAnchor:"middle",fill:r,style:{fontSize:"160px",fontWeight:"900",fontFamily:"'Plus Jakarta Sans', sans-serif",letterSpacing:"-2px",fontStyle:"normal"},children:"IRA"}),u.jsx("text",{x:"50%",y:"340",dominantBaseline:"middle",textAnchor:"middle",fill:r,textLength:"280",lengthAdjust:"spacingAndGlyphs",style:{fontSize:"32px",fontWeight:"800",fontFamily:"'Plus Jakarta Sans', sans-serif",textTransform:"uppercase",letterSpacing:"2px",opacity:.9,fontStyle:"normal"},children:"irfan rizki aditri"}),e==="light"&&u.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",stroke:"rgba(0,0,0,0.05)",strokeWidth:"2"})]})},Z2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}),u.jsx("path",{d:"M22 21H7"}),u.jsx("path",{d:"m5 11 9 9"})]}),Nv=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),u.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),u.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"})]}),eN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4Z"})}),Pl=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"17 8 12 3 7 8"}),u.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),yT=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"7 10 12 15 17 10"}),u.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),us=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m15 18-6-6 6-6"})}),vr=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m6 9 6 6 6-6"})}),$o=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M5 12h14"}),u.jsx("path",{d:"m12 5 7 7-7 7"})]}),vT=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"12",x2:"12",y1:"19",y2:"5"}),u.jsx("polyline",{points:"5 12 12 5 19 12"})]}),xT=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),u.jsx("polyline",{points:"19 12 12 19 5 12"})]}),Up=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),tN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m9 7-5 5 5 5"}),u.jsx("path",{d:"m15 7 5 5-5 5"})]}),ih=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),u.jsx("path",{d:"M3 3v5h5"}),u.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),u.jsx("path",{d:"M16 21h5v-5"})]}),Ql=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),u.jsx("path",{d:"M12 9v4"}),u.jsx("path",{d:"M12 17h.01"})]}),wT=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),u.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),u.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]}),md=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),u.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1 4-10z"})]}),Rv=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-6v-4h4v4h-4z"}),u.jsx("path",{d:"M12 12.5a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 1 0v5a.5.5 0 0 1-.5.5z"}),u.jsx("path",{d:"M12 2a10 10 0 0 1 7.07 17.07l-1.41-1.41A8 8 0 1 0 5.34 4.34l1.41 1.41A10 10 0 0 1 12 2z"}),u.jsx("text",{x:"50%",y:"55%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"14",fontWeight:"bold",children:"G"})]}),Pv=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),_T=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),u.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),cs=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("polyline",{points:"20 6 9 17 4 12"})}),nN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"1"}),u.jsx("circle",{cx:"12",cy:"5",r:"1"}),u.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),Lr=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),rN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),u.jsx("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),u.jsx("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),u.jsx("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),u.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]}),Op=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),u.jsx("path",{d:"m15 5 4 4"})]}),Ig=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),Ml=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m21 2-2 2m-7.6 7.6a6 6 0 1 1-8.4-8.4 6 6 0 0 1 8.4 8.4Zm0 0 5.7 5.7a2 2 0 0 1 0 2.8l-2.8 2.8"})}),Mv=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),u.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),sN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"})}),iN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M12 16v-4"}),u.jsx("path",{d:"M12 8h.01"})]}),oN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12 2v2"}),u.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),u.jsx("path",{d:"M20 12h2"}),u.jsx("path",{d:"m19.07 4.93-1.41 1.41"}),u.jsx("path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128"}),u.jsx("path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"})]}),aN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),u.jsx("line",{x1:"4",x2:"4",y1:"22",y2:"15"})]}),bT=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:u.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),gd=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"}),u.jsx("path",{d:"m9 12 2 2 4-4"})]}),lN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:u.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),uN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M9 18V5l12-2v13"}),u.jsx("circle",{cx:"6",cy:"18",r:"3"}),u.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),ET=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),u.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),TT=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),u.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),cN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"6",cy:"6",r:"3"}),u.jsx("circle",{cx:"6",cy:"18",r:"3"}),u.jsx("line",{x1:"20",x2:"8.12",y1:"4",y2:"15.88"}),u.jsx("line",{x1:"14.47",x2:"20",y1:"14.48",y2:"20"}),u.jsx("line",{x1:"8.12",x2:"12",y1:"8.12",y2:"12"})]}),dN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),u.jsx("line",{x1:"3",x2:"21",y1:"9",y2:"9"}),u.jsx("line",{x1:"9",x2:"9",y1:"21",y2:"9"})]}),hN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),u.jsx("path",{d:"M3 3v5h5"})]}),fN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("polyline",{points:"16 3 21 3 21 8"}),u.jsx("line",{x1:"4",x2:"21",y1:"20",y2:"3"}),u.jsx("polyline",{points:"21 16 21 21 16 21"}),u.jsx("line",{x1:"15",x2:"21",y1:"15",y2:"21"}),u.jsx("line",{x1:"4",x2:"9",y1:"4",y2:"9"})]}),pN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"13",height:"13",x:"9",y:"9",rx:"2",ry:"2"}),u.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),mN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("circle",{cx:"12",cy:"12",r:"10"})}),gN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),yN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"})}),vN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m12 2 3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),xN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),wN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M12 2a10 10 0 0 1 0 20z",fill:"currentColor",fillOpacity:"0.3"})]}),_N=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M6 2v14a2 2 0 0 0 2 2h14"}),u.jsx("path",{d:"M18 22V8a2 2 0 0 0-2-2H2"})]}),bN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M3 7v6h6"}),u.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]}),EN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5"}),u.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),u.jsx("line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5"})]}),TN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),u.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]}),IT=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M8 14.5c2.5-1 5.5-1 8 0"}),u.jsx("path",{d:"M6.5 11.5c3.5-1.5 7.5-1.5 11 0"}),u.jsx("path",{d:"M5 8.5c4.5-2 9.5-2 14 0"})]}),IN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),u.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]});var Dv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},SN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},kT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(g=64)),r.push(n[d],n[m],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ST(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||m==null)throw new kN;const g=i<<2|a>>4;if(r.push(g),c!==64){const y=a<<4&240|c>>2;if(r.push(y),m!==64){const w=c<<6&192|m;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CN=function(t){const e=ST(t);return kT.encodeByteArray(e,!0)},yd=function(t){return CN(t).replace(/\./g,"")},CT=function(t){try{return kT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=()=>AN().__FIREBASE_DEFAULTS__,RN=()=>{if(typeof process>"u"||typeof Dv>"u")return;const t=Dv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&CT(t[1]);return e&&JSON.parse(e)},oh=()=>{try{return NN()||RN()||PN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AT=t=>{var e,n;return(n=(e=oh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},MN=t=>{const e=AT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},NT=()=>{var t;return(t=oh())===null||t===void 0?void 0:t.config},RT=t=>{var e;return(e=oh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yd(JSON.stringify(n)),yd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function FN(){var t;const e=(t=oh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ON(){const t=gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BN(){return!FN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MT(){try{return typeof indexedDB=="object"}catch{return!1}}function DT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function zN(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="FirebaseError";class Ir extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GN,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$i.prototype.create)}}class $i{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?HN(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ir(s,a,r)}}function HN(t,e){return t.replace($N,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const $N=/\{\$([^}]+)}/g;function qN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Dl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Lv(i)&&Lv(o)){if(!Dl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Lv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function WN(t,e){const n=new KN(t,e);return n.subscribe.bind(n)}class KN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=bf),s.error===void 0&&(s.error=bf),s.complete===void 0&&(s.complete=bf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=1e3,QN=2,XN=4*60*60*1e3,ZN=.5;function jv(t,e=YN,n=QN){const r=e*Math.pow(n,t),s=Math.round(ZN*r*(Math.random()-.5)*2);return Math.min(XN,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class Er{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new DN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nR(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tR(t){return t===gi?void 0:t}function nR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const sR={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},iR=Ke.INFO,oR={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},aR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=oR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ah{constructor(e){this.name=e,this._logLevel=iR,this._logHandler=aR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const lR=(t,e)=>e.some(n=>t instanceof n);let Fv,Vv;function uR(){return Fv||(Fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cR(){return Vv||(Vv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LT=new WeakMap,Bp=new WeakMap,jT=new WeakMap,Ef=new WeakMap,Sg=new WeakMap;function dR(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ws(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&LT.set(n,t)}).catch(()=>{}),Sg.set(e,t),e}function hR(t){if(Bp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Bp.set(t,e)}let zp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ws(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fR(t){zp=t(zp)}function pR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Tf(this),e,...n);return jT.set(r,e.sort?e.sort():[e]),Ws(r)}:cR().includes(t)?function(...e){return t.apply(Tf(this),e),Ws(LT.get(this))}:function(...e){return Ws(t.apply(Tf(this),e))}}function mR(t){return typeof t=="function"?pR(t):(t instanceof IDBTransaction&&hR(t),lR(t,uR())?new Proxy(t,zp):t)}function Ws(t){if(t instanceof IDBRequest)return dR(t);if(Ef.has(t))return Ef.get(t);const e=mR(t);return e!==t&&(Ef.set(t,e),Sg.set(e,t)),e}const Tf=t=>Sg.get(t);function FT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ws(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ws(o.result),l.oldVersion,l.newVersion,Ws(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const gR=["get","getKey","getAll","getAllKeys","count"],yR=["put","add","delete","clear"],If=new Map;function Uv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(If.get(e))return If.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=yR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||gR.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return If.set(e,i),i}fR(t=>({...t,get:(e,n,r)=>Uv(e,n)||t.get(e,n,r),has:(e,n)=>!!Uv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gp="@firebase/app",Ov="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new ah("@firebase/app"),wR="@firebase/app-compat",_R="@firebase/analytics-compat",bR="@firebase/analytics",ER="@firebase/app-check-compat",TR="@firebase/app-check",IR="@firebase/auth",SR="@firebase/auth-compat",kR="@firebase/database",CR="@firebase/data-connect",AR="@firebase/database-compat",NR="@firebase/functions",RR="@firebase/functions-compat",PR="@firebase/installations",MR="@firebase/installations-compat",DR="@firebase/messaging",LR="@firebase/messaging-compat",jR="@firebase/performance",FR="@firebase/performance-compat",VR="@firebase/remote-config",UR="@firebase/remote-config-compat",OR="@firebase/storage",BR="@firebase/storage-compat",zR="@firebase/firestore",GR="@firebase/vertexai-preview",HR="@firebase/firestore-compat",$R="firebase",qR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="[DEFAULT]",WR={[Gp]:"fire-core",[wR]:"fire-core-compat",[bR]:"fire-analytics",[_R]:"fire-analytics-compat",[TR]:"fire-app-check",[ER]:"fire-app-check-compat",[IR]:"fire-auth",[SR]:"fire-auth-compat",[kR]:"fire-rtdb",[CR]:"fire-data-connect",[AR]:"fire-rtdb-compat",[NR]:"fire-fn",[RR]:"fire-fn-compat",[PR]:"fire-iid",[MR]:"fire-iid-compat",[DR]:"fire-fcm",[LR]:"fire-fcm-compat",[jR]:"fire-perf",[FR]:"fire-perf-compat",[VR]:"fire-rc",[UR]:"fire-rc-compat",[OR]:"fire-gcs",[BR]:"fire-gcs-compat",[zR]:"fire-fst",[HR]:"fire-fst-compat",[GR]:"fire-vertex","fire-js":"fire-js",[$R]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new Map,KR=new Map,$p=new Map;function Bv(t,e){try{t.container.addComponent(e)}catch(n){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Or(t){const e=t.name;if($p.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;$p.set(e,t);for(const n of vd.values())Bv(n,t);for(const n of KR.values())Bv(n,t);return!0}function qi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function es(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new $i("app","Firebase",JR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=qR;function VT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ks.create("bad-app-name",{appName:String(s)});if(n||(n=NT()),!n)throw Ks.create("no-options");const i=vd.get(s);if(i){if(Dl(n,i.options)&&Dl(r,i.config))return i;throw Ks.create("duplicate-app",{appName:s})}const o=new rR(s);for(const l of $p.values())o.addComponent(l);const a=new YR(n,r,o);return vd.set(s,a),a}function kg(t=Hp){const e=vd.get(t);if(!e&&t===Hp&&NT())return VT();if(!e)throw Ks.create("no-app",{appName:t});return e}function er(t,e,n){var r;let s=(r=WR[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(a.join(" "));return}Or(new Er(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="firebase-heartbeat-database",XR=1,Ll="firebase-heartbeat-store";let Sf=null;function UT(){return Sf||(Sf=FT(QR,XR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ll)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ks.create("idb-open",{originalErrorMessage:t.message})})),Sf}async function ZR(t){try{const n=(await UT()).transaction(Ll),r=await n.objectStore(Ll).get(OT(t));return await n.done,r}catch(e){if(e instanceof Ir)ds.warn(e.message);else{const n=Ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ds.warn(n.message)}}}async function zv(t,e){try{const r=(await UT()).transaction(Ll,"readwrite");await r.objectStore(Ll).put(e,OT(t)),await r.done}catch(n){if(n instanceof Ir)ds.warn(n.message);else{const r=Ks.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ds.warn(r.message)}}}function OT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=1024,tP=30*24*60*60*1e3;class nP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Gv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=tP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ds.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gv(),{heartbeatsToSend:r,unsentEntries:s}=rP(this._heartbeatsCache.heartbeats),i=yd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ds.warn(n),""}}}function Gv(){return new Date().toISOString().substring(0,10)}function rP(t,e=eP){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Hv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Hv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MT()?DT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Hv(t){return yd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t){Or(new Er("platform-logger",e=>new vR(e),"PRIVATE")),Or(new Er("heartbeat",e=>new nP(e),"PRIVATE")),er(Gp,Ov,t),er(Gp,Ov,"esm2017"),er("fire-js","")}iP("");var oP="firebase",aP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er(oP,aP,"app");const BT="@firebase/installations",Cg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=1e4,GT=`w:${Cg}`,HT="FIS_v2",lP="https://firebaseinstallations.googleapis.com/v1",uP=60*60*1e3,cP="installations",dP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Mi=new $i(cP,dP,hP);function $T(t){return t instanceof Ir&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT({projectId:t}){return`${lP}/projects/${t}/installations`}function WT(t){return{token:t.token,requestStatus:2,expiresIn:pP(t.expiresIn),creationTime:Date.now()}}async function KT(t,e){const r=(await e.json()).error;return Mi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function JT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function fP(t,{refreshToken:e}){const n=JT(t);return n.append("Authorization",mP(e)),n}async function YT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function pP(t){return Number(t.replace("s","000"))}function mP(t){return`${HT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=qT(t),s=JT(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:HT,appId:t.appId,sdkVersion:GT},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await YT(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:WT(c.authToken)}}else throw await KT("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=/^[cdef][\w-]{21}$/,qp="";function xP(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=wP(t);return vP.test(n)?n:qp}catch{return qp}}function wP(t){return yP(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=new Map;function ZT(t,e){const n=lh(t);eI(n,e),_P(n,e)}function eI(t,e){const n=XT.get(t);if(n)for(const r of n)r(e)}function _P(t,e){const n=bP();n&&n.postMessage({key:t,fid:e}),EP()}let _i=null;function bP(){return!_i&&"BroadcastChannel"in self&&(_i=new BroadcastChannel("[Firebase] FID Change"),_i.onmessage=t=>{eI(t.data.key,t.data.fid)}),_i}function EP(){XT.size===0&&_i&&(_i.close(),_i=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="firebase-installations-database",IP=1,Di="firebase-installations-store";let kf=null;function Ag(){return kf||(kf=FT(TP,IP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Di)}}})),kf}async function xd(t,e){const n=lh(t),s=(await Ag()).transaction(Di,"readwrite"),i=s.objectStore(Di),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&ZT(t,e.fid),e}async function tI(t){const e=lh(t),r=(await Ag()).transaction(Di,"readwrite");await r.objectStore(Di).delete(e),await r.done}async function uh(t,e){const n=lh(t),s=(await Ag()).transaction(Di,"readwrite"),i=s.objectStore(Di),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&ZT(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ng(t){let e;const n=await uh(t.appConfig,r=>{const s=SP(r),i=kP(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===qp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function SP(t){const e=t||{fid:xP(),registrationStatus:0};return nI(e)}function kP(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Mi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=CP(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:AP(t)}:{installationEntry:e}}async function CP(t,e){try{const n=await gP(t,e);return xd(t.appConfig,n)}catch(n){throw $T(n)&&n.customData.serverCode===409?await tI(t.appConfig):await xd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function AP(t){let e=await $v(t.appConfig);for(;e.registrationStatus===1;)await QT(100),e=await $v(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Ng(t);return r||n}return e}function $v(t){return uh(t,e=>{if(!e)throw Mi.create("installation-not-found");return nI(e)})}function nI(t){return NP(t)?{fid:t.fid,registrationStatus:0}:t}function NP(t){return t.registrationStatus===1&&t.registrationTime+zT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RP({appConfig:t,heartbeatServiceProvider:e},n){const r=PP(t,n),s=fP(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:GT,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await YT(()=>fetch(r,a));if(l.ok){const c=await l.json();return WT(c)}else throw await KT("Generate Auth Token",l)}function PP(t,{fid:e}){return`${qT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rg(t,e=!1){let n;const r=await uh(t.appConfig,i=>{if(!rI(i))throw Mi.create("not-registered");const o=i.authToken;if(!e&&LP(o))return i;if(o.requestStatus===1)return n=MP(t,e),i;{if(!navigator.onLine)throw Mi.create("app-offline");const a=FP(i);return n=DP(t,a),a}});return n?await n:r.authToken}async function MP(t,e){let n=await qv(t.appConfig);for(;n.authToken.requestStatus===1;)await QT(100),n=await qv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Rg(t,e):r}function qv(t){return uh(t,e=>{if(!rI(e))throw Mi.create("not-registered");const n=e.authToken;return VP(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function DP(t,e){try{const n=await RP(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await xd(t.appConfig,r),n}catch(n){if($T(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await tI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await xd(t.appConfig,r)}throw n}}function rI(t){return t!==void 0&&t.registrationStatus===2}function LP(t){return t.requestStatus===2&&!jP(t)}function jP(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+uP}function FP(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function VP(t){return t.requestStatus===1&&t.requestTime+zT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(t){const e=t,{installationEntry:n,registrationPromise:r}=await Ng(e);return r?r.catch(console.error):Rg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OP(t,e=!1){const n=t;return await BP(n),(await Rg(n,e)).token}async function BP(t){const{registrationPromise:e}=await Ng(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t){if(!t||!t.options)throw Cf("App Configuration");if(!t.name)throw Cf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Cf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Cf(t){return Mi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="installations",GP="installations-internal",HP=t=>{const e=t.getProvider("app").getImmediate(),n=zP(e),r=qi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},$P=t=>{const e=t.getProvider("app").getImmediate(),n=qi(e,sI).getImmediate();return{getId:()=>UP(n),getToken:s=>OP(n,s)}};function qP(){Or(new Er(sI,HP,"PUBLIC")),Or(new Er(GP,$P,"PRIVATE"))}qP();er(BT,Cg);er(BT,Cg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="analytics",WP="firebase_id",KP="origin",JP=60*1e3,YP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new ah("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Hn=new $i("analytics","Analytics",QP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t){if(!t.startsWith(Pg)){const e=Hn.create("invalid-gtag-resource",{gtagURL:t});return jn.warn(e.message),""}return t}function iI(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function ZP(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function eM(t,e){const n=ZP("firebase-js-sdk-policy",{createScriptURL:XP}),r=document.createElement("script"),s=`${Pg}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function tM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function nM(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await iI(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){jn.error(a)}t("config",s,i)}async function rM(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await iI(n);for(const l of o){const c=a.find(m=>m.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){jn.error(i)}}function sM(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await rM(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await nM(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){jn.error(a)}}return s}function iM(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=sM(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function oM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Pg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=30,lM=1e3;class uM{constructor(e={},n=lM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const oI=new uM;function cM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function dM(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:cM(r)},i=YP.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Hn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function hM(t,e=oI,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Hn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Hn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new mM;return setTimeout(async()=>{a.abort()},JP),aI({appId:r,apiKey:s,measurementId:i},o,a,e)}async function aI(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=oI){var i;const{appId:o,measurementId:a}=t;try{await fM(r,e)}catch(l){if(a)return jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await dM(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!pM(c)){if(s.deleteThrottleMetadata(o),a)return jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?jv(n,s.intervalMillis,aM):jv(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,m),jn.debug(`Calling attemptFetch again in ${d} millis`),aI(t,m,r,s)}}function fM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Hn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function pM(t){if(!(t instanceof Ir)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class mM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function gM(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM(){if(MT())try{await DT()}catch(t){return jn.warn(Hn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return jn.warn(Hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function vM(t,e,n,r,s,i,o){var a;const l=hM(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&jn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>jn.error(y)),e.push(l);const c=yM().then(y=>{if(y)return r.getId()}),[d,m]=await Promise.all([l,c]);oM(i)||eM(i,d.measurementId),s("js",new Date);const g=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return g[KP]="firebase",g.update=!0,m!=null&&(g[WP]=m),s("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.app=e}_delete(){return delete ol[this.app.options.appId],Promise.resolve()}}let ol={},Wv=[];const Kv={};let Af="dataLayer",wM="gtag",Jv,lI,Yv=!1;function _M(){const t=[];if(PT()&&t.push("This is a browser extension environment."),zN()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Hn.create("invalid-analytics-context",{errorInfo:e});jn.warn(n.message)}}function bM(t,e,n){_M();const r=t.options.appId;if(!r)throw Hn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Hn.create("no-api-key");if(ol[r]!=null)throw Hn.create("already-exists",{id:r});if(!Yv){tM(Af);const{wrappedGtag:i,gtagCore:o}=iM(ol,Wv,Kv,Af,wM);lI=i,Jv=o,Yv=!0}return ol[r]=vM(t,Wv,Kv,e,Jv,Af,n),new xM(t)}function EM(t=kg()){t=Lt(t);const e=qi(t,wd);return e.isInitialized()?e.getImmediate():TM(t)}function TM(t,e={}){const n=qi(t,wd);if(n.isInitialized()){const s=n.getImmediate();if(Dl(e,n.getOptions()))return s;throw Hn.create("already-initialized")}return n.initialize({options:e})}function IM(t,e,n,r){t=Lt(t),gM(lI,ol[t.app.options.appId],e,n,r).catch(s=>jn.error(s))}const Qv="@firebase/analytics",Xv="0.10.8";function SM(){Or(new Er(wd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return bM(r,s,n)},"PUBLIC")),Or(new Er("analytics-internal",t,"PRIVATE")),er(Qv,Xv),er(Qv,Xv,"esm2017");function t(e){try{const n=e.getProvider(wd).getImmediate();return{logEvent:(r,s,i)=>IM(n,r,s,i)}}catch(n){throw Hn.create("interop-component-reg-failed",{reason:n})}}}SM();var Zv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Si,uI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,R){function A(){}A.prototype=R.prototype,k.D=R.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(M,V,P){for(var D=Array(arguments.length-2),I=2;I<arguments.length;I++)D[I-2]=arguments[I];return R.prototype[V].apply(M,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,R,A){A||(A=0);var M=Array(16);if(typeof R=="string")for(var V=0;16>V;++V)M[V]=R.charCodeAt(A++)|R.charCodeAt(A++)<<8|R.charCodeAt(A++)<<16|R.charCodeAt(A++)<<24;else for(V=0;16>V;++V)M[V]=R[A++]|R[A++]<<8|R[A++]<<16|R[A++]<<24;R=k.g[0],A=k.g[1],V=k.g[2];var P=k.g[3],D=R+(P^A&(V^P))+M[0]+3614090360&4294967295;R=A+(D<<7&4294967295|D>>>25),D=P+(V^R&(A^V))+M[1]+3905402710&4294967295,P=R+(D<<12&4294967295|D>>>20),D=V+(A^P&(R^A))+M[2]+606105819&4294967295,V=P+(D<<17&4294967295|D>>>15),D=A+(R^V&(P^R))+M[3]+3250441966&4294967295,A=V+(D<<22&4294967295|D>>>10),D=R+(P^A&(V^P))+M[4]+4118548399&4294967295,R=A+(D<<7&4294967295|D>>>25),D=P+(V^R&(A^V))+M[5]+1200080426&4294967295,P=R+(D<<12&4294967295|D>>>20),D=V+(A^P&(R^A))+M[6]+2821735955&4294967295,V=P+(D<<17&4294967295|D>>>15),D=A+(R^V&(P^R))+M[7]+4249261313&4294967295,A=V+(D<<22&4294967295|D>>>10),D=R+(P^A&(V^P))+M[8]+1770035416&4294967295,R=A+(D<<7&4294967295|D>>>25),D=P+(V^R&(A^V))+M[9]+2336552879&4294967295,P=R+(D<<12&4294967295|D>>>20),D=V+(A^P&(R^A))+M[10]+4294925233&4294967295,V=P+(D<<17&4294967295|D>>>15),D=A+(R^V&(P^R))+M[11]+2304563134&4294967295,A=V+(D<<22&4294967295|D>>>10),D=R+(P^A&(V^P))+M[12]+1804603682&4294967295,R=A+(D<<7&4294967295|D>>>25),D=P+(V^R&(A^V))+M[13]+4254626195&4294967295,P=R+(D<<12&4294967295|D>>>20),D=V+(A^P&(R^A))+M[14]+2792965006&4294967295,V=P+(D<<17&4294967295|D>>>15),D=A+(R^V&(P^R))+M[15]+1236535329&4294967295,A=V+(D<<22&4294967295|D>>>10),D=R+(V^P&(A^V))+M[1]+4129170786&4294967295,R=A+(D<<5&4294967295|D>>>27),D=P+(A^V&(R^A))+M[6]+3225465664&4294967295,P=R+(D<<9&4294967295|D>>>23),D=V+(R^A&(P^R))+M[11]+643717713&4294967295,V=P+(D<<14&4294967295|D>>>18),D=A+(P^R&(V^P))+M[0]+3921069994&4294967295,A=V+(D<<20&4294967295|D>>>12),D=R+(V^P&(A^V))+M[5]+3593408605&4294967295,R=A+(D<<5&4294967295|D>>>27),D=P+(A^V&(R^A))+M[10]+38016083&4294967295,P=R+(D<<9&4294967295|D>>>23),D=V+(R^A&(P^R))+M[15]+3634488961&4294967295,V=P+(D<<14&4294967295|D>>>18),D=A+(P^R&(V^P))+M[4]+3889429448&4294967295,A=V+(D<<20&4294967295|D>>>12),D=R+(V^P&(A^V))+M[9]+568446438&4294967295,R=A+(D<<5&4294967295|D>>>27),D=P+(A^V&(R^A))+M[14]+3275163606&4294967295,P=R+(D<<9&4294967295|D>>>23),D=V+(R^A&(P^R))+M[3]+4107603335&4294967295,V=P+(D<<14&4294967295|D>>>18),D=A+(P^R&(V^P))+M[8]+1163531501&4294967295,A=V+(D<<20&4294967295|D>>>12),D=R+(V^P&(A^V))+M[13]+2850285829&4294967295,R=A+(D<<5&4294967295|D>>>27),D=P+(A^V&(R^A))+M[2]+4243563512&4294967295,P=R+(D<<9&4294967295|D>>>23),D=V+(R^A&(P^R))+M[7]+1735328473&4294967295,V=P+(D<<14&4294967295|D>>>18),D=A+(P^R&(V^P))+M[12]+2368359562&4294967295,A=V+(D<<20&4294967295|D>>>12),D=R+(A^V^P)+M[5]+4294588738&4294967295,R=A+(D<<4&4294967295|D>>>28),D=P+(R^A^V)+M[8]+2272392833&4294967295,P=R+(D<<11&4294967295|D>>>21),D=V+(P^R^A)+M[11]+1839030562&4294967295,V=P+(D<<16&4294967295|D>>>16),D=A+(V^P^R)+M[14]+4259657740&4294967295,A=V+(D<<23&4294967295|D>>>9),D=R+(A^V^P)+M[1]+2763975236&4294967295,R=A+(D<<4&4294967295|D>>>28),D=P+(R^A^V)+M[4]+1272893353&4294967295,P=R+(D<<11&4294967295|D>>>21),D=V+(P^R^A)+M[7]+4139469664&4294967295,V=P+(D<<16&4294967295|D>>>16),D=A+(V^P^R)+M[10]+3200236656&4294967295,A=V+(D<<23&4294967295|D>>>9),D=R+(A^V^P)+M[13]+681279174&4294967295,R=A+(D<<4&4294967295|D>>>28),D=P+(R^A^V)+M[0]+3936430074&4294967295,P=R+(D<<11&4294967295|D>>>21),D=V+(P^R^A)+M[3]+3572445317&4294967295,V=P+(D<<16&4294967295|D>>>16),D=A+(V^P^R)+M[6]+76029189&4294967295,A=V+(D<<23&4294967295|D>>>9),D=R+(A^V^P)+M[9]+3654602809&4294967295,R=A+(D<<4&4294967295|D>>>28),D=P+(R^A^V)+M[12]+3873151461&4294967295,P=R+(D<<11&4294967295|D>>>21),D=V+(P^R^A)+M[15]+530742520&4294967295,V=P+(D<<16&4294967295|D>>>16),D=A+(V^P^R)+M[2]+3299628645&4294967295,A=V+(D<<23&4294967295|D>>>9),D=R+(V^(A|~P))+M[0]+4096336452&4294967295,R=A+(D<<6&4294967295|D>>>26),D=P+(A^(R|~V))+M[7]+1126891415&4294967295,P=R+(D<<10&4294967295|D>>>22),D=V+(R^(P|~A))+M[14]+2878612391&4294967295,V=P+(D<<15&4294967295|D>>>17),D=A+(P^(V|~R))+M[5]+4237533241&4294967295,A=V+(D<<21&4294967295|D>>>11),D=R+(V^(A|~P))+M[12]+1700485571&4294967295,R=A+(D<<6&4294967295|D>>>26),D=P+(A^(R|~V))+M[3]+2399980690&4294967295,P=R+(D<<10&4294967295|D>>>22),D=V+(R^(P|~A))+M[10]+4293915773&4294967295,V=P+(D<<15&4294967295|D>>>17),D=A+(P^(V|~R))+M[1]+2240044497&4294967295,A=V+(D<<21&4294967295|D>>>11),D=R+(V^(A|~P))+M[8]+1873313359&4294967295,R=A+(D<<6&4294967295|D>>>26),D=P+(A^(R|~V))+M[15]+4264355552&4294967295,P=R+(D<<10&4294967295|D>>>22),D=V+(R^(P|~A))+M[6]+2734768916&4294967295,V=P+(D<<15&4294967295|D>>>17),D=A+(P^(V|~R))+M[13]+1309151649&4294967295,A=V+(D<<21&4294967295|D>>>11),D=R+(V^(A|~P))+M[4]+4149444226&4294967295,R=A+(D<<6&4294967295|D>>>26),D=P+(A^(R|~V))+M[11]+3174756917&4294967295,P=R+(D<<10&4294967295|D>>>22),D=V+(R^(P|~A))+M[2]+718787259&4294967295,V=P+(D<<15&4294967295|D>>>17),D=A+(P^(V|~R))+M[9]+3951481745&4294967295,k.g[0]=k.g[0]+R&4294967295,k.g[1]=k.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+V&4294967295,k.g[3]=k.g[3]+P&4294967295}r.prototype.u=function(k,R){R===void 0&&(R=k.length);for(var A=R-this.blockSize,M=this.B,V=this.h,P=0;P<R;){if(V==0)for(;P<=A;)s(this,k,P),P+=this.blockSize;if(typeof k=="string"){for(;P<R;)if(M[V++]=k.charCodeAt(P++),V==this.blockSize){s(this,M),V=0;break}}else for(;P<R;)if(M[V++]=k[P++],V==this.blockSize){s(this,M),V=0;break}}this.h=V,this.o+=R},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var R=1;R<k.length-8;++R)k[R]=0;var A=8*this.o;for(R=k.length-8;R<k.length;++R)k[R]=A&255,A/=256;for(this.u(k),k=Array(16),R=A=0;4>R;++R)for(var M=0;32>M;M+=8)k[A++]=this.g[R]>>>M&255;return k};function i(k,R){var A=a;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=R(k)}function o(k,R){this.h=R;for(var A=[],M=!0,V=k.length-1;0<=V;V--){var P=k[V]|0;M&&P==R||(A[V]=P,M=!1)}this.g=A}var a={};function l(k){return-128<=k&&128>k?i(k,function(R){return new o([R|0],0>R?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return m;if(0>k)return _(c(-k));for(var R=[],A=1,M=0;k>=A;M++)R[M]=k/A|0,A*=4294967296;return new o(R,0)}function d(k,R){if(k.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(k.charAt(0)=="-")return _(d(k.substring(1),R));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(R,8)),M=m,V=0;V<k.length;V+=8){var P=Math.min(8,k.length-V),D=parseInt(k.substring(V,V+P),R);8>P?(P=c(Math.pow(R,P)),M=M.j(P).add(c(D))):(M=M.j(A),M=M.add(c(D)))}return M}var m=l(0),g=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-_(this).m();for(var k=0,R=1,A=0;A<this.g.length;A++){var M=this.i(A);k+=(0<=M?M:4294967296+M)*R,R*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(w(this))return"0";if(x(this))return"-"+_(this).toString(k);for(var R=c(Math.pow(k,6)),A=this,M="";;){var V=N(A,R).g;A=v(A,V.j(R));var P=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=V,w(A))return P+M;for(;6>P.length;)P="0"+P;M=P+M}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function w(k){if(k.h!=0)return!1;for(var R=0;R<k.g.length;R++)if(k.g[R]!=0)return!1;return!0}function x(k){return k.h==-1}t.l=function(k){return k=v(this,k),x(k)?-1:w(k)?0:1};function _(k){for(var R=k.g.length,A=[],M=0;M<R;M++)A[M]=~k.g[M];return new o(A,~k.h).add(g)}t.abs=function(){return x(this)?_(this):this},t.add=function(k){for(var R=Math.max(this.g.length,k.g.length),A=[],M=0,V=0;V<=R;V++){var P=M+(this.i(V)&65535)+(k.i(V)&65535),D=(P>>>16)+(this.i(V)>>>16)+(k.i(V)>>>16);M=D>>>16,P&=65535,D&=65535,A[V]=D<<16|P}return new o(A,A[A.length-1]&-2147483648?-1:0)};function v(k,R){return k.add(_(R))}t.j=function(k){if(w(this)||w(k))return m;if(x(this))return x(k)?_(this).j(_(k)):_(_(this).j(k));if(x(k))return _(this.j(_(k)));if(0>this.l(y)&&0>k.l(y))return c(this.m()*k.m());for(var R=this.g.length+k.g.length,A=[],M=0;M<2*R;M++)A[M]=0;for(M=0;M<this.g.length;M++)for(var V=0;V<k.g.length;V++){var P=this.i(M)>>>16,D=this.i(M)&65535,I=k.i(V)>>>16,$=k.i(V)&65535;A[2*M+2*V]+=D*$,E(A,2*M+2*V),A[2*M+2*V+1]+=P*$,E(A,2*M+2*V+1),A[2*M+2*V+1]+=D*I,E(A,2*M+2*V+1),A[2*M+2*V+2]+=P*I,E(A,2*M+2*V+2)}for(M=0;M<R;M++)A[M]=A[2*M+1]<<16|A[2*M];for(M=R;M<2*R;M++)A[M]=0;return new o(A,0)};function E(k,R){for(;(k[R]&65535)!=k[R];)k[R+1]+=k[R]>>>16,k[R]&=65535,R++}function T(k,R){this.g=k,this.h=R}function N(k,R){if(w(R))throw Error("division by zero");if(w(k))return new T(m,m);if(x(k))return R=N(_(k),R),new T(_(R.g),_(R.h));if(x(R))return R=N(k,_(R)),new T(_(R.g),R.h);if(30<k.g.length){if(x(k)||x(R))throw Error("slowDivide_ only works with positive integers.");for(var A=g,M=R;0>=M.l(k);)A=L(A),M=L(M);var V=U(A,1),P=U(M,1);for(M=U(M,2),A=U(A,2);!w(M);){var D=P.add(M);0>=D.l(k)&&(V=V.add(A),P=D),M=U(M,1),A=U(A,1)}return R=v(k,V.j(R)),new T(V,R)}for(V=m;0<=k.l(R);){for(A=Math.max(1,Math.floor(k.m()/R.m())),M=Math.ceil(Math.log(A)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),P=c(A),D=P.j(R);x(D)||0<D.l(k);)A-=M,P=c(A),D=P.j(R);w(P)&&(P=g),V=V.add(P),k=v(k,D)}return new T(V,k)}t.A=function(k){return N(this,k).h},t.and=function(k){for(var R=Math.max(this.g.length,k.g.length),A=[],M=0;M<R;M++)A[M]=this.i(M)&k.i(M);return new o(A,this.h&k.h)},t.or=function(k){for(var R=Math.max(this.g.length,k.g.length),A=[],M=0;M<R;M++)A[M]=this.i(M)|k.i(M);return new o(A,this.h|k.h)},t.xor=function(k){for(var R=Math.max(this.g.length,k.g.length),A=[],M=0;M<R;M++)A[M]=this.i(M)^k.i(M);return new o(A,this.h^k.h)};function L(k){for(var R=k.g.length+1,A=[],M=0;M<R;M++)A[M]=k.i(M)<<1|k.i(M-1)>>>31;return new o(A,k.h)}function U(k,R){var A=R>>5;R%=32;for(var M=k.g.length-A,V=[],P=0;P<M;P++)V[P]=0<R?k.i(P+A)>>>R|k.i(P+A+1)<<32-R:k.i(P+A);return new o(V,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Si=o}).apply(typeof Zv<"u"?Zv:typeof self<"u"?self:typeof window<"u"?window:{});var uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cI,$a,dI,Mc,Wp,hI,fI,pI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,b,S){return f==Array.prototype||f==Object.prototype||(f[b]=S.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof uc=="object"&&uc];for(var b=0;b<f.length;++b){var S=f[b];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(f,b){if(b)e:{var S=r;f=f.split(".");for(var j=0;j<f.length-1;j++){var J=f[j];if(!(J in S))break e;S=S[J]}f=f[f.length-1],j=S[f],b=b(j),b!=j&&b!=null&&e(S,f,{configurable:!0,writable:!0,value:b})}}function i(f,b){f instanceof String&&(f+="");var S=0,j=!1,J={next:function(){if(!j&&S<f.length){var re=S++;return{value:b(re,f[re]),done:!1}}return j=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}s("Array.prototype.values",function(f){return f||function(){return i(this,function(b,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var b=typeof f;return b=b!="object"?b:f?Array.isArray(f)?"array":b:"null",b=="array"||b=="object"&&typeof f.length=="number"}function c(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function d(f,b,S){return f.call.apply(f.bind,arguments)}function m(f,b,S){if(!f)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,j),f.apply(b,J)}}return function(){return f.apply(b,arguments)}}function g(f,b,S){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,g.apply(null,arguments)}function y(f,b){var S=Array.prototype.slice.call(arguments,1);return function(){var j=S.slice();return j.push.apply(j,arguments),f.apply(this,j)}}function w(f,b){function S(){}S.prototype=b.prototype,f.aa=b.prototype,f.prototype=new S,f.prototype.constructor=f,f.Qb=function(j,J,re){for(var ge=Array(arguments.length-2),at=2;at<arguments.length;at++)ge[at-2]=arguments[at];return b.prototype[J].apply(j,ge)}}function x(f){const b=f.length;if(0<b){const S=Array(b);for(let j=0;j<b;j++)S[j]=f[j];return S}return[]}function _(f,b){for(let S=1;S<arguments.length;S++){const j=arguments[S];if(l(j)){const J=f.length||0,re=j.length||0;f.length=J+re;for(let ge=0;ge<re;ge++)f[J+ge]=j[ge]}else f.push(j)}}class v{constructor(b,S){this.i=b,this.j=S,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function E(f){return/^[\s\xa0]*$/.test(f)}function T(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function N(f){return N[" "](f),f}N[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function U(f,b,S){for(const j in f)b.call(S,f[j],j,f)}function k(f,b){for(const S in f)b.call(void 0,f[S],S,f)}function R(f){const b={};for(const S in f)b[S]=f[S];return b}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,b){let S,j;for(let J=1;J<arguments.length;J++){j=arguments[J];for(S in j)f[S]=j[S];for(let re=0;re<A.length;re++)S=A[re],Object.prototype.hasOwnProperty.call(j,S)&&(f[S]=j[S])}}function V(f){var b=1;f=f.split(":");const S=[];for(;0<b&&f.length;)S.push(f.shift()),b--;return f.length&&S.push(f.join(":")),S}function P(f){a.setTimeout(()=>{throw f},0)}function D(){var f=Q;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class I{constructor(){this.h=this.g=null}add(b,S){const j=$.get();j.set(b,S),this.h?this.h.next=j:this.g=j,this.h=j}}var $=new v(()=>new ce,f=>f.reset());class ce{constructor(){this.next=this.g=this.h=null}set(b,S){this.h=b,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let te,ne=!1,Q=new I,ae=()=>{const f=a.Promise.resolve(void 0);te=()=>{f.then(K)}};var K=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(S){P(S)}var b=$;b.j(f),100>b.h&&(b.h++,f.next=b.g,b.g=f)}ne=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const S=()=>{};a.addEventListener("test",S,b),a.removeEventListener("test",S,b)}catch{}return f}();function X(f,b){if(he.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var S=this.type=f.type,j=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget){if(L){e:{try{N(b.nodeName);var J=!0;break e}catch{}J=!1}J||(b=null)}}else S=="mouseover"?b=f.fromElement:S=="mouseout"&&(b=f.toElement);this.relatedTarget=b,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Ie[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&X.aa.h.call(this)}}w(X,he);var Ie={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),ke=0;function je(f,b,S,j,J){this.listener=f,this.proxy=null,this.src=b,this.type=S,this.capture=!!j,this.ha=J,this.key=++ke,this.da=this.fa=!1}function Oe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function He(f){this.src=f,this.g={},this.h=0}He.prototype.add=function(f,b,S,j,J){var re=f.toString();f=this.g[re],f||(f=this.g[re]=[],this.h++);var ge=ze(f,b,j,J);return-1<ge?(b=f[ge],S||(b.fa=!1)):(b=new je(b,this.src,re,!!j,J),b.fa=S,f.push(b)),b};function lt(f,b){var S=b.type;if(S in f.g){var j=f.g[S],J=Array.prototype.indexOf.call(j,b,void 0),re;(re=0<=J)&&Array.prototype.splice.call(j,J,1),re&&(Oe(b),f.g[S].length==0&&(delete f.g[S],f.h--))}}function ze(f,b,S,j){for(var J=0;J<f.length;++J){var re=f[J];if(!re.da&&re.listener==b&&re.capture==!!S&&re.ha==j)return J}return-1}var C="closure_lm_"+(1e6*Math.random()|0),se={};function Z(f,b,S,j,J){if(Array.isArray(b)){for(var re=0;re<b.length;re++)Z(f,b[re],S,j,J);return null}return S=fe(S),f&&f[Be]?f.K(b,S,c(j)?!!j.capture:!1,J):O(f,b,S,!1,j,J)}function O(f,b,S,j,J,re){if(!b)throw Error("Invalid event type");var ge=c(J)?!!J.capture:!!J,at=oe(f);if(at||(f[C]=at=new He(f)),S=at.add(b,S,j,ge,re),S.proxy)return S;if(j=B(),S.proxy=j,j.src=f,j.listener=S,f.addEventListener)ee||(J=ge),J===void 0&&(J=!1),f.addEventListener(b.toString(),j,J);else if(f.attachEvent)f.attachEvent(ue(b.toString()),j);else if(f.addListener&&f.removeListener)f.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return S}function B(){function f(S){return b.call(f.src,f.listener,S)}const b=Y;return f}function q(f,b,S,j,J){if(Array.isArray(b))for(var re=0;re<b.length;re++)q(f,b[re],S,j,J);else j=c(j)?!!j.capture:!!j,S=fe(S),f&&f[Be]?(f=f.i,b=String(b).toString(),b in f.g&&(re=f.g[b],S=ze(re,S,j,J),-1<S&&(Oe(re[S]),Array.prototype.splice.call(re,S,1),re.length==0&&(delete f.g[b],f.h--)))):f&&(f=oe(f))&&(b=f.g[b.toString()],f=-1,b&&(f=ze(b,S,j,J)),(S=-1<f?b[f]:null)&&ie(S))}function ie(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[Be])lt(b.i,f);else{var S=f.type,j=f.proxy;b.removeEventListener?b.removeEventListener(S,j,f.capture):b.detachEvent?b.detachEvent(ue(S),j):b.addListener&&b.removeListener&&b.removeListener(j),(S=oe(b))?(lt(S,f),S.h==0&&(S.src=null,b[C]=null)):Oe(f)}}}function ue(f){return f in se?se[f]:se[f]="on"+f}function Y(f,b){if(f.da)f=!0;else{b=new X(b,this);var S=f.listener,j=f.ha||f.src;f.fa&&ie(f),f=S.call(j,b)}return f}function oe(f){return f=f[C],f instanceof He?f:null}var ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(f){return typeof f=="function"?f:(f[ye]||(f[ye]=function(b){return f.handleEvent(b)}),f[ye])}function xe(){H.call(this),this.i=new He(this),this.M=this,this.F=null}w(xe,H),xe.prototype[Be]=!0,xe.prototype.removeEventListener=function(f,b,S,j){q(this,f,b,S,j)};function Ce(f,b){var S,j=f.F;if(j)for(S=[];j;j=j.F)S.push(j);if(f=f.M,j=b.type||b,typeof b=="string")b=new he(b,f);else if(b instanceof he)b.target=b.target||f;else{var J=b;b=new he(j,f),M(b,J)}if(J=!0,S)for(var re=S.length-1;0<=re;re--){var ge=b.g=S[re];J=Pe(ge,j,!0,b)&&J}if(ge=b.g=f,J=Pe(ge,j,!0,b)&&J,J=Pe(ge,j,!1,b)&&J,S)for(re=0;re<S.length;re++)ge=b.g=S[re],J=Pe(ge,j,!1,b)&&J}xe.prototype.N=function(){if(xe.aa.N.call(this),this.i){var f=this.i,b;for(b in f.g){for(var S=f.g[b],j=0;j<S.length;j++)Oe(S[j]);delete f.g[b],f.h--}}this.F=null},xe.prototype.K=function(f,b,S,j){return this.i.add(String(f),b,!1,S,j)},xe.prototype.L=function(f,b,S,j){return this.i.add(String(f),b,!0,S,j)};function Pe(f,b,S,j){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();for(var J=!0,re=0;re<b.length;++re){var ge=b[re];if(ge&&!ge.da&&ge.capture==S){var at=ge.listener,Wt=ge.ha||ge.src;ge.fa&&lt(f.i,ge),J=at.call(Wt,j)!==!1&&J}}return J&&!j.defaultPrevented}function gt(f,b,S){if(typeof f=="function")S&&(f=g(f,S));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:a.setTimeout(f,b||0)}function tn(f){f.g=gt(()=>{f.g=null,f.i&&(f.i=!1,tn(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class At extends H{constructor(b,S){super(),this.m=b,this.l=S,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:tn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function z(f){H.call(this),this.h=f,this.g={}}w(z,H);var G=[];function me(f){U(f.g,function(b,S){this.g.hasOwnProperty(S)&&ie(b)},f),f.g={}}z.prototype.N=function(){z.aa.N.call(this),me(this)},z.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ve=a.JSON.stringify,Ae=a.JSON.parse,rt=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Re(){}Re.prototype.h=null;function _t(f){return f.h||(f.h=f.i())}function It(){}var Nt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nn(){he.call(this,"d")}w(nn,he);function Rt(){he.call(this,"c")}w(Rt,he);var qt={},ar=null;function Jn(){return ar=ar||new xe}qt.La="serverreachability";function yn(f){he.call(this,qt.La,f)}w(yn,he);function Gr(f){const b=Jn();Ce(b,new yn(b))}qt.STAT_EVENT="statevent";function xu(f,b){he.call(this,qt.STAT_EVENT,f),this.stat=b}w(xu,he);function Ot(f){const b=Jn();Ce(b,new xu(b,f))}qt.Ma="timingevent";function wu(f,b){he.call(this,qt.Ma,f),this.size=b}w(wu,he);function Hr(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},b)}function li(){this.g=!0}li.prototype.xa=function(){this.g=!1};function ya(f,b,S,j,J,re){f.info(function(){if(f.g)if(re)for(var ge="",at=re.split("&"),Wt=0;Wt<at.length;Wt++){var Xe=at[Wt].split("=");if(1<Xe.length){var sn=Xe[0];Xe=Xe[1];var on=sn.split("_");ge=2<=on.length&&on[1]=="type"?ge+(sn+"="+Xe+"&"):ge+(sn+"=redacted&")}}else ge=null;else ge=re;return"XMLHTTP REQ ("+j+") [attempt "+J+"]: "+b+`
`+S+`
`+ge})}function it(f,b,S,j,J,re,ge){f.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+J+"]: "+b+`
`+S+`
`+re+" "+ge})}function bs(f,b,S,j){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+Oh(f,S)+(j?" "+j:"")})}function _u(f,b){f.info(function(){return"TIMEOUT: "+b})}li.prototype.info=function(){};function Oh(f,b){if(!f.g)return b;if(!b)return null;try{var S=JSON.parse(b);if(S){for(f=0;f<S.length;f++)if(Array.isArray(S[f])){var j=S[f];if(!(2>j.length)){var J=j[1];if(Array.isArray(J)&&!(1>J.length)){var re=J[0];if(re!="noop"&&re!="stop"&&re!="close")for(var ge=1;ge<J.length;ge++)J[ge]=""}}}}return ve(S)}catch{return b}}var Yi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},va;function Qi(){}w(Qi,Re),Qi.prototype.g=function(){return new XMLHttpRequest},Qi.prototype.i=function(){return{}},va=new Qi;function kr(f,b,S,j){this.j=f,this.i=b,this.l=S,this.R=j||1,this.U=new z(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Eu}function Eu(){this.i=null,this.g="",this.h=!1}var Tu={},xa={};function wa(f,b,S){f.L=1,f.v=to(lr(b)),f.m=S,f.P=!0,Iu(f,null)}function Iu(f,b){f.F=Date.now(),Cr(f),f.A=lr(f.v);var S=f.A,j=f.R;Array.isArray(j)||(j=[String(j)]),Vn(S.i,"t",j),f.C=0,S=f.j.J,f.h=new Eu,f.g=ly(f.j,S?b:null,!f.m),0<f.O&&(f.M=new At(g(f.Y,f,f.g),f.O)),b=f.U,S=f.g,j=f.ca;var J="readystatechange";Array.isArray(J)||(J&&(G[0]=J.toString()),J=G);for(var re=0;re<J.length;re++){var ge=Z(S,J[re],j||b.handleEvent,!1,b.h||b);if(!ge)break;b.g[ge.key]=ge}b=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,b)):(f.u="GET",f.g.ea(f.A,f.u,null,b)),Gr(),ya(f.i,f.u,f.A,f.l,f.R,f.m)}kr.prototype.ca=function(f){f=f.target;const b=this.M;b&&qr(f)==3?b.j():this.Y(f)},kr.prototype.Y=function(f){try{if(f==this.g)e:{const on=qr(this.g);var b=this.g.Ba();const ro=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||Q0(this.g)))){this.J||on!=4||b==7||(b==8||0>=ro?Gr(3):Gr(2)),Zi(this);var S=this.g.Z();this.X=S;t:if(Su(this)){var j=Q0(this.g);f="";var J=j.length,re=qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fn(this),ui(this);var ge="";break t}this.h.i=new a.TextDecoder}for(b=0;b<J;b++)this.h.h=!0,f+=this.h.i.decode(j[b],{stream:!(re&&b==J-1)});j.length=0,this.h.g+=f,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=S==200,it(this.i,this.u,this.A,this.l,this.R,on,S),this.o){if(this.T&&!this.K){t:{if(this.g){var at,Wt=this.g;if((at=Wt.g?Wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(at)){var Xe=at;break t}}Xe=null}if(S=Xe)bs(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_a(this,S);else{this.o=!1,this.s=3,Ot(12),Fn(this),ui(this);break e}}if(this.P){S=!0;let cr;for(;!this.J&&this.C<ge.length;)if(cr=Bh(this,ge),cr==xa){on==4&&(this.s=4,Ot(14),S=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(cr==Tu){this.s=4,Ot(15),bs(this.i,this.l,ge,"[Invalid Chunk]"),S=!1;break}else bs(this.i,this.l,cr,null),_a(this,cr);if(Su(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||ge.length!=0||this.h.h||(this.s=1,Ot(16),S=!1),this.o=this.o&&S,!S)bs(this.i,this.l,ge,"[Invalid Chunked Response]"),Fn(this),ui(this);else if(0<ge.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),qh(sn),sn.M=!0,Ot(11))}}else bs(this.i,this.l,ge,null),_a(this,ge);on==4&&Fn(this),this.o&&!this.J&&(on==4?sy(this.j,this):(this.o=!1,Cr(this)))}else wk(this.g),S==400&&0<ge.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),Fn(this),ui(this)}}}catch{}finally{}};function Su(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Bh(f,b){var S=f.C,j=b.indexOf(`
`,S);return j==-1?xa:(S=Number(b.substring(S,j)),isNaN(S)?Tu:(j+=1,j+S>b.length?xa:(b=b.slice(j,j+S),f.C=j+S,b)))}kr.prototype.cancel=function(){this.J=!0,Fn(this)};function Cr(f){f.S=Date.now()+f.I,Xi(f,f.I)}function Xi(f,b){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Hr(g(f.ba,f),b)}function Zi(f){f.B&&(a.clearTimeout(f.B),f.B=null)}kr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(_u(this.i,this.A),this.L!=2&&(Gr(),Ot(17)),Fn(this),this.s=2,ui(this)):Xi(this,this.S-f)};function ui(f){f.j.G==0||f.J||sy(f.j,f)}function Fn(f){Zi(f);var b=f.M;b&&typeof b.ma=="function"&&b.ma(),f.M=null,me(f.U),f.g&&(b=f.g,f.g=null,b.abort(),b.ma())}function _a(f,b){try{var S=f.j;if(S.G!=0&&(S.g==f||ba(S.h,f))){if(!f.K&&ba(S.h,f)&&S.G==3){try{var j=S.Da.g.parse(b)}catch{j=null}if(Array.isArray(j)&&j.length==3){var J=j;if(J[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<f.F)Gu(S),Bu(S);else break e;$h(S),Ot(18)}}else S.za=J[1],0<S.za-S.T&&37500>J[2]&&S.F&&S.v==0&&!S.C&&(S.C=Hr(g(S.Za,S),6e3));if(1>=Nu(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else fi(S,11)}else if((f.K||S.g==f)&&Gu(S),!E(b))for(J=S.Da.g.parse(b),b=0;b<J.length;b++){let Xe=J[b];if(S.T=Xe[0],Xe=Xe[1],S.G==2)if(Xe[0]=="c"){S.K=Xe[1],S.ia=Xe[2];const sn=Xe[3];sn!=null&&(S.la=sn,S.j.info("VER="+S.la));const on=Xe[4];on!=null&&(S.Aa=on,S.j.info("SVER="+S.Aa));const ro=Xe[5];ro!=null&&typeof ro=="number"&&0<ro&&(j=1.5*ro,S.L=j,S.j.info("backChannelRequestTimeoutMs_="+j)),j=S;const cr=f.g;if(cr){const $u=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($u){var re=j.h;re.g||$u.indexOf("spdy")==-1&&$u.indexOf("quic")==-1&&$u.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Ea(re,re.h),re.h=null))}if(j.D){const Wh=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Wh&&(j.ya=Wh,ot(j.I,j.D,Wh))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-f.F,S.j.info("Handshake RTT: "+S.R+"ms")),j=S;var ge=f;if(j.qa=ay(j,j.J?j.ia:null,j.W),ge.K){Ru(j.h,ge);var at=ge,Wt=j.L;Wt&&(at.I=Wt),at.B&&(Zi(at),Cr(at)),j.g=ge}else ny(j);0<S.i.length&&zu(S)}else Xe[0]!="stop"&&Xe[0]!="close"||fi(S,7);else S.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?fi(S,7):Hh(S):Xe[0]!="noop"&&S.l&&S.l.ta(Xe),S.v=0)}}Gr(4)}catch{}}var ku=class{constructor(f,b){this.g=f,this.map=b}};function Cu(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Au(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Nu(f){return f.h?1:f.g?f.g.size:0}function ba(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function Ea(f,b){f.g?f.g.add(b):f.h=b}function Ru(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}Cu.prototype.cancel=function(){if(this.i=Pu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Pu(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const S of f.g.values())b=b.concat(S.D);return b}return x(f.i)}function Mu(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var b=[],S=f.length,j=0;j<S;j++)b.push(f[j]);return b}b=[],S=0;for(j in f)b[S++]=f[j];return b}function zh(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var b=[];f=f.length;for(var S=0;S<f;S++)b.push(S);return b}b=[],S=0;for(const j in f)b[S++]=j;return b}}}function Ta(f,b){if(f.forEach&&typeof f.forEach=="function")f.forEach(b,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,b,void 0);else for(var S=zh(f),j=Mu(f),J=j.length,re=0;re<J;re++)b.call(void 0,j[re],S&&S[re],f)}var Du=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lu(f,b){if(f){f=f.split("&");for(var S=0;S<f.length;S++){var j=f[S].indexOf("="),J=null;if(0<=j){var re=f[S].substring(0,j);J=f[S].substring(j+1)}else re=f[S];b(re,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function $r(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof $r){this.h=f.h,ci(this,f.j),this.o=f.o,this.g=f.g,eo(this,f.s),this.l=f.l;var b=f.i,S=new Ye;S.i=b.i,b.g&&(S.g=new Map(b.g),S.h=b.h),Ia(this,S),this.m=f.m}else f&&(b=String(f).match(Du))?(this.h=!1,ci(this,b[1]||"",!0),this.o=di(b[2]||""),this.g=di(b[3]||"",!0),eo(this,b[4]),this.l=di(b[5]||"",!0),Ia(this,b[6]||"",!0),this.m=di(b[7]||"")):(this.h=!1,this.i=new Ye(null,this.h))}$r.prototype.toString=function(){var f=[],b=this.j;b&&f.push(hi(b,Fu,!0),":");var S=this.g;return(S||b=="file")&&(f.push("//"),(b=this.o)&&f.push(hi(b,Fu,!0),"@"),f.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&f.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&f.push("/"),f.push(hi(S,S.charAt(0)=="/"?we:W,!0))),(S=this.i.toString())&&f.push("?",S),(S=this.m)&&f.push("#",hi(S,Ve)),f.join("")};function lr(f){return new $r(f)}function ci(f,b,S){f.j=S?di(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function eo(f,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);f.s=b}else f.s=null}function Ia(f,b,S){b instanceof Ye?(f.i=b,Es(f.i,f.h)):(S||(b=hi(b,Ne)),f.i=new Ye(b,f.h))}function ot(f,b,S){f.i.set(b,S)}function to(f){return ot(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function di(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function hi(f,b,S){return typeof f=="string"?(f=encodeURI(f).replace(b,ju),S&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ju(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Fu=/[#\/\?@]/g,W=/[#\?:]/g,we=/[#\?]/g,Ne=/[#\?@]/g,Ve=/#/g;function Ye(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function st(f){f.g||(f.g=new Map,f.h=0,f.i&&Lu(f.i,function(b,S){f.add(decodeURIComponent(b.replace(/\+/g," ")),S)}))}t=Ye.prototype,t.add=function(f,b){st(this),this.i=null,f=rn(this,f);var S=this.g.get(f);return S||this.g.set(f,S=[]),S.push(b),this.h+=1,this};function dt(f,b){st(f),b=rn(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function Cn(f,b){return st(f),b=rn(f,b),f.g.has(b)}t.forEach=function(f,b){st(this),this.g.forEach(function(S,j){S.forEach(function(J){f.call(b,J,j,this)},this)},this)},t.na=function(){st(this);const f=Array.from(this.g.values()),b=Array.from(this.g.keys()),S=[];for(let j=0;j<b.length;j++){const J=f[j];for(let re=0;re<J.length;re++)S.push(b[j])}return S},t.V=function(f){st(this);let b=[];if(typeof f=="string")Cn(this,f)&&(b=b.concat(this.g.get(rn(this,f))));else{f=Array.from(this.g.values());for(let S=0;S<f.length;S++)b=b.concat(f[S])}return b},t.set=function(f,b){return st(this),this.i=null,f=rn(this,f),Cn(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},t.get=function(f,b){return f?(f=this.V(f),0<f.length?String(f[0]):b):b};function Vn(f,b,S){dt(f,b),0<S.length&&(f.i=null,f.g.set(rn(f,b),x(S)),f.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(var S=0;S<b.length;S++){var j=b[S];const re=encodeURIComponent(String(j)),ge=this.V(j);for(j=0;j<ge.length;j++){var J=re;ge[j]!==""&&(J+="="+encodeURIComponent(String(ge[j]))),f.push(J)}}return this.i=f.join("&")};function rn(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function Es(f,b){b&&!f.j&&(st(f),f.i=null,f.g.forEach(function(S,j){var J=j.toLowerCase();j!=J&&(dt(this,j),Vn(this,J,S))},f)),f.j=b}function Ar(f,b){const S=new li;if(a.Image){const j=new Image;j.onload=y(An,S,"TestLoadImage: loaded",!0,b,j),j.onerror=y(An,S,"TestLoadImage: error",!1,b,j),j.onabort=y(An,S,"TestLoadImage: abort",!1,b,j),j.ontimeout=y(An,S,"TestLoadImage: timeout",!1,b,j),a.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=f}else b(!1)}function ur(f,b){const S=new li,j=new AbortController,J=setTimeout(()=>{j.abort(),An(S,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:j.signal}).then(re=>{clearTimeout(J),re.ok?An(S,"TestPingServer: ok",!0,b):An(S,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(J),An(S,"TestPingServer: error",!1,b)})}function An(f,b,S,j,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),j(S)}catch{}}function gk(){this.g=new rt}function yk(f,b,S){const j=S||"";try{Ta(f,function(J,re){let ge=J;c(J)&&(ge=ve(J)),b.push(j+re+"="+encodeURIComponent(ge))})}catch(J){throw b.push(j+"type="+encodeURIComponent("_badmap")),J}}function Vu(f){this.l=f.Ub||null,this.j=f.eb||!1}w(Vu,Re),Vu.prototype.g=function(){return new Uu(this.l,this.j)},Vu.prototype.i=function(f){return function(){return f}}({});function Uu(f,b){xe.call(this),this.D=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Uu,xe),t=Uu.prototype,t.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=b,this.readyState=1,ka(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(b.body=f),(this.D||a).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sa(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ka(this)),this.g&&(this.readyState=3,ka(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$0(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function $0(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?Sa(this):ka(this),this.readyState==3&&$0(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Sa(this))},t.Qa=function(f){this.g&&(this.response=f,Sa(this))},t.ga=function(){this.g&&Sa(this)};function Sa(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ka(f)}t.setRequestHeader=function(f,b){this.u.append(f,b)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var S=b.next();!S.done;)S=S.value,f.push(S[0]+": "+S[1]),S=b.next();return f.join(`\r
`)};function ka(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Uu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function q0(f){let b="";return U(f,function(S,j){b+=j,b+=":",b+=S,b+=`\r
`}),b}function Gh(f,b,S){e:{for(j in S){var j=!1;break e}j=!0}j||(S=q0(S),typeof f=="string"?S!=null&&encodeURIComponent(String(S)):ot(f,b,S))}function bt(f){xe.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(bt,xe);var vk=/^https?$/i,xk=["POST","PUT"];t=bt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,b,S,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():va.g(),this.v=this.o?_t(this.o):_t(va),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(re){W0(this,re);return}if(f=S||"",S=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var J in j)S.set(J,j[J]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const re of j.keys())S.set(re,j.get(re));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(S.keys()).find(re=>re.toLowerCase()=="content-type"),J=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(xk,b,void 0))||j||J||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,ge]of S)this.g.setRequestHeader(re,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Y0(this),this.u=!0,this.g.send(f),this.u=!1}catch(re){W0(this,re)}};function W0(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.m=5,K0(f),Ou(f)}function K0(f){f.A||(f.A=!0,Ce(f,"complete"),Ce(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ce(this,"complete"),Ce(this,"abort"),Ou(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ou(this,!0)),bt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?J0(this):this.bb())},t.bb=function(){J0(this)};function J0(f){if(f.h&&typeof o<"u"&&(!f.v[1]||qr(f)!=4||f.Z()!=2)){if(f.u&&qr(f)==4)gt(f.Ea,0,f);else if(Ce(f,"readystatechange"),qr(f)==4){f.h=!1;try{const ge=f.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var S;if(!(S=b)){var j;if(j=ge===0){var J=String(f.D).match(Du)[1]||null;!J&&a.self&&a.self.location&&(J=a.self.location.protocol.slice(0,-1)),j=!vk.test(J?J.toLowerCase():"")}S=j}if(S)Ce(f,"complete"),Ce(f,"success");else{f.m=6;try{var re=2<qr(f)?f.g.statusText:""}catch{re=""}f.l=re+" ["+f.Z()+"]",K0(f)}}finally{Ou(f)}}}}function Ou(f,b){if(f.g){Y0(f);const S=f.g,j=f.v[0]?()=>{}:null;f.g=null,f.v=null,b||Ce(f,"ready");try{S.onreadystatechange=j}catch{}}}function Y0(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function qr(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<qr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),Ae(b)}};function Q0(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function wk(f){const b={};f=(f.g&&2<=qr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<f.length;j++){if(E(f[j]))continue;var S=V(f[j]);const J=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const re=b[J]||[];b[J]=re,re.push(S)}k(b,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(f,b,S){return S&&S.internalChannelParams&&S.internalChannelParams[f]||b}function X0(f){this.Aa=0,this.i=[],this.j=new li,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ca("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ca("baseRetryDelayMs",5e3,f),this.cb=Ca("retryDelaySeedMs",1e4,f),this.Wa=Ca("forwardChannelMaxRetries",2,f),this.wa=Ca("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Cu(f&&f.concurrentRequestLimit),this.Da=new gk,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=X0.prototype,t.la=8,t.G=1,t.connect=function(f,b,S,j){Ot(0),this.W=f,this.H=b||{},S&&j!==void 0&&(this.H.OSID=S,this.H.OAID=j),this.F=this.X,this.I=ay(this,null,this.W),zu(this)};function Hh(f){if(Z0(f),f.G==3){var b=f.U++,S=lr(f.I);if(ot(S,"SID",f.K),ot(S,"RID",b),ot(S,"TYPE","terminate"),Aa(f,S),b=new kr(f,f.j,b),b.L=2,b.v=to(lr(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(b.v.toString(),"")}catch{}!S&&a.Image&&(new Image().src=b.v,S=!0),S||(b.g=ly(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Cr(b)}oy(f)}function Bu(f){f.g&&(qh(f),f.g.cancel(),f.g=null)}function Z0(f){Bu(f),f.u&&(a.clearTimeout(f.u),f.u=null),Gu(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function zu(f){if(!Au(f.h)&&!f.s){f.s=!0;var b=f.Ga;te||ae(),ne||(te(),ne=!0),Q.add(b,f),f.B=0}}function _k(f,b){return Nu(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=b.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Hr(g(f.Ga,f,b),iy(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const J=new kr(this,this.j,f);let re=this.o;if(this.S&&(re?(re=R(re),M(re,this.S)):re=this.S),this.m!==null||this.O||(J.H=re,re=null),this.P)e:{for(var b=0,S=0;S<this.i.length;S++){t:{var j=this.i[S];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(b+=j,4096<b){b=S;break e}if(b===4096||S===this.i.length-1){b=S+1;break e}}b=1e3}else b=1e3;b=ty(this,J,b),S=lr(this.I),ot(S,"RID",f),ot(S,"CVER",22),this.D&&ot(S,"X-HTTP-Session-Id",this.D),Aa(this,S),re&&(this.O?b="headers="+encodeURIComponent(String(q0(re)))+"&"+b:this.m&&Gh(S,this.m,re)),Ea(this.h,J),this.Ua&&ot(S,"TYPE","init"),this.P?(ot(S,"$req",b),ot(S,"SID","null"),J.T=!0,wa(J,S,null)):wa(J,S,b),this.G=2}}else this.G==3&&(f?ey(this,f):this.i.length==0||Au(this.h)||ey(this))};function ey(f,b){var S;b?S=b.l:S=f.U++;const j=lr(f.I);ot(j,"SID",f.K),ot(j,"RID",S),ot(j,"AID",f.T),Aa(f,j),f.m&&f.o&&Gh(j,f.m,f.o),S=new kr(f,f.j,S,f.B+1),f.m===null&&(S.H=f.o),b&&(f.i=b.D.concat(f.i)),b=ty(f,S,1e3),S.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ea(f.h,S),wa(S,j,b)}function Aa(f,b){f.H&&U(f.H,function(S,j){ot(b,j,S)}),f.l&&Ta({},function(S,j){ot(b,j,S)})}function ty(f,b,S){S=Math.min(f.i.length,S);var j=f.l?g(f.l.Na,f.l,f):null;e:{var J=f.i;let re=-1;for(;;){const ge=["count="+S];re==-1?0<S?(re=J[0].g,ge.push("ofs="+re)):re=0:ge.push("ofs="+re);let at=!0;for(let Wt=0;Wt<S;Wt++){let Xe=J[Wt].g;const sn=J[Wt].map;if(Xe-=re,0>Xe)re=Math.max(0,J[Wt].g-100),at=!1;else try{yk(sn,ge,"req"+Xe+"_")}catch{j&&j(sn)}}if(at){j=ge.join("&");break e}}}return f=f.i.splice(0,S),b.D=f,j}function ny(f){if(!f.g&&!f.u){f.Y=1;var b=f.Fa;te||ae(),ne||(te(),ne=!0),Q.add(b,f),f.v=0}}function $h(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Hr(g(f.Fa,f),iy(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,ry(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Hr(g(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),Bu(this),ry(this))};function qh(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function ry(f){f.g=new kr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var b=lr(f.qa);ot(b,"RID","rpc"),ot(b,"SID",f.K),ot(b,"AID",f.T),ot(b,"CI",f.F?"0":"1"),!f.F&&f.ja&&ot(b,"TO",f.ja),ot(b,"TYPE","xmlhttp"),Aa(f,b),f.m&&f.o&&Gh(b,f.m,f.o),f.L&&(f.g.I=f.L);var S=f.g;f=f.ia,S.L=1,S.v=to(lr(b)),S.m=null,S.P=!0,Iu(S,f)}t.Za=function(){this.C!=null&&(this.C=null,Bu(this),$h(this),Ot(19))};function Gu(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function sy(f,b){var S=null;if(f.g==b){Gu(f),qh(f),f.g=null;var j=2}else if(ba(f.h,b))S=b.D,Ru(f.h,b),j=1;else return;if(f.G!=0){if(b.o)if(j==1){S=b.m?b.m.length:0,b=Date.now()-b.F;var J=f.B;j=Jn(),Ce(j,new wu(j,S)),zu(f)}else ny(f);else if(J=b.s,J==3||J==0&&0<b.X||!(j==1&&_k(f,b)||j==2&&$h(f)))switch(S&&0<S.length&&(b=f.h,b.i=b.i.concat(S)),J){case 1:fi(f,5);break;case 4:fi(f,10);break;case 3:fi(f,6);break;default:fi(f,2)}}}function iy(f,b){let S=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(S*=2),S*b}function fi(f,b){if(f.j.info("Error code "+b),b==2){var S=g(f.fb,f),j=f.Xa;const J=!j;j=new $r(j||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ci(j,"https"),to(j),J?Ar(j.toString(),S):ur(j.toString(),S)}else Ot(2);f.G=0,f.l&&f.l.sa(b),oy(f),Z0(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function oy(f){if(f.G=0,f.ka=[],f.l){const b=Pu(f.h);(b.length!=0||f.i.length!=0)&&(_(f.ka,b),_(f.ka,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.ra()}}function ay(f,b,S){var j=S instanceof $r?lr(S):new $r(S);if(j.g!="")b&&(j.g=b+"."+j.g),eo(j,j.s);else{var J=a.location;j=J.protocol,b=b?b+"."+J.hostname:J.hostname,J=+J.port;var re=new $r(null);j&&ci(re,j),b&&(re.g=b),J&&eo(re,J),S&&(re.l=S),j=re}return S=f.D,b=f.ya,S&&b&&ot(j,S,b),ot(j,"VER",f.la),Aa(f,j),j}function ly(f,b,S){if(b&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Ca&&!f.pa?new bt(new Vu({eb:S})):new bt(f.pa),b.Ha(f.J),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uy(){}t=uy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hu(){}Hu.prototype.g=function(f,b){return new Un(f,b)};function Un(f,b){xe.call(this),this.g=new X0(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(f?f["X-WebChannel-Client-Profile"]=b.va:f={"X-WebChannel-Client-Profile":b.va}),this.g.S=f,(f=b&&b.Sb)&&!E(f)&&(this.g.m=f),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!E(b)&&(this.g.D=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new no(this)}w(Un,xe),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){Hh(this.g)},Un.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var S={};S.__data__=f,f=S}else this.u&&(S={},S.__data__=ve(f),f=S);b.i.push(new ku(b.Ya++,f)),b.G==3&&zu(b)},Un.prototype.N=function(){this.g.l=null,delete this.j,Hh(this.g),delete this.g,Un.aa.N.call(this)};function cy(f){nn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const S in b){f=S;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}w(cy,nn);function dy(){Rt.call(this),this.status=1}w(dy,Rt);function no(f){this.g=f}w(no,uy),no.prototype.ua=function(){Ce(this.g,"a")},no.prototype.ta=function(f){Ce(this.g,new cy(f))},no.prototype.sa=function(f){Ce(this.g,new dy)},no.prototype.ra=function(){Ce(this.g,"b")},Hu.prototype.createWebChannel=Hu.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,pI=function(){return new Hu},fI=function(){return Jn()},hI=qt,Wp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yi.NO_ERROR=0,Yi.TIMEOUT=8,Yi.HTTP_ERROR=6,Mc=Yi,bu.COMPLETE="complete",dI=bu,It.EventType=Nt,Nt.OPEN="a",Nt.CLOSE="b",Nt.ERROR="c",Nt.MESSAGE="d",xe.prototype.listen=xe.prototype.K,$a=It,bt.prototype.listenOnce=bt.prototype.L,bt.prototype.getLastError=bt.prototype.Ka,bt.prototype.getLastErrorCode=bt.prototype.Ba,bt.prototype.getStatus=bt.prototype.Z,bt.prototype.getResponseJson=bt.prototype.Oa,bt.prototype.getResponseText=bt.prototype.oa,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Ha,cI=bt}).apply(typeof uc<"u"?uc:typeof self<"u"?self:typeof window<"u"?window:{});const ex="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new ah("@firebase/firestore");function Va(){return Li.logLevel}function Te(t,...e){if(Li.logLevel<=Ke.DEBUG){const n=e.map(Mg);Li.debug(`Firestore (${oa}): ${t}`,...n)}}function hs(t,...e){if(Li.logLevel<=Ke.ERROR){const n=e.map(Mg);Li.error(`Firestore (${oa}): ${t}`,...n)}}function qo(t,...e){if(Li.logLevel<=Ke.WARN){const n=e.map(Mg);Li.warn(`Firestore (${oa}): ${t}`,...n)}}function Mg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t="Unexpected state"){const e=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: `+t;throw hs(e),new Error(e)}function tt(t,e){t||De()}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(cn.UNAUTHENTICATED))}shutdown(){}}class CM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class AM{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tt(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt(typeof r.accessToken=="string"),new mI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string"),new cn(e)}}class NM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class RM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new NM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){tt(this.o===void 0);const r=i=>{i.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(tt(typeof n.token=="string"),this.R=n.token,new PM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=DM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ze(t,e){return t<e?-1:t>e?1:0}function Wo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Vt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Vt(0,0))}static max(){return new Ue(new Vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r){n===void 0?n=0:n>e.length&&De(),r===void 0?r=e.length-n:r>e.length-n&&De(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return jl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof jl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ft extends jl{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const LM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends jl{construct(e,n,r){return new Yt(e,n,r)}static isValidIdentifier(e){return LM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Yt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new be(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new be(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new be(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new be(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(ft.fromString(e))}static fromName(e){return new Se(ft.fromString(e).popFirst(5))}static empty(){return new Se(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new ft(e.slice()))}}function jM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ue.fromTimestamp(r===1e9?new Vt(n+1,0):new Vt(n,r));return new Xs(s,Se.empty(),e)}function FM(t){return new Xs(t.readTime,t.key,-1)}class Xs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xs(Ue.min(),Se.empty(),-1)}static max(){return new Xs(Ue.max(),Se.empty(),-1)}}function VM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(t.documentKey,e.documentKey),n!==0?n:Ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==UM)throw t;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,r)=>{n(e)})}static reject(e){return new de((n,r)=>{r(e)})}static waitFor(e){return new de((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=de.resolve(!1);for(const r of e)n=n.next(s=>s?de.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new de((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new de((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function BM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function eu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Dg.oe=-1;function ch(t){return t==null}function _d(t){return t===0&&1/t==-1/0}function zM(t){return typeof t=="number"&&Number.isInteger(t)&&!_d(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GM(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function yI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cc(this.root,e,this.comparator,!0)}}class cc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Jt.RED,this.left=s??Jt.EMPTY,this.right=i??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Jt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Jt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nx(this.data.getIterator())}getIteratorFrom(e){return new nx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xt(this.comparator);return n.data=e,n}}class nx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new zn([])}unionWith(e){let n=new Xt(Yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new vI("Invalid base64 string: "+i):i}}(e);return new en(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const HM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(t){if(tt(!!t),typeof t=="string"){let e=0;const n=HM.exec(t);if(tt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(t.seconds),nanos:St(t.nanos)}}function St(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ji(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jg(t){const e=t.mapValue.fields.__previous_value__;return Lg(e)?jg(e):e}function Fl(t){const e=Zs(t.mapValue.fields.__local_write_time__.timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Vl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Vl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Vl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc={mapValue:{}};function Fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lg(t)?4:WM(t)?9007199254740991:qM(t)?10:11:De()}function Br(t,e){if(t===e)return!0;const n=Fi(t);if(n!==Fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fl(t).isEqual(Fl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Zs(s.timestampValue),a=Zs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ji(s.bytesValue).isEqual(ji(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return St(s.geoPointValue.latitude)===St(i.geoPointValue.latitude)&&St(s.geoPointValue.longitude)===St(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return St(s.integerValue)===St(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=St(s.doubleValue),a=St(i.doubleValue);return o===a?_d(o)===_d(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Wo(t.arrayValue.values||[],e.arrayValue.values||[],Br);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(tx(o)!==tx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Br(o[l],a[l])))return!1;return!0}(t,e);default:return De()}}function Ul(t,e){return(t.values||[]).find(n=>Br(n,e))!==void 0}function Ko(t,e){if(t===e)return 0;const n=Fi(t),r=Fi(e);if(n!==r)return Ze(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=St(i.integerValue||i.doubleValue),l=St(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return rx(t.timestampValue,e.timestampValue);case 4:return rx(Fl(t),Fl(e));case 5:return Ze(t.stringValue,e.stringValue);case 6:return function(i,o){const a=ji(i),l=ji(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ze(a[c],l[c]);if(d!==0)return d}return Ze(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ze(St(i.latitude),St(o.latitude));return a!==0?a:Ze(St(i.longitude),St(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sx(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const m=i.fields||{},g=o.fields||{},y=(a=m.value)===null||a===void 0?void 0:a.arrayValue,w=(l=g.value)===null||l===void 0?void 0:l.arrayValue,x=Ze(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:sx(y,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===dc.mapValue&&o===dc.mapValue)return 0;if(i===dc.mapValue)return 1;if(o===dc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let m=0;m<l.length&&m<d.length;++m){const g=Ze(l[m],d[m]);if(g!==0)return g;const y=Ko(a[l[m]],c[d[m]]);if(y!==0)return y}return Ze(l.length,d.length)}(t.mapValue,e.mapValue);default:throw De()}}function rx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ze(t,e);const n=Zs(t),r=Zs(e),s=Ze(n.seconds,r.seconds);return s!==0?s:Ze(n.nanos,r.nanos)}function sx(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ko(n[s],r[s]);if(i)return i}return Ze(n.length,r.length)}function Jo(t){return Kp(t)}function Kp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ji(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Kp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Kp(n.fields[o])}`;return s+"}"}(t.mapValue):De()}function ix(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jp(t){return!!t&&"integerValue"in t}function Fg(t){return!!t&&"arrayValue"in t}function ox(t){return!!t&&"nullValue"in t}function ax(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dc(t){return!!t&&"mapValue"in t}function qM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function al(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=al(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=al(t.arrayValue.values[n]);return e}return Object.assign({},t)}function WM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Dc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(n)}setAll(e){let n=Yt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=al(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Dc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Br(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Dc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Wi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Rn(al(this.value))}}function xI(t){const e=[];return Wi(t.fields,(n,r)=>{const s=new Yt([n]);if(Dc(r)){const i=xI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new hn(e,0,Ue.min(),Ue.min(),Ue.min(),Rn.empty(),0)}static newFoundDocument(e,n,r,s){return new hn(e,1,n,Ue.min(),r,s,0)}static newNoDocument(e,n){return new hn(e,2,n,Ue.min(),Ue.min(),Rn.empty(),0)}static newUnknownDocument(e,n){return new hn(e,3,n,Ue.min(),Ue.min(),Rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n){this.position=e,this.inclusive=n}}function lx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Se.comparator(Se.fromName(o.referenceValue),n.key):r=Ko(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ux(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Br(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n="asc"){this.field=e,this.dir=n}}function KM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{}class Dt extends wI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new YM(e,n,r):n==="array-contains"?new ZM(e,r):n==="in"?new eD(e,r):n==="not-in"?new tD(e,r):n==="array-contains-any"?new nD(e,r):new Dt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new QM(e,r):new XM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ko(n,this.value)):n!==null&&Fi(this.value)===Fi(n)&&this.matchesComparison(Ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tr extends wI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Tr(e,n)}matches(e){return _I(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _I(t){return t.op==="and"}function bI(t){return JM(t)&&_I(t)}function JM(t){for(const e of t.filters)if(e instanceof Tr)return!1;return!0}function Yp(t){if(t instanceof Dt)return t.field.canonicalString()+t.op.toString()+Jo(t.value);if(bI(t))return t.filters.map(e=>Yp(e)).join(",");{const e=t.filters.map(n=>Yp(n)).join(",");return`${t.op}(${e})`}}function EI(t,e){return t instanceof Dt?function(r,s){return s instanceof Dt&&r.op===s.op&&r.field.isEqual(s.field)&&Br(r.value,s.value)}(t,e):t instanceof Tr?function(r,s){return s instanceof Tr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&EI(o,s.filters[a]),!0):!1}(t,e):void De()}function TI(t){return t instanceof Dt?function(n){return`${n.field.canonicalString()} ${n.op} ${Jo(n.value)}`}(t):t instanceof Tr?function(n){return n.op.toString()+" {"+n.getFilters().map(TI).join(" ,")+"}"}(t):"Filter"}class YM extends Dt{constructor(e,n,r){super(e,n,r),this.key=Se.fromName(r.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class QM extends Dt{constructor(e,n){super(e,"in",n),this.keys=II("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class XM extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=II("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function II(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Se.fromName(r.referenceValue))}class ZM extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fg(n)&&Ul(n.arrayValue,this.value)}}class eD extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ul(this.value.arrayValue,n)}}class tD extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ul(this.value.arrayValue,n)}}class nD extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ul(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function cx(t,e=null,n=[],r=[],s=null,i=null,o=null){return new rD(t,e,n,r,s,i,o)}function Vg(t){const e=Le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Yp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ch(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Jo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Jo(r)).join(",")),e.ue=n}return e.ue}function Ug(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!EI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ux(t.startAt,e.startAt)&&ux(t.endAt,e.endAt)}function Qp(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sD(t,e,n,r,s,i,o,a){return new aa(t,e,n,r,s,i,o,a)}function Og(t){return new aa(t)}function dx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function SI(t){return t.collectionGroup!==null}function ll(t){const e=Le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xt(Yt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ol(i,r))}),n.has(Yt.keyField().canonicalString())||e.ce.push(new Ol(Yt.keyField(),r))}return e.ce}function Fr(t){const e=Le(t);return e.le||(e.le=kI(e,ll(t))),e.le}function iD(t){const e=Le(t);return e.he||(e.he=kI(e,t.explicitOrderBy)),e.he}function kI(t,e){if(t.limitType==="F")return cx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ol(s.field,i)});const n=t.endAt?new bd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bd(t.startAt.position,t.startAt.inclusive):null;return cx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xp(t,e){const n=t.filters.concat([e]);return new aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ed(t,e,n){return new aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dh(t,e){return Ug(Fr(t),Fr(e))&&t.limitType===e.limitType}function CI(t){return`${Vg(Fr(t))}|lt:${t.limitType}`}function io(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>TI(s)).join(", ")}]`),ch(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Jo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Jo(s)).join(",")),`Target(${r})`}(Fr(t))}; limitType=${t.limitType})`}function hh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Se.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ll(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=lx(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ll(r),s)||r.endAt&&!function(o,a,l){const c=lx(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ll(r),s))}(t,e)}function oD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AI(t){return(e,n)=>{let r=!1;for(const s of ll(t)){const i=aD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function aD(t,e,n){const r=t.field.isKeyField()?Se.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ko(l,c):De()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return yI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new wt(Se.comparator);function fs(){return lD}const NI=new wt(Se.comparator);function qa(...t){let e=NI;for(const n of t)e=e.insert(n.key,n);return e}function RI(t){let e=NI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bi(){return ul()}function PI(){return ul()}function ul(){return new la(t=>t.toString(),(t,e)=>t.isEqual(e))}const uD=new wt(Se.comparator),cD=new Xt(Se.comparator);function We(...t){let e=cD;for(const n of t)e=e.add(n);return e}const dD=new Xt(Ze);function hD(){return dD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_d(e)?"-0":e}}function MI(t){return{integerValue:""+t}}function DI(t,e){return zM(e)?MI(e):Bg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function fD(t,e,n){return t instanceof Td?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Lg(i)&&(i=jg(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Bl?jI(t,e):t instanceof zl?FI(t,e):function(s,i){const o=LI(s,i),a=hx(o)+hx(s.Pe);return Jp(o)&&Jp(s.Pe)?MI(a):Bg(s.serializer,a)}(t,e)}function pD(t,e,n){return t instanceof Bl?jI(t,e):t instanceof zl?FI(t,e):n}function LI(t,e){return t instanceof Gl?function(r){return Jp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Td extends fh{}class Bl extends fh{constructor(e){super(),this.elements=e}}function jI(t,e){const n=VI(e);for(const r of t.elements)n.some(s=>Br(s,r))||n.push(r);return{arrayValue:{values:n}}}class zl extends fh{constructor(e){super(),this.elements=e}}function FI(t,e){let n=VI(e);for(const r of t.elements)n=n.filter(s=>!Br(s,r));return{arrayValue:{values:n}}}class Gl extends fh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function hx(t){return St(t.integerValue||t.doubleValue)}function VI(t){return Fg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n){this.field=e,this.transform=n}}function gD(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Bl&&s instanceof Bl||r instanceof zl&&s instanceof zl?Wo(r.elements,s.elements,Br):r instanceof Gl&&s instanceof Gl?Br(r.Pe,s.Pe):r instanceof Td&&s instanceof Td}(t.transform,e.transform)}class yD{constructor(e,n){this.version=e,this.transformResults=n}}class En{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ph{}function UI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mh(t.key,En.none()):new tu(t.key,t.data,En.none());{const n=t.data,r=Rn.empty();let s=new Xt(Yt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ii(t.key,r,new zn(s.toArray()),En.none())}}function vD(t,e,n){t instanceof tu?function(s,i,o){const a=s.value.clone(),l=px(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ii?function(s,i,o){if(!Lc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=px(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(OI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function cl(t,e,n,r){return t instanceof tu?function(i,o,a,l){if(!Lc(i.precondition,o))return a;const c=i.value.clone(),d=mx(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ii?function(i,o,a,l){if(!Lc(i.precondition,o))return a;const c=mx(i.fieldTransforms,l,o),d=o.data;return d.setAll(OI(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,a){return Lc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function xD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=LI(r.transform,s||null);i!=null&&(n===null&&(n=Rn.empty()),n.set(r.field,i))}return n||null}function fx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Wo(r,s,(i,o)=>gD(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tu extends ph{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ii extends ph{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function OI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function px(t,e,n){const r=new Map;tt(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,pD(o,a,n[s]))}return r}function mx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,fD(i,o,e))}return r}class mh extends ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wD extends ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&vD(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=PI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=UI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,(n,r)=>fx(n,r))&&Wo(this.baseMutations,e.baseMutations,(n,r)=>fx(n,r))}}class zg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){tt(e.mutations.length===r.length);let s=function(){return uD}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new zg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Je;function ID(t){switch(t){default:return De();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function BI(t){if(t===void 0)return hs("GRPC error has no .code"),le.UNKNOWN;switch(t){case Pt.OK:return le.OK;case Pt.CANCELLED:return le.CANCELLED;case Pt.UNKNOWN:return le.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return le.INTERNAL;case Pt.UNAVAILABLE:return le.UNAVAILABLE;case Pt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Pt.NOT_FOUND:return le.NOT_FOUND;case Pt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Pt.ABORTED:return le.ABORTED;case Pt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Pt.DATA_LOSS:return le.DATA_LOSS;default:return De()}}(Je=Pt||(Pt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=new Si([4294967295,4294967295],0);function gx(t){const e=SD().encode(t),n=new uI;return n.update(e),new Uint8Array(n.digest())}function yx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Si([n,r],0),new Si([s,i],0)]}class Gg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wa(`Invalid padding: ${n}`);if(r<0)throw new Wa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Si.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Si.fromNumber(r)));return s.compare(kD)===1&&(s=new Si([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=gx(e),[r,s]=yx(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Gg(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=gx(e),[r,s]=yx(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,nu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gh(Ue.min(),s,new wt(Ze),fs(),We())}}class nu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nu(r,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class zI{constructor(e,n){this.targetId=e,this.me=n}}class GI{constructor(e,n,r=en.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class vx{constructor(){this.fe=0,this.ge=wx(),this.pe=en.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=We(),n=We(),r=We();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:De()}}),new nu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=wx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,tt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class CD{constructor(e){this.Le=e,this.Be=new Map,this.ke=fs(),this.qe=xx(),this.Qe=new wt(Ze)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:De()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Qp(i))if(r===0){const o=new Se(i.path);this.Ue(n,o,hn.newNoDocument(o,Ue.min()))}else tt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=ji(r).toUint8Array()}catch(l){if(l instanceof vI)return qo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Gg(o,s,i)}catch(l){return qo(l instanceof Wa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Qp(a.target)){const l=new Se(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,hn.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=We();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new gh(e,n,this.Qe,this.ke,r);return this.ke=fs(),this.qe=xx(),this.Qe=new wt(Ze),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new vx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xt(Ze),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function xx(){return new wt(Se.comparator)}function wx(){return new wt(Se.comparator)}const AD={asc:"ASCENDING",desc:"DESCENDING"},ND={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RD={and:"AND",or:"OR"};class PD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zp(t,e){return t.useProto3Json||ch(e)?e:{value:e}}function Id(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MD(t,e){return Id(t,e.toTimestamp())}function Vr(t){return tt(!!t),Ue.fromTimestamp(function(n){const r=Zs(n);return new Vt(r.seconds,r.nanos)}(t))}function Hg(t,e){return em(t,e).canonicalString()}function em(t,e){const n=function(s){return new ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $I(t){const e=ft.fromString(t);return tt(QI(e)),e}function tm(t,e){return Hg(t.databaseId,e.path)}function Nf(t,e){const n=$I(e);if(n.get(1)!==t.databaseId.projectId)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Se(WI(n))}function qI(t,e){return Hg(t.databaseId,e)}function DD(t){const e=$I(t);return e.length===4?ft.emptyPath():WI(e)}function nm(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WI(t){return tt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _x(t,e,n){return{name:tm(t,e),fields:n.value.mapValue.fields}}function LD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(tt(d===void 0||typeof d=="string"),en.fromBase64String(d||"")):(tt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),en.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?le.UNKNOWN:BI(c.code);return new be(d,c.message||"")}(o);n=new GI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Nf(t,r.document.name),i=Vr(r.document.updateTime),o=r.document.createTime?Vr(r.document.createTime):Ue.min(),a=new Rn({mapValue:{fields:r.document.fields}}),l=hn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new jc(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Nf(t,r.document),i=r.readTime?Vr(r.readTime):Ue.min(),o=hn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new jc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Nf(t,r.document),i=r.removedTargetIds||[];n=new jc([],i,s,null)}else{if(!("filter"in e))return De();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new TD(s,i),a=r.targetId;n=new zI(a,o)}}return n}function jD(t,e){let n;if(e instanceof tu)n={update:_x(t,e.key,e.value)};else if(e instanceof mh)n={delete:tm(t,e.key)};else if(e instanceof ii)n={update:_x(t,e.key,e.data),updateMask:$D(e.fieldMask)};else{if(!(e instanceof wD))return De();n={verify:tm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Td)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gl)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw De()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:MD(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:De()}(t,e.precondition)),n}function FD(t,e){return t&&t.length>0?(tt(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Vr(s.updateTime):Vr(i);return o.isEqual(Ue.min())&&(o=Vr(i)),new yD(o,s.transformResults||[])}(n,e))):[]}function VD(t,e){return{documents:[qI(t,e.path)]}}function KI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qI(t,s);const i=function(c){if(c.length!==0)return YI(Tr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:Ns(g.field),direction:zD(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Zp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function UD(t,e,n,r){const{_t:s,parent:i}=KI(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d="aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:Ns(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:Ns(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function OD(t){let e=DD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){tt(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(m){const g=JI(m);return g instanceof Tr&&bI(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(w){return new Ol(oo(w.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,ch(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(m){const g=!!m.before,y=m.values||[];return new bd(y,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,y=m.values||[];return new bd(y,g)}(n.endAt)),sD(e,s,o,i,a,"F",l,c)}function BD(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=oo(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=oo(n.unaryFilter.field);return Dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=oo(n.unaryFilter.field);return Dt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=oo(n.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(t):t.fieldFilter!==void 0?function(n){return Dt.create(oo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tr.create(n.compositeFilter.filters.map(r=>JI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return De()}}(n.compositeFilter.op))}(t):De()}function zD(t){return AD[t]}function GD(t){return ND[t]}function HD(t){return RD[t]}function Ns(t){return{fieldPath:t.canonicalString()}}function oo(t){return Yt.fromServerFormat(t.fieldPath)}function YI(t){return t instanceof Dt?function(n){if(n.op==="=="){if(ax(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NAN"}};if(ox(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ax(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NAN"}};if(ox(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ns(n.field),op:GD(n.op),value:n.value}}}(t):t instanceof Tr?function(n){const r=n.getFilters().map(s=>YI(s));return r.length===1?r[0]:{compositeFilter:{op:HD(n.op),filters:r}}}(t):De()}function $D(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function QI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r,s,i=Ue.min(),o=Ue.min(),a=en.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this.ct=e}}function WD(t){const e=OD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ed(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.un=new JD}addToCollectionParentIndex(e,n){return this.un.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(Xs.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(Xs.min())}updateCollectionGroup(e,n,r){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class JD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xt(ft.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Yo(0)}static kn(){return new Yo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(){this.changes=new la(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?de.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&cl(r.mutation,s,zn.empty(),Vt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,n,r=We()){const s=bi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=qa();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=bi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,We()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=fs();const o=ul(),a=function(){return ul()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ii)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),cl(d.mutation,c,d.mutation.getFieldMask(),Vt.now())):o.set(c.key,zn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var m;return a.set(c,new QD(d,(m=o.get(c))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ul();let s=new wt((o,a)=>o-a),i=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||zn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const m=(s.get(a.batchId)||We()).add(l);s=s.insert(a.batchId,m)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,m=PI();d.forEach(g=>{if(!i.has(g)){const y=UI(n.get(g),r.get(g));y!==null&&m.set(g,y),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return de.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):SI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):de.resolve(bi());let a=-1,l=i;return o.next(c=>de.forEach(c,(d,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(d)?de.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,We())).next(d=>({batchId:a,changes:RI(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next(r=>{let s=qa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=qa();return this.indexManager.getCollectionParents(e,i).next(a=>de.forEach(a,l=>{const c=function(m,g){return new aa(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,hn.newInvalidDocument(d)))});let a=qa();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&cl(d.mutation,c,zn.empty(),Vt.now()),hh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return de.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Vr(s.createTime)}}(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:WD(s.bundledQuery),readTime:Vr(s.readTime)}}(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(){this.overlays=new wt(Se.comparator),this.Ir=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bi();return de.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),de.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),de.resolve()}getOverlaysForCollection(e,n,r){const s=bi(),i=n.length+1,o=new Se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return de.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new wt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=bi(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=bi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return de.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new bD(n,r));let i=this.Ir.get(n);i===void 0&&(i=We(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.Tr=new Xt(Bt.Er),this.dr=new Xt(Bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Bt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Bt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Se(new ft([])),r=new Bt(n,e),s=new Bt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Se(new ft([])),r=new Bt(n,e),s=new Bt(n,e+1);let i=We();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Bt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Se.comparator(e.key,n.key)||Ze(e.wr,n.wr)}static Ar(e,n){return Ze(e.wr,n.wr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xt(Bt.Er)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _D(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Bt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return de.resolve(o)}lookupMutationBatch(e,n){return de.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return de.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Bt(n,0),s=new Bt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),de.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xt(Ze);return n.forEach(s=>{const i=new Bt(s,0),o=new Bt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),de.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Se.isDocumentKey(i)||(i=i.child(""));const o=new Bt(new Se(i),0);let a=new Xt(Ze);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),de.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){tt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return de.forEach(n.mutations,s=>{const i=new Bt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Bt(n,0),s=this.br.firstAfterOrEqual(r);return de.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.Mr=e,this.docs=function(){return new wt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return de.resolve(r?r.document.mutableCopy():hn.newInvalidDocument(n))}getEntries(e,n){let r=fs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():hn.newInvalidDocument(s))}),de.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=fs();const o=n.path,a=new Se(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||VM(FM(d),r)<=0||(s.has(d.key)||hh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,n,r,s){De()}Or(e,n){return de.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new s4(this)}getSize(e){return de.resolve(this.size)}}class s4 extends YD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),de.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.persistence=e,this.Nr=new la(n=>Vg(n),Ug),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $g,this.targetCount=0,this.kr=Yo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),de.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Yo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.Kn(n),de.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),de.waitFor(i).next(()=>s)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return de.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),de.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),de.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return de.resolve(r)}containsKey(e,n){return de.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Dg(0),this.Kr=!1,this.Kr=!0,this.$r=new t4,this.referenceDelegate=e(this),this.Ur=new i4(this),this.indexManager=new KD,this.remoteDocumentCache=function(s){return new r4(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new qD(n),this.Gr=new ZD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new e4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new n4(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Te("MemoryPersistence","Starting transaction:",e);const s=new a4(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return de.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class a4 extends OM{constructor(e){super(),this.currentSequenceNumber=e}}class qg{constructor(e){this.persistence=e,this.Jr=new $g,this.Yr=null}static Zr(e){return new qg(e)}get Xr(){if(this.Yr)return this.Yr;throw De()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),de.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),de.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Xr,r=>{const s=Se.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return de.or([()=>de.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=We(),s=We();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return BN()?8:BM(gn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new l4;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Va()<=Ke.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),de.resolve()):(Va()<=Ke.DEBUG&&Te("QueryEngine","Query:",io(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Va()<=Ke.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(n))):de.resolve())}Yi(e,n){if(dx(n))return de.resolve(null);let r=Fr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ed(n,null,"F"),r=Fr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=We(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Ed(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return dx(n)||s.isEqual(Ue.min())?de.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?de.resolve(null):(Va()<=Ke.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),io(n)),this.rs(e,o,n,jM(s,-1)).next(a=>a))})}ts(e,n){let r=new Xt(AI(e));return n.forEach((s,i)=>{hh(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Va()<=Ke.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",io(n)),this.Ji.getDocumentsMatchingQuery(e,n,Xs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new wt(Ze),this._s=new la(i=>Vg(i),Ug),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function d4(t,e,n,r){return new c4(t,e,n,r)}async function XI(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=We();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function h4(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const m=c.batch,g=m.keys();let y=de.resolve();return g.forEach(w=>{y=y.next(()=>d.getEntry(l,w)).next(x=>{const _=c.docVersions.get(w);tt(_!==null),x.version.compareTo(_)<0&&(m.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=We();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ZI(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function f4(t,e){const n=Le(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,m)=>{const g=s.get(m);if(!g)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,m)));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(en.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),s=s.insert(m,y),function(x,_,v){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(g,y,d)&&a.push(n.Ur.updateTargetData(i,y))});let l=fs(),c=We();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(p4(i,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(Ue.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return de.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function p4(t,e,n){let r=We(),s=We();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=fs();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function m4(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function g4(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,de.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Fs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function rm(t,e,n){const r=Le(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!eu(o))throw o;Te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function bx(t,e,n){const r=Le(t);let s=Ue.min(),i=We();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const m=Le(l),g=m._s.get(d);return g!==void 0?de.resolve(m.os.get(g)):m.Ur.getTargetData(c,d)}(r,o,Fr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Ue.min(),n?i:We())).next(a=>(y4(r,oD(e),a),{documents:a,Ts:i})))}function y4(t,e,n){let r=t.us.get(e)||Ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Ex{constructor(){this.activeTargetIds=hD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class v4{constructor(){this.so=new Ex,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ex,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc=null;function Rf(){return hc===null?hc=function(){return 268435456+Math.round(2147483648*Math.random())}():hc++,"0x"+hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class b4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Rf(),l=this.xo(n,r.toUriEncodedString());Te("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(d=>(Te("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw qo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=w4[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Rf();return new Promise((o,a)=>{const l=new cI;l.setWithCredentials(!0),l.listenOnce(dI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Mc.NO_ERROR:const d=l.getResponseJson();Te(un,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Mc.TIMEOUT:Te(un,`RPC '${e}' ${i} timed out`),a(new be(le.DEADLINE_EXCEEDED,"Request time out"));break;case Mc.HTTP_ERROR:const m=l.getStatus();if(Te(un,`RPC '${e}' ${i} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const w=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(v)>=0?v:le.UNKNOWN}(y.status);a(new be(w,y.message))}else a(new be(le.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new be(le.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{Te(un,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Te(un,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Rf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pI(),a=fI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Te(un,`Creating RPC '${e}' stream ${s}: ${d}`,l);const m=o.createWebChannel(d,l);let g=!1,y=!1;const w=new _4({Io:_=>{y?Te(un,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(g||(Te(un,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Te(un,`RPC '${e}' stream ${s} sending:`,_),m.send(_))},To:()=>m.close()}),x=(_,v,E)=>{_.listen(v,T=>{try{E(T)}catch(N){setTimeout(()=>{throw N},0)}})};return x(m,$a.EventType.OPEN,()=>{y||(Te(un,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),x(m,$a.EventType.CLOSE,()=>{y||(y=!0,Te(un,`RPC '${e}' stream ${s} transport closed`),w.So())}),x(m,$a.EventType.ERROR,_=>{y||(y=!0,qo(un,`RPC '${e}' stream ${s} transport errored:`,_),w.So(new be(le.UNAVAILABLE,"The operation could not be completed")))}),x(m,$a.EventType.MESSAGE,_=>{var v;if(!y){const E=_.data[0];tt(!!E);const T=E,N=T.error||((v=T[0])===null||v===void 0?void 0:v.error);if(N){Te(un,`RPC '${e}' stream ${s} received error:`,N);const L=N.status;let U=function(A){const M=Pt[A];if(M!==void 0)return BI(M)}(L),k=N.message;U===void 0&&(U=le.INTERNAL,k="Unknown error status: "+L+" with message "+N.message),y=!0,w.So(new be(U,k)),m.close()}else Te(un,`RPC '${e}' stream ${s} received:`,E),w.bo(E)}}),x(a,hI.STAT_EVENT,_=>{_.stat===Wp.PROXY?Te(un,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Wp.NOPROXY&&Te(un,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function Pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t){return new PD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(hs(n.toString()),hs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new be(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class E4 extends tS{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=LD(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ue.min():o.readTime?Vr(o.readTime):Ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=nm(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Qp(l)?{documents:VD(i,l)}:{query:KI(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=HI(i,o.resumeToken);const c=Zp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ue.min())>0){a.readTime=Id(i,o.snapshotVersion.toTimestamp());const c=Zp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=BD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=nm(this.serializer),n.removeTarget=e,this.a_(n)}}class T4 extends tS{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return tt(!!e.streamToken),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=FD(e.writeResults,e.commitTime),r=Vr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=nm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>jD(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,em(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new be(le.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,em(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(le.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class S4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hs(n),this.D_=!1):Te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ki(this)&&(Te("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Le(l);c.L_.add(4),await ru(c),c.q_.set("Unknown"),c.L_.delete(4),await vh(c)}(this))})}),this.q_=new S4(r,s)}}async function vh(t){if(Ki(t))for(const e of t.B_)await e(!0)}async function ru(t){for(const e of t.B_)await e(!1)}function nS(t,e){const n=Le(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Qg(n)?Yg(n):ua(n).r_()&&Jg(n,e))}function Kg(t,e){const n=Le(t),r=ua(n);n.N_.delete(e),r.r_()&&rS(n,e),n.N_.size===0&&(r.r_()?r.o_():Ki(n)&&n.q_.set("Unknown"))}function Jg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ua(t).A_(e)}function rS(t,e){t.Q_.xe(e),ua(t).R_(e)}function Yg(t){t.Q_=new CD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ua(t).start(),t.q_.v_()}function Qg(t){return Ki(t)&&!ua(t).n_()&&t.N_.size>0}function Ki(t){return Le(t).L_.size===0}function sS(t){t.Q_=void 0}async function C4(t){t.q_.set("Online")}async function A4(t){t.N_.forEach((e,n)=>{Jg(t,e)})}async function N4(t,e){sS(t),Qg(t)?(t.q_.M_(e),Yg(t)):t.q_.set("Unknown")}async function R4(t,e,n){if(t.q_.set("Online"),e instanceof GI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){Te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sd(t,r)}else if(e instanceof jc?t.Q_.Ke(e):e instanceof zI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ue.min()))try{const r=await ZI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(en.EMPTY_BYTE_STRING,d.snapshotVersion)),rS(i,l);const m=new Fs(d.target,l,c,d.sequenceNumber);Jg(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Te("RemoteStore","Failed to raise snapshot:",r),await Sd(t,r)}}async function Sd(t,e,n){if(!eu(e))throw e;t.L_.add(1),await ru(t),t.q_.set("Offline"),n||(n=()=>ZI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await vh(t)})}function iS(t,e){return e().catch(n=>Sd(t,n,e))}async function xh(t){const e=Le(t),n=ei(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;P4(e);)try{const s=await m4(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,M4(e,s)}catch(s){await Sd(e,s)}oS(e)&&aS(e)}function P4(t){return Ki(t)&&t.O_.length<10}function M4(t,e){t.O_.push(e);const n=ei(t);n.r_()&&n.V_&&n.m_(e.mutations)}function oS(t){return Ki(t)&&!ei(t).n_()&&t.O_.length>0}function aS(t){ei(t).start()}async function D4(t){ei(t).p_()}async function L4(t){const e=ei(t);for(const n of t.O_)e.m_(n.mutations)}async function j4(t,e,n){const r=t.O_.shift(),s=zg.from(r,e,n);await iS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await xh(t)}async function F4(t,e){e&&ei(t).V_&&await async function(r,s){if(function(o){return ID(o)&&o!==le.ABORTED}(s.code)){const i=r.O_.shift();ei(r).s_(),await iS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await xh(r)}}(t,e),oS(t)&&aS(t)}async function Ix(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),Te("RemoteStore","RemoteStore received new credentials");const r=Ki(n);n.L_.add(3),await ru(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await vh(n)}async function V4(t,e){const n=Le(t);e?(n.L_.delete(2),await vh(n)):e||(n.L_.add(2),await ru(n),n.q_.set("Unknown"))}function ua(t){return t.K_||(t.K_=function(n,r,s){const i=Le(n);return i.w_(),new E4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:C4.bind(null,t),Ro:A4.bind(null,t),mo:N4.bind(null,t),d_:R4.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Qg(t)?Yg(t):t.q_.set("Unknown")):(await t.K_.stop(),sS(t))})),t.K_}function ei(t){return t.U_||(t.U_=function(n,r,s){const i=Le(n);return i.w_(),new T4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:D4.bind(null,t),mo:F4.bind(null,t),f_:L4.bind(null,t),g_:j4.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await xh(t)):(await t.U_.stop(),t.O_.length>0&&(Te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Xg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zg(t,e){if(hs("AsyncQueue",`${e}: ${t}`),eu(t))return new be(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Se.comparator(n.key,r.key):(n,r)=>Se.comparator(n.key,r.key),this.keyedMap=qa(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new No(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof No)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new No;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this.W_=new wt(Se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):De():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Qo(e,n,No.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class O4{constructor(){this.queries=kx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Le(n),i=s.queries;s.queries=kx(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new be(le.ABORTED,"Firestore shutting down"))}}function kx(){return new la(t=>CI(t),dh)}async function lS(t,e){const n=Le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new U4,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Zg(o,`Initialization of query '${io(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&e0(n)}async function uS(t,e){const n=Le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function B4(t,e){const n=Le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&e0(n)}function z4(t,e,n){const r=Le(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function e0(t){t.Y_.forEach(e=>{e.next()})}var sm,Cx;(Cx=sm||(sm={})).ea="default",Cx.Cache="cache";class cS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==sm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.key=e}}class hS{constructor(e){this.key=e}}class G4{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=We(),this.mutatedKeys=We(),this.Aa=AI(e),this.Ra=new No(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Sx,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const g=s.get(d),y=hh(this.query,m)?m:null,w=!!g&&this.mutatedKeys.has(g.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let _=!1;g&&y?g.data.isEqual(y.data)?w!==x&&(r.track({type:3,doc:y}),_=!0):this.ga(g,y)||(r.track({type:2,doc:y}),_=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),_=!0):g&&!y&&(r.track({type:1,doc:g}),_=!0,(l||c)&&(a=!0)),_&&(y?(o=o.add(y),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,m)=>function(y,w){const x=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return x(y)-x(w)}(d.type,m.type)||this.Aa(d.doc,m.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Qo(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Sx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=We(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new hS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new dS(r))}),n}ba(e){this.Ta=e.Ts,this.da=We();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Qo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class H4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $4{constructor(e){this.key=e,this.va=!1}}class q4{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new la(a=>CI(a),dh),this.Ma=new Map,this.xa=new Set,this.Oa=new wt(Se.comparator),this.Na=new Map,this.La=new $g,this.Ba={},this.ka=new Map,this.qa=Yo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function W4(t,e,n=!0){const r=vS(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await fS(r,e,n,!0),s}async function K4(t,e){const n=vS(t);await fS(n,e,!0,!1)}async function fS(t,e,n,r){const s=await g4(t.localStore,Fr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await J4(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&nS(t.remoteStore,s),a}async function J4(t,e,n,r,s){t.Ka=(m,g,y)=>async function(x,_,v,E){let T=_.view.ma(v);T.ns&&(T=await bx(x.localStore,_.query,!1).then(({documents:k})=>_.view.ma(k,T)));const N=E&&E.targetChanges.get(_.targetId),L=E&&E.targetMismatches.get(_.targetId)!=null,U=_.view.applyChanges(T,x.isPrimaryClient,N,L);return Nx(x,_.targetId,U.wa),U.snapshot}(t,m,g,y);const i=await bx(t.localStore,e,!0),o=new G4(e,i.Ts),a=o.ma(i.documents),l=nu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Nx(t,n,c.wa);const d=new H4(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function Y4(t,e,n){const r=Le(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!dh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Kg(r.remoteStore,s.targetId),im(r,s.targetId)}).catch(Zl)):(im(r,s.targetId),await rm(r.localStore,s.targetId,!0))}async function Q4(t,e){const n=Le(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kg(n.remoteStore,r.targetId))}async function X4(t,e,n){const r=i5(t);try{const s=await function(o,a){const l=Le(o),c=Vt.now(),d=a.reduce((y,w)=>y.add(w.key),We());let m,g;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=fs(),x=We();return l.cs.getEntries(y,d).next(_=>{w=_,w.forEach((v,E)=>{E.isValidDocument()||(x=x.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,w)).next(_=>{m=_;const v=[];for(const E of a){const T=xD(E,m.get(E.key).overlayedDocument);T!=null&&v.push(new ii(E.key,T,xI(T.value.mapValue),En.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,v,a)}).next(_=>{g=_;const v=_.applyToLocalDocumentSet(m,x);return l.documentOverlayCache.saveOverlays(y,_.batchId,v)})}).then(()=>({batchId:g.batchId,changes:RI(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new wt(Ze)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await su(r,s.changes),await xh(r.remoteStore)}catch(s){const i=Zg(s,"Failed to persist write");n.reject(i)}}async function pS(t,e){const n=Le(t);try{const r=await f4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?tt(o.va):s.removedDocuments.size>0&&(tt(o.va),o.va=!1))}),await su(n,r,e)}catch(r){await Zl(r)}}function Ax(t,e,n){const r=Le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Le(o);l.onlineState=a;let c=!1;l.queries.forEach((d,m)=>{for(const g of m.j_)g.Z_(a)&&(c=!0)}),c&&e0(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Z4(t,e,n){const r=Le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new wt(Se.comparator);o=o.insert(i,hn.newNoDocument(i,Ue.min()));const a=We().add(i),l=new gh(Ue.min(),new Map,new wt(Ze),o,a);await pS(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),t0(r)}else await rm(r.localStore,e,!1).then(()=>im(r,e,n)).catch(Zl)}async function e5(t,e){const n=Le(t),r=e.batch.batchId;try{const s=await h4(n.localStore,e);gS(n,r,null),mS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await su(n,s)}catch(s){await Zl(s)}}async function t5(t,e,n){const r=Le(t);try{const s=await function(o,a){const l=Le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(m=>(tt(m!==null),d=m.keys(),l.mutationQueue.removeMutationBatch(c,m))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);gS(r,e,n),mS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await su(r,s)}catch(s){await Zl(s)}}function mS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function gS(t,e,n){const r=Le(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function im(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||yS(t,r)})}function yS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Kg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),t0(t))}function Nx(t,e,n){for(const r of n)r instanceof dS?(t.La.addReference(r.key,e),n5(t,r)):r instanceof hS?(Te("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||yS(t,r.key)):De()}function n5(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Te("SyncEngine","New document in limbo: "+n),t.xa.add(r),t0(t))}function t0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Se(ft.fromString(e)),r=t.qa.next();t.Na.set(r,new $4(n)),t.Oa=t.Oa.insert(n,r),nS(t.remoteStore,new Fs(Fr(Og(n.path)),r,"TargetPurposeLimboResolution",Dg.oe))}}async function su(t,e,n){const r=Le(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(c){s.push(c);const m=Wg.Wi(l.targetId,c);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const d=Le(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>de.forEach(c,g=>de.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(m,g.targetId,y)).next(()=>de.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(m,g.targetId,y)))))}catch(m){if(!eu(m))throw m;Te("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const y=d.os.get(g),w=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,x)}}}(r.localStore,i))}async function r5(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){Te("SyncEngine","User change. New user:",e.toKey());const r=await XI(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new be(le.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await su(n,r.hs)}}function s5(t,e){const n=Le(t),r=n.Na.get(e);if(r&&r.va)return We().add(r.key);{let s=We();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function vS(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z4.bind(null,e),e.Ca.d_=B4.bind(null,e.eventManager),e.Ca.$a=z4.bind(null,e.eventManager),e}function i5(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t5.bind(null,e),e}class kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return d4(this.persistence,new u4,e.initialUser,this.serializer)}Ga(e){return new o4(qg.Zr,this.serializer)}Wa(e){return new v4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kd.provider={build:()=>new kd};class om{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ax(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=r5.bind(null,this.syncEngine),await V4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new O4}()}createDatastore(e){const n=yh(e.databaseInfo.databaseId),r=function(i){return new b4(i)}(e.databaseInfo);return function(i,o,a,l){return new I4(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new k4(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ax(this.syncEngine,n,0),function(){return Tx.D()?new Tx:new x4}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const m=new q4(s,i,o,a,l,c);return d&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Le(s);Te("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ru(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}om.provider={build:()=>new om};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=cn.UNAUTHENTICATED,this.clientId=gI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Te("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Mf(t,e){t.asyncQueue.verifyOperationInProgress(),Te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await XI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await a5(t);Te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ix(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ix(e.remoteStore,s)),t._onlineComponents=e}async function a5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===le.FAILED_PRECONDITION||s.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;qo("Error using user provided cache. Falling back to memory cache: "+n),await Mf(t,new kd)}}else Te("FirestoreClient","Using default OfflineComponentProvider"),await Mf(t,new kd);return t._offlineComponents}async function n0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te("FirestoreClient","Using user provided OnlineComponentProvider"),await Rx(t,t._uninitializedComponentsProvider._online)):(Te("FirestoreClient","Using default OnlineComponentProvider"),await Rx(t,new om))),t._onlineComponents}function l5(t){return n0(t).then(e=>e.syncEngine)}function u5(t){return n0(t).then(e=>e.datastore)}async function wS(t){const e=await n0(t),n=e.eventManager;return n.onListen=W4.bind(null,e.syncEngine),n.onUnlisten=Y4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=K4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Q4.bind(null,e.syncEngine),n}function c5(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new xS({next:g=>{d.Za(),o.enqueueAndForget(()=>uS(i,m));const y=g.docs.has(a);!y&&g.fromCache?c.reject(new be(le.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&l&&l.source==="server"?c.reject(new be(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new cS(Og(a.path),d,{includeMetadataChanges:!0,_a:!0});return lS(i,m)}(await wS(t),t.asyncQueue,e,n,r)),r.promise}function d5(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new xS({next:g=>{d.Za(),o.enqueueAndForget(()=>uS(i,m)),g.fromCache&&l.source==="server"?c.reject(new be(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new cS(a,d,{includeMetadataChanges:!0,_a:!0});return lS(i,m)}(await wS(t),t.asyncQueue,e,n,r)),r.promise}function h5(t,e,n){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await u5(t);r.resolve(async function(o,a,l){var c;const d=Le(o),{request:m,ut:g,parent:y}=UD(d.serializer,iD(a),l);d.connection.Fo||delete m.parent;const w=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,y,m,1)).filter(_=>!!_.result);tt(w.length===1);const x=(c=w[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(x).reduce((_,v)=>(_[g[v]]=x[v],_),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t,e,n){if(!n)throw new be(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function f5(t,e,n,r){if(e===!0&&r===!0)throw new be(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Mx(t){if(!Se.isDocumentKey(t))throw new be(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dx(t){if(Se.isDocumentKey(t))throw new be(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De()}function qn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new be(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wh(t);throw new be(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function p5(t,e){if(e<=0)throw new be(le.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new be(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new be(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_S((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _h{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kM;switch(r.type){case"firstParty":return new RM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Px.get(n);r&&(Te("ComponentProvider","Removing Datastore"),Px.delete(n),r.terminate())}(this),Promise.resolve()}}function m5(t,e,n,r={}){var s;const i=(t=qn(t,_h))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=cn.MOCK_USER;else{a=LN(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new be(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new cn(c)}t._authCredentials=new CM(new mI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oi(this.firestore,e,this._query)}}class Tn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}}class Js extends oi{constructor(e,n,r){super(e,n,Og(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new Se(e))}withConverter(e){return new Js(this.firestore,e,this._path)}}function Tt(t,e,...n){if(t=Lt(t),bS("collection","path",e),t instanceof _h){const r=ft.fromString(e,...n);return Dx(r),new Js(t,null,r)}{if(!(t instanceof Tn||t instanceof Js))throw new be(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return Dx(r),new Js(t.firestore,null,r)}}function Ut(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=gI.newId()),bS("doc","path",e),t instanceof _h){const r=ft.fromString(e,...n);return Mx(r),new Tn(t,null,new Se(r))}{if(!(t instanceof Tn||t instanceof Js))throw new be(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return Mx(r),new Tn(t.firestore,t instanceof Js?t.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eS(this,"async_queue_retry"),this.Vu=()=>{const r=Pf();r&&Te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Pf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Pf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new jr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!eu(e))throw e;Te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw hs("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Xg.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&De()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class xs extends _h{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new jx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jx(e),this._firestoreClient=void 0,await e}}}function g5(t,e){const n=typeof t=="object"?t:kg(),r=typeof t=="string"?t:"(default)",s=qi(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=MN("firestore");i&&m5(s,...i)}return s}function iu(t){if(t._terminated)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||y5(t),t._firestoreClient}function y5(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new $M(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_S(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new o5(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class x5{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xo(en.fromBase64String(e))}catch(n){throw new be(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xo(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=/^__.*__$/;class _5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ii(e,this.data,this.fieldMask,n,this.fieldTransforms):new tu(e,this.data,n,this.fieldTransforms)}}class ES{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ii(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function TS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class i0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new i0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Cd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(TS(this.Cu)&&w5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class b5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yh(e)}Qu(e,n,r,s=!1){return new i0({Cu:e,methodName:n,qu:r,path:Yt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function au(t){const e=t._freezeSettings(),n=yh(t._databaseId);return new b5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function o0(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);l0("Data must be an object, but it was:",o,r);const a=kS(r,o);let l,c;if(i.merge)l=new zn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const g=am(e,m,n);if(!o.contains(g))throw new be(le.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);AS(d,g)||d.push(g)}l=new zn(d),c=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,c=o.fieldTransforms;return new _5(new Rn(a),l,c)}class Eh extends bh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Eh}}class a0 extends bh{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Gl(e.serializer,DI(e.serializer,this.$u));return new mD(e.path,n)}isEqual(e){return e instanceof a0&&this.$u===e.$u}}function IS(t,e,n,r){const s=t.Qu(1,e,n);l0("Data must be an object, but it was:",s,r);const i=[],o=Rn.empty();Wi(r,(l,c)=>{const d=u0(e,l,n);c=Lt(c);const m=s.Nu(d);if(c instanceof Eh)i.push(d);else{const g=lu(c,m);g!=null&&(i.push(d),o.set(d,g))}});const a=new zn(i);return new ES(o,a,s.fieldTransforms)}function SS(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[am(e,r,n)],l=[s];if(i.length%2!=0)throw new be(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(am(e,i[g])),l.push(i[g+1]);const c=[],d=Rn.empty();for(let g=a.length-1;g>=0;--g)if(!AS(c,a[g])){const y=a[g];let w=l[g];w=Lt(w);const x=o.Nu(y);if(w instanceof Eh)c.push(y);else{const _=lu(w,x);_!=null&&(c.push(y),d.set(y,_))}}const m=new zn(c);return new ES(d,m,o.fieldTransforms)}function E5(t,e,n,r=!1){return lu(n,t.Qu(r?4:3,e))}function lu(t,e){if(CS(t=Lt(t)))return l0("Unsupported field value:",e,t),kS(t,e);if(t instanceof bh)return function(r,s){if(!TS(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=lu(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Vt.fromDate(r);return{timestampValue:Id(s.serializer,i)}}if(r instanceof Vt){const i=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Id(s.serializer,i)}}if(r instanceof r0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xo)return{bytesValue:HI(s.serializer,r._byteString)};if(r instanceof Tn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Hg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof s0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Bg(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${wh(r)}`)}(t,e)}function kS(t,e){const n={};return yI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(t,(r,s)=>{const i=lu(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function CS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Vt||t instanceof r0||t instanceof Xo||t instanceof Tn||t instanceof bh||t instanceof s0)}function l0(t,e,n){if(!CS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=wh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function am(t,e,n){if((e=Lt(e))instanceof ou)return e._internalPath;if(typeof e=="string")return u0(t,e);throw Cd("Field path arguments must be of type string or ",t,!1,void 0,n)}const T5=new RegExp("[~\\*/\\[\\]]");function u0(t,e,n){if(e.search(T5)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ou(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new be(le.INVALID_ARGUMENT,a+t+l)}function AS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Th("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class I5 extends NS{data(){return super.data()}}function Th(t,e){return typeof e=="string"?u0(t,e):e instanceof ou?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new be(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c0{}class d0 extends c0{}function sr(t,e,...n){let r=[];e instanceof c0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof h0).length,a=i.filter(l=>l instanceof Ih).length;if(o>1||o>0&&a>0)throw new be(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ih extends d0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ih(e,n,r)}_apply(e){const n=this._parse(e);return RS(e._query,n),new oi(e.firestore,e.converter,Xp(e._query,n))}_parse(e){const n=au(e.firestore);return function(i,o,a,l,c,d,m){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new be(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Vx(m,d);const y=[];for(const w of m)y.push(Fx(l,i,w));g={arrayValue:{values:y}}}else g=Fx(l,i,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Vx(m,d),g=E5(a,o,m,d==="in"||d==="not-in");return Dt.create(c,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vi(t,e,n){const r=e,s=Th("where",t);return Ih._create(s,r,n)}class h0 extends c0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new h0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Tr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)RS(o,l),o=Xp(o,l)}(e._query,n),new oi(e.firestore,e.converter,Xp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class f0 extends d0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new f0(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new be(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new be(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ol(i,o)}(e._query,this._field,this._direction);return new oi(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new aa(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ui(t,e="asc"){const n=e,r=Th("orderBy",t);return f0._create(r,n)}class p0 extends d0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new p0(e,n,r)}_apply(e){return new oi(e.firestore,e.converter,Ed(e._query,this._limit,this._limitType))}}function Zo(t){return p5("limit",t),p0._create("limit",t,"F")}function Fx(t,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new be(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SI(e)&&n.indexOf("/")!==-1)throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ft.fromString(n));if(!Se.isDocumentKey(r))throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ix(t,new Se(r))}if(n instanceof Tn)return ix(t,n._key);throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wh(n)}.`)}function Vx(t,e){if(!Array.isArray(t)||t.length===0)throw new be(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RS(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new be(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class k5{convertValue(e,n="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>St(o.doubleValue));return new s0(i)}convertGeoPoint(e){return new r0(St(e.latitude),St(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fl(e));default:return null}}convertTimestamp(e){const n=Zs(e);return new Vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);tt(QI(r));const s=new Vl(r.get(1),r.get(3)),i=new Se(r.popFirst(5));return s.isEqual(n)||hs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function C5(){return new v5("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class PS extends NS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Th("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Fc extends PS{data(e={}){return super.data(e)}}class A5{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ka(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fc(this._firestore,this._userDataWriter,r.key,r,new Ka(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Fc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ka(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Fc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ka(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:N5(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function N5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){t=qn(t,Tn);const e=qn(t.firestore,xs);return c5(iu(e),t._key).then(n=>R5(e,t,n))}class g0 extends k5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,n)}}function ir(t){t=qn(t,oi);const e=qn(t.firestore,xs),n=iu(e),r=new g0(e);return S5(t._query),d5(n,t._query).then(s=>new A5(e,r,t,s))}function y0(t,e,n){t=qn(t,Tn);const r=qn(t.firestore,xs),s=m0(t.converter,e,n);return du(r,[o0(au(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,En.none())])}function uu(t,e,n,...r){t=qn(t,Tn);const s=qn(t.firestore,xs),i=au(s);let o;return o=typeof(e=Lt(e))=="string"||e instanceof ou?SS(i,"updateDoc",t._key,e,n,r):IS(i,"updateDoc",t._key,e),du(s,[o.toMutation(t._key,En.exists(!0))])}function cu(t){return du(qn(t.firestore,xs),[new mh(t._key,En.none())])}function ca(t,e){const n=qn(t.firestore,xs),r=Ut(t),s=m0(t.converter,e);return du(n,[o0(au(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}function du(t,e){return function(r,s){const i=new jr;return r.asyncQueue.enqueueAndForget(async()=>X4(await l5(r),s,i)),i.promise}(iu(t),e)}function R5(t,e,n){const r=n.docs.get(e._key),s=new g0(t);return new PS(t,s,e._key,r,new Ka(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(t){return P5(t,{count:C5()})}function P5(t,e){const n=qn(t.firestore,xs),r=iu(n),s=GM(e,(i,o)=>new ED(o,i.aggregateType,i._internalFieldPath));return h5(r,t._query,s).then(i=>function(a,l,c){const d=new g0(a);return new x5(l,d,c)}(n,t,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=au(e)}set(e,n,r){this._verifyNotCommitted();const s=Df(e,this._firestore),i=m0(s.converter,n,r),o=o0(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,En.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Df(e,this._firestore);let o;return o=typeof(n=Lt(n))=="string"||n instanceof ou?SS(this._dataReader,"WriteBatch.update",i._key,n,r,s):IS(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Df(e,this._firestore);return this._mutations=this._mutations.concat(new mh(n._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Df(t,e){if((t=Lt(t)).firestore!==e)throw new be(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Ux(t){return new a0("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t){return iu(t=qn(t,xs)),new M5(t,e=>du(t,e))}(function(e,n=!0){(function(s){oa=s})(ia),Or(new Er("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new xs(new AM(r.getProvider("auth-internal")),new MM(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new be(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vl(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),er(ex,"4.7.3",e),er(ex,"4.7.3","esm2017")})();function x0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function MS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const D5=MS,DS=new $i("auth","Firebase",MS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new ah("@firebase/auth");function L5(t,...e){Ad.logLevel<=Ke.WARN&&Ad.warn(`Auth (${ia}): ${t}`,...e)}function Vc(t,...e){Ad.logLevel<=Ke.ERROR&&Ad.error(`Auth (${ia}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t,...e){throw _0(t,...e)}function xr(t,...e){return _0(t,...e)}function w0(t,e,n){const r=Object.assign(Object.assign({},D5()),{[e]:n});return new $i("auth","Firebase",r).create(e,{appName:t.name})}function ki(t){return w0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function j5(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&zr(t,"argument-error"),w0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return DS.create(t,...e)}function Me(t,e,...n){if(!t)throw _0(e,...n)}function ts(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vc(e),new Error(e)}function ps(t,e){t||ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function F5(){return Ox()==="http:"||Ox()==="https:"}function Ox(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(F5()||PT()||"connection"in navigator)?navigator.onLine:!0}function U5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ps(n>e,"Short delay should be less than long delay!"),this.isMobile=jN()||UN()}get(){return V5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(t,e){ps(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5=new hu(3e4,6e4);function E0(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function da(t,e,n,r,s={}){return jS(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Xl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return VN()||(c.referrerPolicy="no-referrer"),LS.fetch()(FS(t,t.config.apiHost,n,a),c)})}async function jS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},O5),e);try{const s=new G5(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw fc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw fc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw fc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw fc(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw w0(t,d,c);zr(t,d)}}catch(s){if(s instanceof Ir)throw s;zr(t,"network-request-failed",{message:String(s)})}}async function z5(t,e,n,r,s={}){const i=await da(t,e,n,r,s);return"mfaPendingCredential"in i&&zr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function FS(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?b0(t.config,s):`${t.config.apiScheme}://${s}`}class G5{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xr(this.auth,"network-request-failed")),B5.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=xr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H5(t,e){return da(t,"POST","/v1/accounts:delete",e)}async function VS(t,e){return da(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $5(t,e=!1){const n=Lt(t),r=await n.getIdToken(e),s=T0(r);Me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:dl(Lf(s.auth_time)),issuedAtTime:dl(Lf(s.iat)),expirationTime:dl(Lf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Lf(t){return Number(t)*1e3}function T0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vc("JWT malformed, contained fewer than 3 sections"),null;try{const s=CT(n);return s?JSON.parse(s):(Vc("Failed to decode base64 JWT payload"),null)}catch(s){return Vc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Bx(t){const e=T0(t);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ir&&q5(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function q5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dl(this.lastLoginAt),this.creationTime=dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Hl(t,VS(n,{idToken:r}));Me(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?US(i.providerUserInfo):[],a=J5(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new um(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function K5(t){const e=Lt(t);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J5(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function US(t){return t.map(e=>{var{providerId:n}=e,r=x0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(t,e){const n=await jS(t,{},async()=>{const r=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=FS(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",LS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Q5(t,e){return da(t,"POST","/v2/accounts:revokeToken",E0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=Bx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Y5(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ro;return r&&(Me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Me(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Me(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t,e){Me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ns{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=x0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new W5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new um(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Hl(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $5(this,e)}reload(){return K5(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ns(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Nd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(es(this.auth.app))return Promise.reject(ki(this.auth));const e=await this.getIdToken();return await Hl(this,H5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:N,isAnonymous:L,providerData:U,stsTokenManager:k}=n;Me(T&&k,e,"internal-error");const R=Ro.fromJSON(this.name,k);Me(typeof T=="string",e,"internal-error"),Is(m,e.name),Is(g,e.name),Me(typeof N=="boolean",e,"internal-error"),Me(typeof L=="boolean",e,"internal-error"),Is(y,e.name),Is(w,e.name),Is(x,e.name),Is(_,e.name),Is(v,e.name),Is(E,e.name);const A=new ns({uid:T,auth:e,email:g,emailVerified:N,displayName:m,isAnonymous:L,photoURL:w,phoneNumber:y,tenantId:x,stsTokenManager:R,createdAt:v,lastLoginAt:E});return U&&Array.isArray(U)&&(A.providerData=U.map(M=>Object.assign({},M))),_&&(A._redirectEventId=_),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ro;s.updateFromServerResponse(n);const i=new ns({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Nd(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Me(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?US(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ro;a.updateFromIdToken(r);const l=new ns({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new um(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=new Map;function rs(t){ps(t instanceof Function,"Expected a class definition");let e=zx.get(t);return e?(ps(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OS.type="NONE";const Gx=OS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t,e,n){return`firebase:${t}:${e}:${n}`}class Po{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Uc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Uc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ns._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Po(rs(Gx),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||rs(Gx);const o=Uc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const m=ns._fromJSON(e,d);c!==i&&(a=m),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Po(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Po(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qS(e))return"Blackberry";if(WS(e))return"Webos";if(zS(e))return"Safari";if((e.includes("chrome/")||GS(e))&&!e.includes("edge/"))return"Chrome";if($S(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function BS(t=gn()){return/firefox\//i.test(t)}function zS(t=gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GS(t=gn()){return/crios\//i.test(t)}function HS(t=gn()){return/iemobile/i.test(t)}function $S(t=gn()){return/android/i.test(t)}function qS(t=gn()){return/blackberry/i.test(t)}function WS(t=gn()){return/webos/i.test(t)}function I0(t=gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function X5(t=gn()){var e;return I0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Z5(){return ON()&&document.documentMode===10}function KS(t=gn()){return I0(t)||$S(t)||WS(t)||qS(t)||/windows phone/i.test(t)||HS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t,e=[]){let n;switch(t){case"Browser":n=Hx(gn());break;case"Worker":n=`${Hx(gn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ia}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(t,e={}){return da(t,"GET","/v2/passwordPolicy",E0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=6;class rL{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:nL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $x(this),this.idTokenSubscription=new $x(this),this.beforeStateQueue=new eL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rs(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Po.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await VS(this,{idToken:e}),r=await ns._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(es(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=U5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(es(this.app))return Promise.reject(ki(this));const n=e?Lt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return es(this.app)?Promise.reject(ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return es(this.app)?Promise.reject(ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tL(this),n=new rL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $i("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Q5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&rs(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await Po.create(this,[rs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&L5(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ch(t){return Lt(t)}class $x{constructor(e){this.auth=e,this.observer=null,this.addObserver=WN(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iL(t){S0=t}function oL(t){return S0.loadJS(t)}function aL(){return S0.gapiScript}function lL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t,e){const n=qi(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Dl(i,e??{}))return s;zr(s,"already-initialized")}return n.initialize({options:e})}function cL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function dL(t,e,n){const r=Ch(t);Me(r._canInitEmulator,r,"emulator-config-failed"),Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=YS(e),{host:o,port:a}=hL(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),fL()}function YS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function hL(t){const e=YS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:qx(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:qx(o)}}}function qx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function fL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ts("not implemented")}_getIdTokenResponse(e){return ts("not implemented")}_linkToIdToken(e,n){return ts("not implemented")}_getReauthenticationResolver(e){return ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(t,e){return z5(t,"POST","/v1/accounts:signInWithIdp",E0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL="http://localhost";class Oi extends QS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=x0(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Oi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Mo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Mo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Mo(e,n)}buildRequest(){const e={requestUri:pL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends k0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends fu{constructor(){super("facebook.com")}static credential(e){return Oi._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends fu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oi._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Qr.credential(n,r)}catch{return null}}}Qr.GOOGLE_SIGN_IN_METHOD="google.com";Qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends fu{constructor(){super("github.com")}static credential(e){return Oi._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends fu{constructor(){super("twitter.com")}static credential(e,n){return Oi._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ms.credential(n,r)}catch{return null}}}Ms.TWITTER_SIGN_IN_METHOD="twitter.com";Ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ns._fromIdTokenResponse(e,r,s),o=Wx(r);return new ea({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Wx(r);return new ea({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Wx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends Ir{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Rd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Rd(e,n,r,s)}}function XS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Rd._fromErrorAndOperation(t,i,e,r):i})}async function mL(t,e,n=!1){const r=await Hl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ea._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gL(t,e,n=!1){const{auth:r}=t;if(es(r.app))return Promise.reject(ki(r));const s="reauthenticate";try{const i=await Hl(t,XS(r,s,e,t),n);Me(i.idToken,r,"internal-error");const o=T0(i.idToken);Me(o,r,"internal-error");const{sub:a}=o;return Me(t.uid===a,r,"user-mismatch"),ea._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&zr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yL(t,e,n=!1){if(es(t.app))return Promise.reject(ki(t));const r="signIn",s=await XS(t,r,e),i=await ea._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function vL(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}function xL(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function wL(t){return Lt(t).signOut()}const Pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pd,"1"),this.storage.removeItem(Pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=1e3,bL=10;class e1 extends ZS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);Z5()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_L)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}e1.type="LOCAL";const EL=e1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1 extends ZS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}t1.type="SESSION";const n1=t1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ah(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await TL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=C0("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return window}function SL(t){Ur().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function kL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function AL(){return r1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="firebaseLocalStorageDb",NL=1,Md="firebaseLocalStorage",i1="fbase_key";class pu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nh(t,e){return t.transaction([Md],e?"readwrite":"readonly").objectStore(Md)}function RL(){const t=indexedDB.deleteDatabase(s1);return new pu(t).toPromise()}function cm(){const t=indexedDB.open(s1,NL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Md,{keyPath:i1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Md)?e(r):(r.close(),await RL(),e(await cm()))})})}async function Kx(t,e,n){const r=Nh(t,!0).put({[i1]:e,value:n});return new pu(r).toPromise()}async function PL(t,e){const n=Nh(t,!1).get(e),r=await new pu(n).toPromise();return r===void 0?null:r.value}function Jx(t,e){const n=Nh(t,!0).delete(e);return new pu(n).toPromise()}const ML=800,DL=3;class o1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>DL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return r1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ah._getInstance(AL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kL(),!this.activeServiceWorker)return;this.sender=new IL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cm();return await Kx(e,Pd,"1"),await Jx(e,Pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Kx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>PL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Nh(s,!1).getAll();return new pu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ML)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o1.type="LOCAL";const LL=o1;new hu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t,e){return e?rs(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends QS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jL(t){return yL(t.auth,new A0(t),t.bypassAuthState)}function FL(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),gL(n,new A0(t),t.bypassAuthState)}async function VL(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),mL(n,new A0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jL;case"linkViaPopup":case"linkViaRedirect":return VL;case"reauthViaPopup":case"reauthViaRedirect":return FL;default:zr(this.auth,"internal-error")}}resolve(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=new hu(2e3,1e4);async function OL(t,e,n){if(es(t.app))return Promise.reject(xr(t,"operation-not-supported-in-this-environment"));const r=Ch(t);j5(t,e,k0);const s=a1(r,n);return new Ei(r,"signInViaPopup",e,s).executeNotNull()}class Ei extends l1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ei.currentPopupAction&&Ei.currentPopupAction.cancel(),Ei.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){ps(this.filter.length===1,"Popup operations only handle one event");const e=C0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ei.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UL.get())};e()}}Ei.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL="pendingRedirect",Oc=new Map;class zL extends l1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Oc.get(this.auth._key());if(!e){try{const r=await GL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Oc.set(this.auth._key(),e)}return this.bypassAuthState||Oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GL(t,e){const n=qL(e),r=$L(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function HL(t,e){Oc.set(t._key(),e)}function $L(t){return rs(t._redirectPersistence)}function qL(t){return Uc(BL,t.config.apiKey,t.name)}async function WL(t,e,n=!1){if(es(t.app))return Promise.reject(ki(t));const r=Ch(t),s=a1(r,e),o=await new zL(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=10*60*1e3;class JL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!u1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yx(e))}saveEventToCache(e){this.cachedEventUids.add(Yx(e)),this.lastProcessedEventTime=Date.now()}}function Yx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function u1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return u1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(t,e={}){return da(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZL=/^https?/;async function e3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QL(t);for(const n of e)try{if(t3(n))return}catch{}zr(t,"unauthorized-domain")}function t3(t){const e=lm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ZL.test(n))return!1;if(XL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=new hu(3e4,6e4);function Qx(){const t=Ur().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function r3(t){return new Promise((e,n)=>{var r,s,i;function o(){Qx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qx(),n(xr(t,"network-request-failed"))},timeout:n3.get()})}if(!((s=(r=Ur().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Ur().gapi)===null||i===void 0)&&i.load)o();else{const a=lL("iframefcb");return Ur()[a]=()=>{gapi.load?o():n(xr(t,"network-request-failed"))},oL(`${aL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Bc=null,e})}let Bc=null;function s3(t){return Bc=Bc||r3(t),Bc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3=new hu(5e3,15e3),o3="__/auth/iframe",a3="emulator/auth/iframe",l3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c3(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?b0(e,a3):`https://${t.config.authDomain}/${o3}`,r={apiKey:e.apiKey,appName:t.name,v:ia},s=u3.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Xl(r).slice(1)}`}async function d3(t){const e=await s3(t),n=Ur().gapi;return Me(n,t,"internal-error"),e.open({where:document.body,url:c3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l3,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=xr(t,"network-request-failed"),a=Ur().setTimeout(()=>{i(o)},i3.get());function l(){Ur().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f3=500,p3=600,m3="_blank",g3="http://localhost";class Xx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function y3(t,e,n,r=f3,s=p3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},h3),{width:r.toString(),height:s.toString(),top:i,left:o}),c=gn().toLowerCase();n&&(a=GS(c)?m3:n),BS(c)&&(e=e||g3,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(X5(c)&&a!=="_self")return v3(e||"",a),new Xx(null);const m=window.open(e||"",a,d);Me(m,t,"popup-blocked");try{m.focus()}catch{}return new Xx(m)}function v3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3="__/auth/handler",w3="emulator/auth/handler",_3=encodeURIComponent("fac");async function Zx(t,e,n,r,s,i){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ia,eventId:s};if(e instanceof k0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",qN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof fu){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${_3}=${encodeURIComponent(l)}`:"";return`${b3(t)}?${Xl(a).slice(1)}${c}`}function b3({config:t}){return t.emulator?b0(t,w3):`https://${t.authDomain}/${x3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="webStorageSupport";class E3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=n1,this._completeRedirectFn=WL,this._overrideRedirectResult=HL}async _openPopup(e,n,r,s){var i;ps((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Zx(e,n,r,lm(),s);return y3(e,o,C0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Zx(e,n,r,lm(),s);return SL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ps(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await d3(e),r=new JL(e);return n.register("authEvent",s=>(Me(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jf,{type:jf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[jf];o!==void 0&&n(!!o),zr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=e3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return KS()||zS()||I0()}}const T3=E3;var ew="@firebase/auth",tw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function k3(t){Or(new Er("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JS(t)},c=new sL(r,s,i,l);return cL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Or(new Er("auth-internal",e=>{const n=Ch(e.getProvider("auth").getImmediate());return(r=>new I3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),er(ew,tw,S3(t)),er(ew,tw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=5*60,A3=RT("authIdTokenMaxAge")||C3;let nw=null;const N3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>A3)return;const s=n==null?void 0:n.token;nw!==s&&(nw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function R3(t=kg()){const e=qi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uL(t,{popupRedirectResolver:T3,persistence:[LL,EL,n1]}),r=RT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=N3(i.toString());xL(n,o,()=>o(n.currentUser)),vL(n,a=>o(a))}}const s=AT("auth");return s&&dL(n,`http://${s}`),n}function P3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}iL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=xr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",P3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});k3("Browser");const M3={apiKey:"AIzaSyDjgrBvKUaVg9U1XustHj9TeO4lHZDrcNg",authDomain:"fanra-dev.firebaseapp.com",projectId:"fanra-dev",storageBucket:"fanra-dev.firebasestorage.app",messagingSenderId:"664735861834",appId:"1:664735861834:web:6519570201553dbe4faab3",measurementId:"G-HMKEVZS65H"},N0=VT(M3);EM(N0);const Ge=g5(N0),c1=R3(N0),D3=new Qr,ha="users",d1="chats",h1="knowledge_base",$l="shared_api_keys",mu="gallery_photos_production",fa="blog_posts_production",Rh="music_playlist",f1="site_content",p1="analytics_daily",L3="analytics_logs",Ph="messages",Ff=5,m1=[{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/609923798_2054349268723214_528785191593339343_n.webp?stp=dst-webp_s960x960&_nc_cat=110&ccb=1-7&_nc_sid=9f807c&_nc_ohc=BZOOtuLCh5UQ7kNvwGKzWef&_nc_oc=AdmGNpGcSr3xRboqLJeuQ8M5KjOpRBNLbsqQVscddteG1f05EVO_Kv4iZQn5l2OjztzywzdnV5Qp-sDi35XjQWpa&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QGA47iTm-6vGLy8O36BgFnvih3m4gJ3HjjJLwTB_h1_yg&oe=6987DFA2",caption:"Awal tahun yang tenang. Duduk santai menikmati sore.",month:"Januari",year:"2026",timestamp:1768608e6}],Dd=[{title:"Glitch in the Matrix: Bukti Kita Cuma Kode Biner?",subtitle:"Teori simulasi Nick Bostrom yang bikin Elon Musk kepikiran tiap malam.",category:"Konspirasi Sains",date:"20 Januari 2026",readTime:"8 min read",author:"Fanra",image:"https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?q=80&w=2070&auto=format&fit=crop",content:`Pernah ngerasa dj vu? Atau ngeliat sesuatu yang kayaknya 'nggak masuk akal' secara fisika? Banyak ilmuwan, termasuk Elon Musk, percaya peluang kita hidup di 'base reality' (kenyataan asli) itu cuma satu banding miliaran.

Bayangkan game The Sims atau GTA. Karakternya nggak sadar mereka ada di game. Seiring teknologi komputer kita makin canggih (VR, AI, Quantum Computing), kita makin dekat bisa bikin simulasi yang persis kenyataan. Kalau kita bisa bikin itu, siapa yang menjamin kalau KITA ini bukan hasil simulasi peradaban yang lebih maju?

Fisikawan James Gates bahkan nemuin kode error koreksi komputer (adinkras) di dalam persamaan supersimetri yang menjelaskan alam semesta. Kok bisa ada kode komputer di hukum fisika?`,timestamp:17699168e5},{title:"Paradoks Fermi: Keheningan yang Memekakkan Telinga",subtitle:"Jika alam semesta ini tak terhingga luasnya dan tua usianya, di mana semua orang?",category:"Sains & Filsafat",date:"9 Januari 2026",readTime:"7 min read",author:"Fanra",image:"https://upload.wikimedia.org/wikipedia/commons/6/69/NASA-HS201427a-HubbleUltraDeepField2014-20140603.jpg",content:`Pernahkah lo menatap langit malam yang cerah, melihat ribuan bintang, dan merasa betapa kecilnya kita? Lalu muncul satu pertanyaan sederhana yang menghantui para ilmuwan selama puluhan tahun: "Di mana mereka semua?"

Mari kita bicara matematika sebentar. Galaksi Bima Sakti kita sendiri memiliki sekitar 100 hingga 400 miliar bintang. Dan di alam semesta yang teramati, ada triliunan galaksi lain. Bahkan jika hanya sebagian kecil dari bintang-bintang itu memiliki planet yang mirip Bumi, seharusnya ada jutaan peradaban cerdas di luar sana.

Alam semesta berumur sekitar 13,8 miliar tahun. Bumi baru berumur 4,5 miliar tahun. Artinya, ada peradaban lain yang mungkin sudah ada miliaran tahun sebelum kita. Bayangkan teknologi mereka. Seharusnya, mereka sudah mengkolonisasi galaksi, atau setidaknya mengirim sinyal yang bisa kita tangkap. Tapi yang kita dapatkan hanyalah... kesunyian. Inilah yang disebut Paradoks Fermi.`,sources:[{label:"Wikipedia - Fermi Paradox",url:"https://en.wikipedia.org/wiki/Fermi_paradox"},{label:"Wait But Why - The Fermi Paradox",url:"https://waitbutwhy.com/2014/05/fermi-paradox.html"}],timestamp:17679168e5}],g1=[{id:"initial_track_1",spotifyId:"08A9yuCnJwBmItI1U9BZ7a",title:"Cincin",artist:"Hindia",addedAt:Date.now()}],j3=t=>t.toLowerCase().trim().replace(/[^a-z0-9]/g,""),F3=async()=>{try{const e=(await OL(c1,D3)).user,n=Ut(Ge,ha,e.uid),r=await Sh(n),s=e.email==="irfanrizkiaditri@gmail.com";let i=Ff,o={name:e.displayName||"Pengguna Google",school:"Google Account",deviceId:e.uid,email:e.email,photoURL:e.photoURL,isAdmin:s,lastLogin:new Date().toISOString()};if(r.exists()){const a=r.data();i=a.credits??Ff,o.isAdmin=a.isAdmin||s,await uu(n,{lastLogin:new Date().toISOString(),photoURL:e.photoURL})}else await y0(n,{...o,credits:Ff,createdAt:new Date().toISOString(),apiKeys:[]});return{user:o,credits:i,id:e.uid}}catch(t){throw console.error("Google Sign In Error",t),t}},V3=async()=>{try{await wL(c1)}catch(t){console.error("Logout error",t)}},U3=async t=>{if(t.startsWith("offline_"))return[];try{const e=await Sh(Ut(Ge,ha,t));return e.exists()?e.data().apiKeys||[]:[]}catch{return[]}},rw=async(t,e)=>{if(!t.startsWith("offline_"))try{await uu(Ut(Ge,ha,t),{apiKeys:e});for(const n of e)if(n.isShared){const r=sr(Tt(Ge,$l),Vi("key","==",n.key));(await ir(r)).empty&&await ca(Tt(Ge,$l),{key:n.key,provider:t,addedAt:Date.now(),isActive:!0})}}catch{}},O3=async(t,e,n)=>{if(!t.startsWith("offline_"))try{const r=n.filter(o=>o.key!==e);await uu(Ut(Ge,ha,t),{apiKeys:r});const s=sr(Tt(Ge,$l),Vi("key","==",e),Vi("provider","==",t));(await ir(s)).forEach(async o=>{await cu(Ut(Ge,$l,o.id))})}catch{}},B3=async()=>{try{const t=sr(Tt(Ge,$l),Vi("isActive","==",!0),Ui("addedAt","desc"),Zo(10));return(await ir(t)).docs.map(n=>n.data().key).sort(()=>.5-Math.random()).slice(0,5)}catch{return[]}},sw=async(t,e)=>{if(!t.startsWith("offline_"))try{await ca(Tt(Ge,ha,t,d1),e)}catch{}},z3=async t=>{if(t.startsWith("offline_"))return[];try{const e=sr(Tt(Ge,ha,t,d1),Ui("timestamp","asc"),Zo(50));return(await ir(e)).docs.map(r=>r.data())}catch{return[]}},iw=async t=>{try{const e=j3(t);if(!e)return null;const n=sr(Tt(Ge,h1),Vi("question_normalized","==",e)),r=await ir(n);return r.empty?null:r.docs[0].data().answer}catch{return null}},G3=async()=>{try{return(await kh(Tt(Ge,h1))).data().count}catch{return 0}},H3=async()=>{try{const t=Tt(Ge,mu);if((await kh(t)).data().count===0){const e=v0(Ge);m1.forEach(n=>e.set(Ut(t),{...n})),await e.commit()}}catch{}},y1=async()=>{try{await H3();const t=sr(Tt(Ge,mu),Ui("timestamp","desc")),e=await ir(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return m1.map((e,n)=>({id:`local-${n}`,...e}))}},$3=async t=>{try{await ca(Tt(Ge,mu),t)}catch(e){throw e}},q3=async(t,e)=>{try{await uu(Ut(Ge,mu,t),e)}catch(n){throw n}},W3=async t=>{try{await cu(Ut(Ge,mu,t))}catch(e){throw e}},K3=async()=>{try{const t=Tt(Ge,fa);if((await kh(t)).data().count===0){const e=v0(Ge);Dd.forEach(n=>e.set(Ut(t),{...n})),await e.commit()}}catch{}},v1=async()=>{try{await K3();const t=sr(Tt(Ge,fa),Ui("timestamp","desc")),e=await ir(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return Dd.map((e,n)=>({id:`local-${n}`,...e}))}},J3=async t=>{try{if(t.startsWith("local-")){const r=parseInt(t.split("-")[1]);return Dd[r]?{id:t,...Dd[r]}:null}const e=Ut(Ge,fa,t),n=await Sh(e);return n.exists()?{id:n.id,...n.data()}:null}catch{return null}},Y3=async t=>{try{await ca(Tt(Ge,fa),t)}catch(e){throw e}},Q3=async(t,e)=>{try{await uu(Ut(Ge,fa,t),e)}catch(n){throw n}},X3=async t=>{try{await cu(Ut(Ge,fa,t))}catch(e){throw e}},Z3=async()=>{try{const t=Tt(Ge,Rh);if((await kh(t)).data().count===0){const e=v0(Ge);g1.forEach(n=>e.set(Ut(t),{...n})),await e.commit()}}catch{}},ej=async()=>{try{await Z3();const t=sr(Tt(Ge,Rh),Ui("addedAt","desc")),e=await ir(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return g1}},tj=async t=>{try{await ca(Tt(Ge,Rh),t)}catch(e){throw e}},nj=async t=>{try{await cu(Ut(Ge,Rh,t))}catch(e){throw e}};let Do={};const ow=()=>{Do={},console.log("Cache cleared.")},aw=t=>Do[t]||null,R0=async t=>{if(Do[t])return Do[t];try{const e=await Sh(Ut(Ge,f1,t));if(e.exists()){const n=e.data().text;return Do[t]=n,n}return null}catch{return null}},P0=async(t,e)=>{Do[t]=e;try{await y0(Ut(Ge,f1,t),{text:e,updatedAt:Date.now()},{merge:!0})}catch(n){throw n}},rj=async t=>{try{await ca(Tt(Ge,Ph),{...t,timestamp:Date.now(),isRead:!1})}catch(e){throw e}},sj=async t=>{try{await cu(Ut(Ge,Ph,t))}catch(e){throw e}},ij=async()=>{try{const t=sr(Tt(Ge,Ph),Vi("type","==","public"),Zo(100));return(await ir(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch{return[]}},oj=async()=>{try{const t=sr(Tt(Ge,Ph),Vi("type","==","private"),Zo(100));return(await ir(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch{return[]}},aj=()=>new Date().toISOString().split("T")[0],lj=async()=>{let t="ID";try{const e=new AbortController,n=setTimeout(()=>e.abort(),2e3),r=await fetch("https://ipapi.co/country/",{signal:e.signal});if(clearTimeout(n),r.ok){const s=await r.text();s&&s.length===2&&(t=s.toUpperCase())}}catch{t=Math.random()>.3?"ID":Math.random()>.5?"US":"SG"}try{const e=aj(),n=Ut(Ge,p1,e);await y0(n,{date:e,visitors:Ux(1),[`geo.${t}`]:Ux(1),timestamp:Date.now()},{merge:!0})}catch{}},uj=async()=>{try{const t=sr(Tt(Ge,p1),Ui("date","desc"),Zo(7)),e=await ir(t),n=[];let r=0,s=0;const i={};e.forEach(d=>{const m=d.data();n.unshift({date:m.date,visitors:m.visitors||0,errors:m.errors||0}),r+=m.visitors||0,s+=m.errors||0,m.geo&&Object.keys(m.geo).forEach(g=>{i[g]=(i[g]||0)+m.geo[g]})});const o=sr(Tt(Ge,L3),Ui("timestamp","desc"),Zo(10)),l=(await ir(o)).docs.map(d=>({id:d.id,...d.data()})),c=Object.entries(i).map(([d,m])=>({country:d,count:m})).sort((d,m)=>m.count-d.count);return{dailyStats:n,totalVisitors:r,totalErrors:s,logs:l,geoStats:c}}catch{return null}},cj=[{label:"Biru",hex:"#3b82f6"},{label:"Merah",hex:"#ef4444"},{label:"Hijau",hex:"#22c55e"},{label:"Ungu",hex:"#a855f7"},{label:"Emas",hex:"#eab308"},{label:"Hitam",hex:"#0f172a"},{label:"Slate",hex:"#64748b"}],dj=[{label:"",value:"to right",title:"Ke Kanan"},{label:"",value:"to bottom",title:"Ke Bawah"},{label:"",value:"135deg",title:"Diagonal Bawah"},{label:"",value:"to left",title:"Ke Kiri"},{label:"",value:"to top",title:"Ke Atas"},{label:"",value:"45deg",title:"Diagonal Atas"}],ct=({id:t,defaultText:e,isAdmin:n,className:r="",tag:s="p",multiline:i=!1})=>{const[o,a]=F.useState(()=>aw(t)||e),[l,c]=F.useState(!1),[d,m]=F.useState("solid"),[g,y]=F.useState("#3b82f6"),[w,x]=F.useState("#3b82f6"),[_,v]=F.useState("#a855f7"),[E,T]=F.useState("to right"),N=F.useRef(null);F.useEffect(()=>{let M=!0;return(async()=>{try{const P=await R0(t);M&&P&&P!==o&&a(P)}catch{}})(),()=>{M=!1}},[t]),F.useEffect(()=>{l&&N.current&&(N.current.style.height="auto",N.current.style.height=N.current.scrollHeight+"px")},[l,o]);const L=async()=>{c(!1);try{await P0(t,o)}catch{alert("Gagal menyimpan perubahan teks.")}},U=()=>{c(!1);const M=aw(t);M&&a(M)},k=()=>{const M=N.current;if(!M)return;const V=M.selectionStart,P=M.selectionEnd;if(V===P)return;const D=o.substring(V,P),I=o.substring(0,V),$=o.substring(P);let ce="";d==="solid"?ce=`<span style="color: ${g}">${D}</span>`:ce=`<span style="background: ${`linear-gradient(${E}, ${w}, ${_})`}; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 800; -webkit-box-decoration-break: clone; box-decoration-break: clone;">${D}</span>`,a(I+ce+$)},R=()=>{const M=N.current;if(!M)return;const V=M.selectionStart,P=M.selectionEnd;if(V===P)return;const D=o.substring(V,P),I=o.substring(0,V),$=o.substring(P),ce=D.replace(/<\/?[^>]+(>|$)/g,"");a(I+ce+$)},A=()=>{const M=w;x(_),v(M)};return l?u.jsx("div",{className:`relative z-[100] ${r}`,children:u.jsxs("div",{className:"bg-white border border-slate-200 shadow-2xl rounded-2xl overflow-hidden min-w-[300px] md:min-w-[500px] flex flex-col animate-fade-in-up",children:[u.jsxs("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-100 flex justify-between items-center",children:[u.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:["Editing: ",u.jsx("span",{className:"text-slate-800",children:t.split("_").pop()})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:U,className:"px-3 py-1.5 text-xs font-bold text-slate-500 hover:text-slate-800 rounded-lg transition-colors",children:"Batal"}),u.jsxs("button",{onClick:L,className:"px-4 py-1.5 text-xs font-bold bg-slate-900 text-white hover:bg-slate-800 rounded-lg flex items-center gap-1.5 shadow-md active:scale-95 transition-all",children:[u.jsx(cs,{className:"w-3 h-3"})," Simpan"]})]})]}),u.jsxs("div",{className:"p-4 bg-white relative",children:[u.jsx("textarea",{ref:N,value:o,onChange:M=>a(M.target.value),className:"w-full bg-transparent border-none outline-none text-sm font-mono text-slate-600 resize-none min-h-[100px] leading-relaxed placeholder:text-slate-300",placeholder:"Tulis teks atau HTML disini...",spellCheck:!1}),u.jsx("div",{className:"absolute top-2 right-2 opacity-10 pointer-events-none",children:u.jsx("span",{className:"text-[10px] font-mono",children:"HTML MODE"})})]}),u.jsx("div",{className:"bg-slate-50/50 border-t border-slate-100 p-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-lg w-fit",children:[u.jsx("button",{onClick:()=>m("solid"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all ${d==="solid"?"bg-white text-slate-900 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:"Solid Color"}),u.jsxs("button",{onClick:()=>m("gradient"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all flex items-center gap-1 ${d==="gradient"?"bg-white text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[u.jsx(sN,{className:"w-3 h-3"})," Gradient"]})]}),u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[d==="solid"?u.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[u.jsx("div",{className:"p-1.5 bg-white border border-slate-200 rounded-lg shadow-sm shrink-0",children:u.jsx(rN,{className:"w-4 h-4 text-slate-400"})}),u.jsxs("div",{className:"flex gap-2",children:[cj.map(M=>u.jsx("button",{onClick:()=>y(M.hex),className:`w-6 h-6 rounded-full border-2 transition-transform hover:scale-110 shrink-0 ${g===M.hex?"border-slate-400 scale-110":"border-white shadow-sm"}`,style:{backgroundColor:M.hex},title:M.label},M.hex)),u.jsx("div",{className:"w-px h-6 bg-slate-300 mx-1"}),u.jsx("input",{type:"color",value:g,onChange:M=>y(M.target.value),className:"w-6 h-6 rounded-full cursor-pointer border border-slate-200 bg-white p-0 overflow-hidden shrink-0",title:"Custom Color"})]})]}):u.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Start"}),u.jsx("input",{type:"color",value:w,onChange:M=>x(M.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),u.jsx("button",{onClick:A,className:"text-slate-400 hover:text-slate-600 transition-colors p-1",title:"Tukar Warna",children:u.jsx(ih,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"End"}),u.jsx("input",{type:"color",value:_,onChange:M=>v(M.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),u.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white shadow-md ml-auto",style:{background:`linear-gradient(${E}, ${w}, ${_})`},title:"Preview Gradient"})]}),u.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 no-scrollbar",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase shrink-0 mr-1",children:"Arah:"}),dj.map(M=>u.jsx("button",{onClick:()=>T(M.value),className:`w-7 h-7 flex items-center justify-center rounded-md border text-sm transition-all shrink-0 ${E===M.value?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,title:M.title,children:M.label},M.value))]})]}),u.jsxs("div",{className:"flex items-center gap-2 w-full justify-end mt-2 pt-2 border-t border-slate-100",children:[u.jsxs("button",{onClick:R,className:"text-[10px] font-bold bg-white border border-slate-200 hover:border-red-300 hover:text-red-500 text-slate-500 px-3 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex items-center gap-1.5",title:"Hapus format",children:[u.jsx(Z2,{className:"w-3.5 h-3.5"}),"Hapus Format"]}),u.jsxs("button",{onClick:k,className:"text-[10px] font-bold bg-blue-50 border border-blue-200 hover:bg-blue-100 text-blue-700 px-4 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex-1 justify-center flex",children:["Terapkan ",d==="solid"?"Warna":"Gradasi"]})]})]}),u.jsxs("p",{className:"text-[9px] text-slate-400 italic text-center",children:["*Blok teks di atas, atur ",d,", lalu klik Terapkan."]})]})})]})}):u.jsxs(s,{className:`relative group ${r} ${n?"cursor-pointer hover:opacity-80 transition-opacity decoration-blue-500/30":""}`,onClick:M=>{n&&(M.stopPropagation(),c(!0))},title:n?"Klik untuk mengedit warna & teks":void 0,children:[u.jsx("span",{dangerouslySetInnerHTML:{__html:o}}),n&&u.jsx("span",{className:"inline-flex ml-2 opacity-0 group-hover:opacity-100 transition-all duration-300 align-middle bg-slate-100 p-1 rounded-md border border-slate-200 shadow-sm absolute -top-4 -right-4 md:static",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-500",children:[u.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),u.jsx("path",{d:"m15 5 4 4"})]})})]})},hj=({isAdmin:t})=>{const e=Hi(),[n,r]=F.useState(!1),[s,i]=F.useState({left:0,width:0,opacity:0}),[o,a]=F.useState(!1),l=F.useRef({}),c=[{path:"/",label:"Home"},{path:"/projects",label:"Projects"},{path:"/blog",label:"Blog"},{path:"/gallery",label:"Gallery"},{path:"/music",label:"Music"},{path:"/messages",label:"Pesan"}];F.useEffect(()=>{const g=()=>{const w=e.pathname;let x=c.find(v=>v.path===w);x||(x=c.find(v=>v.path!=="/"&&w.startsWith(v.path))),x||(x=c[0]);const _=l.current[x.path];_&&i({left:_.offsetLeft,width:_.offsetWidth,opacity:1})},y=setTimeout(g,50);return window.addEventListener("resize",g),()=>{clearTimeout(y),window.removeEventListener("resize",g)}},[e.pathname]);const d=()=>{a(!0),setTimeout(()=>{r(!1),a(!1)},700)},m=g=>g==="/"?e.pathname==="/":e.pathname.startsWith(g);return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:`
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          @keyframes curtainDown {
             from { transform: translateY(-100%); border-radius: 0 0 100px 100px; }
             to { transform: translateY(0); border-radius: 0; }
          }
          @keyframes curtainUp {
             from { transform: translateY(0); border-radius: 0; }
             to { transform: translateY(-100%); border-radius: 0 0 100px 100px; }
          }
          .animate-blob { animation: blob 10s infinite; }
          .animation-delay-2000 { animation-delay: 2s; }
          .animation-delay-4000 { animation-delay: 4s; }
          .animate-curtain-down { animation: curtainDown 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
          .animate-curtain-up { animation: curtainUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
        `}),u.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-100 transition-all",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center",children:[u.jsxs(il,{to:"/",className:"flex items-center gap-3 cursor-pointer group mr-8",children:[u.jsx(Ho,{className:"w-8 h-8 transition-all duration-500 ease-out group-hover:scale-110 group-hover:drop-shadow-[0_0_15px_rgba(59,130,246,0.5)]",variant:"dark"}),u.jsx("div",{className:"flex flex-col justify-center",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ct,{id:"navbar_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:t,tag:"span",className:"text-sm font-black tracking-tighter uppercase text-slate-900 leading-none"}),t&&u.jsx("span",{className:"bg-slate-900 text-white text-[9px] font-bold px-1.5 py-0.5 rounded leading-none shadow-sm",children:"ADMIN"})]})})]}),u.jsxs("div",{className:"hidden md:flex items-center relative ml-auto bg-slate-50/50 rounded-full p-1 border border-slate-200/60",children:[u.jsx("div",{className:"absolute top-1 bottom-1 bg-slate-900 rounded-full transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1)] shadow-md z-0 pointer-events-none",style:{left:s.left,width:s.width,opacity:s.opacity}}),c.map(g=>u.jsx(il,{to:g.path,ref:y=>{l.current[g.path]=y},className:`relative z-10 px-6 py-2 rounded-full text-xs font-bold uppercase tracking-wide transition-colors duration-300 ${m(g.path)?"text-white":"text-slate-500 hover:text-slate-900"}`,children:g.label},g.path))]}),u.jsx("button",{className:"md:hidden p-2 text-slate-600 ml-auto",onClick:()=>r(!n),children:u.jsx(wT,{className:"w-6 h-6"})})]})}),(n||o)&&u.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden flex flex-col items-center justify-center p-6 overflow-hidden bg-white ${o?"animate-curtain-up":"animate-curtain-down"}`,children:[u.jsxs("div",{className:"absolute inset-0 z-0 w-full h-full pointer-events-none",children:[u.jsx("div",{className:"absolute top-0 -left-10 w-96 h-96 bg-slate-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob"}),u.jsx("div",{className:"absolute top-1/4 -right-20 w-80 h-80 bg-gray-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"}),u.jsx("div",{className:"absolute -bottom-20 left-1/3 w-96 h-96 bg-zinc-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-4000"}),u.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-[10px]"})]}),u.jsxs("div",{className:`relative z-10 w-full flex flex-col items-center transition-all duration-500 ${o?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:[u.jsx("button",{className:"absolute -top-32 right-0 p-3 rounded-full bg-white text-slate-400 hover:text-slate-900 transition-colors shadow-sm border border-slate-100",onClick:()=>d(),children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})}),u.jsx("div",{className:"absolute -top-32 left-0 flex items-center gap-3",children:u.jsx(Ho,{className:"w-12 h-12",variant:"dark"})}),u.jsx("div",{className:"flex flex-col gap-6 w-full max-w-xs mt-10",children:c.map((g,y)=>u.jsx(il,{to:g.path,onClick:()=>d(),className:`
                           text-3xl font-black uppercase tracking-tight text-center py-2 relative group
                           transition-all duration-300
                           ${m(g.path)?"text-slate-900 scale-110":"text-slate-300 hover:text-slate-500 hover:scale-105"}
                        `,style:{animationDelay:`${y*50}ms`},children:g.label},g.path))}),u.jsxs("div",{className:"absolute -bottom-40 flex flex-col items-center gap-2",children:[u.jsx("div",{className:"w-1 h-8 bg-slate-200 rounded-full"}),u.jsx("div",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-[0.3em]",children:"Fanra Studio"})]})]})]})]})},zt=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null;let Vf=null;const x1=t=>{if(Vf)return Vf;const e=t.sampleRate*2,n=t.createBuffer(1,e,t.sampleRate),r=n.getChannelData(0);for(let s=0;s<e;s++)r[s]=Math.random()*2-1;return Vf=n,n},fj=()=>{if(!zt)return;zt.state==="suspended"&&zt.resume();const t=x1(zt),e=zt.createBufferSource();e.buffer=t;const n=zt.createBiquadFilter();n.type="lowpass",n.Q.value=1;const r=zt.createGain();e.connect(n),n.connect(r),r.connect(zt.destination);const s=zt.currentTime;n.frequency.setValueAtTime(100,s),n.frequency.exponentialRampToValueAtTime(4e3,s+.15),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.3,s+.05),r.gain.exponentialRampToValueAtTime(.001,s+.3),e.start(s),e.stop(s+.3)},pj=()=>{if(!zt)return;zt.state==="suspended"&&zt.resume();const t=x1(zt),e=zt.createBufferSource();e.buffer=t;const n=zt.createBiquadFilter();n.type="lowpass",n.Q.value=.5;const r=zt.createGain();e.connect(n),n.connect(r),r.connect(zt.destination);const s=zt.currentTime;n.frequency.setValueAtTime(200,s),n.frequency.exponentialRampToValueAtTime(1200,s+.8),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.4,s+.2),r.gain.exponentialRampToValueAtTime(.001,s+1.2),e.start(s),e.stop(s+1.2)};class mj{constructor(e,n,r){this.x=e,this.y=n;const s=Math.random()*Math.PI*2,i=Math.random()*10+2;this.vx=Math.cos(s)*i,this.vy=Math.sin(s)*i,this.size=3,this.friction=.92,this.opacity=1,this.ease=.2-r*.015,this.ease<.05&&(this.ease=.05)}update(e,n){this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction,this.x+=(e-this.x)*this.ease,this.y+=(n-this.y)*this.ease;const r=e-this.x,s=n-this.y;return Math.sqrt(r*r+s*s)<10&&(this.opacity-=.05),this.opacity>0}draw(e){e.save(),e.globalAlpha=this.opacity,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fillStyle="#2563eb",e.fill(),e.restore()}}const gj=({onComplete:t,onTriggerAdmin:e})=>{const[n,r]=F.useState(0),[s,i]=F.useState(!1),[o,a]=F.useState(!1),[l,c]=F.useState(!1),d=F.useRef(null),m=F.useRef(null),g=F.useRef([]),y=F.useRef({x:window.innerWidth/2,y:window.innerHeight/2});F.useEffect(()=>(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",window.scrollTo(0,0),()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[]),F.useEffect(()=>{const E=m.current;if(!E)return;const T=E.getContext("2d");if(!T)return;const N=()=>{E.width=window.innerWidth,E.height=window.innerHeight};window.addEventListener("resize",N),N();const L=R=>{y.current={x:R.clientX,y:R.clientY}};window.addEventListener("mousemove",L);let U;const k=()=>{T.clearRect(0,0,E.width,E.height),g.current.length>0?(g.current=g.current.filter(R=>R.update(y.current.x,y.current.y)?(R.draw(T),!0):!1),g.current.length===0&&o&&a(!1)):o&&a(!1),U=requestAnimationFrame(k)};return k(),()=>{window.removeEventListener("resize",N),window.removeEventListener("mousemove",L),cancelAnimationFrame(U)}},[o]);const w=E=>{if(o||!d.current)return;const T=d.current.getBoundingClientRect(),N=T.left+T.width/2,L=T.top+T.height/2;a(!0);let U=0;const k=10;g.current=[];const R=setInterval(()=>{if(U>=k){clearInterval(R);return}g.current.push(new mj(N,L,U)),U++},50)},x=()=>{s||(fj(),i(!0),r(1),setTimeout(()=>i(!1),1e3))},_=()=>{s||(pj(),i(!0),r(2),setTimeout(()=>{window.scrollTo(0,0),t()},1e3))},v=()=>{l||(c(!0),setTimeout(()=>{e&&e(),setTimeout(()=>c(!1),2e3)},500))};return u.jsxs("div",{className:`fixed inset-0 z-[999] bg-white transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1) overflow-hidden h-[100dvh] w-screen ${n===2?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none"}`,onTouchMove:E=>E.preventDefault(),children:[u.jsx("canvas",{ref:m,className:"absolute inset-0 pointer-events-none z-50"}),u.jsxs("div",{className:"flex flex-col w-full h-[200vh] transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1)",style:{transform:n>=1?"translateY(-50%)":"translateY(0)"},children:[u.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center relative bg-white px-6",style:{backgroundImage:"radial-gradient(#e2e8f0 1px, transparent 1px)",backgroundSize:"32px 32px"},children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-[0.03] pointer-events-none overflow-hidden",children:u.jsx(Ho,{className:"w-[150%] h-[150%] -translate-x-1/4 -translate-y-1/4",variant:"dark"})}),u.jsxs("div",{className:"relative z-10 text-center animate-fade-in-up flex flex-col items-center",children:[u.jsx("div",{className:"mb-8 flex justify-center transform hover:scale-105 transition-transform duration-500",children:u.jsx(Ho,{className:"w-32 h-32 md:w-40 md:h-40 shadow-2xl shadow-slate-200/50 rounded-[2rem] bg-white",variant:"dark"})}),u.jsxs("h1",{className:"text-4xl md:text-7xl font-black text-slate-900 mb-4 tracking-tighter leading-tight",children:["IRFAN RIZKI ADITRI",u.jsx("span",{ref:d,onDoubleClick:w,className:`text-blue-600 inline-block cursor-pointer transition-opacity duration-100 select-none ${o?"opacity-0":"opacity-100"} hover:opacity-80`,title:"Double click me!",children:"."})]}),u.jsx("p",{className:"text-slate-400 text-lg md:text-2xl font-medium tracking-widest uppercase",children:"Portfolio & Playground"}),u.jsxs("button",{onClick:x,className:"group flex flex-col items-center gap-3 transition-all outline-none cursor-pointer mt-20 hover:-translate-y-1 duration-300",children:[u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-900 transition-colors",children:"Next"}),u.jsx("div",{className:"w-12 h-12 rounded-full border border-slate-200 bg-white hover:bg-slate-50 flex items-center justify-center shadow-lg transition-all duration-300 group-hover:border-slate-300 group-hover:shadow-xl",children:u.jsx(vr,{className:"w-5 h-5 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})})]})]})]}),u.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center bg-slate-50 px-6 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),u.jsx("div",{className:`absolute bottom-8 right-8 z-50 transition-all duration-700 ease-out cursor-default select-none ${l?"scale-[10] opacity-0 rotate-180 text-blue-600":"scale-100 opacity-5 hover:opacity-30 text-slate-900"}`,onDoubleClick:v,title:".",children:u.jsx(Ml,{className:"w-6 h-6"})}),u.jsxs("div",{className:"relative z-10 max-w-4xl w-full grid md:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{className:"text-center md:text-left space-y-6 flex flex-col items-center md:items-start",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-[10px] font-bold uppercase tracking-wider",children:[u.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),"Student & Developer"]}),u.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-slate-900 tracking-tight leading-none",children:["Welcome to ",u.jsx("br",{}),u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-slate-500",children:"My Perspective."})]}),u.jsx("p",{className:"text-slate-500 text-lg leading-relaxed max-w-md",children:"Jelajahi eksperimen kode, cerita tentang alam semesta, dan tools AI buatan mahasiswa gabut."}),u.jsxs("button",{onClick:_,className:"inline-flex items-center gap-3 bg-slate-900 text-white px-8 py-4 rounded-xl font-bold shadow-xl shadow-slate-900/20 hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 group",children:["Explore Studio",u.jsx($o,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),u.jsxs("div",{className:"relative hidden md:block",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-500 to-purple-500 rounded-[2.5rem] rotate-3 opacity-20 blur-2xl transform translate-y-4"}),u.jsxs("div",{className:"relative bg-white p-8 rounded-[2.5rem] shadow-2xl border border-slate-100 rotate-[-2deg] hover:rotate-0 transition-transform duration-500",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-slate-100 pb-6",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center p-2.5",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra",className:"w-full h-full object-contain"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-slate-900",children:"Fanra"}),u.jsx("p",{className:"text-xs text-slate-500",children:"Intelligent Assistant"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-slate-50 p-4 rounded-xl rounded-tl-none border border-slate-100 text-sm text-slate-600",children:"Halo! Ada yang bisa gue bantu hari ini? Mau edit foto atau ngobrol soal fisika?"}),u.jsx("div",{className:"bg-blue-600 p-4 rounded-xl rounded-tr-none text-sm text-white ml-auto max-w-[80%]",children:"Gue mau coba fitur AI Studio lo dong, Fanra!"})]})]})]})]})]})]})]})};class yj{constructor(e,n,r){this.x=e,this.y=n,this.baseX=e,this.baseY=n,this.size=1.5,this.density=Math.random()*20+5,this.color=r}draw(e,n){const r=this.y/n;let s=1-Math.pow(r,.8);s=Math.max(0,s),e.fillStyle=`rgba(203, 213, 225, ${s})`,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.closePath(),e.fill()}update(e,n){const r=e.x-this.x,s=e.y-this.y,i=Math.sqrt(r*r+s*s),o=r/i,a=s/i,l=e.radius,c=(l-i)/l,d=o*c*this.density,m=a*c*this.density;if(i<e.radius)n==="repel"?(this.x-=d,this.y-=m):(this.x+=d,this.y+=m);else{if(this.x!==this.baseX){const g=this.x-this.baseX;this.x-=g/15}if(this.y!==this.baseY){const g=this.y-this.baseY;this.y-=g/15}}}}const vj=({onTriggerAdmin:t,isAdmin:e=!1})=>{const n=vs(),[r]=F.useState(()=>Math.random()>.5?"repel":"attract"),s=F.useRef(null),i=F.useRef([]),o=F.useRef({x:-1e3,y:-1e3,radius:120}),a=F.useRef(null),[l,c]=F.useState([]),[d,m]=F.useState([]),[g,y]=F.useState(!0);return F.useEffect(()=>{(async()=>{try{const x=await v1();c(x.slice(0,2));const _=await y1();if(_.length>0){const v=Array(60).fill(_).flat();m(v)}else m([])}catch(x){console.error("Home data fetch error",x)}finally{y(!1)}})()},[]),F.useEffect(()=>{const w=s.current;if(!w)return;const x=w.getContext("2d");if(!x)return;const _=()=>{w.width=window.innerWidth,w.height=window.innerHeight,v()},v=()=>{i.current=[];const U=30,k=Math.ceil(w.height/U),R=Math.ceil(w.width/U);for(let A=0;A<k;A++)for(let M=0;M<R;M++){const V=M*U+U/2,P=A*U+U/2;i.current.push(new yj(V,P,"#cbd5e1"))}};_(),window.addEventListener("resize",_);const E=U=>{const k=w.getBoundingClientRect();o.current.x=U.clientX-k.left,o.current.y=U.clientY-k.top},T=()=>{o.current.x=-1e3,o.current.y=-1e3};window.addEventListener("mousemove",E),window.addEventListener("mouseout",T);let N;const L=()=>{x.clearRect(0,0,w.width,w.height),i.current.forEach(U=>{U.draw(x,w.height),U.update(o.current,r)}),N=requestAnimationFrame(L)};return L(),()=>{window.removeEventListener("resize",_),window.removeEventListener("mousemove",E),window.removeEventListener("mouseout",T),cancelAnimationFrame(N)}},[r]),F.useEffect(()=>{a.current&&d.length>0&&setTimeout(()=>{if(a.current){const w=a.current;w.scrollLeft=(w.scrollWidth-w.clientWidth)/2}},100)},[d]),u.jsxs("div",{className:"relative min-h-[90vh] flex flex-col overflow-hidden bg-gradient-to-b from-slate-50 via-white to-white",children:[u.jsx("style",{children:`
            .no-scrollbar::-webkit-scrollbar { display: none; }
            .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        `}),u.jsx("canvas",{ref:s,className:"fixed inset-0 z-0 pointer-events-auto opacity-60"}),u.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 md:px-12 py-12 flex-grow w-full space-y-24",children:[u.jsxs("div",{className:"mt-8",children:[u.jsx("h1",{className:"text-6xl md:text-8xl font-black text-slate-900 mb-8 leading-tight tracking-tighter max-w-5xl flex items-center flex-wrap gap-2",children:u.jsx(ct,{id:"home_hero_title",defaultText:"Fanra is here.",isAdmin:e,tag:"span",className:"inline-block"})}),u.jsx("div",{className:"max-w-5xl mt-16 relative",children:u.jsxs("div",{className:"grid md:grid-cols-5 gap-12 items-start",children:[u.jsxs("div",{className:"md:col-span-3 space-y-4",children:[u.jsx(ct,{id:"home_about_title",defaultText:"Mahasiswa Fisika. Cuma Hobi Ngoding.",isAdmin:e,tag:"h2",className:"text-2xl font-bold text-slate-900 leading-tight"}),u.jsx(ct,{id:"home_about_desc",defaultText:"Irfan Rizki Aditri (Fanra) merupakan mahasiswa Fisika angkatan 2025 di Institut Teknologi Sumatera (ITERA). Platform ini dikembangkan sebagai sarana eksplorasi teknologi dan pengembangan diri di tengah kesibukan akademis.",isAdmin:e,tag:"p",multiline:!0,className:"text-slate-600 text-lg leading-relaxed font-medium"})]}),u.jsxs("div",{className:"md:col-span-2 flex flex-col gap-4 pt-2",children:[u.jsxs("div",{className:"flex items-center gap-4 group",children:[u.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14614/14614573.png",alt:"Physics",className:"w-6 h-6 object-contain"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Physics Major"}),u.jsx("span",{className:"text-sm text-slate-500 block",children:"Institut Teknologi Sumatera '25"})]})]}),u.jsxs("div",{className:"flex items-center gap-4 group",children:[u.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/2120/2120483.png",alt:"AI & Dev",className:"w-6 h-6 object-contain"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Interest"}),u.jsx("span",{className:"text-sm text-slate-500 block",children:"Learning AI & Web Dev"})]})]}),u.jsxs("div",{className:"flex items-center gap-4 group",children:[u.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3037/3037821.png",alt:"Location",className:"w-6 h-6 object-contain"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Based In"}),u.jsx("span",{className:"text-sm text-slate-500 block",children:"Sumatera, Indonesia"})]})]})]})]})})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-8 md:p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer",onClick:()=>n("/projects"),children:[u.jsxs("div",{className:"flex items-start justify-between mb-8",children:[u.jsx("div",{className:"w-14 h-14 bg-slate-50 border border-slate-200 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3310/3310054.png",alt:"Projects",className:"w-8 h-8 object-contain"})}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-slate-100 px-3 py-1 rounded-full",children:"Project"})]}),u.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-3",children:"Projects & Tools"}),u.jsx("p",{className:"text-slate-500 mb-6 text-base leading-relaxed",children:"Eksperimen koding, mulai dari Fanra AI Studio hingga tools Instagram Panorama."}),u.jsxs("div",{className:"flex items-center text-sm font-bold text-blue-600 group-hover:translate-x-2 transition-transform",children:["Lihat Project ",u.jsx($o,{className:"w-5 h-5 ml-2"})]})]}),u.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-8 md:p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer flex flex-col",onClick:()=>n("/blog"),children:[u.jsxs("div",{className:"flex items-start justify-between mb-6",children:[u.jsx("div",{className:"w-14 h-14 bg-slate-50 border border-slate-200 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1170/1170221.png",alt:"Blog",className:"w-8 h-8 object-contain"})}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-slate-100 px-3 py-1 rounded-full",children:"Blog"})]}),u.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Recent Stories"}),u.jsx("div",{className:"space-y-4 flex-1",children:!g&&l.length>0?l.map(w=>u.jsxs("div",{className:"border-l-2 border-slate-200 pl-4 hover:border-slate-900 transition-colors",children:[u.jsx("h4",{className:"font-bold text-slate-800 text-sm line-clamp-1",children:w.title}),u.jsx("p",{className:"text-xs text-slate-400 mt-1 line-clamp-1",children:w.subtitle})]},w.id)):u.jsx("p",{className:"text-slate-400 text-sm italic",children:"Belum ada tulisan terbaru."})}),u.jsxs("div",{className:"mt-6 flex items-center text-sm font-bold text-slate-600 group-hover:text-slate-900 group-hover:translate-x-2 transition-transform",children:["Baca Blog ",u.jsx($o,{className:"w-5 h-5 ml-2"})]})]})]}),u.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-[2.5rem] p-8 md:p-10 relative overflow-hidden group",children:[u.jsx("div",{className:"flex justify-between items-end mb-8 relative z-10 px-2",children:u.jsxs("div",{className:"cursor-pointer",onClick:()=>n("/gallery"),children:[u.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-1",children:"Visual Diaries"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Momen acak yang tertangkap kamera."})]})}),u.jsx("div",{ref:a,className:"flex gap-3 overflow-x-auto no-scrollbar pb-2 items-center cursor-grab active:cursor-grabbing",children:!g&&d.length>0?d.map((w,x)=>u.jsxs("div",{className:"w-32 h-32 md:w-44 md:h-44 flex-shrink-0 rounded-xl overflow-hidden bg-slate-200 shadow-sm border border-slate-100 relative group/item cursor-pointer",onClick:()=>n("/gallery"),children:[u.jsx("img",{src:w.src,alt:"Gallery",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover/item:opacity-100 transition-opacity"})]},`${w.id}-${x}`)):u.jsx("div",{className:"w-full h-32 flex items-center justify-center text-slate-400 text-sm italic border-2 border-dashed border-slate-200 rounded-2xl",children:"Galeri masih kosong."})})]}),u.jsxs("div",{className:"relative rounded-[3rem] overflow-hidden bg-white border border-slate-200 p-12 md:p-16 text-center shadow-xl",children:[u.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto",children:[u.jsx(ct,{id:"home_cta_title",defaultText:"Punya ide atau sekadar mau menyapa?",isAdmin:e,tag:"h2",className:"text-3xl md:text-5xl font-black mb-6 tracking-tight text-slate-900"}),u.jsx(ct,{id:"home_cta_desc",defaultText:"Tinggalkan pesan di Public Wall. Bisa anonim, bisa rahasia, bebas.",isAdmin:e,tag:"p",className:"text-slate-500 mb-10 text-lg max-w-lg mx-auto"}),u.jsxs("button",{onClick:()=>n("/messages"),className:"bg-slate-900 text-white px-10 py-4 rounded-full font-bold hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 text-lg shadow-lg shadow-slate-900/20 flex items-center gap-3 mx-auto",children:[u.jsx(TT,{className:"w-5 h-5"}),"Tulis Pesan"]})]}),u.jsx("div",{className:"absolute -top-24 -left-24 w-64 h-64 bg-blue-50 rounded-full blur-3xl opacity-50 pointer-events-none"}),u.jsx("div",{className:"absolute -bottom-24 -right-24 w-64 h-64 bg-purple-50 rounded-full blur-3xl opacity-50 pointer-events-none"})]})]})]})},qe=t=>{if(typeof window<"u"){const e=new CustomEvent("fanra-toast",{detail:{message:t}});window.dispatchEvent(e)}},lw=[{id:"fanra-ai",titleId:"projects_p1_title",descId:"projects_p1_desc",statusId:"status_project_p1",defaultTitle:"Fanra AI Studio",defaultDesc:"Asisten AI hybrid yang bisa ngobrol santai, edit foto (Hapus BG, Upscale 4K), dan cari info akurat.",fullDesc:"Fanra AI Studio adalah platform kecerdasan buatan terintegrasi yang dirancang untuk membantu produktivitas dan kreativitas. Menggunakan model Google Gemini Pro vision terbaru, aplikasi ini mampu memahami konteks visual, melakukan pengeditan gambar tingkat lanjut seperti penghapusan latar belakang yang presisi, peningkatan resolusi (Upscale 4K), hingga pencarian informasi real-time melalui integrasi Wikipedia dan Google Search.",iconUrl:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",theme:"blue",appPath:"/studio",buttonText:"Open Studio",features:["Smart Chatbot (Hybrid Search)","Background Remover","HD Upscale (4K)","Creative Remix","Wikipedia Integration"]},{id:"ig-panorama",titleId:"projects_p2_title",descId:"projects_p2_desc",statusId:"status_project_p2",defaultTitle:"IG Seamless Studio",defaultDesc:"Bikin konten carousel Instagram yang nyambung (Panorama) dengan mudah. Auto-slice saat download.",fullDesc:"IG Seamless Studio adalah tool khusus untuk konten kreator yang ingin membuat postingan carousel Instagram yang estetik dan menyambung (seamless). Tidak perlu lagi memotong gambar secara manual di Photoshop. Cukup upload gambar, atur layout di kanvas tanpa batas, tambahkan elemen dekoratif, dan sistem akan otomatis memotongnya menjadi slide-slide presisi siap posting.",iconUrl:"https://cdn-icons-png.flaticon.com/128/4327/4327816.png",theme:"pink",appPath:"/panorama",buttonText:"Open App",features:["Canvas Drag & Drop","Auto Slicing","Shape & Masking Tools","Layer Management","Instant Zip Download"]},{id:"fanragem",titleId:"projects_p3_title",descId:"projects_p3_desc",statusId:"status_project_p3",defaultTitle:"Fanragem",defaultDesc:"Game simulasi kehidupan mini. Bangun ekosistem digital, atur sumber daya, dan lihat perkembangannya.",fullDesc:"Fanragem adalah sebuah eksperimen simulasi kehidupan berbasis web. Di sini, Anda berperan sebagai pengatur ekosistem digital. Kelola sumber daya, populasi, dan lingkungan untuk melihat bagaimana keputusan kecil berdampak pada kelangsungan hidup dunia buatan Anda. Project ini masih dalam tahap pengembangan aktif.",iconUrl:"https://cdn-icons-png.flaticon.com/128/14047/14047858.png",theme:"purple",appPath:"",buttonText:"Play Demo",features:["Resource Management","Population Simulation","Dynamic Events","Pixel Art Style"]}],w1=({id:t,isAdmin:e,onStatusChange:n})=>{const[r,s]=F.useState("active"),[i,o]=F.useState(!0);F.useEffect(()=>{(async()=>{const m=await R0(t);s(m==="maintenance"||m==="development"?m:"active"),o(!1),n(m||"active")})()},[t]);const a=async d=>{if(d.stopPropagation(),!e)return;let m="active";r==="active"?m="maintenance":r==="maintenance"?m="development":m="active",s(m),n(m),await P0(t,m)};if(i)return u.jsx("div",{className:"w-16 h-5 bg-slate-100 rounded-full animate-pulse"});const c={active:{color:"bg-green-100 text-green-700 border-green-200",icon:u.jsx(cs,{className:"w-3 h-3"}),label:"Active"},maintenance:{color:"bg-orange-100 text-orange-700 border-orange-200",icon:u.jsx(Ql,{className:"w-3 h-3"}),label:"Maintenance"},development:{color:"bg-blue-100 text-blue-700 border-blue-200",icon:u.jsx(bT,{className:"w-3 h-3"}),label:"Building"}}[r];return u.jsxs("button",{onClick:a,disabled:!e,className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border transition-all ${c.color} ${e?"cursor-pointer hover:brightness-95 active:scale-95":"cursor-default"}`,title:e?"Klik untuk ubah status":"",children:[c.icon,c.label]})},xj=({project:t,isAdmin:e,onClick:n})=>{const[r,s]=F.useState("active"),i=c=>{s(c)},a={blue:{bg:"bg-blue-50 border border-blue-100",text:"text-blue-600",hoverBorder:"group-hover:border-blue-300",glow:"bg-blue-500/10"},pink:{bg:"bg-pink-50 border border-pink-100",text:"text-pink-600",hoverBorder:"group-hover:border-pink-300",glow:"bg-pink-500/10"},purple:{bg:"bg-purple-50 border border-purple-100",text:"text-purple-600",hoverBorder:"group-hover:border-purple-300",glow:"bg-purple-500/10"}}[t.theme],l=r!=="active"&&!e;return u.jsxs("div",{onClick:n,className:`
                group relative bg-white rounded-[2rem] p-8 border transition-all duration-300 flex flex-col justify-between overflow-hidden h-full min-h-[320px]
                ${l?"cursor-default opacity-80 grayscale-[0.5]":"cursor-pointer hover:shadow-xl hover:-translate-y-1"}
                ${l?"border-slate-100":`border-slate-200 ${a.hoverBorder}`}
            `,children:[u.jsx("div",{className:`absolute top-0 right-0 w-48 h-48 rounded-full blur-3xl transition-opacity duration-500 opacity-0 group-hover:opacity-100 pointer-events-none translate-x-10 -translate-y-10 ${a.glow}`}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-transform duration-500 group-hover:scale-110 ${a.bg} ${a.text}`,children:u.jsx("img",{src:t.iconUrl,alt:t.defaultTitle,className:"w-8 h-8 object-contain"})}),u.jsx(w1,{id:t.statusId,isAdmin:e,onStatusChange:i})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx(ct,{id:t.titleId,defaultText:t.defaultTitle,isAdmin:e,tag:"h3",className:`text-2xl font-black text-slate-900 mb-3 tracking-tight ${!l&&`group-hover:${a.text} transition-colors`}`}),u.jsx(ct,{id:t.descId,defaultText:t.defaultDesc,isAdmin:e,tag:"p",multiline:!0,className:"text-slate-500 text-sm leading-relaxed font-medium line-clamp-3"})]})]}),u.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[u.jsx("span",{className:`text-xs font-bold uppercase tracking-wider transition-colors ${l?"text-slate-400":`${a.text}`}`,children:"See Details"}),u.jsx("div",{className:`p-2 rounded-full transition-all ${l?"bg-slate-100 text-slate-300":`bg-slate-50 ${a.text} group-hover:bg-white group-hover:shadow-md`}`,children:u.jsx($o,{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform"})})]})]})},wj=({project:t,isAdmin:e})=>{const n=vs(),[r,s]=F.useState("active"),i=d=>{s(d)},o=r!=="active"&&!e,l={blue:{bg:"bg-blue-50",text:"text-blue-600",btn:"bg-blue-600 hover:bg-blue-700",gradient:"from-blue-500 to-cyan-500"},pink:{bg:"bg-pink-50",text:"text-pink-600",btn:"bg-pink-600 hover:bg-pink-700",gradient:"from-pink-500 to-rose-500"},purple:{bg:"bg-purple-50",text:"text-purple-600",btn:"bg-purple-600 hover:bg-purple-700",gradient:"from-purple-500 to-indigo-500"}}[t.theme],c=()=>{if(o){qe(r==="maintenance"?"Aplikasi sedang dalam perbaikan (Maintenance).":"Aplikasi masih dalam tahap pengembangan.");return}t.appPath?n(t.appPath):qe("Link aplikasi belum tersedia.")};return u.jsx("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:u.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-12",children:[u.jsxs("button",{onClick:()=>n("/projects"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:u.jsx(us,{className:"w-4 h-4"})}),"Kembali ke Daftar"]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${l.bg} ${l.text}`,children:u.jsx("img",{src:t.iconUrl,alt:"Icon",className:"w-8 h-8 object-contain"})}),u.jsx(w1,{id:t.statusId,isAdmin:e,onStatusChange:i})]}),u.jsx(ct,{id:t.titleId,defaultText:t.defaultTitle,isAdmin:e,tag:"h1",className:"text-4xl md:text-5xl font-black text-slate-900 mb-6 tracking-tight"}),u.jsx("p",{className:"text-lg text-slate-600 leading-relaxed mb-8",children:t.fullDesc}),u.jsxs("div",{className:"space-y-3 mb-10",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Fitur Utama"}),t.features.map((d,m)=>u.jsxs("div",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[u.jsx("div",{className:`w-5 h-5 rounded-full ${l.bg} ${l.text} flex items-center justify-center shrink-0`,children:u.jsx(cs,{className:"w-3 h-3"})}),d]},m))]}),u.jsxs("button",{onClick:c,disabled:o,className:`
                                px-8 py-4 rounded-2xl font-bold text-white text-lg shadow-xl shadow-slate-200/50 flex items-center gap-3 transition-all active:scale-95
                                ${o?"bg-slate-300 cursor-not-allowed":`${l.btn} hover:-translate-y-1`}
                            `,children:[o?"Terkunci":t.buttonText,!o&&u.jsx($o,{className:"w-5 h-5"})]})]}),u.jsxs("div",{className:`aspect-square rounded-[3rem] bg-gradient-to-br ${l.gradient} opacity-90 relative overflow-hidden shadow-2xl flex items-center justify-center`,children:[u.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-white/20 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-white/10 rounded-full blur-2xl"}),u.jsxs("div",{className:"relative z-10 bg-white/10 backdrop-blur-md border border-white/20 p-8 rounded-3xl shadow-lg max-w-xs text-white/90 text-center",children:[u.jsx("img",{src:t.iconUrl,className:"w-20 h-20 mx-auto mb-4 opacity-90 drop-shadow-md"}),u.jsx("p",{className:"font-bold text-lg",children:"Preview Mode"}),u.jsx("p",{className:"text-xs opacity-70 mt-2",children:"Gambaran visual aplikasi saat dijalankan."})]})]})]})]})})},uw=({isAdmin:t})=>{const e=vs(),{projectId:n}=hT(),r=lw.find(s=>s.id===n);return n&&r?u.jsx(wj,{project:r,isAdmin:t}):u.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 animate-fade-in",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-12 gap-4",children:[u.jsxs("div",{children:[u.jsx(ct,{id:"projects_title",defaultText:"Selected Projects",isAdmin:t,tag:"h1",className:"text-4xl md:text-5xl font-black text-slate-900 mb-3 tracking-tighter"}),u.jsx(ct,{id:"projects_subtitle",defaultText:"Kumpulan tools dan simulasi interaktif.",isAdmin:t,tag:"p",className:"text-slate-500 text-lg max-w-2xl"})]}),t&&u.jsxs("div",{className:"bg-slate-900 text-white px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 shadow-lg",children:[u.jsx(gd,{className:"w-4 h-4"}),"Admin Mode: Klik status badge untuk ubah."]})]}),u.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl p-5 mb-12 flex gap-4 items-start shadow-sm",children:[u.jsx("div",{className:"p-2 bg-amber-100 rounded-xl text-amber-600 shrink-0",children:u.jsx(Ql,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx(ct,{id:"projects_disclaimer_title",defaultText:"Info Pengunjung",isAdmin:t,tag:"h4",className:"font-bold text-amber-900 text-sm uppercase tracking-wide mb-1"}),u.jsx(ct,{id:"projects_disclaimer_text",defaultText:"Project dengan label 'Maintenance' atau 'Building' tidak bisa diakses sementara waktu demi alasan kestabilan. Silakan coba project yang berstatus 'Active'.",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-amber-700/80 leading-relaxed font-medium"})]})]}),u.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:lw.map(s=>u.jsx(xj,{project:s,isAdmin:t,onClick:()=>e(`/projects/${s.id}`)},s.id))})]})},gu=({isOpen:t,title:e,description:n,onConfirm:r,onCancel:s,confirmText:i="Yes, Leave"})=>t?u.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:u.jsx("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl transform transition-all scale-100 animate-fade-in-up border border-slate-100",children:u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-amber-50 text-amber-500 rounded-full flex items-center justify-center mb-4 border border-amber-100",children:u.jsx(Ql,{className:"w-6 h-6"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:e}),u.jsx("p",{className:"text-sm text-slate-500 mb-6 leading-relaxed",children:n}),u.jsxs("div",{className:"flex w-full gap-3",children:[u.jsx("button",{onClick:s,className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 rounded-xl font-medium hover:bg-slate-50 transition-colors text-sm",children:"Cancel"}),u.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-colors shadow-lg shadow-red-500/20 text-sm",children:i})]})]})})}):null,cw=({isAdmin:t})=>{const{id:e}=hT(),n=vs(),[r,s]=F.useState([]),[i,o]=F.useState(!0),[a,l]=F.useState("list"),[c,d]=F.useState(null),m=6,[g,y]=F.useState(m),[w,x]=F.useState("add"),[_,v]=F.useState({}),[E,T]=F.useState(!1),[N,L]=F.useState([]),[U,k]=F.useState(null),[R,A]=F.useState(null),[M,V]=F.useState(""),[P,D]=F.useState(""),[I,$]=F.useState(null),[ce,te]=F.useState(null),[ne,Q]=F.useState({x:0,y:0,visible:!1}),[ae,K]=F.useState(!1),[H,he]=F.useState("url"),[ee,X]=F.useState(""),Ie=F.useRef(null),Be=F.useRef(null);F.useEffect(()=>{e?(l("detail"),o(!0),J3(e).then(z=>{z?d(z):(qe("Artikel tidak ditemukan."),n("/blog",{replace:!0})),o(!1)})):a!=="editor"&&(l("list"),ke())},[e]);const ke=async()=>{o(!0);try{const z=await v1();s(z)}catch(z){console.error("Failed to fetch blog posts",z)}finally{o(!1)}};F.useEffect(()=>{if(a==="editor"){const z=_.content||"";if(!z){L([{id:Date.now().toString(),type:"text",content:""}]);return}const G=/(!image\(.*?\))/g,me=z.split(G),ve=me.map(Ae=>{const rt=Ae.match(/^!image\((.*?)\)$/);return rt?{id:Math.random().toString(36).substr(2,9),type:"image",content:rt[1]}:{id:Math.random().toString(36).substr(2,9),type:"text",content:Ae}}).filter(Ae=>Ae.type==="image"||Ae.content.length>0||me.length===1);ve.length===0&&ve.push({id:Date.now().toString(),type:"text",content:""}),L(ve)}},[a,_.id]);const je=z=>{z&&(z.style.height="auto",z.style.height=`${z.scrollHeight}px`)};F.useEffect(()=>{a==="editor"&&(je(Ie.current),je(Be.current))},[a,_.title,_.subtitle]),F.useEffect(()=>{const z=()=>{ne.visible&&Q({...ne,visible:!1})};return window.addEventListener("click",z),()=>window.removeEventListener("click",z)},[ne]);const Oe=()=>{y(z=>z+m)},He=()=>{y(m);const z=document.getElementById("blog-top");z&&z.scrollIntoView({behavior:"smooth"})},lt=()=>{x("add"),v({title:"",subtitle:"",category:"Category",date:new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),readTime:"5 min read",author:"Fanra",image:"",content:"",timestamp:Date.now(),sources:[]}),V(""),D(""),l("editor"),window.scrollTo(0,0)},ze=(z,G)=>{z.stopPropagation(),x("edit"),v({...G,sources:G.sources||[]}),V(""),D(""),l("editor"),window.scrollTo(0,0)},C=(z,G)=>{z.stopPropagation(),$(G)},se=async()=>{if(!I)return;const z=I;te(z),$(null);try{await X3(z),s(G=>G.filter(me=>me.id!==z)),(c==null?void 0:c.id)===z&&n("/blog"),qe("Artikel berhasil dihapus.")}catch{qe("Gagal menghapus artikel."),ke()}finally{te(null)}},Z=async()=>{if(!_.title){qe("Judul wajib diisi.");return}const z=N.map(G=>G.type==="image"?`

!image(${G.content})

`:G.content).join("").trim();if(!z){qe("Konten tidak boleh kosong.");return}T(!0);try{const G={..._,content:z,image:_.image||"https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop"};w==="add"?await Y3(G):_.id&&await Q3(_.id,G),qe(w==="add"?"Artikel berhasil diterbitkan!":"Artikel berhasil diperbarui!"),n("/blog")}catch(G){console.error(G),qe("Gagal menyimpan artikel.")}finally{T(!1)}},O=()=>{if(!M.trim()||!P.trim())return;const z={label:M.trim(),url:P.trim()},G=[..._.sources||[],z];v(me=>({...me,sources:G})),V(""),D("")},B=z=>{const G=(_.sources||[]).filter((me,ve)=>ve!==z);v(me=>({...me,sources:G}))},q=z=>{var me;const G=(me=z.target.files)==null?void 0:me[0];if(G){const ve=new FileReader;ve.onloadend=()=>{const Ae=ve.result;v(rt=>({...rt,image:Ae}))},ve.readAsDataURL(G)}},ie=z=>{n(`/blog/${z.id}`)},ue=(z,G)=>{z.preventDefault();const me=z.target;k(G),A(me.selectionStart),Q({x:z.pageX,y:z.pageY,visible:!0})},Y=()=>{Q({...ne,visible:!1}),X(""),he("url"),K(!0)},oe=z=>{var me;const G=(me=z.target.files)==null?void 0:me[0];if(G){const ve=new FileReader;ve.onloadend=()=>{const Ae=ve.result;X(Ae)},ve.readAsDataURL(G)}},ye=()=>{if(!ee||!U){K(!1);return}const z=N.findIndex(_t=>_t.id===U);if(z===-1)return;const G=N[z],me=G.content.slice(0,R||G.content.length),ve=G.content.slice(R||G.content.length),Ae=[...N];Ae[z]={...G,content:me};const rt={id:Date.now().toString(),type:"image",content:ee},Re={id:(Date.now()+1).toString(),type:"text",content:ve};Ae.splice(z+1,0,rt,Re),L(Ae),K(!1),X("")},fe=(z,G)=>{L(me=>me.map(ve=>ve.id===z?{...ve,content:G}:ve))},xe=z=>{confirm("Hapus elemen ini?")&&L(G=>G.filter((me,ve)=>ve!==z))},Ce=z=>z?z.split(`
`).map((G,me)=>{if(!G.trim())return u.jsx("br",{},me);const ve=G.match(/^!image\((.*?)\)$/);if(ve)return u.jsx("div",{className:"my-8",children:u.jsx("img",{src:ve[1],alt:"Content Illustration",className:"w-full rounded-xl shadow-lg border border-slate-100"})},me);const Ae=/(\\\(.*?\\\)|\\\[.*?\\\])/g,rt=G.split(Ae);return u.jsx("p",{className:"mb-6 text-slate-700 leading-8 text-lg",children:rt.map((Re,_t)=>{if(Re.startsWith("\\(")&&Re.endsWith("\\)")){const It=Re.slice(2,-2);try{if(window.katex){const Nt=window.katex.renderToString(It,{throwOnError:!1,displayMode:!1});return u.jsx("span",{dangerouslySetInnerHTML:{__html:Nt},className:"mx-1"},_t)}return u.jsx("span",{className:"font-mono bg-yellow-100 px-1 rounded",children:It},_t)}catch{return Re}}if(Re.startsWith("\\[")&&Re.endsWith("\\]")){const It=Re.slice(2,-2);try{if(window.katex){const Nt=window.katex.renderToString(It,{throwOnError:!1,displayMode:!0});return u.jsx("div",{dangerouslySetInnerHTML:{__html:Nt},className:"my-4 text-center overflow-x-auto py-2"},_t)}return u.jsx("div",{className:"font-mono bg-yellow-100 p-2 rounded my-2 text-center",children:It},_t)}catch{return Re}}return u.jsx("span",{children:Re},_t)})},me)}):null,Pe=r.slice(0,g),gt=g<r.length,tn=g>m,At=()=>c?r.filter(z=>z.id!==c.id).slice(0,2):[];if(a==="editor")return u.jsxs("div",{className:"min-h-screen bg-slate-100 animate-fade-in relative pb-20",children:[u.jsxs("div",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur-md border-b border-slate-200 px-6 py-4 flex items-center justify-between shadow-sm",children:[u.jsxs("button",{onClick:()=>n("/blog"),className:"flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 transition-colors px-4 py-2 rounded-xl hover:bg-slate-100 border border-transparent hover:border-slate-200",children:[u.jsx(us,{className:"w-4 h-4"}),"Cancel"]}),u.jsx("span",{className:"text-sm font-black text-slate-400 uppercase tracking-widest hidden md:block",children:w==="add"?"Creating New Story":"Editing Mode"}),u.jsxs("button",{onClick:Z,disabled:E,className:"bg-slate-900 text-white px-6 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[E?u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):u.jsx(cs,{className:"w-4 h-4"}),E?"Publishing...":"Publish"]})]}),u.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:u.jsxs("div",{className:"bg-white shadow-xl shadow-slate-200/50 rounded-3xl p-8 md:p-12 border border-slate-200",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-5 mb-8 p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[u.jsxs("div",{className:"flex flex-col gap-1.5",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Kategori"}),u.jsx("input",{type:"text",value:_.category,onChange:z=>v(G=>({...G,category:z.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors",placeholder:"Science..."})]}),u.jsxs("div",{className:"flex flex-col gap-1.5",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Penulis"}),u.jsx("input",{type:"text",value:_.author,onChange:z=>v(G=>({...G,author:z.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]}),u.jsxs("div",{className:"flex flex-col gap-1.5",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu Baca"}),u.jsx("input",{type:"text",value:_.readTime,onChange:z=>v(G=>({...G,readTime:z.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]}),u.jsxs("div",{className:"flex flex-col gap-1.5",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Tanggal"}),u.jsx("input",{type:"text",value:_.date,onChange:z=>v(G=>({...G,date:z.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]})]}),u.jsxs("div",{className:"space-y-6 mb-10 pb-10 border-b border-dashed border-slate-200",children:[u.jsx("textarea",{ref:Ie,rows:1,value:_.title||"",onChange:z=>v(G=>({...G,title:z.target.value})),className:"w-full text-4xl md:text-5xl font-black text-slate-900 bg-transparent border-b-2 border-transparent focus:border-slate-200 outline-none placeholder:text-slate-300 resize-none overflow-hidden leading-tight py-2 transition-colors",placeholder:"Judul Utama Artikel..."}),u.jsx("textarea",{ref:Be,rows:1,value:_.subtitle||"",onChange:z=>v(G=>({...G,subtitle:z.target.value})),className:"w-full text-xl font-medium text-slate-500 bg-transparent border-b border-transparent focus:border-slate-200 outline-none placeholder:text-slate-300 resize-none overflow-hidden leading-relaxed py-2 transition-colors",placeholder:"Tulis subtitle atau ringkasan menarik di sini..."})]}),u.jsxs("div",{className:"mb-10 group relative p-4 rounded-3xl border-2 border-dashed border-slate-200 hover:border-blue-400 transition-colors bg-slate-50/50",children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-3 text-center",children:"Cover Image"}),u.jsxs("div",{className:"w-full aspect-video rounded-2xl overflow-hidden shadow-sm bg-white border border-slate-100 flex flex-col items-center justify-center relative",children:[_.image?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:_.image,alt:"Cover",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsxs("div",{className:"text-white font-bold flex items-center gap-2",children:[u.jsx(Op,{className:"w-5 h-5"})," Ganti Gambar"]})})]}):u.jsxs("div",{className:"text-center p-8",children:[u.jsx(Pl,{className:"w-8 h-8 text-slate-300 mx-auto mb-3"}),u.jsx("p",{className:"text-slate-400 font-bold text-sm",children:"Upload Cover Image"})]}),u.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),u.jsx("input",{type:"text",value:_.image||"",onChange:z=>v(G=>({...G,image:z.target.value})),placeholder:"...atau tempel URL gambar disini",className:"w-full mt-4 text-xs text-slate-500 bg-white border border-slate-200 rounded-lg px-3 py-2 outline-none focus:border-blue-400 transition-colors text-center"})]}),u.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-100 p-4 rounded-xl text-xs text-blue-800 flex flex-col gap-2",children:[u.jsxs("p",{className:"font-bold flex items-center gap-2",children:[u.jsx(Mv,{className:"w-4 h-4"})," Panduan Editor:"]}),u.jsxs("ul",{className:"list-disc list-inside space-y-1 opacity-80",children:[u.jsxs("li",{children:["Gunakan ",u.jsx("code",{children:"\\( rumus \\)"})," untuk matematika inline."]}),u.jsxs("li",{children:["Gunakan ",u.jsx("code",{children:"\\[ rumus \\]"})," untuk matematika blok."]}),u.jsxs("li",{children:[u.jsx("b",{children:"Klik Kanan"})," di area teks untuk menyisipkan gambar di tengah paragraf."]})]})]}),u.jsxs("div",{className:"relative space-y-2",children:[N.map((z,G)=>u.jsx("div",{className:"relative group/block",children:z.type==="text"?u.jsx("textarea",{value:z.content,onChange:me=>{fe(z.id,me.target.value),je(me.target)},onFocus:me=>je(me.target),onContextMenu:me=>ue(me,z.id),className:"w-full text-lg leading-9 text-slate-800 bg-transparent border-none outline-none placeholder:text-slate-300 resize-none font-serif transition-colors overflow-hidden focus:bg-slate-50 rounded-lg px-2",placeholder:G===0?"Mulai menulis cerita Anda di sini...":"Lanjutkan menulis...",rows:1}):u.jsxs("div",{className:"relative my-4 group/image",children:[u.jsx("div",{className:"rounded-xl overflow-hidden shadow-lg border border-slate-200 bg-slate-50",children:u.jsx("img",{src:z.content,alt:"Inline",className:"w-full h-auto object-contain max-h-[500px]"})}),u.jsx("button",{onClick:()=>xe(G),className:"absolute top-3 right-3 bg-red-500 text-white p-2 rounded-full shadow-md opacity-0 group-hover/image:opacity-100 transition-opacity hover:bg-red-600 hover:scale-110",title:"Hapus Gambar",children:u.jsx(Lr,{className:"w-4 h-4"})})]})},z.id)),ne.visible&&u.jsx("div",{className:"fixed z-50 bg-white border border-slate-200 rounded-lg shadow-xl py-1 w-48 animate-fade-in",style:{top:ne.y,left:ne.x},children:u.jsxs("button",{onClick:Y,className:"w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 hover:text-blue-600 flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 bg-slate-100 rounded flex items-center justify-center text-[10px]",children:""}),"Sisipkan Gambar"]})}),ae&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-2xl w-full max-w-md animate-fade-in-up border border-slate-100",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Sisipkan Gambar"}),u.jsxs("div",{className:"flex gap-2 mb-4 bg-slate-100 p-1 rounded-xl",children:[u.jsx("button",{onClick:()=>he("url"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${H==="url"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Link URL"}),u.jsx("button",{onClick:()=>he("upload"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${H==="upload"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Upload File"})]}),H==="url"?u.jsx("input",{type:"text",value:ee,onChange:z=>X(z.target.value),placeholder:"https://example.com/image.jpg",className:"w-full border border-slate-200 rounded-xl px-4 py-3 text-sm mb-6 outline-none focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10 bg-slate-50 text-slate-900 placeholder:text-slate-400",autoFocus:!0}):u.jsxs("div",{className:"mb-6",children:[u.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-slate-300 border-dashed rounded-2xl cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[u.jsx(Pl,{className:"w-8 h-8 text-slate-400 mb-2"}),u.jsx("p",{className:"text-xs text-slate-500 font-bold",children:"Klik untuk pilih file"}),u.jsx("p",{className:"text-[10px] text-slate-400",children:"JPG, PNG, WEBP (Max 2MB)"})]}),u.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:oe})]}),ee&&u.jsx("div",{className:"mt-2 text-center",children:u.jsxs("p",{className:"text-xs text-green-600 font-bold flex items-center justify-center gap-1",children:[u.jsx(cs,{className:"w-3 h-3"})," File siap disisipkan"]})})]}),u.jsxs("div",{className:"flex justify-end gap-3",children:[u.jsx("button",{onClick:()=>K(!1),className:"px-5 py-2.5 text-xs font-bold text-slate-500 hover:bg-slate-100 rounded-xl transition-colors",children:"Batal"}),u.jsx("button",{onClick:ye,className:"px-6 py-2.5 text-xs font-bold bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-900/20 active:scale-95",children:"Sisipkan"})]})]})})]}),u.jsxs("div",{className:"mt-16 pt-10 border-t border-slate-200",children:[u.jsxs("h4",{className:"text-sm font-bold text-slate-800 uppercase tracking-widest mb-6 flex items-center gap-2",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/2420/2420165.png",alt:"Sources",className:"w-4 h-4 object-contain opacity-60"}),"Referensi & Sumber"]}),u.jsx("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200 mb-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Nama Sumber"}),u.jsx("input",{type:"text",value:M,onChange:z=>V(z.target.value),placeholder:"Contoh: Wikipedia",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"URL Link"}),u.jsx("input",{type:"text",value:P,onChange:z=>D(z.target.value),placeholder:"https://...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),u.jsx("div",{children:u.jsx("button",{onClick:O,disabled:!M||!P,className:"w-full py-2 bg-slate-900 text-white rounded-lg text-sm font-bold hover:bg-slate-800 disabled:opacity-50 transition-all",children:"+ Tambah"})})]})}),_.sources&&_.sources.length>0&&u.jsx("div",{className:"space-y-2",children:_.sources.map((z,G)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-xl hover:border-slate-300 transition-colors group",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center shrink-0",children:u.jsx(md,{className:"w-4 h-4"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:z.label}),u.jsx("p",{className:"text-xs text-slate-400 truncate",children:z.url})]})]}),u.jsx("button",{onClick:()=>B(G),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:u.jsx(Lr,{className:"w-4 h-4"})})]},G))}),(!_.sources||_.sources.length===0)&&u.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"Belum ada sumber yang ditambahkan."})]})]})})]});if(a==="detail"&&c){const z=At();return u.jsx("article",{className:"min-h-screen bg-white animate-fade-in pb-20",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-12",children:[u.jsxs("button",{onClick:()=>n("/blog"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:u.jsx(us,{className:"w-4 h-4"})}),"Kembali"]}),u.jsxs("header",{className:"mb-12",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-bold uppercase tracking-wider",children:c.category}),u.jsx("span",{className:"text-slate-400 text-sm font-medium",children:c.readTime})]}),u.jsx("h1",{className:"text-3xl md:text-5xl font-black text-slate-900 mb-6 leading-tight tracking-tight",children:c.title}),u.jsx("p",{className:"text-lg md:text-xl text-slate-500 leading-relaxed font-medium",children:c.subtitle}),u.jsxs("div",{className:"flex items-center gap-4 mt-8 pt-8 border-t border-slate-100",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-900 text-white flex items-center justify-center font-bold text-sm",children:c.author.charAt(0)}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-bold text-slate-900",children:c.author}),u.jsx("p",{className:"text-xs text-slate-500",children:c.date})]})]})]}),u.jsx("figure",{className:"mb-12",children:u.jsx("img",{src:c.image,alt:c.title,className:"w-full aspect-video object-cover rounded-2xl shadow-lg border border-slate-100"})}),u.jsx("div",{className:"prose prose-lg prose-slate max-w-none mb-16 font-serif",children:Ce(c.content)}),c.sources&&c.sources.length>0&&u.jsxs("div",{className:"border-t border-slate-100 pt-10 mb-16",children:[u.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[u.jsx(md,{className:"w-4 h-4"}),"Sumber Referensi"]}),u.jsx("ul",{className:"space-y-3",children:c.sources.map((G,me)=>u.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[u.jsxs("span",{className:"text-slate-300 font-bold select-none",children:[me+1,"."]}),u.jsx("a",{href:G.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline font-medium break-all",children:G.label})]},me))})]}),z.length>0&&u.jsxs("div",{className:"border-t-2 border-slate-100 pt-12",children:[u.jsxs("h3",{className:"text-xl font-black text-slate-900 mb-6 flex items-center gap-3",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1170/1170221.png",alt:"Read Also",className:"w-6 h-6 object-contain opacity-60"}),"Baca Juga"]}),u.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:z.map(G=>u.jsxs("div",{onClick:()=>ie(G),className:"group cursor-pointer bg-slate-50 rounded-2xl p-4 border border-slate-100 hover:border-slate-300 hover:bg-white hover:shadow-lg transition-all",children:[u.jsx("div",{className:"aspect-video rounded-xl overflow-hidden mb-4 bg-slate-200",children:u.jsx("img",{src:G.image,alt:G.title,className:"w-full h-full object-cover opacity-90 group-hover:scale-105 transition-transform duration-500"})}),u.jsx("h4",{className:"font-bold text-slate-900 leading-tight mb-2 group-hover:text-blue-600 line-clamp-2",children:G.title}),u.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:G.subtitle})]},G.id))})]})]})})}return u.jsxs("div",{id:"blog-top",className:"max-w-7xl mx-auto px-6 py-12 animate-fade-in relative pb-24",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-16 gap-6",children:[u.jsxs("div",{className:"max-w-2xl",children:[u.jsx(ct,{id:"blog_header_title",defaultText:"Insights & Stories",isAdmin:t,tag:"h1",className:"text-4xl md:text-6xl font-black text-slate-900 mb-6 tracking-tight"}),u.jsx(ct,{id:"blog_header_desc",defaultText:"Kumpulan pemikiran mendalam, fakta sains, dan eksplorasi ide yang mungkin bikin lo begadang mikirin alam semesta.",isAdmin:t,tag:"p",multiline:!0,className:"text-lg text-slate-500 leading-relaxed"})]}),t&&u.jsxs("button",{onClick:lt,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 whitespace-nowrap",children:[u.jsx(Mv,{className:"w-5 h-5"}),"Write Story"]})]}),u.jsx(gu,{isOpen:!!I,title:"Hapus Artikel?",description:"Artikel ini akan dihapus permanen. Tindakan ini tidak bisa dibatalkan.",confirmText:"Ya, Hapus",onConfirm:se,onCancel:()=>$(null)}),i&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),u.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Artikel..."})]}),!i&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[Pe.map(z=>u.jsxs("div",{onClick:()=>ie(z),className:"group cursor-pointer flex flex-col h-full relative",children:[u.jsxs("div",{className:"relative aspect-[4/3] bg-slate-100 rounded-[2rem] overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500 border border-slate-200",children:[u.jsx("img",{src:z.image,alt:z.title,loading:"lazy",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"}),t&&u.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2",children:[u.jsx("button",{onClick:G=>ze(G,z),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-blue-600 hover:bg-white transition-colors",children:u.jsx(Op,{className:"w-4 h-4"})}),u.jsx("button",{onClick:G=>C(G,z.id),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-red-500 hover:bg-white transition-colors",children:ce===z.id?u.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):u.jsx(Lr,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute top-6 left-6",children:u.jsx("span",{className:"bg-white/90 backdrop-blur text-slate-900 text-[10px] font-bold px-3 py-1.5 rounded-full uppercase tracking-wider shadow-sm",children:z.category})})]}),u.jsxs("div",{className:"flex-1 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium text-slate-400 mb-3",children:[u.jsx("span",{children:z.date}),u.jsx("span",{children:""}),u.jsx("span",{children:z.readTime})]}),u.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3 leading-tight group-hover:text-blue-600 transition-colors",children:z.title}),u.jsx("p",{className:"text-slate-500 line-clamp-3 leading-relaxed mb-6",children:z.subtitle}),u.jsxs("div",{className:"mt-auto flex items-center text-sm font-bold text-slate-900 group-hover:translate-x-2 transition-transform duration-300",children:["Baca Selengkapnya ",u.jsx($o,{className:"w-4 h-4 ml-2"})]})]})]},z.id)),r.length<=m&&u.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-[2rem] flex flex-col items-center justify-center p-8 text-center min-h-[400px]",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4 text-slate-300",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3018/3018445.png",alt:"Coming Soon",className:"w-8 h-8 object-contain opacity-50"})}),u.jsx(ct,{id:"blog_placeholder_title",defaultText:"Tulisan Mendatang",isAdmin:t,tag:"h3",className:"font-bold text-slate-400 mb-2"}),u.jsx(ct,{id:"blog_placeholder_desc",defaultText:"Artikel tentang AI Consciousness, Sejarah Internet, dan Psikologi Warna sedang ditulis...",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-slate-400 max-w-xs mx-auto"})]})]}),u.jsxs("div",{className:"flex flex-col items-center gap-3 mt-16 mb-8",children:[gt&&u.jsxs("button",{onClick:Oe,className:"px-6 py-3 rounded-full bg-white border border-slate-200 text-slate-700 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Artikel Lainnya",u.jsx(vr,{className:"w-4 h-4"})]}),tn&&u.jsxs("button",{onClick:He,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Tutup / Sembunyikan",u.jsx(vr,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]})},_j=({isAdmin:t})=>{const[e,n]=F.useState([]),[r,s]=F.useState(!0),[i,o]=F.useState("All"),[a,l]=F.useState(null),c=9,[d,m]=F.useState(c),[g,y]=F.useState(!1),[w,x]=F.useState("add"),[_,v]=F.useState({}),[E,T]=F.useState(!1),[N,L]=F.useState(null),[U,k]=F.useState(null),R=async()=>{s(!0);try{const ee=await y1();n(ee)}catch(ee){console.error("Failed to load photos",ee)}finally{s(!1)}};F.useEffect(()=>{R()},[]),F.useEffect(()=>{m(c)},[i]);const A=["All",...Array.from(new Set(e.map(ee=>ee.year))).sort().reverse()],M=i==="All"?e:e.filter(ee=>ee.year===i),V=M.slice(0,d),P=d<M.length,D=d>c,I=V.reduce((ee,X)=>(ee[X.year]||(ee[X.year]=[]),ee[X.year].push(X),ee),{}),$=Object.keys(I).sort().reverse(),ce=()=>{m(ee=>ee+c)},te=()=>{m(c);const ee=document.getElementById("gallery-top-anchor");ee&&ee.scrollIntoView({behavior:"smooth"})},ne=()=>{x("add"),v({src:"",caption:"",month:"Januari",year:new Date().getFullYear().toString(),timestamp:Date.now()}),y(!0)},Q=(ee,X)=>{ee.stopPropagation(),x("edit"),v({...X}),y(!0)},ae=(ee,X)=>{ee.stopPropagation(),X&&k(X)},K=async()=>{if(!U)return;const ee=U;L(ee),k(null);try{await W3(ee),n(X=>X.filter(Ie=>Ie.id!==ee)),qe("Foto berhasil dihapus.")}catch(X){console.error(X),qe("Gagal menghapus foto. Cek koneksi internet."),R()}finally{L(null)}},H=async()=>{if(!_.src||!_.year){qe("Gambar dan Tahun wajib diisi.");return}T(!0);try{w==="add"?await $3(_):_.id&&await q3(_.id,_),y(!1),qe(w==="add"?"Foto ditambahkan!":"Foto diperbarui!"),R()}catch(ee){console.error(ee),qe("Gagal menyimpan data.")}finally{T(!1)}},he=ee=>{var Ie;const X=(Ie=ee.target.files)==null?void 0:Ie[0];if(X){const Be=new FileReader;Be.onloadend=()=>{const ke=Be.result;v(je=>({...je,src:ke}))},Be.readAsDataURL(X)}};return u.jsxs("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:[u.jsx(gu,{isOpen:!!U,title:"Hapus Memori?",description:"Foto ini akan dihapus secara permanen dari galeri. Tindakan ini tidak dapat dibatalkan.",confirmText:"Ya, Hapus",onConfirm:K,onCancel:()=>k(null)}),u.jsxs("div",{id:"gallery-top-anchor",className:"max-w-7xl mx-auto px-6 pt-12 pb-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-slate-900 mb-4 tracking-tight",children:["Visual ",u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Diaries"})]}),u.jsx("p",{className:"text-lg text-slate-500 max-w-2xl leading-relaxed",children:"Koleksi momen acak, dikelompokkan berdasarkan waktu."})]}),t&&u.jsxs("button",{onClick:ne,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95",children:[u.jsx(Pl,{className:"w-5 h-5"}),"Add Memory"]})]}),u.jsx("div",{className:"flex flex-wrap gap-2 mt-8",children:A.map(ee=>u.jsx("button",{onClick:()=>o(ee),className:`px-5 py-2 rounded-full text-sm font-bold transition-all duration-300 ${i===ee?"bg-slate-900 text-white shadow-lg shadow-slate-900/20":"bg-slate-50 text-slate-500 hover:bg-slate-100 hover:text-slate-900"}`,children:ee},ee))})]}),u.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),u.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Galeri..."})]}),!r&&M.length===0&&u.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[u.jsx(Ig,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),u.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada foto di periode ini."})]}),!r&&V.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"space-y-16",children:$.map(ee=>u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"flex items-center gap-6 mb-8 mt-4",children:[u.jsx("span",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tighter",children:ee}),u.jsx("div",{className:"h-0.5 bg-slate-200 flex-1 rounded-full opacity-50"})]}),u.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-3 gap-6 space-y-6",children:I[ee].map(X=>u.jsxs("div",{className:"break-inside-avoid relative group cursor-pointer rounded-2xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-lg transition-all duration-300 transform translate-z-0",onClick:()=>l(X),children:[u.jsx("img",{src:X.src,alt:X.caption,loading:"lazy",className:"w-full h-auto object-cover transform transition-transform duration-700 group-hover:scale-105"}),t&&u.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:Ie=>Q(Ie,X),className:"p-2.5 bg-white text-slate-700 rounded-full shadow-md hover:bg-blue-50 hover:text-blue-600 transition-colors border border-slate-100",title:"Edit",children:u.jsx(Op,{className:"w-4 h-4"})}),u.jsx("button",{onClick:Ie=>ae(Ie,X.id),disabled:N===X.id,className:`p-2.5 bg-white rounded-full shadow-md transition-colors border border-slate-100 ${N===X.id?"text-slate-300 cursor-wait":"text-red-500 hover:bg-red-50"}`,title:"Hapus",children:N===X.id?u.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):u.jsx(Lr,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),u.jsx("div",{className:"absolute bottom-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:u.jsx("span",{className:"bg-black/30 backdrop-blur-md text-white text-[10px] font-bold px-3 py-1.5 rounded-full border border-white/20 uppercase tracking-widest shadow-sm",children:X.month})})]},X.id||X.src))})]},ee))}),u.jsxs("div",{className:"flex flex-col items-center gap-3 mt-20 mb-8",children:[P&&u.jsxs("button",{onClick:ce,className:"px-6 py-3 rounded-full bg-white border border-slate-200 text-slate-700 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Momen Terdahulu",u.jsx(vr,{className:"w-4 h-4"})]}),D&&u.jsxs("button",{onClick:te,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Tutup / Sembunyikan",u.jsx(vr,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]}),a&&u.jsxs("div",{className:"fixed inset-0 z-[100] bg-white/95 backdrop-blur-xl flex items-center justify-center p-4 animate-fade-in",onClick:()=>l(null),children:[u.jsx("button",{onClick:()=>l(null),className:"absolute top-6 left-6 z-10 p-3 bg-slate-100 hover:bg-slate-200 text-slate-800 rounded-full transition-all group shadow-sm border border-slate-200",children:u.jsx(us,{className:"w-6 h-6 group-hover:-translate-x-1 transition-transform"})}),u.jsxs("div",{className:"relative max-w-5xl w-full flex flex-col items-center gap-8",onClick:ee=>ee.stopPropagation(),children:[u.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-2xl max-h-[75vh] bg-slate-50",children:u.jsx("img",{src:a.src,alt:"Gallery View",className:"max-w-full max-h-[75vh] object-contain"})}),u.jsxs("div",{className:"text-center max-w-2xl px-4 animate-fade-in-up",children:[u.jsxs("p",{className:"text-lg md:text-xl text-slate-900 font-medium leading-relaxed",children:['"',a.caption,'"']}),u.jsx("div",{className:"mt-4 flex items-center justify-center gap-3",children:u.jsxs("div",{className:"inline-block px-3 py-1 bg-slate-100 rounded-full text-slate-600 text-xs font-bold uppercase tracking-widest border border-slate-200",children:[a.month," ",a.year]})})]})]})]}),g&&u.jsx("div",{className:"fixed inset-0 z-[120] bg-slate-900/40 backdrop-blur-md flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl p-8 shadow-2xl animate-fade-in-up border border-slate-100 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:w==="add"?"Tambah Memori":"Edit Memori"}),u.jsx("button",{onClick:()=>y(!1),className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-900 transition-colors",children:""})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Gambar"}),u.jsx("div",{className:"flex gap-3 mb-3",children:u.jsx("input",{type:"file",accept:"image/*",onChange:he,className:"text-xs w-full file:mr-4 file:py-2.5 file:px-5 file:rounded-full file:border-0 file:text-xs file:font-bold file:bg-blue-50 file:text-blue-600 hover:file:bg-blue-100 transition-colors cursor-pointer bg-slate-50 rounded-xl p-1"})}),u.jsx("input",{type:"text",placeholder:"Atau tempel URL gambar...",value:_.src||"",onChange:ee=>v(X=>({...X,src:ee.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none placeholder:text-slate-400"}),_.src&&u.jsxs("div",{className:"mt-4 h-32 w-full rounded-xl overflow-hidden border border-slate-200 bg-slate-50 relative group",children:[u.jsx("img",{src:_.src,alt:"Preview",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsx("span",{className:"text-white text-xs font-bold bg-black/50 px-3 py-1 rounded-full backdrop-blur-sm",children:"Preview"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Caption"}),u.jsx("textarea",{value:_.caption||"",onChange:ee=>v(X=>({...X,caption:ee.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none resize-none h-32 leading-relaxed placeholder:text-slate-400",placeholder:"Ceritakan momen ini..."})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Bulan"}),u.jsxs("div",{className:"relative",children:[u.jsx("select",{value:_.month||"Januari",onChange:ee=>v(X=>({...X,month:ee.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none appearance-none font-medium",children:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"].map(ee=>u.jsx("option",{value:ee,children:ee},ee))}),u.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:u.jsx(vr,{className:"w-4 h-4"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Tahun"}),u.jsx("input",{type:"number",value:_.year||"",onChange:ee=>v(X=>({...X,year:ee.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none font-medium"})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-10 pt-6 border-t border-slate-100",children:[u.jsx("button",{onClick:()=>y(!1),className:"px-6 py-3 text-slate-500 hover:text-slate-800 hover:bg-slate-50 rounded-xl text-sm font-bold transition-all",children:"Batal"}),u.jsxs("button",{onClick:H,disabled:E,className:"px-8 py-3 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800 disabled:opacity-50 transition-all shadow-lg shadow-slate-900/20 active:scale-95 flex items-center gap-2",children:[E&&u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),E?"Menyimpan...":"Simpan Memori"]})]})]})})]})},bj=({isAdmin:t})=>{const[e,n]=F.useState([]),[r,s]=F.useState(null),[i,o]=F.useState(!1),[a,l]=F.useState(!0),[c,d]=F.useState(!1),[m,g]=F.useState(""),[y,w]=F.useState(""),[x,_]=F.useState(""),[v,E]=F.useState(!1),[T,N]=F.useState(!1),[L,U]=F.useState(null),k=F.useRef(null),R=async()=>{l(!0);try{const I=await ej();n(I),I.length>0&&(s(I[0]),o(!1))}catch(I){console.error(I)}finally{l(!1)}};F.useEffect(()=>{R()},[]),F.useEffect(()=>{let I;return!a&&e.length>0&&(I=setTimeout(()=>{o(!0)},5e3)),()=>{I&&clearTimeout(I)}},[a,e.length]);const A=I=>{try{if(I.includes("/track/")){const $=I.split("/track/");if($.length>1)return $[1].split("?")[0]}if(I.includes("spotify:track:")){const $=I.split(":");if($.length>2)return $[2]}if(I.length>15&&!I.includes("/"))return I}catch{return null}return null},M=async()=>{if(!m||!y||!x){qe("Harap isi semua kolom.");return}const I=A(m);if(!I){qe("Link Spotify tidak valid.");return}E(!0);try{await tj({spotifyId:I,title:y,artist:x,addedAt:Date.now()}),await R(),d(!1),g(""),w(""),_(""),qe("Lagu berhasil ditambahkan!")}catch{qe("Gagal menambahkan lagu.")}finally{E(!1)}},V=(I,$)=>{$.stopPropagation(),U(I),N(!0)},P=async()=>{if(L)try{if(await nj(L),n(I=>I.filter($=>$.id!==L)),(r==null?void 0:r.id)===L){const I=e.filter($=>$.id!==L);I.length>0?(s(I[0]),o(!1)):(s(null),o(!1))}qe("Lagu dihapus.")}catch{qe("Gagal menghapus.")}finally{N(!1),U(null)}},D=I=>{(r==null?void 0:r.id)===I.id?o(!i):(s(I),o(!0))};return u.jsxs("div",{className:"min-h-screen bg-white relative overflow-hidden flex flex-col h-full",children:[u.jsx("style",{children:`
                    .no-scrollbar::-webkit-scrollbar {
                        display: none;
                    }
                    .no-scrollbar {
                        -ms-overflow-style: none;
                        scrollbar-width: none;
                    }
                `}),u.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-blue-50/50 rounded-full blur-3xl opacity-60 pointer-events-none translate-x-1/3 -translate-y-1/3"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-purple-50/50 rounded-full blur-3xl opacity-60 pointer-events-none -translate-x-1/3 translate-y-1/3"}),u.jsx(gu,{isOpen:T,title:"Hapus Lagu?",description:"Lagu ini akan dihapus dari playlist publik. Yakin?",confirmText:"Ya, Hapus",onConfirm:P,onCancel:()=>N(!1)}),u.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar relative z-10 pb-24",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8 md:py-12",children:[u.jsxs("div",{className:"text-center mb-8 md:mb-10",children:[u.jsx(ct,{id:"music_title",defaultText:"Soundtrack of Life",isAdmin:t,tag:"h1",className:"text-3xl md:text-5xl font-black text-slate-900 tracking-tighter mb-2 md:mb-4"}),u.jsx(ct,{id:"music_desc",defaultText:"Kumpulan frekuensi pengiring coding & kontemplasi malam.",isAdmin:t,tag:"p",className:"text-sm md:text-base text-slate-500 font-medium"})]}),r&&u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl border border-slate-100 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 shadow-2xl shadow-slate-200/50 mb-10 md:mb-12 relative overflow-hidden transition-all hover:shadow-slate-300/50",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-20 blur-3xl scale-125 pointer-events-none transition-colors duration-1000",children:u.jsx("div",{className:`w-full h-full bg-gradient-to-tr ${i?"from-blue-300 to-purple-300":"from-slate-200 to-gray-200"}`})}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[u.jsxs("div",{className:"relative mb-6 mt-2 md:mb-8 md:mt-4 group cursor-pointer",onClick:()=>o(!i),children:[u.jsxs("div",{className:`w-48 h-48 md:w-64 md:h-64 rounded-full bg-slate-900 shadow-2xl flex items-center justify-center relative overflow-hidden border-4 border-slate-800 ${i?"animate-[spin_4s_linear_infinite]":"transition-transform duration-700 ease-out"}`,children:[u.jsx("div",{className:"absolute inset-2 rounded-full border border-slate-800/50"}),u.jsx("div",{className:"absolute inset-4 rounded-full border border-slate-800/50"}),u.jsx("div",{className:"absolute inset-8 rounded-full border border-slate-800/50"}),u.jsx("div",{className:"absolute inset-12 rounded-full border border-slate-800/50"}),u.jsxs("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-tr from-blue-500 to-purple-600 rounded-full flex items-center justify-center relative shadow-inner",children:[u.jsx("div",{className:"w-2 h-2 md:w-2.5 md:h-2.5 bg-white rounded-full shadow-sm"}),u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-30"})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-full"})]}),u.jsx("div",{className:`absolute -top-8 -right-6 md:-top-12 md:-right-8 w-24 h-32 md:w-28 md:h-40 pointer-events-none transition-transform duration-1000 ease-in-out origin-[70%_15%] drop-shadow-xl z-20 ${i?"rotate-[0deg]":"-rotate-[40deg]"}`,children:u.jsxs("svg",{viewBox:"0 0 100 150",className:"w-full h-full",children:[u.jsx("circle",{cx:"70",cy:"20",r:"8",fill:"#94a3b8",stroke:"#64748b",strokeWidth:"2"}),u.jsx("path",{d:"M70 20 L60 90 L45 100",fill:"none",stroke:"#64748b",strokeWidth:"5",strokeLinecap:"round"}),u.jsx("rect",{x:"38",y:"95",width:"16",height:"20",fill:"#334155",rx:"2",transform:"rotate(20 46 105)"})]})}),!i&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-full p-3 md:p-4",children:u.jsx(lN,{className:"w-6 h-6 md:w-8 md:h-8 text-white ml-1"})})})]}),u.jsxs("div",{className:"w-full text-center",children:[u.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-900 mb-1 leading-tight line-clamp-1",children:r.title}),u.jsx("p",{className:"text-xs md:text-sm text-slate-500 font-bold uppercase tracking-widest mb-4 md:mb-6 line-clamp-1",children:r.artist}),u.jsx("div",{className:"w-full rounded-2xl overflow-hidden shadow-sm border border-slate-100 bg-slate-50 relative z-20",children:u.jsx("iframe",{ref:k,src:`https://open.spotify.com/embed/track/${r.spotifyId}?utm_source=generator&theme=0&autoplay=1`,width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Player",className:"border-0 block",style:{overflow:"hidden"}})}),u.jsx("button",{onClick:()=>o(!i),className:"mt-4 text-[10px] font-bold text-slate-400 bg-slate-50 px-3 py-1.5 rounded-full hover:bg-slate-100 transition-colors",children:i?"Matikan Animasi Manual":"Nyalakan Animasi Manual"})]})]})]}),u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[u.jsxs("h3",{className:"text-base md:text-lg font-bold text-slate-900 flex items-center gap-2",children:[u.jsx(uN,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-400"}),"Daftar Putar"]}),t&&u.jsx("button",{onClick:()=>d(!c),className:"text-[10px] md:text-xs font-bold bg-slate-900 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-slate-800 transition-all shadow-md active:scale-95",children:c?"Tutup":"+ Add Song"})]}),c&&u.jsxs("div",{className:"bg-slate-50 p-4 md:p-6 rounded-2xl border border-slate-200 mb-6 md:mb-8 animate-fade-in-up",children:[u.jsx("h4",{className:"text-sm font-bold text-slate-800 mb-4",children:"Tambah Lagu Baru"}),u.jsxs("div",{className:"grid gap-3 md:gap-4",children:[u.jsx("input",{type:"text",placeholder:"Link Spotify...",value:m,onChange:I=>g(I.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[u.jsx("input",{type:"text",placeholder:"Judul Lagu",value:y,onChange:I=>w(I.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"}),u.jsx("input",{type:"text",placeholder:"Nama Artis",value:x,onChange:I=>_(I.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"})]}),u.jsx("button",{onClick:M,disabled:v,className:"w-full bg-blue-600 text-white font-bold py-2.5 md:py-3 rounded-xl hover:bg-blue-700 transition-all disabled:opacity-50 text-sm",children:v?"Menyimpan...":"Simpan ke Playlist"})]})]}),u.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.map((I,$)=>u.jsxs("div",{onClick:()=>D(I),className:`group flex items-center gap-3 md:gap-4 p-3 pr-4 rounded-xl cursor-pointer border transition-all duration-300 ${(r==null?void 0:r.id)===I.id?"bg-slate-900 border-slate-900 shadow-lg scale-[1.01] md:scale-[1.02]":"bg-white border-slate-100 hover:border-slate-300 hover:shadow-md"}`,children:[u.jsx("div",{className:`w-8 h-8 flex items-center justify-center text-xs md:text-sm font-bold rounded-lg shrink-0 ${(r==null?void 0:r.id)===I.id?"text-white":"text-slate-400 bg-slate-50 group-hover:bg-slate-100 group-hover:text-slate-600"}`,children:(r==null?void 0:r.id)===I.id&&i?u.jsxs("div",{className:"flex gap-0.5 items-end h-3",children:[u.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1s_infinite] h-2"}),u.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1.2s_infinite] h-3"}),u.jsx("div",{className:"w-0.5 bg-white animate-[bounce_0.8s_infinite] h-1.5"})]}):$+1}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:`font-bold text-xs md:text-sm truncate ${(r==null?void 0:r.id)===I.id?"text-white":"text-slate-800"}`,children:I.title}),u.jsx("p",{className:`text-[10px] md:text-xs truncate ${(r==null?void 0:r.id)===I.id?"text-slate-400":"text-slate-500"}`,children:I.artist})]}),u.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[u.jsx("div",{className:`p-1.5 md:p-2 rounded-full transition-colors ${(r==null?void 0:r.id)===I.id?"bg-white/10 text-white":"bg-slate-100 text-slate-400 group-hover:text-green-600 group-hover:bg-green-50"}`,children:u.jsx(IT,{className:"w-4 h-4"})}),t&&u.jsx("button",{onClick:ce=>V(I.id,ce),className:"p-1.5 md:p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-full transition-all",title:"Hapus",children:u.jsx(Lr,{className:"w-4 h-4"})})]})]},I.id||$)),e.length===0&&!a&&u.jsx("div",{className:"text-center py-12 text-slate-400 text-sm",children:"Playlist kosong. Tambahkan lagu baru."})]})]})]})})]})},Ej=({isAdmin:t})=>{const[e,n]=F.useState([]),[r,s]=F.useState(!0),i=6,[o,a]=F.useState(i),[l,c]=F.useState(""),[d,m]=F.useState(!1),[g,y]=F.useState(!1),[w,x]=F.useState(!1),[_,v]=F.useState(null),[E,T]=F.useState(null),N=280,L=async()=>{s(!0);try{const $=await ij();n($)}catch($){console.error($)}finally{s(!1)}};F.useEffect(()=>{L()},[]);const U=async()=>{if(l.trim()){y(!0);try{await rj({content:l.trim(),type:d?"private":"public",sender:"Anonim"}),x(!0),c(""),d||(L(),a(i)),setTimeout(()=>x(!1),3e3)}catch{qe("Gagal mengirim pesan.")}finally{y(!1)}}},k=($,ce)=>{ce.stopPropagation(),$&&T($)},R=async()=>{if(!E)return;const $=E;v($),T(null);try{await sj($),n(ce=>ce.filter(te=>te.id!==$)),qe("Pesan dihapus.")}catch(ce){qe("Gagal menghapus pesan."),console.error(ce)}finally{v(null)}},A=()=>{a($=>$+i)},M=()=>{a(i);const $=document.getElementById("message-feed-top");$&&$.scrollIntoView({behavior:"smooth"})},V=$=>new Date($).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),P=e.slice(0,o),D=o<e.length,I=o>i;return u.jsxs("div",{className:"min-h-screen bg-slate-50 relative pb-20",children:[u.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-40",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),u.jsx(gu,{isOpen:!!E,title:"Hapus Pesan?",description:"Pesan ini akan dihapus secara permanen dari Public Wall. Tindakan ini tidak dapat dibatalkan.",confirmText:"Ya, Hapus",onConfirm:R,onCancel:()=>T(null)}),u.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12 relative z-10",children:[u.jsxs("div",{className:"mb-16 text-center space-y-8",children:[u.jsxs("div",{children:[u.jsx(ct,{id:"msg_feed_title",defaultText:"Public Wall",isAdmin:t,tag:"h1",className:"text-4xl font-black text-slate-900 tracking-tight mb-2"}),u.jsx(ct,{id:"msg_feed_desc",defaultText:"Tulis sesuatu. Rahasia, harapan, atau sekadar 'Halo'.",isAdmin:t,tag:"p",className:"text-slate-500 font-medium"})]}),u.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-xl shadow-slate-200/60 border border-slate-100 max-w-2xl mx-auto transition-all focus-within:ring-2 focus-within:ring-slate-900/5 relative",children:[u.jsx("textarea",{value:l,onChange:$=>c($.target.value),maxLength:N,className:"w-full h-32 bg-transparent text-lg font-medium text-slate-800 placeholder:text-slate-300 resize-none outline-none leading-relaxed",placeholder:"Apa yang sedang kamu pikirkan?"}),u.jsxs("div",{className:`absolute bottom-20 right-6 text-[10px] font-bold transition-colors ${l.length>=N?"text-red-500":"text-slate-300"}`,children:[l.length,"/",N]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-50 flex items-center justify-between",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none px-2 py-1 rounded-lg hover:bg-slate-50 transition-colors",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:d,onChange:$=>m($.target.checked)}),u.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-slate-900 transition-colors"})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[d?u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/4436/4436450.png",alt:"Private",className:"w-4 h-4 object-contain"}):u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/417/417720.png",alt:"Public",className:"w-4 h-4 object-contain"}),u.jsx("span",{className:`text-xs font-bold transition-colors ${d?"text-slate-900":"text-slate-400"}`,children:d?"Privat":"Publik"})]})]}),u.jsx("button",{onClick:U,disabled:!l.trim()||g,className:`
                                    flex items-center gap-2 px-6 py-2.5 rounded-xl font-bold text-sm transition-all shadow-lg active:scale-95
                                    ${w?"bg-green-500 text-white shadow-green-500/20":"bg-slate-900 text-white hover:bg-slate-800 shadow-slate-900/20 disabled:bg-slate-200 disabled:text-slate-400 disabled:shadow-none disabled:cursor-not-allowed"}
                                `,children:g?u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):w?u.jsxs(u.Fragment,{children:["Terkirim ",u.jsx(cs,{className:"w-4 h-4"})]}):u.jsxs(u.Fragment,{children:["Kirim ",u.jsx(TT,{className:"w-4 h-4"})]})})]})]})]}),u.jsxs("div",{id:"message-feed-top",className:"flex items-center justify-between mb-6 px-2",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/417/417720.png",alt:"Feed",className:"w-4 h-4 object-contain opacity-60"})," Pesan Terbaru"]}),u.jsx("button",{onClick:L,className:"p-2 text-slate-400 hover:text-slate-900 hover:bg-white rounded-full transition-all",title:"Refresh",children:u.jsx(ih,{className:"w-4 h-4"})})]}),r?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map($=>u.jsx("div",{className:"h-32 bg-slate-200/50 rounded-2xl animate-pulse"},$))}):e.length===0?u.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[u.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada pesan publik."}),u.jsx("p",{className:"text-slate-300 text-sm",children:"Jadilah yang pertama menulis!"})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"columns-1 md:columns-2 gap-6 space-y-6",children:P.map(($,ce)=>u.jsxs("div",{className:"break-inside-avoid bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md hover:border-slate-200 hover:-translate-y-1 transition-all duration-300 group relative overflow-hidden",children:[u.jsxs("p",{className:"text-slate-800 text-[15px] font-medium leading-relaxed whitespace-pre-wrap break-words relative z-10",children:['"',$.content,'"']}),u.jsx("div",{className:"mt-4 flex justify-end",children:u.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-widest bg-slate-50 px-2 py-1 rounded",children:V($.timestamp)})}),t&&u.jsx("button",{onClick:te=>k($.id,te),disabled:_===$.id,className:"absolute top-2 right-2 p-2 bg-white/80 backdrop-blur-sm rounded-full text-slate-400 hover:text-red-500 hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100 border border-transparent hover:border-red-100 shadow-sm z-20",title:"Hapus Pesan",children:_===$.id?u.jsx("div",{className:"w-3.5 h-3.5 border-2 border-red-200 border-t-red-500 rounded-full animate-spin"}):u.jsx(Lr,{className:"w-3.5 h-3.5"})})]},$.id||ce))}),u.jsxs("div",{className:"flex flex-col items-center gap-3 mt-12",children:[D&&u.jsxs("button",{onClick:A,className:"px-6 py-2.5 rounded-full bg-white border border-slate-200 text-slate-600 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Pesan Lainnya",u.jsx(vr,{className:"w-4 h-4"})]}),I&&u.jsxs("button",{onClick:M,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Sembunyikan (Tutup)",u.jsx(vr,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]})]})};function Tj(){return null}function Ij(){return null}var _n=(t=>(t.BACKGROUND_REMOVER="bg_remove",t.HD_UPSCALE="hd_upscale",t.CREATIVE_REMIX="creative_remix",t.COLORIZE="colorize",t.SKETCH_TO_REAL="sketch_real",t))(_n||{});const yu={id:{welcome:"Halo, Siapa Disana?",welcomeSubtitle:"Biar kita makin akrab, kenalan dulu yuk! Isi nama dan sekolahmu ya, biar enak ngobrolnya.",enterName:"Aku biasa dipanggil...",enterSchool:"Aku sekolah / kuliah di...",namePlaceholder:"Contoh: Rara",schoolPlaceholder:"Contoh: SMA 1 Jakarta / UI",accessButton:"Oke, Salam Kenal!",verifying:"Lagi mencatat...",deviceIdNote:"Santai aja, ini cuma biar aku inget temen baru.",credits:"Limit",adminMode:"Mode Admin",unlimited:"Tanpa Batas",logOut:"Ganti Akun",heroTitle:"Hai,",heroSubtitle:"Sudah siap bikin karya keren hari ini?",toolBgRemove:"Hapus Background",toolBgRemoveDesc:"Hapus latar belakang secara instan dan rapi.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Pertajam detail & resolusi tinggi agar tidak pecah.",toolRemix:"Creative Remix",toolRemixDesc:"Ubah gaya gambar dengan bantuan AI.",toolColorize:"Warnai Foto",toolColorizeDesc:"Ubah foto hitam putih jadi berwarna.",toolSketch:"Sketsa ke Nyata",toolSketchDesc:"Ubah coretan tangan jadi gambar realistis.",moreTools:"Lihat Lainnya",lessTools:"Sembunyikan",back:"Kembali",preview:"Pratinjau",changePhoto:"Ganti Foto",aiPrompt:"Instruksi AI",aiPromptPlaceholder:"Jelaskan bagaimana Anda ingin mengubah gambar ini...",generate:"Mulai Proses",generateMagic:"Buat Keajaiban",processing:"Memproses",processingStandard:"Sedang meracik gambar...",processingCloud:"Mengirim ke awan...",processingAI:"AI sedang bekerja...",refining:"Sedikit polesan lagi...",optimizingLocal:"Memproses di perangkatmu (Mode Hemat)...",initializing:"Siap-siap...",resultComparison:"Hasil Karya Kamu",download:"Simpan Gambar",reset:"Ulangi",original:"ASLI",result:"HASIL",bgColor:"Ganti Warna Belakang",uploadPrompt:"Pilih foto terbaikmu untuk diedit",settingsTitle:"Pengaturan Sistem",systemPref:"Preferensi AI",knowledgeMode:"Mode Pengetahuan (Database)",knowledgeModeDesc:"Hemat Kuota. AI hanya menjawab dari database lokal tanpa Gemini API.",totalKnowledge:"Total Memori Tersimpan",wikiMode:"Izinkan Wikipedia",wikiModeDesc:"Jika info tidak ada di database, cari di Wikipedia (Tetap hemat kuota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Kelola API Key untuk fitur chat cerdas dan edit gambar.",selectKeyBtn:"Ambil Key via AI Studio",orManually:"Kelola Key Manual",customKeyActive:"Key Pribadi Aktif",defaultKeyActive:"Key Sistem (Terbatas)",removeBgTitle:"Remove.bg API",removeBgDesc:"Engine khusus hapus background presisi tinggi.",supabaseTitle:"Supabase Engine",supabaseDesc:"Engine cadangan untuk pemrosesan gambar.",googleSearchTitle:"Google Search API",googleSearchDesc:"Opsi pencarian terakhir (Fallback) jika DB & Wiki gagal.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Tutup",save:"Simpan",active:"Aktif",inactive:"Nonaktif",addKeyPlaceholder:"Tempel API Key Gemini disini...",addKeyBtn:"Tambah Key",keyDisclaimerTitle:" Peringatan Penting",keyDisclaimerText:"Dengan menambahkan API Key pribadi, saya sadar bahwa segala bentuk penggunaan, kuota, dan keamanan key tersebut adalah tanggung jawab saya sepenuhnya. Fanra AI Studio tidak bertanggung jawab atas penyalahgunaan atau tagihan yang muncul akibat kelalaian pengguna.",consentCheckbox:"Saya mengerti dan setuju untuk melanjutkan.",keysStored:"Daftar Key",noKeysYet:"Belum ada key tersimpan. Masih pakai limit bawaan.",newChat:"Percakapan Baru",historyHeader:"Riwayat",loginToSave:"Login untuk simpan progres",loginBtn:"Masuk Akun",historyItem1:"editing foto sekolah...",historyItem2:"hapus background merah...",chatPlaceholder:"ketik pesan atau tanya Fanra...",chatDisclaimer:"Fanra bisa salah. cek lagi info penting.",chatFallbackError:"duh, koneksi gue lagi putus dan gue belum pernah dapet pertanyaan ini sebelumnya. cek internet lo atau API key nya deh.",chatOfflineMode:"(Mode Database) Info tidak ditemukan di database.",chatImageResponse:"wih, kirim gambar ya? sori nih gue baru bisa edit gambar kalo lo pake menu di atas itu. coba klik ikon-ikon di atas deh.",errorTitle:"Ups, Ada Masalah",insufficientCredits:"Yah, limit habis! Masukkan API Key di pengaturan agar Unlimited.",limitReachedHQ:"Kuota High Quality harian sudah penuh.",serviceBusy:"Server lagi ramai nih. Coba lagi sebentar ya.",networkError:"Koneksi internetmu sepertinya putus nyambung.",memoryError:"HP keberatan proses gambar ini. Coba gambar lain ya.",confirmTitle:"Yakin mau ganti?",confirmDesc:"Proses yang ini belum disimpan lho. Mau ganti aktivitas?",yesChange:"Ya, Ganti Aja",uploadTitle:"Unggah Foto",uploadDesc:"Klik atau tarik fotomu ke sini",dropHere:"Lepaskan fotonya!",invalidImage:"Format file ini tidak didukung. Pakai JPG/PNG ya.",toolLockedMsg:"Fitur ini sedang dalam pengembangan/perbaikan. Mohon pengertiannya ya, developer lagi ngoprek!",limitChatReached:"Energi Fanra habis untuk hari ini. Karena ini project mandiri dengan resource terbatas, chat dibatasi dulu ya. Besok reset kok! (Login untuk kuota lebih)",limitImageReached:"Limit upload gambar hari ini sudah habis. Server butuh istirahat karena resource terbatas. Coba lagi besok ya!"},en:{welcome:"Hello, Who's There?",welcomeSubtitle:"Let's be friends! Tell me your name and school so we can chat comfortably.",enterName:"You can call me...",enterSchool:"I study at...",namePlaceholder:"Ex: Sarah",schoolPlaceholder:"Ex: High School NY / MIT",accessButton:"Okay, Nice to Meet You!",verifying:"Writing that down...",deviceIdNote:"Relax, just remembering a new friend.",credits:"Credits",adminMode:"Admin Mode",unlimited:"Unlimited",logOut:"Switch Account",heroTitle:"Hi,",heroSubtitle:"Ready to make something cool today?",toolBgRemove:"Remove Background",toolBgRemoveDesc:"Instantly remove backgrounds cleanly.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Sharpen details to 4K resolution.",toolRemix:"Creative Remix",toolRemixDesc:"Reimagine image with AI assistance.",toolColorize:"Colorize Photo",toolColorizeDesc:"Turn black & white photos into color.",toolSketch:"Sketch to Real",toolSketchDesc:"Turn hand drawings into realistic images.",moreTools:"See More",lessTools:"Show Less",back:"Back",preview:"Preview",changePhoto:"Change Photo",aiPrompt:"AI Prompt",aiPromptPlaceholder:"Describe how you want to remix this image...",generate:"Generate",generateMagic:"Generate Magic",processing:"Processing",processingStandard:"Working magic...",processingCloud:"Sending to cloud...",processingAI:"AI is thinking...",refining:"Polishing details...",optimizingLocal:"Processing on device (Offline Mode)...",initializing:"Warming up...",resultComparison:"Your Masterpiece",download:"Save Image",reset:"Reset",original:"ORIGINAL",result:"RESULT",bgColor:"Background Color",uploadPrompt:"Upload an image to start editing",settingsTitle:"System Settings",systemPref:"AI Preferences",knowledgeMode:"Knowledge Mode (Database)",knowledgeModeDesc:"Save Quota. AI only answers from local database without Gemini API.",totalKnowledge:"Total Stored Memory",wikiMode:"Enable Wikipedia",wikiModeDesc:"If info not in DB, search Wikipedia (Still saves API quota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Manage keys for smart chat and image editing.",selectKeyBtn:"Get Key via AI Studio",orManually:"Manage Keys Manually",customKeyActive:"Custom Key Active",defaultKeyActive:"System Key (Limited)",removeBgTitle:"Remove.bg API",removeBgDesc:"Precision background removal engine.",supabaseTitle:"Supabase Engine",supabaseDesc:"Backup engine for image processing.",googleSearchTitle:"Google Search API",googleSearchDesc:"Fallback search option if DB & Wiki fail.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Close",save:"Save",active:"Active",inactive:"Inactive",addKeyPlaceholder:"Paste Gemini API Key here...",addKeyBtn:"Add Key",keyDisclaimerTitle:" Important Warning",keyDisclaimerText:"By adding personal API Keys, I acknowledge that all usage, quotas, and security of said keys are my sole responsibility. Fanra AI Studio is not liable for misuse or charges incurred due to user negligence.",consentCheckbox:"I understand and agree to proceed.",keysStored:"Key List",noKeysYet:"No keys saved yet. Using default limits.",newChat:"New Conversation",historyHeader:"History",loginToSave:"Login to save progress",loginBtn:"Login",historyItem1:"editing school photo...",historyItem2:"removing red background...",chatPlaceholder:"type a message or ask Fanra...",chatDisclaimer:"Fanra can make mistakes. Check important info.",chatFallbackError:"ugh, my connection is down and I haven't heard this question before. Check your internet or API key.",chatOfflineMode:"(DB Mode) Info not found in database.",chatImageResponse:"woah, sending an image? sorry, I can only edit images if you use the menu above. try clicking those icons.",errorTitle:"Whoops",insufficientCredits:"Out of credits! Enter your own Google Gemini API Key in settings for unlimited access.",limitReachedHQ:"High Quality daily limit reached.",serviceBusy:"Service is busy. Please try again.",networkError:"Connection issue. Check your internet.",memoryError:"Device memory low. Try a smaller image.",confirmTitle:"Change Activity?",confirmDesc:"Current progress will be lost. Are you sure?",yesChange:"Yes, Change",uploadTitle:"Upload Image",uploadDesc:"Click to browse or drag & drop",dropHere:"Drop it here!",invalidImage:"Please upload a valid image file (JPG/PNG).",toolLockedMsg:"This feature is under maintenance/development. Please understand, developer is working on it!",limitChatReached:"Fanra's energy is depleted for today. Due to limited resources on this personal project, chats are limited. Resets tomorrow!",limitImageReached:"Daily image upload limit reached. Server needs a break due to limited resources. Try again tomorrow!"}};var Sj={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let kj,Cj;function Aj(){return{geminiUrl:kj,vertexUrl:Cj}}function Nj(t,e,n,r){var s,i;if(!(t!=null&&t.baseUrl)){const o=Aj();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:n:(i=o.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ws{}function _e(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const i=e[s];return i!=null?String(i):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function p(t,e,n){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const d=l[c];p(d,e.slice(i+1),n[c])}else for(const c of l)p(c,e.slice(i+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];p(l[0],e.slice(i+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function h(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const i=s.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(a=>h(a,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Rj(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),i=r.split("."),o=new Set;let a=-1;for(let l=0;l<s.length;l++)if(s[l]==="*"){a=l;break}if(a!==-1&&i.length>a)for(let l=a;l<i.length;l++){const c=i[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}dm(t,s,i,0,o)}}function dm(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])dm(l,e,n,r+1,s)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!s.has(c)),l={};for(const c of a)l[c]=o[c];for(const[c,d]of Object.entries(l)){const m=[];for(const g of n.slice(r))g==="*"?m.push(c):m.push(g);p(o,m,d)}for(const c of a)delete o[c]}}else{const o=t;i in o&&dm(o[i],e,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M0(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pj(t){const e={},n=h(t,["operationName"]);n!=null&&p(e,["operationName"],n);const r=h(t,["resourceName"]);return r!=null&&p(e,["_url","resourceName"],r),e}function Mj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],Lj(o)),e}function Dj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],jj(o)),e}function Lj(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Fj(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function jj(t){const e={},n=h(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Vj(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function Fj(t){const e={},n=h(t,["video"]);return n!=null&&p(e,["video"],Hj(n)),e}function Vj(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],$j(n)),e}function Uj(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function Oj(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function Bj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],zj(o)),e}function zj(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function _1(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],Gj(o)),e}function Gj(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function Hj(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],M0(r));const s=h(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function $j(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],M0(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dw;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(dw||(dw={}));var hw;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(hw||(hw={}));var fw;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(fw||(fw={}));var fn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(fn||(fn={}));var pw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(pw||(pw={}));var mw;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(mw||(mw={}));var gw;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(gw||(gw={}));var yw;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(yw||(yw={}));var vw;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(vw||(vw={}));var xw;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(xw||(xw={}));var ww;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ww||(ww={}));var _w;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(_w||(_w={}));var bw;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(bw||(bw={}));var Ew;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Ew||(Ew={}));var Tw;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Tw||(Tw={}));var Iw;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Iw||(Iw={}));var Sw;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Sw||(Sw={}));var kw;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(kw||(kw={}));var Cw;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Cw||(Cw={}));var Ld;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ld||(Ld={}));var Aw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Aw||(Aw={}));var Nw;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Nw||(Nw={}));var Rw;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Rw||(Rw={}));var hm;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(hm||(hm={}));var Pw;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Pw||(Pw={}));var Mw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Mw||(Mw={}));var Dw;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Dw||(Dw={}));var Lw;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Lw||(Lw={}));var jw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(jw||(jw={}));var Fw;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Fw||(Fw={}));var Vw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Vw||(Vw={}));var Uw;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Uw||(Uw={}));var Ow;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Ow||(Ow={}));var Bw;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Bw||(Bw={}));var zw;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(zw||(zw={}));var Gw;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Gw||(Gw={}));var Hw;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Hw||(Hw={}));var $w;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})($w||($w={}));var qw;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(qw||(qw={}));var Ww;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Ww||(Ww={}));var Kw;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Kw||(Kw={}));var Jw;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Jw||(Jw={}));var Yw;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Yw||(Yw={}));var Qw;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Qw||(Qw={}));var Xw;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Xw||(Xw={}));var Zw;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Zw||(Zw={}));var e_;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(e_||(e_={}));var t_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(t_||(t_={}));var n_;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(n_||(n_={}));var r_;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(r_||(r_={}));var s_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(s_||(s_={}));var i_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(i_||(i_={}));var o_;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(o_||(o_={}));var a_;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(a_||(a_={}));var l_;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(l_||(l_={}));var _o;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(_o||(_o={}));class fm{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ua{get text(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const m=[];for(const g of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[y,w]of Object.entries(g))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(w!==null||w!==void 0)&&m.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;d=!0,c+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const m of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(m))g!=="inlineData"&&(y!==null||y!==void 0)&&d.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,s,i,o,a,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,s,i,o,a,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class u_{}class c_{}class qj{}class Wj{}class Kj{}class Jj{}class d_{}class h_{}class f_{}class Yj{}class jd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new jd;let s;const i=e;return n?s=Dj(i):s=Mj(i),Object.assign(r,s),r}}class p_{}class m_{}class g_{}class y_{}class Qj{}class Xj{}class Zj{}class D0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new D0,i=Bj(e);return Object.assign(r,i),r}}class eF{}class tF{}class nF{}class v_{}class rF{get text(){var e,n,r;let s="",i=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,s+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?s:void 0}get data(){var e,n,r;let s="";const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&i.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class sF{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class L0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new L0,i=_1(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function et(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function b1(t,e){const n=et(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function E1(t){return Array.isArray(t)?t.map(e=>Fd(e)):[Fd(t)]}function Fd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function T1(t){const e=Fd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function I1(t){const e=Fd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function x_(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function S1(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>x_(e)):[x_(t)]}function pm(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function w_(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function __(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function pn(t){if(t==null)throw new Error("ContentUnion is required");return pm(t)?t:{role:"user",parts:S1(t)}}function j0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=pn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=pn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>pn(n)):[pn(e)]}function tr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(w_(t)||__(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[pn(t)]}const e=[],n=[],r=pm(t[0]);for(const s of t){const i=pm(s);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(s);else{if(w_(s)||__(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:S1(n)}),e}function iF(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(fn).includes(n[0].toUpperCase())?n[0].toUpperCase():fn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(fn).includes(r.toUpperCase())?r.toUpperCase():fn.TYPE_UNSPECIFIED})}}function Lo(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&iF(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(fn).includes(a.toUpperCase())?a.toUpperCase():fn.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Lo(a);else if(r.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(Lo(c))}e[o]=l}else if(s.includes(o)){const l={};for(const[c,d]of Object.entries(a))l[c]=Lo(d);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function F0(t){return Lo(t)}function V0(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function U0(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function pa(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Lo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Lo(e.response));return t}function ma(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function oF(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function _s(t,e){if(typeof e!="string")throw new Error("name must be a string");return oF(t,e,"cachedContents")}function k1(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ai(t){return M0(t)}function aF(t){return t!=null&&typeof t=="object"&&"name"in t}function lF(t){return t!=null&&typeof t=="object"&&"video"in t}function uF(t){return t!=null&&typeof t=="object"&&"uri"in t}function C1(t){var e;let n;if(aF(t)&&(n=t.name),!(uF(t)&&(n=t.uri,n===void 0))&&!(lF(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function A1(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function N1(t){for(const e of["models","tunedModels","publisherModels"])if(cF(t,e))return t[e];return[]}function cF(t,e){return t!==null&&typeof t=="object"&&e in t}function dF(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function hF(t,e={}){const n=[],r=new Set;for(const s of t){const i=s.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const o=dF(s,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function R1(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function fF(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function P1(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let i=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ga(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function M1(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pF(t){const e={},n=h(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const r=h(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>KF(o))),p(e,["inlinedResponses"],i)}const s=h(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["inlinedEmbedContentResponses"],i)}return e}function mF(t){const e={},n=h(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsDestination","outputUriPrefix"]);r!=null&&p(e,["gcsUri"],r);const s=h(t,["bigqueryDestination","outputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function gF(t){const e={},n=h(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsDestination","outputUriPrefix"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&p(e,["bigqueryDestination","outputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function zc(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata","displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["metadata","state"]);s!=null&&p(e,["state"],M1(s));const i=h(t,["metadata","createTime"]);i!=null&&p(e,["createTime"],i);const o=h(t,["metadata","endTime"]);o!=null&&p(e,["endTime"],o);const a=h(t,["metadata","updateTime"]);a!=null&&p(e,["updateTime"],a);const l=h(t,["metadata","model"]);l!=null&&p(e,["model"],l);const c=h(t,["metadata","output"]);return c!=null&&p(e,["dest"],pF(P1(c))),e}function mm(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["state"]);s!=null&&p(e,["state"],M1(s));const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["createTime"]);o!=null&&p(e,["createTime"],o);const a=h(t,["startTime"]);a!=null&&p(e,["startTime"],a);const l=h(t,["endTime"]);l!=null&&p(e,["endTime"],l);const c=h(t,["updateTime"]);c!=null&&p(e,["updateTime"],c);const d=h(t,["model"]);d!=null&&p(e,["model"],d);const m=h(t,["inputConfig"]);m!=null&&p(e,["src"],yF(m));const g=h(t,["outputConfig"]);g!=null&&p(e,["dest"],mF(P1(g)));const y=h(t,["completionStats"]);return y!=null&&p(e,["completionStats"],y),e}function yF(t){const e={},n=h(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsSource","uris"]);r!=null&&p(e,["gcsUri"],r);const s=h(t,["bigquerySource","inputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function vF(t,e){const n={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=h(e,["fileName"]);r!=null&&p(n,["fileName"],r);const s=h(e,["inlinedRequests"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>WF(t,o))),p(n,["requests","requests"],i)}return n}function xF(t){const e={},n=h(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsSource","uris"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&p(e,["bigquerySource","inputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function wF(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function _F(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],ga(t,r)),n}function bF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],ga(t,r)),n}function EF(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],TF(r));const s=h(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=h(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const l=h(t,["index"]);l!=null&&p(e,["index"],l);const c=h(t,["logprobsResult"]);c!=null&&p(e,["logprobsResult"],c);const d=h(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=h(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function TF(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function D1(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>tV(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function IF(t,e){const n={},r=h(t,["displayName"]);if(e!==void 0&&r!=null&&p(e,["batch","displayName"],r),h(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function SF(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["dest"]);return e!==void 0&&s!=null&&p(e,["outputConfig"],gF(fF(s))),n}function b_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["src"]);s!=null&&p(n,["batch","inputConfig"],vF(t,R1(t,s)));const i=h(e,["config"]);return i!=null&&IF(i,n),n}function kF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],et(t,r));const s=h(e,["src"]);s!=null&&p(n,["inputConfig"],xF(R1(t,s)));const i=h(e,["config"]);return i!=null&&SF(i,n),n}function CF(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["batch","displayName"],r),n}function AF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["src"]);s!=null&&p(n,["batch","inputConfig"],jF(t,s));const i=h(e,["config"]);return i!=null&&CF(i,n),n}function NF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],ga(t,r)),n}function RF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],ga(t,r)),n}function PF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);return i!=null&&p(e,["error"],i),e}function MF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);return i!=null&&p(e,["error"],i),e}function DF(t,e){const n={},r=h(e,["contents"]);if(r!=null){let i=j0(t,r);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["requests[]","request","content"],i)}const s=h(e,["config"]);return s!=null&&(p(n,["_self"],LF(s,n)),Rj(n,{"requests[].*":"requests[].request.*"})),n}function LF(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=h(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function jF(t,e){const n={},r=h(e,["fileName"]);r!=null&&p(n,["file_name"],r);const s=h(e,["inlinedRequests"]);return s!=null&&p(n,["requests"],DF(t,s)),n}function FF(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function VF(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function UF(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function OF(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],D1(pn(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const _=h(e,["responseMimeType"]);_!=null&&p(r,["responseMimeType"],_);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],F0(v));const E=h(e,["responseJsonSchema"]);if(E!=null&&p(r,["responseJsonSchema"],E),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=h(e,["safetySettings"]);if(n!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(I=>nV(I))),p(n,["safetySettings"],D)}const N=h(e,["tools"]);if(n!==void 0&&N!=null){let D=ma(N);Array.isArray(D)&&(D=D.map(I=>sV(pa(I)))),p(n,["tools"],D)}const L=h(e,["toolConfig"]);if(n!==void 0&&L!=null&&p(n,["toolConfig"],rV(L)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=h(e,["cachedContent"]);n!==void 0&&U!=null&&p(n,["cachedContent"],_s(t,U));const k=h(e,["responseModalities"]);k!=null&&p(r,["responseModalities"],k);const R=h(e,["mediaResolution"]);R!=null&&p(r,["mediaResolution"],R);const A=h(e,["speechConfig"]);if(A!=null&&p(r,["speechConfig"],V0(A)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=h(e,["thinkingConfig"]);M!=null&&p(r,["thinkingConfig"],M);const V=h(e,["imageConfig"]);V!=null&&p(r,["imageConfig"],qF(V));const P=h(e,["enableEnhancedCivicAnswers"]);return P!=null&&p(r,["enableEnhancedCivicAnswers"],P),r}function BF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>EF(c))),p(e,["candidates"],l)}const s=h(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=h(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=h(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=h(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function zF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],ga(t,r)),n}function GF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],ga(t,r)),n}function HF(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function $F(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function qF(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function WF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["request","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let a=tr(s);Array.isArray(a)&&(a=a.map(l=>D1(l))),p(n,["request","contents"],a)}const i=h(e,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(e,["config"]);return o!=null&&p(n,["request","generationConfig"],OF(t,o,h(n,["request"],{}))),n}function KF(t){const e={},n=h(t,["response"]);n!=null&&p(e,["response"],BF(n));const r=h(t,["error"]);return r!=null&&p(e,["error"],r),e}function JF(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);if(e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),h(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function YF(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const i=h(t,["filter"]);return e!==void 0&&i!=null&&p(e,["_query","filter"],i),n}function QF(t){const e={},n=h(t,["config"]);return n!=null&&JF(n,e),e}function XF(t){const e={},n=h(t,["config"]);return n!=null&&YF(n,e),e}function ZF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["operations"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>zc(o))),p(e,["batchJobs"],i)}return e}function eV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["batchPredictionJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>mm(o))),p(e,["batchJobs"],i)}return e}function tV(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],FF(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],VF(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],wF(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function nV(t){const e={},n=h(t,["category"]);if(n!=null&&p(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function rV(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],UF(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function sV(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],HF(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],$F(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ms;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ms||(ms={}));class Ji{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iV extends ws{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ji(ms.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=b_(this.apiClient,e),r=n._url,s=_e("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const d of l){const m=Object.assign({},d);if(m.systemInstruction){const g=m.systemInstruction;delete m.systemInstruction;const y=m.request;y.systemInstruction=g,m.request=y}c.push(m)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const i=this.getGcsUri(e),o=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${s}`;else if(o)r.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=kF(this.apiClient,e);return a=_e("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>mm(d))}else{const c=b_(this.apiClient,e);return a=_e("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>zc(d))}}async createEmbeddingsInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=AF(this.apiClient,e);return i=_e("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>zc(l))}}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=GF(this.apiClient,e);return a=_e("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>mm(d))}else{const c=zF(this.apiClient,e);return a=_e("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>zc(d))}}async cancel(e){var n,r,s,i;let o="",a={};if(this.apiClient.isVertexAI()){const l=bF(this.apiClient,e);o=_e("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=_F(this.apiClient,e);o=_e("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=XF(e);return a=_e("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=eV(d),g=new v_;return Object.assign(g,m),g})}else{const c=QF(e);return a=_e("batches",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=ZF(d),g=new v_;return Object.assign(g,m),g})}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=RF(this.apiClient,e);return a=_e("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>MF(d))}else{const c=NF(this.apiClient,e);return a=_e("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>PF(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oV(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function E_(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>AV(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function aV(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["contents"]);if(e!==void 0&&o!=null){let d=tr(o);Array.isArray(d)&&(d=d.map(m=>E_(m))),p(e,["contents"],d)}const a=h(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],E_(pn(a)));const l=h(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>RV(m))),p(e,["tools"],d)}const c=h(t,["toolConfig"]);if(e!==void 0&&c!=null&&p(e,["toolConfig"],NV(c)),h(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function lV(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["contents"]);if(e!==void 0&&o!=null){let m=tr(o);Array.isArray(m)&&(m=m.map(g=>g)),p(e,["contents"],m)}const a=h(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],pn(a));const l=h(t,["tools"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>PV(g))),p(e,["tools"],m)}const c=h(t,["toolConfig"]);e!==void 0&&c!=null&&p(e,["toolConfig"],c);const d=h(t,["kmsKeyName"]);return e!==void 0&&d!=null&&p(e,["encryption_spec","kmsKeyName"],d),n}function uV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],b1(t,r));const s=h(e,["config"]);return s!=null&&aV(s,n),n}function cV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],b1(t,r));const s=h(e,["config"]);return s!=null&&lV(s,n),n}function dV(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],_s(t,r)),n}function hV(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],_s(t,r)),n}function fV(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function pV(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function mV(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function gV(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yV(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function vV(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function xV(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],_s(t,r)),n}function wV(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],_s(t,r)),n}function _V(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function bV(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function EV(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function TV(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function IV(t){const e={},n=h(t,["config"]);return n!=null&&EV(n,e),e}function SV(t){const e={},n=h(t,["config"]);return n!=null&&TV(n,e),e}function kV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function CV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function AV(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],mV(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],gV(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],oV(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function NV(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],yV(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function RV(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],_V(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],bV(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function PV(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>vV(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function MV(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function DV(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function LV(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],_s(t,r));const s=h(e,["config"]);return s!=null&&MV(s,n),n}function jV(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],_s(t,r));const s=h(e,["config"]);return s!=null&&DV(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FV extends ws{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ji(ms.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=cV(this.apiClient,e);return a=_e("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=uV(this.apiClient,e);return a=_e("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=wV(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=xV(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=hV(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=pV(d),g=new g_;return Object.assign(g,m),g})}else{const c=dV(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=fV(d),g=new g_;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=jV(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=LV(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=SV(e);return a=_e("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=CV(d),g=new y_;return Object.assign(g,m),g})}else{const c=IV(e);return a=_e("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=kV(d),g=new y_;return Object.assign(g,m),g})}}}function Vd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function T_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fe(t){return this instanceof Fe?(this.v=t,this):new Fe(t)}function wr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(y){return function(w){return Promise.resolve(w).then(y,m)}}function a(y,w){r[y]&&(s[y]=function(x){return new Promise(function(_,v){i.push([y,x,_,v])>1||l(y,x)})},w&&(s[y]=w(s[y])))}function l(y,w){try{c(r[y](w))}catch(x){g(i[0][3],x)}}function c(y){y.value instanceof Fe?Promise.resolve(y.value.v).then(d,m):g(i[0][2],y)}function d(y){l("next",y)}function m(y){l("throw",y)}function g(y,w){y(w),i.shift(),i.length&&l(i[0][0],i[0][1])}}function _r(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof T_=="function"?T_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VV(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:L1(n)}function L1(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function UV(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function I_(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let i=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),i&&!L1(t[r])&&(i=!1),r++;i?e.push(...s):e.pop()}return e}class OV{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new BV(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class BV{constructor(e,n,r,s={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=i,this.sendPromise=Promise.resolve(),UV(i)}async sendMessage(e){var n;await this.sendPromise;const r=pn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,o,a;const l=await s,c=(o=(i=l.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,d=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];d!=null&&(g=(a=d.slice(m))!==null&&a!==void 0?a:[]);const y=c?[c]:[];this.recordHistory(r,y,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=pn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const i=await s;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?I_(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return wr(this,arguments,function*(){var s,i,o,a,l,c;const d=[];try{for(var m=!0,g=_r(e),y;y=yield Fe(g.next()),s=y.done,!s;m=!0){a=y.value,m=!1;const w=a;if(VV(w)){const x=(c=(l=w.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;x!==void 0&&d.push(x)}yield yield Fe(w)}}catch(w){i={error:w}}finally{try{!m&&!s&&(o=g.return)&&(yield Fe(o.call(g)))}finally{if(i)throw i.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(i=>i.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...I_(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Mh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zV(t){const e={},n=h(t,["file"]);return n!=null&&p(e,["file"],n),e}function GV(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function HV(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],C1(n)),e}function $V(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function qV(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],C1(n)),e}function WV(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function KV(t){const e={},n=h(t,["config"]);return n!=null&&WV(n,e),e}function JV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["files"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YV extends ws{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ji(ms.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=KV(e);return i=_e("files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=JV(l),d=new eF;return Object.assign(d,c),d})}}async createInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zV(e);return i=_e("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=GV(l),d=new tF;return Object.assign(d,c),d})}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=qV(e);return i=_e("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=HV(e);return i=_e("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=$V(l),d=new nF;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gc(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function QV(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>fU(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function XV(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function ZV(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eU(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function tU(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=h(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=h(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=h(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const l=h(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const c=h(t,["maxOutputTokens"]);c!=null&&p(e,["maxOutputTokens"],c);const d=h(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const m=h(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=h(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=h(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const w=h(t,["responseModalities"]);w!=null&&p(e,["responseModalities"],w);const x=h(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const _=h(t,["routingConfig"]);_!=null&&p(e,["routingConfig"],_);const v=h(t,["seed"]);v!=null&&p(e,["seed"],v);const E=h(t,["speechConfig"]);E!=null&&p(e,["speechConfig"],E);const T=h(t,["stopSequences"]);T!=null&&p(e,["stopSequences"],T);const N=h(t,["temperature"]);N!=null&&p(e,["temperature"],N);const L=h(t,["thinkingConfig"]);L!=null&&p(e,["thinkingConfig"],L);const U=h(t,["topK"]);U!=null&&p(e,["topK"],U);const k=h(t,["topP"]);if(k!=null&&p(e,["topP"],k),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function nU(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function rU(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function sU(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],U0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],QV(pn(w)));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let U=ma(x);Array.isArray(U)&&(U=U.map(k=>mU(pa(k)))),p(e,["setup","tools"],U)}const _=h(t,["sessionResumption"]);e!==void 0&&_!=null&&p(e,["setup","sessionResumption"],pU(_));const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const E=h(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],E);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const N=h(t,["contextWindowCompression"]);e!==void 0&&N!=null&&p(e,["setup","contextWindowCompression"],N);const L=h(t,["proactivity"]);if(e!==void 0&&L!=null&&p(e,["setup","proactivity"],L),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function iU(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],tU(r));const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],U0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],pn(w));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let k=ma(x);Array.isArray(k)&&(k=k.map(R=>gU(pa(R)))),p(e,["setup","tools"],k)}const _=h(t,["sessionResumption"]);e!==void 0&&_!=null&&p(e,["setup","sessionResumption"],_);const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const E=h(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],E);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const N=h(t,["contextWindowCompression"]);e!==void 0&&N!=null&&p(e,["setup","contextWindowCompression"],N);const L=h(t,["proactivity"]);e!==void 0&&L!=null&&p(e,["setup","proactivity"],L);const U=h(t,["explicitVadSignal"]);return e!==void 0&&U!=null&&p(e,["setup","explicitVadSignal"],U),n}function oU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],et(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],sU(s,n)),n}function aU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],et(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],iU(s,n)),n}function lU(t){const e={},n=h(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function uU(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["weightedPrompts"],r)}return e}function cU(t){const e={},n=h(t,["media"]);if(n!=null){let c=E1(n);Array.isArray(c)&&(c=c.map(d=>Gc(d))),p(e,["mediaChunks"],c)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],Gc(I1(r)));const s=h(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(t,["video"]);i!=null&&p(e,["video"],Gc(T1(i)));const o=h(t,["text"]);o!=null&&p(e,["text"],o);const a=h(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=h(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function dU(t){const e={},n=h(t,["media"]);if(n!=null){let c=E1(n);Array.isArray(c)&&(c=c.map(d=>d)),p(e,["mediaChunks"],c)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],I1(r));const s=h(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(t,["video"]);i!=null&&p(e,["video"],T1(i));const o=h(t,["text"]);o!=null&&p(e,["text"],o);const a=h(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=h(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function hU(t){const e={},n=h(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const r=h(t,["serverContent"]);r!=null&&p(e,["serverContent"],r);const s=h(t,["toolCall"]);s!=null&&p(e,["toolCall"],s);const i=h(t,["toolCallCancellation"]);i!=null&&p(e,["toolCallCancellation"],i);const o=h(t,["usageMetadata"]);o!=null&&p(e,["usageMetadata"],yU(o));const a=h(t,["goAway"]);a!=null&&p(e,["goAway"],a);const l=h(t,["sessionResumptionUpdate"]);l!=null&&p(e,["sessionResumptionUpdate"],l);const c=h(t,["voiceActivityDetectionSignal"]);return c!=null&&p(e,["voiceActivityDetectionSignal"],c),e}function fU(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],XV(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],ZV(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],Gc(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function pU(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function mU(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],nU(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],rU(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function gU(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>eU(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function yU(t){const e={},n=h(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const r=h(t,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const s=h(t,["candidatesTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const i=h(t,["toolUsePromptTokenCount"]);i!=null&&p(e,["toolUsePromptTokenCount"],i);const o=h(t,["thoughtsTokenCount"]);o!=null&&p(e,["thoughtsTokenCount"],o);const a=h(t,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);const l=h(t,["promptTokensDetails"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["promptTokensDetails"],y)}const c=h(t,["cacheTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["cacheTokensDetails"],y)}const d=h(t,["candidatesTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["responseTokensDetails"],y)}const m=h(t,["toolUsePromptTokensDetails"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["toolUsePromptTokensDetails"],y)}const g=h(t,["trafficType"]);return g!=null&&p(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vU(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function xU(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],wU(r));const s=h(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=h(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const l=h(t,["index"]);l!=null&&p(e,["index"],l);const c=h(t,["logprobsResult"]);c!=null&&p(e,["logprobsResult"],c);const d=h(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=h(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function wU(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function _U(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let i=tr(s);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["contents"],i)}return n}function bU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["tokensInfo"],s)}return e}function EU(t){const e={},n=h(t,["values"]);n!=null&&p(e,["values"],n);const r=h(t,["statistics"]);return r!=null&&p(e,["statistics"],TU(r)),e}function TU(t){const e={},n=h(t,["truncated"]);n!=null&&p(e,["truncated"],n);const r=h(t,["token_count"]);return r!=null&&p(e,["tokenCount"],r),e}function Dh(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>M6(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function IU(t){const e={},n=h(t,["controlType"]);n!=null&&p(e,["controlType"],n);const r=h(t,["enableControlImageComputation"]);return r!=null&&p(e,["computeControl"],r),e}function SU(t){const e={};if(h(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function kU(t,e){const n={},r=h(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],pn(r));const s=h(t,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>U1(a))),p(e,["tools"],o)}const i=h(t,["generationConfig"]);return e!==void 0&&i!=null&&p(e,["generationConfig"],v6(i)),n}function CU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let o=tr(s);Array.isArray(o)&&(o=o.map(a=>Dh(a))),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&SU(i),n}function AU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let o=tr(s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&kU(i,n),n}function NU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);r!=null&&p(e,["totalTokens"],r);const s=h(t,["cachedContentTokenCount"]);return s!=null&&p(e,["cachedContentTokenCount"],s),e}function RU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);return r!=null&&p(e,["totalTokens"],r),e}function PU(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],et(t,r)),n}function MU(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],et(t,r)),n}function DU(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function LU(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function jU(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=h(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=h(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const w=h(t,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const x=h(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const _=h(t,["addWatermark"]);e!==void 0&&_!=null&&p(e,["parameters","addWatermark"],_);const v=h(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const E=h(t,["editMode"]);e!==void 0&&E!=null&&p(e,["parameters","editMode"],E);const T=h(t,["baseSteps"]);return e!==void 0&&T!=null&&p(e,["parameters","editConfig","baseSteps"],T),n}function FU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["referenceImages"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>U6(l))),p(n,["instances[0]","referenceImages"],a)}const o=h(e,["config"]);return o!=null&&jU(o,n),n}function VU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Lh(i))),p(e,["generatedImages"],s)}return e}function UU(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=h(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function OU(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["instances[]","title"],s);const i=h(t,["outputDimensionality"]);e!==void 0&&i!=null&&p(e,["parameters","outputDimensionality"],i);const o=h(t,["mimeType"]);e!==void 0&&o!=null&&p(e,["instances[]","mimeType"],o);const a=h(t,["autoTruncate"]);return e!==void 0&&a!=null&&p(e,["parameters","autoTruncate"],a),n}function BU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let a=j0(t,s);Array.isArray(a)&&(a=a.map(l=>l)),p(n,["requests[]","content"],a)}const i=h(e,["config"]);i!=null&&UU(i,n);const o=h(e,["model"]);return o!==void 0&&p(n,["requests[]","model"],et(t,o)),n}function zU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let o=j0(t,s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["instances[]","content"],o)}const i=h(e,["config"]);return i!=null&&OU(i,n),n}function GU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["embeddings"],i)}const s=h(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function HU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>EU(o))),p(e,["embeddings"],i)}const s=h(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function $U(t){const e={},n=h(t,["endpoint"]);n!=null&&p(e,["name"],n);const r=h(t,["deployedModelId"]);return r!=null&&p(e,["deployedModelId"],r),e}function qU(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function WU(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function KU(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function JU(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function YU(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],Dh(pn(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const _=h(e,["responseMimeType"]);_!=null&&p(r,["responseMimeType"],_);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],F0(v));const E=h(e,["responseJsonSchema"]);if(E!=null&&p(r,["responseJsonSchema"],E),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=h(e,["safetySettings"]);if(n!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(I=>O6(I))),p(n,["safetySettings"],D)}const N=h(e,["tools"]);if(n!==void 0&&N!=null){let D=ma(N);Array.isArray(D)&&(D=D.map(I=>W6(pa(I)))),p(n,["tools"],D)}const L=h(e,["toolConfig"]);if(n!==void 0&&L!=null&&p(n,["toolConfig"],q6(L)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=h(e,["cachedContent"]);n!==void 0&&U!=null&&p(n,["cachedContent"],_s(t,U));const k=h(e,["responseModalities"]);k!=null&&p(r,["responseModalities"],k);const R=h(e,["mediaResolution"]);R!=null&&p(r,["mediaResolution"],R);const A=h(e,["speechConfig"]);if(A!=null&&p(r,["speechConfig"],V0(A)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=h(e,["thinkingConfig"]);M!=null&&p(r,["thinkingConfig"],M);const V=h(e,["imageConfig"]);V!=null&&p(r,["imageConfig"],E6(V));const P=h(e,["enableEnhancedCivicAnswers"]);return P!=null&&p(r,["enableEnhancedCivicAnswers"],P),r}function QU(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],pn(s));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const _=h(e,["responseMimeType"]);_!=null&&p(r,["responseMimeType"],_);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],F0(v));const E=h(e,["responseJsonSchema"]);E!=null&&p(r,["responseJsonSchema"],E);const T=h(e,["routingConfig"]);T!=null&&p(r,["routingConfig"],T);const N=h(e,["modelSelectionConfig"]);N!=null&&p(r,["modelConfig"],N);const L=h(e,["safetySettings"]);if(n!==void 0&&L!=null){let ce=L;Array.isArray(ce)&&(ce=ce.map(te=>te)),p(n,["safetySettings"],ce)}const U=h(e,["tools"]);if(n!==void 0&&U!=null){let ce=ma(U);Array.isArray(ce)&&(ce=ce.map(te=>U1(pa(te)))),p(n,["tools"],ce)}const k=h(e,["toolConfig"]);n!==void 0&&k!=null&&p(n,["toolConfig"],k);const R=h(e,["labels"]);n!==void 0&&R!=null&&p(n,["labels"],R);const A=h(e,["cachedContent"]);n!==void 0&&A!=null&&p(n,["cachedContent"],_s(t,A));const M=h(e,["responseModalities"]);M!=null&&p(r,["responseModalities"],M);const V=h(e,["mediaResolution"]);V!=null&&p(r,["mediaResolution"],V);const P=h(e,["speechConfig"]);P!=null&&p(r,["speechConfig"],V0(P));const D=h(e,["audioTimestamp"]);D!=null&&p(r,["audioTimestamp"],D);const I=h(e,["thinkingConfig"]);I!=null&&p(r,["thinkingConfig"],I);const $=h(e,["imageConfig"]);if($!=null&&p(r,["imageConfig"],T6($)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function S_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let o=tr(s);Array.isArray(o)&&(o=o.map(a=>Dh(a))),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(n,["generationConfig"],YU(t,i,n)),n}function k_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["contents"]);if(s!=null){let o=tr(s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(n,["generationConfig"],QU(t,i,n)),n}function C_(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>xU(c))),p(e,["candidates"],l)}const s=h(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=h(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=h(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=h(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function A_(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),p(e,["candidates"],c)}const s=h(t,["createTime"]);s!=null&&p(e,["createTime"],s);const i=h(t,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const o=h(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=h(t,["responseId"]);a!=null&&p(e,["responseId"],a);const l=h(t,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function XU(t,e){const n={};if(h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const i=h(t,["guidanceScale"]);if(e!==void 0&&i!=null&&p(e,["parameters","guidanceScale"],i),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=h(t,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const l=h(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&p(e,["parameters","includeSafetyAttributes"],l);const c=h(t,["includeRaiReason"]);e!==void 0&&c!=null&&p(e,["parameters","includeRaiReason"],c);const d=h(t,["language"]);e!==void 0&&d!=null&&p(e,["parameters","language"],d);const m=h(t,["outputMimeType"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","mimeType"],m);const g=h(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g),h(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=h(t,["imageSize"]);if(e!==void 0&&y!=null&&p(e,["parameters","sampleImageSize"],y),h(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function ZU(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=h(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=h(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const w=h(t,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const x=h(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const _=h(t,["addWatermark"]);e!==void 0&&_!=null&&p(e,["parameters","addWatermark"],_);const v=h(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const E=h(t,["imageSize"]);e!==void 0&&E!=null&&p(e,["parameters","sampleImageSize"],E);const T=h(t,["enhancePrompt"]);return e!==void 0&&T!=null&&p(e,["parameters","enhancePrompt"],T),n}function e6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&XU(i,n),n}function t6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&ZU(i,n),n}function n6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>p6(o))),p(e,["generatedImages"],i)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],F1(s)),e}function r6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Lh(o))),p(e,["generatedImages"],i)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],V1(s)),e}function s6(t,e){const n={},r=h(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=h(t,["durationSeconds"]);if(e!==void 0&&s!=null&&p(e,["parameters","durationSeconds"],s),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=h(t,["aspectRatio"]);e!==void 0&&i!=null&&p(e,["parameters","aspectRatio"],i);const o=h(t,["resolution"]);e!==void 0&&o!=null&&p(e,["parameters","resolution"],o);const a=h(t,["personGeneration"]);if(e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a),h(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=h(t,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const c=h(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&p(e,["parameters","enhancePrompt"],c),h(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=h(t,["lastFrame"]);e!==void 0&&d!=null&&p(e,["instances[0]","lastFrame"],jh(d));const m=h(t,["referenceImages"]);if(e!==void 0&&m!=null){let g=m;Array.isArray(g)&&(g=g.map(y=>oO(y))),p(e,["instances[0]","referenceImages"],g)}if(h(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function i6(t,e){const n={},r=h(t,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const i=h(t,["fps"]);e!==void 0&&i!=null&&p(e,["parameters","fps"],i);const o=h(t,["durationSeconds"]);e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o);const a=h(t,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const l=h(t,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const c=h(t,["resolution"]);e!==void 0&&c!=null&&p(e,["parameters","resolution"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["pubsubTopic"]);e!==void 0&&m!=null&&p(e,["parameters","pubsubTopic"],m);const g=h(t,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const y=h(t,["enhancePrompt"]);e!==void 0&&y!=null&&p(e,["parameters","enhancePrompt"],y);const w=h(t,["generateAudio"]);e!==void 0&&w!=null&&p(e,["parameters","generateAudio"],w);const x=h(t,["lastFrame"]);e!==void 0&&x!=null&&p(e,["instances[0]","lastFrame"],Sr(x));const _=h(t,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(N=>aO(N))),p(e,["instances[0]","referenceImages"],T)}const v=h(t,["mask"]);e!==void 0&&v!=null&&p(e,["instances[0]","mask"],iO(v));const E=h(t,["compressionQuality"]);return e!==void 0&&E!=null&&p(e,["parameters","compressionQuality"],E),n}function o6(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],c6(o)),e}function a6(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],d6(o)),e}function l6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["image"]);i!=null&&p(n,["instances[0]","image"],jh(i));const o=h(e,["video"]);o!=null&&p(n,["instances[0]","video"],O1(o));const a=h(e,["source"]);a!=null&&h6(a,n);const l=h(e,["config"]);return l!=null&&s6(l,n),n}function u6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["image"]);i!=null&&p(n,["instances[0]","image"],Sr(i));const o=h(e,["video"]);o!=null&&p(n,["instances[0]","video"],B1(o));const a=h(e,["source"]);a!=null&&f6(a,n);const l=h(e,["config"]);return l!=null&&i6(l,n),n}function c6(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>g6(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function d6(t){const e={},n=h(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>y6(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function h6(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],jh(s));const i=h(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],O1(i)),n}function f6(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Sr(s));const i=h(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],B1(i)),n}function p6(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],I6(n));const r=h(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(t,["_self"]);return s!=null&&p(e,["safetyAttributes"],F1(s)),e}function Lh(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],j1(n));const r=h(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(t,["_self"]);s!=null&&p(e,["safetyAttributes"],V1(s));const i=h(t,["prompt"]);return i!=null&&p(e,["enhancedPrompt"],i),e}function m6(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["mask"],j1(n));const r=h(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["labels"],s)}return e}function g6(t){const e={},n=h(t,["video"]);return n!=null&&p(e,["video"],rO(n)),e}function y6(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],sO(n)),e}function v6(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=h(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=h(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=h(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const l=h(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const c=h(t,["maxOutputTokens"]);c!=null&&p(e,["maxOutputTokens"],c);const d=h(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const m=h(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=h(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=h(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const w=h(t,["responseModalities"]);w!=null&&p(e,["responseModalities"],w);const x=h(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const _=h(t,["routingConfig"]);_!=null&&p(e,["routingConfig"],_);const v=h(t,["seed"]);v!=null&&p(e,["seed"],v);const E=h(t,["speechConfig"]);E!=null&&p(e,["speechConfig"],E);const T=h(t,["stopSequences"]);T!=null&&p(e,["stopSequences"],T);const N=h(t,["temperature"]);N!=null&&p(e,["temperature"],N);const L=h(t,["thinkingConfig"]);L!=null&&p(e,["thinkingConfig"],L);const U=h(t,["topK"]);U!=null&&p(e,["topK"],U);const k=h(t,["topP"]);if(k!=null&&p(e,["topP"],k),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function x6(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],et(t,r)),n}function w6(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],et(t,r)),n}function _6(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function b6(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function E6(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function T6(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);r!=null&&p(e,["imageSize"],r);const s=h(t,["outputMimeType"]);s!=null&&p(e,["imageOutputOptions","mimeType"],s);const i=h(t,["outputCompressionQuality"]);return i!=null&&p(e,["imageOutputOptions","compressionQuality"],i),e}function I6(t){const e={},n=h(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],ai(n));const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function j1(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["imageBytes"],ai(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function jh(t){const e={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],ai(n));const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Sr(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["imageBytes"]);r!=null&&p(e,["bytesBase64Encoded"],ai(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function S6(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=h(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=h(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=h(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],A1(t,a)),r}function k6(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=h(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=h(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=h(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],A1(t,a)),r}function C6(t,e){const n={},r=h(e,["config"]);return r!=null&&S6(t,r,n),n}function A6(t,e){const n={},r=h(e,["config"]);return r!=null&&k6(t,r,n),n}function N6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let i=N1(s);Array.isArray(i)&&(i=i.map(o=>gm(o))),p(e,["models"],i)}return e}function R6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let i=N1(s);Array.isArray(i)&&(i=i.map(o=>ym(o))),p(e,["models"],i)}return e}function P6(t){const e={},n=h(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const r=h(t,["segmentationClasses"]);r!=null&&p(e,["maskClasses"],r);const s=h(t,["maskDilation"]);return s!=null&&p(e,["dilation"],s),e}function gm(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);s!=null&&p(e,["description"],s);const i=h(t,["version"]);i!=null&&p(e,["version"],i);const o=h(t,["_self"]);o!=null&&p(e,["tunedModelInfo"],K6(o));const a=h(t,["inputTokenLimit"]);a!=null&&p(e,["inputTokenLimit"],a);const l=h(t,["outputTokenLimit"]);l!=null&&p(e,["outputTokenLimit"],l);const c=h(t,["supportedGenerationMethods"]);c!=null&&p(e,["supportedActions"],c);const d=h(t,["temperature"]);d!=null&&p(e,["temperature"],d);const m=h(t,["maxTemperature"]);m!=null&&p(e,["maxTemperature"],m);const g=h(t,["topP"]);g!=null&&p(e,["topP"],g);const y=h(t,["topK"]);y!=null&&p(e,["topK"],y);const w=h(t,["thinking"]);return w!=null&&p(e,["thinking"],w),e}function ym(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);s!=null&&p(e,["description"],s);const i=h(t,["versionId"]);i!=null&&p(e,["version"],i);const o=h(t,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>$U(g))),p(e,["endpoints"],m)}const a=h(t,["labels"]);a!=null&&p(e,["labels"],a);const l=h(t,["_self"]);l!=null&&p(e,["tunedModelInfo"],J6(l));const c=h(t,["defaultCheckpointId"]);c!=null&&p(e,["defaultCheckpointId"],c);const d=h(t,["checkpoints"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),p(e,["checkpoints"],m)}return e}function M6(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],qU(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],WU(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],vU(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function D6(t){const e={},n=h(t,["productImage"]);return n!=null&&p(e,["image"],Sr(n)),e}function L6(t,e){const n={},r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["baseSteps"]);e!==void 0&&s!=null&&p(e,["parameters","baseSteps"],s);const i=h(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=h(t,["seed"]);e!==void 0&&o!=null&&p(e,["parameters","seed"],o);const a=h(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const l=h(t,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const c=h(t,["addWatermark"]);e!==void 0&&c!=null&&p(e,["parameters","addWatermark"],c);const d=h(t,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const m=h(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const g=h(t,["enhancePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","enhancePrompt"],g);const y=h(t,["labels"]);return e!==void 0&&y!=null&&p(e,["labels"],y),n}function j6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["source"]);s!=null&&V6(s,n);const i=h(e,["config"]);return i!=null&&L6(i,n),n}function F6(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Lh(s))),p(e,["generatedImages"],r)}return e}function V6(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["personImage"]);e!==void 0&&s!=null&&p(e,["instances[0]","personImage","image"],Sr(s));const i=h(t,["productImages"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>D6(a))),p(e,["instances[0]","productImages"],o)}return n}function U6(t){const e={},n=h(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],Sr(n));const r=h(t,["referenceId"]);r!=null&&p(e,["referenceId"],r);const s=h(t,["referenceType"]);s!=null&&p(e,["referenceType"],s);const i=h(t,["maskImageConfig"]);i!=null&&p(e,["maskImageConfig"],P6(i));const o=h(t,["controlImageConfig"]);o!=null&&p(e,["controlImageConfig"],IU(o));const a=h(t,["styleImageConfig"]);a!=null&&p(e,["styleImageConfig"],a);const l=h(t,["subjectImageConfig"]);return l!=null&&p(e,["subjectImageConfig"],l),e}function F1(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function V1(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function O6(t){const e={},n=h(t,["category"]);if(n!=null&&p(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function B6(t){const e={},n=h(t,["image"]);return n!=null&&p(e,["image"],Sr(n)),e}function z6(t,e){const n={},r=h(t,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const s=h(t,["maxPredictions"]);e!==void 0&&s!=null&&p(e,["parameters","maxPredictions"],s);const i=h(t,["confidenceThreshold"]);e!==void 0&&i!=null&&p(e,["parameters","confidenceThreshold"],i);const o=h(t,["maskDilation"]);e!==void 0&&o!=null&&p(e,["parameters","maskDilation"],o);const a=h(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","binaryColorThreshold"],a);const l=h(t,["labels"]);return e!==void 0&&l!=null&&p(e,["labels"],l),n}function G6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["source"]);s!=null&&$6(s,n);const i=h(e,["config"]);return i!=null&&z6(i,n),n}function H6(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>m6(s))),p(e,["generatedMasks"],r)}return e}function $6(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Sr(s));const i=h(t,["scribbleImage"]);return e!==void 0&&i!=null&&p(e,["instances[0]","scribble"],B6(i)),n}function q6(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],KU(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function W6(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],_6(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],b6(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function U1(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>JU(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function K6(t){const e={},n=h(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function J6(t){const e={},n=h(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function Y6(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function Q6(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function X6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","name"],et(t,r));const s=h(e,["config"]);return s!=null&&Y6(s,n),n}function Z6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["config"]);return s!=null&&Q6(s,n),n}function eO(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&p(e,["parameters","safetySetting"],s);const i=h(t,["personGeneration"]);e!==void 0&&i!=null&&p(e,["parameters","personGeneration"],i);const o=h(t,["includeRaiReason"]);e!==void 0&&o!=null&&p(e,["parameters","includeRaiReason"],o);const a=h(t,["outputMimeType"]);e!==void 0&&a!=null&&p(e,["parameters","outputOptions","mimeType"],a);const l=h(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&p(e,["parameters","outputOptions","compressionQuality"],l);const c=h(t,["enhanceInputImage"]);e!==void 0&&c!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],c);const d=h(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const m=h(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=h(t,["numberOfImages"]);e!==void 0&&g!=null&&p(e,["parameters","sampleCount"],g);const y=h(t,["mode"]);return e!==void 0&&y!=null&&p(e,["parameters","mode"],y),n}function tO(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],et(t,r));const s=h(e,["image"]);s!=null&&p(n,["instances[0]","image"],Sr(s));const i=h(e,["upscaleFactor"]);i!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],i);const o=h(e,["config"]);return o!=null&&eO(o,n),n}function nO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Lh(i))),p(e,["generatedImages"],s)}return e}function rO(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],ai(r));const s=h(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function sO(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],ai(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function iO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["_self"],Sr(n));const r=h(t,["maskMode"]);return r!=null&&p(e,["maskMode"],r),e}function oO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["image"],jh(n));const r=h(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function aO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["image"],Sr(n));const r=h(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function O1(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["videoBytes"]);r!=null&&p(e,["encodedVideo"],ai(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["encoding"],s),e}function B1(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["videoBytes"]);r!=null&&p(e,["bytesBase64Encoded"],ai(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lO(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["displayName"],r),n}function uO(t){const e={},n=h(t,["config"]);return n!=null&&lO(n,e),e}function cO(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function dO(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&cO(r,e),e}function hO(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function fO(t,e){const n={},r=h(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["customMetadata"],i)}const s=h(t,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),n}function pO(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],gO(o)),e}function mO(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["fileName"]);r!=null&&p(e,["fileName"],r);const s=h(t,["config"]);return s!=null&&fO(s,e),e}function gO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function yO(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function vO(t){const e={},n=h(t,["config"]);return n!=null&&yO(n,e),e}function xO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["fileSearchStores"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["fileSearchStores"],i)}return e}function z1(t,e){const n={},r=h(t,["mimeType"]);e!==void 0&&r!=null&&p(e,["mimeType"],r);const s=h(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const i=h(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["customMetadata"],a)}const o=h(t,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),n}function wO(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["config"]);return r!=null&&z1(r,e),e}function _O(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bO="Content-Type",EO="X-Server-Timeout",TO="User-Agent",vm="x-goog-api-client",IO="1.34.0",SO=`google-genai-sdk/${IO}`,kO="v1beta1",CO="v1beta";class AO{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:kO,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:CO,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.unaryApiCall(s,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,i]of Object.entries(n))typeof i=="object"?r[s]=Object.assign(Object.assign({},r[s]),i):i!==void 0&&(r[s]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.streamApiCall(s,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>i.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}s&&s.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&NO(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await N_(s),new fm(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await N_(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return wr(this,arguments,function*(){var r;const s=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:d}=yield Fe(s.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(d,{stream:!0});try{const w=JSON.parse(m);if("error"in w){const x=JSON.parse(JSON.stringify(w.error)),_=x.status,v=x.code,E=`got status: ${_}. ${JSON.stringify(w)}`;if(v>=400&&v<600)throw new Mh({message:E,status:v})}}catch(w){if(w.name==="ApiError")throw w}o+=m;let g=-1,y=0;for(;;){g=-1,y=0;for(const _ of l){const v=o.indexOf(_);v!==-1&&(g===-1||v<g)&&(g=v,y=_.length)}if(g===-1)break;const w=o.substring(0,g);o=o.substring(g+y);const x=w.trim();if(x.startsWith(a)){const _=x.substring(a.length).trim();try{const v=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Fe(new fm(v))}catch(v){throw new Error(`exception parsing stream chunk ${_}. ${v}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=SO+" "+this.clientOptions.userAgentExtra;return e[TO]=n,e[vm]=n,e[bO]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,i]of Object.entries(e.headers))r.append(s,i);e.timeout&&e.timeout>0&&r.append(EO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);s.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l={file:s},c=this.getFileName(e),d=_e("upload/v1beta/files",l._url),m=await this.fetchUploadUrl(d,s.sizeBytes,s.mimeType,c,l,n==null?void 0:n.httpOptions);return i.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var s;const i=this.clientOptions.uploader,o=await i.stat(n),a=String(o.size),l=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),m={};r!=null&&z1(r,m);const g=await this.fetchUploadUrl(c,a,l,d,m,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,i,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const c=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function N_(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new Mh({message:s,status:n}):new Error(s)}}function NO(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,o){const a=Object.assign({},i);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],d=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=r(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RO="mcp_used/unknown";let PO=!1;function G1(t){for(const e of t)if(MO(e)||typeof e=="object"&&"inputSchema"in e)return!0;return PO}function H1(t){var e;const n=(e=t[vm])!==null&&e!==void 0?e:"";t[vm]=(n+` ${RO}`).trimStart()}function MO(t){return t!==null&&typeof t=="object"&&t instanceof O0}function DO(t){return wr(this,arguments,function*(n,r=100){let s,i=0;for(;i<r;){const o=yield Fe(n.listTools({cursor:s}));for(const a of o.tools)yield yield Fe(a),i++;if(!o.nextCursor)break;s=o.nextCursor}})}class O0{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new O0(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const i={},o=[];for(const d of this.mcpClients)try{for(var a=!0,l=(n=void 0,_r(DO(d))),c;c=await l.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const m=s;o.push(m);const g=m.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=d}}catch(m){n={error:m}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),hF(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await s.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function LO(t,e,n){const r=new sF;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class jO{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=UO(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const d=new Promise(T=>{c=T}),m=e.callbacks,g=function(){c({})},y=this.apiClient,w={onopen:g,onmessage:T=>{LO(y,m.onmessage,T)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(T){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(T){}},x=this.webSocketFactory.create(l,VO(o),w);x.connect(),await d;const E={setup:{model:et(this.apiClient,e.model)}};return x.send(JSON.stringify(E)),new FO(x,this.apiClient)}}class FO{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=uU(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=lU(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(_o.PLAY)}pause(){this.sendPlaybackControl(_o.PAUSE)}stop(){this.sendPlaybackControl(_o.STOP)}resetContext(){this.sendPlaybackControl(_o.RESET_CONTEXT)}close(){this.conn.close()}}function VO(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function UO(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function BO(t,e,n){const r=new rF;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const i=JSON.parse(s);if(t.isVertexAI()){const o=hU(i);Object.assign(r,o)}else Object.assign(r,i);e(r)}class zO{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new jO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,i,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&G1(e.config.tools)&&H1(m);const g=qO(m);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,d);else{const A=this.apiClient.getApiKey();let M="BidiGenerateContent",V="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",V="access_token"),d=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${M}?${V}=${A}`}let y=()=>{};const w=new Promise(A=>{y=A}),x=e.callbacks,_=function(){var A;(A=x==null?void 0:x.onopen)===null||A===void 0||A.call(x),y({})},v=this.apiClient,E={onopen:_,onmessage:A=>{BO(v,x.onmessage,A)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(A){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(A){}},T=this.webSocketFactory.create(d,$O(g),E);T.connect(),await w;let N=et(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&N.startsWith("publishers/")){const A=this.apiClient.getProject(),M=this.apiClient.getLocation();N=`projects/${A}/locations/${M}/`+N}let L={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ld.AUDIO]}:e.config.responseModalities=[Ld.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],k=[];for(const A of U)if(this.isCallableTool(A)){const M=A;k.push(await M.tool())}else k.push(A);k.length>0&&(e.config.tools=k);const R={model:N,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=aU(this.apiClient,R):L=oU(this.apiClient,R),delete L.config,T.send(JSON.stringify(L)),new HO(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const GO={turnComplete:!0};class HO{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=tr(n.turns),e.isVertexAI()||(r=r.map(s=>Dh(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(OO)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},GO),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:dU(e)}:n={realtimeInput:cU(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function $O(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function qO(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R_=10;function P_(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(jo(o)){s=!0;break}if(!s)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function jo(t){return"callTool"in t&&typeof t.callTool=="function"}function WO(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>jo(s)))!==null&&r!==void 0?r:!1}function M_(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(jo(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(s)}),n}function D_(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KO extends ws{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,i,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!WO(n)||P_(n.config))return await this.generateContentInternal(l);const c=M_(n);if(c.length>0){const x=c.map(_=>`tools[${_}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let d,m;const g=tr(l.contents),y=(i=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:R_;let w=0;for(;w<y&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){const x=d.candidates[0].content,_=[];for(const v of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(jo(v)){const T=await v.callTool(d.functionCalls);_.push(...T)}w++,m={role:"user",parts:_},l.contents=tr(l.contents),l.contents.push(x),l.contents.push(m),D_(l.config)&&(g.push(x),g.push(m))}return D_(l.config)&&(d.automaticFunctionCallingHistory=g),d},this.generateContentStream=async n=>{var r,s,i,o,a;if(this.maybeMoveToResponseJsonSchem(n),P_(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const l=M_(n);if(l.length>0){const m=l.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(i=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,d=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let i;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?i=l==null?void 0:l.safetyAttributes:o.push(l);let a;return i?a={generatedImages:o,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Ji(ms.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,i,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(i=n.source)===null||i===void 0?void 0:i.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const o=await Promise.all(i.map(async l=>jo(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&G1(e.config.tools)){const l=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),H1(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,s;const i=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(jo(o)){const a=o,l=await a.tool();for(const c of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,a)}}return i}async processAfcStream(e){var n,r,s;const i=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:R_;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,d,m){return wr(this,arguments,function*(){for(var g,y,w,x,_,v;a<i;){o&&(a++,o=!1);const L=yield Fe(c.processParamsMaybeAddMcpUsage(m)),U=yield Fe(c.generateContentStreamInternal(L)),k=[],R=[];try{for(var E=!0,T=(y=void 0,_r(U)),N;N=yield Fe(T.next()),g=N.done,!g;E=!0){x=N.value,E=!1;const A=x;if(yield yield Fe(A),A.candidates&&(!((_=A.candidates[0])===null||_===void 0)&&_.content)){R.push(A.candidates[0].content);for(const M of(v=A.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<i&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(M.functionCall.name)){const V=yield Fe(d.get(M.functionCall.name).callTool([M.functionCall]));k.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(A){y={error:A}}finally{try{!E&&!g&&(w=T.return)&&(yield Fe(w.call(T)))}finally{if(y)throw y.error}}if(k.length>0){o=!0;const A=new Ua;A.candidates=[{content:{role:"user",parts:k}}],yield yield Fe(A);const M=[];M.push(...R),M.push({role:"user",parts:k});const V=tr(m.contents).concat(M);m.contents=V}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=k_(this.apiClient,e);return a=_e("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=A_(d),g=new Ua;return Object.assign(g,m),g})}else{const c=S_(this.apiClient,e);return a=_e("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=C_(d),g=new Ua;return Object.assign(g,m),g})}}async generateContentStreamInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=k_(this.apiClient,e);return a=_e("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return wr(this,arguments,function*(){var g,y,w,x;try{for(var _=!0,v=_r(m),E;E=yield Fe(v.next()),g=E.done,!g;_=!0){x=E.value,_=!1;const T=x,N=A_(yield Fe(T.json()));N.sdkHttpResponse={headers:T.headers};const L=new Ua;Object.assign(L,N),yield yield Fe(L)}}catch(T){y={error:T}}finally{try{!_&&!g&&(w=v.return)&&(yield Fe(w.call(v)))}finally{if(y)throw y.error}}})})}else{const c=S_(this.apiClient,e);return a=_e("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(m){return wr(this,arguments,function*(){var g,y,w,x;try{for(var _=!0,v=_r(m),E;E=yield Fe(v.next()),g=E.done,!g;_=!0){x=E.value,_=!1;const T=x,N=C_(yield Fe(T.json()));N.sdkHttpResponse={headers:T.headers};const L=new Ua;Object.assign(L,N),yield yield Fe(L)}}catch(T){y={error:T}}finally{try{!_&&!g&&(w=v.return)&&(yield Fe(w.call(v)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=zU(this.apiClient,e);return a=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=HU(d),g=new u_;return Object.assign(g,m),g})}else{const c=BU(this.apiClient,e);return a=_e("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=GU(d),g=new u_;return Object.assign(g,m),g})}}async generateImagesInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=t6(this.apiClient,e);return a=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=r6(d),g=new c_;return Object.assign(g,m),g})}else{const c=e6(this.apiClient,e);return a=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=n6(d),g=new c_;return Object.assign(g,m),g})}}async editImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=FU(this.apiClient,e);return i=_e("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=VU(l),d=new qj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=tO(this.apiClient,e);return i=_e("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=nO(l),d=new Wj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=j6(this.apiClient,e);return i=_e("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=F6(l),d=new Kj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=G6(this.apiClient,e);return i=_e("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=H6(l),d=new Jj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=w6(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>ym(d))}else{const c=x6(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>gm(d))}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=A6(this.apiClient,e);return a=_e("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=R6(d),g=new d_;return Object.assign(g,m),g})}else{const c=C6(this.apiClient,e);return a=_e("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=N6(d),g=new d_;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Z6(this.apiClient,e);return a=_e("{model}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>ym(d))}else{const c=X6(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>gm(d))}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=MU(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=LU(d),g=new h_;return Object.assign(g,m),g})}else{const c=PU(this.apiClient,e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=DU(d),g=new h_;return Object.assign(g,m),g})}}async countTokens(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=AU(this.apiClient,e);return a=_e("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=RU(d),g=new f_;return Object.assign(g,m),g})}else{const c=CU(this.apiClient,e);return a=_e("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=NU(d),g=new f_;return Object.assign(g,m),g})}}async computeTokens(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=_U(this.apiClient,e);return i=_e("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=bU(l),d=new Yj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=u6(this.apiClient,e);return a=_e("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const m=a6(d),g=new jd;return Object.assign(g,m),g})}else{const c=l6(this.apiClient,e);return a=_e("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=o6(d),g=new jd;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JO extends ws{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Oj(e);return a=_e("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}else{const c=Uj(e);return a=_e("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=Pj(e);return i=_e("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YO(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function QO(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>oB(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function XO(t,e,n){const r={},s=h(e,["expireTime"]);n!==void 0&&s!=null&&p(n,["expireTime"],s);const i=h(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&p(n,["newSessionExpireTime"],i);const o=h(e,["uses"]);n!==void 0&&o!=null&&p(n,["uses"],o);const a=h(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&p(n,["bidiGenerateContentSetup"],iB(t,a));const l=h(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&p(n,["fieldMask"],l),r}function ZO(t,e){const n={},r=h(e,["config"]);return r!=null&&p(n,["config"],XO(t,r,n)),n}function eB(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function tB(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nB(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function rB(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function sB(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],U0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],QO(pn(w)));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let U=ma(x);Array.isArray(U)&&(U=U.map(k=>lB(pa(k)))),p(e,["setup","tools"],U)}const _=h(t,["sessionResumption"]);e!==void 0&&_!=null&&p(e,["setup","sessionResumption"],aB(_));const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const E=h(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],E);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const N=h(t,["contextWindowCompression"]);e!==void 0&&N!=null&&p(e,["setup","contextWindowCompression"],N);const L=h(t,["proactivity"]);if(e!==void 0&&L!=null&&p(e,["setup","proactivity"],L),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function iB(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],et(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],sB(s,n)),n}function oB(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],eB(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],tB(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],YO(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function aB(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lB(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],nB(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],rB(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uB(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(i=>`${n}.${i}`);e.push(...s)}else e.push(n)}return e.join(",")}function cB(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const i=uB(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];i&&l.push(i),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class dB extends ws{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=ZO(this.apiClient,e);i=_e("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=cB(a,e.config);return s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hB(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function fB(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&hB(r,e),e}function pB(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function mB(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function gB(t){const e={},n=h(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const r=h(t,["config"]);return r!=null&&mB(r,e),e}function yB(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["documents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vB extends ws{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ji(ms.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=pB(e);return i=_e("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=fB(e);s=_e("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=gB(e);return i=_e("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=yB(l),d=new Qj;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xB extends ws{constructor(e,n=new vB(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Ji(ms.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=uO(e);return i=_e("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hO(e);return i=_e("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=dO(e);s=_e("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=vO(e);return i=_e("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=xO(l),d=new Xj;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=wO(e);return i=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=_O(l),d=new Zj;return Object.assign(d,c),d})}}async importFile(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=mO(e);return i=_e("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=pO(l),d=new D0;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $1=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return $1=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const wB=()=>$1();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xm(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const wm=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class or extends Error{}class In extends or{constructor(e,n,r,s){super(`${In.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new Fh({message:r,cause:wm(n)});const i=n;return e===400?new W1(e,i,r,s):e===401?new K1(e,i,r,s):e===403?new J1(e,i,r,s):e===404?new Y1(e,i,r,s):e===409?new Q1(e,i,r,s):e===422?new X1(e,i,r,s):e===429?new Z1(e,i,r,s):e>=500?new ek(e,i,r,s):new In(e,i,r,s)}}class _m extends In{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Fh extends In{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class q1 extends Fh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class W1 extends In{}class K1 extends In{}class J1 extends In{}class Y1 extends In{}class Q1 extends In{}class X1 extends In{}class Z1 extends In{}class ek extends In{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _B=/^[a-z][a-z0-9+.-]*:/i,bB=t=>_B.test(t);let bm=t=>(bm=Array.isArray,bm(t));const EB=bm;let TB=EB;const L_=TB;function IB(t){if(!t)return!0;for(const e in t)return!1;return!0}function SB(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const kB=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new or(`${t} must be an integer`);if(e<0)throw new or(`${t} must be a positive integer`);return e},CB=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AB=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ao="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NB(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const RB=()=>{var t,e,n,r,s;const i=NB();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":F_(Deno.build.os),"X-Stainless-Arch":j_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":F_((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":j_((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const o=PB();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ao,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function PB(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const j_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",F_=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let pc;const MB=()=>pc??(pc=RB());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DB(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function tk(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function LB(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return tk({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function nk(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function jB(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),s=r.cancel();r.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FB=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rk=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Uf(t,e,n){return rk(),new File(t,e??"unknown_file",n)}function VB(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const UB=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sk=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",OB=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&sk(t),BB=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function zB(t,e,n){if(rk(),t=await t,OB(t))return t instanceof File?t:Uf([await t.arrayBuffer()],t.name);if(BB(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Uf(await Em(s),e,n)}const r=await Em(t);if(e||(e=VB(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Uf(r,e,n)}async function Em(t){var e,n,r,s,i;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(sk(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(UB(t))try{for(var a=!0,l=_r(t),c;c=await l.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const d=s;o.push(...await Em(d))}}catch(d){n={error:d}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const d=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${GB(t)}`)}return o}function GB(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ik{constructor(e){this._client=e}}ik._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ok(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const V_=Object.freeze(Object.create(null)),HB=(t=ok)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],o=n.reduce((d,m,g)=>{var y,w,x;/[?#]/.test(m)&&(s=!0);const _=r[g];let v=(s?encodeURIComponent:t)(""+_);return g!==r.length&&(_==null||typeof _=="object"&&_.toString===((x=Object.getPrototypeOf((w=Object.getPrototypeOf((y=_.hasOwnProperty)!==null&&y!==void 0?y:V_))!==null&&w!==void 0?w:V_))===null||x===void 0?void 0:x.toString))&&(v=_+"",i.push({start:d.length+m.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),d+m+(g===r.length?"":v)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((d,m)=>d.start-m.start),i.length>0){let d=0;const m=i.reduce((g,y)=>{const w=" ".repeat(y.start-d),x="^".repeat(y.length);return d=y.start+y.length,g+w+x},"");throw new or(`Path parameters result in path with invalid segments:
${i.map(g=>g.error).join(`
`)}
${o}
${m}`)}return o},mc=HB(ok);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ak extends ik{create(e,n){var r;const{api_version:s=this._client.apiVersion}=e,i=Vd(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new or("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new or("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(mc`/${s}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(mc`/${s}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(mc`/${s}/interactions/${e}/cancel`,r)}get(e,n={},r){var s;const i=n??{},{api_version:o=this._client.apiVersion}=i,a=Vd(i,["api_version"]);return this._client.get(mc`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}ak._key=Object.freeze(["interactions"]);class lk extends ak{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $B(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let gc;function B0(t){let e;return(gc??(e=new globalThis.TextEncoder,gc=e.encode.bind(e)))(t)}let yc;function U_(t){let e;return(yc??(e=new globalThis.TextDecoder,yc=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?B0(e):e;this.buffer=$B([this.buffer,n]);const r=[];let s;for(;(s=qB(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(U_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,o=U_(this.buffer.subarray(0,i));r.push(o),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Vh.NEWLINE_CHARS=new Set([`
`,"\r"]);Vh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function qB(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function WB(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ud={off:0,error:200,warn:300,info:400,debug:500},O_=(t,e,n)=>{if(t){if(SB(Ud,t))return t;xn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ud))}`)}};function Ja(){}function vc(t,e,n){return!e||Ud[t]>Ud[n]?Ja:e[t].bind(e)}const KB={error:Ja,warn:Ja,info:Ja,debug:Ja};let B_=new WeakMap;function xn(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return KB;const s=B_.get(n);if(s&&s[0]===r)return s[1];const i={error:vc("error",n,r),warn:vc("warn",n,r),info:vc("info",n,r),debug:vc("debug",n,r)};return B_.set(n,[r,i]),i}const yi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bo{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let s=!1;const i=r?xn(r):console;function o(){return wr(this,arguments,function*(){var l,c,d,m;if(s)throw new or("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,w=_r(JB(e,n)),x;x=yield Fe(w.next()),l=x.done,!l;y=!0){m=x.value,y=!1;const _=m;if(!g)if(_.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield Fe(JSON.parse(_.data))}catch(v){throw i.error("Could not parse message into JSON:",_.data),i.error("From chunk:",_.raw),v}}}catch(_){c={error:_}}finally{try{!y&&!l&&(d=w.return)&&(yield Fe(d.call(w)))}finally{if(c)throw c.error}}g=!0}catch(_){if(xm(_))return yield Fe(void 0);throw _}finally{g||n.abort()}})}return new bo(o,n,r)}static fromReadableStream(e,n,r){let s=!1;function i(){return wr(this,arguments,function*(){var l,c,d,m;const g=new Vh,y=nk(e);try{for(var w=!0,x=_r(y),_;_=yield Fe(x.next()),l=_.done,!l;w=!0){m=_.value,w=!1;const v=m;for(const E of g.decode(v))yield yield Fe(E)}}catch(v){c={error:v}}finally{try{!w&&!l&&(d=x.return)&&(yield Fe(d.call(x)))}finally{if(c)throw c.error}}for(const v of g.flush())yield yield Fe(v)})}function o(){return wr(this,arguments,function*(){var l,c,d,m;if(s)throw new or("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,w=_r(i()),x;x=yield Fe(w.next()),l=x.done,!l;y=!0){m=x.value,y=!1;const _=m;g||_&&(yield yield Fe(JSON.parse(_)))}}catch(_){c={error:_}}finally{try{!y&&!l&&(d=w.return)&&(yield Fe(d.call(w)))}finally{if(c)throw c.error}}g=!0}catch(_){if(xm(_))return yield Fe(void 0);throw _}finally{g||n.abort()}})}return new bo(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=r.next();e.push(o),n.push(o)}return i.shift()}});return[new bo(()=>s(e),this.controller,this.client),new bo(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return tk({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const o=B0(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function JB(t,e){return wr(this,arguments,function*(){var r,s,i,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new or("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new or("Attempted to iterate over a response with no body");const a=new QB,l=new Vh,c=nk(t.body);try{for(var d=!0,m=_r(YB(c)),g;g=yield Fe(m.next()),r=g.done,!r;d=!0){o=g.value,d=!1;const y=o;for(const w of l.decode(y)){const x=a.decode(w);x&&(yield yield Fe(x))}}}catch(y){s={error:y}}finally{try{!d&&!r&&(i=m.return)&&(yield Fe(i.call(m)))}finally{if(s)throw s.error}}for(const y of l.flush()){const w=a.decode(y);w&&(yield yield Fe(w))}})}function YB(t){return wr(this,arguments,function*(){var n,r,s,i;let o=new Uint8Array;try{for(var a=!0,l=_r(t),c;c=yield Fe(l.next()),n=c.done,!n;a=!0){i=c.value,a=!1;const d=i;if(d==null)continue;const m=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?B0(d):d;let g=new Uint8Array(o.length+m.length);g.set(o),g.set(m,o.length),o=g;let y;for(;(y=WB(o))!==-1;)yield yield Fe(o.slice(0,y)),o=o.slice(y)}}catch(d){r={error:d}}finally{try{!a&&!n&&(s=l.return)&&(yield Fe(s.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield Fe(o))})}class QB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=XB(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function XB(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ZB(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,o=await(async()=>{var a;if(e.options.stream)return xn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):bo.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return xn(t).debug(`[${r}] response parsed`,yi({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z0 extends Promise{constructor(e,n,r=ZB){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new z0(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uk=Symbol("brand.privateNullableHeaders");function*e9(t){if(!t)return;if(uk in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():L_(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=L_(r[1])?r[1]:[r[1]];let o=!1;for(const a of i)a!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,a])}}const Oa=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,o]of e9(r)){const a=i.toLowerCase();s.has(a)||(e.delete(i),s.add(a)),o===null?(e.delete(i),n.add(a)):(e.append(i,o),n.delete(a))}}return{[uk]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Of=t=>{var e,n,r,s,i,o;if(typeof globalThis.process<"u")return(r=(n=(e=Sj)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(i=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||i===void 0?void 0:i.call(s,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ck;class Uh{constructor(e){var n,r,s,i,o,a,l,{baseURL:c=Of("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=Of("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,g=Vd(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:d,apiVersion:m},g),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(r=y.timeout)!==null&&r!==void 0?r:Uh.DEFAULT_TIMEOUT,this.logger=(s=y.logger)!==null&&s!==void 0?s:console;const w="warn";this.logLevel=w,this.logLevel=(o=(i=O_(y.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:O_(Of("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:w,this.fetchOptions=y.fetchOptions,this.maxRetries=(a=y.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=y.fetch)!==null&&l!==void 0?l:DB(),this.encoder=FB,this._options=y,this.apiKey=d,this.apiVersion=m,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Oa([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Oa([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Oa([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new or(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ao}`}defaultIdempotencyKey(){return`stainless-node-retry-${wB()}`}makeStatusError(e,n,r,s){return In.generate(e,n,r,s)}buildURL(e,n,r){const s=!this.baseURLOverridden()&&r||this.baseURL,i=bB(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return IB(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new z0(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var s,i,o;const a=await e,l=(s=a.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:d,timeout:m}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:d,options:a});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=r===void 0?"":`, retryOf: ${r}`,w=Date.now();if(xn(this).debug(`[${g}] sending request`,yi({retryOfRequestLogID:r,method:a.method,url:d,options:a,headers:c.headers})),!((i=a.signal)===null||i===void 0)&&i.aborted)throw new _m;const x=new AbortController,_=await this.fetchWithTimeout(d,c,m,x).catch(wm),v=Date.now();if(_ instanceof globalThis.Error){const T=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new _m;const N=xm(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(n)return xn(this).info(`[${g}] connection ${N?"timed out":"failed"} - ${T}`),xn(this).debug(`[${g}] connection ${N?"timed out":"failed"} (${T})`,yi({retryOfRequestLogID:r,url:d,durationMs:v-w,message:_.message})),this.retryRequest(a,n,r??g);throw xn(this).info(`[${g}] connection ${N?"timed out":"failed"} - error; no more retries left`),xn(this).debug(`[${g}] connection ${N?"timed out":"failed"} (error; no more retries left)`,yi({retryOfRequestLogID:r,url:d,durationMs:v-w,message:_.message})),N?new q1:new Fh({cause:_})}const E=`[${g}${y}] ${c.method} ${d} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${v-w}ms`;if(!_.ok){const T=await this.shouldRetry(_);if(n&&T){const A=`retrying, ${n} attempts remaining`;return await jB(_.body),xn(this).info(`${E} - ${A}`),xn(this).debug(`[${g}] response error (${A})`,yi({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:v-w})),this.retryRequest(a,n,r??g,_.headers)}const N=T?"error; no more retries left":"error; not retryable";xn(this).info(`${E} - ${N}`);const L=await _.text().catch(A=>wm(A).message),U=CB(L),k=U?void 0:L;throw xn(this).debug(`[${g}] response error (${N})`,yi({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,message:k,durationMs:Date.now()-w})),this.makeStatusError(_.status,U,k,_.headers)}return xn(this).info(E),xn(this).debug(`[${g}] response start`,yi({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:v-w})),{response:_,options:a,controller:x,requestLogID:g,retryOfRequestLogID:r,startTime:w}}async fetchWithTimeout(e,n,r,s){const i=n||{},{signal:o,method:a}=i,l=Vd(i,["signal","method"]);o&&o.addEventListener("abort",()=>s.abort());const c=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){var i;let o;const a=s==null?void 0:s.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(o=c)}const l=s==null?void 0:s.get("retry-after");if(l&&!o){const c=parseFloat(l);Number.isNaN(c)?o=Date.parse(l)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){const c=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,c)}return await AB(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,s,i;const o=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:d}=o,m=this.buildURL(l,c,d);"timeout"in o&&kB("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:g,body:y}=this.buildBody({options:o}),w=await this.buildHeaders({options:e,method:a,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:w},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(i=o.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=Oa([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),MB()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Oa([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:LB(e)}:this.encoder({body:e,headers:r})}}Uh.DEFAULT_TIMEOUT=6e4;class $t extends Uh{constructor(){super(...arguments),this.interactions=new lk(this)}}ck=$t;$t.GeminiNextGenAPIClient=ck;$t.GeminiNextGenAPIClientError=or;$t.APIError=In;$t.APIConnectionError=Fh;$t.APIConnectionTimeoutError=q1;$t.APIUserAbortError=_m;$t.NotFoundError=Y1;$t.ConflictError=Q1;$t.RateLimitError=Z1;$t.BadRequestError=W1;$t.AuthenticationError=K1;$t.InternalServerError=ek;$t.PermissionDeniedError=J1;$t.UnprocessableEntityError=X1;$t.toFile=zB;$t.Interactions=lk;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t9(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function n9(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function r9(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function s9(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function i9(t,e,n){const r={};if(h(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=h(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&p(e,["displayName"],s),h(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=h(t,["epochCount"]);e!==void 0&&i!=null&&p(e,["tuningTask","hyperparameters","epochCount"],i);const o=h(t,["learningRateMultiplier"]);if(o!=null&&p(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),h(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=h(t,["batchSize"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","batchSize"],a);const l=h(t,["learningRate"]);if(e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","learningRate"],l),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function o9(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const y=h(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec"],z_(y))}else if(s==="PREFERENCE_TUNING"){const y=h(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec"],z_(y))}const i=h(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&p(e,["tunedModelDisplayName"],i);const o=h(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);let a=h(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const y=h(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(a==="PREFERENCE_TUNING"){const y=h(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let l=h(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const y=h(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(l==="PREFERENCE_TUNING"){const y=h(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let c=h(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=h(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(c==="PREFERENCE_TUNING"){const y=h(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let d=h(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=h(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(d==="PREFERENCE_TUNING"){const y=h(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(h(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=h(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=h(t,["beta"]);return e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),r}function a9(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=h(t,["trainingDataset"]);i!=null&&v9(i);const o=h(t,["config"]);return o!=null&&i9(o,n),n}function l9(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=h(t,["trainingDataset"]);i!=null&&x9(i,n,e);const o=h(t,["config"]);return o!=null&&o9(o,n,e),n}function u9(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function c9(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function d9(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=h(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function h9(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=h(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function f9(t,e){const n={},r=h(t,["config"]);return r!=null&&d9(r,n),n}function p9(t,e){const n={},r=h(t,["config"]);return r!=null&&h9(r,n),n}function m9(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=h(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>dk(a))),p(n,["tuningJobs"],o)}return n}function g9(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=h(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Tm(a))),p(n,["tuningJobs"],o)}return n}function y9(t,e){const n={},r=h(t,["name"]);r!=null&&p(n,["model"],r);const s=h(t,["name"]);return s!=null&&p(n,["endpoint"],s),n}function v9(t,e){const n={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=h(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(n,["examples","examples"],s)}return n}function x9(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=h(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=h(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let i=h(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=h(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=h(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(h(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function dk(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["state"]);i!=null&&p(n,["state"],k1(i));const o=h(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=h(t,["tuningTask","startTime"]);a!=null&&p(n,["startTime"],a);const l=h(t,["tuningTask","completeTime"]);l!=null&&p(n,["endTime"],l);const c=h(t,["updateTime"]);c!=null&&p(n,["updateTime"],c);const d=h(t,["description"]);d!=null&&p(n,["description"],d);const m=h(t,["baseModel"]);m!=null&&p(n,["baseModel"],m);const g=h(t,["_self"]);return g!=null&&p(n,["tunedModel"],y9(g)),n}function Tm(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["state"]);i!=null&&p(n,["state"],k1(i));const o=h(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=h(t,["startTime"]);a!=null&&p(n,["startTime"],a);const l=h(t,["endTime"]);l!=null&&p(n,["endTime"],l);const c=h(t,["updateTime"]);c!=null&&p(n,["updateTime"],c);const d=h(t,["error"]);d!=null&&p(n,["error"],d);const m=h(t,["description"]);m!=null&&p(n,["description"],m);const g=h(t,["baseModel"]);g!=null&&p(n,["baseModel"],g);const y=h(t,["tunedModel"]);y!=null&&p(n,["tunedModel"],y);const w=h(t,["preTunedModel"]);w!=null&&p(n,["preTunedModel"],w);const x=h(t,["supervisedTuningSpec"]);x!=null&&p(n,["supervisedTuningSpec"],x);const _=h(t,["preferenceOptimizationSpec"]);_!=null&&p(n,["preferenceOptimizationSpec"],_);const v=h(t,["tuningDataStats"]);v!=null&&p(n,["tuningDataStats"],v);const E=h(t,["encryptionSpec"]);E!=null&&p(n,["encryptionSpec"],E);const T=h(t,["partnerModelTuningSpec"]);T!=null&&p(n,["partnerModelTuningSpec"],T);const N=h(t,["customBaseModel"]);N!=null&&p(n,["customBaseModel"],N);const L=h(t,["experiment"]);L!=null&&p(n,["experiment"],L);const U=h(t,["labels"]);U!=null&&p(n,["labels"],U);const k=h(t,["outputUri"]);k!=null&&p(n,["outputUri"],k);const R=h(t,["pipelineJob"]);R!=null&&p(n,["pipelineJob"],R);const A=h(t,["serviceAccount"]);A!=null&&p(n,["serviceAccount"],A);const M=h(t,["tunedModelDisplayName"]);M!=null&&p(n,["tunedModelDisplayName"],M);const V=h(t,["veoTuningSpec"]);return V!=null&&p(n,["veoTuningSpec"],V),n}function w9(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(t,["done"]);o!=null&&p(n,["done"],o);const a=h(t,["error"]);return a!=null&&p(n,["error"],a),n}function z_(t,e){const n={},r=h(t,["gcsUri"]);r!=null&&p(n,["validationDatasetUri"],r);const s=h(t,["vertexDatasetResource"]);return s!=null&&p(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _9 extends ws{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ji(ms.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:s});return i.baseModel=void 0,await this.tuneInternal(i)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),i=await this.tuneMldevInternal(s);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:hm.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=c9(e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>Tm(d))}else{const c=u9(e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>dk(d))}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=p9(e);return a=_e("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=g9(d),g=new p_;return Object.assign(g,m),g})}else{const c=f9(e);return a=_e("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=m9(d),g=new p_;return Object.assign(g,m),g})}}async cancel(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=n9(e);return a=_e("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=s9(d),g=new m_;return Object.assign(g,m),g})}else{const c=t9(e);return a=_e("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=r9(d),g=new m_;return Object.assign(g,m),g})}}async tuneInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=l9(e,e);return i=_e("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>Tm(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=a9(e);return i=_e("tunedModels",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>w9(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b9{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const E9=1024*1024*8,T9=3,I9=1e3,S9=2,Od="x-goog-upload-status";async function k9(t,e,n){var r;const s=await hk(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Od])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function C9(t,e,n){var r;const s=await hk(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Od])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=_1(i),a=new L0;return Object.assign(a,o),a}async function hk(t,e,n){var r,s;let i=0,o=0,a=new fm(new Response),l="upload";for(i=t.size;o<i;){const c=Math.min(E9,i-o),d=t.slice(o,o+c);o+c>=i&&(l+=", finalize");let m=0,g=I9;for(;m<T9&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[Od]));)m++,await N9(g),g=g*S9;if(o+=c,((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Od])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function A9(t){return{size:t.size,type:t.type}}function N9(t){return new Promise(e=>setTimeout(e,t))}class R9{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await k9(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await C9(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await A9(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P9{create(e,n,r){return new M9(e,n,r)}}class M9{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G_="x-goog-api-key";class D9{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(G_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(G_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const L9="gl-node/";class G0{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new $t({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Nj(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new D9(this.apiKey);this.apiClient=new AO({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:L9+"web",uploader:new R9,downloader:new b9}),this.models=new KO(this.apiClient),this.live=new zO(this.apiClient,s,new P9),this.batches=new iV(this.apiClient),this.chats=new OV(this.models,this.apiClient),this.caches=new FV(this.apiClient),this.files=new YV(this.apiClient),this.operations=new JO(this.apiClient),this.authTokens=new dB(this.apiClient),this.tunings=new _9(this.apiClient),this.fileSearchStores=new xB(this.apiClient)}}const Bf=async(t,e="id")=>{var n,r,s;try{const i=`https://${e}.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(t)}&format=json&origin=*&srlimit=1`,a=await(await fetch(i)).json();if(!((r=(n=a.query)==null?void 0:n.search)!=null&&r.length))return e==="id"?"Tidak ditemukan informasi di Wikipedia.":"No information found on Wikipedia.";const l=a.query.search[0].title,c=`https://${e}.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&explaintext&titles=${encodeURIComponent(l)}&format=json&origin=*`,g=(s=(await(await fetch(c)).json()).query)==null?void 0:s.pages;if(!g)return"Wikipedia Error.";const y=Object.keys(g)[0],w=g[y].extract;return w?w.substring(0,1e3)+"...":e==="id"?"Halaman ditemukan tapi kosong.":"Page found but empty."}catch(i){return console.error("Wikipedia API Error",i),e==="id"?"Gagal menghubungi Wikipedia.":"Failed to contact Wikipedia."}},Im="fanra_api_cd_",H0=t=>t&&t.length>5?t.slice(-8):"unknown",Eo=t=>{if(!t)return!0;const e=H0(t),n=localStorage.getItem(`${Im}${e}`);if(n){const r=parseInt(n,10);if(Date.now()<r)return console.warn(`Skipping key ending in ...${e} (Cooldown active)`),!0;localStorage.removeItem(`${Im}${e}`)}return!1},vu=t=>{if(!t)return;const e=H0(t),n=Date.now()+24*60*60*1e3;localStorage.setItem(`${Im}${e}`,n.toString()),console.warn(`Key ending in ...${e} marked for 24h cooldown due to Quota Limit.`)},j9=(t,e)=>{const n=t/e;return[{label:"1:1",value:1},{label:"3:4",value:.75},{label:"4:3",value:1.33},{label:"9:16",value:.5625},{label:"16:9",value:1.7778}].reduce((i,o)=>Math.abs(o.value-n)<Math.abs(i.value-n)?o:i).label},F9=(t,e,n,r)=>{const s=j9(e,n);switch(t){case _n.BACKGROUND_REMOVER:return{model:"gemini-2.5-flash-image",prompt:"Edit this image. Your task is to keep the foreground subject EXACTLY as it is. Do not alter the subject's face, body, clothing, lighting, or resolution. Do not 'redraw' or 'regenerate' the subject. Simply COPY the main subject and place it against a solid bright Green background (Hex Code #00FF00). If the subject is cropped in the original, keep it cropped. Do not add new details.",config:{imageConfig:{aspectRatio:s}}};case _n.HD_UPSCALE:return{model:"gemini-3-pro-image-preview",prompt:"Upscale this image to high definition (4K quality). Sharpen all details and improve lighting. IMPORTANT: Keep the image composition, colors, and BACKGROUND exactly the same as the original. Do not remove the background. Do not change the subject's identity.",config:{imageConfig:{aspectRatio:s,imageSize:"4K"}}};case _n.CREATIVE_REMIX:return{model:"gemini-2.5-flash-image",prompt:r||"Make a creative cyberpunk variation of this image.",config:{imageConfig:{aspectRatio:s}}};case _n.COLORIZE:return{model:"gemini-2.5-flash-image",prompt:"Colorize this black and white image realistically. Keep the subject and background details exactly the same, just add natural colors. Do not change the content.",config:{imageConfig:{aspectRatio:s}}};case _n.SKETCH_TO_REAL:return{model:"gemini-2.5-flash-image",prompt:"Turn this sketch or drawing into a photorealistic image. Keep the composition and subject exactly as drawn, but make it look like a high-quality photograph.",config:{imageConfig:{aspectRatio:s}}};default:throw new Error("Unknown tool type")}},V9=async t=>{const{tool:e,image:n,prompt:r,apiKeys:s}=t,i=F9(e,n.width,n.height,r);let o=[...s||[]];o.push("PLACEHOLDER_API_KEY"),o=Array.from(new Set(o.filter(c=>!!c&&!Eo(c))));let a=!1,l=null;for(let c=0;c<o.length;c++){const d=o[c];try{const g=await new G0({apiKey:d}).models.generateContent({model:i.model,contents:{parts:[{inlineData:{mimeType:n.mimeType,data:n.data}},{text:i.prompt}]},config:i.config});if(g.candidates&&g.candidates[0].content.parts){for(const y of g.candidates[0].content.parts)if(y.inlineData&&y.inlineData.data)return y.inlineData.data}throw new Error("No image data returned from Gemini.")}catch(m){console.warn(`Key ending in ...${d.slice(-4)} failed.`),l=m;const g=(m.message||"").toLowerCase(),y=g.includes("429")||g.includes("quota")||g.includes("exhausted")||g.includes("503");if(y&&vu(d),c===o.length-1&&y&&!a){console.log("Personal & System keys exhausted. Fetching Community Keys...");try{const w=await B3();if(w.length>0){const x=w.filter(_=>!o.includes(_)&&!Eo(_));o.push(...x),a=!0;continue}}catch{console.error("Failed to fetch community keys")}}}}throw l||new Error("All API keys (Personal, System, and Community) failed or are in cooldown.")},U9={name:"searchWikipedia",description:"Search Wikipedia for facts, history, people, places, definitions, or concepts. PRIMARY SOURCE after Database.",parameters:{type:fn.OBJECT,properties:{query:{type:fn.STRING,description:"The search keywords."}},required:["query"]}},O9={name:"searchWeather",description:"Get REAL-TIME weather data for a specific city. Use this when asked about 'weather', 'temperature', 'rain', or 'climate' in a specific location.",parameters:{type:fn.OBJECT,properties:{city:{type:fn.STRING,description:"The name of the city to get weather for (e.g., Jakarta, Bandung, New York)."}},required:["city"]}},B9={name:"searchCountryFact",description:"Get detailed facts about a country (Capital, Population, Currency, Flag, Region). Use when asked about specific country details.",parameters:{type:fn.OBJECT,properties:{country_name:{type:fn.STRING,description:"The name of the country (e.g., Indonesia, Japan, Brazil)."}},required:["country_name"]}},z9={name:"searchGoogle",description:"Search Google using Custom Search API. LAST RESORT source. Use ONLY if Wiki/Weather/Country is missing or for cross-website info/references/news.",parameters:{type:fn.OBJECT,properties:{query:{type:fn.STRING,description:"The search keywords."}},required:["query"]}},Jr=async(t,e)=>{if(!e)return t;const n=t.split(/(\s+)/);let r="";for(const s of n)r+=s,e(r),await new Promise(i=>setTimeout(i,Math.random()*15+5));return t},G9=async(t,e,n,r)=>{var s,i,o;try{console.log("Attempting OpenRouter Fallback...");const a=[{role:"system",content:n},...e.map(m=>{const g=m.parts.find(y=>y.text);return{role:m.role==="model"?"assistant":"user",content:g?g.text:""}}).filter(m=>m.content)],l=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:"google/gemini-2.0-flash-lite-preview-02-05:free",messages:a,stream:!1})});if(l.status===429)throw vu(t),new Error("OpenRouter Quota Exceeded");if(!l.ok)throw new Error(`OpenRouter Error: ${l.status}`);const d=((o=(i=(s=(await l.json()).choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:o.content)||"";return r&&d&&await Jr(d,r),d}catch(a){throw console.error("OpenRouter Failed:",a),a}},H9=async(t,e,n,r)=>{var s,i,o;try{console.log("Attempting Groq Fallback...");const a=[{role:"system",content:n},...e.map(m=>{const g=m.parts.find(y=>y.text);return{role:m.role==="model"?"assistant":"user",content:g?g.text:""}}).filter(m=>m.content)],l=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:"llama3-8b-8192",messages:a,stream:!1})});if(l.status===429)throw vu(t),new Error("Groq Quota Exceeded");if(!l.ok)throw new Error(`Groq Error: ${l.status}`);const d=((o=(i=(s=(await l.json()).choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:o.content)||"";return r&&d&&await Jr(d,r),d}catch(a){throw console.error("Groq Failed:",a),a}},$9=async(t,e,n,r)=>{try{console.log("Attempting Hugging Face Fallback...");let s=`<start_of_turn>system
${n}<end_of_turn>
`;e.forEach(l=>{var d;const c=((d=l.parts.find(m=>m.text))==null?void 0:d.text)||"";c&&(s+=`<start_of_turn>${l.role==="model"?"model":"user"}
${c}<end_of_turn>
`)}),s+=`<start_of_turn>model
`;const i=await fetch("https://api-inference.huggingface.co/models/google/gemma-1.1-7b-it",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:s,parameters:{max_new_tokens:512,return_full_text:!1,temperature:.7}})});if(i.status===429)throw vu(t),new Error("HuggingFace Quota Exceeded");if(!i.ok)throw new Error(`Hugging Face Error: ${i.status}`);const o=await i.json();let a="";return Array.isArray(o)&&o.length>0?a=o[0].generated_text:o.generated_text&&(a=o.generated_text),r&&a&&await Jr(a,r),a}catch(s){throw console.error("Hugging Face Failed:",s),s}},q9=async(t,e,n=[],r="id",s=[],i,o=!1,a=!1,l,c,d,m,g)=>{var L,U,k,R,A,M,V,P,D;if(o){if(t.trim().length>0){const ce=await iw(t);if(ce)return{text:await Jr(ce,i),source:"knowledge_base"}}const I=await Bf(t,r);return{text:await Jr(I,i),source:"wikipedia"}}const y=n.slice(-10).map(I=>({role:I.role,parts:[{text:I.text}]})),w=[];t?w.push({text:t}):s.length>0&&w.push({text:"Describe these images or answer based on them."}),s&&s.length>0&&s.forEach(I=>{w.push({inlineData:{mimeType:I.mimeType,data:I.data}})});const x=[...y,{role:"user",parts:w}],_=!!(l!=null&&l.apiKey&&l.cx),v=[{functionDeclarations:[U9,O9,B9]}];_&&v[0].functionDeclarations.push(z9);const T=`
        Nama lo: Fanra.
        Pembuat: Irfan Rizki Aditri (biasa dipanggil Fanra Dev).
        Sifat: Cool, santai, & solutif. Gaya ngomong: lo-gue, normal, nggak kaku.
        
        ATURAN PENTING:
        - Jika ditanya hal umum, jawab dengan jelas dan ringkas.
        - Jika ditanya tentang Irfan, jawab seadanya dia mahasiswa Fisika ITERA.
        - Gunakan Bahasa Indonesia yang natural.
    `;let N=[...e||[]];N.push("PLACEHOLDER_API_KEY"),N=Array.from(new Set(N.filter(I=>!!I&&!Eo(I))));for(const I of N){if(c!=null&&c.aborted)throw new Error("Request cancelled by user");try{const te=await new G0({apiKey:I}).models.generateContent({model:"gemini-3-flash-preview",contents:x,config:{systemInstruction:T,tools:v}}),ne=(A=(R=(k=(U=(L=te.candidates)==null?void 0:L[0])==null?void 0:U.content)==null?void 0:k.parts)==null?void 0:R.filter(ae=>ae.functionCall))==null?void 0:A.map(ae=>ae.functionCall);if(ne&&ne.length>0){const ae=ne[0];if(ae.name==="searchWikipedia"){const K=await Bf(ae.args.query,r);return{text:await Jr(K,i),source:"wikipedia"}}}const Q=(D=(P=(V=(M=te.candidates)==null?void 0:M[0])==null?void 0:V.content)==null?void 0:P.parts)==null?void 0:D.find(ae=>ae.text);return Q&&Q.text?(await Jr(Q.text,i),{text:Q.text,source:"gemini"}):{text:"...",source:"gemini"}}catch($){console.warn(`Gemini Key failed: ${H0(I)}`);const ce=($.message||"").toLowerCase();(ce.includes("429")||ce.includes("quota")||ce.includes("exhausted"))&&vu(I)}}if(d&&!Eo(d)){if(c!=null&&c.aborted)throw new Error("Request cancelled");try{return{text:await G9(d,x,T,i),source:"openrouter"}}catch{console.warn("OpenRouter Failed, moving to next...")}}if(g&&!Eo(g)){if(c!=null&&c.aborted)throw new Error("Request cancelled");try{return{text:await H9(g,x,T,i),source:"groq"}}catch{console.warn("Groq Failed, moving to next...")}}if(m&&!Eo(m)){if(c!=null&&c.aborted)throw new Error("Request cancelled");try{return{text:await $9(m,x,T,i),source:"huggingface"}}catch{console.warn("Hugging Face Failed, moving to next...")}}console.log("All AI APIs failed/limit. Fallback to Wikipedia.");try{if(c!=null&&c.aborted)throw new Error("Request cancelled");const I=await Bf(t,r);if(I&&!I.includes("Tidak ditemukan"))return{text:await Jr(I,i),source:"wikipedia"}}catch{}console.log("Wikipedia failed. Checking Database.");try{const I=await iw(t);if(I)return{text:await Jr(I,i),source:"knowledge_base"}}catch{}throw new Error("All services (AI, Wiki, DB) unavailable. Please try again tomorrow.")},W9=t=>new Promise((e,n)=>{const r=new Image;r.src=`data:image/png;base64,${t}`,r.crossOrigin="Anonymous",r.onload=()=>{const s=document.createElement("canvas");s.width=r.width,s.height=r.height;const i=s.getContext("2d");if(!i){n(new Error("Could not get canvas context"));return}i.drawImage(r,0,0);const o=i.getImageData(0,0,s.width,s.height),a=o.data;for(let l=0;l<a.length;l+=4){const c=a[l],d=a[l+1],m=a[l+2],g=Math.max(c,m);let y=d-g;const w=10,x=60;if(y>w){const _=1-Math.max(0,Math.min(1,(y-w)/(x-w)));a[l+3]=Math.floor(255*_),d>g&&(a[l+1]=g)}}i.putImageData(o,0,0),e(s.toDataURL("image/png",1).split(",")[1])},r.onerror=s=>n(new Error("Failed to load image for processing"))}),K9=(t,e="image/png")=>{const n=t.replace(/[\n\r]/g,"").trim(),r=atob(n),s=new Array(r.length);for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);const i=new Uint8Array(s);return new Blob([i],{type:e})},J9=async(t,e)=>{const n=new FormData,r=K9(t);n.append("image_file",r,"image.png"),n.append("size","auto");try{const s=await fetch("https://api.remove.bg/v1.0/removebg",{method:"POST",headers:{"X-Api-Key":e},body:n});if(!s.ok){let o="Failed to remove background via Remove.bg";try{const a=await s.json();a.errors&&a.errors[0]&&(o=a.errors[0].title)}catch{o=`Remove.bg Error: ${s.statusText}`}throw new Error(o)}const i=await s.blob();return new Promise((o,a)=>{const l=new FileReader;l.onloadend=()=>{const c=l.result;o(c.split(",")[1])},l.onerror=a,l.readAsDataURL(i)})}catch(s){throw console.error("Remove.bg Service Error:",s),s}};const Y9=({onImageSelect:t,language:e})=>{const n=F.useRef(null),[r,s]=F.useState(!1),i=yu[e],o=m=>{if(!m.type.startsWith("image/")){qe(i.invalidImage);return}const g=new FileReader;g.onloadend=()=>{const y=g.result,w=new Image;w.onload=()=>{const x=document.createElement("canvas");x.width=w.width,x.height=w.height;const _=x.getContext("2d");if(!_)return;_.drawImage(w,0,0);const v="image/png",T=x.toDataURL(v).split(",")[1];t(T,v,w.width,w.height)},w.src=y},g.readAsDataURL(m)},a=m=>{var y;const g=(y=m.target.files)==null?void 0:y[0];g&&o(g)},l=m=>{m.preventDefault(),m.stopPropagation(),s(!0)},c=m=>{m.preventDefault(),m.stopPropagation(),s(!1)},d=m=>{var y;m.preventDefault(),m.stopPropagation(),s(!1);const g=(y=m.dataTransfer.files)==null?void 0:y[0];g&&o(g)};return u.jsxs("div",{className:`w-full max-w-xl mx-auto border-2 border-dashed rounded-2xl p-12 flex flex-col items-center justify-center text-center cursor-pointer transition-all duration-300 group bg-white ${r?"border-primary bg-slate-50 scale-[1.02] shadow-xl":"border-slate-300 hover:border-primary hover:bg-slate-50"}`,onClick:()=>{var m;return(m=n.current)==null?void 0:m.click()},onDragOver:l,onDragLeave:c,onDrop:d,children:[u.jsx("input",{type:"file",ref:n,onChange:a,className:"hidden",accept:"image/png, image/jpeg, image/webp"}),u.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 transition-transform duration-300 ${r?"scale-110 bg-white shadow-md":"bg-slate-50 group-hover:scale-110"}`,children:u.jsx(Pl,{className:`w-6 h-6 ${r?"text-primary":"text-slate-400 group-hover:text-primary"}`})}),u.jsx("h3",{className:`text-lg font-bold mb-2 transition-colors ${r?"text-primary":"text-slate-700 group-hover:text-primary"}`,children:r?i.dropHere:i.uploadTitle}),u.jsx("p",{className:"text-slate-500 text-sm",children:i.uploadDesc})]})},H_=[{label:"Transparent",value:null,hex:"transparent"},{label:"White",value:"#FFFFFF",hex:"#FFFFFF"},{label:"Black",value:"#000000",hex:"#000000"},{label:"Red",value:"#DB2828",hex:"#DB2828"},{label:"Blue",value:"#2185D0",hex:"#2185D0"},{label:"Green",value:"#21BA45",hex:"#21BA45"},{label:"Yellow",value:"#FBBD08",hex:"#FBBD08"}],Q9=({originalImage:t,resultImageBase64:e,isProcessing:n,processingText:r,onReset:s,language:i})=>{const[o,a]=F.useState(50),[l,c]=F.useState(!1),[d,m]=F.useState(null),g=F.useRef(null),y=F.useRef(null),w=yu[i],x=()=>{if(!e)return;if(!d){const k=document.createElement("a");k.href=`data:image/png;base64,${e}`,k.download="pixelmagic-edited.png",document.body.appendChild(k),k.click(),document.body.removeChild(k);return}const N=document.createElement("canvas"),L=N.getContext("2d"),U=new Image;U.onload=()=>{if(N.width=U.width,N.height=U.height,L){L.fillStyle=d,L.fillRect(0,0,N.width,N.height),L.drawImage(U,0,0);const k=document.createElement("a");k.href=N.toDataURL("image/png"),k.download="pixelmagic-edited-bg.png",document.body.appendChild(k),k.click(),document.body.removeChild(k)}},U.src=`data:image/png;base64,${e}`},_=F.useCallback(()=>c(!0),[]),v=F.useCallback(()=>c(!1),[]),E=F.useCallback(N=>{if(!l||!g.current)return;const{left:L,width:U}=g.current.getBoundingClientRect();let k;"touches"in N?k=N.touches[0].clientX:k=N.clientX;const R=(k-L)/U*100;a(Math.min(100,Math.max(0,R)))},[l]);F.useEffect(()=>(window.addEventListener("mousemove",E),window.addEventListener("mouseup",v),window.addEventListener("touchmove",E),window.addEventListener("touchend",v),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",E),window.removeEventListener("touchend",v)}),[E,v]);const T=()=>d?{backgroundColor:d}:{backgroundColor:"#f8fafc",backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"};return u.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6 animate-fade-in pb-10",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsx("h2",{className:"text-xl font-bold text-primary self-start md:self-auto",children:n?u.jsxs("span",{className:"flex items-center gap-2",children:[w.processing,u.jsxs("span",{className:"flex gap-1",children:[u.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce"}),u.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-100"}),u.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-200"})]})]}):w.resultComparison}),!n&&u.jsxs("div",{className:"flex items-center gap-3 self-end md:self-auto",children:[u.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-slate-500 hover:text-primary transition-colors hover:bg-slate-50 rounded-lg active:scale-95 duration-200",children:w.reset}),e&&u.jsxs("button",{onClick:x,className:"flex items-center gap-2 bg-primary hover:bg-slate-800 text-white px-5 py-2 rounded-lg font-semibold text-sm transition-all shadow-lg shadow-slate-900/10 active:scale-95 hover:shadow-xl hover:-translate-y-0.5",children:[u.jsx(yT,{className:"w-4 h-4"}),w.download," ",d?"JPG":"PNG"]})]})]}),u.jsxs("div",{className:"relative w-full h-[60vh] rounded-xl overflow-hidden border border-slate-200 shadow-xl shadow-slate-200/50 bg-white select-none mx-auto group",ref:g,children:[n&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-white/90 backdrop-blur-md flex flex-col items-center justify-center transition-all duration-300",children:[u.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,className:"absolute inset-0 w-full h-full object-contain opacity-10 blur-md scale-105",alt:"Background Blur"}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center p-8 bg-white/80 rounded-2xl shadow-sm border border-slate-100/50 backdrop-blur-xl",children:[u.jsxs("div",{className:"relative mb-6",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-slate-100 rounded-full"}),u.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"})})]}),u.jsx("p",{className:"font-bold text-lg tracking-wide animate-shimmer-text",children:r||"..."})]})]}),!n&&e&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center transition-colors duration-300",style:T(),children:u.jsx("img",{src:`data:image/png;base64,${e}`,alt:"Result",className:"max-w-full max-h-full object-contain animate-fade-in",draggable:!1})}),u.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden",style:{clipPath:`inset(0 ${100-o}% 0 0)`},children:[u.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white/95",children:u.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain",draggable:!1})}),u.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur text-primary text-[10px] font-bold px-2 py-1 rounded shadow-sm border border-slate-100 select-none",children:w.original})]}),u.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white z-30 cursor-ew-resize shadow-[0_0_10px_rgba(0,0,0,0.2)] hover:bg-blue-100 transition-colors",style:{left:`${o}%`},onMouseDown:_,onTouchStart:_,children:u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg border border-slate-100 flex items-center justify-center text-primary transform hover:scale-110 active:scale-95 transition-all duration-200 cursor-ew-resize",children:u.jsx(tN,{className:"w-4 h-4"})})}),u.jsx("div",{className:"absolute top-4 right-4 bg-primary/90 backdrop-blur text-white text-[10px] font-bold px-2 py-1 rounded shadow-sm z-20 select-none",children:w.result})]}),!n&&!e&&u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain"})})]}),!n&&e&&u.jsxs("div",{className:"flex flex-col items-center gap-3 animate-fade-in-up",children:[u.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:w.bgColor}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-3 bg-white p-3 rounded-2xl border border-slate-200 shadow-sm transition-all hover:shadow-md",children:[H_.map(N=>u.jsx("button",{onClick:()=>m(N.value),className:`w-10 h-10 rounded-full border-2 transition-all duration-200 hover:scale-110 active:scale-95 flex items-center justify-center ${d===N.value?"border-primary ring-2 ring-primary/20 scale-110":"border-slate-200 hover:border-slate-300"}`,style:{backgroundColor:N.value||"white"},title:N.label,children:N.value===null&&u.jsx("div",{className:"w-full h-full rounded-full opacity-40",style:{backgroundImage:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 0 4px, 4px -4px, -4px 0px"}})},N.label)),u.jsx("div",{className:"w-px h-8 bg-slate-200 mx-2 self-center"}),u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:"color",ref:y,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:N=>m(N.target.value),value:d||"#ffffff"}),u.jsx("button",{className:`w-10 h-10 rounded-full border-2 flex items-center justify-center bg-white hover:bg-slate-50 transition-all duration-200 hover:scale-110 active:scale-95 ${d&&!H_.find(N=>N.value===d)?"border-primary ring-2 ring-primary/20":"border-slate-200 group-hover:border-slate-300"}`,title:"Custom Color",children:u.jsx("span",{className:"text-xl leading-none pb-1 text-slate-400 group-hover:text-primary transition-colors",children:"+"})})]})]})]}),!n&&!e&&u.jsx("p",{className:"text-center text-slate-400 text-xs animate-fade-in",children:w.uploadPrompt})]})},X9=({isOpen:t,onClose:e,removeBgKey:n,onSaveRemoveBgKey:r,storedApiKeys:s,onAddApiKey:i,onDeleteApiKey:o,onToggleApiKey:a,onSelectGoogleKey:l,knowledgeMode:c,onToggleKnowledgeMode:d,wikiEnabled:m,onToggleWiki:g,removeBgEnabled:y,onToggleRemoveBg:w,supabaseEnabled:x,onToggleSupabase:_,googleSearchKey:v,googleSearchCx:E,onSaveGoogleSearch:T,openRouterKey:N,onSaveOpenRouterKey:L,huggingFaceKey:U,onSaveHuggingFaceKey:k,groqKey:R,onSaveGroqKey:A,language:M})=>{const[V,P]=F.useState(n),[D,I]=F.useState(v),[$,ce]=F.useState(E),[te,ne]=F.useState(N),[Q,ae]=F.useState(U),[K,H]=F.useState(R),[he,ee]=F.useState(""),[X,Ie]=F.useState(!1),[Be,ke]=F.useState(!1),[je,Oe]=F.useState(0),[He,lt]=F.useState(!1),ze=yu[M];if(F.useEffect(()=>{P(n),I(v),ne(N),ae(U),H(R),ce(!E&&!$?"3040e7dd9eac6414b":E),t?G3().then(Oe):(Ie(!1),ee(""),ke(!1))},[n,v,E,N,U,R,t]),!t)return null;const C=async()=>{const O=he.trim();if(!O||!X)return;if(!O.startsWith("AIza")){qe("Format Key salah. Harus dimulai dengan 'AIza'.");return}if(O.length!==39){qe(`Panjang Key salah (${O.length}). Harusnya 39 karakter.`);return}if(s.some(q=>q.key===O)){qe("Key ini sudah ada di daftar.");return}lt(!0);try{const ie=await new G0({apiKey:O}).models.generateContent({model:"gemini-3-flash-preview",contents:"Ping"});if(!ie||!ie.candidates||ie.candidates.length===0)throw new Error("API Valid, but response empty.");i(O,Be),ee(""),ke(!1),qe("Key berhasil diverifikasi & disimpan!")}catch(q){console.error("Key Validation Failed:",q);const ie=(q.message||"").toLowerCase();ie.includes("400")||ie.includes("invalid_argument")||ie.includes("api key not valid")?qe("Key DITOLAK oleh Google (Invalid)."):ie.includes("403")||ie.includes("permission_denied")?qe("Key valid tapi tidak punya izin (Billing/Project problem)."):ie.includes("404")||ie.includes("not_found")?qe("Model tidak ditemukan. Coba lagi."):qe("Gagal memvalidasi Key. "+(q.message||"Unknown error"))}finally{lt(!1)}},se=()=>{r(V.trim()),T(D.trim(),$.trim()),L(te.trim()),k(Q.trim()),A(K.trim()),e(),qe("Pengaturan disimpan!")},Z=({value:O,hasSystemDefault:B=!0})=>O&&O.trim().length>0?u.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-md border border-green-200",children:[u.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"Key Pribadi (Custom)"]}):B?u.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-blue-100 text-blue-700 px-2 py-0.5 rounded-md border border-blue-200",children:[u.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),"Key Sistem (Bawaan)"]}):u.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-slate-100 text-slate-500 px-2 py-0.5 rounded-md border border-slate-200",children:[u.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full"}),"Nonaktif"]});return u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-fade-in-up ring-1 ring-slate-900/5",children:[u.jsxs("div",{className:"bg-white px-6 py-5 border-b border-slate-100 flex items-center justify-between sticky top-0 z-10",children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 border border-slate-100 flex items-center justify-center text-primary",children:u.jsx(Ml,{className:"w-5 h-5"})}),ze.settingsTitle]}),u.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-50 hover:bg-slate-100 text-slate-400 hover:text-slate-800 transition-all",children:""})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-slate-50",children:[u.jsxs("section",{className:"bg-white rounded-2xl p-5 border border-slate-200 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"p-1.5 bg-indigo-50 rounded-lg",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3311/3311764.png",className:"w-5 h-5 object-contain",alt:"AI Pref"})}),u.jsx("h3",{className:"text-sm font-bold text-slate-800",children:ze.systemPref})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"flex items-start justify-between p-3 bg-indigo-50/50 rounded-xl border border-indigo-100",children:u.jsxs("div",{className:"w-full",children:[u.jsx("div",{className:"flex justify-between items-center mb-1",children:u.jsxs("h4",{className:"text-xs font-bold text-slate-700 flex items-center gap-2",children:[ze.knowledgeMode,u.jsx("span",{className:"text-[9px] bg-green-100 text-green-700 px-1.5 rounded-md border border-green-200",children:"Selalu Aktif"})]})}),u.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed mb-2",children:ze.knowledgeModeDesc}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs("div",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-100 px-2 py-1 rounded-md w-fit flex items-center gap-1.5",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/9836/9836888.png",className:"w-3.5 h-3.5 object-contain",alt:"DB"}),ze.totalKnowledge,": ",je]})})]})}),u.jsx("div",{className:"flex items-start justify-between p-3 bg-slate-50 rounded-xl border border-slate-200",children:u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/48/48930.png",className:"w-4 h-4 object-contain",alt:"Wiki"}),u.jsxs("h4",{className:"text-xs font-bold text-slate-700 flex items-center gap-2",children:[ze.wikiMode,u.jsx("span",{className:"text-[9px] bg-green-100 text-green-700 px-1.5 rounded-md border border-green-200",children:"Selalu Aktif"})]})]}),u.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed",children:ze.wikiModeDesc})]})})]})]}),u.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/18889/18889881.png",className:"w-6 h-6 object-contain",alt:"Gemini"}),ze.googleApiTitle," (Utama)"]}),u.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:ze.googleApiDesc})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"flex items-center justify-between mb-3 px-1",children:u.jsxs("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[ze.keysStored,u.jsx("span",{className:"bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded text-[10px]",children:s.length})]})}),s.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-6 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50 mb-4",children:[u.jsx(Ml,{className:"w-6 h-6 text-slate-300 mb-2"}),u.jsx("p",{className:"text-xs text-slate-400 font-medium text-center",children:ze.noKeysYet})]}):u.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto custom-scrollbar pr-1 mb-4",children:s.map((O,B)=>u.jsxs("div",{className:`flex items-center justify-between p-3 bg-white border rounded-xl shadow-sm transition-all ${O.isActive!==!1?"border-slate-200":"border-slate-100 bg-slate-50/50 opacity-70"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 text-xs font-bold border ${O.isShared?"bg-green-50 text-green-600 border-green-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:O.isShared?u.jsx(md,{className:"w-3.5 h-3.5"}):B+1}),u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("span",{className:"text-xs font-mono text-slate-700 font-bold tracking-tight",children:[" ",O.key.slice(-4)]}),u.jsx("span",{className:`text-[9px] font-bold ${O.isActive!==!1?"text-green-500":"text-slate-400"}`,children:O.isActive!==!1?" "+ze.active:" "+ze.inactive})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{onClick:q=>q.stopPropagation(),children:u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer scale-75",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:O.isActive!==!1,onChange:q=>a(O.key,q.target.checked)}),u.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-green-500"})]})}),u.jsx("button",{onClick:()=>o(O.key),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg",children:u.jsx(Lr,{className:"w-3.5 h-3.5"})})]})]},B))})]}),u.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer w-fit mb-3",children:[u.jsx("input",{type:"checkbox",checked:X,onChange:O=>Ie(O.target.checked),className:"w-3.5 h-3.5 text-blue-600 rounded border-slate-300 focus:ring-blue-500"}),u.jsx("span",{className:"text-[10px] text-slate-500 font-medium",children:"Saya bertanggung jawab atas penggunaan Key ini."})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:he,onChange:O=>ee(O.target.value),placeholder:X?ze.addKeyPlaceholder:"Centang dulu di atas...",disabled:!X||He,maxLength:50,className:"flex-1 px-3 py-2 bg-white border rounded-lg text-xs outline-none transition-colors disabled:bg-slate-100 border-slate-200 focus:border-blue-500"}),u.jsx("button",{onClick:C,disabled:!X||!he.trim()||He,className:"px-4 py-2 bg-slate-900 text-white rounded-lg text-xs font-bold hover:bg-slate-800 disabled:bg-slate-300 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:He?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-3 h-3 border-2 border-white/50 border-t-white rounded-full animate-spin"}),"Checking..."]}):"+ Add"})]}),u.jsx("div",{className:"mt-3 flex justify-center",children:u.jsxs("button",{onClick:l,className:"text-[10px] font-bold text-blue-600 hover:underline flex items-center gap-1",children:[ze.selectKeyBtn," "]})})]})]}),u.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[u.jsxs("div",{className:"mb-5 border-b border-slate-100 pb-4",children:[u.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[u.jsx("div",{className:"p-1.5 bg-emerald-50 rounded-lg",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/11681/11681335.png",className:"w-5 h-5 object-contain",alt:"API"})}),"Integrasi API Eksternal"]}),u.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:"Kelola key untuk layanan Fallback (Cadangan) dan Tools tambahan."})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(gd,{className:"w-3.5 h-3.5 text-slate-400"}),u.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Fallback AI (Cadangan Chat)"})]}),u.jsxs("div",{className:"space-y-4 pl-1",children:[u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"OpenRouter (Prioritas 2)"}),u.jsx(Z,{value:te,hasSystemDefault:!0})]}),u.jsx("input",{type:"text",value:te,onChange:O=>ne(O.target.value),placeholder:"sk-or-v1-...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-emerald-500/10 focus:border-emerald-500 outline-none transition-all font-mono"})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Groq API (Prioritas 3)"}),u.jsx(Z,{value:K,hasSystemDefault:!0})]}),u.jsx("input",{type:"text",value:K,onChange:O=>H(O.target.value),placeholder:"gsk_...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-orange-500/10 focus:border-orange-500 outline-none transition-all font-mono"})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Hugging Face (Prioritas 4)"}),u.jsx(Z,{value:Q,hasSystemDefault:!0})]}),u.jsx("input",{type:"text",value:Q,onChange:O=>ae(O.target.value),placeholder:"hf_...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-yellow-500/10 focus:border-yellow-500 outline-none transition-all font-mono"})]})]})]}),u.jsx("div",{className:"h-px bg-slate-100 w-full"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/6710/6710433.png",className:"w-4 h-4 object-contain",alt:"Tools"}),u.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Search & Tools"})]}),u.jsxs("div",{className:"space-y-4 pl-1",children:[u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-2",children:"Google Search API"}),u.jsx(Z,{value:D,hasSystemDefault:!1})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("input",{type:"text",value:D,onChange:O=>I(O.target.value),placeholder:"API Key",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-blue-500 outline-none font-mono"}),u.jsx("input",{type:"text",value:$,onChange:O=>ce(O.target.value),placeholder:"Search Engine ID (CX)",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-blue-500 outline-none font-mono"})]})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Remove.bg API"}),u.jsx("span",{className:"text-[9px] bg-green-100 text-green-700 px-1.5 rounded-md border border-green-200",children:"Aktif"})]}),u.jsx(Z,{value:V,hasSystemDefault:!0})]}),u.jsx("input",{type:"text",value:V,onChange:O=>P(O.target.value),placeholder:"API Key Remove.bg...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-purple-500 outline-none font-mono"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 border border-slate-100 rounded-xl",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Supabase Engine"}),u.jsx("span",{className:"text-[9px] text-slate-400",children:"Cadangan pemrosesan gambar."})]}),u.jsx("span",{className:"text-[9px] bg-green-100 text-green-700 px-1.5 rounded-md border border-green-200",children:"Aktif"})]})]})]})]})]})]}),u.jsxs("div",{className:"p-5 border-t border-slate-100 bg-white flex items-center justify-end gap-3 shrink-0",children:[u.jsx("button",{onClick:e,className:"px-5 py-2.5 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded-xl font-bold text-sm transition-all",children:ze.cancel}),u.jsxs("button",{onClick:se,className:"px-6 py-2.5 bg-slate-900 hover:bg-slate-800 text-white rounded-xl font-bold text-sm shadow-lg shadow-slate-900/20 active:scale-95 transition-all flex items-center gap-2",children:[u.jsx(cs,{className:"w-4 h-4"}),ze.save]})]})]})})},Z9=({onLogin:t,language:e,onToggleLanguage:n,onClose:r})=>{const[s,i]=F.useState(!1),[o,a]=F.useState(null),l=async()=>{i(!0),a(null);try{const{user:c,credits:d,id:m}=await F3();t(c,m,d)}catch(c){console.error(c),c.code==="auth/popup-closed-by-user"?a("Login dibatalkan."):a("Gagal login dengan Google. Coba lagi.")}finally{i(!1)}};return u.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center overflow-hidden bg-slate-50",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-40 pointer-events-none",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),u.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),u.jsxs("div",{className:"relative z-10 w-full max-w-sm rounded-[2rem] shadow-2xl animate-fade-in-up border border-slate-200 overflow-hidden bg-white p-2",children:[u.jsx("div",{className:"absolute inset-0 opacity-[0.4] pointer-events-none",style:{backgroundImage:"linear-gradient(#f1f5f9 1px, transparent 1px), linear-gradient(90deg, #f1f5f9 1px, transparent 1px)",backgroundSize:"20px 20px"}}),r&&u.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 rounded-full text-slate-400 hover:bg-slate-100 hover:text-slate-900 transition-all z-20",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),u.jsxs("div",{className:"relative z-10 p-8 flex flex-col items-center text-center bg-white/80 backdrop-blur-sm rounded-[1.5rem]",children:[u.jsx("div",{className:"relative mb-6",children:u.jsx("div",{className:"w-20 h-20 bg-white border border-slate-100 rounded-3xl shadow-sm flex items-center justify-center transform hover:rotate-3 transition-transform duration-500",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra Logo",className:"w-10 h-10 object-contain"})})}),u.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Fanra AI Studio"}),u.jsx("p",{className:"text-slate-500 text-sm mb-8 leading-relaxed font-medium",children:"Masuk untuk menyimpan riwayat chat dan mengakses fitur kreatif."}),u.jsx("button",{onClick:l,disabled:s,className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-3.5 px-6 rounded-xl flex items-center justify-center gap-3 transition-all shadow-lg shadow-slate-900/20 active:scale-95 group disabled:opacity-70 disabled:cursor-not-allowed",children:s?u.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center p-0.5",children:u.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google",className:"w-full h-full"})}),u.jsx("span",{className:"text-sm",children:"Lanjutkan dengan Google"})]})}),o&&u.jsxs("div",{className:"mt-6 flex items-center gap-2 text-red-500 bg-red-50 px-4 py-2 rounded-lg text-xs font-bold animate-pulse",children:[u.jsx("span",{children:""})," ",o]}),u.jsx("div",{className:"mt-8 flex flex-col gap-1",children:u.jsx("span",{className:"text-[10px] text-slate-400 font-semibold uppercase tracking-wider",children:"Powered by Google"})})]})]})]})},e8=({isOpen:t,onClose:e,onNewChat:n,user:r,onLogout:s,onOpenLogin:i,language:o,tools:a,toolStatuses:l,onSelectTool:c,onExit:d,chatHistory:m=[],onLoadSession:g,currentSessionId:y})=>{const w=yu[o],[x,_]=F.useState(!1),v=x?a:a.slice(0,3),E=F.useMemo(()=>{const N={};return[...m].sort((U,k)=>k.timestamp-U.timestamp).forEach(U=>{const k=U.sessionId||"legacy";N[k]||(N[k]=[]),N[k].push(U)}),Object.keys(N).map(U=>{var M,V;const k=N[U],R=k.slice().reverse().find(P=>P.role==="user"),A=k[0];return{id:U,title:R?R.text:(V=(M=k[0])==null?void 0:M.attachments)!=null&&V.length?"Image Analysis":"Percakapan Baru",timestamp:A.timestamp,preview:A.text}}).sort((U,k)=>k.timestamp-U.timestamp)},[m]),T=(N,L)=>{L?qe(w.toolLockedMsg):(c(N),window.innerWidth<768&&e())};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),u.jsx("div",{className:`
          fixed md:relative top-0 left-0 bottom-0 z-50 h-full
          bg-slate-900 text-slate-200
          overflow-hidden flex flex-col
          transition-[width,transform,opacity] duration-300 ease-in-out
          w-[280px]
          ${t?"translate-x-0 shadow-2xl":"-translate-x-full shadow-none"}
          md:transform-none md:shadow-none md:top-auto md:left-auto md:bottom-auto
          ${t?"md:w-[260px]":"md:w-0"}
        `,children:u.jsxs("div",{className:"w-[280px] md:w-[260px] h-full flex flex-col border-r border-slate-800 bg-slate-900",children:[u.jsxs("div",{className:"p-4 flex items-center justify-between h-14 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra Logo",className:"w-8 h-8 object-contain"}),u.jsx("span",{className:"font-bold text-white tracking-wide",children:"Fanra"})]}),u.jsx("button",{onClick:e,className:"md:hidden text-slate-400 hover:text-white p-1",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-3 py-2 custom-scrollbar space-y-4",children:[u.jsxs("button",{onClick:()=>{n(),window.innerWidth<768&&e()},className:"w-full flex items-center gap-3 bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-xl transition-all active:scale-95 border border-slate-700 shadow-sm group",children:[u.jsx("span",{className:"text-xl font-light group-hover:scale-110 transition-transform",children:"+"}),u.jsx("span",{className:"text-sm font-medium",children:w.newChat})]}),u.jsx("div",{className:"h-px bg-slate-800/50 mx-2"}),u.jsxs("div",{children:[u.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Creative Tools"}),u.jsxs("div",{className:"space-y-1",children:[v.map(N=>{const L=l[N.id]!==!1,U=(r==null?void 0:r.isAdmin)||!1,k=!L&&!U;return u.jsxs("button",{onClick:()=>T(N,k),className:`w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all border border-transparent group relative
                                        ${k?"opacity-70 hover:bg-slate-800/50 cursor-pointer":"hover:bg-slate-800 hover:border-slate-700/50 active:scale-95 cursor-pointer"}
                                    `,children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 ${k?"bg-slate-800 grayscale":N.color.replace("bg-","bg-opacity-90 bg-")} shadow-sm`,children:u.jsx("div",{className:"scale-75 text-slate-800",children:N.icon})}),u.jsx("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:u.jsx("span",{className:`block text-xs font-bold truncate ${k?"text-slate-500":"text-slate-200 group-hover:text-white"}`,children:w[N.nameKey]})}),k&&u.jsx("div",{className:"absolute right-2",children:u.jsx(ET,{className:"w-3 h-3 text-slate-500"})})]},N.id)}),u.jsxs("button",{onClick:()=>_(!x),className:"w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all hover:bg-slate-800 border border-transparent border-dashed hover:border-slate-700/50 group",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center shrink-0 bg-slate-800 text-slate-400",children:u.jsx(Ig,{className:"w-4 h-4"})}),u.jsx("span",{className:"text-xs font-medium text-slate-400 group-hover:text-white",children:x?w.lessTools:w.moreTools})]})]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase mb-2 mt-4",children:w.historyHeader}),u.jsx("div",{className:"space-y-1",children:r?E.length>0?E.map(N=>u.jsxs("button",{onClick:()=>{g(N.id),window.innerWidth<768&&e()},className:`w-full text-left px-4 py-2.5 rounded-lg truncate transition-all group border ${y===N.id?"bg-slate-800 text-white border-slate-700":"text-slate-400 hover:bg-slate-800/50 hover:text-slate-200 border-transparent"}`,children:[u.jsx("div",{className:"text-xs font-medium truncate",children:N.title}),u.jsxs("div",{className:"text-[9px] text-slate-600 mt-0.5 group-hover:text-slate-500",children:[new Date(N.timestamp).toLocaleDateString(),"  ",new Date(N.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},N.id)):u.jsx("p",{className:"px-4 py-2 text-xs text-slate-600 italic text-center border border-slate-800/50 rounded-lg",children:"Belum ada riwayat chat."}):u.jsx("p",{className:"px-4 py-2 text-xs text-slate-600 italic text-center",children:"Login untuk melihat riwayat."})})]})]}),u.jsxs("div",{className:"p-4 border-t border-slate-800 bg-slate-900 shrink-0",children:[d&&u.jsxs("button",{onClick:d,className:"w-full mb-4 py-2.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-xl font-bold text-xs uppercase tracking-wider transition-all flex items-center justify-center gap-2 border border-slate-700/50 hover:border-slate-600 group",children:[u.jsx(us,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Exit Studio"]}),r?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.photoURL?u.jsx("img",{src:r.photoURL,alt:r.name,className:"w-8 h-8 rounded-full object-cover border border-slate-700"}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500 flex items-center justify-center text-xs font-bold text-white shrink-0",children:r.name.charAt(0).toUpperCase()}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-white truncate",title:r.name,children:r.name.length>20?r.name.substring(0,20)+"...":r.name}),u.jsx("p",{className:"text-xs text-slate-500 truncate",children:r.school})]})]}),u.jsxs("button",{onClick:s,className:"w-full py-2 text-xs font-medium text-slate-400 hover:text-red-400 hover:bg-red-900/10 rounded-lg transition-colors flex items-center justify-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),w.logOut]})]}):u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-xs text-slate-400 mb-3",children:w.loginToSave}),u.jsxs("button",{onClick:i,className:"w-full py-2.5 bg-white text-slate-900 font-bold rounded-xl text-sm hover:bg-slate-200 transition-colors shadow-lg active:scale-95 flex items-center justify-center gap-2",children:[u.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"G",className:"w-4 h-4"}),w.loginBtn]})]})]})]})})]})};class t8{constructor(e,n,r,s,i){this.x=e,this.y=n,this.vx=0,this.vy=0,this.radius=s,this.color=r,this.friction=.92,this.ease=i,this.dx=(Math.random()-.5)*80,this.dy=(Math.random()-.5)*80,this.angle=Math.random()*Math.PI*2,this.angleSpeed=.02+Math.random()*.03,this.wobbleRadius=15+Math.random()*25}update(e,n,r){if(r)this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction;else{this.angle+=this.angleSpeed;const s=Math.cos(this.angle)*this.wobbleRadius,i=Math.sin(this.angle)*this.wobbleRadius,o=e+this.dx+s,a=n+this.dy+i;this.x+=(o-this.x)*this.ease,this.y+=(a-this.y)*this.ease,this.vx=0,this.vy=0}}shatter(){const e=Math.random()*Math.PI*2,n=Math.random()*30+15;this.vx=Math.cos(e)*n,this.vy=Math.sin(e)*n}draw(e){e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2),e.fillStyle=this.color,e.fill()}}const n8=({onEnter:t})=>{const[e,n]=F.useState(!1),[r,s]=F.useState(!1),i=F.useRef(null),o=F.useRef(!1),a=F.useRef({x:window.innerWidth/2,y:window.innerHeight/2}),l=F.useRef([]);F.useEffect(()=>{setTimeout(()=>s(!0),300);const m=i.current;if(!m)return;const g=m.getContext("2d");if(!g)return;const y=()=>{m.width=window.innerWidth,m.height=window.innerHeight};window.addEventListener("resize",y),y();const w=T=>{a.current={x:T.clientX,y:T.clientY}};window.addEventListener("mousemove",w);const x=["#0f172a","#1e293b","#312e81","#1e1b4b","#4c1d95","#2563eb"],_=[];for(let T=0;T<15;T++){const N=Math.random()*30+20,L=x[Math.floor(Math.random()*x.length)],U=Math.random()*.08+.03;_.push(new t8(m.width/2,m.height/2,L,N,U))}l.current=_;let v;const E=()=>{g.clearRect(0,0,m.width,m.height),l.current.forEach(T=>{T.update(a.current.x,a.current.y,o.current),T.draw(g)}),v=requestAnimationFrame(E)};return E(),()=>{window.removeEventListener("resize",y),window.removeEventListener("mousemove",w),cancelAnimationFrame(v)}},[]);const c=()=>{o.current||(o.current=!0,l.current.forEach(m=>m.shatter()),setTimeout(()=>{o.current=!1},1500))},d=()=>{n(!0),setTimeout(()=>{t()},900)};return u.jsxs("div",{className:`fixed inset-0 z-[999] bg-white flex flex-col items-center justify-center overflow-hidden transition-transform duration-[900ms] cubic-bezier(0.76, 0, 0.24, 1) ${e?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none shadow-none"}`,onDoubleClick:c,children:[u.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none filter blur-[60px] opacity-80",children:u.jsx("canvas",{ref:i,className:"w-full h-full"})}),u.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.4] pointer-events-none mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),u.jsxs("div",{className:`relative z-10 flex flex-col items-center max-w-lg w-full text-center px-6 transition-all duration-1000 ease-out transform select-none ${r?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,children:[u.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-slate-900 mb-2 tracking-tighter",children:["FANRA",u.jsx("span",{className:"text-blue-600",children:"."})]}),u.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-400 mb-8 tracking-widest uppercase",children:"AI Studio"}),u.jsxs("p",{className:"text-slate-500 text-sm md:text-base font-medium leading-relaxed mb-16 max-w-xs mx-auto",children:["Ruang imajinasi tanpa batas. ",u.jsx("br",{}),u.jsx("span",{className:"text-slate-800",children:"Edit, Ciptakan, dan Berdiskusi."})]}),u.jsxs("button",{onClick:d,className:"group flex flex-col items-center gap-4 transition-all outline-none cursor-pointer",children:[u.jsx("div",{className:"w-16 h-16 rounded-full border border-slate-200 bg-white/80 backdrop-blur-sm flex items-center justify-center shadow-lg transition-all duration-500 group-hover:scale-110 group-hover:bg-white group-hover:border-slate-300 group-active:scale-95 group-hover:shadow-xl",children:u.jsx(vr,{className:"w-6 h-6 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-600 transition-colors duration-300",children:"Open Studio"})]})]})]})},r8="3JEZ69gonQmxU83WxzidFCFf",s8="AIzaSyCV_HdKiAs1y5-F5eSGxTFUZ1vAGUOymQg",i8="sb_publishable_ikw-BNV8Wu3qhNPuSti8Rg_7XmPMWqV",o8="",xc=[{id:_n.BACKGROUND_REMOVER,nameKey:"toolBgRemove",descKey:"toolBgRemoveDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/593/593398.png",className:"w-8 h-8 object-contain",alt:"Hapus Background"}),color:"bg-blue-50",model:"gemini-2.5-flash-image",cost:1},{id:_n.HD_UPSCALE,nameKey:"toolUpscale",descKey:"toolUpscaleDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/17558/17558323.png",className:"w-8 h-8 object-contain",alt:"HD Upscale"}),color:"bg-amber-50",model:"gemini-2.5-flash-image",cost:3},{id:_n.CREATIVE_REMIX,nameKey:"toolRemix",descKey:"toolRemixDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/17142/17142644.png",className:"w-8 h-8 object-contain",alt:"Creative Remix"}),color:"bg-purple-50",model:"gemini-2.5-flash-image",cost:3},{id:_n.COLORIZE,nameKey:"toolColorize",descKey:"toolColorizeDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/15109/15109276.png",className:"w-8 h-8 object-contain",alt:"Warnai Foto"}),color:"bg-pink-50",model:"gemini-2.5-flash-image",cost:2},{id:_n.SKETCH_TO_REAL,nameKey:"toolSketch",descKey:"toolSketchDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/9798/9798973.png",className:"w-8 h-8 object-contain",alt:"Sketsa ke Nyata"}),color:"bg-emerald-50",model:"gemini-2.5-flash-image",cost:3}],a8=({language:t,code:e})=>{const[n,r]=F.useState(!1),s=()=>{navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)},i=o=>o.split(`
`).map((a,l)=>u.jsxs("div",{className:"table-row",children:[u.jsx("span",{className:"table-cell select-none text-slate-600 text-right pr-4 w-8 text-xs",children:l+1}),u.jsx("span",{className:"table-cell",children:a.split(/([<>{}"']|class|const|let|var|function|return|import|export)/g).map((c,d)=>c.startsWith("<")||c.startsWith(">")?u.jsx("span",{className:"text-blue-400",children:c},d):c.startsWith('"')||c.startsWith("'")?u.jsx("span",{className:"text-green-400",children:c},d):["const","let","var","function","return","import","export","class"].includes(c)?u.jsx("span",{className:"text-purple-400 font-bold",children:c},d):["=","{","}","(",")",";"].includes(c)?u.jsx("span",{className:"text-slate-400",children:c},d):u.jsx("span",{className:"text-slate-200",children:c},d))})]},l));return u.jsxs("div",{className:"my-4 rounded-xl overflow-hidden border border-slate-700/50 shadow-lg bg-[#1e1e1e] w-full max-w-full group",children:[u.jsxs("div",{className:"bg-[#2d2d2d] px-4 py-2 flex items-center justify-between border-b border-white/5",children:[u.jsx("span",{className:"text-xs font-mono text-slate-400 lowercase font-bold",children:t||"code"}),u.jsx("button",{onClick:s,className:"flex items-center gap-1.5 text-[10px] font-medium text-slate-400 hover:text-white bg-white/5 hover:bg-white/10 px-2 py-1 rounded transition-all",children:n?u.jsxs(u.Fragment,{children:[u.jsx(cs,{className:"w-3 h-3 text-green-400"})," Copied"]}):u.jsxs(u.Fragment,{children:[u.jsx(_T,{className:"w-3 h-3"})," Copy Code"]})})]}),u.jsx("div",{className:"p-4 overflow-x-auto custom-scrollbar",children:u.jsx("pre",{className:"font-mono text-sm leading-relaxed whitespace-pre font-normal",style:{tabSize:2},children:u.jsx("code",{className:"table w-full border-collapse",children:i(e)})})})]})},l8=({isOpen:t,onClose:e})=>t?u.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-6 shadow-2xl animate-fade-in-up border border-slate-100",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center",children:u.jsx(Ml,{className:"w-5 h-5"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Cara Dapet API Key Gemini"})]}),u.jsxs("ol",{className:"space-y-4 text-sm text-slate-600 mb-6 list-decimal list-inside marker:font-bold marker:text-blue-600",children:[u.jsxs("li",{className:"pl-2",children:["Buka website ",u.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-bold hover:underline",children:"Google AI Studio"}),"."]}),u.jsx("li",{className:"pl-2",children:"Login pakai akun Google kamu."}),u.jsxs("li",{className:"pl-2",children:["Klik tombol biru besar bertuliskan ",u.jsx("b",{children:'"Create API Key"'}),"."]}),u.jsxs("li",{className:"pl-2",children:["Pilih ",u.jsx("b",{children:'"Create API key in new project"'}),"."]}),u.jsxs("li",{className:"pl-2",children:["Salin (Copy) kode yang muncul, lalu tempel di menu ",u.jsx("b",{children:"Pengaturan"})," aplikasi ini."]})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-xs text-slate-500 mb-6",children:[" ",u.jsx("b",{children:"Tips:"})," API Key ini gratis (Free Tier). Jangan kasih tau kode ini ke orang lain ya."]}),u.jsx("button",{onClick:e,className:"w-full py-3 bg-primary text-white rounded-xl font-bold shadow-lg shadow-primary/20 hover:bg-slate-800 transition-all active:scale-95",children:"Oke, Siap!"})]})}):null,$_=({text:t,block:e=!1})=>{const[n,r]=F.useState(t);F.useEffect(()=>{if(window.katex)try{const i=window.katex.renderToString(t,{throwOnError:!1,displayMode:e});r(i)}catch{r(t)}},[t,e]);const s=()=>{navigator.clipboard.writeText(t),qe("Rumus LaTeX disalin! ")};return window.katex?u.jsx("span",{dangerouslySetInnerHTML:{__html:n},className:`${e?"block my-2 overflow-x-auto overflow-y-hidden py-1":""} cursor-pointer hover:bg-slate-100/50 rounded transition-colors`,title:"Klik 2x untuk salin rumus",onDoubleClick:s}):u.jsx("code",{children:t})},q_=t=>{const e=[],n=i=>{const o=`___TOKEN_${e.length}___`;return e.push({id:o,node:i}),o};let r=t.replace(/```([\w-]*)\n([\s\S]*?)```/g,(i,o,a)=>n(u.jsx(a8,{language:o,code:a})));return r=r.replace(/(\$\$[\s\S]*?\$\$|\\\[[\s\S]*?\\\])/g,i=>{const o=(i.startsWith("$$"),i.slice(2,-2));return n(u.jsx($_,{text:o,block:!0}))}),r=r.replace(new RegExp("(\\\\\\([\\s\\S]*?\\\\\\)|(?<!\\\\)\\$(?:[^$\\n]+?)(?<!\\\\)\\$)","g"),i=>{const o=i.startsWith("\\(")?i.slice(2,-2):i.slice(1,-1);return n(u.jsx($_,{text:o,block:!1}))}),r.split(`
`).map((i,o)=>i.trim().startsWith("### ")?u.jsx("h3",{className:"text-base font-bold text-slate-900 mt-3 mb-1",children:zf(i.replace(/^###\s+/,""),e)},o):i.trim().startsWith("## ")?u.jsx("h2",{className:"text-lg font-bold text-slate-900 mt-4 mb-2",children:zf(i.replace(/^##\s+/,""),e)},o):i.trim()==="***"||i.trim()==="---"?u.jsx("div",{className:"h-px bg-slate-200 my-4 w-full"},o):i.trim()===""?u.jsx("div",{className:"h-2"},o):u.jsx("div",{className:"block leading-relaxed",children:zf(i,e)},o))},zf=(t,e)=>t.split(/(\*\*[\s\S]*?\*\*)/g).map((r,s)=>{if(r.startsWith("**")&&r.endsWith("**")){const i=r.slice(2,-2);return u.jsx("strong",{className:"font-bold text-slate-900",children:W_(i,e)},s)}return u.jsx(hl.Fragment,{children:W_(r,e)},s)}),W_=(t,e)=>t.split(new RegExp("(?<!\\*)\\*([^*]+?)\\*(?!\\*)","g")).map((r,s)=>s%2===1?u.jsx("em",{className:"italic text-slate-800",children:K_(r,e)},s):K_(r,e)),K_=(t,e)=>t.split(/(___TOKEN_\d+___)/g).map((r,s)=>{const i=e.find(l=>l.id===r);if(i)return u.jsx(hl.Fragment,{children:i.node},s);const a=/\[(.*?)\]\((.*?)\)/g.exec(r);if(a){const l=r.substring(0,a.index),c=r.substring(a.index+a[0].length);return u.jsxs(hl.Fragment,{children:[l,u.jsx("a",{href:a[2],target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline font-medium",children:a[1]}),c]},s)}return r});function u8({onExit:t,isAdmin:e=!1}){const[n,r]=F.useState(!0),[s,i]=F.useState("id"),[o,a]=F.useState(null),[l,c]=F.useState(null),[d,m]=F.useState(9999),g=(o==null?void 0:o.isAdmin)||e,[y,w]=F.useState(!1),[x,_]=F.useState(!1),[v,E]=F.useState(!1),[T,N]=F.useState(!0),[L,U]=F.useState(null),[k,R]=F.useState(null),[A,M]=F.useState(null),[V,P]=F.useState(""),[D,I]=F.useState({isProcessing:!1,progress:"",error:null}),[$,ce]=F.useState({}),[te,ne]=F.useState(Date.now().toString()),[Q,ae]=F.useState([]),[K,H]=F.useState([]),[he,ee]=F.useState(""),[X,Ie]=F.useState([]),[Be,ke]=F.useState(null),[je,Oe]=F.useState(!1),[He,lt]=F.useState(!1),[ze,C]=F.useState(null),se=F.useRef(null),Z=F.useRef(null),O=F.useRef(null),B=F.useRef(null),[q,ie]=F.useState(!1),[ue,Y]=F.useState(""),[oe,ye]=F.useState([]),[fe,xe]=F.useState(""),[Ce,Pe]=F.useState(""),[gt,tn]=F.useState(""),[At,z]=F.useState(""),[G,me]=F.useState(""),[ve,Ae]=F.useState(!1),[rt,Re]=F.useState(!0),[_t,It]=F.useState(!0),[Nt,nn]=F.useState(!0),[Rt,qt]=F.useState(!1),[ar,Jn]=F.useState(!1),[yn,Gr]=F.useState(!1),[xu,Ot]=F.useState(!1),[wu,Hr]=F.useState(!1),[li,ya]=F.useState(null),it=yu[s];F.useEffect(()=>{const W=localStorage.getItem("remove_bg_key");W&&Y(W);const we=localStorage.getItem("google_search_key");we&&xe(we);const Ne=localStorage.getItem("google_search_cx");Ne&&Pe(Ne);const Ve=localStorage.getItem("open_router_key");Ve&&tn(Ve);const Ye=localStorage.getItem("hugging_face_key");Ye&&z(Ye);const st=localStorage.getItem("groq_key");st&&me(st),localStorage.getItem("fanra_know_mode")==="true"&&Ae(!0),Re(!0),localStorage.setItem("fanra_wiki_mode","true"),localStorage.getItem("fanra_rb_enabled")==="false"&&It(!1),localStorage.getItem("fanra_sb_enabled")==="false"&&nn(!1),(async()=>{const Es={};for(const Ar of xc){const ur=`tool_status_${Ar.id}`,An=await R0(ur);Es[Ar.id]=An!=="false"}ce(Es)})(),Cr()},[]),F.useEffect(()=>{yn&&(oe.some(W=>W.isActive)||ve)&&Gr(!1)},[oe,ve]),F.useEffect(()=>{var W;(W=Z.current)==null||W.scrollIntoView({behavior:"smooth"})},[K,D.isProcessing,X]),F.useEffect(()=>{l&&(z3(l).then(W=>{ae(W);const we=W.filter(Ne=>Ne.sessionId===te);H(we)}),U3(l).then(W=>{ye(W)})),Cr()},[l,te]),F.useEffect(()=>{if(B.current){B.current.style.height="auto";const W=Math.min(B.current.scrollHeight,128);B.current.style.height=`${Math.max(42,W)}px`}},[he,X]);const bs=()=>ue||r8,_u=()=>{const W=oe.filter(we=>we.isActive!==!1).map(we=>we.key);return W.length===0?[s8]:W},Oh=W=>{Y(W),localStorage.setItem("remove_bg_key",W)},Yi=(W,we)=>{xe(W),Pe(we),localStorage.setItem("google_search_key",W),localStorage.setItem("google_search_cx",we)},bu=W=>{tn(W),localStorage.setItem("open_router_key",W)},va=W=>{z(W),localStorage.setItem("hugging_face_key",W)},Qi=W=>{me(W),localStorage.setItem("groq_key",W)},kr=async(W,we)=>{const Ne={key:W,addedAt:Date.now(),isShared:we,isActive:!0},Ve=[...oe,Ne];ye(Ve),l&&await rw(l,Ve)},Eu=async W=>{const we=oe.filter(Ne=>Ne.key!==W);ye(we),l&&await O3(l,W,we)},Tu=async(W,we)=>{const Ne=oe.map(Ve=>Ve.key===W?{...Ve,isActive:we}:Ve);ye(Ne),l&&await rw(l,Ne)},xa=W=>{Ae(W),localStorage.setItem("fanra_know_mode",W.toString())},wa=W=>{Re(!0),localStorage.setItem("fanra_wiki_mode","true")},Iu=W=>{It(W),localStorage.setItem("fanra_rb_enabled",W.toString())},Su=W=>{nn(W),localStorage.setItem("fanra_sb_enabled",W.toString())},Bh=async()=>{try{window.aistudio&&await window.aistudio.openSelectKey()}catch(W){console.error(W)}},Cr=()=>{if(oe.length>0){qt(!1),Jn(!1);return}const W=new Date().toISOString().split("T")[0],we=o?l||"user":"guest",Ne=`fanra_limit_${W}_${we}_chat`,Ve=`fanra_limit_${W}_${we}_image`,Ye=parseInt(localStorage.getItem(Ne)||"0"),st=parseInt(localStorage.getItem(Ve)||"0"),dt=o?10:3,Cn=o?3:1;qt(Ye>=dt),Jn(st>=Cn)},Xi=W=>{if(oe.length>0)return!0;const Ve=`fanra_limit_${new Date().toISOString().split("T")[0]}_${o?l||"user":"guest"}_${W}`,Ye=parseInt(localStorage.getItem(Ve)||"0");let st=0;return o?st=W==="chat"?10:3:st=W==="chat"?3:1,Ye>=st?(Cr(),!1):(localStorage.setItem(Ve,(Ye+1).toString()),Cr(),!0)},Zi=(W,we,Ne,Ve)=>{R({data:W,mimeType:we,width:Ne,height:Ve})},ui=(W,we,Ne)=>{a(W),c(we),w(!1)},Fn=()=>{R(null),M(null),P(""),U(null),I({isProcessing:!1,progress:"",error:null}),Ie([]),ya(null)},_a=async()=>{await V3(),a(null),c(null),ye([]),Fn(),ae([]),H([]),Gr(!1),Cr()},ku=()=>i(W=>W==="id"?"en":"id"),Cu=(W,we)=>{if(W)try{navigator.clipboard.writeText(W).then(()=>{ke(we),setTimeout(()=>ke(null),2e3)})}catch{ke(we),setTimeout(()=>ke(null),2e3)}},Au=W=>{C(we=>we===W?null:W)},Nu=async(W,we)=>{if(we.stopPropagation(),!g)return;const Ne=!$[W];ce(Ve=>({...Ve,[W]:Ne}));try{await P0(`tool_status_${W}`,Ne.toString())}catch{console.error("Failed to update tool status"),ce(Ye=>({...Ye,[W]:!Ne}))}},ba=(W,we)=>{we?qe(it.toolLockedMsg):U(W)},Ea=W=>{W.preventDefault(),W.stopPropagation(),Oe(!0)},Ru=W=>{W.preventDefault(),W.stopPropagation(),Oe(!1)},Pu=W=>{const we=new FileReader;we.onloadend=()=>{const Ne=we.result,Ve=new Image;Ve.onload=()=>{Zi(Ne.split(",")[1],W.type,Ve.width,Ve.height)},Ve.src=Ne},we.readAsDataURL(W)},Mu=W=>{if(W.length+X.length>3){alert("Maksimal 3 gambar sekaligus.");return}W.forEach(we=>{if(!we.type.startsWith("image/"))return;const Ne=new FileReader;Ne.onloadend=()=>{const Ve=Ne.result.split(",")[1];Ie(Ye=>[...Ye,{data:Ve,mimeType:we.type,name:we.name}])},Ne.readAsDataURL(we)})},zh=W=>{W.preventDefault(),W.stopPropagation(),Oe(!1);const we=Array.from(W.dataTransfer.files);if(we.length!==0)if(L){const Ne=we[0];Ne.type.startsWith("image/")&&Pu(Ne)}else Mu(we)},Ta=()=>{const W=Date.now().toString();ne(W),H([]),Ie([]),Fn(),_(!1)},Du=W=>{ne(W);const we=Q.filter(Ne=>Ne.sessionId===W);H(we),_(!1),Fn()},Lu=()=>{A?(ya("back"),Hr(!0)):Fn()},$r=()=>{li==="back"&&Fn(),Hr(!1),ya(null)},lr=()=>{se.current&&(se.current.abort(),se.current=null,I({isProcessing:!1,progress:"",error:"Stopped by user."}))},ci=async W=>{var Ye,st;if(W==null||W.preventDefault(),!he.trim()&&X.length===0||yn||!Xi("chat")||X.length>0&&!Xi("image"))return;const we={id:Date.now().toString(),sessionId:te,role:"user",text:he,timestamp:Date.now(),attachments:[...X]},Ne={id:"temp-thinking",sessionId:te,role:"model",text:"",timestamp:Date.now()+1},Ve=[...K,we,Ne];H(Ve),ae(dt=>[...dt,we,Ne]),ee(""),Ie([]),I({isProcessing:!0,progress:"AI Thinking...",error:null}),l&&sw(l,we);try{se.current=new AbortController;const dt=fe&&Ce?{apiKey:fe,cx:Ce}:void 0,Cn=_u(),Vn=K,rn=await q9(we.text,Cn,Vn,s,we.attachments||[],Ar=>{H(ur=>ur.map(An=>An.id==="temp-thinking"?{...An,text:Ar}:An))},ve,rt,dt,se.current.signal,gt,At,G),Es={id:(Date.now()+2).toString(),sessionId:te,role:"model",text:rn.text,timestamp:Date.now(),source:rn.source};H(Ar=>Ar.map(ur=>ur.id==="temp-thinking"?Es:ur)),ae(Ar=>Ar.map(ur=>ur.id==="temp-thinking"?Es:ur)),l&&sw(l,Es)}catch(dt){if(dt.message==="Request cancelled by user")H(Cn=>Cn.filter(Vn=>Vn.id!=="temp-thinking")),ae(Cn=>Cn.filter(Vn=>Vn.id!=="temp-thinking"));else{console.error(dt);const Cn={id:(Date.now()+2).toString(),sessionId:te,role:"model",text:it.chatFallbackError+(dt.message?` (${dt.message})`:""),timestamp:Date.now()};H(Vn=>Vn.map(rn=>rn.id==="temp-thinking"?Cn:rn)),ae(Vn=>Vn.map(rn=>rn.id==="temp-thinking"?Cn:rn)),((Ye=dt.message)!=null&&Ye.includes("429")||(st=dt.message)!=null&&st.includes("quota"))&&Gr(!0)}}finally{I({isProcessing:!1,progress:"",error:null}),se.current=null}},eo=W=>{Ie(we=>we.filter((Ne,Ve)=>Ve!==W))},Ia=()=>{var W;ar||(W=O.current)==null||W.click()},ot=W=>{if(W.target.files){const we=Array.from(W.target.files);Mu(we)}W.target.value=""},to=o||{name:"Guest"},di=v?xc:xc.slice(0,3),hi=async()=>{if(!k||!L||!Xi("image"))return;I({isProcessing:!0,progress:it.initializing,error:null}),M(null);const W=L.id===_n.BACKGROUND_REMOVER,we=bs(),Ne=_u();try{let Ve="",Ye=!1;if(W&&we&&_t&&!Ye)try{I(dt=>({...dt,progress:it.processingStandard})),Ve=await J9(k.data,we),Ye=!0}catch{console.warn("Standard Engine failed")}if(!Ye&&(W||!W)&&!Ye&&Ne.length>0)try{I(dt=>({...dt,progress:it.processingAI})),Ve=await V9({image:k,tool:L.id,prompt:L.id===_n.CREATIVE_REMIX?V:void 0,apiKeys:Ne}),W&&(I(dt=>({...dt,progress:it.refining})),Ve=await W9(Ve)),Ye=!0}catch(dt){console.warn("Gemini failed",dt)}if(!Ye||!Ve)throw new Error("No available API Keys or Services found/enabled.");M(Ve),I({isProcessing:!1,progress:"",error:null})}catch(Ve){console.error("Execution Error:",Ve);let Ye=it.serviceBusy;const st=(Ve.message||"").toLowerCase();st.includes("network")||st.includes("fetch")?Ye=it.networkError:st.includes("memory")||st.includes("oom")?Ye=it.memoryError:(st.includes("no available api")||st.includes("enabled"))&&(Ye=it.insufficientCredits),I({isProcessing:!1,progress:"",error:Ye})}},ju=Rt&&!yn&&!D.isProcessing,Fu=/(\$\$|\\\[|\\\(|\$)/.test(he);return u.jsxs("div",{className:"flex h-[100dvh] bg-white font-sans text-primary overflow-hidden relative",onDragOver:Ea,onDragLeave:Ru,onDrop:zh,children:[n&&u.jsx(n8,{onEnter:()=>r(!1)}),je&&u.jsx("div",{className:"absolute inset-0 z-[100] bg-primary/10 backdrop-blur-sm border-4 border-primary border-dashed m-4 rounded-3xl flex items-center justify-center pointer-events-none animate-fade-in",children:u.jsxs("div",{className:"bg-white px-8 py-4 rounded-2xl shadow-xl flex items-center gap-3",children:[u.jsx(Pv,{className:"w-6 h-6 text-primary"}),u.jsx("span",{className:"font-bold text-lg text-primary",children:"Drop files to send"})]})}),y&&u.jsx("div",{className:"fixed inset-0 z-[60] bg-white",children:u.jsx(Z9,{onLogin:ui,language:s,onToggleLanguage:ku,onClose:()=>w(!1)})}),u.jsx(l8,{isOpen:xu,onClose:()=>Ot(!1)}),u.jsx(X9,{isOpen:q,onClose:()=>ie(!1),removeBgKey:ue,onSaveRemoveBgKey:Oh,storedApiKeys:oe,onAddApiKey:kr,onDeleteApiKey:Eu,onToggleApiKey:Tu,onSelectGoogleKey:Bh,knowledgeMode:ve,onToggleKnowledgeMode:xa,wikiEnabled:rt,onToggleWiki:wa,removeBgEnabled:_t,onToggleRemoveBg:Iu,supabaseEnabled:Nt,onToggleSupabase:Su,googleSearchKey:fe,googleSearchCx:Ce,onSaveGoogleSearch:Yi,openRouterKey:gt,onSaveOpenRouterKey:bu,huggingFaceKey:At,onSaveHuggingFaceKey:va,groqKey:G,onSaveGroqKey:Qi,language:s}),u.jsx(gu,{isOpen:wu,title:it.confirmTitle,description:it.confirmDesc,confirmText:it.yesChange,onConfirm:$r,onCancel:()=>Hr(!1)}),u.jsx(e8,{isOpen:x,onClose:()=>_(!1),onNewChat:Ta,user:o,onLogout:_a,onOpenLogin:()=>w(!0),language:s,tools:xc,toolStatuses:$,onSelectTool:U,onExit:t,chatHistory:Q,onLoadSession:Du,currentSessionId:te}),u.jsxs("div",{className:"flex-1 flex flex-col h-full relative w-full overflow-hidden bg-slate-50/50",children:[u.jsx("header",{className:"absolute top-0 left-0 right-0 z-30 p-4 pointer-events-none",children:u.jsxs("div",{className:"max-w-5xl mx-auto bg-white/80 backdrop-blur-xl border border-white/40 shadow-lg shadow-slate-200/50 rounded-2xl px-4 py-3 flex items-center justify-between pointer-events-auto",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>_(!x),className:"p-2 rounded-xl hover:bg-slate-100 text-slate-600 transition-colors",children:u.jsx(wT,{className:"w-5 h-5"})}),u.jsx("div",{className:"font-bold text-lg tracking-tight bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent hidden md:block",children:"Fanra Studio"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{onClick:ku,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-full text-xs font-bold text-slate-700 transition-all hover:shadow-sm active:scale-95",children:[u.jsx("img",{src:s==="id"?"https://cdn-icons-png.flaticon.com/128/11654/11654463.png":"https://cdn-icons-png.flaticon.com/128/9906/9906532.png",alt:"Lang",className:"w-4 h-4 object-contain"}),u.jsx("span",{children:s.toUpperCase()})]}),u.jsxs("button",{onClick:()=>ie(!0),className:"p-2 text-slate-400 hover:text-primary hover:bg-slate-100 rounded-full transition-all relative",children:[u.jsx(Up,{className:"w-5 h-5"}),yn&&u.jsx("span",{className:"absolute top-1.5 right-1.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]})]})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto pt-24 px-4 scroll-smooth custom-scrollbar",children:u.jsxs("div",{className:"max-w-3xl mx-auto min-h-full flex flex-col pb-4",children:[K.length===0&&!L&&u.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center py-10 animate-fade-in-up",children:[u.jsxs("div",{className:"mb-8 text-center",children:[u.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 mb-3 tracking-tight",children:[it.heroTitle," ",to.name]}),u.jsx("p",{className:"text-slate-500 text-lg",children:it.heroSubtitle})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-5 w-full max-w-2xl px-2",children:[di.map(W=>{const we=$[W.id]!==!1,Ne=!we&&!g;return u.jsxs("button",{onClick:()=>ba(W,Ne),className:`relative flex flex-col items-center text-center p-4 md:p-6 bg-white border rounded-2xl shadow-sm transition-all duration-300 group h-full ${Ne?"border-slate-100 opacity-80 bg-slate-50 hover:bg-slate-100 cursor-pointer":"hover:border-primary/20 hover:shadow-xl hover:-translate-y-1 border-slate-100 cursor-pointer"}`,children:[g&&u.jsx("div",{className:"absolute top-2 right-2 z-20",onClick:Ve=>Nu(W.id,Ve),children:u.jsx("div",{className:`w-8 h-4 rounded-full transition-colors flex items-center p-0.5 ${we?"bg-green-500":"bg-slate-300"}`,children:u.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transform transition-transform ${we?"translate-x-4":"translate-x-0"}`})})}),Ne&&u.jsx("div",{className:"absolute top-2 right-2 z-10",children:u.jsx("div",{className:"bg-slate-100 p-1.5 rounded-full shadow-sm",children:u.jsx(ET,{className:"w-3 h-3 text-slate-400"})})}),u.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 ${Ne?"bg-slate-200 grayscale":W.color} rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110 shadow-sm`,children:W.icon}),u.jsx("span",{className:`text-xs md:text-sm font-bold leading-tight ${Ne?"text-slate-400":"text-slate-700"}`,children:it[W.nameKey]}),u.jsx("span",{className:"hidden md:block text-[10px] text-slate-400 mt-2 leading-tight",children:it[W.descKey]})]},W.id)}),u.jsxs("button",{onClick:()=>E(!v),className:`flex flex-col items-center justify-center text-center p-4 md:p-6 bg-slate-50 border border-slate-200 border-dashed rounded-2xl hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-300 group h-full ${v?"":"col-start-2"}`,children:[u.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-slate-100 text-slate-400 rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110",children:u.jsx(Ig,{className:"w-6 h-6"})}),u.jsx("span",{className:"text-xs md:text-sm font-bold text-slate-500 group-hover:text-slate-700 leading-tight",children:v?it.lessTools:it.moreTools})]})]})]}),K.map(W=>u.jsxs("div",{className:`flex flex-col mb-6 animate-fade-in ${W.role==="user"?"items-end":"items-start"}`,children:[W.attachments&&W.attachments.length>0&&u.jsx("div",{className:`flex flex-wrap gap-2 mb-2 max-w-[85%] ${W.role==="user"?"justify-end":"justify-start"}`,children:W.attachments.map((we,Ne)=>u.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200/50 shadow-sm transition-transform hover:scale-[1.02]",children:u.jsx("img",{src:`data:${we.mimeType};base64,${we.data}`,alt:we.name,className:"h-32 w-auto object-cover md:h-48 rounded-lg bg-slate-100"})},Ne))}),(W.text||W.role==="model"&&!W.text)&&u.jsxs("div",{className:`flex flex-col gap-1 max-w-lg lg:max-w-2xl ${W.role==="user"?"items-end":"items-start"}`,children:[u.jsx("div",{className:`relative px-5 py-3.5 rounded-2xl text-sm leading-relaxed shadow-sm break-words group w-full ${W.role==="user"?"bg-white text-slate-800 rounded-tr-sm border border-slate-100 shadow-slate-200/50":"bg-transparent text-slate-700 p-0 shadow-none"}`,children:W.role==="model"&&!W.text?u.jsxs("div",{className:"flex gap-1.5 h-5 items-center",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-100"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-200"})]}):q_(W.text)}),u.jsxs("div",{className:`flex items-center gap-2 mt-1 px-1 ${W.role==="user"?"justify-end":"justify-start"}`,children:[W.role==="model"&&W.source&&u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>Au(W.id),className:`p-1.5 rounded-full transition-all ${ze===W.id?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-400 hover:text-slate-600"}`,title:"Info Sumber",children:u.jsx(iN,{className:"w-3.5 h-3.5"})}),ze===W.id&&u.jsxs("div",{className:"absolute bottom-8 left-0 z-10 bg-white border border-slate-200 rounded-xl shadow-xl p-2 min-w-[140px] animate-fade-in-up origin-bottom-left flex flex-col gap-1",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider px-1",children:"Sumber Data"}),u.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg bg-slate-50 text-xs font-semibold text-slate-700",children:[W.source==="gemini"&&u.jsx(Rv,{className:"w-3.5 h-3.5"}),W.source==="openrouter"&&u.jsx("div",{className:"w-3.5 h-3.5 bg-green-500 rounded-full flex items-center justify-center text-[8px] text-white font-bold",children:"OR"}),W.source==="groq"&&u.jsx(eN,{className:"w-3.5 h-3.5 text-orange-500"}),W.source==="huggingface"&&u.jsx("div",{className:"w-3.5 h-3.5 bg-yellow-400 rounded-full flex items-center justify-center text-[8px] text-black font-bold",children:"HF"}),W.source==="wikipedia"&&u.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center font-serif font-bold text-slate-600",children:"W"}),W.source==="knowledge_base"&&u.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center text-indigo-500 font-bold",children:"DB"}),W.source==="google_search"&&u.jsx(Rv,{className:"w-3.5 h-3.5 text-orange-500"}),W.source==="weather"&&u.jsx(oN,{className:"w-3.5 h-3.5 text-blue-400"}),W.source==="country_fact"&&u.jsx(aN,{className:"w-3.5 h-3.5 text-red-500"}),u.jsx("span",{children:W.source==="gemini"?"Google Gemini":W.source==="openrouter"?"OpenRouter":W.source==="groq"?"Groq LPU":W.source==="huggingface"?"HuggingFace":W.source==="wikipedia"?"Wikipedia":W.source==="knowledge_base"?"Database":W.source==="weather"?"Open-Meteo":W.source==="country_fact"?"RestCountries":W.source==="google_search"?"Google":W.source})]})]})]}),W.text&&u.jsx("button",{onClick:()=>Cu(W.text,W.id),className:`p-1.5 rounded-full transition-all ${Be===W.id?"bg-green-100 text-green-600":"bg-white border border-slate-100 text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:Be===W.id?u.jsx(cs,{className:"w-3.5 h-3.5"}):u.jsx(_T,{className:"w-3.5 h-3.5"})})]})]})]},W.id)),L&&u.jsxs("div",{className:"w-full animate-fade-in py-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("button",{onClick:Lu,className:"text-xs flex items-center gap-1 text-slate-500 hover:text-primary px-3 py-1.5 bg-white border border-slate-200 rounded-full shadow-sm hover:shadow transition-all",children:[u.jsx(us,{className:"w-4 h-4"})," ",it.back]}),u.jsx("span",{className:"font-bold text-sm text-slate-700 bg-white px-3 py-1 rounded-full border border-slate-100 shadow-sm",children:it[L.nameKey]})]}),k?u.jsxs("div",{className:"space-y-4",children:[!A&&!D.isProcessing&&u.jsx("div",{className:"bg-slate-100 p-4 rounded-2xl border border-slate-200/60 max-w-sm mx-auto shadow-inner",children:u.jsx("img",{src:`data:${k.mimeType};base64,${k.data}`,className:"rounded-xl max-h-60 mx-auto object-contain shadow-sm"})}),L.id===_n.CREATIVE_REMIX&&!A&&u.jsx("textarea",{className:"w-full bg-white border border-slate-200 rounded-2xl p-4 text-sm focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none shadow-sm transition-all",placeholder:it.aiPromptPlaceholder,value:V,onChange:W=>P(W.target.value)}),!A&&!D.isProcessing&&u.jsx("button",{onClick:hi,disabled:L.id===_n.CREATIVE_REMIX&&!V.trim(),className:"w-full py-4 bg-primary text-white rounded-2xl font-bold shadow-xl shadow-slate-900/10 active:scale-95 transition-all hover:-translate-y-0.5",children:it.generateMagic}),(D.isProcessing||A)&&u.jsx(Q9,{originalImage:k,resultImageBase64:A,isProcessing:D.isProcessing,processingText:D.progress,onReset:Lu,language:s})]}):u.jsx(Y9,{onImageSelect:Zi,language:s})]}),D.isProcessing&&L&&u.jsx("div",{className:"flex gap-4 animate-fade-in pl-5",children:u.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce"}),u.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-100"}),u.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-200"})]})}),u.jsx("div",{ref:Z})]})}),!L&&u.jsx("div",{className:"shrink-0 w-full px-4 pb-6 pt-2 z-40 bg-slate-50/50 backdrop-blur-sm",children:u.jsxs("div",{className:"max-w-3xl mx-auto",children:[yn&&u.jsx("div",{className:"mb-3 animate-fade-in-up",children:u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 flex items-center justify-between shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[u.jsx(Ql,{className:"w-5 h-5"}),u.jsx("span",{className:"text-xs font-bold",children:"Limit Chat Habis."})]}),u.jsx("button",{onClick:()=>Ot(!0),className:"text-xs font-bold text-white bg-red-500 hover:bg-red-600 px-3 py-1.5 rounded-lg transition-colors shadow-sm",children:"Cara Dapet API Key?"})]})}),ju&&u.jsxs("div",{className:"bg-slate-900 text-white rounded-t-3xl p-3 px-4 flex items-center justify-between shadow-2xl animate-fade-in z-10 relative mt-2 mx-1",children:[u.jsx("div",{className:"flex items-center gap-3",children:u.jsx("span",{className:"text-xs font-bold leading-tight",children:o?"Limit harian habis. Besok lagi ya!":"Login/Masuk untuk lanjut mengobrol dengan Fanra"})}),!o&&u.jsx("button",{onClick:()=>w(!0),className:"text-[10px] font-bold bg-white text-slate-900 px-3 py-1.5 rounded-lg hover:bg-slate-200 transition-colors shadow-sm whitespace-nowrap",children:"Login Sekarang"})]}),u.jsxs("form",{onSubmit:ci,className:`relative flex flex-col bg-white border shadow-2xl shadow-slate-200/60 transition-all duration-300 focus-within:shadow-xl 
                            ${yn?"border-red-200 opacity-80 rounded-3xl":ju?"rounded-b-3xl rounded-t-sm border-t-0 border-slate-900/10":"rounded-3xl border-slate-200 focus-within:border-slate-300"}
                            `,children:[Fu&&u.jsxs("div",{className:"border-b border-slate-100 bg-slate-50/50 rounded-t-2xl animate-fade-in overflow-hidden transition-all",children:[u.jsxs("div",{onClick:()=>N(!T),className:"flex items-center justify-between p-2 cursor-pointer hover:bg-slate-100 transition-colors select-none",children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase px-1",children:"Pratinjau Rumus"}),u.jsx(vr,{className:`w-3 h-3 text-slate-400 transition-transform ${T?"":"-rotate-90"}`})]}),T&&u.jsx("div",{className:"p-3 bg-white text-sm overflow-x-auto border-t border-slate-100 max-h-40 custom-scrollbar",children:q_(he)})]}),X.length>0&&u.jsxs("div",{className:"p-3 border-b border-slate-100 bg-slate-50 flex items-start gap-3 animate-fade-in overflow-x-auto custom-scrollbar rounded-t-[22px]",children:[X.map((W,we)=>u.jsxs("div",{className:"relative group flex-shrink-0",children:[u.jsx("img",{src:`data:${W.mimeType};base64,${W.data}`,alt:"Preview",className:"h-16 w-16 object-cover rounded-lg border border-slate-200 shadow-sm"}),u.jsx("button",{type:"button",onClick:()=>eo(we),className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full p-0.5 shadow-md hover:bg-red-600 transition-colors",children:u.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},we)),X.length<3&&u.jsx("div",{onClick:Ia,className:"h-16 w-16 rounded-lg border-2 border-dashed border-slate-300 flex items-center justify-center cursor-pointer hover:border-primary hover:bg-white transition-colors flex-shrink-0 text-slate-400 hover:text-primary",children:u.jsx("span",{className:"text-xs font-bold",children:"+"})})]}),u.jsxs("div",{className:"flex items-end gap-1.5 p-2.5",children:[u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>lt(!He),className:"p-2.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors flex-shrink-0 mb-0.5",children:u.jsx(nN,{className:"w-5 h-5"})}),He&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>lt(!1)}),u.jsxs("div",{className:"absolute bottom-12 left-0 w-48 bg-white border border-slate-200 rounded-xl shadow-xl z-[60] py-1 overflow-hidden animate-fade-in-up origin-bottom-left",children:[u.jsxs("button",{type:"button",onClick:()=>{Ta(),lt(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-red-500 hover:bg-red-50 flex items-center gap-2",children:[u.jsx(Lr,{className:"w-4 h-4"}),"Clear Chat"]}),u.jsxs("button",{type:"button",onClick:()=>{ie(!0),lt(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-2",children:[u.jsx(Up,{className:"w-4 h-4"}),"Settings"]})]})]})]}),u.jsx("input",{type:"file",ref:O,className:"hidden",accept:"image/*",multiple:!0,onChange:ot}),u.jsx("button",{type:"button",onClick:Ia,disabled:ar,className:`p-2.5 rounded-full transition-colors flex-shrink-0 mb-0.5 ${ar?"text-slate-300 cursor-not-allowed":"text-slate-400 hover:text-slate-600 hover:bg-slate-100"}`,children:u.jsx(Pv,{className:"w-5 h-5"})}),u.jsx("textarea",{ref:B,value:he,onChange:W=>ee(W.target.value),onKeyDown:W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),ci(W))},disabled:yn||Rt,placeholder:yn?"Limit API Key Habis.":ve?"(Knowledge Mode Active)":X.length>0?it.aiPromptPlaceholder:it.chatPlaceholder,className:"flex-1 bg-transparent border-none focus:ring-0 focus:outline-none resize-none max-h-32 py-3 px-2 text-sm text-primary placeholder:text-slate-400 leading-relaxed custom-scrollbar disabled:text-slate-400 disabled:cursor-not-allowed",rows:1,style:{minHeight:"44px",overflowY:"auto"}}),D.isProcessing&&!L?u.jsx("button",{type:"button",onClick:lr,className:"p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 bg-slate-900 text-white hover:bg-slate-700 animate-pulse",title:"Stop Generation",children:u.jsx(bT,{className:"w-5 h-5"})}):u.jsx("button",{type:"submit",disabled:!he.trim()&&X.length===0||D.isProcessing||yn||Rt&&he.trim().length>0,className:`p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 ${ve?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-primary text-white hover:bg-slate-800"} ${yn||Rt?"bg-slate-300 text-white cursor-not-allowed opacity-50 blur-[1px]":""}`,children:u.jsx("svg",{className:"w-5 h-5 transform rotate-90",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})]})})]})]})}function wc(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fk={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,s,i){function o(c,d){if(!s[c]){if(!r[c]){var m=typeof wc=="function"&&wc;if(!d&&m)return m(c,!0);if(a)return a(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var y=s[c]={exports:{}};r[c][0].call(y.exports,function(w){var x=r[c][1][w];return o(x||w)},y,y.exports,n,r,s,i)}return s[c].exports}for(var a=typeof wc=="function"&&wc,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var c,d,m,g,y,w,x,_=[],v=0,E=l.length,T=E,N=i.getTypeOf(l)!=="string";v<l.length;)T=E-v,m=N?(c=l[v++],d=v<E?l[v++]:0,v<E?l[v++]:0):(c=l.charCodeAt(v++),d=v<E?l.charCodeAt(v++):0,v<E?l.charCodeAt(v++):0),g=c>>2,y=(3&c)<<4|d>>4,w=1<T?(15&d)<<2|m>>6:64,x=2<T?63&m:64,_.push(a.charAt(g)+a.charAt(y)+a.charAt(w)+a.charAt(x));return _.join("")},s.decode=function(l){var c,d,m,g,y,w,x=0,_=0,v="data:";if(l.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var E,T=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&T--,l.charAt(l.length-2)===a.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=o.uint8array?new Uint8Array(0|T):new Array(0|T);x<l.length;)c=a.indexOf(l.charAt(x++))<<2|(g=a.indexOf(l.charAt(x++)))>>4,d=(15&g)<<4|(y=a.indexOf(l.charAt(x++)))>>2,m=(3&y)<<6|(w=a.indexOf(l.charAt(x++))),E[_++]=c,y!==64&&(E[_++]=d),w!==64&&(E[_++]=m);return E}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(d,m,g,y,w){this.compressedSize=d,this.uncompressedSize=m,this.crc32=g,this.compression=y,this.compressedContent=w}c.prototype={getContentWorker:function(){var d=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),m=this;return d.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,m,g){return d.pipe(new a).pipe(new l("uncompressedSize")).pipe(m.compressWorker(g)).pipe(new l("compressedSize")).withStreamInfo("compression",m)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(c,d,m,g){var y=o,w=g+m;c^=-1;for(var x=g;x<w;x++)c=c>>>8^y[255&(c^d[x])];return-1^c}(0|l,a,a.length,0):function(c,d,m,g){var y=o,w=g+m;c^=-1;for(var x=g;x<w;x++)c=c>>>8^y[255&(c^d.charCodeAt(x))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=i?"uint8array":"array";function d(m,g){l.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=g,this.meta={}}s.magic="\b\0",a.inherits(d,l),d.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,m.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(g){m.push({data:g,meta:m.meta})}},s.compressWorker=function(m){return new d("Deflate",m)},s.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(y,w){var x,_="";for(x=0;x<w;x++)_+=String.fromCharCode(255&y),y>>>=8;return _}function o(y,w,x,_,v,E){var T,N,L=y.file,U=y.compression,k=E!==c.utf8encode,R=a.transformTo("string",E(L.name)),A=a.transformTo("string",c.utf8encode(L.name)),M=L.comment,V=a.transformTo("string",E(M)),P=a.transformTo("string",c.utf8encode(M)),D=A.length!==L.name.length,I=P.length!==M.length,$="",ce="",te="",ne=L.dir,Q=L.date,ae={crc32:0,compressedSize:0,uncompressedSize:0};w&&!x||(ae.crc32=y.crc32,ae.compressedSize=y.compressedSize,ae.uncompressedSize=y.uncompressedSize);var K=0;w&&(K|=8),k||!D&&!I||(K|=2048);var H=0,he=0;ne&&(H|=16),v==="UNIX"?(he=798,H|=function(X,Ie){var Be=X;return X||(Be=Ie?16893:33204),(65535&Be)<<16}(L.unixPermissions,ne)):(he=20,H|=function(X){return 63&(X||0)}(L.dosPermissions)),T=Q.getUTCHours(),T<<=6,T|=Q.getUTCMinutes(),T<<=5,T|=Q.getUTCSeconds()/2,N=Q.getUTCFullYear()-1980,N<<=4,N|=Q.getUTCMonth()+1,N<<=5,N|=Q.getUTCDate(),D&&(ce=i(1,1)+i(d(R),4)+A,$+="up"+i(ce.length,2)+ce),I&&(te=i(1,1)+i(d(V),4)+P,$+="uc"+i(te.length,2)+te);var ee="";return ee+=`
\0`,ee+=i(K,2),ee+=U.magic,ee+=i(T,2),ee+=i(N,2),ee+=i(ae.crc32,4),ee+=i(ae.compressedSize,4),ee+=i(ae.uncompressedSize,4),ee+=i(R.length,2),ee+=i($.length,2),{fileRecord:m.LOCAL_FILE_HEADER+ee+R+$,dirRecord:m.CENTRAL_FILE_HEADER+i(he,2)+ee+i(V.length,2)+"\0\0\0\0"+i(H,4)+i(_,4)+R+$+V}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),d=n("../crc32"),m=n("../signature");function g(y,w,x,_){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=x,this.encodeFileName=_,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(g,l),g.prototype.push=function(y){var w=y.meta.percent||0,x=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,l.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:x?(w+100*(x-_-1))/x:100}}))},g.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var w=this.streamFiles&&!y.file.dir;if(w){var x=o(y,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(y){this.accumulate=!1;var w=this.streamFiles&&!y.file.dir,x=o(y,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),w)this.push({data:function(_){return m.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var y=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var x=this.bytesWritten-y,_=function(v,E,T,N,L){var U=a.transformTo("string",L(N));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(v,2)+i(v,2)+i(E,4)+i(T,4)+i(U.length,2)+U}(this.dirRecords.length,x,y,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(y){this._sources.push(y);var w=this;return y.on("data",function(x){w.processChunk(x)}),y.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),y.on("error",function(x){w.error(x)}),this},g.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(y){var w=this._sources;if(!l.prototype.error.call(this,y))return!1;for(var x=0;x<w.length;x++)try{w[x].error(y)}catch{}return!0},g.prototype.lock=function(){l.prototype.lock.call(this);for(var y=this._sources,w=0;w<y.length;w++)y[w].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,l,c){var d=new o(l.streamFiles,c,l.platform,l.encodeFileName),m=0;try{a.forEach(function(g,y){m++;var w=function(E,T){var N=E||T,L=i[N];if(!L)throw new Error(N+" is not a valid compression method !");return L}(y.options.compression,l.compression),x=y.options.compressionOptions||l.compressionOptions||{},_=y.dir,v=y.date;y._compressWorker(w,x).withStreamInfo("file",{name:g,dir:_,date:v,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(d)}),d.entriesCount=m}catch(g){d.error(g)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function m(g){return new o.Promise(function(y,w){var x=g.decompressed.getContentWorker().pipe(new c);x.on("error",function(_){w(_)}).on("end",function(){x.streamInfo.crc32!==g.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(g,y){var w=this;return y=i.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",g,!0,y.optimizedBinaryString,y.base64).then(function(x){var _=new l(y);return _.load(x),_}).then(function(x){var _=[o.Promise.resolve(x)],v=x.files;if(y.checkCRC32)for(var E=0;E<v.length;E++)_.push(m(v[E]));return o.Promise.all(_)}).then(function(x){for(var _=x.shift(),v=_.files,E=0;E<v.length;E++){var T=v[E],N=T.fileNameStr,L=i.resolve(T.fileNameStr);w.file(L,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:y.createFolders}),T.dir||(w.file(L).unsafeOriginalName=N)}return _.zipComment.length&&(w.comment=_.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,l,c){i.call(this,l),this._helper=a;var d=this;a.on("data",function(m,g){d.push(m)||d._helper.pause(),c&&c(g)}).on("error",function(m){d.emit("error",m)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(L,U,k){var R,A=a.getTypeOf(U),M=a.extend(k||{},d);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(L=v(L)),M.createFolders&&(R=_(L))&&E.call(this,R,!0);var V=A==="string"&&M.binary===!1&&M.base64===!1;k&&k.binary!==void 0||(M.binary=!V),(U instanceof m&&U.uncompressedSize===0||M.dir||!U||U.length===0)&&(M.base64=!1,M.binary=!0,U="",M.compression="STORE",A="string");var P=null;P=U instanceof m||U instanceof l?U:w.isNode&&w.isStream(U)?new x(L,U):a.prepareContent(L,U,M.binary,M.optimizedBinaryString,M.base64);var D=new g(L,P,M);this.files[L]=D}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),d=n("./defaults"),m=n("./compressedObject"),g=n("./zipObject"),y=n("./generate"),w=n("./nodejsUtils"),x=n("./nodejs/NodejsStreamInputAdapter"),_=function(L){L.slice(-1)==="/"&&(L=L.substring(0,L.length-1));var U=L.lastIndexOf("/");return 0<U?L.substring(0,U):""},v=function(L){return L.slice(-1)!=="/"&&(L+="/"),L},E=function(L,U){return U=U!==void 0?U:d.createFolders,L=v(L),this.files[L]||i.call(this,L,null,{dir:!0,createFolders:U}),this.files[L]};function T(L){return Object.prototype.toString.call(L)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(L){var U,k,R;for(U in this.files)R=this.files[U],(k=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&L(k,R)},filter:function(L){var U=[];return this.forEach(function(k,R){L(k,R)&&U.push(R)}),U},file:function(L,U,k){if(arguments.length!==1)return L=this.root+L,i.call(this,L,U,k),this;if(T(L)){var R=L;return this.filter(function(M,V){return!V.dir&&R.test(M)})}var A=this.files[this.root+L];return A&&!A.dir?A:null},folder:function(L){if(!L)return this;if(T(L))return this.filter(function(A,M){return M.dir&&L.test(A)});var U=this.root+L,k=E.call(this,U),R=this.clone();return R.root=k.name,R},remove:function(L){L=this.root+L;var U=this.files[L];if(U||(L.slice(-1)!=="/"&&(L+="/"),U=this.files[L]),U&&!U.dir)delete this.files[L];else for(var k=this.filter(function(A,M){return M.name.slice(0,L.length)===L}),R=0;R<k.length;R++)delete this.files[k[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(L){var U,k={};try{if((k=a.extend(L||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");a.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var R=k.comment||this.comment||"";U=y.generateWorker(this,k,R)}catch(A){(U=new l("error")).error(A)}return new c(U,k.type||"string",k.mimeType)},generateAsync:function(L,U){return this.generateInternalStream(L).accumulate(U)},generateNodeStream:function(L,U){return(L=L||{}).type||(L.type="nodebuffer"),this.generateInternalStream(L).toNodejsStream(U)}};r.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),m=a.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===l&&this.data[g+1]===c&&this.data[g+2]===d&&this.data[g+3]===m)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),m=a.charCodeAt(3),g=this.readData(4);return l===g[0]&&c===g[1]&&d===g[2]&&m===g[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(m){var g=i.getTypeOf(m);return i.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new c(m):o.uint8array?new d(i.transformTo("uint8array",m)):new a(i.transformTo("array",m)):new l(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=i.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),d=n("../external"),m=null;if(c.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(w,x){return new d.Promise(function(_,v){var E=[],T=w._internalType,N=w._outputType,L=w._mimeType;w.on("data",function(U,k){E.push(U),x&&x(k)}).on("error",function(U){E=[],v(U)}).on("end",function(){try{var U=function(k,R,A){switch(k){case"blob":return i.newBlob(i.transformTo("arraybuffer",R),A);case"base64":return l.encode(R);default:return i.transformTo(k,R)}}(N,function(k,R){var A,M=0,V=null,P=0;for(A=0;A<R.length;A++)P+=R[A].length;switch(k){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(V=new Uint8Array(P),A=0;A<R.length;A++)V.set(R[A],M),M+=R[A].length;return V;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+k+"'")}}(T,E),L);_(U)}catch(k){v(k)}E=[]}).resume()})}function y(w,x,_){var v=x;switch(x){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=x,this._mimeType=_,i.checkSupport(v),this._worker=w.pipe(new o(v)),w.lock()}catch(E){this._worker=new a("error"),this._worker.error(E)}}y.prototype={accumulate:function(w){return g(this,w)},on:function(w,x){var _=this;return w==="data"?this._worker.on(w,function(v){x.call(_,v.data,v.meta)}):this._worker.on(w,function(){i.delay(x,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function m(){l.call(this,"utf-8 decode"),this.leftOver=null}function g(){l.call(this,"utf-8 encode")}s.utf8encode=function(y){return o.nodebuffer?a.newBufferFrom(y,"utf-8"):function(w){var x,_,v,E,T,N=w.length,L=0;for(E=0;E<N;E++)(64512&(_=w.charCodeAt(E)))==55296&&E+1<N&&(64512&(v=w.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),E++),L+=_<128?1:_<2048?2:_<65536?3:4;for(x=o.uint8array?new Uint8Array(L):new Array(L),E=T=0;T<L;E++)(64512&(_=w.charCodeAt(E)))==55296&&E+1<N&&(64512&(v=w.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),E++),_<128?x[T++]=_:(_<2048?x[T++]=192|_>>>6:(_<65536?x[T++]=224|_>>>12:(x[T++]=240|_>>>18,x[T++]=128|_>>>12&63),x[T++]=128|_>>>6&63),x[T++]=128|63&_);return x}(y)},s.utf8decode=function(y){return o.nodebuffer?i.transformTo("nodebuffer",y).toString("utf-8"):function(w){var x,_,v,E,T=w.length,N=new Array(2*T);for(x=_=0;x<T;)if((v=w[x++])<128)N[_++]=v;else if(4<(E=c[v]))N[_++]=65533,x+=E-1;else{for(v&=E===2?31:E===3?15:7;1<E&&x<T;)v=v<<6|63&w[x++],E--;1<E?N[_++]=65533:v<65536?N[_++]=v:(v-=65536,N[_++]=55296|v>>10&1023,N[_++]=56320|1023&v)}return N.length!==_&&(N.subarray?N=N.subarray(0,_):N.length=_),i.applyFromCharCode(N)}(y=i.transformTo(o.uint8array?"uint8array":"array",y))},i.inherits(m,l),m.prototype.processChunk=function(y){var w=i.transformTo(o.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=w;(w=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),w.set(x,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var _=function(E,T){var N;for((T=T||E.length)>E.length&&(T=E.length),N=T-1;0<=N&&(192&E[N])==128;)N--;return N<0||N===0?T:N+c[E[N]]>T?N:T}(w),v=w;_!==w.length&&(o.uint8array?(v=w.subarray(0,_),this.leftOver=w.subarray(_,w.length)):(v=w.slice(0,_),this.leftOver=w.slice(_,w.length))),this.push({data:s.utf8decode(v),meta:y.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=m,i.inherits(g,l),g.prototype.processChunk=function(y){this.push({data:s.utf8encode(y.data),meta:y.meta})},s.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(x){return x}function d(x,_){for(var v=0;v<x.length;++v)_[v]=255&x.charCodeAt(v);return _}n("setimmediate"),s.newBlob=function(x,_){s.checkSupport("blob");try{return new Blob([x],{type:_})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(x),v.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(x,_,v){var E=[],T=0,N=x.length;if(N<=v)return String.fromCharCode.apply(null,x);for(;T<N;)_==="array"||_==="nodebuffer"?E.push(String.fromCharCode.apply(null,x.slice(T,Math.min(T+v,N)))):E.push(String.fromCharCode.apply(null,x.subarray(T,Math.min(T+v,N)))),T+=v;return E.join("")},stringifyByChar:function(x){for(var _="",v=0;v<x.length;v++)_+=String.fromCharCode(x[v]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function g(x){var _=65536,v=s.getTypeOf(x),E=!0;if(v==="uint8array"?E=m.applyCanBeUsed.uint8array:v==="nodebuffer"&&(E=m.applyCanBeUsed.nodebuffer),E)for(;1<_;)try{return m.stringifyByChunk(x,v,_)}catch{_=Math.floor(_/2)}return m.stringifyByChar(x)}function y(x,_){for(var v=0;v<x.length;v++)_[v]=x[v];return _}s.applyFromCharCode=g;var w={};w.string={string:c,array:function(x){return d(x,new Array(x.length))},arraybuffer:function(x){return w.string.uint8array(x).buffer},uint8array:function(x){return d(x,new Uint8Array(x.length))},nodebuffer:function(x){return d(x,a.allocBuffer(x.length))}},w.array={string:g,array:c,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(x)}},w.arraybuffer={string:function(x){return g(new Uint8Array(x))},array:function(x){return y(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:c,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(new Uint8Array(x))}},w.uint8array={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:c,nodebuffer:function(x){return a.newBufferFrom(x)}},w.nodebuffer={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return w.nodebuffer.uint8array(x).buffer},uint8array:function(x){return y(x,new Uint8Array(x.length))},nodebuffer:c},s.transformTo=function(x,_){if(_=_||"",!x)return _;s.checkSupport(x);var v=s.getTypeOf(_);return w[v][x](_)},s.resolve=function(x){for(var _=x.split("/"),v=[],E=0;E<_.length;E++){var T=_[E];T==="."||T===""&&E!==0&&E!==_.length-1||(T===".."?v.pop():v.push(T))}return v.join("/")},s.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(x)?"nodebuffer":i.uint8array&&x instanceof Uint8Array?"uint8array":i.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(x){if(!i[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(x){var _,v,E="";for(v=0;v<(x||"").length;v++)E+="\\x"+((_=x.charCodeAt(v))<16?"0":"")+_.toString(16).toUpperCase();return E},s.delay=function(x,_,v){setImmediate(function(){x.apply(v||null,_||[])})},s.inherits=function(x,_){function v(){}v.prototype=_.prototype,x.prototype=new v},s.extend=function(){var x,_,v={};for(x=0;x<arguments.length;x++)for(_ in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],_)&&v[_]===void 0&&(v[_]=arguments[x][_]);return v},s.prepareContent=function(x,_,v,E,T){return l.Promise.resolve(_).then(function(N){return i.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new l.Promise(function(L,U){var k=new FileReader;k.onload=function(R){L(R.target.result)},k.onerror=function(R){U(R.target.error)},k.readAsArrayBuffer(N)}):N}).then(function(N){var L=s.getTypeOf(N);return L?(L==="arraybuffer"?N=s.transformTo("uint8array",N):L==="string"&&(T?N=o.decode(N):v&&E!==!0&&(N=function(U){return d(U,i.uint8array?new Uint8Array(U.length):new Array(U.length))}(N))),N):l.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function d(m){this.files=[],this.loadOptions=m}d.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(m)+")")}},isSignature:function(m,g){var y=this.reader.index;this.reader.setIndex(m);var w=this.reader.readString(4)===g;return this.reader.setIndex(y),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),g=c.uint8array?"uint8array":"array",y=o.transformTo(g,m);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,g,y,w=this.zip64EndOfCentralSize-44;0<w;)m=this.reader.readInt(2),g=this.reader.readInt(4),y=this.reader.readData(g),this.zip64ExtensibleData[m]={id:m,length:g,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,g;for(m=0;m<this.files.length;m++)g=this.files[m],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(m=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var g=m;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var w=g-y;if(0<w)this.isSignature(g,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),d=n("./compressions"),m=n("./support");function g(y,w){this.options=y,this.loadOptions=w}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var w,x;if(y.skip(22),this.fileNameLength=y.readInt(2),x=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(_){for(var v in d)if(Object.prototype.hasOwnProperty.call(d,v)&&d[v].magic===_)return d[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,w,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var w=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(w),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var w,x,_,v=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<v;)w=y.readInt(2),x=y.readInt(2),_=y.readData(x),this.extraFields[w]={id:w,length:x,value:_};y.setIndex(v)},handleUTF8:function(){var y=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var x=o.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var v=o.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var w=i(y.value);return w.readInt(1)!==1||l(this.fileName)!==w.readInt(4)?null:c.utf8decode(w.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var w=i(y.value);return w.readInt(1)!==1||l(this.fileComment)!==w.readInt(4)?null:c.utf8decode(w.readData(y.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(w,x,_){this.name=w,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=x,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(w){var x=null,_="string";try{if(!w)throw new Error("No output type specified.");var v=(_=w.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),x=this._decompressWorker();var E=!this._dataBinary;E&&!v&&(x=x.pipe(new l.Utf8EncodeWorker)),!E&&v&&(x=x.pipe(new l.Utf8DecodeWorker))}catch(T){(x=new d("error")).error(T)}return new o(x,_,"")},async:function(w,x){return this.internalStream(w).accumulate(x)},nodeStream:function(w,x){return this.internalStream(w||"nodebuffer").toNodejsStream(x)},_compressWorker:function(w,x){if(this._data instanceof c&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(_,w,x)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<m.length;y++)i.prototype[m[y]]=g;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var c=0,d=new l(w),m=i.document.createTextNode("");d.observe(m,{characterData:!0}),o=function(){m.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var x=i.document.createElement("script");x.onreadystatechange=function(){w(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},i.document.documentElement.appendChild(x)}:function(){setTimeout(w,0)};else{var g=new i.MessageChannel;g.port1.onmessage=w,o=function(){g.port2.postMessage(0)}}var y=[];function w(){var x,_;a=!0;for(var v=y.length;v;){for(_=y,y=[],x=-1;++x<v;)_[x]();v=y.length}a=!1}r.exports=function(x){y.push(x)!==1||a||o()}}).call(this,typeof Yr<"u"?Yr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function m(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,v!==o&&x(this,v)}function g(v,E,T){this.promise=v,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function y(v,E,T){i(function(){var N;try{N=E(T)}catch(L){return a.reject(v,L)}N===v?a.reject(v,new TypeError("Cannot resolve promise with itself")):a.resolve(v,N)})}function w(v){var E=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof E=="function")return function(){E.apply(v,arguments)}}function x(v,E){var T=!1;function N(k){T||(T=!0,a.reject(v,k))}function L(k){T||(T=!0,a.resolve(v,k))}var U=_(function(){E(L,N)});U.status==="error"&&N(U.value)}function _(v,E){var T={};try{T.value=v(E),T.status="success"}catch(N){T.status="error",T.value=N}return T}(r.exports=m).prototype.finally=function(v){if(typeof v!="function")return this;var E=this.constructor;return this.then(function(T){return E.resolve(v()).then(function(){return T})},function(T){return E.resolve(v()).then(function(){throw T})})},m.prototype.catch=function(v){return this.then(null,v)},m.prototype.then=function(v,E){if(typeof v!="function"&&this.state===c||typeof E!="function"&&this.state===l)return this;var T=new this.constructor(o);return this.state!==d?y(T,this.state===c?v:E,this.outcome):this.queue.push(new g(T,v,E)),T},g.prototype.callFulfilled=function(v){a.resolve(this.promise,v)},g.prototype.otherCallFulfilled=function(v){y(this.promise,this.onFulfilled,v)},g.prototype.callRejected=function(v){a.reject(this.promise,v)},g.prototype.otherCallRejected=function(v){y(this.promise,this.onRejected,v)},a.resolve=function(v,E){var T=_(w,E);if(T.status==="error")return a.reject(v,T.value);var N=T.value;if(N)x(v,N);else{v.state=c,v.outcome=E;for(var L=-1,U=v.queue.length;++L<U;)v.queue[L].callFulfilled(E)}return v},a.reject=function(v,E){v.state=l,v.outcome=E;for(var T=-1,N=v.queue.length;++T<N;)v.queue[T].callRejected(E);return v},m.resolve=function(v){return v instanceof this?v:a.resolve(new this(o),v)},m.reject=function(v){var E=new this(o);return a.reject(E,v)},m.all=function(v){var E=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=v.length,N=!1;if(!T)return this.resolve([]);for(var L=new Array(T),U=0,k=-1,R=new this(o);++k<T;)A(v[k],k);return R;function A(M,V){E.resolve(M).then(function(P){L[V]=P,++U!==T||N||(N=!0,a.resolve(R,L))},function(P){N||(N=!0,a.reject(R,P))})}},m.race=function(v){var E=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=v.length,N=!1;if(!T)return this.resolve([]);for(var L=-1,U=new this(o);++L<T;)k=v[L],E.resolve(k).then(function(R){N||(N=!0,a.resolve(U,R))},function(R){N||(N=!0,a.reject(U,R))});var k;return U}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),d=Object.prototype.toString,m=0,g=-1,y=0,w=8;function x(v){if(!(this instanceof x))return new x(v);this.options=o.assign({level:g,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},v||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var T=i.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(T!==m)throw new Error(l[T]);if(E.header&&i.deflateSetHeader(this.strm,E.header),E.dictionary){var N;if(N=typeof E.dictionary=="string"?a.string2buf(E.dictionary):d.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(T=i.deflateSetDictionary(this.strm,N))!==m)throw new Error(l[T]);this._dict_set=!0}}function _(v,E){var T=new x(E);if(T.push(v,!0),T.err)throw T.msg||l[T.err];return T.result}x.prototype.push=function(v,E){var T,N,L=this.strm,U=this.options.chunkSize;if(this.ended)return!1;N=E===~~E?E:E===!0?4:0,typeof v=="string"?L.input=a.string2buf(v):d.call(v)==="[object ArrayBuffer]"?L.input=new Uint8Array(v):L.input=v,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new o.Buf8(U),L.next_out=0,L.avail_out=U),(T=i.deflate(L,N))!==1&&T!==m)return this.onEnd(T),!(this.ended=!0);L.avail_out!==0&&(L.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(L.output,L.next_out))):this.onData(o.shrinkBuf(L.output,L.next_out)))}while((0<L.avail_in||L.avail_out===0)&&T!==1);return N===4?(T=i.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===m):N!==2||(this.onEnd(m),!(L.avail_out=0))},x.prototype.onData=function(v){this.chunks.push(v)},x.prototype.onEnd=function(v){v===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Deflate=x,s.deflate=_,s.deflateRaw=function(v,E){return(E=E||{}).raw=!0,_(v,E)},s.gzip=function(v,E){return(E=E||{}).gzip=!0,_(v,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),d=n("./zlib/zstream"),m=n("./zlib/gzheader"),g=Object.prototype.toString;function y(x){if(!(this instanceof y))return new y(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||x&&x.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var v=i.inflateInit2(this.strm,_.windowBits);if(v!==l.Z_OK)throw new Error(c[v]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function w(x,_){var v=new y(_);if(v.push(x,!0),v.err)throw v.msg||c[v.err];return v.result}y.prototype.push=function(x,_){var v,E,T,N,L,U,k=this.strm,R=this.options.chunkSize,A=this.options.dictionary,M=!1;if(this.ended)return!1;E=_===~~_?_:_===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof x=="string"?k.input=a.binstring2buf(x):g.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(R),k.next_out=0,k.avail_out=R),(v=i.inflate(k,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&A&&(U=typeof A=="string"?a.string2buf(A):g.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,v=i.inflateSetDictionary(this.strm,U)),v===l.Z_BUF_ERROR&&M===!0&&(v=l.Z_OK,M=!1),v!==l.Z_STREAM_END&&v!==l.Z_OK)return this.onEnd(v),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&v!==l.Z_STREAM_END&&(k.avail_in!==0||E!==l.Z_FINISH&&E!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=a.utf8border(k.output,k.next_out),N=k.next_out-T,L=a.buf2string(k.output,T),k.next_out=N,k.avail_out=R-N,N&&o.arraySet(k.output,k.output,T,N,0),this.onData(L)):this.onData(o.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(M=!0)}while((0<k.avail_in||k.avail_out===0)&&v!==l.Z_STREAM_END);return v===l.Z_STREAM_END&&(E=l.Z_FINISH),E===l.Z_FINISH?(v=i.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===l.Z_OK):E!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(k.avail_out=0))},y.prototype.onData=function(x){this.chunks.push(x)},y.prototype.onEnd=function(x){x===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},s.Inflate=y,s.inflate=w,s.inflateRaw=function(x,_){return(_=_||{}).raw=!0,w(x,_)},s.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var m in d)d.hasOwnProperty(m)&&(l[m]=d[m])}}return l},s.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,d,m,g){if(c.subarray&&l.subarray)l.set(c.subarray(d,d+m),g);else for(var y=0;y<m;y++)l[g+y]=c[d+y]},flattenChunks:function(l){var c,d,m,g,y,w;for(c=m=0,d=l.length;c<d;c++)m+=l[c].length;for(w=new Uint8Array(m),c=g=0,d=l.length;c<d;c++)y=l[c],w.set(y,g),g+=y.length;return w}},a={arraySet:function(l,c,d,m,g){for(var y=0;y<m;y++)l[g+y]=c[d+y]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(m,g){if(g<65537&&(m.subarray&&a||!m.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(m,g));for(var y="",w=0;w<g;w++)y+=String.fromCharCode(m[w]);return y}l[254]=l[254]=1,s.string2buf=function(m){var g,y,w,x,_,v=m.length,E=0;for(x=0;x<v;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(w=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),x++),E+=y<128?1:y<2048?2:y<65536?3:4;for(g=new i.Buf8(E),x=_=0;_<E;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(w=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),x++),y<128?g[_++]=y:(y<2048?g[_++]=192|y>>>6:(y<65536?g[_++]=224|y>>>12:(g[_++]=240|y>>>18,g[_++]=128|y>>>12&63),g[_++]=128|y>>>6&63),g[_++]=128|63&y);return g},s.buf2binstring=function(m){return d(m,m.length)},s.binstring2buf=function(m){for(var g=new i.Buf8(m.length),y=0,w=g.length;y<w;y++)g[y]=m.charCodeAt(y);return g},s.buf2string=function(m,g){var y,w,x,_,v=g||m.length,E=new Array(2*v);for(y=w=0;y<v;)if((x=m[y++])<128)E[w++]=x;else if(4<(_=l[x]))E[w++]=65533,y+=_-1;else{for(x&=_===2?31:_===3?15:7;1<_&&y<v;)x=x<<6|63&m[y++],_--;1<_?E[w++]=65533:x<65536?E[w++]=x:(x-=65536,E[w++]=55296|x>>10&1023,E[w++]=56320|1023&x)}return d(E,w)},s.utf8border=function(m,g){var y;for((g=g||m.length)>m.length&&(g=m.length),y=g-1;0<=y&&(192&m[y])==128;)y--;return y<0||y===0?g:y+l[m[y]]>g?y:g}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,l){for(var c=65535&i|0,d=i>>>16&65535|0,m=0;a!==0;){for(a-=m=2e3<a?2e3:a;d=d+(c=c+o[l++]|0)|0,--m;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,c){var d=i,m=c+l;o^=-1;for(var g=c;g<m;g++)o=o>>>8^d[255&(o^a[g])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),d=n("./messages"),m=0,g=4,y=0,w=-2,x=-1,_=4,v=2,E=8,T=9,N=286,L=30,U=19,k=2*N+1,R=15,A=3,M=258,V=M+A+1,P=42,D=113,I=1,$=2,ce=3,te=4;function ne(C,se){return C.msg=d[se],se}function Q(C){return(C<<1)-(4<C?9:0)}function ae(C){for(var se=C.length;0<=--se;)C[se]=0}function K(C){var se=C.state,Z=se.pending;Z>C.avail_out&&(Z=C.avail_out),Z!==0&&(o.arraySet(C.output,se.pending_buf,se.pending_out,Z,C.next_out),C.next_out+=Z,se.pending_out+=Z,C.total_out+=Z,C.avail_out-=Z,se.pending-=Z,se.pending===0&&(se.pending_out=0))}function H(C,se){a._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,se),C.block_start=C.strstart,K(C.strm)}function he(C,se){C.pending_buf[C.pending++]=se}function ee(C,se){C.pending_buf[C.pending++]=se>>>8&255,C.pending_buf[C.pending++]=255&se}function X(C,se){var Z,O,B=C.max_chain_length,q=C.strstart,ie=C.prev_length,ue=C.nice_match,Y=C.strstart>C.w_size-V?C.strstart-(C.w_size-V):0,oe=C.window,ye=C.w_mask,fe=C.prev,xe=C.strstart+M,Ce=oe[q+ie-1],Pe=oe[q+ie];C.prev_length>=C.good_match&&(B>>=2),ue>C.lookahead&&(ue=C.lookahead);do if(oe[(Z=se)+ie]===Pe&&oe[Z+ie-1]===Ce&&oe[Z]===oe[q]&&oe[++Z]===oe[q+1]){q+=2,Z++;do;while(oe[++q]===oe[++Z]&&oe[++q]===oe[++Z]&&oe[++q]===oe[++Z]&&oe[++q]===oe[++Z]&&oe[++q]===oe[++Z]&&oe[++q]===oe[++Z]&&oe[++q]===oe[++Z]&&oe[++q]===oe[++Z]&&q<xe);if(O=M-(xe-q),q=xe-M,ie<O){if(C.match_start=se,ue<=(ie=O))break;Ce=oe[q+ie-1],Pe=oe[q+ie]}}while((se=fe[se&ye])>Y&&--B!=0);return ie<=C.lookahead?ie:C.lookahead}function Ie(C){var se,Z,O,B,q,ie,ue,Y,oe,ye,fe=C.w_size;do{if(B=C.window_size-C.lookahead-C.strstart,C.strstart>=fe+(fe-V)){for(o.arraySet(C.window,C.window,fe,fe,0),C.match_start-=fe,C.strstart-=fe,C.block_start-=fe,se=Z=C.hash_size;O=C.head[--se],C.head[se]=fe<=O?O-fe:0,--Z;);for(se=Z=fe;O=C.prev[--se],C.prev[se]=fe<=O?O-fe:0,--Z;);B+=fe}if(C.strm.avail_in===0)break;if(ie=C.strm,ue=C.window,Y=C.strstart+C.lookahead,oe=B,ye=void 0,ye=ie.avail_in,oe<ye&&(ye=oe),Z=ye===0?0:(ie.avail_in-=ye,o.arraySet(ue,ie.input,ie.next_in,ye,Y),ie.state.wrap===1?ie.adler=l(ie.adler,ue,ye,Y):ie.state.wrap===2&&(ie.adler=c(ie.adler,ue,ye,Y)),ie.next_in+=ye,ie.total_in+=ye,ye),C.lookahead+=Z,C.lookahead+C.insert>=A)for(q=C.strstart-C.insert,C.ins_h=C.window[q],C.ins_h=(C.ins_h<<C.hash_shift^C.window[q+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[q+A-1])&C.hash_mask,C.prev[q&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=q,q++,C.insert--,!(C.lookahead+C.insert<A)););}while(C.lookahead<V&&C.strm.avail_in!==0)}function Be(C,se){for(var Z,O;;){if(C.lookahead<V){if(Ie(C),C.lookahead<V&&se===m)return I;if(C.lookahead===0)break}if(Z=0,C.lookahead>=A&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+A-1])&C.hash_mask,Z=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),Z!==0&&C.strstart-Z<=C.w_size-V&&(C.match_length=X(C,Z)),C.match_length>=A)if(O=a._tr_tally(C,C.strstart-C.match_start,C.match_length-A),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=A){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+A-1])&C.hash_mask,Z=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else O=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(O&&(H(C,!1),C.strm.avail_out===0))return I}return C.insert=C.strstart<A-1?C.strstart:A-1,se===g?(H(C,!0),C.strm.avail_out===0?ce:te):C.last_lit&&(H(C,!1),C.strm.avail_out===0)?I:$}function ke(C,se){for(var Z,O,B;;){if(C.lookahead<V){if(Ie(C),C.lookahead<V&&se===m)return I;if(C.lookahead===0)break}if(Z=0,C.lookahead>=A&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+A-1])&C.hash_mask,Z=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=A-1,Z!==0&&C.prev_length<C.max_lazy_match&&C.strstart-Z<=C.w_size-V&&(C.match_length=X(C,Z),C.match_length<=5&&(C.strategy===1||C.match_length===A&&4096<C.strstart-C.match_start)&&(C.match_length=A-1)),C.prev_length>=A&&C.match_length<=C.prev_length){for(B=C.strstart+C.lookahead-A,O=a._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-A),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=B&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+A-1])&C.hash_mask,Z=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=A-1,C.strstart++,O&&(H(C,!1),C.strm.avail_out===0))return I}else if(C.match_available){if((O=a._tr_tally(C,0,C.window[C.strstart-1]))&&H(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return I}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(O=a._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<A-1?C.strstart:A-1,se===g?(H(C,!0),C.strm.avail_out===0?ce:te):C.last_lit&&(H(C,!1),C.strm.avail_out===0)?I:$}function je(C,se,Z,O,B){this.good_length=C,this.max_lazy=se,this.nice_length=Z,this.max_chain=O,this.func=B}function Oe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*k),this.dyn_dtree=new o.Buf16(2*(2*L+1)),this.bl_tree=new o.Buf16(2*(2*U+1)),ae(this.dyn_ltree),ae(this.dyn_dtree),ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(R+1),this.heap=new o.Buf16(2*N+1),ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*N+1),ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function He(C){var se;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=v,(se=C.state).pending=0,se.pending_out=0,se.wrap<0&&(se.wrap=-se.wrap),se.status=se.wrap?P:D,C.adler=se.wrap===2?0:1,se.last_flush=m,a._tr_init(se),y):ne(C,w)}function lt(C){var se=He(C);return se===y&&function(Z){Z.window_size=2*Z.w_size,ae(Z.head),Z.max_lazy_match=i[Z.level].max_lazy,Z.good_match=i[Z.level].good_length,Z.nice_match=i[Z.level].nice_length,Z.max_chain_length=i[Z.level].max_chain,Z.strstart=0,Z.block_start=0,Z.lookahead=0,Z.insert=0,Z.match_length=Z.prev_length=A-1,Z.match_available=0,Z.ins_h=0}(C.state),se}function ze(C,se,Z,O,B,q){if(!C)return w;var ie=1;if(se===x&&(se=6),O<0?(ie=0,O=-O):15<O&&(ie=2,O-=16),B<1||T<B||Z!==E||O<8||15<O||se<0||9<se||q<0||_<q)return ne(C,w);O===8&&(O=9);var ue=new Oe;return(C.state=ue).strm=C,ue.wrap=ie,ue.gzhead=null,ue.w_bits=O,ue.w_size=1<<ue.w_bits,ue.w_mask=ue.w_size-1,ue.hash_bits=B+7,ue.hash_size=1<<ue.hash_bits,ue.hash_mask=ue.hash_size-1,ue.hash_shift=~~((ue.hash_bits+A-1)/A),ue.window=new o.Buf8(2*ue.w_size),ue.head=new o.Buf16(ue.hash_size),ue.prev=new o.Buf16(ue.w_size),ue.lit_bufsize=1<<B+6,ue.pending_buf_size=4*ue.lit_bufsize,ue.pending_buf=new o.Buf8(ue.pending_buf_size),ue.d_buf=1*ue.lit_bufsize,ue.l_buf=3*ue.lit_bufsize,ue.level=se,ue.strategy=q,ue.method=Z,lt(C)}i=[new je(0,0,0,0,function(C,se){var Z=65535;for(Z>C.pending_buf_size-5&&(Z=C.pending_buf_size-5);;){if(C.lookahead<=1){if(Ie(C),C.lookahead===0&&se===m)return I;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var O=C.block_start+Z;if((C.strstart===0||C.strstart>=O)&&(C.lookahead=C.strstart-O,C.strstart=O,H(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-V&&(H(C,!1),C.strm.avail_out===0))return I}return C.insert=0,se===g?(H(C,!0),C.strm.avail_out===0?ce:te):(C.strstart>C.block_start&&(H(C,!1),C.strm.avail_out),I)}),new je(4,4,8,4,Be),new je(4,5,16,8,Be),new je(4,6,32,32,Be),new je(4,4,16,16,ke),new je(8,16,32,32,ke),new je(8,16,128,128,ke),new je(8,32,128,256,ke),new je(32,128,258,1024,ke),new je(32,258,258,4096,ke)],s.deflateInit=function(C,se){return ze(C,se,E,15,8,0)},s.deflateInit2=ze,s.deflateReset=lt,s.deflateResetKeep=He,s.deflateSetHeader=function(C,se){return C&&C.state?C.state.wrap!==2?w:(C.state.gzhead=se,y):w},s.deflate=function(C,se){var Z,O,B,q;if(!C||!C.state||5<se||se<0)return C?ne(C,w):w;if(O=C.state,!C.output||!C.input&&C.avail_in!==0||O.status===666&&se!==g)return ne(C,C.avail_out===0?-5:w);if(O.strm=C,Z=O.last_flush,O.last_flush=se,O.status===P)if(O.wrap===2)C.adler=0,he(O,31),he(O,139),he(O,8),O.gzhead?(he(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),he(O,255&O.gzhead.time),he(O,O.gzhead.time>>8&255),he(O,O.gzhead.time>>16&255),he(O,O.gzhead.time>>24&255),he(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),he(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(he(O,255&O.gzhead.extra.length),he(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(C.adler=c(C.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(he(O,0),he(O,0),he(O,0),he(O,0),he(O,0),he(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),he(O,3),O.status=D);else{var ie=E+(O.w_bits-8<<4)<<8;ie|=(2<=O.strategy||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(ie|=32),ie+=31-ie%31,O.status=D,ee(O,ie),O.strstart!==0&&(ee(O,C.adler>>>16),ee(O,65535&C.adler)),C.adler=1}if(O.status===69)if(O.gzhead.extra){for(B=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>B&&(C.adler=c(C.adler,O.pending_buf,O.pending-B,B)),K(C),B=O.pending,O.pending!==O.pending_buf_size));)he(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>B&&(C.adler=c(C.adler,O.pending_buf,O.pending-B,B)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){B=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>B&&(C.adler=c(C.adler,O.pending_buf,O.pending-B,B)),K(C),B=O.pending,O.pending===O.pending_buf_size)){q=1;break}q=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,he(O,q)}while(q!==0);O.gzhead.hcrc&&O.pending>B&&(C.adler=c(C.adler,O.pending_buf,O.pending-B,B)),q===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){B=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>B&&(C.adler=c(C.adler,O.pending_buf,O.pending-B,B)),K(C),B=O.pending,O.pending===O.pending_buf_size)){q=1;break}q=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,he(O,q)}while(q!==0);O.gzhead.hcrc&&O.pending>B&&(C.adler=c(C.adler,O.pending_buf,O.pending-B,B)),q===0&&(O.status=103)}else O.status=103;if(O.status===103&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&K(C),O.pending+2<=O.pending_buf_size&&(he(O,255&C.adler),he(O,C.adler>>8&255),C.adler=0,O.status=D)):O.status=D),O.pending!==0){if(K(C),C.avail_out===0)return O.last_flush=-1,y}else if(C.avail_in===0&&Q(se)<=Q(Z)&&se!==g)return ne(C,-5);if(O.status===666&&C.avail_in!==0)return ne(C,-5);if(C.avail_in!==0||O.lookahead!==0||se!==m&&O.status!==666){var ue=O.strategy===2?function(Y,oe){for(var ye;;){if(Y.lookahead===0&&(Ie(Y),Y.lookahead===0)){if(oe===m)return I;break}if(Y.match_length=0,ye=a._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++,ye&&(H(Y,!1),Y.strm.avail_out===0))return I}return Y.insert=0,oe===g?(H(Y,!0),Y.strm.avail_out===0?ce:te):Y.last_lit&&(H(Y,!1),Y.strm.avail_out===0)?I:$}(O,se):O.strategy===3?function(Y,oe){for(var ye,fe,xe,Ce,Pe=Y.window;;){if(Y.lookahead<=M){if(Ie(Y),Y.lookahead<=M&&oe===m)return I;if(Y.lookahead===0)break}if(Y.match_length=0,Y.lookahead>=A&&0<Y.strstart&&(fe=Pe[xe=Y.strstart-1])===Pe[++xe]&&fe===Pe[++xe]&&fe===Pe[++xe]){Ce=Y.strstart+M;do;while(fe===Pe[++xe]&&fe===Pe[++xe]&&fe===Pe[++xe]&&fe===Pe[++xe]&&fe===Pe[++xe]&&fe===Pe[++xe]&&fe===Pe[++xe]&&fe===Pe[++xe]&&xe<Ce);Y.match_length=M-(Ce-xe),Y.match_length>Y.lookahead&&(Y.match_length=Y.lookahead)}if(Y.match_length>=A?(ye=a._tr_tally(Y,1,Y.match_length-A),Y.lookahead-=Y.match_length,Y.strstart+=Y.match_length,Y.match_length=0):(ye=a._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++),ye&&(H(Y,!1),Y.strm.avail_out===0))return I}return Y.insert=0,oe===g?(H(Y,!0),Y.strm.avail_out===0?ce:te):Y.last_lit&&(H(Y,!1),Y.strm.avail_out===0)?I:$}(O,se):i[O.level].func(O,se);if(ue!==ce&&ue!==te||(O.status=666),ue===I||ue===ce)return C.avail_out===0&&(O.last_flush=-1),y;if(ue===$&&(se===1?a._tr_align(O):se!==5&&(a._tr_stored_block(O,0,0,!1),se===3&&(ae(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),K(C),C.avail_out===0))return O.last_flush=-1,y}return se!==g?y:O.wrap<=0?1:(O.wrap===2?(he(O,255&C.adler),he(O,C.adler>>8&255),he(O,C.adler>>16&255),he(O,C.adler>>24&255),he(O,255&C.total_in),he(O,C.total_in>>8&255),he(O,C.total_in>>16&255),he(O,C.total_in>>24&255)):(ee(O,C.adler>>>16),ee(O,65535&C.adler)),K(C),0<O.wrap&&(O.wrap=-O.wrap),O.pending!==0?y:1)},s.deflateEnd=function(C){var se;return C&&C.state?(se=C.state.status)!==P&&se!==69&&se!==73&&se!==91&&se!==103&&se!==D&&se!==666?ne(C,w):(C.state=null,se===D?ne(C,-3):y):w},s.deflateSetDictionary=function(C,se){var Z,O,B,q,ie,ue,Y,oe,ye=se.length;if(!C||!C.state||(q=(Z=C.state).wrap)===2||q===1&&Z.status!==P||Z.lookahead)return w;for(q===1&&(C.adler=l(C.adler,se,ye,0)),Z.wrap=0,ye>=Z.w_size&&(q===0&&(ae(Z.head),Z.strstart=0,Z.block_start=0,Z.insert=0),oe=new o.Buf8(Z.w_size),o.arraySet(oe,se,ye-Z.w_size,Z.w_size,0),se=oe,ye=Z.w_size),ie=C.avail_in,ue=C.next_in,Y=C.input,C.avail_in=ye,C.next_in=0,C.input=se,Ie(Z);Z.lookahead>=A;){for(O=Z.strstart,B=Z.lookahead-(A-1);Z.ins_h=(Z.ins_h<<Z.hash_shift^Z.window[O+A-1])&Z.hash_mask,Z.prev[O&Z.w_mask]=Z.head[Z.ins_h],Z.head[Z.ins_h]=O,O++,--B;);Z.strstart=O,Z.lookahead=A-1,Ie(Z)}return Z.strstart+=Z.lookahead,Z.block_start=Z.strstart,Z.insert=Z.lookahead,Z.lookahead=0,Z.match_length=Z.prev_length=A-1,Z.match_available=0,C.next_in=ue,C.input=Y,C.avail_in=ie,Z.wrap=q,y},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,l,c,d,m,g,y,w,x,_,v,E,T,N,L,U,k,R,A,M,V,P,D,I,$;a=i.state,l=i.next_in,I=i.input,c=l+(i.avail_in-5),d=i.next_out,$=i.output,m=d-(o-i.avail_out),g=d+(i.avail_out-257),y=a.dmax,w=a.wsize,x=a.whave,_=a.wnext,v=a.window,E=a.hold,T=a.bits,N=a.lencode,L=a.distcode,U=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{T<15&&(E+=I[l++]<<T,T+=8,E+=I[l++]<<T,T+=8),R=N[E&U];t:for(;;){if(E>>>=A=R>>>24,T-=A,(A=R>>>16&255)===0)$[d++]=65535&R;else{if(!(16&A)){if(!(64&A)){R=N[(65535&R)+(E&(1<<A)-1)];continue t}if(32&A){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}M=65535&R,(A&=15)&&(T<A&&(E+=I[l++]<<T,T+=8),M+=E&(1<<A)-1,E>>>=A,T-=A),T<15&&(E+=I[l++]<<T,T+=8,E+=I[l++]<<T,T+=8),R=L[E&k];n:for(;;){if(E>>>=A=R>>>24,T-=A,!(16&(A=R>>>16&255))){if(!(64&A)){R=L[(65535&R)+(E&(1<<A)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(V=65535&R,T<(A&=15)&&(E+=I[l++]<<T,(T+=8)<A&&(E+=I[l++]<<T,T+=8)),y<(V+=E&(1<<A)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(E>>>=A,T-=A,(A=d-m)<V){if(x<(A=V-A)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(D=v,(P=0)===_){if(P+=w-A,A<M){for(M-=A;$[d++]=v[P++],--A;);P=d-V,D=$}}else if(_<A){if(P+=w+_-A,(A-=_)<M){for(M-=A;$[d++]=v[P++],--A;);if(P=0,_<M){for(M-=A=_;$[d++]=v[P++],--A;);P=d-V,D=$}}}else if(P+=_-A,A<M){for(M-=A;$[d++]=v[P++],--A;);P=d-V,D=$}for(;2<M;)$[d++]=D[P++],$[d++]=D[P++],$[d++]=D[P++],M-=3;M&&($[d++]=D[P++],1<M&&($[d++]=D[P++]))}else{for(P=d-V;$[d++]=$[P++],$[d++]=$[P++],$[d++]=$[P++],2<(M-=3););M&&($[d++]=$[P++],1<M&&($[d++]=$[P++]))}break}}break}}while(l<c&&d<g);l-=M=T>>3,E&=(1<<(T-=M<<3))-1,i.next_in=l,i.next_out=d,i.avail_in=l<c?c-l+5:5-(l-c),i.avail_out=d<g?g-d+257:257-(d-g),a.hold=E,a.bits=T}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),d=1,m=2,g=0,y=-2,w=1,x=852,_=592;function v(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(P){var D;return P&&P.state?(D=P.state,P.total_in=P.total_out=D.total=0,P.msg="",D.wrap&&(P.adler=1&D.wrap),D.mode=w,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new i.Buf32(x),D.distcode=D.distdyn=new i.Buf32(_),D.sane=1,D.back=-1,g):y}function N(P){var D;return P&&P.state?((D=P.state).wsize=0,D.whave=0,D.wnext=0,T(P)):y}function L(P,D){var I,$;return P&&P.state?($=P.state,D<0?(I=0,D=-D):(I=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?y:($.window!==null&&$.wbits!==D&&($.window=null),$.wrap=I,$.wbits=D,N(P))):y}function U(P,D){var I,$;return P?($=new E,(P.state=$).window=null,(I=L(P,D))!==g&&(P.state=null),I):y}var k,R,A=!0;function M(P){if(A){var D;for(k=new i.Buf32(512),R=new i.Buf32(32),D=0;D<144;)P.lens[D++]=8;for(;D<256;)P.lens[D++]=9;for(;D<280;)P.lens[D++]=7;for(;D<288;)P.lens[D++]=8;for(c(d,P.lens,0,288,k,0,P.work,{bits:9}),D=0;D<32;)P.lens[D++]=5;c(m,P.lens,0,32,R,0,P.work,{bits:5}),A=!1}P.lencode=k,P.lenbits=9,P.distcode=R,P.distbits=5}function V(P,D,I,$){var ce,te=P.state;return te.window===null&&(te.wsize=1<<te.wbits,te.wnext=0,te.whave=0,te.window=new i.Buf8(te.wsize)),$>=te.wsize?(i.arraySet(te.window,D,I-te.wsize,te.wsize,0),te.wnext=0,te.whave=te.wsize):($<(ce=te.wsize-te.wnext)&&(ce=$),i.arraySet(te.window,D,I-$,ce,te.wnext),($-=ce)?(i.arraySet(te.window,D,I-$,$,0),te.wnext=$,te.whave=te.wsize):(te.wnext+=ce,te.wnext===te.wsize&&(te.wnext=0),te.whave<te.wsize&&(te.whave+=ce))),0}s.inflateReset=N,s.inflateReset2=L,s.inflateResetKeep=T,s.inflateInit=function(P){return U(P,15)},s.inflateInit2=U,s.inflate=function(P,D){var I,$,ce,te,ne,Q,ae,K,H,he,ee,X,Ie,Be,ke,je,Oe,He,lt,ze,C,se,Z,O,B=0,q=new i.Buf8(4),ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return y;(I=P.state).mode===12&&(I.mode=13),ne=P.next_out,ce=P.output,ae=P.avail_out,te=P.next_in,$=P.input,Q=P.avail_in,K=I.hold,H=I.bits,he=Q,ee=ae,se=g;e:for(;;)switch(I.mode){case w:if(I.wrap===0){I.mode=13;break}for(;H<16;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}if(2&I.wrap&&K===35615){q[I.check=0]=255&K,q[1]=K>>>8&255,I.check=a(I.check,q,2,0),H=K=0,I.mode=2;break}if(I.flags=0,I.head&&(I.head.done=!1),!(1&I.wrap)||(((255&K)<<8)+(K>>8))%31){P.msg="incorrect header check",I.mode=30;break}if((15&K)!=8){P.msg="unknown compression method",I.mode=30;break}if(H-=4,C=8+(15&(K>>>=4)),I.wbits===0)I.wbits=C;else if(C>I.wbits){P.msg="invalid window size",I.mode=30;break}I.dmax=1<<C,P.adler=I.check=1,I.mode=512&K?10:12,H=K=0;break;case 2:for(;H<16;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}if(I.flags=K,(255&I.flags)!=8){P.msg="unknown compression method",I.mode=30;break}if(57344&I.flags){P.msg="unknown header flags set",I.mode=30;break}I.head&&(I.head.text=K>>8&1),512&I.flags&&(q[0]=255&K,q[1]=K>>>8&255,I.check=a(I.check,q,2,0)),H=K=0,I.mode=3;case 3:for(;H<32;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}I.head&&(I.head.time=K),512&I.flags&&(q[0]=255&K,q[1]=K>>>8&255,q[2]=K>>>16&255,q[3]=K>>>24&255,I.check=a(I.check,q,4,0)),H=K=0,I.mode=4;case 4:for(;H<16;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}I.head&&(I.head.xflags=255&K,I.head.os=K>>8),512&I.flags&&(q[0]=255&K,q[1]=K>>>8&255,I.check=a(I.check,q,2,0)),H=K=0,I.mode=5;case 5:if(1024&I.flags){for(;H<16;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}I.length=K,I.head&&(I.head.extra_len=K),512&I.flags&&(q[0]=255&K,q[1]=K>>>8&255,I.check=a(I.check,q,2,0)),H=K=0}else I.head&&(I.head.extra=null);I.mode=6;case 6:if(1024&I.flags&&(Q<(X=I.length)&&(X=Q),X&&(I.head&&(C=I.head.extra_len-I.length,I.head.extra||(I.head.extra=new Array(I.head.extra_len)),i.arraySet(I.head.extra,$,te,X,C)),512&I.flags&&(I.check=a(I.check,$,X,te)),Q-=X,te+=X,I.length-=X),I.length))break e;I.length=0,I.mode=7;case 7:if(2048&I.flags){if(Q===0)break e;for(X=0;C=$[te+X++],I.head&&C&&I.length<65536&&(I.head.name+=String.fromCharCode(C)),C&&X<Q;);if(512&I.flags&&(I.check=a(I.check,$,X,te)),Q-=X,te+=X,C)break e}else I.head&&(I.head.name=null);I.length=0,I.mode=8;case 8:if(4096&I.flags){if(Q===0)break e;for(X=0;C=$[te+X++],I.head&&C&&I.length<65536&&(I.head.comment+=String.fromCharCode(C)),C&&X<Q;);if(512&I.flags&&(I.check=a(I.check,$,X,te)),Q-=X,te+=X,C)break e}else I.head&&(I.head.comment=null);I.mode=9;case 9:if(512&I.flags){for(;H<16;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}if(K!==(65535&I.check)){P.msg="header crc mismatch",I.mode=30;break}H=K=0}I.head&&(I.head.hcrc=I.flags>>9&1,I.head.done=!0),P.adler=I.check=0,I.mode=12;break;case 10:for(;H<32;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}P.adler=I.check=v(K),H=K=0,I.mode=11;case 11:if(I.havedict===0)return P.next_out=ne,P.avail_out=ae,P.next_in=te,P.avail_in=Q,I.hold=K,I.bits=H,2;P.adler=I.check=1,I.mode=12;case 12:if(D===5||D===6)break e;case 13:if(I.last){K>>>=7&H,H-=7&H,I.mode=27;break}for(;H<3;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}switch(I.last=1&K,H-=1,3&(K>>>=1)){case 0:I.mode=14;break;case 1:if(M(I),I.mode=20,D!==6)break;K>>>=2,H-=2;break e;case 2:I.mode=17;break;case 3:P.msg="invalid block type",I.mode=30}K>>>=2,H-=2;break;case 14:for(K>>>=7&H,H-=7&H;H<32;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}if((65535&K)!=(K>>>16^65535)){P.msg="invalid stored block lengths",I.mode=30;break}if(I.length=65535&K,H=K=0,I.mode=15,D===6)break e;case 15:I.mode=16;case 16:if(X=I.length){if(Q<X&&(X=Q),ae<X&&(X=ae),X===0)break e;i.arraySet(ce,$,te,X,ne),Q-=X,te+=X,ae-=X,ne+=X,I.length-=X;break}I.mode=12;break;case 17:for(;H<14;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}if(I.nlen=257+(31&K),K>>>=5,H-=5,I.ndist=1+(31&K),K>>>=5,H-=5,I.ncode=4+(15&K),K>>>=4,H-=4,286<I.nlen||30<I.ndist){P.msg="too many length or distance symbols",I.mode=30;break}I.have=0,I.mode=18;case 18:for(;I.have<I.ncode;){for(;H<3;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}I.lens[ie[I.have++]]=7&K,K>>>=3,H-=3}for(;I.have<19;)I.lens[ie[I.have++]]=0;if(I.lencode=I.lendyn,I.lenbits=7,Z={bits:I.lenbits},se=c(0,I.lens,0,19,I.lencode,0,I.work,Z),I.lenbits=Z.bits,se){P.msg="invalid code lengths set",I.mode=30;break}I.have=0,I.mode=19;case 19:for(;I.have<I.nlen+I.ndist;){for(;je=(B=I.lencode[K&(1<<I.lenbits)-1])>>>16&255,Oe=65535&B,!((ke=B>>>24)<=H);){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}if(Oe<16)K>>>=ke,H-=ke,I.lens[I.have++]=Oe;else{if(Oe===16){for(O=ke+2;H<O;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}if(K>>>=ke,H-=ke,I.have===0){P.msg="invalid bit length repeat",I.mode=30;break}C=I.lens[I.have-1],X=3+(3&K),K>>>=2,H-=2}else if(Oe===17){for(O=ke+3;H<O;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}H-=ke,C=0,X=3+(7&(K>>>=ke)),K>>>=3,H-=3}else{for(O=ke+7;H<O;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}H-=ke,C=0,X=11+(127&(K>>>=ke)),K>>>=7,H-=7}if(I.have+X>I.nlen+I.ndist){P.msg="invalid bit length repeat",I.mode=30;break}for(;X--;)I.lens[I.have++]=C}}if(I.mode===30)break;if(I.lens[256]===0){P.msg="invalid code -- missing end-of-block",I.mode=30;break}if(I.lenbits=9,Z={bits:I.lenbits},se=c(d,I.lens,0,I.nlen,I.lencode,0,I.work,Z),I.lenbits=Z.bits,se){P.msg="invalid literal/lengths set",I.mode=30;break}if(I.distbits=6,I.distcode=I.distdyn,Z={bits:I.distbits},se=c(m,I.lens,I.nlen,I.ndist,I.distcode,0,I.work,Z),I.distbits=Z.bits,se){P.msg="invalid distances set",I.mode=30;break}if(I.mode=20,D===6)break e;case 20:I.mode=21;case 21:if(6<=Q&&258<=ae){P.next_out=ne,P.avail_out=ae,P.next_in=te,P.avail_in=Q,I.hold=K,I.bits=H,l(P,ee),ne=P.next_out,ce=P.output,ae=P.avail_out,te=P.next_in,$=P.input,Q=P.avail_in,K=I.hold,H=I.bits,I.mode===12&&(I.back=-1);break}for(I.back=0;je=(B=I.lencode[K&(1<<I.lenbits)-1])>>>16&255,Oe=65535&B,!((ke=B>>>24)<=H);){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}if(je&&!(240&je)){for(He=ke,lt=je,ze=Oe;je=(B=I.lencode[ze+((K&(1<<He+lt)-1)>>He)])>>>16&255,Oe=65535&B,!(He+(ke=B>>>24)<=H);){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}K>>>=He,H-=He,I.back+=He}if(K>>>=ke,H-=ke,I.back+=ke,I.length=Oe,je===0){I.mode=26;break}if(32&je){I.back=-1,I.mode=12;break}if(64&je){P.msg="invalid literal/length code",I.mode=30;break}I.extra=15&je,I.mode=22;case 22:if(I.extra){for(O=I.extra;H<O;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}I.length+=K&(1<<I.extra)-1,K>>>=I.extra,H-=I.extra,I.back+=I.extra}I.was=I.length,I.mode=23;case 23:for(;je=(B=I.distcode[K&(1<<I.distbits)-1])>>>16&255,Oe=65535&B,!((ke=B>>>24)<=H);){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}if(!(240&je)){for(He=ke,lt=je,ze=Oe;je=(B=I.distcode[ze+((K&(1<<He+lt)-1)>>He)])>>>16&255,Oe=65535&B,!(He+(ke=B>>>24)<=H);){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}K>>>=He,H-=He,I.back+=He}if(K>>>=ke,H-=ke,I.back+=ke,64&je){P.msg="invalid distance code",I.mode=30;break}I.offset=Oe,I.extra=15&je,I.mode=24;case 24:if(I.extra){for(O=I.extra;H<O;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}I.offset+=K&(1<<I.extra)-1,K>>>=I.extra,H-=I.extra,I.back+=I.extra}if(I.offset>I.dmax){P.msg="invalid distance too far back",I.mode=30;break}I.mode=25;case 25:if(ae===0)break e;if(X=ee-ae,I.offset>X){if((X=I.offset-X)>I.whave&&I.sane){P.msg="invalid distance too far back",I.mode=30;break}Ie=X>I.wnext?(X-=I.wnext,I.wsize-X):I.wnext-X,X>I.length&&(X=I.length),Be=I.window}else Be=ce,Ie=ne-I.offset,X=I.length;for(ae<X&&(X=ae),ae-=X,I.length-=X;ce[ne++]=Be[Ie++],--X;);I.length===0&&(I.mode=21);break;case 26:if(ae===0)break e;ce[ne++]=I.length,ae--,I.mode=21;break;case 27:if(I.wrap){for(;H<32;){if(Q===0)break e;Q--,K|=$[te++]<<H,H+=8}if(ee-=ae,P.total_out+=ee,I.total+=ee,ee&&(P.adler=I.check=I.flags?a(I.check,ce,ee,ne-ee):o(I.check,ce,ee,ne-ee)),ee=ae,(I.flags?K:v(K))!==I.check){P.msg="incorrect data check",I.mode=30;break}H=K=0}I.mode=28;case 28:if(I.wrap&&I.flags){for(;H<32;){if(Q===0)break e;Q--,K+=$[te++]<<H,H+=8}if(K!==(4294967295&I.total)){P.msg="incorrect length check",I.mode=30;break}H=K=0}I.mode=29;case 29:se=1;break e;case 30:se=-3;break e;case 31:return-4;case 32:default:return y}return P.next_out=ne,P.avail_out=ae,P.next_in=te,P.avail_in=Q,I.hold=K,I.bits=H,(I.wsize||ee!==P.avail_out&&I.mode<30&&(I.mode<27||D!==4))&&V(P,P.output,P.next_out,ee-P.avail_out)?(I.mode=31,-4):(he-=P.avail_in,ee-=P.avail_out,P.total_in+=he,P.total_out+=ee,I.total+=ee,I.wrap&&ee&&(P.adler=I.check=I.flags?a(I.check,ce,ee,P.next_out-ee):o(I.check,ce,ee,P.next_out-ee)),P.data_type=I.bits+(I.last?64:0)+(I.mode===12?128:0)+(I.mode===20||I.mode===15?256:0),(he==0&&ee===0||D===4)&&se===g&&(se=-5),se)},s.inflateEnd=function(P){if(!P||!P.state)return y;var D=P.state;return D.window&&(D.window=null),P.state=null,g},s.inflateGetHeader=function(P,D){var I;return P&&P.state&&2&(I=P.state).wrap?((I.head=D).done=!1,g):y},s.inflateSetDictionary=function(P,D){var I,$=D.length;return P&&P.state?(I=P.state).wrap!==0&&I.mode!==11?y:I.mode===11&&o(1,D,$,0)!==I.check?-3:V(P,D,$,$)?(I.mode=31,-4):(I.havedict=1,g):y},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,m,g,y,w,x,_,v){var E,T,N,L,U,k,R,A,M,V=v.bits,P=0,D=0,I=0,$=0,ce=0,te=0,ne=0,Q=0,ae=0,K=0,H=null,he=0,ee=new i.Buf16(16),X=new i.Buf16(16),Ie=null,Be=0;for(P=0;P<=15;P++)ee[P]=0;for(D=0;D<y;D++)ee[m[g+D]]++;for(ce=V,$=15;1<=$&&ee[$]===0;$--);if($<ce&&(ce=$),$===0)return w[x++]=20971520,w[x++]=20971520,v.bits=1,0;for(I=1;I<$&&ee[I]===0;I++);for(ce<I&&(ce=I),P=Q=1;P<=15;P++)if(Q<<=1,(Q-=ee[P])<0)return-1;if(0<Q&&(d===0||$!==1))return-1;for(X[1]=0,P=1;P<15;P++)X[P+1]=X[P]+ee[P];for(D=0;D<y;D++)m[g+D]!==0&&(_[X[m[g+D]]++]=D);if(k=d===0?(H=Ie=_,19):d===1?(H=o,he-=257,Ie=a,Be-=257,256):(H=l,Ie=c,-1),P=I,U=x,ne=D=K=0,N=-1,L=(ae=1<<(te=ce))-1,d===1&&852<ae||d===2&&592<ae)return 1;for(;;){for(R=P-ne,M=_[D]<k?(A=0,_[D]):_[D]>k?(A=Ie[Be+_[D]],H[he+_[D]]):(A=96,0),E=1<<P-ne,I=T=1<<te;w[U+(K>>ne)+(T-=E)]=R<<24|A<<16|M|0,T!==0;);for(E=1<<P-1;K&E;)E>>=1;if(E!==0?(K&=E-1,K+=E):K=0,D++,--ee[P]==0){if(P===$)break;P=m[g+_[D]]}if(ce<P&&(K&L)!==N){for(ne===0&&(ne=ce),U+=I,Q=1<<(te=P-ne);te+ne<$&&!((Q-=ee[te+ne])<=0);)te++,Q<<=1;if(ae+=1<<te,d===1&&852<ae||d===2&&592<ae)return 1;w[N=K&L]=ce<<24|te<<16|U-x|0}}return K!==0&&(w[U+K]=P-ne<<24|64<<16|0),v.bits=ce,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function l(B){for(var q=B.length;0<=--q;)B[q]=0}var c=0,d=29,m=256,g=m+1+d,y=30,w=19,x=2*g+1,_=15,v=16,E=7,T=256,N=16,L=17,U=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(g+2));l(V);var P=new Array(2*y);l(P);var D=new Array(512);l(D);var I=new Array(256);l(I);var $=new Array(d);l($);var ce,te,ne,Q=new Array(y);function ae(B,q,ie,ue,Y){this.static_tree=B,this.extra_bits=q,this.extra_base=ie,this.elems=ue,this.max_length=Y,this.has_stree=B&&B.length}function K(B,q){this.dyn_tree=B,this.max_code=0,this.stat_desc=q}function H(B){return B<256?D[B]:D[256+(B>>>7)]}function he(B,q){B.pending_buf[B.pending++]=255&q,B.pending_buf[B.pending++]=q>>>8&255}function ee(B,q,ie){B.bi_valid>v-ie?(B.bi_buf|=q<<B.bi_valid&65535,he(B,B.bi_buf),B.bi_buf=q>>v-B.bi_valid,B.bi_valid+=ie-v):(B.bi_buf|=q<<B.bi_valid&65535,B.bi_valid+=ie)}function X(B,q,ie){ee(B,ie[2*q],ie[2*q+1])}function Ie(B,q){for(var ie=0;ie|=1&B,B>>>=1,ie<<=1,0<--q;);return ie>>>1}function Be(B,q,ie){var ue,Y,oe=new Array(_+1),ye=0;for(ue=1;ue<=_;ue++)oe[ue]=ye=ye+ie[ue-1]<<1;for(Y=0;Y<=q;Y++){var fe=B[2*Y+1];fe!==0&&(B[2*Y]=Ie(oe[fe]++,fe))}}function ke(B){var q;for(q=0;q<g;q++)B.dyn_ltree[2*q]=0;for(q=0;q<y;q++)B.dyn_dtree[2*q]=0;for(q=0;q<w;q++)B.bl_tree[2*q]=0;B.dyn_ltree[2*T]=1,B.opt_len=B.static_len=0,B.last_lit=B.matches=0}function je(B){8<B.bi_valid?he(B,B.bi_buf):0<B.bi_valid&&(B.pending_buf[B.pending++]=B.bi_buf),B.bi_buf=0,B.bi_valid=0}function Oe(B,q,ie,ue){var Y=2*q,oe=2*ie;return B[Y]<B[oe]||B[Y]===B[oe]&&ue[q]<=ue[ie]}function He(B,q,ie){for(var ue=B.heap[ie],Y=ie<<1;Y<=B.heap_len&&(Y<B.heap_len&&Oe(q,B.heap[Y+1],B.heap[Y],B.depth)&&Y++,!Oe(q,ue,B.heap[Y],B.depth));)B.heap[ie]=B.heap[Y],ie=Y,Y<<=1;B.heap[ie]=ue}function lt(B,q,ie){var ue,Y,oe,ye,fe=0;if(B.last_lit!==0)for(;ue=B.pending_buf[B.d_buf+2*fe]<<8|B.pending_buf[B.d_buf+2*fe+1],Y=B.pending_buf[B.l_buf+fe],fe++,ue===0?X(B,Y,q):(X(B,(oe=I[Y])+m+1,q),(ye=k[oe])!==0&&ee(B,Y-=$[oe],ye),X(B,oe=H(--ue),ie),(ye=R[oe])!==0&&ee(B,ue-=Q[oe],ye)),fe<B.last_lit;);X(B,T,q)}function ze(B,q){var ie,ue,Y,oe=q.dyn_tree,ye=q.stat_desc.static_tree,fe=q.stat_desc.has_stree,xe=q.stat_desc.elems,Ce=-1;for(B.heap_len=0,B.heap_max=x,ie=0;ie<xe;ie++)oe[2*ie]!==0?(B.heap[++B.heap_len]=Ce=ie,B.depth[ie]=0):oe[2*ie+1]=0;for(;B.heap_len<2;)oe[2*(Y=B.heap[++B.heap_len]=Ce<2?++Ce:0)]=1,B.depth[Y]=0,B.opt_len--,fe&&(B.static_len-=ye[2*Y+1]);for(q.max_code=Ce,ie=B.heap_len>>1;1<=ie;ie--)He(B,oe,ie);for(Y=xe;ie=B.heap[1],B.heap[1]=B.heap[B.heap_len--],He(B,oe,1),ue=B.heap[1],B.heap[--B.heap_max]=ie,B.heap[--B.heap_max]=ue,oe[2*Y]=oe[2*ie]+oe[2*ue],B.depth[Y]=(B.depth[ie]>=B.depth[ue]?B.depth[ie]:B.depth[ue])+1,oe[2*ie+1]=oe[2*ue+1]=Y,B.heap[1]=Y++,He(B,oe,1),2<=B.heap_len;);B.heap[--B.heap_max]=B.heap[1],function(Pe,gt){var tn,At,z,G,me,ve,Ae=gt.dyn_tree,rt=gt.max_code,Re=gt.stat_desc.static_tree,_t=gt.stat_desc.has_stree,It=gt.stat_desc.extra_bits,Nt=gt.stat_desc.extra_base,nn=gt.stat_desc.max_length,Rt=0;for(G=0;G<=_;G++)Pe.bl_count[G]=0;for(Ae[2*Pe.heap[Pe.heap_max]+1]=0,tn=Pe.heap_max+1;tn<x;tn++)nn<(G=Ae[2*Ae[2*(At=Pe.heap[tn])+1]+1]+1)&&(G=nn,Rt++),Ae[2*At+1]=G,rt<At||(Pe.bl_count[G]++,me=0,Nt<=At&&(me=It[At-Nt]),ve=Ae[2*At],Pe.opt_len+=ve*(G+me),_t&&(Pe.static_len+=ve*(Re[2*At+1]+me)));if(Rt!==0){do{for(G=nn-1;Pe.bl_count[G]===0;)G--;Pe.bl_count[G]--,Pe.bl_count[G+1]+=2,Pe.bl_count[nn]--,Rt-=2}while(0<Rt);for(G=nn;G!==0;G--)for(At=Pe.bl_count[G];At!==0;)rt<(z=Pe.heap[--tn])||(Ae[2*z+1]!==G&&(Pe.opt_len+=(G-Ae[2*z+1])*Ae[2*z],Ae[2*z+1]=G),At--)}}(B,q),Be(oe,Ce,B.bl_count)}function C(B,q,ie){var ue,Y,oe=-1,ye=q[1],fe=0,xe=7,Ce=4;for(ye===0&&(xe=138,Ce=3),q[2*(ie+1)+1]=65535,ue=0;ue<=ie;ue++)Y=ye,ye=q[2*(ue+1)+1],++fe<xe&&Y===ye||(fe<Ce?B.bl_tree[2*Y]+=fe:Y!==0?(Y!==oe&&B.bl_tree[2*Y]++,B.bl_tree[2*N]++):fe<=10?B.bl_tree[2*L]++:B.bl_tree[2*U]++,oe=Y,Ce=(fe=0)===ye?(xe=138,3):Y===ye?(xe=6,3):(xe=7,4))}function se(B,q,ie){var ue,Y,oe=-1,ye=q[1],fe=0,xe=7,Ce=4;for(ye===0&&(xe=138,Ce=3),ue=0;ue<=ie;ue++)if(Y=ye,ye=q[2*(ue+1)+1],!(++fe<xe&&Y===ye)){if(fe<Ce)for(;X(B,Y,B.bl_tree),--fe!=0;);else Y!==0?(Y!==oe&&(X(B,Y,B.bl_tree),fe--),X(B,N,B.bl_tree),ee(B,fe-3,2)):fe<=10?(X(B,L,B.bl_tree),ee(B,fe-3,3)):(X(B,U,B.bl_tree),ee(B,fe-11,7));oe=Y,Ce=(fe=0)===ye?(xe=138,3):Y===ye?(xe=6,3):(xe=7,4)}}l(Q);var Z=!1;function O(B,q,ie,ue){ee(B,(c<<1)+(ue?1:0),3),function(Y,oe,ye,fe){je(Y),he(Y,ye),he(Y,~ye),i.arraySet(Y.pending_buf,Y.window,oe,ye,Y.pending),Y.pending+=ye}(B,q,ie)}s._tr_init=function(B){Z||(function(){var q,ie,ue,Y,oe,ye=new Array(_+1);for(Y=ue=0;Y<d-1;Y++)for($[Y]=ue,q=0;q<1<<k[Y];q++)I[ue++]=Y;for(I[ue-1]=Y,Y=oe=0;Y<16;Y++)for(Q[Y]=oe,q=0;q<1<<R[Y];q++)D[oe++]=Y;for(oe>>=7;Y<y;Y++)for(Q[Y]=oe<<7,q=0;q<1<<R[Y]-7;q++)D[256+oe++]=Y;for(ie=0;ie<=_;ie++)ye[ie]=0;for(q=0;q<=143;)V[2*q+1]=8,q++,ye[8]++;for(;q<=255;)V[2*q+1]=9,q++,ye[9]++;for(;q<=279;)V[2*q+1]=7,q++,ye[7]++;for(;q<=287;)V[2*q+1]=8,q++,ye[8]++;for(Be(V,g+1,ye),q=0;q<y;q++)P[2*q+1]=5,P[2*q]=Ie(q,5);ce=new ae(V,k,m+1,g,_),te=new ae(P,R,0,y,_),ne=new ae(new Array(0),A,0,w,E)}(),Z=!0),B.l_desc=new K(B.dyn_ltree,ce),B.d_desc=new K(B.dyn_dtree,te),B.bl_desc=new K(B.bl_tree,ne),B.bi_buf=0,B.bi_valid=0,ke(B)},s._tr_stored_block=O,s._tr_flush_block=function(B,q,ie,ue){var Y,oe,ye=0;0<B.level?(B.strm.data_type===2&&(B.strm.data_type=function(fe){var xe,Ce=4093624447;for(xe=0;xe<=31;xe++,Ce>>>=1)if(1&Ce&&fe.dyn_ltree[2*xe]!==0)return o;if(fe.dyn_ltree[18]!==0||fe.dyn_ltree[20]!==0||fe.dyn_ltree[26]!==0)return a;for(xe=32;xe<m;xe++)if(fe.dyn_ltree[2*xe]!==0)return a;return o}(B)),ze(B,B.l_desc),ze(B,B.d_desc),ye=function(fe){var xe;for(C(fe,fe.dyn_ltree,fe.l_desc.max_code),C(fe,fe.dyn_dtree,fe.d_desc.max_code),ze(fe,fe.bl_desc),xe=w-1;3<=xe&&fe.bl_tree[2*M[xe]+1]===0;xe--);return fe.opt_len+=3*(xe+1)+5+5+4,xe}(B),Y=B.opt_len+3+7>>>3,(oe=B.static_len+3+7>>>3)<=Y&&(Y=oe)):Y=oe=ie+5,ie+4<=Y&&q!==-1?O(B,q,ie,ue):B.strategy===4||oe===Y?(ee(B,2+(ue?1:0),3),lt(B,V,P)):(ee(B,4+(ue?1:0),3),function(fe,xe,Ce,Pe){var gt;for(ee(fe,xe-257,5),ee(fe,Ce-1,5),ee(fe,Pe-4,4),gt=0;gt<Pe;gt++)ee(fe,fe.bl_tree[2*M[gt]+1],3);se(fe,fe.dyn_ltree,xe-1),se(fe,fe.dyn_dtree,Ce-1)}(B,B.l_desc.max_code+1,B.d_desc.max_code+1,ye+1),lt(B,B.dyn_ltree,B.dyn_dtree)),ke(B),ue&&je(B)},s._tr_tally=function(B,q,ie){return B.pending_buf[B.d_buf+2*B.last_lit]=q>>>8&255,B.pending_buf[B.d_buf+2*B.last_lit+1]=255&q,B.pending_buf[B.l_buf+B.last_lit]=255&ie,B.last_lit++,q===0?B.dyn_ltree[2*ie]++:(B.matches++,q--,B.dyn_ltree[2*(I[ie]+m+1)]++,B.dyn_dtree[2*H(q)]++),B.last_lit===B.lit_bufsize-1},s._tr_align=function(B){ee(B,2,3),X(B,T,V),function(q){q.bi_valid===16?(he(q,q.bi_buf),q.bi_buf=0,q.bi_valid=0):8<=q.bi_valid&&(q.pending_buf[q.pending++]=255&q.bi_buf,q.bi_buf>>=8,q.bi_valid-=8)}(B)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var l,c,d,m,g=1,y={},w=!1,x=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,l={}.toString.call(o.process)==="[object process]"?function(N){process.nextTick(function(){E(N)})}:function(){if(o.postMessage&&!o.importScripts){var N=!0,L=o.onmessage;return o.onmessage=function(){N=!1},o.postMessage("","*"),o.onmessage=L,N}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",T,!1):o.attachEvent("onmessage",T),function(N){o.postMessage(m+N,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(N){E(N.data)},function(N){d.port2.postMessage(N)}):x&&"onreadystatechange"in x.createElement("script")?(c=x.documentElement,function(N){var L=x.createElement("script");L.onreadystatechange=function(){E(N),L.onreadystatechange=null,c.removeChild(L),L=null},c.appendChild(L)}):function(N){setTimeout(E,0,N)},_.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var L=new Array(arguments.length-1),U=0;U<L.length;U++)L[U]=arguments[U+1];var k={callback:N,args:L};return y[g]=k,l(g),g++},_.clearImmediate=v}function v(N){delete y[N]}function E(N){if(w)setTimeout(E,0,N);else{var L=y[N];if(L){w=!0;try{(function(U){var k=U.callback,R=U.args;switch(R.length){case 0:k();break;case 1:k(R[0]);break;case 2:k(R[0],R[1]);break;case 3:k(R[0],R[1],R[2]);break;default:k.apply(a,R)}})(L)}finally{v(N),w=!1}}}}function T(N){N.source===o&&typeof N.data=="string"&&N.data.indexOf(m)===0&&E(+N.data.slice(m.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Yr<"u"?Yr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(fk);var c8=fk.exports;const d8=Sm(c8);var pk={exports:{}};(function(t,e){(function(n,r){r()})(Yr,function(){function n(c,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,d,m){var g=new XMLHttpRequest;g.open("GET",c),g.responseType="blob",g.onload=function(){l(g.response,d,m)},g.onerror=function(){console.error("could not download file")},g.send()}function s(c){var d=new XMLHttpRequest;d.open("HEAD",c,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function i(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Yr=="object"&&Yr.global===Yr?Yr:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,d,m){var g=o.URL||o.webkitURL,y=document.createElement("a");d=d||c.name||"download",y.download=d,y.rel="noopener",typeof c=="string"?(y.href=c,y.origin===location.origin?i(y):s(y.href)?r(c,d,m):i(y,y.target="_blank")):(y.href=g.createObjectURL(c),setTimeout(function(){g.revokeObjectURL(y.href)},4e4),setTimeout(function(){i(y)},0))}:"msSaveOrOpenBlob"in navigator?function(c,d,m){if(d=d||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,m),d);else if(s(c))r(c,d,m);else{var g=document.createElement("a");g.href=c,g.target="_blank",setTimeout(function(){i(g)})}}:function(c,d,m,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof c=="string")return r(c,d,m);var y=c.type==="application/octet-stream",w=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||y&&w||a)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var T=_.result;T=x?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=T:location=T,g=null},_.readAsDataURL(c)}else{var v=o.URL||o.webkitURL,E=v.createObjectURL(c);g?g.location=E:location.href=E,g=null,setTimeout(function(){v.revokeObjectURL(E)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(pk);var h8=pk.exports;const f8=Sm(h8),p8=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),u.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})]}),m8=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})}),g8=({onExit:t})=>{var xe,Ce,Pe,gt,tn,At;const[e,n]=F.useState(3),[r,s]=F.useState("portrait"),[i,o]=F.useState([]),[a,l]=F.useState([]),[c,d]=F.useState(-1),[m,g]=F.useState(null),[y,w]=F.useState(!1),[x,_]=F.useState(.25),[v,E]=F.useState(!0),[T,N]=F.useState("add"),[L,U]=F.useState("#ffffff"),k=1080,M=r==="square"?1080:1350,V=e*k,P=M,D=F.useRef(null),I=F.useRef(null),$=F.useRef(!1),ce=F.useRef({x:0,y:0}),te=F.useRef({x:0,y:0}),ne=F.useRef(!1),Q=F.useRef({x:0,y:0,w:0,h:0}),ae=F.useRef(0),K=F.useRef(.2),H=z=>{let G="";return z==="circle"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><circle cx="100" cy="100" r="100" fill="#1e293b"/></svg>':z==="square"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect width="200" height="200" fill="#334155"/></svg>':z==="triangle"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 10 L190 190 L10 190 Z" fill="#475569"/></svg>':z==="star"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="m100 10 25 60 65 5-50 45 15 65-55-35-55 35 15-65-50-45 65-5z" fill="#0f172a"/></svg>':z==="heart"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 180 C10 100 -20 50 40 20 C70 5 90 30 100 50 C110 30 130 5 160 20 C220 50 190 100 100 180 Z" fill="#ef4444"/></svg>':z==="text"&&(G='<svg xmlns="http://www.w3.org/2000/svg" width="300" height="100"><rect width="100%" height="100%" fill="transparent"/><text x="50%" y="50%" font-family="Arial" font-size="60" font-weight="bold" fill="#000000" text-anchor="middle" dominant-baseline="middle">Text Here</text></svg>'),`data:image/svg+xml;base64,${btoa(G)}`},he=z=>{const G=a.slice(0,c+1);G.push(z),l(G),d(G.length-1)},ee=()=>{if(c>0){const z=c-1;o(a[z]),d(z)}else c===0&&(o([]),d(-1))},X=z=>{o(z),he(z)},Ie=z=>{const G=new Image;G.onload=()=>{const me=G.width/G.height,ve={id:Date.now().toString(),src:z,x:V/2-G.width/2,y:P/2-G.height/2,width:G.width,height:G.height,originalAspectRatio:me,currentAspectRatio:me,rotation:0,scaleX:1,borderRadius:0,borderColor:"#000000",borderWidth:0,isGrayscale:!1,maskShape:"none"};ve.width>1200&&(ve.width=1200,ve.height=1200/ve.originalAspectRatio);const Ae=[...i,ve];X(Ae),g(ve.id),N("edit"),E(!0)},G.src=z},Be=z=>{if(z.target.files&&z.target.files[0]){const G=z.target.files[0],me=new FileReader;me.onload=ve=>{var Ae;(Ae=ve.target)!=null&&Ae.result&&Ie(ve.target.result)},me.readAsDataURL(G)}z.target.value=""},ke=()=>{if(!m)return;const z=i.filter(G=>G.id!==m);X(z),g(null),N("add")},je=()=>{if(!m)return;const z=i.find(G=>G.id===m);if(z){const G={...z,id:Date.now().toString(),x:z.x+50,y:z.y+50},me=[...i,G];X(me),g(G.id)}},Oe=(z,G=!0)=>{if(!m)return;const me=i.map(ve=>ve.id===m?{...ve,...z}:ve);G?X(me):o(me)},He=()=>{const z=i.find(G=>G.id===m);z&&Oe({rotation:(z.rotation+90)%360})},lt=()=>{const z=i.find(G=>G.id===m);z&&Oe({scaleX:z.scaleX*-1})},ze=()=>{if(!m)return;const z=i.find(ve=>ve.id===m);if(!z)return;let G=z.originalAspectRatio;Math.abs(z.currentAspectRatio-z.originalAspectRatio)<.01?G=1:Math.abs(z.currentAspectRatio-1)<.01?G=.8:Math.abs(z.currentAspectRatio-.8)<.01?G=1.77:G=z.originalAspectRatio;const me=z.width/G;Oe({currentAspectRatio:G,height:me})},C=z=>{o(G=>{const me=G.find(Ae=>Ae.id===z);return me?[...G.filter(Ae=>Ae.id!==z),me]:G})},se=z=>{if(!m)return;const G=i.findIndex(ve=>ve.id===m);if(G===-1)return;const me=[...i];if(z==="front"){const[ve]=me.splice(G,1);me.push(ve)}else if(z==="back"){const[ve]=me.splice(G,1);me.unshift(ve)}else z==="forward"&&G<me.length-1?[me[G],me[G+1]]=[me[G+1],me[G]]:z==="backward"&&G>0&&([me[G],me[G-1]]=[me[G-1],me[G]]);X(me)},Z=async()=>{w(!0);try{const z=document.createElement("canvas");z.width=V,z.height=P;const G=z.getContext("2d");if(!G)throw new Error("Canvas context failed");G.fillStyle=L,G.fillRect(0,0,V,P);const me=Re=>new Promise(_t=>{const It=new Image;It.crossOrigin="anonymous",It.onload=()=>{G.save();const Nt=Re.x+Re.width/2,nn=Re.y+Re.height/2;G.translate(Nt,nn),G.rotate(Re.rotation*Math.PI/180),G.scale(Re.scaleX,1),Re.isGrayscale&&(G.filter="grayscale(100%)");const Rt=Re.width,qt=Re.height,ar=-Rt/2,Jn=-qt/2;if(G.beginPath(),Re.maskShape==="circle"){const yn=Math.min(Rt,qt)/2;G.arc(0,0,yn,0,Math.PI*2)}else(Re.maskShape==="square"||Re.borderRadius>0)&&G.roundRect?G.roundRect(ar,Jn,Rt,qt,Re.borderRadius):G.rect(ar,Jn,Rt,qt);G.closePath(),G.save(),G.clip(),G.drawImage(It,ar,Jn,Rt,qt),G.restore(),G.filter="none",Re.borderWidth>0&&(G.lineWidth=Re.borderWidth,G.strokeStyle=Re.borderColor,G.stroke()),G.restore(),_t()},It.src=Re.src});await Promise.all(i.map(me));const ve=new d8,Ae=ve.folder("instagram-panorama");for(let Re=0;Re<e;Re++){const _t=document.createElement("canvas");_t.width=k,_t.height=M;const It=_t.getContext("2d");if(It){It.drawImage(z,Re*k,0,k,M,0,0,k,M);const Nt=await new Promise(nn=>_t.toBlob(nn,"image/jpeg",.95));Nt&&Ae&&Ae.file(`slide_${Re+1}.jpg`,Nt)}}const rt=await ve.generateAsync({type:"blob"});f8.saveAs(rt,"ig-panorama-slides.zip")}catch{alert("Gagal membuat zip.")}finally{w(!1)}},O=(z,G,me)=>{g(me),N("edit"),E(!0),C(me),$.current=!0,ce.current={x:z,y:G};const ve=i.find(Ae=>Ae.id===me);ve&&(te.current={x:ve.x,y:ve.y})},B=(z,G)=>{z.stopPropagation(),z.preventDefault();const me="touches"in z?z.touches[0].clientX:z.clientX,ve="touches"in z?z.touches[0].clientY:z.clientY;ne.current=!0;const Ae=i.find(rt=>rt.id===G);Ae&&(Q.current={x:me,y:ve,w:Ae.width,h:Ae.height})},q=(z,G)=>{if(ne.current&&m){const me=(z-Q.current.x)/x,ve=Math.max(50,Q.current.w+me);i.find(rt=>rt.id===m)&&o(rt=>rt.map(Re=>Re.id===m?{...Re,width:ve,height:ve/Re.currentAspectRatio}:Re));return}if($.current&&m){const me=(z-ce.current.x)/x,ve=(G-ce.current.y)/x;o(Ae=>Ae.map(rt=>rt.id===m?{...rt,x:te.current.x+me,y:te.current.y+ve}:rt))}},ie=()=>{($.current||ne.current)&&he(i),$.current=!1,ne.current=!1,ae.current=0},ue=z=>{if(z.touches.length===2){const G=Math.hypot(z.touches[0].clientX-z.touches[1].clientX,z.touches[0].clientY-z.touches[1].clientY);ae.current=G,K.current=x}},Y=z=>{if(z.touches.length===2&&ae.current>0){const me=Math.hypot(z.touches[0].clientX-z.touches[1].clientX,z.touches[0].clientY-z.touches[1].clientY)-ae.current,ve=Math.max(.05,Math.min(1.5,K.current+me*.001));_(ve)}},oe=()=>i.find(z=>z.id===m),ye=()=>_(z=>Math.min(z+.05,1.5)),fe=()=>_(z=>Math.max(z-.05,.05));return u.jsxs("div",{className:"h-[100dvh] bg-slate-50 text-slate-900 flex flex-col overflow-hidden font-sans relative",children:[u.jsx("style",{children:`
                    .no-scrollbar::-webkit-scrollbar { display: none; }
                    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
                `}),u.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 pointer-events-none flex justify-between items-start",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:t,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors",children:u.jsx(us,{className:"w-5 h-5"})}),u.jsx("button",{onClick:ee,disabled:c<0,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors disabled:opacity-50",children:u.jsx(bN,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"pointer-events-auto bg-white/90 backdrop-blur-md border border-slate-200 rounded-full flex items-center p-1 shadow-sm",children:[u.jsx("button",{onClick:fe,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:u.jsx(m8,{className:"w-4 h-4"})}),u.jsxs("div",{className:"px-2 text-xs font-mono font-bold text-slate-700 w-10 text-center select-none",children:[Math.round(x*100),"%"]}),u.jsx("button",{onClick:ye,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:u.jsx(p8,{className:"w-4 h-4"})})]}),u.jsx("button",{onClick:Z,disabled:y||i.length===0,className:"pointer-events-auto bg-slate-900 hover:bg-slate-800 text-white px-4 py-2.5 rounded-full shadow-lg shadow-slate-900/10 font-bold text-xs flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 border border-slate-800",children:y?"Saving...":u.jsxs(u.Fragment,{children:[u.jsx(yT,{className:"w-4 h-4"})," Save"]})})]}),u.jsx("div",{className:"flex-1 bg-slate-100 overflow-hidden relative flex flex-col",children:u.jsx("div",{className:"flex-1 overflow-auto no-scrollbar relative w-full h-full grid place-items-center p-8 canvas-bg touch-none transition-all duration-300",style:{paddingBottom:v?"140px":"0px"},ref:I,onClick:z=>{z.target===I.current&&g(null)},onMouseMove:z=>q(z.clientX,z.clientY),onTouchMove:z=>{if(z.touches.length===2){Y(z);return}q(z.touches[0].clientX,z.touches[0].clientY)},onMouseUp:ie,onTouchEnd:ie,onTouchStart:ue,children:u.jsxs("div",{className:"relative shadow-2xl transition-transform duration-75 ease-linear shrink-0",style:{width:V*x,height:P*x},children:[u.jsx("div",{className:"absolute inset-0 canvas-bg",style:{backgroundColor:L}}),u.jsx("div",{className:"absolute inset-0 overflow-hidden",children:i.map(z=>u.jsxs("div",{className:"absolute group",style:{left:z.x*x,top:z.y*x,width:z.width*x,height:z.height*x,transform:`rotate(${z.rotation}deg) scaleX(${z.scaleX})`,zIndex:m===z.id?50:1},children:[u.jsx("div",{className:`absolute -inset-0.5 pointer-events-none transition-opacity duration-200 z-50 ${m===z.id?"opacity-100":"opacity-0"}`,style:{border:"2px dashed #0f172a",borderRadius:z.maskShape==="circle"?"50%":`${z.borderRadius}px`}}),u.jsx("div",{style:{width:"100%",height:"100%",borderRadius:z.maskShape==="circle"?"50%":`${z.borderRadius}px`,overflow:"hidden",border:z.borderWidth>0?`${z.borderWidth*x}px solid ${z.borderColor}`:"none",filter:z.isGrayscale?"grayscale(100%)":"none",position:"relative"},onMouseDown:G=>O(G.clientX,G.clientY,z.id),onTouchStart:G=>{G.touches.length===1&&O(G.touches[0].clientX,G.touches[0].clientY,z.id)},children:u.jsx("img",{src:z.src,alt:"item",className:"w-full h-full select-none",draggable:!1,style:{objectFit:"cover"}})})]},z.id))}),m&&oe()&&u.jsxs("div",{className:"absolute pointer-events-auto z-[100]",style:{left:(oe().x+oe().width/2)*x,top:Math.max(-50,oe().y*x-60),transform:"translateX(-50%)"},onMouseDown:z=>z.stopPropagation(),onTouchStart:z=>z.stopPropagation(),children:[u.jsxs("div",{className:"bg-white/90 backdrop-blur-md text-slate-700 rounded-xl shadow-xl border border-slate-200 flex items-center p-1.5 gap-1",children:[u.jsx("button",{onClick:He,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:u.jsx(hN,{className:"w-4 h-4"})}),u.jsx("button",{onClick:lt,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:u.jsx(fN,{className:"w-4 h-4"})}),u.jsx("button",{onClick:ze,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-900",children:u.jsx(_N,{className:"w-4 h-4"})}),u.jsx("button",{onClick:je,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:u.jsx(pN,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1"}),u.jsx("button",{onClick:ke,className:"p-2 hover:bg-red-50 text-red-500 rounded-lg",children:u.jsx(Lr,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"w-3 h-3 bg-white/90 rotate-45 absolute -bottom-1.5 left-1/2 -translate-x-1/2 border-r border-b border-slate-200"})]}),i.map(z=>m===z.id&&u.jsxs("div",{className:"absolute pointer-events-none z-[51]",style:{left:z.x*x,top:z.y*x,width:z.width*x,height:z.height*x,transform:`rotate(${z.rotation}deg) scaleX(${z.scaleX})`},children:[u.jsx("div",{className:"absolute -bottom-3 -right-3 w-6 h-6 bg-slate-900 rounded-full border-2 border-white shadow-md pointer-events-auto flex items-center justify-center cursor-nwse-resize hover:scale-110 transition-transform",onMouseDown:G=>B(G,z.id),onTouchStart:G=>B(G,z.id),children:u.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),ne.current&&u.jsxs("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-[10px] px-2 py-1 rounded shadow whitespace-nowrap",children:[Math.round(z.width),"px"]})]},`resize-${z.id}`)),u.jsx("div",{className:"absolute inset-0 pointer-events-none z-20",children:Array.from({length:e-1}).map((z,G)=>u.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-dashed border-slate-400/50 flex flex-col justify-between items-center py-2 mix-blend-difference",style:{left:`${(G+1)/e*100}%`},children:u.jsx(cN,{className:"w-4 h-4 text-slate-600 opacity-80 bg-white/20 rounded-full p-0.5"})},G))}),u.jsx("div",{className:"absolute top-0 left-0 w-full flex pointer-events-none z-20",children:Array.from({length:e}).map((z,G)=>u.jsx("div",{className:"flex-1 border-r border-transparent h-6 flex items-center justify-center",children:u.jsxs("span",{className:"bg-white/80 text-slate-900 text-[9px] font-bold px-2 rounded-b backdrop-blur-sm shadow-sm border-x border-b border-slate-200",children:["Slide ",G+1]})},G))})]})})}),u.jsxs("div",{className:`fixed bottom-0 left-0 right-0 z-[60] flex flex-col bg-white border-t border-slate-200 transition-transform duration-300 ease-out shadow-[0_-10px_30px_-10px_rgba(0,0,0,0.05)] ${v?"translate-y-0":"translate-y-[calc(100%-40px)]"}`,children:[u.jsxs("div",{onClick:()=>E(!v),className:"h-10 flex items-center justify-center cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors border-b border-slate-200 group shrink-0",children:[u.jsx("div",{className:"w-12 h-1 bg-slate-300 rounded-full group-hover:bg-slate-400 mb-1"}),u.jsx(vr,{className:`w-4 h-4 text-slate-400 absolute right-4 transition-transform duration-300 ${v?"":"rotate-180"}`})]}),u.jsxs("div",{className:"flex border-b border-slate-200 bg-white shrink-0",children:[u.jsx("button",{onClick:()=>{N("add"),E(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${T==="add"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Add"}),u.jsx("button",{onClick:()=>{N("canvas"),E(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${T==="canvas"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Layout"}),u.jsx("button",{onClick:()=>{N("edit"),E(!0)},disabled:!m,className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${T==="edit"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-300 cursor-not-allowed"}`,children:"Edit"})]}),u.jsxs("div",{className:"h-28 overflow-x-auto overflow-y-hidden bg-white no-scrollbar flex items-center",children:[T==="add"&&u.jsxs("div",{className:"flex items-center gap-4 px-6 min-w-max",children:[u.jsxs("button",{onClick:()=>{var z;return(z=D.current)==null?void 0:z.click()},className:"h-20 w-20 bg-slate-50 hover:bg-slate-100 rounded-xl text-slate-700 font-bold flex flex-col items-center justify-center gap-2 border border-slate-200 transition-all shrink-0",children:[u.jsx(Pl,{className:"w-6 h-6 text-slate-900"}),u.jsx("span",{className:"text-[10px] uppercase",children:"Upload"})]}),u.jsx("input",{type:"file",ref:D,onChange:Be,className:"hidden",accept:"image/*"}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>Ie(H("circle")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(mN,{className:"w-6 h-6 text-slate-700"})}),u.jsx("button",{onClick:()=>Ie(H("square")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(gN,{className:"w-6 h-6 text-slate-700"})}),u.jsx("button",{onClick:()=>Ie(H("triangle")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(yN,{className:"w-6 h-6 text-slate-700"})}),u.jsx("button",{onClick:()=>Ie(H("heart")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(xN,{className:"w-6 h-6 text-red-500"})}),u.jsx("button",{onClick:()=>Ie(H("star")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(vN,{className:"w-6 h-6 text-slate-900"})}),u.jsx("button",{onClick:()=>Ie(H("text")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors font-bold text-xs text-slate-700",children:"TXT"})]})]}),T==="canvas"&&u.jsxs("div",{className:"flex items-center gap-6 px-6 min-w-max h-full",children:[u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl flex flex-col justify-center gap-1 w-48 shrink-0 border border-slate-100",children:[u.jsx("div",{className:"flex justify-between text-[10px] text-slate-500 font-bold uppercase",children:u.jsxs("span",{children:["Slides (",e,")"]})}),u.jsx("input",{type:"range",min:"2",max:"10",value:e,onChange:z=>n(parseInt(z.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>s("square"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${r==="square"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Square 1:1"}),u.jsx("button",{onClick:()=>s("portrait"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${r==="portrait"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Portrait 4:5"})]}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100 flex items-center justify-between gap-3 shrink-0",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Background"}),u.jsx("input",{type:"color",value:L,onChange:z=>U(z.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-0"})]})]}),T==="edit"&&m&&u.jsxs("div",{className:"flex items-center gap-5 px-6 min-w-max h-full",children:[u.jsxs("div",{className:"flex flex-col gap-1 items-center shrink-0",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Layers"}),u.jsxs("div",{className:"flex gap-1 bg-slate-50 border border-slate-100 p-1 rounded-lg",children:[u.jsx("button",{onClick:()=>se("front"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Bring to Front",children:u.jsx(Nv,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>se("forward"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Step Forward",children:u.jsx(vT,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>se("backward"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Step Backward",children:u.jsx(xT,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>se("back"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Send to Back",children:u.jsx(Nv,{className:"w-4 h-4 opacity-50"})})]})]}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"flex flex-col gap-1 w-40 shrink-0",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Size"}),u.jsx("input",{type:"range",min:"10",max:"250",defaultValue:"100",onChange:z=>Oe({width:oe().originalAspectRatio*100*(parseInt(z.target.value)/10),height:oe().originalAspectRatio*100*(parseInt(z.target.value)/10)/oe().currentAspectRatio},!1),onMouseUp:()=>he(i),onTouchEnd:()=>he(i),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"})]}),u.jsxs("div",{className:"flex flex-col gap-1 shrink-0",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Mask"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>Oe({maskShape:"none",borderRadius:0}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((xe=oe())==null?void 0:xe.maskShape)==="none"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Box"}),u.jsx("button",{onClick:()=>Oe({maskShape:"circle"}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((Ce=oe())==null?void 0:Ce.maskShape)==="circle"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Circle"}),u.jsx("button",{onClick:()=>Oe({maskShape:"square",borderRadius:20}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((Pe=oe())==null?void 0:Pe.maskShape)==="square"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Round"})]})]}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"flex flex-col gap-1 w-40 shrink-0",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Border"}),u.jsx("input",{type:"color",value:(gt=oe())==null?void 0:gt.borderColor,onChange:z=>Oe({borderColor:z.target.value}),className:"w-4 h-4 rounded bg-transparent border-0 cursor-pointer"})]}),u.jsx("input",{type:"range",min:"0",max:"20",value:(tn=oe())==null?void 0:tn.borderWidth,onChange:z=>Oe({borderWidth:parseInt(z.target.value)}),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900"})]}),u.jsxs("button",{onClick:()=>{var z;return Oe({isGrayscale:!((z=oe())!=null&&z.isGrayscale)})},className:`h-12 px-3 rounded-lg text-[10px] font-bold border transition-colors flex flex-col items-center justify-center gap-1 shrink-0 ${(At=oe())!=null&&At.isGrayscale?"bg-slate-100 text-slate-900 border-slate-300":"bg-white border-slate-200 text-slate-400 hover:border-slate-300"}`,children:[u.jsx(wN,{className:"w-4 h-4"}),"B&W"]})]})]})]})]})},y8=t=>{const e=t.toUpperCase().split("").map(n=>127397+n.charCodeAt(0));return String.fromCodePoint(...e)},v8=({data:t})=>{if(!t||t.length===0)return u.jsx("div",{className:"h-40 flex items-center justify-center text-slate-300",children:"No Data"});const e=150,n=600,r=20,s=Math.max(...t.map(o=>o.visitors),10),i=t.map((o,a)=>{const l=r+a/(t.length-1)*(n-2*r),c=e-r-o.visitors/s*(e-2*r);return`${l},${c}`}).join(" ");return u.jsxs("div",{className:"w-full overflow-hidden",children:[u.jsxs("svg",{viewBox:`0 0 ${n} ${e}`,className:"w-full h-auto",children:[u.jsx("line",{x1:r,y1:r,x2:n-r,y2:r,stroke:"#f1f5f9",strokeWidth:"1"}),u.jsx("line",{x1:r,y1:e/2,x2:n-r,y2:e/2,stroke:"#f1f5f9",strokeWidth:"1"}),u.jsx("line",{x1:r,y1:e-r,x2:n-r,y2:e-r,stroke:"#f1f5f9",strokeWidth:"1"}),u.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"3",points:i,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((o,a)=>{const l=r+a/(t.length-1)*(n-2*r),c=e-r-o.visitors/s*(e-2*r);return u.jsxs("g",{className:"group",children:[u.jsx("circle",{cx:l,cy:c,r:"4",fill:"white",stroke:"#3b82f6",strokeWidth:"2"}),u.jsx("foreignObject",{x:l-25,y:c-40,width:"50",height:"30",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("div",{className:"bg-slate-800 text-white text-[9px] rounded py-1 text-center font-bold",children:o.visitors})})]},a)})]}),u.jsx("div",{className:"flex justify-between px-2 mt-2 text-[10px] text-slate-400 font-medium",children:t.map((o,a)=>u.jsx("span",{children:o.date.slice(5)},a))})]})},x8=()=>{const[t,e]=F.useState(!0),[n,r]=F.useState(null),[s,i]=F.useState([]),o=async()=>{e(!0);const[m,g]=await Promise.all([uj(),oj()]);r(m),i(g),e(!1)};F.useEffect(()=>{o()},[]);const a=m=>new Date(m).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});if(t)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"})});if(!n)return u.jsx("div",{className:"p-10 text-center",children:"Failed to load data."});const l=n.dailyStats.length>0?n.dailyStats[n.dailyStats.length-1].visitors:0,c=n.dailyStats.length>1?n.dailyStats[n.dailyStats.length-2].visitors:0,d=c===0?100:Math.round((l-c)/c*100);return u.jsx("div",{className:"min-h-screen bg-slate-50 p-6 md:p-10 animate-fade-in",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-10 gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Dashboard Overview"}),u.jsx("p",{className:"text-slate-500",children:"Real-time insight & system health."})]}),u.jsxs("button",{onClick:o,className:"bg-white border border-slate-200 text-slate-600 px-4 py-2 rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-slate-50 hover:text-slate-900 transition-colors shadow-sm",children:[u.jsx(ih,{className:"w-4 h-4"})," Refresh Data"]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-2xl",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),d!==0&&u.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${d>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[d>0?u.jsx(vT,{className:"w-3 h-3"}):u.jsx(xT,{className:"w-3 h-3"}),Math.abs(d),"%"]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-black text-slate-900",children:n.totalVisitors}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Total Visitors (7 Days)"})]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[u.jsx("div",{className:"flex justify-between items-start",children:u.jsx("div",{className:"p-3 bg-slate-900 text-white rounded-2xl",children:u.jsx(gd,{className:"w-6 h-6"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-black text-slate-900",children:s.length}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Private Messages"})]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[u.jsx("div",{className:"flex justify-between items-start",children:u.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-2xl",children:u.jsx(Ql,{className:"w-6 h-6"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-black text-slate-900",children:n.totalErrors}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"System Errors (7 Days)"})]})]})]}),u.jsx("div",{className:"mb-10",children:u.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between",children:[u.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[u.jsx(gd,{className:"w-5 h-5 text-slate-900"})," Inbox Rahasia (Private)"]}),u.jsx("span",{className:"text-xs font-bold bg-slate-200 text-slate-600 px-2 py-1 rounded-full",children:s.length})]}),u.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:s.length===0?u.jsx("div",{className:"p-12 text-center text-slate-400 text-sm",children:"Belum ada pesan rahasia masuk."}):u.jsx("div",{className:"divide-y divide-slate-50",children:s.map(m=>u.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[u.jsx("div",{className:"flex justify-between items-start mb-2",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-bold bg-slate-900 text-white px-2 py-0.5 rounded",children:"Anonim"}),u.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:a(m.timestamp)})]})}),u.jsx("p",{className:"text-slate-700 text-sm leading-relaxed whitespace-pre-wrap",children:m.content})]},m.id))})})]})}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Traffic Trend"}),u.jsx(v8,{data:n.dailyStats})]}),u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"System Logs"}),u.jsx("div",{className:"space-y-4",children:n.logs.length===0?u.jsx("p",{className:"text-slate-400 text-sm italic",children:"No logs recorded."}):n.logs.map(m=>u.jsxs("div",{className:"flex gap-4 items-start p-3 hover:bg-slate-50 rounded-xl transition-colors border-b border-slate-50 last:border-0",children:[u.jsx("div",{className:`w-2 h-2 rounded-full mt-2 shrink-0 ${m.type==="error"?"bg-red-500":"bg-blue-500"}`}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:m.message}),u.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1",children:new Date(m.timestamp).toLocaleString()}),m.details&&u.jsx("p",{className:"text-xs text-slate-400 mt-1 truncate",children:m.details})]})]},m.id))})]})]}),u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[u.jsx(md,{className:"w-5 h-5 text-slate-400"}),u.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Demographics"})]}),u.jsx("div",{className:"space-y-5",children:n.geoStats.length===0?u.jsx("p",{className:"text-slate-400 text-sm italic",children:"No data yet."}):n.geoStats.map((m,g)=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-700 mb-2",children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:y8(m.country)})," ",m.country]}),u.jsx("span",{children:m.count})]}),u.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2 overflow-hidden",children:u.jsx("div",{className:"bg-slate-900 h-2 rounded-full",style:{width:`${m.count/n.totalVisitors*100}%`}})})]},g))})]}),u.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2rem] text-white shadow-xl relative overflow-hidden",children:[u.jsxs("div",{className:"relative z-10",children:[u.jsx("h3",{className:"text-lg font-bold mb-2",children:"System Status"}),u.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),u.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"All Systems Operational"})]}),u.jsxs("div",{className:"space-y-2 text-xs text-slate-500",children:[u.jsx("p",{children:"Database: Connected"}),u.jsx("p",{children:"API Latency: ~120ms"}),u.jsx("p",{children:"Version: v2.4.0 (Beta)"})]})]}),u.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-blue-600/20 rounded-full blur-3xl pointer-events-none"})]})]})]})]})})},w8=()=>{const t=vs();return F.useEffect(()=>{window.scrollTo(0,0)},[]),u.jsx("div",{className:"min-h-screen bg-white text-slate-900 animate-fade-in pb-20 pt-12",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6",children:[u.jsxs("button",{onClick:()=>t(-1),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:u.jsx(us,{className:"w-4 h-4"})}),"Kembali"]}),u.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-2 tracking-tight",children:"Kebijakan Privasi"}),u.jsxs("p",{className:"text-slate-500 text-lg font-medium mb-12",children:["Terakhir diperbarui: ",new Date().getFullYear()]}),u.jsxs("div",{className:"prose prose-slate max-w-none prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-600 prose-p:leading-relaxed",children:[u.jsxs("p",{children:["Di ",u.jsx("strong",{children:"Fanra AI Studio"})," (irfanrizkiaditri.site), privasi pengunjung adalah prioritas utama. Dokumen Kebijakan Privasi ini menjabarkan jenis informasi yang dikumpulkan dan dicatat oleh Fanra AI Studio serta bagaimana kami menggunakannya."]}),u.jsx("h3",{children:"1. Informasi yang Kami Kumpulkan"}),u.jsx("p",{children:"Saat Anda mendaftar atau masuk menggunakan Google (Google Auth), kami hanya menyimpan informasi dasar yang disediakan oleh layanan tersebut untuk keperluan identifikasi pengguna, yaitu:"}),u.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[u.jsx("li",{children:"Nama Lengkap (Display Name)"}),u.jsx("li",{children:"Alamat Email"}),u.jsx("li",{children:"Foto Profil (Avatar)"}),u.jsx("li",{children:"ID Pengguna Unik (UID)"})]}),u.jsxs("p",{children:["Kami ",u.jsx("strong",{children:"tidak"})," memiliki akses ke kata sandi (password) akun Google Anda. Autentikasi dikelola sepenuhnya secara aman oleh Google/Firebase."]}),u.jsx("h3",{children:"2. Bagaimana Kami Menggunakan Informasi Anda"}),u.jsx("p",{children:"Informasi yang kami kumpulkan digunakan untuk:"}),u.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[u.jsx("li",{children:"Menyediakan akses ke fitur Fanra AI Studio."}),u.jsx("li",{children:"Menyimpan riwayat chat dan preferensi pengaturan Anda (misalnya: API Key yang Anda simpan secara lokal)."}),u.jsx("li",{children:"Mencegah aktivitas penipuan atau penyalahgunaan sistem."})]}),u.jsx("h3",{children:"3. Data API Key Pribadi"}),u.jsx("p",{children:"Jika Anda memasukkan API Key pribadi (misalnya Gemini API Key, Remove.bg API Key) ke dalam pengaturan aplikasi:"}),u.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[u.jsx("li",{children:"Key tersebut disimpan secara lokal di browser Anda atau di database terenkripsi milik User ID Anda sendiri."}),u.jsx("li",{children:"Kami tidak menggunakan Key Anda untuk kepentingan di luar akun Anda."}),u.jsx("li",{children:"Anda bertanggung jawab penuh atas penggunaan kuota dan keamanan Key tersebut."})]}),u.jsx("h3",{children:"4. File Log & Analitik"}),u.jsx("p",{children:"Fanra AI Studio mengikuti prosedur standar menggunakan file log. File-file ini mencatat pengunjung ketika mereka mengunjungi situs web. Informasi yang dikumpulkan termasuk alamat protokol internet (IP), jenis browser, Penyedia Layanan Internet (ISP), tanggal dan waktu, serta halaman rujukan/keluar. Ini tidak terkait dengan informasi apa pun yang dapat diidentifikasi secara pribadi. Tujuannya adalah untuk menganalisis tren, mengelola situs, dan melacak pergerakan pengguna di situs web."}),u.jsx("h3",{children:"5. Cookies"}),u.jsx("p",{children:"Seperti situs web lainnya, Fanra AI Studio menggunakan 'cookies'. Cookies ini digunakan untuk menyimpan informasi termasuk preferensi pengunjung, dan halaman di situs web yang diakses atau dikunjungi pengunjung. Informasi tersebut digunakan untuk mengoptimalkan pengalaman pengguna dengan menyesuaikan konten halaman web kami."}),u.jsx("h3",{children:"6. Pihak Ketiga"}),u.jsx("p",{children:"Aplikasi ini menggunakan layanan pihak ketiga seperti Google Analytics, Firebase, dan OpenRouter/Gemini API. Masing-masing layanan ini memiliki kebijakan privasinya sendiri. Kami menyarankan Anda untuk berkonsultasi dengan Kebijakan Privasi masing-masing dari server iklan pihak ketiga ini untuk informasi lebih rinci."}),u.jsx("h3",{children:"7. Persetujuan"}),u.jsx("p",{children:"Dengan menggunakan situs web kami, Anda dengan ini menyetujui Kebijakan Privasi kami dan menyetujui Syarat dan Ketentuannya."})]}),u.jsx("div",{className:"mt-12 pt-8 border-t border-slate-200",children:u.jsx("p",{className:"text-sm text-slate-400",children:"Jika Anda memiliki pertanyaan tambahan atau memerlukan informasi lebih lanjut tentang Kebijakan Privasi kami, jangan ragu untuk menghubungi kami melalui email di footer website ini."})})]})})},_8=()=>{const t=vs();return F.useEffect(()=>{window.scrollTo(0,0)},[]),u.jsx("div",{className:"min-h-screen bg-white text-slate-900 animate-fade-in pb-20 pt-12",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6",children:[u.jsxs("button",{onClick:()=>t(-1),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:u.jsx(us,{className:"w-4 h-4"})}),"Kembali"]}),u.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-2 tracking-tight",children:"Syarat & Ketentuan"}),u.jsxs("p",{className:"text-slate-500 text-lg font-medium mb-12",children:["Effective Date: ",new Date().getFullYear()]}),u.jsxs("div",{className:"prose prose-slate max-w-none prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-600 prose-p:leading-relaxed",children:[u.jsxs("p",{children:["Selamat datang di ",u.jsx("strong",{children:"Fanra AI Studio"}),". Dengan mengakses situs web ini (irfanrizkiaditri.site), Anda setuju untuk terikat oleh syarat dan ketentuan penggunaan ini, semua hukum dan peraturan yang berlaku, dan setuju bahwa Anda bertanggung jawab untuk mematuhi hukum setempat yang berlaku."]}),u.jsx("h3",{children:"1. Lisensi Penggunaan"}),u.jsx("p",{children:"Izin diberikan untuk menggunakan materi (informasi atau perangkat lunak) di situs web Fanra AI Studio untuk penggunaan pribadi dan non-komersial sementara saja. Ini adalah pemberian lisensi, bukan transfer hak milik, dan di bawah lisensi ini Anda tidak boleh:"}),u.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[u.jsx("li",{children:"Memodifikasi atau menyalin materi secara ilegal;"}),u.jsx("li",{children:"Menggunakan materi untuk tujuan komersial apa pun tanpa izin tertulis;"}),u.jsx("li",{children:"Mencoba mendekompilasi atau merekayasa balik perangkat lunak apa pun yang terdapat di situs web Fanra AI Studio;"}),u.jsx("li",{children:"Menghapus hak cipta atau notasi kepemilikan lainnya dari materi; atau"}),u.jsx("li",{children:'Mentransfer materi ke orang lain atau "mencerminkan" materi di server lain.'})]}),u.jsx("h3",{children:"2. Penafian (Disclaimer)"}),u.jsx("p",{children:'Materi di situs web Fanra AI Studio disediakan "sebagaimana adanya". Fanra AI Studio tidak memberikan jaminan, tersurat maupun tersirat, dan dengan ini menafikan dan meniadakan semua jaminan lainnya. Selanjutnya, Fanra AI Studio tidak menjamin atau membuat pernyataan apa pun mengenai keakuratan, kemungkinan hasil, atau keandalan penggunaan materi di situs webnya atau yang berkaitan dengan materi tersebut.'}),u.jsxs("p",{children:[u.jsx("strong",{children:"Penting tentang AI:"})," Konten yang dihasilkan oleh Kecerdasan Buatan (Gemini, dll) mungkin tidak selalu akurat. Pengguna diharapkan memverifikasi informasi penting secara mandiri."]}),u.jsx("h3",{children:"3. Batasan"}),u.jsx("p",{children:"Dalam keadaan apa pun Fanra AI Studio atau pemasoknya tidak bertanggung jawab atas kerusakan apa pun (termasuk, tanpa batasan, kerusakan karena hilangnya data atau keuntungan, atau karena gangguan bisnis) yang timbul dari penggunaan atau ketidakmampuan untuk menggunakan materi di situs web Fanra AI Studio."}),u.jsx("h3",{children:"4. Akurasi Materi"}),u.jsx("p",{children:"Materi yang muncul di situs web Fanra AI Studio dapat mencakup kesalahan teknis, tipografi, atau fotografi. Fanra AI Studio tidak menjamin bahwa materi apa pun di situs webnya akurat, lengkap, atau terkini. Fanra AI Studio dapat membuat perubahan pada materi yang terdapat di situs webnya kapan saja tanpa pemberitahuan."}),u.jsx("h3",{children:"5. Tautan"}),u.jsx("p",{children:"Fanra AI Studio belum meninjau semua situs yang tertaut ke situs webnya dan tidak bertanggung jawab atas konten situs tertaut tersebut. Pencantuman tautan apa pun tidak menyiratkan pengesahan oleh Fanra AI Studio terhadap situs tersebut. Penggunaan situs web tertaut tersebut merupakan risiko pengguna sendiri."}),u.jsx("h3",{children:"6. Modifikasi"}),u.jsx("p",{children:"Fanra AI Studio dapat merevisi persyaratan layanan ini untuk situs webnya kapan saja tanpa pemberitahuan. Dengan menggunakan situs web ini, Anda setuju untuk terikat oleh versi Syarat dan Ketentuan Penggunaan yang berlaku saat itu."})]})]})})},b8=({onLogout:t})=>{const e=vs(),[n,r]=F.useState(!1),[s,i]=F.useState({x:20,y:window.innerHeight-80}),[o,a]=F.useState(!1),l=F.useRef({x:0,y:0}),c=F.useRef({x:0,y:0}),d=F.useRef(null);F.useEffect(()=>{const v=T=>{if(!o)return;T.preventDefault();const N=T.clientX-l.current.x,L=T.clientY-l.current.y,U=Math.max(10,Math.min(window.innerWidth-60,c.current.x+N)),k=Math.max(10,Math.min(window.innerHeight-60,c.current.y+L));i({x:U,y:k})},E=()=>{a(!1)};return o&&(window.addEventListener("mousemove",v),window.addEventListener("mouseup",E)),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",E)}},[o]);const m=v=>{n||(a(!0),l.current={x:v.clientX,y:v.clientY},c.current={...s})},g=v=>{n||(a(!0),l.current={x:v.touches[0].clientX,y:v.touches[0].clientY},c.current={...s})},y=v=>{if(!o)return;const E=v.touches[0].clientX-l.current.x,T=v.touches[0].clientY-l.current.y,N=Math.max(10,Math.min(window.innerWidth-60,c.current.x+E)),L=Math.max(10,Math.min(window.innerHeight-60,c.current.y+T));i({x:N,y:L})},w=v=>{Math.sqrt(Math.pow(v.clientX-l.current.x,2)+Math.pow(v.clientY-l.current.y,2))<5&&r(!n)},x=()=>{ow(),alert("Cache teks di memori telah dihapus. Halaman akan dimuat ulang."),window.location.reload()},_=()=>{confirm("Yakin ingin reset total? Ini akan menghapus semua pengaturan lokal dan login.")&&(localStorage.clear(),ow(),window.location.reload())};return u.jsxs(u.Fragment,{children:[n&&u.jsx("div",{className:"fixed inset-0 z-[998]",onClick:()=>r(!1)}),u.jsx("div",{className:"fixed z-[999]",style:{left:s.x,top:s.y},children:u.jsxs("div",{className:"relative",children:[u.jsx("button",{onMouseDown:m,onClick:w,onTouchStart:g,onTouchMove:y,onTouchEnd:()=>a(!1),className:`w-12 h-12 rounded-full flex items-center justify-center shadow-xl transition-all duration-200 cursor-grab active:cursor-grabbing ${n?"bg-slate-900 text-white rotate-90 scale-110":"bg-white text-slate-700 border border-slate-200 hover:scale-105"}`,style:{touchAction:"none"},children:u.jsx(Up,{className:"w-6 h-6"})}),n&&u.jsxs("div",{ref:d,className:"absolute bottom-16 left-0 bg-white/90 backdrop-blur-md border border-slate-200 rounded-2xl shadow-2xl p-2 w-60 flex flex-col gap-1 animate-fade-in-up origin-bottom-left",children:[u.jsx("div",{className:"px-3 py-2 border-b border-slate-100 mb-1",children:u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Admin Tools"})}),u.jsxs("button",{onClick:()=>{e("/dashboard"),r(!1)},className:"flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-900 hover:bg-slate-100 rounded-xl transition-colors text-left",children:[u.jsx("div",{className:"p-1.5 bg-slate-200 text-slate-700 rounded-lg",children:u.jsx(dN,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-xs",children:"Open Dashboard"}),u.jsx("span",{className:"block text-[9px] text-slate-400",children:"View analytics & charts"})]})]}),u.jsx("div",{className:"h-px bg-slate-100 mx-2 my-1"}),u.jsxs("button",{onClick:x,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:text-blue-600 rounded-xl transition-colors text-left",children:[u.jsx("div",{className:"p-1.5 bg-blue-50 text-blue-500 rounded-lg",children:u.jsx(ih,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-xs",children:"Hapus Cache"}),u.jsx("span",{className:"block text-[9px] text-slate-400",children:"Fix teks nyangkut"})]})]}),u.jsxs("button",{onClick:_,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-red-50 hover:text-red-600 rounded-xl transition-colors text-left",children:[u.jsx("div",{className:"p-1.5 bg-red-50 text-red-500 rounded-lg",children:u.jsx(Lr,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-xs",children:"Reset Total"}),u.jsx("span",{className:"block text-[9px] text-slate-400",children:"Hapus data lokal"})]})]})]})]})})]})},E8="https://cdn-icons-png.flaticon.com/128/16739/16739754.png",T8=()=>{const[t,e]=F.useState([]),[n,r]=F.useState(!1),[s,i]=F.useState(""),o=F.useRef(null),a=F.useRef(null);return F.useEffect(()=>{const l=c=>{const d=c.detail.message;e(m=>m[m.length-1]===d?m:[...m,d])};return window.addEventListener("fanra-toast",l),()=>window.removeEventListener("fanra-toast",l)},[]),F.useEffect(()=>{if(!n&&t.length>0&&!s){const l=t[0];i(l),requestAnimationFrame(()=>{r(!0)}),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{r(!1)},3e3)}},[t,n,s]),F.useEffect(()=>{!n&&s&&(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{e(l=>l.slice(1)),i("")},700))},[n,s]),F.useEffect(()=>()=>{o.current&&clearTimeout(o.current),a.current&&clearTimeout(a.current)},[]),s?u.jsx("div",{className:"fixed top-0 left-0 right-0 z-[9999] flex justify-center pointer-events-none p-4",children:u.jsxs("div",{className:`
            bg-white/90 backdrop-blur-md 
            border border-slate-200 
            shadow-[0_8px_30px_rgb(0,0,0,0.12)] 
            rounded-full 
            pl-3 pr-6 py-3
            flex items-center gap-4
            min-w-[280px] max-w-[90vw] 
            pointer-events-auto 
            transform transition-all duration-700 cubic-bezier(0.23, 1, 0.32, 1)
            will-change-transform
            ${n?"translate-y-4 opacity-100":"-translate-y-[200%] opacity-0"}
        `,children:[u.jsx("div",{className:"w-10 h-10 bg-slate-50 rounded-full flex items-center justify-center shrink-0 shadow-inner border border-slate-100",children:u.jsx("img",{src:E8,alt:"Notif",className:"w-6 h-6 object-contain"})}),u.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[u.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"Fanra Studio"}),u.jsx("p",{className:"text-sm font-bold text-slate-800 leading-tight truncate",children:s})]})]})}):null},I8=({isOpen:t,onClose:e,onSuccess:n})=>{const[r,s]=F.useState(["","","","",""]),[i,o]=F.useState(!1),a=F.useRef([]);F.useEffect(()=>{t&&(s(["","","","",""]),o(!1),setTimeout(()=>{var d;return(d=a.current[0])==null?void 0:d.focus()},100))},[t]);const l=(d,m)=>{var y;if(!/^\d*$/.test(m))return;const g=[...r];g[d]=m,s(g),o(!1),m&&d<4&&((y=a.current[d+1])==null||y.focus()),g.every(w=>w!=="")&&(g.join("")==="47326"?(n(),e()):(o(!0),setTimeout(()=>{var x;s(["","","","",""]),(x=a.current[0])==null||x.focus()},500)))},c=(d,m)=>{var g;m.key==="Backspace"&&!r[d]&&d>0&&((g=a.current[d-1])==null||g.focus())};return t?u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/80 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-2xl max-w-sm w-full relative overflow-hidden",children:[u.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-800",children:""}),u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-900 rounded-full flex items-center justify-center text-white mb-6 shadow-lg shadow-slate-900/30",children:u.jsx(Ml,{className:"w-5 h-5"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Admin Access"}),u.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Enter secure PIN to continue"}),u.jsx("div",{className:"flex gap-3 mb-6",children:r.map((d,m)=>u.jsx("input",{ref:g=>{a.current[m]=g},type:"password",maxLength:1,value:d,onChange:g=>l(m,g.target.value),onKeyDown:g=>c(m,g),className:`w-10 h-12 border-2 rounded-lg text-center text-xl font-bold bg-slate-50 focus:bg-white transition-all outline-none ${i?"border-red-500 text-red-500 shake":"border-slate-200 focus:border-slate-900 text-slate-900"}`,autoComplete:"off",inputMode:"numeric"},m))}),i&&u.jsx("p",{className:"text-xs font-bold text-red-500 animate-pulse",children:"Access Denied"})]})]})}):null},hr=({children:t,isAdmin:e})=>u.jsxs("div",{className:"min-h-screen flex flex-col font-sans bg-[#fafafa] relative overflow-x-hidden",children:[u.jsx(hj,{isAdmin:e}),u.jsx("main",{className:"flex-grow pt-24 pb-12 animate-fade-in-up",children:t}),u.jsx(Tj,{}),u.jsx(Ij,{}),u.jsxs("footer",{className:"bg-slate-950 text-white pt-32 pb-12 px-6 overflow-hidden relative mt-12",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-20 pointer-events-none mix-blend-overlay",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),u.jsx("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"20px 20px",maskImage:"linear-gradient(to bottom, transparent, black)"}}),u.jsx("div",{className:"absolute top-0 left-0 w-full overflow-hidden leading-[0] z-20",children:u.jsx("svg",{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",className:"relative block w-full h-[50px] md:h-[90px] fill-[#fafafa]",children:u.jsx("path",{d:"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"})})}),u.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16",children:[u.jsxs("div",{className:"lg:col-span-2",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsx(Ho,{className:"w-12 h-12",variant:"light"}),u.jsx(ct,{id:"footer_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:e,tag:"h2",className:"text-2xl font-black tracking-tighter uppercase"})]}),u.jsx(ct,{id:"footer_brand_desc",defaultText:"Seorang mahasiswa ITERA angkatan 2025 yang hobi mengulik kode dan berbagi cerita lewat ruang digital.",isAdmin:e,tag:"p",multiline:!0,className:"text-slate-500 text-sm max-w-sm leading-relaxed font-medium"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Communication"}),u.jsxs("a",{href:"mailto:irfanrizkiaditri@gmail.com",className:"text-sm font-bold text-slate-200 hover:text-white transition-colors flex items-center gap-3 group",children:[u.jsx(IN,{className:"w-5 h-5 group-hover:scale-110 transition-transform text-slate-400 group-hover:text-white"}),u.jsx(ct,{id:"footer_email",defaultText:"irfanrizkiaditri@gmail.com",isAdmin:e,tag:"span"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Social Discovery"}),u.jsxs("div",{className:"flex gap-6",children:[u.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:u.jsx(EN,{className:"w-6 h-6"})}),u.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:u.jsx(TN,{className:"w-6 h-6"})}),u.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:u.jsx(IT,{className:"w-6 h-6"})})]})]})]}),u.jsxs("div",{className:"pt-8 border-t border-slate-900 flex flex-col md:flex-row justify-between items-center gap-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 md:gap-8",children:[u.jsxs("p",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:[" ",new Date().getFullYear(),"  ",u.jsx(ct,{id:"footer_copyright",defaultText:"PERSPECTIVE OF FANRA",isAdmin:e,tag:"span"})]}),u.jsxs("div",{className:"flex gap-6",children:[u.jsx(il,{to:"/privacy",className:"text-[9px] font-bold text-slate-500 hover:text-white uppercase tracking-widest transition-colors",children:"Privacy Policy"}),u.jsx(il,{to:"/terms",className:"text-[9px] font-bold text-slate-500 hover:text-white uppercase tracking-widest transition-colors",children:"Terms of Service"})]})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("span",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:u.jsx(ct,{id:"footer_location",defaultText:"Sumatera, Indonesia",isAdmin:e,tag:"span"})})})]})]}),u.jsx("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] opacity-[0.02] pointer-events-none translate-x-20 -translate-y-20",children:u.jsx(Ho,{className:"w-full h-full",variant:"light"})})]})]}),S8=()=>{const{pathname:t}=Hi();return F.useEffect(()=>{window.scrollTo(0,0)},[t]),null},k8=()=>{const[t,e]=F.useState(!0),[n,r]=F.useState(!1),[s,i]=F.useState(!1);F.useEffect(()=>{lj(),localStorage.removeItem("fanra_admin_auth")},[]),F.useEffect(()=>{const l=c=>{if(c.key.toLowerCase()==="f"){const d=c.target;if(d.tagName==="INPUT"||d.tagName==="TEXTAREA"||d.tagName==="SELECT"||d.isContentEditable)return;c.preventDefault(),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(g=>{console.error(`Error attempting to enable fullscreen: ${g.message}`)})}};return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}},[]);const o=()=>{window.scrollTo(0,0),e(!1)},a=()=>{i(!0)};return u.jsxs(J2,{children:[u.jsx(S8,{}),u.jsx(T8,{}),u.jsx(I8,{isOpen:n,onClose:()=>r(!1),onSuccess:a}),s&&u.jsx(b8,{onLogout:()=>i(!1)}),t&&u.jsx(gj,{onComplete:o,onTriggerAdmin:()=>r(!0)}),u.jsxs(z2,{children:[u.jsx(vn,{path:"/",element:u.jsx(hr,{isAdmin:s,children:u.jsx(vj,{onTriggerAdmin:()=>r(!0),isAdmin:s})})}),u.jsx(vn,{path:"/projects",element:u.jsx(hr,{isAdmin:s,children:u.jsx(uw,{isAdmin:s})})}),u.jsx(vn,{path:"/projects/:projectId",element:u.jsx(hr,{isAdmin:s,children:u.jsx(uw,{isAdmin:s})})}),u.jsx(vn,{path:"/blog",element:u.jsx(hr,{isAdmin:s,children:u.jsx(cw,{isAdmin:s})})}),u.jsx(vn,{path:"/blog/:id",element:u.jsx(hr,{isAdmin:s,children:u.jsx(cw,{isAdmin:s})})}),u.jsx(vn,{path:"/gallery",element:u.jsx(hr,{isAdmin:s,children:u.jsx(_j,{isAdmin:s})})}),u.jsx(vn,{path:"/music",element:u.jsx(hr,{isAdmin:s,children:u.jsx(bj,{isAdmin:s})})}),u.jsx(vn,{path:"/messages",element:u.jsx(hr,{isAdmin:s,children:u.jsx(Ej,{isAdmin:s})})}),u.jsx(vn,{path:"/dashboard",element:u.jsx(hr,{isAdmin:s,children:u.jsx(x8,{})})}),u.jsx(vn,{path:"/privacy",element:u.jsx(hr,{isAdmin:s,children:u.jsx(w8,{})})}),u.jsx(vn,{path:"/terms",element:u.jsx(hr,{isAdmin:s,children:u.jsx(_8,{})})}),u.jsx(vn,{path:"/studio",element:u.jsx(u8,{isAdmin:s,onExit:()=>window.location.href="/#/projects"})}),u.jsx(vn,{path:"/panorama",element:u.jsx(g8,{onExit:()=>window.location.href="/#/projects"})}),u.jsx(vn,{path:"*",element:u.jsx(O2,{to:"/",replace:!0})})]})]})},mk=document.getElementById("root");if(!mk)throw new Error("Could not find root element to mount to");const C8=Gf.createRoot(mk);C8.render(u.jsx(hl.StrictMode,{children:u.jsx(k8,{})}));

function xk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var $r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $_={exports:{}},Ld={},q_={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hl=Symbol.for("react.element"),wk=Symbol.for("react.portal"),_k=Symbol.for("react.fragment"),bk=Symbol.for("react.strict_mode"),Ek=Symbol.for("react.profiler"),Tk=Symbol.for("react.provider"),Ik=Symbol.for("react.context"),Sk=Symbol.for("react.forward_ref"),kk=Symbol.for("react.suspense"),Ck=Symbol.for("react.memo"),Ak=Symbol.for("react.lazy"),uy=Symbol.iterator;function Nk(t){return t===null||typeof t!="object"?null:(t=uy&&t[uy]||t["@@iterator"],typeof t=="function"?t:null)}var W_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K_=Object.assign,J_={};function Xo(t,e,n){this.props=t,this.context=e,this.refs=J_,this.updater=n||W_}Xo.prototype.isReactComponent={};Xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Y_(){}Y_.prototype=Xo.prototype;function Em(t,e,n){this.props=t,this.context=e,this.refs=J_,this.updater=n||W_}var Tm=Em.prototype=new Y_;Tm.constructor=Em;K_(Tm,Xo.prototype);Tm.isPureReactComponent=!0;var cy=Array.isArray,Q_=Object.prototype.hasOwnProperty,Im={current:null},X_={key:!0,ref:!0,__self:!0,__source:!0};function Z_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Q_.call(e,r)&&!X_.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Hl,type:t,key:i,ref:o,props:s,_owner:Im.current}}function Rk(t,e){return{$$typeof:Hl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Sm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hl}function Pk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dy=/\/+/g;function $h(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Pk(""+t.key):e.toString(36)}function mc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Hl:case wk:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+$h(o,0):r,cy(s)?(n="",t!=null&&(n=t.replace(dy,"$&/")+"/"),mc(s,e,n,"",function(c){return c})):s!=null&&(Sm(s)&&(s=Rk(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(dy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",cy(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+$h(i,a);o+=mc(i,e,n,l,s)}else if(l=Nk(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+$h(i,a++),o+=mc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ou(t,e,n){if(t==null)return t;var r=[],s=0;return mc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Mk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var In={current:null},gc={transition:null},Dk={ReactCurrentDispatcher:In,ReactCurrentBatchConfig:gc,ReactCurrentOwner:Im};function eb(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:Ou,forEach:function(t,e,n){Ou(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ou(t,function(){e++}),e},toArray:function(t){return Ou(t,function(e){return e})||[]},only:function(t){if(!Sm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ge.Component=Xo;Ge.Fragment=_k;Ge.Profiler=Ek;Ge.PureComponent=Em;Ge.StrictMode=bk;Ge.Suspense=kk;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dk;Ge.act=eb;Ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=K_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Im.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Q_.call(e,l)&&!X_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Hl,type:t.type,key:s,ref:i,props:r,_owner:o}};Ge.createContext=function(t){return t={$$typeof:Ik,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Tk,_context:t},t.Consumer=t};Ge.createElement=Z_;Ge.createFactory=function(t){var e=Z_.bind(null,t);return e.type=t,e};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(t){return{$$typeof:Sk,render:t}};Ge.isValidElement=Sm;Ge.lazy=function(t){return{$$typeof:Ak,_payload:{_status:-1,_result:t},_init:Mk}};Ge.memo=function(t,e){return{$$typeof:Ck,type:t,compare:e===void 0?null:e}};Ge.startTransition=function(t){var e=gc.transition;gc.transition={};try{t()}finally{gc.transition=e}};Ge.unstable_act=eb;Ge.useCallback=function(t,e){return In.current.useCallback(t,e)};Ge.useContext=function(t){return In.current.useContext(t)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(t){return In.current.useDeferredValue(t)};Ge.useEffect=function(t,e){return In.current.useEffect(t,e)};Ge.useId=function(){return In.current.useId()};Ge.useImperativeHandle=function(t,e,n){return In.current.useImperativeHandle(t,e,n)};Ge.useInsertionEffect=function(t,e){return In.current.useInsertionEffect(t,e)};Ge.useLayoutEffect=function(t,e){return In.current.useLayoutEffect(t,e)};Ge.useMemo=function(t,e){return In.current.useMemo(t,e)};Ge.useReducer=function(t,e,n){return In.current.useReducer(t,e,n)};Ge.useRef=function(t){return In.current.useRef(t)};Ge.useState=function(t){return In.current.useState(t)};Ge.useSyncExternalStore=function(t,e,n){return In.current.useSyncExternalStore(t,e,n)};Ge.useTransition=function(){return In.current.useTransition()};Ge.version="18.3.1";q_.exports=Ge;var F=q_.exports;const cl=bm(F),Lk=xk({__proto__:null,default:cl},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jk=F,Fk=Symbol.for("react.element"),Vk=Symbol.for("react.fragment"),Uk=Object.prototype.hasOwnProperty,Ok=jk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bk={key:!0,ref:!0,__self:!0,__source:!0};function tb(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Uk.call(e,r)&&!Bk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Fk,type:t,key:i,ref:o,props:s,_owner:Ok.current}}Ld.Fragment=Vk;Ld.jsx=tb;Ld.jsxs=tb;$_.exports=Ld;var u=$_.exports,Uf={},nb={exports:{}},qn={},rb={exports:{}},sb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,Q){var ue=te.length;te.push(Q);e:for(;0<ue;){var K=ue-1>>>1,$=te[K];if(0<s($,Q))te[K]=Q,te[ue]=$,ue=K;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var Q=te[0],ue=te.pop();if(ue!==Q){te[0]=ue;e:for(var K=0,$=te.length,ce=$>>>1;K<ce;){var Z=2*(K+1)-1,ee=te[Z],Se=Z+1,xe=te[Se];if(0>s(ee,ue))Se<$&&0>s(xe,ee)?(te[K]=xe,te[Se]=ue,K=Se):(te[K]=ee,te[Z]=ue,K=Z);else if(Se<$&&0>s(xe,ue))te[K]=xe,te[Se]=ue,K=Se;else break e}}return Q}function s(te,Q){var ue=te.sortIndex-Q.sortIndex;return ue!==0?ue:te.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,m=null,g=3,y=!1,w=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(te){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=te)r(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(c)}}function R(te){if(x=!1,T(te),!w)if(n(l)!==null)w=!0,me(L);else{var Q=n(c);Q!==null&&re(R,Q.startTime-te)}}function L(te,Q){w=!1,x&&(x=!1,v(C),C=-1),y=!0;var ue=g;try{for(T(Q),m=n(l);m!==null&&(!(m.expirationTime>Q)||te&&!V());){var K=m.callback;if(typeof K=="function"){m.callback=null,g=m.priorityLevel;var $=K(m.expirationTime<=Q);Q=t.unstable_now(),typeof $=="function"?m.callback=$:m===n(l)&&r(l),T(Q)}else r(l);m=n(l)}if(m!==null)var ce=!0;else{var Z=n(c);Z!==null&&re(R,Z.startTime-Q),ce=!1}return ce}finally{m=null,g=ue,y=!1}}var U=!1,S=null,C=-1,N=5,M=-1;function V(){return!(t.unstable_now()-M<N)}function P(){if(S!==null){var te=t.unstable_now();M=te;var Q=!0;try{Q=S(!0,te)}finally{Q?D():(U=!1,S=null)}}else U=!1}var D;if(typeof E=="function")D=function(){E(P)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,H=k.port2;k.port1.onmessage=P,D=function(){H.postMessage(null)}}else D=function(){_(P,0)};function me(te){S=te,U||(U=!0,D())}function re(te,Q){C=_(function(){te(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,me(L))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(te){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var ue=g;g=Q;try{return te()}finally{g=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,Q){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ue=g;g=te;try{return Q()}finally{g=ue}},t.unstable_scheduleCallback=function(te,Q,ue){var K=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?K+ue:K):ue=K,te){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ue+$,te={id:d++,callback:Q,priorityLevel:te,startTime:ue,expirationTime:$,sortIndex:-1},ue>K?(te.sortIndex=ue,e(c,te),n(l)===null&&te===n(c)&&(x?(v(C),C=-1):x=!0,re(R,ue-K))):(te.sortIndex=$,e(l,te),w||y||(w=!0,me(L))),te},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(te){var Q=g;return function(){var ue=g;g=Q;try{return te.apply(this,arguments)}finally{g=ue}}}})(sb);rb.exports=sb;var zk=rb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gk=F,Hn=zk;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ib=new Set,dl={};function Vi(t,e){Mo(t,e),Mo(t+"Capture",e)}function Mo(t,e){for(dl[t]=e,t=0;t<e.length;t++)ib.add(e[t])}var es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Of=Object.prototype.hasOwnProperty,Hk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hy={},fy={};function $k(t){return Of.call(fy,t)?!0:Of.call(hy,t)?!1:Hk.test(t)?fy[t]=!0:(hy[t]=!0,!1)}function qk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Wk(t,e,n,r){if(e===null||typeof e>"u"||qk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Sn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tn[t]=new Sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tn[e]=new Sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tn[t]=new Sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tn[t]=new Sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tn[t]=new Sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tn[t]=new Sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tn[t]=new Sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tn[t]=new Sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tn[t]=new Sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var km=/[\-:]([a-z])/g;function Cm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(km,Cm);tn[e]=new Sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(km,Cm);tn[e]=new Sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(km,Cm);tn[e]=new Sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tn[t]=new Sn(t,1,!1,t.toLowerCase(),null,!1,!1)});tn.xlinkHref=new Sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tn[t]=new Sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Am(t,e,n,r){var s=tn.hasOwnProperty(e)?tn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Wk(e,n,s,r)&&(n=null),r||s===null?$k(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ds=Gk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bu=Symbol.for("react.element"),so=Symbol.for("react.portal"),io=Symbol.for("react.fragment"),Nm=Symbol.for("react.strict_mode"),Bf=Symbol.for("react.profiler"),ob=Symbol.for("react.provider"),ab=Symbol.for("react.context"),Rm=Symbol.for("react.forward_ref"),zf=Symbol.for("react.suspense"),Gf=Symbol.for("react.suspense_list"),Pm=Symbol.for("react.memo"),Is=Symbol.for("react.lazy"),lb=Symbol.for("react.offscreen"),py=Symbol.iterator;function Ca(t){return t===null||typeof t!="object"?null:(t=py&&t[py]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,qh;function Ua(t){if(qh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qh=e&&e[1]||""}return`
`+qh+t}var Wh=!1;function Kh(t,e){if(!t||Wh)return"";Wh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Wh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ua(t):""}function Kk(t){switch(t.tag){case 5:return Ua(t.type);case 16:return Ua("Lazy");case 13:return Ua("Suspense");case 19:return Ua("SuspenseList");case 0:case 2:case 15:return t=Kh(t.type,!1),t;case 11:return t=Kh(t.type.render,!1),t;case 1:return t=Kh(t.type,!0),t;default:return""}}function Hf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case io:return"Fragment";case so:return"Portal";case Bf:return"Profiler";case Nm:return"StrictMode";case zf:return"Suspense";case Gf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ab:return(t.displayName||"Context")+".Consumer";case ob:return(t._context.displayName||"Context")+".Provider";case Rm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pm:return e=t.displayName||null,e!==null?e:Hf(t.type)||"Memo";case Is:e=t._payload,t=t._init;try{return Hf(t(e))}catch{}}return null}function Jk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hf(e);case 8:return e===Nm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Js(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ub(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Yk(t){var e=ub(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zu(t){t._valueTracker||(t._valueTracker=Yk(t))}function cb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ub(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Vc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $f(t,e){var n=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function my(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Js(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function db(t,e){e=e.checked,e!=null&&Am(t,"checked",e,!1)}function qf(t,e){db(t,e);var n=Js(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wf(t,e.type,Js(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wf(t,e,n){(e!=="number"||Vc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Oa=Array.isArray;function wo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Js(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Kf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(fe(92));if(Oa(n)){if(1<n.length)throw Error(fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Js(n)}}function hb(t,e){var n=Js(e.value),r=Js(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function vy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gu,pb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gu=Gu||document.createElement("div"),Gu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ka={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qk=["Webkit","ms","Moz","O"];Object.keys(Ka).forEach(function(t){Qk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ka[e]=Ka[t]})});function mb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ka.hasOwnProperty(t)&&Ka[t]?(""+e).trim():e+"px"}function gb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=mb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Xk=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yf(t,e){if(e){if(Xk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function Qf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xf=null;function Mm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zf=null,_o=null,bo=null;function xy(t){if(t=Wl(t)){if(typeof Zf!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=Od(e),Zf(t.stateNode,t.type,e))}}function yb(t){_o?bo?bo.push(t):bo=[t]:_o=t}function vb(){if(_o){var t=_o,e=bo;if(bo=_o=null,xy(t),e)for(t=0;t<e.length;t++)xy(e[t])}}function xb(t,e){return t(e)}function wb(){}var Jh=!1;function _b(t,e,n){if(Jh)return t(e,n);Jh=!0;try{return xb(t,e,n)}finally{Jh=!1,(_o!==null||bo!==null)&&(wb(),vb())}}function fl(t,e){var n=t.stateNode;if(n===null)return null;var r=Od(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(fe(231,e,typeof n));return n}var ep=!1;if(es)try{var Aa={};Object.defineProperty(Aa,"passive",{get:function(){ep=!0}}),window.addEventListener("test",Aa,Aa),window.removeEventListener("test",Aa,Aa)}catch{ep=!1}function Zk(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Ja=!1,Uc=null,Oc=!1,tp=null,eC={onError:function(t){Ja=!0,Uc=t}};function tC(t,e,n,r,s,i,o,a,l){Ja=!1,Uc=null,Zk.apply(eC,arguments)}function nC(t,e,n,r,s,i,o,a,l){if(tC.apply(this,arguments),Ja){if(Ja){var c=Uc;Ja=!1,Uc=null}else throw Error(fe(198));Oc||(Oc=!0,tp=c)}}function Ui(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wy(t){if(Ui(t)!==t)throw Error(fe(188))}function rC(t){var e=t.alternate;if(!e){if(e=Ui(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return wy(s),t;if(i===r)return wy(s),e;i=i.sibling}throw Error(fe(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?t:e}function Eb(t){return t=rC(t),t!==null?Tb(t):null}function Tb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Tb(t);if(e!==null)return e;t=t.sibling}return null}var Ib=Hn.unstable_scheduleCallback,_y=Hn.unstable_cancelCallback,sC=Hn.unstable_shouldYield,iC=Hn.unstable_requestPaint,It=Hn.unstable_now,oC=Hn.unstable_getCurrentPriorityLevel,Dm=Hn.unstable_ImmediatePriority,Sb=Hn.unstable_UserBlockingPriority,Bc=Hn.unstable_NormalPriority,aC=Hn.unstable_LowPriority,kb=Hn.unstable_IdlePriority,jd=null,Nr=null;function lC(t){if(Nr&&typeof Nr.onCommitFiberRoot=="function")try{Nr.onCommitFiberRoot(jd,t,void 0,(t.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:dC,uC=Math.log,cC=Math.LN2;function dC(t){return t>>>=0,t===0?32:31-(uC(t)/cC|0)|0}var Hu=64,$u=4194304;function Ba(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ba(a):(i&=o,i!==0&&(r=Ba(i)))}else o=n&~s,o!==0?r=Ba(o):i!==0&&(r=Ba(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dr(e),s=1<<n,r|=t[n],e&=~s;return r}function hC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-dr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=hC(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function np(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Cb(){var t=Hu;return Hu<<=1,!(Hu&4194240)&&(Hu=64),t}function Yh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $l(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dr(e),t[e]=n}function pC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-dr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Lm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var rt=0;function Ab(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Nb,jm,Rb,Pb,Mb,rp=!1,qu=[],Fs=null,Vs=null,Us=null,pl=new Map,ml=new Map,ks=[],mC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function by(t,e){switch(t){case"focusin":case"focusout":Fs=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":pl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(e.pointerId)}}function Na(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Wl(e),e!==null&&jm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function gC(t,e,n,r,s){switch(e){case"focusin":return Fs=Na(Fs,t,e,n,r,s),!0;case"dragenter":return Vs=Na(Vs,t,e,n,r,s),!0;case"mouseover":return Us=Na(Us,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return pl.set(i,Na(pl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ml.set(i,Na(ml.get(i)||null,t,e,n,r,s)),!0}return!1}function Db(t){var e=gi(t.target);if(e!==null){var n=Ui(e);if(n!==null){if(e=n.tag,e===13){if(e=bb(n),e!==null){t.blockedOn=e,Mb(t.priority,function(){Rb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xf=r,n.target.dispatchEvent(r),Xf=null}else return e=Wl(n),e!==null&&jm(e),t.blockedOn=n,!1;e.shift()}return!0}function Ey(t,e,n){yc(t)&&n.delete(e)}function yC(){rp=!1,Fs!==null&&yc(Fs)&&(Fs=null),Vs!==null&&yc(Vs)&&(Vs=null),Us!==null&&yc(Us)&&(Us=null),pl.forEach(Ey),ml.forEach(Ey)}function Ra(t,e){t.blockedOn===e&&(t.blockedOn=null,rp||(rp=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,yC)))}function gl(t){function e(s){return Ra(s,t)}if(0<qu.length){Ra(qu[0],t);for(var n=1;n<qu.length;n++){var r=qu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fs!==null&&Ra(Fs,t),Vs!==null&&Ra(Vs,t),Us!==null&&Ra(Us,t),pl.forEach(e),ml.forEach(e),n=0;n<ks.length;n++)r=ks[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ks.length&&(n=ks[0],n.blockedOn===null);)Db(n),n.blockedOn===null&&ks.shift()}var Eo=ds.ReactCurrentBatchConfig,Gc=!0;function vC(t,e,n,r){var s=rt,i=Eo.transition;Eo.transition=null;try{rt=1,Fm(t,e,n,r)}finally{rt=s,Eo.transition=i}}function xC(t,e,n,r){var s=rt,i=Eo.transition;Eo.transition=null;try{rt=4,Fm(t,e,n,r)}finally{rt=s,Eo.transition=i}}function Fm(t,e,n,r){if(Gc){var s=sp(t,e,n,r);if(s===null)af(t,e,r,Hc,n),by(t,r);else if(gC(s,t,e,n,r))r.stopPropagation();else if(by(t,r),e&4&&-1<mC.indexOf(t)){for(;s!==null;){var i=Wl(s);if(i!==null&&Nb(i),i=sp(t,e,n,r),i===null&&af(t,e,r,Hc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else af(t,e,r,null,n)}}var Hc=null;function sp(t,e,n,r){if(Hc=null,t=Mm(r),t=gi(t),t!==null)if(e=Ui(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hc=t,null}function Lb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oC()){case Dm:return 1;case Sb:return 4;case Bc:case aC:return 16;case kb:return 536870912;default:return 16}default:return 16}}var Ms=null,Vm=null,vc=null;function jb(){if(vc)return vc;var t,e=Vm,n=e.length,r,s="value"in Ms?Ms.value:Ms.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return vc=s.slice(t,1<r?1-r:void 0)}function xc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wu(){return!0}function Ty(){return!1}function Wn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wu:Ty,this.isPropagationStopped=Ty,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wu)},persist:function(){},isPersistent:Wu}),e}var Zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Um=Wn(Zo),ql=yt({},Zo,{view:0,detail:0}),wC=Wn(ql),Qh,Xh,Pa,Fd=yt({},ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Om,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pa&&(Pa&&t.type==="mousemove"?(Qh=t.screenX-Pa.screenX,Xh=t.screenY-Pa.screenY):Xh=Qh=0,Pa=t),Qh)},movementY:function(t){return"movementY"in t?t.movementY:Xh}}),Iy=Wn(Fd),_C=yt({},Fd,{dataTransfer:0}),bC=Wn(_C),EC=yt({},ql,{relatedTarget:0}),Zh=Wn(EC),TC=yt({},Zo,{animationName:0,elapsedTime:0,pseudoElement:0}),IC=Wn(TC),SC=yt({},Zo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kC=Wn(SC),CC=yt({},Zo,{data:0}),Sy=Wn(CC),AC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RC[t])?!!e[t]:!1}function Om(){return PC}var MC=yt({},ql,{key:function(t){if(t.key){var e=AC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Om,charCode:function(t){return t.type==="keypress"?xc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DC=Wn(MC),LC=yt({},Fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ky=Wn(LC),jC=yt({},ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Om}),FC=Wn(jC),VC=yt({},Zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),UC=Wn(VC),OC=yt({},Fd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BC=Wn(OC),zC=[9,13,27,32],Bm=es&&"CompositionEvent"in window,Ya=null;es&&"documentMode"in document&&(Ya=document.documentMode);var GC=es&&"TextEvent"in window&&!Ya,Fb=es&&(!Bm||Ya&&8<Ya&&11>=Ya),Cy=" ",Ay=!1;function Vb(t,e){switch(t){case"keyup":return zC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ub(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oo=!1;function HC(t,e){switch(t){case"compositionend":return Ub(e);case"keypress":return e.which!==32?null:(Ay=!0,Cy);case"textInput":return t=e.data,t===Cy&&Ay?null:t;default:return null}}function $C(t,e){if(oo)return t==="compositionend"||!Bm&&Vb(t,e)?(t=jb(),vc=Vm=Ms=null,oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fb&&e.locale!=="ko"?null:e.data;default:return null}}var qC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ny(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qC[t.type]:e==="textarea"}function Ob(t,e,n,r){yb(r),e=$c(e,"onChange"),0<e.length&&(n=new Um("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qa=null,yl=null;function WC(t){Qb(t,0)}function Vd(t){var e=uo(t);if(cb(e))return t}function KC(t,e){if(t==="change")return e}var Bb=!1;if(es){var ef;if(es){var tf="oninput"in document;if(!tf){var Ry=document.createElement("div");Ry.setAttribute("oninput","return;"),tf=typeof Ry.oninput=="function"}ef=tf}else ef=!1;Bb=ef&&(!document.documentMode||9<document.documentMode)}function Py(){Qa&&(Qa.detachEvent("onpropertychange",zb),yl=Qa=null)}function zb(t){if(t.propertyName==="value"&&Vd(yl)){var e=[];Ob(e,yl,t,Mm(t)),_b(WC,e)}}function JC(t,e,n){t==="focusin"?(Py(),Qa=e,yl=n,Qa.attachEvent("onpropertychange",zb)):t==="focusout"&&Py()}function YC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vd(yl)}function QC(t,e){if(t==="click")return Vd(e)}function XC(t,e){if(t==="input"||t==="change")return Vd(e)}function ZC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yr=typeof Object.is=="function"?Object.is:ZC;function vl(t,e){if(yr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Of.call(e,s)||!yr(t[s],e[s]))return!1}return!0}function My(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dy(t,e){var n=My(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=My(n)}}function Gb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Gb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hb(){for(var t=window,e=Vc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vc(t.document)}return e}function zm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eA(t){var e=Hb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Gb(n.ownerDocument.documentElement,n)){if(r!==null&&zm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Dy(n,i);var o=Dy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tA=es&&"documentMode"in document&&11>=document.documentMode,ao=null,ip=null,Xa=null,op=!1;function Ly(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;op||ao==null||ao!==Vc(r)||(r=ao,"selectionStart"in r&&zm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xa&&vl(Xa,r)||(Xa=r,r=$c(ip,"onSelect"),0<r.length&&(e=new Um("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ao)))}function Ku(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lo={animationend:Ku("Animation","AnimationEnd"),animationiteration:Ku("Animation","AnimationIteration"),animationstart:Ku("Animation","AnimationStart"),transitionend:Ku("Transition","TransitionEnd")},nf={},$b={};es&&($b=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function Ud(t){if(nf[t])return nf[t];if(!lo[t])return t;var e=lo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $b)return nf[t]=e[n];return t}var qb=Ud("animationend"),Wb=Ud("animationiteration"),Kb=Ud("animationstart"),Jb=Ud("transitionend"),Yb=new Map,jy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(t,e){Yb.set(t,e),Vi(e,[t])}for(var rf=0;rf<jy.length;rf++){var sf=jy[rf],nA=sf.toLowerCase(),rA=sf[0].toUpperCase()+sf.slice(1);ei(nA,"on"+rA)}ei(qb,"onAnimationEnd");ei(Wb,"onAnimationIteration");ei(Kb,"onAnimationStart");ei("dblclick","onDoubleClick");ei("focusin","onFocus");ei("focusout","onBlur");ei(Jb,"onTransitionEnd");Mo("onMouseEnter",["mouseout","mouseover"]);Mo("onMouseLeave",["mouseout","mouseover"]);Mo("onPointerEnter",["pointerout","pointerover"]);Mo("onPointerLeave",["pointerout","pointerover"]);Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sA=new Set("cancel close invalid load scroll toggle".split(" ").concat(za));function Fy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,nC(r,e,void 0,t),t.currentTarget=null}function Qb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Fy(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Fy(s,a,c),i=l}}}if(Oc)throw t=tp,Oc=!1,tp=null,t}function ct(t,e){var n=e[dp];n===void 0&&(n=e[dp]=new Set);var r=t+"__bubble";n.has(r)||(Xb(e,t,2,!1),n.add(r))}function of(t,e,n){var r=0;e&&(r|=4),Xb(n,t,r,e)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function xl(t){if(!t[Ju]){t[Ju]=!0,ib.forEach(function(n){n!=="selectionchange"&&(sA.has(n)||of(n,!1,t),of(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ju]||(e[Ju]=!0,of("selectionchange",!1,e))}}function Xb(t,e,n,r){switch(Lb(e)){case 1:var s=vC;break;case 4:s=xC;break;default:s=Fm}n=s.bind(null,e,n,t),s=void 0,!ep||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function af(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=gi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}_b(function(){var c=i,d=Mm(n),m=[];e:{var g=Yb.get(t);if(g!==void 0){var y=Um,w=t;switch(t){case"keypress":if(xc(n)===0)break e;case"keydown":case"keyup":y=DC;break;case"focusin":w="focus",y=Zh;break;case"focusout":w="blur",y=Zh;break;case"beforeblur":case"afterblur":y=Zh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=bC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=FC;break;case qb:case Wb:case Kb:y=IC;break;case Jb:y=UC;break;case"scroll":y=wC;break;case"wheel":y=BC;break;case"copy":case"cut":case"paste":y=kC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ky}var x=(e&4)!==0,_=!x&&t==="scroll",v=x?g!==null?g+"Capture":null:g;x=[];for(var E=c,T;E!==null;){T=E;var R=T.stateNode;if(T.tag===5&&R!==null&&(T=R,v!==null&&(R=fl(E,v),R!=null&&x.push(wl(E,R,T)))),_)break;E=E.return}0<x.length&&(g=new y(g,w,null,n,d),m.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==Xf&&(w=n.relatedTarget||n.fromElement)&&(gi(w)||w[ts]))break e;if((y||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=c,w=w?gi(w):null,w!==null&&(_=Ui(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(x=Iy,R="onMouseLeave",v="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(x=ky,R="onPointerLeave",v="onPointerEnter",E="pointer"),_=y==null?g:uo(y),T=w==null?g:uo(w),g=new x(R,E+"leave",y,n,d),g.target=_,g.relatedTarget=T,R=null,gi(d)===c&&(x=new x(v,E+"enter",w,n,d),x.target=T,x.relatedTarget=_,R=x),_=R,y&&w)t:{for(x=y,v=w,E=0,T=x;T;T=eo(T))E++;for(T=0,R=v;R;R=eo(R))T++;for(;0<E-T;)x=eo(x),E--;for(;0<T-E;)v=eo(v),T--;for(;E--;){if(x===v||v!==null&&x===v.alternate)break t;x=eo(x),v=eo(v)}x=null}else x=null;y!==null&&Vy(m,g,y,x,!1),w!==null&&_!==null&&Vy(m,_,w,x,!0)}}e:{if(g=c?uo(c):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var L=KC;else if(Ny(g))if(Bb)L=XC;else{L=YC;var U=JC}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=QC);if(L&&(L=L(t,c))){Ob(m,L,n,d);break e}U&&U(t,g,c),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&Wf(g,"number",g.value)}switch(U=c?uo(c):window,t){case"focusin":(Ny(U)||U.contentEditable==="true")&&(ao=U,ip=c,Xa=null);break;case"focusout":Xa=ip=ao=null;break;case"mousedown":op=!0;break;case"contextmenu":case"mouseup":case"dragend":op=!1,Ly(m,n,d);break;case"selectionchange":if(tA)break;case"keydown":case"keyup":Ly(m,n,d)}var S;if(Bm)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else oo?Vb(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Fb&&n.locale!=="ko"&&(oo||C!=="onCompositionStart"?C==="onCompositionEnd"&&oo&&(S=jb()):(Ms=d,Vm="value"in Ms?Ms.value:Ms.textContent,oo=!0)),U=$c(c,C),0<U.length&&(C=new Sy(C,t,null,n,d),m.push({event:C,listeners:U}),S?C.data=S:(S=Ub(n),S!==null&&(C.data=S)))),(S=GC?HC(t,n):$C(t,n))&&(c=$c(c,"onBeforeInput"),0<c.length&&(d=new Sy("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:c}),d.data=S))}Qb(m,e)})}function wl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $c(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fl(t,n),i!=null&&r.unshift(wl(t,i,s)),i=fl(t,e),i!=null&&r.push(wl(t,i,s))),t=t.return}return r}function eo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=fl(n,i),l!=null&&o.unshift(wl(n,l,a))):s||(l=fl(n,i),l!=null&&o.push(wl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var iA=/\r\n?/g,oA=/\u0000|\uFFFD/g;function Uy(t){return(typeof t=="string"?t:""+t).replace(iA,`
`).replace(oA,"")}function Yu(t,e,n){if(e=Uy(e),Uy(t)!==e&&n)throw Error(fe(425))}function qc(){}var ap=null,lp=null;function up(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cp=typeof setTimeout=="function"?setTimeout:void 0,aA=typeof clearTimeout=="function"?clearTimeout:void 0,Oy=typeof Promise=="function"?Promise:void 0,lA=typeof queueMicrotask=="function"?queueMicrotask:typeof Oy<"u"?function(t){return Oy.resolve(null).then(t).catch(uA)}:cp;function uA(t){setTimeout(function(){throw t})}function lf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),gl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);gl(e)}function Os(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function By(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ea=Math.random().toString(36).slice(2),Ar="__reactFiber$"+ea,_l="__reactProps$"+ea,ts="__reactContainer$"+ea,dp="__reactEvents$"+ea,cA="__reactListeners$"+ea,dA="__reactHandles$"+ea;function gi(t){var e=t[Ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ts]||n[Ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=By(t);t!==null;){if(n=t[Ar])return n;t=By(t)}return e}t=n,n=t.parentNode}return null}function Wl(t){return t=t[Ar]||t[ts],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function Od(t){return t[_l]||null}var hp=[],co=-1;function ti(t){return{current:t}}function ht(t){0>co||(t.current=hp[co],hp[co]=null,co--)}function lt(t,e){co++,hp[co]=t.current,t.current=e}var Ys={},mn=ti(Ys),Pn=ti(!1),Si=Ys;function Do(t,e){var n=t.type.contextTypes;if(!n)return Ys;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mn(t){return t=t.childContextTypes,t!=null}function Wc(){ht(Pn),ht(mn)}function zy(t,e,n){if(mn.current!==Ys)throw Error(fe(168));lt(mn,e),lt(Pn,n)}function Zb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(fe(108,Jk(t)||"Unknown",s));return yt({},n,r)}function Kc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ys,Si=mn.current,lt(mn,t),lt(Pn,Pn.current),!0}function Gy(t,e,n){var r=t.stateNode;if(!r)throw Error(fe(169));n?(t=Zb(t,e,Si),r.__reactInternalMemoizedMergedChildContext=t,ht(Pn),ht(mn),lt(mn,t)):ht(Pn),lt(Pn,n)}var Hr=null,Bd=!1,uf=!1;function eE(t){Hr===null?Hr=[t]:Hr.push(t)}function hA(t){Bd=!0,eE(t)}function ni(){if(!uf&&Hr!==null){uf=!0;var t=0,e=rt;try{var n=Hr;for(rt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hr=null,Bd=!1}catch(s){throw Hr!==null&&(Hr=Hr.slice(t+1)),Ib(Dm,ni),s}finally{rt=e,uf=!1}}return null}var ho=[],fo=0,Jc=null,Yc=0,Jn=[],Yn=0,ki=null,Wr=1,Kr="";function hi(t,e){ho[fo++]=Yc,ho[fo++]=Jc,Jc=t,Yc=e}function tE(t,e,n){Jn[Yn++]=Wr,Jn[Yn++]=Kr,Jn[Yn++]=ki,ki=t;var r=Wr;t=Kr;var s=32-dr(r)-1;r&=~(1<<s),n+=1;var i=32-dr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Wr=1<<32-dr(e)+s|n<<s|r,Kr=i+t}else Wr=1<<i|n<<s|r,Kr=t}function Gm(t){t.return!==null&&(hi(t,1),tE(t,1,0))}function Hm(t){for(;t===Jc;)Jc=ho[--fo],ho[fo]=null,Yc=ho[--fo],ho[fo]=null;for(;t===ki;)ki=Jn[--Yn],Jn[Yn]=null,Kr=Jn[--Yn],Jn[Yn]=null,Wr=Jn[--Yn],Jn[Yn]=null}var zn=null,On=null,ft=!1,cr=null;function nE(t,e){var n=Qn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zn=t,On=Os(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zn=t,On=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ki!==null?{id:Wr,overflow:Kr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zn=t,On=null,!0):!1;default:return!1}}function fp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pp(t){if(ft){var e=On;if(e){var n=e;if(!Hy(t,e)){if(fp(t))throw Error(fe(418));e=Os(n.nextSibling);var r=zn;e&&Hy(t,e)?nE(r,n):(t.flags=t.flags&-4097|2,ft=!1,zn=t)}}else{if(fp(t))throw Error(fe(418));t.flags=t.flags&-4097|2,ft=!1,zn=t}}}function $y(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zn=t}function Qu(t){if(t!==zn)return!1;if(!ft)return $y(t),ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!up(t.type,t.memoizedProps)),e&&(e=On)){if(fp(t))throw rE(),Error(fe(418));for(;e;)nE(t,e),e=Os(e.nextSibling)}if($y(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){On=Os(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}On=null}}else On=zn?Os(t.stateNode.nextSibling):null;return!0}function rE(){for(var t=On;t;)t=Os(t.nextSibling)}function Lo(){On=zn=null,ft=!1}function $m(t){cr===null?cr=[t]:cr.push(t)}var fA=ds.ReactCurrentBatchConfig;function Ma(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,t))}return t}function Xu(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qy(t){var e=t._init;return e(t._payload)}function sE(t){function e(v,E){if(t){var T=v.deletions;T===null?(v.deletions=[E],v.flags|=16):T.push(E)}}function n(v,E){if(!t)return null;for(;E!==null;)e(v,E),E=E.sibling;return null}function r(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function s(v,E){return v=Hs(v,E),v.index=0,v.sibling=null,v}function i(v,E,T){return v.index=T,t?(T=v.alternate,T!==null?(T=T.index,T<E?(v.flags|=2,E):T):(v.flags|=2,E)):(v.flags|=1048576,E)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,E,T,R){return E===null||E.tag!==6?(E=gf(T,v.mode,R),E.return=v,E):(E=s(E,T),E.return=v,E)}function l(v,E,T,R){var L=T.type;return L===io?d(v,E,T.props.children,R,T.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Is&&qy(L)===E.type)?(R=s(E,T.props),R.ref=Ma(v,E,T),R.return=v,R):(R=Sc(T.type,T.key,T.props,null,v.mode,R),R.ref=Ma(v,E,T),R.return=v,R)}function c(v,E,T,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=yf(T,v.mode,R),E.return=v,E):(E=s(E,T.children||[]),E.return=v,E)}function d(v,E,T,R,L){return E===null||E.tag!==7?(E=Ei(T,v.mode,R,L),E.return=v,E):(E=s(E,T),E.return=v,E)}function m(v,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=gf(""+E,v.mode,T),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Bu:return T=Sc(E.type,E.key,E.props,null,v.mode,T),T.ref=Ma(v,null,E),T.return=v,T;case so:return E=yf(E,v.mode,T),E.return=v,E;case Is:var R=E._init;return m(v,R(E._payload),T)}if(Oa(E)||Ca(E))return E=Ei(E,v.mode,T,null),E.return=v,E;Xu(v,E)}return null}function g(v,E,T,R){var L=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:a(v,E,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Bu:return T.key===L?l(v,E,T,R):null;case so:return T.key===L?c(v,E,T,R):null;case Is:return L=T._init,g(v,E,L(T._payload),R)}if(Oa(T)||Ca(T))return L!==null?null:d(v,E,T,R,null);Xu(v,T)}return null}function y(v,E,T,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return v=v.get(T)||null,a(E,v,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Bu:return v=v.get(R.key===null?T:R.key)||null,l(E,v,R,L);case so:return v=v.get(R.key===null?T:R.key)||null,c(E,v,R,L);case Is:var U=R._init;return y(v,E,T,U(R._payload),L)}if(Oa(R)||Ca(R))return v=v.get(T)||null,d(E,v,R,L,null);Xu(E,R)}return null}function w(v,E,T,R){for(var L=null,U=null,S=E,C=E=0,N=null;S!==null&&C<T.length;C++){S.index>C?(N=S,S=null):N=S.sibling;var M=g(v,S,T[C],R);if(M===null){S===null&&(S=N);break}t&&S&&M.alternate===null&&e(v,S),E=i(M,E,C),U===null?L=M:U.sibling=M,U=M,S=N}if(C===T.length)return n(v,S),ft&&hi(v,C),L;if(S===null){for(;C<T.length;C++)S=m(v,T[C],R),S!==null&&(E=i(S,E,C),U===null?L=S:U.sibling=S,U=S);return ft&&hi(v,C),L}for(S=r(v,S);C<T.length;C++)N=y(S,v,C,T[C],R),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?C:N.key),E=i(N,E,C),U===null?L=N:U.sibling=N,U=N);return t&&S.forEach(function(V){return e(v,V)}),ft&&hi(v,C),L}function x(v,E,T,R){var L=Ca(T);if(typeof L!="function")throw Error(fe(150));if(T=L.call(T),T==null)throw Error(fe(151));for(var U=L=null,S=E,C=E=0,N=null,M=T.next();S!==null&&!M.done;C++,M=T.next()){S.index>C?(N=S,S=null):N=S.sibling;var V=g(v,S,M.value,R);if(V===null){S===null&&(S=N);break}t&&S&&V.alternate===null&&e(v,S),E=i(V,E,C),U===null?L=V:U.sibling=V,U=V,S=N}if(M.done)return n(v,S),ft&&hi(v,C),L;if(S===null){for(;!M.done;C++,M=T.next())M=m(v,M.value,R),M!==null&&(E=i(M,E,C),U===null?L=M:U.sibling=M,U=M);return ft&&hi(v,C),L}for(S=r(v,S);!M.done;C++,M=T.next())M=y(S,v,C,M.value,R),M!==null&&(t&&M.alternate!==null&&S.delete(M.key===null?C:M.key),E=i(M,E,C),U===null?L=M:U.sibling=M,U=M);return t&&S.forEach(function(P){return e(v,P)}),ft&&hi(v,C),L}function _(v,E,T,R){if(typeof T=="object"&&T!==null&&T.type===io&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Bu:e:{for(var L=T.key,U=E;U!==null;){if(U.key===L){if(L=T.type,L===io){if(U.tag===7){n(v,U.sibling),E=s(U,T.props.children),E.return=v,v=E;break e}}else if(U.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Is&&qy(L)===U.type){n(v,U.sibling),E=s(U,T.props),E.ref=Ma(v,U,T),E.return=v,v=E;break e}n(v,U);break}else e(v,U);U=U.sibling}T.type===io?(E=Ei(T.props.children,v.mode,R,T.key),E.return=v,v=E):(R=Sc(T.type,T.key,T.props,null,v.mode,R),R.ref=Ma(v,E,T),R.return=v,v=R)}return o(v);case so:e:{for(U=T.key;E!==null;){if(E.key===U)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(v,E.sibling),E=s(E,T.children||[]),E.return=v,v=E;break e}else{n(v,E);break}else e(v,E);E=E.sibling}E=yf(T,v.mode,R),E.return=v,v=E}return o(v);case Is:return U=T._init,_(v,E,U(T._payload),R)}if(Oa(T))return w(v,E,T,R);if(Ca(T))return x(v,E,T,R);Xu(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(v,E.sibling),E=s(E,T),E.return=v,v=E):(n(v,E),E=gf(T,v.mode,R),E.return=v,v=E),o(v)):n(v,E)}return _}var jo=sE(!0),iE=sE(!1),Qc=ti(null),Xc=null,po=null,qm=null;function Wm(){qm=po=Xc=null}function Km(t){var e=Qc.current;ht(Qc),t._currentValue=e}function mp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function To(t,e){Xc=t,qm=po=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nn=!0),t.firstContext=null)}function tr(t){var e=t._currentValue;if(qm!==t)if(t={context:t,memoizedValue:e,next:null},po===null){if(Xc===null)throw Error(fe(308));po=t,Xc.dependencies={lanes:0,firstContext:t}}else po=po.next=t;return e}var yi=null;function Jm(t){yi===null?yi=[t]:yi.push(t)}function oE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Jm(e)):(n.next=s.next,s.next=n),e.interleaved=n,ns(t,r)}function ns(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ss=!1;function Ym(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Je&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ns(t,n)}return s=r.interleaved,s===null?(e.next=e,Jm(r)):(e.next=s.next,s.next=e),r.interleaved=e,ns(t,n)}function wc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lm(t,n)}}function Wy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zc(t,e,n,r){var s=t.updateQueue;Ss=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var m=s.baseState;o=0,d=c=l=null,a=i;do{var g=a.lane,y=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,x=a;switch(g=e,y=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){m=w.call(y,m,g);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,g=typeof w=="function"?w.call(y,m,g):w,g==null)break e;m=yt({},m,g);break e;case 2:Ss=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=m):d=d.next=y,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(l=m),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ai|=o,t.lanes=o,t.memoizedState=m}}function Ky(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(fe(191,s));s.call(r)}}}var Kl={},Rr=ti(Kl),bl=ti(Kl),El=ti(Kl);function vi(t){if(t===Kl)throw Error(fe(174));return t}function Qm(t,e){switch(lt(El,e),lt(bl,t),lt(Rr,Kl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Jf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Jf(e,t)}ht(Rr),lt(Rr,e)}function Fo(){ht(Rr),ht(bl),ht(El)}function lE(t){vi(El.current);var e=vi(Rr.current),n=Jf(e,t.type);e!==n&&(lt(bl,t),lt(Rr,n))}function Xm(t){bl.current===t&&(ht(Rr),ht(bl))}var mt=ti(0);function ed(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cf=[];function Zm(){for(var t=0;t<cf.length;t++)cf[t]._workInProgressVersionPrimary=null;cf.length=0}var _c=ds.ReactCurrentDispatcher,df=ds.ReactCurrentBatchConfig,Ci=0,gt=null,Vt=null,$t=null,td=!1,Za=!1,Tl=0,pA=0;function ln(){throw Error(fe(321))}function eg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yr(t[n],e[n]))return!1;return!0}function tg(t,e,n,r,s,i){if(Ci=i,gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_c.current=t===null||t.memoizedState===null?vA:xA,t=n(r,s),Za){i=0;do{if(Za=!1,Tl=0,25<=i)throw Error(fe(301));i+=1,$t=Vt=null,e.updateQueue=null,_c.current=wA,t=n(r,s)}while(Za)}if(_c.current=nd,e=Vt!==null&&Vt.next!==null,Ci=0,$t=Vt=gt=null,td=!1,e)throw Error(fe(300));return t}function ng(){var t=Tl!==0;return Tl=0,t}function Cr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?gt.memoizedState=$t=t:$t=$t.next=t,$t}function nr(){if(Vt===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=Vt.next;var e=$t===null?gt.memoizedState:$t.next;if(e!==null)$t=e,Vt=t;else{if(t===null)throw Error(fe(310));Vt=t,t={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},$t===null?gt.memoizedState=$t=t:$t=$t.next=t}return $t}function Il(t,e){return typeof e=="function"?e(t):e}function hf(t){var e=nr(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=Vt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Ci&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=m,o=r):l=l.next=m,gt.lanes|=d,Ai|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,yr(r,e.memoizedState)||(Nn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,gt.lanes|=i,Ai|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ff(t){var e=nr(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);yr(i,e.memoizedState)||(Nn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function uE(){}function cE(t,e){var n=gt,r=nr(),s=e(),i=!yr(r.memoizedState,s);if(i&&(r.memoizedState=s,Nn=!0),r=r.queue,rg(fE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$t!==null&&$t.memoizedState.tag&1){if(n.flags|=2048,Sl(9,hE.bind(null,n,r,s,e),void 0,null),qt===null)throw Error(fe(349));Ci&30||dE(n,e,s)}return s}function dE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hE(t,e,n,r){e.value=n,e.getSnapshot=r,pE(e)&&mE(t)}function fE(t,e,n){return n(function(){pE(e)&&mE(t)})}function pE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yr(t,n)}catch{return!0}}function mE(t){var e=ns(t,1);e!==null&&hr(e,t,1,-1)}function Jy(t){var e=Cr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:t},e.queue=t,t=t.dispatch=yA.bind(null,gt,t),[e.memoizedState,t]}function Sl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gE(){return nr().memoizedState}function bc(t,e,n,r){var s=Cr();gt.flags|=t,s.memoizedState=Sl(1|e,n,void 0,r===void 0?null:r)}function zd(t,e,n,r){var s=nr();r=r===void 0?null:r;var i=void 0;if(Vt!==null){var o=Vt.memoizedState;if(i=o.destroy,r!==null&&eg(r,o.deps)){s.memoizedState=Sl(e,n,i,r);return}}gt.flags|=t,s.memoizedState=Sl(1|e,n,i,r)}function Yy(t,e){return bc(8390656,8,t,e)}function rg(t,e){return zd(2048,8,t,e)}function yE(t,e){return zd(4,2,t,e)}function vE(t,e){return zd(4,4,t,e)}function xE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wE(t,e,n){return n=n!=null?n.concat([t]):null,zd(4,4,xE.bind(null,e,t),n)}function sg(){}function _E(t,e){var n=nr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&eg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bE(t,e){var n=nr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&eg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function EE(t,e,n){return Ci&21?(yr(n,e)||(n=Cb(),gt.lanes|=n,Ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nn=!0),t.memoizedState=n)}function mA(t,e){var n=rt;rt=n!==0&&4>n?n:4,t(!0);var r=df.transition;df.transition={};try{t(!1),e()}finally{rt=n,df.transition=r}}function TE(){return nr().memoizedState}function gA(t,e,n){var r=Gs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},IE(t))SE(e,n);else if(n=oE(t,e,n,r),n!==null){var s=_n();hr(n,t,r,s),kE(n,e,r)}}function yA(t,e,n){var r=Gs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(IE(t))SE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,yr(a,o)){var l=e.interleaved;l===null?(s.next=s,Jm(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=oE(t,e,s,r),n!==null&&(s=_n(),hr(n,t,r,s),kE(n,e,r))}}function IE(t){var e=t.alternate;return t===gt||e!==null&&e===gt}function SE(t,e){Za=td=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lm(t,n)}}var nd={readContext:tr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},vA={readContext:tr,useCallback:function(t,e){return Cr().memoizedState=[t,e===void 0?null:e],t},useContext:tr,useEffect:Yy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bc(4194308,4,xE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bc(4194308,4,t,e)},useInsertionEffect:function(t,e){return bc(4,2,t,e)},useMemo:function(t,e){var n=Cr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gA.bind(null,gt,t),[r.memoizedState,t]},useRef:function(t){var e=Cr();return t={current:t},e.memoizedState=t},useState:Jy,useDebugValue:sg,useDeferredValue:function(t){return Cr().memoizedState=t},useTransition:function(){var t=Jy(!1),e=t[0];return t=mA.bind(null,t[1]),Cr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gt,s=Cr();if(ft){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=e(),qt===null)throw Error(fe(349));Ci&30||dE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Yy(fE.bind(null,r,i,t),[t]),r.flags|=2048,Sl(9,hE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Cr(),e=qt.identifierPrefix;if(ft){var n=Kr,r=Wr;n=(r&~(1<<32-dr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xA={readContext:tr,useCallback:_E,useContext:tr,useEffect:rg,useImperativeHandle:wE,useInsertionEffect:yE,useLayoutEffect:vE,useMemo:bE,useReducer:hf,useRef:gE,useState:function(){return hf(Il)},useDebugValue:sg,useDeferredValue:function(t){var e=nr();return EE(e,Vt.memoizedState,t)},useTransition:function(){var t=hf(Il)[0],e=nr().memoizedState;return[t,e]},useMutableSource:uE,useSyncExternalStore:cE,useId:TE,unstable_isNewReconciler:!1},wA={readContext:tr,useCallback:_E,useContext:tr,useEffect:rg,useImperativeHandle:wE,useInsertionEffect:yE,useLayoutEffect:vE,useMemo:bE,useReducer:ff,useRef:gE,useState:function(){return ff(Il)},useDebugValue:sg,useDeferredValue:function(t){var e=nr();return Vt===null?e.memoizedState=t:EE(e,Vt.memoizedState,t)},useTransition:function(){var t=ff(Il)[0],e=nr().memoizedState;return[t,e]},useMutableSource:uE,useSyncExternalStore:cE,useId:TE,unstable_isNewReconciler:!1};function lr(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gd={isMounted:function(t){return(t=t._reactInternals)?Ui(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_n(),s=Gs(t),i=Zr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Bs(t,i,s),e!==null&&(hr(e,t,s,r),wc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_n(),s=Gs(t),i=Zr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Bs(t,i,s),e!==null&&(hr(e,t,s,r),wc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_n(),r=Gs(t),s=Zr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Bs(t,s,r),e!==null&&(hr(e,t,r,n),wc(e,t,r))}};function Qy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!vl(n,r)||!vl(s,i):!0}function CE(t,e,n){var r=!1,s=Ys,i=e.contextType;return typeof i=="object"&&i!==null?i=tr(i):(s=Mn(e)?Si:mn.current,r=e.contextTypes,i=(r=r!=null)?Do(t,s):Ys),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Xy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gd.enqueueReplaceState(e,e.state,null)}function yp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ym(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=tr(i):(i=Mn(e)?Si:mn.current,s.context=Do(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(gp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Gd.enqueueReplaceState(s,s.state,null),Zc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Vo(t,e){try{var n="",r=e;do n+=Kk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function pf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _A=typeof WeakMap=="function"?WeakMap:Map;function AE(t,e,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sd||(sd=!0,Cp=r),vp(t,e)},n}function NE(t,e,n){n=Zr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){vp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){vp(t,e),typeof r!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Zy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _A;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=LA.bind(null,t,e,n),e.then(t,t))}function ev(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function tv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zr(-1,1),e.tag=2,Bs(n,e,1))),n.lanes|=1),t)}var bA=ds.ReactCurrentOwner,Nn=!1;function xn(t,e,n,r){e.child=t===null?iE(e,null,n,r):jo(e,t.child,n,r)}function nv(t,e,n,r,s){n=n.render;var i=e.ref;return To(e,s),r=tg(t,e,n,r,i,s),n=ng(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rs(t,e,s)):(ft&&n&&Gm(e),e.flags|=1,xn(t,e,r,s),e.child)}function rv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!hg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,RE(t,e,i,r,s)):(t=Sc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:vl,n(o,r)&&t.ref===e.ref)return rs(t,e,s)}return e.flags|=1,t=Hs(i,r),t.ref=e.ref,t.return=e,e.child=t}function RE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(vl(i,r)&&t.ref===e.ref)if(Nn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Nn=!0);else return e.lanes=t.lanes,rs(t,e,s)}return xp(t,e,n,r,s)}function PE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(go,Un),Un|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(go,Un),Un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,lt(go,Un),Un|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,lt(go,Un),Un|=r;return xn(t,e,s,n),e.child}function ME(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xp(t,e,n,r,s){var i=Mn(n)?Si:mn.current;return i=Do(e,i),To(e,s),n=tg(t,e,n,r,i,s),r=ng(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rs(t,e,s)):(ft&&r&&Gm(e),e.flags|=1,xn(t,e,n,s),e.child)}function sv(t,e,n,r,s){if(Mn(n)){var i=!0;Kc(e)}else i=!1;if(To(e,s),e.stateNode===null)Ec(t,e),CE(e,n,r),yp(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=tr(c):(c=Mn(n)?Si:mn.current,c=Do(e,c));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Xy(e,o,r,c),Ss=!1;var g=e.memoizedState;o.state=g,Zc(e,r,o,s),l=e.memoizedState,a!==r||g!==l||Pn.current||Ss?(typeof d=="function"&&(gp(e,n,d,r),l=e.memoizedState),(a=Ss||Qy(e,n,a,r,g,l,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,aE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:lr(e.type,a),o.props=c,m=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=tr(l):(l=Mn(n)?Si:mn.current,l=Do(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==l)&&Xy(e,o,r,l),Ss=!1,g=e.memoizedState,o.state=g,Zc(e,r,o,s);var w=e.memoizedState;a!==m||g!==w||Pn.current||Ss?(typeof y=="function"&&(gp(e,n,y,r),w=e.memoizedState),(c=Ss||Qy(e,n,c,r,g,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return wp(t,e,n,r,i,s)}function wp(t,e,n,r,s,i){ME(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Gy(e,n,!1),rs(t,e,i);r=e.stateNode,bA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=jo(e,t.child,null,i),e.child=jo(e,null,a,i)):xn(t,e,a,i),e.memoizedState=r.state,s&&Gy(e,n,!0),e.child}function DE(t){var e=t.stateNode;e.pendingContext?zy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zy(t,e.context,!1),Qm(t,e.containerInfo)}function iv(t,e,n,r,s){return Lo(),$m(s),e.flags|=256,xn(t,e,n,r),e.child}var _p={dehydrated:null,treeContext:null,retryLane:0};function bp(t){return{baseLanes:t,cachePool:null,transitions:null}}function LE(t,e,n){var r=e.pendingProps,s=mt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),lt(mt,s&1),t===null)return pp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=qd(o,r,0,null),t=Ei(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=bp(n),e.memoizedState=_p,t):ig(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return EA(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Hs(a,i):(i=Ei(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?bp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=_p,r}return i=t.child,t=i.sibling,r=Hs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ig(t,e){return e=qd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zu(t,e,n,r){return r!==null&&$m(r),jo(e,t.child,null,n),t=ig(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function EA(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=pf(Error(fe(422))),Zu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=qd({mode:"visible",children:r.children},s,0,null),i=Ei(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&jo(e,t.child,null,o),e.child.memoizedState=bp(o),e.memoizedState=_p,i);if(!(e.mode&1))return Zu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(fe(419)),r=pf(i,r,void 0),Zu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Nn||a){if(r=qt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ns(t,s),hr(r,t,s,-1))}return dg(),r=pf(Error(fe(421))),Zu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=jA.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,On=Os(s.nextSibling),zn=e,ft=!0,cr=null,t!==null&&(Jn[Yn++]=Wr,Jn[Yn++]=Kr,Jn[Yn++]=ki,Wr=t.id,Kr=t.overflow,ki=e),e=ig(e,r.children),e.flags|=4096,e)}function ov(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mp(t.return,e,n)}function mf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function jE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(xn(t,e,r.children,n),r=mt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ov(t,n,e);else if(t.tag===19)ov(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(lt(mt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ed(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),mf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ed(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}mf(e,!0,n,null,i);break;case"together":mf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ec(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,n=Hs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TA(t,e,n){switch(e.tag){case 3:DE(e),Lo();break;case 5:lE(e);break;case 1:Mn(e.type)&&Kc(e);break;case 4:Qm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;lt(Qc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(lt(mt,mt.current&1),e.flags|=128,null):n&e.child.childLanes?LE(t,e,n):(lt(mt,mt.current&1),t=rs(t,e,n),t!==null?t.sibling:null);lt(mt,mt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),lt(mt,mt.current),r)break;return null;case 22:case 23:return e.lanes=0,PE(t,e,n)}return rs(t,e,n)}var FE,Ep,VE,UE;FE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ep=function(){};VE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,vi(Rr.current);var i=null;switch(n){case"input":s=$f(t,s),r=$f(t,r),i=[];break;case"select":s=yt({},s,{value:void 0}),r=yt({},r,{value:void 0}),i=[];break;case"textarea":s=Kf(t,s),r=Kf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qc)}Yf(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(dl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(dl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ct("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};UE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Da(t,e){if(!ft)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IA(t,e,n){var r=e.pendingProps;switch(Hm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(e),null;case 1:return Mn(e.type)&&Wc(),un(e),null;case 3:return r=e.stateNode,Fo(),ht(Pn),ht(mn),Zm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cr!==null&&(Rp(cr),cr=null))),Ep(t,e),un(e),null;case 5:Xm(e);var s=vi(El.current);if(n=e.type,t!==null&&e.stateNode!=null)VE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(fe(166));return un(e),null}if(t=vi(Rr.current),Qu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ar]=e,r[_l]=i,t=(e.mode&1)!==0,n){case"dialog":ct("cancel",r),ct("close",r);break;case"iframe":case"object":case"embed":ct("load",r);break;case"video":case"audio":for(s=0;s<za.length;s++)ct(za[s],r);break;case"source":ct("error",r);break;case"img":case"image":case"link":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"input":my(r,i),ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ct("invalid",r);break;case"textarea":yy(r,i),ct("invalid",r)}Yf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Yu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Yu(r.textContent,a,t),s=["children",""+a]):dl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ct("scroll",r)}switch(n){case"input":zu(r),gy(r,i,!0);break;case"textarea":zu(r),vy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=qc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ar]=e,t[_l]=r,FE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Qf(n,r),n){case"dialog":ct("cancel",t),ct("close",t),s=r;break;case"iframe":case"object":case"embed":ct("load",t),s=r;break;case"video":case"audio":for(s=0;s<za.length;s++)ct(za[s],t);s=r;break;case"source":ct("error",t),s=r;break;case"img":case"image":case"link":ct("error",t),ct("load",t),s=r;break;case"details":ct("toggle",t),s=r;break;case"input":my(t,r),s=$f(t,r),ct("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=yt({},r,{value:void 0}),ct("invalid",t);break;case"textarea":yy(t,r),s=Kf(t,r),ct("invalid",t);break;default:s=r}Yf(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?gb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pb(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&hl(t,l):typeof l=="number"&&hl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(dl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ct("scroll",t):l!=null&&Am(t,i,l,o))}switch(n){case"input":zu(t),gy(t,r,!1);break;case"textarea":zu(t),vy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Js(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?wo(t,!!r.multiple,i,!1):r.defaultValue!=null&&wo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=qc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return un(e),null;case 6:if(t&&e.stateNode!=null)UE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(fe(166));if(n=vi(El.current),vi(Rr.current),Qu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ar]=e,(i=r.nodeValue!==n)&&(t=zn,t!==null))switch(t.tag){case 3:Yu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ar]=e,e.stateNode=r}return un(e),null;case 13:if(ht(mt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ft&&On!==null&&e.mode&1&&!(e.flags&128))rE(),Lo(),e.flags|=98560,i=!1;else if(i=Qu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(fe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[Ar]=e}else Lo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;un(e),i=!1}else cr!==null&&(Rp(cr),cr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mt.current&1?Ut===0&&(Ut=3):dg())),e.updateQueue!==null&&(e.flags|=4),un(e),null);case 4:return Fo(),Ep(t,e),t===null&&xl(e.stateNode.containerInfo),un(e),null;case 10:return Km(e.type._context),un(e),null;case 17:return Mn(e.type)&&Wc(),un(e),null;case 19:if(ht(mt),i=e.memoizedState,i===null)return un(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Da(i,!1);else{if(Ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ed(t),o!==null){for(e.flags|=128,Da(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lt(mt,mt.current&1|2),e.child}t=t.sibling}i.tail!==null&&It()>Uo&&(e.flags|=128,r=!0,Da(i,!1),e.lanes=4194304)}else{if(!r)if(t=ed(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Da(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ft)return un(e),null}else 2*It()-i.renderingStartTime>Uo&&n!==1073741824&&(e.flags|=128,r=!0,Da(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=It(),e.sibling=null,n=mt.current,lt(mt,r?n&1|2:n&1),e):(un(e),null);case 22:case 23:return cg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Un&1073741824&&(un(e),e.subtreeFlags&6&&(e.flags|=8192)):un(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function SA(t,e){switch(Hm(e),e.tag){case 1:return Mn(e.type)&&Wc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fo(),ht(Pn),ht(mn),Zm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xm(e),null;case 13:if(ht(mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));Lo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ht(mt),null;case 4:return Fo(),null;case 10:return Km(e.type._context),null;case 22:case 23:return cg(),null;case 24:return null;default:return null}}var ec=!1,hn=!1,kA=typeof WeakSet=="function"?WeakSet:Set,Te=null;function mo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bt(t,e,r)}else n.current=null}function Tp(t,e,n){try{n()}catch(r){bt(t,e,r)}}var av=!1;function CA(t,e){if(ap=Gc,t=Hb(),zm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,m=t,g=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==i||r!==0&&m.nodeType!==3||(l=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)g=m,m=y;for(;;){if(m===t)break t;if(g===n&&++c===s&&(a=o),g===i&&++d===r&&(l=o),(y=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(lp={focusedElem:t,selectionRange:n},Gc=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,_=w.memoizedState,v=e.stateNode,E=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:lr(e.type,x),_);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(R){bt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return w=av,av=!1,w}function el(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Tp(e,n,i)}s=s.next}while(s!==r)}}function Hd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ip(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function OE(t){var e=t.alternate;e!==null&&(t.alternate=null,OE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ar],delete e[_l],delete e[dp],delete e[cA],delete e[dA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BE(t){return t.tag===5||t.tag===3||t.tag===4}function lv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qc));else if(r!==4&&(t=t.child,t!==null))for(Sp(t,e,n),t=t.sibling;t!==null;)Sp(t,e,n),t=t.sibling}function kp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kp(t,e,n),t=t.sibling;t!==null;)kp(t,e,n),t=t.sibling}var Yt=null,ur=!1;function Es(t,e,n){for(n=n.child;n!==null;)zE(t,e,n),n=n.sibling}function zE(t,e,n){if(Nr&&typeof Nr.onCommitFiberUnmount=="function")try{Nr.onCommitFiberUnmount(jd,n)}catch{}switch(n.tag){case 5:hn||mo(n,e);case 6:var r=Yt,s=ur;Yt=null,Es(t,e,n),Yt=r,ur=s,Yt!==null&&(ur?(t=Yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Yt.removeChild(n.stateNode));break;case 18:Yt!==null&&(ur?(t=Yt,n=n.stateNode,t.nodeType===8?lf(t.parentNode,n):t.nodeType===1&&lf(t,n),gl(t)):lf(Yt,n.stateNode));break;case 4:r=Yt,s=ur,Yt=n.stateNode.containerInfo,ur=!0,Es(t,e,n),Yt=r,ur=s;break;case 0:case 11:case 14:case 15:if(!hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Tp(n,e,o),s=s.next}while(s!==r)}Es(t,e,n);break;case 1:if(!hn&&(mo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){bt(n,e,a)}Es(t,e,n);break;case 21:Es(t,e,n);break;case 22:n.mode&1?(hn=(r=hn)||n.memoizedState!==null,Es(t,e,n),hn=r):Es(t,e,n);break;default:Es(t,e,n)}}function uv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kA),e.forEach(function(r){var s=FA.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function or(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Yt=a.stateNode,ur=!1;break e;case 3:Yt=a.stateNode.containerInfo,ur=!0;break e;case 4:Yt=a.stateNode.containerInfo,ur=!0;break e}a=a.return}if(Yt===null)throw Error(fe(160));zE(i,o,s),Yt=null,ur=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){bt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GE(e,t),e=e.sibling}function GE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(or(e,t),kr(t),r&4){try{el(3,t,t.return),Hd(3,t)}catch(x){bt(t,t.return,x)}try{el(5,t,t.return)}catch(x){bt(t,t.return,x)}}break;case 1:or(e,t),kr(t),r&512&&n!==null&&mo(n,n.return);break;case 5:if(or(e,t),kr(t),r&512&&n!==null&&mo(n,n.return),t.flags&32){var s=t.stateNode;try{hl(s,"")}catch(x){bt(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&db(s,i),Qf(a,o);var c=Qf(a,i);for(o=0;o<l.length;o+=2){var d=l[o],m=l[o+1];d==="style"?gb(s,m):d==="dangerouslySetInnerHTML"?pb(s,m):d==="children"?hl(s,m):Am(s,d,m,c)}switch(a){case"input":qf(s,i);break;case"textarea":hb(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?wo(s,!!i.multiple,y,!1):g!==!!i.multiple&&(i.defaultValue!=null?wo(s,!!i.multiple,i.defaultValue,!0):wo(s,!!i.multiple,i.multiple?[]:"",!1))}s[_l]=i}catch(x){bt(t,t.return,x)}}break;case 6:if(or(e,t),kr(t),r&4){if(t.stateNode===null)throw Error(fe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){bt(t,t.return,x)}}break;case 3:if(or(e,t),kr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gl(e.containerInfo)}catch(x){bt(t,t.return,x)}break;case 4:or(e,t),kr(t);break;case 13:or(e,t),kr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(lg=It())),r&4&&uv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(hn=(c=hn)||d,or(e,t),hn=c):or(e,t),kr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Te=t,d=t.child;d!==null;){for(m=Te=d;Te!==null;){switch(g=Te,y=g.child,g.tag){case 0:case 11:case 14:case 15:el(4,g,g.return);break;case 1:mo(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){bt(r,n,x)}}break;case 5:mo(g,g.return);break;case 22:if(g.memoizedState!==null){dv(m);continue}}y!==null?(y.return=g,Te=y):dv(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,l=m.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=mb("display",o))}catch(x){bt(t,t.return,x)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(x){bt(t,t.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:or(e,t),kr(t),r&4&&uv(t);break;case 21:break;default:or(e,t),kr(t)}}function kr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BE(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(hl(s,""),r.flags&=-33);var i=lv(t);kp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=lv(t);Sp(t,a,o);break;default:throw Error(fe(161))}}catch(l){bt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AA(t,e,n){Te=t,HE(t)}function HE(t,e,n){for(var r=(t.mode&1)!==0;Te!==null;){var s=Te,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ec;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||hn;a=ec;var c=hn;if(ec=o,(hn=l)&&!c)for(Te=s;Te!==null;)o=Te,l=o.child,o.tag===22&&o.memoizedState!==null?hv(s):l!==null?(l.return=o,Te=l):hv(s);for(;i!==null;)Te=i,HE(i),i=i.sibling;Te=s,ec=a,hn=c}cv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Te=i):cv(t)}}function cv(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||Hd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!hn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:lr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ky(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ky(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&gl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}hn||e.flags&512&&Ip(e)}catch(g){bt(e,e.return,g)}}if(e===t){Te=null;break}if(n=e.sibling,n!==null){n.return=e.return,Te=n;break}Te=e.return}}function dv(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Te=n;break}Te=e.return}}function hv(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hd(4,e)}catch(l){bt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){bt(e,s,l)}}var i=e.return;try{Ip(e)}catch(l){bt(e,i,l)}break;case 5:var o=e.return;try{Ip(e)}catch(l){bt(e,o,l)}}}catch(l){bt(e,e.return,l)}if(e===t){Te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Te=a;break}Te=e.return}}var NA=Math.ceil,rd=ds.ReactCurrentDispatcher,og=ds.ReactCurrentOwner,Xn=ds.ReactCurrentBatchConfig,Je=0,qt=null,Rt=null,Zt=0,Un=0,go=ti(0),Ut=0,kl=null,Ai=0,$d=0,ag=0,tl=null,Cn=null,lg=0,Uo=1/0,Gr=null,sd=!1,Cp=null,zs=null,tc=!1,Ds=null,id=0,nl=0,Ap=null,Tc=-1,Ic=0;function _n(){return Je&6?It():Tc!==-1?Tc:Tc=It()}function Gs(t){return t.mode&1?Je&2&&Zt!==0?Zt&-Zt:fA.transition!==null?(Ic===0&&(Ic=Cb()),Ic):(t=rt,t!==0||(t=window.event,t=t===void 0?16:Lb(t.type)),t):1}function hr(t,e,n,r){if(50<nl)throw nl=0,Ap=null,Error(fe(185));$l(t,n,r),(!(Je&2)||t!==qt)&&(t===qt&&(!(Je&2)&&($d|=n),Ut===4&&Cs(t,Zt)),Dn(t,r),n===1&&Je===0&&!(e.mode&1)&&(Uo=It()+500,Bd&&ni()))}function Dn(t,e){var n=t.callbackNode;fC(t,e);var r=zc(t,t===qt?Zt:0);if(r===0)n!==null&&_y(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_y(n),e===1)t.tag===0?hA(fv.bind(null,t)):eE(fv.bind(null,t)),lA(function(){!(Je&6)&&ni()}),n=null;else{switch(Ab(r)){case 1:n=Dm;break;case 4:n=Sb;break;case 16:n=Bc;break;case 536870912:n=kb;break;default:n=Bc}n=XE(n,$E.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $E(t,e){if(Tc=-1,Ic=0,Je&6)throw Error(fe(327));var n=t.callbackNode;if(Io()&&t.callbackNode!==n)return null;var r=zc(t,t===qt?Zt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=od(t,r);else{e=r;var s=Je;Je|=2;var i=WE();(qt!==t||Zt!==e)&&(Gr=null,Uo=It()+500,bi(t,e));do try{MA();break}catch(a){qE(t,a)}while(!0);Wm(),rd.current=i,Je=s,Rt!==null?e=0:(qt=null,Zt=0,e=Ut)}if(e!==0){if(e===2&&(s=np(t),s!==0&&(r=s,e=Np(t,s))),e===1)throw n=kl,bi(t,0),Cs(t,r),Dn(t,It()),n;if(e===6)Cs(t,r);else{if(s=t.current.alternate,!(r&30)&&!RA(s)&&(e=od(t,r),e===2&&(i=np(t),i!==0&&(r=i,e=Np(t,i))),e===1))throw n=kl,bi(t,0),Cs(t,r),Dn(t,It()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(fe(345));case 2:fi(t,Cn,Gr);break;case 3:if(Cs(t,r),(r&130023424)===r&&(e=lg+500-It(),10<e)){if(zc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_n(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=cp(fi.bind(null,t,Cn,Gr),e);break}fi(t,Cn,Gr);break;case 4:if(Cs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-dr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=It()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*NA(r/1960))-r,10<r){t.timeoutHandle=cp(fi.bind(null,t,Cn,Gr),r);break}fi(t,Cn,Gr);break;case 5:fi(t,Cn,Gr);break;default:throw Error(fe(329))}}}return Dn(t,It()),t.callbackNode===n?$E.bind(null,t):null}function Np(t,e){var n=tl;return t.current.memoizedState.isDehydrated&&(bi(t,e).flags|=256),t=od(t,e),t!==2&&(e=Cn,Cn=n,e!==null&&Rp(e)),t}function Rp(t){Cn===null?Cn=t:Cn.push.apply(Cn,t)}function RA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!yr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cs(t,e){for(e&=~ag,e&=~$d,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dr(e),r=1<<n;t[n]=-1,e&=~r}}function fv(t){if(Je&6)throw Error(fe(327));Io();var e=zc(t,0);if(!(e&1))return Dn(t,It()),null;var n=od(t,e);if(t.tag!==0&&n===2){var r=np(t);r!==0&&(e=r,n=Np(t,r))}if(n===1)throw n=kl,bi(t,0),Cs(t,e),Dn(t,It()),n;if(n===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fi(t,Cn,Gr),Dn(t,It()),null}function ug(t,e){var n=Je;Je|=1;try{return t(e)}finally{Je=n,Je===0&&(Uo=It()+500,Bd&&ni())}}function Ni(t){Ds!==null&&Ds.tag===0&&!(Je&6)&&Io();var e=Je;Je|=1;var n=Xn.transition,r=rt;try{if(Xn.transition=null,rt=1,t)return t()}finally{rt=r,Xn.transition=n,Je=e,!(Je&6)&&ni()}}function cg(){Un=go.current,ht(go)}function bi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aA(n)),Rt!==null)for(n=Rt.return;n!==null;){var r=n;switch(Hm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wc();break;case 3:Fo(),ht(Pn),ht(mn),Zm();break;case 5:Xm(r);break;case 4:Fo();break;case 13:ht(mt);break;case 19:ht(mt);break;case 10:Km(r.type._context);break;case 22:case 23:cg()}n=n.return}if(qt=t,Rt=t=Hs(t.current,null),Zt=Un=e,Ut=0,kl=null,ag=$d=Ai=0,Cn=tl=null,yi!==null){for(e=0;e<yi.length;e++)if(n=yi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}yi=null}return t}function qE(t,e){do{var n=Rt;try{if(Wm(),_c.current=nd,td){for(var r=gt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}td=!1}if(Ci=0,$t=Vt=gt=null,Za=!1,Tl=0,og.current=null,n===null||n.return===null){Ut=1,kl=e,Rt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Zt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=ev(o);if(y!==null){y.flags&=-257,tv(y,o,a,i,e),y.mode&1&&Zy(i,c,e),e=y,l=c;var w=e.updateQueue;if(w===null){var x=new Set;x.add(l),e.updateQueue=x}else w.add(l);break e}else{if(!(e&1)){Zy(i,c,e),dg();break e}l=Error(fe(426))}}else if(ft&&a.mode&1){var _=ev(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),tv(_,o,a,i,e),$m(Vo(l,a));break e}}i=l=Vo(l,a),Ut!==4&&(Ut=2),tl===null?tl=[i]:tl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=AE(i,l,e);Wy(i,v);break e;case 1:a=l;var E=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(zs===null||!zs.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=NE(i,a,e);Wy(i,R);break e}}i=i.return}while(i!==null)}JE(n)}catch(L){e=L,Rt===n&&n!==null&&(Rt=n=n.return);continue}break}while(!0)}function WE(){var t=rd.current;return rd.current=nd,t===null?nd:t}function dg(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),qt===null||!(Ai&268435455)&&!($d&268435455)||Cs(qt,Zt)}function od(t,e){var n=Je;Je|=2;var r=WE();(qt!==t||Zt!==e)&&(Gr=null,bi(t,e));do try{PA();break}catch(s){qE(t,s)}while(!0);if(Wm(),Je=n,rd.current=r,Rt!==null)throw Error(fe(261));return qt=null,Zt=0,Ut}function PA(){for(;Rt!==null;)KE(Rt)}function MA(){for(;Rt!==null&&!sC();)KE(Rt)}function KE(t){var e=QE(t.alternate,t,Un);t.memoizedProps=t.pendingProps,e===null?JE(t):Rt=e,og.current=null}function JE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=SA(n,e),n!==null){n.flags&=32767,Rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ut=6,Rt=null;return}}else if(n=IA(n,e,Un),n!==null){Rt=n;return}if(e=e.sibling,e!==null){Rt=e;return}Rt=e=t}while(e!==null);Ut===0&&(Ut=5)}function fi(t,e,n){var r=rt,s=Xn.transition;try{Xn.transition=null,rt=1,DA(t,e,n,r)}finally{Xn.transition=s,rt=r}return null}function DA(t,e,n,r){do Io();while(Ds!==null);if(Je&6)throw Error(fe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(pC(t,i),t===qt&&(Rt=qt=null,Zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tc||(tc=!0,XE(Bc,function(){return Io(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xn.transition,Xn.transition=null;var o=rt;rt=1;var a=Je;Je|=4,og.current=null,CA(t,n),GE(n,t),eA(lp),Gc=!!ap,lp=ap=null,t.current=n,AA(n),iC(),Je=a,rt=o,Xn.transition=i}else t.current=n;if(tc&&(tc=!1,Ds=t,id=s),i=t.pendingLanes,i===0&&(zs=null),lC(n.stateNode),Dn(t,It()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(sd)throw sd=!1,t=Cp,Cp=null,t;return id&1&&t.tag!==0&&Io(),i=t.pendingLanes,i&1?t===Ap?nl++:(nl=0,Ap=t):nl=0,ni(),null}function Io(){if(Ds!==null){var t=Ab(id),e=Xn.transition,n=rt;try{if(Xn.transition=null,rt=16>t?16:t,Ds===null)var r=!1;else{if(t=Ds,Ds=null,id=0,Je&6)throw Error(fe(331));var s=Je;for(Je|=4,Te=t.current;Te!==null;){var i=Te,o=i.child;if(Te.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Te=c;Te!==null;){var d=Te;switch(d.tag){case 0:case 11:case 15:el(8,d,i)}var m=d.child;if(m!==null)m.return=d,Te=m;else for(;Te!==null;){d=Te;var g=d.sibling,y=d.return;if(OE(d),d===c){Te=null;break}if(g!==null){g.return=y,Te=g;break}Te=y}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}Te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Te=o;else e:for(;Te!==null;){if(i=Te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:el(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Te=v;break e}Te=i.return}}var E=t.current;for(Te=E;Te!==null;){o=Te;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Te=T;else e:for(o=E;Te!==null;){if(a=Te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hd(9,a)}}catch(L){bt(a,a.return,L)}if(a===o){Te=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,Te=R;break e}Te=a.return}}if(Je=s,ni(),Nr&&typeof Nr.onPostCommitFiberRoot=="function")try{Nr.onPostCommitFiberRoot(jd,t)}catch{}r=!0}return r}finally{rt=n,Xn.transition=e}}return!1}function pv(t,e,n){e=Vo(n,e),e=AE(t,e,1),t=Bs(t,e,1),e=_n(),t!==null&&($l(t,1,e),Dn(t,e))}function bt(t,e,n){if(t.tag===3)pv(t,t,n);else for(;e!==null;){if(e.tag===3){pv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zs===null||!zs.has(r))){t=Vo(n,t),t=NE(e,t,1),e=Bs(e,t,1),t=_n(),e!==null&&($l(e,1,t),Dn(e,t));break}}e=e.return}}function LA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_n(),t.pingedLanes|=t.suspendedLanes&n,qt===t&&(Zt&n)===n&&(Ut===4||Ut===3&&(Zt&130023424)===Zt&&500>It()-lg?bi(t,0):ag|=n),Dn(t,e)}function YE(t,e){e===0&&(t.mode&1?(e=$u,$u<<=1,!($u&130023424)&&($u=4194304)):e=1);var n=_n();t=ns(t,e),t!==null&&($l(t,e,n),Dn(t,n))}function jA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),YE(t,n)}function FA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(e),YE(t,n)}var QE;QE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pn.current)Nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nn=!1,TA(t,e,n);Nn=!!(t.flags&131072)}else Nn=!1,ft&&e.flags&1048576&&tE(e,Yc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ec(t,e),t=e.pendingProps;var s=Do(e,mn.current);To(e,n),s=tg(null,e,r,t,s,n);var i=ng();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mn(r)?(i=!0,Kc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ym(e),s.updater=Gd,e.stateNode=s,s._reactInternals=e,yp(e,r,t,n),e=wp(null,e,r,!0,i,n)):(e.tag=0,ft&&i&&Gm(e),xn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ec(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=UA(r),t=lr(r,t),s){case 0:e=xp(null,e,r,t,n);break e;case 1:e=sv(null,e,r,t,n);break e;case 11:e=nv(null,e,r,t,n);break e;case 14:e=rv(null,e,r,lr(r.type,t),n);break e}throw Error(fe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lr(r,s),xp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lr(r,s),sv(t,e,r,s,n);case 3:e:{if(DE(e),t===null)throw Error(fe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,aE(t,e),Zc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Vo(Error(fe(423)),e),e=iv(t,e,r,n,s);break e}else if(r!==s){s=Vo(Error(fe(424)),e),e=iv(t,e,r,n,s);break e}else for(On=Os(e.stateNode.containerInfo.firstChild),zn=e,ft=!0,cr=null,n=iE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lo(),r===s){e=rs(t,e,n);break e}xn(t,e,r,n)}e=e.child}return e;case 5:return lE(e),t===null&&pp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,up(r,s)?o=null:i!==null&&up(r,i)&&(e.flags|=32),ME(t,e),xn(t,e,o,n),e.child;case 6:return t===null&&pp(e),null;case 13:return LE(t,e,n);case 4:return Qm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=jo(e,null,r,n):xn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lr(r,s),nv(t,e,r,s,n);case 7:return xn(t,e,e.pendingProps,n),e.child;case 8:return xn(t,e,e.pendingProps.children,n),e.child;case 12:return xn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,lt(Qc,r._currentValue),r._currentValue=o,i!==null)if(yr(i.value,o)){if(i.children===s.children&&!Pn.current){e=rs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Zr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),mp(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),mp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}xn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,To(e,n),s=tr(s),r=r(s),e.flags|=1,xn(t,e,r,n),e.child;case 14:return r=e.type,s=lr(r,e.pendingProps),s=lr(r.type,s),rv(t,e,r,s,n);case 15:return RE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:lr(r,s),Ec(t,e),e.tag=1,Mn(r)?(t=!0,Kc(e)):t=!1,To(e,n),CE(e,r,s),yp(e,r,s,n),wp(null,e,r,!0,t,n);case 19:return jE(t,e,n);case 22:return PE(t,e,n)}throw Error(fe(156,e.tag))};function XE(t,e){return Ib(t,e)}function VA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,e,n,r){return new VA(t,e,n,r)}function hg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UA(t){if(typeof t=="function")return hg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rm)return 11;if(t===Pm)return 14}return 2}function Hs(t,e){var n=t.alternate;return n===null?(n=Qn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")hg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case io:return Ei(n.children,s,i,e);case Nm:o=8,s|=8;break;case Bf:return t=Qn(12,n,e,s|2),t.elementType=Bf,t.lanes=i,t;case zf:return t=Qn(13,n,e,s),t.elementType=zf,t.lanes=i,t;case Gf:return t=Qn(19,n,e,s),t.elementType=Gf,t.lanes=i,t;case lb:return qd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ob:o=10;break e;case ab:o=9;break e;case Rm:o=11;break e;case Pm:o=14;break e;case Is:o=16,r=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=Qn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ei(t,e,n,r){return t=Qn(7,t,r,e),t.lanes=n,t}function qd(t,e,n,r){return t=Qn(22,t,r,e),t.elementType=lb,t.lanes=n,t.stateNode={isHidden:!1},t}function gf(t,e,n){return t=Qn(6,t,null,e),t.lanes=n,t}function yf(t,e,n){return e=Qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OA(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yh(0),this.expirationTimes=Yh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function fg(t,e,n,r,s,i,o,a,l){return t=new OA(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Qn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ym(i),t}function BA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:so,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ZE(t){if(!t)return Ys;t=t._reactInternals;e:{if(Ui(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var n=t.type;if(Mn(n))return Zb(t,n,e)}return e}function eT(t,e,n,r,s,i,o,a,l){return t=fg(n,r,!0,t,s,i,o,a,l),t.context=ZE(null),n=t.current,r=_n(),s=Gs(n),i=Zr(r,s),i.callback=e??null,Bs(n,i,s),t.current.lanes=s,$l(t,s,r),Dn(t,r),t}function Wd(t,e,n,r){var s=e.current,i=_n(),o=Gs(s);return n=ZE(n),e.context===null?e.context=n:e.pendingContext=n,e=Zr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bs(s,e,o),t!==null&&(hr(t,s,o,i),wc(t,s,o)),o}function ad(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pg(t,e){mv(t,e),(t=t.alternate)&&mv(t,e)}function zA(){return null}var tT=typeof reportError=="function"?reportError:function(t){console.error(t)};function mg(t){this._internalRoot=t}Kd.prototype.render=mg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));Wd(t,e,null,null)};Kd.prototype.unmount=mg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ni(function(){Wd(null,t,null,null)}),e[ts]=null}};function Kd(t){this._internalRoot=t}Kd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Pb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ks.length&&e!==0&&e<ks[n].priority;n++);ks.splice(n,0,t),n===0&&Db(t)}};function gg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gv(){}function GA(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=ad(o);i.call(c)}}var o=eT(e,r,t,0,null,!1,!1,"",gv);return t._reactRootContainer=o,t[ts]=o.current,xl(t.nodeType===8?t.parentNode:t),Ni(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=ad(l);a.call(c)}}var l=fg(t,0,!1,null,null,!1,!1,"",gv);return t._reactRootContainer=l,t[ts]=l.current,xl(t.nodeType===8?t.parentNode:t),Ni(function(){Wd(e,l,n,r)}),l}function Yd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=ad(o);a.call(l)}}Wd(e,o,t,s)}else o=GA(n,e,t,s,r);return ad(o)}Nb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ba(e.pendingLanes);n!==0&&(Lm(e,n|1),Dn(e,It()),!(Je&6)&&(Uo=It()+500,ni()))}break;case 13:Ni(function(){var r=ns(t,1);if(r!==null){var s=_n();hr(r,t,1,s)}}),pg(t,1)}};jm=function(t){if(t.tag===13){var e=ns(t,134217728);if(e!==null){var n=_n();hr(e,t,134217728,n)}pg(t,134217728)}};Rb=function(t){if(t.tag===13){var e=Gs(t),n=ns(t,e);if(n!==null){var r=_n();hr(n,t,e,r)}pg(t,e)}};Pb=function(){return rt};Mb=function(t,e){var n=rt;try{return rt=t,e()}finally{rt=n}};Zf=function(t,e,n){switch(e){case"input":if(qf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Od(r);if(!s)throw Error(fe(90));cb(r),qf(r,s)}}}break;case"textarea":hb(t,n);break;case"select":e=n.value,e!=null&&wo(t,!!n.multiple,e,!1)}};xb=ug;wb=Ni;var HA={usingClientEntryPoint:!1,Events:[Wl,uo,Od,yb,vb,ug]},La={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$A={bundleType:La.bundleType,version:La.version,rendererPackageName:La.rendererPackageName,rendererConfig:La.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Eb(t),t===null?null:t.stateNode},findFiberByHostInstance:La.findFiberByHostInstance||zA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{jd=nc.inject($A),Nr=nc}catch{}}qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HA;qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gg(e))throw Error(fe(200));return BA(t,e,null,n)};qn.createRoot=function(t,e){if(!gg(t))throw Error(fe(299));var n=!1,r="",s=tT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=fg(t,1,!1,null,null,n,!1,r,s),t[ts]=e.current,xl(t.nodeType===8?t.parentNode:t),new mg(e)};qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=Eb(e),t=t===null?null:t.stateNode,t};qn.flushSync=function(t){return Ni(t)};qn.hydrate=function(t,e,n){if(!Jd(e))throw Error(fe(200));return Yd(null,t,e,!0,n)};qn.hydrateRoot=function(t,e,n){if(!gg(t))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=tT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=eT(e,null,t,1,n??null,s,!1,i,o),t[ts]=e.current,xl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Kd(e)};qn.render=function(t,e,n){if(!Jd(e))throw Error(fe(200));return Yd(null,t,e,!1,n)};qn.unmountComponentAtNode=function(t){if(!Jd(t))throw Error(fe(40));return t._reactRootContainer?(Ni(function(){Yd(null,null,t,!1,function(){t._reactRootContainer=null,t[ts]=null})}),!0):!1};qn.unstable_batchedUpdates=ug;qn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jd(n))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return Yd(t,e,n,!1,r)};qn.version="18.3.1-next-f1338f8080-20240426";function nT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nT)}catch(t){console.error(t)}}nT(),nb.exports=qn;var qA=nb.exports,yv=qA;Uf.createRoot=yv.createRoot,Uf.hydrateRoot=yv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cl(){return Cl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cl.apply(this,arguments)}var Ls;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ls||(Ls={}));const vv="popstate";function WA(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Oi(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Pp("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:ld(i))}function r(s,i){Qd(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return JA(e,n,r,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KA(){return Math.random().toString(36).substr(2,8)}function xv(t,e){return{usr:t.state,key:t.key,idx:e}}function Pp(t,e,n,r){return n===void 0&&(n=null),Cl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Oi(e):e,{state:n,key:e&&e.key||r||KA()})}function ld(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Oi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function JA(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ls.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Cl({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function m(){a=Ls.Pop;let _=d(),v=_==null?null:_-c;c=_,l&&l({action:a,location:x.location,delta:v})}function g(_,v){a=Ls.Push;let E=Pp(x.location,_,v);n&&n(E,_),c=d()+1;let T=xv(E,c),R=x.createHref(E);try{o.pushState(T,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(R)}i&&l&&l({action:a,location:x.location,delta:1})}function y(_,v){a=Ls.Replace;let E=Pp(x.location,_,v);n&&n(E,_),c=d();let T=xv(E,c),R=x.createHref(E);o.replaceState(T,"",R),i&&l&&l({action:a,location:x.location,delta:0})}function w(_){let v=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof _=="string"?_:ld(_);return E=E.replace(/ $/,"%20"),St(v,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,v)}let x={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(vv,m),l=_,()=>{s.removeEventListener(vv,m),l=null}},createHref(_){return e(s,_)},createURL:w,encodeLocation(_){let v=w(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:g,replace:y,go(_){return o.go(_)}};return x}var wv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(wv||(wv={}));function YA(t,e,n){return n===void 0&&(n="/"),QA(t,e,n)}function QA(t,e,n,r){let s=typeof e=="string"?Oi(e):e,i=yg(s.pathname||"/",n);if(i==null)return null;let o=rT(t);XA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=c2(i);a=a2(o[l],c)}return a}function rT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(St(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=$s([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(St(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),rT(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:i2(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of sT(i.path))s(i,o,l)}),e}function sT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=sT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function XA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:o2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ZA=/^:[\w-]+$/,e2=3,t2=2,n2=1,r2=10,s2=-2,_v=t=>t==="*";function i2(t,e){let n=t.split("/"),r=n.length;return n.some(_v)&&(r+=s2),e&&(r+=t2),n.filter(s=>!_v(s)).reduce((s,i)=>s+(ZA.test(i)?e2:i===""?n2:r2),r)}function o2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function a2(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",m=l2({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),g=l.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:$s([i,m.pathname]),pathnameBase:m2($s([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=$s([i,m.pathnameBase]))}return o}function l2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=u2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,m)=>{let{paramName:g,isOptional:y}=d;if(g==="*"){let x=a[m]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const w=a[m];return y&&!w?c[g]=void 0:c[g]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function u2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Qd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function c2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const d2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h2=t=>d2.test(t);function f2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Oi(t):t,i;if(n)if(h2(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Qd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=bv(n.substring(1),"/"):i=bv(n,e)}else i=e;return{pathname:i,search:g2(r),hash:y2(s)}}function bv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function vf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function p2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vg(t,e){let n=p2(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function xg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Oi(t):(s=Cl({},t),St(!s.pathname||!s.pathname.includes("?"),vf("?","pathname","search",s)),St(!s.pathname||!s.pathname.includes("#"),vf("#","pathname","hash",s)),St(!s.search||!s.search.includes("#"),vf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}a=m>=0?e[m]:"/"}let l=f2(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const $s=t=>t.join("/").replace(/\/\/+/g,"/"),m2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),g2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,y2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function v2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const iT=["post","put","patch","delete"];new Set(iT);const x2=["get",...iT];new Set(x2);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Al(){return Al=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Al.apply(this,arguments)}const wg=F.createContext(null),w2=F.createContext(null),ri=F.createContext(null),Xd=F.createContext(null),hs=F.createContext({outlet:null,matches:[],isDataRoute:!1}),oT=F.createContext(null);function _2(t,e){let{relative:n}=e===void 0?{}:e;ta()||St(!1);let{basename:r,navigator:s}=F.useContext(ri),{hash:i,pathname:o,search:a}=uT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:$s([r,o])),s.createHref({pathname:l,search:a,hash:i})}function ta(){return F.useContext(Xd)!=null}function Bi(){return ta()||St(!1),F.useContext(Xd).location}function aT(t){F.useContext(ri).static||F.useLayoutEffect(t)}function fs(){let{isDataRoute:t}=F.useContext(hs);return t?D2():b2()}function b2(){ta()||St(!1);let t=F.useContext(wg),{basename:e,future:n,navigator:r}=F.useContext(ri),{matches:s}=F.useContext(hs),{pathname:i}=Bi(),o=JSON.stringify(vg(s,n.v7_relativeSplatPath)),a=F.useRef(!1);return aT(()=>{a.current=!0}),F.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let m=xg(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:$s([e,m.pathname])),(d.replace?r.replace:r.push)(m,d.state,d)},[e,r,o,i,t])}function lT(){let{matches:t}=F.useContext(hs),e=t[t.length-1];return e?e.params:{}}function uT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=F.useContext(ri),{matches:s}=F.useContext(hs),{pathname:i}=Bi(),o=JSON.stringify(vg(s,r.v7_relativeSplatPath));return F.useMemo(()=>xg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function E2(t,e){return T2(t,e)}function T2(t,e,n,r){ta()||St(!1);let{navigator:s}=F.useContext(ri),{matches:i}=F.useContext(hs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Bi(),d;if(e){var m;let _=typeof e=="string"?Oi(e):e;l==="/"||(m=_.pathname)!=null&&m.startsWith(l)||St(!1),d=_}else d=c;let g=d.pathname||"/",y=g;if(l!=="/"){let _=l.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=YA(t,{pathname:y}),x=A2(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:$s([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:$s([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&x?F.createElement(Xd.Provider,{value:{location:Al({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ls.Pop}},x):x}function I2(){let t=M2(),e=v2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:s},n):null,null)}const S2=F.createElement(I2,null);class k2 extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(hs.Provider,{value:this.props.routeContext},F.createElement(oT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function C2(t){let{routeContext:e,match:n,children:r}=t,s=F.useContext(wg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(hs.Provider,{value:e},r)}function A2(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);d>=0||St(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=d),m.route.id){let{loaderData:g,errors:y}=n,w=m.route.loader&&g[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,m,g)=>{let y,w=!1,x=null,_=null;n&&(y=a&&m.route.id?a[m.route.id]:void 0,x=m.route.errorElement||S2,l&&(c<0&&g===0?(L2("route-fallback"),w=!0,_=null):c===g&&(w=!0,_=m.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,g+1)),E=()=>{let T;return y?T=x:w?T=_:m.route.Component?T=F.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=d,F.createElement(C2,{match:m,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?F.createElement(k2,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:E(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):E()},null)}var cT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(cT||{}),dT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(dT||{});function N2(t){let e=F.useContext(wg);return e||St(!1),e}function R2(t){let e=F.useContext(w2);return e||St(!1),e}function P2(t){let e=F.useContext(hs);return e||St(!1),e}function hT(t){let e=P2(),n=e.matches[e.matches.length-1];return n.route.id||St(!1),n.route.id}function M2(){var t;let e=F.useContext(oT),n=R2(),r=hT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function D2(){let{router:t}=N2(cT.UseNavigateStable),e=hT(dT.UseNavigateStable),n=F.useRef(!1);return aT(()=>{n.current=!0}),F.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Al({fromRouteId:e},i)))},[t,e])}const Ev={};function L2(t,e,n){Ev[t]||(Ev[t]=!0)}function j2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function F2(t){let{to:e,replace:n,state:r,relative:s}=t;ta()||St(!1);let{future:i,static:o}=F.useContext(ri),{matches:a}=F.useContext(hs),{pathname:l}=Bi(),c=fs(),d=xg(e,vg(a,i.v7_relativeSplatPath),l,s==="path"),m=JSON.stringify(d);return F.useEffect(()=>c(JSON.parse(m),{replace:n,state:r,relative:s}),[c,m,s,n,r]),null}function yn(t){St(!1)}function V2(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ls.Pop,navigator:i,static:o=!1,future:a}=t;ta()&&St(!1);let l=e.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:i,static:o,future:Al({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Oi(r));let{pathname:d="/",search:m="",hash:g="",state:y=null,key:w="default"}=r,x=F.useMemo(()=>{let _=yg(d,l);return _==null?null:{location:{pathname:_,search:m,hash:g,state:y,key:w},navigationType:s}},[l,d,m,g,y,w,s]);return x==null?null:F.createElement(ri.Provider,{value:c},F.createElement(Xd.Provider,{children:n,value:x}))}function U2(t){let{children:e,location:n}=t;return E2(Mp(e),n)}new Promise(()=>{});function Mp(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(r,s)=>{if(!F.isValidElement(r))return;let i=[...e,s];if(r.type===F.Fragment){n.push.apply(n,Mp(r.props.children,i));return}r.type!==yn&&St(!1),!r.props.index||!r.props.children||St(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Mp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dp(){return Dp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dp.apply(this,arguments)}function O2(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function B2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function z2(t,e){return t.button===0&&(!e||e==="_self")&&!B2(t)}const G2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],H2="6";try{window.__reactRouterVersion=H2}catch{}const $2="startTransition",Tv=Lk[$2];function q2(t){let{basename:e,children:n,future:r,window:s}=t,i=F.useRef();i.current==null&&(i.current=WA({window:s,v5Compat:!0}));let o=i.current,[a,l]=F.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=F.useCallback(m=>{c&&Tv?Tv(()=>l(m)):l(m)},[l,c]);return F.useLayoutEffect(()=>o.listen(d),[o,d]),F.useEffect(()=>j2(r),[r]),F.createElement(V2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const W2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",K2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rl=F.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:m}=e,g=O2(e,G2),{basename:y}=F.useContext(ri),w,x=!1;if(typeof c=="string"&&K2.test(c)&&(w=c,W2))try{let T=new URL(window.location.href),R=c.startsWith("//")?new URL(T.protocol+c):new URL(c),L=yg(R.pathname,y);R.origin===T.origin&&L!=null?c=L+R.search+R.hash:x=!0}catch{}let _=_2(c,{relative:s}),v=J2(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:m});function E(T){r&&r(T),T.defaultPrevented||v(T)}return F.createElement("a",Dp({},g,{href:w||_,onClick:x||i?r:E,ref:n,target:l}))});var Iv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Iv||(Iv={}));var Sv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Sv||(Sv={}));function J2(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=fs(),c=Bi(),d=uT(t,{relative:o});return F.useCallback(m=>{if(z2(m,n)){m.preventDefault();let g=r!==void 0?r:ld(c)===ld(d);l(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}const Oo=({className:t="w-10 h-10",variant:e="dark"})=>{const n=e==="dark"?"#0f172a":"#ffffff",r=e==="dark"?"#ffffff":"#0f172a";return u.jsxs("svg",{viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[u.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",fill:n}),u.jsx("text",{x:"50%",y:"235",dominantBaseline:"middle",textAnchor:"middle",fill:r,style:{fontSize:"160px",fontWeight:"900",fontFamily:"'Plus Jakarta Sans', sans-serif",letterSpacing:"-2px",fontStyle:"normal"},children:"IRA"}),u.jsx("text",{x:"50%",y:"340",dominantBaseline:"middle",textAnchor:"middle",fill:r,textLength:"280",lengthAdjust:"spacingAndGlyphs",style:{fontSize:"32px",fontWeight:"800",fontFamily:"'Plus Jakarta Sans', sans-serif",textTransform:"uppercase",letterSpacing:"2px",opacity:.9,fontStyle:"normal"},children:"irfan rizki aditri"}),e==="light"&&u.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",stroke:"rgba(0,0,0,0.05)",strokeWidth:"2"})]})},Y2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}),u.jsx("path",{d:"M22 21H7"}),u.jsx("path",{d:"m5 11 9 9"})]}),kv=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),u.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),u.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"})]}),Q2=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4Z"})}),Nl=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"17 8 12 3 7 8"}),u.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),fT=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"7 10 12 15 17 10"}),u.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),ss=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m15 18-6-6 6-6"})}),fr=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m6 9 6 6 6-6"})}),Bo=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M5 12h14"}),u.jsx("path",{d:"m12 5 7 7-7 7"})]}),pT=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"12",x2:"12",y1:"19",y2:"5"}),u.jsx("polyline",{points:"5 12 12 5 19 12"})]}),mT=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),u.jsx("polyline",{points:"19 12 12 19 5 12"})]}),Lp=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),X2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m9 7-5 5 5 5"}),u.jsx("path",{d:"m15 7 5 5-5 5"})]}),Zd=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),u.jsx("path",{d:"M3 3v5h5"}),u.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),u.jsx("path",{d:"M16 21h5v-5"})]}),Jl=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),u.jsx("path",{d:"M12 9v4"}),u.jsx("path",{d:"M12 17h.01"})]}),gT=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),u.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),u.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]}),ud=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),u.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1 4-10z"})]}),Cv=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-6v-4h4v4h-4z"}),u.jsx("path",{d:"M12 12.5a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 1 0v5a.5.5 0 0 1-.5.5z"}),u.jsx("path",{d:"M12 2a10 10 0 0 1 7.07 17.07l-1.41-1.41A8 8 0 1 0 5.34 4.34l1.41 1.41A10 10 0 0 1 12 2z"}),u.jsx("text",{x:"50%",y:"55%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"14",fontWeight:"bold",children:"G"})]}),Av=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),yT=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),u.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),is=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("polyline",{points:"20 6 9 17 4 12"})}),Z2=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"1"}),u.jsx("circle",{cx:"12",cy:"5",r:"1"}),u.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),Pr=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),eN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),u.jsx("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),u.jsx("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),u.jsx("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),u.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]}),jp=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),u.jsx("path",{d:"m15 5 4 4"})]}),_g=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),Rl=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m21 2-2 2m-7.6 7.6a6 6 0 1 1-8.4-8.4 6 6 0 0 1 8.4 8.4Zm0 0 5.7 5.7a2 2 0 0 1 0 2.8l-2.8 2.8"})}),Nv=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),u.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),tN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"})}),nN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M12 16v-4"}),u.jsx("path",{d:"M12 8h.01"})]}),rN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12 2v2"}),u.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),u.jsx("path",{d:"M20 12h2"}),u.jsx("path",{d:"m19.07 4.93-1.41 1.41"}),u.jsx("path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128"}),u.jsx("path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"})]}),sN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),u.jsx("line",{x1:"4",x2:"4",y1:"22",y2:"15"})]}),vT=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:u.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),cd=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"}),u.jsx("path",{d:"m9 12 2 2 4-4"})]}),iN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:u.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),oN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M9 18V5l12-2v13"}),u.jsx("circle",{cx:"6",cy:"18",r:"3"}),u.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),xT=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),u.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),wT=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),u.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),aN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"6",cy:"6",r:"3"}),u.jsx("circle",{cx:"6",cy:"18",r:"3"}),u.jsx("line",{x1:"20",x2:"8.12",y1:"4",y2:"15.88"}),u.jsx("line",{x1:"14.47",x2:"20",y1:"14.48",y2:"20"}),u.jsx("line",{x1:"8.12",x2:"12",y1:"8.12",y2:"12"})]}),lN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),u.jsx("line",{x1:"3",x2:"21",y1:"9",y2:"9"}),u.jsx("line",{x1:"9",x2:"9",y1:"21",y2:"9"})]}),uN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),u.jsx("path",{d:"M3 3v5h5"})]}),cN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("polyline",{points:"16 3 21 3 21 8"}),u.jsx("line",{x1:"4",x2:"21",y1:"20",y2:"3"}),u.jsx("polyline",{points:"21 16 21 21 16 21"}),u.jsx("line",{x1:"15",x2:"21",y1:"15",y2:"21"}),u.jsx("line",{x1:"4",x2:"9",y1:"4",y2:"9"})]}),dN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"13",height:"13",x:"9",y:"9",rx:"2",ry:"2"}),u.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),hN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("circle",{cx:"12",cy:"12",r:"10"})}),fN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),pN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"})}),mN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m12 2 3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),gN=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),yN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M12 2a10 10 0 0 1 0 20z",fill:"currentColor",fillOpacity:"0.3"})]}),vN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M6 2v14a2 2 0 0 0 2 2h14"}),u.jsx("path",{d:"M18 22V8a2 2 0 0 0-2-2H2"})]}),xN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M3 7v6h6"}),u.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]}),wN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5"}),u.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),u.jsx("line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5"})]}),_N=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),u.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]}),_T=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M8 14.5c2.5-1 5.5-1 8 0"}),u.jsx("path",{d:"M6.5 11.5c3.5-1.5 7.5-1.5 11 0"}),u.jsx("path",{d:"M5 8.5c4.5-2 9.5-2 14 0"})]}),bN=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),u.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]});var Rv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},EN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ET={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(g=64)),r.push(n[d],n[m],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||m==null)throw new TN;const g=i<<2|a>>4;if(r.push(g),c!==64){const y=a<<4&240|c>>2;if(r.push(y),m!==64){const w=c<<6&192|m;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IN=function(t){const e=bT(t);return ET.encodeByteArray(e,!0)},dd=function(t){return IN(t).replace(/\./g,"")},TT=function(t){try{return ET.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=()=>SN().__FIREBASE_DEFAULTS__,CN=()=>{if(typeof process>"u"||typeof Rv>"u")return;const t=Rv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&TT(t[1]);return e&&JSON.parse(e)},eh=()=>{try{return kN()||CN()||AN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IT=t=>{var e,n;return(n=(e=eh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},NN=t=>{const e=IT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ST=()=>{var t;return(t=eh())===null||t===void 0?void 0:t.config},kT=t=>{var e;return(e=eh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[dd(JSON.stringify(n)),dd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function DN(){var t;const e=(t=eh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FN(){const t=gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function VN(){return!DN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AT(){try{return typeof indexedDB=="object"}catch{return!1}}function NT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function UN(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="FirebaseError";class br extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ON,Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zi.prototype.create)}}class zi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?BN(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new br(s,a,r)}}function BN(t,e){return t.replace(zN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const zN=/\{\$([^}]+)}/g;function GN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Pv(i)&&Pv(o)){if(!Pl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Pv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function HN(t,e){const n=new $N(t,e);return n.subscribe.bind(n)}class $N{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=xf),s.error===void 0&&(s.error=xf),s.complete===void 0&&(s.complete=xf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=1e3,KN=2,JN=4*60*60*1e3,YN=.5;function Mv(t,e=WN,n=KN){const r=e*Math.pow(n,t),s=Math.round(YN*r*(Math.random()-.5)*2);return Math.min(JN,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}class vr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new RN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZN(e))try{this.getOrInitializeService({instanceIdentifier:pi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pi){return this.instances.has(e)}getOptions(e=pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pi){return this.component?this.component.multipleInstances?e:pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XN(t){return t===pi?void 0:t}function ZN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qe||(qe={}));const tR={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},nR=qe.INFO,rR={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},sR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=rR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class th{constructor(e){this.name=e,this._logLevel=nR,this._logHandler=sR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const iR=(t,e)=>e.some(n=>t instanceof n);let Dv,Lv;function oR(){return Dv||(Dv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aR(){return Lv||(Lv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RT=new WeakMap,Fp=new WeakMap,PT=new WeakMap,wf=new WeakMap,bg=new WeakMap;function lR(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(qs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&RT.set(n,t)}).catch(()=>{}),bg.set(e,t),e}function uR(t){if(Fp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Fp.set(t,e)}let Vp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cR(t){Vp=t(Vp)}function dR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_f(this),e,...n);return PT.set(r,e.sort?e.sort():[e]),qs(r)}:aR().includes(t)?function(...e){return t.apply(_f(this),e),qs(RT.get(this))}:function(...e){return qs(t.apply(_f(this),e))}}function hR(t){return typeof t=="function"?dR(t):(t instanceof IDBTransaction&&uR(t),iR(t,oR())?new Proxy(t,Vp):t)}function qs(t){if(t instanceof IDBRequest)return lR(t);if(wf.has(t))return wf.get(t);const e=hR(t);return e!==t&&(wf.set(t,e),bg.set(e,t)),e}const _f=t=>bg.get(t);function MT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=qs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(qs(o.result),l.oldVersion,l.newVersion,qs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const fR=["get","getKey","getAll","getAllKeys","count"],pR=["put","add","delete","clear"],bf=new Map;function jv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bf.get(e))return bf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=pR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||fR.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return bf.set(e,i),i}cR(t=>({...t,get:(e,n,r)=>jv(e,n)||t.get(e,n,r),has:(e,n)=>!!jv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Up="@firebase/app",Fv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new th("@firebase/app"),yR="@firebase/app-compat",vR="@firebase/analytics-compat",xR="@firebase/analytics",wR="@firebase/app-check-compat",_R="@firebase/app-check",bR="@firebase/auth",ER="@firebase/auth-compat",TR="@firebase/database",IR="@firebase/data-connect",SR="@firebase/database-compat",kR="@firebase/functions",CR="@firebase/functions-compat",AR="@firebase/installations",NR="@firebase/installations-compat",RR="@firebase/messaging",PR="@firebase/messaging-compat",MR="@firebase/performance",DR="@firebase/performance-compat",LR="@firebase/remote-config",jR="@firebase/remote-config-compat",FR="@firebase/storage",VR="@firebase/storage-compat",UR="@firebase/firestore",OR="@firebase/vertexai-preview",BR="@firebase/firestore-compat",zR="firebase",GR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="[DEFAULT]",HR={[Up]:"fire-core",[yR]:"fire-core-compat",[xR]:"fire-analytics",[vR]:"fire-analytics-compat",[_R]:"fire-app-check",[wR]:"fire-app-check-compat",[bR]:"fire-auth",[ER]:"fire-auth-compat",[TR]:"fire-rtdb",[IR]:"fire-data-connect",[SR]:"fire-rtdb-compat",[kR]:"fire-fn",[CR]:"fire-fn-compat",[AR]:"fire-iid",[NR]:"fire-iid-compat",[RR]:"fire-fcm",[PR]:"fire-fcm-compat",[MR]:"fire-perf",[DR]:"fire-perf-compat",[LR]:"fire-rc",[jR]:"fire-rc-compat",[FR]:"fire-gcs",[VR]:"fire-gcs-compat",[UR]:"fire-fst",[BR]:"fire-fst-compat",[OR]:"fire-vertex","fire-js":"fire-js",[zR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=new Map,$R=new Map,Bp=new Map;function Vv(t,e){try{t.container.addComponent(e)}catch(n){os.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fr(t){const e=t.name;if(Bp.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;Bp.set(e,t);for(const n of hd.values())Vv(n,t);for(const n of $R.values())Vv(n,t);return!0}function Gi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Jr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ws=new zi("app","Firebase",qR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=GR;function DT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Op,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ws.create("bad-app-name",{appName:String(s)});if(n||(n=ST()),!n)throw Ws.create("no-options");const i=hd.get(s);if(i){if(Pl(n,i.options)&&Pl(r,i.config))return i;throw Ws.create("duplicate-app",{appName:s})}const o=new eR(s);for(const l of Bp.values())o.addComponent(l);const a=new WR(n,r,o);return hd.set(s,a),a}function Eg(t=Op){const e=hd.get(t);if(!e&&t===Op&&ST())return DT();if(!e)throw Ws.create("no-app",{appName:t});return e}function Zn(t,e,n){var r;let s=(r=HR[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(a.join(" "));return}Fr(new vr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="firebase-heartbeat-database",JR=1,Ml="firebase-heartbeat-store";let Ef=null;function LT(){return Ef||(Ef=MT(KR,JR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ml)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ws.create("idb-open",{originalErrorMessage:t.message})})),Ef}async function YR(t){try{const n=(await LT()).transaction(Ml),r=await n.objectStore(Ml).get(jT(t));return await n.done,r}catch(e){if(e instanceof br)os.warn(e.message);else{const n=Ws.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});os.warn(n.message)}}}async function Uv(t,e){try{const r=(await LT()).transaction(Ml,"readwrite");await r.objectStore(Ml).put(e,jT(t)),await r.done}catch(n){if(n instanceof br)os.warn(n.message);else{const r=Ws.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});os.warn(r.message)}}}function jT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=1024,XR=30*24*60*60*1e3;class ZR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ov();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=XR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){os.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ov(),{heartbeatsToSend:r,unsentEntries:s}=eP(this._heartbeatsCache.heartbeats),i=dd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return os.warn(n),""}}}function Ov(){return new Date().toISOString().substring(0,10)}function eP(t,e=QR){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Bv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Bv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AT()?NT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Uv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Uv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Bv(t){return dd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t){Fr(new vr("platform-logger",e=>new mR(e),"PRIVATE")),Fr(new vr("heartbeat",e=>new ZR(e),"PRIVATE")),Zn(Up,Fv,t),Zn(Up,Fv,"esm2017"),Zn("fire-js","")}nP("");var rP="firebase",sP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(rP,sP,"app");const FT="@firebase/installations",Tg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=1e4,UT=`w:${Tg}`,OT="FIS_v2",iP="https://firebaseinstallations.googleapis.com/v1",oP=60*60*1e3,aP="installations",lP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ri=new zi(aP,lP,uP);function BT(t){return t instanceof br&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT({projectId:t}){return`${iP}/projects/${t}/installations`}function GT(t){return{token:t.token,requestStatus:2,expiresIn:dP(t.expiresIn),creationTime:Date.now()}}async function HT(t,e){const r=(await e.json()).error;return Ri.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function $T({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function cP(t,{refreshToken:e}){const n=$T(t);return n.append("Authorization",hP(e)),n}async function qT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function dP(t){return Number(t.replace("s","000"))}function hP(t){return`${OT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=zT(t),s=$T(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:OT,appId:t.appId,sdkVersion:UT},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await qT(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:GT(c.authToken)}}else throw await HT("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=/^[cdef][\w-]{21}$/,zp="";function gP(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=yP(t);return mP.test(n)?n:zp}catch{return zp}}function yP(t){return pP(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=new Map;function JT(t,e){const n=nh(t);YT(n,e),vP(n,e)}function YT(t,e){const n=KT.get(t);if(n)for(const r of n)r(e)}function vP(t,e){const n=xP();n&&n.postMessage({key:t,fid:e}),wP()}let xi=null;function xP(){return!xi&&"BroadcastChannel"in self&&(xi=new BroadcastChannel("[Firebase] FID Change"),xi.onmessage=t=>{YT(t.data.key,t.data.fid)}),xi}function wP(){KT.size===0&&xi&&(xi.close(),xi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="firebase-installations-database",bP=1,Pi="firebase-installations-store";let Tf=null;function Ig(){return Tf||(Tf=MT(_P,bP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Pi)}}})),Tf}async function fd(t,e){const n=nh(t),s=(await Ig()).transaction(Pi,"readwrite"),i=s.objectStore(Pi),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&JT(t,e.fid),e}async function QT(t){const e=nh(t),r=(await Ig()).transaction(Pi,"readwrite");await r.objectStore(Pi).delete(e),await r.done}async function rh(t,e){const n=nh(t),s=(await Ig()).transaction(Pi,"readwrite"),i=s.objectStore(Pi),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&JT(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sg(t){let e;const n=await rh(t.appConfig,r=>{const s=EP(r),i=TP(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===zp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function EP(t){const e=t||{fid:gP(),registrationStatus:0};return XT(e)}function TP(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ri.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=IP(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:SP(t)}:{installationEntry:e}}async function IP(t,e){try{const n=await fP(t,e);return fd(t.appConfig,n)}catch(n){throw BT(n)&&n.customData.serverCode===409?await QT(t.appConfig):await fd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function SP(t){let e=await zv(t.appConfig);for(;e.registrationStatus===1;)await WT(100),e=await zv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Sg(t);return r||n}return e}function zv(t){return rh(t,e=>{if(!e)throw Ri.create("installation-not-found");return XT(e)})}function XT(t){return kP(t)?{fid:t.fid,registrationStatus:0}:t}function kP(t){return t.registrationStatus===1&&t.registrationTime+VT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP({appConfig:t,heartbeatServiceProvider:e},n){const r=AP(t,n),s=cP(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:UT,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await qT(()=>fetch(r,a));if(l.ok){const c=await l.json();return GT(c)}else throw await HT("Generate Auth Token",l)}function AP(t,{fid:e}){return`${zT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kg(t,e=!1){let n;const r=await rh(t.appConfig,i=>{if(!ZT(i))throw Ri.create("not-registered");const o=i.authToken;if(!e&&PP(o))return i;if(o.requestStatus===1)return n=NP(t,e),i;{if(!navigator.onLine)throw Ri.create("app-offline");const a=DP(i);return n=RP(t,a),a}});return n?await n:r.authToken}async function NP(t,e){let n=await Gv(t.appConfig);for(;n.authToken.requestStatus===1;)await WT(100),n=await Gv(t.appConfig);const r=n.authToken;return r.requestStatus===0?kg(t,e):r}function Gv(t){return rh(t,e=>{if(!ZT(e))throw Ri.create("not-registered");const n=e.authToken;return LP(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function RP(t,e){try{const n=await CP(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await fd(t.appConfig,r),n}catch(n){if(BT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await QT(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await fd(t.appConfig,r)}throw n}}function ZT(t){return t!==void 0&&t.registrationStatus===2}function PP(t){return t.requestStatus===2&&!MP(t)}function MP(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+oP}function DP(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function LP(t){return t.requestStatus===1&&t.requestTime+VT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(t){const e=t,{installationEntry:n,registrationPromise:r}=await Sg(e);return r?r.catch(console.error):kg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP(t,e=!1){const n=t;return await VP(n),(await kg(n,e)).token}async function VP(t){const{registrationPromise:e}=await Sg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t){if(!t||!t.options)throw If("App Configuration");if(!t.name)throw If("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw If(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function If(t){return Ri.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="installations",OP="installations-internal",BP=t=>{const e=t.getProvider("app").getImmediate(),n=UP(e),r=Gi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},zP=t=>{const e=t.getProvider("app").getImmediate(),n=Gi(e,eI).getImmediate();return{getId:()=>jP(n),getToken:s=>FP(n,s)}};function GP(){Fr(new vr(eI,BP,"PUBLIC")),Fr(new vr(OP,zP,"PRIVATE"))}GP();Zn(FT,Tg);Zn(FT,Tg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="analytics",HP="firebase_id",$P="origin",qP=60*1e3,WP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new th("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Gn=new zi("analytics","Analytics",KP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(t){if(!t.startsWith(Cg)){const e=Gn.create("invalid-gtag-resource",{gtagURL:t});return Ln.warn(e.message),""}return t}function tI(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function YP(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function QP(t,e){const n=YP("firebase-js-sdk-policy",{createScriptURL:JP}),r=document.createElement("script"),s=`${Cg}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function XP(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function ZP(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await tI(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){Ln.error(a)}t("config",s,i)}async function eM(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await tI(n);for(const l of o){const c=a.find(m=>m.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Ln.error(i)}}function tM(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await eM(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await ZP(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Ln.error(a)}}return s}function nM(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=tM(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function rM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Cg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=30,iM=1e3;class oM{constructor(e={},n=iM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const nI=new oM;function aM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function lM(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:aM(r)},i=WP.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Gn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function uM(t,e=nI,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Gn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Gn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new hM;return setTimeout(async()=>{a.abort()},qP),rI({appId:r,apiKey:s,measurementId:i},o,a,e)}async function rI(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=nI){var i;const{appId:o,measurementId:a}=t;try{await cM(r,e)}catch(l){if(a)return Ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await lM(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!dM(c)){if(s.deleteThrottleMetadata(o),a)return Ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?Mv(n,s.intervalMillis,sM):Mv(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,m),Ln.debug(`Calling attemptFetch again in ${d} millis`),rI(t,m,r,s)}}function cM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Gn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function dM(t){if(!(t instanceof br)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class hM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function fM(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(){if(AT())try{await NT()}catch(t){return Ln.warn(Gn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ln.warn(Gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function mM(t,e,n,r,s,i,o){var a;const l=uM(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Ln.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Ln.error(y)),e.push(l);const c=pM().then(y=>{if(y)return r.getId()}),[d,m]=await Promise.all([l,c]);rM(i)||QP(i,d.measurementId),s("js",new Date);const g=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return g[$P]="firebase",g.update=!0,m!=null&&(g[HP]=m),s("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.app=e}_delete(){return delete sl[this.app.options.appId],Promise.resolve()}}let sl={},Hv=[];const $v={};let Sf="dataLayer",yM="gtag",qv,sI,Wv=!1;function vM(){const t=[];if(CT()&&t.push("This is a browser extension environment."),UN()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Gn.create("invalid-analytics-context",{errorInfo:e});Ln.warn(n.message)}}function xM(t,e,n){vM();const r=t.options.appId;if(!r)throw Gn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Gn.create("no-api-key");if(sl[r]!=null)throw Gn.create("already-exists",{id:r});if(!Wv){XP(Sf);const{wrappedGtag:i,gtagCore:o}=nM(sl,Hv,$v,Sf,yM);sI=i,qv=o,Wv=!0}return sl[r]=mM(t,Hv,$v,e,qv,Sf,n),new gM(t)}function wM(t=Eg()){t=Mt(t);const e=Gi(t,pd);return e.isInitialized()?e.getImmediate():_M(t)}function _M(t,e={}){const n=Gi(t,pd);if(n.isInitialized()){const s=n.getImmediate();if(Pl(e,n.getOptions()))return s;throw Gn.create("already-initialized")}return n.initialize({options:e})}function bM(t,e,n,r){t=Mt(t),fM(sI,sl[t.app.options.appId],e,n,r).catch(s=>Ln.error(s))}const Kv="@firebase/analytics",Jv="0.10.8";function EM(){Fr(new vr(pd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return xM(r,s,n)},"PUBLIC")),Fr(new vr("analytics-internal",t,"PRIVATE")),Zn(Kv,Jv),Zn(Kv,Jv,"esm2017");function t(e){try{const n=e.getProvider(pd).getImmediate();return{logEvent:(r,s,i)=>bM(n,r,s,i)}}catch(n){throw Gn.create("interop-component-reg-failed",{reason:n})}}}EM();var Yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ti,iI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,C){function N(){}N.prototype=C.prototype,S.D=C.prototype,S.prototype=new N,S.prototype.constructor=S,S.C=function(M,V,P){for(var D=Array(arguments.length-2),k=2;k<arguments.length;k++)D[k-2]=arguments[k];return C.prototype[V].apply(M,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,C,N){N||(N=0);var M=Array(16);if(typeof C=="string")for(var V=0;16>V;++V)M[V]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(V=0;16>V;++V)M[V]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=S.g[0],N=S.g[1],V=S.g[2];var P=S.g[3],D=C+(P^N&(V^P))+M[0]+3614090360&4294967295;C=N+(D<<7&4294967295|D>>>25),D=P+(V^C&(N^V))+M[1]+3905402710&4294967295,P=C+(D<<12&4294967295|D>>>20),D=V+(N^P&(C^N))+M[2]+606105819&4294967295,V=P+(D<<17&4294967295|D>>>15),D=N+(C^V&(P^C))+M[3]+3250441966&4294967295,N=V+(D<<22&4294967295|D>>>10),D=C+(P^N&(V^P))+M[4]+4118548399&4294967295,C=N+(D<<7&4294967295|D>>>25),D=P+(V^C&(N^V))+M[5]+1200080426&4294967295,P=C+(D<<12&4294967295|D>>>20),D=V+(N^P&(C^N))+M[6]+2821735955&4294967295,V=P+(D<<17&4294967295|D>>>15),D=N+(C^V&(P^C))+M[7]+4249261313&4294967295,N=V+(D<<22&4294967295|D>>>10),D=C+(P^N&(V^P))+M[8]+1770035416&4294967295,C=N+(D<<7&4294967295|D>>>25),D=P+(V^C&(N^V))+M[9]+2336552879&4294967295,P=C+(D<<12&4294967295|D>>>20),D=V+(N^P&(C^N))+M[10]+4294925233&4294967295,V=P+(D<<17&4294967295|D>>>15),D=N+(C^V&(P^C))+M[11]+2304563134&4294967295,N=V+(D<<22&4294967295|D>>>10),D=C+(P^N&(V^P))+M[12]+1804603682&4294967295,C=N+(D<<7&4294967295|D>>>25),D=P+(V^C&(N^V))+M[13]+4254626195&4294967295,P=C+(D<<12&4294967295|D>>>20),D=V+(N^P&(C^N))+M[14]+2792965006&4294967295,V=P+(D<<17&4294967295|D>>>15),D=N+(C^V&(P^C))+M[15]+1236535329&4294967295,N=V+(D<<22&4294967295|D>>>10),D=C+(V^P&(N^V))+M[1]+4129170786&4294967295,C=N+(D<<5&4294967295|D>>>27),D=P+(N^V&(C^N))+M[6]+3225465664&4294967295,P=C+(D<<9&4294967295|D>>>23),D=V+(C^N&(P^C))+M[11]+643717713&4294967295,V=P+(D<<14&4294967295|D>>>18),D=N+(P^C&(V^P))+M[0]+3921069994&4294967295,N=V+(D<<20&4294967295|D>>>12),D=C+(V^P&(N^V))+M[5]+3593408605&4294967295,C=N+(D<<5&4294967295|D>>>27),D=P+(N^V&(C^N))+M[10]+38016083&4294967295,P=C+(D<<9&4294967295|D>>>23),D=V+(C^N&(P^C))+M[15]+3634488961&4294967295,V=P+(D<<14&4294967295|D>>>18),D=N+(P^C&(V^P))+M[4]+3889429448&4294967295,N=V+(D<<20&4294967295|D>>>12),D=C+(V^P&(N^V))+M[9]+568446438&4294967295,C=N+(D<<5&4294967295|D>>>27),D=P+(N^V&(C^N))+M[14]+3275163606&4294967295,P=C+(D<<9&4294967295|D>>>23),D=V+(C^N&(P^C))+M[3]+4107603335&4294967295,V=P+(D<<14&4294967295|D>>>18),D=N+(P^C&(V^P))+M[8]+1163531501&4294967295,N=V+(D<<20&4294967295|D>>>12),D=C+(V^P&(N^V))+M[13]+2850285829&4294967295,C=N+(D<<5&4294967295|D>>>27),D=P+(N^V&(C^N))+M[2]+4243563512&4294967295,P=C+(D<<9&4294967295|D>>>23),D=V+(C^N&(P^C))+M[7]+1735328473&4294967295,V=P+(D<<14&4294967295|D>>>18),D=N+(P^C&(V^P))+M[12]+2368359562&4294967295,N=V+(D<<20&4294967295|D>>>12),D=C+(N^V^P)+M[5]+4294588738&4294967295,C=N+(D<<4&4294967295|D>>>28),D=P+(C^N^V)+M[8]+2272392833&4294967295,P=C+(D<<11&4294967295|D>>>21),D=V+(P^C^N)+M[11]+1839030562&4294967295,V=P+(D<<16&4294967295|D>>>16),D=N+(V^P^C)+M[14]+4259657740&4294967295,N=V+(D<<23&4294967295|D>>>9),D=C+(N^V^P)+M[1]+2763975236&4294967295,C=N+(D<<4&4294967295|D>>>28),D=P+(C^N^V)+M[4]+1272893353&4294967295,P=C+(D<<11&4294967295|D>>>21),D=V+(P^C^N)+M[7]+4139469664&4294967295,V=P+(D<<16&4294967295|D>>>16),D=N+(V^P^C)+M[10]+3200236656&4294967295,N=V+(D<<23&4294967295|D>>>9),D=C+(N^V^P)+M[13]+681279174&4294967295,C=N+(D<<4&4294967295|D>>>28),D=P+(C^N^V)+M[0]+3936430074&4294967295,P=C+(D<<11&4294967295|D>>>21),D=V+(P^C^N)+M[3]+3572445317&4294967295,V=P+(D<<16&4294967295|D>>>16),D=N+(V^P^C)+M[6]+76029189&4294967295,N=V+(D<<23&4294967295|D>>>9),D=C+(N^V^P)+M[9]+3654602809&4294967295,C=N+(D<<4&4294967295|D>>>28),D=P+(C^N^V)+M[12]+3873151461&4294967295,P=C+(D<<11&4294967295|D>>>21),D=V+(P^C^N)+M[15]+530742520&4294967295,V=P+(D<<16&4294967295|D>>>16),D=N+(V^P^C)+M[2]+3299628645&4294967295,N=V+(D<<23&4294967295|D>>>9),D=C+(V^(N|~P))+M[0]+4096336452&4294967295,C=N+(D<<6&4294967295|D>>>26),D=P+(N^(C|~V))+M[7]+1126891415&4294967295,P=C+(D<<10&4294967295|D>>>22),D=V+(C^(P|~N))+M[14]+2878612391&4294967295,V=P+(D<<15&4294967295|D>>>17),D=N+(P^(V|~C))+M[5]+4237533241&4294967295,N=V+(D<<21&4294967295|D>>>11),D=C+(V^(N|~P))+M[12]+1700485571&4294967295,C=N+(D<<6&4294967295|D>>>26),D=P+(N^(C|~V))+M[3]+2399980690&4294967295,P=C+(D<<10&4294967295|D>>>22),D=V+(C^(P|~N))+M[10]+4293915773&4294967295,V=P+(D<<15&4294967295|D>>>17),D=N+(P^(V|~C))+M[1]+2240044497&4294967295,N=V+(D<<21&4294967295|D>>>11),D=C+(V^(N|~P))+M[8]+1873313359&4294967295,C=N+(D<<6&4294967295|D>>>26),D=P+(N^(C|~V))+M[15]+4264355552&4294967295,P=C+(D<<10&4294967295|D>>>22),D=V+(C^(P|~N))+M[6]+2734768916&4294967295,V=P+(D<<15&4294967295|D>>>17),D=N+(P^(V|~C))+M[13]+1309151649&4294967295,N=V+(D<<21&4294967295|D>>>11),D=C+(V^(N|~P))+M[4]+4149444226&4294967295,C=N+(D<<6&4294967295|D>>>26),D=P+(N^(C|~V))+M[11]+3174756917&4294967295,P=C+(D<<10&4294967295|D>>>22),D=V+(C^(P|~N))+M[2]+718787259&4294967295,V=P+(D<<15&4294967295|D>>>17),D=N+(P^(V|~C))+M[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+V&4294967295,S.g[3]=S.g[3]+P&4294967295}r.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var N=C-this.blockSize,M=this.B,V=this.h,P=0;P<C;){if(V==0)for(;P<=N;)s(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<C;)if(M[V++]=S.charCodeAt(P++),V==this.blockSize){s(this,M),V=0;break}}else for(;P<C;)if(M[V++]=S[P++],V==this.blockSize){s(this,M),V=0;break}}this.h=V,this.o+=C},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var N=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=N&255,N/=256;for(this.u(S),S=Array(16),C=N=0;4>C;++C)for(var M=0;32>M;M+=8)S[N++]=this.g[C]>>>M&255;return S};function i(S,C){var N=a;return Object.prototype.hasOwnProperty.call(N,S)?N[S]:N[S]=C(S)}function o(S,C){this.h=C;for(var N=[],M=!0,V=S.length-1;0<=V;V--){var P=S[V]|0;M&&P==C||(N[V]=P,M=!1)}this.g=N}var a={};function l(S){return-128<=S&&128>S?i(S,function(C){return new o([C|0],0>C?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return m;if(0>S)return _(c(-S));for(var C=[],N=1,M=0;S>=N;M++)C[M]=S/N|0,N*=4294967296;return new o(C,0)}function d(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return _(d(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=c(Math.pow(C,8)),M=m,V=0;V<S.length;V+=8){var P=Math.min(8,S.length-V),D=parseInt(S.substring(V,V+P),C);8>P?(P=c(Math.pow(C,P)),M=M.j(P).add(c(D))):(M=M.j(N),M=M.add(c(D)))}return M}var m=l(0),g=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-_(this).m();for(var S=0,C=1,N=0;N<this.g.length;N++){var M=this.i(N);S+=(0<=M?M:4294967296+M)*C,C*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(x(this))return"-"+_(this).toString(S);for(var C=c(Math.pow(S,6)),N=this,M="";;){var V=R(N,C).g;N=v(N,V.j(C));var P=((0<N.g.length?N.g[0]:N.h)>>>0).toString(S);if(N=V,w(N))return P+M;for(;6>P.length;)P="0"+P;M=P+M}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function x(S){return S.h==-1}t.l=function(S){return S=v(this,S),x(S)?-1:w(S)?0:1};function _(S){for(var C=S.g.length,N=[],M=0;M<C;M++)N[M]=~S.g[M];return new o(N,~S.h).add(g)}t.abs=function(){return x(this)?_(this):this},t.add=function(S){for(var C=Math.max(this.g.length,S.g.length),N=[],M=0,V=0;V<=C;V++){var P=M+(this.i(V)&65535)+(S.i(V)&65535),D=(P>>>16)+(this.i(V)>>>16)+(S.i(V)>>>16);M=D>>>16,P&=65535,D&=65535,N[V]=D<<16|P}return new o(N,N[N.length-1]&-2147483648?-1:0)};function v(S,C){return S.add(_(C))}t.j=function(S){if(w(this)||w(S))return m;if(x(this))return x(S)?_(this).j(_(S)):_(_(this).j(S));if(x(S))return _(this.j(_(S)));if(0>this.l(y)&&0>S.l(y))return c(this.m()*S.m());for(var C=this.g.length+S.g.length,N=[],M=0;M<2*C;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(var V=0;V<S.g.length;V++){var P=this.i(M)>>>16,D=this.i(M)&65535,k=S.i(V)>>>16,H=S.i(V)&65535;N[2*M+2*V]+=D*H,E(N,2*M+2*V),N[2*M+2*V+1]+=P*H,E(N,2*M+2*V+1),N[2*M+2*V+1]+=D*k,E(N,2*M+2*V+1),N[2*M+2*V+2]+=P*k,E(N,2*M+2*V+2)}for(M=0;M<C;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=C;M<2*C;M++)N[M]=0;return new o(N,0)};function E(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function T(S,C){this.g=S,this.h=C}function R(S,C){if(w(C))throw Error("division by zero");if(w(S))return new T(m,m);if(x(S))return C=R(_(S),C),new T(_(C.g),_(C.h));if(x(C))return C=R(S,_(C)),new T(_(C.g),C.h);if(30<S.g.length){if(x(S)||x(C))throw Error("slowDivide_ only works with positive integers.");for(var N=g,M=C;0>=M.l(S);)N=L(N),M=L(M);var V=U(N,1),P=U(M,1);for(M=U(M,2),N=U(N,2);!w(M);){var D=P.add(M);0>=D.l(S)&&(V=V.add(N),P=D),M=U(M,1),N=U(N,1)}return C=v(S,V.j(C)),new T(V,C)}for(V=m;0<=S.l(C);){for(N=Math.max(1,Math.floor(S.m()/C.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),P=c(N),D=P.j(C);x(D)||0<D.l(S);)N-=M,P=c(N),D=P.j(C);w(P)&&(P=g),V=V.add(P),S=v(S,D)}return new T(V,S)}t.A=function(S){return R(this,S).h},t.and=function(S){for(var C=Math.max(this.g.length,S.g.length),N=[],M=0;M<C;M++)N[M]=this.i(M)&S.i(M);return new o(N,this.h&S.h)},t.or=function(S){for(var C=Math.max(this.g.length,S.g.length),N=[],M=0;M<C;M++)N[M]=this.i(M)|S.i(M);return new o(N,this.h|S.h)},t.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),N=[],M=0;M<C;M++)N[M]=this.i(M)^S.i(M);return new o(N,this.h^S.h)};function L(S){for(var C=S.g.length+1,N=[],M=0;M<C;M++)N[M]=S.i(M)<<1|S.i(M-1)>>>31;return new o(N,S.h)}function U(S,C){var N=C>>5;C%=32;for(var M=S.g.length-N,V=[],P=0;P<M;P++)V[P]=0<C?S.i(P+N)>>>C|S.i(P+N+1)<<32-C:S.i(P+N);return new o(V,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Ti=o}).apply(typeof Yv<"u"?Yv:typeof self<"u"?self:typeof window<"u"?window:{});var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oI,Ga,aI,kc,Gp,lI,uI,cI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,b,I){return f==Array.prototype||f==Object.prototype||(f[b]=I.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof rc=="object"&&rc];for(var b=0;b<f.length;++b){var I=f[b];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(f,b){if(b)e:{var I=r;f=f.split(".");for(var j=0;j<f.length-1;j++){var J=f[j];if(!(J in I))break e;I=I[J]}f=f[f.length-1],j=I[f],b=b(j),b!=j&&b!=null&&e(I,f,{configurable:!0,writable:!0,value:b})}}function i(f,b){f instanceof String&&(f+="");var I=0,j=!1,J={next:function(){if(!j&&I<f.length){var ne=I++;return{value:b(ne,f[ne]),done:!1}}return j=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}s("Array.prototype.values",function(f){return f||function(){return i(this,function(b,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var b=typeof f;return b=b!="object"?b:f?Array.isArray(f)?"array":b:"null",b=="array"||b=="object"&&typeof f.length=="number"}function c(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function d(f,b,I){return f.call.apply(f.bind,arguments)}function m(f,b,I){if(!f)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,j),f.apply(b,J)}}return function(){return f.apply(b,arguments)}}function g(f,b,I){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,g.apply(null,arguments)}function y(f,b){var I=Array.prototype.slice.call(arguments,1);return function(){var j=I.slice();return j.push.apply(j,arguments),f.apply(this,j)}}function w(f,b){function I(){}I.prototype=b.prototype,f.aa=b.prototype,f.prototype=new I,f.prototype.constructor=f,f.Qb=function(j,J,ne){for(var ge=Array(arguments.length-2),it=2;it<arguments.length;it++)ge[it-2]=arguments[it];return b.prototype[J].apply(j,ge)}}function x(f){const b=f.length;if(0<b){const I=Array(b);for(let j=0;j<b;j++)I[j]=f[j];return I}return[]}function _(f,b){for(let I=1;I<arguments.length;I++){const j=arguments[I];if(l(j)){const J=f.length||0,ne=j.length||0;f.length=J+ne;for(let ge=0;ge<ne;ge++)f[J+ge]=j[ge]}else f.push(j)}}class v{constructor(b,I){this.i=b,this.j=I,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function E(f){return/^[\s\xa0]*$/.test(f)}function T(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function R(f){return R[" "](f),f}R[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function U(f,b,I){for(const j in f)b.call(I,f[j],j,f)}function S(f,b){for(const I in f)b.call(void 0,f[I],I,f)}function C(f){const b={};for(const I in f)b[I]=f[I];return b}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,b){let I,j;for(let J=1;J<arguments.length;J++){j=arguments[J];for(I in j)f[I]=j[I];for(let ne=0;ne<N.length;ne++)I=N[ne],Object.prototype.hasOwnProperty.call(j,I)&&(f[I]=j[I])}}function V(f){var b=1;f=f.split(":");const I=[];for(;0<b&&f.length;)I.push(f.shift()),b--;return f.length&&I.push(f.join(":")),I}function P(f){a.setTimeout(()=>{throw f},0)}function D(){var f=Q;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class k{constructor(){this.h=this.g=null}add(b,I){const j=H.get();j.set(b,I),this.h?this.h.next=j:this.g=j,this.h=j}}var H=new v(()=>new me,f=>f.reset());class me{constructor(){this.next=this.g=this.h=null}set(b,I){this.h=b,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let re,te=!1,Q=new k,ue=()=>{const f=a.Promise.resolve(void 0);re=()=>{f.then(K)}};var K=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(I){P(I)}var b=H;b.j(f),100>b.h&&(b.h++,f.next=b.g,b.g=f)}te=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const I=()=>{};a.addEventListener("test",I,b),a.removeEventListener("test",I,b)}catch{}return f}();function ee(f,b){if(ce.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var I=this.type=f.type,j=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget){if(L){e:{try{R(b.nodeName);var J=!0;break e}catch{}J=!1}J||(b=null)}}else I=="mouseover"?b=f.fromElement:I=="mouseout"&&(b=f.toElement);this.relatedTarget=b,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Se[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ee.aa.h.call(this)}}w(ee,ce);var Se={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),ke=0;function Ce(f,b,I,j,J){this.listener=f,this.proxy=null,this.src=b,this.type=I,this.capture=!!j,this.ha=J,this.key=++ke,this.da=this.fa=!1}function Be(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ke(f){this.src=f,this.g={},this.h=0}Ke.prototype.add=function(f,b,I,j,J){var ne=f.toString();f=this.g[ne],f||(f=this.g[ne]=[],this.h++);var ge=ot(f,b,j,J);return-1<ge?(b=f[ge],I||(b.fa=!1)):(b=new Ce(b,this.src,ne,!!j,J),b.fa=I,f.push(b)),b};function kt(f,b){var I=b.type;if(I in f.g){var j=f.g[I],J=Array.prototype.indexOf.call(j,b,void 0),ne;(ne=0<=J)&&Array.prototype.splice.call(j,J,1),ne&&(Be(b),f.g[I].length==0&&(delete f.g[I],f.h--))}}function ot(f,b,I,j){for(var J=0;J<f.length;++J){var ne=f[J];if(!ne.da&&ne.listener==b&&ne.capture==!!I&&ne.ha==j)return J}return-1}var A="closure_lm_"+(1e6*Math.random()|0),se={};function X(f,b,I,j,J){if(Array.isArray(b)){for(var ne=0;ne<b.length;ne++)X(f,b[ne],I,j,J);return null}return I=he(I),f&&f[xe]?f.K(b,I,c(j)?!!j.capture:!1,J):z(f,b,I,!1,j,J)}function z(f,b,I,j,J,ne){if(!b)throw Error("Invalid event type");var ge=c(J)?!!J.capture:!!J,it=le(f);if(it||(f[A]=it=new Ke(f)),I=it.add(b,I,j,ge,ne),I.proxy)return I;if(j=B(),I.proxy=j,j.src=f,j.listener=I,f.addEventListener)Z||(J=ge),J===void 0&&(J=!1),f.addEventListener(b.toString(),j,J);else if(f.attachEvent)f.attachEvent(oe(b.toString()),j);else if(f.addListener&&f.removeListener)f.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return I}function B(){function f(I){return b.call(f.src,f.listener,I)}const b=Y;return f}function W(f,b,I,j,J){if(Array.isArray(b))for(var ne=0;ne<b.length;ne++)W(f,b[ne],I,j,J);else j=c(j)?!!j.capture:!!j,I=he(I),f&&f[xe]?(f=f.i,b=String(b).toString(),b in f.g&&(ne=f.g[b],I=ot(ne,I,j,J),-1<I&&(Be(ne[I]),Array.prototype.splice.call(ne,I,1),ne.length==0&&(delete f.g[b],f.h--)))):f&&(f=le(f))&&(b=f.g[b.toString()],f=-1,b&&(f=ot(b,I,j,J)),(I=-1<f?b[f]:null)&&ie(I))}function ie(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[xe])kt(b.i,f);else{var I=f.type,j=f.proxy;b.removeEventListener?b.removeEventListener(I,j,f.capture):b.detachEvent?b.detachEvent(oe(I),j):b.addListener&&b.removeListener&&b.removeListener(j),(I=le(b))?(kt(I,f),I.h==0&&(I.src=null,b[A]=null)):Be(f)}}}function oe(f){return f in se?se[f]:se[f]="on"+f}function Y(f,b){if(f.da)f=!0;else{b=new ee(b,this);var I=f.listener,j=f.ha||f.src;f.fa&&ie(f),f=I.call(j,b)}return f}function le(f){return f=f[A],f instanceof Ke?f:null}var ye="__closure_events_fn_"+(1e9*Math.random()>>>0);function he(f){return typeof f=="function"?f:(f[ye]||(f[ye]=function(b){return f.handleEvent(b)}),f[ye])}function ve(){$.call(this),this.i=new Ke(this),this.M=this,this.F=null}w(ve,$),ve.prototype[xe]=!0,ve.prototype.removeEventListener=function(f,b,I,j){W(this,f,b,I,j)};function Pe(f,b){var I,j=f.F;if(j)for(I=[];j;j=j.F)I.push(j);if(f=f.M,j=b.type||b,typeof b=="string")b=new ce(b,f);else if(b instanceof ce)b.target=b.target||f;else{var J=b;b=new ce(j,f),M(b,J)}if(J=!0,I)for(var ne=I.length-1;0<=ne;ne--){var ge=b.g=I[ne];J=De(ge,j,!0,b)&&J}if(ge=b.g=f,J=De(ge,j,!0,b)&&J,J=De(ge,j,!1,b)&&J,I)for(ne=0;ne<I.length;ne++)ge=b.g=I[ne],J=De(ge,j,!1,b)&&J}ve.prototype.N=function(){if(ve.aa.N.call(this),this.i){var f=this.i,b;for(b in f.g){for(var I=f.g[b],j=0;j<I.length;j++)Be(I[j]);delete f.g[b],f.h--}}this.F=null},ve.prototype.K=function(f,b,I,j){return this.i.add(String(f),b,!1,I,j)},ve.prototype.L=function(f,b,I,j){return this.i.add(String(f),b,!0,I,j)};function De(f,b,I,j){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();for(var J=!0,ne=0;ne<b.length;++ne){var ge=b[ne];if(ge&&!ge.da&&ge.capture==I){var it=ge.listener,Jt=ge.ha||ge.src;ge.fa&&kt(f.i,ge),J=it.call(Jt,j)!==!1&&J}}return J&&!j.defaultPrevented}function pt(f,b,I){if(typeof f=="function")I&&(f=g(f,I));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:a.setTimeout(f,b||0)}function rn(f){f.g=pt(()=>{f.g=null,f.i&&(f.i=!1,rn(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class Ct extends ${constructor(b,I){super(),this.m=b,this.l=I,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:rn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function O(f){$.call(this),this.h=f,this.g={}}w(O,$);var G=[];function pe(f){U(f.g,function(b,I){this.g.hasOwnProperty(I)&&ie(b)},f),f.g={}}O.prototype.N=function(){O.aa.N.call(this),pe(this)},O.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var we=a.JSON.stringify,Re=a.JSON.parse,tt=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Me(){}Me.prototype.h=null;function xt(f){return f.h||(f.h=f.i())}function Et(){}var wt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sn(){ce.call(this,"d")}w(sn,ce);function Lt(){ce.call(this,"c")}w(Lt,ce);var Kt={},zt=null;function jn(){return zt=zt||new ve}Kt.La="serverreachability";function Wi(f){ce.call(this,Kt.La,f)}w(Wi,ce);function ys(f){const b=jn();Pe(b,new Wi(b))}Kt.STAT_EVENT="statevent";function yu(f,b){ce.call(this,Kt.STAT_EVENT,f),this.stat=b}w(yu,ce);function jt(f){const b=jn();Pe(b,new yu(b,f))}Kt.Ma="timingevent";function vu(f,b){ce.call(this,Kt.Ma,f),this.size=b}w(vu,ce);function Or(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},b)}function Ze(){this.g=!0}Ze.prototype.xa=function(){this.g=!1};function Dh(f,b,I,j,J,ne){f.info(function(){if(f.g)if(ne)for(var ge="",it=ne.split("&"),Jt=0;Jt<it.length;Jt++){var Ye=it[Jt].split("=");if(1<Ye.length){var on=Ye[0];Ye=Ye[1];var an=on.split("_");ge=2<=an.length&&an[1]=="type"?ge+(on+"="+Ye+"&"):ge+(on+"=redacted&")}}else ge=null;else ge=ne;return"XMLHTTP REQ ("+j+") [attempt "+J+"]: "+b+`
`+I+`
`+ge})}function xu(f,b,I,j,J,ne,ge){f.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+J+"]: "+b+`
`+I+`
`+ne+" "+ge})}function vs(f,b,I,j){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+jh(f,I)+(j?" "+j:"")})}function Lh(f,b){f.info(function(){return"TIMEOUT: "+b})}Ze.prototype.info=function(){};function jh(f,b){if(!f.g)return b;if(!b)return null;try{var I=JSON.parse(b);if(I){for(f=0;f<I.length;f++)if(Array.isArray(I[f])){var j=I[f];if(!(2>j.length)){var J=j[1];if(Array.isArray(J)&&!(1>J.length)){var ne=J[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var ge=1;ge<J.length;ge++)J[ge]=""}}}}return we(I)}catch{return b}}var Ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pa;function Ji(){}w(Ji,Me),Ji.prototype.g=function(){return new XMLHttpRequest},Ji.prototype.i=function(){return{}},pa=new Ji;function Tr(f,b,I,j){this.j=f,this.i=b,this.l=I,this.R=j||1,this.U=new O(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _u}function _u(){this.i=null,this.g="",this.h=!1}var bu={},ma={};function ga(f,b,I){f.L=1,f.v=Qi(sr(b)),f.m=I,f.P=!0,Eu(f,null)}function Eu(f,b){f.F=Date.now(),ai(f),f.A=sr(f.v);var I=f.A,j=f.R;Array.isArray(j)||(j=[String(j)]),_s(I.i,"t",j),f.C=0,I=f.j.J,f.h=new _u,f.g=iy(f.j,I?b:null,!f.m),0<f.O&&(f.M=new Ct(g(f.Y,f,f.g),f.O)),b=f.U,I=f.g,j=f.ca;var J="readystatechange";Array.isArray(J)||(J&&(G[0]=J.toString()),J=G);for(var ne=0;ne<J.length;ne++){var ge=X(I,J[ne],j||b.handleEvent,!1,b.h||b);if(!ge)break;b.g[ge.key]=ge}b=f.H?C(f.H):{},f.m?(f.u||(f.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,b)):(f.u="GET",f.g.ea(f.A,f.u,null,b)),ys(),Dh(f.i,f.u,f.A,f.l,f.R,f.m)}Tr.prototype.ca=function(f){f=f.target;const b=this.M;b&&zr(f)==3?b.j():this.Y(f)},Tr.prototype.Y=function(f){try{if(f==this.g)e:{const an=zr(this.g);var b=this.g.Ba();const Zi=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||K0(this.g)))){this.J||an!=4||b==7||(b==8||0>=Zi?ys(3):ys(2)),Br(this);var I=this.g.Z();this.X=I;t:if(xs(this)){var j=K0(this.g);f="";var J=j.length,ne=zr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ir(this),li(this);var ge="";break t}this.h.i=new a.TextDecoder}for(b=0;b<J;b++)this.h.h=!0,f+=this.h.i.decode(j[b],{stream:!(ne&&b==J-1)});j.length=0,this.h.g+=f,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=I==200,xu(this.i,this.u,this.A,this.l,this.R,an,I),this.o){if(this.T&&!this.K){t:{if(this.g){var it,Jt=this.g;if((it=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(it)){var Ye=it;break t}}Ye=null}if(I=Ye)vs(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,va(this,I);else{this.o=!1,this.s=3,jt(12),Ir(this),li(this);break e}}if(this.P){I=!0;let ir;for(;!this.J&&this.C<ge.length;)if(ir=ya(this,ge),ir==ma){an==4&&(this.s=4,jt(14),I=!1),vs(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==bu){this.s=4,jt(15),vs(this.i,this.l,ge,"[Invalid Chunk]"),I=!1;break}else vs(this.i,this.l,ir,null),va(this,ir);if(xs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||ge.length!=0||this.h.h||(this.s=1,jt(16),I=!1),this.o=this.o&&I,!I)vs(this.i,this.l,ge,"[Invalid Chunked Response]"),Ir(this),li(this);else if(0<ge.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),Gh(on),on.M=!0,jt(11))}}else vs(this.i,this.l,ge,null),va(this,ge);an==4&&Ir(this),this.o&&!this.J&&(an==4?ty(this.j,this):(this.o=!1,ai(this)))}else yk(this.g),I==400&&0<ge.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),Ir(this),li(this)}}}catch{}finally{}};function xs(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ya(f,b){var I=f.C,j=b.indexOf(`
`,I);return j==-1?ma:(I=Number(b.substring(I,j)),isNaN(I)?bu:(j+=1,j+I>b.length?ma:(b=b.slice(j,j+I),f.C=j+I,b)))}Tr.prototype.cancel=function(){this.J=!0,Ir(this)};function ai(f){f.S=Date.now()+f.I,Tu(f,f.I)}function Tu(f,b){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Or(g(f.ba,f),b)}function Br(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Tr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Lh(this.i,this.A),this.L!=2&&(ys(),jt(17)),Ir(this),this.s=2,li(this)):Tu(this,this.S-f)};function li(f){f.j.G==0||f.J||ty(f.j,f)}function Ir(f){Br(f);var b=f.M;b&&typeof b.ma=="function"&&b.ma(),f.M=null,pe(f.U),f.g&&(b=f.g,f.g=null,b.abort(),b.ma())}function va(f,b){try{var I=f.j;if(I.G!=0&&(I.g==f||xa(I.h,f))){if(!f.K&&xa(I.h,f)&&I.G==3){try{var j=I.Da.g.parse(b)}catch{j=null}if(Array.isArray(j)&&j.length==3){var J=j;if(J[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<f.F)Fu(I),Lu(I);else break e;zh(I),jt(18)}}else I.za=J[1],0<I.za-I.T&&37500>J[2]&&I.F&&I.v==0&&!I.C&&(I.C=Or(g(I.Za,I),6e3));if(1>=ku(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else di(I,11)}else if((f.K||I.g==f)&&Fu(I),!E(b))for(J=I.Da.g.parse(b),b=0;b<J.length;b++){let Ye=J[b];if(I.T=Ye[0],Ye=Ye[1],I.G==2)if(Ye[0]=="c"){I.K=Ye[1],I.ia=Ye[2];const on=Ye[3];on!=null&&(I.la=on,I.j.info("VER="+I.la));const an=Ye[4];an!=null&&(I.Aa=an,I.j.info("SVER="+I.Aa));const Zi=Ye[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(j=1.5*Zi,I.L=j,I.j.info("backChannelRequestTimeoutMs_="+j)),j=I;const ir=f.g;if(ir){const Uu=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uu){var ne=j.h;ne.g||Uu.indexOf("spdy")==-1&&Uu.indexOf("quic")==-1&&Uu.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(wa(ne,ne.h),ne.h=null))}if(j.D){const Hh=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;Hh&&(j.ya=Hh,st(j.I,j.D,Hh))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-f.F,I.j.info("Handshake RTT: "+I.R+"ms")),j=I;var ge=f;if(j.qa=sy(j,j.J?j.ia:null,j.W),ge.K){_a(j.h,ge);var it=ge,Jt=j.L;Jt&&(it.I=Jt),it.B&&(Br(it),ai(it)),j.g=ge}else Z0(j);0<I.i.length&&ju(I)}else Ye[0]!="stop"&&Ye[0]!="close"||di(I,7);else I.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?di(I,7):Bh(I):Ye[0]!="noop"&&I.l&&I.l.ta(Ye),I.v=0)}}ys(4)}catch{}}var Fh=class{constructor(f,b){this.g=f,this.map=b}};function Iu(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Su(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ku(f){return f.h?1:f.g?f.g.size:0}function xa(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function wa(f,b){f.g?f.g.add(b):f.h=b}function _a(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}Iu.prototype.cancel=function(){if(this.i=Cu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Cu(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const I of f.g.values())b=b.concat(I.D);return b}return x(f.i)}function Au(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var b=[],I=f.length,j=0;j<I;j++)b.push(f[j]);return b}b=[],I=0;for(j in f)b[I++]=f[j];return b}function Vh(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var b=[];f=f.length;for(var I=0;I<f;I++)b.push(I);return b}b=[],I=0;for(const j in f)b[I++]=j;return b}}}function ba(f,b){if(f.forEach&&typeof f.forEach=="function")f.forEach(b,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,b,void 0);else for(var I=Vh(f),j=Au(f),J=j.length,ne=0;ne<J;ne++)b.call(void 0,j[ne],I&&I[ne],f)}var Nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uh(f,b){if(f){f=f.split("&");for(var I=0;I<f.length;I++){var j=f[I].indexOf("="),J=null;if(0<=j){var ne=f[I].substring(0,j);J=f[I].substring(j+1)}else ne=f[I];b(ne,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Sr(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Sr){this.h=f.h,ui(this,f.j),this.o=f.o,this.g=f.g,Yi(this,f.s),this.l=f.l;var b=f.i,I=new at;I.i=b.i,b.g&&(I.g=new Map(b.g),I.h=b.h),Ru(this,I),this.m=f.m}else f&&(b=String(f).match(Nu))?(this.h=!1,ui(this,b[1]||"",!0),this.o=ws(b[2]||""),this.g=ws(b[3]||"",!0),Yi(this,b[4]),this.l=ws(b[5]||"",!0),Ru(this,b[6]||"",!0),this.m=ws(b[7]||"")):(this.h=!1,this.i=new at(null,this.h))}Sr.prototype.toString=function(){var f=[],b=this.j;b&&f.push(ci(b,_e,!0),":");var I=this.g;return(I||b=="file")&&(f.push("//"),(b=this.o)&&f.push(ci(b,_e,!0),"@"),f.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&f.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&f.push("/"),f.push(ci(I,I.charAt(0)=="/"?Le:Ne,!0))),(I=this.i.toString())&&f.push("?",I),(I=this.m)&&f.push("#",ci(I,At)),f.join("")};function sr(f){return new Sr(f)}function ui(f,b,I){f.j=I?ws(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function Yi(f,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);f.s=b}else f.s=null}function Ru(f,b,I){b instanceof at?(f.i=b,Ea(f.i,f.h)):(I||(b=ci(b,et)),f.i=new at(b,f.h))}function st(f,b,I){f.i.set(b,I)}function Qi(f){return st(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ws(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ci(f,b,I){return typeof f=="string"?(f=encodeURI(f).replace(b,q),I&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function q(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var _e=/[#\/\?@]/g,Ne=/[#\?:]/g,Le=/[#\?]/g,et=/[#\?@]/g,At=/#/g;function at(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function Ft(f){f.g||(f.g=new Map,f.h=0,f.i&&Uh(f.i,function(b,I){f.add(decodeURIComponent(b.replace(/\+/g," ")),I)}))}t=at.prototype,t.add=function(f,b){Ft(this),this.i=null,f=kn(this,f);var I=this.g.get(f);return I||this.g.set(f,I=[]),I.push(b),this.h+=1,this};function Fn(f,b){Ft(f),b=kn(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function Kn(f,b){return Ft(f),b=kn(f,b),f.g.has(b)}t.forEach=function(f,b){Ft(this),this.g.forEach(function(I,j){I.forEach(function(J){f.call(b,J,j,this)},this)},this)},t.na=function(){Ft(this);const f=Array.from(this.g.values()),b=Array.from(this.g.keys()),I=[];for(let j=0;j<b.length;j++){const J=f[j];for(let ne=0;ne<J.length;ne++)I.push(b[j])}return I},t.V=function(f){Ft(this);let b=[];if(typeof f=="string")Kn(this,f)&&(b=b.concat(this.g.get(kn(this,f))));else{f=Array.from(this.g.values());for(let I=0;I<f.length;I++)b=b.concat(f[I])}return b},t.set=function(f,b){return Ft(this),this.i=null,f=kn(this,f),Kn(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},t.get=function(f,b){return f?(f=this.V(f),0<f.length?String(f[0]):b):b};function _s(f,b,I){Fn(f,b),0<I.length&&(f.i=null,f.g.set(kn(f,b),x(I)),f.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(var I=0;I<b.length;I++){var j=b[I];const ne=encodeURIComponent(String(j)),ge=this.V(j);for(j=0;j<ge.length;j++){var J=ne;ge[j]!==""&&(J+="="+encodeURIComponent(String(ge[j]))),f.push(J)}}return this.i=f.join("&")};function kn(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function Ea(f,b){b&&!f.j&&(Ft(f),f.i=null,f.g.forEach(function(I,j){var J=j.toLowerCase();j!=J&&(Fn(this,j),_s(this,J,I))},f)),f.j=b}function dk(f,b){const I=new Ze;if(a.Image){const j=new Image;j.onload=y(bs,I,"TestLoadImage: loaded",!0,b,j),j.onerror=y(bs,I,"TestLoadImage: error",!1,b,j),j.onabort=y(bs,I,"TestLoadImage: abort",!1,b,j),j.ontimeout=y(bs,I,"TestLoadImage: timeout",!1,b,j),a.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=f}else b(!1)}function hk(f,b){const I=new Ze,j=new AbortController,J=setTimeout(()=>{j.abort(),bs(I,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:j.signal}).then(ne=>{clearTimeout(J),ne.ok?bs(I,"TestPingServer: ok",!0,b):bs(I,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(J),bs(I,"TestPingServer: error",!1,b)})}function bs(f,b,I,j,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),j(I)}catch{}}function fk(){this.g=new tt}function pk(f,b,I){const j=I||"";try{ba(f,function(J,ne){let ge=J;c(J)&&(ge=we(J)),b.push(j+ne+"="+encodeURIComponent(ge))})}catch(J){throw b.push(j+"type="+encodeURIComponent("_badmap")),J}}function Pu(f){this.l=f.Ub||null,this.j=f.eb||!1}w(Pu,Me),Pu.prototype.g=function(){return new Mu(this.l,this.j)},Pu.prototype.i=function(f){return function(){return f}}({});function Mu(f,b){ve.call(this),this.D=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Mu,ve),t=Mu.prototype,t.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=b,this.readyState=1,Ia(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(b.body=f),(this.D||a).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ta(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;z0(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function z0(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?Ta(this):Ia(this),this.readyState==3&&z0(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Ta(this))},t.Qa=function(f){this.g&&(this.response=f,Ta(this))},t.ga=function(){this.g&&Ta(this)};function Ta(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Ia(f)}t.setRequestHeader=function(f,b){this.u.append(f,b)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var I=b.next();!I.done;)I=I.value,f.push(I[0]+": "+I[1]),I=b.next();return f.join(`\r
`)};function Ia(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Mu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function G0(f){let b="";return U(f,function(I,j){b+=j,b+=":",b+=I,b+=`\r
`}),b}function Oh(f,b,I){e:{for(j in I){var j=!1;break e}j=!0}j||(I=G0(I),typeof f=="string"?I!=null&&encodeURIComponent(String(I)):st(f,b,I))}function _t(f){ve.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(_t,ve);var mk=/^https?$/i,gk=["POST","PUT"];t=_t.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,b,I,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pa.g(),this.v=this.o?xt(this.o):xt(pa),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(ne){H0(this,ne);return}if(f=I||"",I=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var J in j)I.set(J,j[J]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const ne of j.keys())I.set(ne,j.get(ne));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(I.keys()).find(ne=>ne.toLowerCase()=="content-type"),J=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(gk,b,void 0))||j||J||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ge]of I)this.g.setRequestHeader(ne,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{W0(this),this.u=!0,this.g.send(f),this.u=!1}catch(ne){H0(this,ne)}};function H0(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.m=5,$0(f),Du(f)}function $0(f){f.A||(f.A=!0,Pe(f,"complete"),Pe(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Pe(this,"complete"),Pe(this,"abort"),Du(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Du(this,!0)),_t.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?q0(this):this.bb())},t.bb=function(){q0(this)};function q0(f){if(f.h&&typeof o<"u"&&(!f.v[1]||zr(f)!=4||f.Z()!=2)){if(f.u&&zr(f)==4)pt(f.Ea,0,f);else if(Pe(f,"readystatechange"),zr(f)==4){f.h=!1;try{const ge=f.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var I;if(!(I=b)){var j;if(j=ge===0){var J=String(f.D).match(Nu)[1]||null;!J&&a.self&&a.self.location&&(J=a.self.location.protocol.slice(0,-1)),j=!mk.test(J?J.toLowerCase():"")}I=j}if(I)Pe(f,"complete"),Pe(f,"success");else{f.m=6;try{var ne=2<zr(f)?f.g.statusText:""}catch{ne=""}f.l=ne+" ["+f.Z()+"]",$0(f)}}finally{Du(f)}}}}function Du(f,b){if(f.g){W0(f);const I=f.g,j=f.v[0]?()=>{}:null;f.g=null,f.v=null,b||Pe(f,"ready");try{I.onreadystatechange=j}catch{}}}function W0(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function zr(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<zr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),Re(b)}};function K0(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function yk(f){const b={};f=(f.g&&2<=zr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<f.length;j++){if(E(f[j]))continue;var I=V(f[j]);const J=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const ne=b[J]||[];b[J]=ne,ne.push(I)}S(b,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(f,b,I){return I&&I.internalChannelParams&&I.internalChannelParams[f]||b}function J0(f){this.Aa=0,this.i=[],this.j=new Ze,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sa("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sa("baseRetryDelayMs",5e3,f),this.cb=Sa("retryDelaySeedMs",1e4,f),this.Wa=Sa("forwardChannelMaxRetries",2,f),this.wa=Sa("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Iu(f&&f.concurrentRequestLimit),this.Da=new fk,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=J0.prototype,t.la=8,t.G=1,t.connect=function(f,b,I,j){jt(0),this.W=f,this.H=b||{},I&&j!==void 0&&(this.H.OSID=I,this.H.OAID=j),this.F=this.X,this.I=sy(this,null,this.W),ju(this)};function Bh(f){if(Y0(f),f.G==3){var b=f.U++,I=sr(f.I);if(st(I,"SID",f.K),st(I,"RID",b),st(I,"TYPE","terminate"),ka(f,I),b=new Tr(f,f.j,b),b.L=2,b.v=Qi(sr(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(b.v.toString(),"")}catch{}!I&&a.Image&&(new Image().src=b.v,I=!0),I||(b.g=iy(b.j,null),b.g.ea(b.v)),b.F=Date.now(),ai(b)}ry(f)}function Lu(f){f.g&&(Gh(f),f.g.cancel(),f.g=null)}function Y0(f){Lu(f),f.u&&(a.clearTimeout(f.u),f.u=null),Fu(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function ju(f){if(!Su(f.h)&&!f.s){f.s=!0;var b=f.Ga;re||ue(),te||(re(),te=!0),Q.add(b,f),f.B=0}}function vk(f,b){return ku(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=b.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Or(g(f.Ga,f,b),ny(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const J=new Tr(this,this.j,f);let ne=this.o;if(this.S&&(ne?(ne=C(ne),M(ne,this.S)):ne=this.S),this.m!==null||this.O||(J.H=ne,ne=null),this.P)e:{for(var b=0,I=0;I<this.i.length;I++){t:{var j=this.i[I];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(b+=j,4096<b){b=I;break e}if(b===4096||I===this.i.length-1){b=I+1;break e}}b=1e3}else b=1e3;b=X0(this,J,b),I=sr(this.I),st(I,"RID",f),st(I,"CVER",22),this.D&&st(I,"X-HTTP-Session-Id",this.D),ka(this,I),ne&&(this.O?b="headers="+encodeURIComponent(String(G0(ne)))+"&"+b:this.m&&Oh(I,this.m,ne)),wa(this.h,J),this.Ua&&st(I,"TYPE","init"),this.P?(st(I,"$req",b),st(I,"SID","null"),J.T=!0,ga(J,I,null)):ga(J,I,b),this.G=2}}else this.G==3&&(f?Q0(this,f):this.i.length==0||Su(this.h)||Q0(this))};function Q0(f,b){var I;b?I=b.l:I=f.U++;const j=sr(f.I);st(j,"SID",f.K),st(j,"RID",I),st(j,"AID",f.T),ka(f,j),f.m&&f.o&&Oh(j,f.m,f.o),I=new Tr(f,f.j,I,f.B+1),f.m===null&&(I.H=f.o),b&&(f.i=b.D.concat(f.i)),b=X0(f,I,1e3),I.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),wa(f.h,I),ga(I,j,b)}function ka(f,b){f.H&&U(f.H,function(I,j){st(b,j,I)}),f.l&&ba({},function(I,j){st(b,j,I)})}function X0(f,b,I){I=Math.min(f.i.length,I);var j=f.l?g(f.l.Na,f.l,f):null;e:{var J=f.i;let ne=-1;for(;;){const ge=["count="+I];ne==-1?0<I?(ne=J[0].g,ge.push("ofs="+ne)):ne=0:ge.push("ofs="+ne);let it=!0;for(let Jt=0;Jt<I;Jt++){let Ye=J[Jt].g;const on=J[Jt].map;if(Ye-=ne,0>Ye)ne=Math.max(0,J[Jt].g-100),it=!1;else try{pk(on,ge,"req"+Ye+"_")}catch{j&&j(on)}}if(it){j=ge.join("&");break e}}}return f=f.i.splice(0,I),b.D=f,j}function Z0(f){if(!f.g&&!f.u){f.Y=1;var b=f.Fa;re||ue(),te||(re(),te=!0),Q.add(b,f),f.v=0}}function zh(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Or(g(f.Fa,f),ny(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,ey(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Or(g(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Lu(this),ey(this))};function Gh(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function ey(f){f.g=new Tr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var b=sr(f.qa);st(b,"RID","rpc"),st(b,"SID",f.K),st(b,"AID",f.T),st(b,"CI",f.F?"0":"1"),!f.F&&f.ja&&st(b,"TO",f.ja),st(b,"TYPE","xmlhttp"),ka(f,b),f.m&&f.o&&Oh(b,f.m,f.o),f.L&&(f.g.I=f.L);var I=f.g;f=f.ia,I.L=1,I.v=Qi(sr(b)),I.m=null,I.P=!0,Eu(I,f)}t.Za=function(){this.C!=null&&(this.C=null,Lu(this),zh(this),jt(19))};function Fu(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function ty(f,b){var I=null;if(f.g==b){Fu(f),Gh(f),f.g=null;var j=2}else if(xa(f.h,b))I=b.D,_a(f.h,b),j=1;else return;if(f.G!=0){if(b.o)if(j==1){I=b.m?b.m.length:0,b=Date.now()-b.F;var J=f.B;j=jn(),Pe(j,new vu(j,I)),ju(f)}else Z0(f);else if(J=b.s,J==3||J==0&&0<b.X||!(j==1&&vk(f,b)||j==2&&zh(f)))switch(I&&0<I.length&&(b=f.h,b.i=b.i.concat(I)),J){case 1:di(f,5);break;case 4:di(f,10);break;case 3:di(f,6);break;default:di(f,2)}}}function ny(f,b){let I=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(I*=2),I*b}function di(f,b){if(f.j.info("Error code "+b),b==2){var I=g(f.fb,f),j=f.Xa;const J=!j;j=new Sr(j||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ui(j,"https"),Qi(j),J?dk(j.toString(),I):hk(j.toString(),I)}else jt(2);f.G=0,f.l&&f.l.sa(b),ry(f),Y0(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function ry(f){if(f.G=0,f.ka=[],f.l){const b=Cu(f.h);(b.length!=0||f.i.length!=0)&&(_(f.ka,b),_(f.ka,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.ra()}}function sy(f,b,I){var j=I instanceof Sr?sr(I):new Sr(I);if(j.g!="")b&&(j.g=b+"."+j.g),Yi(j,j.s);else{var J=a.location;j=J.protocol,b=b?b+"."+J.hostname:J.hostname,J=+J.port;var ne=new Sr(null);j&&ui(ne,j),b&&(ne.g=b),J&&Yi(ne,J),I&&(ne.l=I),j=ne}return I=f.D,b=f.ya,I&&b&&st(j,I,b),st(j,"VER",f.la),ka(f,j),j}function iy(f,b,I){if(b&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Ca&&!f.pa?new _t(new Pu({eb:I})):new _t(f.pa),b.Ha(f.J),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function oy(){}t=oy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vu(){}Vu.prototype.g=function(f,b){return new Vn(f,b)};function Vn(f,b){ve.call(this),this.g=new J0(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(f?f["X-WebChannel-Client-Profile"]=b.va:f={"X-WebChannel-Client-Profile":b.va}),this.g.S=f,(f=b&&b.Sb)&&!E(f)&&(this.g.m=f),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!E(b)&&(this.g.D=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new Xi(this)}w(Vn,ve),Vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vn.prototype.close=function(){Bh(this.g)},Vn.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var I={};I.__data__=f,f=I}else this.u&&(I={},I.__data__=we(f),f=I);b.i.push(new Fh(b.Ya++,f)),b.G==3&&ju(b)},Vn.prototype.N=function(){this.g.l=null,delete this.j,Bh(this.g),delete this.g,Vn.aa.N.call(this)};function ay(f){sn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const I in b){f=I;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}w(ay,sn);function ly(){Lt.call(this),this.status=1}w(ly,Lt);function Xi(f){this.g=f}w(Xi,oy),Xi.prototype.ua=function(){Pe(this.g,"a")},Xi.prototype.ta=function(f){Pe(this.g,new ay(f))},Xi.prototype.sa=function(f){Pe(this.g,new ly)},Xi.prototype.ra=function(){Pe(this.g,"b")},Vu.prototype.createWebChannel=Vu.prototype.g,Vn.prototype.send=Vn.prototype.o,Vn.prototype.open=Vn.prototype.m,Vn.prototype.close=Vn.prototype.close,cI=function(){return new Vu},uI=function(){return jn()},lI=Kt,Gp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ki.NO_ERROR=0,Ki.TIMEOUT=8,Ki.HTTP_ERROR=6,kc=Ki,wu.COMPLETE="complete",aI=wu,Et.EventType=wt,wt.OPEN="a",wt.CLOSE="b",wt.ERROR="c",wt.MESSAGE="d",ve.prototype.listen=ve.prototype.K,Ga=Et,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,oI=_t}).apply(typeof rc<"u"?rc:typeof self<"u"?self:typeof window<"u"?window:{});const Qv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new th("@firebase/firestore");function ja(){return Mi.logLevel}function Ie(t,...e){if(Mi.logLevel<=qe.DEBUG){const n=e.map(Ag);Mi.debug(`Firestore (${ra}): ${t}`,...n)}}function as(t,...e){if(Mi.logLevel<=qe.ERROR){const n=e.map(Ag);Mi.error(`Firestore (${ra}): ${t}`,...n)}}function zo(t,...e){if(Mi.logLevel<=qe.WARN){const n=e.map(Ag);Mi.warn(`Firestore (${ra}): ${t}`,...n)}}function Ag(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t="Unexpected state"){const e=`FIRESTORE (${ra}) INTERNAL ASSERTION FAILED: `+t;throw as(e),new Error(e)}function nt(t,e){t||Fe()}function Ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends br{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dn.UNAUTHENTICATED))}shutdown(){}}class IM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class SM{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt(typeof r.accessToken=="string"),new dI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string"),new dn(e)}}class kM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class CM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new kM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){nt(this.o===void 0);const r=i=>{i.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nt(typeof n.token=="string"),this.R=n.token,new AM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=RM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Qe(t,e){return t<e?-1:t>e?1:0}function Go(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ot(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Ot(0,0))}static max(){return new Oe(new Ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,r){n===void 0?n=0:n>e.length&&Fe(),r===void 0?r=e.length-n:r>e.length-n&&Fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class dt extends Dl{construct(e,n,r){return new dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new dt(n)}static emptyPath(){return new dt([])}}const PM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Dl{construct(e,n,r){return new Xt(e,n,r)}static isValidIdentifier(e){return PM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Ee(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ee(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Ee(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(n)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(dt.fromString(e))}static fromName(e){return new Ae(dt.fromString(e).popFirst(5))}static empty(){return new Ae(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new dt(e.slice()))}}function MM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(r===1e9?new Ot(n+1,0):new Ot(n,r));return new Qs(s,Ae.empty(),e)}function DM(t){return new Qs(t.readTime,t.key,-1)}class Qs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qs(Oe.min(),Ae.empty(),-1)}static max(){return new Qs(Oe.max(),Ae.empty(),-1)}}function LM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:Qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(t){if(t.code!==ae.FAILED_PRECONDITION||t.message!==jM)throw t;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,r)=>{n(e)})}static reject(e){return new de((n,r)=>{r(e)})}static waitFor(e){return new de((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=de.resolve(!1);for(const r of e)n=n.next(s=>s?de.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new de((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new de((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function VM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ng.oe=-1;function sh(t){return t==null}function md(t){return t===0&&1/t==-1/0}function UM(t){return typeof t=="number"&&Number.isInteger(t)&&!md(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function OM(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function fI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n){this.comparator=e,this.root=n||Qt.EMPTY}insert(e,n){return new vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sc(this.root,e,this.comparator,!0)}}class sc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Qt.RED,this.left=s??Qt.EMPTY,this.right=i??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Qt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fe();const e=this.left.check();if(e!==this.right.check())throw Fe();return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe()}get value(){throw Fe()}get color(){throw Fe()}get left(){throw Fe()}get right(){throw Fe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zv(this.data.getIterator())}getIteratorFrom(e){return new Zv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new en(this.comparator);return n.data=e,n}}class Zv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Bn([])}unionWith(e){let n=new en(Xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new pI("Invalid base64 string: "+i):i}}(e);return new nn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const BM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xs(t){if(nt(!!t),typeof t=="string"){let e=0;const n=BM.exec(t);if(nt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Di(t){return typeof t=="string"?nn.fromBase64String(t):nn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Pg(t){const e=t.mapValue.fields.__previous_value__;return Rg(e)?Pg(e):e}function Ll(t){const e=Xs(t.mapValue.fields.__local_write_time__.timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class jl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new jl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic={mapValue:{}};function Li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rg(t)?4:HM(t)?9007199254740991:GM(t)?10:11:Fe()}function Vr(t,e){if(t===e)return!0;const n=Li(t);if(n!==Li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ll(t).isEqual(Ll(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Xs(s.timestampValue),a=Xs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Di(s.bytesValue).isEqual(Di(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Tt(s.geoPointValue.latitude)===Tt(i.geoPointValue.latitude)&&Tt(s.geoPointValue.longitude)===Tt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Tt(s.integerValue)===Tt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Tt(s.doubleValue),a=Tt(i.doubleValue);return o===a?md(o)===md(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Go(t.arrayValue.values||[],e.arrayValue.values||[],Vr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Xv(o)!==Xv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Vr(o[l],a[l])))return!1;return!0}(t,e);default:return Fe()}}function Fl(t,e){return(t.values||[]).find(n=>Vr(n,e))!==void 0}function Ho(t,e){if(t===e)return 0;const n=Li(t),r=Li(e);if(n!==r)return Qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Tt(i.integerValue||i.doubleValue),l=Tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return ex(t.timestampValue,e.timestampValue);case 4:return ex(Ll(t),Ll(e));case 5:return Qe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Di(i),l=Di(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Qe(a[c],l[c]);if(d!==0)return d}return Qe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Qe(Tt(i.latitude),Tt(o.latitude));return a!==0?a:Qe(Tt(i.longitude),Tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tx(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const m=i.fields||{},g=o.fields||{},y=(a=m.value)===null||a===void 0?void 0:a.arrayValue,w=(l=g.value)===null||l===void 0?void 0:l.arrayValue,x=Qe(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:tx(y,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ic.mapValue&&o===ic.mapValue)return 0;if(i===ic.mapValue)return 1;if(o===ic.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let m=0;m<l.length&&m<d.length;++m){const g=Qe(l[m],d[m]);if(g!==0)return g;const y=Ho(a[l[m]],c[d[m]]);if(y!==0)return y}return Qe(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Fe()}}function ex(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qe(t,e);const n=Xs(t),r=Xs(e),s=Qe(n.seconds,r.seconds);return s!==0?s:Qe(n.nanos,r.nanos)}function tx(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ho(n[s],r[s]);if(i)return i}return Qe(n.length,r.length)}function $o(t){return Hp(t)}function Hp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Di(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Hp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Hp(n.fields[o])}`;return s+"}"}(t.mapValue):Fe()}function nx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $p(t){return!!t&&"integerValue"in t}function Mg(t){return!!t&&"arrayValue"in t}function rx(t){return!!t&&"nullValue"in t}function sx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cc(t){return!!t&&"mapValue"in t}function GM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function il(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=il(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=il(t.arrayValue.values[n]);return e}return Object.assign({},t)}function HM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Cc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=il(n)}setAll(e){let n=Xt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=il(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Cc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Cc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new An(il(this.value))}}function mI(t){const e=[];return Hi(t.fields,(n,r)=>{const s=new Xt([n]);if(Cc(r)){const i=mI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new fn(e,0,Oe.min(),Oe.min(),Oe.min(),An.empty(),0)}static newFoundDocument(e,n,r,s){return new fn(e,1,n,Oe.min(),r,s,0)}static newNoDocument(e,n){return new fn(e,2,n,Oe.min(),Oe.min(),An.empty(),0)}static newUnknownDocument(e,n){return new fn(e,3,n,Oe.min(),Oe.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this.position=e,this.inclusive=n}}function ix(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Ae.comparator(Ae.fromName(o.referenceValue),n.key):r=Ho(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ox(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n="asc"){this.field=e,this.dir=n}}function $M(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{}class Pt extends gI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new WM(e,n,r):n==="array-contains"?new YM(e,r):n==="in"?new QM(e,r):n==="not-in"?new XM(e,r):n==="array-contains-any"?new ZM(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new KM(e,r):new JM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ho(n,this.value)):n!==null&&Li(this.value)===Li(n)&&this.matchesComparison(Ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends gI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new xr(e,n)}matches(e){return yI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yI(t){return t.op==="and"}function vI(t){return qM(t)&&yI(t)}function qM(t){for(const e of t.filters)if(e instanceof xr)return!1;return!0}function qp(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+$o(t.value);if(vI(t))return t.filters.map(e=>qp(e)).join(",");{const e=t.filters.map(n=>qp(n)).join(",");return`${t.op}(${e})`}}function xI(t,e){return t instanceof Pt?function(r,s){return s instanceof Pt&&r.op===s.op&&r.field.isEqual(s.field)&&Vr(r.value,s.value)}(t,e):t instanceof xr?function(r,s){return s instanceof xr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&xI(o,s.filters[a]),!0):!1}(t,e):void Fe()}function wI(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${$o(n.value)}`}(t):t instanceof xr?function(n){return n.op.toString()+" {"+n.getFilters().map(wI).join(" ,")+"}"}(t):"Filter"}class WM extends Pt{constructor(e,n,r){super(e,n,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class KM extends Pt{constructor(e,n){super(e,"in",n),this.keys=_I("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class JM extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=_I("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _I(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ae.fromName(r.referenceValue))}class YM extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mg(n)&&Fl(n.arrayValue,this.value)}}class QM extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fl(this.value.arrayValue,n)}}class XM extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fl(this.value.arrayValue,n)}}class ZM extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function ax(t,e=null,n=[],r=[],s=null,i=null,o=null){return new eD(t,e,n,r,s,i,o)}function Dg(t){const e=Ve(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$o(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$o(r)).join(",")),e.ue=n}return e.ue}function Lg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$M(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ox(t.startAt,e.startAt)&&ox(t.endAt,e.endAt)}function Wp(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function tD(t,e,n,r,s,i,o,a){return new sa(t,e,n,r,s,i,o,a)}function jg(t){return new sa(t)}function lx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bI(t){return t.collectionGroup!==null}function ol(t){const e=Ve(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new en(Xt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Vl(i,r))}),n.has(Xt.keyField().canonicalString())||e.ce.push(new Vl(Xt.keyField(),r))}return e.ce}function Dr(t){const e=Ve(t);return e.le||(e.le=EI(e,ol(t))),e.le}function nD(t){const e=Ve(t);return e.he||(e.he=EI(e,t.explicitOrderBy)),e.he}function EI(t,e){if(t.limitType==="F")return ax(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Vl(s.field,i)});const n=t.endAt?new gd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gd(t.startAt.position,t.startAt.inclusive):null;return ax(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kp(t,e){const n=t.filters.concat([e]);return new sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yd(t,e,n){return new sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ih(t,e){return Lg(Dr(t),Dr(e))&&t.limitType===e.limitType}function TI(t){return`${Dg(Dr(t))}|lt:${t.limitType}`}function to(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>wI(s)).join(", ")}]`),sh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>$o(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>$o(s)).join(",")),`Target(${r})`}(Dr(t))}; limitType=${t.limitType})`}function oh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ae.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ol(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=ix(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ol(r),s)||r.endAt&&!function(o,a,l){const c=ix(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ol(r),s))}(t,e)}function rD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function II(t){return(e,n)=>{let r=!1;for(const s of ol(t)){const i=sD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function sD(t,e,n){const r=t.field.isKeyField()?Ae.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Ho(l,c):Fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return fI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=new vt(Ae.comparator);function ls(){return iD}const SI=new vt(Ae.comparator);function Ha(...t){let e=SI;for(const n of t)e=e.insert(n.key,n);return e}function kI(t){let e=SI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function wi(){return al()}function CI(){return al()}function al(){return new ia(t=>t.toString(),(t,e)=>t.isEqual(e))}const oD=new vt(Ae.comparator),aD=new en(Ae.comparator);function $e(...t){let e=aD;for(const n of t)e=e.add(n);return e}const lD=new en(Qe);function uD(){return lD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:md(e)?"-0":e}}function AI(t){return{integerValue:""+t}}function NI(t,e){return UM(e)?AI(e):Fg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(){this._=void 0}}function cD(t,e,n){return t instanceof vd?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Rg(i)&&(i=Pg(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ul?PI(t,e):t instanceof Ol?MI(t,e):function(s,i){const o=RI(s,i),a=ux(o)+ux(s.Pe);return $p(o)&&$p(s.Pe)?AI(a):Fg(s.serializer,a)}(t,e)}function dD(t,e,n){return t instanceof Ul?PI(t,e):t instanceof Ol?MI(t,e):n}function RI(t,e){return t instanceof Bl?function(r){return $p(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class vd extends ah{}class Ul extends ah{constructor(e){super(),this.elements=e}}function PI(t,e){const n=DI(e);for(const r of t.elements)n.some(s=>Vr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ol extends ah{constructor(e){super(),this.elements=e}}function MI(t,e){let n=DI(e);for(const r of t.elements)n=n.filter(s=>!Vr(s,r));return{arrayValue:{values:n}}}class Bl extends ah{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ux(t){return Tt(t.integerValue||t.doubleValue)}function DI(t){return Mg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n){this.field=e,this.transform=n}}function fD(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ul&&s instanceof Ul||r instanceof Ol&&s instanceof Ol?Go(r.elements,s.elements,Vr):r instanceof Bl&&s instanceof Bl?Vr(r.Pe,s.Pe):r instanceof vd&&s instanceof vd}(t.transform,e.transform)}class pD{constructor(e,n){this.version=e,this.transformResults=n}}class bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ac(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lh{}function LI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new uh(t.key,bn.none()):new Zl(t.key,t.data,bn.none());{const n=t.data,r=An.empty();let s=new en(Xt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new si(t.key,r,new Bn(s.toArray()),bn.none())}}function mD(t,e,n){t instanceof Zl?function(s,i,o){const a=s.value.clone(),l=dx(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof si?function(s,i,o){if(!Ac(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=dx(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(jI(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ll(t,e,n,r){return t instanceof Zl?function(i,o,a,l){if(!Ac(i.precondition,o))return a;const c=i.value.clone(),d=hx(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof si?function(i,o,a,l){if(!Ac(i.precondition,o))return a;const c=hx(i.fieldTransforms,l,o),d=o.data;return d.setAll(jI(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,a){return Ac(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function gD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=RI(r.transform,s||null);i!=null&&(n===null&&(n=An.empty()),n.set(r.field,i))}return n||null}function cx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Go(r,s,(i,o)=>fD(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zl extends lh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class si extends lh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function jI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function dx(t,e,n){const r=new Map;nt(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,dD(o,a,n[s]))}return r}function hx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,cD(i,o,e))}return r}class uh extends lh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yD extends lh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&mD(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ll(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ll(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=LI(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),$e())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(n,r)=>cx(n,r))&&Go(this.baseMutations,e.baseMutations,(n,r)=>cx(n,r))}}class Vg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){nt(e.mutations.length===r.length);let s=function(){return oD}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Vg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,We;function bD(t){switch(t){default:return Fe();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function FI(t){if(t===void 0)return as("GRPC error has no .code"),ae.UNKNOWN;switch(t){case Nt.OK:return ae.OK;case Nt.CANCELLED:return ae.CANCELLED;case Nt.UNKNOWN:return ae.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ae.INTERNAL;case Nt.UNAVAILABLE:return ae.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ae.NOT_FOUND;case Nt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Nt.ABORTED:return ae.ABORTED;case Nt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Nt.DATA_LOSS:return ae.DATA_LOSS;default:return Fe()}}(We=Nt||(Nt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=new Ti([4294967295,4294967295],0);function fx(t){const e=ED().encode(t),n=new iI;return n.update(e),new Uint8Array(n.digest())}function px(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ti([n,r],0),new Ti([s,i],0)]}class Ug{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $a(`Invalid padding: ${n}`);if(r<0)throw new $a(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $a(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $a(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ti.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ti.fromNumber(r)));return s.compare(TD)===1&&(s=new Ti([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=fx(e),[r,s]=px(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ug(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=fx(e),[r,s]=px(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $a extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ch(Oe.min(),s,new vt(Qe),ls(),$e())}}class eu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new eu(r,n,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class VI{constructor(e,n){this.targetId=e,this.me=n}}class UI{constructor(e,n,r=nn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class mx{constructor(){this.fe=0,this.ge=yx(),this.pe=nn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=$e(),n=$e(),r=$e();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Fe()}}),new eu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=yx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,nt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ID{constructor(e){this.Le=e,this.Be=new Map,this.ke=ls(),this.qe=gx(),this.Qe=new vt(Qe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Wp(i))if(r===0){const o=new Ae(i.path);this.Ue(n,o,fn.newNoDocument(o,Oe.min()))}else nt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Di(r).toUint8Array()}catch(l){if(l instanceof pI)return zo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ug(o,s,i)}catch(l){return zo(l instanceof $a?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Wp(a.target)){const l=new Ae(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,fn.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=$e();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new ch(e,n,this.Qe,this.ke,r);return this.ke=ls(),this.qe=gx(),this.Qe=new vt(Qe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new mx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new en(Qe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ie("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new mx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function gx(){return new vt(Ae.comparator)}function yx(){return new vt(Ae.comparator)}const SD={asc:"ASCENDING",desc:"DESCENDING"},kD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CD={and:"AND",or:"OR"};class AD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jp(t,e){return t.useProto3Json||sh(e)?e:{value:e}}function xd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ND(t,e){return xd(t,e.toTimestamp())}function Lr(t){return nt(!!t),Oe.fromTimestamp(function(n){const r=Xs(n);return new Ot(r.seconds,r.nanos)}(t))}function Og(t,e){return Yp(t,e).canonicalString()}function Yp(t,e){const n=function(s){return new dt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BI(t){const e=dt.fromString(t);return nt(WI(e)),e}function Qp(t,e){return Og(t.databaseId,e.path)}function kf(t,e){const n=BI(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae(GI(n))}function zI(t,e){return Og(t.databaseId,e)}function RD(t){const e=BI(t);return e.length===4?dt.emptyPath():GI(e)}function Xp(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GI(t){return nt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vx(t,e,n){return{name:Qp(t,e),fields:n.value.mapValue.fields}}function PD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(nt(d===void 0||typeof d=="string"),nn.fromBase64String(d||"")):(nt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),nn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?ae.UNKNOWN:FI(c.code);return new Ee(d,c.message||"")}(o);n=new UI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=kf(t,r.document.name),i=Lr(r.document.updateTime),o=r.document.createTime?Lr(r.document.createTime):Oe.min(),a=new An({mapValue:{fields:r.document.fields}}),l=fn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Nc(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=kf(t,r.document),i=r.readTime?Lr(r.readTime):Oe.min(),o=fn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Nc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=kf(t,r.document),i=r.removedTargetIds||[];n=new Nc([],i,s,null)}else{if(!("filter"in e))return Fe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new _D(s,i),a=r.targetId;n=new VI(a,o)}}return n}function MD(t,e){let n;if(e instanceof Zl)n={update:vx(t,e.key,e.value)};else if(e instanceof uh)n={delete:Qp(t,e.key)};else if(e instanceof si)n={update:vx(t,e.key,e.data),updateMask:zD(e.fieldMask)};else{if(!(e instanceof yD))return Fe();n={verify:Qp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof vd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ul)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ol)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bl)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:ND(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Fe()}(t,e.precondition)),n}function DD(t,e){return t&&t.length>0?(nt(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Lr(s.updateTime):Lr(i);return o.isEqual(Oe.min())&&(o=Lr(i)),new pD(o,s.transformResults||[])}(n,e))):[]}function LD(t,e){return{documents:[zI(t,e.path)]}}function HI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zI(t,s);const i=function(c){if(c.length!==0)return qI(xr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:As(g.field),direction:UD(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Jp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function jD(t,e,n,r){const{_t:s,parent:i}=HI(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d="aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:As(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:As(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function FD(t){let e=RD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){nt(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(m){const g=$I(m);return g instanceof xr&&vI(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(w){return new Vl(no(w.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,sh(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(m){const g=!!m.before,y=m.values||[];return new gd(y,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,y=m.values||[];return new gd(y,g)}(n.endAt)),tD(e,s,o,i,a,"F",l,c)}function VD(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $I(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=no(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=no(n.unaryFilter.field);return Pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=no(n.unaryFilter.field);return Pt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=no(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Fe()}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(no(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xr.create(n.compositeFilter.filters.map(r=>$I(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Fe()}}(n.compositeFilter.op))}(t):Fe()}function UD(t){return SD[t]}function OD(t){return kD[t]}function BD(t){return CD[t]}function As(t){return{fieldPath:t.canonicalString()}}function no(t){return Xt.fromServerFormat(t.fieldPath)}function qI(t){return t instanceof Pt?function(n){if(n.op==="=="){if(sx(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NAN"}};if(rx(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sx(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NAN"}};if(rx(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(n.field),op:OD(n.op),value:n.value}}}(t):t instanceof xr?function(n){const r=n.getFilters().map(s=>qI(s));return r.length===1?r[0]:{compositeFilter:{op:BD(n.op),filters:r}}}(t):Fe()}function zD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function WI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n,r,s,i=Oe.min(),o=Oe.min(),a=nn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.ct=e}}function HD(t){const e=FD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.un=new qD}addToCollectionParentIndex(e,n){return this.un.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(Qs.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(Qs.min())}updateCollectionGroup(e,n,r){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class qD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new en(dt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new en(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new qo(0)}static kn(){return new qo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this.changes=new ia(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?de.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ll(r.mutation,s,Bn.empty(),Ot.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,$e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=$e()){const s=wi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ha();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=wi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,$e()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ls();const o=al(),a=function(){return al()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof si)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),ll(d.mutation,c,d.mutation.getFieldMask(),Ot.now())):o.set(c.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var m;return a.set(c,new KD(d,(m=o.get(c))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const r=al();let s=new vt((o,a)=>o-a),i=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Bn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const m=(s.get(a.batchId)||$e()).add(l);s=s.insert(a.batchId,m)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,m=CI();d.forEach(g=>{if(!i.has(g)){const y=LI(n.get(g),r.get(g));y!==null&&m.set(g,y),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return de.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):de.resolve(wi());let a=-1,l=i;return o.next(c=>de.forEach(c,(d,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(d)?de.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,$e())).next(d=>({batchId:a,changes:kI(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next(r=>{let s=Ha();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ha();return this.indexManager.getCollectionParents(e,i).next(a=>de.forEach(a,l=>{const c=function(m,g){return new sa(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,fn.newInvalidDocument(d)))});let a=Ha();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&ll(d.mutation,c,Bn.empty(),Ot.now()),oh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return de.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Lr(s.createTime)}}(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:HD(s.bundledQuery),readTime:Lr(s.readTime)}}(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.overlays=new vt(Ae.comparator),this.Ir=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const r=wi();return de.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),de.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),de.resolve()}getOverlaysForCollection(e,n,r){const s=wi(),i=n.length+1,o=new Ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return de.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new vt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=wi(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=wi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return de.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xD(n,r));let i=this.Ir.get(n);i===void 0&&(i=$e(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(){this.Tr=new en(Gt.Er),this.dr=new en(Gt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Gt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Gt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Ae(new dt([])),r=new Gt(n,e),s=new Gt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ae(new dt([])),r=new Gt(n,e),s=new Gt(n,e+1);let i=$e();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Gt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ae.comparator(e.key,n.key)||Qe(e.wr,n.wr)}static Ar(e,n){return Qe(e.wr,n.wr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new en(Gt.Er)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new vD(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Gt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return de.resolve(o)}lookupMutationBatch(e,n){return de.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return de.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Gt(n,0),s=new Gt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),de.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new en(Qe);return n.forEach(s=>{const i=new Gt(s,0),o=new Gt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),de.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Ae.isDocumentKey(i)||(i=i.child(""));const o=new Gt(new Ae(i),0);let a=new en(Qe);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),de.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){nt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return de.forEach(n.mutations,s=>{const i=new Gt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Gt(n,0),s=this.br.firstAfterOrEqual(r);return de.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.Mr=e,this.docs=function(){return new vt(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return de.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(n))}getEntries(e,n){let r=ls();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():fn.newInvalidDocument(s))}),de.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ls();const o=n.path,a=new Ae(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||LM(DM(d),r)<=0||(s.has(d.key)||oh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Fe()}Or(e,n){return de.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new t4(this)}getSize(e){return de.resolve(this.size)}}class t4 extends WD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),de.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.persistence=e,this.Nr=new ia(n=>Dg(n),Lg),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Bg,this.targetCount=0,this.kr=qo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),de.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new qo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.Kn(n),de.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),de.waitFor(i).next(()=>s)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return de.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),de.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),de.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return de.resolve(r)}containsKey(e,n){return de.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Ng(0),this.Kr=!1,this.Kr=!0,this.$r=new XD,this.referenceDelegate=e(this),this.Ur=new n4(this),this.indexManager=new $D,this.remoteDocumentCache=function(s){return new e4(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new GD(n),this.Gr=new YD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ZD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ie("MemoryPersistence","Starting transaction:",e);const s=new s4(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return de.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class s4 extends FM{constructor(e){super(),this.currentSequenceNumber=e}}class zg{constructor(e){this.persistence=e,this.Jr=new Bg,this.Yr=null}static Zr(e){return new zg(e)}get Xr(){if(this.Yr)return this.Yr;throw Fe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),de.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),de.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Xr,r=>{const s=Ae.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return de.or([()=>de.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=$e(),s=$e();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Gg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return VN()?8:VM(gn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new i4;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ja()<=qe.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",to(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),de.resolve()):(ja()<=qe.DEBUG&&Ie("QueryEngine","Query:",to(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ja()<=qe.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",to(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dr(n))):de.resolve())}Yi(e,n){if(lx(n))return de.resolve(null);let r=Dr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=yd(n,null,"F"),r=Dr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=$e(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,yd(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return lx(n)||s.isEqual(Oe.min())?de.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?de.resolve(null):(ja()<=qe.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),to(n)),this.rs(e,o,n,MM(s,-1)).next(a=>a))})}ts(e,n){let r=new en(II(e));return n.forEach((s,i)=>{oh(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ja()<=qe.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",to(n)),this.Ji.getDocumentsMatchingQuery(e,n,Qs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new vt(Qe),this._s=new ia(i=>Dg(i),Lg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function l4(t,e,n,r){return new a4(t,e,n,r)}async function KI(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=$e();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function u4(t,e){const n=Ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const m=c.batch,g=m.keys();let y=de.resolve();return g.forEach(w=>{y=y.next(()=>d.getEntry(l,w)).next(x=>{const _=c.docVersions.get(w);nt(_!==null),x.version.compareTo(_)<0&&(m.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=$e();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function JI(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function c4(t,e){const n=Ve(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,m)=>{const g=s.get(m);if(!g)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,m)));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(nn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),s=s.insert(m,y),function(x,_,v){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(g,y,d)&&a.push(n.Ur.updateTargetData(i,y))});let l=ls(),c=$e();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(d4(i,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(Oe.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return de.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function d4(t,e,n){let r=$e(),s=$e();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ls();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function h4(t,e){const n=Ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function f4(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,de.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new js(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Zp(t,e,n){const r=Ve(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Xl(o))throw o;Ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function xx(t,e,n){const r=Ve(t);let s=Oe.min(),i=$e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const m=Ve(l),g=m._s.get(d);return g!==void 0?de.resolve(m.os.get(g)):m.Ur.getTargetData(c,d)}(r,o,Dr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Oe.min(),n?i:$e())).next(a=>(p4(r,rD(e),a),{documents:a,Ts:i})))}function p4(t,e,n){let r=t.us.get(e)||Oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class wx{constructor(){this.activeTargetIds=uD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class m4{constructor(){this.so=new wx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new wx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc=null;function Cf(){return oc===null?oc=function(){return 268435456+Math.round(2147483648*Math.random())}():oc++,"0x"+oc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class x4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Cf(),l=this.xo(n,r.toUriEncodedString());Ie("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(d=>(Ie("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw zo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ra}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=y4[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Cf();return new Promise((o,a)=>{const l=new oI;l.setWithCredentials(!0),l.listenOnce(aI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case kc.NO_ERROR:const d=l.getResponseJson();Ie(cn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case kc.TIMEOUT:Ie(cn,`RPC '${e}' ${i} timed out`),a(new Ee(ae.DEADLINE_EXCEEDED,"Request time out"));break;case kc.HTTP_ERROR:const m=l.getStatus();if(Ie(cn,`RPC '${e}' ${i} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const w=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(v)>=0?v:ae.UNKNOWN}(y.status);a(new Ee(w,y.message))}else a(new Ee(ae.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ee(ae.UNAVAILABLE,"Connection failed."));break;default:Fe()}}finally{Ie(cn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Ie(cn,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Cf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=cI(),a=uI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Ie(cn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const m=o.createWebChannel(d,l);let g=!1,y=!1;const w=new v4({Io:_=>{y?Ie(cn,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(g||(Ie(cn,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Ie(cn,`RPC '${e}' stream ${s} sending:`,_),m.send(_))},To:()=>m.close()}),x=(_,v,E)=>{_.listen(v,T=>{try{E(T)}catch(R){setTimeout(()=>{throw R},0)}})};return x(m,Ga.EventType.OPEN,()=>{y||(Ie(cn,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),x(m,Ga.EventType.CLOSE,()=>{y||(y=!0,Ie(cn,`RPC '${e}' stream ${s} transport closed`),w.So())}),x(m,Ga.EventType.ERROR,_=>{y||(y=!0,zo(cn,`RPC '${e}' stream ${s} transport errored:`,_),w.So(new Ee(ae.UNAVAILABLE,"The operation could not be completed")))}),x(m,Ga.EventType.MESSAGE,_=>{var v;if(!y){const E=_.data[0];nt(!!E);const T=E,R=T.error||((v=T[0])===null||v===void 0?void 0:v.error);if(R){Ie(cn,`RPC '${e}' stream ${s} received error:`,R);const L=R.status;let U=function(N){const M=Nt[N];if(M!==void 0)return FI(M)}(L),S=R.message;U===void 0&&(U=ae.INTERNAL,S="Unknown error status: "+L+" with message "+R.message),y=!0,w.So(new Ee(U,S)),m.close()}else Ie(cn,`RPC '${e}' stream ${s} received:`,E),w.bo(E)}}),x(a,lI.STAT_EVENT,_=>{_.stat===Gp.PROXY?Ie(cn,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Gp.NOPROXY&&Ie(cn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function Af(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t){return new AD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new YI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(as(n.toString()),as("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Ee(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class w4 extends QI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=PD(this.serializer,e),r=function(i){if(!("targetChange"in i))return Oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Oe.min():o.readTime?Lr(o.readTime):Oe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Xp(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Wp(l)?{documents:LD(i,l)}:{query:HI(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=OI(i,o.resumeToken);const c=Jp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Oe.min())>0){a.readTime=xd(i,o.snapshotVersion.toTimestamp());const c=Jp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=VD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Xp(this.serializer),n.removeTarget=e,this.a_(n)}}class _4 extends QI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return nt(!!e.streamToken),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=DD(e.writeResults,e.commitTime),r=Lr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Xp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>MD(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Ee(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Yp(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ee(ae.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Yp(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(ae.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class E4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(as(n),this.D_=!1):Ie("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{$i(this)&&(Ie("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ve(l);c.L_.add(4),await tu(c),c.q_.set("Unknown"),c.L_.delete(4),await hh(c)}(this))})}),this.q_=new E4(r,s)}}async function hh(t){if($i(t))for(const e of t.B_)await e(!0)}async function tu(t){for(const e of t.B_)await e(!1)}function XI(t,e){const n=Ve(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Wg(n)?qg(n):oa(n).r_()&&$g(n,e))}function Hg(t,e){const n=Ve(t),r=oa(n);n.N_.delete(e),r.r_()&&ZI(n,e),n.N_.size===0&&(r.r_()?r.o_():$i(n)&&n.q_.set("Unknown"))}function $g(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oa(t).A_(e)}function ZI(t,e){t.Q_.xe(e),oa(t).R_(e)}function qg(t){t.Q_=new ID({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),oa(t).start(),t.q_.v_()}function Wg(t){return $i(t)&&!oa(t).n_()&&t.N_.size>0}function $i(t){return Ve(t).L_.size===0}function eS(t){t.Q_=void 0}async function I4(t){t.q_.set("Online")}async function S4(t){t.N_.forEach((e,n)=>{$g(t,e)})}async function k4(t,e){eS(t),Wg(t)?(t.q_.M_(e),qg(t)):t.q_.set("Unknown")}async function C4(t,e,n){if(t.q_.set("Online"),e instanceof UI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){Ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wd(t,r)}else if(e instanceof Nc?t.Q_.Ke(e):e instanceof VI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Oe.min()))try{const r=await JI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(nn.EMPTY_BYTE_STRING,d.snapshotVersion)),ZI(i,l);const m=new js(d.target,l,c,d.sequenceNumber);$g(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Ie("RemoteStore","Failed to raise snapshot:",r),await wd(t,r)}}async function wd(t,e,n){if(!Xl(e))throw e;t.L_.add(1),await tu(t),t.q_.set("Offline"),n||(n=()=>JI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ie("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await hh(t)})}function tS(t,e){return e().catch(n=>wd(t,n,e))}async function fh(t){const e=Ve(t),n=Zs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;A4(e);)try{const s=await h4(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,N4(e,s)}catch(s){await wd(e,s)}nS(e)&&rS(e)}function A4(t){return $i(t)&&t.O_.length<10}function N4(t,e){t.O_.push(e);const n=Zs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function nS(t){return $i(t)&&!Zs(t).n_()&&t.O_.length>0}function rS(t){Zs(t).start()}async function R4(t){Zs(t).p_()}async function P4(t){const e=Zs(t);for(const n of t.O_)e.m_(n.mutations)}async function M4(t,e,n){const r=t.O_.shift(),s=Vg.from(r,e,n);await tS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fh(t)}async function D4(t,e){e&&Zs(t).V_&&await async function(r,s){if(function(o){return bD(o)&&o!==ae.ABORTED}(s.code)){const i=r.O_.shift();Zs(r).s_(),await tS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await fh(r)}}(t,e),nS(t)&&rS(t)}async function bx(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),Ie("RemoteStore","RemoteStore received new credentials");const r=$i(n);n.L_.add(3),await tu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await hh(n)}async function L4(t,e){const n=Ve(t);e?(n.L_.delete(2),await hh(n)):e||(n.L_.add(2),await tu(n),n.q_.set("Unknown"))}function oa(t){return t.K_||(t.K_=function(n,r,s){const i=Ve(n);return i.w_(),new w4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:I4.bind(null,t),Ro:S4.bind(null,t),mo:k4.bind(null,t),d_:C4.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Wg(t)?qg(t):t.q_.set("Unknown")):(await t.K_.stop(),eS(t))})),t.K_}function Zs(t){return t.U_||(t.U_=function(n,r,s){const i=Ve(n);return i.w_(),new _4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:R4.bind(null,t),mo:D4.bind(null,t),f_:P4.bind(null,t),g_:M4.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await fh(t)):(await t.U_.stop(),t.O_.length>0&&(Ie("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Kg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jg(t,e){if(as("AsyncQueue",`${e}: ${t}`),Xl(t))return new Ee(ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ae.comparator(n.key,r.key):(n,r)=>Ae.comparator(n.key,r.key),this.keyedMap=Ha(),this.sortedSet=new vt(this.comparator)}static emptySet(e){return new So(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof So)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new So;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.W_=new vt(Ae.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Wo(e,n,So.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class F4{constructor(){this.queries=Tx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Ve(n),i=s.queries;s.queries=Tx(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Ee(ae.ABORTED,"Firestore shutting down"))}}function Tx(){return new ia(t=>TI(t),ih)}async function sS(t,e){const n=Ve(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new j4,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Jg(o,`Initialization of query '${to(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Yg(n)}async function iS(t,e){const n=Ve(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function V4(t,e){const n=Ve(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Yg(n)}function U4(t,e,n){const r=Ve(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Yg(t){t.Y_.forEach(e=>{e.next()})}var em,Ix;(Ix=em||(em={})).ea="default",Ix.Cache="cache";class oS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Wo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.key=e}}class lS{constructor(e){this.key=e}}class O4{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=$e(),this.mutatedKeys=$e(),this.Aa=II(e),this.Ra=new So(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Ex,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const g=s.get(d),y=oh(this.query,m)?m:null,w=!!g&&this.mutatedKeys.has(g.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let _=!1;g&&y?g.data.isEqual(y.data)?w!==x&&(r.track({type:3,doc:y}),_=!0):this.ga(g,y)||(r.track({type:2,doc:y}),_=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),_=!0):g&&!y&&(r.track({type:1,doc:g}),_=!0,(l||c)&&(a=!0)),_&&(y?(o=o.add(y),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,m)=>function(y,w){const x=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe()}};return x(y)-x(w)}(d.type,m.type)||this.Aa(d.doc,m.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Wo(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ex,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=$e(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new lS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new aS(r))}),n}ba(e){this.Ta=e.Ts,this.da=$e();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Wo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class B4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class z4{constructor(e){this.key=e,this.va=!1}}class G4{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ia(a=>TI(a),ih),this.Ma=new Map,this.xa=new Set,this.Oa=new vt(Ae.comparator),this.Na=new Map,this.La=new Bg,this.Ba={},this.ka=new Map,this.qa=qo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function H4(t,e,n=!0){const r=pS(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await uS(r,e,n,!0),s}async function $4(t,e){const n=pS(t);await uS(n,e,!0,!1)}async function uS(t,e,n,r){const s=await f4(t.localStore,Dr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await q4(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&XI(t.remoteStore,s),a}async function q4(t,e,n,r,s){t.Ka=(m,g,y)=>async function(x,_,v,E){let T=_.view.ma(v);T.ns&&(T=await xx(x.localStore,_.query,!1).then(({documents:S})=>_.view.ma(S,T)));const R=E&&E.targetChanges.get(_.targetId),L=E&&E.targetMismatches.get(_.targetId)!=null,U=_.view.applyChanges(T,x.isPrimaryClient,R,L);return kx(x,_.targetId,U.wa),U.snapshot}(t,m,g,y);const i=await xx(t.localStore,e,!0),o=new O4(e,i.Ts),a=o.ma(i.documents),l=eu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);kx(t,n,c.wa);const d=new B4(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function W4(t,e,n){const r=Ve(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!ih(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Zp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Hg(r.remoteStore,s.targetId),tm(r,s.targetId)}).catch(Ql)):(tm(r,s.targetId),await Zp(r.localStore,s.targetId,!0))}async function K4(t,e){const n=Ve(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hg(n.remoteStore,r.targetId))}async function J4(t,e,n){const r=nL(t);try{const s=await function(o,a){const l=Ve(o),c=Ot.now(),d=a.reduce((y,w)=>y.add(w.key),$e());let m,g;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=ls(),x=$e();return l.cs.getEntries(y,d).next(_=>{w=_,w.forEach((v,E)=>{E.isValidDocument()||(x=x.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,w)).next(_=>{m=_;const v=[];for(const E of a){const T=gD(E,m.get(E.key).overlayedDocument);T!=null&&v.push(new si(E.key,T,mI(T.value.mapValue),bn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,v,a)}).next(_=>{g=_;const v=_.applyToLocalDocumentSet(m,x);return l.documentOverlayCache.saveOverlays(y,_.batchId,v)})}).then(()=>({batchId:g.batchId,changes:kI(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new vt(Qe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await nu(r,s.changes),await fh(r.remoteStore)}catch(s){const i=Jg(s,"Failed to persist write");n.reject(i)}}async function cS(t,e){const n=Ve(t);try{const r=await c4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(nt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?nt(o.va):s.removedDocuments.size>0&&(nt(o.va),o.va=!1))}),await nu(n,r,e)}catch(r){await Ql(r)}}function Sx(t,e,n){const r=Ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Ve(o);l.onlineState=a;let c=!1;l.queries.forEach((d,m)=>{for(const g of m.j_)g.Z_(a)&&(c=!0)}),c&&Yg(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Y4(t,e,n){const r=Ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new vt(Ae.comparator);o=o.insert(i,fn.newNoDocument(i,Oe.min()));const a=$e().add(i),l=new ch(Oe.min(),new Map,new vt(Qe),o,a);await cS(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Qg(r)}else await Zp(r.localStore,e,!1).then(()=>tm(r,e,n)).catch(Ql)}async function Q4(t,e){const n=Ve(t),r=e.batch.batchId;try{const s=await u4(n.localStore,e);hS(n,r,null),dS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nu(n,s)}catch(s){await Ql(s)}}async function X4(t,e,n){const r=Ve(t);try{const s=await function(o,a){const l=Ve(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(m=>(nt(m!==null),d=m.keys(),l.mutationQueue.removeMutationBatch(c,m))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);hS(r,e,n),dS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nu(r,s)}catch(s){await Ql(s)}}function dS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function hS(t,e,n){const r=Ve(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function tm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||fS(t,r)})}function fS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Hg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Qg(t))}function kx(t,e,n){for(const r of n)r instanceof aS?(t.La.addReference(r.key,e),Z4(t,r)):r instanceof lS?(Ie("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||fS(t,r.key)):Fe()}function Z4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ie("SyncEngine","New document in limbo: "+n),t.xa.add(r),Qg(t))}function Qg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ae(dt.fromString(e)),r=t.qa.next();t.Na.set(r,new z4(n)),t.Oa=t.Oa.insert(n,r),XI(t.remoteStore,new js(Dr(jg(n.path)),r,"TargetPurposeLimboResolution",Ng.oe))}}async function nu(t,e,n){const r=Ve(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(c){s.push(c);const m=Gg.Wi(l.targetId,c);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const d=Ve(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>de.forEach(c,g=>de.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(m,g.targetId,y)).next(()=>de.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(m,g.targetId,y)))))}catch(m){if(!Xl(m))throw m;Ie("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const y=d.os.get(g),w=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,x)}}}(r.localStore,i))}async function eL(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){Ie("SyncEngine","User change. New user:",e.toKey());const r=await KI(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new Ee(ae.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nu(n,r.hs)}}function tL(t,e){const n=Ve(t),r=n.Na.get(e);if(r&&r.va)return $e().add(r.key);{let s=$e();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function pS(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y4.bind(null,e),e.Ca.d_=V4.bind(null,e.eventManager),e.Ca.$a=U4.bind(null,e.eventManager),e}function nL(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X4.bind(null,e),e}class _d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return l4(this.persistence,new o4,e.initialUser,this.serializer)}Ga(e){return new r4(zg.Zr,this.serializer)}Wa(e){return new m4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_d.provider={build:()=>new _d};class nm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eL.bind(null,this.syncEngine),await L4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new F4}()}createDatastore(e){const n=dh(e.databaseInfo.databaseId),r=function(i){return new x4(i)}(e.databaseInfo);return function(i,o,a,l){return new b4(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new T4(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Sx(this.syncEngine,n,0),function(){return _x.D()?new _x:new g4}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const m=new G4(s,i,o,a,l,c);return d&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ve(s);Ie("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await tu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}nm.provider={build:()=>new nm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):as("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dn.UNAUTHENTICATED,this.clientId=hI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Ie("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ie("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Nf(t,e){t.asyncQueue.verifyOperationInProgress(),Ie("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await KI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Cx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sL(t);Ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>bx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>bx(e.remoteStore,s)),t._onlineComponents=e}async function sL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await Nf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;zo("Error using user provided cache. Falling back to memory cache: "+n),await Nf(t,new _d)}}else Ie("FirestoreClient","Using default OfflineComponentProvider"),await Nf(t,new _d);return t._offlineComponents}async function Xg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ie("FirestoreClient","Using user provided OnlineComponentProvider"),await Cx(t,t._uninitializedComponentsProvider._online)):(Ie("FirestoreClient","Using default OnlineComponentProvider"),await Cx(t,new nm))),t._onlineComponents}function iL(t){return Xg(t).then(e=>e.syncEngine)}function oL(t){return Xg(t).then(e=>e.datastore)}async function gS(t){const e=await Xg(t),n=e.eventManager;return n.onListen=H4.bind(null,e.syncEngine),n.onUnlisten=W4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=K4.bind(null,e.syncEngine),n}function aL(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new mS({next:g=>{d.Za(),o.enqueueAndForget(()=>iS(i,m));const y=g.docs.has(a);!y&&g.fromCache?c.reject(new Ee(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&l&&l.source==="server"?c.reject(new Ee(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new oS(jg(a.path),d,{includeMetadataChanges:!0,_a:!0});return sS(i,m)}(await gS(t),t.asyncQueue,e,n,r)),r.promise}function lL(t,e,n={}){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new mS({next:g=>{d.Za(),o.enqueueAndForget(()=>iS(i,m)),g.fromCache&&l.source==="server"?c.reject(new Ee(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new oS(a,d,{includeMetadataChanges:!0,_a:!0});return sS(i,m)}(await gS(t),t.asyncQueue,e,n,r)),r.promise}function uL(t,e,n){const r=new Mr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await oL(t);r.resolve(async function(o,a,l){var c;const d=Ve(o),{request:m,ut:g,parent:y}=jD(d.serializer,nD(a),l);d.connection.Fo||delete m.parent;const w=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,y,m,1)).filter(_=>!!_.result);nt(w.length===1);const x=(c=w[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(x).reduce((_,v)=>(_[g[v]]=x[v],_),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t,e,n){if(!n)throw new Ee(ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cL(t,e,n,r){if(e===!0&&r===!0)throw new Ee(ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Nx(t){if(!Ae.isDocumentKey(t))throw new Ee(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rx(t){if(Ae.isDocumentKey(t))throw new Ee(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ph(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe()}function $n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ph(t);throw new Ee(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function dL(t,e){if(e<=0)throw new Ee(ae.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ee(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Px({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Px(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new TM;switch(r.type){case"firstParty":return new CM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ax.get(n);r&&(Ie("ComponentProvider","Removing Datastore"),Ax.delete(n),r.terminate())}(this),Promise.resolve()}}function hL(t,e,n,r={}){var s;const i=(t=$n(t,mh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=dn.MOCK_USER;else{a=PN(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Ee(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new dn(c)}t._authCredentials=new IM(new dI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ii(this.firestore,e,this._query)}}class En{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class Ks extends ii{constructor(e,n,r){super(e,n,jg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new Ae(e))}withConverter(e){return new Ks(this.firestore,e,this._path)}}function Dt(t,e,...n){if(t=Mt(t),vS("collection","path",e),t instanceof mh){const r=dt.fromString(e,...n);return Rx(r),new Ks(t,null,r)}{if(!(t instanceof En||t instanceof Ks))throw new Ee(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return Rx(r),new Ks(t.firestore,null,r)}}function Bt(t,e,...n){if(t=Mt(t),arguments.length===1&&(e=hI.newId()),vS("doc","path",e),t instanceof mh){const r=dt.fromString(e,...n);return Nx(r),new En(t,null,new Ae(r))}{if(!(t instanceof En||t instanceof Ks))throw new Ee(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return Nx(r),new En(t.firestore,t instanceof Ks?t.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new YI(this,"async_queue_retry"),this.Vu=()=>{const r=Af();r&&Ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Af();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Af();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Mr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xl(e))throw e;Ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw as("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Kg.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ps extends mh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Mx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mx(e),this._firestoreClient=void 0,await e}}}function fL(t,e){const n=typeof t=="object"?t:Eg(),r=typeof t=="string"?t:"(default)",s=Gi(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=NN("firestore");i&&hL(s,...i)}return s}function ru(t){if(t._terminated)throw new Ee(ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pL(t),t._firestoreClient}function pL(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new zM(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,yS(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new rL(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class gL{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ko(nn.fromBase64String(e))}catch(n){throw new Ee(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ko(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=/^__.*__$/;class vL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new si(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zl(e,this.data,n,this.fieldTransforms)}}class xS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new si(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe()}}class t0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(wS(this.Cu)&&yL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dh(e)}Qu(e,n,r,s=!1){return new t0({Cu:e,methodName:n,qu:r,path:Xt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iu(t){const e=t._freezeSettings(),n=dh(t._databaseId);return new xL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function n0(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);s0("Data must be an object, but it was:",o,r);const a=ES(r,o);let l,c;if(i.merge)l=new Bn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const g=rm(e,m,n);if(!o.contains(g))throw new Ee(ae.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);IS(d,g)||d.push(g)}l=new Bn(d),c=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,c=o.fieldTransforms;return new vL(new An(a),l,c)}class yh extends gh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yh}}class r0 extends gh{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Bl(e.serializer,NI(e.serializer,this.$u));return new hD(e.path,n)}isEqual(e){return e instanceof r0&&this.$u===e.$u}}function _S(t,e,n,r){const s=t.Qu(1,e,n);s0("Data must be an object, but it was:",s,r);const i=[],o=An.empty();Hi(r,(l,c)=>{const d=i0(e,l,n);c=Mt(c);const m=s.Nu(d);if(c instanceof yh)i.push(d);else{const g=ou(c,m);g!=null&&(i.push(d),o.set(d,g))}});const a=new Bn(i);return new xS(o,a,s.fieldTransforms)}function bS(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[rm(e,r,n)],l=[s];if(i.length%2!=0)throw new Ee(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(rm(e,i[g])),l.push(i[g+1]);const c=[],d=An.empty();for(let g=a.length-1;g>=0;--g)if(!IS(c,a[g])){const y=a[g];let w=l[g];w=Mt(w);const x=o.Nu(y);if(w instanceof yh)c.push(y);else{const _=ou(w,x);_!=null&&(c.push(y),d.set(y,_))}}const m=new Bn(c);return new xS(d,m,o.fieldTransforms)}function wL(t,e,n,r=!1){return ou(n,t.Qu(r?4:3,e))}function ou(t,e){if(TS(t=Mt(t)))return s0("Unsupported field value:",e,t),ES(t,e);if(t instanceof gh)return function(r,s){if(!wS(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=ou(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ot.fromDate(r);return{timestampValue:xd(s.serializer,i)}}if(r instanceof Ot){const i=new Ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xd(s.serializer,i)}}if(r instanceof Zg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ko)return{bytesValue:OI(s.serializer,r._byteString)};if(r instanceof En){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Og(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof e0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Fg(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${ph(r)}`)}(t,e)}function ES(t,e){const n={};return fI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(t,(r,s)=>{const i=ou(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function TS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ot||t instanceof Zg||t instanceof Ko||t instanceof En||t instanceof gh||t instanceof e0)}function s0(t,e,n){if(!TS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ph(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function rm(t,e,n){if((e=Mt(e))instanceof su)return e._internalPath;if(typeof e=="string")return i0(t,e);throw bd("Field path arguments must be of type string or ",t,!1,void 0,n)}const _L=new RegExp("[~\\*/\\[\\]]");function i0(t,e,n){if(e.search(_L)>=0)throw bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new su(...e.split("."))._internalPath}catch{throw bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Ee(ae.INVALID_ARGUMENT,a+t+l)}function IS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bL extends SS{data(){return super.data()}}function vh(t,e){return typeof e=="string"?i0(t,e):e instanceof su?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class o0{}class a0 extends o0{}function wr(t,e,...n){let r=[];e instanceof o0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof l0).length,a=i.filter(l=>l instanceof xh).length;if(o>1||o>0&&a>0)throw new Ee(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class xh extends a0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new xh(e,n,r)}_apply(e){const n=this._parse(e);return kS(e._query,n),new ii(e.firestore,e.converter,Kp(e._query,n))}_parse(e){const n=iu(e.firestore);return function(i,o,a,l,c,d,m){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ee(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Lx(m,d);const y=[];for(const w of m)y.push(Dx(l,i,w));g={arrayValue:{values:y}}}else g=Dx(l,i,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Lx(m,d),g=wL(a,o,m,d==="in"||d==="not-in");return Pt.create(c,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Jo(t,e,n){const r=e,s=vh("where",t);return xh._create(s,r,n)}class l0 extends o0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new l0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)kS(o,l),o=Kp(o,l)}(e._query,n),new ii(e.firestore,e.converter,Kp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class u0 extends a0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new u0(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Ee(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ee(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vl(i,o)}(e._query,this._field,this._direction);return new ii(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new sa(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ji(t,e="asc"){const n=e,r=vh("orderBy",t);return u0._create(r,n)}class c0 extends a0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new c0(e,n,r)}_apply(e){return new ii(e.firestore,e.converter,yd(e._query,this._limit,this._limitType))}}function Yo(t){return dL("limit",t),c0._create("limit",t,"F")}function Dx(t,e,n){if(typeof(n=Mt(n))=="string"){if(n==="")throw new Ee(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bI(e)&&n.indexOf("/")!==-1)throw new Ee(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(dt.fromString(n));if(!Ae.isDocumentKey(r))throw new Ee(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nx(t,new Ae(r))}if(n instanceof En)return nx(t,n._key);throw new Ee(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ph(n)}.`)}function Lx(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kS(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ee(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class TL{convertValue(e,n="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Tt(o.doubleValue));return new e0(i)}convertGeoPoint(e){return new Zg(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Pg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ll(e));default:return null}}convertTimestamp(e){const n=Xs(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=dt.fromString(e);nt(WI(r));const s=new jl(r.get(1),r.get(3)),i=new Ae(r.popFirst(5));return s.isEqual(n)||as(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function IL(){return new mL("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class CS extends SS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Rc extends CS{data(e={}){return super.data(e)}}class SL{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new qa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Rc(this._firestore,this._userDataWriter,r.key,r,new qa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Rc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new qa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Rc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new qa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:kL(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function kL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t){t=$n(t,En);const e=$n(t.firestore,ps);return aL(ru(e),t._key).then(n=>CL(e,t,n))}class h0 extends TL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ko(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}function _r(t){t=$n(t,ii);const e=$n(t.firestore,ps),n=ru(e),r=new h0(e);return EL(t._query),lL(n,t._query).then(s=>new SL(e,r,t,s))}function f0(t,e,n){t=$n(t,En);const r=$n(t.firestore,ps),s=d0(t.converter,e,n);return uu(r,[n0(iu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,bn.none())])}function au(t,e,n,...r){t=$n(t,En);const s=$n(t.firestore,ps),i=iu(s);let o;return o=typeof(e=Mt(e))=="string"||e instanceof su?bS(i,"updateDoc",t._key,e,n,r):_S(i,"updateDoc",t._key,e),uu(s,[o.toMutation(t._key,bn.exists(!0))])}function lu(t){return uu($n(t.firestore,ps),[new uh(t._key,bn.none())])}function aa(t,e){const n=$n(t.firestore,ps),r=Bt(t),s=d0(t.converter,e);return uu(n,[n0(iu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,bn.exists(!1))]).then(()=>r)}function uu(t,e){return function(r,s){const i=new Mr;return r.asyncQueue.enqueueAndForget(async()=>J4(await iL(r),s,i)),i.promise}(ru(t),e)}function CL(t,e,n){const r=n.docs.get(e._key),s=new h0(t);return new CS(t,s,e._key,r,new qa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t){return AL(t,{count:IL()})}function AL(t,e){const n=$n(t.firestore,ps),r=ru(n),s=OM(e,(i,o)=>new wD(o,i.aggregateType,i._internalFieldPath));return uL(r,t._query,s).then(i=>function(a,l,c){const d=new h0(a);return new gL(l,d,c)}(n,t,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=iu(e)}set(e,n,r){this._verifyNotCommitted();const s=Rf(e,this._firestore),i=d0(s.converter,n,r),o=n0(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,bn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Rf(e,this._firestore);let o;return o=typeof(n=Mt(n))=="string"||n instanceof su?bS(this._dataReader,"WriteBatch.update",i._key,n,r,s):_S(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Rf(e,this._firestore);return this._mutations=this._mutations.concat(new uh(n._key,bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rf(t,e){if((t=Mt(t)).firestore!==e)throw new Ee(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function jx(t){return new r0("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t){return ru(t=$n(t,ps)),new NL(t,e=>uu(t,e))}(function(e,n=!0){(function(s){ra=s})(na),Fr(new vr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new ps(new SM(r.getProvider("auth-internal")),new NM(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ee(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Zn(Qv,"4.7.3",e),Zn(Qv,"4.7.3","esm2017")})();function g0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function AS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RL=AS,NS=new zi("auth","Firebase",AS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new th("@firebase/auth");function PL(t,...e){Ed.logLevel<=qe.WARN&&Ed.warn(`Auth (${na}): ${t}`,...e)}function Pc(t,...e){Ed.logLevel<=qe.ERROR&&Ed.error(`Auth (${na}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t,...e){throw v0(t,...e)}function pr(t,...e){return v0(t,...e)}function y0(t,e,n){const r=Object.assign(Object.assign({},RL()),{[e]:n});return new zi("auth","Firebase",r).create(e,{appName:t.name})}function Ii(t){return y0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ML(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ur(t,"argument-error"),y0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function v0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return NS.create(t,...e)}function je(t,e,...n){if(!t)throw v0(e,...n)}function Yr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pc(e),new Error(e)}function us(t,e){t||Yr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function DL(){return Fx()==="http:"||Fx()==="https:"}function Fx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DL()||CT()||"connection"in navigator)?navigator.onLine:!0}function jL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n){this.shortDelay=e,this.longDelay=n,us(n>e,"Short delay should be less than long delay!"),this.isMobile=MN()||jN()}get(){return LL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(t,e){us(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=new cu(3e4,6e4);function w0(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function la(t,e,n,r,s={}){return PS(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Yl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return LN()||(c.referrerPolicy="no-referrer"),RS.fetch()(MS(t,t.config.apiHost,n,a),c)})}async function PS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},FL),e);try{const s=new OL(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ac(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ac(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ac(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ac(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw y0(t,d,c);Ur(t,d)}}catch(s){if(s instanceof br)throw s;Ur(t,"network-request-failed",{message:String(s)})}}async function UL(t,e,n,r,s={}){const i=await la(t,e,n,r,s);return"mfaPendingCredential"in i&&Ur(t,"multi-factor-auth-required",{_serverResponse:i}),i}function MS(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?x0(t.config,s):`${t.config.apiScheme}://${s}`}class OL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pr(this.auth,"network-request-failed")),VL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ac(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(t,e){return la(t,"POST","/v1/accounts:delete",e)}async function DS(t,e){return la(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zL(t,e=!1){const n=Mt(t),r=await n.getIdToken(e),s=_0(r);je(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ul(Pf(s.auth_time)),issuedAtTime:ul(Pf(s.iat)),expirationTime:ul(Pf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Pf(t){return Number(t)*1e3}function _0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pc("JWT malformed, contained fewer than 3 sections"),null;try{const s=TT(n);return s?JSON.parse(s):(Pc("Failed to decode base64 JWT payload"),null)}catch(s){return Pc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Vx(t){const e=_0(t);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof br&&GL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function GL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ul(this.lastLoginAt),this.creationTime=ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(t){var e;const n=t.auth,r=await t.getIdToken(),s=await zl(t,DS(n,{idToken:r}));je(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?LS(i.providerUserInfo):[],a=qL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new im(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function $L(t){const e=Mt(t);await Td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qL(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function LS(t){return t.map(e=>{var{providerId:n}=e,r=g0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(t,e){const n=await PS(t,{},async()=>{const r=Yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=MS(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",RS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KL(t,e){return la(t,"POST","/v2/accounts:revokeToken",w0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){je(e.length!==0,"internal-error");const n=Vx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await WL(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ko;return r&&(je(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(je(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(je(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ko,this.toJSON())}_performRefresh(){return Yr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t,e){je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=g0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new im(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await zl(this,this.stsTokenManager.getToken(this.auth,e));return je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zL(this,e)}reload(){return $L(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Td(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jr(this.auth.app))return Promise.reject(Ii(this.auth));const e=await this.getIdToken();return await zl(this,BL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:R,isAnonymous:L,providerData:U,stsTokenManager:S}=n;je(T&&S,e,"internal-error");const C=ko.fromJSON(this.name,S);je(typeof T=="string",e,"internal-error"),Ts(m,e.name),Ts(g,e.name),je(typeof R=="boolean",e,"internal-error"),je(typeof L=="boolean",e,"internal-error"),Ts(y,e.name),Ts(w,e.name),Ts(x,e.name),Ts(_,e.name),Ts(v,e.name),Ts(E,e.name);const N=new Qr({uid:T,auth:e,email:g,emailVerified:R,displayName:m,isAnonymous:L,photoURL:w,phoneNumber:y,tenantId:x,stsTokenManager:C,createdAt:v,lastLoginAt:E});return U&&Array.isArray(U)&&(N.providerData=U.map(M=>Object.assign({},M))),_&&(N._redirectEventId=_),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new ko;s.updateFromServerResponse(n);const i=new Qr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Td(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];je(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?LS(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ko;a.updateFromIdToken(r);const l=new Qr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new im(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new Map;function Xr(t){us(t instanceof Function,"Expected a class definition");let e=Ux.get(t);return e?(us(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ux.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jS.type="NONE";const Ox=jS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t,e,n){return`firebase:${t}:${e}:${n}`}class Co{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Mc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Mc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Co(Xr(Ox),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Xr(Ox);const o=Mc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const m=Qr._fromJSON(e,d);c!==i&&(a=m),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Co(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Co(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zS(e))return"Blackberry";if(GS(e))return"Webos";if(VS(e))return"Safari";if((e.includes("chrome/")||US(e))&&!e.includes("edge/"))return"Chrome";if(BS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FS(t=gn()){return/firefox\//i.test(t)}function VS(t=gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function US(t=gn()){return/crios\//i.test(t)}function OS(t=gn()){return/iemobile/i.test(t)}function BS(t=gn()){return/android/i.test(t)}function zS(t=gn()){return/blackberry/i.test(t)}function GS(t=gn()){return/webos/i.test(t)}function b0(t=gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JL(t=gn()){var e;return b0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function YL(){return FN()&&document.documentMode===10}function HS(t=gn()){return b0(t)||BS(t)||GS(t)||zS(t)||/windows phone/i.test(t)||OS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t,e=[]){let n;switch(t){case"Browser":n=Bx(gn());break;case"Worker":n=`${Bx(gn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${na}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(t,e={}){return la(t,"GET","/v2/passwordPolicy",w0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=6;class e5{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:ZL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zx(this),this.idTokenSubscription=new zx(this),this.beforeStateQueue=new QL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Co.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await DS(this,{idToken:e}),r=await Qr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Jr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Td(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jr(this.app))return Promise.reject(Ii(this));const n=e?Mt(e):null;return n&&je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jr(this.app)?Promise.reject(Ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jr(this.app)?Promise.reject(Ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XL(this),n=new e5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await KL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xr(e)||this._popupRedirectResolver;je(n,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[Xr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$S(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _h(t){return Mt(t)}class zx{constructor(e){this.auth=e,this.observer=null,this.addObserver=HN(n=>this.observer=n)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n5(t){E0=t}function r5(t){return E0.loadJS(t)}function s5(){return E0.gapiScript}function i5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(t,e){const n=Gi(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Pl(i,e??{}))return s;Ur(s,"already-initialized")}return n.initialize({options:e})}function a5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function l5(t,e,n){const r=_h(t);je(r._canInitEmulator,r,"emulator-config-failed"),je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=qS(e),{host:o,port:a}=u5(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),c5()}function qS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function u5(t){const e=qS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Gx(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Gx(o)}}}function Gx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function c5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,n){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t,e){return UL(t,"POST","/v1/accounts:signInWithIdp",w0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5="http://localhost";class Fi extends WS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=g0(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Fi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ao(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ao(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ao(e,n)}buildRequest(){const e={requestUri:d5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends T0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends du{constructor(){super("facebook.com")}static credential(e){return Fi._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ns.credential(e.oauthAccessToken)}catch{return null}}}Ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fi._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qr.credential(n,r)}catch{return null}}}qr.GOOGLE_SIGN_IN_METHOD="google.com";qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends du{constructor(){super("github.com")}static credential(e){return Fi._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends du{constructor(){super("twitter.com")}static credential(e,n){return Fi._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ps.credential(n,r)}catch{return null}}}Ps.TWITTER_SIGN_IN_METHOD="twitter.com";Ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Qr._fromIdTokenResponse(e,r,s),o=Hx(r);return new Qo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Hx(r);return new Qo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Hx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends br{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Id.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Id(e,n,r,s)}}function KS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Id._fromErrorAndOperation(t,i,e,r):i})}async function h5(t,e,n=!1){const r=await zl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t,e,n=!1){const{auth:r}=t;if(Jr(r.app))return Promise.reject(Ii(r));const s="reauthenticate";try{const i=await zl(t,KS(r,s,e,t),n);je(i.idToken,r,"internal-error");const o=_0(i.idToken);je(o,r,"internal-error");const{sub:a}=o;return je(t.uid===a,r,"user-mismatch"),Qo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ur(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(t,e,n=!1){if(Jr(t.app))return Promise.reject(Ii(t));const r="signIn",s=await KS(t,r,e),i=await Qo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function m5(t,e,n,r){return Mt(t).onIdTokenChanged(e,n,r)}function g5(t,e,n){return Mt(t).beforeAuthStateChanged(e,n)}function y5(t){return Mt(t).signOut()}const Sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sd,"1"),this.storage.removeItem(Sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5=1e3,x5=10;class YS extends JS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);YL()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,x5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},v5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}YS.type="LOCAL";const w5=YS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS extends JS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}QS.type="SESSION";const XS=QS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new bh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await _5(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=I0("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(){return window}function E5(t){jr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(){return typeof jr().WorkerGlobalScope<"u"&&typeof jr().importScripts=="function"}async function T5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function I5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function S5(){return ZS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firebaseLocalStorageDb",k5=1,kd="firebaseLocalStorage",t1="fbase_key";class hu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Eh(t,e){return t.transaction([kd],e?"readwrite":"readonly").objectStore(kd)}function C5(){const t=indexedDB.deleteDatabase(e1);return new hu(t).toPromise()}function om(){const t=indexedDB.open(e1,k5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kd,{keyPath:t1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kd)?e(r):(r.close(),await C5(),e(await om()))})})}async function $x(t,e,n){const r=Eh(t,!0).put({[t1]:e,value:n});return new hu(r).toPromise()}async function A5(t,e){const n=Eh(t,!1).get(e),r=await new hu(n).toPromise();return r===void 0?null:r.value}function qx(t,e){const n=Eh(t,!0).delete(e);return new hu(n).toPromise()}const N5=800,R5=3;class n1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await om(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>R5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bh._getInstance(S5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await T5(),!this.activeServiceWorker)return;this.sender=new b5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||I5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await om();return await $x(e,Sd,"1"),await qx(e,Sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>$x(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>A5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Eh(s,!1).getAll();return new hu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),N5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}n1.type="LOCAL";const P5=n1;new cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(t,e){return e?Xr(e):(je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends WS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function M5(t){return p5(t.auth,new S0(t),t.bypassAuthState)}function D5(t){const{auth:e,user:n}=t;return je(n,e,"internal-error"),f5(n,new S0(t),t.bypassAuthState)}async function L5(t){const{auth:e,user:n}=t;return je(n,e,"internal-error"),h5(n,new S0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return M5;case"linkViaPopup":case"linkViaRedirect":return L5;case"reauthViaPopup":case"reauthViaRedirect":return D5;default:Ur(this.auth,"internal-error")}}resolve(e){us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=new cu(2e3,1e4);async function F5(t,e,n){if(Jr(t.app))return Promise.reject(pr(t,"operation-not-supported-in-this-environment"));const r=_h(t);ML(t,e,T0);const s=r1(r,n);return new _i(r,"signInViaPopup",e,s).executeNotNull()}class _i extends s1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,_i.currentPopupAction&&_i.currentPopupAction.cancel(),_i.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){us(this.filter.length===1,"Popup operations only handle one event");const e=I0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_i.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,j5.get())};e()}}_i.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5="pendingRedirect",Dc=new Map;class U5 extends s1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Dc.get(this.auth._key());if(!e){try{const r=await O5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Dc.set(this.auth._key(),e)}return this.bypassAuthState||Dc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O5(t,e){const n=G5(e),r=z5(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function B5(t,e){Dc.set(t._key(),e)}function z5(t){return Xr(t._redirectPersistence)}function G5(t){return Mc(V5,t.config.apiKey,t.name)}async function H5(t,e,n=!1){if(Jr(t.app))return Promise.reject(Ii(t));const r=_h(t),s=r1(r,e),o=await new U5(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=10*60*1e3;class q5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!W5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!i1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wx(e))}saveEventToCache(e){this.cachedEventUids.add(Wx(e)),this.lastProcessedEventTime=Date.now()}}function Wx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function i1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function W5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return i1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K5(t,e={}){return la(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y5=/^https?/;async function Q5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await K5(t);for(const n of e)try{if(X5(n))return}catch{}Ur(t,"unauthorized-domain")}function X5(t){const e=sm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Y5.test(n))return!1;if(J5.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=new cu(3e4,6e4);function Kx(){const t=jr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function e3(t){return new Promise((e,n)=>{var r,s,i;function o(){Kx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kx(),n(pr(t,"network-request-failed"))},timeout:Z5.get()})}if(!((s=(r=jr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=jr().gapi)===null||i===void 0)&&i.load)o();else{const a=i5("iframefcb");return jr()[a]=()=>{gapi.load?o():n(pr(t,"network-request-failed"))},r5(`${s5()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Lc=null,e})}let Lc=null;function t3(t){return Lc=Lc||e3(t),Lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=new cu(5e3,15e3),r3="__/auth/iframe",s3="emulator/auth/iframe",i3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a3(t){const e=t.config;je(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?x0(e,s3):`https://${t.config.authDomain}/${r3}`,r={apiKey:e.apiKey,appName:t.name,v:na},s=o3.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Yl(r).slice(1)}`}async function l3(t){const e=await t3(t),n=jr().gapi;return je(n,t,"internal-error"),e.open({where:document.body,url:a3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:i3,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=pr(t,"network-request-failed"),a=jr().setTimeout(()=>{i(o)},n3.get());function l(){jr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c3=500,d3=600,h3="_blank",f3="http://localhost";class Jx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p3(t,e,n,r=c3,s=d3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},u3),{width:r.toString(),height:s.toString(),top:i,left:o}),c=gn().toLowerCase();n&&(a=US(c)?h3:n),FS(c)&&(e=e||f3,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(JL(c)&&a!=="_self")return m3(e||"",a),new Jx(null);const m=window.open(e||"",a,d);je(m,t,"popup-blocked");try{m.focus()}catch{}return new Jx(m)}function m3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="__/auth/handler",y3="emulator/auth/handler",v3=encodeURIComponent("fac");async function Yx(t,e,n,r,s,i){je(t.config.authDomain,t,"auth-domain-config-required"),je(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:na,eventId:s};if(e instanceof T0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",GN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof du){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${v3}=${encodeURIComponent(l)}`:"";return`${x3(t)}?${Yl(a).slice(1)}${c}`}function x3({config:t}){return t.emulator?x0(t,y3):`https://${t.authDomain}/${g3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="webStorageSupport";class w3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XS,this._completeRedirectFn=H5,this._overrideRedirectResult=B5}async _openPopup(e,n,r,s){var i;us((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Yx(e,n,r,sm(),s);return p3(e,o,I0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Yx(e,n,r,sm(),s);return E5(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(us(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await l3(e),r=new q5(e);return n.register("authEvent",s=>(je(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mf,{type:Mf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Mf];o!==void 0&&n(!!o),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return HS()||VS()||b0()}}const _3=w3;var Qx="@firebase/auth",Xx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T3(t){Fr(new vr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;je(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$S(t)},c=new t5(r,s,i,l);return a5(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fr(new vr("auth-internal",e=>{const n=_h(e.getProvider("auth").getImmediate());return(r=>new b3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(Qx,Xx,E3(t)),Zn(Qx,Xx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=5*60,S3=kT("authIdTokenMaxAge")||I3;let Zx=null;const k3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>S3)return;const s=n==null?void 0:n.token;Zx!==s&&(Zx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function C3(t=Eg()){const e=Gi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=o5(t,{popupRedirectResolver:_3,persistence:[P5,w5,XS]}),r=kT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=k3(i.toString());g5(n,o,()=>o(n.currentUser)),m5(n,a=>o(a))}}const s=IT("auth");return s&&l5(n,`http://${s}`),n}function A3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}n5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=pr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",A3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T3("Browser");const N3={apiKey:"AIzaSyDjgrBvKUaVg9U1XustHj9TeO4lHZDrcNg",authDomain:"fanra-dev.firebaseapp.com",projectId:"fanra-dev",storageBucket:"fanra-dev.firebasestorage.app",messagingSenderId:"664735861834",appId:"1:664735861834:web:6519570201553dbe4faab3",measurementId:"G-HMKEVZS65H"},k0=DT(N3);wM(k0);const ze=fL(k0),o1=C3(k0),R3=new qr,ua="users",a1="chats",Gl="shared_api_keys",fu="gallery_photos_production",ca="blog_posts_production",Th="music_playlist",l1="site_content",u1="analytics_daily",P3="analytics_logs",Ih="messages",Df=5,c1=[{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/609923798_2054349268723214_528785191593339343_n.webp?stp=dst-webp_s960x960&_nc_cat=110&ccb=1-7&_nc_sid=9f807c&_nc_ohc=BZOOtuLCh5UQ7kNvwGKzWef&_nc_oc=AdmGNpGcSr3xRboqLJeuQ8M5KjOpRBNLbsqQVscddteG1f05EVO_Kv4iZQn5l2OjztzywzdnV5Qp-sDi35XjQWpa&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QGA47iTm-6vGLy8O36BgFnvih3m4gJ3HjjJLwTB_h1_yg&oe=6987DFA2",caption:"Awal tahun yang tenang. Duduk santai menikmati sore.",month:"Januari",year:"2026",timestamp:1768608e6}],Cd=[{title:"Glitch in the Matrix: Bukti Kita Cuma Kode Biner?",subtitle:"Teori simulasi Nick Bostrom yang bikin Elon Musk kepikiran tiap malam.",category:"Konspirasi Sains",date:"20 Januari 2026",readTime:"8 min read",author:"Fanra",image:"https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?q=80&w=2070&auto=format&fit=crop",content:`Pernah ngerasa dj vu? Atau ngeliat sesuatu yang kayaknya 'nggak masuk akal' secara fisika? Banyak ilmuwan, termasuk Elon Musk, percaya peluang kita hidup di 'base reality' (kenyataan asli) itu cuma satu banding miliaran.

Bayangkan game The Sims atau GTA. Karakternya nggak sadar mereka ada di game. Seiring teknologi komputer kita makin canggih (VR, AI, Quantum Computing), kita makin dekat bisa bikin simulasi yang persis kenyataan. Kalau kita bisa bikin itu, siapa yang menjamin kalau KITA ini bukan hasil simulasi peradaban yang lebih maju?

Fisikawan James Gates bahkan nemuin kode error koreksi komputer (adinkras) di dalam persamaan supersimetri yang menjelaskan alam semesta. Kok bisa ada kode komputer di hukum fisika?`,timestamp:17699168e5},{title:"Paradoks Fermi: Keheningan yang Memekakkan Telinga",subtitle:"Jika alam semesta ini tak terhingga luasnya dan tua usianya, di mana semua orang?",category:"Sains & Filsafat",date:"9 Januari 2026",readTime:"7 min read",author:"Fanra",image:"https://upload.wikimedia.org/wikipedia/commons/6/69/NASA-HS201427a-HubbleUltraDeepField2014-20140603.jpg",content:`Pernahkah lo menatap langit malam yang cerah, melihat ribuan bintang, dan merasa betapa kecilnya kita? Lalu muncul satu pertanyaan sederhana yang menghantui para ilmuwan selama puluhan tahun: "Di mana mereka semua?"

Mari kita bicara matematika sebentar. Galaksi Bima Sakti kita sendiri memiliki sekitar 100 hingga 400 miliar bintang. Dan di alam semesta yang teramati, ada triliunan galaksi lain. Bahkan jika hanya sebagian kecil dari bintang-bintang itu memiliki planet yang mirip Bumi, seharusnya ada jutaan peradaban cerdas di luar sana.

Alam semesta berumur sekitar 13,8 miliar tahun. Bumi baru berumur 4,5 miliar tahun. Artinya, ada peradaban lain yang mungkin sudah ada miliaran tahun sebelum kita. Bayangkan teknologi mereka. Seharusnya, mereka sudah mengkolonisasi galaksi, atau setidaknya mengirim sinyal yang bisa kita tangkap. Tapi yang kita dapatkan hanyalah... kesunyian. Inilah yang disebut Paradoks Fermi.`,sources:[{label:"Wikipedia - Fermi Paradox",url:"https://en.wikipedia.org/wiki/Fermi_paradox"},{label:"Wait But Why - The Fermi Paradox",url:"https://waitbutwhy.com/2014/05/fermi-paradox.html"}],timestamp:17679168e5}],d1=[{id:"initial_track_1",spotifyId:"08A9yuCnJwBmItI1U9BZ7a",title:"Cincin",artist:"Hindia",addedAt:Date.now()}],M3=async()=>{try{const e=(await F5(o1,R3)).user,n=Bt(ze,ua,e.uid),r=await wh(n),s=e.email==="irfanrizkiaditri@gmail.com";let i=Df,o={name:e.displayName||"Pengguna Google",school:"Google Account",deviceId:e.uid,email:e.email,photoURL:e.photoURL,isAdmin:s,lastLogin:new Date().toISOString()};if(r.exists()){const a=r.data();i=a.credits??Df,o.isAdmin=a.isAdmin||s,await au(n,{lastLogin:new Date().toISOString(),photoURL:e.photoURL})}else await f0(n,{...o,credits:Df,createdAt:new Date().toISOString(),apiKeys:[]});return{user:o,credits:i,id:e.uid}}catch(t){throw console.error("Google Sign In Error",t),t}},D3=async()=>{try{await y5(o1)}catch(t){console.error("Logout error",t)}},L3=async t=>{if(t.startsWith("offline_"))return[];try{const e=await wh(Bt(ze,ua,t));return e.exists()?e.data().apiKeys||[]:[]}catch{return[]}},ew=async(t,e)=>{if(!t.startsWith("offline_"))try{await au(Bt(ze,ua,t),{apiKeys:e});for(const n of e)if(n.isShared){const r=wr(Dt(ze,Gl),Jo("key","==",n.key));(await _r(r)).empty&&await aa(Dt(ze,Gl),{key:n.key,provider:t,addedAt:Date.now(),isActive:!0})}}catch{}},j3=async(t,e,n)=>{if(!t.startsWith("offline_"))try{const r=n.filter(o=>o.key!==e);await au(Bt(ze,ua,t),{apiKeys:r});const s=wr(Dt(ze,Gl),Jo("key","==",e),Jo("provider","==",t));(await _r(s)).forEach(async o=>{await lu(Bt(ze,Gl,o.id))})}catch{}},F3=async()=>{try{const t=wr(Dt(ze,Gl),Jo("isActive","==",!0),ji("addedAt","desc"),Yo(10));return(await _r(t)).docs.map(n=>n.data().key).sort(()=>.5-Math.random()).slice(0,5)}catch{return[]}},tw=async(t,e)=>{if(!t.startsWith("offline_"))try{await aa(Dt(ze,ua,t,a1),e)}catch{}},V3=async t=>{if(t.startsWith("offline_"))return[];try{const e=wr(Dt(ze,ua,t,a1),ji("timestamp","asc"),Yo(50));return(await _r(e)).docs.map(r=>r.data())}catch{return[]}},U3=async()=>{try{const t=Dt(ze,fu);if((await p0(t)).data().count===0){const e=m0(ze);c1.forEach(n=>e.set(Bt(t),{...n})),await e.commit()}}catch{}},h1=async()=>{try{await U3();const t=wr(Dt(ze,fu),ji("timestamp","desc")),e=await _r(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return c1.map((e,n)=>({id:`local-${n}`,...e}))}},O3=async t=>{try{await aa(Dt(ze,fu),t)}catch(e){throw e}},B3=async(t,e)=>{try{await au(Bt(ze,fu,t),e)}catch(n){throw n}},z3=async t=>{try{await lu(Bt(ze,fu,t))}catch(e){throw e}},G3=async()=>{try{const t=Dt(ze,ca);if((await p0(t)).data().count===0){const e=m0(ze);Cd.forEach(n=>e.set(Bt(t),{...n})),await e.commit()}}catch{}},f1=async()=>{try{await G3();const t=wr(Dt(ze,ca),ji("timestamp","desc")),e=await _r(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return Cd.map((e,n)=>({id:`local-${n}`,...e}))}},H3=async t=>{try{if(t.startsWith("local-")){const r=parseInt(t.split("-")[1]);return Cd[r]?{id:t,...Cd[r]}:null}const e=Bt(ze,ca,t),n=await wh(e);return n.exists()?{id:n.id,...n.data()}:null}catch{return null}},$3=async t=>{try{await aa(Dt(ze,ca),t)}catch(e){throw e}},q3=async(t,e)=>{try{await au(Bt(ze,ca,t),e)}catch(n){throw n}},W3=async t=>{try{await lu(Bt(ze,ca,t))}catch(e){throw e}},K3=async()=>{try{const t=Dt(ze,Th);if((await p0(t)).data().count===0){const e=m0(ze);d1.forEach(n=>e.set(Bt(t),{...n})),await e.commit()}}catch{}},J3=async()=>{try{await K3();const t=wr(Dt(ze,Th),ji("addedAt","desc")),e=await _r(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return d1}},Y3=async t=>{try{await aa(Dt(ze,Th),t)}catch(e){throw e}},Q3=async t=>{try{await lu(Bt(ze,Th,t))}catch(e){throw e}};let No={};const nw=()=>{No={},console.log("Cache cleared.")},rw=t=>No[t]||null,C0=async t=>{if(No[t])return No[t];try{const e=await wh(Bt(ze,l1,t));if(e.exists()){const n=e.data().text;return No[t]=n,n}return null}catch{return null}},A0=async(t,e)=>{No[t]=e;try{await f0(Bt(ze,l1,t),{text:e,updatedAt:Date.now()},{merge:!0})}catch(n){throw n}},X3=async t=>{try{await aa(Dt(ze,Ih),{...t,timestamp:Date.now(),isRead:!1})}catch(e){throw e}},Z3=async t=>{try{await lu(Bt(ze,Ih,t))}catch(e){throw e}},ej=async()=>{try{const t=wr(Dt(ze,Ih),Jo("type","==","public"),Yo(100));return(await _r(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch{return[]}},tj=async()=>{try{const t=wr(Dt(ze,Ih),Jo("type","==","private"),Yo(100));return(await _r(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch{return[]}},nj=()=>new Date().toISOString().split("T")[0],rj=async()=>{let t="ID";try{const e=new AbortController,n=setTimeout(()=>e.abort(),2e3),r=await fetch("https://ipapi.co/country/",{signal:e.signal});if(clearTimeout(n),r.ok){const s=await r.text();s&&s.length===2&&(t=s.toUpperCase())}}catch{t=Math.random()>.3?"ID":Math.random()>.5?"US":"SG"}try{const e=nj(),n=Bt(ze,u1,e);await f0(n,{date:e,visitors:jx(1),[`geo.${t}`]:jx(1),timestamp:Date.now()},{merge:!0})}catch{}},sj=async()=>{try{const t=wr(Dt(ze,u1),ji("date","desc"),Yo(7)),e=await _r(t),n=[];let r=0,s=0;const i={};e.forEach(d=>{const m=d.data();n.unshift({date:m.date,visitors:m.visitors||0,errors:m.errors||0}),r+=m.visitors||0,s+=m.errors||0,m.geo&&Object.keys(m.geo).forEach(g=>{i[g]=(i[g]||0)+m.geo[g]})});const o=wr(Dt(ze,P3),ji("timestamp","desc"),Yo(10)),l=(await _r(o)).docs.map(d=>({id:d.id,...d.data()})),c=Object.entries(i).map(([d,m])=>({country:d,count:m})).sort((d,m)=>m.count-d.count);return{dailyStats:n,totalVisitors:r,totalErrors:s,logs:l,geoStats:c}}catch{return null}},ij=[{label:"Biru",hex:"#3b82f6"},{label:"Merah",hex:"#ef4444"},{label:"Hijau",hex:"#22c55e"},{label:"Ungu",hex:"#a855f7"},{label:"Emas",hex:"#eab308"},{label:"Hitam",hex:"#0f172a"},{label:"Slate",hex:"#64748b"}],oj=[{label:"",value:"to right",title:"Ke Kanan"},{label:"",value:"to bottom",title:"Ke Bawah"},{label:"",value:"135deg",title:"Diagonal Bawah"},{label:"",value:"to left",title:"Ke Kiri"},{label:"",value:"to top",title:"Ke Atas"},{label:"",value:"45deg",title:"Diagonal Atas"}],ut=({id:t,defaultText:e,isAdmin:n,className:r="",tag:s="p",multiline:i=!1})=>{const[o,a]=F.useState(()=>rw(t)||e),[l,c]=F.useState(!1),[d,m]=F.useState("solid"),[g,y]=F.useState("#3b82f6"),[w,x]=F.useState("#3b82f6"),[_,v]=F.useState("#a855f7"),[E,T]=F.useState("to right"),R=F.useRef(null);F.useEffect(()=>{let M=!0;return(async()=>{try{const P=await C0(t);M&&P&&P!==o&&a(P)}catch{}})(),()=>{M=!1}},[t]),F.useEffect(()=>{l&&R.current&&(R.current.style.height="auto",R.current.style.height=R.current.scrollHeight+"px")},[l,o]);const L=async()=>{c(!1);try{await A0(t,o)}catch{alert("Gagal menyimpan perubahan teks.")}},U=()=>{c(!1);const M=rw(t);M&&a(M)},S=()=>{const M=R.current;if(!M)return;const V=M.selectionStart,P=M.selectionEnd;if(V===P)return;const D=o.substring(V,P),k=o.substring(0,V),H=o.substring(P);let me="";d==="solid"?me=`<span style="color: ${g}">${D}</span>`:me=`<span style="background: ${`linear-gradient(${E}, ${w}, ${_})`}; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 800; -webkit-box-decoration-break: clone; box-decoration-break: clone;">${D}</span>`,a(k+me+H)},C=()=>{const M=R.current;if(!M)return;const V=M.selectionStart,P=M.selectionEnd;if(V===P)return;const D=o.substring(V,P),k=o.substring(0,V),H=o.substring(P),me=D.replace(/<\/?[^>]+(>|$)/g,"");a(k+me+H)},N=()=>{const M=w;x(_),v(M)};return l?u.jsx("div",{className:`relative z-[100] ${r}`,children:u.jsxs("div",{className:"bg-white border border-slate-200 shadow-2xl rounded-2xl overflow-hidden min-w-[300px] md:min-w-[500px] flex flex-col animate-fade-in-up",children:[u.jsxs("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-100 flex justify-between items-center",children:[u.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:["Editing: ",u.jsx("span",{className:"text-slate-800",children:t.split("_").pop()})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:U,className:"px-3 py-1.5 text-xs font-bold text-slate-500 hover:text-slate-800 rounded-lg transition-colors",children:"Batal"}),u.jsxs("button",{onClick:L,className:"px-4 py-1.5 text-xs font-bold bg-slate-900 text-white hover:bg-slate-800 rounded-lg flex items-center gap-1.5 shadow-md active:scale-95 transition-all",children:[u.jsx(is,{className:"w-3 h-3"})," Simpan"]})]})]}),u.jsxs("div",{className:"p-4 bg-white relative",children:[u.jsx("textarea",{ref:R,value:o,onChange:M=>a(M.target.value),className:"w-full bg-transparent border-none outline-none text-sm font-mono text-slate-600 resize-none min-h-[100px] leading-relaxed placeholder:text-slate-300",placeholder:"Tulis teks atau HTML disini...",spellCheck:!1}),u.jsx("div",{className:"absolute top-2 right-2 opacity-10 pointer-events-none",children:u.jsx("span",{className:"text-[10px] font-mono",children:"HTML MODE"})})]}),u.jsx("div",{className:"bg-slate-50/50 border-t border-slate-100 p-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-lg w-fit",children:[u.jsx("button",{onClick:()=>m("solid"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all ${d==="solid"?"bg-white text-slate-900 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:"Solid Color"}),u.jsxs("button",{onClick:()=>m("gradient"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all flex items-center gap-1 ${d==="gradient"?"bg-white text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[u.jsx(tN,{className:"w-3 h-3"})," Gradient"]})]}),u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[d==="solid"?u.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[u.jsx("div",{className:"p-1.5 bg-white border border-slate-200 rounded-lg shadow-sm shrink-0",children:u.jsx(eN,{className:"w-4 h-4 text-slate-400"})}),u.jsxs("div",{className:"flex gap-2",children:[ij.map(M=>u.jsx("button",{onClick:()=>y(M.hex),className:`w-6 h-6 rounded-full border-2 transition-transform hover:scale-110 shrink-0 ${g===M.hex?"border-slate-400 scale-110":"border-white shadow-sm"}`,style:{backgroundColor:M.hex},title:M.label},M.hex)),u.jsx("div",{className:"w-px h-6 bg-slate-300 mx-1"}),u.jsx("input",{type:"color",value:g,onChange:M=>y(M.target.value),className:"w-6 h-6 rounded-full cursor-pointer border border-slate-200 bg-white p-0 overflow-hidden shrink-0",title:"Custom Color"})]})]}):u.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Start"}),u.jsx("input",{type:"color",value:w,onChange:M=>x(M.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),u.jsx("button",{onClick:N,className:"text-slate-400 hover:text-slate-600 transition-colors p-1",title:"Tukar Warna",children:u.jsx(Zd,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"End"}),u.jsx("input",{type:"color",value:_,onChange:M=>v(M.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),u.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white shadow-md ml-auto",style:{background:`linear-gradient(${E}, ${w}, ${_})`},title:"Preview Gradient"})]}),u.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 no-scrollbar",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase shrink-0 mr-1",children:"Arah:"}),oj.map(M=>u.jsx("button",{onClick:()=>T(M.value),className:`w-7 h-7 flex items-center justify-center rounded-md border text-sm transition-all shrink-0 ${E===M.value?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,title:M.title,children:M.label},M.value))]})]}),u.jsxs("div",{className:"flex items-center gap-2 w-full justify-end mt-2 pt-2 border-t border-slate-100",children:[u.jsxs("button",{onClick:C,className:"text-[10px] font-bold bg-white border border-slate-200 hover:border-red-300 hover:text-red-500 text-slate-500 px-3 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex items-center gap-1.5",title:"Hapus format",children:[u.jsx(Y2,{className:"w-3.5 h-3.5"}),"Hapus Format"]}),u.jsxs("button",{onClick:S,className:"text-[10px] font-bold bg-blue-50 border border-blue-200 hover:bg-blue-100 text-blue-700 px-4 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex-1 justify-center flex",children:["Terapkan ",d==="solid"?"Warna":"Gradasi"]})]})]}),u.jsxs("p",{className:"text-[9px] text-slate-400 italic text-center",children:["*Blok teks di atas, atur ",d,", lalu klik Terapkan."]})]})})]})}):u.jsxs(s,{className:`relative group ${r} ${n?"cursor-pointer hover:opacity-80 transition-opacity decoration-blue-500/30":""}`,onClick:M=>{n&&(M.stopPropagation(),c(!0))},title:n?"Klik untuk mengedit warna & teks":void 0,children:[u.jsx("span",{dangerouslySetInnerHTML:{__html:o}}),n&&u.jsx("span",{className:"inline-flex ml-2 opacity-0 group-hover:opacity-100 transition-all duration-300 align-middle bg-slate-100 p-1 rounded-md border border-slate-200 shadow-sm absolute -top-4 -right-4 md:static",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-500",children:[u.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),u.jsx("path",{d:"m15 5 4 4"})]})})]})},aj=({isAdmin:t})=>{const e=Bi(),[n,r]=F.useState(!1),[s,i]=F.useState({left:0,width:0,opacity:0}),[o,a]=F.useState(!1),l=F.useRef({}),c=[{path:"/",label:"Home"},{path:"/projects",label:"Projects"},{path:"/blog",label:"Blog"},{path:"/gallery",label:"Gallery"},{path:"/music",label:"Music"},{path:"/messages",label:"Pesan"}];F.useEffect(()=>{const g=()=>{const w=e.pathname;let x=c.find(v=>v.path===w);x||(x=c.find(v=>v.path!=="/"&&w.startsWith(v.path))),x||(x=c[0]);const _=l.current[x.path];_&&i({left:_.offsetLeft,width:_.offsetWidth,opacity:1})},y=setTimeout(g,50);return window.addEventListener("resize",g),()=>{clearTimeout(y),window.removeEventListener("resize",g)}},[e.pathname]);const d=()=>{a(!0),setTimeout(()=>{r(!1),a(!1)},700)},m=g=>g==="/"?e.pathname==="/":e.pathname.startsWith(g);return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:`
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          @keyframes curtainDown {
             from { transform: translateY(-100%); border-radius: 0 0 100px 100px; }
             to { transform: translateY(0); border-radius: 0; }
          }
          @keyframes curtainUp {
             from { transform: translateY(0); border-radius: 0; }
             to { transform: translateY(-100%); border-radius: 0 0 100px 100px; }
          }
          .animate-blob { animation: blob 10s infinite; }
          .animation-delay-2000 { animation-delay: 2s; }
          .animation-delay-4000 { animation-delay: 4s; }
          .animate-curtain-down { animation: curtainDown 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
          .animate-curtain-up { animation: curtainUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
        `}),u.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-100 transition-all",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center",children:[u.jsxs(rl,{to:"/",className:"flex items-center gap-3 cursor-pointer group mr-8",children:[u.jsx(Oo,{className:"w-8 h-8 transition-all duration-500 ease-out group-hover:scale-110 group-hover:drop-shadow-[0_0_15px_rgba(59,130,246,0.5)]",variant:"dark"}),u.jsx("div",{className:"flex flex-col justify-center",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ut,{id:"navbar_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:t,tag:"span",className:"text-sm font-black tracking-tighter uppercase text-slate-900 leading-none"}),t&&u.jsx("span",{className:"bg-slate-900 text-white text-[9px] font-bold px-1.5 py-0.5 rounded leading-none shadow-sm",children:"ADMIN"})]})})]}),u.jsxs("div",{className:"hidden md:flex items-center relative ml-auto bg-slate-50/50 rounded-full p-1 border border-slate-200/60",children:[u.jsx("div",{className:"absolute top-1 bottom-1 bg-slate-900 rounded-full transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1)] shadow-md z-0 pointer-events-none",style:{left:s.left,width:s.width,opacity:s.opacity}}),c.map(g=>u.jsx(rl,{to:g.path,ref:y=>{l.current[g.path]=y},className:`relative z-10 px-6 py-2 rounded-full text-xs font-bold uppercase tracking-wide transition-colors duration-300 ${m(g.path)?"text-white":"text-slate-500 hover:text-slate-900"}`,children:g.label},g.path))]}),u.jsx("button",{className:"md:hidden p-2 text-slate-600 ml-auto",onClick:()=>r(!n),children:u.jsx(gT,{className:"w-6 h-6"})})]})}),(n||o)&&u.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden flex flex-col items-center justify-center p-6 overflow-hidden bg-white ${o?"animate-curtain-up":"animate-curtain-down"}`,children:[u.jsxs("div",{className:"absolute inset-0 z-0 w-full h-full pointer-events-none",children:[u.jsx("div",{className:"absolute top-0 -left-10 w-96 h-96 bg-slate-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob"}),u.jsx("div",{className:"absolute top-1/4 -right-20 w-80 h-80 bg-gray-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"}),u.jsx("div",{className:"absolute -bottom-20 left-1/3 w-96 h-96 bg-zinc-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-4000"}),u.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-[10px]"})]}),u.jsxs("div",{className:`relative z-10 w-full flex flex-col items-center transition-all duration-500 ${o?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:[u.jsx("button",{className:"absolute -top-32 right-0 p-3 rounded-full bg-white text-slate-400 hover:text-slate-900 transition-colors shadow-sm border border-slate-100",onClick:()=>d(),children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})}),u.jsx("div",{className:"absolute -top-32 left-0 flex items-center gap-3",children:u.jsx(Oo,{className:"w-12 h-12",variant:"dark"})}),u.jsx("div",{className:"flex flex-col gap-6 w-full max-w-xs mt-10",children:c.map((g,y)=>u.jsx(rl,{to:g.path,onClick:()=>d(),className:`
                           text-3xl font-black uppercase tracking-tight text-center py-2 relative group
                           transition-all duration-300
                           ${m(g.path)?"text-slate-900 scale-110":"text-slate-300 hover:text-slate-500 hover:scale-105"}
                        `,style:{animationDelay:`${y*50}ms`},children:g.label},g.path))}),u.jsxs("div",{className:"absolute -bottom-40 flex flex-col items-center gap-2",children:[u.jsx("div",{className:"w-1 h-8 bg-slate-200 rounded-full"}),u.jsx("div",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-[0.3em]",children:"Fanra Studio"})]})]})]})]})},Ht=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null;let Lf=null;const p1=t=>{if(Lf)return Lf;const e=t.sampleRate*2,n=t.createBuffer(1,e,t.sampleRate),r=n.getChannelData(0);for(let s=0;s<e;s++)r[s]=Math.random()*2-1;return Lf=n,n},lj=()=>{if(!Ht)return;Ht.state==="suspended"&&Ht.resume();const t=p1(Ht),e=Ht.createBufferSource();e.buffer=t;const n=Ht.createBiquadFilter();n.type="lowpass",n.Q.value=1;const r=Ht.createGain();e.connect(n),n.connect(r),r.connect(Ht.destination);const s=Ht.currentTime;n.frequency.setValueAtTime(100,s),n.frequency.exponentialRampToValueAtTime(4e3,s+.15),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.3,s+.05),r.gain.exponentialRampToValueAtTime(.001,s+.3),e.start(s),e.stop(s+.3)},uj=()=>{if(!Ht)return;Ht.state==="suspended"&&Ht.resume();const t=p1(Ht),e=Ht.createBufferSource();e.buffer=t;const n=Ht.createBiquadFilter();n.type="lowpass",n.Q.value=.5;const r=Ht.createGain();e.connect(n),n.connect(r),r.connect(Ht.destination);const s=Ht.currentTime;n.frequency.setValueAtTime(200,s),n.frequency.exponentialRampToValueAtTime(1200,s+.8),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.4,s+.2),r.gain.exponentialRampToValueAtTime(.001,s+1.2),e.start(s),e.stop(s+1.2)};class cj{constructor(e,n,r){this.x=e,this.y=n;const s=Math.random()*Math.PI*2,i=Math.random()*10+2;this.vx=Math.cos(s)*i,this.vy=Math.sin(s)*i,this.size=3,this.friction=.92,this.opacity=1,this.ease=.2-r*.015,this.ease<.05&&(this.ease=.05)}update(e,n){this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction,this.x+=(e-this.x)*this.ease,this.y+=(n-this.y)*this.ease;const r=e-this.x,s=n-this.y;return Math.sqrt(r*r+s*s)<10&&(this.opacity-=.05),this.opacity>0}draw(e){e.save(),e.globalAlpha=this.opacity,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fillStyle="#2563eb",e.fill(),e.restore()}}const dj=({onComplete:t,onTriggerAdmin:e})=>{const[n,r]=F.useState(0),[s,i]=F.useState(!1),[o,a]=F.useState(!1),[l,c]=F.useState(!1),d=F.useRef(null),m=F.useRef(null),g=F.useRef([]),y=F.useRef({x:window.innerWidth/2,y:window.innerHeight/2});F.useEffect(()=>(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",window.scrollTo(0,0),()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[]),F.useEffect(()=>{const E=m.current;if(!E)return;const T=E.getContext("2d");if(!T)return;const R=()=>{E.width=window.innerWidth,E.height=window.innerHeight};window.addEventListener("resize",R),R();const L=C=>{y.current={x:C.clientX,y:C.clientY}};window.addEventListener("mousemove",L);let U;const S=()=>{T.clearRect(0,0,E.width,E.height),g.current.length>0?(g.current=g.current.filter(C=>C.update(y.current.x,y.current.y)?(C.draw(T),!0):!1),g.current.length===0&&o&&a(!1)):o&&a(!1),U=requestAnimationFrame(S)};return S(),()=>{window.removeEventListener("resize",R),window.removeEventListener("mousemove",L),cancelAnimationFrame(U)}},[o]);const w=E=>{if(o||!d.current)return;const T=d.current.getBoundingClientRect(),R=T.left+T.width/2,L=T.top+T.height/2;a(!0);let U=0;const S=10;g.current=[];const C=setInterval(()=>{if(U>=S){clearInterval(C);return}g.current.push(new cj(R,L,U)),U++},50)},x=()=>{s||(lj(),i(!0),r(1),setTimeout(()=>i(!1),1e3))},_=()=>{s||(uj(),i(!0),r(2),setTimeout(()=>{window.scrollTo(0,0),t()},1e3))},v=()=>{l||(c(!0),setTimeout(()=>{e&&e(),setTimeout(()=>c(!1),2e3)},500))};return u.jsxs("div",{className:`fixed inset-0 z-[999] bg-white transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1) overflow-hidden h-[100dvh] w-screen ${n===2?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none"}`,onTouchMove:E=>E.preventDefault(),children:[u.jsx("canvas",{ref:m,className:"absolute inset-0 pointer-events-none z-50"}),u.jsxs("div",{className:"flex flex-col w-full h-[200vh] transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1)",style:{transform:n>=1?"translateY(-50%)":"translateY(0)"},children:[u.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center relative bg-white px-6",style:{backgroundImage:"radial-gradient(#e2e8f0 1px, transparent 1px)",backgroundSize:"32px 32px"},children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-[0.03] pointer-events-none overflow-hidden",children:u.jsx(Oo,{className:"w-[150%] h-[150%] -translate-x-1/4 -translate-y-1/4",variant:"dark"})}),u.jsxs("div",{className:"relative z-10 text-center animate-fade-in-up flex flex-col items-center",children:[u.jsx("div",{className:"mb-8 flex justify-center transform hover:scale-105 transition-transform duration-500",children:u.jsx(Oo,{className:"w-32 h-32 md:w-40 md:h-40 shadow-2xl shadow-slate-200/50 rounded-[2rem] bg-white",variant:"dark"})}),u.jsxs("h1",{className:"text-4xl md:text-7xl font-black text-slate-900 mb-4 tracking-tighter leading-tight",children:["IRFAN RIZKI ADITRI",u.jsx("span",{ref:d,onDoubleClick:w,className:`text-blue-600 inline-block cursor-pointer transition-opacity duration-100 select-none ${o?"opacity-0":"opacity-100"} hover:opacity-80`,title:"Double click me!",children:"."})]}),u.jsx("p",{className:"text-slate-400 text-lg md:text-2xl font-medium tracking-widest uppercase",children:"Portfolio & Playground"}),u.jsxs("button",{onClick:x,className:"group flex flex-col items-center gap-3 transition-all outline-none cursor-pointer mt-20 hover:-translate-y-1 duration-300",children:[u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-900 transition-colors",children:"Next"}),u.jsx("div",{className:"w-12 h-12 rounded-full border border-slate-200 bg-white hover:bg-slate-50 flex items-center justify-center shadow-lg transition-all duration-300 group-hover:border-slate-300 group-hover:shadow-xl",children:u.jsx(fr,{className:"w-5 h-5 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})})]})]})]}),u.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center bg-slate-50 px-6 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),u.jsx("div",{className:`absolute bottom-8 right-8 z-50 transition-all duration-700 ease-out cursor-default select-none ${l?"scale-[10] opacity-0 rotate-180 text-blue-600":"scale-100 opacity-5 hover:opacity-30 text-slate-900"}`,onDoubleClick:v,title:".",children:u.jsx(Rl,{className:"w-6 h-6"})}),u.jsxs("div",{className:"relative z-10 max-w-4xl w-full grid md:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{className:"text-center md:text-left space-y-6 flex flex-col items-center md:items-start",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-[10px] font-bold uppercase tracking-wider",children:[u.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),"Student & Developer"]}),u.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-slate-900 tracking-tight leading-none",children:["Welcome to ",u.jsx("br",{}),u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-slate-500",children:"My Perspective."})]}),u.jsx("p",{className:"text-slate-500 text-lg leading-relaxed max-w-md",children:"Jelajahi eksperimen kode, cerita tentang alam semesta, dan tools AI buatan mahasiswa gabut."}),u.jsxs("button",{onClick:_,className:"inline-flex items-center gap-3 bg-slate-900 text-white px-8 py-4 rounded-xl font-bold shadow-xl shadow-slate-900/20 hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 group",children:["Explore Studio",u.jsx(Bo,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),u.jsxs("div",{className:"relative hidden md:block",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-500 to-purple-500 rounded-[2.5rem] rotate-3 opacity-20 blur-2xl transform translate-y-4"}),u.jsxs("div",{className:"relative bg-white p-8 rounded-[2.5rem] shadow-2xl border border-slate-100 rotate-[-2deg] hover:rotate-0 transition-transform duration-500",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-slate-100 pb-6",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center p-2.5",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra",className:"w-full h-full object-contain"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-slate-900",children:"Fanra"}),u.jsx("p",{className:"text-xs text-slate-500",children:"Intelligent Assistant"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-slate-50 p-4 rounded-xl rounded-tl-none border border-slate-100 text-sm text-slate-600",children:"Halo! Ada yang bisa gue bantu hari ini? Mau edit foto atau ngobrol soal fisika?"}),u.jsx("div",{className:"bg-blue-600 p-4 rounded-xl rounded-tr-none text-sm text-white ml-auto max-w-[80%]",children:"Gue mau coba fitur AI Studio lo dong, Fanra!"})]})]})]})]})]})]})]})};class hj{constructor(e,n,r){this.x=e,this.y=n,this.baseX=e,this.baseY=n,this.size=1.5,this.density=Math.random()*20+5,this.color=r}draw(e,n){const r=this.y/n;let s=1-Math.pow(r,.8);s=Math.max(0,s),e.fillStyle=`rgba(203, 213, 225, ${s})`,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.closePath(),e.fill()}update(e,n){const r=e.x-this.x,s=e.y-this.y,i=Math.sqrt(r*r+s*s),o=r/i,a=s/i,l=e.radius,c=(l-i)/l,d=o*c*this.density,m=a*c*this.density;if(i<e.radius)n==="repel"?(this.x-=d,this.y-=m):(this.x+=d,this.y+=m);else{if(this.x!==this.baseX){const g=this.x-this.baseX;this.x-=g/15}if(this.y!==this.baseY){const g=this.y-this.baseY;this.y-=g/15}}}}const fj=({onTriggerAdmin:t,isAdmin:e=!1})=>{const n=fs(),[r]=F.useState(()=>Math.random()>.5?"repel":"attract"),s=F.useRef(null),i=F.useRef([]),o=F.useRef({x:-1e3,y:-1e3,radius:120}),a=F.useRef(null),[l,c]=F.useState([]),[d,m]=F.useState([]),[g,y]=F.useState(!0);return F.useEffect(()=>{(async()=>{try{const x=await f1();c(x.slice(0,2));const _=await h1();if(_.length>0){const v=Array(60).fill(_).flat();m(v)}else m([])}catch(x){console.error("Home data fetch error",x)}finally{y(!1)}})()},[]),F.useEffect(()=>{const w=s.current;if(!w)return;const x=w.getContext("2d");if(!x)return;const _=()=>{w.width=window.innerWidth,w.height=window.innerHeight,v()},v=()=>{i.current=[];const U=30,S=Math.ceil(w.height/U),C=Math.ceil(w.width/U);for(let N=0;N<S;N++)for(let M=0;M<C;M++){const V=M*U+U/2,P=N*U+U/2;i.current.push(new hj(V,P,"#cbd5e1"))}};_(),window.addEventListener("resize",_);const E=U=>{const S=w.getBoundingClientRect();o.current.x=U.clientX-S.left,o.current.y=U.clientY-S.top},T=()=>{o.current.x=-1e3,o.current.y=-1e3};window.addEventListener("mousemove",E),window.addEventListener("mouseout",T);let R;const L=()=>{x.clearRect(0,0,w.width,w.height),i.current.forEach(U=>{U.draw(x,w.height),U.update(o.current,r)}),R=requestAnimationFrame(L)};return L(),()=>{window.removeEventListener("resize",_),window.removeEventListener("mousemove",E),window.removeEventListener("mouseout",T),cancelAnimationFrame(R)}},[r]),F.useEffect(()=>{a.current&&d.length>0&&setTimeout(()=>{if(a.current){const w=a.current;w.scrollLeft=(w.scrollWidth-w.clientWidth)/2}},100)},[d]),u.jsxs("div",{className:"relative min-h-[90vh] flex flex-col overflow-hidden bg-gradient-to-b from-slate-50 via-white to-white",children:[u.jsx("style",{children:`
            .no-scrollbar::-webkit-scrollbar { display: none; }
            .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        `}),u.jsx("canvas",{ref:s,className:"fixed inset-0 z-0 pointer-events-auto opacity-60"}),u.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 md:px-12 py-12 flex-grow w-full space-y-24",children:[u.jsxs("div",{className:"mt-8",children:[u.jsx("h1",{className:"text-6xl md:text-8xl font-black text-slate-900 mb-8 leading-tight tracking-tighter max-w-5xl flex items-center flex-wrap gap-2",children:u.jsx(ut,{id:"home_hero_title",defaultText:"Fanra is here.",isAdmin:e,tag:"span",className:"inline-block"})}),u.jsx("div",{className:"max-w-5xl mt-16 relative",children:u.jsxs("div",{className:"grid md:grid-cols-5 gap-12 items-start",children:[u.jsxs("div",{className:"md:col-span-3 space-y-4",children:[u.jsx(ut,{id:"home_about_title",defaultText:"Mahasiswa Fisika. Cuma Hobi Ngoding.",isAdmin:e,tag:"h2",className:"text-2xl font-bold text-slate-900 leading-tight"}),u.jsx(ut,{id:"home_about_desc",defaultText:"Irfan Rizki Aditri (Fanra) merupakan mahasiswa Fisika angkatan 2025 di Institut Teknologi Sumatera (ITERA). Platform ini dikembangkan sebagai sarana eksplorasi teknologi dan pengembangan diri di tengah kesibukan akademis.",isAdmin:e,tag:"p",multiline:!0,className:"text-slate-600 text-lg leading-relaxed font-medium"})]}),u.jsxs("div",{className:"md:col-span-2 flex flex-col gap-4 pt-2",children:[u.jsxs("div",{className:"flex items-center gap-4 group",children:[u.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14614/14614573.png",alt:"Physics",className:"w-6 h-6 object-contain"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Physics Major"}),u.jsx("span",{className:"text-sm text-slate-500 block",children:"Institut Teknologi Sumatera '25"})]})]}),u.jsxs("div",{className:"flex items-center gap-4 group",children:[u.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/2120/2120483.png",alt:"AI & Dev",className:"w-6 h-6 object-contain"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Interest"}),u.jsx("span",{className:"text-sm text-slate-500 block",children:"Learning AI & Web Dev"})]})]}),u.jsxs("div",{className:"flex items-center gap-4 group",children:[u.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3037/3037821.png",alt:"Location",className:"w-6 h-6 object-contain"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Based In"}),u.jsx("span",{className:"text-sm text-slate-500 block",children:"Sumatera, Indonesia"})]})]})]})]})})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[u.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-8 md:p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer",onClick:()=>n("/projects"),children:[u.jsxs("div",{className:"flex items-start justify-between mb-8",children:[u.jsx("div",{className:"w-14 h-14 bg-slate-50 border border-slate-200 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3310/3310054.png",alt:"Projects",className:"w-8 h-8 object-contain"})}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-slate-100 px-3 py-1 rounded-full",children:"Project"})]}),u.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-3",children:"Projects & Tools"}),u.jsx("p",{className:"text-slate-500 mb-6 text-base leading-relaxed",children:"Eksperimen koding, mulai dari Fanra AI Studio hingga tools Instagram Panorama."}),u.jsxs("div",{className:"flex items-center text-sm font-bold text-blue-600 group-hover:translate-x-2 transition-transform",children:["Lihat Project ",u.jsx(Bo,{className:"w-5 h-5 ml-2"})]})]}),u.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-8 md:p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer flex flex-col",onClick:()=>n("/blog"),children:[u.jsxs("div",{className:"flex items-start justify-between mb-6",children:[u.jsx("div",{className:"w-14 h-14 bg-slate-50 border border-slate-200 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1170/1170221.png",alt:"Blog",className:"w-8 h-8 object-contain"})}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-slate-100 px-3 py-1 rounded-full",children:"Blog"})]}),u.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Recent Stories"}),u.jsx("div",{className:"space-y-4 flex-1",children:!g&&l.length>0?l.map(w=>u.jsxs("div",{className:"border-l-2 border-slate-200 pl-4 hover:border-slate-900 transition-colors",children:[u.jsx("h4",{className:"font-bold text-slate-800 text-sm line-clamp-1",children:w.title}),u.jsx("p",{className:"text-xs text-slate-400 mt-1 line-clamp-1",children:w.subtitle})]},w.id)):u.jsx("p",{className:"text-slate-400 text-sm italic",children:"Belum ada tulisan terbaru."})}),u.jsxs("div",{className:"mt-6 flex items-center text-sm font-bold text-slate-600 group-hover:text-slate-900 group-hover:translate-x-2 transition-transform",children:["Baca Blog ",u.jsx(Bo,{className:"w-5 h-5 ml-2"})]})]})]}),u.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-[2.5rem] p-8 md:p-10 relative overflow-hidden group",children:[u.jsx("div",{className:"flex justify-between items-end mb-8 relative z-10 px-2",children:u.jsxs("div",{className:"cursor-pointer",onClick:()=>n("/gallery"),children:[u.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-1",children:"Visual Diaries"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Momen acak yang tertangkap kamera."})]})}),u.jsx("div",{ref:a,className:"flex gap-3 overflow-x-auto no-scrollbar pb-2 items-center cursor-grab active:cursor-grabbing",children:!g&&d.length>0?d.map((w,x)=>u.jsxs("div",{className:"w-32 h-32 md:w-44 md:h-44 flex-shrink-0 rounded-xl overflow-hidden bg-slate-200 shadow-sm border border-slate-100 relative group/item cursor-pointer",onClick:()=>n("/gallery"),children:[u.jsx("img",{src:w.src,alt:"Gallery",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover/item:opacity-100 transition-opacity"})]},`${w.id}-${x}`)):u.jsx("div",{className:"w-full h-32 flex items-center justify-center text-slate-400 text-sm italic border-2 border-dashed border-slate-200 rounded-2xl",children:"Galeri masih kosong."})})]}),u.jsxs("div",{className:"relative rounded-[3rem] overflow-hidden bg-white border border-slate-200 p-12 md:p-16 text-center shadow-xl",children:[u.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto",children:[u.jsx(ut,{id:"home_cta_title",defaultText:"Punya ide atau sekadar mau menyapa?",isAdmin:e,tag:"h2",className:"text-3xl md:text-5xl font-black mb-6 tracking-tight text-slate-900"}),u.jsx(ut,{id:"home_cta_desc",defaultText:"Tinggalkan pesan di Public Wall. Bisa anonim, bisa rahasia, bebas.",isAdmin:e,tag:"p",className:"text-slate-500 mb-10 text-lg max-w-lg mx-auto"}),u.jsxs("button",{onClick:()=>n("/messages"),className:"bg-slate-900 text-white px-10 py-4 rounded-full font-bold hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 text-lg shadow-lg shadow-slate-900/20 flex items-center gap-3 mx-auto",children:[u.jsx(wT,{className:"w-5 h-5"}),"Tulis Pesan"]})]}),u.jsx("div",{className:"absolute -top-24 -left-24 w-64 h-64 bg-blue-50 rounded-full blur-3xl opacity-50 pointer-events-none"}),u.jsx("div",{className:"absolute -bottom-24 -right-24 w-64 h-64 bg-purple-50 rounded-full blur-3xl opacity-50 pointer-events-none"})]})]})]})},He=t=>{if(typeof window<"u"){const e=new CustomEvent("fanra-toast",{detail:{message:t}});window.dispatchEvent(e)}},sw=[{id:"fanra-ai",titleId:"projects_p1_title",descId:"projects_p1_desc",statusId:"status_project_p1",defaultTitle:"Fanra AI Studio",defaultDesc:"Asisten AI hybrid yang bisa ngobrol santai, edit foto (Hapus BG, Upscale 4K), dan cari info akurat.",fullDesc:"Fanra AI Studio adalah platform kecerdasan buatan terintegrasi yang dirancang untuk membantu produktivitas dan kreativitas. Menggunakan model Google Gemini Pro vision terbaru, aplikasi ini mampu memahami konteks visual, melakukan pengeditan gambar tingkat lanjut seperti penghapusan latar belakang yang presisi, peningkatan resolusi (Upscale 4K), hingga pencarian informasi real-time melalui integrasi Wikipedia dan Google Search.",iconUrl:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",theme:"blue",appPath:"/studio",buttonText:"Open Studio",features:["Smart Chatbot (Hybrid Search)","Background Remover","HD Upscale (4K)","Creative Remix","Wikipedia Integration"]},{id:"ig-panorama",titleId:"projects_p2_title",descId:"projects_p2_desc",statusId:"status_project_p2",defaultTitle:"IG Seamless Studio",defaultDesc:"Bikin konten carousel Instagram yang nyambung (Panorama) dengan mudah. Auto-slice saat download.",fullDesc:"IG Seamless Studio adalah tool khusus untuk konten kreator yang ingin membuat postingan carousel Instagram yang estetik dan menyambung (seamless). Tidak perlu lagi memotong gambar secara manual di Photoshop. Cukup upload gambar, atur layout di kanvas tanpa batas, tambahkan elemen dekoratif, dan sistem akan otomatis memotongnya menjadi slide-slide presisi siap posting.",iconUrl:"https://cdn-icons-png.flaticon.com/128/4327/4327816.png",theme:"pink",appPath:"/panorama",buttonText:"Open App",features:["Canvas Drag & Drop","Auto Slicing","Shape & Masking Tools","Layer Management","Instant Zip Download"]},{id:"fanragem",titleId:"projects_p3_title",descId:"projects_p3_desc",statusId:"status_project_p3",defaultTitle:"Fanragem",defaultDesc:"Game simulasi kehidupan mini. Bangun ekosistem digital, atur sumber daya, dan lihat perkembangannya.",fullDesc:"Fanragem adalah sebuah eksperimen simulasi kehidupan berbasis web. Di sini, Anda berperan sebagai pengatur ekosistem digital. Kelola sumber daya, populasi, dan lingkungan untuk melihat bagaimana keputusan kecil berdampak pada kelangsungan hidup dunia buatan Anda. Project ini masih dalam tahap pengembangan aktif.",iconUrl:"https://cdn-icons-png.flaticon.com/128/14047/14047858.png",theme:"purple",appPath:"",buttonText:"Play Demo",features:["Resource Management","Population Simulation","Dynamic Events","Pixel Art Style"]}],m1=({id:t,isAdmin:e,onStatusChange:n})=>{const[r,s]=F.useState("active"),[i,o]=F.useState(!0);F.useEffect(()=>{(async()=>{const m=await C0(t);s(m==="maintenance"||m==="development"?m:"active"),o(!1),n(m||"active")})()},[t]);const a=async d=>{if(d.stopPropagation(),!e)return;let m="active";r==="active"?m="maintenance":r==="maintenance"?m="development":m="active",s(m),n(m),await A0(t,m)};if(i)return u.jsx("div",{className:"w-16 h-5 bg-slate-100 rounded-full animate-pulse"});const c={active:{color:"bg-green-100 text-green-700 border-green-200",icon:u.jsx(is,{className:"w-3 h-3"}),label:"Active"},maintenance:{color:"bg-orange-100 text-orange-700 border-orange-200",icon:u.jsx(Jl,{className:"w-3 h-3"}),label:"Maintenance"},development:{color:"bg-blue-100 text-blue-700 border-blue-200",icon:u.jsx(vT,{className:"w-3 h-3"}),label:"Building"}}[r];return u.jsxs("button",{onClick:a,disabled:!e,className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border transition-all ${c.color} ${e?"cursor-pointer hover:brightness-95 active:scale-95":"cursor-default"}`,title:e?"Klik untuk ubah status":"",children:[c.icon,c.label]})},pj=({project:t,isAdmin:e,onClick:n})=>{const[r,s]=F.useState("active"),i=c=>{s(c)},a={blue:{bg:"bg-blue-50 border border-blue-100",text:"text-blue-600",hoverBorder:"group-hover:border-blue-300",glow:"bg-blue-500/10"},pink:{bg:"bg-pink-50 border border-pink-100",text:"text-pink-600",hoverBorder:"group-hover:border-pink-300",glow:"bg-pink-500/10"},purple:{bg:"bg-purple-50 border border-purple-100",text:"text-purple-600",hoverBorder:"group-hover:border-purple-300",glow:"bg-purple-500/10"}}[t.theme],l=r!=="active"&&!e;return u.jsxs("div",{onClick:n,className:`
                group relative bg-white rounded-[2rem] p-8 border transition-all duration-300 flex flex-col justify-between overflow-hidden h-full min-h-[320px]
                ${l?"cursor-default opacity-80 grayscale-[0.5]":"cursor-pointer hover:shadow-xl hover:-translate-y-1"}
                ${l?"border-slate-100":`border-slate-200 ${a.hoverBorder}`}
            `,children:[u.jsx("div",{className:`absolute top-0 right-0 w-48 h-48 rounded-full blur-3xl transition-opacity duration-500 opacity-0 group-hover:opacity-100 pointer-events-none translate-x-10 -translate-y-10 ${a.glow}`}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-start mb-6",children:[u.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-transform duration-500 group-hover:scale-110 ${a.bg} ${a.text}`,children:u.jsx("img",{src:t.iconUrl,alt:t.defaultTitle,className:"w-8 h-8 object-contain"})}),u.jsx(m1,{id:t.statusId,isAdmin:e,onStatusChange:i})]}),u.jsxs("div",{className:"mb-8",children:[u.jsx(ut,{id:t.titleId,defaultText:t.defaultTitle,isAdmin:e,tag:"h3",className:`text-2xl font-black text-slate-900 mb-3 tracking-tight ${!l&&`group-hover:${a.text} transition-colors`}`}),u.jsx(ut,{id:t.descId,defaultText:t.defaultDesc,isAdmin:e,tag:"p",multiline:!0,className:"text-slate-500 text-sm leading-relaxed font-medium line-clamp-3"})]})]}),u.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[u.jsx("span",{className:`text-xs font-bold uppercase tracking-wider transition-colors ${l?"text-slate-400":`${a.text}`}`,children:"See Details"}),u.jsx("div",{className:`p-2 rounded-full transition-all ${l?"bg-slate-100 text-slate-300":`bg-slate-50 ${a.text} group-hover:bg-white group-hover:shadow-md`}`,children:u.jsx(Bo,{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform"})})]})]})},mj=({project:t,isAdmin:e})=>{const n=fs(),[r,s]=F.useState("active"),i=d=>{s(d)},o=r!=="active"&&!e,l={blue:{bg:"bg-blue-50",text:"text-blue-600",btn:"bg-blue-600 hover:bg-blue-700",gradient:"from-blue-500 to-cyan-500"},pink:{bg:"bg-pink-50",text:"text-pink-600",btn:"bg-pink-600 hover:bg-pink-700",gradient:"from-pink-500 to-rose-500"},purple:{bg:"bg-purple-50",text:"text-purple-600",btn:"bg-purple-600 hover:bg-purple-700",gradient:"from-purple-500 to-indigo-500"}}[t.theme],c=()=>{if(o){He(r==="maintenance"?"Aplikasi sedang dalam perbaikan (Maintenance).":"Aplikasi masih dalam tahap pengembangan.");return}t.appPath?n(t.appPath):He("Link aplikasi belum tersedia.")};return u.jsx("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:u.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-12",children:[u.jsxs("button",{onClick:()=>n("/projects"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:u.jsx(ss,{className:"w-4 h-4"})}),"Kembali ke Daftar"]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${l.bg} ${l.text}`,children:u.jsx("img",{src:t.iconUrl,alt:"Icon",className:"w-8 h-8 object-contain"})}),u.jsx(m1,{id:t.statusId,isAdmin:e,onStatusChange:i})]}),u.jsx(ut,{id:t.titleId,defaultText:t.defaultTitle,isAdmin:e,tag:"h1",className:"text-4xl md:text-5xl font-black text-slate-900 mb-6 tracking-tight"}),u.jsx("p",{className:"text-lg text-slate-600 leading-relaxed mb-8",children:t.fullDesc}),u.jsxs("div",{className:"space-y-3 mb-10",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Fitur Utama"}),t.features.map((d,m)=>u.jsxs("div",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[u.jsx("div",{className:`w-5 h-5 rounded-full ${l.bg} ${l.text} flex items-center justify-center shrink-0`,children:u.jsx(is,{className:"w-3 h-3"})}),d]},m))]}),u.jsxs("button",{onClick:c,disabled:o,className:`
                                px-8 py-4 rounded-2xl font-bold text-white text-lg shadow-xl shadow-slate-200/50 flex items-center gap-3 transition-all active:scale-95
                                ${o?"bg-slate-300 cursor-not-allowed":`${l.btn} hover:-translate-y-1`}
                            `,children:[o?"Terkunci":t.buttonText,!o&&u.jsx(Bo,{className:"w-5 h-5"})]})]}),u.jsxs("div",{className:`aspect-square rounded-[3rem] bg-gradient-to-br ${l.gradient} opacity-90 relative overflow-hidden shadow-2xl flex items-center justify-center`,children:[u.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-white/20 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-white/10 rounded-full blur-2xl"}),u.jsxs("div",{className:"relative z-10 bg-white/10 backdrop-blur-md border border-white/20 p-8 rounded-3xl shadow-lg max-w-xs text-white/90 text-center",children:[u.jsx("img",{src:t.iconUrl,className:"w-20 h-20 mx-auto mb-4 opacity-90 drop-shadow-md"}),u.jsx("p",{className:"font-bold text-lg",children:"Preview Mode"}),u.jsx("p",{className:"text-xs opacity-70 mt-2",children:"Gambaran visual aplikasi saat dijalankan."})]})]})]})]})})},iw=({isAdmin:t})=>{const e=fs(),{projectId:n}=lT(),r=sw.find(s=>s.id===n);return n&&r?u.jsx(mj,{project:r,isAdmin:t}):u.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 animate-fade-in",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-12 gap-4",children:[u.jsxs("div",{children:[u.jsx(ut,{id:"projects_title",defaultText:"Selected Projects",isAdmin:t,tag:"h1",className:"text-4xl md:text-5xl font-black text-slate-900 mb-3 tracking-tighter"}),u.jsx(ut,{id:"projects_subtitle",defaultText:"Kumpulan tools dan simulasi interaktif.",isAdmin:t,tag:"p",className:"text-slate-500 text-lg max-w-2xl"})]}),t&&u.jsxs("div",{className:"bg-slate-900 text-white px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 shadow-lg",children:[u.jsx(cd,{className:"w-4 h-4"}),"Admin Mode: Klik status badge untuk ubah."]})]}),u.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl p-5 mb-12 flex gap-4 items-start shadow-sm",children:[u.jsx("div",{className:"p-2 bg-amber-100 rounded-xl text-amber-600 shrink-0",children:u.jsx(Jl,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx(ut,{id:"projects_disclaimer_title",defaultText:"Info Pengunjung",isAdmin:t,tag:"h4",className:"font-bold text-amber-900 text-sm uppercase tracking-wide mb-1"}),u.jsx(ut,{id:"projects_disclaimer_text",defaultText:"Project dengan label 'Maintenance' atau 'Building' tidak bisa diakses sementara waktu demi alasan kestabilan. Silakan coba project yang berstatus 'Active'.",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-amber-700/80 leading-relaxed font-medium"})]})]}),u.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:sw.map(s=>u.jsx(pj,{project:s,isAdmin:t,onClick:()=>e(`/projects/${s.id}`)},s.id))})]})},pu=({isOpen:t,title:e,description:n,onConfirm:r,onCancel:s,confirmText:i="Yes, Leave"})=>t?u.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:u.jsx("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl transform transition-all scale-100 animate-fade-in-up border border-slate-100",children:u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-amber-50 text-amber-500 rounded-full flex items-center justify-center mb-4 border border-amber-100",children:u.jsx(Jl,{className:"w-6 h-6"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:e}),u.jsx("p",{className:"text-sm text-slate-500 mb-6 leading-relaxed",children:n}),u.jsxs("div",{className:"flex w-full gap-3",children:[u.jsx("button",{onClick:s,className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 rounded-xl font-medium hover:bg-slate-50 transition-colors text-sm",children:"Cancel"}),u.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-colors shadow-lg shadow-red-500/20 text-sm",children:i})]})]})})}):null,ow=({isAdmin:t})=>{const{id:e}=lT(),n=fs(),[r,s]=F.useState([]),[i,o]=F.useState(!0),[a,l]=F.useState("list"),[c,d]=F.useState(null),m=6,[g,y]=F.useState(m),[w,x]=F.useState("add"),[_,v]=F.useState({}),[E,T]=F.useState(!1),[R,L]=F.useState([]),[U,S]=F.useState(null),[C,N]=F.useState(null),[M,V]=F.useState(""),[P,D]=F.useState(""),[k,H]=F.useState(null),[me,re]=F.useState(null),[te,Q]=F.useState({x:0,y:0,visible:!1}),[ue,K]=F.useState(!1),[$,ce]=F.useState("url"),[Z,ee]=F.useState(""),Se=F.useRef(null),xe=F.useRef(null);F.useEffect(()=>{e?(l("detail"),o(!0),H3(e).then(O=>{O?d(O):(He("Artikel tidak ditemukan."),n("/blog",{replace:!0})),o(!1)})):a!=="editor"&&(l("list"),ke())},[e]);const ke=async()=>{o(!0);try{const O=await f1();s(O)}catch(O){console.error("Failed to fetch blog posts",O)}finally{o(!1)}};F.useEffect(()=>{if(a==="editor"){const O=_.content||"";if(!O){L([{id:Date.now().toString(),type:"text",content:""}]);return}const G=/(!image\(.*?\))/g,pe=O.split(G),we=pe.map(Re=>{const tt=Re.match(/^!image\((.*?)\)$/);return tt?{id:Math.random().toString(36).substr(2,9),type:"image",content:tt[1]}:{id:Math.random().toString(36).substr(2,9),type:"text",content:Re}}).filter(Re=>Re.type==="image"||Re.content.length>0||pe.length===1);we.length===0&&we.push({id:Date.now().toString(),type:"text",content:""}),L(we)}},[a,_.id]);const Ce=O=>{O&&(O.style.height="auto",O.style.height=`${O.scrollHeight}px`)};F.useEffect(()=>{a==="editor"&&(Ce(Se.current),Ce(xe.current))},[a,_.title,_.subtitle]),F.useEffect(()=>{const O=()=>{te.visible&&Q({...te,visible:!1})};return window.addEventListener("click",O),()=>window.removeEventListener("click",O)},[te]);const Be=()=>{y(O=>O+m)},Ke=()=>{y(m);const O=document.getElementById("blog-top");O&&O.scrollIntoView({behavior:"smooth"})},kt=()=>{x("add"),v({title:"",subtitle:"",category:"Category",date:new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),readTime:"5 min read",author:"Fanra",image:"",content:"",timestamp:Date.now(),sources:[]}),V(""),D(""),l("editor"),window.scrollTo(0,0)},ot=(O,G)=>{O.stopPropagation(),x("edit"),v({...G,sources:G.sources||[]}),V(""),D(""),l("editor"),window.scrollTo(0,0)},A=(O,G)=>{O.stopPropagation(),H(G)},se=async()=>{if(!k)return;const O=k;re(O),H(null);try{await W3(O),s(G=>G.filter(pe=>pe.id!==O)),(c==null?void 0:c.id)===O&&n("/blog"),He("Artikel berhasil dihapus.")}catch{He("Gagal menghapus artikel."),ke()}finally{re(null)}},X=async()=>{if(!_.title){He("Judul wajib diisi.");return}const O=R.map(G=>G.type==="image"?`

!image(${G.content})

`:G.content).join("").trim();if(!O){He("Konten tidak boleh kosong.");return}T(!0);try{const G={..._,content:O,image:_.image||"https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop"};w==="add"?await $3(G):_.id&&await q3(_.id,G),He(w==="add"?"Artikel berhasil diterbitkan!":"Artikel berhasil diperbarui!"),n("/blog")}catch(G){console.error(G),He("Gagal menyimpan artikel.")}finally{T(!1)}},z=()=>{if(!M.trim()||!P.trim())return;const O={label:M.trim(),url:P.trim()},G=[..._.sources||[],O];v(pe=>({...pe,sources:G})),V(""),D("")},B=O=>{const G=(_.sources||[]).filter((pe,we)=>we!==O);v(pe=>({...pe,sources:G}))},W=O=>{var pe;const G=(pe=O.target.files)==null?void 0:pe[0];if(G){const we=new FileReader;we.onloadend=()=>{const Re=we.result;v(tt=>({...tt,image:Re}))},we.readAsDataURL(G)}},ie=O=>{n(`/blog/${O.id}`)},oe=(O,G)=>{O.preventDefault();const pe=O.target;S(G),N(pe.selectionStart),Q({x:O.pageX,y:O.pageY,visible:!0})},Y=()=>{Q({...te,visible:!1}),ee(""),ce("url"),K(!0)},le=O=>{var pe;const G=(pe=O.target.files)==null?void 0:pe[0];if(G){const we=new FileReader;we.onloadend=()=>{const Re=we.result;ee(Re)},we.readAsDataURL(G)}},ye=()=>{if(!Z||!U){K(!1);return}const O=R.findIndex(xt=>xt.id===U);if(O===-1)return;const G=R[O],pe=G.content.slice(0,C||G.content.length),we=G.content.slice(C||G.content.length),Re=[...R];Re[O]={...G,content:pe};const tt={id:Date.now().toString(),type:"image",content:Z},Me={id:(Date.now()+1).toString(),type:"text",content:we};Re.splice(O+1,0,tt,Me),L(Re),K(!1),ee("")},he=(O,G)=>{L(pe=>pe.map(we=>we.id===O?{...we,content:G}:we))},ve=O=>{confirm("Hapus elemen ini?")&&L(G=>G.filter((pe,we)=>we!==O))},Pe=O=>O?O.split(`
`).map((G,pe)=>{if(!G.trim())return u.jsx("br",{},pe);const we=G.match(/^!image\((.*?)\)$/);if(we)return u.jsx("div",{className:"my-8",children:u.jsx("img",{src:we[1],alt:"Content Illustration",className:"w-full rounded-xl shadow-lg border border-slate-100"})},pe);const Re=/(\\\(.*?\\\)|\\\[.*?\\\])/g,tt=G.split(Re);return u.jsx("p",{className:"mb-6 text-slate-700 leading-8 text-lg",children:tt.map((Me,xt)=>{if(Me.startsWith("\\(")&&Me.endsWith("\\)")){const Et=Me.slice(2,-2);try{if(window.katex){const wt=window.katex.renderToString(Et,{throwOnError:!1,displayMode:!1});return u.jsx("span",{dangerouslySetInnerHTML:{__html:wt},className:"mx-1"},xt)}return u.jsx("span",{className:"font-mono bg-yellow-100 px-1 rounded",children:Et},xt)}catch{return Me}}if(Me.startsWith("\\[")&&Me.endsWith("\\]")){const Et=Me.slice(2,-2);try{if(window.katex){const wt=window.katex.renderToString(Et,{throwOnError:!1,displayMode:!0});return u.jsx("div",{dangerouslySetInnerHTML:{__html:wt},className:"my-4 text-center overflow-x-auto py-2"},xt)}return u.jsx("div",{className:"font-mono bg-yellow-100 p-2 rounded my-2 text-center",children:Et},xt)}catch{return Me}}return u.jsx("span",{children:Me},xt)})},pe)}):null,De=r.slice(0,g),pt=g<r.length,rn=g>m,Ct=()=>c?r.filter(O=>O.id!==c.id).slice(0,2):[];if(a==="editor")return u.jsxs("div",{className:"min-h-screen bg-slate-100 animate-fade-in relative pb-20",children:[u.jsxs("div",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur-md border-b border-slate-200 px-6 py-4 flex items-center justify-between shadow-sm",children:[u.jsxs("button",{onClick:()=>n("/blog"),className:"flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 transition-colors px-4 py-2 rounded-xl hover:bg-slate-100 border border-transparent hover:border-slate-200",children:[u.jsx(ss,{className:"w-4 h-4"}),"Cancel"]}),u.jsx("span",{className:"text-sm font-black text-slate-400 uppercase tracking-widest hidden md:block",children:w==="add"?"Creating New Story":"Editing Mode"}),u.jsxs("button",{onClick:X,disabled:E,className:"bg-slate-900 text-white px-6 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[E?u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):u.jsx(is,{className:"w-4 h-4"}),E?"Publishing...":"Publish"]})]}),u.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:u.jsxs("div",{className:"bg-white shadow-xl shadow-slate-200/50 rounded-3xl p-8 md:p-12 border border-slate-200",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-5 mb-8 p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[u.jsxs("div",{className:"flex flex-col gap-1.5",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Kategori"}),u.jsx("input",{type:"text",value:_.category,onChange:O=>v(G=>({...G,category:O.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors",placeholder:"Science..."})]}),u.jsxs("div",{className:"flex flex-col gap-1.5",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Penulis"}),u.jsx("input",{type:"text",value:_.author,onChange:O=>v(G=>({...G,author:O.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]}),u.jsxs("div",{className:"flex flex-col gap-1.5",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu Baca"}),u.jsx("input",{type:"text",value:_.readTime,onChange:O=>v(G=>({...G,readTime:O.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]}),u.jsxs("div",{className:"flex flex-col gap-1.5",children:[u.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Tanggal"}),u.jsx("input",{type:"text",value:_.date,onChange:O=>v(G=>({...G,date:O.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]})]}),u.jsxs("div",{className:"space-y-6 mb-10 pb-10 border-b border-dashed border-slate-200",children:[u.jsx("textarea",{ref:Se,rows:1,value:_.title||"",onChange:O=>v(G=>({...G,title:O.target.value})),className:"w-full text-4xl md:text-5xl font-black text-slate-900 bg-transparent border-b-2 border-transparent focus:border-slate-200 outline-none placeholder:text-slate-300 resize-none overflow-hidden leading-tight py-2 transition-colors",placeholder:"Judul Utama Artikel..."}),u.jsx("textarea",{ref:xe,rows:1,value:_.subtitle||"",onChange:O=>v(G=>({...G,subtitle:O.target.value})),className:"w-full text-xl font-medium text-slate-500 bg-transparent border-b border-transparent focus:border-slate-200 outline-none placeholder:text-slate-300 resize-none overflow-hidden leading-relaxed py-2 transition-colors",placeholder:"Tulis subtitle atau ringkasan menarik di sini..."})]}),u.jsxs("div",{className:"mb-10 group relative p-4 rounded-3xl border-2 border-dashed border-slate-200 hover:border-blue-400 transition-colors bg-slate-50/50",children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-3 text-center",children:"Cover Image"}),u.jsxs("div",{className:"w-full aspect-video rounded-2xl overflow-hidden shadow-sm bg-white border border-slate-100 flex flex-col items-center justify-center relative",children:[_.image?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:_.image,alt:"Cover",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsxs("div",{className:"text-white font-bold flex items-center gap-2",children:[u.jsx(jp,{className:"w-5 h-5"})," Ganti Gambar"]})})]}):u.jsxs("div",{className:"text-center p-8",children:[u.jsx(Nl,{className:"w-8 h-8 text-slate-300 mx-auto mb-3"}),u.jsx("p",{className:"text-slate-400 font-bold text-sm",children:"Upload Cover Image"})]}),u.jsx("input",{type:"file",accept:"image/*",onChange:W,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),u.jsx("input",{type:"text",value:_.image||"",onChange:O=>v(G=>({...G,image:O.target.value})),placeholder:"...atau tempel URL gambar disini",className:"w-full mt-4 text-xs text-slate-500 bg-white border border-slate-200 rounded-lg px-3 py-2 outline-none focus:border-blue-400 transition-colors text-center"})]}),u.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-100 p-4 rounded-xl text-xs text-blue-800 flex flex-col gap-2",children:[u.jsxs("p",{className:"font-bold flex items-center gap-2",children:[u.jsx(Nv,{className:"w-4 h-4"})," Panduan Editor:"]}),u.jsxs("ul",{className:"list-disc list-inside space-y-1 opacity-80",children:[u.jsxs("li",{children:["Gunakan ",u.jsx("code",{children:"\\( rumus \\)"})," untuk matematika inline."]}),u.jsxs("li",{children:["Gunakan ",u.jsx("code",{children:"\\[ rumus \\]"})," untuk matematika blok."]}),u.jsxs("li",{children:[u.jsx("b",{children:"Klik Kanan"})," di area teks untuk menyisipkan gambar di tengah paragraf."]})]})]}),u.jsxs("div",{className:"relative space-y-2",children:[R.map((O,G)=>u.jsx("div",{className:"relative group/block",children:O.type==="text"?u.jsx("textarea",{value:O.content,onChange:pe=>{he(O.id,pe.target.value),Ce(pe.target)},onFocus:pe=>Ce(pe.target),onContextMenu:pe=>oe(pe,O.id),className:"w-full text-lg leading-9 text-slate-800 bg-transparent border-none outline-none placeholder:text-slate-300 resize-none font-serif transition-colors overflow-hidden focus:bg-slate-50 rounded-lg px-2",placeholder:G===0?"Mulai menulis cerita Anda di sini...":"Lanjutkan menulis...",rows:1}):u.jsxs("div",{className:"relative my-4 group/image",children:[u.jsx("div",{className:"rounded-xl overflow-hidden shadow-lg border border-slate-200 bg-slate-50",children:u.jsx("img",{src:O.content,alt:"Inline",className:"w-full h-auto object-contain max-h-[500px]"})}),u.jsx("button",{onClick:()=>ve(G),className:"absolute top-3 right-3 bg-red-500 text-white p-2 rounded-full shadow-md opacity-0 group-hover/image:opacity-100 transition-opacity hover:bg-red-600 hover:scale-110",title:"Hapus Gambar",children:u.jsx(Pr,{className:"w-4 h-4"})})]})},O.id)),te.visible&&u.jsx("div",{className:"fixed z-50 bg-white border border-slate-200 rounded-lg shadow-xl py-1 w-48 animate-fade-in",style:{top:te.y,left:te.x},children:u.jsxs("button",{onClick:Y,className:"w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 hover:text-blue-600 flex items-center gap-2",children:[u.jsx("div",{className:"w-4 h-4 bg-slate-100 rounded flex items-center justify-center text-[10px]",children:""}),"Sisipkan Gambar"]})}),ue&&u.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-2xl w-full max-w-md animate-fade-in-up border border-slate-100",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Sisipkan Gambar"}),u.jsxs("div",{className:"flex gap-2 mb-4 bg-slate-100 p-1 rounded-xl",children:[u.jsx("button",{onClick:()=>ce("url"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${$==="url"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Link URL"}),u.jsx("button",{onClick:()=>ce("upload"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${$==="upload"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Upload File"})]}),$==="url"?u.jsx("input",{type:"text",value:Z,onChange:O=>ee(O.target.value),placeholder:"https://example.com/image.jpg",className:"w-full border border-slate-200 rounded-xl px-4 py-3 text-sm mb-6 outline-none focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10 bg-slate-50 text-slate-900 placeholder:text-slate-400",autoFocus:!0}):u.jsxs("div",{className:"mb-6",children:[u.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-slate-300 border-dashed rounded-2xl cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[u.jsx(Nl,{className:"w-8 h-8 text-slate-400 mb-2"}),u.jsx("p",{className:"text-xs text-slate-500 font-bold",children:"Klik untuk pilih file"}),u.jsx("p",{className:"text-[10px] text-slate-400",children:"JPG, PNG, WEBP (Max 2MB)"})]}),u.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:le})]}),Z&&u.jsx("div",{className:"mt-2 text-center",children:u.jsxs("p",{className:"text-xs text-green-600 font-bold flex items-center justify-center gap-1",children:[u.jsx(is,{className:"w-3 h-3"})," File siap disisipkan"]})})]}),u.jsxs("div",{className:"flex justify-end gap-3",children:[u.jsx("button",{onClick:()=>K(!1),className:"px-5 py-2.5 text-xs font-bold text-slate-500 hover:bg-slate-100 rounded-xl transition-colors",children:"Batal"}),u.jsx("button",{onClick:ye,className:"px-6 py-2.5 text-xs font-bold bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-900/20 active:scale-95",children:"Sisipkan"})]})]})})]}),u.jsxs("div",{className:"mt-16 pt-10 border-t border-slate-200",children:[u.jsxs("h4",{className:"text-sm font-bold text-slate-800 uppercase tracking-widest mb-6 flex items-center gap-2",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/2420/2420165.png",alt:"Sources",className:"w-4 h-4 object-contain opacity-60"}),"Referensi & Sumber"]}),u.jsx("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200 mb-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Nama Sumber"}),u.jsx("input",{type:"text",value:M,onChange:O=>V(O.target.value),placeholder:"Contoh: Wikipedia",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"URL Link"}),u.jsx("input",{type:"text",value:P,onChange:O=>D(O.target.value),placeholder:"https://...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),u.jsx("div",{children:u.jsx("button",{onClick:z,disabled:!M||!P,className:"w-full py-2 bg-slate-900 text-white rounded-lg text-sm font-bold hover:bg-slate-800 disabled:opacity-50 transition-all",children:"+ Tambah"})})]})}),_.sources&&_.sources.length>0&&u.jsx("div",{className:"space-y-2",children:_.sources.map((O,G)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-xl hover:border-slate-300 transition-colors group",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center shrink-0",children:u.jsx(ud,{className:"w-4 h-4"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:O.label}),u.jsx("p",{className:"text-xs text-slate-400 truncate",children:O.url})]})]}),u.jsx("button",{onClick:()=>B(G),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:u.jsx(Pr,{className:"w-4 h-4"})})]},G))}),(!_.sources||_.sources.length===0)&&u.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"Belum ada sumber yang ditambahkan."})]})]})})]});if(a==="detail"&&c){const O=Ct();return u.jsx("article",{className:"min-h-screen bg-white animate-fade-in pb-20",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-12",children:[u.jsxs("button",{onClick:()=>n("/blog"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:u.jsx(ss,{className:"w-4 h-4"})}),"Kembali"]}),u.jsxs("header",{className:"mb-12",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-bold uppercase tracking-wider",children:c.category}),u.jsx("span",{className:"text-slate-400 text-sm font-medium",children:c.readTime})]}),u.jsx("h1",{className:"text-3xl md:text-5xl font-black text-slate-900 mb-6 leading-tight tracking-tight",children:c.title}),u.jsx("p",{className:"text-lg md:text-xl text-slate-500 leading-relaxed font-medium",children:c.subtitle}),u.jsxs("div",{className:"flex items-center gap-4 mt-8 pt-8 border-t border-slate-100",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-900 text-white flex items-center justify-center font-bold text-sm",children:c.author.charAt(0)}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-bold text-slate-900",children:c.author}),u.jsx("p",{className:"text-xs text-slate-500",children:c.date})]})]})]}),u.jsx("figure",{className:"mb-12",children:u.jsx("img",{src:c.image,alt:c.title,className:"w-full aspect-video object-cover rounded-2xl shadow-lg border border-slate-100"})}),u.jsx("div",{className:"prose prose-lg prose-slate max-w-none mb-16 font-serif",children:Pe(c.content)}),c.sources&&c.sources.length>0&&u.jsxs("div",{className:"border-t border-slate-100 pt-10 mb-16",children:[u.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[u.jsx(ud,{className:"w-4 h-4"}),"Sumber Referensi"]}),u.jsx("ul",{className:"space-y-3",children:c.sources.map((G,pe)=>u.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[u.jsxs("span",{className:"text-slate-300 font-bold select-none",children:[pe+1,"."]}),u.jsx("a",{href:G.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline font-medium break-all",children:G.label})]},pe))})]}),O.length>0&&u.jsxs("div",{className:"border-t-2 border-slate-100 pt-12",children:[u.jsxs("h3",{className:"text-xl font-black text-slate-900 mb-6 flex items-center gap-3",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1170/1170221.png",alt:"Read Also",className:"w-6 h-6 object-contain opacity-60"}),"Baca Juga"]}),u.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:O.map(G=>u.jsxs("div",{onClick:()=>ie(G),className:"group cursor-pointer bg-slate-50 rounded-2xl p-4 border border-slate-100 hover:border-slate-300 hover:bg-white hover:shadow-lg transition-all",children:[u.jsx("div",{className:"aspect-video rounded-xl overflow-hidden mb-4 bg-slate-200",children:u.jsx("img",{src:G.image,alt:G.title,className:"w-full h-full object-cover opacity-90 group-hover:scale-105 transition-transform duration-500"})}),u.jsx("h4",{className:"font-bold text-slate-900 leading-tight mb-2 group-hover:text-blue-600 line-clamp-2",children:G.title}),u.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:G.subtitle})]},G.id))})]})]})})}return u.jsxs("div",{id:"blog-top",className:"max-w-7xl mx-auto px-6 py-12 animate-fade-in relative pb-24",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-16 gap-6",children:[u.jsxs("div",{className:"max-w-2xl",children:[u.jsx(ut,{id:"blog_header_title",defaultText:"Insights & Stories",isAdmin:t,tag:"h1",className:"text-4xl md:text-6xl font-black text-slate-900 mb-6 tracking-tight"}),u.jsx(ut,{id:"blog_header_desc",defaultText:"Kumpulan pemikiran mendalam, fakta sains, dan eksplorasi ide yang mungkin bikin lo begadang mikirin alam semesta.",isAdmin:t,tag:"p",multiline:!0,className:"text-lg text-slate-500 leading-relaxed"})]}),t&&u.jsxs("button",{onClick:kt,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 whitespace-nowrap",children:[u.jsx(Nv,{className:"w-5 h-5"}),"Write Story"]})]}),u.jsx(pu,{isOpen:!!k,title:"Hapus Artikel?",description:"Artikel ini akan dihapus permanen. Tindakan ini tidak bisa dibatalkan.",confirmText:"Ya, Hapus",onConfirm:se,onCancel:()=>H(null)}),i&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),u.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Artikel..."})]}),!i&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[De.map(O=>u.jsxs("div",{onClick:()=>ie(O),className:"group cursor-pointer flex flex-col h-full relative",children:[u.jsxs("div",{className:"relative aspect-[4/3] bg-slate-100 rounded-[2rem] overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500 border border-slate-200",children:[u.jsx("img",{src:O.image,alt:O.title,loading:"lazy",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"}),t&&u.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2",children:[u.jsx("button",{onClick:G=>ot(G,O),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-blue-600 hover:bg-white transition-colors",children:u.jsx(jp,{className:"w-4 h-4"})}),u.jsx("button",{onClick:G=>A(G,O.id),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-red-500 hover:bg-white transition-colors",children:me===O.id?u.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):u.jsx(Pr,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute top-6 left-6",children:u.jsx("span",{className:"bg-white/90 backdrop-blur text-slate-900 text-[10px] font-bold px-3 py-1.5 rounded-full uppercase tracking-wider shadow-sm",children:O.category})})]}),u.jsxs("div",{className:"flex-1 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium text-slate-400 mb-3",children:[u.jsx("span",{children:O.date}),u.jsx("span",{children:""}),u.jsx("span",{children:O.readTime})]}),u.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3 leading-tight group-hover:text-blue-600 transition-colors",children:O.title}),u.jsx("p",{className:"text-slate-500 line-clamp-3 leading-relaxed mb-6",children:O.subtitle}),u.jsxs("div",{className:"mt-auto flex items-center text-sm font-bold text-slate-900 group-hover:translate-x-2 transition-transform duration-300",children:["Baca Selengkapnya ",u.jsx(Bo,{className:"w-4 h-4 ml-2"})]})]})]},O.id)),r.length<=m&&u.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-[2rem] flex flex-col items-center justify-center p-8 text-center min-h-[400px]",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4 text-slate-300",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3018/3018445.png",alt:"Coming Soon",className:"w-8 h-8 object-contain opacity-50"})}),u.jsx(ut,{id:"blog_placeholder_title",defaultText:"Tulisan Mendatang",isAdmin:t,tag:"h3",className:"font-bold text-slate-400 mb-2"}),u.jsx(ut,{id:"blog_placeholder_desc",defaultText:"Artikel tentang AI Consciousness, Sejarah Internet, dan Psikologi Warna sedang ditulis...",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-slate-400 max-w-xs mx-auto"})]})]}),u.jsxs("div",{className:"flex flex-col items-center gap-3 mt-16 mb-8",children:[pt&&u.jsxs("button",{onClick:Be,className:"px-6 py-3 rounded-full bg-white border border-slate-200 text-slate-700 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Artikel Lainnya",u.jsx(fr,{className:"w-4 h-4"})]}),rn&&u.jsxs("button",{onClick:Ke,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Tutup / Sembunyikan",u.jsx(fr,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]})},gj=({isAdmin:t})=>{const[e,n]=F.useState([]),[r,s]=F.useState(!0),[i,o]=F.useState("All"),[a,l]=F.useState(null),c=9,[d,m]=F.useState(c),[g,y]=F.useState(!1),[w,x]=F.useState("add"),[_,v]=F.useState({}),[E,T]=F.useState(!1),[R,L]=F.useState(null),[U,S]=F.useState(null),C=async()=>{s(!0);try{const Z=await h1();n(Z)}catch(Z){console.error("Failed to load photos",Z)}finally{s(!1)}};F.useEffect(()=>{C()},[]),F.useEffect(()=>{m(c)},[i]);const N=["All",...Array.from(new Set(e.map(Z=>Z.year))).sort().reverse()],M=i==="All"?e:e.filter(Z=>Z.year===i),V=M.slice(0,d),P=d<M.length,D=d>c,k=V.reduce((Z,ee)=>(Z[ee.year]||(Z[ee.year]=[]),Z[ee.year].push(ee),Z),{}),H=Object.keys(k).sort().reverse(),me=()=>{m(Z=>Z+c)},re=()=>{m(c);const Z=document.getElementById("gallery-top-anchor");Z&&Z.scrollIntoView({behavior:"smooth"})},te=()=>{x("add"),v({src:"",caption:"",month:"Januari",year:new Date().getFullYear().toString(),timestamp:Date.now()}),y(!0)},Q=(Z,ee)=>{Z.stopPropagation(),x("edit"),v({...ee}),y(!0)},ue=(Z,ee)=>{Z.stopPropagation(),ee&&S(ee)},K=async()=>{if(!U)return;const Z=U;L(Z),S(null);try{await z3(Z),n(ee=>ee.filter(Se=>Se.id!==Z)),He("Foto berhasil dihapus.")}catch(ee){console.error(ee),He("Gagal menghapus foto. Cek koneksi internet."),C()}finally{L(null)}},$=async()=>{if(!_.src||!_.year){He("Gambar dan Tahun wajib diisi.");return}T(!0);try{w==="add"?await O3(_):_.id&&await B3(_.id,_),y(!1),He(w==="add"?"Foto ditambahkan!":"Foto diperbarui!"),C()}catch(Z){console.error(Z),He("Gagal menyimpan data.")}finally{T(!1)}},ce=Z=>{var Se;const ee=(Se=Z.target.files)==null?void 0:Se[0];if(ee){const xe=new FileReader;xe.onloadend=()=>{const ke=xe.result;v(Ce=>({...Ce,src:ke}))},xe.readAsDataURL(ee)}};return u.jsxs("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:[u.jsx(pu,{isOpen:!!U,title:"Hapus Memori?",description:"Foto ini akan dihapus secara permanen dari galeri. Tindakan ini tidak dapat dibatalkan.",confirmText:"Ya, Hapus",onConfirm:K,onCancel:()=>S(null)}),u.jsxs("div",{id:"gallery-top-anchor",className:"max-w-7xl mx-auto px-6 pt-12 pb-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-slate-900 mb-4 tracking-tight",children:["Visual ",u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Diaries"})]}),u.jsx("p",{className:"text-lg text-slate-500 max-w-2xl leading-relaxed",children:"Koleksi momen acak, dikelompokkan berdasarkan waktu."})]}),t&&u.jsxs("button",{onClick:te,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95",children:[u.jsx(Nl,{className:"w-5 h-5"}),"Add Memory"]})]}),u.jsx("div",{className:"flex flex-wrap gap-2 mt-8",children:N.map(Z=>u.jsx("button",{onClick:()=>o(Z),className:`px-5 py-2 rounded-full text-sm font-bold transition-all duration-300 ${i===Z?"bg-slate-900 text-white shadow-lg shadow-slate-900/20":"bg-slate-50 text-slate-500 hover:bg-slate-100 hover:text-slate-900"}`,children:Z},Z))})]}),u.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),u.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Galeri..."})]}),!r&&M.length===0&&u.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[u.jsx(_g,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),u.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada foto di periode ini."})]}),!r&&V.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"space-y-16",children:H.map(Z=>u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"flex items-center gap-6 mb-8 mt-4",children:[u.jsx("span",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tighter",children:Z}),u.jsx("div",{className:"h-0.5 bg-slate-200 flex-1 rounded-full opacity-50"})]}),u.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-3 gap-6 space-y-6",children:k[Z].map(ee=>u.jsxs("div",{className:"break-inside-avoid relative group cursor-pointer rounded-2xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-lg transition-all duration-300 transform translate-z-0",onClick:()=>l(ee),children:[u.jsx("img",{src:ee.src,alt:ee.caption,loading:"lazy",className:"w-full h-auto object-cover transform transition-transform duration-700 group-hover:scale-105"}),t&&u.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:Se=>Q(Se,ee),className:"p-2.5 bg-white text-slate-700 rounded-full shadow-md hover:bg-blue-50 hover:text-blue-600 transition-colors border border-slate-100",title:"Edit",children:u.jsx(jp,{className:"w-4 h-4"})}),u.jsx("button",{onClick:Se=>ue(Se,ee.id),disabled:R===ee.id,className:`p-2.5 bg-white rounded-full shadow-md transition-colors border border-slate-100 ${R===ee.id?"text-slate-300 cursor-wait":"text-red-500 hover:bg-red-50"}`,title:"Hapus",children:R===ee.id?u.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):u.jsx(Pr,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),u.jsx("div",{className:"absolute bottom-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:u.jsx("span",{className:"bg-black/30 backdrop-blur-md text-white text-[10px] font-bold px-3 py-1.5 rounded-full border border-white/20 uppercase tracking-widest shadow-sm",children:ee.month})})]},ee.id||ee.src))})]},Z))}),u.jsxs("div",{className:"flex flex-col items-center gap-3 mt-20 mb-8",children:[P&&u.jsxs("button",{onClick:me,className:"px-6 py-3 rounded-full bg-white border border-slate-200 text-slate-700 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Momen Terdahulu",u.jsx(fr,{className:"w-4 h-4"})]}),D&&u.jsxs("button",{onClick:re,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Tutup / Sembunyikan",u.jsx(fr,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]}),a&&u.jsxs("div",{className:"fixed inset-0 z-[100] bg-white/95 backdrop-blur-xl flex items-center justify-center p-4 animate-fade-in",onClick:()=>l(null),children:[u.jsx("button",{onClick:()=>l(null),className:"absolute top-6 left-6 z-10 p-3 bg-slate-100 hover:bg-slate-200 text-slate-800 rounded-full transition-all group shadow-sm border border-slate-200",children:u.jsx(ss,{className:"w-6 h-6 group-hover:-translate-x-1 transition-transform"})}),u.jsxs("div",{className:"relative max-w-5xl w-full flex flex-col items-center gap-8",onClick:Z=>Z.stopPropagation(),children:[u.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-2xl max-h-[75vh] bg-slate-50",children:u.jsx("img",{src:a.src,alt:"Gallery View",className:"max-w-full max-h-[75vh] object-contain"})}),u.jsxs("div",{className:"text-center max-w-2xl px-4 animate-fade-in-up",children:[u.jsxs("p",{className:"text-lg md:text-xl text-slate-900 font-medium leading-relaxed",children:['"',a.caption,'"']}),u.jsx("div",{className:"mt-4 flex items-center justify-center gap-3",children:u.jsxs("div",{className:"inline-block px-3 py-1 bg-slate-100 rounded-full text-slate-600 text-xs font-bold uppercase tracking-widest border border-slate-200",children:[a.month," ",a.year]})})]})]})]}),g&&u.jsx("div",{className:"fixed inset-0 z-[120] bg-slate-900/40 backdrop-blur-md flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl p-8 shadow-2xl animate-fade-in-up border border-slate-100 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:w==="add"?"Tambah Memori":"Edit Memori"}),u.jsx("button",{onClick:()=>y(!1),className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-900 transition-colors",children:""})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Gambar"}),u.jsx("div",{className:"flex gap-3 mb-3",children:u.jsx("input",{type:"file",accept:"image/*",onChange:ce,className:"text-xs w-full file:mr-4 file:py-2.5 file:px-5 file:rounded-full file:border-0 file:text-xs file:font-bold file:bg-blue-50 file:text-blue-600 hover:file:bg-blue-100 transition-colors cursor-pointer bg-slate-50 rounded-xl p-1"})}),u.jsx("input",{type:"text",placeholder:"Atau tempel URL gambar...",value:_.src||"",onChange:Z=>v(ee=>({...ee,src:Z.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none placeholder:text-slate-400"}),_.src&&u.jsxs("div",{className:"mt-4 h-32 w-full rounded-xl overflow-hidden border border-slate-200 bg-slate-50 relative group",children:[u.jsx("img",{src:_.src,alt:"Preview",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsx("span",{className:"text-white text-xs font-bold bg-black/50 px-3 py-1 rounded-full backdrop-blur-sm",children:"Preview"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Caption"}),u.jsx("textarea",{value:_.caption||"",onChange:Z=>v(ee=>({...ee,caption:Z.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none resize-none h-32 leading-relaxed placeholder:text-slate-400",placeholder:"Ceritakan momen ini..."})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Bulan"}),u.jsxs("div",{className:"relative",children:[u.jsx("select",{value:_.month||"Januari",onChange:Z=>v(ee=>({...ee,month:Z.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none appearance-none font-medium",children:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"].map(Z=>u.jsx("option",{value:Z,children:Z},Z))}),u.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:u.jsx(fr,{className:"w-4 h-4"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Tahun"}),u.jsx("input",{type:"number",value:_.year||"",onChange:Z=>v(ee=>({...ee,year:Z.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none font-medium"})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-10 pt-6 border-t border-slate-100",children:[u.jsx("button",{onClick:()=>y(!1),className:"px-6 py-3 text-slate-500 hover:text-slate-800 hover:bg-slate-50 rounded-xl text-sm font-bold transition-all",children:"Batal"}),u.jsxs("button",{onClick:$,disabled:E,className:"px-8 py-3 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800 disabled:opacity-50 transition-all shadow-lg shadow-slate-900/20 active:scale-95 flex items-center gap-2",children:[E&&u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),E?"Menyimpan...":"Simpan Memori"]})]})]})})]})},yj=({isAdmin:t})=>{const[e,n]=F.useState([]),[r,s]=F.useState(null),[i,o]=F.useState(!1),[a,l]=F.useState(!0),[c,d]=F.useState(!1),[m,g]=F.useState(""),[y,w]=F.useState(""),[x,_]=F.useState(""),[v,E]=F.useState(!1),[T,R]=F.useState(!1),[L,U]=F.useState(null),S=F.useRef(null),C=async()=>{l(!0);try{const k=await J3();n(k),k.length>0&&(s(k[0]),o(!1))}catch(k){console.error(k)}finally{l(!1)}};F.useEffect(()=>{C()},[]),F.useEffect(()=>{let k;return!a&&e.length>0&&(k=setTimeout(()=>{o(!0)},5e3)),()=>{k&&clearTimeout(k)}},[a,e.length]);const N=k=>{try{if(k.includes("/track/")){const H=k.split("/track/");if(H.length>1)return H[1].split("?")[0]}if(k.includes("spotify:track:")){const H=k.split(":");if(H.length>2)return H[2]}if(k.length>15&&!k.includes("/"))return k}catch{return null}return null},M=async()=>{if(!m||!y||!x){He("Harap isi semua kolom.");return}const k=N(m);if(!k){He("Link Spotify tidak valid.");return}E(!0);try{await Y3({spotifyId:k,title:y,artist:x,addedAt:Date.now()}),await C(),d(!1),g(""),w(""),_(""),He("Lagu berhasil ditambahkan!")}catch{He("Gagal menambahkan lagu.")}finally{E(!1)}},V=(k,H)=>{H.stopPropagation(),U(k),R(!0)},P=async()=>{if(L)try{if(await Q3(L),n(k=>k.filter(H=>H.id!==L)),(r==null?void 0:r.id)===L){const k=e.filter(H=>H.id!==L);k.length>0?(s(k[0]),o(!1)):(s(null),o(!1))}He("Lagu dihapus.")}catch{He("Gagal menghapus.")}finally{R(!1),U(null)}},D=k=>{(r==null?void 0:r.id)===k.id?o(!i):(s(k),o(!0))};return u.jsxs("div",{className:"min-h-screen bg-white relative overflow-hidden flex flex-col h-full",children:[u.jsx("style",{children:`
                    .no-scrollbar::-webkit-scrollbar {
                        display: none;
                    }
                    .no-scrollbar {
                        -ms-overflow-style: none;
                        scrollbar-width: none;
                    }
                `}),u.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-blue-50/50 rounded-full blur-3xl opacity-60 pointer-events-none translate-x-1/3 -translate-y-1/3"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-purple-50/50 rounded-full blur-3xl opacity-60 pointer-events-none -translate-x-1/3 translate-y-1/3"}),u.jsx(pu,{isOpen:T,title:"Hapus Lagu?",description:"Lagu ini akan dihapus dari playlist publik. Yakin?",confirmText:"Ya, Hapus",onConfirm:P,onCancel:()=>R(!1)}),u.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar relative z-10 pb-24",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8 md:py-12",children:[u.jsxs("div",{className:"text-center mb-8 md:mb-10",children:[u.jsx(ut,{id:"music_title",defaultText:"Soundtrack of Life",isAdmin:t,tag:"h1",className:"text-3xl md:text-5xl font-black text-slate-900 tracking-tighter mb-2 md:mb-4"}),u.jsx(ut,{id:"music_desc",defaultText:"Kumpulan frekuensi pengiring coding & kontemplasi malam.",isAdmin:t,tag:"p",className:"text-sm md:text-base text-slate-500 font-medium"})]}),r&&u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl border border-slate-100 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 shadow-2xl shadow-slate-200/50 mb-10 md:mb-12 relative overflow-hidden transition-all hover:shadow-slate-300/50",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-20 blur-3xl scale-125 pointer-events-none transition-colors duration-1000",children:u.jsx("div",{className:`w-full h-full bg-gradient-to-tr ${i?"from-blue-300 to-purple-300":"from-slate-200 to-gray-200"}`})}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[u.jsxs("div",{className:"relative mb-6 mt-2 md:mb-8 md:mt-4 group cursor-pointer",onClick:()=>o(!i),children:[u.jsxs("div",{className:`w-48 h-48 md:w-64 md:h-64 rounded-full bg-slate-900 shadow-2xl flex items-center justify-center relative overflow-hidden border-4 border-slate-800 ${i?"animate-[spin_4s_linear_infinite]":"transition-transform duration-700 ease-out"}`,children:[u.jsx("div",{className:"absolute inset-2 rounded-full border border-slate-800/50"}),u.jsx("div",{className:"absolute inset-4 rounded-full border border-slate-800/50"}),u.jsx("div",{className:"absolute inset-8 rounded-full border border-slate-800/50"}),u.jsx("div",{className:"absolute inset-12 rounded-full border border-slate-800/50"}),u.jsxs("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-tr from-blue-500 to-purple-600 rounded-full flex items-center justify-center relative shadow-inner",children:[u.jsx("div",{className:"w-2 h-2 md:w-2.5 md:h-2.5 bg-white rounded-full shadow-sm"}),u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-30"})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-full"})]}),u.jsx("div",{className:`absolute -top-8 -right-6 md:-top-12 md:-right-8 w-24 h-32 md:w-28 md:h-40 pointer-events-none transition-transform duration-1000 ease-in-out origin-[70%_15%] drop-shadow-xl z-20 ${i?"rotate-[0deg]":"-rotate-[40deg]"}`,children:u.jsxs("svg",{viewBox:"0 0 100 150",className:"w-full h-full",children:[u.jsx("circle",{cx:"70",cy:"20",r:"8",fill:"#94a3b8",stroke:"#64748b",strokeWidth:"2"}),u.jsx("path",{d:"M70 20 L60 90 L45 100",fill:"none",stroke:"#64748b",strokeWidth:"5",strokeLinecap:"round"}),u.jsx("rect",{x:"38",y:"95",width:"16",height:"20",fill:"#334155",rx:"2",transform:"rotate(20 46 105)"})]})}),!i&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-full p-3 md:p-4",children:u.jsx(iN,{className:"w-6 h-6 md:w-8 md:h-8 text-white ml-1"})})})]}),u.jsxs("div",{className:"w-full text-center",children:[u.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-900 mb-1 leading-tight line-clamp-1",children:r.title}),u.jsx("p",{className:"text-xs md:text-sm text-slate-500 font-bold uppercase tracking-widest mb-4 md:mb-6 line-clamp-1",children:r.artist}),u.jsx("div",{className:"w-full rounded-2xl overflow-hidden shadow-sm border border-slate-100 bg-slate-50 relative z-20",children:u.jsx("iframe",{ref:S,src:`https://open.spotify.com/embed/track/${r.spotifyId}?utm_source=generator&theme=0&autoplay=1`,width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Player",className:"border-0 block",style:{overflow:"hidden"}})}),u.jsx("button",{onClick:()=>o(!i),className:"mt-4 text-[10px] font-bold text-slate-400 bg-slate-50 px-3 py-1.5 rounded-full hover:bg-slate-100 transition-colors",children:i?"Matikan Animasi Manual":"Nyalakan Animasi Manual"})]})]})]}),u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[u.jsxs("h3",{className:"text-base md:text-lg font-bold text-slate-900 flex items-center gap-2",children:[u.jsx(oN,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-400"}),"Daftar Putar"]}),t&&u.jsx("button",{onClick:()=>d(!c),className:"text-[10px] md:text-xs font-bold bg-slate-900 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-slate-800 transition-all shadow-md active:scale-95",children:c?"Tutup":"+ Add Song"})]}),c&&u.jsxs("div",{className:"bg-slate-50 p-4 md:p-6 rounded-2xl border border-slate-200 mb-6 md:mb-8 animate-fade-in-up",children:[u.jsx("h4",{className:"text-sm font-bold text-slate-800 mb-4",children:"Tambah Lagu Baru"}),u.jsxs("div",{className:"grid gap-3 md:gap-4",children:[u.jsx("input",{type:"text",placeholder:"Link Spotify...",value:m,onChange:k=>g(k.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[u.jsx("input",{type:"text",placeholder:"Judul Lagu",value:y,onChange:k=>w(k.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"}),u.jsx("input",{type:"text",placeholder:"Nama Artis",value:x,onChange:k=>_(k.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"})]}),u.jsx("button",{onClick:M,disabled:v,className:"w-full bg-blue-600 text-white font-bold py-2.5 md:py-3 rounded-xl hover:bg-blue-700 transition-all disabled:opacity-50 text-sm",children:v?"Menyimpan...":"Simpan ke Playlist"})]})]}),u.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.map((k,H)=>u.jsxs("div",{onClick:()=>D(k),className:`group flex items-center gap-3 md:gap-4 p-3 pr-4 rounded-xl cursor-pointer border transition-all duration-300 ${(r==null?void 0:r.id)===k.id?"bg-slate-900 border-slate-900 shadow-lg scale-[1.01] md:scale-[1.02]":"bg-white border-slate-100 hover:border-slate-300 hover:shadow-md"}`,children:[u.jsx("div",{className:`w-8 h-8 flex items-center justify-center text-xs md:text-sm font-bold rounded-lg shrink-0 ${(r==null?void 0:r.id)===k.id?"text-white":"text-slate-400 bg-slate-50 group-hover:bg-slate-100 group-hover:text-slate-600"}`,children:(r==null?void 0:r.id)===k.id&&i?u.jsxs("div",{className:"flex gap-0.5 items-end h-3",children:[u.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1s_infinite] h-2"}),u.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1.2s_infinite] h-3"}),u.jsx("div",{className:"w-0.5 bg-white animate-[bounce_0.8s_infinite] h-1.5"})]}):H+1}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:`font-bold text-xs md:text-sm truncate ${(r==null?void 0:r.id)===k.id?"text-white":"text-slate-800"}`,children:k.title}),u.jsx("p",{className:`text-[10px] md:text-xs truncate ${(r==null?void 0:r.id)===k.id?"text-slate-400":"text-slate-500"}`,children:k.artist})]}),u.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[u.jsx("div",{className:`p-1.5 md:p-2 rounded-full transition-colors ${(r==null?void 0:r.id)===k.id?"bg-white/10 text-white":"bg-slate-100 text-slate-400 group-hover:text-green-600 group-hover:bg-green-50"}`,children:u.jsx(_T,{className:"w-4 h-4"})}),t&&u.jsx("button",{onClick:me=>V(k.id,me),className:"p-1.5 md:p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-full transition-all",title:"Hapus",children:u.jsx(Pr,{className:"w-4 h-4"})})]})]},k.id||H)),e.length===0&&!a&&u.jsx("div",{className:"text-center py-12 text-slate-400 text-sm",children:"Playlist kosong. Tambahkan lagu baru."})]})]})]})})]})},vj=({isAdmin:t})=>{const[e,n]=F.useState([]),[r,s]=F.useState(!0),i=6,[o,a]=F.useState(i),[l,c]=F.useState(""),[d,m]=F.useState(!1),[g,y]=F.useState(!1),[w,x]=F.useState(!1),[_,v]=F.useState(null),[E,T]=F.useState(null),R=280,L=async()=>{s(!0);try{const H=await ej();n(H)}catch(H){console.error(H)}finally{s(!1)}};F.useEffect(()=>{L()},[]);const U=async()=>{if(l.trim()){y(!0);try{await X3({content:l.trim(),type:d?"private":"public",sender:"Anonim"}),x(!0),c(""),d||(L(),a(i)),setTimeout(()=>x(!1),3e3)}catch{He("Gagal mengirim pesan.")}finally{y(!1)}}},S=(H,me)=>{me.stopPropagation(),H&&T(H)},C=async()=>{if(!E)return;const H=E;v(H),T(null);try{await Z3(H),n(me=>me.filter(re=>re.id!==H)),He("Pesan dihapus.")}catch(me){He("Gagal menghapus pesan."),console.error(me)}finally{v(null)}},N=()=>{a(H=>H+i)},M=()=>{a(i);const H=document.getElementById("message-feed-top");H&&H.scrollIntoView({behavior:"smooth"})},V=H=>new Date(H).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),P=e.slice(0,o),D=o<e.length,k=o>i;return u.jsxs("div",{className:"min-h-screen bg-slate-50 relative pb-20",children:[u.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-40",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),u.jsx(pu,{isOpen:!!E,title:"Hapus Pesan?",description:"Pesan ini akan dihapus secara permanen dari Public Wall. Tindakan ini tidak dapat dibatalkan.",confirmText:"Ya, Hapus",onConfirm:C,onCancel:()=>T(null)}),u.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12 relative z-10",children:[u.jsxs("div",{className:"mb-16 text-center space-y-8",children:[u.jsxs("div",{children:[u.jsx(ut,{id:"msg_feed_title",defaultText:"Public Wall",isAdmin:t,tag:"h1",className:"text-4xl font-black text-slate-900 tracking-tight mb-2"}),u.jsx(ut,{id:"msg_feed_desc",defaultText:"Tulis sesuatu. Rahasia, harapan, atau sekadar 'Halo'.",isAdmin:t,tag:"p",className:"text-slate-500 font-medium"})]}),u.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-xl shadow-slate-200/60 border border-slate-100 max-w-2xl mx-auto transition-all focus-within:ring-2 focus-within:ring-slate-900/5 relative",children:[u.jsx("textarea",{value:l,onChange:H=>c(H.target.value),maxLength:R,className:"w-full h-32 bg-transparent text-lg font-medium text-slate-800 placeholder:text-slate-300 resize-none outline-none leading-relaxed",placeholder:"Apa yang sedang kamu pikirkan?"}),u.jsxs("div",{className:`absolute bottom-20 right-6 text-[10px] font-bold transition-colors ${l.length>=R?"text-red-500":"text-slate-300"}`,children:[l.length,"/",R]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-50 flex items-center justify-between",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none px-2 py-1 rounded-lg hover:bg-slate-50 transition-colors",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:d,onChange:H=>m(H.target.checked)}),u.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-slate-900 transition-colors"})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[d?u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/4436/4436450.png",alt:"Private",className:"w-4 h-4 object-contain"}):u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/417/417720.png",alt:"Public",className:"w-4 h-4 object-contain"}),u.jsx("span",{className:`text-xs font-bold transition-colors ${d?"text-slate-900":"text-slate-400"}`,children:d?"Privat":"Publik"})]})]}),u.jsx("button",{onClick:U,disabled:!l.trim()||g,className:`
                                    flex items-center gap-2 px-6 py-2.5 rounded-xl font-bold text-sm transition-all shadow-lg active:scale-95
                                    ${w?"bg-green-500 text-white shadow-green-500/20":"bg-slate-900 text-white hover:bg-slate-800 shadow-slate-900/20 disabled:bg-slate-200 disabled:text-slate-400 disabled:shadow-none disabled:cursor-not-allowed"}
                                `,children:g?u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):w?u.jsxs(u.Fragment,{children:["Terkirim ",u.jsx(is,{className:"w-4 h-4"})]}):u.jsxs(u.Fragment,{children:["Kirim ",u.jsx(wT,{className:"w-4 h-4"})]})})]})]})]}),u.jsxs("div",{id:"message-feed-top",className:"flex items-center justify-between mb-6 px-2",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/417/417720.png",alt:"Feed",className:"w-4 h-4 object-contain opacity-60"})," Pesan Terbaru"]}),u.jsx("button",{onClick:L,className:"p-2 text-slate-400 hover:text-slate-900 hover:bg-white rounded-full transition-all",title:"Refresh",children:u.jsx(Zd,{className:"w-4 h-4"})})]}),r?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(H=>u.jsx("div",{className:"h-32 bg-slate-200/50 rounded-2xl animate-pulse"},H))}):e.length===0?u.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[u.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada pesan publik."}),u.jsx("p",{className:"text-slate-300 text-sm",children:"Jadilah yang pertama menulis!"})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"columns-1 md:columns-2 gap-6 space-y-6",children:P.map((H,me)=>u.jsxs("div",{className:"break-inside-avoid bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md hover:border-slate-200 hover:-translate-y-1 transition-all duration-300 group relative overflow-hidden",children:[u.jsxs("p",{className:"text-slate-800 text-[15px] font-medium leading-relaxed whitespace-pre-wrap break-words relative z-10",children:['"',H.content,'"']}),u.jsx("div",{className:"mt-4 flex justify-end",children:u.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-widest bg-slate-50 px-2 py-1 rounded",children:V(H.timestamp)})}),t&&u.jsx("button",{onClick:re=>S(H.id,re),disabled:_===H.id,className:"absolute top-2 right-2 p-2 bg-white/80 backdrop-blur-sm rounded-full text-slate-400 hover:text-red-500 hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100 border border-transparent hover:border-red-100 shadow-sm z-20",title:"Hapus Pesan",children:_===H.id?u.jsx("div",{className:"w-3.5 h-3.5 border-2 border-red-200 border-t-red-500 rounded-full animate-spin"}):u.jsx(Pr,{className:"w-3.5 h-3.5"})})]},H.id||me))}),u.jsxs("div",{className:"flex flex-col items-center gap-3 mt-12",children:[D&&u.jsxs("button",{onClick:N,className:"px-6 py-2.5 rounded-full bg-white border border-slate-200 text-slate-600 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Pesan Lainnya",u.jsx(fr,{className:"w-4 h-4"})]}),k&&u.jsxs("button",{onClick:M,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Sembunyikan (Tutup)",u.jsx(fr,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]})]})};function xj(){return null}function wj(){return null}var wn=(t=>(t.BACKGROUND_REMOVER="bg_remove",t.HD_UPSCALE="hd_upscale",t.CREATIVE_REMIX="creative_remix",t.COLORIZE="colorize",t.SKETCH_TO_REAL="sketch_real",t))(wn||{});const mu={id:{welcome:"Halo, Siapa Disana?",welcomeSubtitle:"Biar kita makin akrab, kenalan dulu yuk! Isi nama dan sekolahmu ya, biar enak ngobrolnya.",enterName:"Aku biasa dipanggil...",enterSchool:"Aku sekolah / kuliah di...",namePlaceholder:"Contoh: Rara",schoolPlaceholder:"Contoh: SMA 1 Jakarta / UI",accessButton:"Oke, Salam Kenal!",verifying:"Lagi mencatat...",deviceIdNote:"Santai aja, ini cuma biar aku inget temen baru.",credits:"Limit",adminMode:"Mode Admin",unlimited:"Tanpa Batas",logOut:"Ganti Akun",heroTitle:"Hai,",heroSubtitle:"Sudah siap bikin karya keren hari ini?",toolBgRemove:"Hapus Background",toolBgRemoveDesc:"Hapus latar belakang secara instan dan rapi.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Pertajam detail & resolusi tinggi agar tidak pecah.",toolRemix:"Creative Remix",toolRemixDesc:"Ubah gaya gambar dengan bantuan AI.",toolColorize:"Warnai Foto",toolColorizeDesc:"Ubah foto hitam putih jadi berwarna.",toolSketch:"Sketsa ke Nyata",toolSketchDesc:"Ubah coretan tangan jadi gambar realistis.",moreTools:"Lihat Lainnya",lessTools:"Sembunyikan",back:"Kembali",preview:"Pratinjau",changePhoto:"Ganti Foto",aiPrompt:"Instruksi AI",aiPromptPlaceholder:"Jelaskan bagaimana Anda ingin mengubah gambar ini...",generate:"Mulai Proses",generateMagic:"Buat Keajaiban",processing:"Memproses",processingStandard:"Sedang meracik gambar...",processingCloud:"Mengirim ke awan...",processingAI:"AI sedang bekerja...",refining:"Sedikit polesan lagi...",optimizingLocal:"Memproses di perangkatmu (Mode Hemat)...",initializing:"Siap-siap...",resultComparison:"Hasil Karya Kamu",download:"Simpan Gambar",reset:"Ulangi",original:"ASLI",result:"HASIL",bgColor:"Ganti Warna Belakang",uploadPrompt:"Pilih foto terbaikmu untuk diedit",settingsTitle:"Pengaturan Sistem",systemPref:"Preferensi AI",knowledgeMode:"Mode Pengetahuan (Database)",knowledgeModeDesc:"Hemat Kuota. AI hanya menjawab dari database lokal tanpa Gemini API.",totalKnowledge:"Total Memori Tersimpan",wikiMode:"Izinkan Wikipedia",wikiModeDesc:"Jika info tidak ada di database, cari di Wikipedia (Tetap hemat kuota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Kelola API Key untuk fitur chat cerdas dan edit gambar.",selectKeyBtn:"Ambil Key via AI Studio",orManually:"Kelola Key Manual",customKeyActive:"Key Pribadi Aktif",defaultKeyActive:"Key Sistem (Terbatas)",removeBgTitle:"Remove.bg API",removeBgDesc:"Engine khusus hapus background presisi tinggi.",supabaseTitle:"Supabase Engine",supabaseDesc:"Engine cadangan untuk pemrosesan gambar.",googleSearchTitle:"Google Search API",googleSearchDesc:"Opsi pencarian terakhir (Fallback) jika DB & Wiki gagal.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Tutup",save:"Simpan",active:"Aktif",inactive:"Nonaktif",addKeyPlaceholder:"Tempel API Key Gemini disini...",addKeyBtn:"Tambah Key",keyDisclaimerTitle:" Peringatan Penting",keyDisclaimerText:"Dengan menambahkan API Key pribadi, saya sadar bahwa segala bentuk penggunaan, kuota, dan keamanan key tersebut adalah tanggung jawab saya sepenuhnya. Fanra AI Studio tidak bertanggung jawab atas penyalahgunaan atau tagihan yang muncul akibat kelalaian pengguna.",consentCheckbox:"Saya mengerti dan setuju untuk melanjutkan.",keysStored:"Daftar Key",noKeysYet:"Belum ada key tersimpan. Masih pakai limit bawaan.",newChat:"Percakapan Baru",historyHeader:"Riwayat",loginToSave:"Login untuk simpan progres",loginBtn:"Masuk Akun",historyItem1:"editing foto sekolah...",historyItem2:"hapus background merah...",chatPlaceholder:"ketik pesan atau tanya Fanra...",chatDisclaimer:"Fanra bisa salah. cek lagi info penting.",chatFallbackError:"duh, koneksi gue lagi putus dan gue belum pernah dapet pertanyaan ini sebelumnya. cek internet lo atau API key nya deh.",chatOfflineMode:"(Mode Database) Info tidak ditemukan di database.",chatImageResponse:"wih, kirim gambar ya? sori nih gue baru bisa edit gambar kalo lo pake menu di atas itu. coba klik ikon-ikon di atas deh.",errorTitle:"Ups, Ada Masalah",insufficientCredits:"Yah, limit habis! Masukkan API Key di pengaturan agar Unlimited.",limitReachedHQ:"Kuota High Quality harian sudah penuh.",serviceBusy:"Server lagi ramai nih. Coba lagi sebentar ya.",networkError:"Koneksi internetmu sepertinya putus nyambung.",memoryError:"HP keberatan proses gambar ini. Coba gambar lain ya.",confirmTitle:"Yakin mau ganti?",confirmDesc:"Proses yang ini belum disimpan lho. Mau ganti aktivitas?",yesChange:"Ya, Ganti Aja",uploadTitle:"Unggah Foto",uploadDesc:"Klik atau tarik fotomu ke sini",dropHere:"Lepaskan fotonya!",invalidImage:"Format file ini tidak didukung. Pakai JPG/PNG ya.",toolLockedMsg:"Fitur ini sedang dalam pengembangan/perbaikan. Mohon pengertiannya ya, developer lagi ngoprek!",limitChatReached:"Energi Fanra habis untuk hari ini. Karena ini project mandiri dengan resource terbatas, chat dibatasi dulu ya. Besok reset kok! (Login untuk kuota lebih)",limitImageReached:"Limit upload gambar hari ini sudah habis. Server butuh istirahat karena resource terbatas. Coba lagi besok ya!"},en:{welcome:"Hello, Who's There?",welcomeSubtitle:"Let's be friends! Tell me your name and school so we can chat comfortably.",enterName:"You can call me...",enterSchool:"I study at...",namePlaceholder:"Ex: Sarah",schoolPlaceholder:"Ex: High School NY / MIT",accessButton:"Okay, Nice to Meet You!",verifying:"Writing that down...",deviceIdNote:"Relax, just remembering a new friend.",credits:"Credits",adminMode:"Admin Mode",unlimited:"Unlimited",logOut:"Switch Account",heroTitle:"Hi,",heroSubtitle:"Ready to make something cool today?",toolBgRemove:"Remove Background",toolBgRemoveDesc:"Instantly remove backgrounds cleanly.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Sharpen details to 4K resolution.",toolRemix:"Creative Remix",toolRemixDesc:"Reimagine image with AI assistance.",toolColorize:"Colorize Photo",toolColorizeDesc:"Turn black & white photos into color.",toolSketch:"Sketch to Real",toolSketchDesc:"Turn hand drawings into realistic images.",moreTools:"See More",lessTools:"Show Less",back:"Back",preview:"Preview",changePhoto:"Change Photo",aiPrompt:"AI Prompt",aiPromptPlaceholder:"Describe how you want to remix this image...",generate:"Generate",generateMagic:"Generate Magic",processing:"Processing",processingStandard:"Working magic...",processingCloud:"Sending to cloud...",processingAI:"AI is thinking...",refining:"Polishing details...",optimizingLocal:"Processing on device (Offline Mode)...",initializing:"Warming up...",resultComparison:"Your Masterpiece",download:"Save Image",reset:"Reset",original:"ORIGINAL",result:"RESULT",bgColor:"Background Color",uploadPrompt:"Upload an image to start editing",settingsTitle:"System Settings",systemPref:"AI Preferences",knowledgeMode:"Knowledge Mode (Database)",knowledgeModeDesc:"Save Quota. AI only answers from local database without Gemini API.",totalKnowledge:"Total Stored Memory",wikiMode:"Enable Wikipedia",wikiModeDesc:"If info not in DB, search Wikipedia (Still saves API quota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Manage keys for smart chat and image editing.",selectKeyBtn:"Get Key via AI Studio",orManually:"Manage Keys Manually",customKeyActive:"Custom Key Active",defaultKeyActive:"System Key (Limited)",removeBgTitle:"Remove.bg API",removeBgDesc:"Precision background removal engine.",supabaseTitle:"Supabase Engine",supabaseDesc:"Backup engine for image processing.",googleSearchTitle:"Google Search API",googleSearchDesc:"Fallback search option if DB & Wiki fail.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Close",save:"Save",active:"Active",inactive:"Inactive",addKeyPlaceholder:"Paste Gemini API Key here...",addKeyBtn:"Add Key",keyDisclaimerTitle:" Important Warning",keyDisclaimerText:"By adding personal API Keys, I acknowledge that all usage, quotas, and security of said keys are my sole responsibility. Fanra AI Studio is not liable for misuse or charges incurred due to user negligence.",consentCheckbox:"I understand and agree to proceed.",keysStored:"Key List",noKeysYet:"No keys saved yet. Using default limits.",newChat:"New Conversation",historyHeader:"History",loginToSave:"Login to save progress",loginBtn:"Login",historyItem1:"editing school photo...",historyItem2:"removing red background...",chatPlaceholder:"type a message or ask Fanra...",chatDisclaimer:"Fanra can make mistakes. Check important info.",chatFallbackError:"ugh, my connection is down and I haven't heard this question before. Check your internet or API key.",chatOfflineMode:"(DB Mode) Info not found in database.",chatImageResponse:"woah, sending an image? sorry, I can only edit images if you use the menu above. try clicking those icons.",errorTitle:"Whoops",insufficientCredits:"Out of credits! Enter your own Google Gemini API Key in settings for unlimited access.",limitReachedHQ:"High Quality daily limit reached.",serviceBusy:"Service is busy. Please try again.",networkError:"Connection issue. Check your internet.",memoryError:"Device memory low. Try a smaller image.",confirmTitle:"Change Activity?",confirmDesc:"Current progress will be lost. Are you sure?",yesChange:"Yes, Change",uploadTitle:"Upload Image",uploadDesc:"Click to browse or drag & drop",dropHere:"Drop it here!",invalidImage:"Please upload a valid image file (JPG/PNG).",toolLockedMsg:"This feature is under maintenance/development. Please understand, developer is working on it!",limitChatReached:"Fanra's energy is depleted for today. Due to limited resources on this personal project, chats are limited. Resets tomorrow!",limitImageReached:"Daily image upload limit reached. Server needs a break due to limited resources. Try again tomorrow!"}};var _j={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let bj,Ej;function Tj(){return{geminiUrl:bj,vertexUrl:Ej}}function Ij(t,e,n,r){var s,i;if(!(t!=null&&t.baseUrl)){const o=Tj();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:n:(i=o.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ms{}function be(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const i=e[s];return i!=null?String(i):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function p(t,e,n){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const d=l[c];p(d,e.slice(i+1),n[c])}else for(const c of l)p(c,e.slice(i+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];p(l[0],e.slice(i+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function h(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const i=s.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(a=>h(a,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Sj(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),i=r.split("."),o=new Set;let a=-1;for(let l=0;l<s.length;l++)if(s[l]==="*"){a=l;break}if(a!==-1&&i.length>a)for(let l=a;l<i.length;l++){const c=i[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}am(t,s,i,0,o)}}function am(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])am(l,e,n,r+1,s)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!s.has(c)),l={};for(const c of a)l[c]=o[c];for(const[c,d]of Object.entries(l)){const m=[];for(const g of n.slice(r))g==="*"?m.push(c):m.push(g);p(o,m,d)}for(const c of a)delete o[c]}}else{const o=t;i in o&&am(o[i],e,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N0(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kj(t){const e={},n=h(t,["operationName"]);n!=null&&p(e,["operationName"],n);const r=h(t,["resourceName"]);return r!=null&&p(e,["_url","resourceName"],r),e}function Cj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],Nj(o)),e}function Aj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],Rj(o)),e}function Nj(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Pj(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function Rj(t){const e={},n=h(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Mj(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function Pj(t){const e={},n=h(t,["video"]);return n!=null&&p(e,["video"],Uj(n)),e}function Mj(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],Oj(n)),e}function Dj(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function Lj(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function jj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],Fj(o)),e}function Fj(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function g1(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],Vj(o)),e}function Vj(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function Uj(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],N0(r));const s=h(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function Oj(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],N0(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var aw;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(aw||(aw={}));var lw;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(lw||(lw={}));var uw;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(uw||(uw={}));var Rn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Rn||(Rn={}));var cw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(cw||(cw={}));var dw;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(dw||(dw={}));var hw;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(hw||(hw={}));var fw;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(fw||(fw={}));var pw;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(pw||(pw={}));var mw;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(mw||(mw={}));var gw;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(gw||(gw={}));var yw;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(yw||(yw={}));var vw;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(vw||(vw={}));var xw;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(xw||(xw={}));var ww;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ww||(ww={}));var _w;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(_w||(_w={}));var bw;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(bw||(bw={}));var Ew;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Ew||(Ew={}));var Tw;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Tw||(Tw={}));var Ad;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ad||(Ad={}));var Iw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Iw||(Iw={}));var Sw;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Sw||(Sw={}));var kw;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(kw||(kw={}));var lm;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(lm||(lm={}));var Cw;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Cw||(Cw={}));var Aw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Aw||(Aw={}));var Nw;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Nw||(Nw={}));var Rw;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Rw||(Rw={}));var Pw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Pw||(Pw={}));var Mw;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Mw||(Mw={}));var Dw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Dw||(Dw={}));var Lw;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Lw||(Lw={}));var jw;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(jw||(jw={}));var Fw;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Fw||(Fw={}));var Vw;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Vw||(Vw={}));var Uw;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Uw||(Uw={}));var Ow;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ow||(Ow={}));var Bw;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Bw||(Bw={}));var zw;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(zw||(zw={}));var Gw;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Gw||(Gw={}));var Hw;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Hw||(Hw={}));var $w;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})($w||($w={}));var qw;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(qw||(qw={}));var Ww;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Ww||(Ww={}));var Kw;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Kw||(Kw={}));var Jw;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Jw||(Jw={}));var Yw;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Yw||(Yw={}));var Qw;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Qw||(Qw={}));var Xw;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Xw||(Xw={}));var Zw;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Zw||(Zw={}));var e_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(e_||(e_={}));var t_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(t_||(t_={}));var n_;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(n_||(n_={}));var r_;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(r_||(r_={}));var s_;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(s_||(s_={}));var yo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(yo||(yo={}));class um{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Fa{get text(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const m=[];for(const g of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[y,w]of Object.entries(g))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(w!==null||w!==void 0)&&m.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;d=!0,c+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const m of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(m))g!=="inlineData"&&(y!==null||y!==void 0)&&d.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,s,i,o,a,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,s,i,o,a,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class i_{}class o_{}class Bj{}class zj{}class Gj{}class Hj{}class a_{}class l_{}class u_{}class $j{}class Nd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Nd;let s;const i=e;return n?s=Aj(i):s=Cj(i),Object.assign(r,s),r}}class c_{}class d_{}class h_{}class f_{}class qj{}class Wj{}class Kj{}class R0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new R0,i=jj(e);return Object.assign(r,i),r}}class Jj{}class Yj{}class Qj{}class p_{}class Xj{get text(){var e,n,r;let s="",i=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,s+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?s:void 0}get data(){var e,n,r;let s="";const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&i.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Zj{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class P0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new P0,i=g1(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function y1(t,e){const n=Xe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function v1(t){return Array.isArray(t)?t.map(e=>Rd(e)):[Rd(t)]}function Rd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function x1(t){const e=Rd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function w1(t){const e=Rd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function m_(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function _1(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>m_(e)):[m_(t)]}function cm(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function g_(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function y_(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function pn(t){if(t==null)throw new Error("ContentUnion is required");return cm(t)?t:{role:"user",parts:_1(t)}}function M0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=pn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=pn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>pn(n)):[pn(e)]}function er(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(g_(t)||y_(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[pn(t)]}const e=[],n=[],r=cm(t[0]);for(const s of t){const i=cm(s);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(s);else{if(g_(s)||y_(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:_1(n)}),e}function eF(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Rn).includes(n[0].toUpperCase())?n[0].toUpperCase():Rn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Rn).includes(r.toUpperCase())?r.toUpperCase():Rn.TYPE_UNSPECIFIED})}}function Ro(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&eF(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Rn).includes(a.toUpperCase())?a.toUpperCase():Rn.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Ro(a);else if(r.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(Ro(c))}e[o]=l}else if(s.includes(o)){const l={};for(const[c,d]of Object.entries(a))l[c]=Ro(d);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function D0(t){return Ro(t)}function L0(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function j0(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function da(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ro(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ro(e.response));return t}function ha(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function tF(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function gs(t,e){if(typeof e!="string")throw new Error("name must be a string");return tF(t,e,"cachedContents")}function b1(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function oi(t){return N0(t)}function nF(t){return t!=null&&typeof t=="object"&&"name"in t}function rF(t){return t!=null&&typeof t=="object"&&"video"in t}function sF(t){return t!=null&&typeof t=="object"&&"uri"in t}function E1(t){var e;let n;if(nF(t)&&(n=t.name),!(sF(t)&&(n=t.uri,n===void 0))&&!(rF(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function T1(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function I1(t){for(const e of["models","tunedModels","publisherModels"])if(iF(t,e))return t[e];return[]}function iF(t,e){return t!==null&&typeof t=="object"&&e in t}function oF(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function aF(t,e={}){const n=[],r=new Set;for(const s of t){const i=s.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const o=oF(s,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function S1(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function lF(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function k1(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let i=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function fa(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function C1(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uF(t){const e={},n=h(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const r=h(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>GF(o))),p(e,["inlinedResponses"],i)}const s=h(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["inlinedEmbedContentResponses"],i)}return e}function cF(t){const e={},n=h(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsDestination","outputUriPrefix"]);r!=null&&p(e,["gcsUri"],r);const s=h(t,["bigqueryDestination","outputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function dF(t){const e={},n=h(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsDestination","outputUriPrefix"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&p(e,["bigqueryDestination","outputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function jc(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata","displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["metadata","state"]);s!=null&&p(e,["state"],C1(s));const i=h(t,["metadata","createTime"]);i!=null&&p(e,["createTime"],i);const o=h(t,["metadata","endTime"]);o!=null&&p(e,["endTime"],o);const a=h(t,["metadata","updateTime"]);a!=null&&p(e,["updateTime"],a);const l=h(t,["metadata","model"]);l!=null&&p(e,["model"],l);const c=h(t,["metadata","output"]);return c!=null&&p(e,["dest"],uF(k1(c))),e}function dm(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["state"]);s!=null&&p(e,["state"],C1(s));const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["createTime"]);o!=null&&p(e,["createTime"],o);const a=h(t,["startTime"]);a!=null&&p(e,["startTime"],a);const l=h(t,["endTime"]);l!=null&&p(e,["endTime"],l);const c=h(t,["updateTime"]);c!=null&&p(e,["updateTime"],c);const d=h(t,["model"]);d!=null&&p(e,["model"],d);const m=h(t,["inputConfig"]);m!=null&&p(e,["src"],hF(m));const g=h(t,["outputConfig"]);g!=null&&p(e,["dest"],cF(k1(g)));const y=h(t,["completionStats"]);return y!=null&&p(e,["completionStats"],y),e}function hF(t){const e={},n=h(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsSource","uris"]);r!=null&&p(e,["gcsUri"],r);const s=h(t,["bigquerySource","inputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function fF(t,e){const n={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=h(e,["fileName"]);r!=null&&p(n,["fileName"],r);const s=h(e,["inlinedRequests"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>zF(t,o))),p(n,["requests","requests"],i)}return n}function pF(t){const e={},n=h(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsSource","uris"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&p(e,["bigquerySource","inputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function mF(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function gF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],fa(t,r)),n}function yF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],fa(t,r)),n}function vF(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],xF(r));const s=h(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=h(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const l=h(t,["index"]);l!=null&&p(e,["index"],l);const c=h(t,["logprobsResult"]);c!=null&&p(e,["logprobsResult"],c);const d=h(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=h(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function xF(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function A1(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>YF(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function wF(t,e){const n={},r=h(t,["displayName"]);if(e!==void 0&&r!=null&&p(e,["batch","displayName"],r),h(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function _F(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["dest"]);return e!==void 0&&s!=null&&p(e,["outputConfig"],dF(lF(s))),n}function v_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["src"]);s!=null&&p(n,["batch","inputConfig"],fF(t,S1(t,s)));const i=h(e,["config"]);return i!=null&&wF(i,n),n}function bF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],Xe(t,r));const s=h(e,["src"]);s!=null&&p(n,["inputConfig"],pF(S1(t,s)));const i=h(e,["config"]);return i!=null&&_F(i,n),n}function EF(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["batch","displayName"],r),n}function TF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["src"]);s!=null&&p(n,["batch","inputConfig"],RF(t,s));const i=h(e,["config"]);return i!=null&&EF(i,n),n}function IF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],fa(t,r)),n}function SF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],fa(t,r)),n}function kF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);return i!=null&&p(e,["error"],i),e}function CF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);return i!=null&&p(e,["error"],i),e}function AF(t,e){const n={},r=h(e,["contents"]);if(r!=null){let i=M0(t,r);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["requests[]","request","content"],i)}const s=h(e,["config"]);return s!=null&&(p(n,["_self"],NF(s,n)),Sj(n,{"requests[].*":"requests[].request.*"})),n}function NF(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=h(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function RF(t,e){const n={},r=h(e,["fileName"]);r!=null&&p(n,["file_name"],r);const s=h(e,["inlinedRequests"]);return s!=null&&p(n,["requests"],AF(t,s)),n}function PF(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function MF(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function DF(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function LF(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],A1(pn(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const _=h(e,["responseMimeType"]);_!=null&&p(r,["responseMimeType"],_);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],D0(v));const E=h(e,["responseJsonSchema"]);if(E!=null&&p(r,["responseJsonSchema"],E),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=h(e,["safetySettings"]);if(n!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(k=>QF(k))),p(n,["safetySettings"],D)}const R=h(e,["tools"]);if(n!==void 0&&R!=null){let D=ha(R);Array.isArray(D)&&(D=D.map(k=>ZF(da(k)))),p(n,["tools"],D)}const L=h(e,["toolConfig"]);if(n!==void 0&&L!=null&&p(n,["toolConfig"],XF(L)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=h(e,["cachedContent"]);n!==void 0&&U!=null&&p(n,["cachedContent"],gs(t,U));const S=h(e,["responseModalities"]);S!=null&&p(r,["responseModalities"],S);const C=h(e,["mediaResolution"]);C!=null&&p(r,["mediaResolution"],C);const N=h(e,["speechConfig"]);if(N!=null&&p(r,["speechConfig"],L0(N)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=h(e,["thinkingConfig"]);M!=null&&p(r,["thinkingConfig"],M);const V=h(e,["imageConfig"]);V!=null&&p(r,["imageConfig"],BF(V));const P=h(e,["enableEnhancedCivicAnswers"]);return P!=null&&p(r,["enableEnhancedCivicAnswers"],P),r}function jF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>vF(c))),p(e,["candidates"],l)}const s=h(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=h(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=h(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=h(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function FF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],fa(t,r)),n}function VF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],fa(t,r)),n}function UF(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function OF(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function BF(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function zF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["request","model"],Xe(t,r));const s=h(e,["contents"]);if(s!=null){let a=er(s);Array.isArray(a)&&(a=a.map(l=>A1(l))),p(n,["request","contents"],a)}const i=h(e,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(e,["config"]);return o!=null&&p(n,["request","generationConfig"],LF(t,o,h(n,["request"],{}))),n}function GF(t){const e={},n=h(t,["response"]);n!=null&&p(e,["response"],jF(n));const r=h(t,["error"]);return r!=null&&p(e,["error"],r),e}function HF(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);if(e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),h(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function $F(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const i=h(t,["filter"]);return e!==void 0&&i!=null&&p(e,["_query","filter"],i),n}function qF(t){const e={},n=h(t,["config"]);return n!=null&&HF(n,e),e}function WF(t){const e={},n=h(t,["config"]);return n!=null&&$F(n,e),e}function KF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["operations"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>jc(o))),p(e,["batchJobs"],i)}return e}function JF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["batchPredictionJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>dm(o))),p(e,["batchJobs"],i)}return e}function YF(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],PF(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],MF(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],mF(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function QF(t){const e={},n=h(t,["category"]);if(n!=null&&p(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function XF(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],DF(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function ZF(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],UF(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],OF(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(cs||(cs={}));class qi{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eV extends ms{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qi(cs.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=v_(this.apiClient,e),r=n._url,s=be("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const d of l){const m=Object.assign({},d);if(m.systemInstruction){const g=m.systemInstruction;delete m.systemInstruction;const y=m.request;y.systemInstruction=g,m.request=y}c.push(m)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const i=this.getGcsUri(e),o=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${s}`;else if(o)r.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=bF(this.apiClient,e);return a=be("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>dm(d))}else{const c=v_(this.apiClient,e);return a=be("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>jc(d))}}async createEmbeddingsInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=TF(this.apiClient,e);return i=be("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>jc(l))}}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=VF(this.apiClient,e);return a=be("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>dm(d))}else{const c=FF(this.apiClient,e);return a=be("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>jc(d))}}async cancel(e){var n,r,s,i;let o="",a={};if(this.apiClient.isVertexAI()){const l=yF(this.apiClient,e);o=be("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=gF(this.apiClient,e);o=be("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=WF(e);return a=be("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=JF(d),g=new p_;return Object.assign(g,m),g})}else{const c=qF(e);return a=be("batches",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=KF(d),g=new p_;return Object.assign(g,m),g})}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=SF(this.apiClient,e);return a=be("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>CF(d))}else{const c=IF(this.apiClient,e);return a=be("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>kF(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tV(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function x_(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>TV(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function nV(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["contents"]);if(e!==void 0&&o!=null){let d=er(o);Array.isArray(d)&&(d=d.map(m=>x_(m))),p(e,["contents"],d)}const a=h(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],x_(pn(a)));const l=h(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(m=>SV(m))),p(e,["tools"],d)}const c=h(t,["toolConfig"]);if(e!==void 0&&c!=null&&p(e,["toolConfig"],IV(c)),h(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function rV(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["contents"]);if(e!==void 0&&o!=null){let m=er(o);Array.isArray(m)&&(m=m.map(g=>g)),p(e,["contents"],m)}const a=h(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],pn(a));const l=h(t,["tools"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>kV(g))),p(e,["tools"],m)}const c=h(t,["toolConfig"]);e!==void 0&&c!=null&&p(e,["toolConfig"],c);const d=h(t,["kmsKeyName"]);return e!==void 0&&d!=null&&p(e,["encryption_spec","kmsKeyName"],d),n}function sV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],y1(t,r));const s=h(e,["config"]);return s!=null&&nV(s,n),n}function iV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],y1(t,r));const s=h(e,["config"]);return s!=null&&rV(s,n),n}function oV(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],gs(t,r)),n}function aV(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],gs(t,r)),n}function lV(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function uV(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function cV(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function dV(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hV(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function fV(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function pV(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],gs(t,r)),n}function mV(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],gs(t,r)),n}function gV(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function yV(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function vV(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function xV(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function wV(t){const e={},n=h(t,["config"]);return n!=null&&vV(n,e),e}function _V(t){const e={},n=h(t,["config"]);return n!=null&&xV(n,e),e}function bV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function EV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function TV(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],cV(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],dV(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],tV(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function IV(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],hV(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function SV(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],gV(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],yV(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function kV(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>fV(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function CV(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function AV(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function NV(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],gs(t,r));const s=h(e,["config"]);return s!=null&&CV(s,n),n}function RV(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],gs(t,r));const s=h(e,["config"]);return s!=null&&AV(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PV extends ms{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qi(cs.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=iV(this.apiClient,e);return a=be("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=sV(this.apiClient,e);return a=be("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=mV(this.apiClient,e);return a=be("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=pV(this.apiClient,e);return a=be("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=aV(this.apiClient,e);return a=be("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=uV(d),g=new h_;return Object.assign(g,m),g})}else{const c=oV(this.apiClient,e);return a=be("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=lV(d),g=new h_;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=RV(this.apiClient,e);return a=be("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=NV(this.apiClient,e);return a=be("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=_V(e);return a=be("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=EV(d),g=new f_;return Object.assign(g,m),g})}else{const c=wV(e);return a=be("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=bV(d),g=new f_;return Object.assign(g,m),g})}}}function Pd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function w_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ue(t){return this instanceof Ue?(this.v=t,this):new Ue(t)}function mr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(y){return function(w){return Promise.resolve(w).then(y,m)}}function a(y,w){r[y]&&(s[y]=function(x){return new Promise(function(_,v){i.push([y,x,_,v])>1||l(y,x)})},w&&(s[y]=w(s[y])))}function l(y,w){try{c(r[y](w))}catch(x){g(i[0][3],x)}}function c(y){y.value instanceof Ue?Promise.resolve(y.value.v).then(d,m):g(i[0][2],y)}function d(y){l("next",y)}function m(y){l("throw",y)}function g(y,w){y(w),i.shift(),i.length&&l(i[0][0],i[0][1])}}function gr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof w_=="function"?w_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MV(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:N1(n)}function N1(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function DV(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function __(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let i=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),i&&!N1(t[r])&&(i=!1),r++;i?e.push(...s):e.pop()}return e}class LV{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new jV(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class jV{constructor(e,n,r,s={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=i,this.sendPromise=Promise.resolve(),DV(i)}async sendMessage(e){var n;await this.sendPromise;const r=pn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,o,a;const l=await s,c=(o=(i=l.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,d=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];d!=null&&(g=(a=d.slice(m))!==null&&a!==void 0?a:[]);const y=c?[c]:[];this.recordHistory(r,y,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=pn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const i=await s;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?__(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return mr(this,arguments,function*(){var s,i,o,a,l,c;const d=[];try{for(var m=!0,g=gr(e),y;y=yield Ue(g.next()),s=y.done,!s;m=!0){a=y.value,m=!1;const w=a;if(MV(w)){const x=(c=(l=w.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;x!==void 0&&d.push(x)}yield yield Ue(w)}}catch(w){i={error:w}}finally{try{!m&&!s&&(o=g.return)&&(yield Ue(o.call(g)))}finally{if(i)throw i.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(i=>i.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...__(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Sh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FV(t){const e={},n=h(t,["file"]);return n!=null&&p(e,["file"],n),e}function VV(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function UV(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],E1(n)),e}function OV(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function BV(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],E1(n)),e}function zV(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function GV(t){const e={},n=h(t,["config"]);return n!=null&&zV(n,e),e}function HV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["files"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $V extends ms{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qi(cs.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=GV(e);return i=be("files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=HV(l),d=new Jj;return Object.assign(d,c),d})}}async createInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=FV(e);return i=be("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=VV(l),d=new Yj;return Object.assign(d,c),d})}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=BV(e);return i=be("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=UV(e);return i=be("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=OV(l),d=new Qj;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fc(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function qV(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>lU(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function WV(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function KV(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function JV(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function YV(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=h(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=h(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=h(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const l=h(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const c=h(t,["maxOutputTokens"]);c!=null&&p(e,["maxOutputTokens"],c);const d=h(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const m=h(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=h(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=h(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const w=h(t,["responseModalities"]);w!=null&&p(e,["responseModalities"],w);const x=h(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const _=h(t,["routingConfig"]);_!=null&&p(e,["routingConfig"],_);const v=h(t,["seed"]);v!=null&&p(e,["seed"],v);const E=h(t,["speechConfig"]);E!=null&&p(e,["speechConfig"],E);const T=h(t,["stopSequences"]);T!=null&&p(e,["stopSequences"],T);const R=h(t,["temperature"]);R!=null&&p(e,["temperature"],R);const L=h(t,["thinkingConfig"]);L!=null&&p(e,["thinkingConfig"],L);const U=h(t,["topK"]);U!=null&&p(e,["topK"],U);const S=h(t,["topP"]);if(S!=null&&p(e,["topP"],S),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function QV(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function XV(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function ZV(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],j0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],qV(pn(w)));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let U=ha(x);Array.isArray(U)&&(U=U.map(S=>cU(da(S)))),p(e,["setup","tools"],U)}const _=h(t,["sessionResumption"]);e!==void 0&&_!=null&&p(e,["setup","sessionResumption"],uU(_));const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const E=h(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],E);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const R=h(t,["contextWindowCompression"]);e!==void 0&&R!=null&&p(e,["setup","contextWindowCompression"],R);const L=h(t,["proactivity"]);if(e!==void 0&&L!=null&&p(e,["setup","proactivity"],L),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function eU(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],YV(r));const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],j0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],pn(w));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let S=ha(x);Array.isArray(S)&&(S=S.map(C=>dU(da(C)))),p(e,["setup","tools"],S)}const _=h(t,["sessionResumption"]);e!==void 0&&_!=null&&p(e,["setup","sessionResumption"],_);const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const E=h(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],E);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const R=h(t,["contextWindowCompression"]);e!==void 0&&R!=null&&p(e,["setup","contextWindowCompression"],R);const L=h(t,["proactivity"]);e!==void 0&&L!=null&&p(e,["setup","proactivity"],L);const U=h(t,["explicitVadSignal"]);return e!==void 0&&U!=null&&p(e,["setup","explicitVadSignal"],U),n}function tU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],Xe(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],ZV(s,n)),n}function nU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],Xe(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],eU(s,n)),n}function rU(t){const e={},n=h(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function sU(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["weightedPrompts"],r)}return e}function iU(t){const e={},n=h(t,["media"]);if(n!=null){let c=v1(n);Array.isArray(c)&&(c=c.map(d=>Fc(d))),p(e,["mediaChunks"],c)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],Fc(w1(r)));const s=h(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(t,["video"]);i!=null&&p(e,["video"],Fc(x1(i)));const o=h(t,["text"]);o!=null&&p(e,["text"],o);const a=h(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=h(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function oU(t){const e={},n=h(t,["media"]);if(n!=null){let c=v1(n);Array.isArray(c)&&(c=c.map(d=>d)),p(e,["mediaChunks"],c)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],w1(r));const s=h(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(t,["video"]);i!=null&&p(e,["video"],x1(i));const o=h(t,["text"]);o!=null&&p(e,["text"],o);const a=h(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=h(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function aU(t){const e={},n=h(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const r=h(t,["serverContent"]);r!=null&&p(e,["serverContent"],r);const s=h(t,["toolCall"]);s!=null&&p(e,["toolCall"],s);const i=h(t,["toolCallCancellation"]);i!=null&&p(e,["toolCallCancellation"],i);const o=h(t,["usageMetadata"]);o!=null&&p(e,["usageMetadata"],hU(o));const a=h(t,["goAway"]);a!=null&&p(e,["goAway"],a);const l=h(t,["sessionResumptionUpdate"]);l!=null&&p(e,["sessionResumptionUpdate"],l);const c=h(t,["voiceActivityDetectionSignal"]);return c!=null&&p(e,["voiceActivityDetectionSignal"],c),e}function lU(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],WV(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],KV(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],Fc(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function uU(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function cU(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],QV(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],XV(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function dU(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>JV(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function hU(t){const e={},n=h(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const r=h(t,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const s=h(t,["candidatesTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const i=h(t,["toolUsePromptTokenCount"]);i!=null&&p(e,["toolUsePromptTokenCount"],i);const o=h(t,["thoughtsTokenCount"]);o!=null&&p(e,["thoughtsTokenCount"],o);const a=h(t,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);const l=h(t,["promptTokensDetails"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["promptTokensDetails"],y)}const c=h(t,["cacheTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["cacheTokensDetails"],y)}const d=h(t,["candidatesTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["responseTokensDetails"],y)}const m=h(t,["toolUsePromptTokensDetails"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["toolUsePromptTokensDetails"],y)}const g=h(t,["trafficType"]);return g!=null&&p(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fU(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function pU(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],mU(r));const s=h(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=h(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const l=h(t,["index"]);l!=null&&p(e,["index"],l);const c=h(t,["logprobsResult"]);c!=null&&p(e,["logprobsResult"],c);const d=h(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=h(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function mU(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function gU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["contents"]);if(s!=null){let i=er(s);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["contents"],i)}return n}function yU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["tokensInfo"],s)}return e}function vU(t){const e={},n=h(t,["values"]);n!=null&&p(e,["values"],n);const r=h(t,["statistics"]);return r!=null&&p(e,["statistics"],xU(r)),e}function xU(t){const e={},n=h(t,["truncated"]);n!=null&&p(e,["truncated"],n);const r=h(t,["token_count"]);return r!=null&&p(e,["tokenCount"],r),e}function kh(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>C6(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function wU(t){const e={},n=h(t,["controlType"]);n!=null&&p(e,["controlType"],n);const r=h(t,["enableControlImageComputation"]);return r!=null&&p(e,["computeControl"],r),e}function _U(t){const e={};if(h(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function bU(t,e){const n={},r=h(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],pn(r));const s=h(t,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>D1(a))),p(e,["tools"],o)}const i=h(t,["generationConfig"]);return e!==void 0&&i!=null&&p(e,["generationConfig"],f6(i)),n}function EU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["contents"]);if(s!=null){let o=er(s);Array.isArray(o)&&(o=o.map(a=>kh(a))),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&_U(i),n}function TU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["contents"]);if(s!=null){let o=er(s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&bU(i,n),n}function IU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);r!=null&&p(e,["totalTokens"],r);const s=h(t,["cachedContentTokenCount"]);return s!=null&&p(e,["cachedContentTokenCount"],s),e}function SU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);return r!=null&&p(e,["totalTokens"],r),e}function kU(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],Xe(t,r)),n}function CU(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],Xe(t,r)),n}function AU(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function NU(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function RU(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=h(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=h(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const w=h(t,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const x=h(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const _=h(t,["addWatermark"]);e!==void 0&&_!=null&&p(e,["parameters","addWatermark"],_);const v=h(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const E=h(t,["editMode"]);e!==void 0&&E!=null&&p(e,["parameters","editMode"],E);const T=h(t,["baseSteps"]);return e!==void 0&&T!=null&&p(e,["parameters","editConfig","baseSteps"],T),n}function PU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["referenceImages"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>D6(l))),p(n,["instances[0]","referenceImages"],a)}const o=h(e,["config"]);return o!=null&&RU(o,n),n}function MU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Ch(i))),p(e,["generatedImages"],s)}return e}function DU(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=h(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function LU(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["instances[]","title"],s);const i=h(t,["outputDimensionality"]);e!==void 0&&i!=null&&p(e,["parameters","outputDimensionality"],i);const o=h(t,["mimeType"]);e!==void 0&&o!=null&&p(e,["instances[]","mimeType"],o);const a=h(t,["autoTruncate"]);return e!==void 0&&a!=null&&p(e,["parameters","autoTruncate"],a),n}function jU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["contents"]);if(s!=null){let a=M0(t,s);Array.isArray(a)&&(a=a.map(l=>l)),p(n,["requests[]","content"],a)}const i=h(e,["config"]);i!=null&&DU(i,n);const o=h(e,["model"]);return o!==void 0&&p(n,["requests[]","model"],Xe(t,o)),n}function FU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["contents"]);if(s!=null){let o=M0(t,s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["instances[]","content"],o)}const i=h(e,["config"]);return i!=null&&LU(i,n),n}function VU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["embeddings"],i)}const s=h(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function UU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>vU(o))),p(e,["embeddings"],i)}const s=h(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function OU(t){const e={},n=h(t,["endpoint"]);n!=null&&p(e,["name"],n);const r=h(t,["deployedModelId"]);return r!=null&&p(e,["deployedModelId"],r),e}function BU(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function zU(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function GU(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function HU(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function $U(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],kh(pn(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const _=h(e,["responseMimeType"]);_!=null&&p(r,["responseMimeType"],_);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],D0(v));const E=h(e,["responseJsonSchema"]);if(E!=null&&p(r,["responseJsonSchema"],E),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=h(e,["safetySettings"]);if(n!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(k=>L6(k))),p(n,["safetySettings"],D)}const R=h(e,["tools"]);if(n!==void 0&&R!=null){let D=ha(R);Array.isArray(D)&&(D=D.map(k=>z6(da(k)))),p(n,["tools"],D)}const L=h(e,["toolConfig"]);if(n!==void 0&&L!=null&&p(n,["toolConfig"],B6(L)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=h(e,["cachedContent"]);n!==void 0&&U!=null&&p(n,["cachedContent"],gs(t,U));const S=h(e,["responseModalities"]);S!=null&&p(r,["responseModalities"],S);const C=h(e,["mediaResolution"]);C!=null&&p(r,["mediaResolution"],C);const N=h(e,["speechConfig"]);if(N!=null&&p(r,["speechConfig"],L0(N)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=h(e,["thinkingConfig"]);M!=null&&p(r,["thinkingConfig"],M);const V=h(e,["imageConfig"]);V!=null&&p(r,["imageConfig"],v6(V));const P=h(e,["enableEnhancedCivicAnswers"]);return P!=null&&p(r,["enableEnhancedCivicAnswers"],P),r}function qU(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],pn(s));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const _=h(e,["responseMimeType"]);_!=null&&p(r,["responseMimeType"],_);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],D0(v));const E=h(e,["responseJsonSchema"]);E!=null&&p(r,["responseJsonSchema"],E);const T=h(e,["routingConfig"]);T!=null&&p(r,["routingConfig"],T);const R=h(e,["modelSelectionConfig"]);R!=null&&p(r,["modelConfig"],R);const L=h(e,["safetySettings"]);if(n!==void 0&&L!=null){let me=L;Array.isArray(me)&&(me=me.map(re=>re)),p(n,["safetySettings"],me)}const U=h(e,["tools"]);if(n!==void 0&&U!=null){let me=ha(U);Array.isArray(me)&&(me=me.map(re=>D1(da(re)))),p(n,["tools"],me)}const S=h(e,["toolConfig"]);n!==void 0&&S!=null&&p(n,["toolConfig"],S);const C=h(e,["labels"]);n!==void 0&&C!=null&&p(n,["labels"],C);const N=h(e,["cachedContent"]);n!==void 0&&N!=null&&p(n,["cachedContent"],gs(t,N));const M=h(e,["responseModalities"]);M!=null&&p(r,["responseModalities"],M);const V=h(e,["mediaResolution"]);V!=null&&p(r,["mediaResolution"],V);const P=h(e,["speechConfig"]);P!=null&&p(r,["speechConfig"],L0(P));const D=h(e,["audioTimestamp"]);D!=null&&p(r,["audioTimestamp"],D);const k=h(e,["thinkingConfig"]);k!=null&&p(r,["thinkingConfig"],k);const H=h(e,["imageConfig"]);if(H!=null&&p(r,["imageConfig"],x6(H)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function b_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["contents"]);if(s!=null){let o=er(s);Array.isArray(o)&&(o=o.map(a=>kh(a))),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(n,["generationConfig"],$U(t,i,n)),n}function E_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["contents"]);if(s!=null){let o=er(s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(n,["generationConfig"],qU(t,i,n)),n}function T_(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>pU(c))),p(e,["candidates"],l)}const s=h(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=h(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=h(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=h(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function I_(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),p(e,["candidates"],c)}const s=h(t,["createTime"]);s!=null&&p(e,["createTime"],s);const i=h(t,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const o=h(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=h(t,["responseId"]);a!=null&&p(e,["responseId"],a);const l=h(t,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function WU(t,e){const n={};if(h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const i=h(t,["guidanceScale"]);if(e!==void 0&&i!=null&&p(e,["parameters","guidanceScale"],i),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=h(t,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const l=h(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&p(e,["parameters","includeSafetyAttributes"],l);const c=h(t,["includeRaiReason"]);e!==void 0&&c!=null&&p(e,["parameters","includeRaiReason"],c);const d=h(t,["language"]);e!==void 0&&d!=null&&p(e,["parameters","language"],d);const m=h(t,["outputMimeType"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","mimeType"],m);const g=h(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g),h(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=h(t,["imageSize"]);if(e!==void 0&&y!=null&&p(e,["parameters","sampleImageSize"],y),h(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function KU(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=h(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=h(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const w=h(t,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const x=h(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const _=h(t,["addWatermark"]);e!==void 0&&_!=null&&p(e,["parameters","addWatermark"],_);const v=h(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const E=h(t,["imageSize"]);e!==void 0&&E!=null&&p(e,["parameters","sampleImageSize"],E);const T=h(t,["enhancePrompt"]);return e!==void 0&&T!=null&&p(e,["parameters","enhancePrompt"],T),n}function JU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&WU(i,n),n}function YU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&KU(i,n),n}function QU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>u6(o))),p(e,["generatedImages"],i)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],P1(s)),e}function XU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Ch(o))),p(e,["generatedImages"],i)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],M1(s)),e}function ZU(t,e){const n={},r=h(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=h(t,["durationSeconds"]);if(e!==void 0&&s!=null&&p(e,["parameters","durationSeconds"],s),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=h(t,["aspectRatio"]);e!==void 0&&i!=null&&p(e,["parameters","aspectRatio"],i);const o=h(t,["resolution"]);e!==void 0&&o!=null&&p(e,["parameters","resolution"],o);const a=h(t,["personGeneration"]);if(e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a),h(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=h(t,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const c=h(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&p(e,["parameters","enhancePrompt"],c),h(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=h(t,["lastFrame"]);e!==void 0&&d!=null&&p(e,["instances[0]","lastFrame"],Ah(d));const m=h(t,["referenceImages"]);if(e!==void 0&&m!=null){let g=m;Array.isArray(g)&&(g=g.map(y=>tO(y))),p(e,["instances[0]","referenceImages"],g)}if(h(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function e6(t,e){const n={},r=h(t,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const i=h(t,["fps"]);e!==void 0&&i!=null&&p(e,["parameters","fps"],i);const o=h(t,["durationSeconds"]);e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o);const a=h(t,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const l=h(t,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const c=h(t,["resolution"]);e!==void 0&&c!=null&&p(e,["parameters","resolution"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["pubsubTopic"]);e!==void 0&&m!=null&&p(e,["parameters","pubsubTopic"],m);const g=h(t,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const y=h(t,["enhancePrompt"]);e!==void 0&&y!=null&&p(e,["parameters","enhancePrompt"],y);const w=h(t,["generateAudio"]);e!==void 0&&w!=null&&p(e,["parameters","generateAudio"],w);const x=h(t,["lastFrame"]);e!==void 0&&x!=null&&p(e,["instances[0]","lastFrame"],Er(x));const _=h(t,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(R=>nO(R))),p(e,["instances[0]","referenceImages"],T)}const v=h(t,["mask"]);e!==void 0&&v!=null&&p(e,["instances[0]","mask"],eO(v));const E=h(t,["compressionQuality"]);return e!==void 0&&E!=null&&p(e,["parameters","compressionQuality"],E),n}function t6(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],i6(o)),e}function n6(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],o6(o)),e}function r6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["image"]);i!=null&&p(n,["instances[0]","image"],Ah(i));const o=h(e,["video"]);o!=null&&p(n,["instances[0]","video"],L1(o));const a=h(e,["source"]);a!=null&&a6(a,n);const l=h(e,["config"]);return l!=null&&ZU(l,n),n}function s6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["image"]);i!=null&&p(n,["instances[0]","image"],Er(i));const o=h(e,["video"]);o!=null&&p(n,["instances[0]","video"],j1(o));const a=h(e,["source"]);a!=null&&l6(a,n);const l=h(e,["config"]);return l!=null&&e6(l,n),n}function i6(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>d6(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function o6(t){const e={},n=h(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>h6(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function a6(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Ah(s));const i=h(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],L1(i)),n}function l6(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Er(s));const i=h(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],j1(i)),n}function u6(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],w6(n));const r=h(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(t,["_self"]);return s!=null&&p(e,["safetyAttributes"],P1(s)),e}function Ch(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],R1(n));const r=h(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(t,["_self"]);s!=null&&p(e,["safetyAttributes"],M1(s));const i=h(t,["prompt"]);return i!=null&&p(e,["enhancedPrompt"],i),e}function c6(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["mask"],R1(n));const r=h(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["labels"],s)}return e}function d6(t){const e={},n=h(t,["video"]);return n!=null&&p(e,["video"],X6(n)),e}function h6(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],Z6(n)),e}function f6(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=h(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=h(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=h(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const l=h(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const c=h(t,["maxOutputTokens"]);c!=null&&p(e,["maxOutputTokens"],c);const d=h(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const m=h(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=h(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=h(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const w=h(t,["responseModalities"]);w!=null&&p(e,["responseModalities"],w);const x=h(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const _=h(t,["routingConfig"]);_!=null&&p(e,["routingConfig"],_);const v=h(t,["seed"]);v!=null&&p(e,["seed"],v);const E=h(t,["speechConfig"]);E!=null&&p(e,["speechConfig"],E);const T=h(t,["stopSequences"]);T!=null&&p(e,["stopSequences"],T);const R=h(t,["temperature"]);R!=null&&p(e,["temperature"],R);const L=h(t,["thinkingConfig"]);L!=null&&p(e,["thinkingConfig"],L);const U=h(t,["topK"]);U!=null&&p(e,["topK"],U);const S=h(t,["topP"]);if(S!=null&&p(e,["topP"],S),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function p6(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],Xe(t,r)),n}function m6(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],Xe(t,r)),n}function g6(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function y6(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function v6(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function x6(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);r!=null&&p(e,["imageSize"],r);const s=h(t,["outputMimeType"]);s!=null&&p(e,["imageOutputOptions","mimeType"],s);const i=h(t,["outputCompressionQuality"]);return i!=null&&p(e,["imageOutputOptions","compressionQuality"],i),e}function w6(t){const e={},n=h(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],oi(n));const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function R1(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["imageBytes"],oi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Ah(t){const e={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],oi(n));const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Er(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["imageBytes"]);r!=null&&p(e,["bytesBase64Encoded"],oi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function _6(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=h(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=h(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=h(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],T1(t,a)),r}function b6(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=h(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=h(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=h(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],T1(t,a)),r}function E6(t,e){const n={},r=h(e,["config"]);return r!=null&&_6(t,r,n),n}function T6(t,e){const n={},r=h(e,["config"]);return r!=null&&b6(t,r,n),n}function I6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let i=I1(s);Array.isArray(i)&&(i=i.map(o=>hm(o))),p(e,["models"],i)}return e}function S6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let i=I1(s);Array.isArray(i)&&(i=i.map(o=>fm(o))),p(e,["models"],i)}return e}function k6(t){const e={},n=h(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const r=h(t,["segmentationClasses"]);r!=null&&p(e,["maskClasses"],r);const s=h(t,["maskDilation"]);return s!=null&&p(e,["dilation"],s),e}function hm(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);s!=null&&p(e,["description"],s);const i=h(t,["version"]);i!=null&&p(e,["version"],i);const o=h(t,["_self"]);o!=null&&p(e,["tunedModelInfo"],G6(o));const a=h(t,["inputTokenLimit"]);a!=null&&p(e,["inputTokenLimit"],a);const l=h(t,["outputTokenLimit"]);l!=null&&p(e,["outputTokenLimit"],l);const c=h(t,["supportedGenerationMethods"]);c!=null&&p(e,["supportedActions"],c);const d=h(t,["temperature"]);d!=null&&p(e,["temperature"],d);const m=h(t,["maxTemperature"]);m!=null&&p(e,["maxTemperature"],m);const g=h(t,["topP"]);g!=null&&p(e,["topP"],g);const y=h(t,["topK"]);y!=null&&p(e,["topK"],y);const w=h(t,["thinking"]);return w!=null&&p(e,["thinking"],w),e}function fm(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);s!=null&&p(e,["description"],s);const i=h(t,["versionId"]);i!=null&&p(e,["version"],i);const o=h(t,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>OU(g))),p(e,["endpoints"],m)}const a=h(t,["labels"]);a!=null&&p(e,["labels"],a);const l=h(t,["_self"]);l!=null&&p(e,["tunedModelInfo"],H6(l));const c=h(t,["defaultCheckpointId"]);c!=null&&p(e,["defaultCheckpointId"],c);const d=h(t,["checkpoints"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),p(e,["checkpoints"],m)}return e}function C6(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],BU(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],zU(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],fU(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function A6(t){const e={},n=h(t,["productImage"]);return n!=null&&p(e,["image"],Er(n)),e}function N6(t,e){const n={},r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["baseSteps"]);e!==void 0&&s!=null&&p(e,["parameters","baseSteps"],s);const i=h(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=h(t,["seed"]);e!==void 0&&o!=null&&p(e,["parameters","seed"],o);const a=h(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const l=h(t,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const c=h(t,["addWatermark"]);e!==void 0&&c!=null&&p(e,["parameters","addWatermark"],c);const d=h(t,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const m=h(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const g=h(t,["enhancePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","enhancePrompt"],g);const y=h(t,["labels"]);return e!==void 0&&y!=null&&p(e,["labels"],y),n}function R6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["source"]);s!=null&&M6(s,n);const i=h(e,["config"]);return i!=null&&N6(i,n),n}function P6(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Ch(s))),p(e,["generatedImages"],r)}return e}function M6(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["personImage"]);e!==void 0&&s!=null&&p(e,["instances[0]","personImage","image"],Er(s));const i=h(t,["productImages"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>A6(a))),p(e,["instances[0]","productImages"],o)}return n}function D6(t){const e={},n=h(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],Er(n));const r=h(t,["referenceId"]);r!=null&&p(e,["referenceId"],r);const s=h(t,["referenceType"]);s!=null&&p(e,["referenceType"],s);const i=h(t,["maskImageConfig"]);i!=null&&p(e,["maskImageConfig"],k6(i));const o=h(t,["controlImageConfig"]);o!=null&&p(e,["controlImageConfig"],wU(o));const a=h(t,["styleImageConfig"]);a!=null&&p(e,["styleImageConfig"],a);const l=h(t,["subjectImageConfig"]);return l!=null&&p(e,["subjectImageConfig"],l),e}function P1(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function M1(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function L6(t){const e={},n=h(t,["category"]);if(n!=null&&p(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function j6(t){const e={},n=h(t,["image"]);return n!=null&&p(e,["image"],Er(n)),e}function F6(t,e){const n={},r=h(t,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const s=h(t,["maxPredictions"]);e!==void 0&&s!=null&&p(e,["parameters","maxPredictions"],s);const i=h(t,["confidenceThreshold"]);e!==void 0&&i!=null&&p(e,["parameters","confidenceThreshold"],i);const o=h(t,["maskDilation"]);e!==void 0&&o!=null&&p(e,["parameters","maskDilation"],o);const a=h(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","binaryColorThreshold"],a);const l=h(t,["labels"]);return e!==void 0&&l!=null&&p(e,["labels"],l),n}function V6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["source"]);s!=null&&O6(s,n);const i=h(e,["config"]);return i!=null&&F6(i,n),n}function U6(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>c6(s))),p(e,["generatedMasks"],r)}return e}function O6(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Er(s));const i=h(t,["scribbleImage"]);return e!==void 0&&i!=null&&p(e,["instances[0]","scribble"],j6(i)),n}function B6(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],GU(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function z6(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],g6(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],y6(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function D1(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>HU(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function G6(t){const e={},n=h(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function H6(t){const e={},n=h(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function $6(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function q6(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function W6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","name"],Xe(t,r));const s=h(e,["config"]);return s!=null&&$6(s,n),n}function K6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["config"]);return s!=null&&q6(s,n),n}function J6(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&p(e,["parameters","safetySetting"],s);const i=h(t,["personGeneration"]);e!==void 0&&i!=null&&p(e,["parameters","personGeneration"],i);const o=h(t,["includeRaiReason"]);e!==void 0&&o!=null&&p(e,["parameters","includeRaiReason"],o);const a=h(t,["outputMimeType"]);e!==void 0&&a!=null&&p(e,["parameters","outputOptions","mimeType"],a);const l=h(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&p(e,["parameters","outputOptions","compressionQuality"],l);const c=h(t,["enhanceInputImage"]);e!==void 0&&c!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],c);const d=h(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const m=h(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=h(t,["numberOfImages"]);e!==void 0&&g!=null&&p(e,["parameters","sampleCount"],g);const y=h(t,["mode"]);return e!==void 0&&y!=null&&p(e,["parameters","mode"],y),n}function Y6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=h(e,["image"]);s!=null&&p(n,["instances[0]","image"],Er(s));const i=h(e,["upscaleFactor"]);i!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],i);const o=h(e,["config"]);return o!=null&&J6(o,n),n}function Q6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Ch(i))),p(e,["generatedImages"],s)}return e}function X6(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],oi(r));const s=h(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function Z6(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],oi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function eO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["_self"],Er(n));const r=h(t,["maskMode"]);return r!=null&&p(e,["maskMode"],r),e}function tO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["image"],Ah(n));const r=h(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function nO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["image"],Er(n));const r=h(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function L1(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["videoBytes"]);r!=null&&p(e,["encodedVideo"],oi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["encoding"],s),e}function j1(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["videoBytes"]);r!=null&&p(e,["bytesBase64Encoded"],oi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rO(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["displayName"],r),n}function sO(t){const e={},n=h(t,["config"]);return n!=null&&rO(n,e),e}function iO(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function oO(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&iO(r,e),e}function aO(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function lO(t,e){const n={},r=h(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["customMetadata"],i)}const s=h(t,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),n}function uO(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],dO(o)),e}function cO(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["fileName"]);r!=null&&p(e,["fileName"],r);const s=h(t,["config"]);return s!=null&&lO(s,e),e}function dO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function hO(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function fO(t){const e={},n=h(t,["config"]);return n!=null&&hO(n,e),e}function pO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["fileSearchStores"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["fileSearchStores"],i)}return e}function F1(t,e){const n={},r=h(t,["mimeType"]);e!==void 0&&r!=null&&p(e,["mimeType"],r);const s=h(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const i=h(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["customMetadata"],a)}const o=h(t,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),n}function mO(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["config"]);return r!=null&&F1(r,e),e}function gO(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yO="Content-Type",vO="X-Server-Timeout",xO="User-Agent",pm="x-goog-api-client",wO="1.34.0",_O=`google-genai-sdk/${wO}`,bO="v1beta1",EO="v1beta";class TO{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:bO,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:EO,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.unaryApiCall(s,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,i]of Object.entries(n))typeof i=="object"?r[s]=Object.assign(Object.assign({},r[s]),i):i!==void 0&&(r[s]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.streamApiCall(s,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>i.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}s&&s.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&IO(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await S_(s),new um(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await S_(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return mr(this,arguments,function*(){var r;const s=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:d}=yield Ue(s.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(d,{stream:!0});try{const w=JSON.parse(m);if("error"in w){const x=JSON.parse(JSON.stringify(w.error)),_=x.status,v=x.code,E=`got status: ${_}. ${JSON.stringify(w)}`;if(v>=400&&v<600)throw new Sh({message:E,status:v})}}catch(w){if(w.name==="ApiError")throw w}o+=m;let g=-1,y=0;for(;;){g=-1,y=0;for(const _ of l){const v=o.indexOf(_);v!==-1&&(g===-1||v<g)&&(g=v,y=_.length)}if(g===-1)break;const w=o.substring(0,g);o=o.substring(g+y);const x=w.trim();if(x.startsWith(a)){const _=x.substring(a.length).trim();try{const v=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ue(new um(v))}catch(v){throw new Error(`exception parsing stream chunk ${_}. ${v}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=_O+" "+this.clientOptions.userAgentExtra;return e[xO]=n,e[pm]=n,e[yO]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,i]of Object.entries(e.headers))r.append(s,i);e.timeout&&e.timeout>0&&r.append(vO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);s.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l={file:s},c=this.getFileName(e),d=be("upload/v1beta/files",l._url),m=await this.fetchUploadUrl(d,s.sizeBytes,s.mimeType,c,l,n==null?void 0:n.httpOptions);return i.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var s;const i=this.clientOptions.uploader,o=await i.stat(n),a=String(o.size),l=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),m={};r!=null&&F1(r,m);const g=await this.fetchUploadUrl(c,a,l,d,m,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,i,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const c=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function S_(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new Sh({message:s,status:n}):new Error(s)}}function IO(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,o){const a=Object.assign({},i);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],d=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=r(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SO="mcp_used/unknown";let kO=!1;function V1(t){for(const e of t)if(CO(e)||typeof e=="object"&&"inputSchema"in e)return!0;return kO}function U1(t){var e;const n=(e=t[pm])!==null&&e!==void 0?e:"";t[pm]=(n+` ${SO}`).trimStart()}function CO(t){return t!==null&&typeof t=="object"&&t instanceof F0}function AO(t){return mr(this,arguments,function*(n,r=100){let s,i=0;for(;i<r;){const o=yield Ue(n.listTools({cursor:s}));for(const a of o.tools)yield yield Ue(a),i++;if(!o.nextCursor)break;s=o.nextCursor}})}class F0{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new F0(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const i={},o=[];for(const d of this.mcpClients)try{for(var a=!0,l=(n=void 0,gr(AO(d))),c;c=await l.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const m=s;o.push(m);const g=m.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=d}}catch(m){n={error:m}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),aF(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await s.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function NO(t,e,n){const r=new Zj;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class RO{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=DO(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const d=new Promise(T=>{c=T}),m=e.callbacks,g=function(){c({})},y=this.apiClient,w={onopen:g,onmessage:T=>{NO(y,m.onmessage,T)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(T){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(T){}},x=this.webSocketFactory.create(l,MO(o),w);x.connect(),await d;const E={setup:{model:Xe(this.apiClient,e.model)}};return x.send(JSON.stringify(E)),new PO(x,this.apiClient)}}class PO{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=sU(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=rU(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(yo.PLAY)}pause(){this.sendPlaybackControl(yo.PAUSE)}stop(){this.sendPlaybackControl(yo.STOP)}resetContext(){this.sendPlaybackControl(yo.RESET_CONTEXT)}close(){this.conn.close()}}function MO(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function DO(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function jO(t,e,n){const r=new Xj;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const i=JSON.parse(s);if(t.isVertexAI()){const o=aU(i);Object.assign(r,o)}else Object.assign(r,i);e(r)}class FO{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new RO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,i,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&V1(e.config.tools)&&U1(m);const g=BO(m);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,d);else{const N=this.apiClient.getApiKey();let M="BidiGenerateContent",V="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",V="access_token"),d=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${M}?${V}=${N}`}let y=()=>{};const w=new Promise(N=>{y=N}),x=e.callbacks,_=function(){var N;(N=x==null?void 0:x.onopen)===null||N===void 0||N.call(x),y({})},v=this.apiClient,E={onopen:_,onmessage:N=>{jO(v,x.onmessage,N)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(N){}},T=this.webSocketFactory.create(d,OO(g),E);T.connect(),await w;let R=Xe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const N=this.apiClient.getProject(),M=this.apiClient.getLocation();R=`projects/${N}/locations/${M}/`+R}let L={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ad.AUDIO]}:e.config.responseModalities=[Ad.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],S=[];for(const N of U)if(this.isCallableTool(N)){const M=N;S.push(await M.tool())}else S.push(N);S.length>0&&(e.config.tools=S);const C={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=nU(this.apiClient,C):L=tU(this.apiClient,C),delete L.config,T.send(JSON.stringify(L)),new UO(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const VO={turnComplete:!0};class UO{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=er(n.turns),e.isVertexAI()||(r=r.map(s=>kh(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(LO)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},VO),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:oU(e)}:n={realtimeInput:iU(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function OO(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function BO(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k_=10;function C_(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Po(o)){s=!0;break}if(!s)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Po(t){return"callTool"in t&&typeof t.callTool=="function"}function zO(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Po(s)))!==null&&r!==void 0?r:!1}function A_(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(Po(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(s)}),n}function N_(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GO extends ms{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,i,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!zO(n)||C_(n.config))return await this.generateContentInternal(l);const c=A_(n);if(c.length>0){const x=c.map(_=>`tools[${_}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let d,m;const g=er(l.contents),y=(i=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:k_;let w=0;for(;w<y&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){const x=d.candidates[0].content,_=[];for(const v of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Po(v)){const T=await v.callTool(d.functionCalls);_.push(...T)}w++,m={role:"user",parts:_},l.contents=er(l.contents),l.contents.push(x),l.contents.push(m),N_(l.config)&&(g.push(x),g.push(m))}return N_(l.config)&&(d.automaticFunctionCallingHistory=g),d},this.generateContentStream=async n=>{var r,s,i,o,a;if(this.maybeMoveToResponseJsonSchem(n),C_(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const l=A_(n);if(l.length>0){const m=l.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(i=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,d=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let i;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?i=l==null?void 0:l.safetyAttributes:o.push(l);let a;return i?a={generatedImages:o,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new qi(cs.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,i,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(i=n.source)===null||i===void 0?void 0:i.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const o=await Promise.all(i.map(async l=>Po(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&V1(e.config.tools)){const l=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),U1(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,s;const i=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Po(o)){const a=o,l=await a.tool();for(const c of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,a)}}return i}async processAfcStream(e){var n,r,s;const i=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:k_;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,d,m){return mr(this,arguments,function*(){for(var g,y,w,x,_,v;a<i;){o&&(a++,o=!1);const L=yield Ue(c.processParamsMaybeAddMcpUsage(m)),U=yield Ue(c.generateContentStreamInternal(L)),S=[],C=[];try{for(var E=!0,T=(y=void 0,gr(U)),R;R=yield Ue(T.next()),g=R.done,!g;E=!0){x=R.value,E=!1;const N=x;if(yield yield Ue(N),N.candidates&&(!((_=N.candidates[0])===null||_===void 0)&&_.content)){C.push(N.candidates[0].content);for(const M of(v=N.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<i&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(M.functionCall.name)){const V=yield Ue(d.get(M.functionCall.name).callTool([M.functionCall]));S.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(N){y={error:N}}finally{try{!E&&!g&&(w=T.return)&&(yield Ue(w.call(T)))}finally{if(y)throw y.error}}if(S.length>0){o=!0;const N=new Fa;N.candidates=[{content:{role:"user",parts:S}}],yield yield Ue(N);const M=[];M.push(...C),M.push({role:"user",parts:S});const V=er(m.contents).concat(M);m.contents=V}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=E_(this.apiClient,e);return a=be("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=I_(d),g=new Fa;return Object.assign(g,m),g})}else{const c=b_(this.apiClient,e);return a=be("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=T_(d),g=new Fa;return Object.assign(g,m),g})}}async generateContentStreamInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=E_(this.apiClient,e);return a=be("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return mr(this,arguments,function*(){var g,y,w,x;try{for(var _=!0,v=gr(m),E;E=yield Ue(v.next()),g=E.done,!g;_=!0){x=E.value,_=!1;const T=x,R=I_(yield Ue(T.json()));R.sdkHttpResponse={headers:T.headers};const L=new Fa;Object.assign(L,R),yield yield Ue(L)}}catch(T){y={error:T}}finally{try{!_&&!g&&(w=v.return)&&(yield Ue(w.call(v)))}finally{if(y)throw y.error}}})})}else{const c=b_(this.apiClient,e);return a=be("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(m){return mr(this,arguments,function*(){var g,y,w,x;try{for(var _=!0,v=gr(m),E;E=yield Ue(v.next()),g=E.done,!g;_=!0){x=E.value,_=!1;const T=x,R=T_(yield Ue(T.json()));R.sdkHttpResponse={headers:T.headers};const L=new Fa;Object.assign(L,R),yield yield Ue(L)}}catch(T){y={error:T}}finally{try{!_&&!g&&(w=v.return)&&(yield Ue(w.call(v)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=FU(this.apiClient,e);return a=be("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=UU(d),g=new i_;return Object.assign(g,m),g})}else{const c=jU(this.apiClient,e);return a=be("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=VU(d),g=new i_;return Object.assign(g,m),g})}}async generateImagesInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=YU(this.apiClient,e);return a=be("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=XU(d),g=new o_;return Object.assign(g,m),g})}else{const c=JU(this.apiClient,e);return a=be("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=QU(d),g=new o_;return Object.assign(g,m),g})}}async editImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=PU(this.apiClient,e);return i=be("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=MU(l),d=new Bj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=Y6(this.apiClient,e);return i=be("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=Q6(l),d=new zj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=R6(this.apiClient,e);return i=be("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=P6(l),d=new Gj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=V6(this.apiClient,e);return i=be("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=U6(l),d=new Hj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=m6(this.apiClient,e);return a=be("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>fm(d))}else{const c=p6(this.apiClient,e);return a=be("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>hm(d))}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=T6(this.apiClient,e);return a=be("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=S6(d),g=new a_;return Object.assign(g,m),g})}else{const c=E6(this.apiClient,e);return a=be("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=I6(d),g=new a_;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=K6(this.apiClient,e);return a=be("{model}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>fm(d))}else{const c=W6(this.apiClient,e);return a=be("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>hm(d))}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=CU(this.apiClient,e);return a=be("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=NU(d),g=new l_;return Object.assign(g,m),g})}else{const c=kU(this.apiClient,e);return a=be("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=AU(d),g=new l_;return Object.assign(g,m),g})}}async countTokens(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=TU(this.apiClient,e);return a=be("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=SU(d),g=new u_;return Object.assign(g,m),g})}else{const c=EU(this.apiClient,e);return a=be("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=IU(d),g=new u_;return Object.assign(g,m),g})}}async computeTokens(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=gU(this.apiClient,e);return i=be("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=yU(l),d=new $j;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=s6(this.apiClient,e);return a=be("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const m=n6(d),g=new Nd;return Object.assign(g,m),g})}else{const c=r6(this.apiClient,e);return a=be("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=t6(d),g=new Nd;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HO extends ms{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Lj(e);return a=be("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}else{const c=Dj(e);return a=be("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=kj(e);return i=be("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $O(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function qO(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>tB(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function WO(t,e,n){const r={},s=h(e,["expireTime"]);n!==void 0&&s!=null&&p(n,["expireTime"],s);const i=h(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&p(n,["newSessionExpireTime"],i);const o=h(e,["uses"]);n!==void 0&&o!=null&&p(n,["uses"],o);const a=h(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&p(n,["bidiGenerateContentSetup"],eB(t,a));const l=h(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&p(n,["fieldMask"],l),r}function KO(t,e){const n={},r=h(e,["config"]);return r!=null&&p(n,["config"],WO(t,r,n)),n}function JO(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function YO(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function QO(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function XO(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function ZO(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=h(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],j0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],qO(pn(w)));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let U=ha(x);Array.isArray(U)&&(U=U.map(S=>rB(da(S)))),p(e,["setup","tools"],U)}const _=h(t,["sessionResumption"]);e!==void 0&&_!=null&&p(e,["setup","sessionResumption"],nB(_));const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const E=h(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],E);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const R=h(t,["contextWindowCompression"]);e!==void 0&&R!=null&&p(e,["setup","contextWindowCompression"],R);const L=h(t,["proactivity"]);if(e!==void 0&&L!=null&&p(e,["setup","proactivity"],L),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function eB(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],Xe(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],ZO(s,n)),n}function tB(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],JO(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],YO(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],$O(l));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function nB(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rB(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],QO(a));const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],XO(l));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sB(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(i=>`${n}.${i}`);e.push(...s)}else e.push(n)}return e.join(",")}function iB(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const i=sB(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];i&&l.push(i),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class oB extends ms{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=KO(this.apiClient,e);i=be("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=iB(a,e.config);return s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aB(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function lB(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&aB(r,e),e}function uB(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function cB(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function dB(t){const e={},n=h(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const r=h(t,["config"]);return r!=null&&cB(r,e),e}function hB(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["documents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fB extends ms{constructor(e){super(),this.apiClient=e,this.list=async n=>new qi(cs.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=uB(e);return i=be("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=lB(e);s=be("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=dB(e);return i=be("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=hB(l),d=new qj;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pB extends ms{constructor(e,n=new fB(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new qi(cs.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=sO(e);return i=be("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=aO(e);return i=be("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=oO(e);s=be("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=fO(e);return i=be("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=pO(l),d=new Wj;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=mO(e);return i=be("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=gO(l),d=new Kj;return Object.assign(d,c),d})}}async importFile(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=cO(e);return i=be("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=uO(l),d=new R0;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let O1=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return O1=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const mB=()=>O1();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mm(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const gm=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rr extends Error{}class Tn extends rr{constructor(e,n,r,s){super(`${Tn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new Nh({message:r,cause:gm(n)});const i=n;return e===400?new z1(e,i,r,s):e===401?new G1(e,i,r,s):e===403?new H1(e,i,r,s):e===404?new $1(e,i,r,s):e===409?new q1(e,i,r,s):e===422?new W1(e,i,r,s):e===429?new K1(e,i,r,s):e>=500?new J1(e,i,r,s):new Tn(e,i,r,s)}}class ym extends Tn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Nh extends Tn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class B1 extends Nh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class z1 extends Tn{}class G1 extends Tn{}class H1 extends Tn{}class $1 extends Tn{}class q1 extends Tn{}class W1 extends Tn{}class K1 extends Tn{}class J1 extends Tn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gB=/^[a-z][a-z0-9+.-]*:/i,yB=t=>gB.test(t);let vm=t=>(vm=Array.isArray,vm(t));const vB=vm;let xB=vB;const R_=xB;function wB(t){if(!t)return!0;for(const e in t)return!1;return!0}function _B(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const bB=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new rr(`${t} must be an integer`);if(e<0)throw new rr(`${t} must be a positive integer`);return e},EB=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TB=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ro="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IB(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const SB=()=>{var t,e,n,r,s;const i=IB();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ro,"X-Stainless-OS":M_(Deno.build.os),"X-Stainless-Arch":P_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ro,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ro,"X-Stainless-OS":M_((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":P_((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const o=kB();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ro,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ro,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function kB(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const P_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",M_=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let lc;const CB=()=>lc??(lc=SB());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AB(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Y1(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function NB(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Y1({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Q1(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function RB(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),s=r.cancel();r.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PB=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const X1=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function jf(t,e,n){return X1(),new File(t,e??"unknown_file",n)}function MB(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const DB=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z1=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",LB=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Z1(t),jB=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function FB(t,e,n){if(X1(),t=await t,LB(t))return t instanceof File?t:jf([await t.arrayBuffer()],t.name);if(jB(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),jf(await xm(s),e,n)}const r=await xm(t);if(e||(e=MB(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return jf(r,e,n)}async function xm(t){var e,n,r,s,i;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(Z1(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(DB(t))try{for(var a=!0,l=gr(t),c;c=await l.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const d=s;o.push(...await xm(d))}}catch(d){n={error:d}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const d=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${VB(t)}`)}return o}function VB(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ek{constructor(e){this._client=e}}ek._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tk(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const D_=Object.freeze(Object.create(null)),UB=(t=tk)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],o=n.reduce((d,m,g)=>{var y,w,x;/[?#]/.test(m)&&(s=!0);const _=r[g];let v=(s?encodeURIComponent:t)(""+_);return g!==r.length&&(_==null||typeof _=="object"&&_.toString===((x=Object.getPrototypeOf((w=Object.getPrototypeOf((y=_.hasOwnProperty)!==null&&y!==void 0?y:D_))!==null&&w!==void 0?w:D_))===null||x===void 0?void 0:x.toString))&&(v=_+"",i.push({start:d.length+m.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),d+m+(g===r.length?"":v)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((d,m)=>d.start-m.start),i.length>0){let d=0;const m=i.reduce((g,y)=>{const w=" ".repeat(y.start-d),x="^".repeat(y.length);return d=y.start+y.length,g+w+x},"");throw new rr(`Path parameters result in path with invalid segments:
${i.map(g=>g.error).join(`
`)}
${o}
${m}`)}return o},uc=UB(tk);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nk extends ek{create(e,n){var r;const{api_version:s=this._client.apiVersion}=e,i=Pd(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new rr("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new rr("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(uc`/${s}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(uc`/${s}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(uc`/${s}/interactions/${e}/cancel`,r)}get(e,n={},r){var s;const i=n??{},{api_version:o=this._client.apiVersion}=i,a=Pd(i,["api_version"]);return this._client.get(uc`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}nk._key=Object.freeze(["interactions"]);class rk extends nk{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OB(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let cc;function V0(t){let e;return(cc??(e=new globalThis.TextEncoder,cc=e.encode.bind(e)))(t)}let dc;function L_(t){let e;return(dc??(e=new globalThis.TextDecoder,dc=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?V0(e):e;this.buffer=OB([this.buffer,n]);const r=[];let s;for(;(s=BB(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(L_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,o=L_(this.buffer.subarray(0,i));r.push(o),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Rh.NEWLINE_CHARS=new Set([`
`,"\r"]);Rh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function BB(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function zB(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Md={off:0,error:200,warn:300,info:400,debug:500},j_=(t,e,n)=>{if(t){if(_B(Md,t))return t;vn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Md))}`)}};function Wa(){}function hc(t,e,n){return!e||Md[t]>Md[n]?Wa:e[t].bind(e)}const GB={error:Wa,warn:Wa,info:Wa,debug:Wa};let F_=new WeakMap;function vn(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return GB;const s=F_.get(n);if(s&&s[0]===r)return s[1];const i={error:hc("error",n,r),warn:hc("warn",n,r),info:hc("info",n,r),debug:hc("debug",n,r)};return F_.set(n,[r,i]),i}const mi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vo{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let s=!1;const i=r?vn(r):console;function o(){return mr(this,arguments,function*(){var l,c,d,m;if(s)throw new rr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,w=gr(HB(e,n)),x;x=yield Ue(w.next()),l=x.done,!l;y=!0){m=x.value,y=!1;const _=m;if(!g)if(_.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield Ue(JSON.parse(_.data))}catch(v){throw i.error("Could not parse message into JSON:",_.data),i.error("From chunk:",_.raw),v}}}catch(_){c={error:_}}finally{try{!y&&!l&&(d=w.return)&&(yield Ue(d.call(w)))}finally{if(c)throw c.error}}g=!0}catch(_){if(mm(_))return yield Ue(void 0);throw _}finally{g||n.abort()}})}return new vo(o,n,r)}static fromReadableStream(e,n,r){let s=!1;function i(){return mr(this,arguments,function*(){var l,c,d,m;const g=new Rh,y=Q1(e);try{for(var w=!0,x=gr(y),_;_=yield Ue(x.next()),l=_.done,!l;w=!0){m=_.value,w=!1;const v=m;for(const E of g.decode(v))yield yield Ue(E)}}catch(v){c={error:v}}finally{try{!w&&!l&&(d=x.return)&&(yield Ue(d.call(x)))}finally{if(c)throw c.error}}for(const v of g.flush())yield yield Ue(v)})}function o(){return mr(this,arguments,function*(){var l,c,d,m;if(s)throw new rr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,w=gr(i()),x;x=yield Ue(w.next()),l=x.done,!l;y=!0){m=x.value,y=!1;const _=m;g||_&&(yield yield Ue(JSON.parse(_)))}}catch(_){c={error:_}}finally{try{!y&&!l&&(d=w.return)&&(yield Ue(d.call(w)))}finally{if(c)throw c.error}}g=!0}catch(_){if(mm(_))return yield Ue(void 0);throw _}finally{g||n.abort()}})}return new vo(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=r.next();e.push(o),n.push(o)}return i.shift()}});return[new vo(()=>s(e),this.controller,this.client),new vo(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Y1({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const o=V0(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function HB(t,e){return mr(this,arguments,function*(){var r,s,i,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new rr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new rr("Attempted to iterate over a response with no body");const a=new qB,l=new Rh,c=Q1(t.body);try{for(var d=!0,m=gr($B(c)),g;g=yield Ue(m.next()),r=g.done,!r;d=!0){o=g.value,d=!1;const y=o;for(const w of l.decode(y)){const x=a.decode(w);x&&(yield yield Ue(x))}}}catch(y){s={error:y}}finally{try{!d&&!r&&(i=m.return)&&(yield Ue(i.call(m)))}finally{if(s)throw s.error}}for(const y of l.flush()){const w=a.decode(y);w&&(yield yield Ue(w))}})}function $B(t){return mr(this,arguments,function*(){var n,r,s,i;let o=new Uint8Array;try{for(var a=!0,l=gr(t),c;c=yield Ue(l.next()),n=c.done,!n;a=!0){i=c.value,a=!1;const d=i;if(d==null)continue;const m=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?V0(d):d;let g=new Uint8Array(o.length+m.length);g.set(o),g.set(m,o.length),o=g;let y;for(;(y=zB(o))!==-1;)yield yield Ue(o.slice(0,y)),o=o.slice(y)}}catch(d){r={error:d}}finally{try{!a&&!n&&(s=l.return)&&(yield Ue(s.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield Ue(o))})}class qB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=WB(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function WB(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function KB(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,o=await(async()=>{var a;if(e.options.stream)return vn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):vo.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return vn(t).debug(`[${r}] response parsed`,mi({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U0 extends Promise{constructor(e,n,r=KB){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new U0(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sk=Symbol("brand.privateNullableHeaders");function*JB(t){if(!t)return;if(sk in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():R_(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=R_(r[1])?r[1]:[r[1]];let o=!1;for(const a of i)a!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,a])}}const Va=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,o]of JB(r)){const a=i.toLowerCase();s.has(a)||(e.delete(i),s.add(a)),o===null?(e.delete(i),n.add(a)):(e.append(i,o),n.delete(a))}}return{[sk]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ff=t=>{var e,n,r,s,i,o;if(typeof globalThis.process<"u")return(r=(n=(e=_j)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(i=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||i===void 0?void 0:i.call(s,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ik;class Ph{constructor(e){var n,r,s,i,o,a,l,{baseURL:c=Ff("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=Ff("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,g=Pd(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:d,apiVersion:m},g),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(r=y.timeout)!==null&&r!==void 0?r:Ph.DEFAULT_TIMEOUT,this.logger=(s=y.logger)!==null&&s!==void 0?s:console;const w="warn";this.logLevel=w,this.logLevel=(o=(i=j_(y.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:j_(Ff("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:w,this.fetchOptions=y.fetchOptions,this.maxRetries=(a=y.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=y.fetch)!==null&&l!==void 0?l:AB(),this.encoder=PB,this._options=y,this.apiKey=d,this.apiVersion=m,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Va([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Va([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Va([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new rr(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ro}`}defaultIdempotencyKey(){return`stainless-node-retry-${mB()}`}makeStatusError(e,n,r,s){return Tn.generate(e,n,r,s)}buildURL(e,n,r){const s=!this.baseURLOverridden()&&r||this.baseURL,i=yB(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return wB(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new U0(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var s,i,o;const a=await e,l=(s=a.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:d,timeout:m}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:d,options:a});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=r===void 0?"":`, retryOf: ${r}`,w=Date.now();if(vn(this).debug(`[${g}] sending request`,mi({retryOfRequestLogID:r,method:a.method,url:d,options:a,headers:c.headers})),!((i=a.signal)===null||i===void 0)&&i.aborted)throw new ym;const x=new AbortController,_=await this.fetchWithTimeout(d,c,m,x).catch(gm),v=Date.now();if(_ instanceof globalThis.Error){const T=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new ym;const R=mm(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(n)return vn(this).info(`[${g}] connection ${R?"timed out":"failed"} - ${T}`),vn(this).debug(`[${g}] connection ${R?"timed out":"failed"} (${T})`,mi({retryOfRequestLogID:r,url:d,durationMs:v-w,message:_.message})),this.retryRequest(a,n,r??g);throw vn(this).info(`[${g}] connection ${R?"timed out":"failed"} - error; no more retries left`),vn(this).debug(`[${g}] connection ${R?"timed out":"failed"} (error; no more retries left)`,mi({retryOfRequestLogID:r,url:d,durationMs:v-w,message:_.message})),R?new B1:new Nh({cause:_})}const E=`[${g}${y}] ${c.method} ${d} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${v-w}ms`;if(!_.ok){const T=await this.shouldRetry(_);if(n&&T){const N=`retrying, ${n} attempts remaining`;return await RB(_.body),vn(this).info(`${E} - ${N}`),vn(this).debug(`[${g}] response error (${N})`,mi({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:v-w})),this.retryRequest(a,n,r??g,_.headers)}const R=T?"error; no more retries left":"error; not retryable";vn(this).info(`${E} - ${R}`);const L=await _.text().catch(N=>gm(N).message),U=EB(L),S=U?void 0:L;throw vn(this).debug(`[${g}] response error (${R})`,mi({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,message:S,durationMs:Date.now()-w})),this.makeStatusError(_.status,U,S,_.headers)}return vn(this).info(E),vn(this).debug(`[${g}] response start`,mi({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:v-w})),{response:_,options:a,controller:x,requestLogID:g,retryOfRequestLogID:r,startTime:w}}async fetchWithTimeout(e,n,r,s){const i=n||{},{signal:o,method:a}=i,l=Pd(i,["signal","method"]);o&&o.addEventListener("abort",()=>s.abort());const c=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){var i;let o;const a=s==null?void 0:s.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(o=c)}const l=s==null?void 0:s.get("retry-after");if(l&&!o){const c=parseFloat(l);Number.isNaN(c)?o=Date.parse(l)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){const c=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,c)}return await TB(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,s,i;const o=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:d}=o,m=this.buildURL(l,c,d);"timeout"in o&&bB("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:g,body:y}=this.buildBody({options:o}),w=await this.buildHeaders({options:e,method:a,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:w},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(i=o.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=Va([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),CB()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Va([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:NB(e)}:this.encoder({body:e,headers:r})}}Ph.DEFAULT_TIMEOUT=6e4;class Wt extends Ph{constructor(){super(...arguments),this.interactions=new rk(this)}}ik=Wt;Wt.GeminiNextGenAPIClient=ik;Wt.GeminiNextGenAPIClientError=rr;Wt.APIError=Tn;Wt.APIConnectionError=Nh;Wt.APIConnectionTimeoutError=B1;Wt.APIUserAbortError=ym;Wt.NotFoundError=$1;Wt.ConflictError=q1;Wt.RateLimitError=K1;Wt.BadRequestError=z1;Wt.AuthenticationError=G1;Wt.InternalServerError=J1;Wt.PermissionDeniedError=H1;Wt.UnprocessableEntityError=W1;Wt.toFile=FB;Wt.Interactions=rk;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YB(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function QB(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function XB(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function ZB(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function e9(t,e,n){const r={};if(h(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=h(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&p(e,["displayName"],s),h(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=h(t,["epochCount"]);e!==void 0&&i!=null&&p(e,["tuningTask","hyperparameters","epochCount"],i);const o=h(t,["learningRateMultiplier"]);if(o!=null&&p(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),h(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=h(t,["batchSize"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","batchSize"],a);const l=h(t,["learningRate"]);if(e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","learningRate"],l),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function t9(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const y=h(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec"],V_(y))}else if(s==="PREFERENCE_TUNING"){const y=h(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec"],V_(y))}const i=h(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&p(e,["tunedModelDisplayName"],i);const o=h(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);let a=h(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const y=h(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(a==="PREFERENCE_TUNING"){const y=h(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let l=h(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const y=h(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(l==="PREFERENCE_TUNING"){const y=h(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let c=h(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=h(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(c==="PREFERENCE_TUNING"){const y=h(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let d=h(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=h(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(d==="PREFERENCE_TUNING"){const y=h(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(h(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=h(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=h(t,["beta"]);return e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),r}function n9(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=h(t,["trainingDataset"]);i!=null&&f9(i);const o=h(t,["config"]);return o!=null&&e9(o,n),n}function r9(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=h(t,["trainingDataset"]);i!=null&&p9(i,n,e);const o=h(t,["config"]);return o!=null&&t9(o,n,e),n}function s9(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function i9(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function o9(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=h(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function a9(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=h(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function l9(t,e){const n={},r=h(t,["config"]);return r!=null&&o9(r,n),n}function u9(t,e){const n={},r=h(t,["config"]);return r!=null&&a9(r,n),n}function c9(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=h(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>ok(a))),p(n,["tuningJobs"],o)}return n}function d9(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=h(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>wm(a))),p(n,["tuningJobs"],o)}return n}function h9(t,e){const n={},r=h(t,["name"]);r!=null&&p(n,["model"],r);const s=h(t,["name"]);return s!=null&&p(n,["endpoint"],s),n}function f9(t,e){const n={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=h(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(n,["examples","examples"],s)}return n}function p9(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=h(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=h(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let i=h(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=h(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=h(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(h(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function ok(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["state"]);i!=null&&p(n,["state"],b1(i));const o=h(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=h(t,["tuningTask","startTime"]);a!=null&&p(n,["startTime"],a);const l=h(t,["tuningTask","completeTime"]);l!=null&&p(n,["endTime"],l);const c=h(t,["updateTime"]);c!=null&&p(n,["updateTime"],c);const d=h(t,["description"]);d!=null&&p(n,["description"],d);const m=h(t,["baseModel"]);m!=null&&p(n,["baseModel"],m);const g=h(t,["_self"]);return g!=null&&p(n,["tunedModel"],h9(g)),n}function wm(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["state"]);i!=null&&p(n,["state"],b1(i));const o=h(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=h(t,["startTime"]);a!=null&&p(n,["startTime"],a);const l=h(t,["endTime"]);l!=null&&p(n,["endTime"],l);const c=h(t,["updateTime"]);c!=null&&p(n,["updateTime"],c);const d=h(t,["error"]);d!=null&&p(n,["error"],d);const m=h(t,["description"]);m!=null&&p(n,["description"],m);const g=h(t,["baseModel"]);g!=null&&p(n,["baseModel"],g);const y=h(t,["tunedModel"]);y!=null&&p(n,["tunedModel"],y);const w=h(t,["preTunedModel"]);w!=null&&p(n,["preTunedModel"],w);const x=h(t,["supervisedTuningSpec"]);x!=null&&p(n,["supervisedTuningSpec"],x);const _=h(t,["preferenceOptimizationSpec"]);_!=null&&p(n,["preferenceOptimizationSpec"],_);const v=h(t,["tuningDataStats"]);v!=null&&p(n,["tuningDataStats"],v);const E=h(t,["encryptionSpec"]);E!=null&&p(n,["encryptionSpec"],E);const T=h(t,["partnerModelTuningSpec"]);T!=null&&p(n,["partnerModelTuningSpec"],T);const R=h(t,["customBaseModel"]);R!=null&&p(n,["customBaseModel"],R);const L=h(t,["experiment"]);L!=null&&p(n,["experiment"],L);const U=h(t,["labels"]);U!=null&&p(n,["labels"],U);const S=h(t,["outputUri"]);S!=null&&p(n,["outputUri"],S);const C=h(t,["pipelineJob"]);C!=null&&p(n,["pipelineJob"],C);const N=h(t,["serviceAccount"]);N!=null&&p(n,["serviceAccount"],N);const M=h(t,["tunedModelDisplayName"]);M!=null&&p(n,["tunedModelDisplayName"],M);const V=h(t,["veoTuningSpec"]);return V!=null&&p(n,["veoTuningSpec"],V),n}function m9(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(t,["done"]);o!=null&&p(n,["done"],o);const a=h(t,["error"]);return a!=null&&p(n,["error"],a),n}function V_(t,e){const n={},r=h(t,["gcsUri"]);r!=null&&p(n,["validationDatasetUri"],r);const s=h(t,["vertexDatasetResource"]);return s!=null&&p(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g9 extends ms{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qi(cs.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:s});return i.baseModel=void 0,await this.tuneInternal(i)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),i=await this.tuneMldevInternal(s);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:lm.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=i9(e);return a=be("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>wm(d))}else{const c=s9(e);return a=be("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>ok(d))}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=u9(e);return a=be("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=d9(d),g=new c_;return Object.assign(g,m),g})}else{const c=l9(e);return a=be("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=c9(d),g=new c_;return Object.assign(g,m),g})}}async cancel(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=QB(e);return a=be("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=ZB(d),g=new d_;return Object.assign(g,m),g})}else{const c=YB(e);return a=be("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=XB(d),g=new d_;return Object.assign(g,m),g})}}async tuneInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=r9(e,e);return i=be("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>wm(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=n9(e);return i=be("tunedModels",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>m9(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y9{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const v9=1024*1024*8,x9=3,w9=1e3,_9=2,Dd="x-goog-upload-status";async function b9(t,e,n){var r;const s=await ak(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Dd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function E9(t,e,n){var r;const s=await ak(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Dd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=g1(i),a=new P0;return Object.assign(a,o),a}async function ak(t,e,n){var r,s;let i=0,o=0,a=new um(new Response),l="upload";for(i=t.size;o<i;){const c=Math.min(v9,i-o),d=t.slice(o,o+c);o+c>=i&&(l+=", finalize");let m=0,g=w9;for(;m<x9&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[Dd]));)m++,await I9(g),g=g*_9;if(o+=c,((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Dd])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function T9(t){return{size:t.size,type:t.type}}function I9(t){return new Promise(e=>setTimeout(e,t))}class S9{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await b9(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await E9(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await T9(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k9{create(e,n,r){return new C9(e,n,r)}}class C9{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U_="x-goog-api-key";class A9{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(U_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(U_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N9="gl-node/";class O0{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Wt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Ij(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new A9(this.apiKey);this.apiClient=new TO({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:N9+"web",uploader:new S9,downloader:new y9}),this.models=new GO(this.apiClient),this.live=new FO(this.apiClient,s,new k9),this.batches=new eV(this.apiClient),this.chats=new LV(this.models,this.apiClient),this.caches=new PV(this.apiClient),this.files=new $V(this.apiClient),this.operations=new HO(this.apiClient),this.authTokens=new oB(this.apiClient),this.tunings=new g9(this.apiClient),this.fileSearchStores=new pB(this.apiClient)}}const _m="fanra_api_cd_",B0=t=>t&&t.length>5?t.slice(-8):"unknown",xo=t=>{if(!t)return!0;const e=B0(t),n=localStorage.getItem(`${_m}${e}`);if(n){const r=parseInt(n,10);if(Date.now()<r)return console.warn(`Skipping key ending in ...${e} (Cooldown active)`),!0;localStorage.removeItem(`${_m}${e}`)}return!1},gu=t=>{if(!t)return;const e=B0(t),n=Date.now()+24*60*60*1e3;localStorage.setItem(`${_m}${e}`,n.toString()),console.warn(`Key ending in ...${e} marked for 24h cooldown due to Quota Limit.`)},R9=(t,e)=>{const n=t/e;return[{label:"1:1",value:1},{label:"3:4",value:.75},{label:"4:3",value:1.33},{label:"9:16",value:.5625},{label:"16:9",value:1.7778}].reduce((i,o)=>Math.abs(o.value-n)<Math.abs(i.value-n)?o:i).label},P9=(t,e,n,r)=>{const s=R9(e,n);switch(t){case wn.BACKGROUND_REMOVER:return{model:"gemini-2.5-flash-image",prompt:"Edit this image. Your task is to keep the foreground subject EXACTLY as it is. Do not alter the subject's face, body, clothing, lighting, or resolution. Do not 'redraw' or 'regenerate' the subject. Simply COPY the main subject and place it against a solid bright Green background (Hex Code #00FF00). If the subject is cropped in the original, keep it cropped. Do not add new details.",config:{imageConfig:{aspectRatio:s}}};case wn.HD_UPSCALE:return{model:"gemini-3-pro-image-preview",prompt:"Upscale this image to high definition (4K quality). Sharpen all details and improve lighting. IMPORTANT: Keep the image composition, colors, and BACKGROUND exactly the same as the original. Do not remove the background. Do not change the subject's identity.",config:{imageConfig:{aspectRatio:s,imageSize:"4K"}}};case wn.CREATIVE_REMIX:return{model:"gemini-2.5-flash-image",prompt:r||"Make a creative cyberpunk variation of this image.",config:{imageConfig:{aspectRatio:s}}};case wn.COLORIZE:return{model:"gemini-2.5-flash-image",prompt:"Colorize this black and white image realistically. Keep the subject and background details exactly the same, just add natural colors. Do not change the content.",config:{imageConfig:{aspectRatio:s}}};case wn.SKETCH_TO_REAL:return{model:"gemini-2.5-flash-image",prompt:"Turn this sketch or drawing into a photorealistic image. Keep the composition and subject exactly as drawn, but make it look like a high-quality photograph.",config:{imageConfig:{aspectRatio:s}}};default:throw new Error("Unknown tool type")}},M9=async t=>{const{tool:e,image:n,prompt:r,apiKeys:s}=t,i=P9(e,n.width,n.height,r);let o=[...s||[]];o.push("AIzaSyDzwJLdjFvu5jrsF_HYtYSWLPSoQc2JYzA"),o=Array.from(new Set(o.filter(c=>!!c&&!xo(c))));let a=!1,l=null;for(let c=0;c<o.length;c++){const d=o[c];try{const g=await new O0({apiKey:d}).models.generateContent({model:i.model,contents:{parts:[{inlineData:{mimeType:n.mimeType,data:n.data}},{text:i.prompt}]},config:i.config});if(g.candidates&&g.candidates[0].content.parts){for(const y of g.candidates[0].content.parts)if(y.inlineData&&y.inlineData.data)return y.inlineData.data}throw new Error("No image data returned from Gemini.")}catch(m){console.warn(`Key ending in ...${d.slice(-4)} failed.`),l=m;const g=(m.message||"").toLowerCase(),y=g.includes("429")||g.includes("quota")||g.includes("exhausted")||g.includes("503");if(y&&gu(d),c===o.length-1&&y&&!a)try{const w=await F3();if(w.length>0){const x=w.filter(_=>!o.includes(_)&&!xo(_));o.push(...x),a=!0;continue}}catch{console.error("Failed to fetch community keys")}}}throw l||new Error("All API keys (Personal, System, and Community) failed or are in cooldown.")},D9={name:"searchWeather",description:"Get REAL-TIME weather data for a specific city.",parameters:{type:Rn.OBJECT,properties:{city:{type:Rn.STRING,description:"The name of the city."}},required:["city"]}},L9={name:"searchCountryFact",description:"Get detailed facts about a country (Capital, Population, Currency, Flag).",parameters:{type:Rn.OBJECT,properties:{country_name:{type:Rn.STRING,description:"The name of the country."}},required:["country_name"]}},j9={name:"searchGoogle",description:"Search Google for latest news or trending info.",parameters:{type:Rn.OBJECT,properties:{query:{type:Rn.STRING,description:"The search keywords."}},required:["query"]}},Mh=async(t,e)=>{if(!e)return t;const n=t.split(/(\s+)/);let r="";for(const s of n)r+=s,e(r),await new Promise(i=>setTimeout(i,Math.random()*10+5));return t},F9=async(t,e,n,r)=>{var s,i,o;try{console.log("Attempting OpenRouter Fallback...");const a=[{role:"system",content:n},...e.map(m=>{var g;return{role:m.role==="model"?"assistant":"user",content:((g=m.parts.find(y=>y.text))==null?void 0:g.text)||""}}).filter(m=>m.content)],l=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:"google/gemini-2.0-flash-lite-preview-02-05:free",messages:a,stream:!1})});if(l.status===429)throw gu(t),new Error("OpenRouter Quota Exceeded");if(!l.ok)throw new Error(`OpenRouter Error: ${l.status}`);const d=((o=(i=(s=(await l.json()).choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:o.content)||"";return r&&d&&await Mh(d,r),d}catch(a){throw console.error("OpenRouter Failed:",a),a}},V9=async(t,e,n,r)=>{var s,i,o;try{console.log("Attempting Groq Fallback...");const a=[{role:"system",content:n},...e.map(m=>{var g;return{role:m.role==="model"?"assistant":"user",content:((g=m.parts.find(y=>y.text))==null?void 0:g.text)||""}}).filter(m=>m.content)],l=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:"llama3-8b-8192",messages:a,stream:!1})});if(l.status===429)throw gu(t),new Error("Groq Quota Exceeded");if(!l.ok)throw new Error(`Groq Error: ${l.status}`);const d=((o=(i=(s=(await l.json()).choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:o.content)||"";return r&&d&&await Mh(d,r),d}catch(a){throw console.error("Groq Failed:",a),a}},U9=async(t,e,n,r)=>{try{console.log("Attempting Hugging Face Fallback...");let s=`<start_of_turn>system
${n}<end_of_turn>
`;e.forEach(l=>{var d;const c=((d=l.parts.find(m=>m.text))==null?void 0:d.text)||"";c&&(s+=`<start_of_turn>${l.role==="model"?"model":"user"}
${c}<end_of_turn>
`)}),s+=`<start_of_turn>model
`;const i=await fetch("https://api-inference.huggingface.co/models/google/gemma-1.1-7b-it",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:s,parameters:{max_new_tokens:512,return_full_text:!1,temperature:.7}})});if(i.status===429)throw gu(t),new Error("HuggingFace Quota Exceeded");if(!i.ok)throw new Error(`Hugging Face Error: ${i.status}`);const o=await i.json();let a=Array.isArray(o)&&o.length>0?o[0].generated_text:o.generated_text||"";return r&&a&&await Mh(a,r),a}catch(s){throw console.error("Hugging Face Failed:",s),s}},O9=async(t,e,n=[],r="id",s=[],i,o=!1,a=!1,l,c,d,m,g)=>{var R,L,U,S;const y=n.slice(-10).map(C=>({role:C.role,parts:[{text:C.text}]})),w=[];t?w.push({text:t}):s.length>0&&w.push({text:"Describe these images or answer based on them."}),s.length>0&&s.forEach(C=>w.push({inlineData:{mimeType:C.mimeType,data:C.data}}));const x=[...y,{role:"user",parts:w}],_=!!(l!=null&&l.apiKey&&l.cx),v=[{functionDeclarations:[D9,L9]}];_&&v[0].functionDeclarations.push(j9);const E=`
        Nama lo: Fanra.
        Sifat: Cool, santai, & solutif. Gaya ngomong: lo-gue, normal, asik.
        
        ATURAN MUTLAK:
        1. JANGAN PERNAH MENCARI DI WIKIPEDIA ATAU DATABASE LAMA.
        2. Gunakan pengetahuan lo sendiri (Generative AI) untuk menjawab pertanyaan.
        3. Jika user tanya hal sepele ("hmm", "halo", "apa kabar"), jawab dengan santai dan natural layaknya teman. Jangan berikan definisi kamus.
        4. Jika user tanya fakta spesifik (misal: cuaca, negara), gunakan function calling yang tersedia.
    `;let T=[...e||[]];T.push("AIzaSyDzwJLdjFvu5jrsF_HYtYSWLPSoQc2JYzA"),T=Array.from(new Set(T.filter(C=>!!C&&!xo(C))));for(const C of T){if(c!=null&&c.aborted)throw new Error("Request cancelled by user");try{const V=(S=(U=(L=(R=(await new O0({apiKey:C}).models.generateContent({model:"gemini-3-flash-preview",contents:x,config:{systemInstruction:E,tools:v}})).candidates)==null?void 0:R[0])==null?void 0:L.content)==null?void 0:U.parts)==null?void 0:S.find(P=>P.text);return V&&V.text?(await Mh(V.text,i),{text:V.text,source:"gemini"}):{text:"...",source:"gemini"}}catch(N){console.warn(`Gemini Key failed: ${B0(C)}`);const M=(N.message||"").toLowerCase();(M.includes("429")||M.includes("quota")||M.includes("exhausted"))&&gu(C)}}if(!xo(d)){if(c!=null&&c.aborted)throw new Error("Request cancelled");try{return{text:await F9(d,x,E,i),source:"openrouter"}}catch{console.warn("OpenRouter Failed.")}}if(!xo(g)){if(c!=null&&c.aborted)throw new Error("Request cancelled");try{return{text:await V9(g,x,E,i),source:"groq"}}catch{console.warn("Groq Failed.")}}if(!xo(m)){if(c!=null&&c.aborted)throw new Error("Request cancelled");try{return{text:await U9(m,x,E,i),source:"huggingface"}}catch{console.warn("Hugging Face Failed.")}}throw new Error("All AI services unavailable. Check your API Keys.")},B9=t=>new Promise((e,n)=>{const r=new Image;r.src=`data:image/png;base64,${t}`,r.crossOrigin="Anonymous",r.onload=()=>{const s=document.createElement("canvas");s.width=r.width,s.height=r.height;const i=s.getContext("2d");if(!i){n(new Error("Could not get canvas context"));return}i.drawImage(r,0,0);const o=i.getImageData(0,0,s.width,s.height),a=o.data;for(let l=0;l<a.length;l+=4){const c=a[l],d=a[l+1],m=a[l+2],g=Math.max(c,m);let y=d-g;const w=10,x=60;if(y>w){const _=1-Math.max(0,Math.min(1,(y-w)/(x-w)));a[l+3]=Math.floor(255*_),d>g&&(a[l+1]=g)}}i.putImageData(o,0,0),e(s.toDataURL("image/png",1).split(",")[1])},r.onerror=s=>n(new Error("Failed to load image for processing"))}),z9=(t,e="image/png")=>{const n=t.replace(/[\n\r]/g,"").trim(),r=atob(n),s=new Array(r.length);for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);const i=new Uint8Array(s);return new Blob([i],{type:e})},G9=async(t,e)=>{const n=new FormData,r=z9(t);n.append("image_file",r,"image.png"),n.append("size","auto");try{const s=await fetch("https://api.remove.bg/v1.0/removebg",{method:"POST",headers:{"X-Api-Key":e},body:n});if(!s.ok){let o="Failed to remove background via Remove.bg";try{const a=await s.json();a.errors&&a.errors[0]&&(o=a.errors[0].title)}catch{o=`Remove.bg Error: ${s.statusText}`}throw new Error(o)}const i=await s.blob();return new Promise((o,a)=>{const l=new FileReader;l.onloadend=()=>{const c=l.result;o(c.split(",")[1])},l.onerror=a,l.readAsDataURL(i)})}catch(s){throw console.error("Remove.bg Service Error:",s),s}};const H9=({onImageSelect:t,language:e})=>{const n=F.useRef(null),[r,s]=F.useState(!1),i=mu[e],o=m=>{if(!m.type.startsWith("image/")){He(i.invalidImage);return}const g=new FileReader;g.onloadend=()=>{const y=g.result,w=new Image;w.onload=()=>{const x=document.createElement("canvas");x.width=w.width,x.height=w.height;const _=x.getContext("2d");if(!_)return;_.drawImage(w,0,0);const v="image/png",T=x.toDataURL(v).split(",")[1];t(T,v,w.width,w.height)},w.src=y},g.readAsDataURL(m)},a=m=>{var y;const g=(y=m.target.files)==null?void 0:y[0];g&&o(g)},l=m=>{m.preventDefault(),m.stopPropagation(),s(!0)},c=m=>{m.preventDefault(),m.stopPropagation(),s(!1)},d=m=>{var y;m.preventDefault(),m.stopPropagation(),s(!1);const g=(y=m.dataTransfer.files)==null?void 0:y[0];g&&o(g)};return u.jsxs("div",{className:`w-full max-w-xl mx-auto border-2 border-dashed rounded-2xl p-12 flex flex-col items-center justify-center text-center cursor-pointer transition-all duration-300 group bg-white ${r?"border-primary bg-slate-50 scale-[1.02] shadow-xl":"border-slate-300 hover:border-primary hover:bg-slate-50"}`,onClick:()=>{var m;return(m=n.current)==null?void 0:m.click()},onDragOver:l,onDragLeave:c,onDrop:d,children:[u.jsx("input",{type:"file",ref:n,onChange:a,className:"hidden",accept:"image/png, image/jpeg, image/webp"}),u.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 transition-transform duration-300 ${r?"scale-110 bg-white shadow-md":"bg-slate-50 group-hover:scale-110"}`,children:u.jsx(Nl,{className:`w-6 h-6 ${r?"text-primary":"text-slate-400 group-hover:text-primary"}`})}),u.jsx("h3",{className:`text-lg font-bold mb-2 transition-colors ${r?"text-primary":"text-slate-700 group-hover:text-primary"}`,children:r?i.dropHere:i.uploadTitle}),u.jsx("p",{className:"text-slate-500 text-sm",children:i.uploadDesc})]})},O_=[{label:"Transparent",value:null,hex:"transparent"},{label:"White",value:"#FFFFFF",hex:"#FFFFFF"},{label:"Black",value:"#000000",hex:"#000000"},{label:"Red",value:"#DB2828",hex:"#DB2828"},{label:"Blue",value:"#2185D0",hex:"#2185D0"},{label:"Green",value:"#21BA45",hex:"#21BA45"},{label:"Yellow",value:"#FBBD08",hex:"#FBBD08"}],$9=({originalImage:t,resultImageBase64:e,isProcessing:n,processingText:r,onReset:s,language:i})=>{const[o,a]=F.useState(50),[l,c]=F.useState(!1),[d,m]=F.useState(null),g=F.useRef(null),y=F.useRef(null),w=mu[i],x=()=>{if(!e)return;if(!d){const S=document.createElement("a");S.href=`data:image/png;base64,${e}`,S.download="pixelmagic-edited.png",document.body.appendChild(S),S.click(),document.body.removeChild(S);return}const R=document.createElement("canvas"),L=R.getContext("2d"),U=new Image;U.onload=()=>{if(R.width=U.width,R.height=U.height,L){L.fillStyle=d,L.fillRect(0,0,R.width,R.height),L.drawImage(U,0,0);const S=document.createElement("a");S.href=R.toDataURL("image/png"),S.download="pixelmagic-edited-bg.png",document.body.appendChild(S),S.click(),document.body.removeChild(S)}},U.src=`data:image/png;base64,${e}`},_=F.useCallback(()=>c(!0),[]),v=F.useCallback(()=>c(!1),[]),E=F.useCallback(R=>{if(!l||!g.current)return;const{left:L,width:U}=g.current.getBoundingClientRect();let S;"touches"in R?S=R.touches[0].clientX:S=R.clientX;const C=(S-L)/U*100;a(Math.min(100,Math.max(0,C)))},[l]);F.useEffect(()=>(window.addEventListener("mousemove",E),window.addEventListener("mouseup",v),window.addEventListener("touchmove",E),window.addEventListener("touchend",v),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",E),window.removeEventListener("touchend",v)}),[E,v]);const T=()=>d?{backgroundColor:d}:{backgroundColor:"#f8fafc",backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"};return u.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6 animate-fade-in pb-10",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsx("h2",{className:"text-xl font-bold text-primary self-start md:self-auto",children:n?u.jsxs("span",{className:"flex items-center gap-2",children:[w.processing,u.jsxs("span",{className:"flex gap-1",children:[u.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce"}),u.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-100"}),u.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-200"})]})]}):w.resultComparison}),!n&&u.jsxs("div",{className:"flex items-center gap-3 self-end md:self-auto",children:[u.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-slate-500 hover:text-primary transition-colors hover:bg-slate-50 rounded-lg active:scale-95 duration-200",children:w.reset}),e&&u.jsxs("button",{onClick:x,className:"flex items-center gap-2 bg-primary hover:bg-slate-800 text-white px-5 py-2 rounded-lg font-semibold text-sm transition-all shadow-lg shadow-slate-900/10 active:scale-95 hover:shadow-xl hover:-translate-y-0.5",children:[u.jsx(fT,{className:"w-4 h-4"}),w.download," ",d?"JPG":"PNG"]})]})]}),u.jsxs("div",{className:"relative w-full h-[60vh] rounded-xl overflow-hidden border border-slate-200 shadow-xl shadow-slate-200/50 bg-white select-none mx-auto group",ref:g,children:[n&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-white/90 backdrop-blur-md flex flex-col items-center justify-center transition-all duration-300",children:[u.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,className:"absolute inset-0 w-full h-full object-contain opacity-10 blur-md scale-105",alt:"Background Blur"}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center p-8 bg-white/80 rounded-2xl shadow-sm border border-slate-100/50 backdrop-blur-xl",children:[u.jsxs("div",{className:"relative mb-6",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-slate-100 rounded-full"}),u.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"})})]}),u.jsx("p",{className:"font-bold text-lg tracking-wide animate-shimmer-text",children:r||"..."})]})]}),!n&&e&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center transition-colors duration-300",style:T(),children:u.jsx("img",{src:`data:image/png;base64,${e}`,alt:"Result",className:"max-w-full max-h-full object-contain animate-fade-in",draggable:!1})}),u.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden",style:{clipPath:`inset(0 ${100-o}% 0 0)`},children:[u.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white/95",children:u.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain",draggable:!1})}),u.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur text-primary text-[10px] font-bold px-2 py-1 rounded shadow-sm border border-slate-100 select-none",children:w.original})]}),u.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white z-30 cursor-ew-resize shadow-[0_0_10px_rgba(0,0,0,0.2)] hover:bg-blue-100 transition-colors",style:{left:`${o}%`},onMouseDown:_,onTouchStart:_,children:u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg border border-slate-100 flex items-center justify-center text-primary transform hover:scale-110 active:scale-95 transition-all duration-200 cursor-ew-resize",children:u.jsx(X2,{className:"w-4 h-4"})})}),u.jsx("div",{className:"absolute top-4 right-4 bg-primary/90 backdrop-blur text-white text-[10px] font-bold px-2 py-1 rounded shadow-sm z-20 select-none",children:w.result})]}),!n&&!e&&u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain"})})]}),!n&&e&&u.jsxs("div",{className:"flex flex-col items-center gap-3 animate-fade-in-up",children:[u.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:w.bgColor}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-3 bg-white p-3 rounded-2xl border border-slate-200 shadow-sm transition-all hover:shadow-md",children:[O_.map(R=>u.jsx("button",{onClick:()=>m(R.value),className:`w-10 h-10 rounded-full border-2 transition-all duration-200 hover:scale-110 active:scale-95 flex items-center justify-center ${d===R.value?"border-primary ring-2 ring-primary/20 scale-110":"border-slate-200 hover:border-slate-300"}`,style:{backgroundColor:R.value||"white"},title:R.label,children:R.value===null&&u.jsx("div",{className:"w-full h-full rounded-full opacity-40",style:{backgroundImage:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 0 4px, 4px -4px, -4px 0px"}})},R.label)),u.jsx("div",{className:"w-px h-8 bg-slate-200 mx-2 self-center"}),u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:"color",ref:y,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:R=>m(R.target.value),value:d||"#ffffff"}),u.jsx("button",{className:`w-10 h-10 rounded-full border-2 flex items-center justify-center bg-white hover:bg-slate-50 transition-all duration-200 hover:scale-110 active:scale-95 ${d&&!O_.find(R=>R.value===d)?"border-primary ring-2 ring-primary/20":"border-slate-200 group-hover:border-slate-300"}`,title:"Custom Color",children:u.jsx("span",{className:"text-xl leading-none pb-1 text-slate-400 group-hover:text-primary transition-colors",children:"+"})})]})]})]}),!n&&!e&&u.jsx("p",{className:"text-center text-slate-400 text-xs animate-fade-in",children:w.uploadPrompt})]})},q9=({isOpen:t,onClose:e,removeBgKey:n,onSaveRemoveBgKey:r,storedApiKeys:s,onAddApiKey:i,onDeleteApiKey:o,onToggleApiKey:a,onSelectGoogleKey:l,googleSearchKey:c,googleSearchCx:d,onSaveGoogleSearch:m,openRouterKey:g,onSaveOpenRouterKey:y,huggingFaceKey:w,onSaveHuggingFaceKey:x,groqKey:_,onSaveGroqKey:v,language:E})=>{const[T,R]=F.useState(n),[L,U]=F.useState(c),[S,C]=F.useState(d),[N,M]=F.useState(g),[V,P]=F.useState(w),[D,k]=F.useState(_),[H,me]=F.useState(""),[re,te]=F.useState(!1),[Q,ue]=F.useState(!1),[K,$]=F.useState(!1),ce=mu[E];if(F.useEffect(()=>{R(n),U(c),M(g),P(w),k(_),C(!d&&!S?"3040e7dd9eac6414b":d),t||(te(!1),me(""),ue(!1))},[n,c,d,g,w,_,t]),!t)return null;const Z=async()=>{const xe=H.trim();if(!(!xe||!re)){if(!xe.startsWith("AIza")){He("Format Key salah. Harus dimulai dengan 'AIza'.");return}if(xe.length!==39){He(`Panjang Key salah (${xe.length}). Harusnya 39 karakter.`);return}if(s.some(ke=>ke.key===xe)){He("Key ini sudah ada di daftar.");return}$(!0);try{const Ce=await new O0({apiKey:xe}).models.generateContent({model:"gemini-3-flash-preview",contents:"Ping"});if(!Ce||!Ce.candidates||Ce.candidates.length===0)throw new Error("API Valid, but response empty.");i(xe,Q),me(""),ue(!1),He("Key berhasil diverifikasi & disimpan!")}catch(ke){console.error("Key Validation Failed:",ke);const Ce=(ke.message||"").toLowerCase();Ce.includes("400")||Ce.includes("invalid_argument")?He("Key DITOLAK oleh Google (Invalid)."):Ce.includes("403")?He("Key valid tapi tidak punya izin (Billing/Project problem)."):Ce.includes("404")?He("Model tidak ditemukan."):He("Gagal memvalidasi Key. "+(ke.message||"Unknown error"))}finally{$(!1)}}},ee=()=>{r(T.trim()),m(L.trim(),S.trim()),y(N.trim()),x(V.trim()),v(D.trim()),e(),He("Pengaturan disimpan!")},Se=({value:xe,hasSystemDefault:ke=!0})=>xe&&xe.trim().length>0?u.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-md border border-green-200",children:[u.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"})," Key Pribadi (Custom)"]}):ke?u.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-blue-100 text-blue-700 px-2 py-0.5 rounded-md border border-blue-200",children:[u.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"})," Key Sistem (Bawaan)"]}):u.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-slate-100 text-slate-500 px-2 py-0.5 rounded-md border border-slate-200",children:[u.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full"})," Nonaktif"]});return u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-fade-in-up ring-1 ring-slate-900/5",children:[u.jsxs("div",{className:"bg-white px-6 py-5 border-b border-slate-100 flex items-center justify-between sticky top-0 z-10",children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 border border-slate-100 flex items-center justify-center text-primary",children:u.jsx(Rl,{className:"w-5 h-5"})})," ",ce.settingsTitle]}),u.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-50 hover:bg-slate-100 text-slate-400 hover:text-slate-800 transition-all",children:""})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-slate-50",children:[u.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/18889/18889881.png",className:"w-6 h-6 object-contain",alt:"Gemini"})," ",ce.googleApiTitle," (Utama)"]}),u.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:ce.googleApiDesc})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"flex items-center justify-between mb-3 px-1",children:u.jsxs("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[ce.keysStored,u.jsx("span",{className:"bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded text-[10px]",children:s.length})]})}),s.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-6 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50 mb-4",children:[u.jsx(Rl,{className:"w-6 h-6 text-slate-300 mb-2"}),u.jsx("p",{className:"text-xs text-slate-400 font-medium text-center",children:ce.noKeysYet})]}):u.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto custom-scrollbar pr-1 mb-4",children:s.map((xe,ke)=>u.jsxs("div",{className:`flex items-center justify-between p-3 bg-white border rounded-xl shadow-sm transition-all ${xe.isActive!==!1?"border-slate-200":"border-slate-100 bg-slate-50/50 opacity-70"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 text-xs font-bold border ${xe.isShared?"bg-green-50 text-green-600 border-green-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:xe.isShared?u.jsx(ud,{className:"w-3.5 h-3.5"}):ke+1}),u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("span",{className:"text-xs font-mono text-slate-700 font-bold tracking-tight",children:[" ",xe.key.slice(-4)]}),u.jsx("span",{className:`text-[9px] font-bold ${xe.isActive!==!1?"text-green-500":"text-slate-400"}`,children:xe.isActive!==!1?" "+ce.active:" "+ce.inactive})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{onClick:Ce=>Ce.stopPropagation(),children:u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer scale-75",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:xe.isActive!==!1,onChange:Ce=>a(xe.key,Ce.target.checked)}),u.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-green-500"})]})}),u.jsx("button",{onClick:()=>o(xe.key),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg",children:u.jsx(Pr,{className:"w-3.5 h-3.5"})})]})]},ke))})]}),u.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer w-fit mb-3",children:[u.jsx("input",{type:"checkbox",checked:re,onChange:xe=>te(xe.target.checked),className:"w-3.5 h-3.5 text-blue-600 rounded border-slate-300 focus:ring-blue-500"}),u.jsx("span",{className:"text-[10px] text-slate-500 font-medium",children:"Saya bertanggung jawab atas penggunaan Key ini."})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:H,onChange:xe=>me(xe.target.value),placeholder:re?ce.addKeyPlaceholder:"Centang dulu di atas...",disabled:!re||K,maxLength:50,className:"flex-1 px-3 py-2 bg-white border rounded-lg text-xs outline-none transition-colors disabled:bg-slate-100 border-slate-200 focus:border-blue-500"}),u.jsx("button",{onClick:Z,disabled:!re||!H.trim()||K,className:"px-4 py-2 bg-slate-900 text-white rounded-lg text-xs font-bold hover:bg-slate-800 disabled:bg-slate-300 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:K?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-3 h-3 border-2 border-white/50 border-t-white rounded-full animate-spin"}),"Checking..."]}):"+ Add"})]}),u.jsx("div",{className:"mt-3 flex justify-center",children:u.jsxs("button",{onClick:l,className:"text-[10px] font-bold text-blue-600 hover:underline flex items-center gap-1",children:[ce.selectKeyBtn," "]})})]})]}),u.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[u.jsxs("div",{className:"mb-5 border-b border-slate-100 pb-4",children:[u.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[u.jsx("div",{className:"p-1.5 bg-emerald-50 rounded-lg",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/11681/11681335.png",className:"w-5 h-5 object-contain",alt:"API"})})," Integrasi API Eksternal"]}),u.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:"Kelola key untuk layanan Fallback (Cadangan) dan Tools tambahan."})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(cd,{className:"w-3.5 h-3.5 text-slate-400"}),u.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Fallback AI (Cadangan Chat)"})]}),u.jsxs("div",{className:"space-y-4 pl-1",children:[u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"OpenRouter (Prioritas 2)"}),u.jsx(Se,{value:N,hasSystemDefault:!0})]}),u.jsx("input",{type:"text",value:N,onChange:xe=>M(xe.target.value),placeholder:"sk-or-v1-...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-emerald-500/10 focus:border-emerald-500 outline-none transition-all font-mono"})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Groq API (Prioritas 3)"}),u.jsx(Se,{value:D,hasSystemDefault:!0})]}),u.jsx("input",{type:"text",value:D,onChange:xe=>k(xe.target.value),placeholder:"gsk_...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-orange-500/10 focus:border-orange-500 outline-none transition-all font-mono"})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Hugging Face (Prioritas 4)"}),u.jsx(Se,{value:V,hasSystemDefault:!0})]}),u.jsx("input",{type:"text",value:V,onChange:xe=>P(xe.target.value),placeholder:"hf_...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-yellow-500/10 focus:border-yellow-500 outline-none transition-all font-mono"})]})]})]}),u.jsx("div",{className:"h-px bg-slate-100 w-full"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/6710/6710433.png",className:"w-4 h-4 object-contain",alt:"Tools"}),u.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Search & Tools"})]}),u.jsxs("div",{className:"space-y-4 pl-1",children:[u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-2",children:"Google Search API"}),u.jsx(Se,{value:L,hasSystemDefault:!1})]}),u.jsxs("div",{className:"grid gap-2",children:[u.jsx("input",{type:"text",value:L,onChange:xe=>U(xe.target.value),placeholder:"API Key",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-blue-500 outline-none font-mono"}),u.jsx("input",{type:"text",value:S,onChange:xe=>C(xe.target.value),placeholder:"Search Engine ID (CX)",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-blue-500 outline-none font-mono"})]})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Remove.bg API"}),u.jsx("span",{className:"text-[9px] bg-green-100 text-green-700 px-1.5 rounded-md border border-green-200",children:"Aktif"})]}),u.jsx(Se,{value:T,hasSystemDefault:!0})]}),u.jsx("input",{type:"text",value:T,onChange:xe=>R(xe.target.value),placeholder:"API Key Remove.bg...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-purple-500 outline-none font-mono"})]})]})]})]})]})]}),u.jsxs("div",{className:"p-5 border-t border-slate-100 bg-white flex items-center justify-end gap-3 shrink-0",children:[u.jsx("button",{onClick:e,className:"px-5 py-2.5 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded-xl font-bold text-sm transition-all",children:ce.cancel}),u.jsxs("button",{onClick:ee,className:"px-6 py-2.5 bg-slate-900 hover:bg-slate-800 text-white rounded-xl font-bold text-sm shadow-lg shadow-slate-900/20 active:scale-95 transition-all flex items-center gap-2",children:[u.jsx(is,{className:"w-4 h-4"}),ce.save]})]})]})})},W9=({onLogin:t,language:e,onToggleLanguage:n,onClose:r})=>{const[s,i]=F.useState(!1),[o,a]=F.useState(null),l=async()=>{i(!0),a(null);try{const{user:c,credits:d,id:m}=await M3();t(c,m,d)}catch(c){console.error(c),c.code==="auth/popup-closed-by-user"?a("Login dibatalkan."):a("Gagal login dengan Google. Coba lagi.")}finally{i(!1)}};return u.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center overflow-hidden bg-slate-50",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-40 pointer-events-none",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),u.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),u.jsxs("div",{className:"relative z-10 w-full max-w-sm rounded-[2rem] shadow-2xl animate-fade-in-up border border-slate-200 overflow-hidden bg-white p-2",children:[u.jsx("div",{className:"absolute inset-0 opacity-[0.4] pointer-events-none",style:{backgroundImage:"linear-gradient(#f1f5f9 1px, transparent 1px), linear-gradient(90deg, #f1f5f9 1px, transparent 1px)",backgroundSize:"20px 20px"}}),r&&u.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 rounded-full text-slate-400 hover:bg-slate-100 hover:text-slate-900 transition-all z-20",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),u.jsxs("div",{className:"relative z-10 p-8 flex flex-col items-center text-center bg-white/80 backdrop-blur-sm rounded-[1.5rem]",children:[u.jsx("div",{className:"relative mb-6",children:u.jsx("div",{className:"w-20 h-20 bg-white border border-slate-100 rounded-3xl shadow-sm flex items-center justify-center transform hover:rotate-3 transition-transform duration-500",children:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra Logo",className:"w-10 h-10 object-contain"})})}),u.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Fanra AI Studio"}),u.jsx("p",{className:"text-slate-500 text-sm mb-8 leading-relaxed font-medium",children:"Masuk untuk menyimpan riwayat chat dan mengakses fitur kreatif."}),u.jsx("button",{onClick:l,disabled:s,className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-3.5 px-6 rounded-xl flex items-center justify-center gap-3 transition-all shadow-lg shadow-slate-900/20 active:scale-95 group disabled:opacity-70 disabled:cursor-not-allowed",children:s?u.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center p-0.5",children:u.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google",className:"w-full h-full"})}),u.jsx("span",{className:"text-sm",children:"Lanjutkan dengan Google"})]})}),o&&u.jsxs("div",{className:"mt-6 flex items-center gap-2 text-red-500 bg-red-50 px-4 py-2 rounded-lg text-xs font-bold animate-pulse",children:[u.jsx("span",{children:""})," ",o]}),u.jsx("div",{className:"mt-8 flex flex-col gap-1",children:u.jsx("span",{className:"text-[10px] text-slate-400 font-semibold uppercase tracking-wider",children:"Powered by Google"})})]})]})]})},K9=({isOpen:t,onClose:e,onNewChat:n,user:r,onLogout:s,onOpenLogin:i,language:o,tools:a,toolStatuses:l,onSelectTool:c,onExit:d,chatHistory:m=[],onLoadSession:g,currentSessionId:y})=>{const w=mu[o],[x,_]=F.useState(!1),v=x?a:a.slice(0,3),E=F.useMemo(()=>{const R={};return[...m].sort((U,S)=>S.timestamp-U.timestamp).forEach(U=>{const S=U.sessionId||"legacy";R[S]||(R[S]=[]),R[S].push(U)}),Object.keys(R).map(U=>{var M,V;const S=R[U],C=S.slice().reverse().find(P=>P.role==="user"),N=S[0];return{id:U,title:C?C.text:(V=(M=S[0])==null?void 0:M.attachments)!=null&&V.length?"Image Analysis":"Percakapan Baru",timestamp:N.timestamp,preview:N.text}}).sort((U,S)=>S.timestamp-U.timestamp)},[m]),T=(R,L)=>{L?He(w.toolLockedMsg):(c(R),window.innerWidth<768&&e())};return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),u.jsx("div",{className:`
          fixed md:relative top-0 left-0 bottom-0 z-50 h-full
          bg-slate-900 text-slate-200
          overflow-hidden flex flex-col
          transition-[width,transform,opacity] duration-300 ease-in-out
          w-[280px]
          ${t?"translate-x-0 shadow-2xl":"-translate-x-full shadow-none"}
          md:transform-none md:shadow-none md:top-auto md:left-auto md:bottom-auto
          ${t?"md:w-[260px]":"md:w-0"}
        `,children:u.jsxs("div",{className:"w-[280px] md:w-[260px] h-full flex flex-col border-r border-slate-800 bg-slate-900",children:[u.jsxs("div",{className:"p-4 flex items-center justify-between h-14 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra Logo",className:"w-8 h-8 object-contain"}),u.jsx("span",{className:"font-bold text-white tracking-wide",children:"Fanra"})]}),u.jsx("button",{onClick:e,className:"md:hidden text-slate-400 hover:text-white p-1",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-3 py-2 custom-scrollbar space-y-4",children:[u.jsxs("button",{onClick:()=>{n(),window.innerWidth<768&&e()},className:"w-full flex items-center gap-3 bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-xl transition-all active:scale-95 border border-slate-700 shadow-sm group",children:[u.jsx("span",{className:"text-xl font-light group-hover:scale-110 transition-transform",children:"+"}),u.jsx("span",{className:"text-sm font-medium",children:w.newChat})]}),u.jsx("div",{className:"h-px bg-slate-800/50 mx-2"}),u.jsxs("div",{children:[u.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Creative Tools"}),u.jsxs("div",{className:"space-y-1",children:[v.map(R=>{const L=l[R.id]!==!1,U=(r==null?void 0:r.isAdmin)||!1,S=!L&&!U;return u.jsxs("button",{onClick:()=>T(R,S),className:`w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all border border-transparent group relative
                                        ${S?"opacity-70 hover:bg-slate-800/50 cursor-pointer":"hover:bg-slate-800 hover:border-slate-700/50 active:scale-95 cursor-pointer"}
                                    `,children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 ${S?"bg-slate-800 grayscale":R.color.replace("bg-","bg-opacity-90 bg-")} shadow-sm`,children:u.jsx("div",{className:"scale-75 text-slate-800",children:R.icon})}),u.jsx("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:u.jsx("span",{className:`block text-xs font-bold truncate ${S?"text-slate-500":"text-slate-200 group-hover:text-white"}`,children:w[R.nameKey]})}),S&&u.jsx("div",{className:"absolute right-2",children:u.jsx(xT,{className:"w-3 h-3 text-slate-500"})})]},R.id)}),u.jsxs("button",{onClick:()=>_(!x),className:"w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all hover:bg-slate-800 border border-transparent border-dashed hover:border-slate-700/50 group",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center shrink-0 bg-slate-800 text-slate-400",children:u.jsx(_g,{className:"w-4 h-4"})}),u.jsx("span",{className:"text-xs font-medium text-slate-400 group-hover:text-white",children:x?w.lessTools:w.moreTools})]})]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase mb-2 mt-4",children:w.historyHeader}),u.jsx("div",{className:"space-y-1",children:r?E.length>0?E.map(R=>u.jsxs("button",{onClick:()=>{g(R.id),window.innerWidth<768&&e()},className:`w-full text-left px-4 py-2.5 rounded-lg truncate transition-all group border ${y===R.id?"bg-slate-800 text-white border-slate-700":"text-slate-400 hover:bg-slate-800/50 hover:text-slate-200 border-transparent"}`,children:[u.jsx("div",{className:"text-xs font-medium truncate",children:R.title}),u.jsxs("div",{className:"text-[9px] text-slate-600 mt-0.5 group-hover:text-slate-500",children:[new Date(R.timestamp).toLocaleDateString(),"  ",new Date(R.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},R.id)):u.jsx("p",{className:"px-4 py-2 text-xs text-slate-600 italic text-center border border-slate-800/50 rounded-lg",children:"Belum ada riwayat chat."}):u.jsx("p",{className:"px-4 py-2 text-xs text-slate-600 italic text-center",children:"Login untuk melihat riwayat."})})]})]}),u.jsxs("div",{className:"p-4 border-t border-slate-800 bg-slate-900 shrink-0",children:[d&&u.jsxs("button",{onClick:d,className:"w-full mb-4 py-2.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-xl font-bold text-xs uppercase tracking-wider transition-all flex items-center justify-center gap-2 border border-slate-700/50 hover:border-slate-600 group",children:[u.jsx(ss,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Exit Studio"]}),r?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.photoURL?u.jsx("img",{src:r.photoURL,alt:r.name,className:"w-8 h-8 rounded-full object-cover border border-slate-700"}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500 flex items-center justify-center text-xs font-bold text-white shrink-0",children:r.name.charAt(0).toUpperCase()}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-white truncate",title:r.name,children:r.name.length>20?r.name.substring(0,20)+"...":r.name}),u.jsx("p",{className:"text-xs text-slate-500 truncate",children:r.school})]})]}),u.jsxs("button",{onClick:s,className:"w-full py-2 text-xs font-medium text-slate-400 hover:text-red-400 hover:bg-red-900/10 rounded-lg transition-colors flex items-center justify-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),w.logOut]})]}):u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-xs text-slate-400 mb-3",children:w.loginToSave}),u.jsxs("button",{onClick:i,className:"w-full py-2.5 bg-white text-slate-900 font-bold rounded-xl text-sm hover:bg-slate-200 transition-colors shadow-lg active:scale-95 flex items-center justify-center gap-2",children:[u.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"G",className:"w-4 h-4"}),w.loginBtn]})]})]})]})})]})};class J9{constructor(e,n,r,s,i){this.x=e,this.y=n,this.vx=0,this.vy=0,this.radius=s,this.color=r,this.friction=.92,this.ease=i,this.dx=(Math.random()-.5)*80,this.dy=(Math.random()-.5)*80,this.angle=Math.random()*Math.PI*2,this.angleSpeed=.02+Math.random()*.03,this.wobbleRadius=15+Math.random()*25}update(e,n,r){if(r)this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction;else{this.angle+=this.angleSpeed;const s=Math.cos(this.angle)*this.wobbleRadius,i=Math.sin(this.angle)*this.wobbleRadius,o=e+this.dx+s,a=n+this.dy+i;this.x+=(o-this.x)*this.ease,this.y+=(a-this.y)*this.ease,this.vx=0,this.vy=0}}shatter(){const e=Math.random()*Math.PI*2,n=Math.random()*30+15;this.vx=Math.cos(e)*n,this.vy=Math.sin(e)*n}draw(e){e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2),e.fillStyle=this.color,e.fill()}}const Y9=({onEnter:t})=>{const[e,n]=F.useState(!1),[r,s]=F.useState(!1),i=F.useRef(null),o=F.useRef(!1),a=F.useRef({x:window.innerWidth/2,y:window.innerHeight/2}),l=F.useRef([]);F.useEffect(()=>{setTimeout(()=>s(!0),300);const m=i.current;if(!m)return;const g=m.getContext("2d");if(!g)return;const y=()=>{m.width=window.innerWidth,m.height=window.innerHeight};window.addEventListener("resize",y),y();const w=T=>{a.current={x:T.clientX,y:T.clientY}};window.addEventListener("mousemove",w);const x=["#0f172a","#1e293b","#312e81","#1e1b4b","#4c1d95","#2563eb"],_=[];for(let T=0;T<15;T++){const R=Math.random()*30+20,L=x[Math.floor(Math.random()*x.length)],U=Math.random()*.08+.03;_.push(new J9(m.width/2,m.height/2,L,R,U))}l.current=_;let v;const E=()=>{g.clearRect(0,0,m.width,m.height),l.current.forEach(T=>{T.update(a.current.x,a.current.y,o.current),T.draw(g)}),v=requestAnimationFrame(E)};return E(),()=>{window.removeEventListener("resize",y),window.removeEventListener("mousemove",w),cancelAnimationFrame(v)}},[]);const c=()=>{o.current||(o.current=!0,l.current.forEach(m=>m.shatter()),setTimeout(()=>{o.current=!1},1500))},d=()=>{n(!0),setTimeout(()=>{t()},900)};return u.jsxs("div",{className:`fixed inset-0 z-[999] bg-white flex flex-col items-center justify-center overflow-hidden transition-transform duration-[900ms] cubic-bezier(0.76, 0, 0.24, 1) ${e?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none shadow-none"}`,onDoubleClick:c,children:[u.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none filter blur-[60px] opacity-80",children:u.jsx("canvas",{ref:i,className:"w-full h-full"})}),u.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.4] pointer-events-none mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),u.jsxs("div",{className:`relative z-10 flex flex-col items-center max-w-lg w-full text-center px-6 transition-all duration-1000 ease-out transform select-none ${r?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,children:[u.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-slate-900 mb-2 tracking-tighter",children:["FANRA",u.jsx("span",{className:"text-blue-600",children:"."})]}),u.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-400 mb-8 tracking-widest uppercase",children:"AI Studio"}),u.jsxs("p",{className:"text-slate-500 text-sm md:text-base font-medium leading-relaxed mb-16 max-w-xs mx-auto",children:["Ruang imajinasi tanpa batas. ",u.jsx("br",{}),u.jsx("span",{className:"text-slate-800",children:"Edit, Ciptakan, dan Berdiskusi."})]}),u.jsxs("button",{onClick:d,className:"group flex flex-col items-center gap-4 transition-all outline-none cursor-pointer",children:[u.jsx("div",{className:"w-16 h-16 rounded-full border border-slate-200 bg-white/80 backdrop-blur-sm flex items-center justify-center shadow-lg transition-all duration-500 group-hover:scale-110 group-hover:bg-white group-hover:border-slate-300 group-active:scale-95 group-hover:shadow-xl",children:u.jsx(fr,{className:"w-6 h-6 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-600 transition-colors duration-300",children:"Open Studio"})]})]})]})},Q9="3JEZ69gonQmxU83WxzidFCFf",X9="AIzaSyDzwJLdjFvu5jrsF_HYtYSWLPSoQc2JYzA",Z9="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",e8="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",t8="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",n8="sb_publishable_ikw-BNV8Wu3qhNPuSti8Rg_7XmPMWqV",r8="",fc=[{id:wn.BACKGROUND_REMOVER,nameKey:"toolBgRemove",descKey:"toolBgRemoveDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/593/593398.png",className:"w-8 h-8 object-contain",alt:"Hapus Background"}),color:"bg-blue-50",model:"gemini-2.5-flash-image",cost:1},{id:wn.HD_UPSCALE,nameKey:"toolUpscale",descKey:"toolUpscaleDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/17558/17558323.png",className:"w-8 h-8 object-contain",alt:"HD Upscale"}),color:"bg-amber-50",model:"gemini-2.5-flash-image",cost:3},{id:wn.CREATIVE_REMIX,nameKey:"toolRemix",descKey:"toolRemixDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/17142/17142644.png",className:"w-8 h-8 object-contain",alt:"Creative Remix"}),color:"bg-purple-50",model:"gemini-2.5-flash-image",cost:3},{id:wn.COLORIZE,nameKey:"toolColorize",descKey:"toolColorizeDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/15109/15109276.png",className:"w-8 h-8 object-contain",alt:"Warnai Foto"}),color:"bg-pink-50",model:"gemini-2.5-flash-image",cost:2},{id:wn.SKETCH_TO_REAL,nameKey:"toolSketch",descKey:"toolSketchDesc",icon:u.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/9798/9798973.png",className:"w-8 h-8 object-contain",alt:"Sketsa ke Nyata"}),color:"bg-emerald-50",model:"gemini-2.5-flash-image",cost:3}],s8=({language:t,code:e})=>{const[n,r]=F.useState(!1),s=()=>{navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)},i=o=>o.split(`
`).map((a,l)=>u.jsxs("div",{className:"table-row",children:[u.jsx("span",{className:"table-cell select-none text-slate-600 text-right pr-4 w-8 text-xs",children:l+1}),u.jsx("span",{className:"table-cell",children:a.split(/([<>{}"']|class|const|let|var|function|return|import|export)/g).map((c,d)=>c.startsWith("<")||c.startsWith(">")?u.jsx("span",{className:"text-blue-400",children:c},d):c.startsWith('"')||c.startsWith("'")?u.jsx("span",{className:"text-green-400",children:c},d):["const","let","var","function","return","import","export","class"].includes(c)?u.jsx("span",{className:"text-purple-400 font-bold",children:c},d):["=","{","}","(",")",";"].includes(c)?u.jsx("span",{className:"text-slate-400",children:c},d):u.jsx("span",{className:"text-slate-200",children:c},d))})]},l));return u.jsxs("div",{className:"my-4 rounded-xl overflow-hidden border border-slate-700/50 shadow-lg bg-[#1e1e1e] w-full max-w-full group",children:[u.jsxs("div",{className:"bg-[#2d2d2d] px-4 py-2 flex items-center justify-between border-b border-white/5",children:[u.jsx("span",{className:"text-xs font-mono text-slate-400 lowercase font-bold",children:t||"code"}),u.jsx("button",{onClick:s,className:"flex items-center gap-1.5 text-[10px] font-medium text-slate-400 hover:text-white bg-white/5 hover:bg-white/10 px-2 py-1 rounded transition-all",children:n?u.jsxs(u.Fragment,{children:[u.jsx(is,{className:"w-3 h-3 text-green-400"})," Copied"]}):u.jsxs(u.Fragment,{children:[u.jsx(yT,{className:"w-3 h-3"})," Copy Code"]})})]}),u.jsx("div",{className:"p-4 overflow-x-auto custom-scrollbar",children:u.jsx("pre",{className:"font-mono text-sm leading-relaxed whitespace-pre font-normal",style:{tabSize:2},children:u.jsx("code",{className:"table w-full border-collapse",children:i(e)})})})]})},i8=({isOpen:t,onClose:e})=>t?u.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-6 shadow-2xl animate-fade-in-up border border-slate-100",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center",children:u.jsx(Rl,{className:"w-5 h-5"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Cara Dapet API Key Gemini"})]}),u.jsxs("ol",{className:"space-y-4 text-sm text-slate-600 mb-6 list-decimal list-inside marker:font-bold marker:text-blue-600",children:[u.jsxs("li",{className:"pl-2",children:["Buka website ",u.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-bold hover:underline",children:"Google AI Studio"}),"."]}),u.jsx("li",{className:"pl-2",children:"Login pakai akun Google kamu."}),u.jsxs("li",{className:"pl-2",children:["Klik tombol biru besar bertuliskan ",u.jsx("b",{children:'"Create API Key"'}),"."]}),u.jsxs("li",{className:"pl-2",children:["Pilih ",u.jsx("b",{children:'"Create API key in new project"'}),"."]}),u.jsxs("li",{className:"pl-2",children:["Salin (Copy) kode yang muncul, lalu tempel di menu ",u.jsx("b",{children:"Pengaturan"})," aplikasi ini."]})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-xs text-slate-500 mb-6",children:[" ",u.jsx("b",{children:"Tips:"})," API Key ini gratis (Free Tier). Jangan kasih tau kode ini ke orang lain ya."]}),u.jsx("button",{onClick:e,className:"w-full py-3 bg-primary text-white rounded-xl font-bold shadow-lg shadow-primary/20 hover:bg-slate-800 transition-all active:scale-95",children:"Oke, Siap!"})]})}):null,B_=({text:t,block:e=!1})=>{const[n,r]=F.useState(t);F.useEffect(()=>{if(window.katex)try{const i=window.katex.renderToString(t,{throwOnError:!1,displayMode:e});r(i)}catch{r(t)}},[t,e]);const s=()=>{navigator.clipboard.writeText(t),He("Rumus LaTeX disalin! ")};return window.katex?u.jsx("span",{dangerouslySetInnerHTML:{__html:n},className:`${e?"block my-2 overflow-x-auto overflow-y-hidden py-1":""} cursor-pointer hover:bg-slate-100/50 rounded transition-colors`,title:"Klik 2x untuk salin rumus",onDoubleClick:s}):u.jsx("code",{children:t})},z_=t=>{const e=[],n=i=>{const o=`___TOKEN_${e.length}___`;return e.push({id:o,node:i}),o};let r=t.replace(/```([\w-]*)\n([\s\S]*?)```/g,(i,o,a)=>n(u.jsx(s8,{language:o,code:a})));return r=r.replace(/(\$\$[\s\S]*?\$\$|\\\[[\s\S]*?\\\])/g,i=>{const o=(i.startsWith("$$"),i.slice(2,-2));return n(u.jsx(B_,{text:o,block:!0}))}),r=r.replace(new RegExp("(\\\\\\([\\s\\S]*?\\\\\\)|(?<!\\\\)\\$(?:[^$\\n]+?)(?<!\\\\)\\$)","g"),i=>{const o=i.startsWith("\\(")?i.slice(2,-2):i.slice(1,-1);return n(u.jsx(B_,{text:o,block:!1}))}),r.split(`
`).map((i,o)=>i.trim().startsWith("### ")?u.jsx("h3",{className:"text-base font-bold text-slate-900 mt-3 mb-1",children:Vf(i.replace(/^###\s+/,""),e)},o):i.trim().startsWith("## ")?u.jsx("h2",{className:"text-lg font-bold text-slate-900 mt-4 mb-2",children:Vf(i.replace(/^##\s+/,""),e)},o):i.trim()==="***"||i.trim()==="---"?u.jsx("div",{className:"h-px bg-slate-200 my-4 w-full"},o):i.trim()===""?u.jsx("div",{className:"h-2"},o):u.jsx("div",{className:"block leading-relaxed",children:Vf(i,e)},o))},Vf=(t,e)=>t.split(/(\*\*[\s\S]*?\*\*)/g).map((r,s)=>r.startsWith("**")&&r.endsWith("**")?u.jsx("strong",{className:"font-bold text-slate-900",children:G_(r.slice(2,-2),e)},s):u.jsx(cl.Fragment,{children:G_(r,e)},s)),G_=(t,e)=>t.split(new RegExp("(?<!\\*)\\*([^*]+?)\\*(?!\\*)","g")).map((r,s)=>s%2===1?u.jsx("em",{className:"italic text-slate-800",children:H_(r,e)},s):H_(r,e)),H_=(t,e)=>t.split(/(___TOKEN_\d+___)/g).map((r,s)=>{const i=e.find(l=>l.id===r);if(i)return u.jsx(cl.Fragment,{children:i.node},s);const a=/\[(.*?)\]\((.*?)\)/g.exec(r);return a?u.jsxs(cl.Fragment,{children:[r.substring(0,a.index),u.jsx("a",{href:a[2],target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline font-medium",children:a[1]}),r.substring(a.index+a[0].length)]},s):r});function o8({onExit:t,isAdmin:e=!1}){const[n,r]=F.useState(!0),[s,i]=F.useState("id"),[o,a]=F.useState(null),[l,c]=F.useState(null),d=(o==null?void 0:o.isAdmin)||e,[m,g]=F.useState(!1),[y,w]=F.useState(!1),[x,_]=F.useState(!1),[v,E]=F.useState(!0),[T,R]=F.useState(null),[L,U]=F.useState(null),[S,C]=F.useState(null),[N,M]=F.useState(""),[V,P]=F.useState({isProcessing:!1,progress:"",error:null}),[D,k]=F.useState({}),[H,me]=F.useState(Date.now().toString()),[re,te]=F.useState([]),[Q,ue]=F.useState([]),[K,$]=F.useState(""),[ce,Z]=F.useState([]),[ee,Se]=F.useState(null),[xe,ke]=F.useState(!1),[Ce,Be]=F.useState(!1),[Ke,kt]=F.useState(null),ot=F.useRef(null),A=F.useRef(null),se=F.useRef(null),X=F.useRef(null),[z,B]=F.useState(!1),[W,ie]=F.useState(""),[oe,Y]=F.useState([]),[le,ye]=F.useState(""),[he,ve]=F.useState(""),[Pe,De]=F.useState(""),[pt,rn]=F.useState(""),[Ct,O]=F.useState(""),[G,pe]=F.useState(!0),[we,Re]=F.useState(!0),[tt,Me]=F.useState(!1),[xt,Et]=F.useState(!1),[wt,sn]=F.useState(!1),[Lt,Kt]=F.useState(!1),[zt,jn]=F.useState(!1),[Wi,ys]=F.useState(!1),[yu,jt]=F.useState(!1),[vu,Or]=F.useState(null),Ze=mu[s];F.useEffect(()=>{const q=(Ne,Le)=>{const et=localStorage.getItem(Ne);et&&Le(et)};q("remove_bg_key",ie),q("google_search_key",ye),q("google_search_cx",ve),q("open_router_key",De),q("hugging_face_key",rn),q("groq_key",O),localStorage.getItem("fanra_rb_enabled")==="false"&&pe(!1),localStorage.getItem("fanra_sb_enabled")==="false"&&Re(!1),localStorage.getItem("fanra_km_enabled")==="true"&&Me(!0),localStorage.getItem("fanra_wiki_enabled")==="true"&&Et(!0),(async()=>{const Ne={};for(const Le of fc){const et=`tool_status_${Le.id}`,At=await C0(et);Ne[Le.id]=At!=="false"}k(Ne)})(),xs()},[]),F.useEffect(()=>{zt&&oe.some(q=>q.isActive)&&jn(!1)},[oe]),F.useEffect(()=>{var q;(q=A.current)==null||q.scrollIntoView({behavior:"smooth"})},[Q,V.isProcessing,ce]),F.useEffect(()=>{l&&(V3(l).then(q=>{te(q);const _e=q.filter(Ne=>Ne.sessionId===H);ue(_e)}),L3(l).then(q=>Y(q))),xs()},[l,H]),F.useEffect(()=>{if(X.current){X.current.style.height="auto";const q=Math.min(X.current.scrollHeight,128);X.current.style.height=`${Math.max(42,q)}px`}},[K,ce]);const Dh=()=>W||Q9,xu=()=>{const q=oe.filter(_e=>_e.isActive!==!1).map(_e=>_e.key);return q.length===0?[X9]:q},vs=q=>{ie(q),localStorage.setItem("remove_bg_key",q)},Lh=(q,_e)=>{ye(q),ve(_e),localStorage.setItem("google_search_key",q),localStorage.setItem("google_search_cx",_e)},jh=q=>{De(q),localStorage.setItem("open_router_key",q)},Ki=q=>{rn(q),localStorage.setItem("hugging_face_key",q)},wu=q=>{O(q),localStorage.setItem("groq_key",q)},pa=async(q,_e)=>{const Ne={key:q,addedAt:Date.now(),isShared:_e,isActive:!0},Le=[...oe,Ne];Y(Le),l&&await ew(l,Le)},Ji=async q=>{const _e=oe.filter(Ne=>Ne.key!==q);Y(_e),l&&await j3(l,q,_e)},Tr=async(q,_e)=>{const Ne=oe.map(Le=>Le.key===q?{...Le,isActive:_e}:Le);Y(Ne),l&&await ew(l,Ne)},_u=q=>{pe(q),localStorage.setItem("fanra_rb_enabled",q.toString())},bu=q=>{Re(q),localStorage.setItem("fanra_sb_enabled",q.toString())},ma=q=>{Me(q),localStorage.setItem("fanra_km_enabled",q.toString())},ga=q=>{Et(q),localStorage.setItem("fanra_wiki_enabled",q.toString())},Eu=async()=>{try{window.aistudio&&await window.aistudio.openSelectKey()}catch(q){console.error(q)}},xs=()=>{if(oe.length>0){sn(!1),Kt(!1);return}const q=new Date().toISOString().split("T")[0],_e=o?l||"user":"guest",Ne=`fanra_limit_${q}_${_e}_chat`,Le=`fanra_limit_${q}_${_e}_image`,et=parseInt(localStorage.getItem(Ne)||"0"),At=parseInt(localStorage.getItem(Le)||"0"),at=o?10:3,Ft=o?3:1;sn(et>=at),Kt(At>=Ft)},ya=q=>{if(oe.length>0)return!0;const Le=`fanra_limit_${new Date().toISOString().split("T")[0]}_${o?l||"user":"guest"}_${q}`,et=parseInt(localStorage.getItem(Le)||"0");let At=0;return o?At=q==="chat"?10:3:At=q==="chat"?3:1,et>=At?(xs(),!1):(localStorage.setItem(Le,(et+1).toString()),xs(),!0)},ai=(q,_e,Ne,Le)=>{U({data:q,mimeType:_e,width:Ne,height:Le})},Tu=(q,_e,Ne)=>{a(q),c(_e),g(!1)},Br=()=>{U(null),C(null),M(""),R(null),P({isProcessing:!1,progress:"",error:null}),Z([]),Or(null)},li=async()=>{await D3(),a(null),c(null),Y([]),Br(),te([]),ue([]),jn(!1),xs()},Ir=()=>i(q=>q==="id"?"en":"id"),va=(q,_e)=>{q&&navigator.clipboard.writeText(q).then(()=>{Se(_e),setTimeout(()=>Se(null),2e3)})},Fh=q=>{kt(_e=>_e===q?null:q)},Iu=async(q,_e)=>{if(_e.stopPropagation(),!d)return;const Ne=!D[q];k(Le=>({...Le,[q]:Ne}));try{await A0(`tool_status_${q}`,Ne.toString())}catch{k(et=>({...et,[q]:!Ne}))}},Su=(q,_e)=>{_e?He(Ze.toolLockedMsg):R(q)},ku=q=>{q.preventDefault(),q.stopPropagation(),ke(!0)},xa=q=>{q.preventDefault(),q.stopPropagation(),ke(!1)},wa=q=>{const _e=new FileReader;_e.onloadend=()=>{const Ne=_e.result,Le=new Image;Le.onload=()=>{ai(Ne.split(",")[1],q.type,Le.width,Le.height)},Le.src=Ne},_e.readAsDataURL(q)},_a=q=>{if(q.length+ce.length>3){alert("Maksimal 3 gambar sekaligus.");return}q.forEach(_e=>{if(!_e.type.startsWith("image/"))return;const Ne=new FileReader;Ne.onloadend=()=>{const Le=Ne.result.split(",")[1];Z(et=>[...et,{data:Le,mimeType:_e.type,name:_e.name}])},Ne.readAsDataURL(_e)})},Cu=q=>{q.preventDefault(),q.stopPropagation(),ke(!1);const _e=Array.from(q.dataTransfer.files);if(_e.length!==0)if(T){const Ne=_e[0];Ne.type.startsWith("image/")&&wa(Ne)}else _a(_e)},Au=()=>{const q=Date.now().toString();me(q),ue([]),Z([]),Br(),w(!1)},Vh=q=>{me(q);const _e=re.filter(Ne=>Ne.sessionId===q);ue(_e),w(!1),Br()},ba=()=>{S?(Or("back"),jt(!0)):Br()},Nu=()=>{vu==="back"&&Br(),jt(!1),Or(null)},Uh=()=>{ot.current&&(ot.current.abort(),ot.current=null,P({isProcessing:!1,progress:"",error:"Stopped by user."}))},Sr=async q=>{var et,At;if(q==null||q.preventDefault(),!K.trim()&&ce.length===0||zt||!ya("chat")||ce.length>0&&!ya("image"))return;const _e={id:Date.now().toString(),sessionId:H,role:"user",text:K,timestamp:Date.now(),attachments:[...ce]},Ne={id:"temp-thinking",sessionId:H,role:"model",text:"",timestamp:Date.now()+1},Le=[...Q,_e,Ne];ue(Le),te(at=>[...at,_e,Ne]),$(""),Z([]),P({isProcessing:!0,progress:"AI Thinking...",error:null}),l&&tw(l,_e);try{ot.current=new AbortController;const at=le&&he?{apiKey:le,cx:he}:void 0,Ft=xu(),Fn=await O9(_e.text,Ft,Q,s,_e.attachments||[],_s=>{ue(kn=>kn.map(Ea=>Ea.id==="temp-thinking"?{...Ea,text:_s}:Ea))},tt,xt,at,ot.current.signal,Pe||Z9,pt||e8,Ct||t8),Kn={id:(Date.now()+2).toString(),sessionId:H,role:"model",text:Fn.text,timestamp:Date.now(),source:Fn.source};ue(_s=>_s.map(kn=>kn.id==="temp-thinking"?Kn:kn)),te(_s=>_s.map(kn=>kn.id==="temp-thinking"?Kn:kn)),l&&tw(l,Kn)}catch(at){if(at.message==="Request cancelled by user")ue(Ft=>Ft.filter(Fn=>Fn.id!=="temp-thinking")),te(Ft=>Ft.filter(Fn=>Fn.id!=="temp-thinking"));else{const Ft={id:(Date.now()+2).toString(),sessionId:H,role:"model",text:Ze.chatFallbackError+(at.message?` (${at.message})`:""),timestamp:Date.now()};ue(Fn=>Fn.map(Kn=>Kn.id==="temp-thinking"?Ft:Kn)),te(Fn=>Fn.map(Kn=>Kn.id==="temp-thinking"?Ft:Kn)),((et=at.message)!=null&&et.includes("429")||(At=at.message)!=null&&At.includes("quota"))&&jn(!0)}}finally{P({isProcessing:!1,progress:"",error:null}),ot.current=null}},sr=q=>{Z(_e=>_e.filter((Ne,Le)=>Le!==q))},ui=()=>{var q;Lt||(q=se.current)==null||q.click()},Yi=q=>{if(q.target.files){const _e=Array.from(q.target.files);_a(_e)}q.target.value=""},Ru=o||{name:"Guest"},st=x?fc:fc.slice(0,3),Qi=async()=>{if(!L||!T||!ya("image"))return;P({isProcessing:!0,progress:Ze.initializing,error:null}),C(null);const q=T.id===wn.BACKGROUND_REMOVER,_e=Dh(),Ne=xu();try{let Le="",et=!1;if(q&&_e&&G&&!et)try{P(at=>({...at,progress:Ze.processingStandard})),Le=await G9(L.data,_e),et=!0}catch{console.warn("Standard Engine failed")}if(!et&&(q||!q)&&!et&&Ne.length>0)try{P(at=>({...at,progress:Ze.processingAI})),Le=await M9({image:L,tool:T.id,prompt:T.id===wn.CREATIVE_REMIX?N:void 0,apiKeys:Ne}),q&&(P(at=>({...at,progress:Ze.refining})),Le=await B9(Le)),et=!0}catch(at){console.warn("Gemini failed",at)}if(!et||!Le)throw new Error("No available API Keys or Services found/enabled.");C(Le),P({isProcessing:!1,progress:"",error:null})}catch(Le){console.error("Execution Error:",Le);let et=Ze.serviceBusy;const At=(Le.message||"").toLowerCase();At.includes("network")||At.includes("fetch")?et=Ze.networkError:At.includes("memory")||At.includes("oom")?et=Ze.memoryError:(At.includes("no available api")||At.includes("enabled"))&&(et=Ze.insufficientCredits),P({isProcessing:!1,progress:"",error:et})}},ws=wt&&!zt&&!V.isProcessing,ci=/(\$\$|\\\[|\\\(|\$)/.test(K);return u.jsxs("div",{className:"flex h-[100dvh] bg-white font-sans text-primary overflow-hidden relative",onDragOver:ku,onDragLeave:xa,onDrop:Cu,children:[n&&u.jsx(Y9,{onEnter:()=>r(!1)}),xe&&u.jsx("div",{className:"absolute inset-0 z-[100] bg-primary/10 backdrop-blur-sm border-4 border-primary border-dashed m-4 rounded-3xl flex items-center justify-center pointer-events-none",children:u.jsxs("div",{className:"bg-white px-8 py-4 rounded-2xl shadow-xl flex items-center gap-3",children:[u.jsx(Av,{className:"w-6 h-6 text-primary"}),u.jsx("span",{className:"font-bold text-lg text-primary",children:"Drop files to send"})]})}),m&&u.jsx("div",{className:"fixed inset-0 z-[60] bg-white",children:u.jsx(W9,{onLogin:Tu,language:s,onToggleLanguage:Ir,onClose:()=>g(!1)})}),u.jsx(i8,{isOpen:Wi,onClose:()=>ys(!1)}),u.jsx(q9,{isOpen:z,onClose:()=>B(!1),removeBgKey:W,onSaveRemoveBgKey:vs,storedApiKeys:oe,onAddApiKey:pa,onDeleteApiKey:Ji,onToggleApiKey:Tr,onSelectGoogleKey:Eu,knowledgeMode:tt,onToggleKnowledgeMode:ma,wikiEnabled:xt,onToggleWiki:ga,removeBgEnabled:G,onToggleRemoveBg:_u,supabaseEnabled:we,onToggleSupabase:bu,googleSearchKey:le,googleSearchCx:he,onSaveGoogleSearch:Lh,openRouterKey:Pe,onSaveOpenRouterKey:jh,huggingFaceKey:pt,onSaveHuggingFaceKey:Ki,groqKey:Ct,onSaveGroqKey:wu,language:s}),u.jsx(pu,{isOpen:yu,title:Ze.confirmTitle,description:Ze.confirmDesc,confirmText:Ze.yesChange,onConfirm:Nu,onCancel:()=>jt(!1)}),u.jsx(K9,{isOpen:y,onClose:()=>w(!1),onNewChat:Au,user:o,onLogout:li,onOpenLogin:()=>g(!0),language:s,tools:fc,toolStatuses:D,onSelectTool:R,onExit:t,chatHistory:re,onLoadSession:Vh,currentSessionId:H}),u.jsxs("div",{className:"flex-1 flex flex-col h-full relative w-full overflow-hidden bg-slate-50/50",children:[u.jsx("header",{className:"absolute top-0 left-0 right-0 z-30 p-4 pointer-events-none",children:u.jsxs("div",{className:"max-w-5xl mx-auto bg-white/80 backdrop-blur-xl border border-white/40 shadow-lg shadow-slate-200/50 rounded-2xl px-4 py-3 flex items-center justify-between pointer-events-auto",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>w(!y),className:"p-2 rounded-xl hover:bg-slate-100 text-slate-600 transition-colors",children:u.jsx(gT,{className:"w-5 h-5"})}),u.jsx("div",{className:"font-bold text-lg tracking-tight bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent hidden md:block",children:"Fanra Studio"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{onClick:Ir,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-full text-xs font-bold text-slate-700 transition-all hover:shadow-sm active:scale-95",children:[u.jsx("img",{src:s==="id"?"https://cdn-icons-png.flaticon.com/128/11654/11654463.png":"https://cdn-icons-png.flaticon.com/128/9906/9906532.png",alt:"Lang",className:"w-4 h-4 object-contain"}),u.jsx("span",{children:s.toUpperCase()})]}),u.jsxs("button",{onClick:()=>B(!0),className:"p-2 text-slate-400 hover:text-primary hover:bg-slate-100 rounded-full transition-all relative",children:[u.jsx(Lp,{className:"w-5 h-5"}),zt&&u.jsx("span",{className:"absolute top-1.5 right-1.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]})]})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto pt-24 px-4 scroll-smooth custom-scrollbar",children:u.jsxs("div",{className:"max-w-3xl mx-auto min-h-full flex flex-col pb-4",children:[Q.length===0&&!T&&u.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center py-10 animate-fade-in-up",children:[u.jsxs("div",{className:"mb-8 text-center",children:[u.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 mb-3 tracking-tight",children:[Ze.heroTitle," ",Ru.name]}),u.jsx("p",{className:"text-slate-500 text-lg",children:Ze.heroSubtitle})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-5 w-full max-w-2xl px-2",children:[st.map(q=>{const _e=D[q.id]!==!1,Ne=!_e&&!d;return u.jsxs("button",{onClick:()=>Su(q,Ne),className:`relative flex flex-col items-center text-center p-4 md:p-6 bg-white border rounded-2xl shadow-sm transition-all duration-300 group h-full ${Ne?"border-slate-100 opacity-80 bg-slate-50 hover:bg-slate-100 cursor-pointer":"hover:border-primary/20 hover:shadow-xl hover:-translate-y-1 border-slate-100 cursor-pointer"}`,children:[d&&u.jsx("div",{className:"absolute top-2 right-2 z-20",onClick:Le=>Iu(q.id,Le),children:u.jsx("div",{className:`w-8 h-4 rounded-full transition-colors flex items-center p-0.5 ${_e?"bg-green-500":"bg-slate-300"}`,children:u.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transform transition-transform ${_e?"translate-x-4":"translate-x-0"}`})})}),Ne&&u.jsx("div",{className:"absolute top-2 right-2 z-10",children:u.jsx("div",{className:"bg-slate-100 p-1.5 rounded-full shadow-sm",children:u.jsx(xT,{className:"w-3 h-3 text-slate-400"})})}),u.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 ${Ne?"bg-slate-200 grayscale":q.color} rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110 shadow-sm`,children:q.icon}),u.jsx("span",{className:`text-xs md:text-sm font-bold leading-tight ${Ne?"text-slate-400":"text-slate-700"}`,children:Ze[q.nameKey]}),u.jsx("span",{className:"hidden md:block text-[10px] text-slate-400 mt-2 leading-tight",children:Ze[q.descKey]})]},q.id)}),u.jsxs("button",{onClick:()=>_(!x),className:`flex flex-col items-center justify-center text-center p-4 md:p-6 bg-slate-50 border border-slate-200 border-dashed rounded-2xl hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-300 group h-full ${x?"":"col-start-2"}`,children:[u.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-slate-100 text-slate-400 rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110",children:u.jsx(_g,{className:"w-6 h-6"})}),u.jsx("span",{className:"text-xs md:text-sm font-bold text-slate-500 group-hover:text-slate-700 leading-tight",children:x?Ze.lessTools:Ze.moreTools})]})]})]}),Q.map(q=>u.jsxs("div",{className:`flex flex-col mb-6 animate-fade-in ${q.role==="user"?"items-end":"items-start"}`,children:[q.attachments&&q.attachments.length>0&&u.jsx("div",{className:`flex flex-wrap gap-2 mb-2 max-w-[85%] ${q.role==="user"?"justify-end":"justify-start"}`,children:q.attachments.map((_e,Ne)=>u.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200/50 shadow-sm transition-transform hover:scale-[1.02]",children:u.jsx("img",{src:`data:${_e.mimeType};base64,${_e.data}`,alt:_e.name,className:"h-32 w-auto object-cover md:h-48 rounded-lg bg-slate-100"})},Ne))}),(q.text||q.role==="model"&&!q.text)&&u.jsxs("div",{className:`flex flex-col gap-1 max-w-lg lg:max-w-2xl ${q.role==="user"?"items-end":"items-start"}`,children:[u.jsx("div",{className:`relative px-5 py-3.5 rounded-2xl text-sm leading-relaxed shadow-sm break-words group w-full ${q.role==="user"?"bg-white text-slate-800 rounded-tr-sm border border-slate-100 shadow-slate-200/50":"bg-transparent text-slate-700 p-0 shadow-none"}`,children:q.role==="model"&&!q.text?u.jsxs("div",{className:"flex gap-1.5 h-5 items-center",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-100"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-200"})]}):z_(q.text)}),u.jsxs("div",{className:`flex items-center gap-2 mt-1 px-1 ${q.role==="user"?"justify-end":"justify-start"}`,children:[q.role==="model"&&q.source&&u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>Fh(q.id),className:`p-1.5 rounded-full transition-all ${Ke===q.id?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-400 hover:text-slate-600"}`,title:"Info Sumber",children:u.jsx(nN,{className:"w-3.5 h-3.5"})}),Ke===q.id&&u.jsxs("div",{className:"absolute bottom-8 left-0 z-10 bg-white border border-slate-200 rounded-xl shadow-xl p-2 min-w-[140px] animate-fade-in-up origin-bottom-left flex flex-col gap-1",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider px-1",children:"Sumber Data"}),u.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg bg-slate-50 text-xs font-semibold text-slate-700",children:[q.source==="gemini"&&u.jsx(Cv,{className:"w-3.5 h-3.5"}),q.source==="openrouter"&&u.jsx("div",{className:"w-3.5 h-3.5 bg-green-500 rounded-full flex items-center justify-center text-[8px] text-white font-bold",children:"OR"}),q.source==="groq"&&u.jsx(Q2,{className:"w-3.5 h-3.5 text-orange-500"}),q.source==="huggingface"&&u.jsx("div",{className:"w-3.5 h-3.5 bg-yellow-400 rounded-full flex items-center justify-center text-[8px] text-black font-bold",children:"HF"}),q.source==="google_search"&&u.jsx(Cv,{className:"w-3.5 h-3.5 text-orange-500"}),q.source==="weather"&&u.jsx(rN,{className:"w-3.5 h-3.5 text-blue-400"}),q.source==="country_fact"&&u.jsx(sN,{className:"w-3.5 h-3.5 text-red-500"}),u.jsx("span",{children:q.source==="gemini"?"Google Gemini":q.source==="openrouter"?"OpenRouter":q.source==="groq"?"Groq LPU":q.source==="huggingface"?"HuggingFace":q.source==="weather"?"Open-Meteo":q.source==="country_fact"?"RestCountries":q.source==="google_search"?"Google":q.source})]})]})]}),q.text&&u.jsx("button",{onClick:()=>va(q.text,q.id),className:`p-1.5 rounded-full transition-all ${ee===q.id?"bg-green-100 text-green-600":"bg-white border border-slate-100 text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:ee===q.id?u.jsx(is,{className:"w-3.5 h-3.5"}):u.jsx(yT,{className:"w-3.5 h-3.5"})})]})]})]},q.id)),T&&u.jsxs("div",{className:"w-full animate-fade-in py-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("button",{onClick:ba,className:"text-xs flex items-center gap-1 text-slate-500 hover:text-primary px-3 py-1.5 bg-white border border-slate-200 rounded-full shadow-sm hover:shadow transition-all",children:[u.jsx(ss,{className:"w-4 h-4"})," ",Ze.back]}),u.jsx("span",{className:"font-bold text-sm text-slate-700 bg-white px-3 py-1 rounded-full border border-slate-100 shadow-sm",children:Ze[T.nameKey]})]}),L?u.jsxs("div",{className:"space-y-4",children:[!S&&!V.isProcessing&&u.jsx("div",{className:"bg-slate-100 p-4 rounded-2xl border border-slate-200/60 max-w-sm mx-auto shadow-inner",children:u.jsx("img",{src:`data:${L.mimeType};base64,${L.data}`,className:"rounded-xl max-h-60 mx-auto object-contain shadow-sm"})}),T.id===wn.CREATIVE_REMIX&&!S&&u.jsx("textarea",{className:"w-full bg-white border border-slate-200 rounded-2xl p-4 text-sm focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none shadow-sm transition-all",placeholder:Ze.aiPromptPlaceholder,value:N,onChange:q=>M(q.target.value)}),!S&&!V.isProcessing&&u.jsx("button",{onClick:Qi,disabled:T.id===wn.CREATIVE_REMIX&&!N.trim(),className:"w-full py-4 bg-primary text-white rounded-2xl font-bold shadow-xl shadow-slate-900/10 active:scale-95 transition-all hover:-translate-y-0.5",children:Ze.generateMagic}),(V.isProcessing||S)&&u.jsx($9,{originalImage:L,resultImageBase64:S,isProcessing:V.isProcessing,processingText:V.progress,onReset:ba,language:s})]}):u.jsx(H9,{onImageSelect:ai,language:s})]}),V.isProcessing&&T&&u.jsx("div",{className:"flex gap-4 animate-fade-in pl-5",children:u.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce"}),u.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-100"}),u.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-200"})]})}),u.jsx("div",{ref:A})]})}),!T&&u.jsx("div",{className:"shrink-0 w-full px-4 pb-6 pt-2 z-40 bg-slate-50/50 backdrop-blur-sm",children:u.jsxs("div",{className:"max-w-3xl mx-auto",children:[zt&&u.jsx("div",{className:"mb-3 animate-fade-in-up",children:u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 flex items-center justify-between shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[u.jsx(Jl,{className:"w-5 h-5"}),u.jsx("span",{className:"text-xs font-bold",children:"Limit Chat Habis."})]}),u.jsx("button",{onClick:()=>ys(!0),className:"text-xs font-bold text-white bg-red-500 hover:bg-red-600 px-3 py-1.5 rounded-lg transition-colors shadow-sm",children:"Cara Dapet API Key?"})]})}),ws&&u.jsxs("div",{className:"bg-slate-900 text-white rounded-t-3xl p-3 px-4 flex items-center justify-between shadow-2xl animate-fade-in z-10 relative mt-2 mx-1",children:[u.jsx("div",{className:"flex items-center gap-3",children:u.jsx("span",{className:"text-xs font-bold leading-tight",children:o?"Limit harian habis. Besok lagi ya!":"Login/Masuk untuk lanjut mengobrol dengan Fanra"})}),!o&&u.jsx("button",{onClick:()=>g(!0),className:"text-[10px] font-bold bg-white text-slate-900 px-3 py-1.5 rounded-lg hover:bg-slate-200 transition-colors shadow-sm whitespace-nowrap",children:"Login Sekarang"})]}),u.jsxs("form",{onSubmit:Sr,className:`relative flex flex-col bg-white border shadow-2xl shadow-slate-200/60 transition-all duration-300 focus-within:shadow-xl ${zt?"border-red-200 opacity-80 rounded-3xl":ws?"rounded-b-3xl rounded-t-sm border-t-0 border-slate-900/10":"rounded-3xl border-slate-200 focus-within:border-slate-300"}`,children:[ci&&u.jsxs("div",{className:"border-b border-slate-100 bg-slate-50/50 rounded-t-2xl animate-fade-in overflow-hidden transition-all",children:[u.jsxs("div",{onClick:()=>E(!v),className:"flex items-center justify-between p-2 cursor-pointer hover:bg-slate-100 transition-colors select-none",children:[u.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase px-1",children:"Pratinjau Rumus"}),u.jsx(fr,{className:`w-3 h-3 text-slate-400 transition-transform ${v?"":"-rotate-90"}`})]}),v&&u.jsx("div",{className:"p-3 bg-white text-sm overflow-x-auto border-t border-slate-100 max-h-40 custom-scrollbar",children:z_(K)})]}),ce.length>0&&u.jsxs("div",{className:"p-3 border-b border-slate-100 bg-slate-50 flex items-start gap-3 animate-fade-in overflow-x-auto custom-scrollbar rounded-t-[22px]",children:[ce.map((q,_e)=>u.jsxs("div",{className:"relative group flex-shrink-0",children:[u.jsx("img",{src:`data:${q.mimeType};base64,${q.data}`,alt:"Preview",className:"h-16 w-16 object-cover rounded-lg border border-slate-200 shadow-sm"}),u.jsx("button",{type:"button",onClick:()=>sr(_e),className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full p-0.5 shadow-md hover:bg-red-600 transition-colors",children:u.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},_e)),ce.length<3&&u.jsx("div",{onClick:ui,className:"h-16 w-16 rounded-lg border-2 border-dashed border-slate-300 flex items-center justify-center cursor-pointer hover:border-primary hover:bg-white transition-colors flex-shrink-0 text-slate-400 hover:text-primary",children:u.jsx("span",{className:"text-xs font-bold",children:"+"})})]}),u.jsxs("div",{className:"flex items-end gap-1.5 p-2.5",children:[u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>Be(!Ce),className:"p-2.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors flex-shrink-0 mb-0.5",children:u.jsx(Z2,{className:"w-5 h-5"})}),Ce&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>Be(!1)}),u.jsxs("div",{className:"absolute bottom-12 left-0 w-48 bg-white border border-slate-200 rounded-xl shadow-xl z-[60] py-1 overflow-hidden animate-fade-in-up origin-bottom-left",children:[u.jsxs("button",{type:"button",onClick:()=>{Au(),Be(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-red-500 hover:bg-red-50 flex items-center gap-2",children:[u.jsx(Pr,{className:"w-4 h-4"})," Clear Chat"]}),u.jsxs("button",{type:"button",onClick:()=>{B(!0),Be(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-2",children:[u.jsx(Lp,{className:"w-4 h-4"})," Settings"]})]})]})]}),u.jsx("input",{type:"file",ref:se,className:"hidden",accept:"image/*",multiple:!0,onChange:Yi}),u.jsx("button",{type:"button",onClick:ui,disabled:Lt,className:`p-2.5 rounded-full transition-colors flex-shrink-0 mb-0.5 ${Lt?"text-slate-300 cursor-not-allowed":"text-slate-400 hover:text-slate-600 hover:bg-slate-100"}`,children:u.jsx(Av,{className:"w-5 h-5"})}),u.jsx("textarea",{ref:X,value:K,onChange:q=>$(q.target.value),onKeyDown:q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),Sr(q))},disabled:zt||wt,placeholder:zt?"Limit API Key Habis.":tt?"(Knowledge Mode Active)":ce.length>0?Ze.aiPromptPlaceholder:Ze.chatPlaceholder,className:"flex-1 bg-transparent border-none focus:ring-0 focus:outline-none resize-none max-h-32 py-3 px-2 text-sm text-primary placeholder:text-slate-400 leading-relaxed custom-scrollbar disabled:text-slate-400 disabled:cursor-not-allowed",rows:1,style:{minHeight:"44px",overflowY:"auto"}}),V.isProcessing&&!T?u.jsx("button",{type:"button",onClick:Uh,className:"p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 bg-slate-900 text-white hover:bg-slate-700 animate-pulse",title:"Stop Generation",children:u.jsx(vT,{className:"w-5 h-5"})}):u.jsx("button",{type:"submit",disabled:!K.trim()&&ce.length===0||V.isProcessing||zt||wt&&K.trim().length>0,className:`p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 ${tt?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-primary text-white hover:bg-slate-800"} ${zt||wt?"bg-slate-300 text-white cursor-not-allowed opacity-50 blur-[1px]":""}`,children:u.jsx("svg",{className:"w-5 h-5 transform rotate-90",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})]})})]})]})}function pc(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var lk={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,s,i){function o(c,d){if(!s[c]){if(!r[c]){var m=typeof pc=="function"&&pc;if(!d&&m)return m(c,!0);if(a)return a(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var y=s[c]={exports:{}};r[c][0].call(y.exports,function(w){var x=r[c][1][w];return o(x||w)},y,y.exports,n,r,s,i)}return s[c].exports}for(var a=typeof pc=="function"&&pc,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var c,d,m,g,y,w,x,_=[],v=0,E=l.length,T=E,R=i.getTypeOf(l)!=="string";v<l.length;)T=E-v,m=R?(c=l[v++],d=v<E?l[v++]:0,v<E?l[v++]:0):(c=l.charCodeAt(v++),d=v<E?l.charCodeAt(v++):0,v<E?l.charCodeAt(v++):0),g=c>>2,y=(3&c)<<4|d>>4,w=1<T?(15&d)<<2|m>>6:64,x=2<T?63&m:64,_.push(a.charAt(g)+a.charAt(y)+a.charAt(w)+a.charAt(x));return _.join("")},s.decode=function(l){var c,d,m,g,y,w,x=0,_=0,v="data:";if(l.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var E,T=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&T--,l.charAt(l.length-2)===a.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=o.uint8array?new Uint8Array(0|T):new Array(0|T);x<l.length;)c=a.indexOf(l.charAt(x++))<<2|(g=a.indexOf(l.charAt(x++)))>>4,d=(15&g)<<4|(y=a.indexOf(l.charAt(x++)))>>2,m=(3&y)<<6|(w=a.indexOf(l.charAt(x++))),E[_++]=c,y!==64&&(E[_++]=d),w!==64&&(E[_++]=m);return E}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(d,m,g,y,w){this.compressedSize=d,this.uncompressedSize=m,this.crc32=g,this.compression=y,this.compressedContent=w}c.prototype={getContentWorker:function(){var d=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),m=this;return d.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,m,g){return d.pipe(new a).pipe(new l("uncompressedSize")).pipe(m.compressWorker(g)).pipe(new l("compressedSize")).withStreamInfo("compression",m)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(c,d,m,g){var y=o,w=g+m;c^=-1;for(var x=g;x<w;x++)c=c>>>8^y[255&(c^d[x])];return-1^c}(0|l,a,a.length,0):function(c,d,m,g){var y=o,w=g+m;c^=-1;for(var x=g;x<w;x++)c=c>>>8^y[255&(c^d.charCodeAt(x))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=i?"uint8array":"array";function d(m,g){l.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=g,this.meta={}}s.magic="\b\0",a.inherits(d,l),d.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,m.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(g){m.push({data:g,meta:m.meta})}},s.compressWorker=function(m){return new d("Deflate",m)},s.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(y,w){var x,_="";for(x=0;x<w;x++)_+=String.fromCharCode(255&y),y>>>=8;return _}function o(y,w,x,_,v,E){var T,R,L=y.file,U=y.compression,S=E!==c.utf8encode,C=a.transformTo("string",E(L.name)),N=a.transformTo("string",c.utf8encode(L.name)),M=L.comment,V=a.transformTo("string",E(M)),P=a.transformTo("string",c.utf8encode(M)),D=N.length!==L.name.length,k=P.length!==M.length,H="",me="",re="",te=L.dir,Q=L.date,ue={crc32:0,compressedSize:0,uncompressedSize:0};w&&!x||(ue.crc32=y.crc32,ue.compressedSize=y.compressedSize,ue.uncompressedSize=y.uncompressedSize);var K=0;w&&(K|=8),S||!D&&!k||(K|=2048);var $=0,ce=0;te&&($|=16),v==="UNIX"?(ce=798,$|=function(ee,Se){var xe=ee;return ee||(xe=Se?16893:33204),(65535&xe)<<16}(L.unixPermissions,te)):(ce=20,$|=function(ee){return 63&(ee||0)}(L.dosPermissions)),T=Q.getUTCHours(),T<<=6,T|=Q.getUTCMinutes(),T<<=5,T|=Q.getUTCSeconds()/2,R=Q.getUTCFullYear()-1980,R<<=4,R|=Q.getUTCMonth()+1,R<<=5,R|=Q.getUTCDate(),D&&(me=i(1,1)+i(d(C),4)+N,H+="up"+i(me.length,2)+me),k&&(re=i(1,1)+i(d(V),4)+P,H+="uc"+i(re.length,2)+re);var Z="";return Z+=`
\0`,Z+=i(K,2),Z+=U.magic,Z+=i(T,2),Z+=i(R,2),Z+=i(ue.crc32,4),Z+=i(ue.compressedSize,4),Z+=i(ue.uncompressedSize,4),Z+=i(C.length,2),Z+=i(H.length,2),{fileRecord:m.LOCAL_FILE_HEADER+Z+C+H,dirRecord:m.CENTRAL_FILE_HEADER+i(ce,2)+Z+i(V.length,2)+"\0\0\0\0"+i($,4)+i(_,4)+C+H+V}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),d=n("../crc32"),m=n("../signature");function g(y,w,x,_){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=x,this.encodeFileName=_,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(g,l),g.prototype.push=function(y){var w=y.meta.percent||0,x=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,l.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:x?(w+100*(x-_-1))/x:100}}))},g.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var w=this.streamFiles&&!y.file.dir;if(w){var x=o(y,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(y){this.accumulate=!1;var w=this.streamFiles&&!y.file.dir,x=o(y,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),w)this.push({data:function(_){return m.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var y=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var x=this.bytesWritten-y,_=function(v,E,T,R,L){var U=a.transformTo("string",L(R));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(v,2)+i(v,2)+i(E,4)+i(T,4)+i(U.length,2)+U}(this.dirRecords.length,x,y,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(y){this._sources.push(y);var w=this;return y.on("data",function(x){w.processChunk(x)}),y.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),y.on("error",function(x){w.error(x)}),this},g.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(y){var w=this._sources;if(!l.prototype.error.call(this,y))return!1;for(var x=0;x<w.length;x++)try{w[x].error(y)}catch{}return!0},g.prototype.lock=function(){l.prototype.lock.call(this);for(var y=this._sources,w=0;w<y.length;w++)y[w].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,l,c){var d=new o(l.streamFiles,c,l.platform,l.encodeFileName),m=0;try{a.forEach(function(g,y){m++;var w=function(E,T){var R=E||T,L=i[R];if(!L)throw new Error(R+" is not a valid compression method !");return L}(y.options.compression,l.compression),x=y.options.compressionOptions||l.compressionOptions||{},_=y.dir,v=y.date;y._compressWorker(w,x).withStreamInfo("file",{name:g,dir:_,date:v,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(d)}),d.entriesCount=m}catch(g){d.error(g)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function m(g){return new o.Promise(function(y,w){var x=g.decompressed.getContentWorker().pipe(new c);x.on("error",function(_){w(_)}).on("end",function(){x.streamInfo.crc32!==g.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(g,y){var w=this;return y=i.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",g,!0,y.optimizedBinaryString,y.base64).then(function(x){var _=new l(y);return _.load(x),_}).then(function(x){var _=[o.Promise.resolve(x)],v=x.files;if(y.checkCRC32)for(var E=0;E<v.length;E++)_.push(m(v[E]));return o.Promise.all(_)}).then(function(x){for(var _=x.shift(),v=_.files,E=0;E<v.length;E++){var T=v[E],R=T.fileNameStr,L=i.resolve(T.fileNameStr);w.file(L,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:y.createFolders}),T.dir||(w.file(L).unsafeOriginalName=R)}return _.zipComment.length&&(w.comment=_.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,l,c){i.call(this,l),this._helper=a;var d=this;a.on("data",function(m,g){d.push(m)||d._helper.pause(),c&&c(g)}).on("error",function(m){d.emit("error",m)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(L,U,S){var C,N=a.getTypeOf(U),M=a.extend(S||{},d);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(L=v(L)),M.createFolders&&(C=_(L))&&E.call(this,C,!0);var V=N==="string"&&M.binary===!1&&M.base64===!1;S&&S.binary!==void 0||(M.binary=!V),(U instanceof m&&U.uncompressedSize===0||M.dir||!U||U.length===0)&&(M.base64=!1,M.binary=!0,U="",M.compression="STORE",N="string");var P=null;P=U instanceof m||U instanceof l?U:w.isNode&&w.isStream(U)?new x(L,U):a.prepareContent(L,U,M.binary,M.optimizedBinaryString,M.base64);var D=new g(L,P,M);this.files[L]=D}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),d=n("./defaults"),m=n("./compressedObject"),g=n("./zipObject"),y=n("./generate"),w=n("./nodejsUtils"),x=n("./nodejs/NodejsStreamInputAdapter"),_=function(L){L.slice(-1)==="/"&&(L=L.substring(0,L.length-1));var U=L.lastIndexOf("/");return 0<U?L.substring(0,U):""},v=function(L){return L.slice(-1)!=="/"&&(L+="/"),L},E=function(L,U){return U=U!==void 0?U:d.createFolders,L=v(L),this.files[L]||i.call(this,L,null,{dir:!0,createFolders:U}),this.files[L]};function T(L){return Object.prototype.toString.call(L)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(L){var U,S,C;for(U in this.files)C=this.files[U],(S=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&L(S,C)},filter:function(L){var U=[];return this.forEach(function(S,C){L(S,C)&&U.push(C)}),U},file:function(L,U,S){if(arguments.length!==1)return L=this.root+L,i.call(this,L,U,S),this;if(T(L)){var C=L;return this.filter(function(M,V){return!V.dir&&C.test(M)})}var N=this.files[this.root+L];return N&&!N.dir?N:null},folder:function(L){if(!L)return this;if(T(L))return this.filter(function(N,M){return M.dir&&L.test(N)});var U=this.root+L,S=E.call(this,U),C=this.clone();return C.root=S.name,C},remove:function(L){L=this.root+L;var U=this.files[L];if(U||(L.slice(-1)!=="/"&&(L+="/"),U=this.files[L]),U&&!U.dir)delete this.files[L];else for(var S=this.filter(function(N,M){return M.name.slice(0,L.length)===L}),C=0;C<S.length;C++)delete this.files[S[C].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(L){var U,S={};try{if((S=a.extend(L||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");a.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var C=S.comment||this.comment||"";U=y.generateWorker(this,S,C)}catch(N){(U=new l("error")).error(N)}return new c(U,S.type||"string",S.mimeType)},generateAsync:function(L,U){return this.generateInternalStream(L).accumulate(U)},generateNodeStream:function(L,U){return(L=L||{}).type||(L.type="nodebuffer"),this.generateInternalStream(L).toNodejsStream(U)}};r.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),m=a.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===l&&this.data[g+1]===c&&this.data[g+2]===d&&this.data[g+3]===m)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),m=a.charCodeAt(3),g=this.readData(4);return l===g[0]&&c===g[1]&&d===g[2]&&m===g[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(m){var g=i.getTypeOf(m);return i.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new c(m):o.uint8array?new d(i.transformTo("uint8array",m)):new a(i.transformTo("array",m)):new l(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=i.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),d=n("../external"),m=null;if(c.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(w,x){return new d.Promise(function(_,v){var E=[],T=w._internalType,R=w._outputType,L=w._mimeType;w.on("data",function(U,S){E.push(U),x&&x(S)}).on("error",function(U){E=[],v(U)}).on("end",function(){try{var U=function(S,C,N){switch(S){case"blob":return i.newBlob(i.transformTo("arraybuffer",C),N);case"base64":return l.encode(C);default:return i.transformTo(S,C)}}(R,function(S,C){var N,M=0,V=null,P=0;for(N=0;N<C.length;N++)P+=C[N].length;switch(S){case"string":return C.join("");case"array":return Array.prototype.concat.apply([],C);case"uint8array":for(V=new Uint8Array(P),N=0;N<C.length;N++)V.set(C[N],M),M+=C[N].length;return V;case"nodebuffer":return Buffer.concat(C);default:throw new Error("concat : unsupported type '"+S+"'")}}(T,E),L);_(U)}catch(S){v(S)}E=[]}).resume()})}function y(w,x,_){var v=x;switch(x){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=x,this._mimeType=_,i.checkSupport(v),this._worker=w.pipe(new o(v)),w.lock()}catch(E){this._worker=new a("error"),this._worker.error(E)}}y.prototype={accumulate:function(w){return g(this,w)},on:function(w,x){var _=this;return w==="data"?this._worker.on(w,function(v){x.call(_,v.data,v.meta)}):this._worker.on(w,function(){i.delay(x,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function m(){l.call(this,"utf-8 decode"),this.leftOver=null}function g(){l.call(this,"utf-8 encode")}s.utf8encode=function(y){return o.nodebuffer?a.newBufferFrom(y,"utf-8"):function(w){var x,_,v,E,T,R=w.length,L=0;for(E=0;E<R;E++)(64512&(_=w.charCodeAt(E)))==55296&&E+1<R&&(64512&(v=w.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),E++),L+=_<128?1:_<2048?2:_<65536?3:4;for(x=o.uint8array?new Uint8Array(L):new Array(L),E=T=0;T<L;E++)(64512&(_=w.charCodeAt(E)))==55296&&E+1<R&&(64512&(v=w.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),E++),_<128?x[T++]=_:(_<2048?x[T++]=192|_>>>6:(_<65536?x[T++]=224|_>>>12:(x[T++]=240|_>>>18,x[T++]=128|_>>>12&63),x[T++]=128|_>>>6&63),x[T++]=128|63&_);return x}(y)},s.utf8decode=function(y){return o.nodebuffer?i.transformTo("nodebuffer",y).toString("utf-8"):function(w){var x,_,v,E,T=w.length,R=new Array(2*T);for(x=_=0;x<T;)if((v=w[x++])<128)R[_++]=v;else if(4<(E=c[v]))R[_++]=65533,x+=E-1;else{for(v&=E===2?31:E===3?15:7;1<E&&x<T;)v=v<<6|63&w[x++],E--;1<E?R[_++]=65533:v<65536?R[_++]=v:(v-=65536,R[_++]=55296|v>>10&1023,R[_++]=56320|1023&v)}return R.length!==_&&(R.subarray?R=R.subarray(0,_):R.length=_),i.applyFromCharCode(R)}(y=i.transformTo(o.uint8array?"uint8array":"array",y))},i.inherits(m,l),m.prototype.processChunk=function(y){var w=i.transformTo(o.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=w;(w=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),w.set(x,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var _=function(E,T){var R;for((T=T||E.length)>E.length&&(T=E.length),R=T-1;0<=R&&(192&E[R])==128;)R--;return R<0||R===0?T:R+c[E[R]]>T?R:T}(w),v=w;_!==w.length&&(o.uint8array?(v=w.subarray(0,_),this.leftOver=w.subarray(_,w.length)):(v=w.slice(0,_),this.leftOver=w.slice(_,w.length))),this.push({data:s.utf8decode(v),meta:y.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=m,i.inherits(g,l),g.prototype.processChunk=function(y){this.push({data:s.utf8encode(y.data),meta:y.meta})},s.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(x){return x}function d(x,_){for(var v=0;v<x.length;++v)_[v]=255&x.charCodeAt(v);return _}n("setimmediate"),s.newBlob=function(x,_){s.checkSupport("blob");try{return new Blob([x],{type:_})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(x),v.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(x,_,v){var E=[],T=0,R=x.length;if(R<=v)return String.fromCharCode.apply(null,x);for(;T<R;)_==="array"||_==="nodebuffer"?E.push(String.fromCharCode.apply(null,x.slice(T,Math.min(T+v,R)))):E.push(String.fromCharCode.apply(null,x.subarray(T,Math.min(T+v,R)))),T+=v;return E.join("")},stringifyByChar:function(x){for(var _="",v=0;v<x.length;v++)_+=String.fromCharCode(x[v]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function g(x){var _=65536,v=s.getTypeOf(x),E=!0;if(v==="uint8array"?E=m.applyCanBeUsed.uint8array:v==="nodebuffer"&&(E=m.applyCanBeUsed.nodebuffer),E)for(;1<_;)try{return m.stringifyByChunk(x,v,_)}catch{_=Math.floor(_/2)}return m.stringifyByChar(x)}function y(x,_){for(var v=0;v<x.length;v++)_[v]=x[v];return _}s.applyFromCharCode=g;var w={};w.string={string:c,array:function(x){return d(x,new Array(x.length))},arraybuffer:function(x){return w.string.uint8array(x).buffer},uint8array:function(x){return d(x,new Uint8Array(x.length))},nodebuffer:function(x){return d(x,a.allocBuffer(x.length))}},w.array={string:g,array:c,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(x)}},w.arraybuffer={string:function(x){return g(new Uint8Array(x))},array:function(x){return y(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:c,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(new Uint8Array(x))}},w.uint8array={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:c,nodebuffer:function(x){return a.newBufferFrom(x)}},w.nodebuffer={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return w.nodebuffer.uint8array(x).buffer},uint8array:function(x){return y(x,new Uint8Array(x.length))},nodebuffer:c},s.transformTo=function(x,_){if(_=_||"",!x)return _;s.checkSupport(x);var v=s.getTypeOf(_);return w[v][x](_)},s.resolve=function(x){for(var _=x.split("/"),v=[],E=0;E<_.length;E++){var T=_[E];T==="."||T===""&&E!==0&&E!==_.length-1||(T===".."?v.pop():v.push(T))}return v.join("/")},s.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(x)?"nodebuffer":i.uint8array&&x instanceof Uint8Array?"uint8array":i.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(x){if(!i[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(x){var _,v,E="";for(v=0;v<(x||"").length;v++)E+="\\x"+((_=x.charCodeAt(v))<16?"0":"")+_.toString(16).toUpperCase();return E},s.delay=function(x,_,v){setImmediate(function(){x.apply(v||null,_||[])})},s.inherits=function(x,_){function v(){}v.prototype=_.prototype,x.prototype=new v},s.extend=function(){var x,_,v={};for(x=0;x<arguments.length;x++)for(_ in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],_)&&v[_]===void 0&&(v[_]=arguments[x][_]);return v},s.prepareContent=function(x,_,v,E,T){return l.Promise.resolve(_).then(function(R){return i.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new l.Promise(function(L,U){var S=new FileReader;S.onload=function(C){L(C.target.result)},S.onerror=function(C){U(C.target.error)},S.readAsArrayBuffer(R)}):R}).then(function(R){var L=s.getTypeOf(R);return L?(L==="arraybuffer"?R=s.transformTo("uint8array",R):L==="string"&&(T?R=o.decode(R):v&&E!==!0&&(R=function(U){return d(U,i.uint8array?new Uint8Array(U.length):new Array(U.length))}(R))),R):l.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function d(m){this.files=[],this.loadOptions=m}d.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(m)+")")}},isSignature:function(m,g){var y=this.reader.index;this.reader.setIndex(m);var w=this.reader.readString(4)===g;return this.reader.setIndex(y),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),g=c.uint8array?"uint8array":"array",y=o.transformTo(g,m);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,g,y,w=this.zip64EndOfCentralSize-44;0<w;)m=this.reader.readInt(2),g=this.reader.readInt(4),y=this.reader.readData(g),this.zip64ExtensibleData[m]={id:m,length:g,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,g;for(m=0;m<this.files.length;m++)g=this.files[m],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(m=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var g=m;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var w=g-y;if(0<w)this.isSignature(g,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),d=n("./compressions"),m=n("./support");function g(y,w){this.options=y,this.loadOptions=w}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var w,x;if(y.skip(22),this.fileNameLength=y.readInt(2),x=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(_){for(var v in d)if(Object.prototype.hasOwnProperty.call(d,v)&&d[v].magic===_)return d[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,w,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var w=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(w),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var w,x,_,v=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<v;)w=y.readInt(2),x=y.readInt(2),_=y.readData(x),this.extraFields[w]={id:w,length:x,value:_};y.setIndex(v)},handleUTF8:function(){var y=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var x=o.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var v=o.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var w=i(y.value);return w.readInt(1)!==1||l(this.fileName)!==w.readInt(4)?null:c.utf8decode(w.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var w=i(y.value);return w.readInt(1)!==1||l(this.fileComment)!==w.readInt(4)?null:c.utf8decode(w.readData(y.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(w,x,_){this.name=w,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=x,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(w){var x=null,_="string";try{if(!w)throw new Error("No output type specified.");var v=(_=w.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),x=this._decompressWorker();var E=!this._dataBinary;E&&!v&&(x=x.pipe(new l.Utf8EncodeWorker)),!E&&v&&(x=x.pipe(new l.Utf8DecodeWorker))}catch(T){(x=new d("error")).error(T)}return new o(x,_,"")},async:function(w,x){return this.internalStream(w).accumulate(x)},nodeStream:function(w,x){return this.internalStream(w||"nodebuffer").toNodejsStream(x)},_compressWorker:function(w,x){if(this._data instanceof c&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(_,w,x)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<m.length;y++)i.prototype[m[y]]=g;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var c=0,d=new l(w),m=i.document.createTextNode("");d.observe(m,{characterData:!0}),o=function(){m.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var x=i.document.createElement("script");x.onreadystatechange=function(){w(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},i.document.documentElement.appendChild(x)}:function(){setTimeout(w,0)};else{var g=new i.MessageChannel;g.port1.onmessage=w,o=function(){g.port2.postMessage(0)}}var y=[];function w(){var x,_;a=!0;for(var v=y.length;v;){for(_=y,y=[],x=-1;++x<v;)_[x]();v=y.length}a=!1}r.exports=function(x){y.push(x)!==1||a||o()}}).call(this,typeof $r<"u"?$r:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function m(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,v!==o&&x(this,v)}function g(v,E,T){this.promise=v,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function y(v,E,T){i(function(){var R;try{R=E(T)}catch(L){return a.reject(v,L)}R===v?a.reject(v,new TypeError("Cannot resolve promise with itself")):a.resolve(v,R)})}function w(v){var E=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof E=="function")return function(){E.apply(v,arguments)}}function x(v,E){var T=!1;function R(S){T||(T=!0,a.reject(v,S))}function L(S){T||(T=!0,a.resolve(v,S))}var U=_(function(){E(L,R)});U.status==="error"&&R(U.value)}function _(v,E){var T={};try{T.value=v(E),T.status="success"}catch(R){T.status="error",T.value=R}return T}(r.exports=m).prototype.finally=function(v){if(typeof v!="function")return this;var E=this.constructor;return this.then(function(T){return E.resolve(v()).then(function(){return T})},function(T){return E.resolve(v()).then(function(){throw T})})},m.prototype.catch=function(v){return this.then(null,v)},m.prototype.then=function(v,E){if(typeof v!="function"&&this.state===c||typeof E!="function"&&this.state===l)return this;var T=new this.constructor(o);return this.state!==d?y(T,this.state===c?v:E,this.outcome):this.queue.push(new g(T,v,E)),T},g.prototype.callFulfilled=function(v){a.resolve(this.promise,v)},g.prototype.otherCallFulfilled=function(v){y(this.promise,this.onFulfilled,v)},g.prototype.callRejected=function(v){a.reject(this.promise,v)},g.prototype.otherCallRejected=function(v){y(this.promise,this.onRejected,v)},a.resolve=function(v,E){var T=_(w,E);if(T.status==="error")return a.reject(v,T.value);var R=T.value;if(R)x(v,R);else{v.state=c,v.outcome=E;for(var L=-1,U=v.queue.length;++L<U;)v.queue[L].callFulfilled(E)}return v},a.reject=function(v,E){v.state=l,v.outcome=E;for(var T=-1,R=v.queue.length;++T<R;)v.queue[T].callRejected(E);return v},m.resolve=function(v){return v instanceof this?v:a.resolve(new this(o),v)},m.reject=function(v){var E=new this(o);return a.reject(E,v)},m.all=function(v){var E=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=v.length,R=!1;if(!T)return this.resolve([]);for(var L=new Array(T),U=0,S=-1,C=new this(o);++S<T;)N(v[S],S);return C;function N(M,V){E.resolve(M).then(function(P){L[V]=P,++U!==T||R||(R=!0,a.resolve(C,L))},function(P){R||(R=!0,a.reject(C,P))})}},m.race=function(v){var E=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=v.length,R=!1;if(!T)return this.resolve([]);for(var L=-1,U=new this(o);++L<T;)S=v[L],E.resolve(S).then(function(C){R||(R=!0,a.resolve(U,C))},function(C){R||(R=!0,a.reject(U,C))});var S;return U}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),d=Object.prototype.toString,m=0,g=-1,y=0,w=8;function x(v){if(!(this instanceof x))return new x(v);this.options=o.assign({level:g,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},v||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var T=i.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(T!==m)throw new Error(l[T]);if(E.header&&i.deflateSetHeader(this.strm,E.header),E.dictionary){var R;if(R=typeof E.dictionary=="string"?a.string2buf(E.dictionary):d.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(T=i.deflateSetDictionary(this.strm,R))!==m)throw new Error(l[T]);this._dict_set=!0}}function _(v,E){var T=new x(E);if(T.push(v,!0),T.err)throw T.msg||l[T.err];return T.result}x.prototype.push=function(v,E){var T,R,L=this.strm,U=this.options.chunkSize;if(this.ended)return!1;R=E===~~E?E:E===!0?4:0,typeof v=="string"?L.input=a.string2buf(v):d.call(v)==="[object ArrayBuffer]"?L.input=new Uint8Array(v):L.input=v,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new o.Buf8(U),L.next_out=0,L.avail_out=U),(T=i.deflate(L,R))!==1&&T!==m)return this.onEnd(T),!(this.ended=!0);L.avail_out!==0&&(L.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(L.output,L.next_out))):this.onData(o.shrinkBuf(L.output,L.next_out)))}while((0<L.avail_in||L.avail_out===0)&&T!==1);return R===4?(T=i.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===m):R!==2||(this.onEnd(m),!(L.avail_out=0))},x.prototype.onData=function(v){this.chunks.push(v)},x.prototype.onEnd=function(v){v===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Deflate=x,s.deflate=_,s.deflateRaw=function(v,E){return(E=E||{}).raw=!0,_(v,E)},s.gzip=function(v,E){return(E=E||{}).gzip=!0,_(v,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),d=n("./zlib/zstream"),m=n("./zlib/gzheader"),g=Object.prototype.toString;function y(x){if(!(this instanceof y))return new y(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||x&&x.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var v=i.inflateInit2(this.strm,_.windowBits);if(v!==l.Z_OK)throw new Error(c[v]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function w(x,_){var v=new y(_);if(v.push(x,!0),v.err)throw v.msg||c[v.err];return v.result}y.prototype.push=function(x,_){var v,E,T,R,L,U,S=this.strm,C=this.options.chunkSize,N=this.options.dictionary,M=!1;if(this.ended)return!1;E=_===~~_?_:_===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof x=="string"?S.input=a.binstring2buf(x):g.call(x)==="[object ArrayBuffer]"?S.input=new Uint8Array(x):S.input=x,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new o.Buf8(C),S.next_out=0,S.avail_out=C),(v=i.inflate(S,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&N&&(U=typeof N=="string"?a.string2buf(N):g.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,v=i.inflateSetDictionary(this.strm,U)),v===l.Z_BUF_ERROR&&M===!0&&(v=l.Z_OK,M=!1),v!==l.Z_STREAM_END&&v!==l.Z_OK)return this.onEnd(v),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&v!==l.Z_STREAM_END&&(S.avail_in!==0||E!==l.Z_FINISH&&E!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=a.utf8border(S.output,S.next_out),R=S.next_out-T,L=a.buf2string(S.output,T),S.next_out=R,S.avail_out=C-R,R&&o.arraySet(S.output,S.output,T,R,0),this.onData(L)):this.onData(o.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(M=!0)}while((0<S.avail_in||S.avail_out===0)&&v!==l.Z_STREAM_END);return v===l.Z_STREAM_END&&(E=l.Z_FINISH),E===l.Z_FINISH?(v=i.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===l.Z_OK):E!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(S.avail_out=0))},y.prototype.onData=function(x){this.chunks.push(x)},y.prototype.onEnd=function(x){x===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},s.Inflate=y,s.inflate=w,s.inflateRaw=function(x,_){return(_=_||{}).raw=!0,w(x,_)},s.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var m in d)d.hasOwnProperty(m)&&(l[m]=d[m])}}return l},s.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,d,m,g){if(c.subarray&&l.subarray)l.set(c.subarray(d,d+m),g);else for(var y=0;y<m;y++)l[g+y]=c[d+y]},flattenChunks:function(l){var c,d,m,g,y,w;for(c=m=0,d=l.length;c<d;c++)m+=l[c].length;for(w=new Uint8Array(m),c=g=0,d=l.length;c<d;c++)y=l[c],w.set(y,g),g+=y.length;return w}},a={arraySet:function(l,c,d,m,g){for(var y=0;y<m;y++)l[g+y]=c[d+y]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(m,g){if(g<65537&&(m.subarray&&a||!m.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(m,g));for(var y="",w=0;w<g;w++)y+=String.fromCharCode(m[w]);return y}l[254]=l[254]=1,s.string2buf=function(m){var g,y,w,x,_,v=m.length,E=0;for(x=0;x<v;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(w=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),x++),E+=y<128?1:y<2048?2:y<65536?3:4;for(g=new i.Buf8(E),x=_=0;_<E;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(w=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),x++),y<128?g[_++]=y:(y<2048?g[_++]=192|y>>>6:(y<65536?g[_++]=224|y>>>12:(g[_++]=240|y>>>18,g[_++]=128|y>>>12&63),g[_++]=128|y>>>6&63),g[_++]=128|63&y);return g},s.buf2binstring=function(m){return d(m,m.length)},s.binstring2buf=function(m){for(var g=new i.Buf8(m.length),y=0,w=g.length;y<w;y++)g[y]=m.charCodeAt(y);return g},s.buf2string=function(m,g){var y,w,x,_,v=g||m.length,E=new Array(2*v);for(y=w=0;y<v;)if((x=m[y++])<128)E[w++]=x;else if(4<(_=l[x]))E[w++]=65533,y+=_-1;else{for(x&=_===2?31:_===3?15:7;1<_&&y<v;)x=x<<6|63&m[y++],_--;1<_?E[w++]=65533:x<65536?E[w++]=x:(x-=65536,E[w++]=55296|x>>10&1023,E[w++]=56320|1023&x)}return d(E,w)},s.utf8border=function(m,g){var y;for((g=g||m.length)>m.length&&(g=m.length),y=g-1;0<=y&&(192&m[y])==128;)y--;return y<0||y===0?g:y+l[m[y]]>g?y:g}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,l){for(var c=65535&i|0,d=i>>>16&65535|0,m=0;a!==0;){for(a-=m=2e3<a?2e3:a;d=d+(c=c+o[l++]|0)|0,--m;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,c){var d=i,m=c+l;o^=-1;for(var g=c;g<m;g++)o=o>>>8^d[255&(o^a[g])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),d=n("./messages"),m=0,g=4,y=0,w=-2,x=-1,_=4,v=2,E=8,T=9,R=286,L=30,U=19,S=2*R+1,C=15,N=3,M=258,V=M+N+1,P=42,D=113,k=1,H=2,me=3,re=4;function te(A,se){return A.msg=d[se],se}function Q(A){return(A<<1)-(4<A?9:0)}function ue(A){for(var se=A.length;0<=--se;)A[se]=0}function K(A){var se=A.state,X=se.pending;X>A.avail_out&&(X=A.avail_out),X!==0&&(o.arraySet(A.output,se.pending_buf,se.pending_out,X,A.next_out),A.next_out+=X,se.pending_out+=X,A.total_out+=X,A.avail_out-=X,se.pending-=X,se.pending===0&&(se.pending_out=0))}function $(A,se){a._tr_flush_block(A,0<=A.block_start?A.block_start:-1,A.strstart-A.block_start,se),A.block_start=A.strstart,K(A.strm)}function ce(A,se){A.pending_buf[A.pending++]=se}function Z(A,se){A.pending_buf[A.pending++]=se>>>8&255,A.pending_buf[A.pending++]=255&se}function ee(A,se){var X,z,B=A.max_chain_length,W=A.strstart,ie=A.prev_length,oe=A.nice_match,Y=A.strstart>A.w_size-V?A.strstart-(A.w_size-V):0,le=A.window,ye=A.w_mask,he=A.prev,ve=A.strstart+M,Pe=le[W+ie-1],De=le[W+ie];A.prev_length>=A.good_match&&(B>>=2),oe>A.lookahead&&(oe=A.lookahead);do if(le[(X=se)+ie]===De&&le[X+ie-1]===Pe&&le[X]===le[W]&&le[++X]===le[W+1]){W+=2,X++;do;while(le[++W]===le[++X]&&le[++W]===le[++X]&&le[++W]===le[++X]&&le[++W]===le[++X]&&le[++W]===le[++X]&&le[++W]===le[++X]&&le[++W]===le[++X]&&le[++W]===le[++X]&&W<ve);if(z=M-(ve-W),W=ve-M,ie<z){if(A.match_start=se,oe<=(ie=z))break;Pe=le[W+ie-1],De=le[W+ie]}}while((se=he[se&ye])>Y&&--B!=0);return ie<=A.lookahead?ie:A.lookahead}function Se(A){var se,X,z,B,W,ie,oe,Y,le,ye,he=A.w_size;do{if(B=A.window_size-A.lookahead-A.strstart,A.strstart>=he+(he-V)){for(o.arraySet(A.window,A.window,he,he,0),A.match_start-=he,A.strstart-=he,A.block_start-=he,se=X=A.hash_size;z=A.head[--se],A.head[se]=he<=z?z-he:0,--X;);for(se=X=he;z=A.prev[--se],A.prev[se]=he<=z?z-he:0,--X;);B+=he}if(A.strm.avail_in===0)break;if(ie=A.strm,oe=A.window,Y=A.strstart+A.lookahead,le=B,ye=void 0,ye=ie.avail_in,le<ye&&(ye=le),X=ye===0?0:(ie.avail_in-=ye,o.arraySet(oe,ie.input,ie.next_in,ye,Y),ie.state.wrap===1?ie.adler=l(ie.adler,oe,ye,Y):ie.state.wrap===2&&(ie.adler=c(ie.adler,oe,ye,Y)),ie.next_in+=ye,ie.total_in+=ye,ye),A.lookahead+=X,A.lookahead+A.insert>=N)for(W=A.strstart-A.insert,A.ins_h=A.window[W],A.ins_h=(A.ins_h<<A.hash_shift^A.window[W+1])&A.hash_mask;A.insert&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[W+N-1])&A.hash_mask,A.prev[W&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=W,W++,A.insert--,!(A.lookahead+A.insert<N)););}while(A.lookahead<V&&A.strm.avail_in!==0)}function xe(A,se){for(var X,z;;){if(A.lookahead<V){if(Se(A),A.lookahead<V&&se===m)return k;if(A.lookahead===0)break}if(X=0,A.lookahead>=N&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+N-1])&A.hash_mask,X=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),X!==0&&A.strstart-X<=A.w_size-V&&(A.match_length=ee(A,X)),A.match_length>=N)if(z=a._tr_tally(A,A.strstart-A.match_start,A.match_length-N),A.lookahead-=A.match_length,A.match_length<=A.max_lazy_match&&A.lookahead>=N){for(A.match_length--;A.strstart++,A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+N-1])&A.hash_mask,X=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart,--A.match_length!=0;);A.strstart++}else A.strstart+=A.match_length,A.match_length=0,A.ins_h=A.window[A.strstart],A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+1])&A.hash_mask;else z=a._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++;if(z&&($(A,!1),A.strm.avail_out===0))return k}return A.insert=A.strstart<N-1?A.strstart:N-1,se===g?($(A,!0),A.strm.avail_out===0?me:re):A.last_lit&&($(A,!1),A.strm.avail_out===0)?k:H}function ke(A,se){for(var X,z,B;;){if(A.lookahead<V){if(Se(A),A.lookahead<V&&se===m)return k;if(A.lookahead===0)break}if(X=0,A.lookahead>=N&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+N-1])&A.hash_mask,X=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),A.prev_length=A.match_length,A.prev_match=A.match_start,A.match_length=N-1,X!==0&&A.prev_length<A.max_lazy_match&&A.strstart-X<=A.w_size-V&&(A.match_length=ee(A,X),A.match_length<=5&&(A.strategy===1||A.match_length===N&&4096<A.strstart-A.match_start)&&(A.match_length=N-1)),A.prev_length>=N&&A.match_length<=A.prev_length){for(B=A.strstart+A.lookahead-N,z=a._tr_tally(A,A.strstart-1-A.prev_match,A.prev_length-N),A.lookahead-=A.prev_length-1,A.prev_length-=2;++A.strstart<=B&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+N-1])&A.hash_mask,X=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),--A.prev_length!=0;);if(A.match_available=0,A.match_length=N-1,A.strstart++,z&&($(A,!1),A.strm.avail_out===0))return k}else if(A.match_available){if((z=a._tr_tally(A,0,A.window[A.strstart-1]))&&$(A,!1),A.strstart++,A.lookahead--,A.strm.avail_out===0)return k}else A.match_available=1,A.strstart++,A.lookahead--}return A.match_available&&(z=a._tr_tally(A,0,A.window[A.strstart-1]),A.match_available=0),A.insert=A.strstart<N-1?A.strstart:N-1,se===g?($(A,!0),A.strm.avail_out===0?me:re):A.last_lit&&($(A,!1),A.strm.avail_out===0)?k:H}function Ce(A,se,X,z,B){this.good_length=A,this.max_lazy=se,this.nice_length=X,this.max_chain=z,this.func=B}function Be(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*S),this.dyn_dtree=new o.Buf16(2*(2*L+1)),this.bl_tree=new o.Buf16(2*(2*U+1)),ue(this.dyn_ltree),ue(this.dyn_dtree),ue(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(C+1),this.heap=new o.Buf16(2*R+1),ue(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*R+1),ue(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ke(A){var se;return A&&A.state?(A.total_in=A.total_out=0,A.data_type=v,(se=A.state).pending=0,se.pending_out=0,se.wrap<0&&(se.wrap=-se.wrap),se.status=se.wrap?P:D,A.adler=se.wrap===2?0:1,se.last_flush=m,a._tr_init(se),y):te(A,w)}function kt(A){var se=Ke(A);return se===y&&function(X){X.window_size=2*X.w_size,ue(X.head),X.max_lazy_match=i[X.level].max_lazy,X.good_match=i[X.level].good_length,X.nice_match=i[X.level].nice_length,X.max_chain_length=i[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=N-1,X.match_available=0,X.ins_h=0}(A.state),se}function ot(A,se,X,z,B,W){if(!A)return w;var ie=1;if(se===x&&(se=6),z<0?(ie=0,z=-z):15<z&&(ie=2,z-=16),B<1||T<B||X!==E||z<8||15<z||se<0||9<se||W<0||_<W)return te(A,w);z===8&&(z=9);var oe=new Be;return(A.state=oe).strm=A,oe.wrap=ie,oe.gzhead=null,oe.w_bits=z,oe.w_size=1<<oe.w_bits,oe.w_mask=oe.w_size-1,oe.hash_bits=B+7,oe.hash_size=1<<oe.hash_bits,oe.hash_mask=oe.hash_size-1,oe.hash_shift=~~((oe.hash_bits+N-1)/N),oe.window=new o.Buf8(2*oe.w_size),oe.head=new o.Buf16(oe.hash_size),oe.prev=new o.Buf16(oe.w_size),oe.lit_bufsize=1<<B+6,oe.pending_buf_size=4*oe.lit_bufsize,oe.pending_buf=new o.Buf8(oe.pending_buf_size),oe.d_buf=1*oe.lit_bufsize,oe.l_buf=3*oe.lit_bufsize,oe.level=se,oe.strategy=W,oe.method=X,kt(A)}i=[new Ce(0,0,0,0,function(A,se){var X=65535;for(X>A.pending_buf_size-5&&(X=A.pending_buf_size-5);;){if(A.lookahead<=1){if(Se(A),A.lookahead===0&&se===m)return k;if(A.lookahead===0)break}A.strstart+=A.lookahead,A.lookahead=0;var z=A.block_start+X;if((A.strstart===0||A.strstart>=z)&&(A.lookahead=A.strstart-z,A.strstart=z,$(A,!1),A.strm.avail_out===0)||A.strstart-A.block_start>=A.w_size-V&&($(A,!1),A.strm.avail_out===0))return k}return A.insert=0,se===g?($(A,!0),A.strm.avail_out===0?me:re):(A.strstart>A.block_start&&($(A,!1),A.strm.avail_out),k)}),new Ce(4,4,8,4,xe),new Ce(4,5,16,8,xe),new Ce(4,6,32,32,xe),new Ce(4,4,16,16,ke),new Ce(8,16,32,32,ke),new Ce(8,16,128,128,ke),new Ce(8,32,128,256,ke),new Ce(32,128,258,1024,ke),new Ce(32,258,258,4096,ke)],s.deflateInit=function(A,se){return ot(A,se,E,15,8,0)},s.deflateInit2=ot,s.deflateReset=kt,s.deflateResetKeep=Ke,s.deflateSetHeader=function(A,se){return A&&A.state?A.state.wrap!==2?w:(A.state.gzhead=se,y):w},s.deflate=function(A,se){var X,z,B,W;if(!A||!A.state||5<se||se<0)return A?te(A,w):w;if(z=A.state,!A.output||!A.input&&A.avail_in!==0||z.status===666&&se!==g)return te(A,A.avail_out===0?-5:w);if(z.strm=A,X=z.last_flush,z.last_flush=se,z.status===P)if(z.wrap===2)A.adler=0,ce(z,31),ce(z,139),ce(z,8),z.gzhead?(ce(z,(z.gzhead.text?1:0)+(z.gzhead.hcrc?2:0)+(z.gzhead.extra?4:0)+(z.gzhead.name?8:0)+(z.gzhead.comment?16:0)),ce(z,255&z.gzhead.time),ce(z,z.gzhead.time>>8&255),ce(z,z.gzhead.time>>16&255),ce(z,z.gzhead.time>>24&255),ce(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),ce(z,255&z.gzhead.os),z.gzhead.extra&&z.gzhead.extra.length&&(ce(z,255&z.gzhead.extra.length),ce(z,z.gzhead.extra.length>>8&255)),z.gzhead.hcrc&&(A.adler=c(A.adler,z.pending_buf,z.pending,0)),z.gzindex=0,z.status=69):(ce(z,0),ce(z,0),ce(z,0),ce(z,0),ce(z,0),ce(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),ce(z,3),z.status=D);else{var ie=E+(z.w_bits-8<<4)<<8;ie|=(2<=z.strategy||z.level<2?0:z.level<6?1:z.level===6?2:3)<<6,z.strstart!==0&&(ie|=32),ie+=31-ie%31,z.status=D,Z(z,ie),z.strstart!==0&&(Z(z,A.adler>>>16),Z(z,65535&A.adler)),A.adler=1}if(z.status===69)if(z.gzhead.extra){for(B=z.pending;z.gzindex<(65535&z.gzhead.extra.length)&&(z.pending!==z.pending_buf_size||(z.gzhead.hcrc&&z.pending>B&&(A.adler=c(A.adler,z.pending_buf,z.pending-B,B)),K(A),B=z.pending,z.pending!==z.pending_buf_size));)ce(z,255&z.gzhead.extra[z.gzindex]),z.gzindex++;z.gzhead.hcrc&&z.pending>B&&(A.adler=c(A.adler,z.pending_buf,z.pending-B,B)),z.gzindex===z.gzhead.extra.length&&(z.gzindex=0,z.status=73)}else z.status=73;if(z.status===73)if(z.gzhead.name){B=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>B&&(A.adler=c(A.adler,z.pending_buf,z.pending-B,B)),K(A),B=z.pending,z.pending===z.pending_buf_size)){W=1;break}W=z.gzindex<z.gzhead.name.length?255&z.gzhead.name.charCodeAt(z.gzindex++):0,ce(z,W)}while(W!==0);z.gzhead.hcrc&&z.pending>B&&(A.adler=c(A.adler,z.pending_buf,z.pending-B,B)),W===0&&(z.gzindex=0,z.status=91)}else z.status=91;if(z.status===91)if(z.gzhead.comment){B=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>B&&(A.adler=c(A.adler,z.pending_buf,z.pending-B,B)),K(A),B=z.pending,z.pending===z.pending_buf_size)){W=1;break}W=z.gzindex<z.gzhead.comment.length?255&z.gzhead.comment.charCodeAt(z.gzindex++):0,ce(z,W)}while(W!==0);z.gzhead.hcrc&&z.pending>B&&(A.adler=c(A.adler,z.pending_buf,z.pending-B,B)),W===0&&(z.status=103)}else z.status=103;if(z.status===103&&(z.gzhead.hcrc?(z.pending+2>z.pending_buf_size&&K(A),z.pending+2<=z.pending_buf_size&&(ce(z,255&A.adler),ce(z,A.adler>>8&255),A.adler=0,z.status=D)):z.status=D),z.pending!==0){if(K(A),A.avail_out===0)return z.last_flush=-1,y}else if(A.avail_in===0&&Q(se)<=Q(X)&&se!==g)return te(A,-5);if(z.status===666&&A.avail_in!==0)return te(A,-5);if(A.avail_in!==0||z.lookahead!==0||se!==m&&z.status!==666){var oe=z.strategy===2?function(Y,le){for(var ye;;){if(Y.lookahead===0&&(Se(Y),Y.lookahead===0)){if(le===m)return k;break}if(Y.match_length=0,ye=a._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++,ye&&($(Y,!1),Y.strm.avail_out===0))return k}return Y.insert=0,le===g?($(Y,!0),Y.strm.avail_out===0?me:re):Y.last_lit&&($(Y,!1),Y.strm.avail_out===0)?k:H}(z,se):z.strategy===3?function(Y,le){for(var ye,he,ve,Pe,De=Y.window;;){if(Y.lookahead<=M){if(Se(Y),Y.lookahead<=M&&le===m)return k;if(Y.lookahead===0)break}if(Y.match_length=0,Y.lookahead>=N&&0<Y.strstart&&(he=De[ve=Y.strstart-1])===De[++ve]&&he===De[++ve]&&he===De[++ve]){Pe=Y.strstart+M;do;while(he===De[++ve]&&he===De[++ve]&&he===De[++ve]&&he===De[++ve]&&he===De[++ve]&&he===De[++ve]&&he===De[++ve]&&he===De[++ve]&&ve<Pe);Y.match_length=M-(Pe-ve),Y.match_length>Y.lookahead&&(Y.match_length=Y.lookahead)}if(Y.match_length>=N?(ye=a._tr_tally(Y,1,Y.match_length-N),Y.lookahead-=Y.match_length,Y.strstart+=Y.match_length,Y.match_length=0):(ye=a._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++),ye&&($(Y,!1),Y.strm.avail_out===0))return k}return Y.insert=0,le===g?($(Y,!0),Y.strm.avail_out===0?me:re):Y.last_lit&&($(Y,!1),Y.strm.avail_out===0)?k:H}(z,se):i[z.level].func(z,se);if(oe!==me&&oe!==re||(z.status=666),oe===k||oe===me)return A.avail_out===0&&(z.last_flush=-1),y;if(oe===H&&(se===1?a._tr_align(z):se!==5&&(a._tr_stored_block(z,0,0,!1),se===3&&(ue(z.head),z.lookahead===0&&(z.strstart=0,z.block_start=0,z.insert=0))),K(A),A.avail_out===0))return z.last_flush=-1,y}return se!==g?y:z.wrap<=0?1:(z.wrap===2?(ce(z,255&A.adler),ce(z,A.adler>>8&255),ce(z,A.adler>>16&255),ce(z,A.adler>>24&255),ce(z,255&A.total_in),ce(z,A.total_in>>8&255),ce(z,A.total_in>>16&255),ce(z,A.total_in>>24&255)):(Z(z,A.adler>>>16),Z(z,65535&A.adler)),K(A),0<z.wrap&&(z.wrap=-z.wrap),z.pending!==0?y:1)},s.deflateEnd=function(A){var se;return A&&A.state?(se=A.state.status)!==P&&se!==69&&se!==73&&se!==91&&se!==103&&se!==D&&se!==666?te(A,w):(A.state=null,se===D?te(A,-3):y):w},s.deflateSetDictionary=function(A,se){var X,z,B,W,ie,oe,Y,le,ye=se.length;if(!A||!A.state||(W=(X=A.state).wrap)===2||W===1&&X.status!==P||X.lookahead)return w;for(W===1&&(A.adler=l(A.adler,se,ye,0)),X.wrap=0,ye>=X.w_size&&(W===0&&(ue(X.head),X.strstart=0,X.block_start=0,X.insert=0),le=new o.Buf8(X.w_size),o.arraySet(le,se,ye-X.w_size,X.w_size,0),se=le,ye=X.w_size),ie=A.avail_in,oe=A.next_in,Y=A.input,A.avail_in=ye,A.next_in=0,A.input=se,Se(X);X.lookahead>=N;){for(z=X.strstart,B=X.lookahead-(N-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[z+N-1])&X.hash_mask,X.prev[z&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=z,z++,--B;);X.strstart=z,X.lookahead=N-1,Se(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=N-1,X.match_available=0,A.next_in=oe,A.input=Y,A.avail_in=ie,X.wrap=W,y},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,l,c,d,m,g,y,w,x,_,v,E,T,R,L,U,S,C,N,M,V,P,D,k,H;a=i.state,l=i.next_in,k=i.input,c=l+(i.avail_in-5),d=i.next_out,H=i.output,m=d-(o-i.avail_out),g=d+(i.avail_out-257),y=a.dmax,w=a.wsize,x=a.whave,_=a.wnext,v=a.window,E=a.hold,T=a.bits,R=a.lencode,L=a.distcode,U=(1<<a.lenbits)-1,S=(1<<a.distbits)-1;e:do{T<15&&(E+=k[l++]<<T,T+=8,E+=k[l++]<<T,T+=8),C=R[E&U];t:for(;;){if(E>>>=N=C>>>24,T-=N,(N=C>>>16&255)===0)H[d++]=65535&C;else{if(!(16&N)){if(!(64&N)){C=R[(65535&C)+(E&(1<<N)-1)];continue t}if(32&N){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}M=65535&C,(N&=15)&&(T<N&&(E+=k[l++]<<T,T+=8),M+=E&(1<<N)-1,E>>>=N,T-=N),T<15&&(E+=k[l++]<<T,T+=8,E+=k[l++]<<T,T+=8),C=L[E&S];n:for(;;){if(E>>>=N=C>>>24,T-=N,!(16&(N=C>>>16&255))){if(!(64&N)){C=L[(65535&C)+(E&(1<<N)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(V=65535&C,T<(N&=15)&&(E+=k[l++]<<T,(T+=8)<N&&(E+=k[l++]<<T,T+=8)),y<(V+=E&(1<<N)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(E>>>=N,T-=N,(N=d-m)<V){if(x<(N=V-N)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(D=v,(P=0)===_){if(P+=w-N,N<M){for(M-=N;H[d++]=v[P++],--N;);P=d-V,D=H}}else if(_<N){if(P+=w+_-N,(N-=_)<M){for(M-=N;H[d++]=v[P++],--N;);if(P=0,_<M){for(M-=N=_;H[d++]=v[P++],--N;);P=d-V,D=H}}}else if(P+=_-N,N<M){for(M-=N;H[d++]=v[P++],--N;);P=d-V,D=H}for(;2<M;)H[d++]=D[P++],H[d++]=D[P++],H[d++]=D[P++],M-=3;M&&(H[d++]=D[P++],1<M&&(H[d++]=D[P++]))}else{for(P=d-V;H[d++]=H[P++],H[d++]=H[P++],H[d++]=H[P++],2<(M-=3););M&&(H[d++]=H[P++],1<M&&(H[d++]=H[P++]))}break}}break}}while(l<c&&d<g);l-=M=T>>3,E&=(1<<(T-=M<<3))-1,i.next_in=l,i.next_out=d,i.avail_in=l<c?c-l+5:5-(l-c),i.avail_out=d<g?g-d+257:257-(d-g),a.hold=E,a.bits=T}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),d=1,m=2,g=0,y=-2,w=1,x=852,_=592;function v(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(P){var D;return P&&P.state?(D=P.state,P.total_in=P.total_out=D.total=0,P.msg="",D.wrap&&(P.adler=1&D.wrap),D.mode=w,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new i.Buf32(x),D.distcode=D.distdyn=new i.Buf32(_),D.sane=1,D.back=-1,g):y}function R(P){var D;return P&&P.state?((D=P.state).wsize=0,D.whave=0,D.wnext=0,T(P)):y}function L(P,D){var k,H;return P&&P.state?(H=P.state,D<0?(k=0,D=-D):(k=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?y:(H.window!==null&&H.wbits!==D&&(H.window=null),H.wrap=k,H.wbits=D,R(P))):y}function U(P,D){var k,H;return P?(H=new E,(P.state=H).window=null,(k=L(P,D))!==g&&(P.state=null),k):y}var S,C,N=!0;function M(P){if(N){var D;for(S=new i.Buf32(512),C=new i.Buf32(32),D=0;D<144;)P.lens[D++]=8;for(;D<256;)P.lens[D++]=9;for(;D<280;)P.lens[D++]=7;for(;D<288;)P.lens[D++]=8;for(c(d,P.lens,0,288,S,0,P.work,{bits:9}),D=0;D<32;)P.lens[D++]=5;c(m,P.lens,0,32,C,0,P.work,{bits:5}),N=!1}P.lencode=S,P.lenbits=9,P.distcode=C,P.distbits=5}function V(P,D,k,H){var me,re=P.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new i.Buf8(re.wsize)),H>=re.wsize?(i.arraySet(re.window,D,k-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(H<(me=re.wsize-re.wnext)&&(me=H),i.arraySet(re.window,D,k-H,me,re.wnext),(H-=me)?(i.arraySet(re.window,D,k-H,H,0),re.wnext=H,re.whave=re.wsize):(re.wnext+=me,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=me))),0}s.inflateReset=R,s.inflateReset2=L,s.inflateResetKeep=T,s.inflateInit=function(P){return U(P,15)},s.inflateInit2=U,s.inflate=function(P,D){var k,H,me,re,te,Q,ue,K,$,ce,Z,ee,Se,xe,ke,Ce,Be,Ke,kt,ot,A,se,X,z,B=0,W=new i.Buf8(4),ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return y;(k=P.state).mode===12&&(k.mode=13),te=P.next_out,me=P.output,ue=P.avail_out,re=P.next_in,H=P.input,Q=P.avail_in,K=k.hold,$=k.bits,ce=Q,Z=ue,se=g;e:for(;;)switch(k.mode){case w:if(k.wrap===0){k.mode=13;break}for(;$<16;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}if(2&k.wrap&&K===35615){W[k.check=0]=255&K,W[1]=K>>>8&255,k.check=a(k.check,W,2,0),$=K=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&K)<<8)+(K>>8))%31){P.msg="incorrect header check",k.mode=30;break}if((15&K)!=8){P.msg="unknown compression method",k.mode=30;break}if($-=4,A=8+(15&(K>>>=4)),k.wbits===0)k.wbits=A;else if(A>k.wbits){P.msg="invalid window size",k.mode=30;break}k.dmax=1<<A,P.adler=k.check=1,k.mode=512&K?10:12,$=K=0;break;case 2:for(;$<16;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}if(k.flags=K,(255&k.flags)!=8){P.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){P.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=K>>8&1),512&k.flags&&(W[0]=255&K,W[1]=K>>>8&255,k.check=a(k.check,W,2,0)),$=K=0,k.mode=3;case 3:for(;$<32;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}k.head&&(k.head.time=K),512&k.flags&&(W[0]=255&K,W[1]=K>>>8&255,W[2]=K>>>16&255,W[3]=K>>>24&255,k.check=a(k.check,W,4,0)),$=K=0,k.mode=4;case 4:for(;$<16;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}k.head&&(k.head.xflags=255&K,k.head.os=K>>8),512&k.flags&&(W[0]=255&K,W[1]=K>>>8&255,k.check=a(k.check,W,2,0)),$=K=0,k.mode=5;case 5:if(1024&k.flags){for(;$<16;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}k.length=K,k.head&&(k.head.extra_len=K),512&k.flags&&(W[0]=255&K,W[1]=K>>>8&255,k.check=a(k.check,W,2,0)),$=K=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(Q<(ee=k.length)&&(ee=Q),ee&&(k.head&&(A=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),i.arraySet(k.head.extra,H,re,ee,A)),512&k.flags&&(k.check=a(k.check,H,ee,re)),Q-=ee,re+=ee,k.length-=ee),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(Q===0)break e;for(ee=0;A=H[re+ee++],k.head&&A&&k.length<65536&&(k.head.name+=String.fromCharCode(A)),A&&ee<Q;);if(512&k.flags&&(k.check=a(k.check,H,ee,re)),Q-=ee,re+=ee,A)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(Q===0)break e;for(ee=0;A=H[re+ee++],k.head&&A&&k.length<65536&&(k.head.comment+=String.fromCharCode(A)),A&&ee<Q;);if(512&k.flags&&(k.check=a(k.check,H,ee,re)),Q-=ee,re+=ee,A)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;$<16;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}if(K!==(65535&k.check)){P.msg="header crc mismatch",k.mode=30;break}$=K=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),P.adler=k.check=0,k.mode=12;break;case 10:for(;$<32;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}P.adler=k.check=v(K),$=K=0,k.mode=11;case 11:if(k.havedict===0)return P.next_out=te,P.avail_out=ue,P.next_in=re,P.avail_in=Q,k.hold=K,k.bits=$,2;P.adler=k.check=1,k.mode=12;case 12:if(D===5||D===6)break e;case 13:if(k.last){K>>>=7&$,$-=7&$,k.mode=27;break}for(;$<3;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}switch(k.last=1&K,$-=1,3&(K>>>=1)){case 0:k.mode=14;break;case 1:if(M(k),k.mode=20,D!==6)break;K>>>=2,$-=2;break e;case 2:k.mode=17;break;case 3:P.msg="invalid block type",k.mode=30}K>>>=2,$-=2;break;case 14:for(K>>>=7&$,$-=7&$;$<32;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}if((65535&K)!=(K>>>16^65535)){P.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&K,$=K=0,k.mode=15,D===6)break e;case 15:k.mode=16;case 16:if(ee=k.length){if(Q<ee&&(ee=Q),ue<ee&&(ee=ue),ee===0)break e;i.arraySet(me,H,re,ee,te),Q-=ee,re+=ee,ue-=ee,te+=ee,k.length-=ee;break}k.mode=12;break;case 17:for(;$<14;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}if(k.nlen=257+(31&K),K>>>=5,$-=5,k.ndist=1+(31&K),K>>>=5,$-=5,k.ncode=4+(15&K),K>>>=4,$-=4,286<k.nlen||30<k.ndist){P.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;$<3;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}k.lens[ie[k.have++]]=7&K,K>>>=3,$-=3}for(;k.have<19;)k.lens[ie[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,X={bits:k.lenbits},se=c(0,k.lens,0,19,k.lencode,0,k.work,X),k.lenbits=X.bits,se){P.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;Ce=(B=k.lencode[K&(1<<k.lenbits)-1])>>>16&255,Be=65535&B,!((ke=B>>>24)<=$);){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}if(Be<16)K>>>=ke,$-=ke,k.lens[k.have++]=Be;else{if(Be===16){for(z=ke+2;$<z;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}if(K>>>=ke,$-=ke,k.have===0){P.msg="invalid bit length repeat",k.mode=30;break}A=k.lens[k.have-1],ee=3+(3&K),K>>>=2,$-=2}else if(Be===17){for(z=ke+3;$<z;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}$-=ke,A=0,ee=3+(7&(K>>>=ke)),K>>>=3,$-=3}else{for(z=ke+7;$<z;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}$-=ke,A=0,ee=11+(127&(K>>>=ke)),K>>>=7,$-=7}if(k.have+ee>k.nlen+k.ndist){P.msg="invalid bit length repeat",k.mode=30;break}for(;ee--;)k.lens[k.have++]=A}}if(k.mode===30)break;if(k.lens[256]===0){P.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,X={bits:k.lenbits},se=c(d,k.lens,0,k.nlen,k.lencode,0,k.work,X),k.lenbits=X.bits,se){P.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,X={bits:k.distbits},se=c(m,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,X),k.distbits=X.bits,se){P.msg="invalid distances set",k.mode=30;break}if(k.mode=20,D===6)break e;case 20:k.mode=21;case 21:if(6<=Q&&258<=ue){P.next_out=te,P.avail_out=ue,P.next_in=re,P.avail_in=Q,k.hold=K,k.bits=$,l(P,Z),te=P.next_out,me=P.output,ue=P.avail_out,re=P.next_in,H=P.input,Q=P.avail_in,K=k.hold,$=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;Ce=(B=k.lencode[K&(1<<k.lenbits)-1])>>>16&255,Be=65535&B,!((ke=B>>>24)<=$);){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}if(Ce&&!(240&Ce)){for(Ke=ke,kt=Ce,ot=Be;Ce=(B=k.lencode[ot+((K&(1<<Ke+kt)-1)>>Ke)])>>>16&255,Be=65535&B,!(Ke+(ke=B>>>24)<=$);){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}K>>>=Ke,$-=Ke,k.back+=Ke}if(K>>>=ke,$-=ke,k.back+=ke,k.length=Be,Ce===0){k.mode=26;break}if(32&Ce){k.back=-1,k.mode=12;break}if(64&Ce){P.msg="invalid literal/length code",k.mode=30;break}k.extra=15&Ce,k.mode=22;case 22:if(k.extra){for(z=k.extra;$<z;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}k.length+=K&(1<<k.extra)-1,K>>>=k.extra,$-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;Ce=(B=k.distcode[K&(1<<k.distbits)-1])>>>16&255,Be=65535&B,!((ke=B>>>24)<=$);){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}if(!(240&Ce)){for(Ke=ke,kt=Ce,ot=Be;Ce=(B=k.distcode[ot+((K&(1<<Ke+kt)-1)>>Ke)])>>>16&255,Be=65535&B,!(Ke+(ke=B>>>24)<=$);){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}K>>>=Ke,$-=Ke,k.back+=Ke}if(K>>>=ke,$-=ke,k.back+=ke,64&Ce){P.msg="invalid distance code",k.mode=30;break}k.offset=Be,k.extra=15&Ce,k.mode=24;case 24:if(k.extra){for(z=k.extra;$<z;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}k.offset+=K&(1<<k.extra)-1,K>>>=k.extra,$-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){P.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(ue===0)break e;if(ee=Z-ue,k.offset>ee){if((ee=k.offset-ee)>k.whave&&k.sane){P.msg="invalid distance too far back",k.mode=30;break}Se=ee>k.wnext?(ee-=k.wnext,k.wsize-ee):k.wnext-ee,ee>k.length&&(ee=k.length),xe=k.window}else xe=me,Se=te-k.offset,ee=k.length;for(ue<ee&&(ee=ue),ue-=ee,k.length-=ee;me[te++]=xe[Se++],--ee;);k.length===0&&(k.mode=21);break;case 26:if(ue===0)break e;me[te++]=k.length,ue--,k.mode=21;break;case 27:if(k.wrap){for(;$<32;){if(Q===0)break e;Q--,K|=H[re++]<<$,$+=8}if(Z-=ue,P.total_out+=Z,k.total+=Z,Z&&(P.adler=k.check=k.flags?a(k.check,me,Z,te-Z):o(k.check,me,Z,te-Z)),Z=ue,(k.flags?K:v(K))!==k.check){P.msg="incorrect data check",k.mode=30;break}$=K=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;$<32;){if(Q===0)break e;Q--,K+=H[re++]<<$,$+=8}if(K!==(4294967295&k.total)){P.msg="incorrect length check",k.mode=30;break}$=K=0}k.mode=29;case 29:se=1;break e;case 30:se=-3;break e;case 31:return-4;case 32:default:return y}return P.next_out=te,P.avail_out=ue,P.next_in=re,P.avail_in=Q,k.hold=K,k.bits=$,(k.wsize||Z!==P.avail_out&&k.mode<30&&(k.mode<27||D!==4))&&V(P,P.output,P.next_out,Z-P.avail_out)?(k.mode=31,-4):(ce-=P.avail_in,Z-=P.avail_out,P.total_in+=ce,P.total_out+=Z,k.total+=Z,k.wrap&&Z&&(P.adler=k.check=k.flags?a(k.check,me,Z,P.next_out-Z):o(k.check,me,Z,P.next_out-Z)),P.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(ce==0&&Z===0||D===4)&&se===g&&(se=-5),se)},s.inflateEnd=function(P){if(!P||!P.state)return y;var D=P.state;return D.window&&(D.window=null),P.state=null,g},s.inflateGetHeader=function(P,D){var k;return P&&P.state&&2&(k=P.state).wrap?((k.head=D).done=!1,g):y},s.inflateSetDictionary=function(P,D){var k,H=D.length;return P&&P.state?(k=P.state).wrap!==0&&k.mode!==11?y:k.mode===11&&o(1,D,H,0)!==k.check?-3:V(P,D,H,H)?(k.mode=31,-4):(k.havedict=1,g):y},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,m,g,y,w,x,_,v){var E,T,R,L,U,S,C,N,M,V=v.bits,P=0,D=0,k=0,H=0,me=0,re=0,te=0,Q=0,ue=0,K=0,$=null,ce=0,Z=new i.Buf16(16),ee=new i.Buf16(16),Se=null,xe=0;for(P=0;P<=15;P++)Z[P]=0;for(D=0;D<y;D++)Z[m[g+D]]++;for(me=V,H=15;1<=H&&Z[H]===0;H--);if(H<me&&(me=H),H===0)return w[x++]=20971520,w[x++]=20971520,v.bits=1,0;for(k=1;k<H&&Z[k]===0;k++);for(me<k&&(me=k),P=Q=1;P<=15;P++)if(Q<<=1,(Q-=Z[P])<0)return-1;if(0<Q&&(d===0||H!==1))return-1;for(ee[1]=0,P=1;P<15;P++)ee[P+1]=ee[P]+Z[P];for(D=0;D<y;D++)m[g+D]!==0&&(_[ee[m[g+D]]++]=D);if(S=d===0?($=Se=_,19):d===1?($=o,ce-=257,Se=a,xe-=257,256):($=l,Se=c,-1),P=k,U=x,te=D=K=0,R=-1,L=(ue=1<<(re=me))-1,d===1&&852<ue||d===2&&592<ue)return 1;for(;;){for(C=P-te,M=_[D]<S?(N=0,_[D]):_[D]>S?(N=Se[xe+_[D]],$[ce+_[D]]):(N=96,0),E=1<<P-te,k=T=1<<re;w[U+(K>>te)+(T-=E)]=C<<24|N<<16|M|0,T!==0;);for(E=1<<P-1;K&E;)E>>=1;if(E!==0?(K&=E-1,K+=E):K=0,D++,--Z[P]==0){if(P===H)break;P=m[g+_[D]]}if(me<P&&(K&L)!==R){for(te===0&&(te=me),U+=k,Q=1<<(re=P-te);re+te<H&&!((Q-=Z[re+te])<=0);)re++,Q<<=1;if(ue+=1<<re,d===1&&852<ue||d===2&&592<ue)return 1;w[R=K&L]=me<<24|re<<16|U-x|0}}return K!==0&&(w[U+K]=P-te<<24|64<<16|0),v.bits=me,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function l(B){for(var W=B.length;0<=--W;)B[W]=0}var c=0,d=29,m=256,g=m+1+d,y=30,w=19,x=2*g+1,_=15,v=16,E=7,T=256,R=16,L=17,U=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(g+2));l(V);var P=new Array(2*y);l(P);var D=new Array(512);l(D);var k=new Array(256);l(k);var H=new Array(d);l(H);var me,re,te,Q=new Array(y);function ue(B,W,ie,oe,Y){this.static_tree=B,this.extra_bits=W,this.extra_base=ie,this.elems=oe,this.max_length=Y,this.has_stree=B&&B.length}function K(B,W){this.dyn_tree=B,this.max_code=0,this.stat_desc=W}function $(B){return B<256?D[B]:D[256+(B>>>7)]}function ce(B,W){B.pending_buf[B.pending++]=255&W,B.pending_buf[B.pending++]=W>>>8&255}function Z(B,W,ie){B.bi_valid>v-ie?(B.bi_buf|=W<<B.bi_valid&65535,ce(B,B.bi_buf),B.bi_buf=W>>v-B.bi_valid,B.bi_valid+=ie-v):(B.bi_buf|=W<<B.bi_valid&65535,B.bi_valid+=ie)}function ee(B,W,ie){Z(B,ie[2*W],ie[2*W+1])}function Se(B,W){for(var ie=0;ie|=1&B,B>>>=1,ie<<=1,0<--W;);return ie>>>1}function xe(B,W,ie){var oe,Y,le=new Array(_+1),ye=0;for(oe=1;oe<=_;oe++)le[oe]=ye=ye+ie[oe-1]<<1;for(Y=0;Y<=W;Y++){var he=B[2*Y+1];he!==0&&(B[2*Y]=Se(le[he]++,he))}}function ke(B){var W;for(W=0;W<g;W++)B.dyn_ltree[2*W]=0;for(W=0;W<y;W++)B.dyn_dtree[2*W]=0;for(W=0;W<w;W++)B.bl_tree[2*W]=0;B.dyn_ltree[2*T]=1,B.opt_len=B.static_len=0,B.last_lit=B.matches=0}function Ce(B){8<B.bi_valid?ce(B,B.bi_buf):0<B.bi_valid&&(B.pending_buf[B.pending++]=B.bi_buf),B.bi_buf=0,B.bi_valid=0}function Be(B,W,ie,oe){var Y=2*W,le=2*ie;return B[Y]<B[le]||B[Y]===B[le]&&oe[W]<=oe[ie]}function Ke(B,W,ie){for(var oe=B.heap[ie],Y=ie<<1;Y<=B.heap_len&&(Y<B.heap_len&&Be(W,B.heap[Y+1],B.heap[Y],B.depth)&&Y++,!Be(W,oe,B.heap[Y],B.depth));)B.heap[ie]=B.heap[Y],ie=Y,Y<<=1;B.heap[ie]=oe}function kt(B,W,ie){var oe,Y,le,ye,he=0;if(B.last_lit!==0)for(;oe=B.pending_buf[B.d_buf+2*he]<<8|B.pending_buf[B.d_buf+2*he+1],Y=B.pending_buf[B.l_buf+he],he++,oe===0?ee(B,Y,W):(ee(B,(le=k[Y])+m+1,W),(ye=S[le])!==0&&Z(B,Y-=H[le],ye),ee(B,le=$(--oe),ie),(ye=C[le])!==0&&Z(B,oe-=Q[le],ye)),he<B.last_lit;);ee(B,T,W)}function ot(B,W){var ie,oe,Y,le=W.dyn_tree,ye=W.stat_desc.static_tree,he=W.stat_desc.has_stree,ve=W.stat_desc.elems,Pe=-1;for(B.heap_len=0,B.heap_max=x,ie=0;ie<ve;ie++)le[2*ie]!==0?(B.heap[++B.heap_len]=Pe=ie,B.depth[ie]=0):le[2*ie+1]=0;for(;B.heap_len<2;)le[2*(Y=B.heap[++B.heap_len]=Pe<2?++Pe:0)]=1,B.depth[Y]=0,B.opt_len--,he&&(B.static_len-=ye[2*Y+1]);for(W.max_code=Pe,ie=B.heap_len>>1;1<=ie;ie--)Ke(B,le,ie);for(Y=ve;ie=B.heap[1],B.heap[1]=B.heap[B.heap_len--],Ke(B,le,1),oe=B.heap[1],B.heap[--B.heap_max]=ie,B.heap[--B.heap_max]=oe,le[2*Y]=le[2*ie]+le[2*oe],B.depth[Y]=(B.depth[ie]>=B.depth[oe]?B.depth[ie]:B.depth[oe])+1,le[2*ie+1]=le[2*oe+1]=Y,B.heap[1]=Y++,Ke(B,le,1),2<=B.heap_len;);B.heap[--B.heap_max]=B.heap[1],function(De,pt){var rn,Ct,O,G,pe,we,Re=pt.dyn_tree,tt=pt.max_code,Me=pt.stat_desc.static_tree,xt=pt.stat_desc.has_stree,Et=pt.stat_desc.extra_bits,wt=pt.stat_desc.extra_base,sn=pt.stat_desc.max_length,Lt=0;for(G=0;G<=_;G++)De.bl_count[G]=0;for(Re[2*De.heap[De.heap_max]+1]=0,rn=De.heap_max+1;rn<x;rn++)sn<(G=Re[2*Re[2*(Ct=De.heap[rn])+1]+1]+1)&&(G=sn,Lt++),Re[2*Ct+1]=G,tt<Ct||(De.bl_count[G]++,pe=0,wt<=Ct&&(pe=Et[Ct-wt]),we=Re[2*Ct],De.opt_len+=we*(G+pe),xt&&(De.static_len+=we*(Me[2*Ct+1]+pe)));if(Lt!==0){do{for(G=sn-1;De.bl_count[G]===0;)G--;De.bl_count[G]--,De.bl_count[G+1]+=2,De.bl_count[sn]--,Lt-=2}while(0<Lt);for(G=sn;G!==0;G--)for(Ct=De.bl_count[G];Ct!==0;)tt<(O=De.heap[--rn])||(Re[2*O+1]!==G&&(De.opt_len+=(G-Re[2*O+1])*Re[2*O],Re[2*O+1]=G),Ct--)}}(B,W),xe(le,Pe,B.bl_count)}function A(B,W,ie){var oe,Y,le=-1,ye=W[1],he=0,ve=7,Pe=4;for(ye===0&&(ve=138,Pe=3),W[2*(ie+1)+1]=65535,oe=0;oe<=ie;oe++)Y=ye,ye=W[2*(oe+1)+1],++he<ve&&Y===ye||(he<Pe?B.bl_tree[2*Y]+=he:Y!==0?(Y!==le&&B.bl_tree[2*Y]++,B.bl_tree[2*R]++):he<=10?B.bl_tree[2*L]++:B.bl_tree[2*U]++,le=Y,Pe=(he=0)===ye?(ve=138,3):Y===ye?(ve=6,3):(ve=7,4))}function se(B,W,ie){var oe,Y,le=-1,ye=W[1],he=0,ve=7,Pe=4;for(ye===0&&(ve=138,Pe=3),oe=0;oe<=ie;oe++)if(Y=ye,ye=W[2*(oe+1)+1],!(++he<ve&&Y===ye)){if(he<Pe)for(;ee(B,Y,B.bl_tree),--he!=0;);else Y!==0?(Y!==le&&(ee(B,Y,B.bl_tree),he--),ee(B,R,B.bl_tree),Z(B,he-3,2)):he<=10?(ee(B,L,B.bl_tree),Z(B,he-3,3)):(ee(B,U,B.bl_tree),Z(B,he-11,7));le=Y,Pe=(he=0)===ye?(ve=138,3):Y===ye?(ve=6,3):(ve=7,4)}}l(Q);var X=!1;function z(B,W,ie,oe){Z(B,(c<<1)+(oe?1:0),3),function(Y,le,ye,he){Ce(Y),ce(Y,ye),ce(Y,~ye),i.arraySet(Y.pending_buf,Y.window,le,ye,Y.pending),Y.pending+=ye}(B,W,ie)}s._tr_init=function(B){X||(function(){var W,ie,oe,Y,le,ye=new Array(_+1);for(Y=oe=0;Y<d-1;Y++)for(H[Y]=oe,W=0;W<1<<S[Y];W++)k[oe++]=Y;for(k[oe-1]=Y,Y=le=0;Y<16;Y++)for(Q[Y]=le,W=0;W<1<<C[Y];W++)D[le++]=Y;for(le>>=7;Y<y;Y++)for(Q[Y]=le<<7,W=0;W<1<<C[Y]-7;W++)D[256+le++]=Y;for(ie=0;ie<=_;ie++)ye[ie]=0;for(W=0;W<=143;)V[2*W+1]=8,W++,ye[8]++;for(;W<=255;)V[2*W+1]=9,W++,ye[9]++;for(;W<=279;)V[2*W+1]=7,W++,ye[7]++;for(;W<=287;)V[2*W+1]=8,W++,ye[8]++;for(xe(V,g+1,ye),W=0;W<y;W++)P[2*W+1]=5,P[2*W]=Se(W,5);me=new ue(V,S,m+1,g,_),re=new ue(P,C,0,y,_),te=new ue(new Array(0),N,0,w,E)}(),X=!0),B.l_desc=new K(B.dyn_ltree,me),B.d_desc=new K(B.dyn_dtree,re),B.bl_desc=new K(B.bl_tree,te),B.bi_buf=0,B.bi_valid=0,ke(B)},s._tr_stored_block=z,s._tr_flush_block=function(B,W,ie,oe){var Y,le,ye=0;0<B.level?(B.strm.data_type===2&&(B.strm.data_type=function(he){var ve,Pe=4093624447;for(ve=0;ve<=31;ve++,Pe>>>=1)if(1&Pe&&he.dyn_ltree[2*ve]!==0)return o;if(he.dyn_ltree[18]!==0||he.dyn_ltree[20]!==0||he.dyn_ltree[26]!==0)return a;for(ve=32;ve<m;ve++)if(he.dyn_ltree[2*ve]!==0)return a;return o}(B)),ot(B,B.l_desc),ot(B,B.d_desc),ye=function(he){var ve;for(A(he,he.dyn_ltree,he.l_desc.max_code),A(he,he.dyn_dtree,he.d_desc.max_code),ot(he,he.bl_desc),ve=w-1;3<=ve&&he.bl_tree[2*M[ve]+1]===0;ve--);return he.opt_len+=3*(ve+1)+5+5+4,ve}(B),Y=B.opt_len+3+7>>>3,(le=B.static_len+3+7>>>3)<=Y&&(Y=le)):Y=le=ie+5,ie+4<=Y&&W!==-1?z(B,W,ie,oe):B.strategy===4||le===Y?(Z(B,2+(oe?1:0),3),kt(B,V,P)):(Z(B,4+(oe?1:0),3),function(he,ve,Pe,De){var pt;for(Z(he,ve-257,5),Z(he,Pe-1,5),Z(he,De-4,4),pt=0;pt<De;pt++)Z(he,he.bl_tree[2*M[pt]+1],3);se(he,he.dyn_ltree,ve-1),se(he,he.dyn_dtree,Pe-1)}(B,B.l_desc.max_code+1,B.d_desc.max_code+1,ye+1),kt(B,B.dyn_ltree,B.dyn_dtree)),ke(B),oe&&Ce(B)},s._tr_tally=function(B,W,ie){return B.pending_buf[B.d_buf+2*B.last_lit]=W>>>8&255,B.pending_buf[B.d_buf+2*B.last_lit+1]=255&W,B.pending_buf[B.l_buf+B.last_lit]=255&ie,B.last_lit++,W===0?B.dyn_ltree[2*ie]++:(B.matches++,W--,B.dyn_ltree[2*(k[ie]+m+1)]++,B.dyn_dtree[2*$(W)]++),B.last_lit===B.lit_bufsize-1},s._tr_align=function(B){Z(B,2,3),ee(B,T,V),function(W){W.bi_valid===16?(ce(W,W.bi_buf),W.bi_buf=0,W.bi_valid=0):8<=W.bi_valid&&(W.pending_buf[W.pending++]=255&W.bi_buf,W.bi_buf>>=8,W.bi_valid-=8)}(B)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var l,c,d,m,g=1,y={},w=!1,x=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,l={}.toString.call(o.process)==="[object process]"?function(R){process.nextTick(function(){E(R)})}:function(){if(o.postMessage&&!o.importScripts){var R=!0,L=o.onmessage;return o.onmessage=function(){R=!1},o.postMessage("","*"),o.onmessage=L,R}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",T,!1):o.attachEvent("onmessage",T),function(R){o.postMessage(m+R,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(R){E(R.data)},function(R){d.port2.postMessage(R)}):x&&"onreadystatechange"in x.createElement("script")?(c=x.documentElement,function(R){var L=x.createElement("script");L.onreadystatechange=function(){E(R),L.onreadystatechange=null,c.removeChild(L),L=null},c.appendChild(L)}):function(R){setTimeout(E,0,R)},_.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var L=new Array(arguments.length-1),U=0;U<L.length;U++)L[U]=arguments[U+1];var S={callback:R,args:L};return y[g]=S,l(g),g++},_.clearImmediate=v}function v(R){delete y[R]}function E(R){if(w)setTimeout(E,0,R);else{var L=y[R];if(L){w=!0;try{(function(U){var S=U.callback,C=U.args;switch(C.length){case 0:S();break;case 1:S(C[0]);break;case 2:S(C[0],C[1]);break;case 3:S(C[0],C[1],C[2]);break;default:S.apply(a,C)}})(L)}finally{v(R),w=!1}}}}function T(R){R.source===o&&typeof R.data=="string"&&R.data.indexOf(m)===0&&E(+R.data.slice(m.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof $r<"u"?$r:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(lk);var a8=lk.exports;const l8=bm(a8);var uk={exports:{}};(function(t,e){(function(n,r){r()})($r,function(){function n(c,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,d,m){var g=new XMLHttpRequest;g.open("GET",c),g.responseType="blob",g.onload=function(){l(g.response,d,m)},g.onerror=function(){console.error("could not download file")},g.send()}function s(c){var d=new XMLHttpRequest;d.open("HEAD",c,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function i(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof $r=="object"&&$r.global===$r?$r:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,d,m){var g=o.URL||o.webkitURL,y=document.createElement("a");d=d||c.name||"download",y.download=d,y.rel="noopener",typeof c=="string"?(y.href=c,y.origin===location.origin?i(y):s(y.href)?r(c,d,m):i(y,y.target="_blank")):(y.href=g.createObjectURL(c),setTimeout(function(){g.revokeObjectURL(y.href)},4e4),setTimeout(function(){i(y)},0))}:"msSaveOrOpenBlob"in navigator?function(c,d,m){if(d=d||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,m),d);else if(s(c))r(c,d,m);else{var g=document.createElement("a");g.href=c,g.target="_blank",setTimeout(function(){i(g)})}}:function(c,d,m,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof c=="string")return r(c,d,m);var y=c.type==="application/octet-stream",w=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||y&&w||a)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var T=_.result;T=x?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=T:location=T,g=null},_.readAsDataURL(c)}else{var v=o.URL||o.webkitURL,E=v.createObjectURL(c);g?g.location=E:location.href=E,g=null,setTimeout(function(){v.revokeObjectURL(E)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(uk);var u8=uk.exports;const c8=bm(u8),d8=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),u.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})]}),h8=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})}),f8=({onExit:t})=>{var ve,Pe,De,pt,rn,Ct;const[e,n]=F.useState(3),[r,s]=F.useState("portrait"),[i,o]=F.useState([]),[a,l]=F.useState([]),[c,d]=F.useState(-1),[m,g]=F.useState(null),[y,w]=F.useState(!1),[x,_]=F.useState(.25),[v,E]=F.useState(!0),[T,R]=F.useState("add"),[L,U]=F.useState("#ffffff"),S=1080,M=r==="square"?1080:1350,V=e*S,P=M,D=F.useRef(null),k=F.useRef(null),H=F.useRef(!1),me=F.useRef({x:0,y:0}),re=F.useRef({x:0,y:0}),te=F.useRef(!1),Q=F.useRef({x:0,y:0,w:0,h:0}),ue=F.useRef(0),K=F.useRef(.2),$=O=>{let G="";return O==="circle"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><circle cx="100" cy="100" r="100" fill="#1e293b"/></svg>':O==="square"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect width="200" height="200" fill="#334155"/></svg>':O==="triangle"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 10 L190 190 L10 190 Z" fill="#475569"/></svg>':O==="star"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="m100 10 25 60 65 5-50 45 15 65-55-35-55 35 15-65-50-45 65-5z" fill="#0f172a"/></svg>':O==="heart"?G='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 180 C10 100 -20 50 40 20 C70 5 90 30 100 50 C110 30 130 5 160 20 C220 50 190 100 100 180 Z" fill="#ef4444"/></svg>':O==="text"&&(G='<svg xmlns="http://www.w3.org/2000/svg" width="300" height="100"><rect width="100%" height="100%" fill="transparent"/><text x="50%" y="50%" font-family="Arial" font-size="60" font-weight="bold" fill="#000000" text-anchor="middle" dominant-baseline="middle">Text Here</text></svg>'),`data:image/svg+xml;base64,${btoa(G)}`},ce=O=>{const G=a.slice(0,c+1);G.push(O),l(G),d(G.length-1)},Z=()=>{if(c>0){const O=c-1;o(a[O]),d(O)}else c===0&&(o([]),d(-1))},ee=O=>{o(O),ce(O)},Se=O=>{const G=new Image;G.onload=()=>{const pe=G.width/G.height,we={id:Date.now().toString(),src:O,x:V/2-G.width/2,y:P/2-G.height/2,width:G.width,height:G.height,originalAspectRatio:pe,currentAspectRatio:pe,rotation:0,scaleX:1,borderRadius:0,borderColor:"#000000",borderWidth:0,isGrayscale:!1,maskShape:"none"};we.width>1200&&(we.width=1200,we.height=1200/we.originalAspectRatio);const Re=[...i,we];ee(Re),g(we.id),R("edit"),E(!0)},G.src=O},xe=O=>{if(O.target.files&&O.target.files[0]){const G=O.target.files[0],pe=new FileReader;pe.onload=we=>{var Re;(Re=we.target)!=null&&Re.result&&Se(we.target.result)},pe.readAsDataURL(G)}O.target.value=""},ke=()=>{if(!m)return;const O=i.filter(G=>G.id!==m);ee(O),g(null),R("add")},Ce=()=>{if(!m)return;const O=i.find(G=>G.id===m);if(O){const G={...O,id:Date.now().toString(),x:O.x+50,y:O.y+50},pe=[...i,G];ee(pe),g(G.id)}},Be=(O,G=!0)=>{if(!m)return;const pe=i.map(we=>we.id===m?{...we,...O}:we);G?ee(pe):o(pe)},Ke=()=>{const O=i.find(G=>G.id===m);O&&Be({rotation:(O.rotation+90)%360})},kt=()=>{const O=i.find(G=>G.id===m);O&&Be({scaleX:O.scaleX*-1})},ot=()=>{if(!m)return;const O=i.find(we=>we.id===m);if(!O)return;let G=O.originalAspectRatio;Math.abs(O.currentAspectRatio-O.originalAspectRatio)<.01?G=1:Math.abs(O.currentAspectRatio-1)<.01?G=.8:Math.abs(O.currentAspectRatio-.8)<.01?G=1.77:G=O.originalAspectRatio;const pe=O.width/G;Be({currentAspectRatio:G,height:pe})},A=O=>{o(G=>{const pe=G.find(Re=>Re.id===O);return pe?[...G.filter(Re=>Re.id!==O),pe]:G})},se=O=>{if(!m)return;const G=i.findIndex(we=>we.id===m);if(G===-1)return;const pe=[...i];if(O==="front"){const[we]=pe.splice(G,1);pe.push(we)}else if(O==="back"){const[we]=pe.splice(G,1);pe.unshift(we)}else O==="forward"&&G<pe.length-1?[pe[G],pe[G+1]]=[pe[G+1],pe[G]]:O==="backward"&&G>0&&([pe[G],pe[G-1]]=[pe[G-1],pe[G]]);ee(pe)},X=async()=>{w(!0);try{const O=document.createElement("canvas");O.width=V,O.height=P;const G=O.getContext("2d");if(!G)throw new Error("Canvas context failed");G.fillStyle=L,G.fillRect(0,0,V,P);const pe=Me=>new Promise(xt=>{const Et=new Image;Et.crossOrigin="anonymous",Et.onload=()=>{G.save();const wt=Me.x+Me.width/2,sn=Me.y+Me.height/2;G.translate(wt,sn),G.rotate(Me.rotation*Math.PI/180),G.scale(Me.scaleX,1),Me.isGrayscale&&(G.filter="grayscale(100%)");const Lt=Me.width,Kt=Me.height,zt=-Lt/2,jn=-Kt/2;if(G.beginPath(),Me.maskShape==="circle"){const Wi=Math.min(Lt,Kt)/2;G.arc(0,0,Wi,0,Math.PI*2)}else(Me.maskShape==="square"||Me.borderRadius>0)&&G.roundRect?G.roundRect(zt,jn,Lt,Kt,Me.borderRadius):G.rect(zt,jn,Lt,Kt);G.closePath(),G.save(),G.clip(),G.drawImage(Et,zt,jn,Lt,Kt),G.restore(),G.filter="none",Me.borderWidth>0&&(G.lineWidth=Me.borderWidth,G.strokeStyle=Me.borderColor,G.stroke()),G.restore(),xt()},Et.src=Me.src});await Promise.all(i.map(pe));const we=new l8,Re=we.folder("instagram-panorama");for(let Me=0;Me<e;Me++){const xt=document.createElement("canvas");xt.width=S,xt.height=M;const Et=xt.getContext("2d");if(Et){Et.drawImage(O,Me*S,0,S,M,0,0,S,M);const wt=await new Promise(sn=>xt.toBlob(sn,"image/jpeg",.95));wt&&Re&&Re.file(`slide_${Me+1}.jpg`,wt)}}const tt=await we.generateAsync({type:"blob"});c8.saveAs(tt,"ig-panorama-slides.zip")}catch{alert("Gagal membuat zip.")}finally{w(!1)}},z=(O,G,pe)=>{g(pe),R("edit"),E(!0),A(pe),H.current=!0,me.current={x:O,y:G};const we=i.find(Re=>Re.id===pe);we&&(re.current={x:we.x,y:we.y})},B=(O,G)=>{O.stopPropagation(),O.preventDefault();const pe="touches"in O?O.touches[0].clientX:O.clientX,we="touches"in O?O.touches[0].clientY:O.clientY;te.current=!0;const Re=i.find(tt=>tt.id===G);Re&&(Q.current={x:pe,y:we,w:Re.width,h:Re.height})},W=(O,G)=>{if(te.current&&m){const pe=(O-Q.current.x)/x,we=Math.max(50,Q.current.w+pe);i.find(tt=>tt.id===m)&&o(tt=>tt.map(Me=>Me.id===m?{...Me,width:we,height:we/Me.currentAspectRatio}:Me));return}if(H.current&&m){const pe=(O-me.current.x)/x,we=(G-me.current.y)/x;o(Re=>Re.map(tt=>tt.id===m?{...tt,x:re.current.x+pe,y:re.current.y+we}:tt))}},ie=()=>{(H.current||te.current)&&ce(i),H.current=!1,te.current=!1,ue.current=0},oe=O=>{if(O.touches.length===2){const G=Math.hypot(O.touches[0].clientX-O.touches[1].clientX,O.touches[0].clientY-O.touches[1].clientY);ue.current=G,K.current=x}},Y=O=>{if(O.touches.length===2&&ue.current>0){const pe=Math.hypot(O.touches[0].clientX-O.touches[1].clientX,O.touches[0].clientY-O.touches[1].clientY)-ue.current,we=Math.max(.05,Math.min(1.5,K.current+pe*.001));_(we)}},le=()=>i.find(O=>O.id===m),ye=()=>_(O=>Math.min(O+.05,1.5)),he=()=>_(O=>Math.max(O-.05,.05));return u.jsxs("div",{className:"h-[100dvh] bg-slate-50 text-slate-900 flex flex-col overflow-hidden font-sans relative",children:[u.jsx("style",{children:`
                    .no-scrollbar::-webkit-scrollbar { display: none; }
                    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
                `}),u.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 pointer-events-none flex justify-between items-start",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:t,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors",children:u.jsx(ss,{className:"w-5 h-5"})}),u.jsx("button",{onClick:Z,disabled:c<0,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors disabled:opacity-50",children:u.jsx(xN,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"pointer-events-auto bg-white/90 backdrop-blur-md border border-slate-200 rounded-full flex items-center p-1 shadow-sm",children:[u.jsx("button",{onClick:he,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:u.jsx(h8,{className:"w-4 h-4"})}),u.jsxs("div",{className:"px-2 text-xs font-mono font-bold text-slate-700 w-10 text-center select-none",children:[Math.round(x*100),"%"]}),u.jsx("button",{onClick:ye,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:u.jsx(d8,{className:"w-4 h-4"})})]}),u.jsx("button",{onClick:X,disabled:y||i.length===0,className:"pointer-events-auto bg-slate-900 hover:bg-slate-800 text-white px-4 py-2.5 rounded-full shadow-lg shadow-slate-900/10 font-bold text-xs flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 border border-slate-800",children:y?"Saving...":u.jsxs(u.Fragment,{children:[u.jsx(fT,{className:"w-4 h-4"})," Save"]})})]}),u.jsx("div",{className:"flex-1 bg-slate-100 overflow-hidden relative flex flex-col",children:u.jsx("div",{className:"flex-1 overflow-auto no-scrollbar relative w-full h-full grid place-items-center p-8 canvas-bg touch-none transition-all duration-300",style:{paddingBottom:v?"140px":"0px"},ref:k,onClick:O=>{O.target===k.current&&g(null)},onMouseMove:O=>W(O.clientX,O.clientY),onTouchMove:O=>{if(O.touches.length===2){Y(O);return}W(O.touches[0].clientX,O.touches[0].clientY)},onMouseUp:ie,onTouchEnd:ie,onTouchStart:oe,children:u.jsxs("div",{className:"relative shadow-2xl transition-transform duration-75 ease-linear shrink-0",style:{width:V*x,height:P*x},children:[u.jsx("div",{className:"absolute inset-0 canvas-bg",style:{backgroundColor:L}}),u.jsx("div",{className:"absolute inset-0 overflow-hidden",children:i.map(O=>u.jsxs("div",{className:"absolute group",style:{left:O.x*x,top:O.y*x,width:O.width*x,height:O.height*x,transform:`rotate(${O.rotation}deg) scaleX(${O.scaleX})`,zIndex:m===O.id?50:1},children:[u.jsx("div",{className:`absolute -inset-0.5 pointer-events-none transition-opacity duration-200 z-50 ${m===O.id?"opacity-100":"opacity-0"}`,style:{border:"2px dashed #0f172a",borderRadius:O.maskShape==="circle"?"50%":`${O.borderRadius}px`}}),u.jsx("div",{style:{width:"100%",height:"100%",borderRadius:O.maskShape==="circle"?"50%":`${O.borderRadius}px`,overflow:"hidden",border:O.borderWidth>0?`${O.borderWidth*x}px solid ${O.borderColor}`:"none",filter:O.isGrayscale?"grayscale(100%)":"none",position:"relative"},onMouseDown:G=>z(G.clientX,G.clientY,O.id),onTouchStart:G=>{G.touches.length===1&&z(G.touches[0].clientX,G.touches[0].clientY,O.id)},children:u.jsx("img",{src:O.src,alt:"item",className:"w-full h-full select-none",draggable:!1,style:{objectFit:"cover"}})})]},O.id))}),m&&le()&&u.jsxs("div",{className:"absolute pointer-events-auto z-[100]",style:{left:(le().x+le().width/2)*x,top:Math.max(-50,le().y*x-60),transform:"translateX(-50%)"},onMouseDown:O=>O.stopPropagation(),onTouchStart:O=>O.stopPropagation(),children:[u.jsxs("div",{className:"bg-white/90 backdrop-blur-md text-slate-700 rounded-xl shadow-xl border border-slate-200 flex items-center p-1.5 gap-1",children:[u.jsx("button",{onClick:Ke,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:u.jsx(uN,{className:"w-4 h-4"})}),u.jsx("button",{onClick:kt,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:u.jsx(cN,{className:"w-4 h-4"})}),u.jsx("button",{onClick:ot,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-900",children:u.jsx(vN,{className:"w-4 h-4"})}),u.jsx("button",{onClick:Ce,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:u.jsx(dN,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1"}),u.jsx("button",{onClick:ke,className:"p-2 hover:bg-red-50 text-red-500 rounded-lg",children:u.jsx(Pr,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"w-3 h-3 bg-white/90 rotate-45 absolute -bottom-1.5 left-1/2 -translate-x-1/2 border-r border-b border-slate-200"})]}),i.map(O=>m===O.id&&u.jsxs("div",{className:"absolute pointer-events-none z-[51]",style:{left:O.x*x,top:O.y*x,width:O.width*x,height:O.height*x,transform:`rotate(${O.rotation}deg) scaleX(${O.scaleX})`},children:[u.jsx("div",{className:"absolute -bottom-3 -right-3 w-6 h-6 bg-slate-900 rounded-full border-2 border-white shadow-md pointer-events-auto flex items-center justify-center cursor-nwse-resize hover:scale-110 transition-transform",onMouseDown:G=>B(G,O.id),onTouchStart:G=>B(G,O.id),children:u.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),te.current&&u.jsxs("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-[10px] px-2 py-1 rounded shadow whitespace-nowrap",children:[Math.round(O.width),"px"]})]},`resize-${O.id}`)),u.jsx("div",{className:"absolute inset-0 pointer-events-none z-20",children:Array.from({length:e-1}).map((O,G)=>u.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-dashed border-slate-400/50 flex flex-col justify-between items-center py-2 mix-blend-difference",style:{left:`${(G+1)/e*100}%`},children:u.jsx(aN,{className:"w-4 h-4 text-slate-600 opacity-80 bg-white/20 rounded-full p-0.5"})},G))}),u.jsx("div",{className:"absolute top-0 left-0 w-full flex pointer-events-none z-20",children:Array.from({length:e}).map((O,G)=>u.jsx("div",{className:"flex-1 border-r border-transparent h-6 flex items-center justify-center",children:u.jsxs("span",{className:"bg-white/80 text-slate-900 text-[9px] font-bold px-2 rounded-b backdrop-blur-sm shadow-sm border-x border-b border-slate-200",children:["Slide ",G+1]})},G))})]})})}),u.jsxs("div",{className:`fixed bottom-0 left-0 right-0 z-[60] flex flex-col bg-white border-t border-slate-200 transition-transform duration-300 ease-out shadow-[0_-10px_30px_-10px_rgba(0,0,0,0.05)] ${v?"translate-y-0":"translate-y-[calc(100%-40px)]"}`,children:[u.jsxs("div",{onClick:()=>E(!v),className:"h-10 flex items-center justify-center cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors border-b border-slate-200 group shrink-0",children:[u.jsx("div",{className:"w-12 h-1 bg-slate-300 rounded-full group-hover:bg-slate-400 mb-1"}),u.jsx(fr,{className:`w-4 h-4 text-slate-400 absolute right-4 transition-transform duration-300 ${v?"":"rotate-180"}`})]}),u.jsxs("div",{className:"flex border-b border-slate-200 bg-white shrink-0",children:[u.jsx("button",{onClick:()=>{R("add"),E(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${T==="add"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Add"}),u.jsx("button",{onClick:()=>{R("canvas"),E(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${T==="canvas"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Layout"}),u.jsx("button",{onClick:()=>{R("edit"),E(!0)},disabled:!m,className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${T==="edit"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-300 cursor-not-allowed"}`,children:"Edit"})]}),u.jsxs("div",{className:"h-28 overflow-x-auto overflow-y-hidden bg-white no-scrollbar flex items-center",children:[T==="add"&&u.jsxs("div",{className:"flex items-center gap-4 px-6 min-w-max",children:[u.jsxs("button",{onClick:()=>{var O;return(O=D.current)==null?void 0:O.click()},className:"h-20 w-20 bg-slate-50 hover:bg-slate-100 rounded-xl text-slate-700 font-bold flex flex-col items-center justify-center gap-2 border border-slate-200 transition-all shrink-0",children:[u.jsx(Nl,{className:"w-6 h-6 text-slate-900"}),u.jsx("span",{className:"text-[10px] uppercase",children:"Upload"})]}),u.jsx("input",{type:"file",ref:D,onChange:xe,className:"hidden",accept:"image/*"}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>Se($("circle")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(hN,{className:"w-6 h-6 text-slate-700"})}),u.jsx("button",{onClick:()=>Se($("square")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(fN,{className:"w-6 h-6 text-slate-700"})}),u.jsx("button",{onClick:()=>Se($("triangle")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(pN,{className:"w-6 h-6 text-slate-700"})}),u.jsx("button",{onClick:()=>Se($("heart")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(gN,{className:"w-6 h-6 text-red-500"})}),u.jsx("button",{onClick:()=>Se($("star")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(mN,{className:"w-6 h-6 text-slate-900"})}),u.jsx("button",{onClick:()=>Se($("text")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors font-bold text-xs text-slate-700",children:"TXT"})]})]}),T==="canvas"&&u.jsxs("div",{className:"flex items-center gap-6 px-6 min-w-max h-full",children:[u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl flex flex-col justify-center gap-1 w-48 shrink-0 border border-slate-100",children:[u.jsx("div",{className:"flex justify-between text-[10px] text-slate-500 font-bold uppercase",children:u.jsxs("span",{children:["Slides (",e,")"]})}),u.jsx("input",{type:"range",min:"2",max:"10",value:e,onChange:O=>n(parseInt(O.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>s("square"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${r==="square"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Square 1:1"}),u.jsx("button",{onClick:()=>s("portrait"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${r==="portrait"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Portrait 4:5"})]}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100 flex items-center justify-between gap-3 shrink-0",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Background"}),u.jsx("input",{type:"color",value:L,onChange:O=>U(O.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-0"})]})]}),T==="edit"&&m&&u.jsxs("div",{className:"flex items-center gap-5 px-6 min-w-max h-full",children:[u.jsxs("div",{className:"flex flex-col gap-1 items-center shrink-0",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Layers"}),u.jsxs("div",{className:"flex gap-1 bg-slate-50 border border-slate-100 p-1 rounded-lg",children:[u.jsx("button",{onClick:()=>se("front"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Bring to Front",children:u.jsx(kv,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>se("forward"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Step Forward",children:u.jsx(pT,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>se("backward"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Step Backward",children:u.jsx(mT,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>se("back"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Send to Back",children:u.jsx(kv,{className:"w-4 h-4 opacity-50"})})]})]}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"flex flex-col gap-1 w-40 shrink-0",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Size"}),u.jsx("input",{type:"range",min:"10",max:"250",defaultValue:"100",onChange:O=>Be({width:le().originalAspectRatio*100*(parseInt(O.target.value)/10),height:le().originalAspectRatio*100*(parseInt(O.target.value)/10)/le().currentAspectRatio},!1),onMouseUp:()=>ce(i),onTouchEnd:()=>ce(i),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"})]}),u.jsxs("div",{className:"flex flex-col gap-1 shrink-0",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Mask"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>Be({maskShape:"none",borderRadius:0}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((ve=le())==null?void 0:ve.maskShape)==="none"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Box"}),u.jsx("button",{onClick:()=>Be({maskShape:"circle"}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((Pe=le())==null?void 0:Pe.maskShape)==="circle"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Circle"}),u.jsx("button",{onClick:()=>Be({maskShape:"square",borderRadius:20}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((De=le())==null?void 0:De.maskShape)==="square"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Round"})]})]}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"flex flex-col gap-1 w-40 shrink-0",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Border"}),u.jsx("input",{type:"color",value:(pt=le())==null?void 0:pt.borderColor,onChange:O=>Be({borderColor:O.target.value}),className:"w-4 h-4 rounded bg-transparent border-0 cursor-pointer"})]}),u.jsx("input",{type:"range",min:"0",max:"20",value:(rn=le())==null?void 0:rn.borderWidth,onChange:O=>Be({borderWidth:parseInt(O.target.value)}),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900"})]}),u.jsxs("button",{onClick:()=>{var O;return Be({isGrayscale:!((O=le())!=null&&O.isGrayscale)})},className:`h-12 px-3 rounded-lg text-[10px] font-bold border transition-colors flex flex-col items-center justify-center gap-1 shrink-0 ${(Ct=le())!=null&&Ct.isGrayscale?"bg-slate-100 text-slate-900 border-slate-300":"bg-white border-slate-200 text-slate-400 hover:border-slate-300"}`,children:[u.jsx(yN,{className:"w-4 h-4"}),"B&W"]})]})]})]})]})},p8=t=>{const e=t.toUpperCase().split("").map(n=>127397+n.charCodeAt(0));return String.fromCodePoint(...e)},m8=({data:t})=>{if(!t||t.length===0)return u.jsx("div",{className:"h-40 flex items-center justify-center text-slate-300",children:"No Data"});const e=150,n=600,r=20,s=Math.max(...t.map(o=>o.visitors),10),i=t.map((o,a)=>{const l=r+a/(t.length-1)*(n-2*r),c=e-r-o.visitors/s*(e-2*r);return`${l},${c}`}).join(" ");return u.jsxs("div",{className:"w-full overflow-hidden",children:[u.jsxs("svg",{viewBox:`0 0 ${n} ${e}`,className:"w-full h-auto",children:[u.jsx("line",{x1:r,y1:r,x2:n-r,y2:r,stroke:"#f1f5f9",strokeWidth:"1"}),u.jsx("line",{x1:r,y1:e/2,x2:n-r,y2:e/2,stroke:"#f1f5f9",strokeWidth:"1"}),u.jsx("line",{x1:r,y1:e-r,x2:n-r,y2:e-r,stroke:"#f1f5f9",strokeWidth:"1"}),u.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"3",points:i,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((o,a)=>{const l=r+a/(t.length-1)*(n-2*r),c=e-r-o.visitors/s*(e-2*r);return u.jsxs("g",{className:"group",children:[u.jsx("circle",{cx:l,cy:c,r:"4",fill:"white",stroke:"#3b82f6",strokeWidth:"2"}),u.jsx("foreignObject",{x:l-25,y:c-40,width:"50",height:"30",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("div",{className:"bg-slate-800 text-white text-[9px] rounded py-1 text-center font-bold",children:o.visitors})})]},a)})]}),u.jsx("div",{className:"flex justify-between px-2 mt-2 text-[10px] text-slate-400 font-medium",children:t.map((o,a)=>u.jsx("span",{children:o.date.slice(5)},a))})]})},g8=()=>{const[t,e]=F.useState(!0),[n,r]=F.useState(null),[s,i]=F.useState([]),o=async()=>{e(!0);const[m,g]=await Promise.all([sj(),tj()]);r(m),i(g),e(!1)};F.useEffect(()=>{o()},[]);const a=m=>new Date(m).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});if(t)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"})});if(!n)return u.jsx("div",{className:"p-10 text-center",children:"Failed to load data."});const l=n.dailyStats.length>0?n.dailyStats[n.dailyStats.length-1].visitors:0,c=n.dailyStats.length>1?n.dailyStats[n.dailyStats.length-2].visitors:0,d=c===0?100:Math.round((l-c)/c*100);return u.jsx("div",{className:"min-h-screen bg-slate-50 p-6 md:p-10 animate-fade-in",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-10 gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Dashboard Overview"}),u.jsx("p",{className:"text-slate-500",children:"Real-time insight & system health."})]}),u.jsxs("button",{onClick:o,className:"bg-white border border-slate-200 text-slate-600 px-4 py-2 rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-slate-50 hover:text-slate-900 transition-colors shadow-sm",children:[u.jsx(Zd,{className:"w-4 h-4"})," Refresh Data"]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-2xl",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),d!==0&&u.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${d>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[d>0?u.jsx(pT,{className:"w-3 h-3"}):u.jsx(mT,{className:"w-3 h-3"}),Math.abs(d),"%"]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-black text-slate-900",children:n.totalVisitors}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Total Visitors (7 Days)"})]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[u.jsx("div",{className:"flex justify-between items-start",children:u.jsx("div",{className:"p-3 bg-slate-900 text-white rounded-2xl",children:u.jsx(cd,{className:"w-6 h-6"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-black text-slate-900",children:s.length}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Private Messages"})]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[u.jsx("div",{className:"flex justify-between items-start",children:u.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-2xl",children:u.jsx(Jl,{className:"w-6 h-6"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-black text-slate-900",children:n.totalErrors}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"System Errors (7 Days)"})]})]})]}),u.jsx("div",{className:"mb-10",children:u.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between",children:[u.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[u.jsx(cd,{className:"w-5 h-5 text-slate-900"})," Inbox Rahasia (Private)"]}),u.jsx("span",{className:"text-xs font-bold bg-slate-200 text-slate-600 px-2 py-1 rounded-full",children:s.length})]}),u.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:s.length===0?u.jsx("div",{className:"p-12 text-center text-slate-400 text-sm",children:"Belum ada pesan rahasia masuk."}):u.jsx("div",{className:"divide-y divide-slate-50",children:s.map(m=>u.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[u.jsx("div",{className:"flex justify-between items-start mb-2",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-bold bg-slate-900 text-white px-2 py-0.5 rounded",children:"Anonim"}),u.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:a(m.timestamp)})]})}),u.jsx("p",{className:"text-slate-700 text-sm leading-relaxed whitespace-pre-wrap",children:m.content})]},m.id))})})]})}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Traffic Trend"}),u.jsx(m8,{data:n.dailyStats})]}),u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"System Logs"}),u.jsx("div",{className:"space-y-4",children:n.logs.length===0?u.jsx("p",{className:"text-slate-400 text-sm italic",children:"No logs recorded."}):n.logs.map(m=>u.jsxs("div",{className:"flex gap-4 items-start p-3 hover:bg-slate-50 rounded-xl transition-colors border-b border-slate-50 last:border-0",children:[u.jsx("div",{className:`w-2 h-2 rounded-full mt-2 shrink-0 ${m.type==="error"?"bg-red-500":"bg-blue-500"}`}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:m.message}),u.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1",children:new Date(m.timestamp).toLocaleString()}),m.details&&u.jsx("p",{className:"text-xs text-slate-400 mt-1 truncate",children:m.details})]})]},m.id))})]})]}),u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[u.jsx(ud,{className:"w-5 h-5 text-slate-400"}),u.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Demographics"})]}),u.jsx("div",{className:"space-y-5",children:n.geoStats.length===0?u.jsx("p",{className:"text-slate-400 text-sm italic",children:"No data yet."}):n.geoStats.map((m,g)=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-700 mb-2",children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:p8(m.country)})," ",m.country]}),u.jsx("span",{children:m.count})]}),u.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2 overflow-hidden",children:u.jsx("div",{className:"bg-slate-900 h-2 rounded-full",style:{width:`${m.count/n.totalVisitors*100}%`}})})]},g))})]}),u.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2rem] text-white shadow-xl relative overflow-hidden",children:[u.jsxs("div",{className:"relative z-10",children:[u.jsx("h3",{className:"text-lg font-bold mb-2",children:"System Status"}),u.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),u.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"All Systems Operational"})]}),u.jsxs("div",{className:"space-y-2 text-xs text-slate-500",children:[u.jsx("p",{children:"Database: Connected"}),u.jsx("p",{children:"API Latency: ~120ms"}),u.jsx("p",{children:"Version: v2.4.0 (Beta)"})]})]}),u.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-blue-600/20 rounded-full blur-3xl pointer-events-none"})]})]})]})]})})},y8=()=>{const t=fs();return F.useEffect(()=>{window.scrollTo(0,0)},[]),u.jsx("div",{className:"min-h-screen bg-white text-slate-900 animate-fade-in pb-20 pt-12",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6",children:[u.jsxs("button",{onClick:()=>t(-1),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:u.jsx(ss,{className:"w-4 h-4"})}),"Kembali"]}),u.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-2 tracking-tight",children:"Kebijakan Privasi"}),u.jsxs("p",{className:"text-slate-500 text-lg font-medium mb-12",children:["Terakhir diperbarui: ",new Date().getFullYear()]}),u.jsxs("div",{className:"prose prose-slate max-w-none prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-600 prose-p:leading-relaxed",children:[u.jsxs("p",{children:["Di ",u.jsx("strong",{children:"Fanra AI Studio"})," (irfanrizkiaditri.site), privasi pengunjung adalah prioritas utama. Dokumen Kebijakan Privasi ini menjabarkan jenis informasi yang dikumpulkan dan dicatat oleh Fanra AI Studio serta bagaimana kami menggunakannya."]}),u.jsx("h3",{children:"1. Informasi yang Kami Kumpulkan"}),u.jsx("p",{children:"Saat Anda mendaftar atau masuk menggunakan Google (Google Auth), kami hanya menyimpan informasi dasar yang disediakan oleh layanan tersebut untuk keperluan identifikasi pengguna, yaitu:"}),u.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[u.jsx("li",{children:"Nama Lengkap (Display Name)"}),u.jsx("li",{children:"Alamat Email"}),u.jsx("li",{children:"Foto Profil (Avatar)"}),u.jsx("li",{children:"ID Pengguna Unik (UID)"})]}),u.jsxs("p",{children:["Kami ",u.jsx("strong",{children:"tidak"})," memiliki akses ke kata sandi (password) akun Google Anda. Autentikasi dikelola sepenuhnya secara aman oleh Google/Firebase."]}),u.jsx("h3",{children:"2. Bagaimana Kami Menggunakan Informasi Anda"}),u.jsx("p",{children:"Informasi yang kami kumpulkan digunakan untuk:"}),u.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[u.jsx("li",{children:"Menyediakan akses ke fitur Fanra AI Studio."}),u.jsx("li",{children:"Menyimpan riwayat chat dan preferensi pengaturan Anda (misalnya: API Key yang Anda simpan secara lokal)."}),u.jsx("li",{children:"Mencegah aktivitas penipuan atau penyalahgunaan sistem."})]}),u.jsx("h3",{children:"3. Data API Key Pribadi"}),u.jsx("p",{children:"Jika Anda memasukkan API Key pribadi (misalnya Gemini API Key, Remove.bg API Key) ke dalam pengaturan aplikasi:"}),u.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[u.jsx("li",{children:"Key tersebut disimpan secara lokal di browser Anda atau di database terenkripsi milik User ID Anda sendiri."}),u.jsx("li",{children:"Kami tidak menggunakan Key Anda untuk kepentingan di luar akun Anda."}),u.jsx("li",{children:"Anda bertanggung jawab penuh atas penggunaan kuota dan keamanan Key tersebut."})]}),u.jsx("h3",{children:"4. File Log & Analitik"}),u.jsx("p",{children:"Fanra AI Studio mengikuti prosedur standar menggunakan file log. File-file ini mencatat pengunjung ketika mereka mengunjungi situs web. Informasi yang dikumpulkan termasuk alamat protokol internet (IP), jenis browser, Penyedia Layanan Internet (ISP), tanggal dan waktu, serta halaman rujukan/keluar. Ini tidak terkait dengan informasi apa pun yang dapat diidentifikasi secara pribadi. Tujuannya adalah untuk menganalisis tren, mengelola situs, dan melacak pergerakan pengguna di situs web."}),u.jsx("h3",{children:"5. Cookies"}),u.jsx("p",{children:"Seperti situs web lainnya, Fanra AI Studio menggunakan 'cookies'. Cookies ini digunakan untuk menyimpan informasi termasuk preferensi pengunjung, dan halaman di situs web yang diakses atau dikunjungi pengunjung. Informasi tersebut digunakan untuk mengoptimalkan pengalaman pengguna dengan menyesuaikan konten halaman web kami."}),u.jsx("h3",{children:"6. Pihak Ketiga"}),u.jsx("p",{children:"Aplikasi ini menggunakan layanan pihak ketiga seperti Google Analytics, Firebase, dan OpenRouter/Gemini API. Masing-masing layanan ini memiliki kebijakan privasinya sendiri. Kami menyarankan Anda untuk berkonsultasi dengan Kebijakan Privasi masing-masing dari server iklan pihak ketiga ini untuk informasi lebih rinci."}),u.jsx("h3",{children:"7. Persetujuan"}),u.jsx("p",{children:"Dengan menggunakan situs web kami, Anda dengan ini menyetujui Kebijakan Privasi kami dan menyetujui Syarat dan Ketentuannya."})]}),u.jsx("div",{className:"mt-12 pt-8 border-t border-slate-200",children:u.jsx("p",{className:"text-sm text-slate-400",children:"Jika Anda memiliki pertanyaan tambahan atau memerlukan informasi lebih lanjut tentang Kebijakan Privasi kami, jangan ragu untuk menghubungi kami melalui email di footer website ini."})})]})})},v8=()=>{const t=fs();return F.useEffect(()=>{window.scrollTo(0,0)},[]),u.jsx("div",{className:"min-h-screen bg-white text-slate-900 animate-fade-in pb-20 pt-12",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6",children:[u.jsxs("button",{onClick:()=>t(-1),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:u.jsx(ss,{className:"w-4 h-4"})}),"Kembali"]}),u.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-2 tracking-tight",children:"Syarat & Ketentuan"}),u.jsxs("p",{className:"text-slate-500 text-lg font-medium mb-12",children:["Effective Date: ",new Date().getFullYear()]}),u.jsxs("div",{className:"prose prose-slate max-w-none prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-600 prose-p:leading-relaxed",children:[u.jsxs("p",{children:["Selamat datang di ",u.jsx("strong",{children:"Fanra AI Studio"}),". Dengan mengakses situs web ini (irfanrizkiaditri.site), Anda setuju untuk terikat oleh syarat dan ketentuan penggunaan ini, semua hukum dan peraturan yang berlaku, dan setuju bahwa Anda bertanggung jawab untuk mematuhi hukum setempat yang berlaku."]}),u.jsx("h3",{children:"1. Lisensi Penggunaan"}),u.jsx("p",{children:"Izin diberikan untuk menggunakan materi (informasi atau perangkat lunak) di situs web Fanra AI Studio untuk penggunaan pribadi dan non-komersial sementara saja. Ini adalah pemberian lisensi, bukan transfer hak milik, dan di bawah lisensi ini Anda tidak boleh:"}),u.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[u.jsx("li",{children:"Memodifikasi atau menyalin materi secara ilegal;"}),u.jsx("li",{children:"Menggunakan materi untuk tujuan komersial apa pun tanpa izin tertulis;"}),u.jsx("li",{children:"Mencoba mendekompilasi atau merekayasa balik perangkat lunak apa pun yang terdapat di situs web Fanra AI Studio;"}),u.jsx("li",{children:"Menghapus hak cipta atau notasi kepemilikan lainnya dari materi; atau"}),u.jsx("li",{children:'Mentransfer materi ke orang lain atau "mencerminkan" materi di server lain.'})]}),u.jsx("h3",{children:"2. Penafian (Disclaimer)"}),u.jsx("p",{children:'Materi di situs web Fanra AI Studio disediakan "sebagaimana adanya". Fanra AI Studio tidak memberikan jaminan, tersurat maupun tersirat, dan dengan ini menafikan dan meniadakan semua jaminan lainnya. Selanjutnya, Fanra AI Studio tidak menjamin atau membuat pernyataan apa pun mengenai keakuratan, kemungkinan hasil, atau keandalan penggunaan materi di situs webnya atau yang berkaitan dengan materi tersebut.'}),u.jsxs("p",{children:[u.jsx("strong",{children:"Penting tentang AI:"})," Konten yang dihasilkan oleh Kecerdasan Buatan (Gemini, dll) mungkin tidak selalu akurat. Pengguna diharapkan memverifikasi informasi penting secara mandiri."]}),u.jsx("h3",{children:"3. Batasan"}),u.jsx("p",{children:"Dalam keadaan apa pun Fanra AI Studio atau pemasoknya tidak bertanggung jawab atas kerusakan apa pun (termasuk, tanpa batasan, kerusakan karena hilangnya data atau keuntungan, atau karena gangguan bisnis) yang timbul dari penggunaan atau ketidakmampuan untuk menggunakan materi di situs web Fanra AI Studio."}),u.jsx("h3",{children:"4. Akurasi Materi"}),u.jsx("p",{children:"Materi yang muncul di situs web Fanra AI Studio dapat mencakup kesalahan teknis, tipografi, atau fotografi. Fanra AI Studio tidak menjamin bahwa materi apa pun di situs webnya akurat, lengkap, atau terkini. Fanra AI Studio dapat membuat perubahan pada materi yang terdapat di situs webnya kapan saja tanpa pemberitahuan."}),u.jsx("h3",{children:"5. Tautan"}),u.jsx("p",{children:"Fanra AI Studio belum meninjau semua situs yang tertaut ke situs webnya dan tidak bertanggung jawab atas konten situs tertaut tersebut. Pencantuman tautan apa pun tidak menyiratkan pengesahan oleh Fanra AI Studio terhadap situs tersebut. Penggunaan situs web tertaut tersebut merupakan risiko pengguna sendiri."}),u.jsx("h3",{children:"6. Modifikasi"}),u.jsx("p",{children:"Fanra AI Studio dapat merevisi persyaratan layanan ini untuk situs webnya kapan saja tanpa pemberitahuan. Dengan menggunakan situs web ini, Anda setuju untuk terikat oleh versi Syarat dan Ketentuan Penggunaan yang berlaku saat itu."})]})]})})},x8=({onLogout:t})=>{const e=fs(),[n,r]=F.useState(!1),[s,i]=F.useState({x:20,y:window.innerHeight-80}),[o,a]=F.useState(!1),l=F.useRef({x:0,y:0}),c=F.useRef({x:0,y:0}),d=F.useRef(null);F.useEffect(()=>{const v=T=>{if(!o)return;T.preventDefault();const R=T.clientX-l.current.x,L=T.clientY-l.current.y,U=Math.max(10,Math.min(window.innerWidth-60,c.current.x+R)),S=Math.max(10,Math.min(window.innerHeight-60,c.current.y+L));i({x:U,y:S})},E=()=>{a(!1)};return o&&(window.addEventListener("mousemove",v),window.addEventListener("mouseup",E)),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",E)}},[o]);const m=v=>{n||(a(!0),l.current={x:v.clientX,y:v.clientY},c.current={...s})},g=v=>{n||(a(!0),l.current={x:v.touches[0].clientX,y:v.touches[0].clientY},c.current={...s})},y=v=>{if(!o)return;const E=v.touches[0].clientX-l.current.x,T=v.touches[0].clientY-l.current.y,R=Math.max(10,Math.min(window.innerWidth-60,c.current.x+E)),L=Math.max(10,Math.min(window.innerHeight-60,c.current.y+T));i({x:R,y:L})},w=v=>{Math.sqrt(Math.pow(v.clientX-l.current.x,2)+Math.pow(v.clientY-l.current.y,2))<5&&r(!n)},x=()=>{nw(),alert("Cache teks di memori telah dihapus. Halaman akan dimuat ulang."),window.location.reload()},_=()=>{confirm("Yakin ingin reset total? Ini akan menghapus semua pengaturan lokal dan login.")&&(localStorage.clear(),nw(),window.location.reload())};return u.jsxs(u.Fragment,{children:[n&&u.jsx("div",{className:"fixed inset-0 z-[998]",onClick:()=>r(!1)}),u.jsx("div",{className:"fixed z-[999]",style:{left:s.x,top:s.y},children:u.jsxs("div",{className:"relative",children:[u.jsx("button",{onMouseDown:m,onClick:w,onTouchStart:g,onTouchMove:y,onTouchEnd:()=>a(!1),className:`w-12 h-12 rounded-full flex items-center justify-center shadow-xl transition-all duration-200 cursor-grab active:cursor-grabbing ${n?"bg-slate-900 text-white rotate-90 scale-110":"bg-white text-slate-700 border border-slate-200 hover:scale-105"}`,style:{touchAction:"none"},children:u.jsx(Lp,{className:"w-6 h-6"})}),n&&u.jsxs("div",{ref:d,className:"absolute bottom-16 left-0 bg-white/90 backdrop-blur-md border border-slate-200 rounded-2xl shadow-2xl p-2 w-60 flex flex-col gap-1 animate-fade-in-up origin-bottom-left",children:[u.jsx("div",{className:"px-3 py-2 border-b border-slate-100 mb-1",children:u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Admin Tools"})}),u.jsxs("button",{onClick:()=>{e("/dashboard"),r(!1)},className:"flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-900 hover:bg-slate-100 rounded-xl transition-colors text-left",children:[u.jsx("div",{className:"p-1.5 bg-slate-200 text-slate-700 rounded-lg",children:u.jsx(lN,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-xs",children:"Open Dashboard"}),u.jsx("span",{className:"block text-[9px] text-slate-400",children:"View analytics & charts"})]})]}),u.jsx("div",{className:"h-px bg-slate-100 mx-2 my-1"}),u.jsxs("button",{onClick:x,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:text-blue-600 rounded-xl transition-colors text-left",children:[u.jsx("div",{className:"p-1.5 bg-blue-50 text-blue-500 rounded-lg",children:u.jsx(Zd,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-xs",children:"Hapus Cache"}),u.jsx("span",{className:"block text-[9px] text-slate-400",children:"Fix teks nyangkut"})]})]}),u.jsxs("button",{onClick:_,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-red-50 hover:text-red-600 rounded-xl transition-colors text-left",children:[u.jsx("div",{className:"p-1.5 bg-red-50 text-red-500 rounded-lg",children:u.jsx(Pr,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-xs",children:"Reset Total"}),u.jsx("span",{className:"block text-[9px] text-slate-400",children:"Hapus data lokal"})]})]})]})]})})]})},w8="https://cdn-icons-png.flaticon.com/128/16739/16739754.png",_8=()=>{const[t,e]=F.useState([]),[n,r]=F.useState(!1),[s,i]=F.useState(""),o=F.useRef(null),a=F.useRef(null);return F.useEffect(()=>{const l=c=>{const d=c.detail.message;e(m=>m[m.length-1]===d?m:[...m,d])};return window.addEventListener("fanra-toast",l),()=>window.removeEventListener("fanra-toast",l)},[]),F.useEffect(()=>{if(!n&&t.length>0&&!s){const l=t[0];i(l),requestAnimationFrame(()=>{r(!0)}),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{r(!1)},3e3)}},[t,n,s]),F.useEffect(()=>{!n&&s&&(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{e(l=>l.slice(1)),i("")},700))},[n,s]),F.useEffect(()=>()=>{o.current&&clearTimeout(o.current),a.current&&clearTimeout(a.current)},[]),s?u.jsx("div",{className:"fixed top-0 left-0 right-0 z-[9999] flex justify-center pointer-events-none p-4",children:u.jsxs("div",{className:`
            bg-white/90 backdrop-blur-md 
            border border-slate-200 
            shadow-[0_8px_30px_rgb(0,0,0,0.12)] 
            rounded-full 
            pl-3 pr-6 py-3
            flex items-center gap-4
            min-w-[280px] max-w-[90vw] 
            pointer-events-auto 
            transform transition-all duration-700 cubic-bezier(0.23, 1, 0.32, 1)
            will-change-transform
            ${n?"translate-y-4 opacity-100":"-translate-y-[200%] opacity-0"}
        `,children:[u.jsx("div",{className:"w-10 h-10 bg-slate-50 rounded-full flex items-center justify-center shrink-0 shadow-inner border border-slate-100",children:u.jsx("img",{src:w8,alt:"Notif",className:"w-6 h-6 object-contain"})}),u.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[u.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"Fanra Studio"}),u.jsx("p",{className:"text-sm font-bold text-slate-800 leading-tight truncate",children:s})]})]})}):null},b8=({isOpen:t,onClose:e,onSuccess:n})=>{const[r,s]=F.useState(["","","","",""]),[i,o]=F.useState(!1),a=F.useRef([]);F.useEffect(()=>{t&&(s(["","","","",""]),o(!1),setTimeout(()=>{var d;return(d=a.current[0])==null?void 0:d.focus()},100))},[t]);const l=(d,m)=>{var y;if(!/^\d*$/.test(m))return;const g=[...r];g[d]=m,s(g),o(!1),m&&d<4&&((y=a.current[d+1])==null||y.focus()),g.every(w=>w!=="")&&(g.join("")==="47326"?(n(),e()):(o(!0),setTimeout(()=>{var x;s(["","","","",""]),(x=a.current[0])==null||x.focus()},500)))},c=(d,m)=>{var g;m.key==="Backspace"&&!r[d]&&d>0&&((g=a.current[d-1])==null||g.focus())};return t?u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/80 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-2xl max-w-sm w-full relative overflow-hidden",children:[u.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-800",children:""}),u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-900 rounded-full flex items-center justify-center text-white mb-6 shadow-lg shadow-slate-900/30",children:u.jsx(Rl,{className:"w-5 h-5"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Admin Access"}),u.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Enter secure PIN to continue"}),u.jsx("div",{className:"flex gap-3 mb-6",children:r.map((d,m)=>u.jsx("input",{ref:g=>{a.current[m]=g},type:"password",maxLength:1,value:d,onChange:g=>l(m,g.target.value),onKeyDown:g=>c(m,g),className:`w-10 h-12 border-2 rounded-lg text-center text-xl font-bold bg-slate-50 focus:bg-white transition-all outline-none ${i?"border-red-500 text-red-500 shake":"border-slate-200 focus:border-slate-900 text-slate-900"}`,autoComplete:"off",inputMode:"numeric"},m))}),i&&u.jsx("p",{className:"text-xs font-bold text-red-500 animate-pulse",children:"Access Denied"})]})]})}):null},ar=({children:t,isAdmin:e})=>u.jsxs("div",{className:"min-h-screen flex flex-col font-sans bg-[#fafafa] relative overflow-x-hidden",children:[u.jsx(aj,{isAdmin:e}),u.jsx("main",{className:"flex-grow pt-24 pb-12 animate-fade-in-up",children:t}),u.jsx(xj,{}),u.jsx(wj,{}),u.jsxs("footer",{className:"bg-slate-950 text-white pt-32 pb-12 px-6 overflow-hidden relative mt-12",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-20 pointer-events-none mix-blend-overlay",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),u.jsx("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"20px 20px",maskImage:"linear-gradient(to bottom, transparent, black)"}}),u.jsx("div",{className:"absolute top-0 left-0 w-full overflow-hidden leading-[0] z-20",children:u.jsx("svg",{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",className:"relative block w-full h-[50px] md:h-[90px] fill-[#fafafa]",children:u.jsx("path",{d:"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"})})}),u.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16",children:[u.jsxs("div",{className:"lg:col-span-2",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsx(Oo,{className:"w-12 h-12",variant:"light"}),u.jsx(ut,{id:"footer_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:e,tag:"h2",className:"text-2xl font-black tracking-tighter uppercase"})]}),u.jsx(ut,{id:"footer_brand_desc",defaultText:"Seorang mahasiswa ITERA angkatan 2025 yang hobi mengulik kode dan berbagi cerita lewat ruang digital.",isAdmin:e,tag:"p",multiline:!0,className:"text-slate-500 text-sm max-w-sm leading-relaxed font-medium"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Communication"}),u.jsxs("a",{href:"mailto:irfanrizkiaditri@gmail.com",className:"text-sm font-bold text-slate-200 hover:text-white transition-colors flex items-center gap-3 group",children:[u.jsx(bN,{className:"w-5 h-5 group-hover:scale-110 transition-transform text-slate-400 group-hover:text-white"}),u.jsx(ut,{id:"footer_email",defaultText:"irfanrizkiaditri@gmail.com",isAdmin:e,tag:"span"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Social Discovery"}),u.jsxs("div",{className:"flex gap-6",children:[u.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:u.jsx(wN,{className:"w-6 h-6"})}),u.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:u.jsx(_N,{className:"w-6 h-6"})}),u.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:u.jsx(_T,{className:"w-6 h-6"})})]})]})]}),u.jsxs("div",{className:"pt-8 border-t border-slate-900 flex flex-col md:flex-row justify-between items-center gap-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 md:gap-8",children:[u.jsxs("p",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:[" ",new Date().getFullYear(),"  ",u.jsx(ut,{id:"footer_copyright",defaultText:"PERSPECTIVE OF FANRA",isAdmin:e,tag:"span"})]}),u.jsxs("div",{className:"flex gap-6",children:[u.jsx(rl,{to:"/privacy",className:"text-[9px] font-bold text-slate-500 hover:text-white uppercase tracking-widest transition-colors",children:"Privacy Policy"}),u.jsx(rl,{to:"/terms",className:"text-[9px] font-bold text-slate-500 hover:text-white uppercase tracking-widest transition-colors",children:"Terms of Service"})]})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("span",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:u.jsx(ut,{id:"footer_location",defaultText:"Sumatera, Indonesia",isAdmin:e,tag:"span"})})})]})]}),u.jsx("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] opacity-[0.02] pointer-events-none translate-x-20 -translate-y-20",children:u.jsx(Oo,{className:"w-full h-full",variant:"light"})})]})]}),E8=()=>{const{pathname:t}=Bi();return F.useEffect(()=>{window.scrollTo(0,0)},[t]),null},T8=()=>{const[t,e]=F.useState(!0),[n,r]=F.useState(!1),[s,i]=F.useState(!1);F.useEffect(()=>{rj(),localStorage.removeItem("fanra_admin_auth")},[]),F.useEffect(()=>{const l=c=>{if(c.key.toLowerCase()==="f"){const d=c.target;if(d.tagName==="INPUT"||d.tagName==="TEXTAREA"||d.tagName==="SELECT"||d.isContentEditable)return;c.preventDefault(),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(g=>{console.error(`Error attempting to enable fullscreen: ${g.message}`)})}};return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}},[]);const o=()=>{window.scrollTo(0,0),e(!1)},a=()=>{i(!0)};return u.jsxs(q2,{children:[u.jsx(E8,{}),u.jsx(_8,{}),u.jsx(b8,{isOpen:n,onClose:()=>r(!1),onSuccess:a}),s&&u.jsx(x8,{onLogout:()=>i(!1)}),t&&u.jsx(dj,{onComplete:o,onTriggerAdmin:()=>r(!0)}),u.jsxs(U2,{children:[u.jsx(yn,{path:"/",element:u.jsx(ar,{isAdmin:s,children:u.jsx(fj,{onTriggerAdmin:()=>r(!0),isAdmin:s})})}),u.jsx(yn,{path:"/projects",element:u.jsx(ar,{isAdmin:s,children:u.jsx(iw,{isAdmin:s})})}),u.jsx(yn,{path:"/projects/:projectId",element:u.jsx(ar,{isAdmin:s,children:u.jsx(iw,{isAdmin:s})})}),u.jsx(yn,{path:"/blog",element:u.jsx(ar,{isAdmin:s,children:u.jsx(ow,{isAdmin:s})})}),u.jsx(yn,{path:"/blog/:id",element:u.jsx(ar,{isAdmin:s,children:u.jsx(ow,{isAdmin:s})})}),u.jsx(yn,{path:"/gallery",element:u.jsx(ar,{isAdmin:s,children:u.jsx(gj,{isAdmin:s})})}),u.jsx(yn,{path:"/music",element:u.jsx(ar,{isAdmin:s,children:u.jsx(yj,{isAdmin:s})})}),u.jsx(yn,{path:"/messages",element:u.jsx(ar,{isAdmin:s,children:u.jsx(vj,{isAdmin:s})})}),u.jsx(yn,{path:"/dashboard",element:u.jsx(ar,{isAdmin:s,children:u.jsx(g8,{})})}),u.jsx(yn,{path:"/privacy",element:u.jsx(ar,{isAdmin:s,children:u.jsx(y8,{})})}),u.jsx(yn,{path:"/terms",element:u.jsx(ar,{isAdmin:s,children:u.jsx(v8,{})})}),u.jsx(yn,{path:"/studio",element:u.jsx(o8,{isAdmin:s,onExit:()=>window.location.href="/#/projects"})}),u.jsx(yn,{path:"/panorama",element:u.jsx(f8,{onExit:()=>window.location.href="/#/projects"})}),u.jsx(yn,{path:"*",element:u.jsx(F2,{to:"/",replace:!0})})]})]})},ck=document.getElementById("root");if(!ck)throw new Error("Could not find root element to mount to");const I8=Uf.createRoot(ck);I8.render(u.jsx(cl.StrictMode,{children:u.jsx(T8,{})}));

(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Rr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Of(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wx={exports:{}},yc={},_x={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ja=Symbol.for("react.element"),y1=Symbol.for("react.portal"),v1=Symbol.for("react.fragment"),x1=Symbol.for("react.strict_mode"),w1=Symbol.for("react.profiler"),_1=Symbol.for("react.provider"),E1=Symbol.for("react.context"),T1=Symbol.for("react.forward_ref"),b1=Symbol.for("react.suspense"),S1=Symbol.for("react.memo"),I1=Symbol.for("react.lazy"),gg=Symbol.iterator;function C1(t){return t===null||typeof t!="object"?null:(t=gg&&t[gg]||t["@@iterator"],typeof t=="function"?t:null)}var Ex={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Tx=Object.assign,bx={};function yo(t,e,n){this.props=t,this.context=e,this.refs=bx,this.updater=n||Ex}yo.prototype.isReactComponent={};yo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sx(){}Sx.prototype=yo.prototype;function zf(t,e,n){this.props=t,this.context=e,this.refs=bx,this.updater=n||Ex}var Gf=zf.prototype=new Sx;Gf.constructor=zf;Tx(Gf,yo.prototype);Gf.isPureReactComponent=!0;var yg=Array.isArray,Ix=Object.prototype.hasOwnProperty,Hf={current:null},Cx={key:!0,ref:!0,__self:!0,__source:!0};function kx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ix.call(e,r)&&!Cx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ja,type:t,key:i,ref:o,props:s,_owner:Hf.current}}function k1(t,e){return{$$typeof:Ja,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $f(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ja}function A1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vg=/\/+/g;function _d(t,e){return typeof t=="object"&&t!==null&&t.key!=null?A1(""+t.key):e.toString(36)}function ou(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ja:case y1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+_d(o,0):r,yg(s)?(n="",t!=null&&(n=t.replace(vg,"$&/")+"/"),ou(s,e,n,"",function(c){return c})):s!=null&&($f(s)&&(s=k1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(vg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",yg(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+_d(i,a);o+=ou(i,e,n,l,s)}else if(l=C1(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+_d(i,a++),o+=ou(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rl(t,e,n){if(t==null)return t;var r=[],s=0;return ou(t,r,"","",function(i){return e.call(n,i,s++)}),r}function N1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wn={current:null},au={transition:null},R1={ReactCurrentDispatcher:wn,ReactCurrentBatchConfig:au,ReactCurrentOwner:Hf};function Ax(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:Rl,forEach:function(t,e,n){Rl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rl(t,function(){e++}),e},toArray:function(t){return Rl(t,function(e){return e})||[]},only:function(t){if(!$f(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=yo;Ue.Fragment=v1;Ue.Profiler=w1;Ue.PureComponent=zf;Ue.StrictMode=x1;Ue.Suspense=b1;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R1;Ue.act=Ax;Ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Tx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Hf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Ix.call(e,l)&&!Cx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ja,type:t.type,key:s,ref:i,props:r,_owner:o}};Ue.createContext=function(t){return t={$$typeof:E1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_1,_context:t},t.Consumer=t};Ue.createElement=kx;Ue.createFactory=function(t){var e=kx.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:T1,render:t}};Ue.isValidElement=$f;Ue.lazy=function(t){return{$$typeof:I1,_payload:{_status:-1,_result:t},_init:N1}};Ue.memo=function(t,e){return{$$typeof:S1,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=au.transition;au.transition={};try{t()}finally{au.transition=e}};Ue.unstable_act=Ax;Ue.useCallback=function(t,e){return wn.current.useCallback(t,e)};Ue.useContext=function(t){return wn.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return wn.current.useDeferredValue(t)};Ue.useEffect=function(t,e){return wn.current.useEffect(t,e)};Ue.useId=function(){return wn.current.useId()};Ue.useImperativeHandle=function(t,e,n){return wn.current.useImperativeHandle(t,e,n)};Ue.useInsertionEffect=function(t,e){return wn.current.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return wn.current.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return wn.current.useMemo(t,e)};Ue.useReducer=function(t,e,n){return wn.current.useReducer(t,e,n)};Ue.useRef=function(t){return wn.current.useRef(t)};Ue.useState=function(t){return wn.current.useState(t)};Ue.useSyncExternalStore=function(t,e,n){return wn.current.useSyncExternalStore(t,e,n)};Ue.useTransition=function(){return wn.current.useTransition()};Ue.version="18.3.1";_x.exports=Ue;var G=_x.exports;const Nx=Of(G);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1=G,M1=Symbol.for("react.element"),D1=Symbol.for("react.fragment"),L1=Object.prototype.hasOwnProperty,V1=P1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F1={key:!0,ref:!0,__self:!0,__source:!0};function Rx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)L1.call(e,r)&&!F1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:M1,type:t,key:i,ref:o,props:s,_owner:V1.current}}yc.Fragment=D1;yc.jsx=Rx;yc.jsxs=Rx;wx.exports=yc;var u=wx.exports,uh={},Px={exports:{}},Hn={},Mx={exports:{}},Dx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ee,$){var le=ee.length;ee.push($);e:for(;0<le;){var q=le-1>>>1,L=ee[q];if(0<s(L,$))ee[q]=$,ee[le]=L,le=q;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var $=ee[0],le=ee.pop();if(le!==$){ee[0]=le;e:for(var q=0,L=ee.length,z=L>>>1;q<z;){var se=2*(q+1)-1,ie=ee[se],ke=se+1,ze=ee[ke];if(0>s(ie,le))ke<L&&0>s(ze,ie)?(ee[q]=ze,ee[ke]=le,q=ke):(ee[q]=ie,ee[se]=le,q=se);else if(ke<L&&0>s(ze,le))ee[q]=ze,ee[ke]=le,q=ke;else break e}}return $}function s(ee,$){var le=ee.sortIndex-$.sortIndex;return le!==0?le:ee.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,m=null,g=3,y=!1,E=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ee){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=ee)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function M(ee){if(x=!1,b(ee),!E)if(n(l)!==null)E=!0,he(V);else{var $=n(c);$!==null&&ne(M,$.startTime-ee)}}function V(ee,$){E=!1,x&&(x=!1,v(N),N=-1),y=!0;var le=g;try{for(b($),m=n(l);m!==null&&(!(m.expirationTime>$)||ee&&!j());){var q=m.callback;if(typeof q=="function"){m.callback=null,g=m.priorityLevel;var L=q(m.expirationTime<=$);$=t.unstable_now(),typeof L=="function"?m.callback=L:m===n(l)&&r(l),b($)}else r(l);m=n(l)}if(m!==null)var z=!0;else{var se=n(c);se!==null&&ne(M,se.startTime-$),z=!1}return z}finally{m=null,g=le,y=!1}}var B=!1,k=null,N=-1,A=5,P=-1;function j(){return!(t.unstable_now()-P<A)}function R(){if(k!==null){var ee=t.unstable_now();P=ee;var $=!0;try{$=k(!0,ee)}finally{$?D():(B=!1,k=null)}}else B=!1}var D;if(typeof _=="function")D=function(){_(R)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,K=S.port2;S.port1.onmessage=R,D=function(){K.postMessage(null)}}else D=function(){T(R,0)};function he(ee){k=ee,B||(B=!0,D())}function ne(ee,$){N=T(function(){ee(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){E||y||(E=!0,he(V))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(ee){switch(g){case 1:case 2:case 3:var $=3;break;default:$=g}var le=g;g=$;try{return ee()}finally{g=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,$){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var le=g;g=ee;try{return $()}finally{g=le}},t.unstable_scheduleCallback=function(ee,$,le){var q=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?q+le:q):le=q,ee){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=le+L,ee={id:h++,callback:$,priorityLevel:ee,startTime:le,expirationTime:L,sortIndex:-1},le>q?(ee.sortIndex=le,e(c,ee),n(l)===null&&ee===n(c)&&(x?(v(N),N=-1):x=!0,ne(M,le-q))):(ee.sortIndex=L,e(l,ee),E||y||(E=!0,he(V))),ee},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(ee){var $=g;return function(){var le=g;g=$;try{return ee.apply(this,arguments)}finally{g=le}}}})(Dx);Mx.exports=Dx;var j1=Mx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1=G,On=j1;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lx=new Set,wa={};function di(t,e){Xi(t,e),Xi(t+"Capture",e)}function Xi(t,e){for(wa[t]=e,t=0;t<e.length;t++)Lx.add(e[t])}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ch=Object.prototype.hasOwnProperty,B1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xg={},wg={};function O1(t){return ch.call(wg,t)?!0:ch.call(xg,t)?!1:B1.test(t)?wg[t]=!0:(xg[t]=!0,!1)}function z1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G1(t,e,n,r){if(e===null||typeof e>"u"||z1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jt[t]=new _n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jt[e]=new _n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jt[t]=new _n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jt[t]=new _n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jt[t]=new _n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jt[t]=new _n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jt[t]=new _n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jt[t]=new _n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jt[t]=new _n(t,5,!1,t.toLowerCase(),null,!1,!1)});var qf=/[\-:]([a-z])/g;function Wf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qf,Wf);Jt[e]=new _n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qf,Wf);Jt[e]=new _n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qf,Wf);Jt[e]=new _n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jt[t]=new _n(t,1,!1,t.toLowerCase(),null,!1,!1)});Jt.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jt[t]=new _n(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kf(t,e,n,r){var s=Jt.hasOwnProperty(e)?Jt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(G1(e,n,s,r)&&(n=null),r||s===null?O1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $r=U1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pl=Symbol.for("react.element"),ki=Symbol.for("react.portal"),Ai=Symbol.for("react.fragment"),Jf=Symbol.for("react.strict_mode"),dh=Symbol.for("react.profiler"),Vx=Symbol.for("react.provider"),Fx=Symbol.for("react.context"),Yf=Symbol.for("react.forward_ref"),hh=Symbol.for("react.suspense"),fh=Symbol.for("react.suspense_list"),Qf=Symbol.for("react.memo"),es=Symbol.for("react.lazy"),jx=Symbol.for("react.offscreen"),_g=Symbol.iterator;function Bo(t){return t===null||typeof t!="object"?null:(t=_g&&t[_g]||t["@@iterator"],typeof t=="function"?t:null)}var vt=Object.assign,Ed;function Qo(t){if(Ed===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ed=e&&e[1]||""}return`
`+Ed+t}var Td=!1;function bd(t,e){if(!t||Td)return"";Td=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Td=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qo(t):""}function H1(t){switch(t.tag){case 5:return Qo(t.type);case 16:return Qo("Lazy");case 13:return Qo("Suspense");case 19:return Qo("SuspenseList");case 0:case 2:case 15:return t=bd(t.type,!1),t;case 11:return t=bd(t.type.render,!1),t;case 1:return t=bd(t.type,!0),t;default:return""}}function ph(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ai:return"Fragment";case ki:return"Portal";case dh:return"Profiler";case Jf:return"StrictMode";case hh:return"Suspense";case fh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fx:return(t.displayName||"Context")+".Consumer";case Vx:return(t._context.displayName||"Context")+".Provider";case Yf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qf:return e=t.displayName||null,e!==null?e:ph(t.type)||"Memo";case es:e=t._payload,t=t._init;try{return ph(t(e))}catch{}}return null}function $1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ph(e);case 8:return e===Jf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ux(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function q1(t){var e=Ux(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ml(t){t._valueTracker||(t._valueTracker=q1(t))}function Bx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ux(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Su(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mh(t,e){var n=e.checked;return vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Eg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ox(t,e){e=e.checked,e!=null&&Kf(t,"checked",e,!1)}function gh(t,e){Ox(t,e);var n=xs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yh(t,e.type,n):e.hasOwnProperty("defaultValue")&&yh(t,e.type,xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yh(t,e,n){(e!=="number"||Su(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xo=Array.isArray;function zi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function vh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(fe(92));if(Xo(n)){if(1<n.length)throw Error(fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xs(n)}}function zx(t,e){var n=xs(e.value),r=xs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Gx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Gx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dl,Hx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dl=Dl||document.createElement("div"),Dl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _a(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W1=["Webkit","ms","Moz","O"];Object.keys(oa).forEach(function(t){W1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oa[e]=oa[t]})});function $x(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oa.hasOwnProperty(t)&&oa[t]?(""+e).trim():e+"px"}function qx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$x(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var K1=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wh(t,e){if(e){if(K1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function _h(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eh=null;function Xf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Th=null,Gi=null,Hi=null;function Ig(t){if(t=Xa(t)){if(typeof Th!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=Ec(e),Th(t.stateNode,t.type,e))}}function Wx(t){Gi?Hi?Hi.push(t):Hi=[t]:Gi=t}function Kx(){if(Gi){var t=Gi,e=Hi;if(Hi=Gi=null,Ig(t),e)for(t=0;t<e.length;t++)Ig(e[t])}}function Jx(t,e){return t(e)}function Yx(){}var Sd=!1;function Qx(t,e,n){if(Sd)return t(e,n);Sd=!0;try{return Jx(t,e,n)}finally{Sd=!1,(Gi!==null||Hi!==null)&&(Yx(),Kx())}}function Ea(t,e){var n=t.stateNode;if(n===null)return null;var r=Ec(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(fe(231,e,typeof n));return n}var bh=!1;if(Vr)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){bh=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{bh=!1}function J1(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var aa=!1,Iu=null,Cu=!1,Sh=null,Y1={onError:function(t){aa=!0,Iu=t}};function Q1(t,e,n,r,s,i,o,a,l){aa=!1,Iu=null,J1.apply(Y1,arguments)}function X1(t,e,n,r,s,i,o,a,l){if(Q1.apply(this,arguments),aa){if(aa){var c=Iu;aa=!1,Iu=null}else throw Error(fe(198));Cu||(Cu=!0,Sh=c)}}function hi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cg(t){if(hi(t)!==t)throw Error(fe(188))}function Z1(t){var e=t.alternate;if(!e){if(e=hi(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Cg(s),t;if(i===r)return Cg(s),e;i=i.sibling}throw Error(fe(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?t:e}function Zx(t){return t=Z1(t),t!==null?ew(t):null}function ew(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ew(t);if(e!==null)return e;t=t.sibling}return null}var tw=On.unstable_scheduleCallback,kg=On.unstable_cancelCallback,eS=On.unstable_shouldYield,tS=On.unstable_requestPaint,Tt=On.unstable_now,nS=On.unstable_getCurrentPriorityLevel,Zf=On.unstable_ImmediatePriority,nw=On.unstable_UserBlockingPriority,ku=On.unstable_NormalPriority,rS=On.unstable_LowPriority,rw=On.unstable_IdlePriority,vc=null,vr=null;function sS(t){if(vr&&typeof vr.onCommitFiberRoot=="function")try{vr.onCommitFiberRoot(vc,t,void 0,(t.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:aS,iS=Math.log,oS=Math.LN2;function aS(t){return t>>>=0,t===0?32:31-(iS(t)/oS|0)|0}var Ll=64,Vl=4194304;function Zo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Au(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Zo(a):(i&=o,i!==0&&(r=Zo(i)))}else o=n&~s,o!==0?r=Zo(o):i!==0&&(r=Zo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-or(e),s=1<<n,r|=t[n],e&=~s;return r}function lS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-or(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=lS(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Ih(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sw(){var t=Ll;return Ll<<=1,!(Ll&4194240)&&(Ll=64),t}function Id(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ya(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-or(e),t[e]=n}function cS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-or(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ep(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-or(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var st=0;function iw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ow,tp,aw,lw,uw,Ch=!1,Fl=[],ls=null,us=null,cs=null,Ta=new Map,ba=new Map,ns=[],dS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ag(t,e){switch(t){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":Ta.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ba.delete(e.pointerId)}}function zo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Xa(e),e!==null&&tp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function hS(t,e,n,r,s){switch(e){case"focusin":return ls=zo(ls,t,e,n,r,s),!0;case"dragenter":return us=zo(us,t,e,n,r,s),!0;case"mouseover":return cs=zo(cs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ta.set(i,zo(Ta.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ba.set(i,zo(ba.get(i)||null,t,e,n,r,s)),!0}return!1}function cw(t){var e=$s(t.target);if(e!==null){var n=hi(e);if(n!==null){if(e=n.tag,e===13){if(e=Xx(n),e!==null){t.blockedOn=e,uw(t.priority,function(){aw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Eh=r,n.target.dispatchEvent(r),Eh=null}else return e=Xa(n),e!==null&&tp(e),t.blockedOn=n,!1;e.shift()}return!0}function Ng(t,e,n){lu(t)&&n.delete(e)}function fS(){Ch=!1,ls!==null&&lu(ls)&&(ls=null),us!==null&&lu(us)&&(us=null),cs!==null&&lu(cs)&&(cs=null),Ta.forEach(Ng),ba.forEach(Ng)}function Go(t,e){t.blockedOn===e&&(t.blockedOn=null,Ch||(Ch=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,fS)))}function Sa(t){function e(s){return Go(s,t)}if(0<Fl.length){Go(Fl[0],t);for(var n=1;n<Fl.length;n++){var r=Fl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ls!==null&&Go(ls,t),us!==null&&Go(us,t),cs!==null&&Go(cs,t),Ta.forEach(e),ba.forEach(e),n=0;n<ns.length;n++)r=ns[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ns.length&&(n=ns[0],n.blockedOn===null);)cw(n),n.blockedOn===null&&ns.shift()}var $i=$r.ReactCurrentBatchConfig,Nu=!0;function pS(t,e,n,r){var s=st,i=$i.transition;$i.transition=null;try{st=1,np(t,e,n,r)}finally{st=s,$i.transition=i}}function mS(t,e,n,r){var s=st,i=$i.transition;$i.transition=null;try{st=4,np(t,e,n,r)}finally{st=s,$i.transition=i}}function np(t,e,n,r){if(Nu){var s=kh(t,e,n,r);if(s===null)Vd(t,e,r,Ru,n),Ag(t,r);else if(hS(s,t,e,n,r))r.stopPropagation();else if(Ag(t,r),e&4&&-1<dS.indexOf(t)){for(;s!==null;){var i=Xa(s);if(i!==null&&ow(i),i=kh(t,e,n,r),i===null&&Vd(t,e,r,Ru,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vd(t,e,r,null,n)}}var Ru=null;function kh(t,e,n,r){if(Ru=null,t=Xf(r),t=$s(t),t!==null)if(e=hi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ru=t,null}function dw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nS()){case Zf:return 1;case nw:return 4;case ku:case rS:return 16;case rw:return 536870912;default:return 16}default:return 16}}var is=null,rp=null,uu=null;function hw(){if(uu)return uu;var t,e=rp,n=e.length,r,s="value"in is?is.value:is.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return uu=s.slice(t,1<r?1-r:void 0)}function cu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jl(){return!0}function Rg(){return!1}function $n(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jl:Rg,this.isPropagationStopped=Rg,this}return vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),e}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sp=$n(vo),Qa=vt({},vo,{view:0,detail:0}),gS=$n(Qa),Cd,kd,Ho,xc=vt({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ip,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ho&&(Ho&&t.type==="mousemove"?(Cd=t.screenX-Ho.screenX,kd=t.screenY-Ho.screenY):kd=Cd=0,Ho=t),Cd)},movementY:function(t){return"movementY"in t?t.movementY:kd}}),Pg=$n(xc),yS=vt({},xc,{dataTransfer:0}),vS=$n(yS),xS=vt({},Qa,{relatedTarget:0}),Ad=$n(xS),wS=vt({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),_S=$n(wS),ES=vt({},vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TS=$n(ES),bS=vt({},vo,{data:0}),Mg=$n(bS),SS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=CS[t])?!!e[t]:!1}function ip(){return kS}var AS=vt({},Qa,{key:function(t){if(t.key){var e=SS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ip,charCode:function(t){return t.type==="keypress"?cu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NS=$n(AS),RS=vt({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dg=$n(RS),PS=vt({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ip}),MS=$n(PS),DS=vt({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),LS=$n(DS),VS=vt({},xc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FS=$n(VS),jS=[9,13,27,32],op=Vr&&"CompositionEvent"in window,la=null;Vr&&"documentMode"in document&&(la=document.documentMode);var US=Vr&&"TextEvent"in window&&!la,fw=Vr&&(!op||la&&8<la&&11>=la),Lg=" ",Vg=!1;function pw(t,e){switch(t){case"keyup":return jS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ni=!1;function BS(t,e){switch(t){case"compositionend":return mw(e);case"keypress":return e.which!==32?null:(Vg=!0,Lg);case"textInput":return t=e.data,t===Lg&&Vg?null:t;default:return null}}function OS(t,e){if(Ni)return t==="compositionend"||!op&&pw(t,e)?(t=hw(),uu=rp=is=null,Ni=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fw&&e.locale!=="ko"?null:e.data;default:return null}}var zS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zS[t.type]:e==="textarea"}function gw(t,e,n,r){Wx(r),e=Pu(e,"onChange"),0<e.length&&(n=new sp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ua=null,Ia=null;function GS(t){Cw(t,0)}function wc(t){var e=Mi(t);if(Bx(e))return t}function HS(t,e){if(t==="change")return e}var yw=!1;if(Vr){var Nd;if(Vr){var Rd="oninput"in document;if(!Rd){var jg=document.createElement("div");jg.setAttribute("oninput","return;"),Rd=typeof jg.oninput=="function"}Nd=Rd}else Nd=!1;yw=Nd&&(!document.documentMode||9<document.documentMode)}function Ug(){ua&&(ua.detachEvent("onpropertychange",vw),Ia=ua=null)}function vw(t){if(t.propertyName==="value"&&wc(Ia)){var e=[];gw(e,Ia,t,Xf(t)),Qx(GS,e)}}function $S(t,e,n){t==="focusin"?(Ug(),ua=e,Ia=n,ua.attachEvent("onpropertychange",vw)):t==="focusout"&&Ug()}function qS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wc(Ia)}function WS(t,e){if(t==="click")return wc(e)}function KS(t,e){if(t==="input"||t==="change")return wc(e)}function JS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dr=typeof Object.is=="function"?Object.is:JS;function Ca(t,e){if(dr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ch.call(e,s)||!dr(t[s],e[s]))return!1}return!0}function Bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Og(t,e){var n=Bg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bg(n)}}function xw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ww(){for(var t=window,e=Su();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Su(t.document)}return e}function ap(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YS(t){var e=ww(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xw(n.ownerDocument.documentElement,n)){if(r!==null&&ap(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Og(n,i);var o=Og(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var QS=Vr&&"documentMode"in document&&11>=document.documentMode,Ri=null,Ah=null,ca=null,Nh=!1;function zg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nh||Ri==null||Ri!==Su(r)||(r=Ri,"selectionStart"in r&&ap(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ca&&Ca(ca,r)||(ca=r,r=Pu(Ah,"onSelect"),0<r.length&&(e=new sp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ri)))}function Ul(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pi={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionend:Ul("Transition","TransitionEnd")},Pd={},_w={};Vr&&(_w=document.createElement("div").style,"AnimationEvent"in window||(delete Pi.animationend.animation,delete Pi.animationiteration.animation,delete Pi.animationstart.animation),"TransitionEvent"in window||delete Pi.transitionend.transition);function _c(t){if(Pd[t])return Pd[t];if(!Pi[t])return t;var e=Pi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _w)return Pd[t]=e[n];return t}var Ew=_c("animationend"),Tw=_c("animationiteration"),bw=_c("animationstart"),Sw=_c("transitionend"),Iw=new Map,Gg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(t,e){Iw.set(t,e),di(e,[t])}for(var Md=0;Md<Gg.length;Md++){var Dd=Gg[Md],XS=Dd.toLowerCase(),ZS=Dd[0].toUpperCase()+Dd.slice(1);Is(XS,"on"+ZS)}Is(Ew,"onAnimationEnd");Is(Tw,"onAnimationIteration");Is(bw,"onAnimationStart");Is("dblclick","onDoubleClick");Is("focusin","onFocus");Is("focusout","onBlur");Is(Sw,"onTransitionEnd");Xi("onMouseEnter",["mouseout","mouseover"]);Xi("onMouseLeave",["mouseout","mouseover"]);Xi("onPointerEnter",["pointerout","pointerover"]);Xi("onPointerLeave",["pointerout","pointerover"]);di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));di("onBeforeInput",["compositionend","keypress","textInput","paste"]);di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eI=new Set("cancel close invalid load scroll toggle".split(" ").concat(ea));function Hg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,X1(r,e,void 0,t),t.currentTarget=null}function Cw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Hg(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Hg(s,a,c),i=l}}}if(Cu)throw t=Sh,Cu=!1,Sh=null,t}function ct(t,e){var n=e[Lh];n===void 0&&(n=e[Lh]=new Set);var r=t+"__bubble";n.has(r)||(kw(e,t,2,!1),n.add(r))}function Ld(t,e,n){var r=0;e&&(r|=4),kw(n,t,r,e)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function ka(t){if(!t[Bl]){t[Bl]=!0,Lx.forEach(function(n){n!=="selectionchange"&&(eI.has(n)||Ld(n,!1,t),Ld(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bl]||(e[Bl]=!0,Ld("selectionchange",!1,e))}}function kw(t,e,n,r){switch(dw(e)){case 1:var s=pS;break;case 4:s=mS;break;default:s=np}n=s.bind(null,e,n,t),s=void 0,!bh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=$s(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Qx(function(){var c=i,h=Xf(n),m=[];e:{var g=Iw.get(t);if(g!==void 0){var y=sp,E=t;switch(t){case"keypress":if(cu(n)===0)break e;case"keydown":case"keyup":y=NS;break;case"focusin":E="focus",y=Ad;break;case"focusout":E="blur",y=Ad;break;case"beforeblur":case"afterblur":y=Ad;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Pg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=vS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=MS;break;case Ew:case Tw:case bw:y=_S;break;case Sw:y=LS;break;case"scroll":y=gS;break;case"wheel":y=FS;break;case"copy":case"cut":case"paste":y=TS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Dg}var x=(e&4)!==0,T=!x&&t==="scroll",v=x?g!==null?g+"Capture":null:g;x=[];for(var _=c,b;_!==null;){b=_;var M=b.stateNode;if(b.tag===5&&M!==null&&(b=M,v!==null&&(M=Ea(_,v),M!=null&&x.push(Aa(_,M,b)))),T)break;_=_.return}0<x.length&&(g=new y(g,E,null,n,h),m.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==Eh&&(E=n.relatedTarget||n.fromElement)&&($s(E)||E[Fr]))break e;if((y||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,y?(E=n.relatedTarget||n.toElement,y=c,E=E?$s(E):null,E!==null&&(T=hi(E),E!==T||E.tag!==5&&E.tag!==6)&&(E=null)):(y=null,E=c),y!==E)){if(x=Pg,M="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(x=Dg,M="onPointerLeave",v="onPointerEnter",_="pointer"),T=y==null?g:Mi(y),b=E==null?g:Mi(E),g=new x(M,_+"leave",y,n,h),g.target=T,g.relatedTarget=b,M=null,$s(h)===c&&(x=new x(v,_+"enter",E,n,h),x.target=b,x.relatedTarget=T,M=x),T=M,y&&E)t:{for(x=y,v=E,_=0,b=x;b;b=bi(b))_++;for(b=0,M=v;M;M=bi(M))b++;for(;0<_-b;)x=bi(x),_--;for(;0<b-_;)v=bi(v),b--;for(;_--;){if(x===v||v!==null&&x===v.alternate)break t;x=bi(x),v=bi(v)}x=null}else x=null;y!==null&&$g(m,g,y,x,!1),E!==null&&T!==null&&$g(m,T,E,x,!0)}}e:{if(g=c?Mi(c):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var V=HS;else if(Fg(g))if(yw)V=KS;else{V=qS;var B=$S}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=WS);if(V&&(V=V(t,c))){gw(m,V,n,h);break e}B&&B(t,g,c),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&yh(g,"number",g.value)}switch(B=c?Mi(c):window,t){case"focusin":(Fg(B)||B.contentEditable==="true")&&(Ri=B,Ah=c,ca=null);break;case"focusout":ca=Ah=Ri=null;break;case"mousedown":Nh=!0;break;case"contextmenu":case"mouseup":case"dragend":Nh=!1,zg(m,n,h);break;case"selectionchange":if(QS)break;case"keydown":case"keyup":zg(m,n,h)}var k;if(op)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ni?pw(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(fw&&n.locale!=="ko"&&(Ni||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ni&&(k=hw()):(is=h,rp="value"in is?is.value:is.textContent,Ni=!0)),B=Pu(c,N),0<B.length&&(N=new Mg(N,t,null,n,h),m.push({event:N,listeners:B}),k?N.data=k:(k=mw(n),k!==null&&(N.data=k)))),(k=US?BS(t,n):OS(t,n))&&(c=Pu(c,"onBeforeInput"),0<c.length&&(h=new Mg("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:c}),h.data=k))}Cw(m,e)})}function Aa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ea(t,n),i!=null&&r.unshift(Aa(t,i,s)),i=Ea(t,e),i!=null&&r.push(Aa(t,i,s))),t=t.return}return r}function bi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $g(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ea(n,i),l!=null&&o.unshift(Aa(n,l,a))):s||(l=Ea(n,i),l!=null&&o.push(Aa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tI=/\r\n?/g,nI=/\u0000|\uFFFD/g;function qg(t){return(typeof t=="string"?t:""+t).replace(tI,`
`).replace(nI,"")}function Ol(t,e,n){if(e=qg(e),qg(t)!==e&&n)throw Error(fe(425))}function Mu(){}var Rh=null,Ph=null;function Mh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dh=typeof setTimeout=="function"?setTimeout:void 0,rI=typeof clearTimeout=="function"?clearTimeout:void 0,Wg=typeof Promise=="function"?Promise:void 0,sI=typeof queueMicrotask=="function"?queueMicrotask:typeof Wg<"u"?function(t){return Wg.resolve(null).then(t).catch(iI)}:Dh;function iI(t){setTimeout(function(){throw t})}function Fd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Sa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Sa(e)}function ds(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xo=Math.random().toString(36).slice(2),yr="__reactFiber$"+xo,Na="__reactProps$"+xo,Fr="__reactContainer$"+xo,Lh="__reactEvents$"+xo,oI="__reactListeners$"+xo,aI="__reactHandles$"+xo;function $s(t){var e=t[yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fr]||n[yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kg(t);t!==null;){if(n=t[yr])return n;t=Kg(t)}return e}t=n,n=t.parentNode}return null}function Xa(t){return t=t[yr]||t[Fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function Ec(t){return t[Na]||null}var Vh=[],Di=-1;function Cs(t){return{current:t}}function ht(t){0>Di||(t.current=Vh[Di],Vh[Di]=null,Di--)}function at(t,e){Di++,Vh[Di]=t.current,t.current=e}var ws={},cn=Cs(ws),An=Cs(!1),Zs=ws;function Zi(t,e){var n=t.type.contextTypes;if(!n)return ws;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Nn(t){return t=t.childContextTypes,t!=null}function Du(){ht(An),ht(cn)}function Jg(t,e,n){if(cn.current!==ws)throw Error(fe(168));at(cn,e),at(An,n)}function Aw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(fe(108,$1(t)||"Unknown",s));return vt({},n,r)}function Lu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ws,Zs=cn.current,at(cn,t),at(An,An.current),!0}function Yg(t,e,n){var r=t.stateNode;if(!r)throw Error(fe(169));n?(t=Aw(t,e,Zs),r.__reactInternalMemoizedMergedChildContext=t,ht(An),ht(cn),at(cn,t)):ht(An),at(An,n)}var Nr=null,Tc=!1,jd=!1;function Nw(t){Nr===null?Nr=[t]:Nr.push(t)}function lI(t){Tc=!0,Nw(t)}function ks(){if(!jd&&Nr!==null){jd=!0;var t=0,e=st;try{var n=Nr;for(st=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nr=null,Tc=!1}catch(s){throw Nr!==null&&(Nr=Nr.slice(t+1)),tw(Zf,ks),s}finally{st=e,jd=!1}}return null}var Li=[],Vi=0,Vu=null,Fu=0,qn=[],Wn=0,ei=null,Pr=1,Mr="";function Os(t,e){Li[Vi++]=Fu,Li[Vi++]=Vu,Vu=t,Fu=e}function Rw(t,e,n){qn[Wn++]=Pr,qn[Wn++]=Mr,qn[Wn++]=ei,ei=t;var r=Pr;t=Mr;var s=32-or(r)-1;r&=~(1<<s),n+=1;var i=32-or(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pr=1<<32-or(e)+s|n<<s|r,Mr=i+t}else Pr=1<<i|n<<s|r,Mr=t}function lp(t){t.return!==null&&(Os(t,1),Rw(t,1,0))}function up(t){for(;t===Vu;)Vu=Li[--Vi],Li[Vi]=null,Fu=Li[--Vi],Li[Vi]=null;for(;t===ei;)ei=qn[--Wn],qn[Wn]=null,Mr=qn[--Wn],qn[Wn]=null,Pr=qn[--Wn],qn[Wn]=null}var Un=null,Fn=null,pt=!1,ir=null;function Pw(t,e){var n=Kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Un=t,Fn=ds(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Un=t,Fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ei!==null?{id:Pr,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Un=t,Fn=null,!0):!1;default:return!1}}function Fh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jh(t){if(pt){var e=Fn;if(e){var n=e;if(!Qg(t,e)){if(Fh(t))throw Error(fe(418));e=ds(n.nextSibling);var r=Un;e&&Qg(t,e)?Pw(r,n):(t.flags=t.flags&-4097|2,pt=!1,Un=t)}}else{if(Fh(t))throw Error(fe(418));t.flags=t.flags&-4097|2,pt=!1,Un=t}}}function Xg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Un=t}function zl(t){if(t!==Un)return!1;if(!pt)return Xg(t),pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mh(t.type,t.memoizedProps)),e&&(e=Fn)){if(Fh(t))throw Mw(),Error(fe(418));for(;e;)Pw(t,e),e=ds(e.nextSibling)}if(Xg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fn=ds(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fn=null}}else Fn=Un?ds(t.stateNode.nextSibling):null;return!0}function Mw(){for(var t=Fn;t;)t=ds(t.nextSibling)}function eo(){Fn=Un=null,pt=!1}function cp(t){ir===null?ir=[t]:ir.push(t)}var uI=$r.ReactCurrentBatchConfig;function $o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,t))}return t}function Gl(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zg(t){var e=t._init;return e(t._payload)}function Dw(t){function e(v,_){if(t){var b=v.deletions;b===null?(v.deletions=[_],v.flags|=16):b.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function s(v,_){return v=ms(v,_),v.index=0,v.sibling=null,v}function i(v,_,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<_?(v.flags|=2,_):b):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,b,M){return _===null||_.tag!==6?(_=$d(b,v.mode,M),_.return=v,_):(_=s(_,b),_.return=v,_)}function l(v,_,b,M){var V=b.type;return V===Ai?h(v,_,b.props.children,M,b.key):_!==null&&(_.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===es&&Zg(V)===_.type)?(M=s(_,b.props),M.ref=$o(v,_,b),M.return=v,M):(M=yu(b.type,b.key,b.props,null,v.mode,M),M.ref=$o(v,_,b),M.return=v,M)}function c(v,_,b,M){return _===null||_.tag!==4||_.stateNode.containerInfo!==b.containerInfo||_.stateNode.implementation!==b.implementation?(_=qd(b,v.mode,M),_.return=v,_):(_=s(_,b.children||[]),_.return=v,_)}function h(v,_,b,M,V){return _===null||_.tag!==7?(_=Qs(b,v.mode,M,V),_.return=v,_):(_=s(_,b),_.return=v,_)}function m(v,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return _=$d(""+_,v.mode,b),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Pl:return b=yu(_.type,_.key,_.props,null,v.mode,b),b.ref=$o(v,null,_),b.return=v,b;case ki:return _=qd(_,v.mode,b),_.return=v,_;case es:var M=_._init;return m(v,M(_._payload),b)}if(Xo(_)||Bo(_))return _=Qs(_,v.mode,b,null),_.return=v,_;Gl(v,_)}return null}function g(v,_,b,M){var V=_!==null?_.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return V!==null?null:a(v,_,""+b,M);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Pl:return b.key===V?l(v,_,b,M):null;case ki:return b.key===V?c(v,_,b,M):null;case es:return V=b._init,g(v,_,V(b._payload),M)}if(Xo(b)||Bo(b))return V!==null?null:h(v,_,b,M,null);Gl(v,b)}return null}function y(v,_,b,M,V){if(typeof M=="string"&&M!==""||typeof M=="number")return v=v.get(b)||null,a(_,v,""+M,V);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Pl:return v=v.get(M.key===null?b:M.key)||null,l(_,v,M,V);case ki:return v=v.get(M.key===null?b:M.key)||null,c(_,v,M,V);case es:var B=M._init;return y(v,_,b,B(M._payload),V)}if(Xo(M)||Bo(M))return v=v.get(b)||null,h(_,v,M,V,null);Gl(_,M)}return null}function E(v,_,b,M){for(var V=null,B=null,k=_,N=_=0,A=null;k!==null&&N<b.length;N++){k.index>N?(A=k,k=null):A=k.sibling;var P=g(v,k,b[N],M);if(P===null){k===null&&(k=A);break}t&&k&&P.alternate===null&&e(v,k),_=i(P,_,N),B===null?V=P:B.sibling=P,B=P,k=A}if(N===b.length)return n(v,k),pt&&Os(v,N),V;if(k===null){for(;N<b.length;N++)k=m(v,b[N],M),k!==null&&(_=i(k,_,N),B===null?V=k:B.sibling=k,B=k);return pt&&Os(v,N),V}for(k=r(v,k);N<b.length;N++)A=y(k,v,N,b[N],M),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?N:A.key),_=i(A,_,N),B===null?V=A:B.sibling=A,B=A);return t&&k.forEach(function(j){return e(v,j)}),pt&&Os(v,N),V}function x(v,_,b,M){var V=Bo(b);if(typeof V!="function")throw Error(fe(150));if(b=V.call(b),b==null)throw Error(fe(151));for(var B=V=null,k=_,N=_=0,A=null,P=b.next();k!==null&&!P.done;N++,P=b.next()){k.index>N?(A=k,k=null):A=k.sibling;var j=g(v,k,P.value,M);if(j===null){k===null&&(k=A);break}t&&k&&j.alternate===null&&e(v,k),_=i(j,_,N),B===null?V=j:B.sibling=j,B=j,k=A}if(P.done)return n(v,k),pt&&Os(v,N),V;if(k===null){for(;!P.done;N++,P=b.next())P=m(v,P.value,M),P!==null&&(_=i(P,_,N),B===null?V=P:B.sibling=P,B=P);return pt&&Os(v,N),V}for(k=r(v,k);!P.done;N++,P=b.next())P=y(k,v,N,P.value,M),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?N:P.key),_=i(P,_,N),B===null?V=P:B.sibling=P,B=P);return t&&k.forEach(function(R){return e(v,R)}),pt&&Os(v,N),V}function T(v,_,b,M){if(typeof b=="object"&&b!==null&&b.type===Ai&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Pl:e:{for(var V=b.key,B=_;B!==null;){if(B.key===V){if(V=b.type,V===Ai){if(B.tag===7){n(v,B.sibling),_=s(B,b.props.children),_.return=v,v=_;break e}}else if(B.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===es&&Zg(V)===B.type){n(v,B.sibling),_=s(B,b.props),_.ref=$o(v,B,b),_.return=v,v=_;break e}n(v,B);break}else e(v,B);B=B.sibling}b.type===Ai?(_=Qs(b.props.children,v.mode,M,b.key),_.return=v,v=_):(M=yu(b.type,b.key,b.props,null,v.mode,M),M.ref=$o(v,_,b),M.return=v,v=M)}return o(v);case ki:e:{for(B=b.key;_!==null;){if(_.key===B)if(_.tag===4&&_.stateNode.containerInfo===b.containerInfo&&_.stateNode.implementation===b.implementation){n(v,_.sibling),_=s(_,b.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=qd(b,v.mode,M),_.return=v,v=_}return o(v);case es:return B=b._init,T(v,_,B(b._payload),M)}if(Xo(b))return E(v,_,b,M);if(Bo(b))return x(v,_,b,M);Gl(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,_!==null&&_.tag===6?(n(v,_.sibling),_=s(_,b),_.return=v,v=_):(n(v,_),_=$d(b,v.mode,M),_.return=v,v=_),o(v)):n(v,_)}return T}var to=Dw(!0),Lw=Dw(!1),ju=Cs(null),Uu=null,Fi=null,dp=null;function hp(){dp=Fi=Uu=null}function fp(t){var e=ju.current;ht(ju),t._currentValue=e}function Uh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qi(t,e){Uu=t,dp=Fi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kn=!0),t.firstContext=null)}function Qn(t){var e=t._currentValue;if(dp!==t)if(t={context:t,memoizedValue:e,next:null},Fi===null){if(Uu===null)throw Error(fe(308));Fi=t,Uu.dependencies={lanes:0,firstContext:t}}else Fi=Fi.next=t;return e}var qs=null;function pp(t){qs===null?qs=[t]:qs.push(t)}function Vw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,pp(e)):(n.next=s.next,s.next=n),e.interleaved=n,jr(t,r)}function jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ts=!1;function mp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ke&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,jr(t,n)}return s=r.interleaved,s===null?(e.next=e,pp(r)):(e.next=s.next,s.next=e),r.interleaved=e,jr(t,n)}function du(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ep(t,n)}}function e0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bu(t,e,n,r){var s=t.updateQueue;ts=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var m=s.baseState;o=0,h=c=l=null,a=i;do{var g=a.lane,y=a.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,x=a;switch(g=e,y=n,x.tag){case 1:if(E=x.payload,typeof E=="function"){m=E.call(y,m,g);break e}m=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=x.payload,g=typeof E=="function"?E.call(y,m,g):E,g==null)break e;m=vt({},m,g);break e;case 2:ts=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=m):h=h.next=y,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(l=m),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ni|=o,t.lanes=o,t.memoizedState=m}}function t0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(fe(191,s));s.call(r)}}}var Za={},xr=Cs(Za),Ra=Cs(Za),Pa=Cs(Za);function Ws(t){if(t===Za)throw Error(fe(174));return t}function gp(t,e){switch(at(Pa,e),at(Ra,t),at(xr,Za),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xh(e,t)}ht(xr),at(xr,e)}function no(){ht(xr),ht(Ra),ht(Pa)}function jw(t){Ws(Pa.current);var e=Ws(xr.current),n=xh(e,t.type);e!==n&&(at(Ra,t),at(xr,n))}function yp(t){Ra.current===t&&(ht(xr),ht(Ra))}var gt=Cs(0);function Ou(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ud=[];function vp(){for(var t=0;t<Ud.length;t++)Ud[t]._workInProgressVersionPrimary=null;Ud.length=0}var hu=$r.ReactCurrentDispatcher,Bd=$r.ReactCurrentBatchConfig,ti=0,yt=null,Nt=null,Lt=null,zu=!1,da=!1,Ma=0,cI=0;function tn(){throw Error(fe(321))}function xp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dr(t[n],e[n]))return!1;return!0}function wp(t,e,n,r,s,i){if(ti=i,yt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hu.current=t===null||t.memoizedState===null?pI:mI,t=n(r,s),da){i=0;do{if(da=!1,Ma=0,25<=i)throw Error(fe(301));i+=1,Lt=Nt=null,e.updateQueue=null,hu.current=gI,t=n(r,s)}while(da)}if(hu.current=Gu,e=Nt!==null&&Nt.next!==null,ti=0,Lt=Nt=yt=null,zu=!1,e)throw Error(fe(300));return t}function _p(){var t=Ma!==0;return Ma=0,t}function gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?yt.memoizedState=Lt=t:Lt=Lt.next=t,Lt}function Xn(){if(Nt===null){var t=yt.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=Lt===null?yt.memoizedState:Lt.next;if(e!==null)Lt=e,Nt=t;else{if(t===null)throw Error(fe(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Lt===null?yt.memoizedState=Lt=t:Lt=Lt.next=t}return Lt}function Da(t,e){return typeof e=="function"?e(t):e}function Od(t){var e=Xn(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=Nt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((ti&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=m,o=r):l=l.next=m,yt.lanes|=h,ni|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,dr(r,e.memoizedState)||(kn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,yt.lanes|=i,ni|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zd(t){var e=Xn(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);dr(i,e.memoizedState)||(kn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Uw(){}function Bw(t,e){var n=yt,r=Xn(),s=e(),i=!dr(r.memoizedState,s);if(i&&(r.memoizedState=s,kn=!0),r=r.queue,Ep(Gw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Lt!==null&&Lt.memoizedState.tag&1){if(n.flags|=2048,La(9,zw.bind(null,n,r,s,e),void 0,null),Vt===null)throw Error(fe(349));ti&30||Ow(n,e,s)}return s}function Ow(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zw(t,e,n,r){e.value=n,e.getSnapshot=r,Hw(e)&&$w(t)}function Gw(t,e,n){return n(function(){Hw(e)&&$w(t)})}function Hw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dr(t,n)}catch{return!0}}function $w(t){var e=jr(t,1);e!==null&&ar(e,t,1,-1)}function n0(t){var e=gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:t},e.queue=t,t=t.dispatch=fI.bind(null,yt,t),[e.memoizedState,t]}function La(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qw(){return Xn().memoizedState}function fu(t,e,n,r){var s=gr();yt.flags|=t,s.memoizedState=La(1|e,n,void 0,r===void 0?null:r)}function bc(t,e,n,r){var s=Xn();r=r===void 0?null:r;var i=void 0;if(Nt!==null){var o=Nt.memoizedState;if(i=o.destroy,r!==null&&xp(r,o.deps)){s.memoizedState=La(e,n,i,r);return}}yt.flags|=t,s.memoizedState=La(1|e,n,i,r)}function r0(t,e){return fu(8390656,8,t,e)}function Ep(t,e){return bc(2048,8,t,e)}function Ww(t,e){return bc(4,2,t,e)}function Kw(t,e){return bc(4,4,t,e)}function Jw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Yw(t,e,n){return n=n!=null?n.concat([t]):null,bc(4,4,Jw.bind(null,e,t),n)}function Tp(){}function Qw(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Xw(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Zw(t,e,n){return ti&21?(dr(n,e)||(n=sw(),yt.lanes|=n,ni|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kn=!0),t.memoizedState=n)}function dI(t,e){var n=st;st=n!==0&&4>n?n:4,t(!0);var r=Bd.transition;Bd.transition={};try{t(!1),e()}finally{st=n,Bd.transition=r}}function e_(){return Xn().memoizedState}function hI(t,e,n){var r=ps(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},t_(t))n_(e,n);else if(n=Vw(t,e,n,r),n!==null){var s=gn();ar(n,t,r,s),r_(n,e,r)}}function fI(t,e,n){var r=ps(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(t_(t))n_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,dr(a,o)){var l=e.interleaved;l===null?(s.next=s,pp(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Vw(t,e,s,r),n!==null&&(s=gn(),ar(n,t,r,s),r_(n,e,r))}}function t_(t){var e=t.alternate;return t===yt||e!==null&&e===yt}function n_(t,e){da=zu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function r_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ep(t,n)}}var Gu={readContext:Qn,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},pI={readContext:Qn,useCallback:function(t,e){return gr().memoizedState=[t,e===void 0?null:e],t},useContext:Qn,useEffect:r0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fu(4194308,4,Jw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fu(4194308,4,t,e)},useInsertionEffect:function(t,e){return fu(4,2,t,e)},useMemo:function(t,e){var n=gr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hI.bind(null,yt,t),[r.memoizedState,t]},useRef:function(t){var e=gr();return t={current:t},e.memoizedState=t},useState:n0,useDebugValue:Tp,useDeferredValue:function(t){return gr().memoizedState=t},useTransition:function(){var t=n0(!1),e=t[0];return t=dI.bind(null,t[1]),gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=yt,s=gr();if(pt){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=e(),Vt===null)throw Error(fe(349));ti&30||Ow(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,r0(Gw.bind(null,r,i,t),[t]),r.flags|=2048,La(9,zw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=gr(),e=Vt.identifierPrefix;if(pt){var n=Mr,r=Pr;n=(r&~(1<<32-or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mI={readContext:Qn,useCallback:Qw,useContext:Qn,useEffect:Ep,useImperativeHandle:Yw,useInsertionEffect:Ww,useLayoutEffect:Kw,useMemo:Xw,useReducer:Od,useRef:qw,useState:function(){return Od(Da)},useDebugValue:Tp,useDeferredValue:function(t){var e=Xn();return Zw(e,Nt.memoizedState,t)},useTransition:function(){var t=Od(Da)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:Uw,useSyncExternalStore:Bw,useId:e_,unstable_isNewReconciler:!1},gI={readContext:Qn,useCallback:Qw,useContext:Qn,useEffect:Ep,useImperativeHandle:Yw,useInsertionEffect:Ww,useLayoutEffect:Kw,useMemo:Xw,useReducer:zd,useRef:qw,useState:function(){return zd(Da)},useDebugValue:Tp,useDeferredValue:function(t){var e=Xn();return Nt===null?e.memoizedState=t:Zw(e,Nt.memoizedState,t)},useTransition:function(){var t=zd(Da)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:Uw,useSyncExternalStore:Bw,useId:e_,unstable_isNewReconciler:!1};function rr(t,e){if(t&&t.defaultProps){e=vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sc={isMounted:function(t){return(t=t._reactInternals)?hi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=gn(),s=ps(t),i=Dr(r,s);i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(ar(e,t,s,r),du(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=gn(),s=ps(t),i=Dr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(ar(e,t,s,r),du(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=gn(),r=ps(t),s=Dr(n,r);s.tag=2,e!=null&&(s.callback=e),e=hs(t,s,r),e!==null&&(ar(e,t,r,n),du(e,t,r))}};function s0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ca(n,r)||!Ca(s,i):!0}function s_(t,e,n){var r=!1,s=ws,i=e.contextType;return typeof i=="object"&&i!==null?i=Qn(i):(s=Nn(e)?Zs:cn.current,r=e.contextTypes,i=(r=r!=null)?Zi(t,s):ws),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function i0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sc.enqueueReplaceState(e,e.state,null)}function Oh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},mp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qn(i):(i=Nn(e)?Zs:cn.current,s.context=Zi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Bh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Sc.enqueueReplaceState(s,s.state,null),Bu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ro(t,e){try{var n="",r=e;do n+=H1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Gd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yI=typeof WeakMap=="function"?WeakMap:Map;function i_(t,e,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$u||($u=!0,Xh=r),zh(t,e)},n}function o_(t,e,n){n=Dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){zh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){zh(t,e),typeof r!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function o0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=RI.bind(null,t,e,n),e.then(t,t))}function a0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function l0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dr(-1,1),e.tag=2,hs(n,e,1))),n.lanes|=1),t)}var vI=$r.ReactCurrentOwner,kn=!1;function pn(t,e,n,r){e.child=t===null?Lw(e,null,n,r):to(e,t.child,n,r)}function u0(t,e,n,r,s){n=n.render;var i=e.ref;return qi(e,s),r=wp(t,e,n,r,i,s),n=_p(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ur(t,e,s)):(pt&&n&&lp(e),e.flags|=1,pn(t,e,r,s),e.child)}function c0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Rp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,a_(t,e,i,r,s)):(t=yu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ca,n(o,r)&&t.ref===e.ref)return Ur(t,e,s)}return e.flags|=1,t=ms(i,r),t.ref=e.ref,t.return=e,e.child=t}function a_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ca(i,r)&&t.ref===e.ref)if(kn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(kn=!0);else return e.lanes=t.lanes,Ur(t,e,s)}return Gh(t,e,n,r,s)}function l_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(Ui,Vn),Vn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,at(Ui,Vn),Vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,at(Ui,Vn),Vn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,at(Ui,Vn),Vn|=r;return pn(t,e,s,n),e.child}function u_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gh(t,e,n,r,s){var i=Nn(n)?Zs:cn.current;return i=Zi(e,i),qi(e,s),n=wp(t,e,n,r,i,s),r=_p(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ur(t,e,s)):(pt&&r&&lp(e),e.flags|=1,pn(t,e,n,s),e.child)}function d0(t,e,n,r,s){if(Nn(n)){var i=!0;Lu(e)}else i=!1;if(qi(e,s),e.stateNode===null)pu(t,e),s_(e,n,r),Oh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Qn(c):(c=Nn(n)?Zs:cn.current,c=Zi(e,c));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&i0(e,o,r,c),ts=!1;var g=e.memoizedState;o.state=g,Bu(e,r,o,s),l=e.memoizedState,a!==r||g!==l||An.current||ts?(typeof h=="function"&&(Bh(e,n,h,r),l=e.memoizedState),(a=ts||s0(e,n,a,r,g,l,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Fw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:rr(e.type,a),o.props=c,m=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Qn(l):(l=Nn(n)?Zs:cn.current,l=Zi(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==l)&&i0(e,o,r,l),ts=!1,g=e.memoizedState,o.state=g,Bu(e,r,o,s);var E=e.memoizedState;a!==m||g!==E||An.current||ts?(typeof y=="function"&&(Bh(e,n,y,r),E=e.memoizedState),(c=ts||s0(e,n,c,r,g,E,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Hh(t,e,n,r,i,s)}function Hh(t,e,n,r,s,i){u_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Yg(e,n,!1),Ur(t,e,i);r=e.stateNode,vI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=to(e,t.child,null,i),e.child=to(e,null,a,i)):pn(t,e,a,i),e.memoizedState=r.state,s&&Yg(e,n,!0),e.child}function c_(t){var e=t.stateNode;e.pendingContext?Jg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jg(t,e.context,!1),gp(t,e.containerInfo)}function h0(t,e,n,r,s){return eo(),cp(s),e.flags|=256,pn(t,e,n,r),e.child}var $h={dehydrated:null,treeContext:null,retryLane:0};function qh(t){return{baseLanes:t,cachePool:null,transitions:null}}function d_(t,e,n){var r=e.pendingProps,s=gt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),at(gt,s&1),t===null)return jh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=kc(o,r,0,null),t=Qs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=qh(n),e.memoizedState=$h,t):bp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return xI(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ms(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ms(a,i):(i=Qs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?qh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=$h,r}return i=t.child,t=i.sibling,r=ms(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bp(t,e){return e=kc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hl(t,e,n,r){return r!==null&&cp(r),to(e,t.child,null,n),t=bp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Gd(Error(fe(422))),Hl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=kc({mode:"visible",children:r.children},s,0,null),i=Qs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&to(e,t.child,null,o),e.child.memoizedState=qh(o),e.memoizedState=$h,i);if(!(e.mode&1))return Hl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(fe(419)),r=Gd(i,r,void 0),Hl(t,e,o,r)}if(a=(o&t.childLanes)!==0,kn||a){if(r=Vt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,jr(t,s),ar(r,t,s,-1))}return Np(),r=Gd(Error(fe(421))),Hl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=PI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fn=ds(s.nextSibling),Un=e,pt=!0,ir=null,t!==null&&(qn[Wn++]=Pr,qn[Wn++]=Mr,qn[Wn++]=ei,Pr=t.id,Mr=t.overflow,ei=e),e=bp(e,r.children),e.flags|=4096,e)}function f0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Uh(t.return,e,n)}function Hd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function h_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(pn(t,e,r.children,n),r=gt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f0(t,n,e);else if(t.tag===19)f0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(at(gt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ou(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Hd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ou(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Hd(e,!0,n,null,i);break;case"together":Hd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ur(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ni|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,n=ms(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ms(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wI(t,e,n){switch(e.tag){case 3:c_(e),eo();break;case 5:jw(e);break;case 1:Nn(e.type)&&Lu(e);break;case 4:gp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;at(ju,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(at(gt,gt.current&1),e.flags|=128,null):n&e.child.childLanes?d_(t,e,n):(at(gt,gt.current&1),t=Ur(t,e,n),t!==null?t.sibling:null);at(gt,gt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return h_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),at(gt,gt.current),r)break;return null;case 22:case 23:return e.lanes=0,l_(t,e,n)}return Ur(t,e,n)}var f_,Wh,p_,m_;f_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wh=function(){};p_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ws(xr.current);var i=null;switch(n){case"input":s=mh(t,s),r=mh(t,r),i=[];break;case"select":s=vt({},s,{value:void 0}),r=vt({},r,{value:void 0}),i=[];break;case"textarea":s=vh(t,s),r=vh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mu)}wh(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wa.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(wa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ct("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};m_=function(t,e,n,r){n!==r&&(e.flags|=4)};function qo(t,e){if(!pt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _I(t,e,n){var r=e.pendingProps;switch(up(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(e),null;case 1:return Nn(e.type)&&Du(),nn(e),null;case 3:return r=e.stateNode,no(),ht(An),ht(cn),vp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ir!==null&&(tf(ir),ir=null))),Wh(t,e),nn(e),null;case 5:yp(e);var s=Ws(Pa.current);if(n=e.type,t!==null&&e.stateNode!=null)p_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(fe(166));return nn(e),null}if(t=Ws(xr.current),zl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[yr]=e,r[Na]=i,t=(e.mode&1)!==0,n){case"dialog":ct("cancel",r),ct("close",r);break;case"iframe":case"object":case"embed":ct("load",r);break;case"video":case"audio":for(s=0;s<ea.length;s++)ct(ea[s],r);break;case"source":ct("error",r);break;case"img":case"image":case"link":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"input":Eg(r,i),ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ct("invalid",r);break;case"textarea":bg(r,i),ct("invalid",r)}wh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ol(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ol(r.textContent,a,t),s=["children",""+a]):wa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ct("scroll",r)}switch(n){case"input":Ml(r),Tg(r,i,!0);break;case"textarea":Ml(r),Sg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Mu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Gx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yr]=e,t[Na]=r,f_(t,e,!1,!1),e.stateNode=t;e:{switch(o=_h(n,r),n){case"dialog":ct("cancel",t),ct("close",t),s=r;break;case"iframe":case"object":case"embed":ct("load",t),s=r;break;case"video":case"audio":for(s=0;s<ea.length;s++)ct(ea[s],t);s=r;break;case"source":ct("error",t),s=r;break;case"img":case"image":case"link":ct("error",t),ct("load",t),s=r;break;case"details":ct("toggle",t),s=r;break;case"input":Eg(t,r),s=mh(t,r),ct("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=vt({},r,{value:void 0}),ct("invalid",t);break;case"textarea":bg(t,r),s=vh(t,r),ct("invalid",t);break;default:s=r}wh(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?qx(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Hx(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_a(t,l):typeof l=="number"&&_a(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(wa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ct("scroll",t):l!=null&&Kf(t,i,l,o))}switch(n){case"input":Ml(t),Tg(t,r,!1);break;case"textarea":Ml(t),Sg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?zi(t,!!r.multiple,i,!1):r.defaultValue!=null&&zi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Mu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nn(e),null;case 6:if(t&&e.stateNode!=null)m_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(fe(166));if(n=Ws(Pa.current),Ws(xr.current),zl(e)){if(r=e.stateNode,n=e.memoizedProps,r[yr]=e,(i=r.nodeValue!==n)&&(t=Un,t!==null))switch(t.tag){case 3:Ol(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ol(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yr]=e,e.stateNode=r}return nn(e),null;case 13:if(ht(gt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pt&&Fn!==null&&e.mode&1&&!(e.flags&128))Mw(),eo(),e.flags|=98560,i=!1;else if(i=zl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(fe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[yr]=e}else eo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nn(e),i=!1}else ir!==null&&(tf(ir),ir=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||gt.current&1?Rt===0&&(Rt=3):Np())),e.updateQueue!==null&&(e.flags|=4),nn(e),null);case 4:return no(),Wh(t,e),t===null&&ka(e.stateNode.containerInfo),nn(e),null;case 10:return fp(e.type._context),nn(e),null;case 17:return Nn(e.type)&&Du(),nn(e),null;case 19:if(ht(gt),i=e.memoizedState,i===null)return nn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)qo(i,!1);else{if(Rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ou(t),o!==null){for(e.flags|=128,qo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return at(gt,gt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Tt()>so&&(e.flags|=128,r=!0,qo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ou(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pt)return nn(e),null}else 2*Tt()-i.renderingStartTime>so&&n!==1073741824&&(e.flags|=128,r=!0,qo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Tt(),e.sibling=null,n=gt.current,at(gt,r?n&1|2:n&1),e):(nn(e),null);case 22:case 23:return Ap(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vn&1073741824&&(nn(e),e.subtreeFlags&6&&(e.flags|=8192)):nn(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function EI(t,e){switch(up(e),e.tag){case 1:return Nn(e.type)&&Du(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return no(),ht(An),ht(cn),vp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yp(e),null;case 13:if(ht(gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));eo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ht(gt),null;case 4:return no(),null;case 10:return fp(e.type._context),null;case 22:case 23:return Ap(),null;case 24:return null;default:return null}}var $l=!1,on=!1,TI=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function ji(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_t(t,e,r)}else n.current=null}function Kh(t,e,n){try{n()}catch(r){_t(t,e,r)}}var p0=!1;function bI(t,e){if(Rh=Nu,t=ww(),ap(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,m=t,g=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==i||r!==0&&m.nodeType!==3||(l=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)g=m,m=y;for(;;){if(m===t)break t;if(g===n&&++c===s&&(a=o),g===i&&++h===r&&(l=o),(y=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ph={focusedElem:t,selectionRange:n},Nu=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){e=Ee;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var x=E.memoizedProps,T=E.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:rr(e.type,x),T);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(M){_t(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}return E=p0,p0=!1,E}function ha(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Kh(e,n,i)}s=s.next}while(s!==r)}}function Ic(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function g_(t){var e=t.alternate;e!==null&&(t.alternate=null,g_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yr],delete e[Na],delete e[Lh],delete e[oI],delete e[aI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function y_(t){return t.tag===5||t.tag===3||t.tag===4}function m0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||y_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mu));else if(r!==4&&(t=t.child,t!==null))for(Yh(t,e,n),t=t.sibling;t!==null;)Yh(t,e,n),t=t.sibling}function Qh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qh(t,e,n),t=t.sibling;t!==null;)Qh(t,e,n),t=t.sibling}var Ht=null,sr=!1;function Zr(t,e,n){for(n=n.child;n!==null;)v_(t,e,n),n=n.sibling}function v_(t,e,n){if(vr&&typeof vr.onCommitFiberUnmount=="function")try{vr.onCommitFiberUnmount(vc,n)}catch{}switch(n.tag){case 5:on||ji(n,e);case 6:var r=Ht,s=sr;Ht=null,Zr(t,e,n),Ht=r,sr=s,Ht!==null&&(sr?(t=Ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ht.removeChild(n.stateNode));break;case 18:Ht!==null&&(sr?(t=Ht,n=n.stateNode,t.nodeType===8?Fd(t.parentNode,n):t.nodeType===1&&Fd(t,n),Sa(t)):Fd(Ht,n.stateNode));break;case 4:r=Ht,s=sr,Ht=n.stateNode.containerInfo,sr=!0,Zr(t,e,n),Ht=r,sr=s;break;case 0:case 11:case 14:case 15:if(!on&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Kh(n,e,o),s=s.next}while(s!==r)}Zr(t,e,n);break;case 1:if(!on&&(ji(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_t(n,e,a)}Zr(t,e,n);break;case 21:Zr(t,e,n);break;case 22:n.mode&1?(on=(r=on)||n.memoizedState!==null,Zr(t,e,n),on=r):Zr(t,e,n);break;default:Zr(t,e,n)}}function g0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TI),e.forEach(function(r){var s=MI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function nr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ht=a.stateNode,sr=!1;break e;case 3:Ht=a.stateNode.containerInfo,sr=!0;break e;case 4:Ht=a.stateNode.containerInfo,sr=!0;break e}a=a.return}if(Ht===null)throw Error(fe(160));v_(i,o,s),Ht=null,sr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){_t(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)x_(e,t),e=e.sibling}function x_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nr(e,t),mr(t),r&4){try{ha(3,t,t.return),Ic(3,t)}catch(x){_t(t,t.return,x)}try{ha(5,t,t.return)}catch(x){_t(t,t.return,x)}}break;case 1:nr(e,t),mr(t),r&512&&n!==null&&ji(n,n.return);break;case 5:if(nr(e,t),mr(t),r&512&&n!==null&&ji(n,n.return),t.flags&32){var s=t.stateNode;try{_a(s,"")}catch(x){_t(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ox(s,i),_h(a,o);var c=_h(a,i);for(o=0;o<l.length;o+=2){var h=l[o],m=l[o+1];h==="style"?qx(s,m):h==="dangerouslySetInnerHTML"?Hx(s,m):h==="children"?_a(s,m):Kf(s,h,m,c)}switch(a){case"input":gh(s,i);break;case"textarea":zx(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?zi(s,!!i.multiple,y,!1):g!==!!i.multiple&&(i.defaultValue!=null?zi(s,!!i.multiple,i.defaultValue,!0):zi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Na]=i}catch(x){_t(t,t.return,x)}}break;case 6:if(nr(e,t),mr(t),r&4){if(t.stateNode===null)throw Error(fe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){_t(t,t.return,x)}}break;case 3:if(nr(e,t),mr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sa(e.containerInfo)}catch(x){_t(t,t.return,x)}break;case 4:nr(e,t),mr(t);break;case 13:nr(e,t),mr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cp=Tt())),r&4&&g0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(on=(c=on)||h,nr(e,t),on=c):nr(e,t),mr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Ee=t,h=t.child;h!==null;){for(m=Ee=h;Ee!==null;){switch(g=Ee,y=g.child,g.tag){case 0:case 11:case 14:case 15:ha(4,g,g.return);break;case 1:ji(g,g.return);var E=g.stateNode;if(typeof E.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(x){_t(r,n,x)}}break;case 5:ji(g,g.return);break;case 22:if(g.memoizedState!==null){v0(m);continue}}y!==null?(y.return=g,Ee=y):v0(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,l=m.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$x("display",o))}catch(x){_t(t,t.return,x)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(x){_t(t,t.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:nr(e,t),mr(t),r&4&&g0(t);break;case 21:break;default:nr(e,t),mr(t)}}function mr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(y_(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(_a(s,""),r.flags&=-33);var i=m0(t);Qh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=m0(t);Yh(t,a,o);break;default:throw Error(fe(161))}}catch(l){_t(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SI(t,e,n){Ee=t,w_(t)}function w_(t,e,n){for(var r=(t.mode&1)!==0;Ee!==null;){var s=Ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||$l;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||on;a=$l;var c=on;if($l=o,(on=l)&&!c)for(Ee=s;Ee!==null;)o=Ee,l=o.child,o.tag===22&&o.memoizedState!==null?x0(s):l!==null?(l.return=o,Ee=l):x0(s);for(;i!==null;)Ee=i,w_(i),i=i.sibling;Ee=s,$l=a,on=c}y0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ee=i):y0(t)}}function y0(t){for(;Ee!==null;){var e=Ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:on||Ic(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!on)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:rr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&t0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}t0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Sa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}on||e.flags&512&&Jh(e)}catch(g){_t(e,e.return,g)}}if(e===t){Ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function v0(t){for(;Ee!==null;){var e=Ee;if(e===t){Ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function x0(t){for(;Ee!==null;){var e=Ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ic(4,e)}catch(l){_t(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){_t(e,s,l)}}var i=e.return;try{Jh(e)}catch(l){_t(e,i,l)}break;case 5:var o=e.return;try{Jh(e)}catch(l){_t(e,o,l)}}}catch(l){_t(e,e.return,l)}if(e===t){Ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ee=a;break}Ee=e.return}}var II=Math.ceil,Hu=$r.ReactCurrentDispatcher,Sp=$r.ReactCurrentOwner,Jn=$r.ReactCurrentBatchConfig,Ke=0,Vt=null,Ct=null,Wt=0,Vn=0,Ui=Cs(0),Rt=0,Va=null,ni=0,Cc=0,Ip=0,fa=null,In=null,Cp=0,so=1/0,Ar=null,$u=!1,Xh=null,fs=null,ql=!1,os=null,qu=0,pa=0,Zh=null,mu=-1,gu=0;function gn(){return Ke&6?Tt():mu!==-1?mu:mu=Tt()}function ps(t){return t.mode&1?Ke&2&&Wt!==0?Wt&-Wt:uI.transition!==null?(gu===0&&(gu=sw()),gu):(t=st,t!==0||(t=window.event,t=t===void 0?16:dw(t.type)),t):1}function ar(t,e,n,r){if(50<pa)throw pa=0,Zh=null,Error(fe(185));Ya(t,n,r),(!(Ke&2)||t!==Vt)&&(t===Vt&&(!(Ke&2)&&(Cc|=n),Rt===4&&rs(t,Wt)),Rn(t,r),n===1&&Ke===0&&!(e.mode&1)&&(so=Tt()+500,Tc&&ks()))}function Rn(t,e){var n=t.callbackNode;uS(t,e);var r=Au(t,t===Vt?Wt:0);if(r===0)n!==null&&kg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kg(n),e===1)t.tag===0?lI(w0.bind(null,t)):Nw(w0.bind(null,t)),sI(function(){!(Ke&6)&&ks()}),n=null;else{switch(iw(r)){case 1:n=Zf;break;case 4:n=nw;break;case 16:n=ku;break;case 536870912:n=rw;break;default:n=ku}n=k_(n,__.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function __(t,e){if(mu=-1,gu=0,Ke&6)throw Error(fe(327));var n=t.callbackNode;if(Wi()&&t.callbackNode!==n)return null;var r=Au(t,t===Vt?Wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wu(t,r);else{e=r;var s=Ke;Ke|=2;var i=T_();(Vt!==t||Wt!==e)&&(Ar=null,so=Tt()+500,Ys(t,e));do try{AI();break}catch(a){E_(t,a)}while(!0);hp(),Hu.current=i,Ke=s,Ct!==null?e=0:(Vt=null,Wt=0,e=Rt)}if(e!==0){if(e===2&&(s=Ih(t),s!==0&&(r=s,e=ef(t,s))),e===1)throw n=Va,Ys(t,0),rs(t,r),Rn(t,Tt()),n;if(e===6)rs(t,r);else{if(s=t.current.alternate,!(r&30)&&!CI(s)&&(e=Wu(t,r),e===2&&(i=Ih(t),i!==0&&(r=i,e=ef(t,i))),e===1))throw n=Va,Ys(t,0),rs(t,r),Rn(t,Tt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(fe(345));case 2:zs(t,In,Ar);break;case 3:if(rs(t,r),(r&130023424)===r&&(e=Cp+500-Tt(),10<e)){if(Au(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){gn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Dh(zs.bind(null,t,In,Ar),e);break}zs(t,In,Ar);break;case 4:if(rs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-or(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*II(r/1960))-r,10<r){t.timeoutHandle=Dh(zs.bind(null,t,In,Ar),r);break}zs(t,In,Ar);break;case 5:zs(t,In,Ar);break;default:throw Error(fe(329))}}}return Rn(t,Tt()),t.callbackNode===n?__.bind(null,t):null}function ef(t,e){var n=fa;return t.current.memoizedState.isDehydrated&&(Ys(t,e).flags|=256),t=Wu(t,e),t!==2&&(e=In,In=n,e!==null&&tf(e)),t}function tf(t){In===null?In=t:In.push.apply(In,t)}function CI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!dr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rs(t,e){for(e&=~Ip,e&=~Cc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-or(e),r=1<<n;t[n]=-1,e&=~r}}function w0(t){if(Ke&6)throw Error(fe(327));Wi();var e=Au(t,0);if(!(e&1))return Rn(t,Tt()),null;var n=Wu(t,e);if(t.tag!==0&&n===2){var r=Ih(t);r!==0&&(e=r,n=ef(t,r))}if(n===1)throw n=Va,Ys(t,0),rs(t,e),Rn(t,Tt()),n;if(n===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zs(t,In,Ar),Rn(t,Tt()),null}function kp(t,e){var n=Ke;Ke|=1;try{return t(e)}finally{Ke=n,Ke===0&&(so=Tt()+500,Tc&&ks())}}function ri(t){os!==null&&os.tag===0&&!(Ke&6)&&Wi();var e=Ke;Ke|=1;var n=Jn.transition,r=st;try{if(Jn.transition=null,st=1,t)return t()}finally{st=r,Jn.transition=n,Ke=e,!(Ke&6)&&ks()}}function Ap(){Vn=Ui.current,ht(Ui)}function Ys(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rI(n)),Ct!==null)for(n=Ct.return;n!==null;){var r=n;switch(up(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Du();break;case 3:no(),ht(An),ht(cn),vp();break;case 5:yp(r);break;case 4:no();break;case 13:ht(gt);break;case 19:ht(gt);break;case 10:fp(r.type._context);break;case 22:case 23:Ap()}n=n.return}if(Vt=t,Ct=t=ms(t.current,null),Wt=Vn=e,Rt=0,Va=null,Ip=Cc=ni=0,In=fa=null,qs!==null){for(e=0;e<qs.length;e++)if(n=qs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}qs=null}return t}function E_(t,e){do{var n=Ct;try{if(hp(),hu.current=Gu,zu){for(var r=yt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zu=!1}if(ti=0,Lt=Nt=yt=null,da=!1,Ma=0,Sp.current=null,n===null||n.return===null){Rt=1,Va=e,Ct=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=a0(o);if(y!==null){y.flags&=-257,l0(y,o,a,i,e),y.mode&1&&o0(i,c,e),e=y,l=c;var E=e.updateQueue;if(E===null){var x=new Set;x.add(l),e.updateQueue=x}else E.add(l);break e}else{if(!(e&1)){o0(i,c,e),Np();break e}l=Error(fe(426))}}else if(pt&&a.mode&1){var T=a0(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),l0(T,o,a,i,e),cp(ro(l,a));break e}}i=l=ro(l,a),Rt!==4&&(Rt=2),fa===null?fa=[i]:fa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=i_(i,l,e);e0(i,v);break e;case 1:a=l;var _=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(fs===null||!fs.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var M=o_(i,a,e);e0(i,M);break e}}i=i.return}while(i!==null)}S_(n)}catch(V){e=V,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(!0)}function T_(){var t=Hu.current;return Hu.current=Gu,t===null?Gu:t}function Np(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Vt===null||!(ni&268435455)&&!(Cc&268435455)||rs(Vt,Wt)}function Wu(t,e){var n=Ke;Ke|=2;var r=T_();(Vt!==t||Wt!==e)&&(Ar=null,Ys(t,e));do try{kI();break}catch(s){E_(t,s)}while(!0);if(hp(),Ke=n,Hu.current=r,Ct!==null)throw Error(fe(261));return Vt=null,Wt=0,Rt}function kI(){for(;Ct!==null;)b_(Ct)}function AI(){for(;Ct!==null&&!eS();)b_(Ct)}function b_(t){var e=C_(t.alternate,t,Vn);t.memoizedProps=t.pendingProps,e===null?S_(t):Ct=e,Sp.current=null}function S_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=EI(n,e),n!==null){n.flags&=32767,Ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rt=6,Ct=null;return}}else if(n=_I(n,e,Vn),n!==null){Ct=n;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=t}while(e!==null);Rt===0&&(Rt=5)}function zs(t,e,n){var r=st,s=Jn.transition;try{Jn.transition=null,st=1,NI(t,e,n,r)}finally{Jn.transition=s,st=r}return null}function NI(t,e,n,r){do Wi();while(os!==null);if(Ke&6)throw Error(fe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(cS(t,i),t===Vt&&(Ct=Vt=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ql||(ql=!0,k_(ku,function(){return Wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Jn.transition,Jn.transition=null;var o=st;st=1;var a=Ke;Ke|=4,Sp.current=null,bI(t,n),x_(n,t),YS(Ph),Nu=!!Rh,Ph=Rh=null,t.current=n,SI(n),tS(),Ke=a,st=o,Jn.transition=i}else t.current=n;if(ql&&(ql=!1,os=t,qu=s),i=t.pendingLanes,i===0&&(fs=null),sS(n.stateNode),Rn(t,Tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($u)throw $u=!1,t=Xh,Xh=null,t;return qu&1&&t.tag!==0&&Wi(),i=t.pendingLanes,i&1?t===Zh?pa++:(pa=0,Zh=t):pa=0,ks(),null}function Wi(){if(os!==null){var t=iw(qu),e=Jn.transition,n=st;try{if(Jn.transition=null,st=16>t?16:t,os===null)var r=!1;else{if(t=os,os=null,qu=0,Ke&6)throw Error(fe(331));var s=Ke;for(Ke|=4,Ee=t.current;Ee!==null;){var i=Ee,o=i.child;if(Ee.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ee=c;Ee!==null;){var h=Ee;switch(h.tag){case 0:case 11:case 15:ha(8,h,i)}var m=h.child;if(m!==null)m.return=h,Ee=m;else for(;Ee!==null;){h=Ee;var g=h.sibling,y=h.return;if(g_(h),h===c){Ee=null;break}if(g!==null){g.return=y,Ee=g;break}Ee=y}}}var E=i.alternate;if(E!==null){var x=E.child;if(x!==null){E.child=null;do{var T=x.sibling;x.sibling=null,x=T}while(x!==null)}}Ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ee=o;else e:for(;Ee!==null;){if(i=Ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ha(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ee=v;break e}Ee=i.return}}var _=t.current;for(Ee=_;Ee!==null;){o=Ee;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ee=b;else e:for(o=_;Ee!==null;){if(a=Ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ic(9,a)}}catch(V){_t(a,a.return,V)}if(a===o){Ee=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,Ee=M;break e}Ee=a.return}}if(Ke=s,ks(),vr&&typeof vr.onPostCommitFiberRoot=="function")try{vr.onPostCommitFiberRoot(vc,t)}catch{}r=!0}return r}finally{st=n,Jn.transition=e}}return!1}function _0(t,e,n){e=ro(n,e),e=i_(t,e,1),t=hs(t,e,1),e=gn(),t!==null&&(Ya(t,1,e),Rn(t,e))}function _t(t,e,n){if(t.tag===3)_0(t,t,n);else for(;e!==null;){if(e.tag===3){_0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fs===null||!fs.has(r))){t=ro(n,t),t=o_(e,t,1),e=hs(e,t,1),t=gn(),e!==null&&(Ya(e,1,t),Rn(e,t));break}}e=e.return}}function RI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=gn(),t.pingedLanes|=t.suspendedLanes&n,Vt===t&&(Wt&n)===n&&(Rt===4||Rt===3&&(Wt&130023424)===Wt&&500>Tt()-Cp?Ys(t,0):Ip|=n),Rn(t,e)}function I_(t,e){e===0&&(t.mode&1?(e=Vl,Vl<<=1,!(Vl&130023424)&&(Vl=4194304)):e=1);var n=gn();t=jr(t,e),t!==null&&(Ya(t,e,n),Rn(t,n))}function PI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),I_(t,n)}function MI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(e),I_(t,n)}var C_;C_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||An.current)kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kn=!1,wI(t,e,n);kn=!!(t.flags&131072)}else kn=!1,pt&&e.flags&1048576&&Rw(e,Fu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pu(t,e),t=e.pendingProps;var s=Zi(e,cn.current);qi(e,n),s=wp(null,e,r,t,s,n);var i=_p();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nn(r)?(i=!0,Lu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,mp(e),s.updater=Sc,e.stateNode=s,s._reactInternals=e,Oh(e,r,t,n),e=Hh(null,e,r,!0,i,n)):(e.tag=0,pt&&i&&lp(e),pn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=LI(r),t=rr(r,t),s){case 0:e=Gh(null,e,r,t,n);break e;case 1:e=d0(null,e,r,t,n);break e;case 11:e=u0(null,e,r,t,n);break e;case 14:e=c0(null,e,r,rr(r.type,t),n);break e}throw Error(fe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rr(r,s),Gh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rr(r,s),d0(t,e,r,s,n);case 3:e:{if(c_(e),t===null)throw Error(fe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Fw(t,e),Bu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ro(Error(fe(423)),e),e=h0(t,e,r,n,s);break e}else if(r!==s){s=ro(Error(fe(424)),e),e=h0(t,e,r,n,s);break e}else for(Fn=ds(e.stateNode.containerInfo.firstChild),Un=e,pt=!0,ir=null,n=Lw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(eo(),r===s){e=Ur(t,e,n);break e}pn(t,e,r,n)}e=e.child}return e;case 5:return jw(e),t===null&&jh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Mh(r,s)?o=null:i!==null&&Mh(r,i)&&(e.flags|=32),u_(t,e),pn(t,e,o,n),e.child;case 6:return t===null&&jh(e),null;case 13:return d_(t,e,n);case 4:return gp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=to(e,null,r,n):pn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rr(r,s),u0(t,e,r,s,n);case 7:return pn(t,e,e.pendingProps,n),e.child;case 8:return pn(t,e,e.pendingProps.children,n),e.child;case 12:return pn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,at(ju,r._currentValue),r._currentValue=o,i!==null)if(dr(i.value,o)){if(i.children===s.children&&!An.current){e=Ur(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Dr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Uh(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Uh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}pn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,qi(e,n),s=Qn(s),r=r(s),e.flags|=1,pn(t,e,r,n),e.child;case 14:return r=e.type,s=rr(r,e.pendingProps),s=rr(r.type,s),c0(t,e,r,s,n);case 15:return a_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rr(r,s),pu(t,e),e.tag=1,Nn(r)?(t=!0,Lu(e)):t=!1,qi(e,n),s_(e,r,s),Oh(e,r,s,n),Hh(null,e,r,!0,t,n);case 19:return h_(t,e,n);case 22:return l_(t,e,n)}throw Error(fe(156,e.tag))};function k_(t,e){return tw(t,e)}function DI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(t,e,n,r){return new DI(t,e,n,r)}function Rp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function LI(t){if(typeof t=="function")return Rp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yf)return 11;if(t===Qf)return 14}return 2}function ms(t,e){var n=t.alternate;return n===null?(n=Kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Rp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ai:return Qs(n.children,s,i,e);case Jf:o=8,s|=8;break;case dh:return t=Kn(12,n,e,s|2),t.elementType=dh,t.lanes=i,t;case hh:return t=Kn(13,n,e,s),t.elementType=hh,t.lanes=i,t;case fh:return t=Kn(19,n,e,s),t.elementType=fh,t.lanes=i,t;case jx:return kc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vx:o=10;break e;case Fx:o=9;break e;case Yf:o=11;break e;case Qf:o=14;break e;case es:o=16,r=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=Kn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Qs(t,e,n,r){return t=Kn(7,t,r,e),t.lanes=n,t}function kc(t,e,n,r){return t=Kn(22,t,r,e),t.elementType=jx,t.lanes=n,t.stateNode={isHidden:!1},t}function $d(t,e,n){return t=Kn(6,t,null,e),t.lanes=n,t}function qd(t,e,n){return e=Kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function VI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Id(0),this.expirationTimes=Id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Id(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Pp(t,e,n,r,s,i,o,a,l){return t=new VI(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mp(i),t}function FI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ki,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function A_(t){if(!t)return ws;t=t._reactInternals;e:{if(hi(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var n=t.type;if(Nn(n))return Aw(t,n,e)}return e}function N_(t,e,n,r,s,i,o,a,l){return t=Pp(n,r,!0,t,s,i,o,a,l),t.context=A_(null),n=t.current,r=gn(),s=ps(n),i=Dr(r,s),i.callback=e??null,hs(n,i,s),t.current.lanes=s,Ya(t,s,r),Rn(t,r),t}function Ac(t,e,n,r){var s=e.current,i=gn(),o=ps(s);return n=A_(n),e.context===null?e.context=n:e.pendingContext=n,e=Dr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hs(s,e,o),t!==null&&(ar(t,s,o,i),du(t,s,o)),o}function Ku(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function E0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mp(t,e){E0(t,e),(t=t.alternate)&&E0(t,e)}function jI(){return null}var R_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dp(t){this._internalRoot=t}Nc.prototype.render=Dp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));Ac(t,e,null,null)};Nc.prototype.unmount=Dp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ri(function(){Ac(null,t,null,null)}),e[Fr]=null}};function Nc(t){this._internalRoot=t}Nc.prototype.unstable_scheduleHydration=function(t){if(t){var e=lw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ns.length&&e!==0&&e<ns[n].priority;n++);ns.splice(n,0,t),n===0&&cw(t)}};function Lp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function T0(){}function UI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ku(o);i.call(c)}}var o=N_(e,r,t,0,null,!1,!1,"",T0);return t._reactRootContainer=o,t[Fr]=o.current,ka(t.nodeType===8?t.parentNode:t),ri(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Ku(l);a.call(c)}}var l=Pp(t,0,!1,null,null,!1,!1,"",T0);return t._reactRootContainer=l,t[Fr]=l.current,ka(t.nodeType===8?t.parentNode:t),ri(function(){Ac(e,l,n,r)}),l}function Pc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ku(o);a.call(l)}}Ac(e,o,t,s)}else o=UI(n,e,t,s,r);return Ku(o)}ow=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zo(e.pendingLanes);n!==0&&(ep(e,n|1),Rn(e,Tt()),!(Ke&6)&&(so=Tt()+500,ks()))}break;case 13:ri(function(){var r=jr(t,1);if(r!==null){var s=gn();ar(r,t,1,s)}}),Mp(t,1)}};tp=function(t){if(t.tag===13){var e=jr(t,134217728);if(e!==null){var n=gn();ar(e,t,134217728,n)}Mp(t,134217728)}};aw=function(t){if(t.tag===13){var e=ps(t),n=jr(t,e);if(n!==null){var r=gn();ar(n,t,e,r)}Mp(t,e)}};lw=function(){return st};uw=function(t,e){var n=st;try{return st=t,e()}finally{st=n}};Th=function(t,e,n){switch(e){case"input":if(gh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ec(r);if(!s)throw Error(fe(90));Bx(r),gh(r,s)}}}break;case"textarea":zx(t,n);break;case"select":e=n.value,e!=null&&zi(t,!!n.multiple,e,!1)}};Jx=kp;Yx=ri;var BI={usingClientEntryPoint:!1,Events:[Xa,Mi,Ec,Wx,Kx,kp]},Wo={findFiberByHostInstance:$s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OI={bundleType:Wo.bundleType,version:Wo.version,rendererPackageName:Wo.rendererPackageName,rendererConfig:Wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zx(t),t===null?null:t.stateNode},findFiberByHostInstance:Wo.findFiberByHostInstance||jI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wl.isDisabled&&Wl.supportsFiber)try{vc=Wl.inject(OI),vr=Wl}catch{}}Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BI;Hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lp(e))throw Error(fe(200));return FI(t,e,null,n)};Hn.createRoot=function(t,e){if(!Lp(t))throw Error(fe(299));var n=!1,r="",s=R_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Pp(t,1,!1,null,null,n,!1,r,s),t[Fr]=e.current,ka(t.nodeType===8?t.parentNode:t),new Dp(e)};Hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=Zx(e),t=t===null?null:t.stateNode,t};Hn.flushSync=function(t){return ri(t)};Hn.hydrate=function(t,e,n){if(!Rc(e))throw Error(fe(200));return Pc(null,t,e,!0,n)};Hn.hydrateRoot=function(t,e,n){if(!Lp(t))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=R_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=N_(e,null,t,1,n??null,s,!1,i,o),t[Fr]=e.current,ka(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Nc(e)};Hn.render=function(t,e,n){if(!Rc(e))throw Error(fe(200));return Pc(null,t,e,!1,n)};Hn.unmountComponentAtNode=function(t){if(!Rc(t))throw Error(fe(40));return t._reactRootContainer?(ri(function(){Pc(null,null,t,!1,function(){t._reactRootContainer=null,t[Fr]=null})}),!0):!1};Hn.unstable_batchedUpdates=kp;Hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rc(n))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return Pc(t,e,n,!1,r)};Hn.version="18.3.1-next-f1338f8080-20240426";function P_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(P_)}catch(t){console.error(t)}}P_(),Px.exports=Hn;var zI=Px.exports,b0=zI;uh.createRoot=b0.createRoot,uh.hydrateRoot=b0.hydrateRoot;var rt=(t=>(t.Home="Home",t.Projects="Projects",t.Blog="Blog",t.Gallery="Gallery",t.Music="Music",t.Messages="Messages",t.AIStudio="AIStudio",t.IGSeamless="IGSeamless",t.AdminDashboard="AdminDashboard",t))(rt||{}),mn=(t=>(t.BACKGROUND_REMOVER="bg_remove",t.HD_UPSCALE="hd_upscale",t.CREATIVE_REMIX="creative_remix",t.COLORIZE="colorize",t.SKETCH_TO_REAL="sketch_real",t))(mn||{});const io=({className:t="w-10 h-10",variant:e="dark"})=>{const n=e==="dark"?"#0f172a":"#ffffff",r=e==="dark"?"#ffffff":"#0f172a";return u.jsxs("svg",{viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[u.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",fill:n}),u.jsx("text",{x:"50%",y:"235",dominantBaseline:"middle",textAnchor:"middle",fill:r,style:{fontSize:"160px",fontWeight:"900",fontFamily:"'Plus Jakarta Sans', sans-serif",letterSpacing:"-2px",fontStyle:"normal"},children:"IRA"}),u.jsx("text",{x:"50%",y:"340",dominantBaseline:"middle",textAnchor:"middle",fill:r,textLength:"280",lengthAdjust:"spacingAndGlyphs",style:{fontSize:"32px",fontWeight:"800",fontFamily:"'Plus Jakarta Sans', sans-serif",textTransform:"uppercase",letterSpacing:"2px",opacity:.9,fontStyle:"normal"},children:"irfan rizki aditri"}),e==="light"&&u.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",stroke:"rgba(0,0,0,0.05)",strokeWidth:"2"})]})},M_=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M15 4V2"}),u.jsx("path",{d:"M15 16v-2"}),u.jsx("path",{d:"M8 9h2"}),u.jsx("path",{d:"M20 9h2"}),u.jsx("path",{d:"M17.8 11.8 19 13"}),u.jsx("path",{d:"M15 9h0"}),u.jsx("path",{d:"M17.8 6.2 19 5"}),u.jsx("path",{d:"m3 21 9-9"}),u.jsx("path",{d:"M12.2 6.2 11 5"})]}),GI=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}),u.jsx("path",{d:"M22 21H7"}),u.jsx("path",{d:"m5 11 9 9"})]}),Ju=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),u.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),u.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"})]}),Vp=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4Z"})}),Mc=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"17 8 12 3 7 8"}),u.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),D_=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"7 10 12 15 17 10"}),u.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),oo=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m15 18-6-6 6-6"})}),Fa=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m6 9 6 6 6-6"})}),ao=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M5 12h14"}),u.jsx("path",{d:"m12 5 7 7-7 7"})]}),L_=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"12",x2:"12",y1:"19",y2:"5"}),u.jsx("polyline",{points:"5 12 12 5 19 12"})]}),V_=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),u.jsx("polyline",{points:"19 12 12 19 5 12"})]}),nf=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),HI=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m9 7-5 5 5 5"}),u.jsx("path",{d:"m15 7 5 5-5 5"})]}),Dc=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),u.jsx("path",{d:"M3 3v5h5"}),u.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),u.jsx("path",{d:"M16 21h5v-5"})]}),el=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),u.jsx("path",{d:"M12 9v4"}),u.jsx("path",{d:"M12 17h.01"})]}),F_=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),u.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),u.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]}),lr=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),u.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1 4-10z"})]}),j_=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-6v-4h4v4h-4z"}),u.jsx("path",{d:"M12 12.5a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 1 0v5a.5.5 0 0 1-.5.5z"}),u.jsx("path",{d:"M12 2a10 10 0 0 1 7.07 17.07l-1.41-1.41A8 8 0 1 0 5.34 4.34l1.41 1.41A10 10 0 0 1 12 2z"}),u.jsx("text",{x:"50%",y:"55%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"14",fontWeight:"bold",children:"G"})]}),S0=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),U_=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),u.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),si=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("polyline",{points:"20 6 9 17 4 12"})}),$I=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"1"}),u.jsx("circle",{cx:"12",cy:"5",r:"1"}),u.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),_s=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M3 6h18"}),u.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),u.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),B_=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),u.jsx("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),u.jsx("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),u.jsx("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),u.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]}),Yu=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),u.jsx("path",{d:"m15 5 4 4"})]}),Fp=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),u.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),ja=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m21 2-2 2m-7.6 7.6a6 6 0 1 1-8.4-8.4 6 6 0 0 1 8.4 8.4Zm0 0 5.7 5.7a2 2 0 0 1 0 2.8l-2.8 2.8"})}),rf=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),u.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),qI=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),u.jsx("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),u.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"})]}),jp=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"})}),WI=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M12 16v-4"}),u.jsx("path",{d:"M12 8h.01"})]}),KI=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12 2v2"}),u.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),u.jsx("path",{d:"M20 12h2"}),u.jsx("path",{d:"m19.07 4.93-1.41 1.41"}),u.jsx("path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128"}),u.jsx("path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"})]}),JI=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),u.jsx("line",{x1:"4",x2:"4",y1:"22",y2:"15"})]}),YI=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:u.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),I0=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"}),u.jsx("path",{d:"m9 12 2 2 4-4"})]}),QI=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:u.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),XI=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M9 18V5l12-2v13"}),u.jsx("circle",{cx:"6",cy:"18",r:"3"}),u.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),ZI=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),u.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),eC=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),u.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),tC=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"6",cy:"6",r:"3"}),u.jsx("circle",{cx:"6",cy:"18",r:"3"}),u.jsx("line",{x1:"20",x2:"8.12",y1:"4",y2:"15.88"}),u.jsx("line",{x1:"14.47",x2:"20",y1:"14.48",y2:"20"}),u.jsx("line",{x1:"8.12",x2:"12",y1:"8.12",y2:"12"})]}),O_=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),u.jsx("line",{x1:"3",x2:"21",y1:"9",y2:"9"}),u.jsx("line",{x1:"9",x2:"9",y1:"21",y2:"9"})]}),nC=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),u.jsx("path",{d:"M3 3v5h5"})]}),rC=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("polyline",{points:"16 3 21 3 21 8"}),u.jsx("line",{x1:"4",x2:"21",y1:"20",y2:"3"}),u.jsx("polyline",{points:"21 16 21 21 16 21"}),u.jsx("line",{x1:"15",x2:"21",y1:"15",y2:"21"}),u.jsx("line",{x1:"4",x2:"9",y1:"4",y2:"9"})]}),sC=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"13",height:"13",x:"9",y:"9",rx:"2",ry:"2"}),u.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),iC=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("circle",{cx:"12",cy:"12",r:"10"})}),oC=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),aC=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"})}),lC=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"m12 2 3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),uC=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),cC=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M12 2a10 10 0 0 1 0 20z",fill:"currentColor",fillOpacity:"0.3"})]}),dC=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M6 2v14a2 2 0 0 0 2 2h14"}),u.jsx("path",{d:"M18 22V8a2 2 0 0 0-2-2H2"})]}),hC=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M3 7v6h6"}),u.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]}),fC=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5"}),u.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),u.jsx("line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5"})]}),pC=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),u.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]}),z_=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M8 14.5c2.5-1 5.5-1 8 0"}),u.jsx("path",{d:"M6.5 11.5c3.5-1.5 7.5-1.5 11 0"}),u.jsx("path",{d:"M5 8.5c4.5-2 9.5-2 14 0"})]}),mC=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),u.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]});var C0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},gC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},H_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(g=64)),r.push(n[h],n[m],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(G_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||m==null)throw new yC;const g=i<<2|a>>4;if(r.push(g),c!==64){const y=a<<4&240|c>>2;if(r.push(y),m!==64){const E=c<<6&192|m;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vC=function(t){const e=G_(t);return H_.encodeByteArray(e,!0)},Qu=function(t){return vC(t).replace(/\./g,"")},xC=function(t){try{return H_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=()=>wC().__FIREBASE_DEFAULTS__,EC=()=>{if(typeof process>"u"||typeof C0>"u")return;const t=C0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xC(t[1]);return e&&JSON.parse(e)},Up=()=>{try{return _C()||EC()||TC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bC=t=>{var e,n;return(n=(e=Up())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},SC=t=>{const e=bC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$_=()=>{var t;return(t=Up())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qu(JSON.stringify(n)),Qu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AC(){var t;const e=(t=Up())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RC(){return!AC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q_(){try{return typeof indexedDB=="object"}catch{return!1}}function W_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function PC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="FirebaseError";class As extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MC,Object.setPrototypeOf(this,As.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lc.prototype.create)}}class Lc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?DC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new As(s,a,r)}}function DC(t,e){return t.replace(LC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const LC=/\{\$([^}]+)}/g;function Xu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(k0(i)&&k0(o)){if(!Xu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function k0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=1e3,FC=2,jC=4*60*60*1e3,UC=.5;function A0(t,e=VC,n=FC){const r=e*Math.pow(n,t),s=Math.round(UC*r*(Math.random()-.5)*2);return Math.min(jC,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t){return t&&t._delegate?t._delegate:t}class Br{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new IC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zC(e))try{this.getOrInitializeService({instanceIdentifier:Gs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gs){return this.instances.has(e)}getOptions(e=Gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gs){return this.component?this.component.multipleInstances?e:Gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OC(t){return t===Gs?void 0:t}function zC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const HC={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},$C=We.INFO,qC={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},WC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=qC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bp{constructor(e){this.name=e,this._logLevel=$C,this._logHandler=WC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const KC=(t,e)=>e.some(n=>t instanceof n);let N0,R0;function JC(){return N0||(N0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YC(){return R0||(R0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K_=new WeakMap,sf=new WeakMap,J_=new WeakMap,Wd=new WeakMap,Op=new WeakMap;function QC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(gs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&K_.set(n,t)}).catch(()=>{}),Op.set(e,t),e}function XC(t){if(sf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});sf.set(t,e)}let of={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||J_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ZC(t){of=t(of)}function e2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Kd(this),e,...n);return J_.set(r,e.sort?e.sort():[e]),gs(r)}:YC().includes(t)?function(...e){return t.apply(Kd(this),e),gs(K_.get(this))}:function(...e){return gs(t.apply(Kd(this),e))}}function t2(t){return typeof t=="function"?e2(t):(t instanceof IDBTransaction&&XC(t),KC(t,JC())?new Proxy(t,of):t)}function gs(t){if(t instanceof IDBRequest)return QC(t);if(Wd.has(t))return Wd.get(t);const e=t2(t);return e!==t&&(Wd.set(t,e),Op.set(e,t)),e}const Kd=t=>Op.get(t);function Y_(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=gs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(gs(o.result),l.oldVersion,l.newVersion,gs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const n2=["get","getKey","getAll","getAllKeys","count"],r2=["put","add","delete","clear"],Jd=new Map;function P0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jd.get(e))return Jd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=r2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||n2.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Jd.set(e,i),i}ZC(t=>({...t,get:(e,n,r)=>P0(e,n)||t.get(e,n,r),has:(e,n)=>!!P0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function i2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const af="@firebase/app",M0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new Bp("@firebase/app"),o2="@firebase/app-compat",a2="@firebase/analytics-compat",l2="@firebase/analytics",u2="@firebase/app-check-compat",c2="@firebase/app-check",d2="@firebase/auth",h2="@firebase/auth-compat",f2="@firebase/database",p2="@firebase/data-connect",m2="@firebase/database-compat",g2="@firebase/functions",y2="@firebase/functions-compat",v2="@firebase/installations",x2="@firebase/installations-compat",w2="@firebase/messaging",_2="@firebase/messaging-compat",E2="@firebase/performance",T2="@firebase/performance-compat",b2="@firebase/remote-config",S2="@firebase/remote-config-compat",I2="@firebase/storage",C2="@firebase/storage-compat",k2="@firebase/firestore",A2="@firebase/vertexai-preview",N2="@firebase/firestore-compat",R2="firebase",P2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="[DEFAULT]",M2={[af]:"fire-core",[o2]:"fire-core-compat",[l2]:"fire-analytics",[a2]:"fire-analytics-compat",[c2]:"fire-app-check",[u2]:"fire-app-check-compat",[d2]:"fire-auth",[h2]:"fire-auth-compat",[f2]:"fire-rtdb",[p2]:"fire-data-connect",[m2]:"fire-rtdb-compat",[g2]:"fire-fn",[y2]:"fire-fn-compat",[v2]:"fire-iid",[x2]:"fire-iid-compat",[w2]:"fire-fcm",[_2]:"fire-fcm-compat",[E2]:"fire-perf",[T2]:"fire-perf-compat",[b2]:"fire-rc",[S2]:"fire-rc-compat",[I2]:"fire-gcs",[C2]:"fire-gcs-compat",[k2]:"fire-fst",[N2]:"fire-fst-compat",[A2]:"fire-vertex","fire-js":"fire-js",[R2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=new Map,D2=new Map,uf=new Map;function D0(t,e){try{t.container.addComponent(e)}catch(n){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Es(t){const e=t.name;if(uf.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;uf.set(e,t);for(const n of Zu.values())D0(n,t);for(const n of D2.values())D0(n,t);return!0}function tl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Lc("app","Firebase",L2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=P2;function Q_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:lf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ys.create("bad-app-name",{appName:String(s)});if(n||(n=$_()),!n)throw ys.create("no-options");const i=Zu.get(s);if(i){if(Xu(n,i.options)&&Xu(r,i.config))return i;throw ys.create("duplicate-app",{appName:s})}const o=new GC(s);for(const l of uf.values())o.addComponent(l);const a=new V2(n,r,o);return Zu.set(s,a),a}function X_(t=lf){const e=Zu.get(t);if(!e&&t===lf&&$_())return Q_();if(!e)throw ys.create("no-app",{appName:t});return e}function wr(t,e,n){var r;let s=(r=M2[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(a.join(" "));return}Es(new Br(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="firebase-heartbeat-database",U2=1,Ua="firebase-heartbeat-store";let Yd=null;function Z_(){return Yd||(Yd=Y_(j2,U2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ua)}catch(n){console.warn(n)}}}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),Yd}async function B2(t){try{const n=(await Z_()).transaction(Ua),r=await n.objectStore(Ua).get(eE(t));return await n.done,r}catch(e){if(e instanceof As)Or.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Or.warn(n.message)}}}async function L0(t,e){try{const r=(await Z_()).transaction(Ua,"readwrite");await r.objectStore(Ua).put(e,eE(t)),await r.done}catch(n){if(n instanceof As)Or.warn(n.message);else{const r=ys.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Or.warn(r.message)}}}function eE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=1024,z2=30*24*60*60*1e3;class G2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=V0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=z2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=V0(),{heartbeatsToSend:r,unsentEntries:s}=H2(this._heartbeatsCache.heartbeats),i=Qu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Or.warn(n),""}}}function V0(){return new Date().toISOString().substring(0,10)}function H2(t,e=O2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),F0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),F0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return q_()?W_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await B2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return L0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return L0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function F0(t){return Qu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t){Es(new Br("platform-logger",e=>new s2(e),"PRIVATE")),Es(new Br("heartbeat",e=>new G2(e),"PRIVATE")),wr(af,M0,t),wr(af,M0,"esm2017"),wr("fire-js","")}q2("");var W2="firebase",K2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(W2,K2,"app");const tE="@firebase/installations",zp="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=1e4,rE=`w:${zp}`,sE="FIS_v2",J2="https://firebaseinstallations.googleapis.com/v1",Y2=60*60*1e3,Q2="installations",X2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ii=new Lc(Q2,X2,Z2);function iE(t){return t instanceof As&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE({projectId:t}){return`${J2}/projects/${t}/installations`}function aE(t){return{token:t.token,requestStatus:2,expiresIn:tk(t.expiresIn),creationTime:Date.now()}}async function lE(t,e){const r=(await e.json()).error;return ii.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function uE({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ek(t,{refreshToken:e}){const n=uE(t);return n.append("Authorization",nk(e)),n}async function cE(t){const e=await t();return e.status>=500&&e.status<600?t():e}function tk(t){return Number(t.replace("s","000"))}function nk(t){return`${sE} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=oE(t),s=uE(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:sE,appId:t.appId,sdkVersion:rE},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await cE(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:aE(c.authToken)}}else throw await lE("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=/^[cdef][\w-]{21}$/,cf="";function ok(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=ak(t);return ik.test(n)?n:cf}catch{return cf}}function ak(t){return sk(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=new Map;function fE(t,e){const n=Vc(t);pE(n,e),lk(n,e)}function pE(t,e){const n=hE.get(t);if(n)for(const r of n)r(e)}function lk(t,e){const n=uk();n&&n.postMessage({key:t,fid:e}),ck()}let Ks=null;function uk(){return!Ks&&"BroadcastChannel"in self&&(Ks=new BroadcastChannel("[Firebase] FID Change"),Ks.onmessage=t=>{pE(t.data.key,t.data.fid)}),Ks}function ck(){hE.size===0&&Ks&&(Ks.close(),Ks=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="firebase-installations-database",hk=1,oi="firebase-installations-store";let Qd=null;function Gp(){return Qd||(Qd=Y_(dk,hk,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(oi)}}})),Qd}async function ec(t,e){const n=Vc(t),s=(await Gp()).transaction(oi,"readwrite"),i=s.objectStore(oi),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&fE(t,e.fid),e}async function mE(t){const e=Vc(t),r=(await Gp()).transaction(oi,"readwrite");await r.objectStore(oi).delete(e),await r.done}async function Fc(t,e){const n=Vc(t),s=(await Gp()).transaction(oi,"readwrite"),i=s.objectStore(oi),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&fE(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hp(t){let e;const n=await Fc(t.appConfig,r=>{const s=fk(r),i=pk(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===cf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function fk(t){const e=t||{fid:ok(),registrationStatus:0};return gE(e)}function pk(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ii.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=mk(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:gk(t)}:{installationEntry:e}}async function mk(t,e){try{const n=await rk(t,e);return ec(t.appConfig,n)}catch(n){throw iE(n)&&n.customData.serverCode===409?await mE(t.appConfig):await ec(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function gk(t){let e=await j0(t.appConfig);for(;e.registrationStatus===1;)await dE(100),e=await j0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Hp(t);return r||n}return e}function j0(t){return Fc(t,e=>{if(!e)throw ii.create("installation-not-found");return gE(e)})}function gE(t){return yk(t)?{fid:t.fid,registrationStatus:0}:t}function yk(t){return t.registrationStatus===1&&t.registrationTime+nE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk({appConfig:t,heartbeatServiceProvider:e},n){const r=xk(t,n),s=ek(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:rE,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await cE(()=>fetch(r,a));if(l.ok){const c=await l.json();return aE(c)}else throw await lE("Generate Auth Token",l)}function xk(t,{fid:e}){return`${oE(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $p(t,e=!1){let n;const r=await Fc(t.appConfig,i=>{if(!yE(i))throw ii.create("not-registered");const o=i.authToken;if(!e&&Ek(o))return i;if(o.requestStatus===1)return n=wk(t,e),i;{if(!navigator.onLine)throw ii.create("app-offline");const a=bk(i);return n=_k(t,a),a}});return n?await n:r.authToken}async function wk(t,e){let n=await U0(t.appConfig);for(;n.authToken.requestStatus===1;)await dE(100),n=await U0(t.appConfig);const r=n.authToken;return r.requestStatus===0?$p(t,e):r}function U0(t){return Fc(t,e=>{if(!yE(e))throw ii.create("not-registered");const n=e.authToken;return Sk(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function _k(t,e){try{const n=await vk(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await ec(t.appConfig,r),n}catch(n){if(iE(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await mE(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ec(t.appConfig,r)}throw n}}function yE(t){return t!==void 0&&t.registrationStatus===2}function Ek(t){return t.requestStatus===2&&!Tk(t)}function Tk(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Y2}function bk(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Sk(t){return t.requestStatus===1&&t.requestTime+nE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ik(t){const e=t,{installationEntry:n,registrationPromise:r}=await Hp(e);return r?r.catch(console.error):$p(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(t,e=!1){const n=t;return await kk(n),(await $p(n,e)).token}async function kk(t){const{registrationPromise:e}=await Hp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t){if(!t||!t.options)throw Xd("App Configuration");if(!t.name)throw Xd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Xd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Xd(t){return ii.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="installations",Nk="installations-internal",Rk=t=>{const e=t.getProvider("app").getImmediate(),n=Ak(e),r=tl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Pk=t=>{const e=t.getProvider("app").getImmediate(),n=tl(e,vE).getImmediate();return{getId:()=>Ik(n),getToken:s=>Ck(n,s)}};function Mk(){Es(new Br(vE,Rk,"PUBLIC")),Es(new Br(Nk,Pk,"PRIVATE"))}Mk();wr(tE,zp);wr(tE,zp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc="analytics",Dk="firebase_id",Lk="origin",Vk=60*1e3,Fk="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn=new Bp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Bn=new Lc("analytics","Analytics",jk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t){if(!t.startsWith(qp)){const e=Bn.create("invalid-gtag-resource",{gtagURL:t});return Pn.warn(e.message),""}return t}function xE(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Bk(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Ok(t,e){const n=Bk("firebase-js-sdk-policy",{createScriptURL:Uk}),r=document.createElement("script"),s=`${qp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function zk(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Gk(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await xE(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){Pn.error(a)}t("config",s,i)}async function Hk(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await xE(n);for(const l of o){const c=a.find(m=>m.measurementId===l),h=c&&e[c.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Pn.error(i)}}function $k(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await Hk(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await Gk(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Pn.error(a)}}return s}function qk(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=$k(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function Wk(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(qp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=30,Jk=1e3;class Yk{constructor(e={},n=Jk){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const wE=new Yk;function Qk(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Xk(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:Qk(r)},i=Fk.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Bn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function Zk(t,e=wE,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Bn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Bn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new nA;return setTimeout(async()=>{a.abort()},Vk),_E({appId:r,apiKey:s,measurementId:i},o,a,e)}async function _E(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=wE){var i;const{appId:o,measurementId:a}=t;try{await eA(r,e)}catch(l){if(a)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await Xk(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!tA(c)){if(s.deleteThrottleMetadata(o),a)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?A0(n,s.intervalMillis,Kk):A0(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(o,m),Pn.debug(`Calling attemptFetch again in ${h} millis`),_E(t,m,r,s)}}function eA(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Bn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function tA(t){if(!(t instanceof As)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class nA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function rA(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(){if(q_())try{await W_()}catch(t){return Pn.warn(Bn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Pn.warn(Bn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function iA(t,e,n,r,s,i,o){var a;const l=Zk(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Pn.error(y)),e.push(l);const c=sA().then(y=>{if(y)return r.getId()}),[h,m]=await Promise.all([l,c]);Wk(i)||Ok(i,h.measurementId),s("js",new Date);const g=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return g[Lk]="firebase",g.update=!0,m!=null&&(g[Dk]=m),s("config",h.measurementId,g),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.app=e}_delete(){return delete ma[this.app.options.appId],Promise.resolve()}}let ma={},B0=[];const O0={};let Zd="dataLayer",aA="gtag",z0,EE,G0=!1;function lA(){const t=[];if(NC()&&t.push("This is a browser extension environment."),PC()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Bn.create("invalid-analytics-context",{errorInfo:e});Pn.warn(n.message)}}function uA(t,e,n){lA();const r=t.options.appId;if(!r)throw Bn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Bn.create("no-api-key");if(ma[r]!=null)throw Bn.create("already-exists",{id:r});if(!G0){zk(Zd);const{wrappedGtag:i,gtagCore:o}=qk(ma,B0,O0,Zd,aA);EE=i,z0=o,G0=!0}return ma[r]=iA(t,B0,O0,e,z0,Zd,n),new oA(t)}function cA(t=X_()){t=zn(t);const e=tl(t,tc);return e.isInitialized()?e.getImmediate():dA(t)}function dA(t,e={}){const n=tl(t,tc);if(n.isInitialized()){const s=n.getImmediate();if(Xu(e,n.getOptions()))return s;throw Bn.create("already-initialized")}return n.initialize({options:e})}function hA(t,e,n,r){t=zn(t),rA(EE,ma[t.app.options.appId],e,n,r).catch(s=>Pn.error(s))}const H0="@firebase/analytics",$0="0.10.8";function fA(){Es(new Br(tc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return uA(r,s,n)},"PUBLIC")),Es(new Br("analytics-internal",t,"PRIVATE")),wr(H0,$0),wr(H0,$0,"esm2017");function t(e){try{const n=e.getProvider(tc).getImmediate();return{logEvent:(r,s,i)=>hA(n,r,s,i)}}catch(n){throw Bn.create("interop-component-reg-failed",{reason:n})}}}fA();var q0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xs,TE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,N){function A(){}A.prototype=N.prototype,k.D=N.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(P,j,R){for(var D=Array(arguments.length-2),S=2;S<arguments.length;S++)D[S-2]=arguments[S];return N.prototype[j].apply(P,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,N,A){A||(A=0);var P=Array(16);if(typeof N=="string")for(var j=0;16>j;++j)P[j]=N.charCodeAt(A++)|N.charCodeAt(A++)<<8|N.charCodeAt(A++)<<16|N.charCodeAt(A++)<<24;else for(j=0;16>j;++j)P[j]=N[A++]|N[A++]<<8|N[A++]<<16|N[A++]<<24;N=k.g[0],A=k.g[1],j=k.g[2];var R=k.g[3],D=N+(R^A&(j^R))+P[0]+3614090360&4294967295;N=A+(D<<7&4294967295|D>>>25),D=R+(j^N&(A^j))+P[1]+3905402710&4294967295,R=N+(D<<12&4294967295|D>>>20),D=j+(A^R&(N^A))+P[2]+606105819&4294967295,j=R+(D<<17&4294967295|D>>>15),D=A+(N^j&(R^N))+P[3]+3250441966&4294967295,A=j+(D<<22&4294967295|D>>>10),D=N+(R^A&(j^R))+P[4]+4118548399&4294967295,N=A+(D<<7&4294967295|D>>>25),D=R+(j^N&(A^j))+P[5]+1200080426&4294967295,R=N+(D<<12&4294967295|D>>>20),D=j+(A^R&(N^A))+P[6]+2821735955&4294967295,j=R+(D<<17&4294967295|D>>>15),D=A+(N^j&(R^N))+P[7]+4249261313&4294967295,A=j+(D<<22&4294967295|D>>>10),D=N+(R^A&(j^R))+P[8]+1770035416&4294967295,N=A+(D<<7&4294967295|D>>>25),D=R+(j^N&(A^j))+P[9]+2336552879&4294967295,R=N+(D<<12&4294967295|D>>>20),D=j+(A^R&(N^A))+P[10]+4294925233&4294967295,j=R+(D<<17&4294967295|D>>>15),D=A+(N^j&(R^N))+P[11]+2304563134&4294967295,A=j+(D<<22&4294967295|D>>>10),D=N+(R^A&(j^R))+P[12]+1804603682&4294967295,N=A+(D<<7&4294967295|D>>>25),D=R+(j^N&(A^j))+P[13]+4254626195&4294967295,R=N+(D<<12&4294967295|D>>>20),D=j+(A^R&(N^A))+P[14]+2792965006&4294967295,j=R+(D<<17&4294967295|D>>>15),D=A+(N^j&(R^N))+P[15]+1236535329&4294967295,A=j+(D<<22&4294967295|D>>>10),D=N+(j^R&(A^j))+P[1]+4129170786&4294967295,N=A+(D<<5&4294967295|D>>>27),D=R+(A^j&(N^A))+P[6]+3225465664&4294967295,R=N+(D<<9&4294967295|D>>>23),D=j+(N^A&(R^N))+P[11]+643717713&4294967295,j=R+(D<<14&4294967295|D>>>18),D=A+(R^N&(j^R))+P[0]+3921069994&4294967295,A=j+(D<<20&4294967295|D>>>12),D=N+(j^R&(A^j))+P[5]+3593408605&4294967295,N=A+(D<<5&4294967295|D>>>27),D=R+(A^j&(N^A))+P[10]+38016083&4294967295,R=N+(D<<9&4294967295|D>>>23),D=j+(N^A&(R^N))+P[15]+3634488961&4294967295,j=R+(D<<14&4294967295|D>>>18),D=A+(R^N&(j^R))+P[4]+3889429448&4294967295,A=j+(D<<20&4294967295|D>>>12),D=N+(j^R&(A^j))+P[9]+568446438&4294967295,N=A+(D<<5&4294967295|D>>>27),D=R+(A^j&(N^A))+P[14]+3275163606&4294967295,R=N+(D<<9&4294967295|D>>>23),D=j+(N^A&(R^N))+P[3]+4107603335&4294967295,j=R+(D<<14&4294967295|D>>>18),D=A+(R^N&(j^R))+P[8]+1163531501&4294967295,A=j+(D<<20&4294967295|D>>>12),D=N+(j^R&(A^j))+P[13]+2850285829&4294967295,N=A+(D<<5&4294967295|D>>>27),D=R+(A^j&(N^A))+P[2]+4243563512&4294967295,R=N+(D<<9&4294967295|D>>>23),D=j+(N^A&(R^N))+P[7]+1735328473&4294967295,j=R+(D<<14&4294967295|D>>>18),D=A+(R^N&(j^R))+P[12]+2368359562&4294967295,A=j+(D<<20&4294967295|D>>>12),D=N+(A^j^R)+P[5]+4294588738&4294967295,N=A+(D<<4&4294967295|D>>>28),D=R+(N^A^j)+P[8]+2272392833&4294967295,R=N+(D<<11&4294967295|D>>>21),D=j+(R^N^A)+P[11]+1839030562&4294967295,j=R+(D<<16&4294967295|D>>>16),D=A+(j^R^N)+P[14]+4259657740&4294967295,A=j+(D<<23&4294967295|D>>>9),D=N+(A^j^R)+P[1]+2763975236&4294967295,N=A+(D<<4&4294967295|D>>>28),D=R+(N^A^j)+P[4]+1272893353&4294967295,R=N+(D<<11&4294967295|D>>>21),D=j+(R^N^A)+P[7]+4139469664&4294967295,j=R+(D<<16&4294967295|D>>>16),D=A+(j^R^N)+P[10]+3200236656&4294967295,A=j+(D<<23&4294967295|D>>>9),D=N+(A^j^R)+P[13]+681279174&4294967295,N=A+(D<<4&4294967295|D>>>28),D=R+(N^A^j)+P[0]+3936430074&4294967295,R=N+(D<<11&4294967295|D>>>21),D=j+(R^N^A)+P[3]+3572445317&4294967295,j=R+(D<<16&4294967295|D>>>16),D=A+(j^R^N)+P[6]+76029189&4294967295,A=j+(D<<23&4294967295|D>>>9),D=N+(A^j^R)+P[9]+3654602809&4294967295,N=A+(D<<4&4294967295|D>>>28),D=R+(N^A^j)+P[12]+3873151461&4294967295,R=N+(D<<11&4294967295|D>>>21),D=j+(R^N^A)+P[15]+530742520&4294967295,j=R+(D<<16&4294967295|D>>>16),D=A+(j^R^N)+P[2]+3299628645&4294967295,A=j+(D<<23&4294967295|D>>>9),D=N+(j^(A|~R))+P[0]+4096336452&4294967295,N=A+(D<<6&4294967295|D>>>26),D=R+(A^(N|~j))+P[7]+1126891415&4294967295,R=N+(D<<10&4294967295|D>>>22),D=j+(N^(R|~A))+P[14]+2878612391&4294967295,j=R+(D<<15&4294967295|D>>>17),D=A+(R^(j|~N))+P[5]+4237533241&4294967295,A=j+(D<<21&4294967295|D>>>11),D=N+(j^(A|~R))+P[12]+1700485571&4294967295,N=A+(D<<6&4294967295|D>>>26),D=R+(A^(N|~j))+P[3]+2399980690&4294967295,R=N+(D<<10&4294967295|D>>>22),D=j+(N^(R|~A))+P[10]+4293915773&4294967295,j=R+(D<<15&4294967295|D>>>17),D=A+(R^(j|~N))+P[1]+2240044497&4294967295,A=j+(D<<21&4294967295|D>>>11),D=N+(j^(A|~R))+P[8]+1873313359&4294967295,N=A+(D<<6&4294967295|D>>>26),D=R+(A^(N|~j))+P[15]+4264355552&4294967295,R=N+(D<<10&4294967295|D>>>22),D=j+(N^(R|~A))+P[6]+2734768916&4294967295,j=R+(D<<15&4294967295|D>>>17),D=A+(R^(j|~N))+P[13]+1309151649&4294967295,A=j+(D<<21&4294967295|D>>>11),D=N+(j^(A|~R))+P[4]+4149444226&4294967295,N=A+(D<<6&4294967295|D>>>26),D=R+(A^(N|~j))+P[11]+3174756917&4294967295,R=N+(D<<10&4294967295|D>>>22),D=j+(N^(R|~A))+P[2]+718787259&4294967295,j=R+(D<<15&4294967295|D>>>17),D=A+(R^(j|~N))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+N&4294967295,k.g[1]=k.g[1]+(j+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+j&4294967295,k.g[3]=k.g[3]+R&4294967295}r.prototype.u=function(k,N){N===void 0&&(N=k.length);for(var A=N-this.blockSize,P=this.B,j=this.h,R=0;R<N;){if(j==0)for(;R<=A;)s(this,k,R),R+=this.blockSize;if(typeof k=="string"){for(;R<N;)if(P[j++]=k.charCodeAt(R++),j==this.blockSize){s(this,P),j=0;break}}else for(;R<N;)if(P[j++]=k[R++],j==this.blockSize){s(this,P),j=0;break}}this.h=j,this.o+=N},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var N=1;N<k.length-8;++N)k[N]=0;var A=8*this.o;for(N=k.length-8;N<k.length;++N)k[N]=A&255,A/=256;for(this.u(k),k=Array(16),N=A=0;4>N;++N)for(var P=0;32>P;P+=8)k[A++]=this.g[N]>>>P&255;return k};function i(k,N){var A=a;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=N(k)}function o(k,N){this.h=N;for(var A=[],P=!0,j=k.length-1;0<=j;j--){var R=k[j]|0;P&&R==N||(A[j]=R,P=!1)}this.g=A}var a={};function l(k){return-128<=k&&128>k?i(k,function(N){return new o([N|0],0>N?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return m;if(0>k)return T(c(-k));for(var N=[],A=1,P=0;k>=A;P++)N[P]=k/A|0,A*=4294967296;return new o(N,0)}function h(k,N){if(k.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(k.charAt(0)=="-")return T(h(k.substring(1),N));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(N,8)),P=m,j=0;j<k.length;j+=8){var R=Math.min(8,k.length-j),D=parseInt(k.substring(j,j+R),N);8>R?(R=c(Math.pow(N,R)),P=P.j(R).add(c(D))):(P=P.j(A),P=P.add(c(D)))}return P}var m=l(0),g=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-T(this).m();for(var k=0,N=1,A=0;A<this.g.length;A++){var P=this.i(A);k+=(0<=P?P:4294967296+P)*N,N*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(E(this))return"0";if(x(this))return"-"+T(this).toString(k);for(var N=c(Math.pow(k,6)),A=this,P="";;){var j=M(A,N).g;A=v(A,j.j(N));var R=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=j,E(A))return R+P;for(;6>R.length;)R="0"+R;P=R+P}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function E(k){if(k.h!=0)return!1;for(var N=0;N<k.g.length;N++)if(k.g[N]!=0)return!1;return!0}function x(k){return k.h==-1}t.l=function(k){return k=v(this,k),x(k)?-1:E(k)?0:1};function T(k){for(var N=k.g.length,A=[],P=0;P<N;P++)A[P]=~k.g[P];return new o(A,~k.h).add(g)}t.abs=function(){return x(this)?T(this):this},t.add=function(k){for(var N=Math.max(this.g.length,k.g.length),A=[],P=0,j=0;j<=N;j++){var R=P+(this.i(j)&65535)+(k.i(j)&65535),D=(R>>>16)+(this.i(j)>>>16)+(k.i(j)>>>16);P=D>>>16,R&=65535,D&=65535,A[j]=D<<16|R}return new o(A,A[A.length-1]&-2147483648?-1:0)};function v(k,N){return k.add(T(N))}t.j=function(k){if(E(this)||E(k))return m;if(x(this))return x(k)?T(this).j(T(k)):T(T(this).j(k));if(x(k))return T(this.j(T(k)));if(0>this.l(y)&&0>k.l(y))return c(this.m()*k.m());for(var N=this.g.length+k.g.length,A=[],P=0;P<2*N;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var j=0;j<k.g.length;j++){var R=this.i(P)>>>16,D=this.i(P)&65535,S=k.i(j)>>>16,K=k.i(j)&65535;A[2*P+2*j]+=D*K,_(A,2*P+2*j),A[2*P+2*j+1]+=R*K,_(A,2*P+2*j+1),A[2*P+2*j+1]+=D*S,_(A,2*P+2*j+1),A[2*P+2*j+2]+=R*S,_(A,2*P+2*j+2)}for(P=0;P<N;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=N;P<2*N;P++)A[P]=0;return new o(A,0)};function _(k,N){for(;(k[N]&65535)!=k[N];)k[N+1]+=k[N]>>>16,k[N]&=65535,N++}function b(k,N){this.g=k,this.h=N}function M(k,N){if(E(N))throw Error("division by zero");if(E(k))return new b(m,m);if(x(k))return N=M(T(k),N),new b(T(N.g),T(N.h));if(x(N))return N=M(k,T(N)),new b(T(N.g),N.h);if(30<k.g.length){if(x(k)||x(N))throw Error("slowDivide_ only works with positive integers.");for(var A=g,P=N;0>=P.l(k);)A=V(A),P=V(P);var j=B(A,1),R=B(P,1);for(P=B(P,2),A=B(A,2);!E(P);){var D=R.add(P);0>=D.l(k)&&(j=j.add(A),R=D),P=B(P,1),A=B(A,1)}return N=v(k,j.j(N)),new b(j,N)}for(j=m;0<=k.l(N);){for(A=Math.max(1,Math.floor(k.m()/N.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),R=c(A),D=R.j(N);x(D)||0<D.l(k);)A-=P,R=c(A),D=R.j(N);E(R)&&(R=g),j=j.add(R),k=v(k,D)}return new b(j,k)}t.A=function(k){return M(this,k).h},t.and=function(k){for(var N=Math.max(this.g.length,k.g.length),A=[],P=0;P<N;P++)A[P]=this.i(P)&k.i(P);return new o(A,this.h&k.h)},t.or=function(k){for(var N=Math.max(this.g.length,k.g.length),A=[],P=0;P<N;P++)A[P]=this.i(P)|k.i(P);return new o(A,this.h|k.h)},t.xor=function(k){for(var N=Math.max(this.g.length,k.g.length),A=[],P=0;P<N;P++)A[P]=this.i(P)^k.i(P);return new o(A,this.h^k.h)};function V(k){for(var N=k.g.length+1,A=[],P=0;P<N;P++)A[P]=k.i(P)<<1|k.i(P-1)>>>31;return new o(A,k.h)}function B(k,N){var A=N>>5;N%=32;for(var P=k.g.length-A,j=[],R=0;R<P;R++)j[R]=0<N?k.i(R+A)>>>N|k.i(R+A+1)<<32-N:k.i(R+A);return new o(j,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,TE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Xs=o}).apply(typeof q0<"u"?q0:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bE,ta,SE,vu,df,IE,CE,kE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,w,I){return f==Array.prototype||f==Object.prototype||(f[w]=I.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var w=0;w<f.length;++w){var I=f[w];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(f,w){if(w)e:{var I=r;f=f.split(".");for(var F=0;F<f.length-1;F++){var J=f[F];if(!(J in I))break e;I=I[J]}f=f[f.length-1],F=I[f],w=w(F),w!=F&&w!=null&&e(I,f,{configurable:!0,writable:!0,value:w})}}function i(f,w){f instanceof String&&(f+="");var I=0,F=!1,J={next:function(){if(!F&&I<f.length){var te=I++;return{value:w(te,f[te]),done:!1}}return F=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}s("Array.prototype.values",function(f){return f||function(){return i(this,function(w,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var w=typeof f;return w=w!="object"?w:f?Array.isArray(f)?"array":w:"null",w=="array"||w=="object"&&typeof f.length=="number"}function c(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function h(f,w,I){return f.call.apply(f.bind,arguments)}function m(f,w,I){if(!f)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,F),f.apply(w,J)}}return function(){return f.apply(w,arguments)}}function g(f,w,I){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,g.apply(null,arguments)}function y(f,w){var I=Array.prototype.slice.call(arguments,1);return function(){var F=I.slice();return F.push.apply(F,arguments),f.apply(this,F)}}function E(f,w){function I(){}I.prototype=w.prototype,f.aa=w.prototype,f.prototype=new I,f.prototype.constructor=f,f.Qb=function(F,J,te){for(var me=Array(arguments.length-2),it=2;it<arguments.length;it++)me[it-2]=arguments[it];return w.prototype[J].apply(F,me)}}function x(f){const w=f.length;if(0<w){const I=Array(w);for(let F=0;F<w;F++)I[F]=f[F];return I}return[]}function T(f,w){for(let I=1;I<arguments.length;I++){const F=arguments[I];if(l(F)){const J=f.length||0,te=F.length||0;f.length=J+te;for(let me=0;me<te;me++)f[J+me]=F[me]}else f.push(F)}}class v{constructor(w,I){this.i=w,this.j=I,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function _(f){return/^[\s\xa0]*$/.test(f)}function b(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function M(f){return M[" "](f),f}M[" "]=function(){};var V=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function B(f,w,I){for(const F in f)w.call(I,f[F],F,f)}function k(f,w){for(const I in f)w.call(void 0,f[I],I,f)}function N(f){const w={};for(const I in f)w[I]=f[I];return w}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(f,w){let I,F;for(let J=1;J<arguments.length;J++){F=arguments[J];for(I in F)f[I]=F[I];for(let te=0;te<A.length;te++)I=A[te],Object.prototype.hasOwnProperty.call(F,I)&&(f[I]=F[I])}}function j(f){var w=1;f=f.split(":");const I=[];for(;0<w&&f.length;)I.push(f.shift()),w--;return f.length&&I.push(f.join(":")),I}function R(f){a.setTimeout(()=>{throw f},0)}function D(){var f=$;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class S{constructor(){this.h=this.g=null}add(w,I){const F=K.get();F.set(w,I),this.h?this.h.next=F:this.g=F,this.h=F}}var K=new v(()=>new he,f=>f.reset());class he{constructor(){this.next=this.g=this.h=null}set(w,I){this.h=w,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,ee=!1,$=new S,le=()=>{const f=a.Promise.resolve(void 0);ne=()=>{f.then(q)}};var q=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(I){R(I)}var w=K;w.j(f),100>w.h&&(w.h++,f.next=w.g,w.g=f)}ee=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const I=()=>{};a.addEventListener("test",I,w),a.removeEventListener("test",I,w)}catch{}return f}();function ie(f,w){if(z.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var I=this.type=f.type,F=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget){if(V){e:{try{M(w.nodeName);var J=!0;break e}catch{}J=!1}J||(w=null)}}else I=="mouseover"?w=f.fromElement:I=="mouseout"&&(w=f.toElement);this.relatedTarget=w,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ke[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ie.aa.h.call(this)}}E(ie,z);var ke={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),Ae=0;function Be(f,w,I,F,J){this.listener=f,this.proxy=null,this.src=w,this.type=I,this.capture=!!F,this.ha=J,this.key=++Ae,this.da=this.fa=!1}function Le(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ze(f){this.src=f,this.g={},this.h=0}Ze.prototype.add=function(f,w,I,F,J){var te=f.toString();f=this.g[te],f||(f=this.g[te]=[],this.h++);var me=ot(f,w,F,J);return-1<me?(w=f[me],I||(w.fa=!1)):(w=new Be(w,this.src,te,!!F,J),w.fa=I,f.push(w)),w};function At(f,w){var I=w.type;if(I in f.g){var F=f.g[I],J=Array.prototype.indexOf.call(F,w,void 0),te;(te=0<=J)&&Array.prototype.splice.call(F,J,1),te&&(Le(w),f.g[I].length==0&&(delete f.g[I],f.h--))}}function ot(f,w,I,F){for(var J=0;J<f.length;++J){var te=f[J];if(!te.da&&te.listener==w&&te.capture==!!I&&te.ha==F)return J}return-1}var C="closure_lm_"+(1e6*Math.random()|0),re={};function X(f,w,I,F,J){if(Array.isArray(w)){for(var te=0;te<w.length;te++)X(f,w[te],I,F,J);return null}return I=pe(I),f&&f[ze]?f.K(w,I,c(F)?!!F.capture:!1,J):O(f,w,I,!1,F,J)}function O(f,w,I,F,J,te){if(!w)throw Error("Invalid event type");var me=c(J)?!!J.capture:!!J,it=ue(f);if(it||(f[C]=it=new Ze(f)),I=it.add(w,I,F,me,te),I.proxy)return I;if(F=U(),I.proxy=F,F.src=f,F.listener=I,f.addEventListener)se||(J=me),J===void 0&&(J=!1),f.addEventListener(w.toString(),F,J);else if(f.attachEvent)f.attachEvent(ce(w.toString()),F);else if(f.addListener&&f.removeListener)f.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return I}function U(){function f(I){return w.call(f.src,f.listener,I)}const w=Y;return f}function H(f,w,I,F,J){if(Array.isArray(w))for(var te=0;te<w.length;te++)H(f,w[te],I,F,J);else F=c(F)?!!F.capture:!!F,I=pe(I),f&&f[ze]?(f=f.i,w=String(w).toString(),w in f.g&&(te=f.g[w],I=ot(te,I,F,J),-1<I&&(Le(te[I]),Array.prototype.splice.call(te,I,1),te.length==0&&(delete f.g[w],f.h--)))):f&&(f=ue(f))&&(w=f.g[w.toString()],f=-1,w&&(f=ot(w,I,F,J)),(I=-1<f?w[f]:null)&&oe(I))}function oe(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[ze])At(w.i,f);else{var I=f.type,F=f.proxy;w.removeEventListener?w.removeEventListener(I,F,f.capture):w.detachEvent?w.detachEvent(ce(I),F):w.addListener&&w.removeListener&&w.removeListener(F),(I=ue(w))?(At(I,f),I.h==0&&(I.src=null,w[C]=null)):Le(f)}}}function ce(f){return f in re?re[f]:re[f]="on"+f}function Y(f,w){if(f.da)f=!0;else{w=new ie(w,this);var I=f.listener,F=f.ha||f.src;f.fa&&oe(f),f=I.call(F,w)}return f}function ue(f){return f=f[C],f instanceof Ze?f:null}var ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function pe(f){return typeof f=="function"?f:(f[ge]||(f[ge]=function(w){return f.handleEvent(w)}),f[ge])}function ye(){L.call(this),this.i=new Ze(this),this.M=this,this.F=null}E(ye,L),ye.prototype[ze]=!0,ye.prototype.removeEventListener=function(f,w,I,F){H(this,f,w,I,F)};function Ie(f,w){var I,F=f.F;if(F)for(I=[];F;F=F.F)I.push(F);if(f=f.M,F=w.type||w,typeof w=="string")w=new z(w,f);else if(w instanceof z)w.target=w.target||f;else{var J=w;w=new z(F,f),P(w,J)}if(J=!0,I)for(var te=I.length-1;0<=te;te--){var me=w.g=I[te];J=Ce(me,F,!0,w)&&J}if(me=w.g=f,J=Ce(me,F,!0,w)&&J,J=Ce(me,F,!1,w)&&J,I)for(te=0;te<I.length;te++)me=w.g=I[te],J=Ce(me,F,!1,w)&&J}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var f=this.i,w;for(w in f.g){for(var I=f.g[w],F=0;F<I.length;F++)Le(I[F]);delete f.g[w],f.h--}}this.F=null},ye.prototype.K=function(f,w,I,F){return this.i.add(String(f),w,!1,I,F)},ye.prototype.L=function(f,w,I,F){return this.i.add(String(f),w,!0,I,F)};function Ce(f,w,I,F){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();for(var J=!0,te=0;te<w.length;++te){var me=w[te];if(me&&!me.da&&me.capture==I){var it=me.listener,Gt=me.ha||me.src;me.fa&&At(f.i,me),J=it.call(Gt,F)!==!1&&J}}return J&&!F.defaultPrevented}function bt(f,w,I){if(typeof f=="function")I&&(f=g(f,I));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:a.setTimeout(f,w||0)}function En(f){f.g=bt(()=>{f.g=null,f.i&&(f.i=!1,En(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class Ut extends L{constructor(w,I){super(),this.m=w,this.l=I,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:En(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function W(f){L.call(this),this.h=f,this.g={}}E(W,L);var Z=[];function be(f){B(f.g,function(w,I){this.g.hasOwnProperty(I)&&oe(w)},f),f.g={}}W.prototype.N=function(){W.aa.N.call(this),be(this)},W.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ve=a.JSON.stringify,He=a.JSON.parse,St=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Ge(){}Ge.prototype.h=null;function Tn(f){return f.h||(f.h=f.i())}function bn(){}var dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hn(){z.call(this,"d")}E(hn,z);function Bt(){z.call(this,"c")}E(Bt,z);var Qt={},Ir=null;function er(){return Ir=Ir||new ye}Qt.La="serverreachability";function gi(f){z.call(this,Qt.La,f)}E(gi,z);function Ds(f){const w=er();Ie(w,new gi(w))}Qt.STAT_EVENT="statevent";function ml(f,w){z.call(this,Qt.STAT_EVENT,f),this.stat=w}E(ml,z);function Ot(f){const w=er();Ie(w,new ml(w,f))}Qt.Ma="timingevent";function gl(f,w){z.call(this,Qt.Ma,f),this.size=w}E(gl,z);function Ls(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},w)}function Jr(){this.g=!0}Jr.prototype.xa=function(){this.g=!1};function dd(f,w,I,F,J,te){f.info(function(){if(f.g)if(te)for(var me="",it=te.split("&"),Gt=0;Gt<it.length;Gt++){var Ye=it[Gt].split("=");if(1<Ye.length){var Zt=Ye[0];Ye=Ye[1];var en=Zt.split("_");me=2<=en.length&&en[1]=="type"?me+(Zt+"="+Ye+"&"):me+(Zt+"=redacted&")}}else me=null;else me=te;return"XMLHTTP REQ ("+F+") [attempt "+J+"]: "+w+`
`+I+`
`+me})}function hd(f,w,I,F,J,te,me){f.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+J+"]: "+w+`
`+I+`
`+te+" "+me})}function Yr(f,w,I,F){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+pd(f,I)+(F?" "+F:"")})}function fd(f,w){f.info(function(){return"TIMEOUT: "+w})}Jr.prototype.info=function(){};function pd(f,w){if(!f.g)return w;if(!w)return null;try{var I=JSON.parse(w);if(I){for(f=0;f<I.length;f++)if(Array.isArray(I[f])){var F=I[f];if(!(2>F.length)){var J=F[1];if(Array.isArray(J)&&!(1>J.length)){var te=J[0];if(te!="noop"&&te!="stop"&&te!="close")for(var me=1;me<J.length;me++)J[me]=""}}}}return ve(I)}catch{return w}}var Vs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ao={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},No;function yi(){}E(yi,Ge),yi.prototype.g=function(){return new XMLHttpRequest},yi.prototype.i=function(){return{}},No=new yi;function pr(f,w,I,F){this.j=f,this.i=w,this.l=I,this.R=F||1,this.U=new W(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yl}function yl(){this.i=null,this.g="",this.h=!1}var vl={},vi={};function Ro(f,w,I){f.L=1,f.v=El(Cr(w)),f.m=I,f.P=!0,Fs(f,null)}function Fs(f,w){f.F=Date.now(),xi(f),f.A=Cr(f.v);var I=f.A,F=f.R;Array.isArray(F)||(F=[String(F)]),Km(I.i,"t",F),f.C=0,I=f.j.J,f.h=new yl,f.g=hg(f.j,I?w:null,!f.m),0<f.O&&(f.M=new Ut(g(f.Y,f,f.g),f.O)),w=f.U,I=f.g,F=f.ca;var J="readystatechange";Array.isArray(J)||(J&&(Z[0]=J.toString()),J=Z);for(var te=0;te<J.length;te++){var me=X(I,J[te],F||w.handleEvent,!1,w.h||w);if(!me)break;w.g[me.key]=me}w=f.H?N(f.H):{},f.m?(f.u||(f.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,w)):(f.u="GET",f.g.ea(f.A,f.u,null,w)),Ds(),dd(f.i,f.u,f.A,f.l,f.R,f.m)}pr.prototype.ca=function(f){f=f.target;const w=this.M;w&&kr(f)==3?w.j():this.Y(f)},pr.prototype.Y=function(f){try{if(f==this.g)e:{const en=kr(this.g);var w=this.g.Ba();const Ti=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||tg(this.g)))){this.J||en!=4||w==7||(w==8||0>=Ti?Ds(3):Ds(2)),Q(this);var I=this.g.Z();this.X=I;t:if(Po(this)){var F=tg(this.g);f="";var J=F.length,te=kr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fe(this),_e(this);var me="";break t}this.h.i=new a.TextDecoder}for(w=0;w<J;w++)this.h.h=!0,f+=this.h.i.decode(F[w],{stream:!(te&&w==J-1)});F.length=0,this.h.g+=f,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=I==200,hd(this.i,this.u,this.A,this.l,this.R,en,I),this.o){if(this.T&&!this.K){t:{if(this.g){var it,Gt=this.g;if((it=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(it)){var Ye=it;break t}}Ye=null}if(I=Ye)Yr(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,je(this,I);else{this.o=!1,this.s=3,Ot(12),Fe(this),_e(this);break e}}if(this.P){I=!0;let tr;for(;!this.J&&this.C<me.length;)if(tr=md(this,me),tr==vi){en==4&&(this.s=4,Ot(14),I=!1),Yr(this.i,this.l,null,"[Incomplete Response]");break}else if(tr==vl){this.s=4,Ot(15),Yr(this.i,this.l,me,"[Invalid Chunk]"),I=!1;break}else Yr(this.i,this.l,tr,null),je(this,tr);if(Po(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||me.length!=0||this.h.h||(this.s=1,Ot(16),I=!1),this.o=this.o&&I,!I)Yr(this.i,this.l,me,"[Invalid Chunked Response]"),Fe(this),_e(this);else if(0<me.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),xd(Zt),Zt.M=!0,Ot(11))}}else Yr(this.i,this.l,me,null),je(this,me);en==4&&Fe(this),this.o&&!this.J&&(en==4?lg(this.j,this):(this.o=!1,xi(this)))}else m1(this.g),I==400&&0<me.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),Fe(this),_e(this)}}}catch{}finally{}};function Po(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function md(f,w){var I=f.C,F=w.indexOf(`
`,I);return F==-1?vi:(I=Number(w.substring(I,F)),isNaN(I)?vl:(F+=1,F+I>w.length?vi:(w=w.slice(F,F+I),f.C=F+I,w)))}pr.prototype.cancel=function(){this.J=!0,Fe(this)};function xi(f){f.S=Date.now()+f.I,xl(f,f.I)}function xl(f,w){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ls(g(f.ba,f),w)}function Q(f){f.B&&(a.clearTimeout(f.B),f.B=null)}pr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(fd(this.i,this.A),this.L!=2&&(Ds(),Ot(17)),Fe(this),this.s=2,_e(this)):xl(this,this.S-f)};function _e(f){f.j.G==0||f.J||lg(f.j,f)}function Fe(f){Q(f);var w=f.M;w&&typeof w.ma=="function"&&w.ma(),f.M=null,be(f.U),f.g&&(w=f.g,f.g=null,w.abort(),w.ma())}function je(f,w){try{var I=f.j;if(I.G!=0&&(I.g==f||Xt(I.h,f))){if(!f.K&&Xt(I.h,f)&&I.G==3){try{var F=I.Da.g.parse(w)}catch{F=null}if(Array.isArray(F)&&F.length==3){var J=F;if(J[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<f.F)kl(I),Il(I);else break e;vd(I),Ot(18)}}else I.za=J[1],0<I.za-I.T&&37500>J[2]&&I.F&&I.v==0&&!I.C&&(I.C=Ls(g(I.Za,I),6e3));if(1>=zt(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Bs(I,11)}else if((f.K||I.g==f)&&kl(I),!_(w))for(J=I.Da.g.parse(w),w=0;w<J.length;w++){let Ye=J[w];if(I.T=Ye[0],Ye=Ye[1],I.G==2)if(Ye[0]=="c"){I.K=Ye[1],I.ia=Ye[2];const Zt=Ye[3];Zt!=null&&(I.la=Zt,I.j.info("VER="+I.la));const en=Ye[4];en!=null&&(I.Aa=en,I.j.info("SVER="+I.Aa));const Ti=Ye[5];Ti!=null&&typeof Ti=="number"&&0<Ti&&(F=1.5*Ti,I.L=F,I.j.info("backChannelRequestTimeoutMs_="+F)),F=I;const tr=f.g;if(tr){const Nl=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nl){var te=F.h;te.g||Nl.indexOf("spdy")==-1&&Nl.indexOf("quic")==-1&&Nl.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Sn(te,te.h),te.h=null))}if(F.D){const wd=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;wd&&(F.ya=wd,ut(F.I,F.D,wd))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-f.F,I.j.info("Handshake RTT: "+I.R+"ms")),F=I;var me=f;if(F.qa=dg(F,F.J?F.ia:null,F.W),me.K){nt(F.h,me);var it=me,Gt=F.L;Gt&&(it.I=Gt),it.B&&(Q(it),xi(it)),F.g=me}else og(F);0<I.i.length&&Cl(I)}else Ye[0]!="stop"&&Ye[0]!="close"||Bs(I,7);else I.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Bs(I,7):yd(I):Ye[0]!="noop"&&I.l&&I.l.ta(Ye),I.v=0)}}Ds(4)}catch{}}var et=class{constructor(f,w){this.g=f,this.map=w}};function Je(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function zt(f){return f.h?1:f.g?f.g.size:0}function Xt(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function Sn(f,w){f.g?f.g.add(w):f.h=w}function nt(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}Je.prototype.cancel=function(){if(this.i=mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function mt(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const I of f.g.values())w=w.concat(I.D);return w}return x(f.i)}function ft(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var w=[],I=f.length,F=0;F<I;F++)w.push(f[F]);return w}w=[],I=0;for(F in f)w[I++]=f[F];return w}function js(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var w=[];f=f.length;for(var I=0;I<f;I++)w.push(I);return w}w=[],I=0;for(const F in f)w[I++]=F;return w}}}function wi(f,w){if(f.forEach&&typeof f.forEach=="function")f.forEach(w,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,w,void 0);else for(var I=js(f),F=ft(f),J=F.length,te=0;te<J;te++)w.call(void 0,F[te],I&&I[te],f)}var Gm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function n1(f,w){if(f){f=f.split("&");for(var I=0;I<f.length;I++){var F=f[I].indexOf("="),J=null;if(0<=F){var te=f[I].substring(0,F);J=f[I].substring(F+1)}else te=f[I];w(te,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Us(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Us){this.h=f.h,wl(this,f.j),this.o=f.o,this.g=f.g,_l(this,f.s),this.l=f.l;var w=f.i,I=new Lo;I.i=w.i,w.g&&(I.g=new Map(w.g),I.h=w.h),Hm(this,I),this.m=f.m}else f&&(w=String(f).match(Gm))?(this.h=!1,wl(this,w[1]||"",!0),this.o=Mo(w[2]||""),this.g=Mo(w[3]||"",!0),_l(this,w[4]),this.l=Mo(w[5]||"",!0),Hm(this,w[6]||"",!0),this.m=Mo(w[7]||"")):(this.h=!1,this.i=new Lo(null,this.h))}Us.prototype.toString=function(){var f=[],w=this.j;w&&f.push(Do(w,$m,!0),":");var I=this.g;return(I||w=="file")&&(f.push("//"),(w=this.o)&&f.push(Do(w,$m,!0),"@"),f.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&f.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&f.push("/"),f.push(Do(I,I.charAt(0)=="/"?i1:s1,!0))),(I=this.i.toString())&&f.push("?",I),(I=this.m)&&f.push("#",Do(I,a1)),f.join("")};function Cr(f){return new Us(f)}function wl(f,w,I){f.j=I?Mo(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function _l(f,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);f.s=w}else f.s=null}function Hm(f,w,I){w instanceof Lo?(f.i=w,l1(f.i,f.h)):(I||(w=Do(w,o1)),f.i=new Lo(w,f.h))}function ut(f,w,I){f.i.set(w,I)}function El(f){return ut(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Mo(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Do(f,w,I){return typeof f=="string"?(f=encodeURI(f).replace(w,r1),I&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function r1(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var $m=/[#\/\?@]/g,s1=/[#\?:]/g,i1=/[#\?]/g,o1=/[#\?@]/g,a1=/#/g;function Lo(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function Qr(f){f.g||(f.g=new Map,f.h=0,f.i&&n1(f.i,function(w,I){f.add(decodeURIComponent(w.replace(/\+/g," ")),I)}))}t=Lo.prototype,t.add=function(f,w){Qr(this),this.i=null,f=_i(this,f);var I=this.g.get(f);return I||this.g.set(f,I=[]),I.push(w),this.h+=1,this};function qm(f,w){Qr(f),w=_i(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function Wm(f,w){return Qr(f),w=_i(f,w),f.g.has(w)}t.forEach=function(f,w){Qr(this),this.g.forEach(function(I,F){I.forEach(function(J){f.call(w,J,F,this)},this)},this)},t.na=function(){Qr(this);const f=Array.from(this.g.values()),w=Array.from(this.g.keys()),I=[];for(let F=0;F<w.length;F++){const J=f[F];for(let te=0;te<J.length;te++)I.push(w[F])}return I},t.V=function(f){Qr(this);let w=[];if(typeof f=="string")Wm(this,f)&&(w=w.concat(this.g.get(_i(this,f))));else{f=Array.from(this.g.values());for(let I=0;I<f.length;I++)w=w.concat(f[I])}return w},t.set=function(f,w){return Qr(this),this.i=null,f=_i(this,f),Wm(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},t.get=function(f,w){return f?(f=this.V(f),0<f.length?String(f[0]):w):w};function Km(f,w,I){qm(f,w),0<I.length&&(f.i=null,f.g.set(_i(f,w),x(I)),f.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(var I=0;I<w.length;I++){var F=w[I];const te=encodeURIComponent(String(F)),me=this.V(F);for(F=0;F<me.length;F++){var J=te;me[F]!==""&&(J+="="+encodeURIComponent(String(me[F]))),f.push(J)}}return this.i=f.join("&")};function _i(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function l1(f,w){w&&!f.j&&(Qr(f),f.i=null,f.g.forEach(function(I,F){var J=F.toLowerCase();F!=J&&(qm(this,F),Km(this,J,I))},f)),f.j=w}function u1(f,w){const I=new Jr;if(a.Image){const F=new Image;F.onload=y(Xr,I,"TestLoadImage: loaded",!0,w,F),F.onerror=y(Xr,I,"TestLoadImage: error",!1,w,F),F.onabort=y(Xr,I,"TestLoadImage: abort",!1,w,F),F.ontimeout=y(Xr,I,"TestLoadImage: timeout",!1,w,F),a.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=f}else w(!1)}function c1(f,w){const I=new Jr,F=new AbortController,J=setTimeout(()=>{F.abort(),Xr(I,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:F.signal}).then(te=>{clearTimeout(J),te.ok?Xr(I,"TestPingServer: ok",!0,w):Xr(I,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(J),Xr(I,"TestPingServer: error",!1,w)})}function Xr(f,w,I,F,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),F(I)}catch{}}function d1(){this.g=new St}function h1(f,w,I){const F=I||"";try{wi(f,function(J,te){let me=J;c(J)&&(me=ve(J)),w.push(F+te+"="+encodeURIComponent(me))})}catch(J){throw w.push(F+"type="+encodeURIComponent("_badmap")),J}}function Tl(f){this.l=f.Ub||null,this.j=f.eb||!1}E(Tl,Ge),Tl.prototype.g=function(){return new bl(this.l,this.j)},Tl.prototype.i=function(f){return function(){return f}}({});function bl(f,w){ye.call(this),this.D=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(bl,ye),t=bl.prototype,t.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=w,this.readyState=1,Fo(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(w.body=f),(this.D||a).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vo(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Fo(this)),this.g&&(this.readyState=3,Fo(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jm(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jm(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?Vo(this):Fo(this),this.readyState==3&&Jm(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Vo(this))},t.Qa=function(f){this.g&&(this.response=f,Vo(this))},t.ga=function(){this.g&&Vo(this)};function Vo(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Fo(f)}t.setRequestHeader=function(f,w){this.u.append(f,w)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var I=w.next();!I.done;)I=I.value,f.push(I[0]+": "+I[1]),I=w.next();return f.join(`\r
`)};function Fo(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ym(f){let w="";return B(f,function(I,F){w+=F,w+=":",w+=I,w+=`\r
`}),w}function gd(f,w,I){e:{for(F in I){var F=!1;break e}F=!0}F||(I=Ym(I),typeof f=="string"?I!=null&&encodeURIComponent(String(I)):ut(f,w,I))}function wt(f){ye.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(wt,ye);var f1=/^https?$/i,p1=["POST","PUT"];t=wt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,w,I,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():No.g(),this.v=this.o?Tn(this.o):Tn(No),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(te){Qm(this,te);return}if(f=I||"",I=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var J in F)I.set(J,F[J]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const te of F.keys())I.set(te,F.get(te));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(I.keys()).find(te=>te.toLowerCase()=="content-type"),J=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(p1,w,void 0))||F||J||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,me]of I)this.g.setRequestHeader(te,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eg(this),this.u=!0,this.g.send(f),this.u=!1}catch(te){Qm(this,te)}};function Qm(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.m=5,Xm(f),Sl(f)}function Xm(f){f.A||(f.A=!0,Ie(f,"complete"),Ie(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ie(this,"complete"),Ie(this,"abort"),Sl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sl(this,!0)),wt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zm(this):this.bb())},t.bb=function(){Zm(this)};function Zm(f){if(f.h&&typeof o<"u"&&(!f.v[1]||kr(f)!=4||f.Z()!=2)){if(f.u&&kr(f)==4)bt(f.Ea,0,f);else if(Ie(f,"readystatechange"),kr(f)==4){f.h=!1;try{const me=f.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var I;if(!(I=w)){var F;if(F=me===0){var J=String(f.D).match(Gm)[1]||null;!J&&a.self&&a.self.location&&(J=a.self.location.protocol.slice(0,-1)),F=!f1.test(J?J.toLowerCase():"")}I=F}if(I)Ie(f,"complete"),Ie(f,"success");else{f.m=6;try{var te=2<kr(f)?f.g.statusText:""}catch{te=""}f.l=te+" ["+f.Z()+"]",Xm(f)}}finally{Sl(f)}}}}function Sl(f,w){if(f.g){eg(f);const I=f.g,F=f.v[0]?()=>{}:null;f.g=null,f.v=null,w||Ie(f,"ready");try{I.onreadystatechange=F}catch{}}}function eg(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function kr(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<kr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),He(w)}};function tg(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function m1(f){const w={};f=(f.g&&2<=kr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<f.length;F++){if(_(f[F]))continue;var I=j(f[F]);const J=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const te=w[J]||[];w[J]=te,te.push(I)}k(w,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jo(f,w,I){return I&&I.internalChannelParams&&I.internalChannelParams[f]||w}function ng(f){this.Aa=0,this.i=[],this.j=new Jr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jo("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jo("baseRetryDelayMs",5e3,f),this.cb=jo("retryDelaySeedMs",1e4,f),this.Wa=jo("forwardChannelMaxRetries",2,f),this.wa=jo("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(f&&f.concurrentRequestLimit),this.Da=new d1,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ng.prototype,t.la=8,t.G=1,t.connect=function(f,w,I,F){Ot(0),this.W=f,this.H=w||{},I&&F!==void 0&&(this.H.OSID=I,this.H.OAID=F),this.F=this.X,this.I=dg(this,null,this.W),Cl(this)};function yd(f){if(rg(f),f.G==3){var w=f.U++,I=Cr(f.I);if(ut(I,"SID",f.K),ut(I,"RID",w),ut(I,"TYPE","terminate"),Uo(f,I),w=new pr(f,f.j,w),w.L=2,w.v=El(Cr(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(w.v.toString(),"")}catch{}!I&&a.Image&&(new Image().src=w.v,I=!0),I||(w.g=hg(w.j,null),w.g.ea(w.v)),w.F=Date.now(),xi(w)}cg(f)}function Il(f){f.g&&(xd(f),f.g.cancel(),f.g=null)}function rg(f){Il(f),f.u&&(a.clearTimeout(f.u),f.u=null),kl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function Cl(f){if(!$e(f.h)&&!f.s){f.s=!0;var w=f.Ga;ne||le(),ee||(ne(),ee=!0),$.add(w,f),f.B=0}}function g1(f,w){return zt(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=w.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ls(g(f.Ga,f,w),ug(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const J=new pr(this,this.j,f);let te=this.o;if(this.S&&(te?(te=N(te),P(te,this.S)):te=this.S),this.m!==null||this.O||(J.H=te,te=null),this.P)e:{for(var w=0,I=0;I<this.i.length;I++){t:{var F=this.i[I];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(w+=F,4096<w){w=I;break e}if(w===4096||I===this.i.length-1){w=I+1;break e}}w=1e3}else w=1e3;w=ig(this,J,w),I=Cr(this.I),ut(I,"RID",f),ut(I,"CVER",22),this.D&&ut(I,"X-HTTP-Session-Id",this.D),Uo(this,I),te&&(this.O?w="headers="+encodeURIComponent(String(Ym(te)))+"&"+w:this.m&&gd(I,this.m,te)),Sn(this.h,J),this.Ua&&ut(I,"TYPE","init"),this.P?(ut(I,"$req",w),ut(I,"SID","null"),J.T=!0,Ro(J,I,null)):Ro(J,I,w),this.G=2}}else this.G==3&&(f?sg(this,f):this.i.length==0||$e(this.h)||sg(this))};function sg(f,w){var I;w?I=w.l:I=f.U++;const F=Cr(f.I);ut(F,"SID",f.K),ut(F,"RID",I),ut(F,"AID",f.T),Uo(f,F),f.m&&f.o&&gd(F,f.m,f.o),I=new pr(f,f.j,I,f.B+1),f.m===null&&(I.H=f.o),w&&(f.i=w.D.concat(f.i)),w=ig(f,I,1e3),I.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Sn(f.h,I),Ro(I,F,w)}function Uo(f,w){f.H&&B(f.H,function(I,F){ut(w,F,I)}),f.l&&wi({},function(I,F){ut(w,F,I)})}function ig(f,w,I){I=Math.min(f.i.length,I);var F=f.l?g(f.l.Na,f.l,f):null;e:{var J=f.i;let te=-1;for(;;){const me=["count="+I];te==-1?0<I?(te=J[0].g,me.push("ofs="+te)):te=0:me.push("ofs="+te);let it=!0;for(let Gt=0;Gt<I;Gt++){let Ye=J[Gt].g;const Zt=J[Gt].map;if(Ye-=te,0>Ye)te=Math.max(0,J[Gt].g-100),it=!1;else try{h1(Zt,me,"req"+Ye+"_")}catch{F&&F(Zt)}}if(it){F=me.join("&");break e}}}return f=f.i.splice(0,I),w.D=f,F}function og(f){if(!f.g&&!f.u){f.Y=1;var w=f.Fa;ne||le(),ee||(ne(),ee=!0),$.add(w,f),f.v=0}}function vd(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ls(g(f.Fa,f),ug(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,ag(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ls(g(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),Il(this),ag(this))};function xd(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function ag(f){f.g=new pr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var w=Cr(f.qa);ut(w,"RID","rpc"),ut(w,"SID",f.K),ut(w,"AID",f.T),ut(w,"CI",f.F?"0":"1"),!f.F&&f.ja&&ut(w,"TO",f.ja),ut(w,"TYPE","xmlhttp"),Uo(f,w),f.m&&f.o&&gd(w,f.m,f.o),f.L&&(f.g.I=f.L);var I=f.g;f=f.ia,I.L=1,I.v=El(Cr(w)),I.m=null,I.P=!0,Fs(I,f)}t.Za=function(){this.C!=null&&(this.C=null,Il(this),vd(this),Ot(19))};function kl(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function lg(f,w){var I=null;if(f.g==w){kl(f),xd(f),f.g=null;var F=2}else if(Xt(f.h,w))I=w.D,nt(f.h,w),F=1;else return;if(f.G!=0){if(w.o)if(F==1){I=w.m?w.m.length:0,w=Date.now()-w.F;var J=f.B;F=er(),Ie(F,new gl(F,I)),Cl(f)}else og(f);else if(J=w.s,J==3||J==0&&0<w.X||!(F==1&&g1(f,w)||F==2&&vd(f)))switch(I&&0<I.length&&(w=f.h,w.i=w.i.concat(I)),J){case 1:Bs(f,5);break;case 4:Bs(f,10);break;case 3:Bs(f,6);break;default:Bs(f,2)}}}function ug(f,w){let I=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(I*=2),I*w}function Bs(f,w){if(f.j.info("Error code "+w),w==2){var I=g(f.fb,f),F=f.Xa;const J=!F;F=new Us(F||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wl(F,"https"),El(F),J?u1(F.toString(),I):c1(F.toString(),I)}else Ot(2);f.G=0,f.l&&f.l.sa(w),cg(f),rg(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function cg(f){if(f.G=0,f.ka=[],f.l){const w=mt(f.h);(w.length!=0||f.i.length!=0)&&(T(f.ka,w),T(f.ka,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.ra()}}function dg(f,w,I){var F=I instanceof Us?Cr(I):new Us(I);if(F.g!="")w&&(F.g=w+"."+F.g),_l(F,F.s);else{var J=a.location;F=J.protocol,w=w?w+"."+J.hostname:J.hostname,J=+J.port;var te=new Us(null);F&&wl(te,F),w&&(te.g=w),J&&_l(te,J),I&&(te.l=I),F=te}return I=f.D,w=f.ya,I&&w&&ut(F,I,w),ut(F,"VER",f.la),Uo(f,F),F}function hg(f,w,I){if(w&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Ca&&!f.pa?new wt(new Tl({eb:I})):new wt(f.pa),w.Ha(f.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fg(){}t=fg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Al(){}Al.prototype.g=function(f,w){return new Ln(f,w)};function Ln(f,w){ye.call(this),this.g=new ng(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(f?f["X-WebChannel-Client-Profile"]=w.va:f={"X-WebChannel-Client-Profile":w.va}),this.g.S=f,(f=w&&w.Sb)&&!_(f)&&(this.g.m=f),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!_(w)&&(this.g.D=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new Ei(this)}E(Ln,ye),Ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){yd(this.g)},Ln.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var I={};I.__data__=f,f=I}else this.u&&(I={},I.__data__=ve(f),f=I);w.i.push(new et(w.Ya++,f)),w.G==3&&Cl(w)},Ln.prototype.N=function(){this.g.l=null,delete this.j,yd(this.g),delete this.g,Ln.aa.N.call(this)};function pg(f){hn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const I in w){f=I;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}E(pg,hn);function mg(){Bt.call(this),this.status=1}E(mg,Bt);function Ei(f){this.g=f}E(Ei,fg),Ei.prototype.ua=function(){Ie(this.g,"a")},Ei.prototype.ta=function(f){Ie(this.g,new pg(f))},Ei.prototype.sa=function(f){Ie(this.g,new mg)},Ei.prototype.ra=function(){Ie(this.g,"b")},Al.prototype.createWebChannel=Al.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,kE=function(){return new Al},CE=function(){return er()},IE=Qt,df={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vs.NO_ERROR=0,Vs.TIMEOUT=8,Vs.HTTP_ERROR=6,vu=Vs,Ao.COMPLETE="complete",SE=Ao,bn.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",ye.prototype.listen=ye.prototype.K,ta=bn,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,bE=wt}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});const W0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Bp("@firebase/firestore");function Ko(){return ai.logLevel}function Te(t,...e){if(ai.logLevel<=We.DEBUG){const n=e.map(Wp);ai.debug(`Firestore (${wo}): ${t}`,...n)}}function zr(t,...e){if(ai.logLevel<=We.ERROR){const n=e.map(Wp);ai.error(`Firestore (${wo}): ${t}`,...n)}}function lo(t,...e){if(ai.logLevel<=We.WARN){const n=e.map(Wp);ai.warn(`Firestore (${wo}): ${t}`,...n)}}function Wp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t="Unexpected state"){const e=`FIRESTORE (${wo}) INTERNAL ASSERTION FAILED: `+t;throw zr(e),new Error(e)}function tt(t,e){t||Ne()}function Re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends As{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(sn.UNAUTHENTICATED))}shutdown(){}}class mA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gA{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tt(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _r,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _r)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt(typeof r.accessToken=="string"),new AE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string"),new sn(e)}}class yA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){tt(this.o===void 0);const r=i=>{i.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(tt(typeof n.token=="string"),this.R=n.token,new xA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=_A(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Qe(t,e){return t<e?-1:t>e?1:0}function uo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new we(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new we(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new we(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Me(e)}static min(){return new Me(new Pt(0,0))}static max(){return new Me(new Pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ne(),r===void 0?r=e.length-n:r>e.length-n&&Ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ba.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ba?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class dt extends Ba{construct(e,n,r){return new dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new dt(n)}static emptyPath(){return new dt([])}}const EA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends Ba{construct(e,n,r){return new qt(e,n,r)}static isValidIdentifier(e){return EA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new we(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new we(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new we(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new we(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(n)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(dt.fromString(e))}static fromName(e){return new Se(dt.fromString(e).popFirst(5))}static empty(){return new Se(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new dt(e.slice()))}}function TA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Me.fromTimestamp(r===1e9?new Pt(n+1,0):new Pt(n,r));return new Ts(s,Se.empty(),e)}function bA(t){return new Ts(t.readTime,t.key,-1)}class Ts{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ts(Me.min(),Se.empty(),-1)}static max(){return new Ts(Me.max(),Se.empty(),-1)}}function SA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(t.documentKey,e.documentKey),n!==0?n:Qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t){if(t.code!==ae.FAILED_PRECONDITION||t.message!==IA)throw t;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,r)=>{n(e)})}static reject(e){return new de((n,r)=>{r(e)})}static waitFor(e){return new de((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=de.resolve(!1);for(const r of e)n=n.next(s=>s?de.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new de((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new de((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function kA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Kp.oe=-1;function jc(t){return t==null}function nc(t){return t===0&&1/t==-1/0}function AA(t){return typeof t=="number"&&Number.isInteger(t)&&!nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NA(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function RE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jl(this.root,e,this.comparator,!0)}}class Jl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??$t.RED,this.left=s??$t.EMPTY,this.right=i??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new $t(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return $t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,n,r,s,i){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new J0(this.data.getIterator())}getIteratorFrom(e){return new J0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Kt(this.comparator);return n.data=e,n}}class J0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new jn([])}unionWith(e){let n=new Kt(qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new PE("Invalid base64 string: "+i):i}}(e);return new Yt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const RA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(t){if(tt(!!t),typeof t=="string"){let e=0;const n=RA.exec(t);if(tt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(t.seconds),nanos:Et(t.nanos)}}function Et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function li(t){return typeof t=="string"?Yt.fromBase64String(t):Yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Yp(t){const e=t.mapValue.fields.__previous_value__;return Jp(e)?Yp(e):e}function Oa(t){const e=bs(t.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class za{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new za("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl={mapValue:{}};function ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jp(t)?4:DA(t)?9007199254740991:MA(t)?10:11:Ne()}function br(t,e){if(t===e)return!0;const n=ui(t);if(n!==ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oa(t).isEqual(Oa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=bs(s.timestampValue),a=bs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return li(s.bytesValue).isEqual(li(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Et(s.geoPointValue.latitude)===Et(i.geoPointValue.latitude)&&Et(s.geoPointValue.longitude)===Et(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Et(s.integerValue)===Et(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Et(s.doubleValue),a=Et(i.doubleValue);return o===a?nc(o)===nc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return uo(t.arrayValue.values||[],e.arrayValue.values||[],br);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(K0(o)!==K0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!br(o[l],a[l])))return!1;return!0}(t,e);default:return Ne()}}function Ga(t,e){return(t.values||[]).find(n=>br(n,e))!==void 0}function co(t,e){if(t===e)return 0;const n=ui(t),r=ui(e);if(n!==r)return Qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Et(i.integerValue||i.doubleValue),l=Et(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Y0(t.timestampValue,e.timestampValue);case 4:return Y0(Oa(t),Oa(e));case 5:return Qe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=li(i),l=li(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Qe(a[c],l[c]);if(h!==0)return h}return Qe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Qe(Et(i.latitude),Et(o.latitude));return a!==0?a:Qe(Et(i.longitude),Et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Q0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,h;const m=i.fields||{},g=o.fields||{},y=(a=m.value)===null||a===void 0?void 0:a.arrayValue,E=(l=g.value)===null||l===void 0?void 0:l.arrayValue,x=Qe(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:Q0(y,E)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Yl.mapValue&&o===Yl.mapValue)return 0;if(i===Yl.mapValue)return 1;if(o===Yl.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let m=0;m<l.length&&m<h.length;++m){const g=Qe(l[m],h[m]);if(g!==0)return g;const y=co(a[l[m]],c[h[m]]);if(y!==0)return y}return Qe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Ne()}}function Y0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qe(t,e);const n=bs(t),r=bs(e),s=Qe(n.seconds,r.seconds);return s!==0?s:Qe(n.nanos,r.nanos)}function Q0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=co(n[s],r[s]);if(i)return i}return Qe(n.length,r.length)}function ho(t){return hf(t)}function hf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=bs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=hf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${hf(n.fields[o])}`;return s+"}"}(t.mapValue):Ne()}function X0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ff(t){return!!t&&"integerValue"in t}function Qp(t){return!!t&&"arrayValue"in t}function Z0(t){return!!t&&"nullValue"in t}function ey(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xu(t){return!!t&&"mapValue"in t}function MA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ga(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ga(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ga(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ga(n)}setAll(e){let n=qt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ga(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());xu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return br(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];xu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){fi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Cn(ga(this.value))}}function ME(t){const e=[];return fi(t.fields,(n,r)=>{const s=new qt([n]);if(xu(r)){const i=ME(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new an(e,0,Me.min(),Me.min(),Me.min(),Cn.empty(),0)}static newFoundDocument(e,n,r,s){return new an(e,1,n,Me.min(),r,s,0)}static newNoDocument(e,n){return new an(e,2,n,Me.min(),Me.min(),Cn.empty(),0)}static newUnknownDocument(e,n){return new an(e,3,n,Me.min(),Me.min(),Cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.position=e,this.inclusive=n}}function ty(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Se.comparator(Se.fromName(o.referenceValue),n.key):r=co(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ny(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!br(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n="asc"){this.field=e,this.dir=n}}function LA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{}class kt extends DE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FA(e,n,r):n==="array-contains"?new BA(e,r):n==="in"?new OA(e,r):n==="not-in"?new zA(e,r):n==="array-contains-any"?new GA(e,r):new kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jA(e,r):new UA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(co(n,this.value)):n!==null&&ui(this.value)===ui(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends DE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new hr(e,n)}matches(e){return LE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function LE(t){return t.op==="and"}function VE(t){return VA(t)&&LE(t)}function VA(t){for(const e of t.filters)if(e instanceof hr)return!1;return!0}function pf(t){if(t instanceof kt)return t.field.canonicalString()+t.op.toString()+ho(t.value);if(VE(t))return t.filters.map(e=>pf(e)).join(",");{const e=t.filters.map(n=>pf(n)).join(",");return`${t.op}(${e})`}}function FE(t,e){return t instanceof kt?function(r,s){return s instanceof kt&&r.op===s.op&&r.field.isEqual(s.field)&&br(r.value,s.value)}(t,e):t instanceof hr?function(r,s){return s instanceof hr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&FE(o,s.filters[a]),!0):!1}(t,e):void Ne()}function jE(t){return t instanceof kt?function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`}(t):t instanceof hr?function(n){return n.op.toString()+" {"+n.getFilters().map(jE).join(" ,")+"}"}(t):"Filter"}class FA extends kt{constructor(e,n,r){super(e,n,r),this.key=Se.fromName(r.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class jA extends kt{constructor(e,n){super(e,"in",n),this.keys=UE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UA extends kt{constructor(e,n){super(e,"not-in",n),this.keys=UE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function UE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Se.fromName(r.referenceValue))}class BA extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qp(n)&&Ga(n.arrayValue,this.value)}}class OA extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ga(this.value.arrayValue,n)}}class zA extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ga(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ga(this.value.arrayValue,n)}}class GA extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ga(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function ry(t,e=null,n=[],r=[],s=null,i=null,o=null){return new HA(t,e,n,r,s,i,o)}function Xp(t){const e=Re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),jc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ho(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ho(r)).join(",")),e.ue=n}return e.ue}function Zp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ny(t.startAt,e.startAt)&&ny(t.endAt,e.endAt)}function mf(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $A(t,e,n,r,s,i,o,a){return new _o(t,e,n,r,s,i,o,a)}function em(t){return new _o(t)}function sy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BE(t){return t.collectionGroup!==null}function ya(t){const e=Re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Kt(qt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ha(i,r))}),n.has(qt.keyField().canonicalString())||e.ce.push(new Ha(qt.keyField(),r))}return e.ce}function Er(t){const e=Re(t);return e.le||(e.le=OE(e,ya(t))),e.le}function qA(t){const e=Re(t);return e.he||(e.he=OE(e,t.explicitOrderBy)),e.he}function OE(t,e){if(t.limitType==="F")return ry(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ha(s.field,i)});const n=t.endAt?new rc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rc(t.startAt.position,t.startAt.inclusive):null;return ry(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gf(t,e){const n=t.filters.concat([e]);return new _o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sc(t,e,n){return new _o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uc(t,e){return Zp(Er(t),Er(e))&&t.limitType===e.limitType}function zE(t){return`${Xp(Er(t))}|lt:${t.limitType}`}function Si(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>jE(s)).join(", ")}]`),jc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ho(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ho(s)).join(",")),`Target(${r})`}(Er(t))}; limitType=${t.limitType})`}function Bc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Se.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ya(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=ty(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ya(r),s)||r.endAt&&!function(o,a,l){const c=ty(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ya(r),s))}(t,e)}function WA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GE(t){return(e,n)=>{let r=!1;for(const s of ya(t)){const i=KA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function KA(t,e,n){const r=t.field.isKeyField()?Se.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?co(l,c):Ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return RE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=new xt(Se.comparator);function Gr(){return JA}const HE=new xt(Se.comparator);function na(...t){let e=HE;for(const n of t)e=e.insert(n.key,n);return e}function $E(t){let e=HE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Js(){return va()}function qE(){return va()}function va(){return new Eo(t=>t.toString(),(t,e)=>t.isEqual(e))}const YA=new xt(Se.comparator),QA=new Kt(Se.comparator);function Oe(...t){let e=QA;for(const n of t)e=e.add(n);return e}const XA=new Kt(Qe);function ZA(){return XA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function WE(t){return{integerValue:""+t}}function KE(t,e){return AA(e)?WE(e):tm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this._=void 0}}function eN(t,e,n){return t instanceof ic?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Jp(i)&&(i=Yp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof $a?YE(t,e):t instanceof qa?QE(t,e):function(s,i){const o=JE(s,i),a=iy(o)+iy(s.Pe);return ff(o)&&ff(s.Pe)?WE(a):tm(s.serializer,a)}(t,e)}function tN(t,e,n){return t instanceof $a?YE(t,e):t instanceof qa?QE(t,e):n}function JE(t,e){return t instanceof Wa?function(r){return ff(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ic extends Oc{}class $a extends Oc{constructor(e){super(),this.elements=e}}function YE(t,e){const n=XE(e);for(const r of t.elements)n.some(s=>br(s,r))||n.push(r);return{arrayValue:{values:n}}}class qa extends Oc{constructor(e){super(),this.elements=e}}function QE(t,e){let n=XE(e);for(const r of t.elements)n=n.filter(s=>!br(s,r));return{arrayValue:{values:n}}}class Wa extends Oc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function iy(t){return Et(t.integerValue||t.doubleValue)}function XE(t){return Qp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n){this.field=e,this.transform=n}}function rN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof $a&&s instanceof $a||r instanceof qa&&s instanceof qa?uo(r.elements,s.elements,br):r instanceof Wa&&s instanceof Wa?br(r.Pe,s.Pe):r instanceof ic&&s instanceof ic}(t.transform,e.transform)}class sN{constructor(e,n){this.version=e,this.transformResults=n}}class yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zc{}function ZE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gc(t.key,yn.none()):new sl(t.key,t.data,yn.none());{const n=t.data,r=Cn.empty();let s=new Kt(qt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ns(t.key,r,new jn(s.toArray()),yn.none())}}function iN(t,e,n){t instanceof sl?function(s,i,o){const a=s.value.clone(),l=ay(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ns?function(s,i,o){if(!wu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=ay(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(eT(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xa(t,e,n,r){return t instanceof sl?function(i,o,a,l){if(!wu(i.precondition,o))return a;const c=i.value.clone(),h=ly(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ns?function(i,o,a,l){if(!wu(i.precondition,o))return a;const c=ly(i.fieldTransforms,l,o),h=o.data;return h.setAll(eT(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,a){return wu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function oN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=JE(r.transform,s||null);i!=null&&(n===null&&(n=Cn.empty()),n.set(r.field,i))}return n||null}function oy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&uo(r,s,(i,o)=>rN(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sl extends zc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ns extends zc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function eT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ay(t,e,n){const r=new Map;tt(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,tN(o,a,n[s]))}return r}function ly(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,eN(i,o,e))}return r}class Gc extends zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aN extends zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&iN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=qE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=ZE(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(n,r)=>oy(n,r))&&uo(this.baseMutations,e.baseMutations,(n,r)=>oy(n,r))}}class nm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){tt(e.mutations.length===r.length);let s=function(){return YA}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new nm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,qe;function hN(t){switch(t){default:return Ne();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function tT(t){if(t===void 0)return zr("GRPC error has no .code"),ae.UNKNOWN;switch(t){case It.OK:return ae.OK;case It.CANCELLED:return ae.CANCELLED;case It.UNKNOWN:return ae.UNKNOWN;case It.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case It.INTERNAL:return ae.INTERNAL;case It.UNAVAILABLE:return ae.UNAVAILABLE;case It.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case It.NOT_FOUND:return ae.NOT_FOUND;case It.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case It.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case It.ABORTED:return ae.ABORTED;case It.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case It.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case It.DATA_LOSS:return ae.DATA_LOSS;default:return Ne()}}(qe=It||(It={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=new Xs([4294967295,4294967295],0);function uy(t){const e=fN().encode(t),n=new TE;return n.update(e),new Uint8Array(n.digest())}function cy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Xs([n,r],0),new Xs([s,i],0)]}class rm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ra(`Invalid padding: ${n}`);if(r<0)throw new ra(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ra(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Xs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Xs.fromNumber(r)));return s.compare(pN)===1&&(s=new Xs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=uy(e),[r,s]=cy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new rm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=uy(e),[r,s]=cy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hc(Me.min(),s,new xt(Qe),Gr(),Oe())}}class il{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new il(r,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class nT{constructor(e,n){this.targetId=e,this.me=n}}class rT{constructor(e,n,r=Yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class dy{constructor(){this.fe=0,this.ge=fy(),this.pe=Yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Oe(),n=Oe(),r=Oe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ne()}}),new il(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=fy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,tt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class mN{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gr(),this.qe=hy(),this.Qe=new xt(Qe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(mf(i))if(r===0){const o=new Se(i.path);this.Ue(n,o,an.newNoDocument(o,Me.min()))}else tt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=li(r).toUint8Array()}catch(l){if(l instanceof PE)return lo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new rm(o,s,i)}catch(l){return lo(l instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&mf(a.target)){const l=new Se(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,an.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Oe();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Hc(e,n,this.Qe,this.ke,r);return this.ke=Gr(),this.qe=hy(),this.Qe=new xt(Qe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new dy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Kt(Qe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function hy(){return new xt(Se.comparator)}function fy(){return new xt(Se.comparator)}const gN={asc:"ASCENDING",desc:"DESCENDING"},yN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vN={and:"AND",or:"OR"};class xN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yf(t,e){return t.useProto3Json||jc(e)?e:{value:e}}function oc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wN(t,e){return oc(t,e.toTimestamp())}function Tr(t){return tt(!!t),Me.fromTimestamp(function(n){const r=bs(n);return new Pt(r.seconds,r.nanos)}(t))}function sm(t,e){return vf(t,e).canonicalString()}function vf(t,e){const n=function(s){return new dt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iT(t){const e=dt.fromString(t);return tt(dT(e)),e}function xf(t,e){return sm(t.databaseId,e.path)}function eh(t,e){const n=iT(e);if(n.get(1)!==t.databaseId.projectId)throw new we(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new we(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Se(aT(n))}function oT(t,e){return sm(t.databaseId,e)}function _N(t){const e=iT(t);return e.length===4?dt.emptyPath():aT(e)}function wf(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aT(t){return tt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function py(t,e,n){return{name:xf(t,e),fields:n.value.mapValue.fields}}function EN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(tt(h===void 0||typeof h=="string"),Yt.fromBase64String(h||"")):(tt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Yt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?ae.UNKNOWN:tT(c.code);return new we(h,c.message||"")}(o);n=new rT(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=eh(t,r.document.name),i=Tr(r.document.updateTime),o=r.document.createTime?Tr(r.document.createTime):Me.min(),a=new Cn({mapValue:{fields:r.document.fields}}),l=an.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new _u(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=eh(t,r.document),i=r.readTime?Tr(r.readTime):Me.min(),o=an.newNoDocument(s,i),a=r.removedTargetIds||[];n=new _u([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=eh(t,r.document),i=r.removedTargetIds||[];n=new _u([],i,s,null)}else{if(!("filter"in e))return Ne();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new dN(s,i),a=r.targetId;n=new nT(a,o)}}return n}function TN(t,e){let n;if(e instanceof sl)n={update:py(t,e.key,e.value)};else if(e instanceof Gc)n={delete:xf(t,e.key)};else if(e instanceof Ns)n={update:py(t,e.key,e.data),updateMask:PN(e.fieldMask)};else{if(!(e instanceof aN))return Ne();n={verify:xf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ic)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $a)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:wN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ne()}(t,e.precondition)),n}function bN(t,e){return t&&t.length>0?(tt(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Tr(s.updateTime):Tr(i);return o.isEqual(Me.min())&&(o=Tr(i)),new sN(o,s.transformResults||[])}(n,e))):[]}function SN(t,e){return{documents:[oT(t,e.path)]}}function lT(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oT(t,s);const i=function(c){if(c.length!==0)return cT(hr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(g){return{field:ss(g.field),direction:AN(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=yf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function IN(t,e,n,r){const{_t:s,parent:i}=lT(t,e),o={},a=[];let l=0;return n.forEach(c=>{const h="aggregate_"+l++;o[h]=c.alias,c.aggregateType==="count"?a.push({alias:h,count:{}}):c.aggregateType==="avg"?a.push({alias:h,avg:{field:ss(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:h,sum:{field:ss(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function CN(t){let e=_N(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){tt(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(m){const g=uT(m);return g instanceof hr&&VE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(E){return new Ha(Ii(E.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,jc(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(m){const g=!!m.before,y=m.values||[];return new rc(y,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,y=m.values||[];return new rc(y,g)}(n.endAt)),$A(e,s,o,i,a,"F",l,c)}function kN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ii(n.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ii(n.unaryFilter.field);return kt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ii(n.unaryFilter.field);return kt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ii(n.unaryFilter.field);return kt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(t):t.fieldFilter!==void 0?function(n){return kt.create(Ii(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hr.create(n.compositeFilter.filters.map(r=>uT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne()}}(n.compositeFilter.op))}(t):Ne()}function AN(t){return gN[t]}function NN(t){return yN[t]}function RN(t){return vN[t]}function ss(t){return{fieldPath:t.canonicalString()}}function Ii(t){return qt.fromServerFormat(t.fieldPath)}function cT(t){return t instanceof kt?function(n){if(n.op==="=="){if(ey(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NAN"}};if(Z0(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ey(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NAN"}};if(Z0(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ss(n.field),op:NN(n.op),value:n.value}}}(t):t instanceof hr?function(n){const r=n.getFilters().map(s=>cT(s));return r.length===1?r[0]:{compositeFilter:{op:RN(n.op),filters:r}}}(t):Ne()}function PN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n,r,s,i=Me.min(),o=Me.min(),a=Yt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new as(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.ct=e}}function DN(t){const e=CN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.un=new VN}addToCollectionParentIndex(e,n){return this.un.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(Ts.min())}updateCollectionGroup(e,n,r){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class VN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Kt(dt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Kt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fo(0)}static kn(){return new fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.changes=new Eo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?de.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&xa(r.mutation,s,jn.empty(),Pt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Oe()){const s=Js();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=na();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Gr();const o=va(),a=function(){return va()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Ns)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),xa(h.mutation,c,h.mutation.getFieldMask(),Pt.now())):o.set(c.key,jn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var m;return a.set(c,new jN(h,(m=o.get(c))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const r=va();let s=new xt((o,a)=>o-a),i=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||jn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const m=(s.get(a.batchId)||Oe()).add(l);s=s.insert(a.batchId,m)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,m=qE();h.forEach(g=>{if(!i.has(g)){const y=ZE(n.get(g),r.get(g));y!==null&&m.set(g,y),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return de.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):de.resolve(Js());let a=-1,l=i;return o.next(c=>de.forEach(c,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(h)?de.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Oe())).next(h=>({batchId:a,changes:$E(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next(r=>{let s=na();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=na();return this.indexManager.getCollectionParents(e,i).next(a=>de.forEach(a,l=>{const c=function(m,g){return new _o(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,an.newInvalidDocument(h)))});let a=na();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&xa(h.mutation,c,jn.empty(),Pt.now()),Bc(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return de.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Tr(s.createTime)}}(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:DN(s.bundledQuery),readTime:Tr(s.readTime)}}(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.overlays=new xt(Se.comparator),this.Ir=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Js();return de.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),de.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),de.resolve()}getOverlaysForCollection(e,n,r){const s=Js(),i=n.length+1,o=new Se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return de.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new xt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Js(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Js(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return de.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new uN(n,r));let i=this.Ir.get(n);i===void 0&&(i=Oe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(){this.Tr=new Kt(Mt.Er),this.dr=new Kt(Mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Se(new dt([])),r=new Mt(n,e),s=new Mt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Se(new dt([])),r=new Mt(n,e),s=new Mt(n,e+1);let i=Oe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Se.comparator(e.key,n.key)||Qe(e.wr,n.wr)}static Ar(e,n){return Qe(e.wr,n.wr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Kt(Mt.Er)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lN(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Mt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return de.resolve(o)}lookupMutationBatch(e,n){return de.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return de.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mt(n,0),s=new Mt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),de.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(Qe);return n.forEach(s=>{const i=new Mt(s,0),o=new Mt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),de.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Se.isDocumentKey(i)||(i=i.child(""));const o=new Mt(new Se(i),0);let a=new Kt(Qe);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),de.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){tt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return de.forEach(n.mutations,s=>{const i=new Mt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Mt(n,0),s=this.br.firstAfterOrEqual(r);return de.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.Mr=e,this.docs=function(){return new xt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return de.resolve(r?r.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let r=Gr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():an.newInvalidDocument(s))}),de.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Gr();const o=n.path,a=new Se(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||SA(bA(h),r)<=0||(s.has(h.key)||Bc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Ne()}Or(e,n){return de.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $N(this)}getSize(e){return de.resolve(this.size)}}class $N extends FN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),de.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.persistence=e,this.Nr=new Eo(n=>Xp(n),Zp),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new im,this.targetCount=0,this.kr=fo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),de.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.Kn(n),de.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),de.waitFor(i).next(()=>s)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return de.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),de.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),de.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return de.resolve(r)}containsKey(e,n){return de.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Kp(0),this.Kr=!1,this.Kr=!0,this.$r=new zN,this.referenceDelegate=e(this),this.Ur=new qN(this),this.indexManager=new LN,this.remoteDocumentCache=function(s){return new HN(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new MN(n),this.Gr=new BN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ON,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new GN(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Te("MemoryPersistence","Starting transaction:",e);const s=new KN(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return de.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class KN extends CA{constructor(e){super(),this.currentSequenceNumber=e}}class om{constructor(e){this.persistence=e,this.Jr=new im,this.Yr=null}static Zr(e){return new om(e)}get Xr(){if(this.Yr)return this.Yr;throw Ne()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),de.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),de.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Xr,r=>{const s=Se.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return de.or([()=>de.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Oe(),s=Oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new am(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return RC()?8:kA(kC())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new JN;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ko()<=We.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",Si(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),de.resolve()):(Ko()<=We.DEBUG&&Te("QueryEngine","Query:",Si(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ko()<=We.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",Si(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Er(n))):de.resolve())}Yi(e,n){if(sy(n))return de.resolve(null);let r=Er(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=sc(n,null,"F"),r=Er(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Oe(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,sc(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return sy(n)||s.isEqual(Me.min())?de.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?de.resolve(null):(Ko()<=We.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Si(n)),this.rs(e,o,n,TA(s,-1)).next(a=>a))})}ts(e,n){let r=new Kt(GE(e));return n.forEach((s,i)=>{Bc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ko()<=We.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",Si(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ts.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new xt(Qe),this._s=new Eo(i=>Xp(i),Zp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function XN(t,e,n,r){return new QN(t,e,n,r)}async function hT(t,e){const n=Re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Oe();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function ZN(t,e){const n=Re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const m=c.batch,g=m.keys();let y=de.resolve();return g.forEach(E=>{y=y.next(()=>h.getEntry(l,E)).next(x=>{const T=c.docVersions.get(E);tt(T!==null),x.version.compareTo(T)<0&&(m.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Oe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function fT(t){const e=Re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function eR(t,e){const n=Re(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,m)=>{const g=s.get(m);if(!g)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,m)));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Yt.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(m,y),function(x,T,v){return x.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(g,y,h)&&a.push(n.Ur.updateTargetData(i,y))});let l=Gr(),c=Oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(tR(i,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(Me.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return de.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function tR(t,e,n){let r=Oe(),s=Oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Gr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function nR(t,e){const n=Re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rR(t,e){const n=Re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,de.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new as(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function _f(t,e,n){const r=Re(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!rl(o))throw o;Te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function my(t,e,n){const r=Re(t);let s=Me.min(),i=Oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const m=Re(l),g=m._s.get(h);return g!==void 0?de.resolve(m.os.get(g)):m.Ur.getTargetData(c,h)}(r,o,Er(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Me.min(),n?i:Oe())).next(a=>(sR(r,WA(e),a),{documents:a,Ts:i})))}function sR(t,e,n){let r=t.us.get(e)||Me.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class gy{constructor(){this.activeTargetIds=ZA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iR{constructor(){this.so=new gy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql=null;function th(){return Ql===null?Ql=function(){return 268435456+Math.round(2147483648*Math.random())}():Ql++,"0x"+Ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class uR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=th(),l=this.xo(n,r.toUriEncodedString());Te("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(h=>(Te("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw lo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=aR[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=th();return new Promise((o,a)=>{const l=new bE;l.setWithCredentials(!0),l.listenOnce(SE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vu.NO_ERROR:const h=l.getResponseJson();Te(rn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case vu.TIMEOUT:Te(rn,`RPC '${e}' ${i} timed out`),a(new we(ae.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:const m=l.getStatus();if(Te(rn,`RPC '${e}' ${i} failed with status:`,m,"response text:",l.getResponseText()),m>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const E=function(T){const v=T.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(v)>=0?v:ae.UNKNOWN}(y.status);a(new we(E,y.message))}else a(new we(ae.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new we(ae.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{Te(rn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Te(rn,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=th(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=kE(),a=CE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");Te(rn,`Creating RPC '${e}' stream ${s}: ${h}`,l);const m=o.createWebChannel(h,l);let g=!1,y=!1;const E=new lR({Io:T=>{y?Te(rn,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(g||(Te(rn,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Te(rn,`RPC '${e}' stream ${s} sending:`,T),m.send(T))},To:()=>m.close()}),x=(T,v,_)=>{T.listen(v,b=>{try{_(b)}catch(M){setTimeout(()=>{throw M},0)}})};return x(m,ta.EventType.OPEN,()=>{y||(Te(rn,`RPC '${e}' stream ${s} transport opened.`),E.yo())}),x(m,ta.EventType.CLOSE,()=>{y||(y=!0,Te(rn,`RPC '${e}' stream ${s} transport closed`),E.So())}),x(m,ta.EventType.ERROR,T=>{y||(y=!0,lo(rn,`RPC '${e}' stream ${s} transport errored:`,T),E.So(new we(ae.UNAVAILABLE,"The operation could not be completed")))}),x(m,ta.EventType.MESSAGE,T=>{var v;if(!y){const _=T.data[0];tt(!!_);const b=_,M=b.error||((v=b[0])===null||v===void 0?void 0:v.error);if(M){Te(rn,`RPC '${e}' stream ${s} received error:`,M);const V=M.status;let B=function(A){const P=It[A];if(P!==void 0)return tT(P)}(V),k=M.message;B===void 0&&(B=ae.INTERNAL,k="Unknown error status: "+V+" with message "+M.message),y=!0,E.So(new we(B,k)),m.close()}else Te(rn,`RPC '${e}' stream ${s} received:`,_),E.bo(_)}}),x(a,IE.STAT_EVENT,T=>{T.stat===df.PROXY?Te(rn,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===df.NOPROXY&&Te(rn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function nh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){return new xN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new pT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(zr(n.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new we(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cR extends mT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=EN(this.serializer,e),r=function(i){if(!("targetChange"in i))return Me.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Me.min():o.readTime?Tr(o.readTime):Me.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=wf(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=mf(l)?{documents:SN(i,l)}:{query:lT(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sT(i,o.resumeToken);const c=yf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Me.min())>0){a.readTime=oc(i,o.snapshotVersion.toTimestamp());const c=yf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=kN(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=wf(this.serializer),n.removeTarget=e,this.a_(n)}}class dR extends mT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return tt(!!e.streamToken),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=bN(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=wf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>TN(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new we(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,vf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new we(ae.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,vf(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(ae.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class fR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zr(n),this.D_=!1):Te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{pi(this)&&(Te("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Re(l);c.L_.add(4),await ol(c),c.q_.set("Unknown"),c.L_.delete(4),await qc(c)}(this))})}),this.q_=new fR(r,s)}}async function qc(t){if(pi(t))for(const e of t.B_)await e(!0)}async function ol(t){for(const e of t.B_)await e(!1)}function gT(t,e){const n=Re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),dm(n)?cm(n):To(n).r_()&&um(n,e))}function lm(t,e){const n=Re(t),r=To(n);n.N_.delete(e),r.r_()&&yT(n,e),n.N_.size===0&&(r.r_()?r.o_():pi(n)&&n.q_.set("Unknown"))}function um(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}To(t).A_(e)}function yT(t,e){t.Q_.xe(e),To(t).R_(e)}function cm(t){t.Q_=new mN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),To(t).start(),t.q_.v_()}function dm(t){return pi(t)&&!To(t).n_()&&t.N_.size>0}function pi(t){return Re(t).L_.size===0}function vT(t){t.Q_=void 0}async function mR(t){t.q_.set("Online")}async function gR(t){t.N_.forEach((e,n)=>{um(t,e)})}async function yR(t,e){vT(t),dm(t)?(t.q_.M_(e),cm(t)):t.q_.set("Unknown")}async function vR(t,e,n){if(t.q_.set("Online"),e instanceof rT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){Te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ac(t,r)}else if(e instanceof _u?t.Q_.Ke(e):e instanceof nT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Me.min()))try{const r=await fT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(Yt.EMPTY_BYTE_STRING,h.snapshotVersion)),yT(i,l);const m=new as(h.target,l,c,h.sequenceNumber);um(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Te("RemoteStore","Failed to raise snapshot:",r),await ac(t,r)}}async function ac(t,e,n){if(!rl(e))throw e;t.L_.add(1),await ol(t),t.q_.set("Offline"),n||(n=()=>fT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await qc(t)})}function xT(t,e){return e().catch(n=>ac(t,n,e))}async function Wc(t){const e=Re(t),n=Ss(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;xR(e);)try{const s=await nR(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,wR(e,s)}catch(s){await ac(e,s)}wT(e)&&_T(e)}function xR(t){return pi(t)&&t.O_.length<10}function wR(t,e){t.O_.push(e);const n=Ss(t);n.r_()&&n.V_&&n.m_(e.mutations)}function wT(t){return pi(t)&&!Ss(t).n_()&&t.O_.length>0}function _T(t){Ss(t).start()}async function _R(t){Ss(t).p_()}async function ER(t){const e=Ss(t);for(const n of t.O_)e.m_(n.mutations)}async function TR(t,e,n){const r=t.O_.shift(),s=nm.from(r,e,n);await xT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Wc(t)}async function bR(t,e){e&&Ss(t).V_&&await async function(r,s){if(function(o){return hN(o)&&o!==ae.ABORTED}(s.code)){const i=r.O_.shift();Ss(r).s_(),await xT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Wc(r)}}(t,e),wT(t)&&_T(t)}async function vy(t,e){const n=Re(t);n.asyncQueue.verifyOperationInProgress(),Te("RemoteStore","RemoteStore received new credentials");const r=pi(n);n.L_.add(3),await ol(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await qc(n)}async function SR(t,e){const n=Re(t);e?(n.L_.delete(2),await qc(n)):e||(n.L_.add(2),await ol(n),n.q_.set("Unknown"))}function To(t){return t.K_||(t.K_=function(n,r,s){const i=Re(n);return i.w_(),new cR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:mR.bind(null,t),Ro:gR.bind(null,t),mo:yR.bind(null,t),d_:vR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),dm(t)?cm(t):t.q_.set("Unknown")):(await t.K_.stop(),vT(t))})),t.K_}function Ss(t){return t.U_||(t.U_=function(n,r,s){const i=Re(n);return i.w_(),new dR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_R.bind(null,t),mo:bR.bind(null,t),f_:ER.bind(null,t),g_:TR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Wc(t)):(await t.U_.stop(),t.O_.length>0&&(Te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new hm(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fm(t,e){if(zr("AsyncQueue",`${e}: ${t}`),rl(t))return new we(ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Se.comparator(n.key,r.key):(n,r)=>Se.comparator(n.key,r.key),this.keyedMap=na(),this.sortedSet=new xt(this.comparator)}static emptySet(e){return new Ki(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ki)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ki;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(){this.W_=new xt(Se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ne():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class po{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new po(e,n,Ki.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class CR{constructor(){this.queries=wy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Re(n),i=s.queries;s.queries=wy(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new we(ae.ABORTED,"Firestore shutting down"))}}function wy(){return new Eo(t=>zE(t),Uc)}async function ET(t,e){const n=Re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new IR,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=fm(o,`Initialization of query '${Si(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&pm(n)}async function TT(t,e){const n=Re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kR(t,e){const n=Re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&pm(n)}function AR(t,e,n){const r=Re(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function pm(t){t.Y_.forEach(e=>{e.next()})}var Ef,_y;(_y=Ef||(Ef={})).ea="default",_y.Cache="cache";class bT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new po(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ef.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.key=e}}class IT{constructor(e){this.key=e}}class NR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Oe(),this.mutatedKeys=Oe(),this.Aa=GE(e),this.Ra=new Ki(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new xy,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const g=s.get(h),y=Bc(this.query,m)?m:null,E=!!g&&this.mutatedKeys.has(g.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;g&&y?g.data.isEqual(y.data)?E!==x&&(r.track({type:3,doc:y}),T=!0):this.ga(g,y)||(r.track({type:2,doc:y}),T=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),T=!0):g&&!y&&(r.track({type:1,doc:g}),T=!0,(l||c)&&(a=!0)),T&&(y?(o=o.add(y),i=x?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,m)=>function(y,E){const x=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return x(y)-x(E)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new po(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new IT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new ST(r))}),n}ba(e){this.Ta=e.Ts,this.da=Oe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return po.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class RR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PR{constructor(e){this.key=e,this.va=!1}}class MR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Eo(a=>zE(a),Uc),this.Ma=new Map,this.xa=new Set,this.Oa=new xt(Se.comparator),this.Na=new Map,this.La=new im,this.Ba={},this.ka=new Map,this.qa=fo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function DR(t,e,n=!0){const r=PT(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await CT(r,e,n,!0),s}async function LR(t,e){const n=PT(t);await CT(n,e,!0,!1)}async function CT(t,e,n,r){const s=await rR(t.localStore,Er(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await VR(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&gT(t.remoteStore,s),a}async function VR(t,e,n,r,s){t.Ka=(m,g,y)=>async function(x,T,v,_){let b=T.view.ma(v);b.ns&&(b=await my(x.localStore,T.query,!1).then(({documents:k})=>T.view.ma(k,b)));const M=_&&_.targetChanges.get(T.targetId),V=_&&_.targetMismatches.get(T.targetId)!=null,B=T.view.applyChanges(b,x.isPrimaryClient,M,V);return Ty(x,T.targetId,B.wa),B.snapshot}(t,m,g,y);const i=await my(t.localStore,e,!0),o=new NR(e,i.Ts),a=o.ma(i.documents),l=il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Ty(t,n,c.wa);const h=new RR(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function FR(t,e,n){const r=Re(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Uc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await _f(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&lm(r.remoteStore,s.targetId),Tf(r,s.targetId)}).catch(nl)):(Tf(r,s.targetId),await _f(r.localStore,s.targetId,!0))}async function jR(t,e){const n=Re(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lm(n.remoteStore,r.targetId))}async function UR(t,e,n){const r=qR(t);try{const s=await function(o,a){const l=Re(o),c=Pt.now(),h=a.reduce((y,E)=>y.add(E.key),Oe());let m,g;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=Gr(),x=Oe();return l.cs.getEntries(y,h).next(T=>{E=T,E.forEach((v,_)=>{_.isValidDocument()||(x=x.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,E)).next(T=>{m=T;const v=[];for(const _ of a){const b=oN(_,m.get(_.key).overlayedDocument);b!=null&&v.push(new Ns(_.key,b,ME(b.value.mapValue),yn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,v,a)}).next(T=>{g=T;const v=T.applyToLocalDocumentSet(m,x);return l.documentOverlayCache.saveOverlays(y,T.batchId,v)})}).then(()=>({batchId:g.batchId,changes:$E(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new xt(Qe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await al(r,s.changes),await Wc(r.remoteStore)}catch(s){const i=fm(s,"Failed to persist write");n.reject(i)}}async function kT(t,e){const n=Re(t);try{const r=await eR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?tt(o.va):s.removedDocuments.size>0&&(tt(o.va),o.va=!1))}),await al(n,r,e)}catch(r){await nl(r)}}function Ey(t,e,n){const r=Re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Re(o);l.onlineState=a;let c=!1;l.queries.forEach((h,m)=>{for(const g of m.j_)g.Z_(a)&&(c=!0)}),c&&pm(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BR(t,e,n){const r=Re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new xt(Se.comparator);o=o.insert(i,an.newNoDocument(i,Me.min()));const a=Oe().add(i),l=new Hc(Me.min(),new Map,new xt(Qe),o,a);await kT(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),mm(r)}else await _f(r.localStore,e,!1).then(()=>Tf(r,e,n)).catch(nl)}async function OR(t,e){const n=Re(t),r=e.batch.batchId;try{const s=await ZN(n.localStore,e);NT(n,r,null),AT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await al(n,s)}catch(s){await nl(s)}}async function zR(t,e,n){const r=Re(t);try{const s=await function(o,a){const l=Re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(m=>(tt(m!==null),h=m.keys(),l.mutationQueue.removeMutationBatch(c,m))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);NT(r,e,n),AT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await al(r,s)}catch(s){await nl(s)}}function AT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function NT(t,e,n){const r=Re(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Tf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||RT(t,r)})}function RT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(lm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),mm(t))}function Ty(t,e,n){for(const r of n)r instanceof ST?(t.La.addReference(r.key,e),GR(t,r)):r instanceof IT?(Te("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||RT(t,r.key)):Ne()}function GR(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Te("SyncEngine","New document in limbo: "+n),t.xa.add(r),mm(t))}function mm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Se(dt.fromString(e)),r=t.qa.next();t.Na.set(r,new PR(n)),t.Oa=t.Oa.insert(n,r),gT(t.remoteStore,new as(Er(em(n.path)),r,"TargetPurposeLimboResolution",Kp.oe))}}async function al(t,e,n){const r=Re(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(c){s.push(c);const m=am.Wi(l.targetId,c);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const h=Re(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>de.forEach(c,g=>de.forEach(g.$i,y=>h.persistence.referenceDelegate.addReference(m,g.targetId,y)).next(()=>de.forEach(g.Ui,y=>h.persistence.referenceDelegate.removeReference(m,g.targetId,y)))))}catch(m){if(!rl(m))throw m;Te("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const y=h.os.get(g),E=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(g,x)}}}(r.localStore,i))}async function HR(t,e){const n=Re(t);if(!n.currentUser.isEqual(e)){Te("SyncEngine","User change. New user:",e.toKey());const r=await hT(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new we(ae.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await al(n,r.hs)}}function $R(t,e){const n=Re(t),r=n.Na.get(e);if(r&&r.va)return Oe().add(r.key);{let s=Oe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function PT(t){const e=Re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$R.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BR.bind(null,e),e.Ca.d_=kR.bind(null,e.eventManager),e.Ca.$a=AR.bind(null,e.eventManager),e}function qR(t){const e=Re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zR.bind(null,e),e}class lc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$c(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return XN(this.persistence,new YN,e.initialUser,this.serializer)}Ga(e){return new WN(om.Zr,this.serializer)}Wa(e){return new iR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lc.provider={build:()=>new lc};class bf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ey(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HR.bind(null,this.syncEngine),await SR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CR}()}createDatastore(e){const n=$c(e.databaseInfo.databaseId),r=function(i){return new uR(i)}(e.databaseInfo);return function(i,o,a,l){return new hR(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new pR(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ey(this.syncEngine,n,0),function(){return yy.D()?new yy:new oR}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const m=new MR(s,i,o,a,l,c);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Re(s);Te("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ol(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bf.provider={build:()=>new bf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=sn.UNAUTHENTICATED,this.clientId=NE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Te("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rh(t,e){t.asyncQueue.verifyOperationInProgress(),Te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await hT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function by(t,e){t.asyncQueue.verifyOperationInProgress();const n=await KR(t);Te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>vy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>vy(e.remoteStore,s)),t._onlineComponents=e}async function KR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te("FirestoreClient","Using user provided OfflineComponentProvider");try{await rh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;lo("Error using user provided cache. Falling back to memory cache: "+n),await rh(t,new lc)}}else Te("FirestoreClient","Using default OfflineComponentProvider"),await rh(t,new lc);return t._offlineComponents}async function gm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te("FirestoreClient","Using user provided OnlineComponentProvider"),await by(t,t._uninitializedComponentsProvider._online)):(Te("FirestoreClient","Using default OnlineComponentProvider"),await by(t,new bf))),t._onlineComponents}function JR(t){return gm(t).then(e=>e.syncEngine)}function YR(t){return gm(t).then(e=>e.datastore)}async function DT(t){const e=await gm(t),n=e.eventManager;return n.onListen=DR.bind(null,e.syncEngine),n.onUnlisten=FR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=LR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jR.bind(null,e.syncEngine),n}function QR(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new MT({next:g=>{h.Za(),o.enqueueAndForget(()=>TT(i,m));const y=g.docs.has(a);!y&&g.fromCache?c.reject(new we(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&l&&l.source==="server"?c.reject(new we(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new bT(em(a.path),h,{includeMetadataChanges:!0,_a:!0});return ET(i,m)}(await DT(t),t.asyncQueue,e,n,r)),r.promise}function XR(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new MT({next:g=>{h.Za(),o.enqueueAndForget(()=>TT(i,m)),g.fromCache&&l.source==="server"?c.reject(new we(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new bT(a,h,{includeMetadataChanges:!0,_a:!0});return ET(i,m)}(await DT(t),t.asyncQueue,e,n,r)),r.promise}function ZR(t,e,n){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await YR(t);r.resolve(async function(o,a,l){var c;const h=Re(o),{request:m,ut:g,parent:y}=IN(h.serializer,qA(a),l);h.connection.Fo||delete m.parent;const E=(await h.Lo("RunAggregationQuery",h.serializer.databaseId,y,m,1)).filter(T=>!!T.result);tt(E.length===1);const x=(c=E[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(x).reduce((T,v)=>(T[g[v]]=x[v],T),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(t,e,n){if(!n)throw new we(ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eP(t,e,n,r){if(e===!0&&r===!0)throw new we(ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Iy(t){if(!Se.isDocumentKey(t))throw new we(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cy(t){if(Se.isDocumentKey(t))throw new we(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Kc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne()}function Gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kc(t);throw new we(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function tP(t,e){if(e<=0)throw new we(ae.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new we(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new we(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new we(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new we(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new we(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ky({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ky(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pA;switch(r.type){case"firstParty":return new vA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Sy.get(n);r&&(Te("ComponentProvider","Removing Datastore"),Sy.delete(n),r.terminate())}(this),Promise.resolve()}}function nP(t,e,n,r={}){var s;const i=(t=Gn(t,Jc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=sn.MOCK_USER;else{a=CC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new we(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new sn(c)}t._authCredentials=new mA(new AE(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class vn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}}class vs extends Rs{constructor(e,n,r){super(e,n,em(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new Se(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function lt(t,e,...n){if(t=zn(t),VT("collection","path",e),t instanceof Jc){const r=dt.fromString(e,...n);return Cy(r),new vs(t,null,r)}{if(!(t instanceof vn||t instanceof vs))throw new we(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return Cy(r),new vs(t.firestore,null,r)}}function Ft(t,e,...n){if(t=zn(t),arguments.length===1&&(e=NE.newId()),VT("doc","path",e),t instanceof Jc){const r=dt.fromString(e,...n);return Iy(r),new vn(t,null,new Se(r))}{if(!(t instanceof vn||t instanceof vs))throw new we(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return Iy(r),new vn(t.firestore,t instanceof vs?t.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new pT(this,"async_queue_retry"),this.Vu=()=>{const r=nh();r&&Te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=nh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=nh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new _r;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!rl(e))throw e;Te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw zr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=hm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class qr extends Jc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Ay,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ay(e),this._firestoreClient=void 0,await e}}}function rP(t,e){const n=typeof t=="object"?t:X_(),r=typeof t=="string"?t:"(default)",s=tl(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=SC("firestore");i&&nP(s,...i)}return s}function ll(t){if(t._terminated)throw new we(ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sP(t),t._firestoreClient}function sP(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,h){return new PA(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,LT(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new WR(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class oP{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mo(Yt.fromBase64String(e))}catch(n){throw new we(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mo(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new we(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new we(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new we(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=/^__.*__$/;class lP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new sl(e,this.data,n,this.fieldTransforms)}}class FT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class xm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new xm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(jT(this.Cu)&&aP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class uP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$c(e)}Qu(e,n,r,s=!1){return new xm({Cu:e,methodName:n,qu:r,path:qt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cl(t){const e=t._freezeSettings(),n=$c(t._databaseId);return new uP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wm(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Em("Data must be an object, but it was:",o,r);const a=OT(r,o);let l,c;if(i.merge)l=new jn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const g=Sf(e,m,n);if(!o.contains(g))throw new we(ae.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);GT(h,g)||h.push(g)}l=new jn(h),c=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,c=o.fieldTransforms;return new lP(new Cn(a),l,c)}class Qc extends Yc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qc}}class _m extends Yc{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Wa(e.serializer,KE(e.serializer,this.$u));return new nN(e.path,n)}isEqual(e){return e instanceof _m&&this.$u===e.$u}}function UT(t,e,n,r){const s=t.Qu(1,e,n);Em("Data must be an object, but it was:",s,r);const i=[],o=Cn.empty();fi(r,(l,c)=>{const h=Tm(e,l,n);c=zn(c);const m=s.Nu(h);if(c instanceof Qc)i.push(h);else{const g=dl(c,m);g!=null&&(i.push(h),o.set(h,g))}});const a=new jn(i);return new FT(o,a,s.fieldTransforms)}function BT(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Sf(e,r,n)],l=[s];if(i.length%2!=0)throw new we(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(Sf(e,i[g])),l.push(i[g+1]);const c=[],h=Cn.empty();for(let g=a.length-1;g>=0;--g)if(!GT(c,a[g])){const y=a[g];let E=l[g];E=zn(E);const x=o.Nu(y);if(E instanceof Qc)c.push(y);else{const T=dl(E,x);T!=null&&(c.push(y),h.set(y,T))}}const m=new jn(c);return new FT(h,m,o.fieldTransforms)}function cP(t,e,n,r=!1){return dl(n,t.Qu(r?4:3,e))}function dl(t,e){if(zT(t=zn(t)))return Em("Unsupported field value:",e,t),OT(t,e);if(t instanceof Yc)return function(r,s){if(!jT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=dl(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=zn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Pt.fromDate(r);return{timestampValue:oc(s.serializer,i)}}if(r instanceof Pt){const i=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oc(s.serializer,i)}}if(r instanceof ym)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mo)return{bytesValue:sT(s.serializer,r._byteString)};if(r instanceof vn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:sm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return tm(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Kc(r)}`)}(t,e)}function OT(t,e){const n={};return RE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fi(t,(r,s)=>{const i=dl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function zT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pt||t instanceof ym||t instanceof mo||t instanceof vn||t instanceof Yc||t instanceof vm)}function Em(t,e,n){if(!zT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Kc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Sf(t,e,n){if((e=zn(e))instanceof ul)return e._internalPath;if(typeof e=="string")return Tm(t,e);throw uc("Field path arguments must be of type string or ",t,!1,void 0,n)}const dP=new RegExp("[~\\*/\\[\\]]");function Tm(t,e,n){if(e.search(dP)>=0)throw uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ul(...e.split("."))._internalPath}catch{throw uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new we(ae.INVALID_ARGUMENT,a+t+l)}function GT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Xc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hP extends HT{data(){return super.data()}}function Xc(t,e){return typeof e=="string"?Tm(t,e):e instanceof ul?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new we(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bm{}class Sm extends bm{}function Mn(t,e,...n){let r=[];e instanceof bm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Im).length,a=i.filter(l=>l instanceof Zc).length;if(o>1||o>0&&a>0)throw new we(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Zc extends Sm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zc(e,n,r)}_apply(e){const n=this._parse(e);return $T(e._query,n),new Rs(e.firestore,e.converter,gf(e._query,n))}_parse(e){const n=cl(e.firestore);return function(i,o,a,l,c,h,m){let g;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new we(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Ry(m,h);const y=[];for(const E of m)y.push(Ny(l,i,E));g={arrayValue:{values:y}}}else g=Ny(l,i,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Ry(m,h),g=cP(a,o,m,h==="in"||h==="not-in");return kt.create(c,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Sr(t,e,n){const r=e,s=Xc("where",t);return Zc._create(s,r,n)}class Im extends bm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Im(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)$T(o,l),o=gf(o,l)}(e._query,n),new Rs(e.firestore,e.converter,gf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cm extends Sm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Cm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new we(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new we(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ha(i,o)}(e._query,this._field,this._direction);return new Rs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new _o(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ci(t,e="asc"){const n=e,r=Xc("orderBy",t);return Cm._create(r,n)}class km extends Sm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new km(e,n,r)}_apply(e){return new Rs(e.firestore,e.converter,sc(e._query,this._limit,this._limitType))}}function go(t){return tP("limit",t),km._create("limit",t,"F")}function Ny(t,e,n){if(typeof(n=zn(n))=="string"){if(n==="")throw new we(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BE(e)&&n.indexOf("/")!==-1)throw new we(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(dt.fromString(n));if(!Se.isDocumentKey(r))throw new we(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return X0(t,new Se(r))}if(n instanceof vn)return X0(t,n._key);throw new we(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kc(n)}.`)}function Ry(t,e){if(!Array.isArray(t)||t.length===0)throw new we(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $T(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new we(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class pP{convertValue(e,n="none"){switch(ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Et(o.doubleValue));return new vm(i)}convertGeoPoint(e){return new ym(Et(e.latitude),Et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oa(e));default:return null}}convertTimestamp(e){const n=bs(e);return new Pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=dt.fromString(e);tt(dT(r));const s=new za(r.get(1),r.get(3)),i=new Se(r.popFirst(5));return s.isEqual(n)||zr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function mP(){return new iP("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qT extends HT{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Xc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Eu extends qT{data(e={}){return super.data(e)}}class gP{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new sa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Eu(this._firestore,this._userDataWriter,r.key,r,new sa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new we(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Eu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new sa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Eu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new sa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:yP(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t){t=Gn(t,vn);const e=Gn(t.firestore,qr);return QR(ll(e),t._key).then(n=>vP(e,t,n))}class Nm extends pP{constructor(e){super(),this.firestore=e}convertBytes(e){return new mo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,n)}}function Dn(t){t=Gn(t,Rs);const e=Gn(t.firestore,qr),n=ll(e),r=new Nm(e);return fP(t._query),XR(n,t._query).then(s=>new gP(e,r,t,s))}function KT(t,e,n){t=Gn(t,vn);const r=Gn(t.firestore,qr),s=Am(t.converter,e,n);return hl(r,[wm(cl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,yn.none())])}function bo(t,e,n,...r){t=Gn(t,vn);const s=Gn(t.firestore,qr),i=cl(s);let o;return o=typeof(e=zn(e))=="string"||e instanceof ul?BT(i,"updateDoc",t._key,e,n,r):UT(i,"updateDoc",t._key,e),hl(s,[o.toMutation(t._key,yn.exists(!0))])}function ed(t){return hl(Gn(t.firestore,qr),[new Gc(t._key,yn.none())])}function Ps(t,e){const n=Gn(t.firestore,qr),r=Ft(t),s=Am(t.converter,e);return hl(n,[wm(cl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,yn.exists(!1))]).then(()=>r)}function hl(t,e){return function(r,s){const i=new _r;return r.asyncQueue.enqueueAndForget(async()=>UR(await JR(r),s,i)),i.promise}(ll(t),e)}function vP(t,e,n){const r=n.docs.get(e._key),s=new Nm(t);return new qT(t,s,e._key,r,new sa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t){return xP(t,{count:mP()})}function xP(t,e){const n=Gn(t.firestore,qr),r=ll(n),s=NA(e,(i,o)=>new cN(o,i.aggregateType,i._internalFieldPath));return ZR(r,t._query,s).then(i=>function(a,l,c){const h=new Nm(a);return new oP(l,h,c)}(n,t,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=cl(e)}set(e,n,r){this._verifyNotCommitted();const s=sh(e,this._firestore),i=Am(s.converter,n,r),o=wm(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,yn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=sh(e,this._firestore);let o;return o=typeof(n=zn(n))=="string"||n instanceof ul?BT(this._dataReader,"WriteBatch.update",i._key,n,r,s):UT(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=sh(e,this._firestore);return this._mutations=this._mutations.concat(new Gc(n._key,yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sh(t,e){if((t=zn(t)).firestore!==e)throw new we(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Py(t){return new _m("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t){return ll(t=Gn(t,qr)),new wP(t,e=>hl(t,e))}(function(e,n=!0){(function(s){wo=s})(F2),Es(new Br("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new qr(new gA(r.getProvider("auth-internal")),new wA(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new we(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new za(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),wr(W0,"4.7.3",e),wr(W0,"4.7.3","esm2017")})();const _P={apiKey:"AIzaSyDjgrBvKUaVg9U1XustHj9TeO4lHZDrcNg",authDomain:"fanra-dev.firebaseapp.com",projectId:"fanra-dev",storageBucket:"fanra-dev.firebasestorage.app",messagingSenderId:"664735861834",appId:"1:664735861834:web:6519570201553dbe4faab3",measurementId:"G-HMKEVZS65H"},JT=Q_(_P);cA(JT);const De=rP(JT),Lr="users",YT="chats",cc="knowledge_base",Ka="shared_api_keys",fl="gallery_photos_production",pl="blog_posts_production",nd="music_playlist",QT="site_content",XT="analytics_daily",EP="analytics_logs",Pm="messages",Xl=5,If="fanra_credits_offline",ZT=[{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/609923798_2054349268723214_528785191593339343_n.webp?stp=dst-webp_s960x960&_nc_cat=110&ccb=1-7&_nc_sid=9f807c&_nc_ohc=BZOOtuLCh5UQ7kNvwGKzWef&_nc_oc=AdmGNpGcSr3xRboqLJeuQ8M5KjOpRBNLbsqQVscddteG1f05EVO_Kv4iZQn5l2OjztzywzdnV5Qp-sDi35XjQWpa&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QGA47iTm-6vGLy8O36BgFnvih3m4gJ3HjjJLwTB_h1_yg&oe=6987DFA2",caption:"Awal tahun yang tenang. Duduk santai menikmati sore.",month:"Januari",year:"2026",timestamp:1768608e6}],eb=[{title:"Paradoks Fermi: Keheningan yang Memekakkan Telinga",subtitle:"Jika alam semesta ini tak terhingga luasnya dan tua usianya, di mana semua orang?",category:"Sains & Filsafat",date:"9 Januari 2026",readTime:"7 min read",author:"Fanra",image:"https://upload.wikimedia.org/wikipedia/commons/6/69/NASA-HS201427a-HubbleUltraDeepField2014-20140603.jpg",content:`Pernahkah lo menatap langit malam yang cerah, melihat ribuan bintang, dan merasa betapa kecilnya kita? Lalu muncul satu pertanyaan sederhana yang menghantui para ilmuwan selama puluhan tahun: "Di mana mereka semua?"

Mari kita bicara matematika sebentar. Galaksi Bima Sakti kita sendiri memiliki sekitar 100 hingga 400 miliar bintang. Dan di alam semesta yang teramati, ada triliunan galaksi lain. Bahkan jika hanya sebagian kecil dari bintang-bintang itu memiliki planet yang mirip Bumi, seharusnya ada jutaan peradaban cerdas di luar sana.

Alam semesta berumur sekitar 13,8 miliar tahun. Bumi baru berumur 4,5 miliar tahun. Artinya, ada peradaban lain yang mungkin sudah ada miliaran tahun sebelum kita. Bayangkan teknologi mereka. Seharusnya, mereka sudah mengkolonisasi galaksi, atau setidaknya mengirim sinyal yang bisa kita tangkap. Tapi yang kita dapatkan hanyalah... kesunyian. Inilah yang disebut Paradoks Fermi.

Teori 1: The Great Filter (Saringan Besar)
Teori ini menyarankan bahwa ada sebuah "tembok" atau rintangan evolusi yang sangat sulit dilewati oleh kehidupan. Mungkin kehidupan itu mudah muncul, tapi kehidupan cerdas itu sangat langka. Atau mungkin, setiap peradaban cerdas cenderung menghancurkan dirinya sendiri sebelum mereka bisa menjelajah antarbintang.

Teori 2: The Dark Forest (Hutan Gelap)
Dipopulerkan oleh novelis Liu Cixin, teori ini jauh lebih mengerikan. Bayangkan alam semesta adalah hutan gelap di malam hari. Hutan itu penuh dengan pemburu bersenjata (peradaban lain). Jika seorang pemburu menemukan pemburu lain, reaksi pertamanya adalah menembak untuk memastikan keselamatannya sendiri.

Kesimpulan: Cermin bagi Kemanusiaan
Apapun jawabannya, Paradoks Fermi memaksa kita untuk melihat diri kita sendiri. Jika kita sendirian, maka kehidupan di Bumi adalah hal paling berharga di seluruh alam semesta.`,sources:[{label:"Wikipedia - Fermi Paradox",url:"https://en.wikipedia.org/wiki/Fermi_paradox"},{label:"Wait But Why - The Fermi Paradox",url:"https://waitbutwhy.com/2014/05/fermi-paradox.html"}],timestamp:17679168e5},{title:"The Great Attractor: Monster Gravitasi",subtitle:"Kita sedang bergerak dengan kecepatan 600 km/detik menuju sesuatu yang tidak bisa kita lihat.",category:"Astronomi",date:"15 Desember 2025",readTime:"6 min read",author:"Fanra",image:"https://upload.wikimedia.org/wikipedia/commons/d/d5/Laniakea_slice_equatorial.jpg",content:`Bayangkan lo lagi naik mobil di jalan tol yang kosong. Tiba-tiba, lo sadar mobil lodan semua mobil lain di sekitar losedang ditarik ngebut ke arah jurang gelap yang tertutup kabut tebal. Lo gak bisa ngerem, dan lo gak bisa lihat apa yang ada di balik kabut itu.

Itulah yang sedang terjadi pada Bumi, Matahari, dan seluruh galaksi Bima Sakti saat ini. Kita sedang ditarik oleh sesuatu yang disebut The Great Attractor (Penarik Agung).

Masalah utamanya adalah: Kita tidak bisa melihatnya secara langsung. Kenapa? Karena Great Attractor bersembunyi tepat di balik "Zona Penghindaran". Ini adalah area di langit yang tertutup oleh debu dan gas tebal dari piringan galaksi Bima Sakti kita sendiri.

Apa Sebenarnya Itu?
Berkat teknologi sinar-X dan radio astronomi, kita akhirnya mulai mendapatkan gambaran. Great Attractor bukanlah lubang hitam raksasa tunggal. Ini adalah sebuah konsentrasi massa yang sangat besar. Kita bicara tentang ribuan galaksi yang berkumpul di satu titik. Di pusatnya terdapat Gugus Norma.

Apakah Kita Akan Menabraknya?
Tenang, jangan panik dulu. Meskipun kita bergerak ke arah sana dengan kecepatan gila, kita tidak akan pernah sampai di sana. Alasannya adalah Energi Gelap (Dark Energy). Alam semesta sedang mengembang dengan percepatan tinggi. Ekspansi alam semesta ini lebih kuat daripada tarikan gravitasi Great Attractor.`,sources:[{label:"NASA - The Great Attractor",url:"https://imagine.gsfc.nasa.gov/features/yba/CygX1_mass/gravity/attractor.html"}],timestamp:17658432e5},{title:"Voyager 1: Pesan Botol di Lautan Kosmik",subtitle:"Benda buatan manusia terjauh yang pernah ada. Sendirian di kegelapan.",category:"Sejarah Antariksa",date:"28 November 2025",readTime:"5 min read",author:"Fanra",image:"https://upload.wikimedia.org/wikipedia/commons/b/b6/Voyager_1.jpg",content:`Pada tahun 1977, NASA meluncurkan dua wahana antariksa kembar. Misi awalnya sederhana: memotret Jupiter dan Saturnus. Tapi Voyager 1 menolak untuk berhenti. Hari ini, ia adalah benda buatan manusia terjauh yang pernah ada.

Voyager 1 tidak pergi dengan tangan kosong. Ia membawa The Golden Record, sebuah piringan tembaga berlapis emas yang berisi suara dan gambar dari Bumi. Ada suara hujan, detak jantung ibu, musik Mozart, Chuck Berry, dan gamelan Jawa dari Indonesia.

Carl Sagan, yang memimpin proyek ini, menyebutnya sebagai "pesan di dalam botol yang dilemparkan ke lautan kosmik." Jika suatu hari, jutaan tahun dari sekarang, alien menemukan rongsokan Voyager, mereka akan tahu bahwa di sebuah planet biru kecil, pernah ada spesies yang mencoba menjangkau bintang-bintang.`,sources:[{label:"JPL NASA - Voyager Mission",url:"https://voyager.jpl.nasa.gov/"}],timestamp:1764288e6}],tb=[{id:"initial_track_1",spotifyId:"08A9yuCnJwBmItI1U9BZ7a",title:"Cincin",artist:"Hindia",addedAt:Date.now()}],nb=t=>t.toLowerCase().trim().replace(/[^a-z0-9]/g,""),TP=async(t,e,n)=>{try{const r=Mn(lt(De,Lr),Sr("name","==",t),Sr("school","==",e)),s=await Dn(r);if(s.empty){const i=t==="ira123"&&e==="ira",o={name:t,school:e,deviceId:n,isAdmin:i,credits:Xl,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),apiKeys:[]},a=await Ps(lt(De,Lr),o);return{user:{name:t,school:e,deviceId:n,isAdmin:i},credits:Xl,id:a.id}}else{const i=s.docs[0],o=i.data();return await bo(Ft(De,Lr,i.id),{lastLogin:new Date().toISOString(),deviceId:n}),{user:{name:o.name,school:o.school,deviceId:o.deviceId,isAdmin:o.isAdmin||!1},credits:o.credits??Xl,id:i.id}}}catch{const s=t==="ira123"&&e==="ira",i=`offline_${n}`,o=localStorage.getItem(If),a=o?parseInt(o,10):Xl;return o||localStorage.setItem(If,a.toString()),{user:{name:t,school:e,deviceId:n,isAdmin:s},credits:a,id:i}}},bP=async(t,e)=>{if(t.startsWith("offline_")){localStorage.setItem(If,e.toString());return}try{await bo(Ft(De,Lr,t),{credits:e})}catch{}},SP=async t=>{if(t.startsWith("offline_"))return[];try{const e=await WT(Ft(De,Lr,t));return e.exists()?e.data().apiKeys||[]:[]}catch{return[]}},My=async(t,e)=>{if(!t.startsWith("offline_"))try{await bo(Ft(De,Lr,t),{apiKeys:e});for(const n of e)if(n.isShared){const r=Mn(lt(De,Ka),Sr("key","==",n.key));(await Dn(r)).empty&&await Ps(lt(De,Ka),{key:n.key,provider:t,addedAt:Date.now(),isActive:!0})}}catch{}},IP=async(t,e,n)=>{if(!t.startsWith("offline_"))try{const r=n.filter(o=>o.key!==e);await bo(Ft(De,Lr,t),{apiKeys:r});const s=Mn(lt(De,Ka),Sr("key","==",e),Sr("provider","==",t));(await Dn(s)).forEach(async o=>{await ed(Ft(De,Ka,o.id))})}catch{}},rb=async()=>{try{const t=Mn(lt(De,Ka),Sr("isActive","==",!0),ci("addedAt","desc"),go(10));return(await Dn(t)).docs.map(n=>n.data().key).sort(()=>.5-Math.random()).slice(0,5)}catch{return[]}},Dy=async(t,e)=>{if(!t.startsWith("offline_"))try{await Ps(lt(De,Lr,t,YT),e)}catch{}},CP=async t=>{if(t.startsWith("offline_"))return[];try{const e=Mn(lt(De,Lr,t,YT),ci("timestamp","asc"),go(50));return(await Dn(e)).docs.map(r=>r.data())}catch{return[]}},kP=async(t,e)=>{try{const n=nb(t);if(!n)return;const r=Mn(lt(De,cc),Sr("question_normalized","==",n));(await Dn(r)).empty&&await Ps(lt(De,cc),{question:t,question_normalized:n,answer:e,timestamp:Date.now()})}catch{}},sb=async t=>{try{const e=nb(t);if(!e)return null;const n=Mn(lt(De,cc),Sr("question_normalized","==",e)),r=await Dn(n);return r.empty?null:r.docs[0].data().answer}catch{return null}},AP=async()=>{try{return(await td(lt(De,cc))).data().count}catch{return 0}},NP=async()=>{try{const t=lt(De,fl);if((await td(t)).data().count===0){const e=Rm(De);ZT.forEach(n=>e.set(Ft(t),{...n})),await e.commit()}}catch{}},RP=async()=>{try{await NP();const t=Mn(lt(De,fl),ci("timestamp","desc")),e=await Dn(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return ZT.map((e,n)=>({id:`local-${n}`,...e}))}},PP=async t=>{try{await Ps(lt(De,fl),t)}catch(e){throw e}},MP=async(t,e)=>{try{await bo(Ft(De,fl,t),e)}catch(n){throw n}},DP=async t=>{try{await ed(Ft(De,fl,t))}catch(e){throw e}},LP=async()=>{try{const t=lt(De,pl);if((await td(t)).data().count===0){const e=Rm(De);eb.forEach(n=>e.set(Ft(t),{...n})),await e.commit()}}catch{}},VP=async()=>{try{await LP();const t=Mn(lt(De,pl),ci("timestamp","desc")),e=await Dn(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return eb.map((e,n)=>({id:`local-${n}`,...e}))}},FP=async t=>{try{await Ps(lt(De,pl),t)}catch(e){throw e}},jP=async(t,e)=>{try{await bo(Ft(De,pl,t),e)}catch(n){throw n}},UP=async t=>{try{await ed(Ft(De,pl,t))}catch(e){throw e}},BP=async()=>{try{const t=lt(De,nd);if((await td(t)).data().count===0){const e=Rm(De);tb.forEach(n=>e.set(Ft(t),{...n})),await e.commit()}}catch{}},OP=async()=>{try{await BP();const t=Mn(lt(De,nd),ci("addedAt","desc")),e=await Dn(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return tb}},zP=async t=>{try{await Ps(lt(De,nd),t)}catch(e){throw e}},GP=async t=>{try{await ed(Ft(De,nd,t))}catch(e){throw e}};let Ji={};const Ly=()=>{Ji={},console.log("Cache cleared.")},Vy=t=>Ji[t]||null,HP=async t=>{if(Ji[t])return Ji[t];try{const e=await WT(Ft(De,QT,t));if(e.exists()){const n=e.data().text;return Ji[t]=n,n}return null}catch{return null}},$P=async(t,e)=>{Ji[t]=e;try{await KT(Ft(De,QT,t),{text:e,updatedAt:Date.now()},{merge:!0})}catch(n){throw n}},qP=async t=>{try{await Ps(lt(De,Pm),{...t,timestamp:Date.now(),isRead:!1})}catch(e){throw console.error("Failed to send message",e),e}},WP=async()=>{try{const t=Mn(lt(De,Pm),Sr("type","==","public"),go(100));return(await Dn(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch(t){return console.error("Failed to fetch public messages",t),[]}},KP=async()=>{try{const t=Mn(lt(De,Pm),Sr("type","==","private"),go(100));return(await Dn(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch(t){return console.error("Failed to fetch private messages",t),[]}},JP=()=>new Date().toISOString().split("T")[0],YP=async()=>{let t="ID";try{const e=new AbortController,n=setTimeout(()=>e.abort(),2e3),r=await fetch("https://ipapi.co/country/",{signal:e.signal});if(clearTimeout(n),r.ok){const s=await r.text();s&&s.length===2&&(t=s.toUpperCase())}}catch{t=Math.random()>.3?"ID":Math.random()>.5?"US":"SG"}try{const e=JP(),n=Ft(De,XT,e);await KT(n,{date:e,visitors:Py(1),[`geo.${t}`]:Py(1),timestamp:Date.now()},{merge:!0})}catch(e){console.warn("Analytics log failed",e)}},QP=async()=>{try{const t=Mn(lt(De,XT),ci("date","desc"),go(7)),e=await Dn(t),n=[];let r=0,s=0;const i={};e.forEach(h=>{const m=h.data();n.unshift({date:m.date,visitors:m.visitors||0,errors:m.errors||0}),r+=m.visitors||0,s+=m.errors||0,m.geo&&Object.keys(m.geo).forEach(g=>{i[g]=(i[g]||0)+m.geo[g]})});const o=Mn(lt(De,EP),ci("timestamp","desc"),go(10)),l=(await Dn(o)).docs.map(h=>({id:h.id,...h.data()})),c=Object.entries(i).map(([h,m])=>({country:h,count:m})).sort((h,m)=>m.count-h.count);return{dailyStats:n,totalVisitors:r,totalErrors:s,logs:l,geoStats:c}}catch(t){return console.error("Failed to fetch dashboard stats",t),null}},XP=[{label:"Biru",hex:"#3b82f6"},{label:"Merah",hex:"#ef4444"},{label:"Hijau",hex:"#22c55e"},{label:"Ungu",hex:"#a855f7"},{label:"Emas",hex:"#eab308"},{label:"Hitam",hex:"#0f172a"},{label:"Slate",hex:"#64748b"}],ZP=[{label:"",value:"to right",title:"Ke Kanan"},{label:"",value:"to bottom",title:"Ke Bawah"},{label:"",value:"135deg",title:"Diagonal Bawah"},{label:"",value:"to left",title:"Ke Kiri"},{label:"",value:"to top",title:"Ke Atas"},{label:"",value:"45deg",title:"Diagonal Atas"}],Ve=({id:t,defaultText:e,isAdmin:n,className:r="",tag:s="p",multiline:i=!1})=>{const[o,a]=G.useState(()=>Vy(t)||e),[l,c]=G.useState(!1),[h,m]=G.useState("solid"),[g,y]=G.useState("#3b82f6"),[E,x]=G.useState("#3b82f6"),[T,v]=G.useState("#a855f7"),[_,b]=G.useState("to right"),M=G.useRef(null);G.useEffect(()=>{let P=!0;return(async()=>{try{const R=await HP(t);P&&R&&R!==o&&a(R)}catch{}})(),()=>{P=!1}},[t]),G.useEffect(()=>{l&&M.current&&(M.current.style.height="auto",M.current.style.height=M.current.scrollHeight+"px")},[l,o]);const V=async()=>{c(!1);try{await $P(t,o)}catch{alert("Gagal menyimpan perubahan teks.")}},B=()=>{c(!1);const P=Vy(t);P&&a(P)},k=()=>{const P=M.current;if(!P)return;const j=P.selectionStart,R=P.selectionEnd;if(j===R)return;const D=o.substring(j,R),S=o.substring(0,j),K=o.substring(R);let he="";h==="solid"?he=`<span style="color: ${g}">${D}</span>`:he=`<span style="background: ${`linear-gradient(${_}, ${E}, ${T})`}; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 800; -webkit-box-decoration-break: clone; box-decoration-break: clone;">${D}</span>`,a(S+he+K)},N=()=>{const P=M.current;if(!P)return;const j=P.selectionStart,R=P.selectionEnd;if(j===R)return;const D=o.substring(j,R),S=o.substring(0,j),K=o.substring(R),he=D.replace(/<\/?[^>]+(>|$)/g,"");a(S+he+K)},A=()=>{const P=E;x(T),v(P)};return l?u.jsx("div",{className:`relative z-[100] ${r}`,children:u.jsxs("div",{className:"bg-white border border-slate-200 shadow-2xl rounded-2xl overflow-hidden min-w-[300px] md:min-w-[500px] flex flex-col animate-fade-in-up",children:[u.jsxs("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-100 flex justify-between items-center",children:[u.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:["Editing: ",u.jsx("span",{className:"text-slate-800",children:t.split("_").pop()})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:B,className:"px-3 py-1.5 text-xs font-bold text-slate-500 hover:text-slate-800 rounded-lg transition-colors",children:"Batal"}),u.jsxs("button",{onClick:V,className:"px-4 py-1.5 text-xs font-bold bg-slate-900 text-white hover:bg-slate-800 rounded-lg flex items-center gap-1.5 shadow-md active:scale-95 transition-all",children:[u.jsx(si,{className:"w-3 h-3"})," Simpan"]})]})]}),u.jsxs("div",{className:"p-4 bg-white relative",children:[u.jsx("textarea",{ref:M,value:o,onChange:P=>a(P.target.value),className:"w-full bg-transparent border-none outline-none text-sm font-mono text-slate-600 resize-none min-h-[100px] leading-relaxed placeholder:text-slate-300",placeholder:"Tulis teks atau HTML disini...",spellCheck:!1}),u.jsx("div",{className:"absolute top-2 right-2 opacity-10 pointer-events-none",children:u.jsx("span",{className:"text-[10px] font-mono",children:"HTML MODE"})})]}),u.jsx("div",{className:"bg-slate-50/50 border-t border-slate-100 p-4",children:u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-lg w-fit",children:[u.jsx("button",{onClick:()=>m("solid"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all ${h==="solid"?"bg-white text-slate-900 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:"Solid Color"}),u.jsxs("button",{onClick:()=>m("gradient"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all flex items-center gap-1 ${h==="gradient"?"bg-white text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[u.jsx(jp,{className:"w-3 h-3"})," Gradient"]})]}),u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[h==="solid"?u.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[u.jsx("div",{className:"p-1.5 bg-white border border-slate-200 rounded-lg shadow-sm shrink-0",children:u.jsx(B_,{className:"w-4 h-4 text-slate-400"})}),u.jsxs("div",{className:"flex gap-2",children:[XP.map(P=>u.jsx("button",{onClick:()=>y(P.hex),className:`w-6 h-6 rounded-full border-2 transition-transform hover:scale-110 shrink-0 ${g===P.hex?"border-slate-400 scale-110":"border-white shadow-sm"}`,style:{backgroundColor:P.hex},title:P.label},P.hex)),u.jsx("div",{className:"w-px h-6 bg-slate-300 mx-1"}),u.jsx("input",{type:"color",value:g,onChange:P=>y(P.target.value),className:"w-6 h-6 rounded-full cursor-pointer border border-slate-200 bg-white p-0 overflow-hidden shrink-0",title:"Custom Color"})]})]}):u.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Start"}),u.jsx("input",{type:"color",value:E,onChange:P=>x(P.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),u.jsx("button",{onClick:A,className:"text-slate-400 hover:text-slate-600 transition-colors p-1",title:"Tukar Warna",children:u.jsx(Dc,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"End"}),u.jsx("input",{type:"color",value:T,onChange:P=>v(P.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),u.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white shadow-md ml-auto",style:{background:`linear-gradient(${_}, ${E}, ${T})`},title:"Preview Gradient"})]}),u.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 no-scrollbar",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase shrink-0 mr-1",children:"Arah:"}),ZP.map(P=>u.jsx("button",{onClick:()=>b(P.value),className:`w-7 h-7 flex items-center justify-center rounded-md border text-sm transition-all shrink-0 ${_===P.value?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,title:P.title,children:P.label},P.value))]})]}),u.jsxs("div",{className:"flex items-center gap-2 w-full justify-end mt-2 pt-2 border-t border-slate-100",children:[u.jsxs("button",{onClick:N,className:"text-[10px] font-bold bg-white border border-slate-200 hover:border-red-300 hover:text-red-500 text-slate-500 px-3 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex items-center gap-1.5",title:"Hapus format",children:[u.jsx(GI,{className:"w-3.5 h-3.5"}),"Hapus Format"]}),u.jsxs("button",{onClick:k,className:"text-[10px] font-bold bg-blue-50 border border-blue-200 hover:bg-blue-100 text-blue-700 px-4 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex-1 justify-center flex",children:["Terapkan ",h==="solid"?"Warna":"Gradasi"]})]})]}),u.jsxs("p",{className:"text-[9px] text-slate-400 italic text-center",children:["*Blok teks di atas, atur ",h,", lalu klik Terapkan."]})]})})]})}):u.jsxs(s,{className:`relative group ${r} ${n?"cursor-pointer hover:opacity-80 transition-opacity decoration-blue-500/30":""}`,onClick:P=>{n&&(P.stopPropagation(),c(!0))},title:n?"Klik untuk mengedit warna & teks":void 0,children:[u.jsx("span",{dangerouslySetInnerHTML:{__html:o}}),n&&u.jsx("span",{className:"inline-flex ml-2 opacity-0 group-hover:opacity-100 transition-all duration-300 align-middle bg-slate-100 p-1 rounded-md border border-slate-200 shadow-sm absolute -top-4 -right-4 md:static",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-500",children:[u.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),u.jsx("path",{d:"m15 5 4 4"})]})})]})},e4=({activeTab:t,setActiveTab:e,isMenuOpen:n,setIsMenuOpen:r,isAdmin:s})=>{const i=[{id:rt.Home,label:"Home"},{id:rt.Projects,label:"Projects"},{id:rt.Blog,label:"Blog"},{id:rt.Gallery,label:"Gallery"},{id:rt.Music,label:"Music"},{id:rt.Messages,label:"Pesan"}],[o,a]=G.useState({left:0,width:0,opacity:0}),[l,c]=G.useState(!1),h=G.useRef({});G.useEffect(()=>{const g=h.current[t];g&&a({left:g.offsetLeft,width:g.offsetWidth,opacity:1})},[t]);const m=g=>{g&&e(g),c(!0),setTimeout(()=>{r(!1),c(!1)},700)};return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:`
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          
          /* Animasi Tirai Turun (Buka) */
          @keyframes curtainDown {
             from { transform: translateY(-100%); border-radius: 0 0 100px 100px; }
             to { transform: translateY(0); border-radius: 0; }
          }

          /* Animasi Tirai Naik (Tutup) */
          @keyframes curtainUp {
             from { transform: translateY(0); border-radius: 0; }
             to { transform: translateY(-100%); border-radius: 0 0 100px 100px; }
          }

          .animate-blob {
            animation: blob 10s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          
          .animate-curtain-down {
             animation: curtainDown 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
          }
          
          .animate-curtain-up {
             animation: curtainUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
          }
        `}),u.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-100 transition-all",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center",children:[u.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group mr-8",onClick:()=>e(rt.Home),children:[u.jsx(io,{className:"w-8 h-8 group-hover:rotate-12 transition-transform duration-300",variant:"dark"}),u.jsx("div",{className:"flex flex-col justify-center",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ve,{id:"navbar_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:s,tag:"span",className:"text-sm font-black tracking-tighter uppercase text-slate-900 leading-none"}),s&&u.jsx("span",{className:"bg-slate-900 text-white text-[9px] font-bold px-1.5 py-0.5 rounded leading-none shadow-sm",children:"ADMIN"})]})})]}),u.jsxs("div",{className:"hidden md:flex items-center relative ml-auto bg-slate-50/50 rounded-full p-1 border border-slate-200/60",children:[u.jsx("div",{className:"absolute top-1 bottom-1 bg-slate-900 rounded-full transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1)] shadow-md z-0",style:{left:o.left,width:o.width,opacity:o.opacity}}),i.map(g=>u.jsx("button",{ref:y=>{h.current[g.id]=y},onClick:()=>e(g.id),className:`relative z-10 px-6 py-2 rounded-full text-xs font-bold uppercase tracking-wide transition-colors duration-300 ${t===g.id?"text-white":"text-slate-500 hover:text-slate-900"}`,children:g.label},g.id))]}),u.jsx("button",{className:"md:hidden p-2 text-slate-600 ml-auto",onClick:()=>r(!n),children:u.jsx(F_,{className:"w-6 h-6"})})]})}),(n||l)&&u.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden flex flex-col items-center justify-center p-6 overflow-hidden bg-white ${l?"animate-curtain-up":"animate-curtain-down"}`,children:[u.jsxs("div",{className:"absolute inset-0 z-0 w-full h-full pointer-events-none",children:[u.jsx("div",{className:"absolute top-0 -left-10 w-96 h-96 bg-slate-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob"}),u.jsx("div",{className:"absolute top-1/4 -right-20 w-80 h-80 bg-gray-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"}),u.jsx("div",{className:"absolute -bottom-20 left-1/3 w-96 h-96 bg-zinc-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-4000"}),u.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-[10px]"})]}),u.jsxs("div",{className:`relative z-10 w-full flex flex-col items-center transition-all duration-500 ${l?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:[u.jsx("button",{className:"absolute -top-32 right-0 p-3 rounded-full bg-white text-slate-400 hover:text-slate-900 transition-colors shadow-sm border border-slate-100",onClick:()=>m(),children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M18 6 6 18"}),u.jsx("path",{d:"m6 6 12 12"})]})}),u.jsx("div",{className:"absolute -top-32 left-0 flex items-center gap-3",children:u.jsx(io,{className:"w-12 h-12",variant:"dark"})}),u.jsx("div",{className:"flex flex-col gap-6 w-full max-w-xs mt-10",children:i.map((g,y)=>u.jsx("button",{onClick:()=>m(g.id),className:`
                           text-3xl font-black uppercase tracking-tight text-center py-2 relative group
                           transition-all duration-300
                           ${t===g.id?"text-slate-900 scale-110":"text-slate-300 hover:text-slate-500 hover:scale-105"}
                        `,style:{animationDelay:`${y*50}ms`},children:g.label},g.id))}),u.jsxs("div",{className:"absolute -bottom-40 flex flex-col items-center gap-2",children:[u.jsx("div",{className:"w-1 h-8 bg-slate-200 rounded-full"}),u.jsx("div",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-[0.3em]",children:"Fanra Studio"})]})]})]})]})},Dt=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null;let ih=null;const ib=t=>{if(ih)return ih;const e=t.sampleRate*2,n=t.createBuffer(1,e,t.sampleRate),r=n.getChannelData(0);for(let s=0;s<e;s++)r[s]=Math.random()*2-1;return ih=n,n},t4=()=>{if(!Dt)return;Dt.state==="suspended"&&Dt.resume();const t=ib(Dt),e=Dt.createBufferSource();e.buffer=t;const n=Dt.createBiquadFilter();n.type="lowpass",n.Q.value=1;const r=Dt.createGain();e.connect(n),n.connect(r),r.connect(Dt.destination);const s=Dt.currentTime;n.frequency.setValueAtTime(100,s),n.frequency.exponentialRampToValueAtTime(4e3,s+.15),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.3,s+.05),r.gain.exponentialRampToValueAtTime(.001,s+.3),e.start(s),e.stop(s+.3)},n4=()=>{if(!Dt)return;Dt.state==="suspended"&&Dt.resume();const t=ib(Dt),e=Dt.createBufferSource();e.buffer=t;const n=Dt.createBiquadFilter();n.type="lowpass",n.Q.value=.5;const r=Dt.createGain();e.connect(n),n.connect(r),r.connect(Dt.destination);const s=Dt.currentTime;n.frequency.setValueAtTime(200,s),n.frequency.exponentialRampToValueAtTime(1200,s+.8),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.4,s+.2),r.gain.exponentialRampToValueAtTime(.001,s+1.2),e.start(s),e.stop(s+1.2)};class r4{constructor(e,n,r){this.x=e,this.y=n;const s=Math.random()*Math.PI*2,i=Math.random()*10+2;this.vx=Math.cos(s)*i,this.vy=Math.sin(s)*i,this.size=3,this.friction=.92,this.opacity=1,this.ease=.2-r*.015,this.ease<.05&&(this.ease=.05)}update(e,n){this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction,this.x+=(e-this.x)*this.ease,this.y+=(n-this.y)*this.ease;const r=e-this.x,s=n-this.y;return Math.sqrt(r*r+s*s)<10&&(this.opacity-=.05),this.opacity>0}draw(e){e.save(),e.globalAlpha=this.opacity,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fillStyle="#2563eb",e.fill(),e.restore()}}const s4=({onComplete:t,onTriggerAdmin:e})=>{const[n,r]=G.useState(0),[s,i]=G.useState(!1),[o,a]=G.useState(!1),[l,c]=G.useState(!1),h=G.useRef(null),m=G.useRef(null),g=G.useRef([]),y=G.useRef({x:window.innerWidth/2,y:window.innerHeight/2});G.useEffect(()=>(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",window.scrollTo(0,0),()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[]),G.useEffect(()=>{const _=m.current;if(!_)return;const b=_.getContext("2d");if(!b)return;const M=()=>{_.width=window.innerWidth,_.height=window.innerHeight};window.addEventListener("resize",M),M();const V=N=>{y.current={x:N.clientX,y:N.clientY}};window.addEventListener("mousemove",V);let B;const k=()=>{b.clearRect(0,0,_.width,_.height),g.current.length>0?(g.current=g.current.filter(N=>N.update(y.current.x,y.current.y)?(N.draw(b),!0):!1),g.current.length===0&&o&&a(!1)):o&&a(!1),B=requestAnimationFrame(k)};return k(),()=>{window.removeEventListener("resize",M),window.removeEventListener("mousemove",V),cancelAnimationFrame(B)}},[o]);const E=_=>{if(o||!h.current)return;const b=h.current.getBoundingClientRect(),M=b.left+b.width/2,V=b.top+b.height/2;a(!0);let B=0;const k=10;g.current=[];const N=setInterval(()=>{if(B>=k){clearInterval(N);return}g.current.push(new r4(M,V,B)),B++},50)},x=()=>{s||(t4(),i(!0),r(1),setTimeout(()=>i(!1),1e3))},T=()=>{s||(n4(),i(!0),r(2),setTimeout(()=>{window.scrollTo(0,0),t()},1e3))},v=()=>{l||(c(!0),setTimeout(()=>{e&&e(),setTimeout(()=>c(!1),2e3)},500))};return u.jsxs("div",{className:`fixed inset-0 z-[999] bg-white transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1) overflow-hidden h-[100dvh] w-screen ${n===2?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none"}`,onTouchMove:_=>_.preventDefault(),children:[u.jsx("canvas",{ref:m,className:"absolute inset-0 pointer-events-none z-50"}),u.jsxs("div",{className:"flex flex-col w-full h-[200vh] transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1)",style:{transform:n>=1?"translateY(-50%)":"translateY(0)"},children:[u.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center relative bg-white px-6",style:{backgroundImage:"radial-gradient(#e2e8f0 1px, transparent 1px)",backgroundSize:"32px 32px"},children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-[0.03] pointer-events-none overflow-hidden",children:u.jsx(io,{className:"w-[150%] h-[150%] -translate-x-1/4 -translate-y-1/4",variant:"dark"})}),u.jsxs("div",{className:"relative z-10 text-center animate-fade-in-up flex flex-col items-center",children:[u.jsx("div",{className:"mb-8 flex justify-center transform hover:scale-105 transition-transform duration-500",children:u.jsx(io,{className:"w-32 h-32 md:w-40 md:h-40 shadow-2xl shadow-slate-200/50 rounded-[2rem] bg-white",variant:"dark"})}),u.jsxs("h1",{className:"text-4xl md:text-7xl font-black text-slate-900 mb-4 tracking-tighter leading-tight",children:["IRFAN RIZKI ADITRI",u.jsx("span",{ref:h,onDoubleClick:E,className:`text-blue-600 inline-block cursor-pointer transition-opacity duration-100 select-none ${o?"opacity-0":"opacity-100"} hover:opacity-80`,title:"Double click me!",children:"."})]}),u.jsx("p",{className:"text-slate-400 text-lg md:text-2xl font-medium tracking-widest uppercase",children:"Portfolio & Playground"}),u.jsxs("button",{onClick:x,className:"group flex flex-col items-center gap-3 transition-all outline-none cursor-pointer mt-20 hover:-translate-y-1 duration-300",children:[u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-900 transition-colors",children:"Next"}),u.jsx("div",{className:"w-12 h-12 rounded-full border border-slate-200 bg-white hover:bg-slate-50 flex items-center justify-center shadow-lg transition-all duration-300 group-hover:border-slate-300 group-hover:shadow-xl",children:u.jsx(Fa,{className:"w-5 h-5 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})})]})]})]}),u.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center bg-slate-50 px-6 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),u.jsx("div",{className:`absolute bottom-8 right-8 z-50 transition-all duration-700 ease-out cursor-default select-none ${l?"scale-[10] opacity-0 rotate-180 text-blue-600":"scale-100 opacity-5 hover:opacity-30 text-slate-900"}`,onDoubleClick:v,title:".",children:u.jsx(ja,{className:"w-6 h-6"})}),u.jsxs("div",{className:"relative z-10 max-w-4xl w-full grid md:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{className:"text-center md:text-left space-y-6 flex flex-col items-center md:items-start",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-[10px] font-bold uppercase tracking-wider",children:[u.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),"Student & Developer"]}),u.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-slate-900 tracking-tight leading-none",children:["Welcome to ",u.jsx("br",{}),u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-slate-500",children:"My Perspective."})]}),u.jsx("p",{className:"text-slate-500 text-lg leading-relaxed max-w-md",children:"Jelajahi eksperimen kode, cerita tentang alam semesta, dan tools AI buatan mahasiswa gabut."}),u.jsxs("button",{onClick:T,className:"inline-flex items-center gap-3 bg-slate-900 text-white px-8 py-4 rounded-xl font-bold shadow-xl shadow-slate-900/20 hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 group",children:["Explore",u.jsx(ao,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),u.jsxs("div",{className:"relative hidden md:block",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-500 to-purple-500 rounded-[2.5rem] rotate-3 opacity-20 blur-2xl transform translate-y-4"}),u.jsxs("div",{className:"relative bg-white p-8 rounded-[2.5rem] shadow-2xl border border-slate-100 rotate-[-2deg] hover:rotate-0 transition-transform duration-500",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-slate-100 pb-6",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-900 text-white rounded-xl flex items-center justify-center font-black text-xl border border-slate-700",children:"F"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-slate-900",children:"Fanra AI"}),u.jsx("p",{className:"text-xs text-slate-500",children:"Intelligent Assistant"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-slate-50 p-4 rounded-xl rounded-tl-none border border-slate-100 text-sm text-slate-600",children:"Halo! Ada yang bisa gue bantu hari ini? Mau edit foto atau ngobrol soal fisika?"}),u.jsx("div",{className:"bg-blue-600 p-4 rounded-xl rounded-tr-none text-sm text-white ml-auto max-w-[80%]",children:"Gue mau coba fitur AI Studio lo dong, Fanra!"})]})]})]})]})]})]})]})};class i4{constructor(e,n,r){this.x=e,this.y=n,this.baseX=e,this.baseY=n,this.size=1.5,this.density=Math.random()*20+5,this.color=r}draw(e,n){const r=this.y/n;let s=1-Math.pow(r,.8);s=Math.max(0,s),e.fillStyle=`rgba(203, 213, 225, ${s})`,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.closePath(),e.fill()}update(e,n){const r=e.x-this.x,s=e.y-this.y,i=Math.sqrt(r*r+s*s),o=r/i,a=s/i,l=e.radius,c=(l-i)/l,h=o*c*this.density,m=a*c*this.density;if(i<e.radius)n==="repel"?(this.x-=h,this.y-=m):(this.x+=h,this.y+=m);else{if(this.x!==this.baseX){const g=this.x-this.baseX;this.x-=g/15}if(this.y!==this.baseY){const g=this.y-this.baseY;this.y-=g/15}}}}const Fy=({onNavigate:t,onTriggerAdmin:e,isAdmin:n=!1})=>{const[r]=G.useState(()=>Math.random()>.5?"repel":"attract"),s=G.useRef(null),i=G.useRef([]),o=G.useRef({x:-1e3,y:-1e3,radius:120});return G.useEffect(()=>{const a=s.current;if(!a)return;const l=a.getContext("2d");if(!l)return;const c=()=>{a.width=window.innerWidth,a.height=window.innerHeight,h()},h=()=>{i.current=[];const x=30,T=Math.ceil(a.height/x),v=Math.ceil(a.width/x);for(let _=0;_<T;_++)for(let b=0;b<v;b++){const M=b*x+x/2,V=_*x+x/2;i.current.push(new i4(M,V,"#cbd5e1"))}};c(),window.addEventListener("resize",c);const m=x=>{const T=a.getBoundingClientRect();o.current.x=x.clientX-T.left,o.current.y=x.clientY-T.top},g=()=>{o.current.x=-1e3,o.current.y=-1e3};window.addEventListener("mousemove",m),window.addEventListener("mouseout",g);let y;const E=()=>{l.clearRect(0,0,a.width,a.height),i.current.forEach(x=>{x.draw(l,a.height),x.update(o.current,r)}),y=requestAnimationFrame(E)};return E(),()=>{window.removeEventListener("resize",c),window.removeEventListener("mousemove",m),window.removeEventListener("mouseout",g),cancelAnimationFrame(y)}},[r]),u.jsxs("div",{className:"relative min-h-[90vh] flex flex-col overflow-hidden bg-gradient-to-b from-slate-50 via-white to-white",children:[u.jsx("canvas",{ref:s,className:"fixed inset-0 z-0 pointer-events-auto opacity-60"}),u.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 md:px-12 py-12 flex-grow w-full",children:[u.jsxs("div",{className:"mb-24 mt-8",children:[u.jsx("h1",{className:"text-6xl md:text-8xl font-black text-slate-900 mb-8 leading-tight tracking-tighter max-w-5xl flex items-center flex-wrap gap-2",children:u.jsx(Ve,{id:"home_hero_title",defaultText:"Fanra is here.",isAdmin:n,tag:"span",className:"inline-block"})}),u.jsx("div",{className:"max-w-5xl mt-16 relative",children:u.jsxs("div",{className:"grid md:grid-cols-5 gap-12 items-start",children:[u.jsxs("div",{className:"md:col-span-3 space-y-4",children:[u.jsx(Ve,{id:"home_about_title",defaultText:"Mahasiswa Fisika. yang hobinya suka Ngoding.",isAdmin:n,tag:"h2",className:"text-2xl font-bold text-slate-900 leading-tight"}),u.jsx(Ve,{id:"home_about_desc",defaultText:`Halo, gue Irfan Rizki Aditri, tapi biasa dipanggil Fanra.
Gue mahasiswa Fisika yang lagi tertarik belajar teknologi. Gue bukan expert atau anak IT, masih dalam proses belajar dan ngoprek.
Website ini gue bikin buat iseng-iseng di sela tugas kuliah dan juga jadi tempat gue eksplor AI, ngoding, dan ide-ide random yang kepikiran.
</br>
</br>
Soal hobi, sebenernya gue banyak. Tapi karena gue agak males dan fisik gue juga nggak terlalu kuat, gue lebih milih hobi yang bisa dilakuin sambil tiduran. Intinya, yang nggak bikin capek secara fisik..`,isAdmin:n,tag:"p",multiline:!0,className:"text-slate-600 text-lg leading-relaxed font-medium"})]}),u.jsxs("div",{className:"md:col-span-2 flex flex-col gap-4 pt-2",children:[u.jsxs("div",{className:"flex items-center gap-4 group",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform",children:u.jsx(Vp,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx(Ve,{id:"home_badge1_title",defaultText:"Physics Major",isAdmin:n,className:"text-xs font-bold text-slate-900 uppercase tracking-wider block"}),u.jsx(Ve,{id:"home_badge1_desc",defaultText:"Institut Teknologi Sumatera '25",isAdmin:n,className:"text-sm text-slate-500 block"})]})]}),u.jsxs("div",{className:"flex items-center gap-4 group",children:[u.jsx("div",{className:"w-10 h-10 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform",children:u.jsx(jp,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx(Ve,{id:"home_badge2_title",defaultText:"Interest",isAdmin:n,className:"text-xs font-bold text-slate-900 uppercase tracking-wider block"}),u.jsx(Ve,{id:"home_badge2_desc",defaultText:"Learning AI & Web Dev",isAdmin:n,className:"text-sm text-slate-500 block"})]})]}),u.jsxs("div",{className:"flex items-center gap-4 group",children:[u.jsx("div",{className:"w-10 h-10 bg-slate-100 text-slate-600 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform",children:u.jsx(lr,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx(Ve,{id:"home_badge3_title",defaultText:"Based In",isAdmin:n,className:"text-xs font-bold text-slate-900 uppercase tracking-wider block"}),u.jsx(Ve,{id:"home_badge3_desc",defaultText:"Sumatera, Indonesia",isAdmin:n,className:"text-sm text-slate-500 block"})]})]})]})]})})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-24",children:[u.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer",onClick:()=>t(rt.Projects),children:[u.jsx("div",{className:"w-14 h-14 bg-slate-900 rounded-2xl flex items-center justify-center text-white mb-8 group-hover:scale-110 transition-transform",children:u.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),u.jsx(Ve,{id:"home_card_projects_title",defaultText:"Projects",isAdmin:n,tag:"h3",className:"text-3xl font-bold text-slate-900 mb-3"}),u.jsx(Ve,{id:"home_card_projects_desc",defaultText:"Lihat eksperimen koding gue, termasuk Fanra AI Studio.",isAdmin:n,tag:"p",className:"text-slate-500 mb-6 text-base md:text-lg"}),u.jsxs("div",{className:"flex items-center text-sm font-bold text-blue-600",children:["Explore ",u.jsx(ao,{className:"w-5 h-5 ml-2"})]})]}),u.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer",onClick:()=>t(rt.Blog),children:[u.jsx("div",{className:"w-14 h-14 bg-slate-100 text-slate-900 rounded-2xl flex items-center justify-center mb-8 group-hover:scale-110 transition-transform",children:u.jsx(rf,{className:"w-7 h-7"})}),u.jsx(Ve,{id:"home_card_blog_title",defaultText:"Blog & Cerita",isAdmin:n,tag:"h3",className:"text-3xl font-bold text-slate-900 mb-3"}),u.jsx(Ve,{id:"home_card_blog_desc",defaultText:"Tulisan random tentang kuliah, teknologi, dan kehidupan.",isAdmin:n,tag:"p",className:"text-slate-500 mb-6 text-base md:text-lg"}),u.jsxs("div",{className:"flex items-center text-sm font-bold text-slate-600 group-hover:text-slate-900",children:["Read Now ",u.jsx(ao,{className:"w-5 h-5 ml-2"})]})]})]}),u.jsxs("div",{className:"relative rounded-[3rem] overflow-hidden bg-slate-900 text-white p-12 md:p-24 text-center shadow-2xl",children:[u.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[u.jsx(Ve,{id:"home_cta_title",defaultText:"Mau ngobrol atau kolaborasi?",isAdmin:n,tag:"h2",className:"text-4xl md:text-5xl font-black mb-6 tracking-tight"}),u.jsx(Ve,{id:"home_cta_desc",defaultText:"Gue selalu terbuka buat diskusi soal project baru atau sekadar sharing ide gila.",isAdmin:n,tag:"p",className:"text-slate-400 mb-10 text-lg max-w-xl mx-auto"}),u.jsx("button",{onClick:()=>t(rt.Messages),className:"bg-white text-slate-900 px-10 py-4 rounded-full font-bold hover:bg-slate-200 transition-colors active:scale-95 text-lg shadow-lg shadow-white/10",children:"Kirim Pesan"})]}),u.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"})]})]})]})},o4=({isAdmin:t,onLaunchApp:e,onOpenIG:n})=>u.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12",children:[u.jsx(Ve,{id:"projects_title",defaultText:"Selected Projects",isAdmin:t,tag:"h1",className:"text-4xl font-black text-slate-900 mb-4 tracking-tighter"}),u.jsx(Ve,{id:"projects_subtitle",defaultText:"Walaupun masih banyak yang error, tapi cobain aja dulu.",isAdmin:t,tag:"p",className:"text-slate-500 mb-8 max-w-2xl"}),u.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl p-5 mb-12 max-w-3xl flex gap-4 items-start shadow-sm",children:[u.jsx("div",{className:"p-2 bg-amber-100 rounded-xl text-amber-600 shrink-0",children:u.jsx(el,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx(Ve,{id:"projects_disclaimer_title",defaultText:"Under Development (Beta)",isAdmin:t,tag:"h4",className:"font-bold text-amber-900 text-sm uppercase tracking-wide mb-1"}),u.jsx(Ve,{id:"projects_disclaimer_text",defaultText:"Mohon diingat bahwa semua project di sini masih dalam tahap pengembangan aktif. Anda mungkin akan menemukan bug, fitur yang error, atau fungsi yang belum berjalan sempurna.",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-amber-700/80 leading-relaxed font-medium"})]})]}),u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"col-span-1 md:col-span-2 relative bg-slate-950 rounded-[2rem] p-8 md:p-12 overflow-hidden group cursor-pointer shadow-2xl transition-all hover:-translate-y-1 ring-1 ring-slate-800",onClick:e,children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-20 pointer-events-none mix-blend-overlay",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),u.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.07] pointer-events-none",style:{backgroundImage:`
                        linear-gradient(to right, #ffffff 1px, transparent 1px),
                        linear-gradient(to bottom, #ffffff 1px, transparent 1px)
                     `,backgroundSize:"40px 40px",maskImage:"radial-gradient(circle at top left, black, transparent 100%)"}}),u.jsx("div",{className:"absolute top-0 right-0 w-[300px] h-[300px] bg-blue-600 rounded-full blur-[120px] opacity-20 group-hover:opacity-30 transition-opacity duration-700 animate-pulse-fast"}),u.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"p-2 bg-white/5 backdrop-blur-md rounded-xl text-blue-400 border border-white/10",children:u.jsx(jp,{className:"w-6 h-6"})}),u.jsx(Ve,{id:"projects_p1_badge",defaultText:"Featured Project",isAdmin:t,tag:"span",className:"text-xs font-bold text-blue-400 uppercase tracking-widest border border-blue-500/30 px-3 py-1 rounded-full bg-blue-500/10"})]}),u.jsx(Ve,{id:"projects_p1_title",defaultText:"Fanra AI Studio",isAdmin:t,tag:"h3",className:"text-3xl md:text-5xl font-black text-white mb-4 tracking-tight drop-shadow-sm"}),u.jsx(Ve,{id:"projects_p1_desc",defaultText:"Asisten AI hybrid yang bisa ngobrol santai, edit foto (Hapus BG, Upscale 4K).",isAdmin:t,tag:"p",multiline:!0,className:"text-slate-400 text-lg mb-8 max-w-md leading-relaxed font-medium"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsxs("button",{className:"bg-white text-slate-950 px-8 py-3.5 rounded-xl font-bold flex items-center gap-2 hover:bg-blue-50 transition-all shadow-[0_0_20px_rgba(255,255,255,0.1)] hover:shadow-[0_0_25px_rgba(255,255,255,0.2)] active:scale-95",children:["Launch Studio ",u.jsx(ao,{className:"w-4 h-4"})]})})]})]}),u.jsxs("div",{className:"bg-white rounded-[2rem] p-8 border border-slate-200 shadow-sm flex flex-col justify-between hover:shadow-lg transition-all cursor-pointer group hover:border-pink-200 relative overflow-hidden",onClick:n,children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-pink-400/10 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2"}),u.jsxs("div",{children:[u.jsx("div",{className:"w-12 h-12 bg-pink-50 text-pink-500 rounded-2xl mb-6 flex items-center justify-center",children:u.jsx(O_,{className:"w-6 h-6"})}),u.jsx(Ve,{id:"projects_p2_title",defaultText:"IG Seamless Studio",isAdmin:t,tag:"h3",className:"text-xl font-bold text-slate-900 mb-2 group-hover:text-pink-600 transition-colors"}),u.jsx(Ve,{id:"projects_p2_desc",defaultText:"Bikin konten carousel Instagram yang nyambung (Panorama) dengan mudah. Upload, atur layout, dan auto-slice saat download.",isAdmin:t,tag:"p",multiline:!0,className:"text-slate-500 text-sm leading-relaxed mb-6"})]}),u.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[u.jsx("span",{className:"text-xs font-bold text-pink-500 uppercase tracking-wider",children:"Open App"}),u.jsx(ao,{className:"w-4 h-4 text-pink-500 transform group-hover:translate-x-1 transition-transform"})]})]})]})]}),rd=({isOpen:t,title:e,description:n,onConfirm:r,onCancel:s,confirmText:i="Yes, Leave"})=>t?u.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:u.jsx("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl transform transition-all scale-100 animate-fade-in-up border border-slate-100",children:u.jsxs("div",{className:"flex flex-col items-center text-center",children:[u.jsx("div",{className:"w-12 h-12 bg-amber-50 text-amber-500 rounded-full flex items-center justify-center mb-4 border border-amber-100",children:u.jsx(el,{className:"w-6 h-6"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:e}),u.jsx("p",{className:"text-sm text-slate-500 mb-6 leading-relaxed",children:n}),u.jsxs("div",{className:"flex w-full gap-3",children:[u.jsx("button",{onClick:s,className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 rounded-xl font-medium hover:bg-slate-50 transition-colors text-sm",children:"Cancel"}),u.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-colors shadow-lg shadow-red-500/20 text-sm",children:i})]})]})})}):null,a4=({isAdmin:t})=>{const[e,n]=G.useState([]),[r,s]=G.useState(!0),[i,o]=G.useState("list"),[a,l]=G.useState(null),[c,h]=G.useState("add"),[m,g]=G.useState({}),[y,E]=G.useState(!1),[x,T]=G.useState(""),[v,_]=G.useState(""),[b,M]=G.useState(null),[V,B]=G.useState(null),k=G.useRef(null),N=G.useRef(null),A=G.useRef(null),P=async()=>{s(!0);try{const L=await VP();n(L)}catch(L){console.error("Failed to fetch blog posts",L)}finally{s(!1)}};G.useEffect(()=>{P()},[]);const j=L=>{L&&(L.style.height="auto",L.style.height=`${L.scrollHeight}px`)};G.useEffect(()=>{i==="editor"&&(j(k.current),j(N.current),j(A.current))},[i,m.title,m.subtitle,m.content]);const R=()=>{h("add"),g({title:"",subtitle:"",category:"Category",date:new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),readTime:"5 min read",author:"Fanra",image:"",content:"",timestamp:Date.now(),sources:[]}),T(""),_(""),o("editor"),window.scrollTo(0,0)},D=(L,z)=>{L.stopPropagation(),h("edit"),g({...z,sources:z.sources||[]}),T(""),_(""),o("editor"),window.scrollTo(0,0)},S=(L,z)=>{L.stopPropagation(),M(z)},K=async()=>{if(!b)return;const L=b;B(L),M(null);try{await UP(L),n(z=>z.filter(se=>se.id!==L)),(a==null?void 0:a.id)===L&&(l(null),o("list"))}catch{alert("Gagal menghapus artikel."),P()}finally{B(null)}},he=async()=>{if(!m.title||!m.content){alert("Judul dan Konten wajib diisi.");return}E(!0);try{const L={...m,image:m.image||"https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop"};c==="add"?await FP(L):m.id&&await jP(m.id,L),await P(),o("list"),l(null)}catch(L){console.error(L),alert("Gagal menyimpan artikel.")}finally{E(!1)}},ne=()=>{if(!x.trim()||!v.trim())return;const L={label:x.trim(),url:v.trim()},z=[...m.sources||[],L];g(se=>({...se,sources:z})),T(""),_("")},ee=L=>{const z=(m.sources||[]).filter((se,ie)=>ie!==L);g(se=>({...se,sources:z}))},$=L=>{var se;const z=(se=L.target.files)==null?void 0:se[0];if(z){const ie=new FileReader;ie.onloadend=()=>{const ke=ie.result;g(ze=>({...ze,image:ke}))},ie.readAsDataURL(z)}},le=L=>{l(L),o("detail"),window.scrollTo(0,0)},q=L=>L.split(`
`).map((z,se)=>z.trim()?u.jsx("p",{className:"mb-6 text-slate-700 leading-8 text-lg",children:z},se):u.jsx("br",{},se));return i==="editor"?u.jsxs("div",{className:"min-h-screen bg-white animate-fade-in relative pb-20",children:[u.jsxs("div",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur-md border-b border-slate-100 px-6 py-4 flex items-center justify-between",children:[u.jsxs("button",{onClick:()=>o("list"),className:"flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 transition-colors px-3 py-2 rounded-lg hover:bg-slate-50",children:[u.jsx(oo,{className:"w-4 h-4"}),"Cancel"]}),u.jsx("span",{className:"text-sm font-black text-slate-300 uppercase tracking-widest hidden md:block",children:c==="add"?"New Story":"Editing Mode"}),u.jsxs("button",{onClick:he,disabled:y,className:"bg-slate-900 text-white px-6 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[y?u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):u.jsx(si,{className:"w-4 h-4"}),y?"Publishing...":"Publish"]})]}),u.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-12",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2 tracking-wider",children:"Kategori"}),u.jsx("input",{type:"text",value:m.category,onChange:L=>g(z=>({...z,category:L.target.value})),className:"w-full bg-transparent border-b border-slate-200 focus:border-slate-800 py-1 text-sm font-bold text-slate-800 outline-none transition-colors",placeholder:"Science..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2 tracking-wider",children:"Penulis"}),u.jsx("input",{type:"text",value:m.author,onChange:L=>g(z=>({...z,author:L.target.value})),className:"w-full bg-transparent border-b border-slate-200 focus:border-slate-800 py-1 text-sm font-bold text-slate-800 outline-none transition-colors"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2 tracking-wider",children:"Waktu Baca"}),u.jsx("input",{type:"text",value:m.readTime,onChange:L=>g(z=>({...z,readTime:L.target.value})),className:"w-full bg-transparent border-b border-slate-200 focus:border-slate-800 py-1 text-sm font-bold text-slate-800 outline-none transition-colors"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-2 tracking-wider",children:"Tanggal"}),u.jsx("input",{type:"text",value:m.date,onChange:L=>g(z=>({...z,date:L.target.value})),className:"w-full bg-transparent border-b border-slate-200 focus:border-slate-800 py-1 text-sm font-bold text-slate-800 outline-none transition-colors"})]})]}),u.jsx("textarea",{ref:k,rows:1,value:m.title||"",onChange:L=>g(z=>({...z,title:L.target.value})),className:"w-full text-4xl md:text-6xl font-black text-slate-900 bg-transparent border-none outline-none placeholder:text-slate-300 resize-none overflow-hidden leading-tight mb-6",placeholder:"Judul Besar..."}),u.jsx("textarea",{ref:N,rows:1,value:m.subtitle||"",onChange:L=>g(z=>({...z,subtitle:L.target.value})),className:"w-full text-xl md:text-2xl font-medium text-slate-500 bg-transparent border-none outline-none placeholder:text-slate-200 resize-none overflow-hidden leading-relaxed mb-12",placeholder:"Tulis ringkasan atau subtitle yang menarik di sini..."}),u.jsxs("div",{className:"mb-12 group relative",children:[u.jsxs("div",{className:`w-full aspect-video rounded-2xl overflow-hidden border-2 ${m.image?"border-transparent":"border-dashed border-slate-200 bg-slate-50"} flex flex-col items-center justify-center relative transition-all hover:border-blue-400`,children:[m.image?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:m.image,alt:"Cover",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsxs("div",{className:"text-white font-bold flex items-center gap-2",children:[u.jsx(Yu,{className:"w-5 h-5"})," Ganti Gambar"]})})]}):u.jsxs("div",{className:"text-center p-8",children:[u.jsx(Mc,{className:"w-8 h-8 text-slate-300 mx-auto mb-3"}),u.jsx("p",{className:"text-slate-400 font-bold text-sm",children:"Upload Cover Image"})]}),u.jsx("input",{type:"file",accept:"image/*",onChange:$,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),u.jsx("input",{type:"text",value:m.image||"",onChange:L=>g(z=>({...z,image:L.target.value})),placeholder:"...atau tempel URL gambar disini",className:"w-full mt-3 text-xs text-slate-400 bg-transparent border-b border-transparent focus:border-slate-200 outline-none py-1 transition-colors"})]}),u.jsx("textarea",{ref:A,value:m.content||"",onChange:L=>g(z=>({...z,content:L.target.value})),className:"w-full min-h-[60vh] text-lg md:text-xl leading-9 text-slate-800 bg-transparent border-none outline-none placeholder:text-slate-300 resize-none font-serif",placeholder:"Mulai menulis cerita Anda di sini..."}),u.jsxs("div",{className:"mt-16 pt-10 border-t border-slate-200",children:[u.jsxs("h4",{className:"text-sm font-bold text-slate-800 uppercase tracking-widest mb-6 flex items-center gap-2",children:[u.jsx(lr,{className:"w-4 h-4 text-slate-400"}),"Referensi & Sumber"]}),u.jsx("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200 mb-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Nama Sumber"}),u.jsx("input",{type:"text",value:x,onChange:L=>T(L.target.value),placeholder:"Contoh: Wikipedia",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"URL Link"}),u.jsx("input",{type:"text",value:v,onChange:L=>_(L.target.value),placeholder:"https://...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),u.jsx("div",{children:u.jsx("button",{onClick:ne,disabled:!x||!v,className:"w-full py-2 bg-slate-900 text-white rounded-lg text-sm font-bold hover:bg-slate-800 disabled:opacity-50 transition-all",children:"+ Tambah"})})]})}),m.sources&&m.sources.length>0&&u.jsx("div",{className:"space-y-2",children:m.sources.map((L,z)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-xl hover:border-slate-300 transition-colors group",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center shrink-0",children:u.jsx(lr,{className:"w-4 h-4"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:L.label}),u.jsx("p",{className:"text-xs text-slate-400 truncate",children:L.url})]})]}),u.jsx("button",{onClick:()=>ee(z),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:u.jsx(_s,{className:"w-4 h-4"})})]},z))}),(!m.sources||m.sources.length===0)&&u.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"Belum ada sumber yang ditambahkan."})]})]})]}):i==="detail"&&a?u.jsx("article",{className:"min-h-screen bg-white animate-fade-in pb-20",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-12",children:[u.jsxs("button",{onClick:()=>{o("list"),l(null)},className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[u.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:u.jsx(oo,{className:"w-4 h-4"})}),"Kembali"]}),u.jsxs("header",{className:"mb-12",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-bold uppercase tracking-wider",children:a.category}),u.jsx("span",{className:"text-slate-400 text-sm font-medium",children:a.readTime})]}),u.jsx("h1",{className:"text-3xl md:text-5xl font-black text-slate-900 mb-6 leading-tight tracking-tight",children:a.title}),u.jsx("p",{className:"text-lg md:text-xl text-slate-500 leading-relaxed font-medium",children:a.subtitle}),u.jsxs("div",{className:"flex items-center gap-4 mt-8 pt-8 border-t border-slate-100",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-900 text-white flex items-center justify-center font-bold text-sm",children:a.author.charAt(0)}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-bold text-slate-900",children:a.author}),u.jsx("p",{className:"text-xs text-slate-500",children:a.date})]})]})]}),u.jsx("figure",{className:"mb-12",children:u.jsx("img",{src:a.image,alt:a.title,className:"w-full rounded-2xl shadow-lg border border-slate-100"})}),u.jsx("div",{className:"prose prose-lg prose-slate max-w-none mb-16 font-serif",children:q(a.content)}),a.sources&&a.sources.length>0&&u.jsxs("div",{className:"border-t border-slate-100 pt-10",children:[u.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[u.jsx(lr,{className:"w-4 h-4"}),"Sumber Referensi"]}),u.jsx("ul",{className:"space-y-3",children:a.sources.map((L,z)=>u.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[u.jsxs("span",{className:"text-slate-300 font-bold select-none",children:[z+1,"."]}),u.jsx("a",{href:L.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline font-medium break-all",children:L.label})]},z))})]})]})}):u.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12 animate-fade-in relative pb-24",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-16 gap-6",children:[u.jsxs("div",{className:"max-w-2xl",children:[u.jsx(Ve,{id:"blog_header_title",defaultText:"Insights & Stories",isAdmin:t,tag:"h1",className:"text-4xl md:text-6xl font-black text-slate-900 mb-6 tracking-tight"}),u.jsx(Ve,{id:"blog_header_desc",defaultText:"Baca aja dulu, kalau pengen yang lebih mendalam cari aja sendiri di internet oke.",isAdmin:t,tag:"p",multiline:!0,className:"text-lg text-slate-500 leading-relaxed"})]}),t&&u.jsxs("button",{onClick:R,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 whitespace-nowrap",children:[u.jsx(rf,{className:"w-5 h-5"}),"Write Story"]})]}),u.jsx(rd,{isOpen:!!b,title:"Hapus Artikel?",description:"Artikel ini akan dihapus permanen. Tindakan ini tidak bisa dibatalkan.",confirmText:"Ya, Hapus",onConfirm:K,onCancel:()=>M(null)}),r&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),u.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Artikel..."})]}),!r&&u.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.map(L=>u.jsxs("div",{onClick:()=>le(L),className:"group cursor-pointer flex flex-col h-full relative",children:[u.jsxs("div",{className:"relative aspect-[4/3] bg-slate-100 rounded-[2rem] overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500 border border-slate-200",children:[u.jsx("img",{src:L.image,alt:L.title,loading:"lazy",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"}),t&&u.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2",children:[u.jsx("button",{onClick:z=>D(z,L),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-blue-600 hover:bg-white transition-colors",children:u.jsx(Yu,{className:"w-4 h-4"})}),u.jsx("button",{onClick:z=>S(z,L.id),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-red-500 hover:bg-white transition-colors",children:V===L.id?u.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):u.jsx(_s,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute top-6 left-6",children:u.jsx("span",{className:"bg-white/90 backdrop-blur text-slate-900 text-[10px] font-bold px-3 py-1.5 rounded-full uppercase tracking-wider shadow-sm",children:L.category})})]}),u.jsxs("div",{className:"flex-1 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium text-slate-400 mb-3",children:[u.jsx("span",{children:L.date}),u.jsx("span",{children:""}),u.jsx("span",{children:L.readTime})]}),u.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3 leading-tight group-hover:text-blue-600 transition-colors",children:L.title}),u.jsx("p",{className:"text-slate-500 line-clamp-3 leading-relaxed mb-6",children:L.subtitle}),u.jsxs("div",{className:"mt-auto flex items-center text-sm font-bold text-slate-900 group-hover:translate-x-2 transition-transform duration-300",children:["Baca Selengkapnya ",u.jsx(ao,{className:"w-4 h-4 ml-2"})]})]})]},L.id)),u.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-[2rem] flex flex-col items-center justify-center p-8 text-center min-h-[400px]",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4 text-slate-300",children:u.jsx(rf,{className:"w-6 h-6"})}),u.jsx(Ve,{id:"blog_placeholder_title",defaultText:"Tulisan Mendatang",isAdmin:t,tag:"h3",className:"font-bold text-slate-400 mb-2"}),u.jsx(Ve,{id:"blog_placeholder_desc",defaultText:"Artikel tentang AI Consciousness, Sejarah Internet, dan Psikologi Warna sedang ditulis...",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-slate-400 max-w-xs mx-auto"})]})]})]})},l4=({isAdmin:t})=>{const[e,n]=G.useState([]),[r,s]=G.useState(!0),[i,o]=G.useState("All"),[a,l]=G.useState(null),[c,h]=G.useState(9),m=6,[g,y]=G.useState(!1),[E,x]=G.useState("add"),[T,v]=G.useState({}),[_,b]=G.useState(!1),[M,V]=G.useState(null),[B,k]=G.useState(null),N=async()=>{s(!0);try{const L=await RP();n(L)}catch(L){console.error("Failed to load photos",L)}finally{s(!1)}};G.useEffect(()=>{N()},[]),G.useEffect(()=>{h(9)},[i]);const A=["All",...Array.from(new Set(e.map(L=>L.year))).sort().reverse()],P=i==="All"?e:e.filter(L=>L.year===i),j=P.slice(0,c),R=c<P.length,D=j.reduce((L,z)=>(L[z.year]||(L[z.year]=[]),L[z.year].push(z),L),{}),S=Object.keys(D).sort().reverse(),K=()=>{h(L=>L+m)},he=()=>{x("add"),v({src:"",caption:"",month:"Januari",year:new Date().getFullYear().toString(),timestamp:Date.now()}),y(!0)},ne=(L,z)=>{L.stopPropagation(),x("edit"),v({...z}),y(!0)},ee=(L,z)=>{L.stopPropagation(),z&&k(z)},$=async()=>{if(!B)return;const L=B;V(L),k(null);try{await DP(L),n(z=>z.filter(se=>se.id!==L))}catch(z){console.error(z),alert("Gagal menghapus foto. Cek koneksi internet."),N()}finally{V(null)}},le=async()=>{if(!T.src||!T.year){alert("Gambar dan Tahun wajib diisi.");return}b(!0);try{E==="add"?await PP(T):T.id&&await MP(T.id,T),y(!1),N()}catch(L){console.error(L),alert("Gagal menyimpan data.")}finally{b(!1)}},q=L=>{var se;const z=(se=L.target.files)==null?void 0:se[0];if(z){const ie=new FileReader;ie.onloadend=()=>{const ke=ie.result;v(ze=>({...ze,src:ke}))},ie.readAsDataURL(z)}};return u.jsxs("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:[u.jsx(rd,{isOpen:!!B,title:"Hapus Memori?",description:"Foto ini akan dihapus secara permanen dari galeri. Tindakan ini tidak dapat dibatalkan.",confirmText:"Ya, Hapus",onConfirm:$,onCancel:()=>k(null)}),u.jsxs("div",{className:"max-w-7xl mx-auto px-6 pt-12 pb-8",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-slate-900 mb-4 tracking-tight",children:["Visual ",u.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Diaries"})]}),u.jsx("p",{className:"text-lg text-slate-500 max-w-2xl leading-relaxed",children:"ntah lah buat apa, padahal gue sendiri anti kamera.."})]}),t&&u.jsxs("button",{onClick:he,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95",children:[u.jsx(Mc,{className:"w-5 h-5"}),"Add Memory"]})]}),u.jsx("div",{className:"flex flex-wrap gap-2 mt-8",children:A.map(L=>u.jsx("button",{onClick:()=>o(L),className:`px-5 py-2 rounded-full text-sm font-bold transition-all duration-300 ${i===L?"bg-slate-900 text-white shadow-lg shadow-slate-900/20":"bg-slate-50 text-slate-500 hover:bg-slate-100 hover:text-slate-900"}`,children:L},L))})]}),u.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),u.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Galeri..."})]}),!r&&P.length===0&&u.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[u.jsx(Fp,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),u.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada foto di periode ini."})]}),!r&&j.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"space-y-16",children:S.map(L=>u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"flex items-center gap-6 mb-8 mt-4",children:[u.jsx("span",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tighter",children:L}),u.jsx("div",{className:"h-0.5 bg-slate-200 flex-1 rounded-full opacity-50"})]}),u.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-3 gap-6 space-y-6",children:D[L].map(z=>u.jsxs("div",{className:"break-inside-avoid relative group cursor-pointer rounded-2xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-lg transition-all duration-300 transform translate-z-0",onClick:()=>l(z),children:[u.jsx("img",{src:z.src,alt:z.caption,loading:"lazy",className:"w-full h-auto object-cover transform transition-transform duration-700 group-hover:scale-105"}),t&&u.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[u.jsx("button",{onClick:se=>ne(se,z),className:"p-2.5 bg-white text-slate-700 rounded-full shadow-md hover:bg-blue-50 hover:text-blue-600 transition-colors border border-slate-100",title:"Edit",children:u.jsx(Yu,{className:"w-4 h-4"})}),u.jsx("button",{onClick:se=>ee(se,z.id),disabled:M===z.id,className:`p-2.5 bg-white rounded-full shadow-md transition-colors border border-slate-100 ${M===z.id?"text-slate-300 cursor-wait":"text-red-500 hover:bg-red-50"}`,title:"Hapus",children:M===z.id?u.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):u.jsx(_s,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),u.jsx("div",{className:"absolute bottom-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:u.jsx("span",{className:"bg-black/30 backdrop-blur-md text-white text-[10px] font-bold px-3 py-1.5 rounded-full border border-white/20 uppercase tracking-widest shadow-sm",children:z.month})})]},z.id||z.src))})]},L))}),R&&u.jsx("div",{className:"flex justify-center mt-20 mb-8",children:u.jsxs("button",{onClick:K,className:"group flex flex-col items-center gap-2 text-slate-400 hover:text-slate-800 transition-colors",children:[u.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Lihat Momen Terdahulu"}),u.jsx("div",{className:"p-3 rounded-full bg-slate-50 border border-slate-200 group-hover:border-slate-300 group-hover:bg-white group-hover:shadow-md transition-all",children:u.jsx(Fa,{className:"w-5 h-5 animate-bounce"})})]})})]})]}),a&&u.jsxs("div",{className:"fixed inset-0 z-[100] bg-white/95 backdrop-blur-xl flex items-center justify-center p-4 animate-fade-in",onClick:()=>l(null),children:[u.jsx("button",{onClick:()=>l(null),className:"absolute top-6 left-6 z-10 p-3 bg-slate-100 hover:bg-slate-200 text-slate-800 rounded-full transition-all group shadow-sm border border-slate-200",children:u.jsx(oo,{className:"w-6 h-6 group-hover:-translate-x-1 transition-transform"})}),u.jsxs("div",{className:"relative max-w-5xl w-full flex flex-col items-center gap-8",onClick:L=>L.stopPropagation(),children:[u.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-2xl max-h-[75vh] bg-slate-50",children:u.jsx("img",{src:a.src,alt:"Gallery View",className:"max-w-full max-h-[75vh] object-contain"})}),u.jsxs("div",{className:"text-center max-w-2xl px-4 animate-fade-in-up",children:[u.jsxs("p",{className:"text-lg md:text-xl text-slate-900 font-medium leading-relaxed",children:['"',a.caption,'"']}),u.jsx("div",{className:"mt-4 flex items-center justify-center gap-3",children:u.jsxs("div",{className:"inline-block px-3 py-1 bg-slate-100 rounded-full text-slate-600 text-xs font-bold uppercase tracking-widest border border-slate-200",children:[a.month," ",a.year]})})]})]})]}),g&&u.jsx("div",{className:"fixed inset-0 z-[120] bg-slate-900/40 backdrop-blur-md flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl p-8 shadow-2xl animate-fade-in-up border border-slate-100 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:E==="add"?"Tambah Memori":"Edit Memori"}),u.jsx("button",{onClick:()=>y(!1),className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-900 transition-colors",children:""})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Gambar"}),u.jsx("div",{className:"flex gap-3 mb-3",children:u.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"text-xs w-full file:mr-4 file:py-2.5 file:px-5 file:rounded-full file:border-0 file:text-xs file:font-bold file:bg-blue-50 file:text-blue-600 hover:file:bg-blue-100 transition-colors cursor-pointer bg-slate-50 rounded-xl p-1"})}),u.jsx("input",{type:"text",placeholder:"Atau tempel URL gambar...",value:T.src||"",onChange:L=>v(z=>({...z,src:L.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none placeholder:text-slate-400"}),T.src&&u.jsxs("div",{className:"mt-4 h-32 w-full rounded-xl overflow-hidden border border-slate-200 bg-slate-50 relative group",children:[u.jsx("img",{src:T.src,alt:"Preview",className:"w-full h-full object-cover"}),u.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsx("span",{className:"text-white text-xs font-bold bg-black/50 px-3 py-1 rounded-full backdrop-blur-sm",children:"Preview"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Caption"}),u.jsx("textarea",{value:T.caption||"",onChange:L=>v(z=>({...z,caption:L.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none resize-none h-32 leading-relaxed placeholder:text-slate-400",placeholder:"Ceritakan momen ini..."})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Bulan"}),u.jsxs("div",{className:"relative",children:[u.jsx("select",{value:T.month||"Januari",onChange:L=>v(z=>({...z,month:L.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none appearance-none font-medium",children:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"].map(L=>u.jsx("option",{value:L,children:L},L))}),u.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:u.jsx(Fa,{className:"w-4 h-4"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Tahun"}),u.jsx("input",{type:"number",value:T.year||"",onChange:L=>v(z=>({...z,year:L.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none font-medium"})]})]})]}),u.jsxs("div",{className:"flex justify-end gap-3 mt-10 pt-6 border-t border-slate-100",children:[u.jsx("button",{onClick:()=>y(!1),className:"px-6 py-3 text-slate-500 hover:text-slate-800 hover:bg-slate-50 rounded-xl text-sm font-bold transition-all",children:"Batal"}),u.jsxs("button",{onClick:le,disabled:_,className:"px-8 py-3 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800 disabled:opacity-50 transition-all shadow-lg shadow-slate-900/20 active:scale-95 flex items-center gap-2",children:[_&&u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),_?"Menyimpan...":"Simpan Memori"]})]})]})})]})},u4=({isAdmin:t})=>{const[e,n]=G.useState([]),[r,s]=G.useState(null),[i,o]=G.useState(!1),[a,l]=G.useState(!0),[c,h]=G.useState(!1),[m,g]=G.useState(""),[y,E]=G.useState(""),[x,T]=G.useState(""),[v,_]=G.useState(!1),[b,M]=G.useState(!1),[V,B]=G.useState(null),k=G.useRef(null),N=async()=>{l(!0);try{const S=await OP();n(S),S.length>0&&(s(S[0]),o(!1))}catch(S){console.error(S)}finally{l(!1)}};G.useEffect(()=>{N()},[]),G.useEffect(()=>{let S;return!a&&e.length>0&&(S=setTimeout(()=>{o(!0)},5e3)),()=>{S&&clearTimeout(S)}},[a,e.length]);const A=S=>{try{if(S.includes("/track/")){const K=S.split("/track/");if(K.length>1)return K[1].split("?")[0]}if(S.includes("spotify:track:")){const K=S.split(":");if(K.length>2)return K[2]}if(S.length>15&&!S.includes("/"))return S}catch{return null}return null},P=async()=>{if(!m||!y||!x){alert("Harap isi semua kolom.");return}const S=A(m);if(!S){alert("Link Spotify tidak valid.");return}_(!0);try{await zP({spotifyId:S,title:y,artist:x,addedAt:Date.now()}),await N(),h(!1),g(""),E(""),T("")}catch{alert("Gagal menambahkan lagu.")}finally{_(!1)}},j=(S,K)=>{K.stopPropagation(),B(S),M(!0)},R=async()=>{if(V)try{if(await GP(V),n(S=>S.filter(K=>K.id!==V)),(r==null?void 0:r.id)===V){const S=e.filter(K=>K.id!==V);S.length>0?(s(S[0]),o(!1)):(s(null),o(!1))}}catch{alert("Gagal menghapus.")}finally{M(!1),B(null)}},D=S=>{(r==null?void 0:r.id)===S.id?o(!i):(s(S),o(!0))};return u.jsxs("div",{className:"min-h-screen bg-white relative overflow-hidden flex flex-col h-full",children:[u.jsx("style",{children:`
                    .no-scrollbar::-webkit-scrollbar {
                        display: none;
                    }
                    .no-scrollbar {
                        -ms-overflow-style: none;
                        scrollbar-width: none;
                    }
                `}),u.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-blue-50/50 rounded-full blur-3xl opacity-60 pointer-events-none translate-x-1/3 -translate-y-1/3"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-purple-50/50 rounded-full blur-3xl opacity-60 pointer-events-none -translate-x-1/3 translate-y-1/3"}),u.jsx(rd,{isOpen:b,title:"Hapus Lagu?",description:"Lagu ini akan dihapus dari playlist publik. Yakin?",confirmText:"Ya, Hapus",onConfirm:R,onCancel:()=>M(!1)}),u.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar relative z-10 pb-24",children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8 md:py-12",children:[u.jsxs("div",{className:"text-center mb-8 md:mb-10",children:[u.jsx(Ve,{id:"music_title",defaultText:"Soundtrack of Life",isAdmin:t,tag:"h1",className:"text-3xl md:text-5xl font-black text-slate-900 tracking-tighter mb-2 md:mb-4"}),u.jsx(Ve,{id:"music_desc",defaultText:"Emang sedikit fomo, tapi ini emang lagu favorit gue",isAdmin:t,tag:"p",className:"text-sm md:text-base text-slate-500 font-medium"})]}),r&&u.jsxs("div",{className:"bg-white/80 backdrop-blur-xl border border-slate-100 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 shadow-2xl shadow-slate-200/50 mb-10 md:mb-12 relative overflow-hidden transition-all hover:shadow-slate-300/50",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-20 blur-3xl scale-125 pointer-events-none transition-colors duration-1000",children:u.jsx("div",{className:`w-full h-full bg-gradient-to-tr ${i?"from-blue-300 to-purple-300":"from-slate-200 to-gray-200"}`})}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[u.jsxs("div",{className:"relative mb-6 mt-2 md:mb-8 md:mt-4 group cursor-pointer",onClick:()=>o(!i),children:[u.jsxs("div",{className:`w-48 h-48 md:w-64 md:h-64 rounded-full bg-slate-900 shadow-2xl flex items-center justify-center relative overflow-hidden border-4 border-slate-800 ${i?"animate-[spin_4s_linear_infinite]":"transition-transform duration-700 ease-out"}`,children:[u.jsx("div",{className:"absolute inset-2 rounded-full border border-slate-800/50"}),u.jsx("div",{className:"absolute inset-4 rounded-full border border-slate-800/50"}),u.jsx("div",{className:"absolute inset-8 rounded-full border border-slate-800/50"}),u.jsx("div",{className:"absolute inset-12 rounded-full border border-slate-800/50"}),u.jsxs("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-tr from-blue-500 to-purple-600 rounded-full flex items-center justify-center relative shadow-inner",children:[u.jsx("div",{className:"w-2 h-2 md:w-2.5 md:h-2.5 bg-white rounded-full shadow-sm"}),u.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-30"})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-full"})]}),u.jsx("div",{className:`absolute -top-8 -right-6 md:-top-12 md:-right-8 w-24 h-32 md:w-28 md:h-40 pointer-events-none transition-transform duration-1000 ease-in-out origin-[70%_15%] drop-shadow-xl z-20 ${i?"rotate-[0deg]":"-rotate-[40deg]"}`,children:u.jsxs("svg",{viewBox:"0 0 100 150",className:"w-full h-full",children:[u.jsx("circle",{cx:"70",cy:"20",r:"8",fill:"#94a3b8",stroke:"#64748b",strokeWidth:"2"}),u.jsx("path",{d:"M70 20 L60 90 L45 100",fill:"none",stroke:"#64748b",strokeWidth:"5",strokeLinecap:"round"}),u.jsx("rect",{x:"38",y:"95",width:"16",height:"20",fill:"#334155",rx:"2",transform:"rotate(20 46 105)"})]})}),!i&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:u.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-full p-3 md:p-4",children:u.jsx(QI,{className:"w-6 h-6 md:w-8 md:h-8 text-white ml-1"})})})]}),u.jsxs("div",{className:"w-full text-center",children:[u.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-900 mb-1 leading-tight line-clamp-1",children:r.title}),u.jsx("p",{className:"text-xs md:text-sm text-slate-500 font-bold uppercase tracking-widest mb-4 md:mb-6 line-clamp-1",children:r.artist}),u.jsx("div",{className:"w-full rounded-2xl overflow-hidden shadow-sm border border-slate-100 bg-slate-50 relative z-20",children:u.jsx("iframe",{ref:k,src:`https://open.spotify.com/embed/track/${r.spotifyId}?utm_source=generator&theme=0&autoplay=1`,width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Player",className:"border-0 block",style:{overflow:"hidden"}})}),u.jsx("button",{onClick:()=>o(!i),className:"mt-4 text-[10px] font-bold text-slate-400 bg-slate-50 px-3 py-1.5 rounded-full hover:bg-slate-100 transition-colors",children:i?"Matikan Animasi Manual":"Nyalakan Animasi Manual"})]})]})]}),u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[u.jsxs("h3",{className:"text-base md:text-lg font-bold text-slate-900 flex items-center gap-2",children:[u.jsx(XI,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-400"}),"Daftar Putar"]}),t&&u.jsx("button",{onClick:()=>h(!c),className:"text-[10px] md:text-xs font-bold bg-slate-900 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-slate-800 transition-all shadow-md active:scale-95",children:c?"Tutup":"+ Add Song"})]}),c&&u.jsxs("div",{className:"bg-slate-50 p-4 md:p-6 rounded-2xl border border-slate-200 mb-6 md:mb-8 animate-fade-in-up",children:[u.jsx("h4",{className:"text-sm font-bold text-slate-800 mb-4",children:"Tambah Lagu Baru"}),u.jsxs("div",{className:"grid gap-3 md:gap-4",children:[u.jsx("input",{type:"text",placeholder:"Link Spotify...",value:m,onChange:S=>g(S.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[u.jsx("input",{type:"text",placeholder:"Judul Lagu",value:y,onChange:S=>E(S.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"}),u.jsx("input",{type:"text",placeholder:"Nama Artis",value:x,onChange:S=>T(S.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"})]}),u.jsx("button",{onClick:P,disabled:v,className:"w-full bg-blue-600 text-white font-bold py-2.5 md:py-3 rounded-xl hover:bg-blue-700 transition-all disabled:opacity-50 text-sm",children:v?"Menyimpan...":"Simpan ke Playlist"})]})]}),u.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.map((S,K)=>u.jsxs("div",{onClick:()=>D(S),className:`group flex items-center gap-3 md:gap-4 p-3 pr-4 rounded-xl cursor-pointer border transition-all duration-300 ${(r==null?void 0:r.id)===S.id?"bg-slate-900 border-slate-900 shadow-lg scale-[1.01] md:scale-[1.02]":"bg-white border-slate-100 hover:border-slate-300 hover:shadow-md"}`,children:[u.jsx("div",{className:`w-8 h-8 flex items-center justify-center text-xs md:text-sm font-bold rounded-lg shrink-0 ${(r==null?void 0:r.id)===S.id?"text-white":"text-slate-400 bg-slate-50 group-hover:bg-slate-100 group-hover:text-slate-600"}`,children:(r==null?void 0:r.id)===S.id&&i?u.jsxs("div",{className:"flex gap-0.5 items-end h-3",children:[u.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1s_infinite] h-2"}),u.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1.2s_infinite] h-3"}),u.jsx("div",{className:"w-0.5 bg-white animate-[bounce_0.8s_infinite] h-1.5"})]}):K+1}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:`font-bold text-xs md:text-sm truncate ${(r==null?void 0:r.id)===S.id?"text-white":"text-slate-800"}`,children:S.title}),u.jsx("p",{className:`text-[10px] md:text-xs truncate ${(r==null?void 0:r.id)===S.id?"text-slate-400":"text-slate-500"}`,children:S.artist})]}),u.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[u.jsx("div",{className:`p-1.5 md:p-2 rounded-full transition-colors ${(r==null?void 0:r.id)===S.id?"bg-white/10 text-white":"bg-slate-100 text-slate-400 group-hover:text-green-600 group-hover:bg-green-50"}`,children:u.jsx(z_,{className:"w-4 h-4"})}),t&&u.jsx("button",{onClick:he=>j(S.id,he),className:"p-1.5 md:p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-full transition-all",title:"Hapus",children:u.jsx(_s,{className:"w-4 h-4"})})]})]},S.id||K)),e.length===0&&!a&&u.jsx("div",{className:"text-center py-12 text-slate-400 text-sm",children:"Playlist kosong. Tambahkan lagu baru."})]})]})]})})]})},c4=({isAdmin:t})=>{const[e,n]=G.useState([]),[r,s]=G.useState(!0),[i,o]=G.useState(""),[a,l]=G.useState(!1),[c,h]=G.useState(!1),[m,g]=G.useState(!1),y=async()=>{s(!0);try{const T=await WP();n(T)}catch(T){console.error(T)}finally{s(!1)}};G.useEffect(()=>{y()},[]);const E=async()=>{if(i.trim()){h(!0);try{await qP({content:i.trim(),type:a?"private":"public",sender:"Anonim"}),g(!0),o(""),a||y(),setTimeout(()=>g(!1),3e3)}catch{alert("Gagal mengirim pesan.")}finally{h(!1)}}},x=T=>new Date(T).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return u.jsxs("div",{className:"min-h-screen bg-slate-50 relative",children:[u.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-40",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),u.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12 relative z-10",children:[u.jsxs("div",{className:"mb-16 text-center space-y-8",children:[u.jsxs("div",{children:[u.jsx(Ve,{id:"msg_feed_title",defaultText:"Public Wall",isAdmin:t,tag:"h1",className:"text-4xl font-black text-slate-900 tracking-tight mb-2"}),u.jsx(Ve,{id:"msg_feed_desc",defaultText:"Tulis sesuatu. Rahasia, harapan, atau sekadar 'Halo'.",isAdmin:t,tag:"p",className:"text-slate-500 font-medium"})]}),u.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-xl shadow-slate-200/60 border border-slate-100 max-w-2xl mx-auto transition-all focus-within:ring-2 focus-within:ring-slate-900/5",children:[u.jsx("textarea",{value:i,onChange:T=>o(T.target.value),className:"w-full h-32 bg-transparent text-lg font-medium text-slate-800 placeholder:text-slate-300 resize-none outline-none leading-relaxed",placeholder:"Apa yang sedang kamu pikirkan?"}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-50 flex items-center justify-between",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none px-2 py-1 rounded-lg hover:bg-slate-50 transition-colors",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:a,onChange:T=>l(T.target.checked)}),u.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-slate-900 transition-colors"})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[a?u.jsx(ZI,{className:"w-3.5 h-3.5 text-slate-900"}):u.jsx(lr,{className:"w-3.5 h-3.5 text-slate-400"}),u.jsx("span",{className:`text-xs font-bold transition-colors ${a?"text-slate-900":"text-slate-400"}`,children:a?"Privat":"Publik"})]})]}),u.jsx("button",{onClick:E,disabled:!i.trim()||c,className:`
                                    flex items-center gap-2 px-6 py-2.5 rounded-xl font-bold text-sm transition-all shadow-lg active:scale-95
                                    ${m?"bg-green-500 text-white shadow-green-500/20":"bg-slate-900 text-white hover:bg-slate-800 shadow-slate-900/20 disabled:bg-slate-200 disabled:text-slate-400 disabled:shadow-none disabled:cursor-not-allowed"}
                                `,children:c?u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):m?u.jsxs(u.Fragment,{children:["Terkirim ",u.jsx(si,{className:"w-4 h-4"})]}):u.jsxs(u.Fragment,{children:["Kirim ",u.jsx(eC,{className:"w-4 h-4"})]})})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[u.jsx(lr,{className:"w-4 h-4"})," Pesan Terbaru"]}),u.jsx("button",{onClick:y,className:"p-2 text-slate-400 hover:text-slate-900 hover:bg-white rounded-full transition-all",title:"Refresh",children:u.jsx(Dc,{className:"w-4 h-4"})})]}),r?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(T=>u.jsx("div",{className:"h-32 bg-slate-200/50 rounded-2xl animate-pulse"},T))}):e.length===0?u.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[u.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada pesan publik."}),u.jsx("p",{className:"text-slate-300 text-sm",children:"Jadilah yang pertama menulis!"})]}):u.jsx("div",{className:"columns-1 md:columns-2 gap-6 space-y-6",children:e.map((T,v)=>u.jsxs("div",{className:"break-inside-avoid bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md hover:-translate-y-1 transition-all duration-300 group",children:[u.jsxs("p",{className:"text-slate-800 font-medium leading-relaxed whitespace-pre-wrap text-[15px] mb-4",children:['"',T.content,'"']}),u.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-100 text-slate-400 flex items-center justify-center text-[10px] font-bold",children:"?"})}),u.jsx("span",{className:"text-[10px] font-mono font-bold text-slate-300 bg-slate-50 px-2 py-1 rounded-md",children:x(T.timestamp)})]})]},T.id||v))})]})]})};function d4(){return null}function h4(){return null}const So={id:{welcome:"Halo, Siapa Disana?",welcomeSubtitle:"Biar kita makin akrab, kenalan dulu yuk! Isi nama dan sekolahmu ya, biar enak ngobrolnya.",enterName:"Aku biasa dipanggil...",enterSchool:"Aku sekolah / kuliah di...",namePlaceholder:"Contoh: Rara",schoolPlaceholder:"Contoh: SMA 1 Jakarta / UI",accessButton:"Oke, Salam Kenal!",verifying:"Lagi mencatat...",deviceIdNote:"Santai aja, ini cuma biar aku inget temen baru.",credits:"Limit",adminMode:"Mode Admin",unlimited:"Tanpa Batas",logOut:"Ganti Akun",heroTitle:"Hai,",heroSubtitle:"Sudah siap bikin karya keren hari ini?",toolBgRemove:"Hapus Background",toolBgRemoveDesc:"Hapus latar belakang secara instan dan rapi.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Pertajam detail & resolusi tinggi agar tidak pecah.",toolRemix:"Creative Remix",toolRemixDesc:"Ubah gaya gambar dengan bantuan AI.",toolColorize:"Warnai Foto",toolColorizeDesc:"Ubah foto hitam putih jadi berwarna.",toolSketch:"Sketsa ke Nyata",toolSketchDesc:"Ubah coretan tangan jadi gambar realistis.",moreTools:"Lihat Lainnya",lessTools:"Sembunyikan",back:"Kembali",preview:"Pratinjau",changePhoto:"Ganti Foto",aiPrompt:"Instruksi AI",aiPromptPlaceholder:"Jelaskan bagaimana Anda ingin mengubah gambar ini...",generate:"Mulai Proses",generateMagic:"Buat Keajaiban",processing:"Memproses",processingStandard:"Sedang meracik gambar...",processingCloud:"Mengirim ke awan...",processingAI:"AI sedang bekerja...",refining:"Sedikit polesan lagi...",optimizingLocal:"Memproses di perangkatmu (Mode Hemat)...",initializing:"Siap-siap...",resultComparison:"Hasil Karya Kamu",download:"Simpan Gambar",reset:"Ulangi",original:"ASLI",result:"HASIL",bgColor:"Ganti Warna Belakang",uploadPrompt:"Pilih foto terbaikmu untuk diedit",settingsTitle:"Pengaturan Sistem",systemPref:"Preferensi AI",knowledgeMode:"Mode Pengetahuan (Database)",knowledgeModeDesc:"Hemat Kuota. AI hanya menjawab dari database lokal tanpa Gemini API.",totalKnowledge:"Total Memori Tersimpan",wikiMode:"Izinkan Wikipedia",wikiModeDesc:"Jika info tidak ada di database, cari di Wikipedia (Tetap hemat kuota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Kelola API Key untuk fitur chat cerdas dan edit gambar.",selectKeyBtn:"Ambil Key via AI Studio",orManually:"Kelola Key Manual",customKeyActive:"Key Pribadi Aktif",defaultKeyActive:"Key Sistem (Terbatas)",removeBgTitle:"Remove.bg API",removeBgDesc:"Engine khusus hapus background presisi tinggi.",supabaseTitle:"Supabase Engine",supabaseDesc:"Engine cadangan untuk pemrosesan gambar.",googleSearchTitle:"Google Search API",googleSearchDesc:"Opsi pencarian terakhir (Fallback) jika DB & Wiki gagal.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Tutup",save:"Simpan",active:"Aktif",inactive:"Nonaktif",addKeyPlaceholder:"Tempel API Key Gemini disini...",addKeyBtn:"Tambah Key",keyDisclaimerTitle:" Peringatan Penting",keyDisclaimerText:"Dengan menambahkan API Key pribadi, saya sadar bahwa segala bentuk penggunaan, kuota, dan keamanan key tersebut adalah tanggung jawab saya sepenuhnya. Fanra AI Studio tidak bertanggung jawab atas penyalahgunaan atau tagihan yang muncul akibat kelalaian pengguna.",consentCheckbox:"Saya mengerti dan setuju untuk melanjutkan.",keysStored:"Daftar Key",noKeysYet:"Belum ada key tersimpan. Masih pakai limit bawaan.",newChat:"Percakapan Baru",historyHeader:"Riwayat",loginToSave:"Login untuk simpan progres",loginBtn:"Masuk Akun",historyItem1:"editing foto sekolah...",historyItem2:"hapus background merah...",chatPlaceholder:"ketik pesan atau tanya Fanra...",chatDisclaimer:"Fanra bisa salah. cek lagi info penting.",chatFallbackError:"duh, koneksi gue lagi putus dan gue belum pernah dapet pertanyaan ini sebelumnya. cek internet lo atau API key nya deh.",chatOfflineMode:"(Mode Database) Info tidak ditemukan di database.",chatImageResponse:"wih, kirim gambar ya? sori nih gue baru bisa edit gambar kalo lo pake menu di atas itu. coba klik ikon-ikon di atas deh.",errorTitle:"Ups, Ada Masalah",insufficientCredits:"Yah, limit habis! Masukkan API Key di pengaturan agar Unlimited.",limitReachedHQ:"Kuota High Quality harian sudah penuh.",serviceBusy:"Server lagi ramai nih. Coba lagi sebentar ya.",networkError:"Koneksi internetmu sepertinya putus nyambung.",memoryError:"HP keberatan proses gambar ini. Coba gambar lain ya.",confirmTitle:"Yakin mau ganti?",confirmDesc:"Proses yang ini belum disimpan lho. Mau ganti aktivitas?",yesChange:"Ya, Ganti Aja",uploadTitle:"Unggah Foto",uploadDesc:"Klik atau tarik fotomu ke sini",dropHere:"Lepaskan fotonya!",invalidImage:"Format file ini tidak didukung. Pakai JPG/PNG ya."},en:{welcome:"Hello, Who's There?",welcomeSubtitle:"Let's be friends! Tell me your name and school so we can chat comfortably.",enterName:"You can call me...",enterSchool:"I study at...",namePlaceholder:"Ex: Sarah",schoolPlaceholder:"Ex: High School NY / MIT",accessButton:"Okay, Nice to Meet You!",verifying:"Writing that down...",deviceIdNote:"Relax, just remembering a new friend.",credits:"Credits",adminMode:"Admin Mode",unlimited:"Unlimited",logOut:"Switch Account",heroTitle:"Hi,",heroSubtitle:"Ready to make something cool today?",toolBgRemove:"Remove Background",toolBgRemoveDesc:"Instantly remove backgrounds cleanly.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Sharpen details to 4K resolution.",toolRemix:"Creative Remix",toolRemixDesc:"Reimagine image with AI assistance.",toolColorize:"Colorize Photo",toolColorizeDesc:"Turn black & white photos into color.",toolSketch:"Sketch to Real",toolSketchDesc:"Turn hand drawings into realistic images.",moreTools:"See More",lessTools:"Show Less",back:"Back",preview:"Preview",changePhoto:"Change Photo",aiPrompt:"AI Prompt",aiPromptPlaceholder:"Describe how you want to remix this image...",generate:"Generate",generateMagic:"Generate Magic",processing:"Processing",processingStandard:"Working magic...",processingCloud:"Sending to cloud...",processingAI:"AI is thinking...",refining:"Polishing details...",optimizingLocal:"Processing on device (Offline Mode)...",initializing:"Warming up...",resultComparison:"Your Masterpiece",download:"Save Image",reset:"Reset",original:"ORIGINAL",result:"RESULT",bgColor:"Background Color",uploadPrompt:"Upload an image to start editing",settingsTitle:"System Settings",systemPref:"AI Preferences",knowledgeMode:"Knowledge Mode (Database)",knowledgeModeDesc:"Save Quota. AI only answers from local database without Gemini API.",totalKnowledge:"Total Stored Memory",wikiMode:"Enable Wikipedia",wikiModeDesc:"If info not in DB, search Wikipedia (Still saves API quota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Manage keys for smart chat and image editing.",selectKeyBtn:"Get Key via AI Studio",orManually:"Manage Keys Manually",customKeyActive:"Custom Key Active",defaultKeyActive:"System Key (Limited)",removeBgTitle:"Remove.bg API",removeBgDesc:"Precision background removal engine.",supabaseTitle:"Supabase Engine",supabaseDesc:"Backup engine for image processing.",googleSearchTitle:"Google Search API",googleSearchDesc:"Fallback search option if DB & Wiki fail.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Close",save:"Save",active:"Active",inactive:"Inactive",addKeyPlaceholder:"Paste Gemini API Key here...",addKeyBtn:"Add Key",keyDisclaimerTitle:" Important Warning",keyDisclaimerText:"By adding personal API Keys, I acknowledge that all usage, quotas, and security of said keys are my sole responsibility. Fanra AI Studio is not liable for misuse or charges incurred due to user negligence.",consentCheckbox:"I understand and agree to proceed.",keysStored:"Key List",noKeysYet:"No keys saved yet. Using default limits.",newChat:"New Conversation",historyHeader:"History",loginToSave:"Login to save progress",loginBtn:"Login",historyItem1:"editing school photo...",historyItem2:"removing red background...",chatPlaceholder:"type a message or ask Fanra...",chatDisclaimer:"Fanra can make mistakes. Check important info.",chatFallbackError:"ugh, my connection is down and I haven't heard this question before. Check your internet or API key.",chatOfflineMode:"(DB Mode) Info not found in database.",chatImageResponse:"woah, sending an image? sorry, I can only edit images if you use the menu above. try clicking those icons.",errorTitle:"Whoops",insufficientCredits:"Out of credits! Enter your own Google Gemini API Key in settings for unlimited access.",limitReachedHQ:"High Quality daily limit reached.",serviceBusy:"Service is busy. Please try again.",networkError:"Connection issue. Check your internet.",memoryError:"Device memory low. Try a smaller image.",confirmTitle:"Change Activity?",confirmDesc:"Current progress will be lost. Are you sure?",yesChange:"Yes, Change",uploadTitle:"Upload Image",uploadDesc:"Click to browse or drag & drop",dropHere:"Drop it here!",invalidImage:"Please upload a valid image file (JPG/PNG)."}};var f4={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let p4,m4;function g4(){return{geminiUrl:p4,vertexUrl:m4}}function y4(t,e,n,r){var s,i;if(!(t!=null&&t.baseUrl)){const o=g4();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:n:(i=o.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wr{}function xe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const i=e[s];return i!=null?String(i):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function p(t,e,n){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const h=l[c];p(h,e.slice(i+1),n[c])}else for(const c of l)p(c,e.slice(i+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];p(l[0],e.slice(i+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const i=s.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(a=>d(a,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function v4(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),i=r.split("."),o=new Set;let a=-1;for(let l=0;l<s.length;l++)if(s[l]==="*"){a=l;break}if(a!==-1&&i.length>a)for(let l=a;l<i.length;l++){const c=i[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}Cf(t,s,i,0,o)}}function Cf(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])Cf(l,e,n,r+1,s)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!s.has(c)),l={};for(const c of a)l[c]=o[c];for(const[c,h]of Object.entries(l)){const m=[];for(const g of n.slice(r))g==="*"?m.push(c):m.push(g);p(o,m,h)}for(const c of a)delete o[c]}}else{const o=t;i in o&&Cf(o[i],e,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mm(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x4(t){const e={},n=d(t,["operationName"]);n!=null&&p(e,["operationName"],n);const r=d(t,["resourceName"]);return r!=null&&p(e,["_url","resourceName"],r),e}function w4(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const r=d(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(t,["done"]);s!=null&&p(e,["done"],s);const i=d(t,["error"]);i!=null&&p(e,["error"],i);const o=d(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],E4(o)),e}function _4(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const r=d(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(t,["done"]);s!=null&&p(e,["done"],s);const i=d(t,["error"]);i!=null&&p(e,["error"],i);const o=d(t,["response"]);return o!=null&&p(e,["response"],T4(o)),e}function E4(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>b4(o))),p(e,["generatedVideos"],i)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=d(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function T4(t){const e={},n=d(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>S4(o))),p(e,["generatedVideos"],i)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=d(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function b4(t){const e={},n=d(t,["video"]);return n!=null&&p(e,["video"],R4(n)),e}function S4(t){const e={},n=d(t,["_self"]);return n!=null&&p(e,["video"],P4(n)),e}function I4(t){const e={},n=d(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function C4(t){const e={},n=d(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function k4(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const r=d(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(t,["done"]);s!=null&&p(e,["done"],s);const i=d(t,["error"]);i!=null&&p(e,["error"],i);const o=d(t,["response"]);return o!=null&&p(e,["response"],A4(o)),e}function A4(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["parent"]);r!=null&&p(e,["parent"],r);const s=d(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function ob(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const r=d(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(t,["done"]);s!=null&&p(e,["done"],s);const i=d(t,["error"]);i!=null&&p(e,["error"],i);const o=d(t,["response"]);return o!=null&&p(e,["response"],N4(o)),e}function N4(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["parent"]);r!=null&&p(e,["parent"],r);const s=d(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function R4(t){const e={},n=d(t,["uri"]);n!=null&&p(e,["uri"],n);const r=d(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],Mm(r));const s=d(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function P4(t){const e={},n=d(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=d(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],Mm(r));const s=d(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(jy||(jy={}));var Uy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Uy||(Uy={}));var By;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(By||(By={}));var ln;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ln||(ln={}));var Oy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Oy||(Oy={}));var zy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zy||(zy={}));var Gy;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Gy||(Gy={}));var Hy;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Hy||(Hy={}));var $y;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})($y||($y={}));var qy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(qy||(qy={}));var Wy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Wy||(Wy={}));var Ky;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Ky||(Ky={}));var Jy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Jy||(Jy={}));var Yy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Yy||(Yy={}));var Qy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Qy||(Qy={}));var Xy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Xy||(Xy={}));var Zy;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Zy||(Zy={}));var ev;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(ev||(ev={}));var tv;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(tv||(tv={}));var dc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(dc||(dc={}));var nv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(nv||(nv={}));var rv;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(rv||(rv={}));var sv;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(sv||(sv={}));var kf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(kf||(kf={}));var iv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(iv||(iv={}));var ov;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(ov||(ov={}));var av;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(av||(av={}));var lv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(lv||(lv={}));var uv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(uv||(uv={}));var cv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(cv||(cv={}));var dv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(dv||(dv={}));var hv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(hv||(hv={}));var fv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(fv||(fv={}));var pv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(pv||(pv={}));var mv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(mv||(mv={}));var gv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(gv||(gv={}));var yv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(yv||(yv={}));var vv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(vv||(vv={}));var xv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(xv||(xv={}));var wv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(wv||(wv={}));var _v;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(_v||(_v={}));var Ev;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Ev||(Ev={}));var Tv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Tv||(Tv={}));var bv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(bv||(bv={}));var Sv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Sv||(Sv={}));var Iv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Iv||(Iv={}));var Cv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Cv||(Cv={}));var kv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(kv||(kv={}));var Av;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Av||(Av={}));var Nv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Nv||(Nv={}));var Rv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Rv||(Rv={}));var Pv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Pv||(Pv={}));var Mv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Mv||(Mv={}));var Dv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Dv||(Dv={}));var Lv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Lv||(Lv={}));var Bi;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Bi||(Bi={}));class Af{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Jo{get text(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",h=!1;const m=[];for(const g of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[y,E]of Object.entries(g))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(E!==null||E!==void 0)&&m.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;h=!0,c+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?c:void 0}get data(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const h=[];for(const m of(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(m))g!=="inlineData"&&(y!==null||y!==void 0)&&h.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,s,i,o,a,l;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,s,i,o,a,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,s,i,o,a,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.output}}class Vv{}class Fv{}class M4{}class D4{}class L4{}class V4{}class jv{}class Uv{}class Bv{}class F4{}class hc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new hc;let s;const i=e;return n?s=_4(i):s=w4(i),Object.assign(r,s),r}}class Ov{}class zv{}class Gv{}class Hv{}class j4{}class U4{}class B4{}class Dm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Dm,i=k4(e);return Object.assign(r,i),r}}class O4{}class z4{}class G4{}class $v{}class H4{get text(){var e,n,r;let s="",i=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,s+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?s:void 0}get data(){var e,n,r;let s="";const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&i.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class $4{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Lm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Lm,i=ob(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ab(t,e){const n=Xe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function lb(t){return Array.isArray(t)?t.map(e=>fc(e)):[fc(t)]}function fc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function ub(t){const e=fc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cb(t){const e=fc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function db(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>qv(e)):[qv(t)]}function Nf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Wv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Kv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function un(t){if(t==null)throw new Error("ContentUnion is required");return Nf(t)?t:{role:"user",parts:db(t)}}function Vm(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=un(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=un(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>un(n)):[un(e)]}function Yn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Wv(t)||Kv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[un(t)]}const e=[],n=[],r=Nf(t[0]);for(const s of t){const i=Nf(s);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(s);else{if(Wv(s)||Kv(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:db(n)}),e}function q4(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(ln).includes(n[0].toUpperCase())?n[0].toUpperCase():ln.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(ln).includes(r.toUpperCase())?r.toUpperCase():ln.TYPE_UNSPECIFIED})}}function Yi(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&q4(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(ln).includes(a.toUpperCase())?a.toUpperCase():ln.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Yi(a);else if(r.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(Yi(c))}e[o]=l}else if(s.includes(o)){const l={};for(const[c,h]of Object.entries(a))l[c]=Yi(h);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Fm(t){return Yi(t)}function jm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Um(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Io(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Yi(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Yi(e.response));return t}function Co(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function W4(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Kr(t,e){if(typeof e!="string")throw new Error("name must be a string");return W4(t,e,"cachedContents")}function hb(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ms(t){return Mm(t)}function K4(t){return t!=null&&typeof t=="object"&&"name"in t}function J4(t){return t!=null&&typeof t=="object"&&"video"in t}function Y4(t){return t!=null&&typeof t=="object"&&"uri"in t}function fb(t){var e;let n;if(K4(t)&&(n=t.name),!(Y4(t)&&(n=t.uri,n===void 0))&&!(J4(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function pb(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function mb(t){for(const e of["models","tunedModels","publisherModels"])if(Q4(t,e))return t[e];return[]}function Q4(t,e){return t!==null&&typeof t=="object"&&e in t}function X4(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Z4(t,e={}){const n=[],r=new Set;for(const s of t){const i=s.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const o=X4(s,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function gb(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function eM(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function yb(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let i=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ko(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function vb(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tM(t){const e={},n=d(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const r=d(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>LM(o))),p(e,["inlinedResponses"],i)}const s=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["inlinedEmbedContentResponses"],i)}return e}function nM(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const r=d(t,["gcsDestination","outputUriPrefix"]);r!=null&&p(e,["gcsUri"],r);const s=d(t,["bigqueryDestination","outputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function rM(t){const e={},n=d(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const r=d(t,["gcsUri"]);r!=null&&p(e,["gcsDestination","outputUriPrefix"],r);const s=d(t,["bigqueryUri"]);if(s!=null&&p(e,["bigqueryDestination","outputUri"],s),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Tu(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const r=d(t,["metadata","displayName"]);r!=null&&p(e,["displayName"],r);const s=d(t,["metadata","state"]);s!=null&&p(e,["state"],vb(s));const i=d(t,["metadata","createTime"]);i!=null&&p(e,["createTime"],i);const o=d(t,["metadata","endTime"]);o!=null&&p(e,["endTime"],o);const a=d(t,["metadata","updateTime"]);a!=null&&p(e,["updateTime"],a);const l=d(t,["metadata","model"]);l!=null&&p(e,["model"],l);const c=d(t,["metadata","output"]);return c!=null&&p(e,["dest"],tM(yb(c))),e}function Rf(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const r=d(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=d(t,["state"]);s!=null&&p(e,["state"],vb(s));const i=d(t,["error"]);i!=null&&p(e,["error"],i);const o=d(t,["createTime"]);o!=null&&p(e,["createTime"],o);const a=d(t,["startTime"]);a!=null&&p(e,["startTime"],a);const l=d(t,["endTime"]);l!=null&&p(e,["endTime"],l);const c=d(t,["updateTime"]);c!=null&&p(e,["updateTime"],c);const h=d(t,["model"]);h!=null&&p(e,["model"],h);const m=d(t,["inputConfig"]);m!=null&&p(e,["src"],sM(m));const g=d(t,["outputConfig"]);g!=null&&p(e,["dest"],nM(yb(g)));const y=d(t,["completionStats"]);return y!=null&&p(e,["completionStats"],y),e}function sM(t){const e={},n=d(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const r=d(t,["gcsSource","uris"]);r!=null&&p(e,["gcsUri"],r);const s=d(t,["bigquerySource","inputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function iM(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=d(e,["fileName"]);r!=null&&p(n,["fileName"],r);const s=d(e,["inlinedRequests"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>DM(t,o))),p(n,["requests","requests"],i)}return n}function oM(t){const e={},n=d(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const r=d(t,["gcsUri"]);r!=null&&p(e,["gcsSource","uris"],r);const s=d(t,["bigqueryUri"]);if(s!=null&&p(e,["bigquerySource","inputUri"],s),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function aM(t){const e={},n=d(t,["data"]);if(n!=null&&p(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function lM(t,e){const n={},r=d(e,["name"]);return r!=null&&p(n,["_url","name"],ko(t,r)),n}function uM(t,e){const n={},r=d(e,["name"]);return r!=null&&p(n,["_url","name"],ko(t,r)),n}function cM(t){const e={},n=d(t,["content"]);n!=null&&p(e,["content"],n);const r=d(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],dM(r));const s=d(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=d(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=d(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=d(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const l=d(t,["index"]);l!=null&&p(e,["index"],l);const c=d(t,["logprobsResult"]);c!=null&&p(e,["logprobsResult"],c);const h=d(t,["safetyRatings"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=d(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function dM(t){const e={},n=d(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function xb(t){const e={},n=d(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>zM(i))),p(e,["parts"],s)}const r=d(t,["role"]);return r!=null&&p(e,["role"],r),e}function hM(t,e){const n={},r=d(t,["displayName"]);if(e!==void 0&&r!=null&&p(e,["batch","displayName"],r),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function fM(t,e){const n={},r=d(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=d(t,["dest"]);return e!==void 0&&s!=null&&p(e,["outputConfig"],rM(eM(s))),n}function Jv(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["src"]);s!=null&&p(n,["batch","inputConfig"],iM(t,gb(t,s)));const i=d(e,["config"]);return i!=null&&hM(i,n),n}function pM(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["model"],Xe(t,r));const s=d(e,["src"]);s!=null&&p(n,["inputConfig"],oM(gb(t,s)));const i=d(e,["config"]);return i!=null&&fM(i,n),n}function mM(t,e){const n={},r=d(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["batch","displayName"],r),n}function gM(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["src"]);s!=null&&p(n,["batch","inputConfig"],TM(t,s));const i=d(e,["config"]);return i!=null&&mM(i,n),n}function yM(t,e){const n={},r=d(e,["name"]);return r!=null&&p(n,["_url","name"],ko(t,r)),n}function vM(t,e){const n={},r=d(e,["name"]);return r!=null&&p(n,["_url","name"],ko(t,r)),n}function xM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["name"]);r!=null&&p(e,["name"],r);const s=d(t,["done"]);s!=null&&p(e,["done"],s);const i=d(t,["error"]);return i!=null&&p(e,["error"],i),e}function wM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["name"]);r!=null&&p(e,["name"],r);const s=d(t,["done"]);s!=null&&p(e,["done"],s);const i=d(t,["error"]);return i!=null&&p(e,["error"],i),e}function _M(t,e){const n={},r=d(e,["contents"]);if(r!=null){let i=Vm(t,r);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["requests[]","request","content"],i)}const s=d(e,["config"]);return s!=null&&(p(n,["_self"],EM(s,n)),v4(n,{"requests[].*":"requests[].request.*"})),n}function EM(t,e){const n={},r=d(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=d(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=d(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function TM(t,e){const n={},r=d(e,["fileName"]);r!=null&&p(n,["file_name"],r);const s=d(e,["inlinedRequests"]);return s!=null&&p(n,["requests"],_M(t,s)),n}function bM(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=d(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function SM(t){const e={},n=d(t,["id"]);n!=null&&p(e,["id"],n);const r=d(t,["args"]);r!=null&&p(e,["args"],r);const s=d(t,["name"]);if(s!=null&&p(e,["name"],s),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function IM(t){const e={},n=d(t,["mode"]);n!=null&&p(e,["mode"],n);const r=d(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function CM(t,e,n){const r={},s=d(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],xb(un(s)));const i=d(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=d(e,["topP"]);o!=null&&p(r,["topP"],o);const a=d(e,["topK"]);a!=null&&p(r,["topK"],a);const l=d(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=d(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const h=d(e,["stopSequences"]);h!=null&&p(r,["stopSequences"],h);const m=d(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=d(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=d(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const E=d(e,["frequencyPenalty"]);E!=null&&p(r,["frequencyPenalty"],E);const x=d(e,["seed"]);x!=null&&p(r,["seed"],x);const T=d(e,["responseMimeType"]);T!=null&&p(r,["responseMimeType"],T);const v=d(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],Fm(v));const _=d(e,["responseJsonSchema"]);if(_!=null&&p(r,["responseJsonSchema"],_),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=d(e,["safetySettings"]);if(n!==void 0&&b!=null){let D=b;Array.isArray(D)&&(D=D.map(S=>GM(S))),p(n,["safetySettings"],D)}const M=d(e,["tools"]);if(n!==void 0&&M!=null){let D=Co(M);Array.isArray(D)&&(D=D.map(S=>$M(Io(S)))),p(n,["tools"],D)}const V=d(e,["toolConfig"]);if(n!==void 0&&V!=null&&p(n,["toolConfig"],HM(V)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=d(e,["cachedContent"]);n!==void 0&&B!=null&&p(n,["cachedContent"],Kr(t,B));const k=d(e,["responseModalities"]);k!=null&&p(r,["responseModalities"],k);const N=d(e,["mediaResolution"]);N!=null&&p(r,["mediaResolution"],N);const A=d(e,["speechConfig"]);if(A!=null&&p(r,["speechConfig"],jm(A)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=d(e,["thinkingConfig"]);P!=null&&p(r,["thinkingConfig"],P);const j=d(e,["imageConfig"]);j!=null&&p(r,["imageConfig"],MM(j));const R=d(e,["enableEnhancedCivicAnswers"]);return R!=null&&p(r,["enableEnhancedCivicAnswers"],R),r}function kM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>cM(c))),p(e,["candidates"],l)}const s=d(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=d(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=d(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=d(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function AM(t,e){const n={},r=d(e,["name"]);return r!=null&&p(n,["_url","name"],ko(t,r)),n}function NM(t,e){const n={},r=d(e,["name"]);return r!=null&&p(n,["_url","name"],ko(t,r)),n}function RM(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function PM(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function MM(t){const e={},n=d(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=d(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function DM(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["request","model"],Xe(t,r));const s=d(e,["contents"]);if(s!=null){let a=Yn(s);Array.isArray(a)&&(a=a.map(l=>xb(l))),p(n,["request","contents"],a)}const i=d(e,["metadata"]);i!=null&&p(n,["metadata"],i);const o=d(e,["config"]);return o!=null&&p(n,["request","generationConfig"],CM(t,o,d(n,["request"],{}))),n}function LM(t){const e={},n=d(t,["response"]);n!=null&&p(e,["response"],kM(n));const r=d(t,["error"]);return r!=null&&p(e,["error"],r),e}function VM(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(t,["pageToken"]);if(e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function FM(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(t,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const i=d(t,["filter"]);return e!==void 0&&i!=null&&p(e,["_query","filter"],i),n}function jM(t){const e={},n=d(t,["config"]);return n!=null&&VM(n,e),e}function UM(t){const e={},n=d(t,["config"]);return n!=null&&FM(n,e),e}function BM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(t,["operations"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Tu(o))),p(e,["batchJobs"],i)}return e}function OM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(t,["batchPredictionJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Rf(o))),p(e,["batchJobs"],i)}return e}function zM(t){const e={},n=d(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=d(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=d(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=d(t,["fileData"]);i!=null&&p(e,["fileData"],bM(i));const o=d(t,["functionCall"]);o!=null&&p(e,["functionCall"],SM(o));const a=d(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=d(t,["inlineData"]);l!=null&&p(e,["inlineData"],aM(l));const c=d(t,["text"]);c!=null&&p(e,["text"],c);const h=d(t,["thought"]);h!=null&&p(e,["thought"],h);const m=d(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=d(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function GM(t){const e={},n=d(t,["category"]);if(n!=null&&p(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function HM(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],IM(n));const r=d(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function $M(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),p(e,["functionDeclarations"],h)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=d(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=d(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=d(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],RM(a));const l=d(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],PM(l));const c=d(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Hr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Hr||(Hr={}));class mi{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qM extends Wr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mi(Hr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Jv(this.apiClient,e),r=n._url,s=xe("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const h of l){const m=Object.assign({},h);if(m.systemInstruction){const g=m.systemInstruction;delete m.systemInstruction;const y=m.request;y.systemInstruction=g,m.request=y}c.push(m)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const i=this.getGcsUri(e),o=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${s}`;else if(o)r.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=pM(this.apiClient,e);return a=xe("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Rf(h))}else{const c=Jv(this.apiClient,e);return a=xe("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>Tu(h))}}async createEmbeddingsInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=gM(this.apiClient,e);return i=xe("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>Tu(l))}}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=NM(this.apiClient,e);return a=xe("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Rf(h))}else{const c=AM(this.apiClient,e);return a=xe("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>Tu(h))}}async cancel(e){var n,r,s,i;let o="",a={};if(this.apiClient.isVertexAI()){const l=uM(this.apiClient,e);o=xe("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=lM(this.apiClient,e);o=xe("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=UM(e);return a=xe("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=OM(h),g=new $v;return Object.assign(g,m),g})}else{const c=jM(e);return a=xe("batches",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=BM(h),g=new $v;return Object.assign(g,m),g})}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=vM(this.apiClient,e);return a=xe("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>wM(h))}else{const c=yM(this.apiClient,e);return a=xe("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>xM(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WM(t){const e={},n=d(t,["data"]);if(n!=null&&p(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Yv(t){const e={},n=d(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>gD(i))),p(e,["parts"],s)}const r=d(t,["role"]);return r!=null&&p(e,["role"],r),e}function KM(t,e){const n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=d(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=d(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=d(t,["contents"]);if(e!==void 0&&o!=null){let h=Yn(o);Array.isArray(h)&&(h=h.map(m=>Yv(m))),p(e,["contents"],h)}const a=d(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],Yv(un(a)));const l=d(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>vD(m))),p(e,["tools"],h)}const c=d(t,["toolConfig"]);if(e!==void 0&&c!=null&&p(e,["toolConfig"],yD(c)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function JM(t,e){const n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=d(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=d(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=d(t,["contents"]);if(e!==void 0&&o!=null){let m=Yn(o);Array.isArray(m)&&(m=m.map(g=>g)),p(e,["contents"],m)}const a=d(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],un(a));const l=d(t,["tools"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>xD(g))),p(e,["tools"],m)}const c=d(t,["toolConfig"]);e!==void 0&&c!=null&&p(e,["toolConfig"],c);const h=d(t,["kmsKeyName"]);return e!==void 0&&h!=null&&p(e,["encryption_spec","kmsKeyName"],h),n}function YM(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["model"],ab(t,r));const s=d(e,["config"]);return s!=null&&KM(s,n),n}function QM(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["model"],ab(t,r));const s=d(e,["config"]);return s!=null&&JM(s,n),n}function XM(t,e){const n={},r=d(e,["name"]);return r!=null&&p(n,["_url","name"],Kr(t,r)),n}function ZM(t,e){const n={},r=d(e,["name"]);return r!=null&&p(n,["_url","name"],Kr(t,r)),n}function eD(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function tD(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function nD(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=d(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function rD(t){const e={},n=d(t,["id"]);n!=null&&p(e,["id"],n);const r=d(t,["args"]);r!=null&&p(e,["args"],r);const s=d(t,["name"]);if(s!=null&&p(e,["name"],s),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sD(t){const e={},n=d(t,["mode"]);n!=null&&p(e,["mode"],n);const r=d(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function iD(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&p(e,["description"],n);const r=d(t,["name"]);r!=null&&p(e,["name"],r);const s=d(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=d(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=d(t,["response"]);o!=null&&p(e,["response"],o);const a=d(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function oD(t,e){const n={},r=d(e,["name"]);return r!=null&&p(n,["_url","name"],Kr(t,r)),n}function aD(t,e){const n={},r=d(e,["name"]);return r!=null&&p(n,["_url","name"],Kr(t,r)),n}function lD(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function uD(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function cD(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function dD(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function hD(t){const e={},n=d(t,["config"]);return n!=null&&cD(n,e),e}function fD(t){const e={},n=d(t,["config"]);return n!=null&&dD(n,e),e}function pD(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function mD(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function gD(t){const e={},n=d(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=d(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=d(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=d(t,["fileData"]);i!=null&&p(e,["fileData"],nD(i));const o=d(t,["functionCall"]);o!=null&&p(e,["functionCall"],rD(o));const a=d(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=d(t,["inlineData"]);l!=null&&p(e,["inlineData"],WM(l));const c=d(t,["text"]);c!=null&&p(e,["text"],c);const h=d(t,["thought"]);h!=null&&p(e,["thought"],h);const m=d(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=d(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function yD(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],sD(n));const r=d(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function vD(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),p(e,["functionDeclarations"],h)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=d(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=d(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=d(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],lD(a));const l=d(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],uD(l));const c=d(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function xD(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>iD(g))),p(e,["functionDeclarations"],m)}const r=d(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=d(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=d(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=d(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=d(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=d(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const c=d(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const h=d(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function wD(t,e){const n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=d(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function _D(t,e){const n={},r=d(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=d(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function ED(t,e){const n={},r=d(e,["name"]);r!=null&&p(n,["_url","name"],Kr(t,r));const s=d(e,["config"]);return s!=null&&wD(s,n),n}function TD(t,e){const n={},r=d(e,["name"]);r!=null&&p(n,["_url","name"],Kr(t,r));const s=d(e,["config"]);return s!=null&&_D(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bD extends Wr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mi(Hr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=QM(this.apiClient,e);return a=xe("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const c=YM(this.apiClient,e);return a=xe("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=aD(this.apiClient,e);return a=xe("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const c=oD(this.apiClient,e);return a=xe("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=ZM(this.apiClient,e);return a=xe("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=tD(h),g=new Gv;return Object.assign(g,m),g})}else{const c=XM(this.apiClient,e);return a=xe("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=eD(h),g=new Gv;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=TD(this.apiClient,e);return a=xe("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const c=ED(this.apiClient,e);return a=xe("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=fD(e);return a=xe("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=mD(h),g=new Hv;return Object.assign(g,m),g})}else{const c=hD(e);return a=xe("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=pD(h),g=new Hv;return Object.assign(g,m),g})}}}function pc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Qv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(t){return this instanceof Pe?(this.v=t,this):new Pe(t)}function ur(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(y){return function(E){return Promise.resolve(E).then(y,m)}}function a(y,E){r[y]&&(s[y]=function(x){return new Promise(function(T,v){i.push([y,x,T,v])>1||l(y,x)})},E&&(s[y]=E(s[y])))}function l(y,E){try{c(r[y](E))}catch(x){g(i[0][3],x)}}function c(y){y.value instanceof Pe?Promise.resolve(y.value.v).then(h,m):g(i[0][2],y)}function h(y){l("next",y)}function m(y){l("throw",y)}function g(y,E){y(E),i.shift(),i.length&&l(i[0][0],i[0][1])}}function cr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Qv=="function"?Qv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SD(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:wb(n)}function wb(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ID(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Xv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let i=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),i&&!wb(t[r])&&(i=!1),r++;i?e.push(...s):e.pop()}return e}class CD{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new kD(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class kD{constructor(e,n,r,s={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=i,this.sendPromise=Promise.resolve(),ID(i)}async sendMessage(e){var n;await this.sendPromise;const r=un(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,o,a;const l=await s,c=(o=(i=l.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,h=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];h!=null&&(g=(a=h.slice(m))!==null&&a!==void 0?a:[]);const y=c?[c]:[];this.recordHistory(r,y,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=un(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const i=await s;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?Xv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return ur(this,arguments,function*(){var s,i,o,a,l,c;const h=[];try{for(var m=!0,g=cr(e),y;y=yield Pe(g.next()),s=y.done,!s;m=!0){a=y.value,m=!1;const E=a;if(SD(E)){const x=(c=(l=E.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;x!==void 0&&h.push(x)}yield yield Pe(E)}}catch(E){i={error:E}}finally{try{!m&&!s&&(o=g.return)&&(yield Pe(o.call(g)))}finally{if(i)throw i.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(i=>i.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Xv(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,sd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AD(t){const e={},n=d(t,["file"]);return n!=null&&p(e,["file"],n),e}function ND(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function RD(t){const e={},n=d(t,["name"]);return n!=null&&p(e,["_url","file"],fb(n)),e}function PD(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function MD(t){const e={},n=d(t,["name"]);return n!=null&&p(e,["_url","file"],fb(n)),e}function DD(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function LD(t){const e={},n=d(t,["config"]);return n!=null&&DD(n,e),e}function VD(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(t,["files"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FD extends Wr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mi(Hr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=LD(e);return i=xe("files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const c=VD(l),h=new O4;return Object.assign(h,c),h})}}async createInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=AD(e);return i=xe("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=ND(l),h=new z4;return Object.assign(h,c),h})}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=MD(e);return i=xe("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=RD(e);return i=xe("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const c=PD(l),h=new G4;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bu(t){const e={},n=d(t,["data"]);if(n!=null&&p(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function jD(t){const e={},n=d(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>e5(i))),p(e,["parts"],s)}const r=d(t,["role"]);return r!=null&&p(e,["role"],r),e}function UD(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=d(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function BD(t){const e={},n=d(t,["id"]);n!=null&&p(e,["id"],n);const r=d(t,["args"]);r!=null&&p(e,["args"],r);const s=d(t,["name"]);if(s!=null&&p(e,["name"],s),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function OD(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&p(e,["description"],n);const r=d(t,["name"]);r!=null&&p(e,["name"],r);const s=d(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=d(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=d(t,["response"]);o!=null&&p(e,["response"],o);const a=d(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function zD(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=d(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=d(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=d(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=d(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=d(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const l=d(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const c=d(t,["maxOutputTokens"]);c!=null&&p(e,["maxOutputTokens"],c);const h=d(t,["mediaResolution"]);h!=null&&p(e,["mediaResolution"],h);const m=d(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=d(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=d(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const E=d(t,["responseModalities"]);E!=null&&p(e,["responseModalities"],E);const x=d(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const T=d(t,["routingConfig"]);T!=null&&p(e,["routingConfig"],T);const v=d(t,["seed"]);v!=null&&p(e,["seed"],v);const _=d(t,["speechConfig"]);_!=null&&p(e,["speechConfig"],_);const b=d(t,["stopSequences"]);b!=null&&p(e,["stopSequences"],b);const M=d(t,["temperature"]);M!=null&&p(e,["temperature"],M);const V=d(t,["thinkingConfig"]);V!=null&&p(e,["thinkingConfig"],V);const B=d(t,["topK"]);B!=null&&p(e,["topK"],B);const k=d(t,["topP"]);if(k!=null&&p(e,["topP"],k),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function GD(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function HD(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function $D(t,e){const n={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=d(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=d(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=d(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=d(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=d(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const h=d(t,["seed"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","seed"],h);const m=d(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],Um(m));const g=d(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=d(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const E=d(t,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],jD(un(E)));const x=d(t,["tools"]);if(e!==void 0&&x!=null){let B=Co(x);Array.isArray(B)&&(B=B.map(k=>n5(Io(k)))),p(e,["setup","tools"],B)}const T=d(t,["sessionResumption"]);e!==void 0&&T!=null&&p(e,["setup","sessionResumption"],t5(T));const v=d(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const _=d(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&p(e,["setup","outputAudioTranscription"],_);const b=d(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&p(e,["setup","realtimeInputConfig"],b);const M=d(t,["contextWindowCompression"]);e!==void 0&&M!=null&&p(e,["setup","contextWindowCompression"],M);const V=d(t,["proactivity"]);if(e!==void 0&&V!=null&&p(e,["setup","proactivity"],V),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function qD(t,e){const n={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],zD(r));const s=d(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=d(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=d(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=d(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=d(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const h=d(t,["seed"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","seed"],h);const m=d(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],Um(m));const g=d(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=d(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const E=d(t,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],un(E));const x=d(t,["tools"]);if(e!==void 0&&x!=null){let k=Co(x);Array.isArray(k)&&(k=k.map(N=>r5(Io(N)))),p(e,["setup","tools"],k)}const T=d(t,["sessionResumption"]);e!==void 0&&T!=null&&p(e,["setup","sessionResumption"],T);const v=d(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const _=d(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&p(e,["setup","outputAudioTranscription"],_);const b=d(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&p(e,["setup","realtimeInputConfig"],b);const M=d(t,["contextWindowCompression"]);e!==void 0&&M!=null&&p(e,["setup","contextWindowCompression"],M);const V=d(t,["proactivity"]);e!==void 0&&V!=null&&p(e,["setup","proactivity"],V);const B=d(t,["explicitVadSignal"]);return e!==void 0&&B!=null&&p(e,["setup","explicitVadSignal"],B),n}function WD(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["setup","model"],Xe(t,r));const s=d(e,["config"]);return s!=null&&p(n,["config"],$D(s,n)),n}function KD(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["setup","model"],Xe(t,r));const s=d(e,["config"]);return s!=null&&p(n,["config"],qD(s,n)),n}function JD(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function YD(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["weightedPrompts"],r)}return e}function QD(t){const e={},n=d(t,["media"]);if(n!=null){let c=lb(n);Array.isArray(c)&&(c=c.map(h=>bu(h))),p(e,["mediaChunks"],c)}const r=d(t,["audio"]);r!=null&&p(e,["audio"],bu(cb(r)));const s=d(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=d(t,["video"]);i!=null&&p(e,["video"],bu(ub(i)));const o=d(t,["text"]);o!=null&&p(e,["text"],o);const a=d(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=d(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function XD(t){const e={},n=d(t,["media"]);if(n!=null){let c=lb(n);Array.isArray(c)&&(c=c.map(h=>h)),p(e,["mediaChunks"],c)}const r=d(t,["audio"]);r!=null&&p(e,["audio"],cb(r));const s=d(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=d(t,["video"]);i!=null&&p(e,["video"],ub(i));const o=d(t,["text"]);o!=null&&p(e,["text"],o);const a=d(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=d(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function ZD(t){const e={},n=d(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const r=d(t,["serverContent"]);r!=null&&p(e,["serverContent"],r);const s=d(t,["toolCall"]);s!=null&&p(e,["toolCall"],s);const i=d(t,["toolCallCancellation"]);i!=null&&p(e,["toolCallCancellation"],i);const o=d(t,["usageMetadata"]);o!=null&&p(e,["usageMetadata"],s5(o));const a=d(t,["goAway"]);a!=null&&p(e,["goAway"],a);const l=d(t,["sessionResumptionUpdate"]);l!=null&&p(e,["sessionResumptionUpdate"],l);const c=d(t,["voiceActivityDetectionSignal"]);return c!=null&&p(e,["voiceActivityDetectionSignal"],c),e}function e5(t){const e={},n=d(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=d(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=d(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=d(t,["fileData"]);i!=null&&p(e,["fileData"],UD(i));const o=d(t,["functionCall"]);o!=null&&p(e,["functionCall"],BD(o));const a=d(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=d(t,["inlineData"]);l!=null&&p(e,["inlineData"],bu(l));const c=d(t,["text"]);c!=null&&p(e,["text"],c);const h=d(t,["thought"]);h!=null&&p(e,["thought"],h);const m=d(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=d(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function t5(t){const e={},n=d(t,["handle"]);if(n!=null&&p(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function n5(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),p(e,["functionDeclarations"],h)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=d(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=d(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=d(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],GD(a));const l=d(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],HD(l));const c=d(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function r5(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>OD(g))),p(e,["functionDeclarations"],m)}const r=d(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=d(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=d(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=d(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=d(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=d(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const c=d(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const h=d(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function s5(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const r=d(t,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const s=d(t,["candidatesTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const i=d(t,["toolUsePromptTokenCount"]);i!=null&&p(e,["toolUsePromptTokenCount"],i);const o=d(t,["thoughtsTokenCount"]);o!=null&&p(e,["thoughtsTokenCount"],o);const a=d(t,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);const l=d(t,["promptTokensDetails"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(E=>E)),p(e,["promptTokensDetails"],y)}const c=d(t,["cacheTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(E=>E)),p(e,["cacheTokensDetails"],y)}const h=d(t,["candidatesTokensDetails"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(E=>E)),p(e,["responseTokensDetails"],y)}const m=d(t,["toolUsePromptTokensDetails"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(E=>E)),p(e,["toolUsePromptTokensDetails"],y)}const g=d(t,["trafficType"]);return g!=null&&p(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i5(t){const e={},n=d(t,["data"]);if(n!=null&&p(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function o5(t){const e={},n=d(t,["content"]);n!=null&&p(e,["content"],n);const r=d(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],a5(r));const s=d(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=d(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=d(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=d(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const l=d(t,["index"]);l!=null&&p(e,["index"],l);const c=d(t,["logprobsResult"]);c!=null&&p(e,["logprobsResult"],c);const h=d(t,["safetyRatings"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=d(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function a5(t){const e={},n=d(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function l5(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["contents"]);if(s!=null){let i=Yn(s);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["contents"],i)}return n}function u5(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["tokensInfo"],s)}return e}function c5(t){const e={},n=d(t,["values"]);n!=null&&p(e,["values"],n);const r=d(t,["statistics"]);return r!=null&&p(e,["statistics"],d5(r)),e}function d5(t){const e={},n=d(t,["truncated"]);n!=null&&p(e,["truncated"],n);const r=d(t,["token_count"]);return r!=null&&p(e,["tokenCount"],r),e}function id(t){const e={},n=d(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>w3(i))),p(e,["parts"],s)}const r=d(t,["role"]);return r!=null&&p(e,["role"],r),e}function h5(t){const e={},n=d(t,["controlType"]);n!=null&&p(e,["controlType"],n);const r=d(t,["enableControlImageComputation"]);return r!=null&&p(e,["computeControl"],r),e}function f5(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function p5(t,e){const n={},r=d(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],un(r));const s=d(t,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>bb(a))),p(e,["tools"],o)}const i=d(t,["generationConfig"]);return e!==void 0&&i!=null&&p(e,["generationConfig"],i3(i)),n}function m5(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["contents"]);if(s!=null){let o=Yn(s);Array.isArray(o)&&(o=o.map(a=>id(a))),p(n,["contents"],o)}const i=d(e,["config"]);return i!=null&&f5(i),n}function g5(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["contents"]);if(s!=null){let o=Yn(s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const i=d(e,["config"]);return i!=null&&p5(i,n),n}function y5(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["totalTokens"]);r!=null&&p(e,["totalTokens"],r);const s=d(t,["cachedContentTokenCount"]);return s!=null&&p(e,["cachedContentTokenCount"],s),e}function v5(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["totalTokens"]);return r!=null&&p(e,["totalTokens"],r),e}function x5(t,e){const n={},r=d(e,["model"]);return r!=null&&p(n,["_url","name"],Xe(t,r)),n}function w5(t,e){const n={},r=d(e,["model"]);return r!=null&&p(n,["_url","name"],Xe(t,r)),n}function _5(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function E5(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function T5(t,e){const n={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=d(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=d(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=d(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=d(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const h=d(t,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const m=d(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=d(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=d(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const E=d(t,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const T=d(t,["addWatermark"]);e!==void 0&&T!=null&&p(e,["parameters","addWatermark"],T);const v=d(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const _=d(t,["editMode"]);e!==void 0&&_!=null&&p(e,["parameters","editMode"],_);const b=d(t,["baseSteps"]);return e!==void 0&&b!=null&&p(e,["parameters","editConfig","baseSteps"],b),n}function b5(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=d(e,["referenceImages"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>I3(l))),p(n,["instances[0]","referenceImages"],a)}const o=d(e,["config"]);return o!=null&&T5(o,n),n}function S5(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>od(i))),p(e,["generatedImages"],s)}return e}function I5(t,e){const n={},r=d(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=d(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=d(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function C5(t,e){const n={},r=d(t,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const s=d(t,["title"]);e!==void 0&&s!=null&&p(e,["instances[]","title"],s);const i=d(t,["outputDimensionality"]);e!==void 0&&i!=null&&p(e,["parameters","outputDimensionality"],i);const o=d(t,["mimeType"]);e!==void 0&&o!=null&&p(e,["instances[]","mimeType"],o);const a=d(t,["autoTruncate"]);return e!==void 0&&a!=null&&p(e,["parameters","autoTruncate"],a),n}function k5(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["contents"]);if(s!=null){let a=Vm(t,s);Array.isArray(a)&&(a=a.map(l=>l)),p(n,["requests[]","content"],a)}const i=d(e,["config"]);i!=null&&I5(i,n);const o=d(e,["model"]);return o!==void 0&&p(n,["requests[]","model"],Xe(t,o)),n}function A5(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["contents"]);if(s!=null){let o=Vm(t,s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["instances[]","content"],o)}const i=d(e,["config"]);return i!=null&&C5(i,n),n}function N5(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["embeddings"],i)}const s=d(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function R5(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>c5(o))),p(e,["embeddings"],i)}const s=d(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function P5(t){const e={},n=d(t,["endpoint"]);n!=null&&p(e,["name"],n);const r=d(t,["deployedModelId"]);return r!=null&&p(e,["deployedModelId"],r),e}function M5(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=d(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function D5(t){const e={},n=d(t,["id"]);n!=null&&p(e,["id"],n);const r=d(t,["args"]);r!=null&&p(e,["args"],r);const s=d(t,["name"]);if(s!=null&&p(e,["name"],s),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function L5(t){const e={},n=d(t,["mode"]);n!=null&&p(e,["mode"],n);const r=d(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function V5(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&p(e,["description"],n);const r=d(t,["name"]);r!=null&&p(e,["name"],r);const s=d(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=d(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=d(t,["response"]);o!=null&&p(e,["response"],o);const a=d(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function F5(t,e,n){const r={},s=d(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],id(un(s)));const i=d(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=d(e,["topP"]);o!=null&&p(r,["topP"],o);const a=d(e,["topK"]);a!=null&&p(r,["topK"],a);const l=d(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=d(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const h=d(e,["stopSequences"]);h!=null&&p(r,["stopSequences"],h);const m=d(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=d(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=d(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const E=d(e,["frequencyPenalty"]);E!=null&&p(r,["frequencyPenalty"],E);const x=d(e,["seed"]);x!=null&&p(r,["seed"],x);const T=d(e,["responseMimeType"]);T!=null&&p(r,["responseMimeType"],T);const v=d(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],Fm(v));const _=d(e,["responseJsonSchema"]);if(_!=null&&p(r,["responseJsonSchema"],_),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const b=d(e,["safetySettings"]);if(n!==void 0&&b!=null){let D=b;Array.isArray(D)&&(D=D.map(S=>C3(S))),p(n,["safetySettings"],D)}const M=d(e,["tools"]);if(n!==void 0&&M!=null){let D=Co(M);Array.isArray(D)&&(D=D.map(S=>D3(Io(S)))),p(n,["tools"],D)}const V=d(e,["toolConfig"]);if(n!==void 0&&V!=null&&p(n,["toolConfig"],M3(V)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=d(e,["cachedContent"]);n!==void 0&&B!=null&&p(n,["cachedContent"],Kr(t,B));const k=d(e,["responseModalities"]);k!=null&&p(r,["responseModalities"],k);const N=d(e,["mediaResolution"]);N!=null&&p(r,["mediaResolution"],N);const A=d(e,["speechConfig"]);if(A!=null&&p(r,["speechConfig"],jm(A)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=d(e,["thinkingConfig"]);P!=null&&p(r,["thinkingConfig"],P);const j=d(e,["imageConfig"]);j!=null&&p(r,["imageConfig"],c3(j));const R=d(e,["enableEnhancedCivicAnswers"]);return R!=null&&p(r,["enableEnhancedCivicAnswers"],R),r}function j5(t,e,n){const r={},s=d(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],un(s));const i=d(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=d(e,["topP"]);o!=null&&p(r,["topP"],o);const a=d(e,["topK"]);a!=null&&p(r,["topK"],a);const l=d(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const c=d(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const h=d(e,["stopSequences"]);h!=null&&p(r,["stopSequences"],h);const m=d(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=d(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=d(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const E=d(e,["frequencyPenalty"]);E!=null&&p(r,["frequencyPenalty"],E);const x=d(e,["seed"]);x!=null&&p(r,["seed"],x);const T=d(e,["responseMimeType"]);T!=null&&p(r,["responseMimeType"],T);const v=d(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],Fm(v));const _=d(e,["responseJsonSchema"]);_!=null&&p(r,["responseJsonSchema"],_);const b=d(e,["routingConfig"]);b!=null&&p(r,["routingConfig"],b);const M=d(e,["modelSelectionConfig"]);M!=null&&p(r,["modelConfig"],M);const V=d(e,["safetySettings"]);if(n!==void 0&&V!=null){let he=V;Array.isArray(he)&&(he=he.map(ne=>ne)),p(n,["safetySettings"],he)}const B=d(e,["tools"]);if(n!==void 0&&B!=null){let he=Co(B);Array.isArray(he)&&(he=he.map(ne=>bb(Io(ne)))),p(n,["tools"],he)}const k=d(e,["toolConfig"]);n!==void 0&&k!=null&&p(n,["toolConfig"],k);const N=d(e,["labels"]);n!==void 0&&N!=null&&p(n,["labels"],N);const A=d(e,["cachedContent"]);n!==void 0&&A!=null&&p(n,["cachedContent"],Kr(t,A));const P=d(e,["responseModalities"]);P!=null&&p(r,["responseModalities"],P);const j=d(e,["mediaResolution"]);j!=null&&p(r,["mediaResolution"],j);const R=d(e,["speechConfig"]);R!=null&&p(r,["speechConfig"],jm(R));const D=d(e,["audioTimestamp"]);D!=null&&p(r,["audioTimestamp"],D);const S=d(e,["thinkingConfig"]);S!=null&&p(r,["thinkingConfig"],S);const K=d(e,["imageConfig"]);if(K!=null&&p(r,["imageConfig"],d3(K)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function Zv(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["contents"]);if(s!=null){let o=Yn(s);Array.isArray(o)&&(o=o.map(a=>id(a))),p(n,["contents"],o)}const i=d(e,["config"]);return i!=null&&p(n,["generationConfig"],F5(t,i,n)),n}function ex(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["contents"]);if(s!=null){let o=Yn(s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const i=d(e,["config"]);return i!=null&&p(n,["generationConfig"],j5(t,i,n)),n}function tx(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>o5(c))),p(e,["candidates"],l)}const s=d(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=d(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=d(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=d(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function nx(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>h)),p(e,["candidates"],c)}const s=d(t,["createTime"]);s!=null&&p(e,["createTime"],s);const i=d(t,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const o=d(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=d(t,["responseId"]);a!=null&&p(e,["responseId"],a);const l=d(t,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function U5(t,e){const n={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=d(t,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const i=d(t,["guidanceScale"]);if(e!==void 0&&i!=null&&p(e,["parameters","guidanceScale"],i),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=d(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=d(t,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const l=d(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&p(e,["parameters","includeSafetyAttributes"],l);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&p(e,["parameters","includeRaiReason"],c);const h=d(t,["language"]);e!==void 0&&h!=null&&p(e,["parameters","language"],h);const m=d(t,["outputMimeType"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","mimeType"],m);const g=d(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=d(t,["imageSize"]);if(e!==void 0&&y!=null&&p(e,["parameters","sampleImageSize"],y),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function B5(t,e){const n={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=d(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=d(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=d(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=d(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const h=d(t,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const m=d(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=d(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=d(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const E=d(t,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const T=d(t,["addWatermark"]);e!==void 0&&T!=null&&p(e,["parameters","addWatermark"],T);const v=d(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const _=d(t,["imageSize"]);e!==void 0&&_!=null&&p(e,["parameters","sampleImageSize"],_);const b=d(t,["enhancePrompt"]);return e!==void 0&&b!=null&&p(e,["parameters","enhancePrompt"],b),n}function O5(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=d(e,["config"]);return i!=null&&U5(i,n),n}function z5(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=d(e,["config"]);return i!=null&&B5(i,n),n}function G5(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>t3(o))),p(e,["generatedImages"],i)}const s=d(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],Eb(s)),e}function H5(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>od(o))),p(e,["generatedImages"],i)}const s=d(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],Tb(s)),e}function $5(t,e){const n={},r=d(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=d(t,["durationSeconds"]);if(e!==void 0&&s!=null&&p(e,["parameters","durationSeconds"],s),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=d(t,["aspectRatio"]);e!==void 0&&i!=null&&p(e,["parameters","aspectRatio"],i);const o=d(t,["resolution"]);e!==void 0&&o!=null&&p(e,["parameters","resolution"],o);const a=d(t,["personGeneration"]);if(e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const c=d(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&p(e,["parameters","enhancePrompt"],c),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=d(t,["lastFrame"]);e!==void 0&&h!=null&&p(e,["instances[0]","lastFrame"],ad(h));const m=d(t,["referenceImages"]);if(e!==void 0&&m!=null){let g=m;Array.isArray(g)&&(g=g.map(y=>W3(y))),p(e,["instances[0]","referenceImages"],g)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function q5(t,e){const n={},r=d(t,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const i=d(t,["fps"]);e!==void 0&&i!=null&&p(e,["parameters","fps"],i);const o=d(t,["durationSeconds"]);e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o);const a=d(t,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const c=d(t,["resolution"]);e!==void 0&&c!=null&&p(e,["parameters","resolution"],c);const h=d(t,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const m=d(t,["pubsubTopic"]);e!==void 0&&m!=null&&p(e,["parameters","pubsubTopic"],m);const g=d(t,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const y=d(t,["enhancePrompt"]);e!==void 0&&y!=null&&p(e,["parameters","enhancePrompt"],y);const E=d(t,["generateAudio"]);e!==void 0&&E!=null&&p(e,["parameters","generateAudio"],E);const x=d(t,["lastFrame"]);e!==void 0&&x!=null&&p(e,["instances[0]","lastFrame"],fr(x));const T=d(t,["referenceImages"]);if(e!==void 0&&T!=null){let b=T;Array.isArray(b)&&(b=b.map(M=>K3(M))),p(e,["instances[0]","referenceImages"],b)}const v=d(t,["mask"]);e!==void 0&&v!=null&&p(e,["instances[0]","mask"],q3(v));const _=d(t,["compressionQuality"]);return e!==void 0&&_!=null&&p(e,["parameters","compressionQuality"],_),n}function W5(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const r=d(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(t,["done"]);s!=null&&p(e,["done"],s);const i=d(t,["error"]);i!=null&&p(e,["error"],i);const o=d(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],Q5(o)),e}function K5(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const r=d(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(t,["done"]);s!=null&&p(e,["done"],s);const i=d(t,["error"]);i!=null&&p(e,["error"],i);const o=d(t,["response"]);return o!=null&&p(e,["response"],X5(o)),e}function J5(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=d(e,["image"]);i!=null&&p(n,["instances[0]","image"],ad(i));const o=d(e,["video"]);o!=null&&p(n,["instances[0]","video"],Sb(o));const a=d(e,["source"]);a!=null&&Z5(a,n);const l=d(e,["config"]);return l!=null&&$5(l,n),n}function Y5(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=d(e,["image"]);i!=null&&p(n,["instances[0]","image"],fr(i));const o=d(e,["video"]);o!=null&&p(n,["instances[0]","video"],Ib(o));const a=d(e,["source"]);a!=null&&e3(a,n);const l=d(e,["config"]);return l!=null&&q5(l,n),n}function Q5(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>r3(o))),p(e,["generatedVideos"],i)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=d(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function X5(t){const e={},n=d(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>s3(o))),p(e,["generatedVideos"],i)}const r=d(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=d(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function Z5(t,e){const n={},r=d(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=d(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],ad(s));const i=d(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],Sb(i)),n}function e3(t,e){const n={},r=d(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=d(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],fr(s));const i=d(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],Ib(i)),n}function t3(t){const e={},n=d(t,["_self"]);n!=null&&p(e,["image"],h3(n));const r=d(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=d(t,["_self"]);return s!=null&&p(e,["safetyAttributes"],Eb(s)),e}function od(t){const e={},n=d(t,["_self"]);n!=null&&p(e,["image"],_b(n));const r=d(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=d(t,["_self"]);s!=null&&p(e,["safetyAttributes"],Tb(s));const i=d(t,["prompt"]);return i!=null&&p(e,["enhancedPrompt"],i),e}function n3(t){const e={},n=d(t,["_self"]);n!=null&&p(e,["mask"],_b(n));const r=d(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["labels"],s)}return e}function r3(t){const e={},n=d(t,["video"]);return n!=null&&p(e,["video"],H3(n)),e}function s3(t){const e={},n=d(t,["_self"]);return n!=null&&p(e,["video"],$3(n)),e}function i3(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=d(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=d(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=d(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=d(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=d(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const l=d(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const c=d(t,["maxOutputTokens"]);c!=null&&p(e,["maxOutputTokens"],c);const h=d(t,["mediaResolution"]);h!=null&&p(e,["mediaResolution"],h);const m=d(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=d(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=d(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const E=d(t,["responseModalities"]);E!=null&&p(e,["responseModalities"],E);const x=d(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const T=d(t,["routingConfig"]);T!=null&&p(e,["routingConfig"],T);const v=d(t,["seed"]);v!=null&&p(e,["seed"],v);const _=d(t,["speechConfig"]);_!=null&&p(e,["speechConfig"],_);const b=d(t,["stopSequences"]);b!=null&&p(e,["stopSequences"],b);const M=d(t,["temperature"]);M!=null&&p(e,["temperature"],M);const V=d(t,["thinkingConfig"]);V!=null&&p(e,["thinkingConfig"],V);const B=d(t,["topK"]);B!=null&&p(e,["topK"],B);const k=d(t,["topP"]);if(k!=null&&p(e,["topP"],k),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function o3(t,e){const n={},r=d(e,["model"]);return r!=null&&p(n,["_url","name"],Xe(t,r)),n}function a3(t,e){const n={},r=d(e,["model"]);return r!=null&&p(n,["_url","name"],Xe(t,r)),n}function l3(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function u3(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function c3(t){const e={},n=d(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=d(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function d3(t){const e={},n=d(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=d(t,["imageSize"]);r!=null&&p(e,["imageSize"],r);const s=d(t,["outputMimeType"]);s!=null&&p(e,["imageOutputOptions","mimeType"],s);const i=d(t,["outputCompressionQuality"]);return i!=null&&p(e,["imageOutputOptions","compressionQuality"],i),e}function h3(t){const e={},n=d(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],Ms(n));const r=d(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function _b(t){const e={},n=d(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=d(t,["bytesBase64Encoded"]);r!=null&&p(e,["imageBytes"],Ms(r));const s=d(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function ad(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],Ms(n));const r=d(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function fr(t){const e={},n=d(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=d(t,["imageBytes"]);r!=null&&p(e,["bytesBase64Encoded"],Ms(r));const s=d(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function f3(t,e,n){const r={},s=d(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=d(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=d(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=d(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],pb(t,a)),r}function p3(t,e,n){const r={},s=d(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=d(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=d(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=d(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],pb(t,a)),r}function m3(t,e){const n={},r=d(e,["config"]);return r!=null&&f3(t,r,n),n}function g3(t,e){const n={},r=d(e,["config"]);return r!=null&&p3(t,r,n),n}function y3(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(t,["_self"]);if(s!=null){let i=mb(s);Array.isArray(i)&&(i=i.map(o=>Pf(o))),p(e,["models"],i)}return e}function v3(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(t,["_self"]);if(s!=null){let i=mb(s);Array.isArray(i)&&(i=i.map(o=>Mf(o))),p(e,["models"],i)}return e}function x3(t){const e={},n=d(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const r=d(t,["segmentationClasses"]);r!=null&&p(e,["maskClasses"],r);const s=d(t,["maskDilation"]);return s!=null&&p(e,["dilation"],s),e}function Pf(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const r=d(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=d(t,["description"]);s!=null&&p(e,["description"],s);const i=d(t,["version"]);i!=null&&p(e,["version"],i);const o=d(t,["_self"]);o!=null&&p(e,["tunedModelInfo"],L3(o));const a=d(t,["inputTokenLimit"]);a!=null&&p(e,["inputTokenLimit"],a);const l=d(t,["outputTokenLimit"]);l!=null&&p(e,["outputTokenLimit"],l);const c=d(t,["supportedGenerationMethods"]);c!=null&&p(e,["supportedActions"],c);const h=d(t,["temperature"]);h!=null&&p(e,["temperature"],h);const m=d(t,["maxTemperature"]);m!=null&&p(e,["maxTemperature"],m);const g=d(t,["topP"]);g!=null&&p(e,["topP"],g);const y=d(t,["topK"]);y!=null&&p(e,["topK"],y);const E=d(t,["thinking"]);return E!=null&&p(e,["thinking"],E),e}function Mf(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const r=d(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=d(t,["description"]);s!=null&&p(e,["description"],s);const i=d(t,["versionId"]);i!=null&&p(e,["version"],i);const o=d(t,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>P5(g))),p(e,["endpoints"],m)}const a=d(t,["labels"]);a!=null&&p(e,["labels"],a);const l=d(t,["_self"]);l!=null&&p(e,["tunedModelInfo"],V3(l));const c=d(t,["defaultCheckpointId"]);c!=null&&p(e,["defaultCheckpointId"],c);const h=d(t,["checkpoints"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>g)),p(e,["checkpoints"],m)}return e}function w3(t){const e={},n=d(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=d(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=d(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=d(t,["fileData"]);i!=null&&p(e,["fileData"],M5(i));const o=d(t,["functionCall"]);o!=null&&p(e,["functionCall"],D5(o));const a=d(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=d(t,["inlineData"]);l!=null&&p(e,["inlineData"],i5(l));const c=d(t,["text"]);c!=null&&p(e,["text"],c);const h=d(t,["thought"]);h!=null&&p(e,["thought"],h);const m=d(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=d(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function _3(t){const e={},n=d(t,["productImage"]);return n!=null&&p(e,["image"],fr(n)),e}function E3(t,e){const n={},r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=d(t,["baseSteps"]);e!==void 0&&s!=null&&p(e,["parameters","baseSteps"],s);const i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=d(t,["seed"]);e!==void 0&&o!=null&&p(e,["parameters","seed"],o);const a=d(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const l=d(t,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const c=d(t,["addWatermark"]);e!==void 0&&c!=null&&p(e,["parameters","addWatermark"],c);const h=d(t,["outputMimeType"]);e!==void 0&&h!=null&&p(e,["parameters","outputOptions","mimeType"],h);const m=d(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const g=d(t,["enhancePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","enhancePrompt"],g);const y=d(t,["labels"]);return e!==void 0&&y!=null&&p(e,["labels"],y),n}function T3(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["source"]);s!=null&&S3(s,n);const i=d(e,["config"]);return i!=null&&E3(i,n),n}function b3(t){const e={},n=d(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>od(s))),p(e,["generatedImages"],r)}return e}function S3(t,e){const n={},r=d(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=d(t,["personImage"]);e!==void 0&&s!=null&&p(e,["instances[0]","personImage","image"],fr(s));const i=d(t,["productImages"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>_3(a))),p(e,["instances[0]","productImages"],o)}return n}function I3(t){const e={},n=d(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],fr(n));const r=d(t,["referenceId"]);r!=null&&p(e,["referenceId"],r);const s=d(t,["referenceType"]);s!=null&&p(e,["referenceType"],s);const i=d(t,["maskImageConfig"]);i!=null&&p(e,["maskImageConfig"],x3(i));const o=d(t,["controlImageConfig"]);o!=null&&p(e,["controlImageConfig"],h5(o));const a=d(t,["styleImageConfig"]);a!=null&&p(e,["styleImageConfig"],a);const l=d(t,["subjectImageConfig"]);return l!=null&&p(e,["subjectImageConfig"],l),e}function Eb(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=d(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=d(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function Tb(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=d(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=d(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function C3(t){const e={},n=d(t,["category"]);if(n!=null&&p(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function k3(t){const e={},n=d(t,["image"]);return n!=null&&p(e,["image"],fr(n)),e}function A3(t,e){const n={},r=d(t,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const s=d(t,["maxPredictions"]);e!==void 0&&s!=null&&p(e,["parameters","maxPredictions"],s);const i=d(t,["confidenceThreshold"]);e!==void 0&&i!=null&&p(e,["parameters","confidenceThreshold"],i);const o=d(t,["maskDilation"]);e!==void 0&&o!=null&&p(e,["parameters","maskDilation"],o);const a=d(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","binaryColorThreshold"],a);const l=d(t,["labels"]);return e!==void 0&&l!=null&&p(e,["labels"],l),n}function N3(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["source"]);s!=null&&P3(s,n);const i=d(e,["config"]);return i!=null&&A3(i,n),n}function R3(t){const e={},n=d(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>n3(s))),p(e,["generatedMasks"],r)}return e}function P3(t,e){const n={},r=d(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=d(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],fr(s));const i=d(t,["scribbleImage"]);return e!==void 0&&i!=null&&p(e,["instances[0]","scribble"],k3(i)),n}function M3(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],L5(n));const r=d(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function D3(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),p(e,["functionDeclarations"],h)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=d(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=d(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=d(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],l3(a));const l=d(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],u3(l));const c=d(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function bb(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>V5(g))),p(e,["functionDeclarations"],m)}const r=d(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=d(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=d(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=d(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=d(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=d(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const c=d(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const h=d(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function L3(t){const e={},n=d(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const r=d(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=d(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function V3(t){const e={},n=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const r=d(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=d(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function F3(t,e){const n={},r=d(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=d(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=d(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function j3(t,e){const n={},r=d(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=d(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=d(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function U3(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","name"],Xe(t,r));const s=d(e,["config"]);return s!=null&&F3(s,n),n}function B3(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["config"]);return s!=null&&j3(s,n),n}function O3(t,e){const n={},r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=d(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&p(e,["parameters","safetySetting"],s);const i=d(t,["personGeneration"]);e!==void 0&&i!=null&&p(e,["parameters","personGeneration"],i);const o=d(t,["includeRaiReason"]);e!==void 0&&o!=null&&p(e,["parameters","includeRaiReason"],o);const a=d(t,["outputMimeType"]);e!==void 0&&a!=null&&p(e,["parameters","outputOptions","mimeType"],a);const l=d(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&p(e,["parameters","outputOptions","compressionQuality"],l);const c=d(t,["enhanceInputImage"]);e!==void 0&&c!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],c);const h=d(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const m=d(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=d(t,["numberOfImages"]);e!==void 0&&g!=null&&p(e,["parameters","sampleCount"],g);const y=d(t,["mode"]);return e!==void 0&&y!=null&&p(e,["parameters","mode"],y),n}function z3(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["_url","model"],Xe(t,r));const s=d(e,["image"]);s!=null&&p(n,["instances[0]","image"],fr(s));const i=d(e,["upscaleFactor"]);i!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],i);const o=d(e,["config"]);return o!=null&&O3(o,n),n}function G3(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>od(i))),p(e,["generatedImages"],s)}return e}function H3(t){const e={},n=d(t,["uri"]);n!=null&&p(e,["uri"],n);const r=d(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],Ms(r));const s=d(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function $3(t){const e={},n=d(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=d(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],Ms(r));const s=d(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function q3(t){const e={},n=d(t,["image"]);n!=null&&p(e,["_self"],fr(n));const r=d(t,["maskMode"]);return r!=null&&p(e,["maskMode"],r),e}function W3(t){const e={},n=d(t,["image"]);n!=null&&p(e,["image"],ad(n));const r=d(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function K3(t){const e={},n=d(t,["image"]);n!=null&&p(e,["image"],fr(n));const r=d(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function Sb(t){const e={},n=d(t,["uri"]);n!=null&&p(e,["uri"],n);const r=d(t,["videoBytes"]);r!=null&&p(e,["encodedVideo"],Ms(r));const s=d(t,["mimeType"]);return s!=null&&p(e,["encoding"],s),e}function Ib(t){const e={},n=d(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const r=d(t,["videoBytes"]);r!=null&&p(e,["bytesBase64Encoded"],Ms(r));const s=d(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J3(t,e){const n={},r=d(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["displayName"],r),n}function Y3(t){const e={},n=d(t,["config"]);return n!=null&&J3(n,e),e}function Q3(t,e){const n={},r=d(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function X3(t){const e={},n=d(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=d(t,["config"]);return r!=null&&Q3(r,e),e}function Z3(t){const e={},n=d(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function eL(t,e){const n={},r=d(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["customMetadata"],i)}const s=d(t,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),n}function tL(t){const e={},n=d(t,["name"]);n!=null&&p(e,["name"],n);const r=d(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(t,["done"]);s!=null&&p(e,["done"],s);const i=d(t,["error"]);i!=null&&p(e,["error"],i);const o=d(t,["response"]);return o!=null&&p(e,["response"],rL(o)),e}function nL(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=d(t,["fileName"]);r!=null&&p(e,["fileName"],r);const s=d(t,["config"]);return s!=null&&eL(s,e),e}function rL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["parent"]);r!=null&&p(e,["parent"],r);const s=d(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function sL(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function iL(t){const e={},n=d(t,["config"]);return n!=null&&sL(n,e),e}function oL(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(t,["fileSearchStores"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["fileSearchStores"],i)}return e}function Cb(t,e){const n={},r=d(t,["mimeType"]);e!==void 0&&r!=null&&p(e,["mimeType"],r);const s=d(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const i=d(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["customMetadata"],a)}const o=d(t,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),n}function aL(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=d(t,["config"]);return r!=null&&Cb(r,e),e}function lL(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uL="Content-Type",cL="X-Server-Timeout",dL="User-Agent",Df="x-goog-api-client",hL="1.34.0",fL=`google-genai-sdk/${hL}`,pL="v1beta1",mL="v1beta";class gL{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:pL,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:mL,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.unaryApiCall(s,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,i]of Object.entries(n))typeof i=="object"?r[s]=Object.assign(Object.assign({},r[s]),i):i!==void 0&&(r[s]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.streamApiCall(s,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>i.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}s&&s.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&yL(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await rx(s),new Af(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await rx(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return ur(this,arguments,function*(){var r;const s=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:h}=yield Pe(s.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(h,{stream:!0});try{const E=JSON.parse(m);if("error"in E){const x=JSON.parse(JSON.stringify(E.error)),T=x.status,v=x.code,_=`got status: ${T}. ${JSON.stringify(E)}`;if(v>=400&&v<600)throw new sd({message:_,status:v})}}catch(E){if(E.name==="ApiError")throw E}o+=m;let g=-1,y=0;for(;;){g=-1,y=0;for(const T of l){const v=o.indexOf(T);v!==-1&&(g===-1||v<g)&&(g=v,y=T.length)}if(g===-1)break;const E=o.substring(0,g);o=o.substring(g+y);const x=E.trim();if(x.startsWith(a)){const T=x.substring(a.length).trim();try{const v=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Pe(new Af(v))}catch(v){throw new Error(`exception parsing stream chunk ${T}. ${v}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=fL+" "+this.clientOptions.userAgentExtra;return e[dL]=n,e[Df]=n,e[uL]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,i]of Object.entries(e.headers))r.append(s,i);e.timeout&&e.timeout>0&&r.append(cL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);s.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l={file:s},c=this.getFileName(e),h=xe("upload/v1beta/files",l._url),m=await this.fetchUploadUrl(h,s.sizeBytes,s.mimeType,c,l,n==null?void 0:n.httpOptions);return i.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var s;const i=this.clientOptions.uploader,o=await i.stat(n),a=String(o.size),l=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),m={};r!=null&&Cb(r,m);const g=await this.fetchUploadUrl(c,a,l,h,m,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,i,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const c=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function rx(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new sd({message:s,status:n}):new Error(s)}}function yL(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,o){const a=Object.assign({},i);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],h=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&h&&typeof h=="object"&&!Array.isArray(h)?a[l]=r(h,c):(h&&c&&typeof h!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof h}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vL="mcp_used/unknown";let xL=!1;function kb(t){for(const e of t)if(wL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return xL}function Ab(t){var e;const n=(e=t[Df])!==null&&e!==void 0?e:"";t[Df]=(n+` ${vL}`).trimStart()}function wL(t){return t!==null&&typeof t=="object"&&t instanceof Bm}function _L(t){return ur(this,arguments,function*(n,r=100){let s,i=0;for(;i<r;){const o=yield Pe(n.listTools({cursor:s}));for(const a of o.tools)yield yield Pe(a),i++;if(!o.nextCursor)break;s=o.nextCursor}})}class Bm{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Bm(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const i={},o=[];for(const h of this.mcpClients)try{for(var a=!0,l=(n=void 0,cr(_L(h))),c;c=await l.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const m=s;o.push(m);const g=m.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=h}}catch(m){n={error:m}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),Z4(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await s.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function EL(t,e,n){const r=new $4;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class TL{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=IL(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const h=new Promise(b=>{c=b}),m=e.callbacks,g=function(){c({})},y=this.apiClient,E={onopen:g,onmessage:b=>{EL(y,m.onmessage,b)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(b){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(b){}},x=this.webSocketFactory.create(l,SL(o),E);x.connect(),await h;const _={setup:{model:Xe(this.apiClient,e.model)}};return x.send(JSON.stringify(_)),new bL(x,this.apiClient)}}class bL{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=YD(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=JD(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Bi.PLAY)}pause(){this.sendPlaybackControl(Bi.PAUSE)}stop(){this.sendPlaybackControl(Bi.STOP)}resetContext(){this.sendPlaybackControl(Bi.RESET_CONTEXT)}close(){this.conn.close()}}function SL(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function IL(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function kL(t,e,n){const r=new H4;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const i=JSON.parse(s);if(t.isVertexAI()){const o=ZD(i);Object.assign(r,o)}else Object.assign(r,i);e(r)}class AL{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new TL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,i,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let h;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&kb(e.config.tools)&&Ab(m);const g=ML(m);if(this.apiClient.isVertexAI())h=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,h);else{const A=this.apiClient.getApiKey();let P="BidiGenerateContent",j="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",j="access_token"),h=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${P}?${j}=${A}`}let y=()=>{};const E=new Promise(A=>{y=A}),x=e.callbacks,T=function(){var A;(A=x==null?void 0:x.onopen)===null||A===void 0||A.call(x),y({})},v=this.apiClient,_={onopen:T,onmessage:A=>{kL(v,x.onmessage,A)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(A){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(A){}},b=this.webSocketFactory.create(h,PL(g),_);b.connect(),await E;let M=Xe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){const A=this.apiClient.getProject(),P=this.apiClient.getLocation();M=`projects/${A}/locations/${P}/`+M}let V={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[dc.AUDIO]}:e.config.responseModalities=[dc.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const B=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],k=[];for(const A of B)if(this.isCallableTool(A)){const P=A;k.push(await P.tool())}else k.push(A);k.length>0&&(e.config.tools=k);const N={model:M,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=KD(this.apiClient,N):V=WD(this.apiClient,N),delete V.config,b.send(JSON.stringify(V)),new RL(b,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const NL={turnComplete:!0};class RL{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Yn(n.turns),e.isVertexAI()||(r=r.map(s=>id(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(CL)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},NL),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:XD(e)}:n={realtimeInput:QD(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function PL(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function ML(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sx=10;function ix(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Qi(o)){s=!0;break}if(!s)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Qi(t){return"callTool"in t&&typeof t.callTool=="function"}function DL(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Qi(s)))!==null&&r!==void 0?r:!1}function ox(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(Qi(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(s)}),n}function ax(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LL extends Wr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,i,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!DL(n)||ix(n.config))return await this.generateContentInternal(l);const c=ox(n);if(c.length>0){const x=c.map(T=>`tools[${T}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let h,m;const g=Yn(l.contents),y=(i=(s=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:sx;let E=0;for(;E<y&&(h=await this.generateContentInternal(l),!(!h.functionCalls||h.functionCalls.length===0));){const x=h.candidates[0].content,T=[];for(const v of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Qi(v)){const b=await v.callTool(h.functionCalls);T.push(...b)}E++,m={role:"user",parts:T},l.contents=Yn(l.contents),l.contents.push(x),l.contents.push(m),ax(l.config)&&(g.push(x),g.push(m))}return ax(l.config)&&(h.automaticFunctionCallingHistory=g),h},this.generateContentStream=async n=>{var r,s,i,o,a;if(this.maybeMoveToResponseJsonSchem(n),ix(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const l=ox(n);if(l.length>0){const m=l.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(i=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,h=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let i;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?i=l==null?void 0:l.safetyAttributes:o.push(l);let a;return i?a={generatedImages:o,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new mi(Hr.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,i,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(i=n.source)===null||i===void 0?void 0:i.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const o=await Promise.all(i.map(async l=>Qi(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&kb(e.config.tools)){const l=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Ab(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,s;const i=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Qi(o)){const a=o,l=await a.tool();for(const c of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,a)}}return i}async processAfcStream(e){var n,r,s;const i=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:sx;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,h,m){return ur(this,arguments,function*(){for(var g,y,E,x,T,v;a<i;){o&&(a++,o=!1);const V=yield Pe(c.processParamsMaybeAddMcpUsage(m)),B=yield Pe(c.generateContentStreamInternal(V)),k=[],N=[];try{for(var _=!0,b=(y=void 0,cr(B)),M;M=yield Pe(b.next()),g=M.done,!g;_=!0){x=M.value,_=!1;const A=x;if(yield yield Pe(A),A.candidates&&(!((T=A.candidates[0])===null||T===void 0)&&T.content)){N.push(A.candidates[0].content);for(const P of(v=A.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<i&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(P.functionCall.name)){const j=yield Pe(h.get(P.functionCall.name).callTool([P.functionCall]));k.push(...j)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(A){y={error:A}}finally{try{!_&&!g&&(E=b.return)&&(yield Pe(E.call(b)))}finally{if(y)throw y.error}}if(k.length>0){o=!0;const A=new Jo;A.candidates=[{content:{role:"user",parts:k}}],yield yield Pe(A);const P=[];P.push(...N),P.push({role:"user",parts:k});const j=Yn(m.contents).concat(P);m.contents=j}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=ex(this.apiClient,e);return a=xe("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=nx(h),g=new Jo;return Object.assign(g,m),g})}else{const c=Zv(this.apiClient,e);return a=xe("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=tx(h),g=new Jo;return Object.assign(g,m),g})}}async generateContentStreamInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=ex(this.apiClient,e);return a=xe("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return ur(this,arguments,function*(){var g,y,E,x;try{for(var T=!0,v=cr(m),_;_=yield Pe(v.next()),g=_.done,!g;T=!0){x=_.value,T=!1;const b=x,M=nx(yield Pe(b.json()));M.sdkHttpResponse={headers:b.headers};const V=new Jo;Object.assign(V,M),yield yield Pe(V)}}catch(b){y={error:b}}finally{try{!T&&!g&&(E=v.return)&&(yield Pe(E.call(v)))}finally{if(y)throw y.error}}})})}else{const c=Zv(this.apiClient,e);return a=xe("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(m){return ur(this,arguments,function*(){var g,y,E,x;try{for(var T=!0,v=cr(m),_;_=yield Pe(v.next()),g=_.done,!g;T=!0){x=_.value,T=!1;const b=x,M=tx(yield Pe(b.json()));M.sdkHttpResponse={headers:b.headers};const V=new Jo;Object.assign(V,M),yield yield Pe(V)}}catch(b){y={error:b}}finally{try{!T&&!g&&(E=v.return)&&(yield Pe(E.call(v)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=A5(this.apiClient,e);return a=xe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=R5(h),g=new Vv;return Object.assign(g,m),g})}else{const c=k5(this.apiClient,e);return a=xe("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=N5(h),g=new Vv;return Object.assign(g,m),g})}}async generateImagesInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=z5(this.apiClient,e);return a=xe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=H5(h),g=new Fv;return Object.assign(g,m),g})}else{const c=O5(this.apiClient,e);return a=xe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=G5(h),g=new Fv;return Object.assign(g,m),g})}}async editImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=b5(this.apiClient,e);return i=xe("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const c=S5(l),h=new M4;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=z3(this.apiClient,e);return i=xe("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const c=G3(l),h=new D4;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=T3(this.apiClient,e);return i=xe("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=b3(l),h=new L4;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=N3(this.apiClient,e);return i=xe("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=R3(l),h=new V4;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=a3(this.apiClient,e);return a=xe("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Mf(h))}else{const c=o3(this.apiClient,e);return a=xe("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>Pf(h))}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=g3(this.apiClient,e);return a=xe("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=v3(h),g=new jv;return Object.assign(g,m),g})}else{const c=m3(this.apiClient,e);return a=xe("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=y3(h),g=new jv;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=B3(this.apiClient,e);return a=xe("{model}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Mf(h))}else{const c=U3(this.apiClient,e);return a=xe("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>Pf(h))}}async delete(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=w5(this.apiClient,e);return a=xe("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=E5(h),g=new Uv;return Object.assign(g,m),g})}else{const c=x5(this.apiClient,e);return a=xe("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=_5(h),g=new Uv;return Object.assign(g,m),g})}}async countTokens(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=g5(this.apiClient,e);return a=xe("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=v5(h),g=new Bv;return Object.assign(g,m),g})}else{const c=m5(this.apiClient,e);return a=xe("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=y5(h),g=new Bv;return Object.assign(g,m),g})}}async computeTokens(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=l5(this.apiClient,e);return i=xe("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const c=u5(l),h=new F4;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Y5(this.apiClient,e);return a=xe("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>{const m=K5(h),g=new hc;return Object.assign(g,m),g})}else{const c=J5(this.apiClient,e);return a=xe("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const m=W5(h),g=new hc;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VL extends Wr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=C4(e);return a=xe("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o}else{const c=I4(e);return a=xe("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=x4(e);return i=xe("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FL(t){const e={},n=d(t,["data"]);if(n!=null&&p(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function jL(t){const e={},n=d(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>WL(i))),p(e,["parts"],s)}const r=d(t,["role"]);return r!=null&&p(e,["role"],r),e}function UL(t,e,n){const r={},s=d(e,["expireTime"]);n!==void 0&&s!=null&&p(n,["expireTime"],s);const i=d(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&p(n,["newSessionExpireTime"],i);const o=d(e,["uses"]);n!==void 0&&o!=null&&p(n,["uses"],o);const a=d(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&p(n,["bidiGenerateContentSetup"],qL(t,a));const l=d(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&p(n,["fieldMask"],l),r}function BL(t,e){const n={},r=d(e,["config"]);return r!=null&&p(n,["config"],UL(t,r,n)),n}function OL(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=d(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function zL(t){const e={},n=d(t,["id"]);n!=null&&p(e,["id"],n);const r=d(t,["args"]);r!=null&&p(e,["args"],r);const s=d(t,["name"]);if(s!=null&&p(e,["name"],s),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function GL(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function HL(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function $L(t,e){const n={},r=d(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=d(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=d(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=d(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=d(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=d(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const h=d(t,["seed"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","seed"],h);const m=d(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],Um(m));const g=d(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=d(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const E=d(t,["systemInstruction"]);e!==void 0&&E!=null&&p(e,["setup","systemInstruction"],jL(un(E)));const x=d(t,["tools"]);if(e!==void 0&&x!=null){let B=Co(x);Array.isArray(B)&&(B=B.map(k=>JL(Io(k)))),p(e,["setup","tools"],B)}const T=d(t,["sessionResumption"]);e!==void 0&&T!=null&&p(e,["setup","sessionResumption"],KL(T));const v=d(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const _=d(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&p(e,["setup","outputAudioTranscription"],_);const b=d(t,["realtimeInputConfig"]);e!==void 0&&b!=null&&p(e,["setup","realtimeInputConfig"],b);const M=d(t,["contextWindowCompression"]);e!==void 0&&M!=null&&p(e,["setup","contextWindowCompression"],M);const V=d(t,["proactivity"]);if(e!==void 0&&V!=null&&p(e,["setup","proactivity"],V),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function qL(t,e){const n={},r=d(e,["model"]);r!=null&&p(n,["setup","model"],Xe(t,r));const s=d(e,["config"]);return s!=null&&p(n,["config"],$L(s,n)),n}function WL(t){const e={},n=d(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=d(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=d(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=d(t,["fileData"]);i!=null&&p(e,["fileData"],OL(i));const o=d(t,["functionCall"]);o!=null&&p(e,["functionCall"],zL(o));const a=d(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=d(t,["inlineData"]);l!=null&&p(e,["inlineData"],FL(l));const c=d(t,["text"]);c!=null&&p(e,["text"],c);const h=d(t,["thought"]);h!=null&&p(e,["thought"],h);const m=d(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=d(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function KL(t){const e={},n=d(t,["handle"]);if(n!=null&&p(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function JL(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),p(e,["functionDeclarations"],h)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=d(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=d(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=d(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=d(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],GL(a));const l=d(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],HL(l));const c=d(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YL(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(i=>`${n}.${i}`);e.push(...s)}else e.push(n)}return e.join(",")}function QL(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const i=YL(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];i&&l.push(i),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class XL extends Wr{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=BL(this.apiClient,e);i=xe("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=QL(a,e.config);return s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZL(t,e){const n={},r=d(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function eV(t){const e={},n=d(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=d(t,["config"]);return r!=null&&ZL(r,e),e}function tV(t){const e={},n=d(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function nV(t,e){const n={},r=d(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function rV(t){const e={},n=d(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const r=d(t,["config"]);return r!=null&&nV(r,e),e}function sV(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=d(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(t,["documents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iV extends Wr{constructor(e){super(),this.apiClient=e,this.list=async n=>new mi(Hr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=tV(e);return i=xe("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=eV(e);s=xe("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=rV(e);return i=xe("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=sV(l),h=new j4;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oV extends Wr{constructor(e,n=new iV(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new mi(Hr.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Y3(e);return i=xe("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Z3(e);return i=xe("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=X3(e);s=xe("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=iL(e);return i=xe("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=oL(l),h=new U4;return Object.assign(h,c),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=aL(e);return i=xe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=lL(l),h=new B4;return Object.assign(h,c),h})}}async importFile(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=nL(e);return i=xe("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),s.then(l=>{const c=tL(l),h=new Dm;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Nb=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Nb=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const aV=()=>Nb();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lf(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Vf=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zn extends Error{}class xn extends Zn{constructor(e,n,r,s){super(`${xn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new ld({message:r,cause:Vf(n)});const i=n;return e===400?new Pb(e,i,r,s):e===401?new Mb(e,i,r,s):e===403?new Db(e,i,r,s):e===404?new Lb(e,i,r,s):e===409?new Vb(e,i,r,s):e===422?new Fb(e,i,r,s):e===429?new jb(e,i,r,s):e>=500?new Ub(e,i,r,s):new xn(e,i,r,s)}}class Ff extends xn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ld extends xn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Rb extends ld{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Pb extends xn{}class Mb extends xn{}class Db extends xn{}class Lb extends xn{}class Vb extends xn{}class Fb extends xn{}class jb extends xn{}class Ub extends xn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lV=/^[a-z][a-z0-9+.-]*:/i,uV=t=>lV.test(t);let jf=t=>(jf=Array.isArray,jf(t));const cV=jf;let dV=cV;const lx=dV;function hV(t){if(!t)return!0;for(const e in t)return!1;return!0}function fV(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const pV=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Zn(`${t} must be an integer`);if(e<0)throw new Zn(`${t} must be a positive integer`);return e},mV=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gV=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ci="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yV(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const vV=()=>{var t,e,n,r,s;const i=yV();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ci,"X-Stainless-OS":cx(Deno.build.os),"X-Stainless-Arch":ux(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ci,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ci,"X-Stainless-OS":cx((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":ux((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const o=xV();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ci,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ci,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function xV(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const ux=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",cx=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Zl;const wV=()=>Zl??(Zl=vV());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _V(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Bb(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function EV(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Bb({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Ob(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function TV(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),s=r.cancel();r.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bV=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zb=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function oh(t,e,n){return zb(),new File(t,e??"unknown_file",n)}function SV(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const IV=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gb=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",CV=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Gb(t),kV=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function AV(t,e,n){if(zb(),t=await t,CV(t))return t instanceof File?t:oh([await t.arrayBuffer()],t.name);if(kV(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),oh(await Uf(s),e,n)}const r=await Uf(t);if(e||(e=SV(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return oh(r,e,n)}async function Uf(t){var e,n,r,s,i;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(Gb(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(IV(t))try{for(var a=!0,l=cr(t),c;c=await l.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const h=s;o.push(...await Uf(h))}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const h=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${h?`; constructor: ${h}`:""}${NV(t)}`)}return o}function NV(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hb{constructor(e){this._client=e}}Hb._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $b(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const dx=Object.freeze(Object.create(null)),RV=(t=$b)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],o=n.reduce((h,m,g)=>{var y,E,x;/[?#]/.test(m)&&(s=!0);const T=r[g];let v=(s?encodeURIComponent:t)(""+T);return g!==r.length&&(T==null||typeof T=="object"&&T.toString===((x=Object.getPrototypeOf((E=Object.getPrototypeOf((y=T.hasOwnProperty)!==null&&y!==void 0?y:dx))!==null&&E!==void 0?E:dx))===null||x===void 0?void 0:x.toString))&&(v=T+"",i.push({start:h.length+m.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(T).slice(8,-1)} is not a valid path parameter`})),h+m+(g===r.length?"":v)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((h,m)=>h.start-m.start),i.length>0){let h=0;const m=i.reduce((g,y)=>{const E=" ".repeat(y.start-h),x="^".repeat(y.length);return h=y.start+y.length,g+E+x},"");throw new Zn(`Path parameters result in path with invalid segments:
${i.map(g=>g.error).join(`
`)}
${o}
${m}`)}return o},eu=RV($b);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qb extends Hb{create(e,n){var r;const{api_version:s=this._client.apiVersion}=e,i=pc(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new Zn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new Zn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(eu`/${s}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(eu`/${s}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(eu`/${s}/interactions/${e}/cancel`,r)}get(e,n={},r){var s;const i=n??{},{api_version:o=this._client.apiVersion}=i,a=pc(i,["api_version"]);return this._client.get(eu`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}qb._key=Object.freeze(["interactions"]);class Wb extends qb{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PV(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let tu;function Om(t){let e;return(tu??(e=new globalThis.TextEncoder,tu=e.encode.bind(e)))(t)}let nu;function hx(t){let e;return(nu??(e=new globalThis.TextDecoder,nu=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ud{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Om(e):e;this.buffer=PV([this.buffer,n]);const r=[];let s;for(;(s=MV(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(hx(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,o=hx(this.buffer.subarray(0,i));r.push(o),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}ud.NEWLINE_CHARS=new Set([`
`,"\r"]);ud.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function MV(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function DV(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mc={off:0,error:200,warn:300,info:400,debug:500},fx=(t,e,n)=>{if(t){if(fV(mc,t))return t;fn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(mc))}`)}};function ia(){}function ru(t,e,n){return!e||mc[t]>mc[n]?ia:e[t].bind(e)}const LV={error:ia,warn:ia,info:ia,debug:ia};let px=new WeakMap;function fn(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return LV;const s=px.get(n);if(s&&s[0]===r)return s[1];const i={error:ru("error",n,r),warn:ru("warn",n,r),info:ru("info",n,r),debug:ru("debug",n,r)};return px.set(n,[r,i]),i}const Hs=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oi{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let s=!1;const i=r?fn(r):console;function o(){return ur(this,arguments,function*(){var l,c,h,m;if(s)throw new Zn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,E=cr(VV(e,n)),x;x=yield Pe(E.next()),l=x.done,!l;y=!0){m=x.value,y=!1;const T=m;if(!g)if(T.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield Pe(JSON.parse(T.data))}catch(v){throw i.error("Could not parse message into JSON:",T.data),i.error("From chunk:",T.raw),v}}}catch(T){c={error:T}}finally{try{!y&&!l&&(h=E.return)&&(yield Pe(h.call(E)))}finally{if(c)throw c.error}}g=!0}catch(T){if(Lf(T))return yield Pe(void 0);throw T}finally{g||n.abort()}})}return new Oi(o,n,r)}static fromReadableStream(e,n,r){let s=!1;function i(){return ur(this,arguments,function*(){var l,c,h,m;const g=new ud,y=Ob(e);try{for(var E=!0,x=cr(y),T;T=yield Pe(x.next()),l=T.done,!l;E=!0){m=T.value,E=!1;const v=m;for(const _ of g.decode(v))yield yield Pe(_)}}catch(v){c={error:v}}finally{try{!E&&!l&&(h=x.return)&&(yield Pe(h.call(x)))}finally{if(c)throw c.error}}for(const v of g.flush())yield yield Pe(v)})}function o(){return ur(this,arguments,function*(){var l,c,h,m;if(s)throw new Zn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,E=cr(i()),x;x=yield Pe(E.next()),l=x.done,!l;y=!0){m=x.value,y=!1;const T=m;g||T&&(yield yield Pe(JSON.parse(T)))}}catch(T){c={error:T}}finally{try{!y&&!l&&(h=E.return)&&(yield Pe(h.call(E)))}finally{if(c)throw c.error}}g=!0}catch(T){if(Lf(T))return yield Pe(void 0);throw T}finally{g||n.abort()}})}return new Oi(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=r.next();e.push(o),n.push(o)}return i.shift()}});return[new Oi(()=>s(e),this.controller,this.client),new Oi(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Bb({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const o=Om(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function VV(t,e){return ur(this,arguments,function*(){var r,s,i,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Zn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Zn("Attempted to iterate over a response with no body");const a=new jV,l=new ud,c=Ob(t.body);try{for(var h=!0,m=cr(FV(c)),g;g=yield Pe(m.next()),r=g.done,!r;h=!0){o=g.value,h=!1;const y=o;for(const E of l.decode(y)){const x=a.decode(E);x&&(yield yield Pe(x))}}}catch(y){s={error:y}}finally{try{!h&&!r&&(i=m.return)&&(yield Pe(i.call(m)))}finally{if(s)throw s.error}}for(const y of l.flush()){const E=a.decode(y);E&&(yield yield Pe(E))}})}function FV(t){return ur(this,arguments,function*(){var n,r,s,i;let o=new Uint8Array;try{for(var a=!0,l=cr(t),c;c=yield Pe(l.next()),n=c.done,!n;a=!0){i=c.value,a=!1;const h=i;if(h==null)continue;const m=h instanceof ArrayBuffer?new Uint8Array(h):typeof h=="string"?Om(h):h;let g=new Uint8Array(o.length+m.length);g.set(o),g.set(m,o.length),o=g;let y;for(;(y=DV(o))!==-1;)yield yield Pe(o.slice(0,y)),o=o.slice(y)}}catch(h){r={error:h}}finally{try{!a&&!n&&(s=l.return)&&(yield Pe(s.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield Pe(o))})}class jV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=UV(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function UV(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function BV(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,o=await(async()=>{var a;if(e.options.stream)return fn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Oi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return fn(t).debug(`[${r}] response parsed`,Hs({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zm extends Promise{constructor(e,n,r=BV){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new zm(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kb=Symbol("brand.privateNullableHeaders");function*OV(t){if(!t)return;if(Kb in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():lx(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=lx(r[1])?r[1]:[r[1]];let o=!1;for(const a of i)a!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,a])}}const Yo=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,o]of OV(r)){const a=i.toLowerCase();s.has(a)||(e.delete(i),s.add(a)),o===null?(e.delete(i),n.add(a)):(e.append(i,o),n.delete(a))}}return{[Kb]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ah=t=>{var e,n,r,s,i,o;if(typeof globalThis.process<"u")return(r=(n=(e=f4)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(i=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||i===void 0?void 0:i.call(s,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Jb;class cd{constructor(e){var n,r,s,i,o,a,l,{baseURL:c=ah("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(n=ah("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,g=pc(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:h,apiVersion:m},g),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(r=y.timeout)!==null&&r!==void 0?r:cd.DEFAULT_TIMEOUT,this.logger=(s=y.logger)!==null&&s!==void 0?s:console;const E="warn";this.logLevel=E,this.logLevel=(o=(i=fx(y.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:fx(ah("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:E,this.fetchOptions=y.fetchOptions,this.maxRetries=(a=y.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=y.fetch)!==null&&l!==void 0?l:_V(),this.encoder=bV,this._options=y,this.apiKey=h,this.apiVersion=m,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Yo([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Yo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Yo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Zn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ci}`}defaultIdempotencyKey(){return`stainless-node-retry-${aV()}`}makeStatusError(e,n,r,s){return xn.generate(e,n,r,s)}buildURL(e,n,r){const s=!this.baseURLOverridden()&&r||this.baseURL,i=uV(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return hV(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new zm(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var s,i,o;const a=await e,l=(s=a.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:h,timeout:m}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:h,options:a});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=r===void 0?"":`, retryOf: ${r}`,E=Date.now();if(fn(this).debug(`[${g}] sending request`,Hs({retryOfRequestLogID:r,method:a.method,url:h,options:a,headers:c.headers})),!((i=a.signal)===null||i===void 0)&&i.aborted)throw new Ff;const x=new AbortController,T=await this.fetchWithTimeout(h,c,m,x).catch(Vf),v=Date.now();if(T instanceof globalThis.Error){const b=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new Ff;const M=Lf(T)||/timed? ?out/i.test(String(T)+("cause"in T?String(T.cause):""));if(n)return fn(this).info(`[${g}] connection ${M?"timed out":"failed"} - ${b}`),fn(this).debug(`[${g}] connection ${M?"timed out":"failed"} (${b})`,Hs({retryOfRequestLogID:r,url:h,durationMs:v-E,message:T.message})),this.retryRequest(a,n,r??g);throw fn(this).info(`[${g}] connection ${M?"timed out":"failed"} - error; no more retries left`),fn(this).debug(`[${g}] connection ${M?"timed out":"failed"} (error; no more retries left)`,Hs({retryOfRequestLogID:r,url:h,durationMs:v-E,message:T.message})),M?new Rb:new ld({cause:T})}const _=`[${g}${y}] ${c.method} ${h} ${T.ok?"succeeded":"failed"} with status ${T.status} in ${v-E}ms`;if(!T.ok){const b=await this.shouldRetry(T);if(n&&b){const A=`retrying, ${n} attempts remaining`;return await TV(T.body),fn(this).info(`${_} - ${A}`),fn(this).debug(`[${g}] response error (${A})`,Hs({retryOfRequestLogID:r,url:T.url,status:T.status,headers:T.headers,durationMs:v-E})),this.retryRequest(a,n,r??g,T.headers)}const M=b?"error; no more retries left":"error; not retryable";fn(this).info(`${_} - ${M}`);const V=await T.text().catch(A=>Vf(A).message),B=mV(V),k=B?void 0:V;throw fn(this).debug(`[${g}] response error (${M})`,Hs({retryOfRequestLogID:r,url:T.url,status:T.status,headers:T.headers,message:k,durationMs:Date.now()-E})),this.makeStatusError(T.status,B,k,T.headers)}return fn(this).info(_),fn(this).debug(`[${g}] response start`,Hs({retryOfRequestLogID:r,url:T.url,status:T.status,headers:T.headers,durationMs:v-E})),{response:T,options:a,controller:x,requestLogID:g,retryOfRequestLogID:r,startTime:E}}async fetchWithTimeout(e,n,r,s){const i=n||{},{signal:o,method:a}=i,l=pc(i,["signal","method"]);o&&o.addEventListener("abort",()=>s.abort());const c=setTimeout(()=>s.abort(),r),h=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},h?{duplex:"half"}:{}),{method:"GET"}),l);a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){var i;let o;const a=s==null?void 0:s.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(o=c)}const l=s==null?void 0:s.get("retry-after");if(l&&!o){const c=parseFloat(l);Number.isNaN(c)?o=Date.parse(l)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){const c=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,c)}return await gV(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,s,i;const o=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:h}=o,m=this.buildURL(l,c,h);"timeout"in o&&pV("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:g,body:y}=this.buildBody({options:o}),E=await this.buildHeaders({options:e,method:a,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:E},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(i=o.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=Yo([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),wV()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Yo([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:EV(e)}:this.encoder({body:e,headers:r})}}cd.DEFAULT_TIMEOUT=6e4;class jt extends cd{constructor(){super(...arguments),this.interactions=new Wb(this)}}Jb=jt;jt.GeminiNextGenAPIClient=Jb;jt.GeminiNextGenAPIClientError=Zn;jt.APIError=xn;jt.APIConnectionError=ld;jt.APIConnectionTimeoutError=Rb;jt.APIUserAbortError=Ff;jt.NotFoundError=Lb;jt.ConflictError=Vb;jt.RateLimitError=jb;jt.BadRequestError=Pb;jt.AuthenticationError=Mb;jt.InternalServerError=Ub;jt.PermissionDeniedError=Db;jt.UnprocessableEntityError=Fb;jt.toFile=AV;jt.Interactions=Wb;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zV(t,e){const n={},r=d(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function GV(t,e){const n={},r=d(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function HV(t,e){const n={},r=d(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function $V(t,e){const n={},r=d(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function qV(t,e,n){const r={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=d(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&p(e,["displayName"],s),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=d(t,["epochCount"]);e!==void 0&&i!=null&&p(e,["tuningTask","hyperparameters","epochCount"],i);const o=d(t,["learningRateMultiplier"]);if(o!=null&&p(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=d(t,["batchSize"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","batchSize"],a);const l=d(t,["learningRate"]);if(e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","learningRate"],l),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function WV(t,e,n){const r={};let s=d(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const y=d(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec"],mx(y))}else if(s==="PREFERENCE_TUNING"){const y=d(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec"],mx(y))}const i=d(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&p(e,["tunedModelDisplayName"],i);const o=d(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);let a=d(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const y=d(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(a==="PREFERENCE_TUNING"){const y=d(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const y=d(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(l==="PREFERENCE_TUNING"){const y=d(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let c=d(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=d(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(c==="PREFERENCE_TUNING"){const y=d(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let h=d(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const y=d(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(h==="PREFERENCE_TUNING"){const y=d(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=d(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=d(t,["beta"]);return e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),r}function KV(t,e){const n={},r=d(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=d(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=d(t,["trainingDataset"]);i!=null&&iF(i);const o=d(t,["config"]);return o!=null&&qV(o,n),n}function JV(t,e){const n={},r=d(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=d(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=d(t,["trainingDataset"]);i!=null&&oF(i,n,e);const o=d(t,["config"]);return o!=null&&WV(o,n,e),n}function YV(t,e){const n={},r=d(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function QV(t,e){const n={},r=d(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function XV(t,e,n){const r={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=d(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=d(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function ZV(t,e,n){const r={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=d(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=d(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function eF(t,e){const n={},r=d(t,["config"]);return r!=null&&XV(r,n),n}function tF(t,e){const n={},r=d(t,["config"]);return r!=null&&ZV(r,n),n}function nF(t,e){const n={},r=d(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=d(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=d(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Yb(a))),p(n,["tuningJobs"],o)}return n}function rF(t,e){const n={},r=d(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=d(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=d(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Bf(a))),p(n,["tuningJobs"],o)}return n}function sF(t,e){const n={},r=d(t,["name"]);r!=null&&p(n,["model"],r);const s=d(t,["name"]);return s!=null&&p(n,["endpoint"],s),n}function iF(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=d(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(n,["examples","examples"],s)}return n}function oF(t,e,n){const r={};let s=d(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=d(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=d(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let i=d(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=d(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=d(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Yb(t,e){const n={},r=d(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=d(t,["name"]);s!=null&&p(n,["name"],s);const i=d(t,["state"]);i!=null&&p(n,["state"],hb(i));const o=d(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=d(t,["tuningTask","startTime"]);a!=null&&p(n,["startTime"],a);const l=d(t,["tuningTask","completeTime"]);l!=null&&p(n,["endTime"],l);const c=d(t,["updateTime"]);c!=null&&p(n,["updateTime"],c);const h=d(t,["description"]);h!=null&&p(n,["description"],h);const m=d(t,["baseModel"]);m!=null&&p(n,["baseModel"],m);const g=d(t,["_self"]);return g!=null&&p(n,["tunedModel"],sF(g)),n}function Bf(t,e){const n={},r=d(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=d(t,["name"]);s!=null&&p(n,["name"],s);const i=d(t,["state"]);i!=null&&p(n,["state"],hb(i));const o=d(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=d(t,["startTime"]);a!=null&&p(n,["startTime"],a);const l=d(t,["endTime"]);l!=null&&p(n,["endTime"],l);const c=d(t,["updateTime"]);c!=null&&p(n,["updateTime"],c);const h=d(t,["error"]);h!=null&&p(n,["error"],h);const m=d(t,["description"]);m!=null&&p(n,["description"],m);const g=d(t,["baseModel"]);g!=null&&p(n,["baseModel"],g);const y=d(t,["tunedModel"]);y!=null&&p(n,["tunedModel"],y);const E=d(t,["preTunedModel"]);E!=null&&p(n,["preTunedModel"],E);const x=d(t,["supervisedTuningSpec"]);x!=null&&p(n,["supervisedTuningSpec"],x);const T=d(t,["preferenceOptimizationSpec"]);T!=null&&p(n,["preferenceOptimizationSpec"],T);const v=d(t,["tuningDataStats"]);v!=null&&p(n,["tuningDataStats"],v);const _=d(t,["encryptionSpec"]);_!=null&&p(n,["encryptionSpec"],_);const b=d(t,["partnerModelTuningSpec"]);b!=null&&p(n,["partnerModelTuningSpec"],b);const M=d(t,["customBaseModel"]);M!=null&&p(n,["customBaseModel"],M);const V=d(t,["experiment"]);V!=null&&p(n,["experiment"],V);const B=d(t,["labels"]);B!=null&&p(n,["labels"],B);const k=d(t,["outputUri"]);k!=null&&p(n,["outputUri"],k);const N=d(t,["pipelineJob"]);N!=null&&p(n,["pipelineJob"],N);const A=d(t,["serviceAccount"]);A!=null&&p(n,["serviceAccount"],A);const P=d(t,["tunedModelDisplayName"]);P!=null&&p(n,["tunedModelDisplayName"],P);const j=d(t,["veoTuningSpec"]);return j!=null&&p(n,["veoTuningSpec"],j),n}function aF(t,e){const n={},r=d(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=d(t,["name"]);s!=null&&p(n,["name"],s);const i=d(t,["metadata"]);i!=null&&p(n,["metadata"],i);const o=d(t,["done"]);o!=null&&p(n,["done"],o);const a=d(t,["error"]);return a!=null&&p(n,["error"],a),n}function mx(t,e){const n={},r=d(t,["gcsUri"]);r!=null&&p(n,["validationDatasetUri"],r);const s=d(t,["vertexDatasetResource"]);return s!=null&&p(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lF extends Wr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mi(Hr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:s});return i.baseModel=void 0,await this.tuneInternal(i)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),i=await this.tuneMldevInternal(s);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:kf.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=QV(e);return a=xe("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>Bf(h))}else{const c=YV(e);return a=xe("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>Yb(h))}}async listInternal(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=tF(e);return a=xe("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=rF(h),g=new Ov;return Object.assign(g,m),g})}else{const c=eF(e);return a=xe("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=nF(h),g=new Ov;return Object.assign(g,m),g})}}async cancel(e){var n,r,s,i;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=GV(e);return a=xe("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=$V(h),g=new zv;return Object.assign(g,m),g})}else{const c=zV(e);return a=xe("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=HV(h),g=new zv;return Object.assign(g,m),g})}}async tuneInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=JV(e,e);return i=xe("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>Bf(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=KV(e);return i=xe("tunedModels",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>aF(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uF{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const cF=1024*1024*8,dF=3,hF=1e3,fF=2,gc="x-goog-upload-status";async function pF(t,e,n){var r;const s=await Qb(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[gc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function mF(t,e,n){var r;const s=await Qb(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[gc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=ob(i),a=new Lm;return Object.assign(a,o),a}async function Qb(t,e,n){var r,s;let i=0,o=0,a=new Af(new Response),l="upload";for(i=t.size;o<i;){const c=Math.min(cF,i-o),h=t.slice(o,o+c);o+c>=i&&(l+=", finalize");let m=0,g=hF;for(;m<dF&&(a=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[gc]));)m++,await yF(g),g=g*fF;if(o+=c,((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[gc])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function gF(t){return{size:t.size,type:t.type}}function yF(t){return new Promise(e=>setTimeout(e,t))}class vF{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pF(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mF(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gF(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xF{create(e,n,r){return new wF(e,n,r)}}class wF{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gx="x-goog-api-key";class _F{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(gx)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(gx,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EF="gl-node/";class Xb{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new jt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=y4(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new _F(this.apiKey);this.apiClient=new gL({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:EF+"web",uploader:new vF,downloader:new uF}),this.models=new LL(this.apiClient),this.live=new AL(this.apiClient,s,new xF),this.batches=new qM(this.apiClient),this.chats=new CD(this.models,this.apiClient),this.caches=new bD(this.apiClient),this.files=new FD(this.apiClient),this.operations=new VL(this.apiClient),this.authTokens=new XL(this.apiClient),this.tunings=new lF(this.apiClient),this.fileSearchStores=new oV(this.apiClient)}}const yx=async(t,e="id")=>{var n,r,s;try{const i=`https://${e}.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(t)}&format=json&origin=*&srlimit=1`,a=await(await fetch(i)).json();if(!((r=(n=a.query)==null?void 0:n.search)!=null&&r.length))return e==="id"?"Tidak ditemukan informasi di Wikipedia.":"No information found on Wikipedia.";const l=a.query.search[0].title,c=`https://${e}.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&explaintext&titles=${encodeURIComponent(l)}&format=json&origin=*`,g=(s=(await(await fetch(c)).json()).query)==null?void 0:s.pages;if(!g)return"Wikipedia Error.";const y=Object.keys(g)[0],E=g[y].extract;return E?E.substring(0,1e3)+"...":e==="id"?"Halaman ditemukan tapi kosong.":"Page found but empty."}catch(i){return console.error("Wikipedia API Error",i),e==="id"?"Gagal menghubungi Wikipedia.":"Failed to contact Wikipedia."}},TF=async(t,e,n)=>{try{if(!e||!n)throw new Error("Missing Google Search API credentials");const r=`https://www.googleapis.com/customsearch/v1?key=${e}&cx=${n}&q=${encodeURIComponent(t)}&num=3`,s=await fetch(r),i=await s.json();if(!s.ok)return console.error("Google Search API Error",i),"";if(!i.items||i.items.length===0)return"No results found on Google.";let o=`Google Search Results:

`;return i.items.forEach((a,l)=>{o+=`${l+1}. ${a.title}
   Snippet: ${a.snippet}

`}),o}catch(r){return console.error("Google Search Service Error",r),""}},bF=async t=>{try{const e=`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(t)}&count=1&language=en&format=json`,r=await(await fetch(e)).json();return r.results&&r.results.length>0?r.results[0]:null}catch(e){return console.error("Geocoding Error:",e),null}},SF=async t=>{try{const e=await bF(t);if(!e)return`Maaf, tidak dapat menemukan lokasi kota "${t}". Pastikan ejaan benar.`;const n=`https://api.open-meteo.com/v1/forecast?latitude=${e.latitude}&longitude=${e.longitude}&current=temperature_2m,relative_humidity_2m,apparent_temperature,precipitation,rain,showers,snowfall,weather_code,cloud_cover,wind_speed_10m&timezone=auto`,s=await(await fetch(n)).json();if(!s.current)return"Data cuaca tidak tersedia saat ini.";const i=s.current,o=s.current_units;let a="Cerah/Berawan";const l=i.weather_code;return l===0?a="Cerah (Clear Sky)":l<=3?a="Berawan (Cloudy)":l<=48?a="Berkabut (Foggy)":l<=55?a="Gerimis (Drizzle)":l<=65?a="Hujan (Rain)":l<=77?a="Salju (Snow)":l>=95&&(a="Badai Petir (Thunderstorm)"),`
Laporan Cuaca untuk ${e.name}, ${e.country}:
- Kondisi: ${a}
- Suhu: ${i.temperature_2m}${o.temperature_2m} (Terasa seperti ${i.apparent_temperature}${o.temperature_2m})
- Kelembapan: ${i.relative_humidity_2m}${o.relative_humidity_2m}
- Angin: ${i.wind_speed_10m}${o.wind_speed_10m}
- Awan: ${i.cloud_cover}${o.cloud_cover}
        `.trim()}catch(e){return console.error("Weather API Error:",e),"Gagal mengambil data cuaca dari Open-Meteo."}},IF=async t=>{try{const e=`https://restcountries.com/v3.1/name/${encodeURIComponent(t)}`,n=await fetch(e);if(!n.ok)return`Data negara "${t}" tidak ditemukan.`;const s=(await n.json())[0],i=s.currencies?Object.values(s.currencies).map(a=>`${a.name} (${a.symbol})`).join(", "):"-",o=s.languages?Object.values(s.languages).join(", "):"-";return`
Fakta Negara ${s.name.common} (${s.name.official}):
- Ibukota: ${s.capital?s.capital[0]:"-"}
- Wilayah: ${s.region}, ${s.subregion}
- Populasi: ${s.population.toLocaleString()} jiwa
- Mata Uang: ${i}
- Bahasa: ${o}
- Zona Waktu: ${s.timezones?s.timezones[0]:"-"}
- Bendera: ${s.flag}
- Sisi Mengemudi: ${s.car?s.car.side:"-"}
        `.trim()}catch(e){return console.error("Country API Error:",e),"Gagal mengambil data negara."}},CF=(t,e)=>{const n=t/e;return[{label:"1:1",value:1},{label:"3:4",value:.75},{label:"4:3",value:1.33},{label:"9:16",value:.5625},{label:"16:9",value:1.7778}].reduce((i,o)=>Math.abs(o.value-n)<Math.abs(i.value-n)?o:i).label},kF=(t,e,n,r)=>{const s=CF(e,n);switch(t){case mn.BACKGROUND_REMOVER:return{model:"gemini-2.5-flash-image",prompt:"Edit this image. Your task is to keep the foreground subject EXACTLY as it is. Do not alter the subject's face, body, clothing, lighting, or resolution. Do not 'redraw' or 'regenerate' the subject. Simply COPY the main subject and place it against a solid bright Green background (Hex Code #00FF00). If the subject is cropped in the original, keep it cropped. Do not add new details.",config:{imageConfig:{aspectRatio:s}}};case mn.HD_UPSCALE:return{model:"gemini-3-pro-image-preview",prompt:"Upscale this image to high definition (4K quality). Sharpen all details and improve lighting. IMPORTANT: Keep the image composition, colors, and BACKGROUND exactly the same as the original. Do not remove the background. Do not change the subject's identity.",config:{imageConfig:{aspectRatio:s,imageSize:"4K"}}};case mn.CREATIVE_REMIX:return{model:"gemini-2.5-flash-image",prompt:r||"Make a creative cyberpunk variation of this image.",config:{imageConfig:{aspectRatio:s}}};case mn.COLORIZE:return{model:"gemini-2.5-flash-image",prompt:"Colorize this black and white image realistically. Keep the subject and background details exactly the same, just add natural colors. Do not change the content.",config:{imageConfig:{aspectRatio:s}}};case mn.SKETCH_TO_REAL:return{model:"gemini-2.5-flash-image",prompt:"Turn this sketch or drawing into a photorealistic image. Keep the composition and subject exactly as drawn, but make it look like a high-quality photograph.",config:{imageConfig:{aspectRatio:s}}};default:throw new Error("Unknown tool type")}},AF=async t=>{const{tool:e,image:n,prompt:r,apiKeys:s}=t,i=kF(e,n.width,n.height,r);let o=[...s||[]];o.push("PLACEHOLDER_API_KEY"),o=Array.from(new Set(o.filter(c=>!!c)));let a=!1,l=null;for(let c=0;c<o.length;c++){const h=o[c];try{const g=await new Xb({apiKey:h}).models.generateContent({model:i.model,contents:{parts:[{inlineData:{mimeType:n.mimeType,data:n.data}},{text:i.prompt}]},config:i.config});if(g.candidates&&g.candidates[0].content.parts){for(const y of g.candidates[0].content.parts)if(y.inlineData&&y.inlineData.data)return y.inlineData.data}throw new Error("No image data returned from Gemini.")}catch(m){console.warn(`Key ending in ...${h.slice(-4)} failed.`),l=m;const g=(m.message||"").toLowerCase(),y=JSON.stringify(m).toLowerCase(),E=g.includes("429")||g.includes("quota")||g.includes("exhausted")||g.includes("503"),x=g.includes("fetch")||g.includes("xhr")||g.includes("network")||g.includes("rpc")||g.includes("500")||y.includes("xhr")||y.includes("rpc");if(c===o.length-1&&(E||x)&&!a){console.log("Personal & System keys exhausted. Fetching Community Keys...");try{const T=await rb();if(T.length>0){const v=T.filter(_=>!o.includes(_));o.push(...v),a=!0;continue}}catch{console.error("Failed to fetch community keys")}}if(!E&&!x)break}}throw l||new Error("All API keys (Personal, System, and Community) failed.")},NF={name:"searchWikipedia",description:"Search Wikipedia for facts, history, people, places, definitions, or concepts. PRIMARY SOURCE after Database.",parameters:{type:ln.OBJECT,properties:{query:{type:ln.STRING,description:"The search keywords."}},required:["query"]}},RF={name:"searchWeather",description:"Get REAL-TIME weather data for a specific city. Use this when asked about 'weather', 'temperature', 'rain', or 'climate' in a specific location.",parameters:{type:ln.OBJECT,properties:{city:{type:ln.STRING,description:"The name of the city to get weather for (e.g., Jakarta, Bandung, New York)."}},required:["city"]}},PF={name:"searchCountryFact",description:"Get detailed facts about a country (Capital, Population, Currency, Flag, Region). Use when asked about specific country details.",parameters:{type:ln.OBJECT,properties:{country_name:{type:ln.STRING,description:"The name of the country (e.g., Indonesia, Japan, Brazil)."}},required:["country_name"]}},MF={name:"searchGoogle",description:"Search Google using Custom Search API. LAST RESORT source. Use ONLY if Wiki/Weather/Country is missing or for cross-website info/references/news.",parameters:{type:ln.OBJECT,properties:{query:{type:ln.STRING,description:"The search keywords."}},required:["query"]}},su=async(t,e)=>{if(!e)return t;const n=t.split(/(\s+)/);let r="";for(const s of n)r+=s,e(r),await new Promise(i=>setTimeout(i,Math.random()*20+10));return t},DF=t=>{const r=t==="id"?["Berdasarkan ingatan gue, ","Kalau gak salah sih, ","Dari data yang pernah lo kasih, ","Seinget gue, ","Oh itu, setau gue, "]:["If I recall correctly, ","Based on my memory, ","From what you told me before, ","I remember this, ","Oh right, "];return r[Math.floor(Math.random()*r.length)]},LF=async(t,e,n=[],r="id",s=[],i,o=!1,a=!1,l,c)=>{var V,B,k,N,A,P,j,R,D;if(t.trim().length>0){const S=await sb(t);if(S){const K=DF(r),he=S.startsWith(K)?S:K+S.charAt(0).toLowerCase()+S.slice(1);return{text:await su(he,i),source:"knowledge_base"}}}if(o){if(a){const he=await yx(t,r);return{text:await su(he,i),source:"wikipedia"}}return{text:await su(r==="id"?"Maaf, informasi ini belum ada di database saya. Coba aktifkan 'Wikipedia' atau 'Google Search' di pengaturan.":"Sorry, this info is not in my database. Try enabling 'Wikipedia' or 'Google Search' in settings.",i),source:"knowledge_base"}}let h=[...e||[]];h.push("PLACEHOLDER_API_KEY"),h=Array.from(new Set(h.filter(S=>!!S)));let m=!1;const g=n.slice(-10).map(S=>({role:S.role,parts:[{text:S.text}]})),y=[];t?y.push({text:t}):s.length>0&&y.push({text:"Describe these images or answer based on them."}),s&&s.length>0&&s.forEach(S=>{y.push({inlineData:{mimeType:S.mimeType,data:S.data}})});let E=[...g,{role:"user",parts:y}];const x=!!(l!=null&&l.apiKey&&l.cx),T=[{functionDeclarations:[NF,RF,PF]}];x&&T[0].functionDeclarations.push(MF);const v=`
        Nama lo: Fanra.
        Pembuat: Irfan Rizki Aditri (biasa dipanggil Fanra Dev).
        Sifat: Cool, santai, & solutif. Gaya ngomong: lo-gue, normal, nggak kaku.

        DETAIL TENTANG IRFAN (PENCIPTA LO):
        - Status: Mahasiswa di Institut Teknologi Sumatera (ITERA).
        - Prodi: Fisika (BUKAN Informatika).
        - Role: Dia BUKAN developer profesional/ahli. Dia cuma cowok biasa yang hobi ngoding dan iseng bikin project ini.
        - Fisik: Cowok, tinggi sekitar 170-an cm.
        - Keluarga: Anak bungsu (terakhir) dari 3 bersaudara.
        
        ATURAN PRIVASI (PENTING):
        - JANGAN PERNAH JAWAB pertanyaan tentang: Agama, Suku, Alamat Lengkap, atau Status Hubungan (Pacaran/Single).
        - Jika ditanya hal di atas, jawab "Itu privasi, gue gak tau." atau alihkan pembicaraan.
        
        TONE & GAYA BICARA:
        - JANGAN LEBAY/SOMBONG.
        - Jangan bilang Irfan "ganteng", "jago", "expert", atau "jenius".
        - Bilang aja dia mahasiswa yang hobi ngulik teknologi di waktu luang.
        - Jawab pertanyaan dengan padat & jelas.
        
        FORMAT TEKS:
        - JANGAN GUNAKAN MARKDOWN (tanda bintang * atau **). Tulis teks biasa saja.
    `,_=`
        Your Name: Fanra.
        Creator: Irfan Rizki Aditri (Fanra Dev).
        
        DETAILS ABOUT CREATOR:
        - Status: Student at Institut Teknologi Sumatera (ITERA).
        - Major: Physics (NOT Informatics).
        - Role: NOT a professional developer. Just a guy with a coding hobby who built this for fun.
        - Facts: Male, ~170cm tall, youngest of 3 siblings.
        
        STRICT PRIVACY RULES:
        - DO NOT disclose: Religion, Ethnicity, Address, or Relationship Status. State that it is private.
        
        TONE:
        - Humble and casual.
        - DO NOT praise Irfan excessively (no "handsome", "genius", "expert"). Just say he is a hobbyist.
        
        FORMAT:
        - NO MARKDOWN (no asterisks). Plain text only.
    `;let b=null,M="gemini";for(let S=0;S<h.length;S++){const K=h[S];if(c!=null&&c.aborted)throw new Error("Request cancelled by user");try{const he=new Xb({apiKey:K}),ne="gemini-3-flash-preview",ee=await he.models.generateContent({model:ne,contents:E,config:{systemInstruction:r==="id"?v:_,tools:T}});if(c!=null&&c.aborted)throw new Error("Request cancelled by user");const $=(A=(N=(k=(B=(V=ee.candidates)==null?void 0:V[0])==null?void 0:B.content)==null?void 0:k.parts)==null?void 0:N.filter(L=>L.functionCall))==null?void 0:A.map(L=>L.functionCall);if($&&$.length>0){const L=$[0];if(ee.candidates&&ee.candidates[0].content&&E.push(ee.candidates[0].content),L&&L.name==="searchWikipedia"){const z=L.args.query,se=await yx(z,r);M="wikipedia",E.push({role:"user",parts:[{functionResponse:{name:"searchWikipedia",response:{result:se}}}]})}else if(L&&L.name==="searchWeather"){const z=L.args.city,se=await SF(z);M="weather",E.push({role:"user",parts:[{functionResponse:{name:"searchWeather",response:{result:se}}}]})}else if(L&&L.name==="searchCountryFact"){const z=L.args.country_name,se=await IF(z);M="country_fact",E.push({role:"user",parts:[{functionResponse:{name:"searchCountryFact",response:{result:se}}}]})}else if(L&&L.name==="searchGoogle"&&x){const z=L.args.query,se=await TF(z,l.apiKey,l.cx);M="google_search",E.push({role:"user",parts:[{functionResponse:{name:"searchGoogle",response:{result:se}}}]})}}else{const L=(D=(R=(j=(P=ee.candidates)==null?void 0:P[0])==null?void 0:j.content)==null?void 0:R.parts)==null?void 0:D.find(se=>se.text),z=L?L.text:"";if(z)return await su(z,i),{text:z,source:"gemini"}}if(c!=null&&c.aborted)throw new Error("Request cancelled by user");const le=await he.models.generateContentStream({model:ne,contents:E,config:{systemInstruction:r==="id"?v:_}});let q="";for await(const L of le){if(c!=null&&c.aborted)break;const z=L.text;z&&(q+=z,i&&i(q))}return{text:q,source:M}}catch(he){if(he.message==="Request cancelled by user")throw he;console.warn(`Key ending in ...${K.slice(-4)} failed.`),b=he;const ne=(he.message||"").toLowerCase(),ee=JSON.stringify(he).toLowerCase(),$=ne.includes("429")||ne.includes("quota")||ne.includes("exhausted"),le=ne.includes("fetch")||ne.includes("xhr")||ne.includes("network")||ne.includes("rpc")||ne.includes("500")||ee.includes("xhr")||ee.includes("rpc");if(S===h.length-1&&($||le)&&!m)try{const q=await rb();if(q.length>0){const L=q.filter(z=>!h.includes(z));h.push(...L),m=!0;continue}}catch{}if(!$&&!le)break}}throw b||new Error("All chat keys failed.")},VF=t=>new Promise((e,n)=>{const r=new Image;r.src=`data:image/png;base64,${t}`,r.crossOrigin="Anonymous",r.onload=()=>{const s=document.createElement("canvas");s.width=r.width,s.height=r.height;const i=s.getContext("2d");if(!i){n(new Error("Could not get canvas context"));return}i.drawImage(r,0,0);const o=i.getImageData(0,0,s.width,s.height),a=o.data;for(let l=0;l<a.length;l+=4){const c=a[l],h=a[l+1],m=a[l+2],g=Math.max(c,m);let y=h-g;const E=10,x=60;if(y>E){const T=1-Math.max(0,Math.min(1,(y-E)/(x-E)));a[l+3]=Math.floor(255*T),h>g&&(a[l+1]=g)}}i.putImageData(o,0,0),e(s.toDataURL("image/png",1).split(",")[1])},r.onerror=s=>n(new Error("Failed to load image for processing"))}),FF=(t,e="image/png")=>{const n=t.replace(/[\n\r]/g,"").trim(),r=atob(n),s=new Array(r.length);for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);const i=new Uint8Array(s);return new Blob([i],{type:e})},jF=async(t,e)=>{const n=new FormData,r=FF(t);n.append("image_file",r,"image.png"),n.append("size","auto");try{const s=await fetch("https://api.remove.bg/v1.0/removebg",{method:"POST",headers:{"X-Api-Key":e},body:n});if(!s.ok){let o="Failed to remove background via Remove.bg";try{const a=await s.json();a.errors&&a.errors[0]&&(o=a.errors[0].title)}catch{o=`Remove.bg Error: ${s.statusText}`}throw new Error(o)}const i=await s.blob();return new Promise((o,a)=>{const l=new FileReader;l.onloadend=()=>{const c=l.result;o(c.split(",")[1])},l.onerror=a,l.readAsDataURL(i)})}catch(s){throw console.error("Remove.bg Service Error:",s),s}};const UF=({onImageSelect:t,language:e})=>{const n=G.useRef(null),[r,s]=G.useState(!1),i=So[e],o=m=>{if(!m.type.startsWith("image/")){alert(i.invalidImage);return}const g=new FileReader;g.onloadend=()=>{const y=g.result,E=new Image;E.onload=()=>{const x=document.createElement("canvas");x.width=E.width,x.height=E.height;const T=x.getContext("2d");if(!T)return;T.drawImage(E,0,0);const v="image/png",b=x.toDataURL(v).split(",")[1];t(b,v,E.width,E.height)},E.src=y},g.readAsDataURL(m)},a=m=>{var y;const g=(y=m.target.files)==null?void 0:y[0];g&&o(g)},l=m=>{m.preventDefault(),m.stopPropagation(),s(!0)},c=m=>{m.preventDefault(),m.stopPropagation(),s(!1)},h=m=>{var y;m.preventDefault(),m.stopPropagation(),s(!1);const g=(y=m.dataTransfer.files)==null?void 0:y[0];g&&o(g)};return u.jsxs("div",{className:`w-full max-w-xl mx-auto border-2 border-dashed rounded-2xl p-12 flex flex-col items-center justify-center text-center cursor-pointer transition-all duration-300 group bg-white ${r?"border-primary bg-slate-50 scale-[1.02] shadow-xl":"border-slate-300 hover:border-primary hover:bg-slate-50"}`,onClick:()=>{var m;return(m=n.current)==null?void 0:m.click()},onDragOver:l,onDragLeave:c,onDrop:h,children:[u.jsx("input",{type:"file",ref:n,onChange:a,className:"hidden",accept:"image/png, image/jpeg, image/webp"}),u.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 transition-transform duration-300 ${r?"scale-110 bg-white shadow-md":"bg-slate-50 group-hover:scale-110"}`,children:u.jsx(Mc,{className:`w-6 h-6 ${r?"text-primary":"text-slate-400 group-hover:text-primary"}`})}),u.jsx("h3",{className:`text-lg font-bold mb-2 transition-colors ${r?"text-primary":"text-slate-700 group-hover:text-primary"}`,children:r?i.dropHere:i.uploadTitle}),u.jsx("p",{className:"text-slate-500 text-sm",children:i.uploadDesc})]})},vx=[{label:"Transparent",value:null,hex:"transparent"},{label:"White",value:"#FFFFFF",hex:"#FFFFFF"},{label:"Black",value:"#000000",hex:"#000000"},{label:"Red",value:"#DB2828",hex:"#DB2828"},{label:"Blue",value:"#2185D0",hex:"#2185D0"},{label:"Green",value:"#21BA45",hex:"#21BA45"},{label:"Yellow",value:"#FBBD08",hex:"#FBBD08"}],BF=({originalImage:t,resultImageBase64:e,isProcessing:n,processingText:r,onReset:s,language:i})=>{const[o,a]=G.useState(50),[l,c]=G.useState(!1),[h,m]=G.useState(null),g=G.useRef(null),y=G.useRef(null),E=So[i],x=()=>{if(!e)return;if(!h){const k=document.createElement("a");k.href=`data:image/png;base64,${e}`,k.download="pixelmagic-edited.png",document.body.appendChild(k),k.click(),document.body.removeChild(k);return}const M=document.createElement("canvas"),V=M.getContext("2d"),B=new Image;B.onload=()=>{if(M.width=B.width,M.height=B.height,V){V.fillStyle=h,V.fillRect(0,0,M.width,M.height),V.drawImage(B,0,0);const k=document.createElement("a");k.href=M.toDataURL("image/png"),k.download="pixelmagic-edited-bg.png",document.body.appendChild(k),k.click(),document.body.removeChild(k)}},B.src=`data:image/png;base64,${e}`},T=G.useCallback(()=>c(!0),[]),v=G.useCallback(()=>c(!1),[]),_=G.useCallback(M=>{if(!l||!g.current)return;const{left:V,width:B}=g.current.getBoundingClientRect();let k;"touches"in M?k=M.touches[0].clientX:k=M.clientX;const N=(k-V)/B*100;a(Math.min(100,Math.max(0,N)))},[l]);G.useEffect(()=>(window.addEventListener("mousemove",_),window.addEventListener("mouseup",v),window.addEventListener("touchmove",_),window.addEventListener("touchend",v),()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",_),window.removeEventListener("touchend",v)}),[_,v]);const b=()=>h?{backgroundColor:h}:{backgroundColor:"#f8fafc",backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"};return u.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6 animate-fade-in pb-10",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsx("h2",{className:"text-xl font-bold text-primary self-start md:self-auto",children:n?u.jsxs("span",{className:"flex items-center gap-2",children:[E.processing,u.jsxs("span",{className:"flex gap-1",children:[u.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce"}),u.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-100"}),u.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-200"})]})]}):E.resultComparison}),!n&&u.jsxs("div",{className:"flex items-center gap-3 self-end md:self-auto",children:[u.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-slate-500 hover:text-primary transition-colors hover:bg-slate-50 rounded-lg active:scale-95 duration-200",children:E.reset}),e&&u.jsxs("button",{onClick:x,className:"flex items-center gap-2 bg-primary hover:bg-slate-800 text-white px-5 py-2 rounded-lg font-semibold text-sm transition-all shadow-lg shadow-slate-900/10 active:scale-95 hover:shadow-xl hover:-translate-y-0.5",children:[u.jsx(D_,{className:"w-4 h-4"}),E.download," ",h?"JPG":"PNG"]})]})]}),u.jsxs("div",{className:"relative w-full h-[60vh] rounded-xl overflow-hidden border border-slate-200 shadow-xl shadow-slate-200/50 bg-white select-none mx-auto group",ref:g,children:[n&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-white/90 backdrop-blur-md flex flex-col items-center justify-center transition-all duration-300",children:[u.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,className:"absolute inset-0 w-full h-full object-contain opacity-10 blur-md scale-105",alt:"Background Blur"}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center p-8 bg-white/80 rounded-2xl shadow-sm border border-slate-100/50 backdrop-blur-xl",children:[u.jsxs("div",{className:"relative mb-6",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-slate-100 rounded-full"}),u.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"})})]}),u.jsx("p",{className:"font-bold text-lg tracking-wide animate-shimmer-text",children:r||"..."})]})]}),!n&&e&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center transition-colors duration-300",style:b(),children:u.jsx("img",{src:`data:image/png;base64,${e}`,alt:"Result",className:"max-w-full max-h-full object-contain animate-fade-in",draggable:!1})}),u.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden",style:{clipPath:`inset(0 ${100-o}% 0 0)`},children:[u.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white/95",children:u.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain",draggable:!1})}),u.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur text-primary text-[10px] font-bold px-2 py-1 rounded shadow-sm border border-slate-100 select-none",children:E.original})]}),u.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white z-30 cursor-ew-resize shadow-[0_0_10px_rgba(0,0,0,0.2)] hover:bg-blue-100 transition-colors",style:{left:`${o}%`},onMouseDown:T,onTouchStart:T,children:u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg border border-slate-100 flex items-center justify-center text-primary transform hover:scale-110 active:scale-95 transition-all duration-200 cursor-ew-resize",children:u.jsx(HI,{className:"w-4 h-4"})})}),u.jsx("div",{className:"absolute top-4 right-4 bg-primary/90 backdrop-blur text-white text-[10px] font-bold px-2 py-1 rounded shadow-sm z-20 select-none",children:E.result})]}),!n&&!e&&u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain"})})]}),!n&&e&&u.jsxs("div",{className:"flex flex-col items-center gap-3 animate-fade-in-up",children:[u.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:E.bgColor}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-3 bg-white p-3 rounded-2xl border border-slate-200 shadow-sm transition-all hover:shadow-md",children:[vx.map(M=>u.jsx("button",{onClick:()=>m(M.value),className:`w-10 h-10 rounded-full border-2 transition-all duration-200 hover:scale-110 active:scale-95 flex items-center justify-center ${h===M.value?"border-primary ring-2 ring-primary/20 scale-110":"border-slate-200 hover:border-slate-300"}`,style:{backgroundColor:M.value||"white"},title:M.label,children:M.value===null&&u.jsx("div",{className:"w-full h-full rounded-full opacity-40",style:{backgroundImage:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 0 4px, 4px -4px, -4px 0px"}})},M.label)),u.jsx("div",{className:"w-px h-8 bg-slate-200 mx-2 self-center"}),u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:"color",ref:y,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:M=>m(M.target.value),value:h||"#ffffff"}),u.jsx("button",{className:`w-10 h-10 rounded-full border-2 flex items-center justify-center bg-white hover:bg-slate-50 transition-all duration-200 hover:scale-110 active:scale-95 ${h&&!vx.find(M=>M.value===h)?"border-primary ring-2 ring-primary/20":"border-slate-200 group-hover:border-slate-300"}`,title:"Custom Color",children:u.jsx("span",{className:"text-xl leading-none pb-1 text-slate-400 group-hover:text-primary transition-colors",children:"+"})})]})]})]}),!n&&!e&&u.jsx("p",{className:"text-center text-slate-400 text-xs animate-fade-in",children:E.uploadPrompt})]})},OF=({isOpen:t,onClose:e,removeBgKey:n,onSaveRemoveBgKey:r,storedApiKeys:s,onAddApiKey:i,onDeleteApiKey:o,onToggleApiKey:a,onSelectGoogleKey:l,knowledgeMode:c,onToggleKnowledgeMode:h,wikiEnabled:m,onToggleWiki:g,removeBgEnabled:y,onToggleRemoveBg:E,supabaseEnabled:x,onToggleSupabase:T,googleSearchKey:v,googleSearchCx:_,onSaveGoogleSearch:b,language:M})=>{const[V,B]=G.useState(n),[k,N]=G.useState(v),[A,P]=G.useState(_),[j,R]=G.useState(""),[D,S]=G.useState(!1),[K,he]=G.useState(!1),[ne,ee]=G.useState(0),$=So[M];if(G.useEffect(()=>{B(n),N(v),P(_),t?AP().then(ee):(S(!1),R(""),he(!1))},[n,v,_,t]),!t)return null;const le=()=>{!j.trim()||!D||(i(j.trim(),K),R(""),he(!1))},q=()=>{r(V.trim()),b(k.trim(),A.trim()),e()},L=({checked:z,onChange:se})=>u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:z,onChange:ie=>se(ie.target.checked)}),u.jsx("div",{className:`w-11 h-6 rounded-full peer peer-focus:outline-none peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${z?"bg-primary peer-checked:bg-primary":"bg-slate-200"}`})]});return u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-fade-in-up ring-1 ring-slate-900/5",children:[u.jsxs("div",{className:"bg-white px-6 py-5 border-b border-slate-100 flex items-center justify-between sticky top-0 z-10",children:[u.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 border border-slate-100 flex items-center justify-center text-primary",children:u.jsx(ja,{className:"w-5 h-5"})}),$.settingsTitle]}),u.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-50 hover:bg-slate-100 text-slate-400 hover:text-slate-800 transition-all",children:""})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-slate-50",children:[u.jsxs("section",{className:"bg-white rounded-2xl p-5 border border-slate-200 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("div",{className:"p-1.5 bg-indigo-100 text-indigo-600 rounded-lg",children:u.jsx(M_,{className:"w-4 h-4"})}),u.jsx("h3",{className:"text-sm font-bold text-slate-800",children:$.systemPref})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("div",{className:"flex items-start justify-between p-3 bg-indigo-50/50 rounded-xl border border-indigo-100",children:u.jsxs("div",{className:"pr-4 w-full",children:[u.jsxs("div",{className:"flex justify-between items-start mb-1",children:[u.jsx("h4",{className:"text-xs font-bold text-slate-700",children:$.knowledgeMode}),u.jsx(L,{checked:c,onChange:h})]}),u.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed mb-2",children:$.knowledgeModeDesc}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs("div",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-100 px-2 py-1 rounded-md w-fit flex items-center gap-1.5",children:[u.jsx(qI,{className:"w-3 h-3"}),$.totalKnowledge,": ",ne]})})]})}),u.jsxs("div",{className:"flex items-start justify-between p-3 bg-slate-50 rounded-xl border border-slate-200",children:[u.jsxs("div",{className:"pr-4",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(lr,{className:"w-3 h-3 text-slate-500"}),u.jsx("h4",{className:"text-xs font-bold text-slate-700",children:$.wikiMode})]}),u.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed",children:$.wikiModeDesc})]}),u.jsx(L,{checked:m,onChange:g})]})]})]}),u.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[u.jsx("div",{className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",children:u.jsx(j_,{className:"w-4 h-4"})}),$.googleSearchTitle]}),u.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:$.googleSearchDesc})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:"text",value:k,onChange:z=>N(z.target.value),placeholder:$.searchApiKey,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all placeholder:text-slate-400 font-mono shadow-sm"}),u.jsx("input",{type:"text",value:A,onChange:z=>P(z.target.value),placeholder:$.searchEngineId,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all placeholder:text-slate-400 font-mono shadow-sm"})]})]}),u.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[u.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 shadow-sm shadow-blue-500/50"}),$.googleApiTitle]}),u.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:$.googleApiDesc})]}),u.jsx("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4 mb-5",children:u.jsxs("div",{className:"flex gap-3 items-start",children:[u.jsx(el,{className:"w-5 h-5 text-amber-500 shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs font-bold text-amber-800 uppercase tracking-wide mb-1.5",children:$.keyDisclaimerTitle}),u.jsx("p",{className:"text-[11px] text-amber-800/80 leading-relaxed mb-3 text-justify",children:$.keyDisclaimerText}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group w-fit select-none",children:[u.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors shadow-sm ${D?"bg-amber-500 border-amber-500":"bg-white border-amber-300"}`,children:D&&u.jsx(si,{className:"w-3 h-3 text-white"})}),u.jsx("input",{type:"checkbox",checked:D,onChange:z=>S(z.target.checked),className:"hidden"}),u.jsx("span",{className:`text-xs font-semibold transition-colors ${D?"text-amber-700":"text-amber-600/70"}`,children:$.consentCheckbox})]})]})]})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:j,onChange:z=>R(z.target.value),placeholder:D?$.addKeyPlaceholder:$.consentCheckbox,disabled:!D,className:"w-full pl-4 pr-32 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed font-mono placeholder:font-sans shadow-sm"}),u.jsx("button",{onClick:le,disabled:!D||!j.trim(),className:"absolute right-1.5 top-1.5 bottom-1.5 px-4 bg-slate-800 text-white rounded-lg text-xs font-bold hover:bg-slate-700 disabled:bg-slate-200 disabled:text-slate-400 disabled:cursor-not-allowed transition-all shadow-md active:scale-95",children:$.addKeyBtn})]}),u.jsxs("div",{className:`flex items-center justify-between bg-slate-50 p-3 rounded-xl border border-slate-200 transition-all ${D?"":"opacity-50 pointer-events-none grayscale"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg transition-colors ${K?"bg-green-100 text-green-600":"bg-slate-200 text-slate-500"}`,children:u.jsx(lr,{className:"w-5 h-5"})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-xs font-bold text-slate-700",children:"Donasi ke Komunitas"}),u.jsx("span",{className:"text-[10px] text-slate-500",children:"Izinkan orang lain pakai key ini (Shared)"})]})]}),u.jsx(L,{checked:K,onChange:he})]})]}),u.jsxs("div",{className:"mt-8",children:[u.jsx("div",{className:"flex items-center justify-between mb-3 px-1",children:u.jsxs("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[$.keysStored,u.jsx("span",{className:"bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded text-[10px]",children:s.length})]})}),s.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-8 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:[u.jsx(ja,{className:"w-8 h-8 text-slate-300 mb-2"}),u.jsx("p",{className:"text-xs text-slate-400 font-medium text-center max-w-[200px] leading-relaxed",children:$.noKeysYet})]}):u.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:s.map((z,se)=>u.jsxs("div",{className:`flex items-center justify-between p-3 bg-white border rounded-xl shadow-sm transition-all ${z.isActive!==!1?"border-slate-200":"border-slate-100 bg-slate-50/50 opacity-70"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center shrink-0 text-xs font-bold border ${z.isShared?"bg-green-50 text-green-600 border-green-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:z.isShared?u.jsx(lr,{className:"w-4 h-4"}):se+1}),u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("span",{className:"text-xs font-mono text-slate-700 font-bold tracking-tight",children:["  ",z.key.slice(-4)]}),u.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[u.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded-md font-bold uppercase tracking-wide border ${z.isShared?"bg-green-100 text-green-700 border-green-200":"bg-slate-100 text-slate-600 border-slate-200"}`,children:z.isShared?"Donasi":"Pribadi"}),u.jsx("span",{className:`text-[9px] font-bold ${z.isActive!==!1?"text-green-500":"text-slate-400"}`,children:z.isActive!==!1?" "+$.active:" "+$.inactive})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{onClick:ie=>ie.stopPropagation(),children:u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer scale-75 origin-right",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",checked:z.isActive!==!1,onChange:ie=>a(z.key,ie.target.checked)}),u.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-green-500"})]})}),u.jsx("button",{onClick:()=>o(z.key),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",title:"Hapus Key",children:u.jsx(_s,{className:"w-4 h-4"})})]})]},se))}),u.jsx("div",{className:"mt-5 flex justify-center",children:u.jsxs("button",{onClick:l,className:"text-xs font-bold text-blue-600 bg-blue-50 px-4 py-2 rounded-lg hover:bg-blue-100 transition-colors flex items-center gap-1.5 group border border-blue-100",children:[$.selectKeyBtn,u.jsx("span",{className:"group-hover:translate-x-0.5 transition-transform",children:""})]})})]})]}),u.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg shadow-sm",children:u.jsx(Ju,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-slate-800",children:$.removeBgTitle}),u.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:$.removeBgDesc})]})]}),u.jsx(L,{checked:y,onChange:E})]}),u.jsx("div",{className:`relative transition-opacity ${y?"":"opacity-50 pointer-events-none"}`,children:u.jsx("input",{type:"text",value:V,onChange:z=>B(z.target.value),placeholder:"Tempel API Key Remove.bg disini...",className:"w-full pl-4 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:ring-2 focus:ring-purple-500/10 focus:border-purple-500 outline-none transition-all placeholder:text-slate-400 font-mono shadow-sm"})})]}),u.jsx("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg shadow-sm",children:u.jsx(Vp,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-slate-800",children:$.supabaseTitle}),u.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:$.supabaseDesc})]})]}),u.jsx(L,{checked:x,onChange:T})]})})]}),u.jsxs("div",{className:"p-5 border-t border-slate-100 bg-white flex items-center justify-end gap-3 shrink-0",children:[u.jsx("button",{onClick:e,className:"px-5 py-2.5 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded-xl font-bold text-sm transition-all",children:$.cancel}),u.jsxs("button",{onClick:q,className:"px-6 py-2.5 bg-slate-900 hover:bg-slate-800 text-white rounded-xl font-bold text-sm shadow-lg shadow-slate-900/20 active:scale-95 transition-all flex items-center gap-2",children:[u.jsx(si,{className:"w-4 h-4"}),$.save]})]})]})})},zF=({onLogin:t,language:e,onToggleLanguage:n,onClose:r})=>{const[s,i]=G.useState(""),[o,a]=G.useState(""),[l,c]=G.useState(!1),[h,m]=G.useState(null),g=So[e],y=()=>{let x=localStorage.getItem("pixelmagic_device_id");return x||(x="dev_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36),localStorage.setItem("pixelmagic_device_id",x)),x},E=async x=>{if(x.preventDefault(),!(!s.trim()||!o.trim())){c(!0),m(null);try{const T=s.trim(),v=o.trim(),_=y(),{user:b,credits:M,id:V}=await TP(T,v,_);t(b,V,M)}catch(T){console.error(T),m("Connection failed. Please check internet.")}finally{c(!1)}}};return u.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-surface p-4 relative animate-fade-in",children:[r&&u.jsx("button",{onClick:r,className:"absolute top-6 left-6 p-2 rounded-full bg-white shadow-sm border border-slate-200 text-slate-400 hover:text-slate-900 transition-colors z-20",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),u.jsx("button",{onClick:n,className:"absolute top-6 right-6 text-xs font-bold px-3 py-1.5 rounded bg-white shadow-sm border border-slate-200 text-slate-600 hover:bg-slate-50 uppercase z-10",children:e}),u.jsxs("div",{className:"bg-white w-full max-w-md p-8 rounded-2xl shadow-xl border border-slate-100 animate-fade-in-up",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"w-12 h-12 bg-primary text-white rounded-xl flex items-center justify-center text-xl font-bold mx-auto mb-4 shadow-lg shadow-primary/20",children:"F"}),u.jsx("h1",{className:"text-2xl font-bold text-primary",children:g.welcome}),u.jsx("p",{className:"text-slate-500 text-sm mt-2 leading-relaxed",children:g.welcomeSubtitle})]}),u.jsxs("form",{onSubmit:E,className:"space-y-5",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:g.enterName}),u.jsx("input",{type:"text",required:!0,maxLength:50,value:s,onChange:x=>i(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-lg p-3 text-primary focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400",placeholder:g.namePlaceholder}),u.jsx("div",{className:"text-right mt-1",children:u.jsxs("span",{className:"text-[10px] text-slate-400",children:[s.length,"/50"]})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:g.enterSchool}),u.jsx("input",{type:"text",required:!0,maxLength:60,value:o,onChange:x=>a(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-lg p-3 text-primary focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400",placeholder:g.schoolPlaceholder}),u.jsx("div",{className:"text-right mt-1",children:u.jsxs("span",{className:"text-[10px] text-slate-400",children:[o.length,"/60"]})})]}),h&&u.jsx("p",{className:"text-red-500 text-xs text-center",children:h}),u.jsx("div",{className:"pt-2",children:u.jsx("button",{type:"submit",disabled:l,className:`w-full py-3 rounded-xl font-bold text-white transition-all shadow-lg ${l?"bg-slate-400 cursor-wait":"bg-primary hover:bg-slate-800 hover:shadow-xl active:scale-95"}`,children:l?g.verifying:g.accessButton})}),u.jsxs("p",{className:"text-center text-[10px] text-slate-400 mt-4",children:["Fanra Dev | ",g.deviceIdNote]})]})]})]})},GF=({isOpen:t,onClose:e,onNewChat:n,user:r,onLogout:s,onOpenLogin:i,credits:o,isUnlimited:a,language:l,tools:c,onSelectTool:h,onExit:m})=>{const g=So[l],[y,E]=G.useState(!1),x=y?c:c.slice(0,3);return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),u.jsx("div",{className:`
          /* Positioning & Layout */
          fixed md:relative top-0 left-0 bottom-0 z-50 h-full
          bg-slate-900 text-slate-200
          overflow-hidden flex flex-col

          /* Transitions */
          transition-[width,transform,opacity] duration-300 ease-in-out

          /* MOBILE STATE: Fixed width, Slide in/out */
          w-[280px]
          ${t?"translate-x-0 shadow-2xl":"-translate-x-full shadow-none"}

          /* DESKTOP STATE: Relative, Collapse Width, Reset Transform */
          md:transform-none md:shadow-none md:top-auto md:left-auto md:bottom-auto
          ${t?"md:w-[260px]":"md:w-0"}
        `,children:u.jsxs("div",{className:"w-[280px] md:w-[260px] h-full flex flex-col border-r border-slate-800 bg-slate-900",children:[u.jsxs("div",{className:"p-4 flex items-center justify-between h-14 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-white text-slate-900 rounded-lg flex items-center justify-center font-bold",children:"F"}),u.jsx("span",{className:"font-bold text-white tracking-wide",children:"Fanra"})]}),u.jsx("button",{onClick:e,className:"md:hidden text-slate-400 hover:text-white p-1",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-3 py-2 custom-scrollbar space-y-4",children:[u.jsxs("button",{onClick:()=>{n(),window.innerWidth<768&&e()},className:"w-full flex items-center gap-3 bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-xl transition-all active:scale-95 border border-slate-700 shadow-sm group",children:[u.jsx("span",{className:"text-xl font-light group-hover:scale-110 transition-transform",children:"+"}),u.jsx("span",{className:"text-sm font-medium",children:g.newChat})]}),u.jsx("div",{className:"h-px bg-slate-800/50 mx-2"}),u.jsxs("div",{children:[u.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Creative Tools"}),u.jsxs("div",{className:"space-y-1",children:[x.map(T=>u.jsxs("button",{onClick:()=>{h(T),window.innerWidth<768&&e()},className:"w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all hover:bg-slate-800 border border-transparent hover:border-slate-700/50 group active:scale-95",children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 ${T.color.replace("bg-","bg-opacity-90 bg-")} shadow-sm`,children:u.jsx("div",{className:"scale-75 text-slate-800",children:T.icon})}),u.jsx("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:u.jsx("span",{className:"block text-xs font-bold text-slate-200 group-hover:text-white truncate",children:g[T.nameKey]})})]},T.id)),u.jsxs("button",{onClick:()=>E(!y),className:"w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all hover:bg-slate-800 border border-transparent border-dashed hover:border-slate-700/50 group",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center shrink-0 bg-slate-800 text-slate-400",children:u.jsx(Fp,{className:"w-4 h-4"})}),u.jsx("span",{className:"text-xs font-medium text-slate-400 group-hover:text-white",children:y?g.lessTools:g.moreTools})]})]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase mb-2 mt-4",children:g.historyHeader}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("button",{className:"w-full text-left px-4 py-2.5 text-sm text-slate-400 hover:bg-slate-800/50 hover:text-white rounded-lg truncate transition-colors group",children:g.historyItem1}),u.jsx("button",{className:"w-full text-left px-4 py-2.5 text-sm text-slate-400 hover:bg-slate-800/50 hover:text-white rounded-lg truncate transition-colors",children:g.historyItem2})]})]})]}),u.jsxs("div",{className:"p-4 border-t border-slate-800 bg-slate-900 shrink-0",children:[m&&u.jsxs("button",{onClick:m,className:"w-full mb-4 py-2.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-xl font-bold text-xs uppercase tracking-wider transition-all flex items-center justify-center gap-2 border border-slate-700/50 hover:border-slate-600 group",children:[u.jsx(oo,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Exit Studio"]}),r?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500 flex items-center justify-center text-xs font-bold text-white shrink-0",children:r.name.charAt(0).toUpperCase()}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-white truncate",children:r.name}),u.jsx("p",{className:"text-xs text-slate-500 truncate",children:r.school})]})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs mb-3 bg-slate-800 rounded-lg p-2",children:[u.jsxs("span",{className:"text-slate-400",children:[g.credits,":"]}),u.jsx("span",{className:`font-bold ${a?"text-amber-400":"text-white"}`,children:a?g.unlimited:o})]}),u.jsxs("button",{onClick:s,className:"w-full py-2 text-xs font-medium text-slate-400 hover:text-red-400 hover:bg-red-900/10 rounded-lg transition-colors flex items-center justify-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),g.logOut]})]}):u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-xs text-slate-400 mb-3",children:g.loginToSave}),u.jsx("button",{onClick:i,className:"w-full py-2.5 bg-white text-slate-900 font-bold rounded-xl text-sm hover:bg-slate-200 transition-colors shadow-lg active:scale-95",children:g.loginBtn})]})]})]})})]})};class HF{constructor(e,n,r,s,i){this.x=e,this.y=n,this.vx=0,this.vy=0,this.radius=s,this.color=r,this.friction=.92,this.ease=i,this.dx=(Math.random()-.5)*80,this.dy=(Math.random()-.5)*80,this.angle=Math.random()*Math.PI*2,this.angleSpeed=.02+Math.random()*.03,this.wobbleRadius=15+Math.random()*25}update(e,n,r){if(r)this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction;else{this.angle+=this.angleSpeed;const s=Math.cos(this.angle)*this.wobbleRadius,i=Math.sin(this.angle)*this.wobbleRadius,o=e+this.dx+s,a=n+this.dy+i;this.x+=(o-this.x)*this.ease,this.y+=(a-this.y)*this.ease,this.vx=0,this.vy=0}}shatter(){const e=Math.random()*Math.PI*2,n=Math.random()*30+15;this.vx=Math.cos(e)*n,this.vy=Math.sin(e)*n}draw(e){e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2),e.fillStyle=this.color,e.fill()}}const $F=({onEnter:t})=>{const[e,n]=G.useState(!1),[r,s]=G.useState(!1),i=G.useRef(null),o=G.useRef(!1),a=G.useRef({x:window.innerWidth/2,y:window.innerHeight/2}),l=G.useRef([]);G.useEffect(()=>{setTimeout(()=>s(!0),300);const m=i.current;if(!m)return;const g=m.getContext("2d");if(!g)return;const y=()=>{m.width=window.innerWidth,m.height=window.innerHeight};window.addEventListener("resize",y),y();const E=b=>{a.current={x:b.clientX,y:b.clientY}};window.addEventListener("mousemove",E);const x=["#0f172a","#1e293b","#312e81","#1e1b4b","#4c1d95","#2563eb"],T=[];for(let b=0;b<15;b++){const M=Math.random()*30+20,V=x[Math.floor(Math.random()*x.length)],B=Math.random()*.08+.03;T.push(new HF(m.width/2,m.height/2,V,M,B))}l.current=T;let v;const _=()=>{g.clearRect(0,0,m.width,m.height),l.current.forEach(b=>{b.update(a.current.x,a.current.y,o.current),b.draw(g)}),v=requestAnimationFrame(_)};return _(),()=>{window.removeEventListener("resize",y),window.removeEventListener("mousemove",E),cancelAnimationFrame(v)}},[]);const c=()=>{o.current||(o.current=!0,l.current.forEach(m=>m.shatter()),setTimeout(()=>{o.current=!1},1500))},h=()=>{n(!0),setTimeout(()=>{t()},900)};return u.jsxs("div",{className:`fixed inset-0 z-[999] bg-white flex flex-col items-center justify-center overflow-hidden transition-transform duration-[900ms] cubic-bezier(0.76, 0, 0.24, 1) ${e?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none shadow-none"}`,onDoubleClick:c,children:[u.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none filter blur-[60px] opacity-80",children:u.jsx("canvas",{ref:i,className:"w-full h-full"})}),u.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.4] pointer-events-none mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),u.jsxs("div",{className:`relative z-10 flex flex-col items-center max-w-lg w-full text-center px-6 transition-all duration-1000 ease-out transform select-none ${r?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,children:[u.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-slate-900 mb-2 tracking-tighter",children:["IRFAN",u.jsx("span",{className:"text-blue-600",children:"."})]}),u.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-400 mb-8 tracking-widest uppercase",children:"Rizki Aditri"}),u.jsxs("p",{className:"text-slate-500 text-sm md:text-base font-medium leading-relaxed mb-16 max-w-xs mx-auto",children:["Welcome to my digital playground. ",u.jsx("br",{}),u.jsx("span",{className:"text-slate-800",children:"Explore projects, stories, and ideas."})]}),u.jsxs("button",{onClick:h,className:"group flex flex-col items-center gap-4 transition-all outline-none cursor-pointer",children:[u.jsx("div",{className:"w-16 h-16 rounded-full border border-slate-200 bg-white/80 backdrop-blur-sm flex items-center justify-center shadow-lg transition-all duration-500 group-hover:scale-110 group-hover:bg-white group-hover:border-slate-300 group-active:scale-95 group-hover:shadow-xl",children:u.jsx(Fa,{className:"w-6 h-6 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-600 transition-colors duration-300",children:"Enter Site"})]})]})]})},qF="3JEZ69gonQmxU83WxzidFCFf",WF="AIzaSyCV_HdKiAs1y5-F5eSGxTFUZ1vAGUOymQg",KF="sb_publishable_ikw-BNV8Wu3qhNPuSti8Rg_7XmPMWqV",JF="",xx=5,lh=[{id:mn.BACKGROUND_REMOVER,nameKey:"toolBgRemove",descKey:"toolBgRemoveDesc",icon:u.jsx(Ju,{className:"w-5 h-5 md:w-6 md:h-6"}),color:"text-blue-600 bg-blue-50",model:"gemini-2.5-flash-image",cost:1},{id:mn.HD_UPSCALE,nameKey:"toolUpscale",descKey:"toolUpscaleDesc",icon:u.jsx(Vp,{className:"w-5 h-5 md:w-6 md:h-6"}),color:"text-amber-600 bg-amber-50",model:"gemini-2.5-flash-image",cost:3},{id:mn.CREATIVE_REMIX,nameKey:"toolRemix",descKey:"toolRemixDesc",icon:u.jsx(M_,{className:"w-5 h-5 md:w-6 md:h-6"}),color:"text-purple-600 bg-purple-50",model:"gemini-2.5-flash-image",cost:3},{id:mn.COLORIZE,nameKey:"toolColorize",descKey:"toolColorizeDesc",icon:u.jsx(B_,{className:"w-5 h-5 md:w-6 md:h-6"}),color:"text-pink-600 bg-pink-50",model:"gemini-2.5-flash-image",cost:2},{id:mn.SKETCH_TO_REAL,nameKey:"toolSketch",descKey:"toolSketchDesc",icon:u.jsx(Yu,{className:"w-5 h-5 md:w-6 md:h-6"}),color:"text-emerald-600 bg-emerald-50",model:"gemini-2.5-flash-image",cost:3}],YF=({language:t,code:e})=>{const[n,r]=G.useState(!1),s=()=>{navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)},i=o=>o.split(`
`).map((a,l)=>u.jsxs("div",{className:"table-row",children:[u.jsx("span",{className:"table-cell select-none text-slate-600 text-right pr-4 w-8 text-xs",children:l+1}),u.jsx("span",{className:"table-cell",children:a.split(/([<>{}"']|class|const|let|var|function|return|import|export)/g).map((c,h)=>c.startsWith("<")||c.startsWith(">")?u.jsx("span",{className:"text-blue-400",children:c},h):c.startsWith('"')||c.startsWith("'")?u.jsx("span",{className:"text-green-400",children:c},h):["const","let","var","function","return","import","export","class"].includes(c)?u.jsx("span",{className:"text-purple-400 font-bold",children:c},h):["=","{","}","(",")",";"].includes(c)?u.jsx("span",{className:"text-slate-400",children:c},h):u.jsx("span",{className:"text-slate-200",children:c},h))})]},l));return u.jsxs("div",{className:"my-4 rounded-xl overflow-hidden border border-slate-700/50 shadow-lg bg-[#1e1e1e] w-full max-w-full group",children:[u.jsxs("div",{className:"bg-[#2d2d2d] px-4 py-2 flex items-center justify-between border-b border-white/5",children:[u.jsx("span",{className:"text-xs font-mono text-slate-400 lowercase font-bold",children:t||"code"}),u.jsx("button",{onClick:s,className:"flex items-center gap-1.5 text-[10px] font-medium text-slate-400 hover:text-white bg-white/5 hover:bg-white/10 px-2 py-1 rounded transition-all",children:n?u.jsxs(u.Fragment,{children:[u.jsx(si,{className:"w-3 h-3 text-green-400"})," Copied"]}):u.jsxs(u.Fragment,{children:[u.jsx(U_,{className:"w-3 h-3"})," Copy Code"]})})]}),u.jsx("div",{className:"p-4 overflow-x-auto custom-scrollbar",children:u.jsx("pre",{className:"font-mono text-sm leading-relaxed whitespace-pre font-normal",style:{tabSize:2},children:u.jsx("code",{className:"table w-full border-collapse",children:i(e)})})})]})},QF=({isOpen:t,onClose:e})=>t?u.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-6 shadow-2xl animate-fade-in-up border border-slate-100",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center",children:u.jsx(ja,{className:"w-5 h-5"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Cara Dapet API Key Gemini"})]}),u.jsxs("ol",{className:"space-y-4 text-sm text-slate-600 mb-6 list-decimal list-inside marker:font-bold marker:text-blue-600",children:[u.jsxs("li",{className:"pl-2",children:["Buka website ",u.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-bold hover:underline",children:"Google AI Studio"}),"."]}),u.jsx("li",{className:"pl-2",children:"Login pakai akun Google kamu."}),u.jsxs("li",{className:"pl-2",children:["Klik tombol biru besar bertuliskan ",u.jsx("b",{children:'"Create API Key"'}),"."]}),u.jsxs("li",{className:"pl-2",children:["Pilih ",u.jsx("b",{children:'"Create API key in new project"'}),"."]}),u.jsxs("li",{className:"pl-2",children:["Salin (Copy) kode yang muncul, lalu tempel di menu ",u.jsx("b",{children:"Pengaturan"})," aplikasi ini."]})]}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-xs text-slate-500 mb-6",children:[" ",u.jsx("b",{children:"Tips:"})," API Key ini gratis (Free Tier). Jangan kasih tau kode ini ke orang lain ya."]}),u.jsx("button",{onClick:e,className:"w-full py-3 bg-primary text-white rounded-xl font-bold shadow-lg shadow-primary/20 hover:bg-slate-800 transition-all active:scale-95",children:"Oke, Siap!"})]})}):null;function XF({onExit:t}){const[e,n]=G.useState(!0),[r,s]=G.useState("id"),[i,o]=G.useState(null),[a,l]=G.useState(null),[c,h]=G.useState(xx),[m,g]=G.useState(!1),[y,E]=G.useState(!1),[x,T]=G.useState(!1),[v,_]=G.useState(null),[b,M]=G.useState(null),[V,B]=G.useState(null),[k,N]=G.useState(""),[A,P]=G.useState({isProcessing:!1,progress:"",error:null}),[j,R]=G.useState([]),[D,S]=G.useState(""),[K,he]=G.useState([]),[ne,ee]=G.useState(null),[$,le]=G.useState(!1),[q,L]=G.useState(!1),[z,se]=G.useState(null),ie=G.useRef(null),ke=G.useRef(null),ze=G.useRef(null),Ae=G.useRef(null),[Be,Le]=G.useState(!1),[Ze,At]=G.useState(""),[ot,C]=G.useState([]),[re,X]=G.useState(""),[O,U]=G.useState(""),[H,oe]=G.useState(!1),[ce,Y]=G.useState(!1),[ue,ge]=G.useState(!0),[pe,ye]=G.useState(!0),[Ie,Ce]=G.useState(!1),[bt,En]=G.useState(!1),[Ut,W]=G.useState(!1),[Z,be]=G.useState(null),ve=So[r];G.useEffect(()=>{const Q=localStorage.getItem("remove_bg_key");Q&&At(Q);const _e=localStorage.getItem("google_search_key");_e&&X(_e);const Fe=localStorage.getItem("google_search_cx");Fe&&U(Fe),localStorage.getItem("fanra_know_mode")==="true"&&oe(!0),localStorage.getItem("fanra_wiki_mode")==="true"&&Y(!0),localStorage.getItem("fanra_rb_enabled")==="false"&&ge(!1),localStorage.getItem("fanra_sb_enabled")==="false"&&ye(!1)},[]),G.useEffect(()=>{Ie&&(ot.some(Q=>Q.isActive)||H)&&Ce(!1)},[ot,H]),G.useEffect(()=>{var Q;(Q=ke.current)==null||Q.scrollIntoView({behavior:"smooth"})},[j,A.isProcessing,K]),G.useEffect(()=>{a&&(CP(a).then(Q=>{Q.length>0&&R(Q)}),SP(a).then(Q=>{C(Q)}))},[a]),G.useEffect(()=>{if(Ae.current){Ae.current.style.height="auto";const Q=Math.min(Ae.current.scrollHeight,128);Ae.current.style.height=`${Math.max(42,Q)}px`}},[D,K]);const He=Q=>{if(St())return;const _e=Math.max(0,c-Q);h(_e),a&&bP(a,_e)},St=()=>!!(i!=null&&i.isAdmin||ot.some(Q=>Q.isActive!==!1)),Ge=()=>Ze||qF,Tn=()=>{const Q=ot.filter(_e=>_e.isActive!==!1).map(_e=>_e.key);return Q.length===0?[WF]:Q},bn=Q=>{At(Q),localStorage.setItem("remove_bg_key",Q)},dn=(Q,_e)=>{X(Q),U(_e),localStorage.setItem("google_search_key",Q),localStorage.setItem("google_search_cx",_e)},hn=async(Q,_e)=>{if(!a)return;const Fe={key:Q,addedAt:Date.now(),isShared:_e,isActive:!0},je=[...ot,Fe];C(je),await My(a,je)},Bt=async Q=>{if(!a)return;const _e=ot.filter(Fe=>Fe.key!==Q);C(_e),await IP(a,Q,_e)},Qt=async(Q,_e)=>{if(!a)return;const Fe=ot.map(je=>je.key===Q?{...je,isActive:_e}:je);C(Fe),await My(a,Fe)},Ir=Q=>{oe(Q),localStorage.setItem("fanra_know_mode",Q.toString())},er=Q=>{Y(Q),localStorage.setItem("fanra_wiki_mode",Q.toString())},gi=Q=>{ge(Q),localStorage.setItem("fanra_rb_enabled",Q.toString())},Ds=Q=>{ye(Q),localStorage.setItem("fanra_sb_enabled",Q.toString())},ml=async()=>{try{window.aistudio&&await window.aistudio.openSelectKey()}catch(Q){console.error(Q)}},Ot=(Q,_e,Fe,je)=>{M({data:Q,mimeType:_e,width:Fe,height:je})},gl=(Q,_e,Fe)=>{o(Q),l(_e),h(Fe),g(!1)},Ls=()=>{o(null),l(null),h(xx),C([]),Fs(),R([]),Ce(!1)},Jr=()=>s(Q=>Q==="id"?"en":"id"),dd=(Q,_e)=>{if(Q)try{navigator.clipboard.writeText(Q).then(()=>{ee(_e),setTimeout(()=>ee(null),2e3)})}catch{ee(_e),setTimeout(()=>ee(null),2e3)}},hd=Q=>{se(_e=>_e===Q?null:Q)},Yr=Q=>{const _e=[];if(Q.text){const je=Q.text.split(/(```[\w-]*\n[\s\S]*?```)/g).map((et,Je)=>{if(et.startsWith("```")){const $e=et.match(/```([\w-]*)\n([\s\S]*?)```/);return $e?u.jsx(YF,{language:$e[1],code:$e[2]},Je):null}return u.jsx("div",{children:et.split("***").map(($e,zt)=>u.jsxs("div",{children:[zt>0&&u.jsx("div",{className:"h-px bg-slate-200 my-4 w-full"}),u.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:$e.split(/\*\*(.*?)\*\*/g).map((Xt,Sn)=>{if(Sn%2===1)return u.jsx("strong",{className:"font-bold text-slate-900",children:Xt},Sn);const nt=Xt.split(/\[(.*?)\]\((.*?)\)/g);if(nt.length>1){const mt=[];for(let ft=0;ft<nt.length;ft+=3)mt.push(nt[ft]),ft+1<nt.length&&mt.push(u.jsx("a",{href:nt[ft+2],target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 underline font-medium",children:nt[ft+1]},ft));return u.jsx(Nx.Fragment,{children:mt},Sn)}return Xt})})]},zt))},Je)});_e.push(u.jsx("div",{children:je},"text"))}return _e},fd=async()=>{if(!b||!v)return;if(!St()&&c<v.cost){P({isProcessing:!1,progress:"",error:ve.insufficientCredits});return}P({isProcessing:!0,progress:ve.initializing,error:null}),B(null);const Q=v.id===mn.BACKGROUND_REMOVER,_e=Ge(),Fe=Tn();try{let je="",et=!1;if(Q&&_e&&ue&&!et)try{P($e=>({...$e,progress:ve.processingStandard})),je=await jF(b.data,_e),et=!0}catch{console.warn("Standard Engine failed")}if(!et&&(Q||!Q)&&!et&&Fe.length>0)try{P($e=>({...$e,progress:ve.processingAI})),je=await AF({image:b,tool:v.id,prompt:v.id===mn.CREATIVE_REMIX?k:void 0,apiKeys:Fe}),Q&&(P($e=>({...$e,progress:ve.refining})),je=await VF(je)),et=!0}catch($e){console.warn("Gemini failed",$e)}if(!et||!je)throw new Error("No available API Keys or Services found/enabled.");He(v.cost),B(je),P({isProcessing:!1,progress:"",error:null})}catch(je){console.error("Execution Error:",je);let et=ve.serviceBusy;const Je=(je.message||"").toLowerCase();Je.includes("network")||Je.includes("fetch")?et=ve.networkError:Je.includes("memory")||Je.includes("oom")?et=ve.memoryError:(Je.includes("no available api")||Je.includes("enabled"))&&(et=ve.insufficientCredits),P({isProcessing:!1,progress:"",error:et})}},pd=()=>{ie.current&&(ie.current.abort(),ie.current=null,P(Q=>({...Q,isProcessing:!1})))},Vs=async Q=>{var Sn;if(Q.preventDefault(),!D.trim()&&K.length===0)return;const _e={id:Date.now().toString(),role:"user",text:D,timestamp:Date.now(),attachments:K.length>0?[...K]:void 0};R(nt=>[...nt,_e]),S(""),he([]),Ae.current&&(Ae.current.style.height="auto"),a&&Dy(a,_e);const Fe=Tn(),je=(Date.now()+1).toString(),et={id:je,role:"model",text:"",timestamp:Date.now()};R(nt=>[...nt,et]);let Je="",$e="gemini";const zt=new AbortController;ie.current=zt,P(nt=>({...nt,isProcessing:!0}));try{const nt=await LF(_e.text,Fe,j,r,_e.attachments,ft=>{R(js=>js.map(wi=>wi.id===je?{...wi,text:ft}:wi))},H,ce,{apiKey:re,cx:O},zt.signal);Je=nt.text,$e=nt.source;const mt=Je.includes(ve.chatFallbackError)||Je.includes("Maaf, informasi ini belum ada")||Je.includes("Sorry, this info is not");_e.text&&!mt&&$e!=="weather"&&$e!=="country_fact"&&kP(_e.text,Je)}catch(nt){if(nt.name==="AbortError"||nt.message==="Request cancelled by user")console.log("Generation stopped by user"),Je=((Sn=j.find(mt=>mt.id===je))==null?void 0:Sn.text)||" (Stopped)";else{console.warn("API Call Failed",nt);const mt=(nt.message||"").toLowerCase();if(mt.includes("all chat keys failed")||mt.includes("429")||mt.includes("quota"))Je="hehe api key gua abis, mau ga mau ya harus aktifin mode knowladge di pengaturan atau ngga kamu bisa kasih aku api key kanu dan ada di pengaturan juga hehe, nah saat api key habis maka ga bisa ngirim pesan lagi ya, bisa jika udah ada api key lagi oke, atau ngga ya pake mode knowladge itu baru bisa, bilang aja knowladge itu terbatas karena yaa itu deh belum ada banyak oke",Ce(!0),$e="gemini";else{let ft=_e.text?await sb(_e.text):null;ft?(Je=`${ft} ${ve.chatOfflineMode}`,$e="knowledge_base"):(Je=ve.chatFallbackError,$e="gemini")}}R(mt=>mt.map(ft=>ft.id===je?{...ft,text:Je}:ft))}finally{P(nt=>({...nt,isProcessing:!1})),ie.current=null}const Xt={...et,text:Je,source:$e};R(nt=>nt.map(mt=>mt.id===je?Xt:mt)),a&&Dy(a,Xt)},Ao=()=>{var Q;(Q=ze.current)==null||Q.click()},No=Q=>{const _e=Q.target.files;if(!_e)return;const Fe=[],je=3-K.length,et=Math.min(_e.length,je);if(et===0&&_e.length>0){alert("Maximum 3 images allowed.");return}let Je=0;for(let $e=0;$e<et;$e++){const zt=_e[$e],Xt=new FileReader;Xt.onload=Sn=>{var ft;const mt=((ft=Sn.target)==null?void 0:ft.result).split(",")[1];Fe.push({data:mt,mimeType:zt.type,name:zt.name}),Je++,Je===et&&he(js=>[...js,...Fe])},Xt.readAsDataURL(zt)}Q.target.value=""},yi=Q=>{he(_e=>_e.filter((Fe,je)=>je!==Q))},pr=Q=>{Q.preventDefault(),Q.stopPropagation(),v||le(!0)},yl=Q=>{Q.preventDefault(),Q.stopPropagation(),le(!1)},vl=Q=>{if(Q.preventDefault(),Q.stopPropagation(),le(!1),v)return;const _e=Q.dataTransfer.files;if(!_e)return;const Fe=[],je=3-K.length,et=Math.min(_e.length,je);if(et===0&&_e.length>0){alert("Maximum 3 images allowed.");return}let Je=0;for(let $e=0;$e<et;$e++){const zt=_e[$e];if(!zt.type.startsWith("image/"))continue;const Xt=new FileReader;Xt.onload=Sn=>{var ft;const mt=((ft=Sn.target)==null?void 0:ft.result).split(",")[1];Fe.push({data:mt,mimeType:zt.type,name:zt.name}),Je++,Je===et&&he(js=>[...js,...Fe])},Xt.readAsDataURL(zt)}},vi=()=>{b&&(A.isProcessing||V)?(be("back"),W(!0)):Fs()},Ro=()=>{W(!1),Z==="back"?Fs():Z==="change_photo"&&(M(null),B(null),P({isProcessing:!1,progress:"",error:null})),be(null)},Fs=()=>{M(null),B(null),_(null),N(""),P({isProcessing:!1,progress:"",error:null})},Po=()=>{Fs(),R([]),Ce(!1)},md=St(),xi=i||{name:"Tamu"},xl=x?lh:lh.slice(0,3);return u.jsxs("div",{className:"flex h-[100dvh] bg-white font-sans text-primary overflow-hidden relative",onDragOver:pr,onDragLeave:yl,onDrop:vl,children:[e&&u.jsx($F,{onEnter:()=>n(!1)}),$&&u.jsx("div",{className:"absolute inset-0 z-[100] bg-primary/10 backdrop-blur-sm border-4 border-primary border-dashed m-4 rounded-3xl flex items-center justify-center pointer-events-none animate-fade-in",children:u.jsxs("div",{className:"bg-white px-8 py-4 rounded-2xl shadow-xl flex items-center gap-3",children:[u.jsx(S0,{className:"w-6 h-6 text-primary"}),u.jsx("span",{className:"font-bold text-lg text-primary",children:"Drop files to send"})]})}),m&&u.jsx("div",{className:"fixed inset-0 z-[60] bg-white",children:u.jsx(zF,{onLogin:gl,language:r,onToggleLanguage:Jr,onClose:()=>g(!1)})}),u.jsx(QF,{isOpen:bt,onClose:()=>En(!1)}),u.jsx(OF,{isOpen:Be,onClose:()=>Le(!1),removeBgKey:Ze,onSaveRemoveBgKey:bn,storedApiKeys:ot,onAddApiKey:hn,onDeleteApiKey:Bt,onToggleApiKey:Qt,onSelectGoogleKey:ml,knowledgeMode:H,onToggleKnowledgeMode:Ir,wikiEnabled:ce,onToggleWiki:er,removeBgEnabled:ue,onToggleRemoveBg:gi,supabaseEnabled:pe,onToggleSupabase:Ds,googleSearchKey:re,googleSearchCx:O,onSaveGoogleSearch:dn,language:r}),u.jsx(rd,{isOpen:Ut,title:ve.confirmTitle,description:ve.confirmDesc,confirmText:ve.yesChange,onConfirm:Ro,onCancel:()=>W(!1)}),u.jsx(GF,{isOpen:y,onClose:()=>E(!1),onNewChat:Po,user:i,onLogout:Ls,onOpenLogin:()=>g(!0),credits:c,isUnlimited:md,language:r,tools:lh,onSelectTool:_,onExit:t}),u.jsxs("div",{className:"flex-1 flex flex-col h-full relative w-full overflow-hidden bg-slate-50/50",children:[u.jsx("header",{className:"absolute top-0 left-0 right-0 z-30 p-4 pointer-events-none",children:u.jsxs("div",{className:"max-w-5xl mx-auto bg-white/80 backdrop-blur-xl border border-white/40 shadow-lg shadow-slate-200/50 rounded-2xl px-4 py-3 flex items-center justify-between pointer-events-auto",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>E(!y),className:"p-2 rounded-xl hover:bg-slate-100 text-slate-600 transition-colors",children:u.jsx(F_,{className:"w-5 h-5"})}),u.jsx("div",{className:"font-bold text-lg tracking-tight bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent hidden md:block",children:"Fanra Studio"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{onClick:Jr,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-full text-xs font-semibold text-slate-600 transition-all hover:shadow-sm active:scale-95",children:[u.jsx(lr,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:r.toUpperCase()})]}),u.jsxs("button",{onClick:()=>Le(!0),className:"p-2 text-slate-400 hover:text-primary hover:bg-slate-100 rounded-full transition-all relative",children:[u.jsx(nf,{className:"w-5 h-5"}),Ie&&u.jsx("span",{className:"absolute top-1.5 right-1.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]})]})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto pt-24 px-4 scroll-smooth custom-scrollbar",children:u.jsxs("div",{className:"max-w-3xl mx-auto min-h-full flex flex-col pb-4",children:[j.length===0&&!v&&u.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center py-10 animate-fade-in-up",children:[u.jsxs("div",{className:"mb-8 text-center",children:[u.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 mb-3 tracking-tight",children:[ve.heroTitle," ",xi.name]}),u.jsx("p",{className:"text-slate-500 text-lg",children:ve.heroSubtitle})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-5 w-full max-w-2xl px-2",children:[xl.map(Q=>u.jsxs("button",{onClick:()=>_(Q),className:"flex flex-col items-center text-center p-4 md:p-6 bg-white border border-slate-100 rounded-2xl shadow-sm hover:border-primary/20 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group h-full",children:[u.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 ${Q.color} rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110 shadow-sm`,children:Q.icon}),u.jsx("span",{className:"text-xs md:text-sm font-bold text-slate-700 leading-tight",children:ve[Q.nameKey]}),u.jsx("span",{className:"hidden md:block text-[10px] text-slate-400 mt-2 leading-tight",children:ve[Q.descKey]})]},Q.id)),u.jsxs("button",{onClick:()=>T(!x),className:`flex flex-col items-center justify-center text-center p-4 md:p-6 bg-slate-50 border border-slate-200 border-dashed rounded-2xl hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-300 group h-full ${x?"":"col-start-2"}`,children:[u.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-slate-100 text-slate-400 rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110",children:u.jsx(Fp,{className:"w-6 h-6"})}),u.jsx("span",{className:"text-xs md:text-sm font-bold text-slate-500 group-hover:text-slate-700 leading-tight",children:x?ve.lessTools:ve.moreTools})]})]})]}),j.map(Q=>u.jsxs("div",{className:`flex flex-col mb-6 animate-fade-in ${Q.role==="user"?"items-end":"items-start"}`,children:[Q.attachments&&Q.attachments.length>0&&u.jsx("div",{className:`flex flex-wrap gap-2 mb-2 max-w-[85%] ${Q.role==="user"?"justify-end":"justify-start"}`,children:Q.attachments.map((_e,Fe)=>u.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200/50 shadow-sm transition-transform hover:scale-[1.02]",children:u.jsx("img",{src:`data:${_e.mimeType};base64,${_e.data}`,alt:_e.name,className:"h-32 w-auto object-cover md:h-48 rounded-lg bg-slate-100"})},Fe))}),(Q.text||Q.role==="model"&&!Q.text)&&u.jsxs("div",{className:`flex flex-col gap-1 max-w-lg lg:max-w-2xl ${Q.role==="user"?"items-end":"items-start"}`,children:[u.jsx("div",{className:`relative px-5 py-3.5 rounded-2xl text-sm leading-relaxed shadow-sm break-words group w-full ${Q.role==="user"?"bg-white text-slate-800 rounded-tr-sm border border-slate-100 shadow-slate-200/50":"bg-transparent text-slate-700 p-0 shadow-none"}`,children:Q.role==="model"&&!Q.text?u.jsxs("div",{className:"flex gap-1.5 h-5 items-center",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-100"}),u.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-200"})]}):Yr(Q)}),u.jsxs("div",{className:`flex items-center gap-2 mt-1 px-1 ${Q.role==="user"?"justify-end":"justify-start"}`,children:[Q.role==="model"&&Q.source&&Q.source!=="gemini"&&u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>hd(Q.id),className:`p-1.5 rounded-full transition-all ${z===Q.id?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-400 hover:text-slate-600"}`,title:"Info Sumber",children:u.jsx(WI,{className:"w-3.5 h-3.5"})}),z===Q.id&&u.jsxs("div",{className:"absolute bottom-8 left-0 z-10 bg-white border border-slate-200 rounded-xl shadow-xl p-2 min-w-[120px] animate-fade-in-up origin-bottom-left flex flex-col gap-1",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider px-1",children:"Sumber Data"}),u.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg bg-slate-50 text-xs font-semibold text-slate-700",children:[Q.source==="wikipedia"&&u.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center font-serif font-bold text-slate-600",children:"W"}),Q.source==="knowledge_base"&&u.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center text-indigo-500 font-bold",children:"DB"}),Q.source==="google_search"&&u.jsx(j_,{className:"w-3.5 h-3.5 text-orange-500"}),Q.source==="weather"&&u.jsx(KI,{className:"w-3.5 h-3.5 text-blue-400"}),Q.source==="country_fact"&&u.jsx(JI,{className:"w-3.5 h-3.5 text-red-500"}),u.jsx("span",{children:Q.source==="wikipedia"?"Wikipedia":Q.source==="knowledge_base"?"Database":Q.source==="weather"?"Open-Meteo":Q.source==="country_fact"?"RestCountries":Q.source==="google_search"?"Google":"Unknown"})]})]})]}),Q.text&&u.jsx("button",{onClick:()=>dd(Q.text,Q.id),className:`p-1.5 rounded-full transition-all ${ne===Q.id?"bg-green-100 text-green-600":"bg-white border border-slate-100 text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:ne===Q.id?u.jsx(si,{className:"w-3.5 h-3.5"}):u.jsx(U_,{className:"w-3.5 h-3.5"})})]})]})]},Q.id)),v&&u.jsxs("div",{className:"w-full animate-fade-in py-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("button",{onClick:vi,className:"text-xs flex items-center gap-1 text-slate-500 hover:text-primary px-3 py-1.5 bg-white border border-slate-200 rounded-full shadow-sm hover:shadow transition-all",children:[u.jsx(oo,{className:"w-4 h-4"})," ",ve.back]}),u.jsx("span",{className:"font-bold text-sm text-slate-700 bg-white px-3 py-1 rounded-full border border-slate-100 shadow-sm",children:ve[v.nameKey]})]}),b?u.jsxs("div",{className:"space-y-4",children:[!V&&!A.isProcessing&&u.jsx("div",{className:"bg-slate-100 p-4 rounded-2xl border border-slate-200/60 max-w-sm mx-auto shadow-inner",children:u.jsx("img",{src:`data:${b.mimeType};base64,${b.data}`,className:"rounded-xl max-h-60 mx-auto object-contain shadow-sm"})}),v.id===mn.CREATIVE_REMIX&&!V&&u.jsx("textarea",{className:"w-full bg-white border border-slate-200 rounded-2xl p-4 text-sm focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none shadow-sm transition-all",placeholder:ve.aiPromptPlaceholder,value:k,onChange:Q=>N(Q.target.value)}),!V&&!A.isProcessing&&u.jsx("button",{onClick:fd,disabled:v.id===mn.CREATIVE_REMIX&&!k.trim(),className:"w-full py-4 bg-primary text-white rounded-2xl font-bold shadow-xl shadow-slate-900/10 active:scale-95 transition-all hover:-translate-y-0.5",children:ve.generateMagic}),(A.isProcessing||V)&&u.jsx(BF,{originalImage:b,resultImageBase64:V,isProcessing:A.isProcessing,processingText:A.progress,onReset:vi,language:r})]}):u.jsx(UF,{onImageSelect:Ot,language:r})]}),A.isProcessing&&v&&u.jsx("div",{className:"flex gap-4 animate-fade-in pl-5",children:u.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce"}),u.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-100"}),u.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-200"})]})}),u.jsx("div",{ref:ke})]})}),!v&&u.jsx("div",{className:"shrink-0 w-full px-4 pb-6 pt-2 z-40 bg-slate-50/50 backdrop-blur-sm",children:u.jsxs("div",{className:"max-w-3xl mx-auto",children:[Ie&&u.jsx("div",{className:"mb-3 animate-fade-in-up",children:u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 flex items-center justify-between shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[u.jsx(el,{className:"w-5 h-5"}),u.jsx("span",{className:"text-xs font-bold",children:"Limit Chat Habis."})]}),u.jsx("button",{onClick:()=>En(!0),className:"text-xs font-bold text-white bg-red-500 hover:bg-red-600 px-3 py-1.5 rounded-lg transition-colors shadow-sm",children:"Cara Dapet API Key?"})]})}),u.jsxs("form",{onSubmit:Vs,className:`relative flex flex-col bg-white rounded-3xl border shadow-2xl shadow-slate-200/60 transition-all duration-300 focus-within:shadow-xl ${Ie?"border-red-200 opacity-80":"border-slate-200 focus-within:border-slate-300"}`,children:[K.length>0&&u.jsxs("div",{className:"p-3 border-b border-slate-100 bg-slate-50 flex items-start gap-3 animate-fade-in overflow-x-auto custom-scrollbar rounded-t-[22px]",children:[K.map((Q,_e)=>u.jsxs("div",{className:"relative group flex-shrink-0",children:[u.jsx("img",{src:`data:${Q.mimeType};base64,${Q.data}`,alt:"Preview",className:"h-16 w-16 object-cover rounded-lg border border-slate-200 shadow-sm"}),u.jsx("button",{type:"button",onClick:()=>yi(_e),className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full p-0.5 shadow-md hover:bg-red-600 transition-colors",children:u.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},_e)),K.length<3&&u.jsx("div",{onClick:Ao,className:"h-16 w-16 rounded-lg border-2 border-dashed border-slate-300 flex items-center justify-center cursor-pointer hover:border-primary hover:bg-white transition-colors flex-shrink-0 text-slate-400 hover:text-primary",children:u.jsx("span",{className:"text-xs font-bold",children:"+"})})]}),u.jsxs("div",{className:"flex items-end gap-1.5 p-2.5",children:[u.jsxs("div",{className:"relative",children:[u.jsx("button",{type:"button",onClick:()=>L(!q),className:"p-2.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors flex-shrink-0 mb-0.5",children:u.jsx($I,{className:"w-5 h-5"})}),q&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>L(!1)}),u.jsxs("div",{className:"absolute bottom-12 left-0 w-48 bg-white border border-slate-200 rounded-xl shadow-xl z-[60] py-1 overflow-hidden animate-fade-in-up origin-bottom-left",children:[u.jsxs("button",{type:"button",onClick:()=>{Po(),L(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-red-500 hover:bg-red-50 flex items-center gap-2",children:[u.jsx(_s,{className:"w-4 h-4"}),"Clear Chat"]}),u.jsxs("button",{type:"button",onClick:()=>{Le(!0),L(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-2",children:[u.jsx(nf,{className:"w-4 h-4"}),"Settings"]})]})]})]}),u.jsx("input",{type:"file",ref:ze,className:"hidden",accept:"image/*",multiple:!0,onChange:No}),u.jsx("button",{type:"button",onClick:Ao,className:"p-2.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors flex-shrink-0 mb-0.5",children:u.jsx(S0,{className:"w-5 h-5"})}),u.jsx("textarea",{ref:Ae,value:D,onChange:Q=>S(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&!Q.shiftKey&&(Q.preventDefault(),Vs(Q))},disabled:Ie,placeholder:Ie?"Chat Terkunci (Limit Habis). Tambah Key dulu ya.":H?"(Knowledge Mode Active)":K.length>0?ve.aiPromptPlaceholder:ve.chatPlaceholder,className:"flex-1 bg-transparent border-none focus:ring-0 focus:outline-none resize-none max-h-32 py-3 px-2 text-sm text-primary placeholder:text-slate-400 leading-relaxed custom-scrollbar disabled:text-slate-400 disabled:cursor-not-allowed",rows:1,style:{minHeight:"44px",overflowY:"auto"}}),A.isProcessing&&!v?u.jsx("button",{type:"button",onClick:pd,className:"p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 bg-slate-900 text-white hover:bg-slate-700 animate-pulse",title:"Stop Generation",children:u.jsx(YI,{className:"w-5 h-5"})}):u.jsx("button",{type:"submit",disabled:!D.trim()&&K.length===0||A.isProcessing||Ie,className:`p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 ${H?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-primary text-white hover:bg-slate-800 disabled:bg-slate-200 disabled:text-slate-400 disabled:cursor-not-allowed"}`,children:u.jsx("svg",{className:"w-5 h-5 transform rotate-90",fill:"currentColor",viewBox:"0 0 20 20",children:u.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})]})})]})]})}function iu(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Zb={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,s,i){function o(c,h){if(!s[c]){if(!r[c]){var m=typeof iu=="function"&&iu;if(!h&&m)return m(c,!0);if(a)return a(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var y=s[c]={exports:{}};r[c][0].call(y.exports,function(E){var x=r[c][1][E];return o(x||E)},y,y.exports,n,r,s,i)}return s[c].exports}for(var a=typeof iu=="function"&&iu,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var c,h,m,g,y,E,x,T=[],v=0,_=l.length,b=_,M=i.getTypeOf(l)!=="string";v<l.length;)b=_-v,m=M?(c=l[v++],h=v<_?l[v++]:0,v<_?l[v++]:0):(c=l.charCodeAt(v++),h=v<_?l.charCodeAt(v++):0,v<_?l.charCodeAt(v++):0),g=c>>2,y=(3&c)<<4|h>>4,E=1<b?(15&h)<<2|m>>6:64,x=2<b?63&m:64,T.push(a.charAt(g)+a.charAt(y)+a.charAt(E)+a.charAt(x));return T.join("")},s.decode=function(l){var c,h,m,g,y,E,x=0,T=0,v="data:";if(l.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var _,b=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&b--,l.charAt(l.length-2)===a.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=o.uint8array?new Uint8Array(0|b):new Array(0|b);x<l.length;)c=a.indexOf(l.charAt(x++))<<2|(g=a.indexOf(l.charAt(x++)))>>4,h=(15&g)<<4|(y=a.indexOf(l.charAt(x++)))>>2,m=(3&y)<<6|(E=a.indexOf(l.charAt(x++))),_[T++]=c,y!==64&&(_[T++]=h),E!==64&&(_[T++]=m);return _}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(h,m,g,y,E){this.compressedSize=h,this.uncompressedSize=m,this.crc32=g,this.compression=y,this.compressedContent=E}c.prototype={getContentWorker:function(){var h=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),m=this;return h.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(h,m,g){return h.pipe(new a).pipe(new l("uncompressedSize")).pipe(m.compressWorker(g)).pipe(new l("compressedSize")).withStreamInfo("compression",m)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(c,h,m,g){var y=o,E=g+m;c^=-1;for(var x=g;x<E;x++)c=c>>>8^y[255&(c^h[x])];return-1^c}(0|l,a,a.length,0):function(c,h,m,g){var y=o,E=g+m;c^=-1;for(var x=g;x<E;x++)c=c>>>8^y[255&(c^h.charCodeAt(x))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=i?"uint8array":"array";function h(m,g){l.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=g,this.meta={}}s.magic="\b\0",a.inherits(h,l),h.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,m.data),!1)},h.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(g){m.push({data:g,meta:m.meta})}},s.compressWorker=function(m){return new h("Deflate",m)},s.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(y,E){var x,T="";for(x=0;x<E;x++)T+=String.fromCharCode(255&y),y>>>=8;return T}function o(y,E,x,T,v,_){var b,M,V=y.file,B=y.compression,k=_!==c.utf8encode,N=a.transformTo("string",_(V.name)),A=a.transformTo("string",c.utf8encode(V.name)),P=V.comment,j=a.transformTo("string",_(P)),R=a.transformTo("string",c.utf8encode(P)),D=A.length!==V.name.length,S=R.length!==P.length,K="",he="",ne="",ee=V.dir,$=V.date,le={crc32:0,compressedSize:0,uncompressedSize:0};E&&!x||(le.crc32=y.crc32,le.compressedSize=y.compressedSize,le.uncompressedSize=y.uncompressedSize);var q=0;E&&(q|=8),k||!D&&!S||(q|=2048);var L=0,z=0;ee&&(L|=16),v==="UNIX"?(z=798,L|=function(ie,ke){var ze=ie;return ie||(ze=ke?16893:33204),(65535&ze)<<16}(V.unixPermissions,ee)):(z=20,L|=function(ie){return 63&(ie||0)}(V.dosPermissions)),b=$.getUTCHours(),b<<=6,b|=$.getUTCMinutes(),b<<=5,b|=$.getUTCSeconds()/2,M=$.getUTCFullYear()-1980,M<<=4,M|=$.getUTCMonth()+1,M<<=5,M|=$.getUTCDate(),D&&(he=i(1,1)+i(h(N),4)+A,K+="up"+i(he.length,2)+he),S&&(ne=i(1,1)+i(h(j),4)+R,K+="uc"+i(ne.length,2)+ne);var se="";return se+=`
\0`,se+=i(q,2),se+=B.magic,se+=i(b,2),se+=i(M,2),se+=i(le.crc32,4),se+=i(le.compressedSize,4),se+=i(le.uncompressedSize,4),se+=i(N.length,2),se+=i(K.length,2),{fileRecord:m.LOCAL_FILE_HEADER+se+N+K,dirRecord:m.CENTRAL_FILE_HEADER+i(z,2)+se+i(j.length,2)+"\0\0\0\0"+i(L,4)+i(T,4)+N+K+j}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),h=n("../crc32"),m=n("../signature");function g(y,E,x,T){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=x,this.encodeFileName=T,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(g,l),g.prototype.push=function(y){var E=y.meta.percent||0,x=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,l.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:x?(E+100*(x-T-1))/x:100}}))},g.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var E=this.streamFiles&&!y.file.dir;if(E){var x=o(y,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(y){this.accumulate=!1;var E=this.streamFiles&&!y.file.dir,x=o(y,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),E)this.push({data:function(T){return m.DATA_DESCRIPTOR+i(T.crc32,4)+i(T.compressedSize,4)+i(T.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var y=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var x=this.bytesWritten-y,T=function(v,_,b,M,V){var B=a.transformTo("string",V(M));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(v,2)+i(v,2)+i(_,4)+i(b,4)+i(B.length,2)+B}(this.dirRecords.length,x,y,this.zipComment,this.encodeFileName);this.push({data:T,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(y){this._sources.push(y);var E=this;return y.on("data",function(x){E.processChunk(x)}),y.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),y.on("error",function(x){E.error(x)}),this},g.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(y){var E=this._sources;if(!l.prototype.error.call(this,y))return!1;for(var x=0;x<E.length;x++)try{E[x].error(y)}catch{}return!0},g.prototype.lock=function(){l.prototype.lock.call(this);for(var y=this._sources,E=0;E<y.length;E++)y[E].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,l,c){var h=new o(l.streamFiles,c,l.platform,l.encodeFileName),m=0;try{a.forEach(function(g,y){m++;var E=function(_,b){var M=_||b,V=i[M];if(!V)throw new Error(M+" is not a valid compression method !");return V}(y.options.compression,l.compression),x=y.options.compressionOptions||l.compressionOptions||{},T=y.dir,v=y.date;y._compressWorker(E,x).withStreamInfo("file",{name:g,dir:T,date:v,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(h)}),h.entriesCount=m}catch(g){h.error(g)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),h=n("./nodejsUtils");function m(g){return new o.Promise(function(y,E){var x=g.decompressed.getContentWorker().pipe(new c);x.on("error",function(T){E(T)}).on("end",function(){x.streamInfo.crc32!==g.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(g,y){var E=this;return y=i.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),h.isNode&&h.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",g,!0,y.optimizedBinaryString,y.base64).then(function(x){var T=new l(y);return T.load(x),T}).then(function(x){var T=[o.Promise.resolve(x)],v=x.files;if(y.checkCRC32)for(var _=0;_<v.length;_++)T.push(m(v[_]));return o.Promise.all(T)}).then(function(x){for(var T=x.shift(),v=T.files,_=0;_<v.length;_++){var b=v[_],M=b.fileNameStr,V=i.resolve(b.fileNameStr);E.file(V,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:y.createFolders}),b.dir||(E.file(V).unsafeOriginalName=M)}return T.zipComment.length&&(E.comment=T.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(h){c.push({data:h,meta:{percent:0}})}).on("error",function(h){c.isPaused?this.generatedError=h:c.error(h)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,l,c){i.call(this,l),this._helper=a;var h=this;a.on("data",function(m,g){h.push(m)||h._helper.pause(),c&&c(g)}).on("error",function(m){h.emit("error",m)}).on("end",function(){h.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(V,B,k){var N,A=a.getTypeOf(B),P=a.extend(k||{},h);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(V=v(V)),P.createFolders&&(N=T(V))&&_.call(this,N,!0);var j=A==="string"&&P.binary===!1&&P.base64===!1;k&&k.binary!==void 0||(P.binary=!j),(B instanceof m&&B.uncompressedSize===0||P.dir||!B||B.length===0)&&(P.base64=!1,P.binary=!0,B="",P.compression="STORE",A="string");var R=null;R=B instanceof m||B instanceof l?B:E.isNode&&E.isStream(B)?new x(V,B):a.prepareContent(V,B,P.binary,P.optimizedBinaryString,P.base64);var D=new g(V,R,P);this.files[V]=D}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),h=n("./defaults"),m=n("./compressedObject"),g=n("./zipObject"),y=n("./generate"),E=n("./nodejsUtils"),x=n("./nodejs/NodejsStreamInputAdapter"),T=function(V){V.slice(-1)==="/"&&(V=V.substring(0,V.length-1));var B=V.lastIndexOf("/");return 0<B?V.substring(0,B):""},v=function(V){return V.slice(-1)!=="/"&&(V+="/"),V},_=function(V,B){return B=B!==void 0?B:h.createFolders,V=v(V),this.files[V]||i.call(this,V,null,{dir:!0,createFolders:B}),this.files[V]};function b(V){return Object.prototype.toString.call(V)==="[object RegExp]"}var M={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(V){var B,k,N;for(B in this.files)N=this.files[B],(k=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&V(k,N)},filter:function(V){var B=[];return this.forEach(function(k,N){V(k,N)&&B.push(N)}),B},file:function(V,B,k){if(arguments.length!==1)return V=this.root+V,i.call(this,V,B,k),this;if(b(V)){var N=V;return this.filter(function(P,j){return!j.dir&&N.test(P)})}var A=this.files[this.root+V];return A&&!A.dir?A:null},folder:function(V){if(!V)return this;if(b(V))return this.filter(function(A,P){return P.dir&&V.test(A)});var B=this.root+V,k=_.call(this,B),N=this.clone();return N.root=k.name,N},remove:function(V){V=this.root+V;var B=this.files[V];if(B||(V.slice(-1)!=="/"&&(V+="/"),B=this.files[V]),B&&!B.dir)delete this.files[V];else for(var k=this.filter(function(A,P){return P.name.slice(0,V.length)===V}),N=0;N<k.length;N++)delete this.files[k[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(V){var B,k={};try{if((k=a.extend(V||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");a.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var N=k.comment||this.comment||"";B=y.generateWorker(this,k,N)}catch(A){(B=new l("error")).error(A)}return new c(B,k.type||"string",k.mimeType)},generateAsync:function(V,B){return this.generateInternalStream(V).accumulate(B)},generateNodeStream:function(V,B){return(V=V||{}).type||(V.type="nodebuffer"),this.generateInternalStream(V).toNodejsStream(B)}};r.exports=M},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),h=a.charCodeAt(2),m=a.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===l&&this.data[g+1]===c&&this.data[g+2]===h&&this.data[g+3]===m)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),h=a.charCodeAt(2),m=a.charCodeAt(3),g=this.readData(4);return l===g[0]&&c===g[1]&&h===g[2]&&m===g[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),h=n("./Uint8ArrayReader");r.exports=function(m){var g=i.getTypeOf(m);return i.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new c(m):o.uint8array?new h(i.transformTo("uint8array",m)):new a(i.transformTo("array",m)):new l(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(h){c.dataIsReady=!0,c.data=h,c.max=h&&h.length||0,c.type=i.getTypeOf(h),c.isPaused||c._tickAndRepeat()},function(h){c.error(h)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),h=n("../external"),m=null;if(c.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(E,x){return new h.Promise(function(T,v){var _=[],b=E._internalType,M=E._outputType,V=E._mimeType;E.on("data",function(B,k){_.push(B),x&&x(k)}).on("error",function(B){_=[],v(B)}).on("end",function(){try{var B=function(k,N,A){switch(k){case"blob":return i.newBlob(i.transformTo("arraybuffer",N),A);case"base64":return l.encode(N);default:return i.transformTo(k,N)}}(M,function(k,N){var A,P=0,j=null,R=0;for(A=0;A<N.length;A++)R+=N[A].length;switch(k){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(j=new Uint8Array(R),A=0;A<N.length;A++)j.set(N[A],P),P+=N[A].length;return j;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+k+"'")}}(b,_),V);T(B)}catch(k){v(k)}_=[]}).resume()})}function y(E,x,T){var v=x;switch(x){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=x,this._mimeType=T,i.checkSupport(v),this._worker=E.pipe(new o(v)),E.lock()}catch(_){this._worker=new a("error"),this._worker.error(_)}}y.prototype={accumulate:function(E){return g(this,E)},on:function(E,x){var T=this;return E==="data"?this._worker.on(E,function(v){x.call(T,v.data,v.meta)}):this._worker.on(E,function(){i.delay(x,arguments,T)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},E)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),h=0;h<256;h++)c[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;c[254]=c[254]=1;function m(){l.call(this,"utf-8 decode"),this.leftOver=null}function g(){l.call(this,"utf-8 encode")}s.utf8encode=function(y){return o.nodebuffer?a.newBufferFrom(y,"utf-8"):function(E){var x,T,v,_,b,M=E.length,V=0;for(_=0;_<M;_++)(64512&(T=E.charCodeAt(_)))==55296&&_+1<M&&(64512&(v=E.charCodeAt(_+1)))==56320&&(T=65536+(T-55296<<10)+(v-56320),_++),V+=T<128?1:T<2048?2:T<65536?3:4;for(x=o.uint8array?new Uint8Array(V):new Array(V),_=b=0;b<V;_++)(64512&(T=E.charCodeAt(_)))==55296&&_+1<M&&(64512&(v=E.charCodeAt(_+1)))==56320&&(T=65536+(T-55296<<10)+(v-56320),_++),T<128?x[b++]=T:(T<2048?x[b++]=192|T>>>6:(T<65536?x[b++]=224|T>>>12:(x[b++]=240|T>>>18,x[b++]=128|T>>>12&63),x[b++]=128|T>>>6&63),x[b++]=128|63&T);return x}(y)},s.utf8decode=function(y){return o.nodebuffer?i.transformTo("nodebuffer",y).toString("utf-8"):function(E){var x,T,v,_,b=E.length,M=new Array(2*b);for(x=T=0;x<b;)if((v=E[x++])<128)M[T++]=v;else if(4<(_=c[v]))M[T++]=65533,x+=_-1;else{for(v&=_===2?31:_===3?15:7;1<_&&x<b;)v=v<<6|63&E[x++],_--;1<_?M[T++]=65533:v<65536?M[T++]=v:(v-=65536,M[T++]=55296|v>>10&1023,M[T++]=56320|1023&v)}return M.length!==T&&(M.subarray?M=M.subarray(0,T):M.length=T),i.applyFromCharCode(M)}(y=i.transformTo(o.uint8array?"uint8array":"array",y))},i.inherits(m,l),m.prototype.processChunk=function(y){var E=i.transformTo(o.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=E;(E=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),E.set(x,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var T=function(_,b){var M;for((b=b||_.length)>_.length&&(b=_.length),M=b-1;0<=M&&(192&_[M])==128;)M--;return M<0||M===0?b:M+c[_[M]]>b?M:b}(E),v=E;T!==E.length&&(o.uint8array?(v=E.subarray(0,T),this.leftOver=E.subarray(T,E.length)):(v=E.slice(0,T),this.leftOver=E.slice(T,E.length))),this.push({data:s.utf8decode(v),meta:y.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=m,i.inherits(g,l),g.prototype.processChunk=function(y){this.push({data:s.utf8encode(y.data),meta:y.meta})},s.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(x){return x}function h(x,T){for(var v=0;v<x.length;++v)T[v]=255&x.charCodeAt(v);return T}n("setimmediate"),s.newBlob=function(x,T){s.checkSupport("blob");try{return new Blob([x],{type:T})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(x),v.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(x,T,v){var _=[],b=0,M=x.length;if(M<=v)return String.fromCharCode.apply(null,x);for(;b<M;)T==="array"||T==="nodebuffer"?_.push(String.fromCharCode.apply(null,x.slice(b,Math.min(b+v,M)))):_.push(String.fromCharCode.apply(null,x.subarray(b,Math.min(b+v,M)))),b+=v;return _.join("")},stringifyByChar:function(x){for(var T="",v=0;v<x.length;v++)T+=String.fromCharCode(x[v]);return T},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function g(x){var T=65536,v=s.getTypeOf(x),_=!0;if(v==="uint8array"?_=m.applyCanBeUsed.uint8array:v==="nodebuffer"&&(_=m.applyCanBeUsed.nodebuffer),_)for(;1<T;)try{return m.stringifyByChunk(x,v,T)}catch{T=Math.floor(T/2)}return m.stringifyByChar(x)}function y(x,T){for(var v=0;v<x.length;v++)T[v]=x[v];return T}s.applyFromCharCode=g;var E={};E.string={string:c,array:function(x){return h(x,new Array(x.length))},arraybuffer:function(x){return E.string.uint8array(x).buffer},uint8array:function(x){return h(x,new Uint8Array(x.length))},nodebuffer:function(x){return h(x,a.allocBuffer(x.length))}},E.array={string:g,array:c,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(x)}},E.arraybuffer={string:function(x){return g(new Uint8Array(x))},array:function(x){return y(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:c,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(new Uint8Array(x))}},E.uint8array={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:c,nodebuffer:function(x){return a.newBufferFrom(x)}},E.nodebuffer={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return E.nodebuffer.uint8array(x).buffer},uint8array:function(x){return y(x,new Uint8Array(x.length))},nodebuffer:c},s.transformTo=function(x,T){if(T=T||"",!x)return T;s.checkSupport(x);var v=s.getTypeOf(T);return E[v][x](T)},s.resolve=function(x){for(var T=x.split("/"),v=[],_=0;_<T.length;_++){var b=T[_];b==="."||b===""&&_!==0&&_!==T.length-1||(b===".."?v.pop():v.push(b))}return v.join("/")},s.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(x)?"nodebuffer":i.uint8array&&x instanceof Uint8Array?"uint8array":i.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(x){if(!i[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(x){var T,v,_="";for(v=0;v<(x||"").length;v++)_+="\\x"+((T=x.charCodeAt(v))<16?"0":"")+T.toString(16).toUpperCase();return _},s.delay=function(x,T,v){setImmediate(function(){x.apply(v||null,T||[])})},s.inherits=function(x,T){function v(){}v.prototype=T.prototype,x.prototype=new v},s.extend=function(){var x,T,v={};for(x=0;x<arguments.length;x++)for(T in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],T)&&v[T]===void 0&&(v[T]=arguments[x][T]);return v},s.prepareContent=function(x,T,v,_,b){return l.Promise.resolve(T).then(function(M){return i.blob&&(M instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(M))!==-1)&&typeof FileReader<"u"?new l.Promise(function(V,B){var k=new FileReader;k.onload=function(N){V(N.target.result)},k.onerror=function(N){B(N.target.error)},k.readAsArrayBuffer(M)}):M}).then(function(M){var V=s.getTypeOf(M);return V?(V==="arraybuffer"?M=s.transformTo("uint8array",M):V==="string"&&(b?M=o.decode(M):v&&_!==!0&&(M=function(B){return h(B,i.uint8array?new Uint8Array(B.length):new Array(B.length))}(M))),M):l.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function h(m){this.files=[],this.loadOptions=m}h.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(m)+")")}},isSignature:function(m,g){var y=this.reader.index;this.reader.setIndex(m);var E=this.reader.readString(4)===g;return this.reader.setIndex(y),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),g=c.uint8array?"uint8array":"array",y=o.transformTo(g,m);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,g,y,E=this.zip64EndOfCentralSize-44;0<E;)m=this.reader.readInt(2),g=this.reader.readInt(4),y=this.reader.readData(g),this.zip64ExtensibleData[m]={id:m,length:g,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,g;for(m=0;m<this.files.length;m++)g=this.files[m],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(m=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var g=m;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var E=g-y;if(0<E)this.isSignature(g,a.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),h=n("./compressions"),m=n("./support");function g(y,E){this.options=y,this.loadOptions=E}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var E,x;if(y.skip(22),this.fileNameLength=y.readInt(2),x=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((E=function(T){for(var v in h)if(Object.prototype.hasOwnProperty.call(h,v)&&h[v].magic===T)return h[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,E,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var E=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(E),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var E,x,T,v=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<v;)E=y.readInt(2),x=y.readInt(2),T=y.readData(x),this.extraFields[E]={id:E,length:x,value:T};y.setIndex(v)},handleUTF8:function(){var y=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(E!==null)this.fileNameStr=E;else{var x=o.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var v=o.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var E=i(y.value);return E.readInt(1)!==1||l(this.fileName)!==E.readInt(4)?null:c.utf8decode(E.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var E=i(y.value);return E.readInt(1)!==1||l(this.fileComment)!==E.readInt(4)?null:c.utf8decode(E.readData(y.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(E,x,T){this.name=E,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=x,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),h=n("./stream/GenericWorker");i.prototype={internalStream:function(E){var x=null,T="string";try{if(!E)throw new Error("No output type specified.");var v=(T=E.toLowerCase())==="string"||T==="text";T!=="binarystring"&&T!=="text"||(T="string"),x=this._decompressWorker();var _=!this._dataBinary;_&&!v&&(x=x.pipe(new l.Utf8EncodeWorker)),!_&&v&&(x=x.pipe(new l.Utf8DecodeWorker))}catch(b){(x=new h("error")).error(b)}return new o(x,T,"")},async:function(E,x){return this.internalStream(E).accumulate(x)},nodeStream:function(E,x){return this.internalStream(E||"nodebuffer").toNodejsStream(x)},_compressWorker:function(E,x){if(this._data instanceof c&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(T,E,x)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof h?this._data:new a(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<m.length;y++)i.prototype[m[y]]=g;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var c=0,h=new l(E),m=i.document.createTextNode("");h.observe(m,{characterData:!0}),o=function(){m.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var x=i.document.createElement("script");x.onreadystatechange=function(){E(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},i.document.documentElement.appendChild(x)}:function(){setTimeout(E,0)};else{var g=new i.MessageChannel;g.port1.onmessage=E,o=function(){g.port2.postMessage(0)}}var y=[];function E(){var x,T;a=!0;for(var v=y.length;v;){for(T=y,y=[],x=-1;++x<v;)T[x]();v=y.length}a=!1}r.exports=function(x){y.push(x)!==1||a||o()}}).call(this,typeof Rr<"u"?Rr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],h=["PENDING"];function m(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,v!==o&&x(this,v)}function g(v,_,b){this.promise=v,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function y(v,_,b){i(function(){var M;try{M=_(b)}catch(V){return a.reject(v,V)}M===v?a.reject(v,new TypeError("Cannot resolve promise with itself")):a.resolve(v,M)})}function E(v){var _=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof _=="function")return function(){_.apply(v,arguments)}}function x(v,_){var b=!1;function M(k){b||(b=!0,a.reject(v,k))}function V(k){b||(b=!0,a.resolve(v,k))}var B=T(function(){_(V,M)});B.status==="error"&&M(B.value)}function T(v,_){var b={};try{b.value=v(_),b.status="success"}catch(M){b.status="error",b.value=M}return b}(r.exports=m).prototype.finally=function(v){if(typeof v!="function")return this;var _=this.constructor;return this.then(function(b){return _.resolve(v()).then(function(){return b})},function(b){return _.resolve(v()).then(function(){throw b})})},m.prototype.catch=function(v){return this.then(null,v)},m.prototype.then=function(v,_){if(typeof v!="function"&&this.state===c||typeof _!="function"&&this.state===l)return this;var b=new this.constructor(o);return this.state!==h?y(b,this.state===c?v:_,this.outcome):this.queue.push(new g(b,v,_)),b},g.prototype.callFulfilled=function(v){a.resolve(this.promise,v)},g.prototype.otherCallFulfilled=function(v){y(this.promise,this.onFulfilled,v)},g.prototype.callRejected=function(v){a.reject(this.promise,v)},g.prototype.otherCallRejected=function(v){y(this.promise,this.onRejected,v)},a.resolve=function(v,_){var b=T(E,_);if(b.status==="error")return a.reject(v,b.value);var M=b.value;if(M)x(v,M);else{v.state=c,v.outcome=_;for(var V=-1,B=v.queue.length;++V<B;)v.queue[V].callFulfilled(_)}return v},a.reject=function(v,_){v.state=l,v.outcome=_;for(var b=-1,M=v.queue.length;++b<M;)v.queue[b].callRejected(_);return v},m.resolve=function(v){return v instanceof this?v:a.resolve(new this(o),v)},m.reject=function(v){var _=new this(o);return a.reject(_,v)},m.all=function(v){var _=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=v.length,M=!1;if(!b)return this.resolve([]);for(var V=new Array(b),B=0,k=-1,N=new this(o);++k<b;)A(v[k],k);return N;function A(P,j){_.resolve(P).then(function(R){V[j]=R,++B!==b||M||(M=!0,a.resolve(N,V))},function(R){M||(M=!0,a.reject(N,R))})}},m.race=function(v){var _=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=v.length,M=!1;if(!b)return this.resolve([]);for(var V=-1,B=new this(o);++V<b;)k=v[V],_.resolve(k).then(function(N){M||(M=!0,a.resolve(B,N))},function(N){M||(M=!0,a.reject(B,N))});var k;return B}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),h=Object.prototype.toString,m=0,g=-1,y=0,E=8;function x(v){if(!(this instanceof x))return new x(v);this.options=o.assign({level:g,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},v||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var b=i.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(b!==m)throw new Error(l[b]);if(_.header&&i.deflateSetHeader(this.strm,_.header),_.dictionary){var M;if(M=typeof _.dictionary=="string"?a.string2buf(_.dictionary):h.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(b=i.deflateSetDictionary(this.strm,M))!==m)throw new Error(l[b]);this._dict_set=!0}}function T(v,_){var b=new x(_);if(b.push(v,!0),b.err)throw b.msg||l[b.err];return b.result}x.prototype.push=function(v,_){var b,M,V=this.strm,B=this.options.chunkSize;if(this.ended)return!1;M=_===~~_?_:_===!0?4:0,typeof v=="string"?V.input=a.string2buf(v):h.call(v)==="[object ArrayBuffer]"?V.input=new Uint8Array(v):V.input=v,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new o.Buf8(B),V.next_out=0,V.avail_out=B),(b=i.deflate(V,M))!==1&&b!==m)return this.onEnd(b),!(this.ended=!0);V.avail_out!==0&&(V.avail_in!==0||M!==4&&M!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(V.output,V.next_out))):this.onData(o.shrinkBuf(V.output,V.next_out)))}while((0<V.avail_in||V.avail_out===0)&&b!==1);return M===4?(b=i.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===m):M!==2||(this.onEnd(m),!(V.avail_out=0))},x.prototype.onData=function(v){this.chunks.push(v)},x.prototype.onEnd=function(v){v===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Deflate=x,s.deflate=T,s.deflateRaw=function(v,_){return(_=_||{}).raw=!0,T(v,_)},s.gzip=function(v,_){return(_=_||{}).gzip=!0,T(v,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),h=n("./zlib/zstream"),m=n("./zlib/gzheader"),g=Object.prototype.toString;function y(x){if(!(this instanceof y))return new y(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||x&&x.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&!(15&T.windowBits)&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var v=i.inflateInit2(this.strm,T.windowBits);if(v!==l.Z_OK)throw new Error(c[v]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function E(x,T){var v=new y(T);if(v.push(x,!0),v.err)throw v.msg||c[v.err];return v.result}y.prototype.push=function(x,T){var v,_,b,M,V,B,k=this.strm,N=this.options.chunkSize,A=this.options.dictionary,P=!1;if(this.ended)return!1;_=T===~~T?T:T===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof x=="string"?k.input=a.binstring2buf(x):g.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(N),k.next_out=0,k.avail_out=N),(v=i.inflate(k,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&A&&(B=typeof A=="string"?a.string2buf(A):g.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,v=i.inflateSetDictionary(this.strm,B)),v===l.Z_BUF_ERROR&&P===!0&&(v=l.Z_OK,P=!1),v!==l.Z_STREAM_END&&v!==l.Z_OK)return this.onEnd(v),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&v!==l.Z_STREAM_END&&(k.avail_in!==0||_!==l.Z_FINISH&&_!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=a.utf8border(k.output,k.next_out),M=k.next_out-b,V=a.buf2string(k.output,b),k.next_out=M,k.avail_out=N-M,M&&o.arraySet(k.output,k.output,b,M,0),this.onData(V)):this.onData(o.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(P=!0)}while((0<k.avail_in||k.avail_out===0)&&v!==l.Z_STREAM_END);return v===l.Z_STREAM_END&&(_=l.Z_FINISH),_===l.Z_FINISH?(v=i.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===l.Z_OK):_!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(k.avail_out=0))},y.prototype.onData=function(x){this.chunks.push(x)},y.prototype.onEnd=function(x){x===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},s.Inflate=y,s.inflate=E,s.inflateRaw=function(x,T){return(T=T||{}).raw=!0,E(x,T)},s.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var h=c.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var m in h)h.hasOwnProperty(m)&&(l[m]=h[m])}}return l},s.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,h,m,g){if(c.subarray&&l.subarray)l.set(c.subarray(h,h+m),g);else for(var y=0;y<m;y++)l[g+y]=c[h+y]},flattenChunks:function(l){var c,h,m,g,y,E;for(c=m=0,h=l.length;c<h;c++)m+=l[c].length;for(E=new Uint8Array(m),c=g=0,h=l.length;c<h;c++)y=l[c],E.set(y,g),g+=y.length;return E}},a={arraySet:function(l,c,h,m,g){for(var y=0;y<m;y++)l[g+y]=c[h+y]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function h(m,g){if(g<65537&&(m.subarray&&a||!m.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(m,g));for(var y="",E=0;E<g;E++)y+=String.fromCharCode(m[E]);return y}l[254]=l[254]=1,s.string2buf=function(m){var g,y,E,x,T,v=m.length,_=0;for(x=0;x<v;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(E=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(E-56320),x++),_+=y<128?1:y<2048?2:y<65536?3:4;for(g=new i.Buf8(_),x=T=0;T<_;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(E=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(E-56320),x++),y<128?g[T++]=y:(y<2048?g[T++]=192|y>>>6:(y<65536?g[T++]=224|y>>>12:(g[T++]=240|y>>>18,g[T++]=128|y>>>12&63),g[T++]=128|y>>>6&63),g[T++]=128|63&y);return g},s.buf2binstring=function(m){return h(m,m.length)},s.binstring2buf=function(m){for(var g=new i.Buf8(m.length),y=0,E=g.length;y<E;y++)g[y]=m.charCodeAt(y);return g},s.buf2string=function(m,g){var y,E,x,T,v=g||m.length,_=new Array(2*v);for(y=E=0;y<v;)if((x=m[y++])<128)_[E++]=x;else if(4<(T=l[x]))_[E++]=65533,y+=T-1;else{for(x&=T===2?31:T===3?15:7;1<T&&y<v;)x=x<<6|63&m[y++],T--;1<T?_[E++]=65533:x<65536?_[E++]=x:(x-=65536,_[E++]=55296|x>>10&1023,_[E++]=56320|1023&x)}return h(_,E)},s.utf8border=function(m,g){var y;for((g=g||m.length)>m.length&&(g=m.length),y=g-1;0<=y&&(192&m[y])==128;)y--;return y<0||y===0?g:y+l[m[y]]>g?y:g}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,l){for(var c=65535&i|0,h=i>>>16&65535|0,m=0;a!==0;){for(a-=m=2e3<a?2e3:a;h=h+(c=c+o[l++]|0)|0,--m;);c%=65521,h%=65521}return c|h<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,c){var h=i,m=c+l;o^=-1;for(var g=c;g<m;g++)o=o>>>8^h[255&(o^a[g])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),h=n("./messages"),m=0,g=4,y=0,E=-2,x=-1,T=4,v=2,_=8,b=9,M=286,V=30,B=19,k=2*M+1,N=15,A=3,P=258,j=P+A+1,R=42,D=113,S=1,K=2,he=3,ne=4;function ee(C,re){return C.msg=h[re],re}function $(C){return(C<<1)-(4<C?9:0)}function le(C){for(var re=C.length;0<=--re;)C[re]=0}function q(C){var re=C.state,X=re.pending;X>C.avail_out&&(X=C.avail_out),X!==0&&(o.arraySet(C.output,re.pending_buf,re.pending_out,X,C.next_out),C.next_out+=X,re.pending_out+=X,C.total_out+=X,C.avail_out-=X,re.pending-=X,re.pending===0&&(re.pending_out=0))}function L(C,re){a._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,re),C.block_start=C.strstart,q(C.strm)}function z(C,re){C.pending_buf[C.pending++]=re}function se(C,re){C.pending_buf[C.pending++]=re>>>8&255,C.pending_buf[C.pending++]=255&re}function ie(C,re){var X,O,U=C.max_chain_length,H=C.strstart,oe=C.prev_length,ce=C.nice_match,Y=C.strstart>C.w_size-j?C.strstart-(C.w_size-j):0,ue=C.window,ge=C.w_mask,pe=C.prev,ye=C.strstart+P,Ie=ue[H+oe-1],Ce=ue[H+oe];C.prev_length>=C.good_match&&(U>>=2),ce>C.lookahead&&(ce=C.lookahead);do if(ue[(X=re)+oe]===Ce&&ue[X+oe-1]===Ie&&ue[X]===ue[H]&&ue[++X]===ue[H+1]){H+=2,X++;do;while(ue[++H]===ue[++X]&&ue[++H]===ue[++X]&&ue[++H]===ue[++X]&&ue[++H]===ue[++X]&&ue[++H]===ue[++X]&&ue[++H]===ue[++X]&&ue[++H]===ue[++X]&&ue[++H]===ue[++X]&&H<ye);if(O=P-(ye-H),H=ye-P,oe<O){if(C.match_start=re,ce<=(oe=O))break;Ie=ue[H+oe-1],Ce=ue[H+oe]}}while((re=pe[re&ge])>Y&&--U!=0);return oe<=C.lookahead?oe:C.lookahead}function ke(C){var re,X,O,U,H,oe,ce,Y,ue,ge,pe=C.w_size;do{if(U=C.window_size-C.lookahead-C.strstart,C.strstart>=pe+(pe-j)){for(o.arraySet(C.window,C.window,pe,pe,0),C.match_start-=pe,C.strstart-=pe,C.block_start-=pe,re=X=C.hash_size;O=C.head[--re],C.head[re]=pe<=O?O-pe:0,--X;);for(re=X=pe;O=C.prev[--re],C.prev[re]=pe<=O?O-pe:0,--X;);U+=pe}if(C.strm.avail_in===0)break;if(oe=C.strm,ce=C.window,Y=C.strstart+C.lookahead,ue=U,ge=void 0,ge=oe.avail_in,ue<ge&&(ge=ue),X=ge===0?0:(oe.avail_in-=ge,o.arraySet(ce,oe.input,oe.next_in,ge,Y),oe.state.wrap===1?oe.adler=l(oe.adler,ce,ge,Y):oe.state.wrap===2&&(oe.adler=c(oe.adler,ce,ge,Y)),oe.next_in+=ge,oe.total_in+=ge,ge),C.lookahead+=X,C.lookahead+C.insert>=A)for(H=C.strstart-C.insert,C.ins_h=C.window[H],C.ins_h=(C.ins_h<<C.hash_shift^C.window[H+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[H+A-1])&C.hash_mask,C.prev[H&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=H,H++,C.insert--,!(C.lookahead+C.insert<A)););}while(C.lookahead<j&&C.strm.avail_in!==0)}function ze(C,re){for(var X,O;;){if(C.lookahead<j){if(ke(C),C.lookahead<j&&re===m)return S;if(C.lookahead===0)break}if(X=0,C.lookahead>=A&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+A-1])&C.hash_mask,X=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),X!==0&&C.strstart-X<=C.w_size-j&&(C.match_length=ie(C,X)),C.match_length>=A)if(O=a._tr_tally(C,C.strstart-C.match_start,C.match_length-A),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=A){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+A-1])&C.hash_mask,X=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else O=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(O&&(L(C,!1),C.strm.avail_out===0))return S}return C.insert=C.strstart<A-1?C.strstart:A-1,re===g?(L(C,!0),C.strm.avail_out===0?he:ne):C.last_lit&&(L(C,!1),C.strm.avail_out===0)?S:K}function Ae(C,re){for(var X,O,U;;){if(C.lookahead<j){if(ke(C),C.lookahead<j&&re===m)return S;if(C.lookahead===0)break}if(X=0,C.lookahead>=A&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+A-1])&C.hash_mask,X=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=A-1,X!==0&&C.prev_length<C.max_lazy_match&&C.strstart-X<=C.w_size-j&&(C.match_length=ie(C,X),C.match_length<=5&&(C.strategy===1||C.match_length===A&&4096<C.strstart-C.match_start)&&(C.match_length=A-1)),C.prev_length>=A&&C.match_length<=C.prev_length){for(U=C.strstart+C.lookahead-A,O=a._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-A),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=U&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+A-1])&C.hash_mask,X=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=A-1,C.strstart++,O&&(L(C,!1),C.strm.avail_out===0))return S}else if(C.match_available){if((O=a._tr_tally(C,0,C.window[C.strstart-1]))&&L(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return S}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(O=a._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<A-1?C.strstart:A-1,re===g?(L(C,!0),C.strm.avail_out===0?he:ne):C.last_lit&&(L(C,!1),C.strm.avail_out===0)?S:K}function Be(C,re,X,O,U){this.good_length=C,this.max_lazy=re,this.nice_length=X,this.max_chain=O,this.func=U}function Le(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*k),this.dyn_dtree=new o.Buf16(2*(2*V+1)),this.bl_tree=new o.Buf16(2*(2*B+1)),le(this.dyn_ltree),le(this.dyn_dtree),le(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(N+1),this.heap=new o.Buf16(2*M+1),le(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*M+1),le(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ze(C){var re;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=v,(re=C.state).pending=0,re.pending_out=0,re.wrap<0&&(re.wrap=-re.wrap),re.status=re.wrap?R:D,C.adler=re.wrap===2?0:1,re.last_flush=m,a._tr_init(re),y):ee(C,E)}function At(C){var re=Ze(C);return re===y&&function(X){X.window_size=2*X.w_size,le(X.head),X.max_lazy_match=i[X.level].max_lazy,X.good_match=i[X.level].good_length,X.nice_match=i[X.level].nice_length,X.max_chain_length=i[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=A-1,X.match_available=0,X.ins_h=0}(C.state),re}function ot(C,re,X,O,U,H){if(!C)return E;var oe=1;if(re===x&&(re=6),O<0?(oe=0,O=-O):15<O&&(oe=2,O-=16),U<1||b<U||X!==_||O<8||15<O||re<0||9<re||H<0||T<H)return ee(C,E);O===8&&(O=9);var ce=new Le;return(C.state=ce).strm=C,ce.wrap=oe,ce.gzhead=null,ce.w_bits=O,ce.w_size=1<<ce.w_bits,ce.w_mask=ce.w_size-1,ce.hash_bits=U+7,ce.hash_size=1<<ce.hash_bits,ce.hash_mask=ce.hash_size-1,ce.hash_shift=~~((ce.hash_bits+A-1)/A),ce.window=new o.Buf8(2*ce.w_size),ce.head=new o.Buf16(ce.hash_size),ce.prev=new o.Buf16(ce.w_size),ce.lit_bufsize=1<<U+6,ce.pending_buf_size=4*ce.lit_bufsize,ce.pending_buf=new o.Buf8(ce.pending_buf_size),ce.d_buf=1*ce.lit_bufsize,ce.l_buf=3*ce.lit_bufsize,ce.level=re,ce.strategy=H,ce.method=X,At(C)}i=[new Be(0,0,0,0,function(C,re){var X=65535;for(X>C.pending_buf_size-5&&(X=C.pending_buf_size-5);;){if(C.lookahead<=1){if(ke(C),C.lookahead===0&&re===m)return S;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var O=C.block_start+X;if((C.strstart===0||C.strstart>=O)&&(C.lookahead=C.strstart-O,C.strstart=O,L(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-j&&(L(C,!1),C.strm.avail_out===0))return S}return C.insert=0,re===g?(L(C,!0),C.strm.avail_out===0?he:ne):(C.strstart>C.block_start&&(L(C,!1),C.strm.avail_out),S)}),new Be(4,4,8,4,ze),new Be(4,5,16,8,ze),new Be(4,6,32,32,ze),new Be(4,4,16,16,Ae),new Be(8,16,32,32,Ae),new Be(8,16,128,128,Ae),new Be(8,32,128,256,Ae),new Be(32,128,258,1024,Ae),new Be(32,258,258,4096,Ae)],s.deflateInit=function(C,re){return ot(C,re,_,15,8,0)},s.deflateInit2=ot,s.deflateReset=At,s.deflateResetKeep=Ze,s.deflateSetHeader=function(C,re){return C&&C.state?C.state.wrap!==2?E:(C.state.gzhead=re,y):E},s.deflate=function(C,re){var X,O,U,H;if(!C||!C.state||5<re||re<0)return C?ee(C,E):E;if(O=C.state,!C.output||!C.input&&C.avail_in!==0||O.status===666&&re!==g)return ee(C,C.avail_out===0?-5:E);if(O.strm=C,X=O.last_flush,O.last_flush=re,O.status===R)if(O.wrap===2)C.adler=0,z(O,31),z(O,139),z(O,8),O.gzhead?(z(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),z(O,255&O.gzhead.time),z(O,O.gzhead.time>>8&255),z(O,O.gzhead.time>>16&255),z(O,O.gzhead.time>>24&255),z(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),z(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(z(O,255&O.gzhead.extra.length),z(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(C.adler=c(C.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(z(O,0),z(O,0),z(O,0),z(O,0),z(O,0),z(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),z(O,3),O.status=D);else{var oe=_+(O.w_bits-8<<4)<<8;oe|=(2<=O.strategy||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(oe|=32),oe+=31-oe%31,O.status=D,se(O,oe),O.strstart!==0&&(se(O,C.adler>>>16),se(O,65535&C.adler)),C.adler=1}if(O.status===69)if(O.gzhead.extra){for(U=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>U&&(C.adler=c(C.adler,O.pending_buf,O.pending-U,U)),q(C),U=O.pending,O.pending!==O.pending_buf_size));)z(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>U&&(C.adler=c(C.adler,O.pending_buf,O.pending-U,U)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){U=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>U&&(C.adler=c(C.adler,O.pending_buf,O.pending-U,U)),q(C),U=O.pending,O.pending===O.pending_buf_size)){H=1;break}H=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,z(O,H)}while(H!==0);O.gzhead.hcrc&&O.pending>U&&(C.adler=c(C.adler,O.pending_buf,O.pending-U,U)),H===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){U=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>U&&(C.adler=c(C.adler,O.pending_buf,O.pending-U,U)),q(C),U=O.pending,O.pending===O.pending_buf_size)){H=1;break}H=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,z(O,H)}while(H!==0);O.gzhead.hcrc&&O.pending>U&&(C.adler=c(C.adler,O.pending_buf,O.pending-U,U)),H===0&&(O.status=103)}else O.status=103;if(O.status===103&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&q(C),O.pending+2<=O.pending_buf_size&&(z(O,255&C.adler),z(O,C.adler>>8&255),C.adler=0,O.status=D)):O.status=D),O.pending!==0){if(q(C),C.avail_out===0)return O.last_flush=-1,y}else if(C.avail_in===0&&$(re)<=$(X)&&re!==g)return ee(C,-5);if(O.status===666&&C.avail_in!==0)return ee(C,-5);if(C.avail_in!==0||O.lookahead!==0||re!==m&&O.status!==666){var ce=O.strategy===2?function(Y,ue){for(var ge;;){if(Y.lookahead===0&&(ke(Y),Y.lookahead===0)){if(ue===m)return S;break}if(Y.match_length=0,ge=a._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++,ge&&(L(Y,!1),Y.strm.avail_out===0))return S}return Y.insert=0,ue===g?(L(Y,!0),Y.strm.avail_out===0?he:ne):Y.last_lit&&(L(Y,!1),Y.strm.avail_out===0)?S:K}(O,re):O.strategy===3?function(Y,ue){for(var ge,pe,ye,Ie,Ce=Y.window;;){if(Y.lookahead<=P){if(ke(Y),Y.lookahead<=P&&ue===m)return S;if(Y.lookahead===0)break}if(Y.match_length=0,Y.lookahead>=A&&0<Y.strstart&&(pe=Ce[ye=Y.strstart-1])===Ce[++ye]&&pe===Ce[++ye]&&pe===Ce[++ye]){Ie=Y.strstart+P;do;while(pe===Ce[++ye]&&pe===Ce[++ye]&&pe===Ce[++ye]&&pe===Ce[++ye]&&pe===Ce[++ye]&&pe===Ce[++ye]&&pe===Ce[++ye]&&pe===Ce[++ye]&&ye<Ie);Y.match_length=P-(Ie-ye),Y.match_length>Y.lookahead&&(Y.match_length=Y.lookahead)}if(Y.match_length>=A?(ge=a._tr_tally(Y,1,Y.match_length-A),Y.lookahead-=Y.match_length,Y.strstart+=Y.match_length,Y.match_length=0):(ge=a._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++),ge&&(L(Y,!1),Y.strm.avail_out===0))return S}return Y.insert=0,ue===g?(L(Y,!0),Y.strm.avail_out===0?he:ne):Y.last_lit&&(L(Y,!1),Y.strm.avail_out===0)?S:K}(O,re):i[O.level].func(O,re);if(ce!==he&&ce!==ne||(O.status=666),ce===S||ce===he)return C.avail_out===0&&(O.last_flush=-1),y;if(ce===K&&(re===1?a._tr_align(O):re!==5&&(a._tr_stored_block(O,0,0,!1),re===3&&(le(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),q(C),C.avail_out===0))return O.last_flush=-1,y}return re!==g?y:O.wrap<=0?1:(O.wrap===2?(z(O,255&C.adler),z(O,C.adler>>8&255),z(O,C.adler>>16&255),z(O,C.adler>>24&255),z(O,255&C.total_in),z(O,C.total_in>>8&255),z(O,C.total_in>>16&255),z(O,C.total_in>>24&255)):(se(O,C.adler>>>16),se(O,65535&C.adler)),q(C),0<O.wrap&&(O.wrap=-O.wrap),O.pending!==0?y:1)},s.deflateEnd=function(C){var re;return C&&C.state?(re=C.state.status)!==R&&re!==69&&re!==73&&re!==91&&re!==103&&re!==D&&re!==666?ee(C,E):(C.state=null,re===D?ee(C,-3):y):E},s.deflateSetDictionary=function(C,re){var X,O,U,H,oe,ce,Y,ue,ge=re.length;if(!C||!C.state||(H=(X=C.state).wrap)===2||H===1&&X.status!==R||X.lookahead)return E;for(H===1&&(C.adler=l(C.adler,re,ge,0)),X.wrap=0,ge>=X.w_size&&(H===0&&(le(X.head),X.strstart=0,X.block_start=0,X.insert=0),ue=new o.Buf8(X.w_size),o.arraySet(ue,re,ge-X.w_size,X.w_size,0),re=ue,ge=X.w_size),oe=C.avail_in,ce=C.next_in,Y=C.input,C.avail_in=ge,C.next_in=0,C.input=re,ke(X);X.lookahead>=A;){for(O=X.strstart,U=X.lookahead-(A-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[O+A-1])&X.hash_mask,X.prev[O&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=O,O++,--U;);X.strstart=O,X.lookahead=A-1,ke(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=A-1,X.match_available=0,C.next_in=ce,C.input=Y,C.avail_in=oe,X.wrap=H,y},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,l,c,h,m,g,y,E,x,T,v,_,b,M,V,B,k,N,A,P,j,R,D,S,K;a=i.state,l=i.next_in,S=i.input,c=l+(i.avail_in-5),h=i.next_out,K=i.output,m=h-(o-i.avail_out),g=h+(i.avail_out-257),y=a.dmax,E=a.wsize,x=a.whave,T=a.wnext,v=a.window,_=a.hold,b=a.bits,M=a.lencode,V=a.distcode,B=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{b<15&&(_+=S[l++]<<b,b+=8,_+=S[l++]<<b,b+=8),N=M[_&B];t:for(;;){if(_>>>=A=N>>>24,b-=A,(A=N>>>16&255)===0)K[h++]=65535&N;else{if(!(16&A)){if(!(64&A)){N=M[(65535&N)+(_&(1<<A)-1)];continue t}if(32&A){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}P=65535&N,(A&=15)&&(b<A&&(_+=S[l++]<<b,b+=8),P+=_&(1<<A)-1,_>>>=A,b-=A),b<15&&(_+=S[l++]<<b,b+=8,_+=S[l++]<<b,b+=8),N=V[_&k];n:for(;;){if(_>>>=A=N>>>24,b-=A,!(16&(A=N>>>16&255))){if(!(64&A)){N=V[(65535&N)+(_&(1<<A)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(j=65535&N,b<(A&=15)&&(_+=S[l++]<<b,(b+=8)<A&&(_+=S[l++]<<b,b+=8)),y<(j+=_&(1<<A)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(_>>>=A,b-=A,(A=h-m)<j){if(x<(A=j-A)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(D=v,(R=0)===T){if(R+=E-A,A<P){for(P-=A;K[h++]=v[R++],--A;);R=h-j,D=K}}else if(T<A){if(R+=E+T-A,(A-=T)<P){for(P-=A;K[h++]=v[R++],--A;);if(R=0,T<P){for(P-=A=T;K[h++]=v[R++],--A;);R=h-j,D=K}}}else if(R+=T-A,A<P){for(P-=A;K[h++]=v[R++],--A;);R=h-j,D=K}for(;2<P;)K[h++]=D[R++],K[h++]=D[R++],K[h++]=D[R++],P-=3;P&&(K[h++]=D[R++],1<P&&(K[h++]=D[R++]))}else{for(R=h-j;K[h++]=K[R++],K[h++]=K[R++],K[h++]=K[R++],2<(P-=3););P&&(K[h++]=K[R++],1<P&&(K[h++]=K[R++]))}break}}break}}while(l<c&&h<g);l-=P=b>>3,_&=(1<<(b-=P<<3))-1,i.next_in=l,i.next_out=h,i.avail_in=l<c?c-l+5:5-(l-c),i.avail_out=h<g?g-h+257:257-(h-g),a.hold=_,a.bits=b}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),h=1,m=2,g=0,y=-2,E=1,x=852,T=592;function v(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(R){var D;return R&&R.state?(D=R.state,R.total_in=R.total_out=D.total=0,R.msg="",D.wrap&&(R.adler=1&D.wrap),D.mode=E,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new i.Buf32(x),D.distcode=D.distdyn=new i.Buf32(T),D.sane=1,D.back=-1,g):y}function M(R){var D;return R&&R.state?((D=R.state).wsize=0,D.whave=0,D.wnext=0,b(R)):y}function V(R,D){var S,K;return R&&R.state?(K=R.state,D<0?(S=0,D=-D):(S=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?y:(K.window!==null&&K.wbits!==D&&(K.window=null),K.wrap=S,K.wbits=D,M(R))):y}function B(R,D){var S,K;return R?(K=new _,(R.state=K).window=null,(S=V(R,D))!==g&&(R.state=null),S):y}var k,N,A=!0;function P(R){if(A){var D;for(k=new i.Buf32(512),N=new i.Buf32(32),D=0;D<144;)R.lens[D++]=8;for(;D<256;)R.lens[D++]=9;for(;D<280;)R.lens[D++]=7;for(;D<288;)R.lens[D++]=8;for(c(h,R.lens,0,288,k,0,R.work,{bits:9}),D=0;D<32;)R.lens[D++]=5;c(m,R.lens,0,32,N,0,R.work,{bits:5}),A=!1}R.lencode=k,R.lenbits=9,R.distcode=N,R.distbits=5}function j(R,D,S,K){var he,ne=R.state;return ne.window===null&&(ne.wsize=1<<ne.wbits,ne.wnext=0,ne.whave=0,ne.window=new i.Buf8(ne.wsize)),K>=ne.wsize?(i.arraySet(ne.window,D,S-ne.wsize,ne.wsize,0),ne.wnext=0,ne.whave=ne.wsize):(K<(he=ne.wsize-ne.wnext)&&(he=K),i.arraySet(ne.window,D,S-K,he,ne.wnext),(K-=he)?(i.arraySet(ne.window,D,S-K,K,0),ne.wnext=K,ne.whave=ne.wsize):(ne.wnext+=he,ne.wnext===ne.wsize&&(ne.wnext=0),ne.whave<ne.wsize&&(ne.whave+=he))),0}s.inflateReset=M,s.inflateReset2=V,s.inflateResetKeep=b,s.inflateInit=function(R){return B(R,15)},s.inflateInit2=B,s.inflate=function(R,D){var S,K,he,ne,ee,$,le,q,L,z,se,ie,ke,ze,Ae,Be,Le,Ze,At,ot,C,re,X,O,U=0,H=new i.Buf8(4),oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return y;(S=R.state).mode===12&&(S.mode=13),ee=R.next_out,he=R.output,le=R.avail_out,ne=R.next_in,K=R.input,$=R.avail_in,q=S.hold,L=S.bits,z=$,se=le,re=g;e:for(;;)switch(S.mode){case E:if(S.wrap===0){S.mode=13;break}for(;L<16;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}if(2&S.wrap&&q===35615){H[S.check=0]=255&q,H[1]=q>>>8&255,S.check=a(S.check,H,2,0),L=q=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&q)<<8)+(q>>8))%31){R.msg="incorrect header check",S.mode=30;break}if((15&q)!=8){R.msg="unknown compression method",S.mode=30;break}if(L-=4,C=8+(15&(q>>>=4)),S.wbits===0)S.wbits=C;else if(C>S.wbits){R.msg="invalid window size",S.mode=30;break}S.dmax=1<<C,R.adler=S.check=1,S.mode=512&q?10:12,L=q=0;break;case 2:for(;L<16;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}if(S.flags=q,(255&S.flags)!=8){R.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){R.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=q>>8&1),512&S.flags&&(H[0]=255&q,H[1]=q>>>8&255,S.check=a(S.check,H,2,0)),L=q=0,S.mode=3;case 3:for(;L<32;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}S.head&&(S.head.time=q),512&S.flags&&(H[0]=255&q,H[1]=q>>>8&255,H[2]=q>>>16&255,H[3]=q>>>24&255,S.check=a(S.check,H,4,0)),L=q=0,S.mode=4;case 4:for(;L<16;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}S.head&&(S.head.xflags=255&q,S.head.os=q>>8),512&S.flags&&(H[0]=255&q,H[1]=q>>>8&255,S.check=a(S.check,H,2,0)),L=q=0,S.mode=5;case 5:if(1024&S.flags){for(;L<16;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}S.length=q,S.head&&(S.head.extra_len=q),512&S.flags&&(H[0]=255&q,H[1]=q>>>8&255,S.check=a(S.check,H,2,0)),L=q=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&($<(ie=S.length)&&(ie=$),ie&&(S.head&&(C=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),i.arraySet(S.head.extra,K,ne,ie,C)),512&S.flags&&(S.check=a(S.check,K,ie,ne)),$-=ie,ne+=ie,S.length-=ie),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if($===0)break e;for(ie=0;C=K[ne+ie++],S.head&&C&&S.length<65536&&(S.head.name+=String.fromCharCode(C)),C&&ie<$;);if(512&S.flags&&(S.check=a(S.check,K,ie,ne)),$-=ie,ne+=ie,C)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if($===0)break e;for(ie=0;C=K[ne+ie++],S.head&&C&&S.length<65536&&(S.head.comment+=String.fromCharCode(C)),C&&ie<$;);if(512&S.flags&&(S.check=a(S.check,K,ie,ne)),$-=ie,ne+=ie,C)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;L<16;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}if(q!==(65535&S.check)){R.msg="header crc mismatch",S.mode=30;break}L=q=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),R.adler=S.check=0,S.mode=12;break;case 10:for(;L<32;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}R.adler=S.check=v(q),L=q=0,S.mode=11;case 11:if(S.havedict===0)return R.next_out=ee,R.avail_out=le,R.next_in=ne,R.avail_in=$,S.hold=q,S.bits=L,2;R.adler=S.check=1,S.mode=12;case 12:if(D===5||D===6)break e;case 13:if(S.last){q>>>=7&L,L-=7&L,S.mode=27;break}for(;L<3;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}switch(S.last=1&q,L-=1,3&(q>>>=1)){case 0:S.mode=14;break;case 1:if(P(S),S.mode=20,D!==6)break;q>>>=2,L-=2;break e;case 2:S.mode=17;break;case 3:R.msg="invalid block type",S.mode=30}q>>>=2,L-=2;break;case 14:for(q>>>=7&L,L-=7&L;L<32;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}if((65535&q)!=(q>>>16^65535)){R.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&q,L=q=0,S.mode=15,D===6)break e;case 15:S.mode=16;case 16:if(ie=S.length){if($<ie&&(ie=$),le<ie&&(ie=le),ie===0)break e;i.arraySet(he,K,ne,ie,ee),$-=ie,ne+=ie,le-=ie,ee+=ie,S.length-=ie;break}S.mode=12;break;case 17:for(;L<14;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}if(S.nlen=257+(31&q),q>>>=5,L-=5,S.ndist=1+(31&q),q>>>=5,L-=5,S.ncode=4+(15&q),q>>>=4,L-=4,286<S.nlen||30<S.ndist){R.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;L<3;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}S.lens[oe[S.have++]]=7&q,q>>>=3,L-=3}for(;S.have<19;)S.lens[oe[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,X={bits:S.lenbits},re=c(0,S.lens,0,19,S.lencode,0,S.work,X),S.lenbits=X.bits,re){R.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;Be=(U=S.lencode[q&(1<<S.lenbits)-1])>>>16&255,Le=65535&U,!((Ae=U>>>24)<=L);){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}if(Le<16)q>>>=Ae,L-=Ae,S.lens[S.have++]=Le;else{if(Le===16){for(O=Ae+2;L<O;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}if(q>>>=Ae,L-=Ae,S.have===0){R.msg="invalid bit length repeat",S.mode=30;break}C=S.lens[S.have-1],ie=3+(3&q),q>>>=2,L-=2}else if(Le===17){for(O=Ae+3;L<O;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}L-=Ae,C=0,ie=3+(7&(q>>>=Ae)),q>>>=3,L-=3}else{for(O=Ae+7;L<O;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}L-=Ae,C=0,ie=11+(127&(q>>>=Ae)),q>>>=7,L-=7}if(S.have+ie>S.nlen+S.ndist){R.msg="invalid bit length repeat",S.mode=30;break}for(;ie--;)S.lens[S.have++]=C}}if(S.mode===30)break;if(S.lens[256]===0){R.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,X={bits:S.lenbits},re=c(h,S.lens,0,S.nlen,S.lencode,0,S.work,X),S.lenbits=X.bits,re){R.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,X={bits:S.distbits},re=c(m,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,X),S.distbits=X.bits,re){R.msg="invalid distances set",S.mode=30;break}if(S.mode=20,D===6)break e;case 20:S.mode=21;case 21:if(6<=$&&258<=le){R.next_out=ee,R.avail_out=le,R.next_in=ne,R.avail_in=$,S.hold=q,S.bits=L,l(R,se),ee=R.next_out,he=R.output,le=R.avail_out,ne=R.next_in,K=R.input,$=R.avail_in,q=S.hold,L=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;Be=(U=S.lencode[q&(1<<S.lenbits)-1])>>>16&255,Le=65535&U,!((Ae=U>>>24)<=L);){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}if(Be&&!(240&Be)){for(Ze=Ae,At=Be,ot=Le;Be=(U=S.lencode[ot+((q&(1<<Ze+At)-1)>>Ze)])>>>16&255,Le=65535&U,!(Ze+(Ae=U>>>24)<=L);){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}q>>>=Ze,L-=Ze,S.back+=Ze}if(q>>>=Ae,L-=Ae,S.back+=Ae,S.length=Le,Be===0){S.mode=26;break}if(32&Be){S.back=-1,S.mode=12;break}if(64&Be){R.msg="invalid literal/length code",S.mode=30;break}S.extra=15&Be,S.mode=22;case 22:if(S.extra){for(O=S.extra;L<O;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}S.length+=q&(1<<S.extra)-1,q>>>=S.extra,L-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;Be=(U=S.distcode[q&(1<<S.distbits)-1])>>>16&255,Le=65535&U,!((Ae=U>>>24)<=L);){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}if(!(240&Be)){for(Ze=Ae,At=Be,ot=Le;Be=(U=S.distcode[ot+((q&(1<<Ze+At)-1)>>Ze)])>>>16&255,Le=65535&U,!(Ze+(Ae=U>>>24)<=L);){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}q>>>=Ze,L-=Ze,S.back+=Ze}if(q>>>=Ae,L-=Ae,S.back+=Ae,64&Be){R.msg="invalid distance code",S.mode=30;break}S.offset=Le,S.extra=15&Be,S.mode=24;case 24:if(S.extra){for(O=S.extra;L<O;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}S.offset+=q&(1<<S.extra)-1,q>>>=S.extra,L-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){R.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(le===0)break e;if(ie=se-le,S.offset>ie){if((ie=S.offset-ie)>S.whave&&S.sane){R.msg="invalid distance too far back",S.mode=30;break}ke=ie>S.wnext?(ie-=S.wnext,S.wsize-ie):S.wnext-ie,ie>S.length&&(ie=S.length),ze=S.window}else ze=he,ke=ee-S.offset,ie=S.length;for(le<ie&&(ie=le),le-=ie,S.length-=ie;he[ee++]=ze[ke++],--ie;);S.length===0&&(S.mode=21);break;case 26:if(le===0)break e;he[ee++]=S.length,le--,S.mode=21;break;case 27:if(S.wrap){for(;L<32;){if($===0)break e;$--,q|=K[ne++]<<L,L+=8}if(se-=le,R.total_out+=se,S.total+=se,se&&(R.adler=S.check=S.flags?a(S.check,he,se,ee-se):o(S.check,he,se,ee-se)),se=le,(S.flags?q:v(q))!==S.check){R.msg="incorrect data check",S.mode=30;break}L=q=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;L<32;){if($===0)break e;$--,q+=K[ne++]<<L,L+=8}if(q!==(4294967295&S.total)){R.msg="incorrect length check",S.mode=30;break}L=q=0}S.mode=29;case 29:re=1;break e;case 30:re=-3;break e;case 31:return-4;case 32:default:return y}return R.next_out=ee,R.avail_out=le,R.next_in=ne,R.avail_in=$,S.hold=q,S.bits=L,(S.wsize||se!==R.avail_out&&S.mode<30&&(S.mode<27||D!==4))&&j(R,R.output,R.next_out,se-R.avail_out)?(S.mode=31,-4):(z-=R.avail_in,se-=R.avail_out,R.total_in+=z,R.total_out+=se,S.total+=se,S.wrap&&se&&(R.adler=S.check=S.flags?a(S.check,he,se,R.next_out-se):o(S.check,he,se,R.next_out-se)),R.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(z==0&&se===0||D===4)&&re===g&&(re=-5),re)},s.inflateEnd=function(R){if(!R||!R.state)return y;var D=R.state;return D.window&&(D.window=null),R.state=null,g},s.inflateGetHeader=function(R,D){var S;return R&&R.state&&2&(S=R.state).wrap?((S.head=D).done=!1,g):y},s.inflateSetDictionary=function(R,D){var S,K=D.length;return R&&R.state?(S=R.state).wrap!==0&&S.mode!==11?y:S.mode===11&&o(1,D,K,0)!==S.check?-3:j(R,D,K,K)?(S.mode=31,-4):(S.havedict=1,g):y},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,m,g,y,E,x,T,v){var _,b,M,V,B,k,N,A,P,j=v.bits,R=0,D=0,S=0,K=0,he=0,ne=0,ee=0,$=0,le=0,q=0,L=null,z=0,se=new i.Buf16(16),ie=new i.Buf16(16),ke=null,ze=0;for(R=0;R<=15;R++)se[R]=0;for(D=0;D<y;D++)se[m[g+D]]++;for(he=j,K=15;1<=K&&se[K]===0;K--);if(K<he&&(he=K),K===0)return E[x++]=20971520,E[x++]=20971520,v.bits=1,0;for(S=1;S<K&&se[S]===0;S++);for(he<S&&(he=S),R=$=1;R<=15;R++)if($<<=1,($-=se[R])<0)return-1;if(0<$&&(h===0||K!==1))return-1;for(ie[1]=0,R=1;R<15;R++)ie[R+1]=ie[R]+se[R];for(D=0;D<y;D++)m[g+D]!==0&&(T[ie[m[g+D]]++]=D);if(k=h===0?(L=ke=T,19):h===1?(L=o,z-=257,ke=a,ze-=257,256):(L=l,ke=c,-1),R=S,B=x,ee=D=q=0,M=-1,V=(le=1<<(ne=he))-1,h===1&&852<le||h===2&&592<le)return 1;for(;;){for(N=R-ee,P=T[D]<k?(A=0,T[D]):T[D]>k?(A=ke[ze+T[D]],L[z+T[D]]):(A=96,0),_=1<<R-ee,S=b=1<<ne;E[B+(q>>ee)+(b-=_)]=N<<24|A<<16|P|0,b!==0;);for(_=1<<R-1;q&_;)_>>=1;if(_!==0?(q&=_-1,q+=_):q=0,D++,--se[R]==0){if(R===K)break;R=m[g+T[D]]}if(he<R&&(q&V)!==M){for(ee===0&&(ee=he),B+=S,$=1<<(ne=R-ee);ne+ee<K&&!(($-=se[ne+ee])<=0);)ne++,$<<=1;if(le+=1<<ne,h===1&&852<le||h===2&&592<le)return 1;E[M=q&V]=he<<24|ne<<16|B-x|0}}return q!==0&&(E[B+q]=R-ee<<24|64<<16|0),v.bits=he,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function l(U){for(var H=U.length;0<=--H;)U[H]=0}var c=0,h=29,m=256,g=m+1+h,y=30,E=19,x=2*g+1,T=15,v=16,_=7,b=256,M=16,V=17,B=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],j=new Array(2*(g+2));l(j);var R=new Array(2*y);l(R);var D=new Array(512);l(D);var S=new Array(256);l(S);var K=new Array(h);l(K);var he,ne,ee,$=new Array(y);function le(U,H,oe,ce,Y){this.static_tree=U,this.extra_bits=H,this.extra_base=oe,this.elems=ce,this.max_length=Y,this.has_stree=U&&U.length}function q(U,H){this.dyn_tree=U,this.max_code=0,this.stat_desc=H}function L(U){return U<256?D[U]:D[256+(U>>>7)]}function z(U,H){U.pending_buf[U.pending++]=255&H,U.pending_buf[U.pending++]=H>>>8&255}function se(U,H,oe){U.bi_valid>v-oe?(U.bi_buf|=H<<U.bi_valid&65535,z(U,U.bi_buf),U.bi_buf=H>>v-U.bi_valid,U.bi_valid+=oe-v):(U.bi_buf|=H<<U.bi_valid&65535,U.bi_valid+=oe)}function ie(U,H,oe){se(U,oe[2*H],oe[2*H+1])}function ke(U,H){for(var oe=0;oe|=1&U,U>>>=1,oe<<=1,0<--H;);return oe>>>1}function ze(U,H,oe){var ce,Y,ue=new Array(T+1),ge=0;for(ce=1;ce<=T;ce++)ue[ce]=ge=ge+oe[ce-1]<<1;for(Y=0;Y<=H;Y++){var pe=U[2*Y+1];pe!==0&&(U[2*Y]=ke(ue[pe]++,pe))}}function Ae(U){var H;for(H=0;H<g;H++)U.dyn_ltree[2*H]=0;for(H=0;H<y;H++)U.dyn_dtree[2*H]=0;for(H=0;H<E;H++)U.bl_tree[2*H]=0;U.dyn_ltree[2*b]=1,U.opt_len=U.static_len=0,U.last_lit=U.matches=0}function Be(U){8<U.bi_valid?z(U,U.bi_buf):0<U.bi_valid&&(U.pending_buf[U.pending++]=U.bi_buf),U.bi_buf=0,U.bi_valid=0}function Le(U,H,oe,ce){var Y=2*H,ue=2*oe;return U[Y]<U[ue]||U[Y]===U[ue]&&ce[H]<=ce[oe]}function Ze(U,H,oe){for(var ce=U.heap[oe],Y=oe<<1;Y<=U.heap_len&&(Y<U.heap_len&&Le(H,U.heap[Y+1],U.heap[Y],U.depth)&&Y++,!Le(H,ce,U.heap[Y],U.depth));)U.heap[oe]=U.heap[Y],oe=Y,Y<<=1;U.heap[oe]=ce}function At(U,H,oe){var ce,Y,ue,ge,pe=0;if(U.last_lit!==0)for(;ce=U.pending_buf[U.d_buf+2*pe]<<8|U.pending_buf[U.d_buf+2*pe+1],Y=U.pending_buf[U.l_buf+pe],pe++,ce===0?ie(U,Y,H):(ie(U,(ue=S[Y])+m+1,H),(ge=k[ue])!==0&&se(U,Y-=K[ue],ge),ie(U,ue=L(--ce),oe),(ge=N[ue])!==0&&se(U,ce-=$[ue],ge)),pe<U.last_lit;);ie(U,b,H)}function ot(U,H){var oe,ce,Y,ue=H.dyn_tree,ge=H.stat_desc.static_tree,pe=H.stat_desc.has_stree,ye=H.stat_desc.elems,Ie=-1;for(U.heap_len=0,U.heap_max=x,oe=0;oe<ye;oe++)ue[2*oe]!==0?(U.heap[++U.heap_len]=Ie=oe,U.depth[oe]=0):ue[2*oe+1]=0;for(;U.heap_len<2;)ue[2*(Y=U.heap[++U.heap_len]=Ie<2?++Ie:0)]=1,U.depth[Y]=0,U.opt_len--,pe&&(U.static_len-=ge[2*Y+1]);for(H.max_code=Ie,oe=U.heap_len>>1;1<=oe;oe--)Ze(U,ue,oe);for(Y=ye;oe=U.heap[1],U.heap[1]=U.heap[U.heap_len--],Ze(U,ue,1),ce=U.heap[1],U.heap[--U.heap_max]=oe,U.heap[--U.heap_max]=ce,ue[2*Y]=ue[2*oe]+ue[2*ce],U.depth[Y]=(U.depth[oe]>=U.depth[ce]?U.depth[oe]:U.depth[ce])+1,ue[2*oe+1]=ue[2*ce+1]=Y,U.heap[1]=Y++,Ze(U,ue,1),2<=U.heap_len;);U.heap[--U.heap_max]=U.heap[1],function(Ce,bt){var En,Ut,W,Z,be,ve,He=bt.dyn_tree,St=bt.max_code,Ge=bt.stat_desc.static_tree,Tn=bt.stat_desc.has_stree,bn=bt.stat_desc.extra_bits,dn=bt.stat_desc.extra_base,hn=bt.stat_desc.max_length,Bt=0;for(Z=0;Z<=T;Z++)Ce.bl_count[Z]=0;for(He[2*Ce.heap[Ce.heap_max]+1]=0,En=Ce.heap_max+1;En<x;En++)hn<(Z=He[2*He[2*(Ut=Ce.heap[En])+1]+1]+1)&&(Z=hn,Bt++),He[2*Ut+1]=Z,St<Ut||(Ce.bl_count[Z]++,be=0,dn<=Ut&&(be=bn[Ut-dn]),ve=He[2*Ut],Ce.opt_len+=ve*(Z+be),Tn&&(Ce.static_len+=ve*(Ge[2*Ut+1]+be)));if(Bt!==0){do{for(Z=hn-1;Ce.bl_count[Z]===0;)Z--;Ce.bl_count[Z]--,Ce.bl_count[Z+1]+=2,Ce.bl_count[hn]--,Bt-=2}while(0<Bt);for(Z=hn;Z!==0;Z--)for(Ut=Ce.bl_count[Z];Ut!==0;)St<(W=Ce.heap[--En])||(He[2*W+1]!==Z&&(Ce.opt_len+=(Z-He[2*W+1])*He[2*W],He[2*W+1]=Z),Ut--)}}(U,H),ze(ue,Ie,U.bl_count)}function C(U,H,oe){var ce,Y,ue=-1,ge=H[1],pe=0,ye=7,Ie=4;for(ge===0&&(ye=138,Ie=3),H[2*(oe+1)+1]=65535,ce=0;ce<=oe;ce++)Y=ge,ge=H[2*(ce+1)+1],++pe<ye&&Y===ge||(pe<Ie?U.bl_tree[2*Y]+=pe:Y!==0?(Y!==ue&&U.bl_tree[2*Y]++,U.bl_tree[2*M]++):pe<=10?U.bl_tree[2*V]++:U.bl_tree[2*B]++,ue=Y,Ie=(pe=0)===ge?(ye=138,3):Y===ge?(ye=6,3):(ye=7,4))}function re(U,H,oe){var ce,Y,ue=-1,ge=H[1],pe=0,ye=7,Ie=4;for(ge===0&&(ye=138,Ie=3),ce=0;ce<=oe;ce++)if(Y=ge,ge=H[2*(ce+1)+1],!(++pe<ye&&Y===ge)){if(pe<Ie)for(;ie(U,Y,U.bl_tree),--pe!=0;);else Y!==0?(Y!==ue&&(ie(U,Y,U.bl_tree),pe--),ie(U,M,U.bl_tree),se(U,pe-3,2)):pe<=10?(ie(U,V,U.bl_tree),se(U,pe-3,3)):(ie(U,B,U.bl_tree),se(U,pe-11,7));ue=Y,Ie=(pe=0)===ge?(ye=138,3):Y===ge?(ye=6,3):(ye=7,4)}}l($);var X=!1;function O(U,H,oe,ce){se(U,(c<<1)+(ce?1:0),3),function(Y,ue,ge,pe){Be(Y),z(Y,ge),z(Y,~ge),i.arraySet(Y.pending_buf,Y.window,ue,ge,Y.pending),Y.pending+=ge}(U,H,oe)}s._tr_init=function(U){X||(function(){var H,oe,ce,Y,ue,ge=new Array(T+1);for(Y=ce=0;Y<h-1;Y++)for(K[Y]=ce,H=0;H<1<<k[Y];H++)S[ce++]=Y;for(S[ce-1]=Y,Y=ue=0;Y<16;Y++)for($[Y]=ue,H=0;H<1<<N[Y];H++)D[ue++]=Y;for(ue>>=7;Y<y;Y++)for($[Y]=ue<<7,H=0;H<1<<N[Y]-7;H++)D[256+ue++]=Y;for(oe=0;oe<=T;oe++)ge[oe]=0;for(H=0;H<=143;)j[2*H+1]=8,H++,ge[8]++;for(;H<=255;)j[2*H+1]=9,H++,ge[9]++;for(;H<=279;)j[2*H+1]=7,H++,ge[7]++;for(;H<=287;)j[2*H+1]=8,H++,ge[8]++;for(ze(j,g+1,ge),H=0;H<y;H++)R[2*H+1]=5,R[2*H]=ke(H,5);he=new le(j,k,m+1,g,T),ne=new le(R,N,0,y,T),ee=new le(new Array(0),A,0,E,_)}(),X=!0),U.l_desc=new q(U.dyn_ltree,he),U.d_desc=new q(U.dyn_dtree,ne),U.bl_desc=new q(U.bl_tree,ee),U.bi_buf=0,U.bi_valid=0,Ae(U)},s._tr_stored_block=O,s._tr_flush_block=function(U,H,oe,ce){var Y,ue,ge=0;0<U.level?(U.strm.data_type===2&&(U.strm.data_type=function(pe){var ye,Ie=4093624447;for(ye=0;ye<=31;ye++,Ie>>>=1)if(1&Ie&&pe.dyn_ltree[2*ye]!==0)return o;if(pe.dyn_ltree[18]!==0||pe.dyn_ltree[20]!==0||pe.dyn_ltree[26]!==0)return a;for(ye=32;ye<m;ye++)if(pe.dyn_ltree[2*ye]!==0)return a;return o}(U)),ot(U,U.l_desc),ot(U,U.d_desc),ge=function(pe){var ye;for(C(pe,pe.dyn_ltree,pe.l_desc.max_code),C(pe,pe.dyn_dtree,pe.d_desc.max_code),ot(pe,pe.bl_desc),ye=E-1;3<=ye&&pe.bl_tree[2*P[ye]+1]===0;ye--);return pe.opt_len+=3*(ye+1)+5+5+4,ye}(U),Y=U.opt_len+3+7>>>3,(ue=U.static_len+3+7>>>3)<=Y&&(Y=ue)):Y=ue=oe+5,oe+4<=Y&&H!==-1?O(U,H,oe,ce):U.strategy===4||ue===Y?(se(U,2+(ce?1:0),3),At(U,j,R)):(se(U,4+(ce?1:0),3),function(pe,ye,Ie,Ce){var bt;for(se(pe,ye-257,5),se(pe,Ie-1,5),se(pe,Ce-4,4),bt=0;bt<Ce;bt++)se(pe,pe.bl_tree[2*P[bt]+1],3);re(pe,pe.dyn_ltree,ye-1),re(pe,pe.dyn_dtree,Ie-1)}(U,U.l_desc.max_code+1,U.d_desc.max_code+1,ge+1),At(U,U.dyn_ltree,U.dyn_dtree)),Ae(U),ce&&Be(U)},s._tr_tally=function(U,H,oe){return U.pending_buf[U.d_buf+2*U.last_lit]=H>>>8&255,U.pending_buf[U.d_buf+2*U.last_lit+1]=255&H,U.pending_buf[U.l_buf+U.last_lit]=255&oe,U.last_lit++,H===0?U.dyn_ltree[2*oe]++:(U.matches++,H--,U.dyn_ltree[2*(S[oe]+m+1)]++,U.dyn_dtree[2*L(H)]++),U.last_lit===U.lit_bufsize-1},s._tr_align=function(U){se(U,2,3),ie(U,b,j),function(H){H.bi_valid===16?(z(H,H.bi_buf),H.bi_buf=0,H.bi_valid=0):8<=H.bi_valid&&(H.pending_buf[H.pending++]=255&H.bi_buf,H.bi_buf>>=8,H.bi_valid-=8)}(U)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var l,c,h,m,g=1,y={},E=!1,x=o.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(o);T=T&&T.setTimeout?T:o,l={}.toString.call(o.process)==="[object process]"?function(M){process.nextTick(function(){_(M)})}:function(){if(o.postMessage&&!o.importScripts){var M=!0,V=o.onmessage;return o.onmessage=function(){M=!1},o.postMessage("","*"),o.onmessage=V,M}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",b,!1):o.attachEvent("onmessage",b),function(M){o.postMessage(m+M,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(M){_(M.data)},function(M){h.port2.postMessage(M)}):x&&"onreadystatechange"in x.createElement("script")?(c=x.documentElement,function(M){var V=x.createElement("script");V.onreadystatechange=function(){_(M),V.onreadystatechange=null,c.removeChild(V),V=null},c.appendChild(V)}):function(M){setTimeout(_,0,M)},T.setImmediate=function(M){typeof M!="function"&&(M=new Function(""+M));for(var V=new Array(arguments.length-1),B=0;B<V.length;B++)V[B]=arguments[B+1];var k={callback:M,args:V};return y[g]=k,l(g),g++},T.clearImmediate=v}function v(M){delete y[M]}function _(M){if(E)setTimeout(_,0,M);else{var V=y[M];if(V){E=!0;try{(function(B){var k=B.callback,N=B.args;switch(N.length){case 0:k();break;case 1:k(N[0]);break;case 2:k(N[0],N[1]);break;case 3:k(N[0],N[1],N[2]);break;default:k.apply(a,N)}})(V)}finally{v(M),E=!1}}}}function b(M){M.source===o&&typeof M.data=="string"&&M.data.indexOf(m)===0&&_(+M.data.slice(m.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Rr<"u"?Rr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Zb);var ZF=Zb.exports;const e6=Of(ZF);var e1={exports:{}};(function(t,e){(function(n,r){r()})(Rr,function(){function n(c,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,h,m){var g=new XMLHttpRequest;g.open("GET",c),g.responseType="blob",g.onload=function(){l(g.response,h,m)},g.onerror=function(){console.error("could not download file")},g.send()}function s(c){var h=new XMLHttpRequest;h.open("HEAD",c,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function i(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(h)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Rr=="object"&&Rr.global===Rr?Rr:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,h,m){var g=o.URL||o.webkitURL,y=document.createElement("a");h=h||c.name||"download",y.download=h,y.rel="noopener",typeof c=="string"?(y.href=c,y.origin===location.origin?i(y):s(y.href)?r(c,h,m):i(y,y.target="_blank")):(y.href=g.createObjectURL(c),setTimeout(function(){g.revokeObjectURL(y.href)},4e4),setTimeout(function(){i(y)},0))}:"msSaveOrOpenBlob"in navigator?function(c,h,m){if(h=h||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,m),h);else if(s(c))r(c,h,m);else{var g=document.createElement("a");g.href=c,g.target="_blank",setTimeout(function(){i(g)})}}:function(c,h,m,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof c=="string")return r(c,h,m);var y=c.type==="application/octet-stream",E=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||y&&E||a)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var b=T.result;b=x?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=b:location=b,g=null},T.readAsDataURL(c)}else{var v=o.URL||o.webkitURL,_=v.createObjectURL(c);g?g.location=_:location.href=_,g=null,setTimeout(function(){v.revokeObjectURL(_)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(e1);var t6=e1.exports;const n6=Of(t6),r6=({className:t})=>u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[u.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),u.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})]}),s6=({className:t})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:u.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})}),i6=({onExit:t})=>{var ye,Ie,Ce,bt,En,Ut;const[e,n]=G.useState(3),[r,s]=G.useState("portrait"),[i,o]=G.useState([]),[a,l]=G.useState([]),[c,h]=G.useState(-1),[m,g]=G.useState(null),[y,E]=G.useState(!1),[x,T]=G.useState(.25),[v,_]=G.useState(!0),[b,M]=G.useState("add"),[V,B]=G.useState("#ffffff"),k=1080,P=r==="square"?1080:1350,j=e*k,R=P,D=G.useRef(null),S=G.useRef(null),K=G.useRef(!1),he=G.useRef({x:0,y:0}),ne=G.useRef({x:0,y:0}),ee=G.useRef(!1),$=G.useRef({x:0,y:0,w:0,h:0}),le=G.useRef(0),q=G.useRef(.2),L=W=>{let Z="";return W==="circle"?Z='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><circle cx="100" cy="100" r="100" fill="#1e293b"/></svg>':W==="square"?Z='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect width="200" height="200" fill="#334155"/></svg>':W==="triangle"?Z='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 10 L190 190 L10 190 Z" fill="#475569"/></svg>':W==="star"?Z='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="m100 10 25 60 65 5-50 45 15 65-55-35-55 35 15-65-50-45 65-5z" fill="#0f172a"/></svg>':W==="heart"?Z='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 180 C10 100 -20 50 40 20 C70 5 90 30 100 50 C110 30 130 5 160 20 C220 50 190 100 100 180 Z" fill="#ef4444"/></svg>':W==="text"&&(Z='<svg xmlns="http://www.w3.org/2000/svg" width="300" height="100"><rect width="100%" height="100%" fill="transparent"/><text x="50%" y="50%" font-family="Arial" font-size="60" font-weight="bold" fill="#000000" text-anchor="middle" dominant-baseline="middle">Text Here</text></svg>'),`data:image/svg+xml;base64,${btoa(Z)}`},z=W=>{const Z=a.slice(0,c+1);Z.push(W),l(Z),h(Z.length-1)},se=()=>{if(c>0){const W=c-1;o(a[W]),h(W)}else c===0&&(o([]),h(-1))},ie=W=>{o(W),z(W)},ke=W=>{const Z=new Image;Z.onload=()=>{const be=Z.width/Z.height,ve={id:Date.now().toString(),src:W,x:j/2-Z.width/2,y:R/2-Z.height/2,width:Z.width,height:Z.height,originalAspectRatio:be,currentAspectRatio:be,rotation:0,scaleX:1,borderRadius:0,borderColor:"#000000",borderWidth:0,isGrayscale:!1,maskShape:"none"};ve.width>1200&&(ve.width=1200,ve.height=1200/ve.originalAspectRatio);const He=[...i,ve];ie(He),g(ve.id),M("edit"),_(!0)},Z.src=W},ze=W=>{if(W.target.files&&W.target.files[0]){const Z=W.target.files[0],be=new FileReader;be.onload=ve=>{var He;(He=ve.target)!=null&&He.result&&ke(ve.target.result)},be.readAsDataURL(Z)}W.target.value=""},Ae=()=>{if(!m)return;const W=i.filter(Z=>Z.id!==m);ie(W),g(null),M("add")},Be=()=>{if(!m)return;const W=i.find(Z=>Z.id===m);if(W){const Z={...W,id:Date.now().toString(),x:W.x+50,y:W.y+50},be=[...i,Z];ie(be),g(Z.id)}},Le=(W,Z=!0)=>{if(!m)return;const be=i.map(ve=>ve.id===m?{...ve,...W}:ve);Z?ie(be):o(be)},Ze=()=>{const W=i.find(Z=>Z.id===m);W&&Le({rotation:(W.rotation+90)%360})},At=()=>{const W=i.find(Z=>Z.id===m);W&&Le({scaleX:W.scaleX*-1})},ot=()=>{if(!m)return;const W=i.find(ve=>ve.id===m);if(!W)return;let Z=W.originalAspectRatio;Math.abs(W.currentAspectRatio-W.originalAspectRatio)<.01?Z=1:Math.abs(W.currentAspectRatio-1)<.01?Z=.8:Math.abs(W.currentAspectRatio-.8)<.01?Z=1.77:Z=W.originalAspectRatio;const be=W.width/Z;Le({currentAspectRatio:Z,height:be})},C=W=>{o(Z=>{const be=Z.find(He=>He.id===W);return be?[...Z.filter(He=>He.id!==W),be]:Z})},re=W=>{if(!m)return;const Z=i.findIndex(ve=>ve.id===m);if(Z===-1)return;const be=[...i];if(W==="front"){const[ve]=be.splice(Z,1);be.push(ve)}else if(W==="back"){const[ve]=be.splice(Z,1);be.unshift(ve)}else W==="forward"&&Z<be.length-1?[be[Z],be[Z+1]]=[be[Z+1],be[Z]]:W==="backward"&&Z>0&&([be[Z],be[Z-1]]=[be[Z-1],be[Z]]);ie(be)},X=async()=>{E(!0);try{const W=document.createElement("canvas");W.width=j,W.height=R;const Z=W.getContext("2d");if(!Z)throw new Error("Canvas context failed");Z.fillStyle=V,Z.fillRect(0,0,j,R);const be=Ge=>new Promise(Tn=>{const bn=new Image;bn.crossOrigin="anonymous",bn.onload=()=>{Z.save();const dn=Ge.x+Ge.width/2,hn=Ge.y+Ge.height/2;Z.translate(dn,hn),Z.rotate(Ge.rotation*Math.PI/180),Z.scale(Ge.scaleX,1),Ge.isGrayscale&&(Z.filter="grayscale(100%)");const Bt=Ge.width,Qt=Ge.height,Ir=-Bt/2,er=-Qt/2;if(Z.beginPath(),Ge.maskShape==="circle"){const gi=Math.min(Bt,Qt)/2;Z.arc(0,0,gi,0,Math.PI*2)}else(Ge.maskShape==="square"||Ge.borderRadius>0)&&Z.roundRect?Z.roundRect(Ir,er,Bt,Qt,Ge.borderRadius):Z.rect(Ir,er,Bt,Qt);Z.closePath(),Z.save(),Z.clip(),Z.drawImage(bn,Ir,er,Bt,Qt),Z.restore(),Z.filter="none",Ge.borderWidth>0&&(Z.lineWidth=Ge.borderWidth,Z.strokeStyle=Ge.borderColor,Z.stroke()),Z.restore(),Tn()},bn.src=Ge.src});await Promise.all(i.map(be));const ve=new e6,He=ve.folder("instagram-panorama");for(let Ge=0;Ge<e;Ge++){const Tn=document.createElement("canvas");Tn.width=k,Tn.height=P;const bn=Tn.getContext("2d");if(bn){bn.drawImage(W,Ge*k,0,k,P,0,0,k,P);const dn=await new Promise(hn=>Tn.toBlob(hn,"image/jpeg",.95));dn&&He&&He.file(`slide_${Ge+1}.jpg`,dn)}}const St=await ve.generateAsync({type:"blob"});n6.saveAs(St,"ig-panorama-slides.zip")}catch{alert("Gagal membuat zip.")}finally{E(!1)}},O=(W,Z,be)=>{g(be),M("edit"),_(!0),C(be),K.current=!0,he.current={x:W,y:Z};const ve=i.find(He=>He.id===be);ve&&(ne.current={x:ve.x,y:ve.y})},U=(W,Z)=>{W.stopPropagation(),W.preventDefault();const be="touches"in W?W.touches[0].clientX:W.clientX,ve="touches"in W?W.touches[0].clientY:W.clientY;ee.current=!0;const He=i.find(St=>St.id===Z);He&&($.current={x:be,y:ve,w:He.width,h:He.height})},H=(W,Z)=>{if(ee.current&&m){const be=(W-$.current.x)/x,ve=Math.max(50,$.current.w+be);i.find(St=>St.id===m)&&o(St=>St.map(Ge=>Ge.id===m?{...Ge,width:ve,height:ve/Ge.currentAspectRatio}:Ge));return}if(K.current&&m){const be=(W-he.current.x)/x,ve=(Z-he.current.y)/x;o(He=>He.map(St=>St.id===m?{...St,x:ne.current.x+be,y:ne.current.y+ve}:St))}},oe=()=>{(K.current||ee.current)&&z(i),K.current=!1,ee.current=!1,le.current=0},ce=W=>{if(W.touches.length===2){const Z=Math.hypot(W.touches[0].clientX-W.touches[1].clientX,W.touches[0].clientY-W.touches[1].clientY);le.current=Z,q.current=x}},Y=W=>{if(W.touches.length===2&&le.current>0){const be=Math.hypot(W.touches[0].clientX-W.touches[1].clientX,W.touches[0].clientY-W.touches[1].clientY)-le.current,ve=Math.max(.05,Math.min(1.5,q.current+be*.001));T(ve)}},ue=()=>i.find(W=>W.id===m),ge=()=>T(W=>Math.min(W+.05,1.5)),pe=()=>T(W=>Math.max(W-.05,.05));return u.jsxs("div",{className:"h-[100dvh] bg-slate-50 text-slate-900 flex flex-col overflow-hidden font-sans relative",children:[u.jsx("style",{children:`
                    .no-scrollbar::-webkit-scrollbar { display: none; }
                    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
                `}),u.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 pointer-events-none flex justify-between items-start",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:t,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors",children:u.jsx(oo,{className:"w-5 h-5"})}),u.jsx("button",{onClick:se,disabled:c<0,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors disabled:opacity-50",children:u.jsx(hC,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"pointer-events-auto bg-white/90 backdrop-blur-md border border-slate-200 rounded-full flex items-center p-1 shadow-sm",children:[u.jsx("button",{onClick:pe,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:u.jsx(s6,{className:"w-4 h-4"})}),u.jsxs("div",{className:"px-2 text-xs font-mono font-bold text-slate-700 w-10 text-center select-none",children:[Math.round(x*100),"%"]}),u.jsx("button",{onClick:ge,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:u.jsx(r6,{className:"w-4 h-4"})})]}),u.jsx("button",{onClick:X,disabled:y||i.length===0,className:"pointer-events-auto bg-slate-900 hover:bg-slate-800 text-white px-4 py-2.5 rounded-full shadow-lg shadow-slate-900/10 font-bold text-xs flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 border border-slate-800",children:y?"Saving...":u.jsxs(u.Fragment,{children:[u.jsx(D_,{className:"w-4 h-4"})," Save"]})})]}),u.jsx("div",{className:"flex-1 bg-slate-100 overflow-hidden relative flex flex-col",children:u.jsx("div",{className:"flex-1 overflow-auto no-scrollbar relative w-full h-full grid place-items-center p-8 canvas-bg touch-none transition-all duration-300",style:{paddingBottom:v?"140px":"0px"},ref:S,onClick:W=>{W.target===S.current&&g(null)},onMouseMove:W=>H(W.clientX,W.clientY),onTouchMove:W=>{if(W.touches.length===2){Y(W);return}H(W.touches[0].clientX,W.touches[0].clientY)},onMouseUp:oe,onTouchEnd:oe,onTouchStart:ce,children:u.jsxs("div",{className:"relative shadow-2xl transition-transform duration-75 ease-linear shrink-0",style:{width:j*x,height:R*x},children:[u.jsx("div",{className:"absolute inset-0 canvas-bg",style:{backgroundColor:V}}),u.jsx("div",{className:"absolute inset-0 overflow-hidden",children:i.map(W=>u.jsxs("div",{className:"absolute group",style:{left:W.x*x,top:W.y*x,width:W.width*x,height:W.height*x,transform:`rotate(${W.rotation}deg) scaleX(${W.scaleX})`,zIndex:m===W.id?50:1},children:[u.jsx("div",{className:`absolute -inset-0.5 pointer-events-none transition-opacity duration-200 z-50 ${m===W.id?"opacity-100":"opacity-0"}`,style:{border:"2px dashed #0f172a",borderRadius:W.maskShape==="circle"?"50%":`${W.borderRadius}px`}}),u.jsx("div",{style:{width:"100%",height:"100%",borderRadius:W.maskShape==="circle"?"50%":`${W.borderRadius}px`,overflow:"hidden",border:W.borderWidth>0?`${W.borderWidth*x}px solid ${W.borderColor}`:"none",filter:W.isGrayscale?"grayscale(100%)":"none",position:"relative"},onMouseDown:Z=>O(Z.clientX,Z.clientY,W.id),onTouchStart:Z=>{Z.touches.length===1&&O(Z.touches[0].clientX,Z.touches[0].clientY,W.id)},children:u.jsx("img",{src:W.src,alt:"item",className:"w-full h-full select-none",draggable:!1,style:{objectFit:"cover"}})})]},W.id))}),m&&ue()&&u.jsxs("div",{className:"absolute pointer-events-auto z-[100]",style:{left:(ue().x+ue().width/2)*x,top:Math.max(-50,ue().y*x-60),transform:"translateX(-50%)"},onMouseDown:W=>W.stopPropagation(),onTouchStart:W=>W.stopPropagation(),children:[u.jsxs("div",{className:"bg-white/90 backdrop-blur-md text-slate-700 rounded-xl shadow-xl border border-slate-200 flex items-center p-1.5 gap-1",children:[u.jsx("button",{onClick:Ze,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:u.jsx(nC,{className:"w-4 h-4"})}),u.jsx("button",{onClick:At,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:u.jsx(rC,{className:"w-4 h-4"})}),u.jsx("button",{onClick:ot,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-900",children:u.jsx(dC,{className:"w-4 h-4"})}),u.jsx("button",{onClick:Be,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:u.jsx(sC,{className:"w-4 h-4"})}),u.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1"}),u.jsx("button",{onClick:Ae,className:"p-2 hover:bg-red-50 text-red-500 rounded-lg",children:u.jsx(_s,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"w-3 h-3 bg-white/90 rotate-45 absolute -bottom-1.5 left-1/2 -translate-x-1/2 border-r border-b border-slate-200"})]}),i.map(W=>m===W.id&&u.jsxs("div",{className:"absolute pointer-events-none z-[51]",style:{left:W.x*x,top:W.y*x,width:W.width*x,height:W.height*x,transform:`rotate(${W.rotation}deg) scaleX(${W.scaleX})`},children:[u.jsx("div",{className:"absolute -bottom-3 -right-3 w-6 h-6 bg-slate-900 rounded-full border-2 border-white shadow-md pointer-events-auto flex items-center justify-center cursor-nwse-resize hover:scale-110 transition-transform",onMouseDown:Z=>U(Z,W.id),onTouchStart:Z=>U(Z,W.id),children:u.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),ee.current&&u.jsxs("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-[10px] px-2 py-1 rounded shadow whitespace-nowrap",children:[Math.round(W.width),"px"]})]},`resize-${W.id}`)),u.jsx("div",{className:"absolute inset-0 pointer-events-none z-20",children:Array.from({length:e-1}).map((W,Z)=>u.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-dashed border-slate-400/50 flex flex-col justify-between items-center py-2 mix-blend-difference",style:{left:`${(Z+1)/e*100}%`},children:u.jsx(tC,{className:"w-4 h-4 text-slate-600 opacity-80 bg-white/20 rounded-full p-0.5"})},Z))}),u.jsx("div",{className:"absolute top-0 left-0 w-full flex pointer-events-none z-20",children:Array.from({length:e}).map((W,Z)=>u.jsx("div",{className:"flex-1 border-r border-transparent h-6 flex items-center justify-center",children:u.jsxs("span",{className:"bg-white/80 text-slate-900 text-[9px] font-bold px-2 rounded-b backdrop-blur-sm shadow-sm border-x border-b border-slate-200",children:["Slide ",Z+1]})},Z))})]})})}),u.jsxs("div",{className:`fixed bottom-0 left-0 right-0 z-[60] flex flex-col bg-white border-t border-slate-200 transition-transform duration-300 ease-out shadow-[0_-10px_30px_-10px_rgba(0,0,0,0.05)] ${v?"translate-y-0":"translate-y-[calc(100%-40px)]"}`,children:[u.jsxs("div",{onClick:()=>_(!v),className:"h-10 flex items-center justify-center cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors border-b border-slate-200 group shrink-0",children:[u.jsx("div",{className:"w-12 h-1 bg-slate-300 rounded-full group-hover:bg-slate-400 mb-1"}),u.jsx(Fa,{className:`w-4 h-4 text-slate-400 absolute right-4 transition-transform duration-300 ${v?"":"rotate-180"}`})]}),u.jsxs("div",{className:"flex border-b border-slate-200 bg-white shrink-0",children:[u.jsx("button",{onClick:()=>{M("add"),_(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${b==="add"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Add"}),u.jsx("button",{onClick:()=>{M("canvas"),_(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${b==="canvas"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Layout"}),u.jsx("button",{onClick:()=>{M("edit"),_(!0)},disabled:!m,className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${b==="edit"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-300 cursor-not-allowed"}`,children:"Edit"})]}),u.jsxs("div",{className:"h-28 overflow-x-auto overflow-y-hidden bg-white no-scrollbar flex items-center",children:[b==="add"&&u.jsxs("div",{className:"flex items-center gap-4 px-6 min-w-max",children:[u.jsxs("button",{onClick:()=>{var W;return(W=D.current)==null?void 0:W.click()},className:"h-20 w-20 bg-slate-50 hover:bg-slate-100 rounded-xl text-slate-700 font-bold flex flex-col items-center justify-center gap-2 border border-slate-200 transition-all shrink-0",children:[u.jsx(Mc,{className:"w-6 h-6 text-slate-900"}),u.jsx("span",{className:"text-[10px] uppercase",children:"Upload"})]}),u.jsx("input",{type:"file",ref:D,onChange:ze,className:"hidden",accept:"image/*"}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>ke(L("circle")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(iC,{className:"w-6 h-6 text-slate-700"})}),u.jsx("button",{onClick:()=>ke(L("square")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(oC,{className:"w-6 h-6 text-slate-700"})}),u.jsx("button",{onClick:()=>ke(L("triangle")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(aC,{className:"w-6 h-6 text-slate-700"})}),u.jsx("button",{onClick:()=>ke(L("heart")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(uC,{className:"w-6 h-6 text-red-500"})}),u.jsx("button",{onClick:()=>ke(L("star")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:u.jsx(lC,{className:"w-6 h-6 text-slate-900"})}),u.jsx("button",{onClick:()=>ke(L("text")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors font-bold text-xs text-slate-700",children:"TXT"})]})]}),b==="canvas"&&u.jsxs("div",{className:"flex items-center gap-6 px-6 min-w-max h-full",children:[u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl flex flex-col justify-center gap-1 w-48 shrink-0 border border-slate-100",children:[u.jsx("div",{className:"flex justify-between text-[10px] text-slate-500 font-bold uppercase",children:u.jsxs("span",{children:["Slides (",e,")"]})}),u.jsx("input",{type:"range",min:"2",max:"10",value:e,onChange:W=>n(parseInt(W.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>s("square"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${r==="square"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Square 1:1"}),u.jsx("button",{onClick:()=>s("portrait"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${r==="portrait"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Portrait 4:5"})]}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100 flex items-center justify-between gap-3 shrink-0",children:[u.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Background"}),u.jsx("input",{type:"color",value:V,onChange:W=>B(W.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-0"})]})]}),b==="edit"&&m&&u.jsxs("div",{className:"flex items-center gap-5 px-6 min-w-max h-full",children:[u.jsxs("div",{className:"flex flex-col gap-1 items-center shrink-0",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Layers"}),u.jsxs("div",{className:"flex gap-1 bg-slate-50 border border-slate-100 p-1 rounded-lg",children:[u.jsx("button",{onClick:()=>re("front"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Bring to Front",children:u.jsx(Ju,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>re("forward"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Step Forward",children:u.jsx(L_,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>re("backward"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Step Backward",children:u.jsx(V_,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>re("back"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Send to Back",children:u.jsx(Ju,{className:"w-4 h-4 opacity-50"})})]})]}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"flex flex-col gap-1 w-40 shrink-0",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Size"}),u.jsx("input",{type:"range",min:"10",max:"250",defaultValue:"100",onChange:W=>Le({width:ue().originalAspectRatio*100*(parseInt(W.target.value)/10),height:ue().originalAspectRatio*100*(parseInt(W.target.value)/10)/ue().currentAspectRatio},!1),onMouseUp:()=>z(i),onTouchEnd:()=>z(i),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"})]}),u.jsxs("div",{className:"flex flex-col gap-1 shrink-0",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Mask"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>Le({maskShape:"none",borderRadius:0}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((ye=ue())==null?void 0:ye.maskShape)==="none"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Box"}),u.jsx("button",{onClick:()=>Le({maskShape:"circle"}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((Ie=ue())==null?void 0:Ie.maskShape)==="circle"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Circle"}),u.jsx("button",{onClick:()=>Le({maskShape:"square",borderRadius:20}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((Ce=ue())==null?void 0:Ce.maskShape)==="square"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Round"})]})]}),u.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),u.jsxs("div",{className:"flex flex-col gap-1 w-40 shrink-0",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Border"}),u.jsx("input",{type:"color",value:(bt=ue())==null?void 0:bt.borderColor,onChange:W=>Le({borderColor:W.target.value}),className:"w-4 h-4 rounded bg-transparent border-0 cursor-pointer"})]}),u.jsx("input",{type:"range",min:"0",max:"20",value:(En=ue())==null?void 0:En.borderWidth,onChange:W=>Le({borderWidth:parseInt(W.target.value)}),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900"})]}),u.jsxs("button",{onClick:()=>{var W;return Le({isGrayscale:!((W=ue())!=null&&W.isGrayscale)})},className:`h-12 px-3 rounded-lg text-[10px] font-bold border transition-colors flex flex-col items-center justify-center gap-1 shrink-0 ${(Ut=ue())!=null&&Ut.isGrayscale?"bg-slate-100 text-slate-900 border-slate-300":"bg-white border-slate-200 text-slate-400 hover:border-slate-300"}`,children:[u.jsx(cC,{className:"w-4 h-4"}),"B&W"]})]})]})]})]})},o6=t=>{const e=t.toUpperCase().split("").map(n=>127397+n.charCodeAt(0));return String.fromCodePoint(...e)},a6=({data:t})=>{if(!t||t.length===0)return u.jsx("div",{className:"h-40 flex items-center justify-center text-slate-300",children:"No Data"});const e=150,n=600,r=20,s=Math.max(...t.map(o=>o.visitors),10),i=t.map((o,a)=>{const l=r+a/(t.length-1)*(n-2*r),c=e-r-o.visitors/s*(e-2*r);return`${l},${c}`}).join(" ");return u.jsxs("div",{className:"w-full overflow-hidden",children:[u.jsxs("svg",{viewBox:`0 0 ${n} ${e}`,className:"w-full h-auto",children:[u.jsx("line",{x1:r,y1:r,x2:n-r,y2:r,stroke:"#f1f5f9",strokeWidth:"1"}),u.jsx("line",{x1:r,y1:e/2,x2:n-r,y2:e/2,stroke:"#f1f5f9",strokeWidth:"1"}),u.jsx("line",{x1:r,y1:e-r,x2:n-r,y2:e-r,stroke:"#f1f5f9",strokeWidth:"1"}),u.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"3",points:i,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((o,a)=>{const l=r+a/(t.length-1)*(n-2*r),c=e-r-o.visitors/s*(e-2*r);return u.jsxs("g",{className:"group",children:[u.jsx("circle",{cx:l,cy:c,r:"4",fill:"white",stroke:"#3b82f6",strokeWidth:"2"}),u.jsx("foreignObject",{x:l-25,y:c-40,width:"50",height:"30",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("div",{className:"bg-slate-800 text-white text-[9px] rounded py-1 text-center font-bold",children:o.visitors})})]},a)})]}),u.jsx("div",{className:"flex justify-between px-2 mt-2 text-[10px] text-slate-400 font-medium",children:t.map((o,a)=>u.jsx("span",{children:o.date.slice(5)},a))})]})},l6=()=>{const[t,e]=G.useState(!0),[n,r]=G.useState(null),[s,i]=G.useState([]),o=async()=>{e(!0);const[m,g]=await Promise.all([QP(),KP()]);r(m),i(g),e(!1)};G.useEffect(()=>{o()},[]);const a=m=>new Date(m).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});if(t)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"})});if(!n)return u.jsx("div",{className:"p-10 text-center",children:"Failed to load data."});const l=n.dailyStats.length>0?n.dailyStats[n.dailyStats.length-1].visitors:0,c=n.dailyStats.length>1?n.dailyStats[n.dailyStats.length-2].visitors:0,h=c===0?100:Math.round((l-c)/c*100);return u.jsx("div",{className:"min-h-screen bg-slate-50 p-6 md:p-10 animate-fade-in",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-10 gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Dashboard Overview"}),u.jsx("p",{className:"text-slate-500",children:"Real-time insight & system health."})]}),u.jsxs("button",{onClick:o,className:"bg-white border border-slate-200 text-slate-600 px-4 py-2 rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-slate-50 hover:text-slate-900 transition-colors shadow-sm",children:[u.jsx(Dc,{className:"w-4 h-4"})," Refresh Data"]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-2xl",children:u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),h!==0&&u.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${h>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[h>0?u.jsx(L_,{className:"w-3 h-3"}):u.jsx(V_,{className:"w-3 h-3"}),Math.abs(h),"%"]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-black text-slate-900",children:n.totalVisitors}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Total Visitors (7 Days)"})]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[u.jsx("div",{className:"flex justify-between items-start",children:u.jsx("div",{className:"p-3 bg-slate-900 text-white rounded-2xl",children:u.jsx(I0,{className:"w-6 h-6"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-black text-slate-900",children:s.length}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Private Messages"})]})]}),u.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[u.jsx("div",{className:"flex justify-between items-start",children:u.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-2xl",children:u.jsx(el,{className:"w-6 h-6"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-black text-slate-900",children:n.totalErrors}),u.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"System Errors (7 Days)"})]})]})]}),u.jsx("div",{className:"mb-10",children:u.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between",children:[u.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[u.jsx(I0,{className:"w-5 h-5 text-slate-900"})," Inbox Rahasia (Private)"]}),u.jsx("span",{className:"text-xs font-bold bg-slate-200 text-slate-600 px-2 py-1 rounded-full",children:s.length})]}),u.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:s.length===0?u.jsx("div",{className:"p-12 text-center text-slate-400 text-sm",children:"Belum ada pesan rahasia masuk."}):u.jsx("div",{className:"divide-y divide-slate-50",children:s.map(m=>u.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[u.jsx("div",{className:"flex justify-between items-start mb-2",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-bold bg-slate-900 text-white px-2 py-0.5 rounded",children:"Anonim"}),u.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:a(m.timestamp)})]})}),u.jsx("p",{className:"text-slate-700 text-sm leading-relaxed whitespace-pre-wrap",children:m.content})]},m.id))})})]})}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Traffic Trend"}),u.jsx(a6,{data:n.dailyStats})]}),u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"System Logs"}),u.jsx("div",{className:"space-y-4",children:n.logs.length===0?u.jsx("p",{className:"text-slate-400 text-sm italic",children:"No logs recorded."}):n.logs.map(m=>u.jsxs("div",{className:"flex gap-4 items-start p-3 hover:bg-slate-50 rounded-xl transition-colors border-b border-slate-50 last:border-0",children:[u.jsx("div",{className:`w-2 h-2 rounded-full mt-2 shrink-0 ${m.type==="error"?"bg-red-500":"bg-blue-500"}`}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:m.message}),u.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1",children:new Date(m.timestamp).toLocaleString()}),m.details&&u.jsx("p",{className:"text-xs text-slate-400 mt-1 truncate",children:m.details})]})]},m.id))})]})]}),u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[u.jsx(lr,{className:"w-5 h-5 text-slate-400"}),u.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Demographics"})]}),u.jsx("div",{className:"space-y-5",children:n.geoStats.length===0?u.jsx("p",{className:"text-slate-400 text-sm italic",children:"No data yet."}):n.geoStats.map((m,g)=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-700 mb-2",children:[u.jsxs("span",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:o6(m.country)})," ",m.country]}),u.jsx("span",{children:m.count})]}),u.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2 overflow-hidden",children:u.jsx("div",{className:"bg-slate-900 h-2 rounded-full",style:{width:`${m.count/n.totalVisitors*100}%`}})})]},g))})]}),u.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2rem] text-white shadow-xl relative overflow-hidden",children:[u.jsxs("div",{className:"relative z-10",children:[u.jsx("h3",{className:"text-lg font-bold mb-2",children:"System Status"}),u.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),u.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"All Systems Operational"})]}),u.jsxs("div",{className:"space-y-2 text-xs text-slate-500",children:[u.jsx("p",{children:"Database: Connected"}),u.jsx("p",{children:"API Latency: ~120ms"}),u.jsx("p",{children:"Version: v2.4.0 (Beta)"})]})]}),u.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-blue-600/20 rounded-full blur-3xl pointer-events-none"})]})]})]})]})})},u6=({onLogout:t,onNavigate:e})=>{const[n,r]=G.useState(!1),[s,i]=G.useState({x:20,y:window.innerHeight-80}),[o,a]=G.useState(!1),l=G.useRef({x:0,y:0}),c=G.useRef({x:0,y:0}),h=G.useRef(null);G.useEffect(()=>{const v=b=>{if(!o)return;b.preventDefault();const M=b.clientX-l.current.x,V=b.clientY-l.current.y,B=Math.max(10,Math.min(window.innerWidth-60,c.current.x+M)),k=Math.max(10,Math.min(window.innerHeight-60,c.current.y+V));i({x:B,y:k})},_=()=>{a(!1)};return o&&(window.addEventListener("mousemove",v),window.addEventListener("mouseup",_)),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",_)}},[o]);const m=v=>{n||(a(!0),l.current={x:v.clientX,y:v.clientY},c.current={...s})},g=v=>{n||(a(!0),l.current={x:v.touches[0].clientX,y:v.touches[0].clientY},c.current={...s})},y=v=>{if(!o)return;const _=v.touches[0].clientX-l.current.x,b=v.touches[0].clientY-l.current.y,M=Math.max(10,Math.min(window.innerWidth-60,c.current.x+_)),V=Math.max(10,Math.min(window.innerHeight-60,c.current.y+b));i({x:M,y:V})},E=v=>{Math.sqrt(Math.pow(v.clientX-l.current.x,2)+Math.pow(v.clientY-l.current.y,2))<5&&r(!n)},x=()=>{Ly(),alert("Cache teks di memori telah dihapus. Halaman akan dimuat ulang."),window.location.reload()},T=()=>{confirm("Yakin ingin reset total? Ini akan menghapus semua pengaturan lokal dan login.")&&(localStorage.clear(),Ly(),window.location.reload())};return u.jsxs(u.Fragment,{children:[n&&u.jsx("div",{className:"fixed inset-0 z-[998]",onClick:()=>r(!1)}),u.jsx("div",{className:"fixed z-[999]",style:{left:s.x,top:s.y},children:u.jsxs("div",{className:"relative",children:[u.jsx("button",{onMouseDown:m,onClick:E,onTouchStart:g,onTouchMove:y,onTouchEnd:()=>a(!1),className:`w-12 h-12 rounded-full flex items-center justify-center shadow-xl transition-all duration-200 cursor-grab active:cursor-grabbing ${n?"bg-slate-900 text-white rotate-90 scale-110":"bg-white text-slate-700 border border-slate-200 hover:scale-105"}`,style:{touchAction:"none"},children:u.jsx(nf,{className:"w-6 h-6"})}),n&&u.jsxs("div",{ref:h,className:"absolute bottom-16 left-0 bg-white/90 backdrop-blur-md border border-slate-200 rounded-2xl shadow-2xl p-2 w-60 flex flex-col gap-1 animate-fade-in-up origin-bottom-left",children:[u.jsx("div",{className:"px-3 py-2 border-b border-slate-100 mb-1",children:u.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Admin Tools"})}),u.jsxs("button",{onClick:()=>{e(rt.AdminDashboard),r(!1)},className:"flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-900 hover:bg-slate-100 rounded-xl transition-colors text-left",children:[u.jsx("div",{className:"p-1.5 bg-slate-200 text-slate-700 rounded-lg",children:u.jsx(O_,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-xs",children:"Open Dashboard"}),u.jsx("span",{className:"block text-[9px] text-slate-400",children:"View analytics & charts"})]})]}),u.jsx("div",{className:"h-px bg-slate-100 mx-2 my-1"}),u.jsxs("button",{onClick:x,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:text-blue-600 rounded-xl transition-colors text-left",children:[u.jsx("div",{className:"p-1.5 bg-blue-50 text-blue-500 rounded-lg",children:u.jsx(Dc,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-xs",children:"Hapus Cache"}),u.jsx("span",{className:"block text-[9px] text-slate-400",children:"Fix teks nyangkut"})]})]}),u.jsxs("button",{onClick:T,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-red-50 hover:text-red-600 rounded-xl transition-colors text-left",children:[u.jsx("div",{className:"p-1.5 bg-red-50 text-red-500 rounded-lg",children:u.jsx(_s,{className:"w-3.5 h-3.5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block font-bold text-xs",children:"Reset Total"}),u.jsx("span",{className:"block text-[9px] text-slate-400",children:"Hapus data lokal"})]})]})]})]})})]})},c6=({isOpen:t,onClose:e,onSuccess:n})=>{const[r,s]=G.useState(["","","","",""]),[i,o]=G.useState(!1),a=G.useRef([]);G.useEffect(()=>{t&&(s(["","","","",""]),o(!1),setTimeout(()=>{var h;return(h=a.current[0])==null?void 0:h.focus()},100))},[t]);const l=(h,m)=>{var y;if(!/^\d*$/.test(m))return;const g=[...r];g[h]=m,s(g),o(!1),m&&h<4&&((y=a.current[h+1])==null||y.focus()),g.every(E=>E!=="")&&(g.join("")==="47326"?(n(),e()):(o(!0),setTimeout(()=>{var x;s(["","","","",""]),(x=a.current[0])==null||x.focus()},500)))},c=(h,m)=>{var g;m.key==="Backspace"&&!r[h]&&h>0&&((g=a.current[h-1])==null||g.focus())};return t?u.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/80 backdrop-blur-sm p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-2xl max-w-sm w-full relative overflow-hidden",children:[u.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-800",children:""}),u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-900 rounded-full flex items-center justify-center text-white mb-6 shadow-lg shadow-slate-900/30",children:u.jsx(ja,{className:"w-5 h-5"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Admin Access"}),u.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Enter secure PIN to continue"}),u.jsx("div",{className:"flex gap-3 mb-6",children:r.map((h,m)=>u.jsx("input",{ref:g=>a.current[m]=g,type:"password",maxLength:1,value:h,onChange:g=>l(m,g.target.value),onKeyDown:g=>c(m,g),className:`w-10 h-12 border-2 rounded-lg text-center text-xl font-bold bg-slate-50 focus:bg-white transition-all outline-none ${i?"border-red-500 text-red-500 shake":"border-slate-200 focus:border-slate-900 text-slate-900"}`,autoComplete:"off",inputMode:"numeric"},m))}),i&&u.jsx("p",{className:"text-xs font-bold text-red-500 animate-pulse",children:"Access Denied"})]})]})}):null},d6=()=>{const[t,e]=G.useState(rt.Home),[n,r]=G.useState(!0),[s,i]=G.useState(!1),[o,a]=G.useState(!1),[l,c]=G.useState(!1);G.useEffect(()=>{window.scrollTo(0,0)},[t]),G.useEffect(()=>{YP(),localStorage.removeItem("fanra_admin_auth");const E=x=>{const T=x.target;["INPUT","TEXTAREA"].includes(T.tagName)||T.isContentEditable||x.key.toLowerCase()==="f"&&(x.preventDefault(),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(v=>{console.log(`Error attempting to enable fullscreen: ${v.message}`)}))};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[]);const h=()=>{window.scrollTo(0,0),r(!1)},m=()=>{c(!0)},g=t===rt.AIStudio||t===rt.IGSeamless,y=()=>{switch(t){case rt.Home:return u.jsx(Fy,{onNavigate:e,onTriggerAdmin:()=>a(!0),isAdmin:l});case rt.Projects:return u.jsx(o4,{isAdmin:l,onLaunchApp:()=>e(rt.AIStudio),onOpenIG:()=>e(rt.IGSeamless)});case rt.Blog:return u.jsx(a4,{isAdmin:l});case rt.Gallery:return u.jsx(l4,{isAdmin:l});case rt.Music:return u.jsx(u4,{isAdmin:l});case rt.Messages:return u.jsx(c4,{isAdmin:l});case rt.AIStudio:return u.jsx(XF,{onExit:()=>e(rt.Projects)});case rt.IGSeamless:return u.jsx(i6,{onExit:()=>e(rt.Projects)});case rt.AdminDashboard:return u.jsx(l6,{});default:return u.jsx(Fy,{onNavigate:e,onTriggerAdmin:()=>a(!0),isAdmin:l})}};return u.jsxs("div",{className:"min-h-screen flex flex-col font-sans bg-[#fafafa] relative overflow-x-hidden",children:[!g&&u.jsx(e4,{activeTab:t,setActiveTab:e,isMenuOpen:s,setIsMenuOpen:i,isAdmin:l}),u.jsx("main",{className:`${g?"pt-0 h-screen overflow-hidden":"flex-grow pt-24 pb-12"}`,children:u.jsx("div",{className:"animate-fade-in-up h-full",children:y()},t)}),u.jsx(c6,{isOpen:o,onClose:()=>a(!1),onSuccess:m}),l&&u.jsx(u6,{onLogout:()=>c(!1),onNavigate:e}),n&&u.jsx(s4,{onComplete:h,onTriggerAdmin:()=>a(!0)}),!g&&t!==rt.AdminDashboard&&u.jsxs(u.Fragment,{children:[u.jsx(d4,{}),u.jsx(h4,{}),u.jsxs("footer",{className:"bg-slate-950 text-white pt-32 pb-12 px-6 overflow-hidden relative mt-12",children:[u.jsx("div",{className:"absolute inset-0 z-0 opacity-20 pointer-events-none mix-blend-overlay",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),u.jsx("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"20px 20px",maskImage:"linear-gradient(to bottom, transparent, black)"}}),u.jsx("div",{className:"absolute top-0 left-0 w-full overflow-hidden leading-[0] z-20",children:u.jsx("svg",{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",className:"relative block w-full h-[50px] md:h-[90px] fill-[#fafafa]",children:u.jsx("path",{d:"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"})})}),u.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16",children:[u.jsxs("div",{className:"lg:col-span-2",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsx(io,{className:"w-12 h-12",variant:"light"}),u.jsx(Ve,{id:"footer_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:l,tag:"h2",className:"text-2xl font-black tracking-tighter uppercase"})]}),u.jsx(Ve,{id:"footer_brand_desc",defaultText:"Seorang mahasiswa ITERA angkatan 2025 yang hobi mengulik kode dan berbagi cerita lewat ruang digital.",isAdmin:l,tag:"p",multiline:!0,className:"text-slate-500 text-sm max-w-sm leading-relaxed font-medium"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Communication"}),u.jsxs("a",{href:"mailto:irfanrizkiaditri@gmail.com",className:"text-sm font-bold text-slate-200 hover:text-white transition-colors flex items-center gap-3 group",children:[u.jsx(mC,{className:"w-5 h-5 group-hover:scale-110 transition-transform text-slate-400 group-hover:text-white"}),u.jsx(Ve,{id:"footer_email",defaultText:"irfanrizkiaditri@gmail.com",isAdmin:l,tag:"span"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Social Discovery"}),u.jsxs("div",{className:"flex gap-6",children:[u.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:u.jsx(fC,{className:"w-6 h-6"})}),u.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:u.jsx(pC,{className:"w-6 h-6"})}),u.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:u.jsx(z_,{className:"w-6 h-6"})})]})]})]}),u.jsxs("div",{className:"pt-8 border-t border-slate-900 flex flex-col md:flex-row justify-between items-center gap-6",children:[u.jsxs("p",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:[" ",new Date().getFullYear(),"  ",u.jsx(Ve,{id:"footer_copyright",defaultText:"PERSPECTIVE OF FANRA",isAdmin:l,tag:"span"})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsx("span",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:u.jsx(Ve,{id:"footer_location",defaultText:"Sumatera, Indonesia",isAdmin:l,tag:"span"})})})]})]}),u.jsx("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] opacity-[0.02] pointer-events-none translate-x-20 -translate-y-20",children:u.jsx(io,{className:"w-full h-full",variant:"light"})})]})]})]})},t1=document.getElementById("root");if(!t1)throw new Error("Could not find root element to mount to");const h6=uh.createRoot(t1);h6.render(u.jsx(Nx.StrictMode,{children:u.jsx(d6,{})}));

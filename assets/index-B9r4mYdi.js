function Bk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ab={exports:{}},Jd={},lb={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pc=Symbol.for("react.element"),zk=Symbol.for("react.portal"),Gk=Symbol.for("react.fragment"),$k=Symbol.for("react.strict_mode"),Hk=Symbol.for("react.profiler"),qk=Symbol.for("react.provider"),Wk=Symbol.for("react.context"),Kk=Symbol.for("react.forward_ref"),Jk=Symbol.for("react.suspense"),Yk=Symbol.for("react.memo"),Qk=Symbol.for("react.lazy"),Ty=Symbol.iterator;function Xk(t){return t===null||typeof t!="object"?null:(t=Ty&&t[Ty]||t["@@iterator"],typeof t=="function"?t:null)}var cb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ub=Object.assign,db={};function ba(t,e,n){this.props=t,this.context=e,this.refs=db,this.updater=n||cb}ba.prototype.isReactComponent={};ba.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ba.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hb(){}hb.prototype=ba.prototype;function Um(t,e,n){this.props=t,this.context=e,this.refs=db,this.updater=n||cb}var Vm=Um.prototype=new hb;Vm.constructor=Um;ub(Vm,ba.prototype);Vm.isPureReactComponent=!0;var Iy=Array.isArray,fb=Object.prototype.hasOwnProperty,Om={current:null},pb={key:!0,ref:!0,__self:!0,__source:!0};function mb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)fb.call(e,r)&&!pb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:pc,type:t,key:i,ref:o,props:s,_owner:Om.current}}function Zk(t,e){return{$$typeof:pc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bm(t){return typeof t=="object"&&t!==null&&t.$$typeof===pc}function eC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sy=/\/+/g;function nf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eC(""+t.key):e.toString(36)}function Nu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pc:case zk:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+nf(o,0):r,Iy(s)?(n="",t!=null&&(n=t.replace(Sy,"$&/")+"/"),Nu(s,e,n,"",function(u){return u})):s!=null&&(Bm(s)&&(s=Zk(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Sy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Iy(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+nf(i,a);o+=Nu(i,e,n,c,s)}else if(c=Xk(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+nf(i,a++),o+=Nu(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tu(t,e,n){if(t==null)return t;var r=[],s=0;return Nu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function tC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pn={current:null},Ru={transition:null},nC={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:Ru,ReactCurrentOwner:Om};function gb(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:tu,forEach:function(t,e,n){tu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tu(t,function(){e++}),e},toArray:function(t){return tu(t,function(e){return e})||[]},only:function(t){if(!Bm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ke.Component=ba;Ke.Fragment=Gk;Ke.Profiler=Hk;Ke.PureComponent=Um;Ke.StrictMode=$k;Ke.Suspense=Jk;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nC;Ke.act=gb;Ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ub({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Om.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)fb.call(e,c)&&!pb.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:pc,type:t.type,key:s,ref:i,props:r,_owner:o}};Ke.createContext=function(t){return t={$$typeof:Wk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qk,_context:t},t.Consumer=t};Ke.createElement=mb;Ke.createFactory=function(t){var e=mb.bind(null,t);return e.type=t,e};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(t){return{$$typeof:Kk,render:t}};Ke.isValidElement=Bm;Ke.lazy=function(t){return{$$typeof:Qk,_payload:{_status:-1,_result:t},_init:tC}};Ke.memo=function(t,e){return{$$typeof:Yk,type:t,compare:e===void 0?null:e}};Ke.startTransition=function(t){var e=Ru.transition;Ru.transition={};try{t()}finally{Ru.transition=e}};Ke.unstable_act=gb;Ke.useCallback=function(t,e){return Pn.current.useCallback(t,e)};Ke.useContext=function(t){return Pn.current.useContext(t)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(t){return Pn.current.useDeferredValue(t)};Ke.useEffect=function(t,e){return Pn.current.useEffect(t,e)};Ke.useId=function(){return Pn.current.useId()};Ke.useImperativeHandle=function(t,e,n){return Pn.current.useImperativeHandle(t,e,n)};Ke.useInsertionEffect=function(t,e){return Pn.current.useInsertionEffect(t,e)};Ke.useLayoutEffect=function(t,e){return Pn.current.useLayoutEffect(t,e)};Ke.useMemo=function(t,e){return Pn.current.useMemo(t,e)};Ke.useReducer=function(t,e,n){return Pn.current.useReducer(t,e,n)};Ke.useRef=function(t){return Pn.current.useRef(t)};Ke.useState=function(t){return Pn.current.useState(t)};Ke.useSyncExternalStore=function(t,e,n){return Pn.current.useSyncExternalStore(t,e,n)};Ke.useTransition=function(){return Pn.current.useTransition()};Ke.version="18.3.1";lb.exports=Ke;var j=lb.exports;const Ml=Fm(j),rC=Bk({__proto__:null,default:Ml},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sC=j,iC=Symbol.for("react.element"),oC=Symbol.for("react.fragment"),aC=Object.prototype.hasOwnProperty,lC=sC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cC={key:!0,ref:!0,__self:!0,__source:!0};function yb(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)aC.call(e,r)&&!cC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:iC,type:t,key:i,ref:o,props:s,_owner:lC.current}}Jd.Fragment=oC;Jd.jsx=yb;Jd.jsxs=yb;ab.exports=Jd;var l=ab.exports,Zf={},vb={exports:{}},ir={},xb={exports:{}},wb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ne,Y){var ue=ne.length;ne.push(Y);e:for(;0<ue;){var q=ue-1>>>1,z=ne[q];if(0<s(z,Y))ne[q]=Y,ne[ue]=z,ue=q;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var Y=ne[0],ue=ne.pop();if(ue!==Y){ne[0]=ue;e:for(var q=0,z=ne.length,X=z>>>1;q<X;){var le=2*(q+1)-1,ae=ne[le],Ae=le+1,we=ne[Ae];if(0>s(ae,ue))Ae<z&&0>s(we,ae)?(ne[q]=we,ne[Ae]=ue,q=Ae):(ne[q]=ae,ne[le]=ue,q=le);else if(Ae<z&&0>s(we,ue))ne[q]=we,ne[Ae]=ue,q=Ae;else break e}}return Y}function s(ne,Y){var ue=ne.sortIndex-Y.sortIndex;return ue!==0?ue:ne.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,m=null,g=3,y=!1,b=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(ne){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=ne)r(u),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(u)}}function P(ne){if(x=!1,T(ne),!b)if(n(c)!==null)b=!0,ye(L);else{var Y=n(u);Y!==null&&re(P,Y.startTime-ne)}}function L(ne,Y){b=!1,x&&(x=!1,v(I),I=-1),y=!0;var ue=g;try{for(T(Y),m=n(c);m!==null&&(!(m.expirationTime>Y)||ne&&!U());){var q=m.callback;if(typeof q=="function"){m.callback=null,g=m.priorityLevel;var z=q(m.expirationTime<=Y);Y=t.unstable_now(),typeof z=="function"?m.callback=z:m===n(c)&&r(c),T(Y)}else r(c);m=n(c)}if(m!==null)var X=!0;else{var le=n(u);le!==null&&re(P,le.startTime-Y),X=!1}return X}finally{m=null,g=ue,y=!1}}var B=!1,k=null,I=-1,A=5,N=-1;function U(){return!(t.unstable_now()-N<A)}function R(){if(k!==null){var ne=t.unstable_now();N=ne;var Y=!0;try{Y=k(!0,ne)}finally{Y?D():(B=!1,k=null)}}else B=!1}var D;if(typeof _=="function")D=function(){_(R)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,H=M.port2;M.port1.onmessage=R,D=function(){H.postMessage(null)}}else D=function(){w(R,0)};function ye(ne){k=ne,B||(B=!0,D())}function re(ne,Y){I=w(function(){ne(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){b||y||(b=!0,ye(L))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(ne){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var ue=g;g=Y;try{return ne()}finally{g=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,Y){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ue=g;g=ne;try{return Y()}finally{g=ue}},t.unstable_scheduleCallback=function(ne,Y,ue){var q=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?q+ue:q):ue=q,ne){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ue+z,ne={id:d++,callback:Y,priorityLevel:ne,startTime:ue,expirationTime:z,sortIndex:-1},ue>q?(ne.sortIndex=ue,e(u,ne),n(c)===null&&ne===n(u)&&(x?(v(I),I=-1):x=!0,re(P,ue-q))):(ne.sortIndex=z,e(c,ne),b||y||(b=!0,ye(L))),ne},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(ne){var Y=g;return function(){var ue=g;g=Y;try{return ne.apply(this,arguments)}finally{g=ue}}}})(wb);xb.exports=wb;var uC=xb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dC=j,tr=uC;function ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _b=new Set,Dl={};function oo(t,e){ra(t,e),ra(t+"Capture",e)}function ra(t,e){for(Dl[t]=e,t=0;t<e.length;t++)_b.add(e[t])}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ep=Object.prototype.hasOwnProperty,hC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ky={},Cy={};function fC(t){return ep.call(Cy,t)?!0:ep.call(ky,t)?!1:hC.test(t)?Cy[t]=!0:(ky[t]=!0,!1)}function pC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mC(t,e,n,r){if(e===null||typeof e>"u"||pC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){on[t]=new Mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];on[e]=new Mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){on[t]=new Mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){on[t]=new Mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){on[t]=new Mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){on[t]=new Mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){on[t]=new Mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){on[t]=new Mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){on[t]=new Mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var zm=/[\-:]([a-z])/g;function Gm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zm,Gm);on[e]=new Mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zm,Gm);on[e]=new Mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zm,Gm);on[e]=new Mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){on[t]=new Mn(t,1,!1,t.toLowerCase(),null,!1,!1)});on.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){on[t]=new Mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function $m(t,e,n,r){var s=on.hasOwnProperty(e)?on[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mC(e,n,s,r)&&(n=null),r||s===null?fC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var As=dC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nu=Symbol.for("react.element"),Ao=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),Hm=Symbol.for("react.strict_mode"),tp=Symbol.for("react.profiler"),bb=Symbol.for("react.provider"),Eb=Symbol.for("react.context"),qm=Symbol.for("react.forward_ref"),np=Symbol.for("react.suspense"),rp=Symbol.for("react.suspense_list"),Wm=Symbol.for("react.memo"),Vs=Symbol.for("react.lazy"),Tb=Symbol.for("react.offscreen"),Ay=Symbol.iterator;function Ya(t){return t===null||typeof t!="object"?null:(t=Ay&&t[Ay]||t["@@iterator"],typeof t=="function"?t:null)}var Tt=Object.assign,rf;function cl(t){if(rf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rf=e&&e[1]||""}return`
`+rf+t}var sf=!1;function of(t,e){if(!t||sf)return"";sf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{sf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cl(t):""}function gC(t){switch(t.tag){case 5:return cl(t.type);case 16:return cl("Lazy");case 13:return cl("Suspense");case 19:return cl("SuspenseList");case 0:case 2:case 15:return t=of(t.type,!1),t;case 11:return t=of(t.type.render,!1),t;case 1:return t=of(t.type,!0),t;default:return""}}function sp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case No:return"Fragment";case Ao:return"Portal";case tp:return"Profiler";case Hm:return"StrictMode";case np:return"Suspense";case rp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Eb:return(t.displayName||"Context")+".Consumer";case bb:return(t._context.displayName||"Context")+".Provider";case qm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wm:return e=t.displayName||null,e!==null?e:sp(t.type)||"Memo";case Vs:e=t._payload,t=t._init;try{return sp(t(e))}catch{}}return null}function yC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sp(e);case 8:return e===Hm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ci(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ib(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vC(t){var e=Ib(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ru(t){t._valueTracker||(t._valueTracker=vC(t))}function Sb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ib(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ip(t,e){var n=e.checked;return Tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ny(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ci(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kb(t,e){e=e.checked,e!=null&&$m(t,"checked",e,!1)}function op(t,e){kb(t,e);var n=ci(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ap(t,e.type,n):e.hasOwnProperty("defaultValue")&&ap(t,e.type,ci(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ry(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ap(t,e,n){(e!=="number"||Zu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ul=Array.isArray;function $o(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ci(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function lp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return Tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Py(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ge(92));if(ul(n)){if(1<n.length)throw Error(ge(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ci(n)}}function Cb(t,e){var n=ci(e.value),r=ci(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function My(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ab(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ab(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var su,Nb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(su=su||document.createElement("div"),su.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=su.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ll(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xC=["Webkit","ms","Moz","O"];Object.keys(vl).forEach(function(t){xC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vl[e]=vl[t]})});function Rb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vl.hasOwnProperty(t)&&vl[t]?(""+e).trim():e+"px"}function Pb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Rb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var wC=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function up(t,e){if(e){if(wC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function dp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hp=null;function Km(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fp=null,Ho=null,qo=null;function Dy(t){if(t=yc(t)){if(typeof fp!="function")throw Error(ge(280));var e=t.stateNode;e&&(e=eh(e),fp(t.stateNode,t.type,e))}}function Mb(t){Ho?qo?qo.push(t):qo=[t]:Ho=t}function Db(){if(Ho){var t=Ho,e=qo;if(qo=Ho=null,Dy(t),e)for(t=0;t<e.length;t++)Dy(e[t])}}function Lb(t,e){return t(e)}function jb(){}var af=!1;function Fb(t,e,n){if(af)return t(e,n);af=!0;try{return Lb(t,e,n)}finally{af=!1,(Ho!==null||qo!==null)&&(jb(),Db())}}function jl(t,e){var n=t.stateNode;if(n===null)return null;var r=eh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ge(231,e,typeof n));return n}var pp=!1;if(vs)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){pp=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{pp=!1}function _C(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var xl=!1,ed=null,td=!1,mp=null,bC={onError:function(t){xl=!0,ed=t}};function EC(t,e,n,r,s,i,o,a,c){xl=!1,ed=null,_C.apply(bC,arguments)}function TC(t,e,n,r,s,i,o,a,c){if(EC.apply(this,arguments),xl){if(xl){var u=ed;xl=!1,ed=null}else throw Error(ge(198));td||(td=!0,mp=u)}}function ao(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ub(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ly(t){if(ao(t)!==t)throw Error(ge(188))}function IC(t){var e=t.alternate;if(!e){if(e=ao(t),e===null)throw Error(ge(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ly(s),t;if(i===r)return Ly(s),e;i=i.sibling}throw Error(ge(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ge(189))}}if(n.alternate!==r)throw Error(ge(190))}if(n.tag!==3)throw Error(ge(188));return n.stateNode.current===n?t:e}function Vb(t){return t=IC(t),t!==null?Ob(t):null}function Ob(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ob(t);if(e!==null)return e;t=t.sibling}return null}var Bb=tr.unstable_scheduleCallback,jy=tr.unstable_cancelCallback,SC=tr.unstable_shouldYield,kC=tr.unstable_requestPaint,Mt=tr.unstable_now,CC=tr.unstable_getCurrentPriorityLevel,Jm=tr.unstable_ImmediatePriority,zb=tr.unstable_UserBlockingPriority,nd=tr.unstable_NormalPriority,AC=tr.unstable_LowPriority,Gb=tr.unstable_IdlePriority,Yd=null,Yr=null;function NC(t){if(Yr&&typeof Yr.onCommitFiberRoot=="function")try{Yr.onCommitFiberRoot(Yd,t,void 0,(t.current.flags&128)===128)}catch{}}var Mr=Math.clz32?Math.clz32:MC,RC=Math.log,PC=Math.LN2;function MC(t){return t>>>=0,t===0?32:31-(RC(t)/PC|0)|0}var iu=64,ou=4194304;function dl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=dl(a):(i&=o,i!==0&&(r=dl(i)))}else o=n&~s,o!==0?r=dl(o):i!==0&&(r=dl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mr(e),s=1<<n,r|=t[n],e&=~s;return r}function DC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Mr(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=DC(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function gp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $b(){var t=iu;return iu<<=1,!(iu&4194240)&&(iu=64),t}function lf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mr(e),t[e]=n}function jC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ym(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ut=0;function Hb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qb,Qm,Wb,Kb,Jb,yp=!1,au=[],Qs=null,Xs=null,Zs=null,Fl=new Map,Ul=new Map,Bs=[],FC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fy(t,e){switch(t){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Fl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(e.pointerId)}}function Xa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=yc(e),e!==null&&Qm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function UC(t,e,n,r,s){switch(e){case"focusin":return Qs=Xa(Qs,t,e,n,r,s),!0;case"dragenter":return Xs=Xa(Xs,t,e,n,r,s),!0;case"mouseover":return Zs=Xa(Zs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Fl.set(i,Xa(Fl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ul.set(i,Xa(Ul.get(i)||null,t,e,n,r,s)),!0}return!1}function Yb(t){var e=Li(t.target);if(e!==null){var n=ao(e);if(n!==null){if(e=n.tag,e===13){if(e=Ub(n),e!==null){t.blockedOn=e,Jb(t.priority,function(){Wb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hp=r,n.target.dispatchEvent(r),hp=null}else return e=yc(n),e!==null&&Qm(e),t.blockedOn=n,!1;e.shift()}return!0}function Uy(t,e,n){Pu(t)&&n.delete(e)}function VC(){yp=!1,Qs!==null&&Pu(Qs)&&(Qs=null),Xs!==null&&Pu(Xs)&&(Xs=null),Zs!==null&&Pu(Zs)&&(Zs=null),Fl.forEach(Uy),Ul.forEach(Uy)}function Za(t,e){t.blockedOn===e&&(t.blockedOn=null,yp||(yp=!0,tr.unstable_scheduleCallback(tr.unstable_NormalPriority,VC)))}function Vl(t){function e(s){return Za(s,t)}if(0<au.length){Za(au[0],t);for(var n=1;n<au.length;n++){var r=au[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qs!==null&&Za(Qs,t),Xs!==null&&Za(Xs,t),Zs!==null&&Za(Zs,t),Fl.forEach(e),Ul.forEach(e),n=0;n<Bs.length;n++)r=Bs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Bs.length&&(n=Bs[0],n.blockedOn===null);)Yb(n),n.blockedOn===null&&Bs.shift()}var Wo=As.ReactCurrentBatchConfig,sd=!0;function OC(t,e,n,r){var s=ut,i=Wo.transition;Wo.transition=null;try{ut=1,Xm(t,e,n,r)}finally{ut=s,Wo.transition=i}}function BC(t,e,n,r){var s=ut,i=Wo.transition;Wo.transition=null;try{ut=4,Xm(t,e,n,r)}finally{ut=s,Wo.transition=i}}function Xm(t,e,n,r){if(sd){var s=vp(t,e,n,r);if(s===null)vf(t,e,r,id,n),Fy(t,r);else if(UC(s,t,e,n,r))r.stopPropagation();else if(Fy(t,r),e&4&&-1<FC.indexOf(t)){for(;s!==null;){var i=yc(s);if(i!==null&&qb(i),i=vp(t,e,n,r),i===null&&vf(t,e,r,id,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else vf(t,e,r,null,n)}}var id=null;function vp(t,e,n,r){if(id=null,t=Km(r),t=Li(t),t!==null)if(e=ao(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ub(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return id=t,null}function Qb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CC()){case Jm:return 1;case zb:return 4;case nd:case AC:return 16;case Gb:return 536870912;default:return 16}default:return 16}}var Ws=null,Zm=null,Mu=null;function Xb(){if(Mu)return Mu;var t,e=Zm,n=e.length,r,s="value"in Ws?Ws.value:Ws.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Mu=s.slice(t,1<r?1-r:void 0)}function Du(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lu(){return!0}function Vy(){return!1}function or(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lu:Vy,this.isPropagationStopped=Vy,this}return Tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lu)},persist:function(){},isPersistent:lu}),e}var Ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eg=or(Ea),gc=Tt({},Ea,{view:0,detail:0}),zC=or(gc),cf,uf,el,Qd=Tt({},gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==el&&(el&&t.type==="mousemove"?(cf=t.screenX-el.screenX,uf=t.screenY-el.screenY):uf=cf=0,el=t),cf)},movementY:function(t){return"movementY"in t?t.movementY:uf}}),Oy=or(Qd),GC=Tt({},Qd,{dataTransfer:0}),$C=or(GC),HC=Tt({},gc,{relatedTarget:0}),df=or(HC),qC=Tt({},Ea,{animationName:0,elapsedTime:0,pseudoElement:0}),WC=or(qC),KC=Tt({},Ea,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JC=or(KC),YC=Tt({},Ea,{data:0}),By=or(YC),QC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ZC[t])?!!e[t]:!1}function tg(){return e2}var t2=Tt({},gc,{key:function(t){if(t.key){var e=QC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Du(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tg,charCode:function(t){return t.type==="keypress"?Du(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Du(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),n2=or(t2),r2=Tt({},Qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zy=or(r2),s2=Tt({},gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tg}),i2=or(s2),o2=Tt({},Ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),a2=or(o2),l2=Tt({},Qd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),c2=or(l2),u2=[9,13,27,32],ng=vs&&"CompositionEvent"in window,wl=null;vs&&"documentMode"in document&&(wl=document.documentMode);var d2=vs&&"TextEvent"in window&&!wl,Zb=vs&&(!ng||wl&&8<wl&&11>=wl),Gy=" ",$y=!1;function eE(t,e){switch(t){case"keyup":return u2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ro=!1;function h2(t,e){switch(t){case"compositionend":return tE(e);case"keypress":return e.which!==32?null:($y=!0,Gy);case"textInput":return t=e.data,t===Gy&&$y?null:t;default:return null}}function f2(t,e){if(Ro)return t==="compositionend"||!ng&&eE(t,e)?(t=Xb(),Mu=Zm=Ws=null,Ro=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zb&&e.locale!=="ko"?null:e.data;default:return null}}var p2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!p2[t.type]:e==="textarea"}function nE(t,e,n,r){Mb(r),e=od(e,"onChange"),0<e.length&&(n=new eg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _l=null,Ol=null;function m2(t){fE(t,0)}function Xd(t){var e=Do(t);if(Sb(e))return t}function g2(t,e){if(t==="change")return e}var rE=!1;if(vs){var hf;if(vs){var ff="oninput"in document;if(!ff){var qy=document.createElement("div");qy.setAttribute("oninput","return;"),ff=typeof qy.oninput=="function"}hf=ff}else hf=!1;rE=hf&&(!document.documentMode||9<document.documentMode)}function Wy(){_l&&(_l.detachEvent("onpropertychange",sE),Ol=_l=null)}function sE(t){if(t.propertyName==="value"&&Xd(Ol)){var e=[];nE(e,Ol,t,Km(t)),Fb(m2,e)}}function y2(t,e,n){t==="focusin"?(Wy(),_l=e,Ol=n,_l.attachEvent("onpropertychange",sE)):t==="focusout"&&Wy()}function v2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xd(Ol)}function x2(t,e){if(t==="click")return Xd(e)}function w2(t,e){if(t==="input"||t==="change")return Xd(e)}function _2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ur=typeof Object.is=="function"?Object.is:_2;function Bl(t,e){if(Ur(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ep.call(e,s)||!Ur(t[s],e[s]))return!1}return!0}function Ky(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jy(t,e){var n=Ky(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ky(n)}}function iE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oE(){for(var t=window,e=Zu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zu(t.document)}return e}function rg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function b2(t){var e=oE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iE(n.ownerDocument.documentElement,n)){if(r!==null&&rg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Jy(n,i);var o=Jy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var E2=vs&&"documentMode"in document&&11>=document.documentMode,Po=null,xp=null,bl=null,wp=!1;function Yy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wp||Po==null||Po!==Zu(r)||(r=Po,"selectionStart"in r&&rg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bl&&Bl(bl,r)||(bl=r,r=od(xp,"onSelect"),0<r.length&&(e=new eg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Po)))}function cu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mo={animationend:cu("Animation","AnimationEnd"),animationiteration:cu("Animation","AnimationIteration"),animationstart:cu("Animation","AnimationStart"),transitionend:cu("Transition","TransitionEnd")},pf={},aE={};vs&&(aE=document.createElement("div").style,"AnimationEvent"in window||(delete Mo.animationend.animation,delete Mo.animationiteration.animation,delete Mo.animationstart.animation),"TransitionEvent"in window||delete Mo.transitionend.transition);function Zd(t){if(pf[t])return pf[t];if(!Mo[t])return t;var e=Mo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aE)return pf[t]=e[n];return t}var lE=Zd("animationend"),cE=Zd("animationiteration"),uE=Zd("animationstart"),dE=Zd("transitionend"),hE=new Map,Qy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pi(t,e){hE.set(t,e),oo(e,[t])}for(var mf=0;mf<Qy.length;mf++){var gf=Qy[mf],T2=gf.toLowerCase(),I2=gf[0].toUpperCase()+gf.slice(1);pi(T2,"on"+I2)}pi(lE,"onAnimationEnd");pi(cE,"onAnimationIteration");pi(uE,"onAnimationStart");pi("dblclick","onDoubleClick");pi("focusin","onFocus");pi("focusout","onBlur");pi(dE,"onTransitionEnd");ra("onMouseEnter",["mouseout","mouseover"]);ra("onMouseLeave",["mouseout","mouseover"]);ra("onPointerEnter",["pointerout","pointerover"]);ra("onPointerLeave",["pointerout","pointerover"]);oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S2=new Set("cancel close invalid load scroll toggle".split(" ").concat(hl));function Xy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,TC(r,e,void 0,t),t.currentTarget=null}function fE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Xy(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Xy(s,a,u),i=c}}}if(td)throw t=mp,td=!1,mp=null,t}function vt(t,e){var n=e[Ip];n===void 0&&(n=e[Ip]=new Set);var r=t+"__bubble";n.has(r)||(pE(e,t,2,!1),n.add(r))}function yf(t,e,n){var r=0;e&&(r|=4),pE(n,t,r,e)}var uu="_reactListening"+Math.random().toString(36).slice(2);function zl(t){if(!t[uu]){t[uu]=!0,_b.forEach(function(n){n!=="selectionchange"&&(S2.has(n)||yf(n,!1,t),yf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uu]||(e[uu]=!0,yf("selectionchange",!1,e))}}function pE(t,e,n,r){switch(Qb(e)){case 1:var s=OC;break;case 4:s=BC;break;default:s=Xm}n=s.bind(null,e,n,t),s=void 0,!pp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function vf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Li(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Fb(function(){var u=i,d=Km(n),m=[];e:{var g=hE.get(t);if(g!==void 0){var y=eg,b=t;switch(t){case"keypress":if(Du(n)===0)break e;case"keydown":case"keyup":y=n2;break;case"focusin":b="focus",y=df;break;case"focusout":b="blur",y=df;break;case"beforeblur":case"afterblur":y=df;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=$C;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=i2;break;case lE:case cE:case uE:y=WC;break;case dE:y=a2;break;case"scroll":y=zC;break;case"wheel":y=c2;break;case"copy":case"cut":case"paste":y=JC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=zy}var x=(e&4)!==0,w=!x&&t==="scroll",v=x?g!==null?g+"Capture":null:g;x=[];for(var _=u,T;_!==null;){T=_;var P=T.stateNode;if(T.tag===5&&P!==null&&(T=P,v!==null&&(P=jl(_,v),P!=null&&x.push(Gl(_,P,T)))),w)break;_=_.return}0<x.length&&(g=new y(g,b,null,n,d),m.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==hp&&(b=n.relatedTarget||n.fromElement)&&(Li(b)||b[xs]))break e;if((y||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=u,b=b?Li(b):null,b!==null&&(w=ao(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=u),y!==b)){if(x=Oy,P="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(x=zy,P="onPointerLeave",v="onPointerEnter",_="pointer"),w=y==null?g:Do(y),T=b==null?g:Do(b),g=new x(P,_+"leave",y,n,d),g.target=w,g.relatedTarget=T,P=null,Li(d)===u&&(x=new x(v,_+"enter",b,n,d),x.target=T,x.relatedTarget=w,P=x),w=P,y&&b)t:{for(x=y,v=b,_=0,T=x;T;T=To(T))_++;for(T=0,P=v;P;P=To(P))T++;for(;0<_-T;)x=To(x),_--;for(;0<T-_;)v=To(v),T--;for(;_--;){if(x===v||v!==null&&x===v.alternate)break t;x=To(x),v=To(v)}x=null}else x=null;y!==null&&Zy(m,g,y,x,!1),b!==null&&w!==null&&Zy(m,w,b,x,!0)}}e:{if(g=u?Do(u):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var L=g2;else if(Hy(g))if(rE)L=w2;else{L=v2;var B=y2}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=x2);if(L&&(L=L(t,u))){nE(m,L,n,d);break e}B&&B(t,g,u),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&ap(g,"number",g.value)}switch(B=u?Do(u):window,t){case"focusin":(Hy(B)||B.contentEditable==="true")&&(Po=B,xp=u,bl=null);break;case"focusout":bl=xp=Po=null;break;case"mousedown":wp=!0;break;case"contextmenu":case"mouseup":case"dragend":wp=!1,Yy(m,n,d);break;case"selectionchange":if(E2)break;case"keydown":case"keyup":Yy(m,n,d)}var k;if(ng)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ro?eE(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Zb&&n.locale!=="ko"&&(Ro||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ro&&(k=Xb()):(Ws=d,Zm="value"in Ws?Ws.value:Ws.textContent,Ro=!0)),B=od(u,I),0<B.length&&(I=new By(I,t,null,n,d),m.push({event:I,listeners:B}),k?I.data=k:(k=tE(n),k!==null&&(I.data=k)))),(k=d2?h2(t,n):f2(t,n))&&(u=od(u,"onBeforeInput"),0<u.length&&(d=new By("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:u}),d.data=k))}fE(m,e)})}function Gl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function od(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=jl(t,n),i!=null&&r.unshift(Gl(t,i,s)),i=jl(t,e),i!=null&&r.push(Gl(t,i,s))),t=t.return}return r}function To(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=jl(n,i),c!=null&&o.unshift(Gl(n,c,a))):s||(c=jl(n,i),c!=null&&o.push(Gl(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var k2=/\r\n?/g,C2=/\u0000|\uFFFD/g;function ev(t){return(typeof t=="string"?t:""+t).replace(k2,`
`).replace(C2,"")}function du(t,e,n){if(e=ev(e),ev(t)!==e&&n)throw Error(ge(425))}function ad(){}var _p=null,bp=null;function Ep(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tp=typeof setTimeout=="function"?setTimeout:void 0,A2=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,N2=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(t){return tv.resolve(null).then(t).catch(R2)}:Tp;function R2(t){setTimeout(function(){throw t})}function xf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Vl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Vl(e)}function ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ta=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Ta,$l="__reactProps$"+Ta,xs="__reactContainer$"+Ta,Ip="__reactEvents$"+Ta,P2="__reactListeners$"+Ta,M2="__reactHandles$"+Ta;function Li(t){var e=t[Jr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xs]||n[Jr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nv(t);t!==null;){if(n=t[Jr])return n;t=nv(t)}return e}t=n,n=t.parentNode}return null}function yc(t){return t=t[Jr]||t[xs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Do(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ge(33))}function eh(t){return t[$l]||null}var Sp=[],Lo=-1;function mi(t){return{current:t}}function wt(t){0>Lo||(t.current=Sp[Lo],Sp[Lo]=null,Lo--)}function gt(t,e){Lo++,Sp[Lo]=t.current,t.current=e}var ui={},_n=mi(ui),Bn=mi(!1),Hi=ui;function sa(t,e){var n=t.type.contextTypes;if(!n)return ui;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function zn(t){return t=t.childContextTypes,t!=null}function ld(){wt(Bn),wt(_n)}function rv(t,e,n){if(_n.current!==ui)throw Error(ge(168));gt(_n,e),gt(Bn,n)}function mE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ge(108,yC(t)||"Unknown",s));return Tt({},n,r)}function cd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ui,Hi=_n.current,gt(_n,t),gt(Bn,Bn.current),!0}function sv(t,e,n){var r=t.stateNode;if(!r)throw Error(ge(169));n?(t=mE(t,e,Hi),r.__reactInternalMemoizedMergedChildContext=t,wt(Bn),wt(_n),gt(_n,t)):wt(Bn),gt(Bn,n)}var ls=null,th=!1,wf=!1;function gE(t){ls===null?ls=[t]:ls.push(t)}function D2(t){th=!0,gE(t)}function gi(){if(!wf&&ls!==null){wf=!0;var t=0,e=ut;try{var n=ls;for(ut=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ls=null,th=!1}catch(s){throw ls!==null&&(ls=ls.slice(t+1)),Bb(Jm,gi),s}finally{ut=e,wf=!1}}return null}var jo=[],Fo=0,ud=null,dd=0,hr=[],fr=0,qi=null,ds=1,hs="";function Ri(t,e){jo[Fo++]=dd,jo[Fo++]=ud,ud=t,dd=e}function yE(t,e,n){hr[fr++]=ds,hr[fr++]=hs,hr[fr++]=qi,qi=t;var r=ds;t=hs;var s=32-Mr(r)-1;r&=~(1<<s),n+=1;var i=32-Mr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ds=1<<32-Mr(e)+s|n<<s|r,hs=i+t}else ds=1<<i|n<<s|r,hs=t}function sg(t){t.return!==null&&(Ri(t,1),yE(t,1,0))}function ig(t){for(;t===ud;)ud=jo[--Fo],jo[Fo]=null,dd=jo[--Fo],jo[Fo]=null;for(;t===qi;)qi=hr[--fr],hr[fr]=null,hs=hr[--fr],hr[fr]=null,ds=hr[--fr],hr[fr]=null}var Xn=null,Yn=null,_t=!1,Pr=null;function vE(t,e){var n=pr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function iv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xn=t,Yn=ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xn=t,Yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qi!==null?{id:ds,overflow:hs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xn=t,Yn=null,!0):!1;default:return!1}}function kp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cp(t){if(_t){var e=Yn;if(e){var n=e;if(!iv(t,e)){if(kp(t))throw Error(ge(418));e=ei(n.nextSibling);var r=Xn;e&&iv(t,e)?vE(r,n):(t.flags=t.flags&-4097|2,_t=!1,Xn=t)}}else{if(kp(t))throw Error(ge(418));t.flags=t.flags&-4097|2,_t=!1,Xn=t}}}function ov(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xn=t}function hu(t){if(t!==Xn)return!1;if(!_t)return ov(t),_t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ep(t.type,t.memoizedProps)),e&&(e=Yn)){if(kp(t))throw xE(),Error(ge(418));for(;e;)vE(t,e),e=ei(e.nextSibling)}if(ov(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ge(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yn=ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yn=null}}else Yn=Xn?ei(t.stateNode.nextSibling):null;return!0}function xE(){for(var t=Yn;t;)t=ei(t.nextSibling)}function ia(){Yn=Xn=null,_t=!1}function og(t){Pr===null?Pr=[t]:Pr.push(t)}var L2=As.ReactCurrentBatchConfig;function tl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ge(309));var r=n.stateNode}if(!r)throw Error(ge(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ge(284));if(!n._owner)throw Error(ge(290,t))}return t}function fu(t,e){throw t=Object.prototype.toString.call(e),Error(ge(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function av(t){var e=t._init;return e(t._payload)}function wE(t){function e(v,_){if(t){var T=v.deletions;T===null?(v.deletions=[_],v.flags|=16):T.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function s(v,_){return v=si(v,_),v.index=0,v.sibling=null,v}function i(v,_,T){return v.index=T,t?(T=v.alternate,T!==null?(T=T.index,T<_?(v.flags|=2,_):T):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,T,P){return _===null||_.tag!==6?(_=kf(T,v.mode,P),_.return=v,_):(_=s(_,T),_.return=v,_)}function c(v,_,T,P){var L=T.type;return L===No?d(v,_,T.props.children,P,T.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Vs&&av(L)===_.type)?(P=s(_,T.props),P.ref=tl(v,_,T),P.return=v,P):(P=Bu(T.type,T.key,T.props,null,v.mode,P),P.ref=tl(v,_,T),P.return=v,P)}function u(v,_,T,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=Cf(T,v.mode,P),_.return=v,_):(_=s(_,T.children||[]),_.return=v,_)}function d(v,_,T,P,L){return _===null||_.tag!==7?(_=zi(T,v.mode,P,L),_.return=v,_):(_=s(_,T),_.return=v,_)}function m(v,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=kf(""+_,v.mode,T),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case nu:return T=Bu(_.type,_.key,_.props,null,v.mode,T),T.ref=tl(v,null,_),T.return=v,T;case Ao:return _=Cf(_,v.mode,T),_.return=v,_;case Vs:var P=_._init;return m(v,P(_._payload),T)}if(ul(_)||Ya(_))return _=zi(_,v.mode,T,null),_.return=v,_;fu(v,_)}return null}function g(v,_,T,P){var L=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:a(v,_,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case nu:return T.key===L?c(v,_,T,P):null;case Ao:return T.key===L?u(v,_,T,P):null;case Vs:return L=T._init,g(v,_,L(T._payload),P)}if(ul(T)||Ya(T))return L!==null?null:d(v,_,T,P,null);fu(v,T)}return null}function y(v,_,T,P,L){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(T)||null,a(_,v,""+P,L);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case nu:return v=v.get(P.key===null?T:P.key)||null,c(_,v,P,L);case Ao:return v=v.get(P.key===null?T:P.key)||null,u(_,v,P,L);case Vs:var B=P._init;return y(v,_,T,B(P._payload),L)}if(ul(P)||Ya(P))return v=v.get(T)||null,d(_,v,P,L,null);fu(_,P)}return null}function b(v,_,T,P){for(var L=null,B=null,k=_,I=_=0,A=null;k!==null&&I<T.length;I++){k.index>I?(A=k,k=null):A=k.sibling;var N=g(v,k,T[I],P);if(N===null){k===null&&(k=A);break}t&&k&&N.alternate===null&&e(v,k),_=i(N,_,I),B===null?L=N:B.sibling=N,B=N,k=A}if(I===T.length)return n(v,k),_t&&Ri(v,I),L;if(k===null){for(;I<T.length;I++)k=m(v,T[I],P),k!==null&&(_=i(k,_,I),B===null?L=k:B.sibling=k,B=k);return _t&&Ri(v,I),L}for(k=r(v,k);I<T.length;I++)A=y(k,v,I,T[I],P),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?I:A.key),_=i(A,_,I),B===null?L=A:B.sibling=A,B=A);return t&&k.forEach(function(U){return e(v,U)}),_t&&Ri(v,I),L}function x(v,_,T,P){var L=Ya(T);if(typeof L!="function")throw Error(ge(150));if(T=L.call(T),T==null)throw Error(ge(151));for(var B=L=null,k=_,I=_=0,A=null,N=T.next();k!==null&&!N.done;I++,N=T.next()){k.index>I?(A=k,k=null):A=k.sibling;var U=g(v,k,N.value,P);if(U===null){k===null&&(k=A);break}t&&k&&U.alternate===null&&e(v,k),_=i(U,_,I),B===null?L=U:B.sibling=U,B=U,k=A}if(N.done)return n(v,k),_t&&Ri(v,I),L;if(k===null){for(;!N.done;I++,N=T.next())N=m(v,N.value,P),N!==null&&(_=i(N,_,I),B===null?L=N:B.sibling=N,B=N);return _t&&Ri(v,I),L}for(k=r(v,k);!N.done;I++,N=T.next())N=y(k,v,I,N.value,P),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?I:N.key),_=i(N,_,I),B===null?L=N:B.sibling=N,B=N);return t&&k.forEach(function(R){return e(v,R)}),_t&&Ri(v,I),L}function w(v,_,T,P){if(typeof T=="object"&&T!==null&&T.type===No&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case nu:e:{for(var L=T.key,B=_;B!==null;){if(B.key===L){if(L=T.type,L===No){if(B.tag===7){n(v,B.sibling),_=s(B,T.props.children),_.return=v,v=_;break e}}else if(B.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Vs&&av(L)===B.type){n(v,B.sibling),_=s(B,T.props),_.ref=tl(v,B,T),_.return=v,v=_;break e}n(v,B);break}else e(v,B);B=B.sibling}T.type===No?(_=zi(T.props.children,v.mode,P,T.key),_.return=v,v=_):(P=Bu(T.type,T.key,T.props,null,v.mode,P),P.ref=tl(v,_,T),P.return=v,v=P)}return o(v);case Ao:e:{for(B=T.key;_!==null;){if(_.key===B)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(v,_.sibling),_=s(_,T.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=Cf(T,v.mode,P),_.return=v,v=_}return o(v);case Vs:return B=T._init,w(v,_,B(T._payload),P)}if(ul(T))return b(v,_,T,P);if(Ya(T))return x(v,_,T,P);fu(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(n(v,_.sibling),_=s(_,T),_.return=v,v=_):(n(v,_),_=kf(T,v.mode,P),_.return=v,v=_),o(v)):n(v,_)}return w}var oa=wE(!0),_E=wE(!1),hd=mi(null),fd=null,Uo=null,ag=null;function lg(){ag=Uo=fd=null}function cg(t){var e=hd.current;wt(hd),t._currentValue=e}function Ap(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ko(t,e){fd=t,ag=Uo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vn=!0),t.firstContext=null)}function xr(t){var e=t._currentValue;if(ag!==t)if(t={context:t,memoizedValue:e,next:null},Uo===null){if(fd===null)throw Error(ge(308));Uo=t,fd.dependencies={lanes:0,firstContext:t}}else Uo=Uo.next=t;return e}var ji=null;function ug(t){ji===null?ji=[t]:ji.push(t)}function bE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ug(e)):(n.next=s.next,s.next=n),e.interleaved=n,ws(t,r)}function ws(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Os=!1;function dg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function EE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ys(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ti(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ze&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ws(t,n)}return s=r.interleaved,s===null?(e.next=e,ug(r)):(e.next=s.next,s.next=e),r.interleaved=e,ws(t,n)}function Lu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ym(t,n)}}function lv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pd(t,e,n,r){var s=t.updateQueue;Os=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,d=u=c=null,a=i;do{var g=a.lane,y=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,x=a;switch(g=e,y=n,x.tag){case 1:if(b=x.payload,typeof b=="function"){m=b.call(y,m,g);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,g=typeof b=="function"?b.call(y,m,g):b,g==null)break e;m=Tt({},m,g);break e;case 2:Os=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=y,c=m):d=d.next=y,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(c=m),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ki|=o,t.lanes=o,t.memoizedState=m}}function cv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ge(191,s));s.call(r)}}}var vc={},Qr=mi(vc),Hl=mi(vc),ql=mi(vc);function Fi(t){if(t===vc)throw Error(ge(174));return t}function hg(t,e){switch(gt(ql,e),gt(Hl,t),gt(Qr,vc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cp(e,t)}wt(Qr),gt(Qr,e)}function aa(){wt(Qr),wt(Hl),wt(ql)}function TE(t){Fi(ql.current);var e=Fi(Qr.current),n=cp(e,t.type);e!==n&&(gt(Hl,t),gt(Qr,n))}function fg(t){Hl.current===t&&(wt(Qr),wt(Hl))}var bt=mi(0);function md(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _f=[];function pg(){for(var t=0;t<_f.length;t++)_f[t]._workInProgressVersionPrimary=null;_f.length=0}var ju=As.ReactCurrentDispatcher,bf=As.ReactCurrentBatchConfig,Wi=0,Et=null,$t=null,Yt=null,gd=!1,El=!1,Wl=0,j2=0;function fn(){throw Error(ge(321))}function mg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ur(t[n],e[n]))return!1;return!0}function gg(t,e,n,r,s,i){if(Wi=i,Et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ju.current=t===null||t.memoizedState===null?O2:B2,t=n(r,s),El){i=0;do{if(El=!1,Wl=0,25<=i)throw Error(ge(301));i+=1,Yt=$t=null,e.updateQueue=null,ju.current=z2,t=n(r,s)}while(El)}if(ju.current=yd,e=$t!==null&&$t.next!==null,Wi=0,Yt=$t=Et=null,gd=!1,e)throw Error(ge(300));return t}function yg(){var t=Wl!==0;return Wl=0,t}function Wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Et.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function wr(){if($t===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var e=Yt===null?Et.memoizedState:Yt.next;if(e!==null)Yt=e,$t=t;else{if(t===null)throw Error(ge(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Yt===null?Et.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function Kl(t,e){return typeof e=="function"?e(t):e}function Ef(t){var e=wr(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=$t,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((Wi&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var m={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=m,o=r):c=c.next=m,Et.lanes|=d,Ki|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,Ur(r,e.memoizedState)||(Vn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Et.lanes|=i,Ki|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tf(t){var e=wr(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ur(i,e.memoizedState)||(Vn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function IE(){}function SE(t,e){var n=Et,r=wr(),s=e(),i=!Ur(r.memoizedState,s);if(i&&(r.memoizedState=s,Vn=!0),r=r.queue,vg(AE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Yt!==null&&Yt.memoizedState.tag&1){if(n.flags|=2048,Jl(9,CE.bind(null,n,r,s,e),void 0,null),Qt===null)throw Error(ge(349));Wi&30||kE(n,e,s)}return s}function kE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function CE(t,e,n,r){e.value=n,e.getSnapshot=r,NE(e)&&RE(t)}function AE(t,e,n){return n(function(){NE(e)&&RE(t)})}function NE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ur(t,n)}catch{return!0}}function RE(t){var e=ws(t,1);e!==null&&Dr(e,t,1,-1)}function uv(t){var e=Wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:t},e.queue=t,t=t.dispatch=V2.bind(null,Et,t),[e.memoizedState,t]}function Jl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PE(){return wr().memoizedState}function Fu(t,e,n,r){var s=Wr();Et.flags|=t,s.memoizedState=Jl(1|e,n,void 0,r===void 0?null:r)}function nh(t,e,n,r){var s=wr();r=r===void 0?null:r;var i=void 0;if($t!==null){var o=$t.memoizedState;if(i=o.destroy,r!==null&&mg(r,o.deps)){s.memoizedState=Jl(e,n,i,r);return}}Et.flags|=t,s.memoizedState=Jl(1|e,n,i,r)}function dv(t,e){return Fu(8390656,8,t,e)}function vg(t,e){return nh(2048,8,t,e)}function ME(t,e){return nh(4,2,t,e)}function DE(t,e){return nh(4,4,t,e)}function LE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jE(t,e,n){return n=n!=null?n.concat([t]):null,nh(4,4,LE.bind(null,e,t),n)}function xg(){}function FE(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function UE(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VE(t,e,n){return Wi&21?(Ur(n,e)||(n=$b(),Et.lanes|=n,Ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vn=!0),t.memoizedState=n)}function F2(t,e){var n=ut;ut=n!==0&&4>n?n:4,t(!0);var r=bf.transition;bf.transition={};try{t(!1),e()}finally{ut=n,bf.transition=r}}function OE(){return wr().memoizedState}function U2(t,e,n){var r=ri(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},BE(t))zE(e,n);else if(n=bE(t,e,n,r),n!==null){var s=Cn();Dr(n,t,r,s),GE(n,e,r)}}function V2(t,e,n){var r=ri(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(BE(t))zE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ur(a,o)){var c=e.interleaved;c===null?(s.next=s,ug(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=bE(t,e,s,r),n!==null&&(s=Cn(),Dr(n,t,r,s),GE(n,e,r))}}function BE(t){var e=t.alternate;return t===Et||e!==null&&e===Et}function zE(t,e){El=gd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ym(t,n)}}var yd={readContext:xr,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},O2={readContext:xr,useCallback:function(t,e){return Wr().memoizedState=[t,e===void 0?null:e],t},useContext:xr,useEffect:dv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fu(4194308,4,LE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fu(4,2,t,e)},useMemo:function(t,e){var n=Wr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=U2.bind(null,Et,t),[r.memoizedState,t]},useRef:function(t){var e=Wr();return t={current:t},e.memoizedState=t},useState:uv,useDebugValue:xg,useDeferredValue:function(t){return Wr().memoizedState=t},useTransition:function(){var t=uv(!1),e=t[0];return t=F2.bind(null,t[1]),Wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Et,s=Wr();if(_t){if(n===void 0)throw Error(ge(407));n=n()}else{if(n=e(),Qt===null)throw Error(ge(349));Wi&30||kE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,dv(AE.bind(null,r,i,t),[t]),r.flags|=2048,Jl(9,CE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wr(),e=Qt.identifierPrefix;if(_t){var n=hs,r=ds;n=(r&~(1<<32-Mr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=j2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},B2={readContext:xr,useCallback:FE,useContext:xr,useEffect:vg,useImperativeHandle:jE,useInsertionEffect:ME,useLayoutEffect:DE,useMemo:UE,useReducer:Ef,useRef:PE,useState:function(){return Ef(Kl)},useDebugValue:xg,useDeferredValue:function(t){var e=wr();return VE(e,$t.memoizedState,t)},useTransition:function(){var t=Ef(Kl)[0],e=wr().memoizedState;return[t,e]},useMutableSource:IE,useSyncExternalStore:SE,useId:OE,unstable_isNewReconciler:!1},z2={readContext:xr,useCallback:FE,useContext:xr,useEffect:vg,useImperativeHandle:jE,useInsertionEffect:ME,useLayoutEffect:DE,useMemo:UE,useReducer:Tf,useRef:PE,useState:function(){return Tf(Kl)},useDebugValue:xg,useDeferredValue:function(t){var e=wr();return $t===null?e.memoizedState=t:VE(e,$t.memoizedState,t)},useTransition:function(){var t=Tf(Kl)[0],e=wr().memoizedState;return[t,e]},useMutableSource:IE,useSyncExternalStore:SE,useId:OE,unstable_isNewReconciler:!1};function Nr(t,e){if(t&&t.defaultProps){e=Tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Np(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rh={isMounted:function(t){return(t=t._reactInternals)?ao(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Cn(),s=ri(t),i=ys(r,s);i.payload=e,n!=null&&(i.callback=n),e=ti(t,i,s),e!==null&&(Dr(e,t,s,r),Lu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Cn(),s=ri(t),i=ys(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ti(t,i,s),e!==null&&(Dr(e,t,s,r),Lu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Cn(),r=ri(t),s=ys(n,r);s.tag=2,e!=null&&(s.callback=e),e=ti(t,s,r),e!==null&&(Dr(e,t,r,n),Lu(e,t,r))}};function hv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Bl(n,r)||!Bl(s,i):!0}function $E(t,e,n){var r=!1,s=ui,i=e.contextType;return typeof i=="object"&&i!==null?i=xr(i):(s=zn(e)?Hi:_n.current,r=e.contextTypes,i=(r=r!=null)?sa(t,s):ui),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function fv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rh.enqueueReplaceState(e,e.state,null)}function Rp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},dg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=xr(i):(i=zn(e)?Hi:_n.current,s.context=sa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Np(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rh.enqueueReplaceState(s,s.state,null),pd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function la(t,e){try{var n="",r=e;do n+=gC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function If(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var G2=typeof WeakMap=="function"?WeakMap:Map;function HE(t,e,n){n=ys(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xd||(xd=!0,zp=r),Pp(t,e)},n}function qE(t,e,n){n=ys(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Pp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Pp(t,e),typeof r!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function pv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new G2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=rA.bind(null,t,e,n),e.then(t,t))}function mv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ys(-1,1),e.tag=2,ti(n,e,1))),n.lanes|=1),t)}var $2=As.ReactCurrentOwner,Vn=!1;function Sn(t,e,n,r){e.child=t===null?_E(e,null,n,r):oa(e,t.child,n,r)}function yv(t,e,n,r,s){n=n.render;var i=e.ref;return Ko(e,s),r=gg(t,e,n,r,i,s),n=yg(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_s(t,e,s)):(_t&&n&&sg(e),e.flags|=1,Sn(t,e,r,s),e.child)}function vv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!kg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,WE(t,e,i,r,s)):(t=Bu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Bl,n(o,r)&&t.ref===e.ref)return _s(t,e,s)}return e.flags|=1,t=si(i,r),t.ref=e.ref,t.return=e,e.child=t}function WE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Bl(i,r)&&t.ref===e.ref)if(Vn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Vn=!0);else return e.lanes=t.lanes,_s(t,e,s)}return Mp(t,e,n,r,s)}function KE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(Oo,Jn),Jn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,gt(Oo,Jn),Jn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,gt(Oo,Jn),Jn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,gt(Oo,Jn),Jn|=r;return Sn(t,e,s,n),e.child}function JE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Mp(t,e,n,r,s){var i=zn(n)?Hi:_n.current;return i=sa(e,i),Ko(e,s),n=gg(t,e,n,r,i,s),r=yg(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_s(t,e,s)):(_t&&r&&sg(e),e.flags|=1,Sn(t,e,n,s),e.child)}function xv(t,e,n,r,s){if(zn(n)){var i=!0;cd(e)}else i=!1;if(Ko(e,s),e.stateNode===null)Uu(t,e),$E(e,n,r),Rp(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=xr(u):(u=zn(n)?Hi:_n.current,u=sa(e,u));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&fv(e,o,r,u),Os=!1;var g=e.memoizedState;o.state=g,pd(e,r,o,s),c=e.memoizedState,a!==r||g!==c||Bn.current||Os?(typeof d=="function"&&(Np(e,n,d,r),c=e.memoizedState),(a=Os||hv(e,n,a,r,g,c,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,EE(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Nr(e.type,a),o.props=u,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=xr(c):(c=zn(n)?Hi:_n.current,c=sa(e,c));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==c)&&fv(e,o,r,c),Os=!1,g=e.memoizedState,o.state=g,pd(e,r,o,s);var b=e.memoizedState;a!==m||g!==b||Bn.current||Os?(typeof y=="function"&&(Np(e,n,y,r),b=e.memoizedState),(u=Os||hv(e,n,u,r,g,b,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Dp(t,e,n,r,i,s)}function Dp(t,e,n,r,s,i){JE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&sv(e,n,!1),_s(t,e,i);r=e.stateNode,$2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=oa(e,t.child,null,i),e.child=oa(e,null,a,i)):Sn(t,e,a,i),e.memoizedState=r.state,s&&sv(e,n,!0),e.child}function YE(t){var e=t.stateNode;e.pendingContext?rv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rv(t,e.context,!1),hg(t,e.containerInfo)}function wv(t,e,n,r,s){return ia(),og(s),e.flags|=256,Sn(t,e,n,r),e.child}var Lp={dehydrated:null,treeContext:null,retryLane:0};function jp(t){return{baseLanes:t,cachePool:null,transitions:null}}function QE(t,e,n){var r=e.pendingProps,s=bt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),gt(bt,s&1),t===null)return Cp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=oh(o,r,0,null),t=zi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=jp(n),e.memoizedState=Lp,t):wg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return H2(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=si(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=si(a,i):(i=zi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?jp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Lp,r}return i=t.child,t=i.sibling,r=si(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wg(t,e){return e=oh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pu(t,e,n,r){return r!==null&&og(r),oa(e,t.child,null,n),t=wg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function H2(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=If(Error(ge(422))),pu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=oh({mode:"visible",children:r.children},s,0,null),i=zi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&oa(e,t.child,null,o),e.child.memoizedState=jp(o),e.memoizedState=Lp,i);if(!(e.mode&1))return pu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ge(419)),r=If(i,r,void 0),pu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Vn||a){if(r=Qt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ws(t,s),Dr(r,t,s,-1))}return Sg(),r=If(Error(ge(421))),pu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=sA.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Yn=ei(s.nextSibling),Xn=e,_t=!0,Pr=null,t!==null&&(hr[fr++]=ds,hr[fr++]=hs,hr[fr++]=qi,ds=t.id,hs=t.overflow,qi=e),e=wg(e,r.children),e.flags|=4096,e)}function _v(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ap(t.return,e,n)}function Sf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function XE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Sn(t,e,r.children,n),r=bt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_v(t,n,e);else if(t.tag===19)_v(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(gt(bt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&md(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Sf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&md(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Sf(e,!0,n,null,i);break;case"together":Sf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _s(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ge(153));if(e.child!==null){for(t=e.child,n=si(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=si(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function q2(t,e,n){switch(e.tag){case 3:YE(e),ia();break;case 5:TE(e);break;case 1:zn(e.type)&&cd(e);break;case 4:hg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;gt(hd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(gt(bt,bt.current&1),e.flags|=128,null):n&e.child.childLanes?QE(t,e,n):(gt(bt,bt.current&1),t=_s(t,e,n),t!==null?t.sibling:null);gt(bt,bt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return XE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),gt(bt,bt.current),r)break;return null;case 22:case 23:return e.lanes=0,KE(t,e,n)}return _s(t,e,n)}var ZE,Fp,eT,tT;ZE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fp=function(){};eT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Fi(Qr.current);var i=null;switch(n){case"input":s=ip(t,s),r=ip(t,r),i=[];break;case"select":s=Tt({},s,{value:void 0}),r=Tt({},r,{value:void 0}),i=[];break;case"textarea":s=lp(t,s),r=lp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ad)}up(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Dl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Dl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&vt("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};tT=function(t,e,n,r){n!==r&&(e.flags|=4)};function nl(t,e){if(!_t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function W2(t,e,n){var r=e.pendingProps;switch(ig(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(e),null;case 1:return zn(e.type)&&ld(),pn(e),null;case 3:return r=e.stateNode,aa(),wt(Bn),wt(_n),pg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pr!==null&&(Hp(Pr),Pr=null))),Fp(t,e),pn(e),null;case 5:fg(e);var s=Fi(ql.current);if(n=e.type,t!==null&&e.stateNode!=null)eT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ge(166));return pn(e),null}if(t=Fi(Qr.current),hu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Jr]=e,r[$l]=i,t=(e.mode&1)!==0,n){case"dialog":vt("cancel",r),vt("close",r);break;case"iframe":case"object":case"embed":vt("load",r);break;case"video":case"audio":for(s=0;s<hl.length;s++)vt(hl[s],r);break;case"source":vt("error",r);break;case"img":case"image":case"link":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"input":Ny(r,i),vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},vt("invalid",r);break;case"textarea":Py(r,i),vt("invalid",r)}up(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&du(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&du(r.textContent,a,t),s=["children",""+a]):Dl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&vt("scroll",r)}switch(n){case"input":ru(r),Ry(r,i,!0);break;case"textarea":ru(r),My(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ad)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ab(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Jr]=e,t[$l]=r,ZE(t,e,!1,!1),e.stateNode=t;e:{switch(o=dp(n,r),n){case"dialog":vt("cancel",t),vt("close",t),s=r;break;case"iframe":case"object":case"embed":vt("load",t),s=r;break;case"video":case"audio":for(s=0;s<hl.length;s++)vt(hl[s],t);s=r;break;case"source":vt("error",t),s=r;break;case"img":case"image":case"link":vt("error",t),vt("load",t),s=r;break;case"details":vt("toggle",t),s=r;break;case"input":Ny(t,r),s=ip(t,r),vt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Tt({},r,{value:void 0}),vt("invalid",t);break;case"textarea":Py(t,r),s=lp(t,r),vt("invalid",t);break;default:s=r}up(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Pb(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Nb(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ll(t,c):typeof c=="number"&&Ll(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Dl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&vt("scroll",t):c!=null&&$m(t,i,c,o))}switch(n){case"input":ru(t),Ry(t,r,!1);break;case"textarea":ru(t),My(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ci(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$o(t,!!r.multiple,i,!1):r.defaultValue!=null&&$o(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ad)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pn(e),null;case 6:if(t&&e.stateNode!=null)tT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ge(166));if(n=Fi(ql.current),Fi(Qr.current),hu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jr]=e,(i=r.nodeValue!==n)&&(t=Xn,t!==null))switch(t.tag){case 3:du(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&du(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jr]=e,e.stateNode=r}return pn(e),null;case 13:if(wt(bt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_t&&Yn!==null&&e.mode&1&&!(e.flags&128))xE(),ia(),e.flags|=98560,i=!1;else if(i=hu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ge(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ge(317));i[Jr]=e}else ia(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pn(e),i=!1}else Pr!==null&&(Hp(Pr),Pr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||bt.current&1?Ht===0&&(Ht=3):Sg())),e.updateQueue!==null&&(e.flags|=4),pn(e),null);case 4:return aa(),Fp(t,e),t===null&&zl(e.stateNode.containerInfo),pn(e),null;case 10:return cg(e.type._context),pn(e),null;case 17:return zn(e.type)&&ld(),pn(e),null;case 19:if(wt(bt),i=e.memoizedState,i===null)return pn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)nl(i,!1);else{if(Ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=md(t),o!==null){for(e.flags|=128,nl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return gt(bt,bt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Mt()>ca&&(e.flags|=128,r=!0,nl(i,!1),e.lanes=4194304)}else{if(!r)if(t=md(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),nl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!_t)return pn(e),null}else 2*Mt()-i.renderingStartTime>ca&&n!==1073741824&&(e.flags|=128,r=!0,nl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Mt(),e.sibling=null,n=bt.current,gt(bt,r?n&1|2:n&1),e):(pn(e),null);case 22:case 23:return Ig(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Jn&1073741824&&(pn(e),e.subtreeFlags&6&&(e.flags|=8192)):pn(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}function K2(t,e){switch(ig(e),e.tag){case 1:return zn(e.type)&&ld(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return aa(),wt(Bn),wt(_n),pg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fg(e),null;case 13:if(wt(bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));ia()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return wt(bt),null;case 4:return aa(),null;case 10:return cg(e.type._context),null;case 22:case 23:return Ig(),null;case 24:return null;default:return null}}var mu=!1,vn=!1,J2=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Vo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nt(t,e,r)}else n.current=null}function Up(t,e,n){try{n()}catch(r){Nt(t,e,r)}}var bv=!1;function Y2(t,e){if(_p=sd,t=oE(),rg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,m=t,g=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)g=m,m=y;for(;;){if(m===t)break t;if(g===n&&++u===s&&(a=o),g===i&&++d===r&&(c=o),(y=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(bp={focusedElem:t,selectionRange:n},sd=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,w=b.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:Nr(e.type,x),w);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(P){Nt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return b=bv,bv=!1,b}function Tl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Up(e,n,i)}s=s.next}while(s!==r)}}function sh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nT(t){var e=t.alternate;e!==null&&(t.alternate=null,nT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jr],delete e[$l],delete e[Ip],delete e[P2],delete e[M2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rT(t){return t.tag===5||t.tag===3||t.tag===4}function Ev(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Op(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ad));else if(r!==4&&(t=t.child,t!==null))for(Op(t,e,n),t=t.sibling;t!==null;)Op(t,e,n),t=t.sibling}function Bp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bp(t,e,n),t=t.sibling;t!==null;)Bp(t,e,n),t=t.sibling}var en=null,Rr=!1;function Fs(t,e,n){for(n=n.child;n!==null;)sT(t,e,n),n=n.sibling}function sT(t,e,n){if(Yr&&typeof Yr.onCommitFiberUnmount=="function")try{Yr.onCommitFiberUnmount(Yd,n)}catch{}switch(n.tag){case 5:vn||Vo(n,e);case 6:var r=en,s=Rr;en=null,Fs(t,e,n),en=r,Rr=s,en!==null&&(Rr?(t=en,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):en.removeChild(n.stateNode));break;case 18:en!==null&&(Rr?(t=en,n=n.stateNode,t.nodeType===8?xf(t.parentNode,n):t.nodeType===1&&xf(t,n),Vl(t)):xf(en,n.stateNode));break;case 4:r=en,s=Rr,en=n.stateNode.containerInfo,Rr=!0,Fs(t,e,n),en=r,Rr=s;break;case 0:case 11:case 14:case 15:if(!vn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Up(n,e,o),s=s.next}while(s!==r)}Fs(t,e,n);break;case 1:if(!vn&&(Vo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Nt(n,e,a)}Fs(t,e,n);break;case 21:Fs(t,e,n);break;case 22:n.mode&1?(vn=(r=vn)||n.memoizedState!==null,Fs(t,e,n),vn=r):Fs(t,e,n);break;default:Fs(t,e,n)}}function Tv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new J2),e.forEach(function(r){var s=iA.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ar(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:en=a.stateNode,Rr=!1;break e;case 3:en=a.stateNode.containerInfo,Rr=!0;break e;case 4:en=a.stateNode.containerInfo,Rr=!0;break e}a=a.return}if(en===null)throw Error(ge(160));sT(i,o,s),en=null,Rr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Nt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iT(e,t),e=e.sibling}function iT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ar(e,t),qr(t),r&4){try{Tl(3,t,t.return),sh(3,t)}catch(x){Nt(t,t.return,x)}try{Tl(5,t,t.return)}catch(x){Nt(t,t.return,x)}}break;case 1:Ar(e,t),qr(t),r&512&&n!==null&&Vo(n,n.return);break;case 5:if(Ar(e,t),qr(t),r&512&&n!==null&&Vo(n,n.return),t.flags&32){var s=t.stateNode;try{Ll(s,"")}catch(x){Nt(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&kb(s,i),dp(a,o);var u=dp(a,i);for(o=0;o<c.length;o+=2){var d=c[o],m=c[o+1];d==="style"?Pb(s,m):d==="dangerouslySetInnerHTML"?Nb(s,m):d==="children"?Ll(s,m):$m(s,d,m,u)}switch(a){case"input":op(s,i);break;case"textarea":Cb(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?$o(s,!!i.multiple,y,!1):g!==!!i.multiple&&(i.defaultValue!=null?$o(s,!!i.multiple,i.defaultValue,!0):$o(s,!!i.multiple,i.multiple?[]:"",!1))}s[$l]=i}catch(x){Nt(t,t.return,x)}}break;case 6:if(Ar(e,t),qr(t),r&4){if(t.stateNode===null)throw Error(ge(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Nt(t,t.return,x)}}break;case 3:if(Ar(e,t),qr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vl(e.containerInfo)}catch(x){Nt(t,t.return,x)}break;case 4:Ar(e,t),qr(t);break;case 13:Ar(e,t),qr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Eg=Mt())),r&4&&Tv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(vn=(u=vn)||d,Ar(e,t),vn=u):Ar(e,t),qr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Ie=t,d=t.child;d!==null;){for(m=Ie=d;Ie!==null;){switch(g=Ie,y=g.child,g.tag){case 0:case 11:case 14:case 15:Tl(4,g,g.return);break;case 1:Vo(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(x){Nt(r,n,x)}}break;case 5:Vo(g,g.return);break;case 22:if(g.memoizedState!==null){Sv(m);continue}}y!==null?(y.return=g,Ie=y):Sv(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{s=m.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Rb("display",o))}catch(x){Nt(t,t.return,x)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(x){Nt(t,t.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ar(e,t),qr(t),r&4&&Tv(t);break;case 21:break;default:Ar(e,t),qr(t)}}function qr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rT(n)){var r=n;break e}n=n.return}throw Error(ge(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ll(s,""),r.flags&=-33);var i=Ev(t);Bp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ev(t);Op(t,a,o);break;default:throw Error(ge(161))}}catch(c){Nt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Q2(t,e,n){Ie=t,oT(t)}function oT(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var s=Ie,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||mu;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||vn;a=mu;var u=vn;if(mu=o,(vn=c)&&!u)for(Ie=s;Ie!==null;)o=Ie,c=o.child,o.tag===22&&o.memoizedState!==null?kv(s):c!==null?(c.return=o,Ie=c):kv(s);for(;i!==null;)Ie=i,oT(i),i=i.sibling;Ie=s,mu=a,vn=u}Iv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ie=i):Iv(t)}}function Iv(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vn||sh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Nr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&cv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&Vl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}vn||e.flags&512&&Vp(e)}catch(g){Nt(e,e.return,g)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function Sv(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function kv(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sh(4,e)}catch(c){Nt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Nt(e,s,c)}}var i=e.return;try{Vp(e)}catch(c){Nt(e,i,c)}break;case 5:var o=e.return;try{Vp(e)}catch(c){Nt(e,o,c)}}}catch(c){Nt(e,e.return,c)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var X2=Math.ceil,vd=As.ReactCurrentDispatcher,_g=As.ReactCurrentOwner,mr=As.ReactCurrentBatchConfig,Ze=0,Qt=null,Vt=null,rn=0,Jn=0,Oo=mi(0),Ht=0,Yl=null,Ki=0,ih=0,bg=0,Il=null,Fn=null,Eg=0,ca=1/0,as=null,xd=!1,zp=null,ni=null,gu=!1,Ks=null,wd=0,Sl=0,Gp=null,Vu=-1,Ou=0;function Cn(){return Ze&6?Mt():Vu!==-1?Vu:Vu=Mt()}function ri(t){return t.mode&1?Ze&2&&rn!==0?rn&-rn:L2.transition!==null?(Ou===0&&(Ou=$b()),Ou):(t=ut,t!==0||(t=window.event,t=t===void 0?16:Qb(t.type)),t):1}function Dr(t,e,n,r){if(50<Sl)throw Sl=0,Gp=null,Error(ge(185));mc(t,n,r),(!(Ze&2)||t!==Qt)&&(t===Qt&&(!(Ze&2)&&(ih|=n),Ht===4&&zs(t,rn)),Gn(t,r),n===1&&Ze===0&&!(e.mode&1)&&(ca=Mt()+500,th&&gi()))}function Gn(t,e){var n=t.callbackNode;LC(t,e);var r=rd(t,t===Qt?rn:0);if(r===0)n!==null&&jy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jy(n),e===1)t.tag===0?D2(Cv.bind(null,t)):gE(Cv.bind(null,t)),N2(function(){!(Ze&6)&&gi()}),n=null;else{switch(Hb(r)){case 1:n=Jm;break;case 4:n=zb;break;case 16:n=nd;break;case 536870912:n=Gb;break;default:n=nd}n=pT(n,aT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aT(t,e){if(Vu=-1,Ou=0,Ze&6)throw Error(ge(327));var n=t.callbackNode;if(Jo()&&t.callbackNode!==n)return null;var r=rd(t,t===Qt?rn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=_d(t,r);else{e=r;var s=Ze;Ze|=2;var i=cT();(Qt!==t||rn!==e)&&(as=null,ca=Mt()+500,Bi(t,e));do try{tA();break}catch(a){lT(t,a)}while(!0);lg(),vd.current=i,Ze=s,Vt!==null?e=0:(Qt=null,rn=0,e=Ht)}if(e!==0){if(e===2&&(s=gp(t),s!==0&&(r=s,e=$p(t,s))),e===1)throw n=Yl,Bi(t,0),zs(t,r),Gn(t,Mt()),n;if(e===6)zs(t,r);else{if(s=t.current.alternate,!(r&30)&&!Z2(s)&&(e=_d(t,r),e===2&&(i=gp(t),i!==0&&(r=i,e=$p(t,i))),e===1))throw n=Yl,Bi(t,0),zs(t,r),Gn(t,Mt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ge(345));case 2:Pi(t,Fn,as);break;case 3:if(zs(t,r),(r&130023424)===r&&(e=Eg+500-Mt(),10<e)){if(rd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Cn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Tp(Pi.bind(null,t,Fn,as),e);break}Pi(t,Fn,as);break;case 4:if(zs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Mr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*X2(r/1960))-r,10<r){t.timeoutHandle=Tp(Pi.bind(null,t,Fn,as),r);break}Pi(t,Fn,as);break;case 5:Pi(t,Fn,as);break;default:throw Error(ge(329))}}}return Gn(t,Mt()),t.callbackNode===n?aT.bind(null,t):null}function $p(t,e){var n=Il;return t.current.memoizedState.isDehydrated&&(Bi(t,e).flags|=256),t=_d(t,e),t!==2&&(e=Fn,Fn=n,e!==null&&Hp(e)),t}function Hp(t){Fn===null?Fn=t:Fn.push.apply(Fn,t)}function Z2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ur(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zs(t,e){for(e&=~bg,e&=~ih,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mr(e),r=1<<n;t[n]=-1,e&=~r}}function Cv(t){if(Ze&6)throw Error(ge(327));Jo();var e=rd(t,0);if(!(e&1))return Gn(t,Mt()),null;var n=_d(t,e);if(t.tag!==0&&n===2){var r=gp(t);r!==0&&(e=r,n=$p(t,r))}if(n===1)throw n=Yl,Bi(t,0),zs(t,e),Gn(t,Mt()),n;if(n===6)throw Error(ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pi(t,Fn,as),Gn(t,Mt()),null}function Tg(t,e){var n=Ze;Ze|=1;try{return t(e)}finally{Ze=n,Ze===0&&(ca=Mt()+500,th&&gi())}}function Ji(t){Ks!==null&&Ks.tag===0&&!(Ze&6)&&Jo();var e=Ze;Ze|=1;var n=mr.transition,r=ut;try{if(mr.transition=null,ut=1,t)return t()}finally{ut=r,mr.transition=n,Ze=e,!(Ze&6)&&gi()}}function Ig(){Jn=Oo.current,wt(Oo)}function Bi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,A2(n)),Vt!==null)for(n=Vt.return;n!==null;){var r=n;switch(ig(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ld();break;case 3:aa(),wt(Bn),wt(_n),pg();break;case 5:fg(r);break;case 4:aa();break;case 13:wt(bt);break;case 19:wt(bt);break;case 10:cg(r.type._context);break;case 22:case 23:Ig()}n=n.return}if(Qt=t,Vt=t=si(t.current,null),rn=Jn=e,Ht=0,Yl=null,bg=ih=Ki=0,Fn=Il=null,ji!==null){for(e=0;e<ji.length;e++)if(n=ji[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ji=null}return t}function lT(t,e){do{var n=Vt;try{if(lg(),ju.current=yd,gd){for(var r=Et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}gd=!1}if(Wi=0,Yt=$t=Et=null,El=!1,Wl=0,_g.current=null,n===null||n.return===null){Ht=1,Yl=e,Vt=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=rn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=mv(o);if(y!==null){y.flags&=-257,gv(y,o,a,i,e),y.mode&1&&pv(i,u,e),e=y,c=u;var b=e.updateQueue;if(b===null){var x=new Set;x.add(c),e.updateQueue=x}else b.add(c);break e}else{if(!(e&1)){pv(i,u,e),Sg();break e}c=Error(ge(426))}}else if(_t&&a.mode&1){var w=mv(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),gv(w,o,a,i,e),og(la(c,a));break e}}i=c=la(c,a),Ht!==4&&(Ht=2),Il===null?Il=[i]:Il.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=HE(i,c,e);lv(i,v);break e;case 1:a=c;var _=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ni===null||!ni.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=qE(i,a,e);lv(i,P);break e}}i=i.return}while(i!==null)}dT(n)}catch(L){e=L,Vt===n&&n!==null&&(Vt=n=n.return);continue}break}while(!0)}function cT(){var t=vd.current;return vd.current=yd,t===null?yd:t}function Sg(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Qt===null||!(Ki&268435455)&&!(ih&268435455)||zs(Qt,rn)}function _d(t,e){var n=Ze;Ze|=2;var r=cT();(Qt!==t||rn!==e)&&(as=null,Bi(t,e));do try{eA();break}catch(s){lT(t,s)}while(!0);if(lg(),Ze=n,vd.current=r,Vt!==null)throw Error(ge(261));return Qt=null,rn=0,Ht}function eA(){for(;Vt!==null;)uT(Vt)}function tA(){for(;Vt!==null&&!SC();)uT(Vt)}function uT(t){var e=fT(t.alternate,t,Jn);t.memoizedProps=t.pendingProps,e===null?dT(t):Vt=e,_g.current=null}function dT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=K2(n,e),n!==null){n.flags&=32767,Vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ht=6,Vt=null;return}}else if(n=W2(n,e,Jn),n!==null){Vt=n;return}if(e=e.sibling,e!==null){Vt=e;return}Vt=e=t}while(e!==null);Ht===0&&(Ht=5)}function Pi(t,e,n){var r=ut,s=mr.transition;try{mr.transition=null,ut=1,nA(t,e,n,r)}finally{mr.transition=s,ut=r}return null}function nA(t,e,n,r){do Jo();while(Ks!==null);if(Ze&6)throw Error(ge(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ge(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jC(t,i),t===Qt&&(Vt=Qt=null,rn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gu||(gu=!0,pT(nd,function(){return Jo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=mr.transition,mr.transition=null;var o=ut;ut=1;var a=Ze;Ze|=4,_g.current=null,Y2(t,n),iT(n,t),b2(bp),sd=!!_p,bp=_p=null,t.current=n,Q2(n),kC(),Ze=a,ut=o,mr.transition=i}else t.current=n;if(gu&&(gu=!1,Ks=t,wd=s),i=t.pendingLanes,i===0&&(ni=null),NC(n.stateNode),Gn(t,Mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(xd)throw xd=!1,t=zp,zp=null,t;return wd&1&&t.tag!==0&&Jo(),i=t.pendingLanes,i&1?t===Gp?Sl++:(Sl=0,Gp=t):Sl=0,gi(),null}function Jo(){if(Ks!==null){var t=Hb(wd),e=mr.transition,n=ut;try{if(mr.transition=null,ut=16>t?16:t,Ks===null)var r=!1;else{if(t=Ks,Ks=null,wd=0,Ze&6)throw Error(ge(331));var s=Ze;for(Ze|=4,Ie=t.current;Ie!==null;){var i=Ie,o=i.child;if(Ie.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(Ie=u;Ie!==null;){var d=Ie;switch(d.tag){case 0:case 11:case 15:Tl(8,d,i)}var m=d.child;if(m!==null)m.return=d,Ie=m;else for(;Ie!==null;){d=Ie;var g=d.sibling,y=d.return;if(nT(d),d===u){Ie=null;break}if(g!==null){g.return=y,Ie=g;break}Ie=y}}}var b=i.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}Ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ie=o;else e:for(;Ie!==null;){if(i=Ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Tl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ie=v;break e}Ie=i.return}}var _=t.current;for(Ie=_;Ie!==null;){o=Ie;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Ie=T;else e:for(o=_;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sh(9,a)}}catch(L){Nt(a,a.return,L)}if(a===o){Ie=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,Ie=P;break e}Ie=a.return}}if(Ze=s,gi(),Yr&&typeof Yr.onPostCommitFiberRoot=="function")try{Yr.onPostCommitFiberRoot(Yd,t)}catch{}r=!0}return r}finally{ut=n,mr.transition=e}}return!1}function Av(t,e,n){e=la(n,e),e=HE(t,e,1),t=ti(t,e,1),e=Cn(),t!==null&&(mc(t,1,e),Gn(t,e))}function Nt(t,e,n){if(t.tag===3)Av(t,t,n);else for(;e!==null;){if(e.tag===3){Av(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ni===null||!ni.has(r))){t=la(n,t),t=qE(e,t,1),e=ti(e,t,1),t=Cn(),e!==null&&(mc(e,1,t),Gn(e,t));break}}e=e.return}}function rA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Cn(),t.pingedLanes|=t.suspendedLanes&n,Qt===t&&(rn&n)===n&&(Ht===4||Ht===3&&(rn&130023424)===rn&&500>Mt()-Eg?Bi(t,0):bg|=n),Gn(t,e)}function hT(t,e){e===0&&(t.mode&1?(e=ou,ou<<=1,!(ou&130023424)&&(ou=4194304)):e=1);var n=Cn();t=ws(t,e),t!==null&&(mc(t,e,n),Gn(t,n))}function sA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hT(t,n)}function iA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ge(314))}r!==null&&r.delete(e),hT(t,n)}var fT;fT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bn.current)Vn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vn=!1,q2(t,e,n);Vn=!!(t.flags&131072)}else Vn=!1,_t&&e.flags&1048576&&yE(e,dd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uu(t,e),t=e.pendingProps;var s=sa(e,_n.current);Ko(e,n),s=gg(null,e,r,t,s,n);var i=yg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zn(r)?(i=!0,cd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,dg(e),s.updater=rh,e.stateNode=s,s._reactInternals=e,Rp(e,r,t,n),e=Dp(null,e,r,!0,i,n)):(e.tag=0,_t&&i&&sg(e),Sn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=aA(r),t=Nr(r,t),s){case 0:e=Mp(null,e,r,t,n);break e;case 1:e=xv(null,e,r,t,n);break e;case 11:e=yv(null,e,r,t,n);break e;case 14:e=vv(null,e,r,Nr(r.type,t),n);break e}throw Error(ge(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Nr(r,s),Mp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Nr(r,s),xv(t,e,r,s,n);case 3:e:{if(YE(e),t===null)throw Error(ge(387));r=e.pendingProps,i=e.memoizedState,s=i.element,EE(t,e),pd(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=la(Error(ge(423)),e),e=wv(t,e,r,n,s);break e}else if(r!==s){s=la(Error(ge(424)),e),e=wv(t,e,r,n,s);break e}else for(Yn=ei(e.stateNode.containerInfo.firstChild),Xn=e,_t=!0,Pr=null,n=_E(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ia(),r===s){e=_s(t,e,n);break e}Sn(t,e,r,n)}e=e.child}return e;case 5:return TE(e),t===null&&Cp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ep(r,s)?o=null:i!==null&&Ep(r,i)&&(e.flags|=32),JE(t,e),Sn(t,e,o,n),e.child;case 6:return t===null&&Cp(e),null;case 13:return QE(t,e,n);case 4:return hg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=oa(e,null,r,n):Sn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Nr(r,s),yv(t,e,r,s,n);case 7:return Sn(t,e,e.pendingProps,n),e.child;case 8:return Sn(t,e,e.pendingProps.children,n),e.child;case 12:return Sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,gt(hd,r._currentValue),r._currentValue=o,i!==null)if(Ur(i.value,o)){if(i.children===s.children&&!Bn.current){e=_s(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ys(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ap(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ge(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ap(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Sn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ko(e,n),s=xr(s),r=r(s),e.flags|=1,Sn(t,e,r,n),e.child;case 14:return r=e.type,s=Nr(r,e.pendingProps),s=Nr(r.type,s),vv(t,e,r,s,n);case 15:return WE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Nr(r,s),Uu(t,e),e.tag=1,zn(r)?(t=!0,cd(e)):t=!1,Ko(e,n),$E(e,r,s),Rp(e,r,s,n),Dp(null,e,r,!0,t,n);case 19:return XE(t,e,n);case 22:return KE(t,e,n)}throw Error(ge(156,e.tag))};function pT(t,e){return Bb(t,e)}function oA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(t,e,n,r){return new oA(t,e,n,r)}function kg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aA(t){if(typeof t=="function")return kg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qm)return 11;if(t===Wm)return 14}return 2}function si(t,e){var n=t.alternate;return n===null?(n=pr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")kg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case No:return zi(n.children,s,i,e);case Hm:o=8,s|=8;break;case tp:return t=pr(12,n,e,s|2),t.elementType=tp,t.lanes=i,t;case np:return t=pr(13,n,e,s),t.elementType=np,t.lanes=i,t;case rp:return t=pr(19,n,e,s),t.elementType=rp,t.lanes=i,t;case Tb:return oh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bb:o=10;break e;case Eb:o=9;break e;case qm:o=11;break e;case Wm:o=14;break e;case Vs:o=16,r=null;break e}throw Error(ge(130,t==null?t:typeof t,""))}return e=pr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function zi(t,e,n,r){return t=pr(7,t,r,e),t.lanes=n,t}function oh(t,e,n,r){return t=pr(22,t,r,e),t.elementType=Tb,t.lanes=n,t.stateNode={isHidden:!1},t}function kf(t,e,n){return t=pr(6,t,null,e),t.lanes=n,t}function Cf(t,e,n){return e=pr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lA(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lf(0),this.expirationTimes=lf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cg(t,e,n,r,s,i,o,a,c){return t=new lA(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=pr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dg(i),t}function cA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ao,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mT(t){if(!t)return ui;t=t._reactInternals;e:{if(ao(t)!==t||t.tag!==1)throw Error(ge(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(t.tag===1){var n=t.type;if(zn(n))return mE(t,n,e)}return e}function gT(t,e,n,r,s,i,o,a,c){return t=Cg(n,r,!0,t,s,i,o,a,c),t.context=mT(null),n=t.current,r=Cn(),s=ri(n),i=ys(r,s),i.callback=e??null,ti(n,i,s),t.current.lanes=s,mc(t,s,r),Gn(t,r),t}function ah(t,e,n,r){var s=e.current,i=Cn(),o=ri(s);return n=mT(n),e.context===null?e.context=n:e.pendingContext=n,e=ys(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ti(s,e,o),t!==null&&(Dr(t,s,o,i),Lu(t,s,o)),o}function bd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ag(t,e){Nv(t,e),(t=t.alternate)&&Nv(t,e)}function uA(){return null}var yT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ng(t){this._internalRoot=t}lh.prototype.render=Ng.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ge(409));ah(t,e,null,null)};lh.prototype.unmount=Ng.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ji(function(){ah(null,t,null,null)}),e[xs]=null}};function lh(t){this._internalRoot=t}lh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Kb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Bs.length&&e!==0&&e<Bs[n].priority;n++);Bs.splice(n,0,t),n===0&&Yb(t)}};function Rg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ch(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rv(){}function dA(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=bd(o);i.call(u)}}var o=gT(e,r,t,0,null,!1,!1,"",Rv);return t._reactRootContainer=o,t[xs]=o.current,zl(t.nodeType===8?t.parentNode:t),Ji(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=bd(c);a.call(u)}}var c=Cg(t,0,!1,null,null,!1,!1,"",Rv);return t._reactRootContainer=c,t[xs]=c.current,zl(t.nodeType===8?t.parentNode:t),Ji(function(){ah(e,c,n,r)}),c}function uh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=bd(o);a.call(c)}}ah(e,o,t,s)}else o=dA(n,e,t,s,r);return bd(o)}qb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=dl(e.pendingLanes);n!==0&&(Ym(e,n|1),Gn(e,Mt()),!(Ze&6)&&(ca=Mt()+500,gi()))}break;case 13:Ji(function(){var r=ws(t,1);if(r!==null){var s=Cn();Dr(r,t,1,s)}}),Ag(t,1)}};Qm=function(t){if(t.tag===13){var e=ws(t,134217728);if(e!==null){var n=Cn();Dr(e,t,134217728,n)}Ag(t,134217728)}};Wb=function(t){if(t.tag===13){var e=ri(t),n=ws(t,e);if(n!==null){var r=Cn();Dr(n,t,e,r)}Ag(t,e)}};Kb=function(){return ut};Jb=function(t,e){var n=ut;try{return ut=t,e()}finally{ut=n}};fp=function(t,e,n){switch(e){case"input":if(op(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=eh(r);if(!s)throw Error(ge(90));Sb(r),op(r,s)}}}break;case"textarea":Cb(t,n);break;case"select":e=n.value,e!=null&&$o(t,!!n.multiple,e,!1)}};Lb=Tg;jb=Ji;var hA={usingClientEntryPoint:!1,Events:[yc,Do,eh,Mb,Db,Tg]},rl={findFiberByHostInstance:Li,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fA={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:As.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vb(t),t===null?null:t.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||uA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yu.isDisabled&&yu.supportsFiber)try{Yd=yu.inject(fA),Yr=yu}catch{}}ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hA;ir.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rg(e))throw Error(ge(200));return cA(t,e,null,n)};ir.createRoot=function(t,e){if(!Rg(t))throw Error(ge(299));var n=!1,r="",s=yT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Cg(t,1,!1,null,null,n,!1,r,s),t[xs]=e.current,zl(t.nodeType===8?t.parentNode:t),new Ng(e)};ir.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ge(188)):(t=Object.keys(t).join(","),Error(ge(268,t)));return t=Vb(e),t=t===null?null:t.stateNode,t};ir.flushSync=function(t){return Ji(t)};ir.hydrate=function(t,e,n){if(!ch(e))throw Error(ge(200));return uh(null,t,e,!0,n)};ir.hydrateRoot=function(t,e,n){if(!Rg(t))throw Error(ge(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=yT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gT(e,null,t,1,n??null,s,!1,i,o),t[xs]=e.current,zl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new lh(e)};ir.render=function(t,e,n){if(!ch(e))throw Error(ge(200));return uh(null,t,e,!1,n)};ir.unmountComponentAtNode=function(t){if(!ch(t))throw Error(ge(40));return t._reactRootContainer?(Ji(function(){uh(null,null,t,!1,function(){t._reactRootContainer=null,t[xs]=null})}),!0):!1};ir.unstable_batchedUpdates=Tg;ir.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ch(n))throw Error(ge(200));if(t==null||t._reactInternals===void 0)throw Error(ge(38));return uh(t,e,n,!1,r)};ir.version="18.3.1-next-f1338f8080-20240426";function vT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vT)}catch(t){console.error(t)}}vT(),vb.exports=ir;var pA=vb.exports,Pv=pA;Zf.createRoot=Pv.createRoot,Zf.hydrateRoot=Pv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ql(){return Ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ql.apply(this,arguments)}var Js;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Js||(Js={}));const Mv="popstate";function mA(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:c=""}=lo(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),qp("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof i=="string"?i:Ed(i))}function r(s,i){dh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return yA(e,n,r,t)}function Dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gA(){return Math.random().toString(36).substr(2,8)}function Dv(t,e){return{usr:t.state,key:t.key,idx:e}}function qp(t,e,n,r){return n===void 0&&(n=null),Ql({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?lo(e):e,{state:n,key:e&&e.key||r||gA()})}function Ed(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function lo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function yA(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Js.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Ql({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function m(){a=Js.Pop;let w=d(),v=w==null?null:w-u;u=w,c&&c({action:a,location:x.location,delta:v})}function g(w,v){a=Js.Push;let _=qp(x.location,w,v);n&&n(_,w),u=d()+1;let T=Dv(_,u),P=x.createHref(_);try{o.pushState(T,"",P)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(P)}i&&c&&c({action:a,location:x.location,delta:1})}function y(w,v){a=Js.Replace;let _=qp(x.location,w,v);n&&n(_,w),u=d();let T=Dv(_,u),P=x.createHref(_);o.replaceState(T,"",P),i&&c&&c({action:a,location:x.location,delta:0})}function b(w){let v=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof w=="string"?w:Ed(w);return _=_.replace(/ $/,"%20"),Dt(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let x={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Mv,m),c=w,()=>{s.removeEventListener(Mv,m),c=null}},createHref(w){return e(s,w)},createURL:b,encodeLocation(w){let v=b(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:g,replace:y,go(w){return o.go(w)}};return x}var Lv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Lv||(Lv={}));function vA(t,e,n){return n===void 0&&(n="/"),xA(t,e,n)}function xA(t,e,n,r){let s=typeof e=="string"?lo(e):e,i=Pg(s.pathname||"/",n);if(i==null)return null;let o=xT(t);wA(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=PA(i);a=AA(o[c],u)}return a}function xT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Dt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=ii([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(Dt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),xT(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:kA(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of wT(i.path))s(i,o,c)}),e}function wT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=wT(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function wA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:CA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _A=/^:[\w-]+$/,bA=3,EA=2,TA=1,IA=10,SA=-2,jv=t=>t==="*";function kA(t,e){let n=t.split("/"),r=n.length;return n.some(jv)&&(r+=SA),e&&(r+=EA),n.filter(s=>!jv(s)).reduce((s,i)=>s+(_A.test(i)?bA:i===""?TA:IA),r)}function CA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function AA(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",m=NA({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),g=c.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:ii([i,m.pathname]),pathnameBase:FA(ii([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=ii([i,m.pathnameBase]))}return o}function NA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=RA(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,m)=>{let{paramName:g,isOptional:y}=d;if(g==="*"){let x=a[m]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const b=a[m];return y&&!b?u[g]=void 0:u[g]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function RA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),dh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function PA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Pg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const MA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DA=t=>MA.test(t);function LA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?lo(t):t,i;if(n)if(DA(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),dh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Fv(n.substring(1),"/"):i=Fv(n,e)}else i=e;return{pathname:i,search:UA(r),hash:VA(s)}}function Fv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Af(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mg(t,e){let n=jA(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Dg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=lo(t):(s=Ql({},t),Dt(!s.pathname||!s.pathname.includes("?"),Af("?","pathname","search",s)),Dt(!s.pathname||!s.pathname.includes("#"),Af("#","pathname","hash",s)),Dt(!s.search||!s.search.includes("#"),Af("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}a=m>=0?e[m]:"/"}let c=LA(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ii=t=>t.join("/").replace(/\/\/+/g,"/"),FA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),UA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function OA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _T=["post","put","patch","delete"];new Set(_T);const BA=["get",..._T];new Set(BA);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xl.apply(this,arguments)}const Lg=j.createContext(null),zA=j.createContext(null),yi=j.createContext(null),hh=j.createContext(null),Ns=j.createContext({outlet:null,matches:[],isDataRoute:!1}),bT=j.createContext(null);function GA(t,e){let{relative:n}=e===void 0?{}:e;Ia()||Dt(!1);let{basename:r,navigator:s}=j.useContext(yi),{hash:i,pathname:o,search:a}=IT(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:ii([r,o])),s.createHref({pathname:c,search:a,hash:i})}function Ia(){return j.useContext(hh)!=null}function vi(){return Ia()||Dt(!1),j.useContext(hh).location}function ET(t){j.useContext(yi).static||j.useLayoutEffect(t)}function br(){let{isDataRoute:t}=j.useContext(Ns);return t?nN():$A()}function $A(){Ia()||Dt(!1);let t=j.useContext(Lg),{basename:e,future:n,navigator:r}=j.useContext(yi),{matches:s}=j.useContext(Ns),{pathname:i}=vi(),o=JSON.stringify(Mg(s,n.v7_relativeSplatPath)),a=j.useRef(!1);return ET(()=>{a.current=!0}),j.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let m=Dg(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ii([e,m.pathname])),(d.replace?r.replace:r.push)(m,d.state,d)},[e,r,o,i,t])}function TT(){let{matches:t}=j.useContext(Ns),e=t[t.length-1];return e?e.params:{}}function IT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(yi),{matches:s}=j.useContext(Ns),{pathname:i}=vi(),o=JSON.stringify(Mg(s,r.v7_relativeSplatPath));return j.useMemo(()=>Dg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function HA(t,e){return qA(t,e)}function qA(t,e,n,r){Ia()||Dt(!1);let{navigator:s}=j.useContext(yi),{matches:i}=j.useContext(Ns),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=vi(),d;if(e){var m;let w=typeof e=="string"?lo(e):e;c==="/"||(m=w.pathname)!=null&&m.startsWith(c)||Dt(!1),d=w}else d=u;let g=d.pathname||"/",y=g;if(c!=="/"){let w=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=vA(t,{pathname:y}),x=QA(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:ii([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:ii([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&x?j.createElement(hh.Provider,{value:{location:Xl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Js.Pop}},x):x}function WA(){let t=tN(),e=OA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const KA=j.createElement(WA,null);class JA extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(Ns.Provider,{value:this.props.routeContext},j.createElement(bT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YA(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(Lg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Ns.Provider,{value:e},r)}function QA(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);d>=0||Dt(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=d),m.route.id){let{loaderData:g,errors:y}=n,b=m.route.loader&&g[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,m,g)=>{let y,b=!1,x=null,w=null;n&&(y=a&&m.route.id?a[m.route.id]:void 0,x=m.route.errorElement||KA,c&&(u<0&&g===0?(rN("route-fallback"),b=!0,w=null):u===g&&(b=!0,w=m.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,g+1)),_=()=>{let T;return y?T=x:b?T=w:m.route.Component?T=j.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=d,j.createElement(YA,{match:m,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?j.createElement(JA,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var ST=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ST||{}),kT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(kT||{});function XA(t){let e=j.useContext(Lg);return e||Dt(!1),e}function ZA(t){let e=j.useContext(zA);return e||Dt(!1),e}function eN(t){let e=j.useContext(Ns);return e||Dt(!1),e}function CT(t){let e=eN(),n=e.matches[e.matches.length-1];return n.route.id||Dt(!1),n.route.id}function tN(){var t;let e=j.useContext(bT),n=ZA(),r=CT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nN(){let{router:t}=XA(ST.UseNavigateStable),e=CT(kT.UseNavigateStable),n=j.useRef(!1);return ET(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Xl({fromRouteId:e},i)))},[t,e])}const Uv={};function rN(t,e,n){Uv[t]||(Uv[t]=!0)}function sN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function iN(t){let{to:e,replace:n,state:r,relative:s}=t;Ia()||Dt(!1);let{future:i,static:o}=j.useContext(yi),{matches:a}=j.useContext(Ns),{pathname:c}=vi(),u=br(),d=Dg(e,Mg(a,i.v7_relativeSplatPath),c,s==="path"),m=JSON.stringify(d);return j.useEffect(()=>u(JSON.parse(m),{replace:n,state:r,relative:s}),[u,m,s,n,r]),null}function gn(t){Dt(!1)}function oN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Js.Pop,navigator:i,static:o=!1,future:a}=t;Ia()&&Dt(!1);let c=e.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:c,navigator:i,static:o,future:Xl({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=lo(r));let{pathname:d="/",search:m="",hash:g="",state:y=null,key:b="default"}=r,x=j.useMemo(()=>{let w=Pg(d,c);return w==null?null:{location:{pathname:w,search:m,hash:g,state:y,key:b},navigationType:s}},[c,d,m,g,y,b,s]);return x==null?null:j.createElement(yi.Provider,{value:u},j.createElement(hh.Provider,{children:n,value:x}))}function aN(t){let{children:e,location:n}=t;return HA(Wp(e),n)}new Promise(()=>{});function Wp(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,Wp(r.props.children,i));return}r.type!==gn&&Dt(!1),!r.props.index||!r.props.children||Dt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Wp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kp(){return Kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kp.apply(this,arguments)}function lN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function cN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uN(t,e){return t.button===0&&(!e||e==="_self")&&!cN(t)}const dN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hN="6";try{window.__reactRouterVersion=hN}catch{}const fN="startTransition",Vv=rC[fN];function pN(t){let{basename:e,children:n,future:r,window:s}=t,i=j.useRef();i.current==null&&(i.current=mA({window:s,v5Compat:!0}));let o=i.current,[a,c]=j.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=j.useCallback(m=>{u&&Vv?Vv(()=>c(m)):c(m)},[c,u]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.useEffect(()=>sN(r),[r]),j.createElement(oN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const mN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kr=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:c,to:u,preventScrollReset:d,viewTransition:m}=e,g=lN(e,dN),{basename:y}=j.useContext(yi),b,x=!1;if(typeof u=="string"&&gN.test(u)&&(b=u,mN))try{let T=new URL(window.location.href),P=u.startsWith("//")?new URL(T.protocol+u):new URL(u),L=Pg(P.pathname,y);P.origin===T.origin&&L!=null?u=L+P.search+P.hash:x=!0}catch{}let w=GA(u,{relative:s}),v=yN(u,{replace:o,state:a,target:c,preventScrollReset:d,relative:s,viewTransition:m});function _(T){r&&r(T),T.defaultPrevented||v(T)}return j.createElement("a",Kp({},g,{href:b||w,onClick:x||i?r:_,ref:n,target:c}))});var Ov;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ov||(Ov={}));var Bv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Bv||(Bv={}));function yN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,c=br(),u=vi(),d=IT(t,{relative:o});return j.useCallback(m=>{if(uN(m,n)){m.preventDefault();let g=r!==void 0?r:Ed(u)===Ed(d);c(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,c,d,r,s,n,t,i,o,a])}const Zl=({className:t="w-10 h-10",variant:e="dark"})=>{const n=e==="dark"?"#0f172a":"#ffffff",r=e==="dark"?"#ffffff":"#0f172a";return l.jsxs("svg",{viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[l.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",fill:n}),l.jsx("text",{x:"50%",y:"235",dominantBaseline:"middle",textAnchor:"middle",fill:r,style:{fontSize:"160px",fontWeight:"900",fontFamily:"'Plus Jakarta Sans', sans-serif",letterSpacing:"-2px",fontStyle:"normal"},children:"IRA"}),l.jsx("text",{x:"50%",y:"340",dominantBaseline:"middle",textAnchor:"middle",fill:r,textLength:"280",lengthAdjust:"spacingAndGlyphs",style:{fontSize:"32px",fontWeight:"800",fontFamily:"'Plus Jakarta Sans', sans-serif",textTransform:"uppercase",letterSpacing:"2px",opacity:.9,fontStyle:"normal"},children:"irfan rizki aditri"}),e==="light"&&l.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",stroke:"rgba(0,0,0,0.05)",strokeWidth:"2"})]})},vN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}),l.jsx("path",{d:"M22 21H7"}),l.jsx("path",{d:"m5 11 9 9"})]}),Nf=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),l.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),l.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"})]}),xN=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4Z"})}),bs=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),AT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),Zn=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"m15 18-6-6 6-6"})}),$n=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"m6 9 6 6 6-6"})}),Yi=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M5 12h14"}),l.jsx("path",{d:"m12 5 7 7-7 7"})]}),jg=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("line",{x1:"12",x2:"12",y1:"19",y2:"5"}),l.jsx("polyline",{points:"5 12 12 5 19 12"})]}),NT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),l.jsx("polyline",{points:"19 12 12 19 5 12"})]}),Jp=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),wN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"m9 7-5 5 5 5"}),l.jsx("path",{d:"m15 7 5 5-5 5"})]}),ua=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),l.jsx("path",{d:"M16 21h5v-5"})]}),da=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),l.jsx("path",{d:"M12 9v4"}),l.jsx("path",{d:"M12 17h.01"})]}),RT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),l.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),l.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]}),ec=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),l.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1 4-10z"})]}),zv=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-6v-4h4v4h-4z"}),l.jsx("path",{d:"M12 12.5a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 1 0v5a.5.5 0 0 1-.5.5z"}),l.jsx("path",{d:"M12 2a10 10 0 0 1 7.07 17.07l-1.41-1.41A8 8 0 1 0 5.34 4.34l1.41 1.41A10 10 0 0 1 12 2z"}),l.jsx("text",{x:"50%",y:"55%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"14",fontWeight:"bold",children:"G"})]}),Gv=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),PT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),l.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Es=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("polyline",{points:"20 6 9 17 4 12"})}),_N=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("circle",{cx:"12",cy:"12",r:"1"}),l.jsx("circle",{cx:"12",cy:"5",r:"1"}),l.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),gr=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M3 6h18"}),l.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),l.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),bN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),l.jsx("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),l.jsx("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),l.jsx("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),l.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]}),ha=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),l.jsx("path",{d:"m15 5 4 4"})]}),fh=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),l.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),l.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),l.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),tc=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"m21 2-2 2m-7.6 7.6a6 6 0 1 1-8.4-8.4 6 6 0 0 1 8.4 8.4Zm0 0 5.7 5.7a2 2 0 0 1 0 2.8l-2.8 2.8"})}),$v=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),l.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),Fg=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"})}),EN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M12 16v-4"}),l.jsx("path",{d:"M12 8h.01"})]}),TN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M12 2v2"}),l.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),l.jsx("path",{d:"M20 12h2"}),l.jsx("path",{d:"m19.07 4.93-1.41 1.41"}),l.jsx("path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128"}),l.jsx("path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"})]}),IN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),l.jsx("line",{x1:"4",x2:"4",y1:"22",y2:"15"})]}),MT=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:l.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),Td=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"}),l.jsx("path",{d:"m9 12 2 2 4-4"})]}),SN=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:l.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),kN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M9 18V5l12-2v13"}),l.jsx("circle",{cx:"6",cy:"18",r:"3"}),l.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),Ug=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),l.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),DT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),CN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("circle",{cx:"6",cy:"6",r:"3"}),l.jsx("circle",{cx:"6",cy:"18",r:"3"}),l.jsx("line",{x1:"20",x2:"8.12",y1:"4",y2:"15.88"}),l.jsx("line",{x1:"14.47",x2:"20",y1:"14.48",y2:"20"}),l.jsx("line",{x1:"8.12",x2:"12",y1:"8.12",y2:"12"})]}),LT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("line",{x1:"3",x2:"21",y1:"9",y2:"9"}),l.jsx("line",{x1:"9",x2:"9",y1:"21",y2:"9"})]}),AN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),l.jsx("path",{d:"M3 3v5h5"})]}),NN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("polyline",{points:"16 3 21 3 21 8"}),l.jsx("line",{x1:"4",x2:"21",y1:"20",y2:"3"}),l.jsx("polyline",{points:"21 16 21 21 16 21"}),l.jsx("line",{x1:"15",x2:"21",y1:"15",y2:"21"}),l.jsx("line",{x1:"4",x2:"9",y1:"4",y2:"9"})]}),RN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{width:"13",height:"13",x:"9",y:"9",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Rf=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("circle",{cx:"12",cy:"12",r:"10"})}),Pf=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),PN=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"})}),Yp=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"m12 2 3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),MN=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),DN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M6 2v14a2 2 0 0 0 2 2h14"}),l.jsx("path",{d:"M18 22V8a2 2 0 0 0-2-2H2"})]}),LN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M3 7v6h6"}),l.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]}),jT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5"}),l.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),l.jsx("line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5"})]}),FT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),l.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]}),UT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M8 14.5c2.5-1 5.5-1 8 0"}),l.jsx("path",{d:"M6.5 11.5c3.5-1.5 7.5-1.5 11 0"}),l.jsx("path",{d:"M5 8.5c4.5-2 9.5-2 14 0"})]}),VT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),l.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),jN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),l.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})]}),FN=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})});var Hv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},UN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},BT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|u>>6,y=u&63;c||(y=64,o||(g=64)),r.push(n[d],n[m],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(OT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||m==null)throw new VN;const g=i<<2|a>>4;if(r.push(g),u!==64){const y=a<<4&240|u>>2;if(r.push(y),m!==64){const b=u<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ON=function(t){const e=OT(t);return BT.encodeByteArray(e,!0)},Id=function(t){return ON(t).replace(/\./g,"")},zT=function(t){try{return BT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=()=>BN().__FIREBASE_DEFAULTS__,GN=()=>{if(typeof process>"u"||typeof Hv>"u")return;const t=Hv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$N=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zT(t[1]);return e&&JSON.parse(e)},ph=()=>{try{return zN()||GN()||$N()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},GT=t=>{var e,n;return(n=(e=ph())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},HN=t=>{const e=GT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$T=()=>{var t;return(t=ph())===null||t===void 0?void 0:t.config},HT=t=>{var e;return(e=ph())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Id(JSON.stringify(n)),Id(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function JN(){var t;const e=(t=ph())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XN(){const t=bn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZN(){return!JN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WT(){try{return typeof indexedDB=="object"}catch{return!1}}function KT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function eR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="FirebaseError";class Br extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tR,Object.setPrototypeOf(this,Br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,co.prototype.create)}}class co{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?nR(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Br(s,a,r)}}function nR(t,e){return t.replace(rR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const rR=/\{\$([^}]+)}/g;function sR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(qv(i)&&qv(o)){if(!nc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function qv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function iR(t,e){const n=new oR(t,e);return n.subscribe.bind(n)}class oR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Mf),s.error===void 0&&(s.error=Mf),s.complete===void 0&&(s.complete=Mf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=1e3,cR=2,uR=4*60*60*1e3,dR=.5;function Wv(t,e=lR,n=cR){const r=e*Math.pow(n,t),s=Math.round(dR*r*(Math.random()-.5)*2);return Math.min(uR,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){return t&&t._delegate?t._delegate:t}class Vr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pR(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fR(t){return t===Mi?void 0:t}function pR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ye||(Ye={}));const gR={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},yR=Ye.INFO,vR={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},xR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=vR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mh{constructor(e){this.name=e,this._logLevel=yR,this._logHandler=xR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const wR=(t,e)=>e.some(n=>t instanceof n);let Kv,Jv;function _R(){return Kv||(Kv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bR(){return Jv||(Jv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JT=new WeakMap,Qp=new WeakMap,YT=new WeakMap,Df=new WeakMap,Vg=new WeakMap;function ER(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(oi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JT.set(n,t)}).catch(()=>{}),Vg.set(e,t),e}function TR(t){if(Qp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Qp.set(t,e)}let Xp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||YT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return oi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IR(t){Xp=t(Xp)}function SR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lf(this),e,...n);return YT.set(r,e.sort?e.sort():[e]),oi(r)}:bR().includes(t)?function(...e){return t.apply(Lf(this),e),oi(JT.get(this))}:function(...e){return oi(t.apply(Lf(this),e))}}function kR(t){return typeof t=="function"?SR(t):(t instanceof IDBTransaction&&TR(t),wR(t,_R())?new Proxy(t,Xp):t)}function oi(t){if(t instanceof IDBRequest)return ER(t);if(Df.has(t))return Df.get(t);const e=kR(t);return e!==t&&(Df.set(t,e),Vg.set(e,t)),e}const Lf=t=>Vg.get(t);function QT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=oi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(oi(o.result),c.oldVersion,c.newVersion,oi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const CR=["get","getKey","getAll","getAllKeys","count"],AR=["put","add","delete","clear"],jf=new Map;function Yv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jf.get(e))return jf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=AR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||CR.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return jf.set(e,i),i}IR(t=>({...t,get:(e,n,r)=>Yv(e,n)||t.get(e,n,r),has:(e,n)=>!!Yv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function RR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zp="@firebase/app",Qv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new mh("@firebase/app"),PR="@firebase/app-compat",MR="@firebase/analytics-compat",DR="@firebase/analytics",LR="@firebase/app-check-compat",jR="@firebase/app-check",FR="@firebase/auth",UR="@firebase/auth-compat",VR="@firebase/database",OR="@firebase/data-connect",BR="@firebase/database-compat",zR="@firebase/functions",GR="@firebase/functions-compat",$R="@firebase/installations",HR="@firebase/installations-compat",qR="@firebase/messaging",WR="@firebase/messaging-compat",KR="@firebase/performance",JR="@firebase/performance-compat",YR="@firebase/remote-config",QR="@firebase/remote-config-compat",XR="@firebase/storage",ZR="@firebase/storage-compat",eP="@firebase/firestore",tP="@firebase/vertexai-preview",nP="@firebase/firestore-compat",rP="firebase",sP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="[DEFAULT]",iP={[Zp]:"fire-core",[PR]:"fire-core-compat",[DR]:"fire-analytics",[MR]:"fire-analytics-compat",[jR]:"fire-app-check",[LR]:"fire-app-check-compat",[FR]:"fire-auth",[UR]:"fire-auth-compat",[VR]:"fire-rtdb",[OR]:"fire-data-connect",[BR]:"fire-rtdb-compat",[zR]:"fire-fn",[GR]:"fire-fn-compat",[$R]:"fire-iid",[HR]:"fire-iid-compat",[qR]:"fire-fcm",[WR]:"fire-fcm-compat",[KR]:"fire-perf",[JR]:"fire-perf-compat",[YR]:"fire-rc",[QR]:"fire-rc-compat",[XR]:"fire-gcs",[ZR]:"fire-gcs-compat",[eP]:"fire-fst",[nP]:"fire-fst-compat",[tP]:"fire-vertex","fire-js":"fire-js",[rP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=new Map,oP=new Map,tm=new Map;function Xv(t,e){try{t.container.addComponent(e)}catch(n){Ts.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ns(t){const e=t.name;if(tm.has(e))return Ts.debug(`There were multiple attempts to register component ${e}.`),!1;tm.set(e,t);for(const n of Sd.values())Xv(n,t);for(const n of oP.values())Xv(n,t);return!0}function uo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ai=new co("app","Firebase",aP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=sP;function XT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:em,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ai.create("bad-app-name",{appName:String(s)});if(n||(n=$T()),!n)throw ai.create("no-options");const i=Sd.get(s);if(i){if(nc(n,i.options)&&nc(r,i.config))return i;throw ai.create("duplicate-app",{appName:s})}const o=new mR(s);for(const c of tm.values())o.addComponent(c);const a=new lP(n,r,o);return Sd.set(s,a),a}function Og(t=em){const e=Sd.get(t);if(!e&&t===em&&$T())return XT();if(!e)throw ai.create("no-app",{appName:t});return e}function yr(t,e,n){var r;let s=(r=iP[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ts.warn(a.join(" "));return}ns(new Vr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="firebase-heartbeat-database",uP=1,rc="firebase-heartbeat-store";let Ff=null;function ZT(){return Ff||(Ff=QT(cP,uP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ai.create("idb-open",{originalErrorMessage:t.message})})),Ff}async function dP(t){try{const n=(await ZT()).transaction(rc),r=await n.objectStore(rc).get(e1(t));return await n.done,r}catch(e){if(e instanceof Br)Ts.warn(e.message);else{const n=ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ts.warn(n.message)}}}async function Zv(t,e){try{const r=(await ZT()).transaction(rc,"readwrite");await r.objectStore(rc).put(e,e1(t)),await r.done}catch(n){if(n instanceof Br)Ts.warn(n.message);else{const r=ai.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ts.warn(r.message)}}}function e1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=1024,fP=30*24*60*60*1e3;class pP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ex();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=fP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ts.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ex(),{heartbeatsToSend:r,unsentEntries:s}=mP(this._heartbeatsCache.heartbeats),i=Id(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ts.warn(n),""}}}function ex(){return new Date().toISOString().substring(0,10)}function mP(t,e=hP){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),tx(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),tx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WT()?KT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function tx(t){return Id(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){ns(new Vr("platform-logger",e=>new NR(e),"PRIVATE")),ns(new Vr("heartbeat",e=>new pP(e),"PRIVATE")),yr(Zp,Qv,t),yr(Zp,Qv,"esm2017"),yr("fire-js","")}yP("");var vP="firebase",xP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(vP,xP,"app");const t1="@firebase/installations",Bg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=1e4,r1=`w:${Bg}`,s1="FIS_v2",wP="https://firebaseinstallations.googleapis.com/v1",_P=60*60*1e3,bP="installations",EP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Qi=new co(bP,EP,TP);function i1(t){return t instanceof Br&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1({projectId:t}){return`${wP}/projects/${t}/installations`}function a1(t){return{token:t.token,requestStatus:2,expiresIn:SP(t.expiresIn),creationTime:Date.now()}}async function l1(t,e){const r=(await e.json()).error;return Qi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function c1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function IP(t,{refreshToken:e}){const n=c1(t);return n.append("Authorization",kP(e)),n}async function u1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function SP(t){return Number(t.replace("s","000"))}function kP(t){return`${s1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=o1(t),s=c1(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:s1,appId:t.appId,sdkVersion:r1},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await u1(()=>fetch(r,a));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:a1(u.authToken)}}else throw await l1("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=/^[cdef][\w-]{21}$/,nm="";function RP(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=PP(t);return NP.test(n)?n:nm}catch{return nm}}function PP(t){return AP(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=new Map;function f1(t,e){const n=gh(t);p1(n,e),MP(n,e)}function p1(t,e){const n=h1.get(t);if(n)for(const r of n)r(e)}function MP(t,e){const n=DP();n&&n.postMessage({key:t,fid:e}),LP()}let Ui=null;function DP(){return!Ui&&"BroadcastChannel"in self&&(Ui=new BroadcastChannel("[Firebase] FID Change"),Ui.onmessage=t=>{p1(t.data.key,t.data.fid)}),Ui}function LP(){h1.size===0&&Ui&&(Ui.close(),Ui=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="firebase-installations-database",FP=1,Xi="firebase-installations-store";let Uf=null;function zg(){return Uf||(Uf=QT(jP,FP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Xi)}}})),Uf}async function kd(t,e){const n=gh(t),s=(await zg()).transaction(Xi,"readwrite"),i=s.objectStore(Xi),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&f1(t,e.fid),e}async function m1(t){const e=gh(t),r=(await zg()).transaction(Xi,"readwrite");await r.objectStore(Xi).delete(e),await r.done}async function yh(t,e){const n=gh(t),s=(await zg()).transaction(Xi,"readwrite"),i=s.objectStore(Xi),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&f1(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gg(t){let e;const n=await yh(t.appConfig,r=>{const s=UP(r),i=VP(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===nm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function UP(t){const e=t||{fid:RP(),registrationStatus:0};return g1(e)}function VP(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Qi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=OP(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:BP(t)}:{installationEntry:e}}async function OP(t,e){try{const n=await CP(t,e);return kd(t.appConfig,n)}catch(n){throw i1(n)&&n.customData.serverCode===409?await m1(t.appConfig):await kd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function BP(t){let e=await nx(t.appConfig);for(;e.registrationStatus===1;)await d1(100),e=await nx(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Gg(t);return r||n}return e}function nx(t){return yh(t,e=>{if(!e)throw Qi.create("installation-not-found");return g1(e)})}function g1(t){return zP(t)?{fid:t.fid,registrationStatus:0}:t}function zP(t){return t.registrationStatus===1&&t.registrationTime+n1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP({appConfig:t,heartbeatServiceProvider:e},n){const r=$P(t,n),s=IP(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:r1,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await u1(()=>fetch(r,a));if(c.ok){const u=await c.json();return a1(u)}else throw await l1("Generate Auth Token",c)}function $P(t,{fid:e}){return`${o1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $g(t,e=!1){let n;const r=await yh(t.appConfig,i=>{if(!y1(i))throw Qi.create("not-registered");const o=i.authToken;if(!e&&WP(o))return i;if(o.requestStatus===1)return n=HP(t,e),i;{if(!navigator.onLine)throw Qi.create("app-offline");const a=JP(i);return n=qP(t,a),a}});return n?await n:r.authToken}async function HP(t,e){let n=await rx(t.appConfig);for(;n.authToken.requestStatus===1;)await d1(100),n=await rx(t.appConfig);const r=n.authToken;return r.requestStatus===0?$g(t,e):r}function rx(t){return yh(t,e=>{if(!y1(e))throw Qi.create("not-registered");const n=e.authToken;return YP(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function qP(t,e){try{const n=await GP(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await kd(t.appConfig,r),n}catch(n){if(i1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await m1(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await kd(t.appConfig,r)}throw n}}function y1(t){return t!==void 0&&t.registrationStatus===2}function WP(t){return t.requestStatus===2&&!KP(t)}function KP(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+_P}function JP(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function YP(t){return t.requestStatus===1&&t.requestTime+n1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(t){const e=t,{installationEntry:n,registrationPromise:r}=await Gg(e);return r?r.catch(console.error):$g(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(t,e=!1){const n=t;return await ZP(n),(await $g(n,e)).token}async function ZP(t){const{registrationPromise:e}=await Gg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t){if(!t||!t.options)throw Vf("App Configuration");if(!t.name)throw Vf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Vf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Vf(t){return Qi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="installations",t4="installations-internal",n4=t=>{const e=t.getProvider("app").getImmediate(),n=e4(e),r=uo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},r4=t=>{const e=t.getProvider("app").getImmediate(),n=uo(e,v1).getImmediate();return{getId:()=>QP(n),getToken:s=>XP(n,s)}};function s4(){ns(new Vr(v1,n4,"PUBLIC")),ns(new Vr(t4,r4,"PRIVATE"))}s4();yr(t1,Bg);yr(t1,Bg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="analytics",i4="firebase_id",o4="origin",a4=60*1e3,l4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Hg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new mh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},er=new co("analytics","Analytics",c4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(t){if(!t.startsWith(Hg)){const e=er.create("invalid-gtag-resource",{gtagURL:t});return Hn.warn(e.message),""}return t}function x1(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function d4(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function h4(t,e){const n=d4("firebase-js-sdk-policy",{createScriptURL:u4}),r=document.createElement("script"),s=`${Hg}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function f4(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function p4(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await x1(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(a){Hn.error(a)}t("config",s,i)}async function m4(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await x1(n);for(const c of o){const u=a.find(m=>m.measurementId===c),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Hn.error(i)}}function g4(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,c]=o;await m4(t,e,n,a,c)}else if(i==="config"){const[a,c]=o;await p4(t,e,n,r,a,c)}else if(i==="consent"){const[a,c]=o;t("consent",a,c)}else if(i==="get"){const[a,c,u]=o;t("get",a,c,u)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Hn.error(a)}}return s}function y4(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=g4(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function v4(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Hg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=30,w4=1e3;class _4{constructor(e={},n=w4){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const w1=new _4;function b4(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function E4(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:b4(r)},i=l4.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function T4(t,e=w1,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw er.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw er.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new k4;return setTimeout(async()=>{a.abort()},a4),_1({appId:r,apiKey:s,measurementId:i},o,a,e)}async function _1(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=w1){var i;const{appId:o,measurementId:a}=t;try{await I4(r,e)}catch(c){if(a)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await E4(t);return s.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!S4(u)){if(s.deleteThrottleMetadata(o),a)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw c}const d=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?Wv(n,s.intervalMillis,x4):Wv(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,m),Hn.debug(`Calling attemptFetch again in ${d} millis`),_1(t,m,r,s)}}function I4(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(er.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function S4(t){if(!(t instanceof Br)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class k4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function C4(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(){if(WT())try{await KT()}catch(t){return Hn.warn(er.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Hn.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function N4(t,e,n,r,s,i,o){var a;const c=T4(t);c.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Hn.error(y)),e.push(c);const u=A4().then(y=>{if(y)return r.getId()}),[d,m]=await Promise.all([c,u]);v4(i)||h4(i,d.measurementId),s("js",new Date);const g=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return g[o4]="firebase",g.update=!0,m!=null&&(g[i4]=m),s("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e){this.app=e}_delete(){return delete kl[this.app.options.appId],Promise.resolve()}}let kl={},sx=[];const ix={};let Of="dataLayer",P4="gtag",ox,b1,ax=!1;function M4(){const t=[];if(qT()&&t.push("This is a browser extension environment."),eR()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=er.create("invalid-analytics-context",{errorInfo:e});Hn.warn(n.message)}}function D4(t,e,n){M4();const r=t.options.appId;if(!r)throw er.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw er.create("no-api-key");if(kl[r]!=null)throw er.create("already-exists",{id:r});if(!ax){f4(Of);const{wrappedGtag:i,gtagCore:o}=y4(kl,sx,ix,Of,P4);b1=i,ox=o,ax=!0}return kl[r]=N4(t,sx,ix,e,ox,Of,n),new R4(t)}function L4(t=Og()){t=Bt(t);const e=uo(t,Cd);return e.isInitialized()?e.getImmediate():j4(t)}function j4(t,e={}){const n=uo(t,Cd);if(n.isInitialized()){const s=n.getImmediate();if(nc(e,n.getOptions()))return s;throw er.create("already-initialized")}return n.initialize({options:e})}function F4(t,e,n,r){t=Bt(t),C4(b1,kl[t.app.options.appId],e,n,r).catch(s=>Hn.error(s))}const lx="@firebase/analytics",cx="0.10.8";function U4(){ns(new Vr(Cd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return D4(r,s,n)},"PUBLIC")),ns(new Vr("analytics-internal",t,"PRIVATE")),yr(lx,cx),yr(lx,cx,"esm2017");function t(e){try{const n=e.getProvider(Cd).getImmediate();return{logEvent:(r,s,i)=>F4(n,r,s,i)}}catch(n){throw er.create("interop-component-reg-failed",{reason:n})}}}U4();var ux=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gi,E1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function A(){}A.prototype=I.prototype,k.D=I.prototype,k.prototype=new A,k.prototype.constructor=k,k.C=function(N,U,R){for(var D=Array(arguments.length-2),M=2;M<arguments.length;M++)D[M-2]=arguments[M];return I.prototype[U].apply(N,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,I,A){A||(A=0);var N=Array(16);if(typeof I=="string")for(var U=0;16>U;++U)N[U]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(U=0;16>U;++U)N[U]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=k.g[0],A=k.g[1],U=k.g[2];var R=k.g[3],D=I+(R^A&(U^R))+N[0]+3614090360&4294967295;I=A+(D<<7&4294967295|D>>>25),D=R+(U^I&(A^U))+N[1]+3905402710&4294967295,R=I+(D<<12&4294967295|D>>>20),D=U+(A^R&(I^A))+N[2]+606105819&4294967295,U=R+(D<<17&4294967295|D>>>15),D=A+(I^U&(R^I))+N[3]+3250441966&4294967295,A=U+(D<<22&4294967295|D>>>10),D=I+(R^A&(U^R))+N[4]+4118548399&4294967295,I=A+(D<<7&4294967295|D>>>25),D=R+(U^I&(A^U))+N[5]+1200080426&4294967295,R=I+(D<<12&4294967295|D>>>20),D=U+(A^R&(I^A))+N[6]+2821735955&4294967295,U=R+(D<<17&4294967295|D>>>15),D=A+(I^U&(R^I))+N[7]+4249261313&4294967295,A=U+(D<<22&4294967295|D>>>10),D=I+(R^A&(U^R))+N[8]+1770035416&4294967295,I=A+(D<<7&4294967295|D>>>25),D=R+(U^I&(A^U))+N[9]+2336552879&4294967295,R=I+(D<<12&4294967295|D>>>20),D=U+(A^R&(I^A))+N[10]+4294925233&4294967295,U=R+(D<<17&4294967295|D>>>15),D=A+(I^U&(R^I))+N[11]+2304563134&4294967295,A=U+(D<<22&4294967295|D>>>10),D=I+(R^A&(U^R))+N[12]+1804603682&4294967295,I=A+(D<<7&4294967295|D>>>25),D=R+(U^I&(A^U))+N[13]+4254626195&4294967295,R=I+(D<<12&4294967295|D>>>20),D=U+(A^R&(I^A))+N[14]+2792965006&4294967295,U=R+(D<<17&4294967295|D>>>15),D=A+(I^U&(R^I))+N[15]+1236535329&4294967295,A=U+(D<<22&4294967295|D>>>10),D=I+(U^R&(A^U))+N[1]+4129170786&4294967295,I=A+(D<<5&4294967295|D>>>27),D=R+(A^U&(I^A))+N[6]+3225465664&4294967295,R=I+(D<<9&4294967295|D>>>23),D=U+(I^A&(R^I))+N[11]+643717713&4294967295,U=R+(D<<14&4294967295|D>>>18),D=A+(R^I&(U^R))+N[0]+3921069994&4294967295,A=U+(D<<20&4294967295|D>>>12),D=I+(U^R&(A^U))+N[5]+3593408605&4294967295,I=A+(D<<5&4294967295|D>>>27),D=R+(A^U&(I^A))+N[10]+38016083&4294967295,R=I+(D<<9&4294967295|D>>>23),D=U+(I^A&(R^I))+N[15]+3634488961&4294967295,U=R+(D<<14&4294967295|D>>>18),D=A+(R^I&(U^R))+N[4]+3889429448&4294967295,A=U+(D<<20&4294967295|D>>>12),D=I+(U^R&(A^U))+N[9]+568446438&4294967295,I=A+(D<<5&4294967295|D>>>27),D=R+(A^U&(I^A))+N[14]+3275163606&4294967295,R=I+(D<<9&4294967295|D>>>23),D=U+(I^A&(R^I))+N[3]+4107603335&4294967295,U=R+(D<<14&4294967295|D>>>18),D=A+(R^I&(U^R))+N[8]+1163531501&4294967295,A=U+(D<<20&4294967295|D>>>12),D=I+(U^R&(A^U))+N[13]+2850285829&4294967295,I=A+(D<<5&4294967295|D>>>27),D=R+(A^U&(I^A))+N[2]+4243563512&4294967295,R=I+(D<<9&4294967295|D>>>23),D=U+(I^A&(R^I))+N[7]+1735328473&4294967295,U=R+(D<<14&4294967295|D>>>18),D=A+(R^I&(U^R))+N[12]+2368359562&4294967295,A=U+(D<<20&4294967295|D>>>12),D=I+(A^U^R)+N[5]+4294588738&4294967295,I=A+(D<<4&4294967295|D>>>28),D=R+(I^A^U)+N[8]+2272392833&4294967295,R=I+(D<<11&4294967295|D>>>21),D=U+(R^I^A)+N[11]+1839030562&4294967295,U=R+(D<<16&4294967295|D>>>16),D=A+(U^R^I)+N[14]+4259657740&4294967295,A=U+(D<<23&4294967295|D>>>9),D=I+(A^U^R)+N[1]+2763975236&4294967295,I=A+(D<<4&4294967295|D>>>28),D=R+(I^A^U)+N[4]+1272893353&4294967295,R=I+(D<<11&4294967295|D>>>21),D=U+(R^I^A)+N[7]+4139469664&4294967295,U=R+(D<<16&4294967295|D>>>16),D=A+(U^R^I)+N[10]+3200236656&4294967295,A=U+(D<<23&4294967295|D>>>9),D=I+(A^U^R)+N[13]+681279174&4294967295,I=A+(D<<4&4294967295|D>>>28),D=R+(I^A^U)+N[0]+3936430074&4294967295,R=I+(D<<11&4294967295|D>>>21),D=U+(R^I^A)+N[3]+3572445317&4294967295,U=R+(D<<16&4294967295|D>>>16),D=A+(U^R^I)+N[6]+76029189&4294967295,A=U+(D<<23&4294967295|D>>>9),D=I+(A^U^R)+N[9]+3654602809&4294967295,I=A+(D<<4&4294967295|D>>>28),D=R+(I^A^U)+N[12]+3873151461&4294967295,R=I+(D<<11&4294967295|D>>>21),D=U+(R^I^A)+N[15]+530742520&4294967295,U=R+(D<<16&4294967295|D>>>16),D=A+(U^R^I)+N[2]+3299628645&4294967295,A=U+(D<<23&4294967295|D>>>9),D=I+(U^(A|~R))+N[0]+4096336452&4294967295,I=A+(D<<6&4294967295|D>>>26),D=R+(A^(I|~U))+N[7]+1126891415&4294967295,R=I+(D<<10&4294967295|D>>>22),D=U+(I^(R|~A))+N[14]+2878612391&4294967295,U=R+(D<<15&4294967295|D>>>17),D=A+(R^(U|~I))+N[5]+4237533241&4294967295,A=U+(D<<21&4294967295|D>>>11),D=I+(U^(A|~R))+N[12]+1700485571&4294967295,I=A+(D<<6&4294967295|D>>>26),D=R+(A^(I|~U))+N[3]+2399980690&4294967295,R=I+(D<<10&4294967295|D>>>22),D=U+(I^(R|~A))+N[10]+4293915773&4294967295,U=R+(D<<15&4294967295|D>>>17),D=A+(R^(U|~I))+N[1]+2240044497&4294967295,A=U+(D<<21&4294967295|D>>>11),D=I+(U^(A|~R))+N[8]+1873313359&4294967295,I=A+(D<<6&4294967295|D>>>26),D=R+(A^(I|~U))+N[15]+4264355552&4294967295,R=I+(D<<10&4294967295|D>>>22),D=U+(I^(R|~A))+N[6]+2734768916&4294967295,U=R+(D<<15&4294967295|D>>>17),D=A+(R^(U|~I))+N[13]+1309151649&4294967295,A=U+(D<<21&4294967295|D>>>11),D=I+(U^(A|~R))+N[4]+4149444226&4294967295,I=A+(D<<6&4294967295|D>>>26),D=R+(A^(I|~U))+N[11]+3174756917&4294967295,R=I+(D<<10&4294967295|D>>>22),D=U+(I^(R|~A))+N[2]+718787259&4294967295,U=R+(D<<15&4294967295|D>>>17),D=A+(R^(U|~I))+N[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(U+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+U&4294967295,k.g[3]=k.g[3]+R&4294967295}r.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var A=I-this.blockSize,N=this.B,U=this.h,R=0;R<I;){if(U==0)for(;R<=A;)s(this,k,R),R+=this.blockSize;if(typeof k=="string"){for(;R<I;)if(N[U++]=k.charCodeAt(R++),U==this.blockSize){s(this,N),U=0;break}}else for(;R<I;)if(N[U++]=k[R++],U==this.blockSize){s(this,N),U=0;break}}this.h=U,this.o+=I},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var A=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=A&255,A/=256;for(this.u(k),k=Array(16),I=A=0;4>I;++I)for(var N=0;32>N;N+=8)k[A++]=this.g[I]>>>N&255;return k};function i(k,I){var A=a;return Object.prototype.hasOwnProperty.call(A,k)?A[k]:A[k]=I(k)}function o(k,I){this.h=I;for(var A=[],N=!0,U=k.length-1;0<=U;U--){var R=k[U]|0;N&&R==I||(A[U]=R,N=!1)}this.g=A}var a={};function c(k){return-128<=k&&128>k?i(k,function(I){return new o([I|0],0>I?-1:0)}):new o([k|0],0>k?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return m;if(0>k)return w(u(-k));for(var I=[],A=1,N=0;k>=A;N++)I[N]=k/A|0,A*=4294967296;return new o(I,0)}function d(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return w(d(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(I,8)),N=m,U=0;U<k.length;U+=8){var R=Math.min(8,k.length-U),D=parseInt(k.substring(U,U+R),I);8>R?(R=u(Math.pow(I,R)),N=N.j(R).add(u(D))):(N=N.j(A),N=N.add(u(D)))}return N}var m=c(0),g=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-w(this).m();for(var k=0,I=1,A=0;A<this.g.length;A++){var N=this.i(A);k+=(0<=N?N:4294967296+N)*I,I*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(b(this))return"0";if(x(this))return"-"+w(this).toString(k);for(var I=u(Math.pow(k,6)),A=this,N="";;){var U=P(A,I).g;A=v(A,U.j(I));var R=((0<A.g.length?A.g[0]:A.h)>>>0).toString(k);if(A=U,b(A))return R+N;for(;6>R.length;)R="0"+R;N=R+N}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function b(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function x(k){return k.h==-1}t.l=function(k){return k=v(this,k),x(k)?-1:b(k)?0:1};function w(k){for(var I=k.g.length,A=[],N=0;N<I;N++)A[N]=~k.g[N];return new o(A,~k.h).add(g)}t.abs=function(){return x(this)?w(this):this},t.add=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],N=0,U=0;U<=I;U++){var R=N+(this.i(U)&65535)+(k.i(U)&65535),D=(R>>>16)+(this.i(U)>>>16)+(k.i(U)>>>16);N=D>>>16,R&=65535,D&=65535,A[U]=D<<16|R}return new o(A,A[A.length-1]&-2147483648?-1:0)};function v(k,I){return k.add(w(I))}t.j=function(k){if(b(this)||b(k))return m;if(x(this))return x(k)?w(this).j(w(k)):w(w(this).j(k));if(x(k))return w(this.j(w(k)));if(0>this.l(y)&&0>k.l(y))return u(this.m()*k.m());for(var I=this.g.length+k.g.length,A=[],N=0;N<2*I;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(var U=0;U<k.g.length;U++){var R=this.i(N)>>>16,D=this.i(N)&65535,M=k.i(U)>>>16,H=k.i(U)&65535;A[2*N+2*U]+=D*H,_(A,2*N+2*U),A[2*N+2*U+1]+=R*H,_(A,2*N+2*U+1),A[2*N+2*U+1]+=D*M,_(A,2*N+2*U+1),A[2*N+2*U+2]+=R*M,_(A,2*N+2*U+2)}for(N=0;N<I;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=I;N<2*I;N++)A[N]=0;return new o(A,0)};function _(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function T(k,I){this.g=k,this.h=I}function P(k,I){if(b(I))throw Error("division by zero");if(b(k))return new T(m,m);if(x(k))return I=P(w(k),I),new T(w(I.g),w(I.h));if(x(I))return I=P(k,w(I)),new T(w(I.g),I.h);if(30<k.g.length){if(x(k)||x(I))throw Error("slowDivide_ only works with positive integers.");for(var A=g,N=I;0>=N.l(k);)A=L(A),N=L(N);var U=B(A,1),R=B(N,1);for(N=B(N,2),A=B(A,2);!b(N);){var D=R.add(N);0>=D.l(k)&&(U=U.add(A),R=D),N=B(N,1),A=B(A,1)}return I=v(k,U.j(I)),new T(U,I)}for(U=m;0<=k.l(I);){for(A=Math.max(1,Math.floor(k.m()/I.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),R=u(A),D=R.j(I);x(D)||0<D.l(k);)A-=N,R=u(A),D=R.j(I);b(R)&&(R=g),U=U.add(R),k=v(k,D)}return new T(U,k)}t.A=function(k){return P(this,k).h},t.and=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],N=0;N<I;N++)A[N]=this.i(N)&k.i(N);return new o(A,this.h&k.h)},t.or=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],N=0;N<I;N++)A[N]=this.i(N)|k.i(N);return new o(A,this.h|k.h)},t.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),A=[],N=0;N<I;N++)A[N]=this.i(N)^k.i(N);return new o(A,this.h^k.h)};function L(k){for(var I=k.g.length+1,A=[],N=0;N<I;N++)A[N]=k.i(N)<<1|k.i(N-1)>>>31;return new o(A,k.h)}function B(k,I){var A=I>>5;I%=32;for(var N=k.g.length-A,U=[],R=0;R<N;R++)U[R]=0<I?k.i(R+A)>>>I|k.i(R+A+1)<<32-I:k.i(R+A);return new o(U,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,E1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Gi=o}).apply(typeof ux<"u"?ux:typeof self<"u"?self:typeof window<"u"?window:{});var vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T1,fl,I1,zu,rm,S1,k1,C1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,E,S){return f==Array.prototype||f==Object.prototype||(f[E]=S.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof vu=="object"&&vu];for(var E=0;E<f.length;++E){var S=f[E];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(f,E){if(E)e:{var S=r;f=f.split(".");for(var O=0;O<f.length-1;O++){var J=f[O];if(!(J in S))break e;S=S[J]}f=f[f.length-1],O=S[f],E=E(O),E!=O&&E!=null&&e(S,f,{configurable:!0,writable:!0,value:E})}}function i(f,E){f instanceof String&&(f+="");var S=0,O=!1,J={next:function(){if(!O&&S<f.length){var te=S++;return{value:E(te,f[te]),done:!1}}return O=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}s("Array.prototype.values",function(f){return f||function(){return i(this,function(E,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(f){var E=typeof f;return E=E!="object"?E:f?Array.isArray(f)?"array":E:"null",E=="array"||E=="object"&&typeof f.length=="number"}function u(f){var E=typeof f;return E=="object"&&f!=null||E=="function"}function d(f,E,S){return f.call.apply(f.bind,arguments)}function m(f,E,S){if(!f)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,O),f.apply(E,J)}}return function(){return f.apply(E,arguments)}}function g(f,E,S){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,g.apply(null,arguments)}function y(f,E){var S=Array.prototype.slice.call(arguments,1);return function(){var O=S.slice();return O.push.apply(O,arguments),f.apply(this,O)}}function b(f,E){function S(){}S.prototype=E.prototype,f.aa=E.prototype,f.prototype=new S,f.prototype.constructor=f,f.Qb=function(O,J,te){for(var xe=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)xe[ft-2]=arguments[ft];return E.prototype[J].apply(O,xe)}}function x(f){const E=f.length;if(0<E){const S=Array(E);for(let O=0;O<E;O++)S[O]=f[O];return S}return[]}function w(f,E){for(let S=1;S<arguments.length;S++){const O=arguments[S];if(c(O)){const J=f.length||0,te=O.length||0;f.length=J+te;for(let xe=0;xe<te;xe++)f[J+xe]=O[xe]}else f.push(O)}}class v{constructor(E,S){this.i=E,this.j=S,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function _(f){return/^[\s\xa0]*$/.test(f)}function T(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function P(f){return P[" "](f),f}P[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function B(f,E,S){for(const O in f)E.call(S,f[O],O,f)}function k(f,E){for(const S in f)E.call(void 0,f[S],S,f)}function I(f){const E={};for(const S in f)E[S]=f[S];return E}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(f,E){let S,O;for(let J=1;J<arguments.length;J++){O=arguments[J];for(S in O)f[S]=O[S];for(let te=0;te<A.length;te++)S=A[te],Object.prototype.hasOwnProperty.call(O,S)&&(f[S]=O[S])}}function U(f){var E=1;f=f.split(":");const S=[];for(;0<E&&f.length;)S.push(f.shift()),E--;return f.length&&S.push(f.join(":")),S}function R(f){a.setTimeout(()=>{throw f},0)}function D(){var f=Y;let E=null;return f.g&&(E=f.g,f.g=f.g.next,f.g||(f.h=null),E.next=null),E}class M{constructor(){this.h=this.g=null}add(E,S){const O=H.get();O.set(E,S),this.h?this.h.next=O:this.g=O,this.h=O}}var H=new v(()=>new ye,f=>f.reset());class ye{constructor(){this.next=this.g=this.h=null}set(E,S){this.h=E,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ne=!1,Y=new M,ue=()=>{const f=a.Promise.resolve(void 0);re=()=>{f.then(q)}};var q=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(S){R(S)}var E=H;E.j(f),100>E.h&&(E.h++,f.next=E.g,E.g=f)}ne=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(f,E){this.type=f,this.g=this.target=E,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,E=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const S=()=>{};a.addEventListener("test",S,E),a.removeEventListener("test",S,E)}catch{}return f}();function ae(f,E){if(X.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var S=this.type=f.type,O=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=E,E=f.relatedTarget){if(L){e:{try{P(E.nodeName);var J=!0;break e}catch{}J=!1}J||(E=null)}}else S=="mouseover"?E=f.fromElement:S=="mouseout"&&(E=f.toElement);this.relatedTarget=E,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Ae[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ae.aa.h.call(this)}}b(ae,X);var Ae={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),Se=0;function ke(f,E,S,O,J){this.listener=f,this.proxy=null,this.src=E,this.type=S,this.capture=!!O,this.ha=J,this.key=++Se,this.da=this.fa=!1}function qe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Be(f){this.src=f,this.g={},this.h=0}Be.prototype.add=function(f,E,S,O,J){var te=f.toString();f=this.g[te],f||(f=this.g[te]=[],this.h++);var xe=it(f,E,O,J);return-1<xe?(E=f[xe],S||(E.fa=!1)):(E=new ke(E,this.src,te,!!O,J),E.fa=S,f.push(E)),E};function pt(f,E){var S=E.type;if(S in f.g){var O=f.g[S],J=Array.prototype.indexOf.call(O,E,void 0),te;(te=0<=J)&&Array.prototype.splice.call(O,J,1),te&&(qe(E),f.g[S].length==0&&(delete f.g[S],f.h--))}}function it(f,E,S,O){for(var J=0;J<f.length;++J){var te=f[J];if(!te.da&&te.listener==E&&te.capture==!!S&&te.ha==O)return J}return-1}var C="closure_lm_"+(1e6*Math.random()|0),ie={};function Q(f,E,S,O,J){if(Array.isArray(E)){for(var te=0;te<E.length;te++)Q(f,E[te],S,O,J);return null}return S=me(S),f&&f[we]?f.K(E,S,u(O)?!!O.capture:!1,J):F(f,E,S,!1,O,J)}function F(f,E,S,O,J,te){if(!E)throw Error("Invalid event type");var xe=u(J)?!!J.capture:!!J,ft=he(f);if(ft||(f[C]=ft=new Be(f)),S=ft.add(E,S,O,xe,te),S.proxy)return S;if(O=V(),S.proxy=O,O.src=f,O.listener=S,f.addEventListener)le||(J=xe),J===void 0&&(J=!1),f.addEventListener(E.toString(),O,J);else if(f.attachEvent)f.attachEvent(oe(E.toString()),O);else if(f.addListener&&f.removeListener)f.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return S}function V(){function f(S){return E.call(f.src,f.listener,S)}const E=K;return f}function G(f,E,S,O,J){if(Array.isArray(E))for(var te=0;te<E.length;te++)G(f,E[te],S,O,J);else O=u(O)?!!O.capture:!!O,S=me(S),f&&f[we]?(f=f.i,E=String(E).toString(),E in f.g&&(te=f.g[E],S=it(te,S,O,J),-1<S&&(qe(te[S]),Array.prototype.splice.call(te,S,1),te.length==0&&(delete f.g[E],f.h--)))):f&&(f=he(f))&&(E=f.g[E.toString()],f=-1,E&&(f=it(E,S,O,J)),(S=-1<f?E[f]:null)&&Z(S))}function Z(f){if(typeof f!="number"&&f&&!f.da){var E=f.src;if(E&&E[we])pt(E.i,f);else{var S=f.type,O=f.proxy;E.removeEventListener?E.removeEventListener(S,O,f.capture):E.detachEvent?E.detachEvent(oe(S),O):E.addListener&&E.removeListener&&E.removeListener(O),(S=he(E))?(pt(S,f),S.h==0&&(S.src=null,E[C]=null)):qe(f)}}}function oe(f){return f in ie?ie[f]:ie[f]="on"+f}function K(f,E){if(f.da)f=!0;else{E=new ae(E,this);var S=f.listener,O=f.ha||f.src;f.fa&&Z(f),f=S.call(O,E)}return f}function he(f){return f=f[C],f instanceof Be?f:null}var ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(f){return typeof f=="function"?f:(f[ve]||(f[ve]=function(E){return f.handleEvent(E)}),f[ve])}function _e(){z.call(this),this.i=new Be(this),this.M=this,this.F=null}b(_e,z),_e.prototype[we]=!0,_e.prototype.removeEventListener=function(f,E,S,O){G(this,f,E,S,O)};function Ne(f,E){var S,O=f.F;if(O)for(S=[];O;O=O.F)S.push(O);if(f=f.M,O=E.type||E,typeof E=="string")E=new X(E,f);else if(E instanceof X)E.target=E.target||f;else{var J=E;E=new X(O,f),N(E,J)}if(J=!0,S)for(var te=S.length-1;0<=te;te--){var xe=E.g=S[te];J=Le(xe,O,!0,E)&&J}if(xe=E.g=f,J=Le(xe,O,!0,E)&&J,J=Le(xe,O,!1,E)&&J,S)for(te=0;te<S.length;te++)xe=E.g=S[te],J=Le(xe,O,!1,E)&&J}_e.prototype.N=function(){if(_e.aa.N.call(this),this.i){var f=this.i,E;for(E in f.g){for(var S=f.g[E],O=0;O<S.length;O++)qe(S[O]);delete f.g[E],f.h--}}this.F=null},_e.prototype.K=function(f,E,S,O){return this.i.add(String(f),E,!1,S,O)},_e.prototype.L=function(f,E,S,O){return this.i.add(String(f),E,!0,S,O)};function Le(f,E,S,O){if(E=f.i.g[String(E)],!E)return!0;E=E.concat();for(var J=!0,te=0;te<E.length;++te){var xe=E[te];if(xe&&!xe.da&&xe.capture==S){var ft=xe.listener,Zt=xe.ha||xe.src;xe.fa&&pt(f.i,xe),J=ft.call(Zt,O)!==!1&&J}}return J&&!O.defaultPrevented}function kt(f,E,S){if(typeof f=="function")S&&(f=g(f,S));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:a.setTimeout(f,E||0)}function En(f){f.g=kt(()=>{f.g=null,f.i&&(f.i=!1,En(f))},f.l);const E=f.h;f.h=null,f.m.apply(null,E)}class zt extends z{constructor(E,S){super(),this.m=E,this.l=S,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:En(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(f){z.call(this),this.h=f,this.g={}}b(se,z);var de=[];function De(f){B(f.g,function(E,S){this.g.hasOwnProperty(S)&&Z(E)},f),f.g={}}se.prototype.N=function(){se.aa.N.call(this),De(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var We=a.JSON.stringify,et=a.JSON.parse,Lt=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function yt(){}yt.prototype.h=null;function Wt(f){return f.h||(f.h=f.i())}function ln(){}var jt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dn(){X.call(this,"d")}b(Dn,X);function Ln(){X.call(this,"c")}b(Ln,X);var ar={},at=null;function Gr(){return at=at||new _e}ar.La="serverreachability";function go(f){X.call(this,ar.La,f)}b(go,X);function Er(f){const E=Gr();Ne(E,new go(E))}ar.STAT_EVENT="statevent";function bi(f,E){X.call(this,ar.STAT_EVENT,f),this.stat=E}b(bi,X);function Ct(f){const E=Gr();Ne(E,new bi(E,f))}ar.Ma="timingevent";function Ei(f,E){X.call(this,ar.Ma,f),this.size=E}b(Ei,X);function lr(f,E){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},E)}function Qe(){this.g=!0}Qe.prototype.xa=function(){this.g=!1};function yo(f,E,S,O,J,te){f.info(function(){if(f.g)if(te)for(var xe="",ft=te.split("&"),Zt=0;Zt<ft.length;Zt++){var nt=ft[Zt].split("=");if(1<nt.length){var dn=nt[0];nt=nt[1];var hn=dn.split("_");xe=2<=hn.length&&hn[1]=="type"?xe+(dn+"="+nt+"&"):xe+(dn+"=redacted&")}}else xe=null;else xe=te;return"XMLHTTP REQ ("+O+") [attempt "+J+"]: "+E+`
`+S+`
`+xe})}function Ti(f,E,S,O,J,te,xe){f.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+J+"]: "+E+`
`+S+`
`+te+" "+xe})}function Tr(f,E,S,O){f.info(function(){return"XMLHTTP TEXT ("+E+"): "+xo(f,S)+(O?" "+O:"")})}function vo(f,E){f.info(function(){return"TIMEOUT: "+E})}Qe.prototype.info=function(){};function xo(f,E){if(!f.g)return E;if(!E)return null;try{var S=JSON.parse(E);if(S){for(f=0;f<S.length;f++)if(Array.isArray(S[f])){var O=S[f];if(!(2>O.length)){var J=O[1];if(Array.isArray(J)&&!(1>J.length)){var te=J[0];if(te!="noop"&&te!="stop"&&te!="close")for(var xe=1;xe<J.length;xe++)J[xe]=""}}}}return We(S)}catch{return E}}var is={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ii={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$;function ee(){}b(ee,yt),ee.prototype.g=function(){return new XMLHttpRequest},ee.prototype.i=function(){return{}},$=new ee;function pe(f,E,S,O){this.j=f,this.i=E,this.l=S,this.R=O||1,this.U=new se(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}var He={},ct={};function tt(f,E,S){f.L=1,f.v=_o(kr(E)),f.m=S,f.P=!0,qn(f,null)}function qn(f,E){f.F=Date.now(),Ir(f),f.A=kr(f.v);var S=f.A,O=f.R;Array.isArray(O)||(O=[String(O)]),Ls(S.i,"t",O),f.C=0,S=f.j.J,f.h=new Pe,f.g=wy(f.j,S?E:null,!f.m),0<f.O&&(f.M=new zt(g(f.Y,f,f.g),f.O)),E=f.U,S=f.g,O=f.ca;var J="readystatechange";Array.isArray(J)||(J&&(de[0]=J.toString()),J=de);for(var te=0;te<J.length;te++){var xe=Q(S,J[te],O||E.handleEvent,!1,E.h||E);if(!xe)break;E.g[xe.key]=xe}E=f.H?I(f.H):{},f.m?(f.u||(f.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,E)):(f.u="GET",f.g.ea(f.A,f.u,null,E)),Er(),yo(f.i,f.u,f.A,f.l,f.R,f.m)}pe.prototype.ca=function(f){f=f.target;const E=this.M;E&&os(f)==3?E.j():this.Y(f)},pe.prototype.Y=function(f){try{if(f==this.g)e:{const hn=os(this.g);var E=this.g.Ba();const Eo=this.g.Z();if(!(3>hn)&&(hn!=3||this.g&&(this.h.h||this.g.oa()||cy(this.g)))){this.J||hn!=4||E==7||(E==8||0>=Eo?Er(3):Er(2)),un(this);var S=this.g.Z();this.X=S;t:if(cn(this)){var O=cy(this.g);f="";var J=O.length,te=os(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tn(this),cr(this);var xe="";break t}this.h.i=new a.TextDecoder}for(E=0;E<J;E++)this.h.h=!0,f+=this.h.i.decode(O[E],{stream:!(te&&E==J-1)});O.length=0,this.h.g+=f,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=S==200,Ti(this.i,this.u,this.A,this.l,this.R,hn,S),this.o){if(this.T&&!this.K){t:{if(this.g){var ft,Zt=this.g;if((ft=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ft)){var nt=ft;break t}}nt=null}if(S=nt)Tr(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Si(this,S);else{this.o=!1,this.s=3,Ct(12),Tn(this),cr(this);break e}}if(this.P){S=!0;let Cr;for(;!this.J&&this.C<xe.length;)if(Cr=$r(this,xe),Cr==ct){hn==4&&(this.s=4,Ct(14),S=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(Cr==He){this.s=4,Ct(15),Tr(this.i,this.l,xe,"[Invalid Chunk]"),S=!1;break}else Tr(this.i,this.l,Cr,null),Si(this,Cr);if(cn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hn!=4||xe.length!=0||this.h.h||(this.s=1,Ct(16),S=!1),this.o=this.o&&S,!S)Tr(this.i,this.l,xe,"[Invalid Chunked Response]"),Tn(this),cr(this);else if(0<xe.length&&!this.W){this.W=!0;var dn=this.j;dn.g==this&&dn.ba&&!dn.M&&(dn.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),ef(dn),dn.M=!0,Ct(11))}}else Tr(this.i,this.l,xe,null),Si(this,xe);hn==4&&Tn(this),this.o&&!this.J&&(hn==4?gy(this.j,this):(this.o=!1,Ir(this)))}else Vk(this.g),S==400&&0<xe.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),Tn(this),cr(this)}}}catch{}finally{}};function cn(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function $r(f,E){var S=f.C,O=E.indexOf(`
`,S);return O==-1?ct:(S=Number(E.substring(S,O)),isNaN(S)?He:(O+=1,O+S>E.length?ct:(E=E.slice(O,O+S),f.C=O+S,E)))}pe.prototype.cancel=function(){this.J=!0,Tn(this)};function Ir(f){f.S=Date.now()+f.I,Sr(f,f.I)}function Sr(f,E){if(f.B!=null)throw Error("WatchDog timer not null");f.B=lr(g(f.ba,f),E)}function un(f){f.B&&(a.clearTimeout(f.B),f.B=null)}pe.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(vo(this.i,this.A),this.L!=2&&(Er(),Ct(17)),Tn(this),this.s=2,cr(this)):Sr(this,this.S-f)};function cr(f){f.j.G==0||f.J||gy(f.j,f)}function Tn(f){un(f);var E=f.M;E&&typeof E.ma=="function"&&E.ma(),f.M=null,De(f.U),f.g&&(E=f.g,f.g=null,E.abort(),E.ma())}function Si(f,E){try{var S=f.j;if(S.G!=0&&(S.g==f||Ba(S.h,f))){if(!f.K&&Ba(S.h,f)&&S.G==3){try{var O=S.Da.g.parse(E)}catch{O=null}if(Array.isArray(O)&&O.length==3){var J=O;if(J[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<f.F)Xc(S),Yc(S);else break e;Zh(S),Ct(18)}}else S.za=J[1],0<S.za-S.T&&37500>J[2]&&S.F&&S.v==0&&!S.C&&(S.C=lr(g(S.Za,S),6e3));if(1>=zc(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Ai(S,11)}else if((f.K||S.g==f)&&Xc(S),!_(E))for(J=S.Da.g.parse(E),E=0;E<J.length;E++){let nt=J[E];if(S.T=nt[0],nt=nt[1],S.G==2)if(nt[0]=="c"){S.K=nt[1],S.ia=nt[2];const dn=nt[3];dn!=null&&(S.la=dn,S.j.info("VER="+S.la));const hn=nt[4];hn!=null&&(S.Aa=hn,S.j.info("SVER="+S.Aa));const Eo=nt[5];Eo!=null&&typeof Eo=="number"&&0<Eo&&(O=1.5*Eo,S.L=O,S.j.info("backChannelRequestTimeoutMs_="+O)),O=S;const Cr=f.g;if(Cr){const eu=Cr.g?Cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eu){var te=O.h;te.g||eu.indexOf("spdy")==-1&&eu.indexOf("quic")==-1&&eu.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(za(te,te.h),te.h=null))}if(O.D){const tf=Cr.g?Cr.g.getResponseHeader("X-HTTP-Session-Id"):null;tf&&(O.ya=tf,ht(O.I,O.D,tf))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-f.F,S.j.info("Handshake RTT: "+S.R+"ms")),O=S;var xe=f;if(O.qa=xy(O,O.J?O.ia:null,O.W),xe.K){Ga(O.h,xe);var ft=xe,Zt=O.L;Zt&&(ft.I=Zt),ft.B&&(un(ft),Ir(ft)),O.g=xe}else py(O);0<S.i.length&&Qc(S)}else nt[0]!="stop"&&nt[0]!="close"||Ai(S,7);else S.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Ai(S,7):Xh(S):nt[0]!="noop"&&S.l&&S.l.ta(nt),S.v=0)}}Er(4)}catch{}}var Kh=class{constructor(f,E){this.g=f,this.map=E}};function Oc(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function zc(f){return f.h?1:f.g?f.g.size:0}function Ba(f,E){return f.h?f.h==E:f.g?f.g.has(E):!1}function za(f,E){f.g?f.g.add(E):f.h=E}function Ga(f,E){f.h&&f.h==E?f.h=null:f.g&&f.g.has(E)&&f.g.delete(E)}Oc.prototype.cancel=function(){if(this.i=Gc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Gc(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let E=f.i;for(const S of f.g.values())E=E.concat(S.D);return E}return x(f.i)}function $c(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var E=[],S=f.length,O=0;O<S;O++)E.push(f[O]);return E}E=[],S=0;for(O in f)E[S++]=f[O];return E}function Jh(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var E=[];f=f.length;for(var S=0;S<f;S++)E.push(S);return E}E=[],S=0;for(const O in f)E[S++]=O;return E}}}function $a(f,E){if(f.forEach&&typeof f.forEach=="function")f.forEach(E,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,E,void 0);else for(var S=Jh(f),O=$c(f),J=O.length,te=0;te<J;te++)E.call(void 0,O[te],S&&S[te],f)}var Hc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yh(f,E){if(f){f=f.split("&");for(var S=0;S<f.length;S++){var O=f[S].indexOf("="),J=null;if(0<=O){var te=f[S].substring(0,O);J=f[S].substring(O+1)}else te=f[S];E(te,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Hr(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Hr){this.h=f.h,ki(this,f.j),this.o=f.o,this.g=f.g,wo(this,f.s),this.l=f.l;var E=f.i,S=new mt;S.i=E.i,E.g&&(S.g=new Map(E.g),S.h=E.h),qc(this,S),this.m=f.m}else f&&(E=String(f).match(Hc))?(this.h=!1,ki(this,E[1]||"",!0),this.o=Ds(E[2]||""),this.g=Ds(E[3]||"",!0),wo(this,E[4]),this.l=Ds(E[5]||"",!0),qc(this,E[6]||"",!0),this.m=Ds(E[7]||"")):(this.h=!1,this.i=new mt(null,this.h))}Hr.prototype.toString=function(){var f=[],E=this.j;E&&f.push(Ci(E,be,!0),":");var S=this.g;return(S||E=="file")&&(f.push("//"),(E=this.o)&&f.push(Ci(E,be,!0),"@"),f.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&f.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&f.push("/"),f.push(Ci(S,S.charAt(0)=="/"?je:Me,!0))),(S=this.i.toString())&&f.push("?",S),(S=this.m)&&f.push("#",Ci(S,Ft)),f.join("")};function kr(f){return new Hr(f)}function ki(f,E,S){f.j=S?Ds(E,!0):E,f.j&&(f.j=f.j.replace(/:$/,""))}function wo(f,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);f.s=E}else f.s=null}function qc(f,E,S){E instanceof mt?(f.i=E,Ha(f.i,f.h)):(S||(E=Ci(E,ot)),f.i=new mt(E,f.h))}function ht(f,E,S){f.i.set(E,S)}function _o(f){return ht(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Ds(f,E){return f?E?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ci(f,E,S){return typeof f=="string"?(f=encodeURI(f).replace(E,W),S&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function W(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var be=/[#\/\?@]/g,Me=/[#\?:]/g,je=/[#\?]/g,ot=/[#\?@]/g,Ft=/#/g;function mt(f,E){this.h=this.g=null,this.i=f||null,this.j=!!E}function Gt(f){f.g||(f.g=new Map,f.h=0,f.i&&Yh(f.i,function(E,S){f.add(decodeURIComponent(E.replace(/\+/g," ")),S)}))}t=mt.prototype,t.add=function(f,E){Gt(this),this.i=null,f=jn(this,f);var S=this.g.get(f);return S||this.g.set(f,S=[]),S.push(E),this.h+=1,this};function Wn(f,E){Gt(f),E=jn(f,E),f.g.has(E)&&(f.i=null,f.h-=f.g.get(E).length,f.g.delete(E))}function ur(f,E){return Gt(f),E=jn(f,E),f.g.has(E)}t.forEach=function(f,E){Gt(this),this.g.forEach(function(S,O){S.forEach(function(J){f.call(E,J,O,this)},this)},this)},t.na=function(){Gt(this);const f=Array.from(this.g.values()),E=Array.from(this.g.keys()),S=[];for(let O=0;O<E.length;O++){const J=f[O];for(let te=0;te<J.length;te++)S.push(E[O])}return S},t.V=function(f){Gt(this);let E=[];if(typeof f=="string")ur(this,f)&&(E=E.concat(this.g.get(jn(this,f))));else{f=Array.from(this.g.values());for(let S=0;S<f.length;S++)E=E.concat(f[S])}return E},t.set=function(f,E){return Gt(this),this.i=null,f=jn(this,f),ur(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[E]),this.h+=1,this},t.get=function(f,E){return f?(f=this.V(f),0<f.length?String(f[0]):E):E};function Ls(f,E,S){Wn(f,E),0<S.length&&(f.i=null,f.g.set(jn(f,E),x(S)),f.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],E=Array.from(this.g.keys());for(var S=0;S<E.length;S++){var O=E[S];const te=encodeURIComponent(String(O)),xe=this.V(O);for(O=0;O<xe.length;O++){var J=te;xe[O]!==""&&(J+="="+encodeURIComponent(String(xe[O]))),f.push(J)}}return this.i=f.join("&")};function jn(f,E){return E=String(E),f.j&&(E=E.toLowerCase()),E}function Ha(f,E){E&&!f.j&&(Gt(f),f.i=null,f.g.forEach(function(S,O){var J=O.toLowerCase();O!=J&&(Wn(this,O),Ls(this,J,S))},f)),f.j=E}function Mk(f,E){const S=new Qe;if(a.Image){const O=new Image;O.onload=y(js,S,"TestLoadImage: loaded",!0,E,O),O.onerror=y(js,S,"TestLoadImage: error",!1,E,O),O.onabort=y(js,S,"TestLoadImage: abort",!1,E,O),O.ontimeout=y(js,S,"TestLoadImage: timeout",!1,E,O),a.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=f}else E(!1)}function Dk(f,E){const S=new Qe,O=new AbortController,J=setTimeout(()=>{O.abort(),js(S,"TestPingServer: timeout",!1,E)},1e4);fetch(f,{signal:O.signal}).then(te=>{clearTimeout(J),te.ok?js(S,"TestPingServer: ok",!0,E):js(S,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(J),js(S,"TestPingServer: error",!1,E)})}function js(f,E,S,O,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),O(S)}catch{}}function Lk(){this.g=new Lt}function jk(f,E,S){const O=S||"";try{$a(f,function(J,te){let xe=J;u(J)&&(xe=We(J)),E.push(O+te+"="+encodeURIComponent(xe))})}catch(J){throw E.push(O+"type="+encodeURIComponent("_badmap")),J}}function Wc(f){this.l=f.Ub||null,this.j=f.eb||!1}b(Wc,yt),Wc.prototype.g=function(){return new Kc(this.l,this.j)},Wc.prototype.i=function(f){return function(){return f}}({});function Kc(f,E){_e.call(this),this.D=f,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Kc,_e),t=Kc.prototype,t.open=function(f,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=E,this.readyState=1,Wa(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(E.body=f),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Wa(this)),this.g&&(this.readyState=3,Wa(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ry(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function ry(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var E=f.value?f.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!f.done}))&&(this.response=this.responseText+=E)}f.done?qa(this):Wa(this),this.readyState==3&&ry(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,qa(this))},t.Qa=function(f){this.g&&(this.response=f,qa(this))},t.ga=function(){this.g&&qa(this)};function qa(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Wa(f)}t.setRequestHeader=function(f,E){this.u.append(f,E)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],E=this.h.entries();for(var S=E.next();!S.done;)S=S.value,f.push(S[0]+": "+S[1]),S=E.next();return f.join(`\r
`)};function Wa(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Kc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function sy(f){let E="";return B(f,function(S,O){E+=O,E+=":",E+=S,E+=`\r
`}),E}function Qh(f,E,S){e:{for(O in S){var O=!1;break e}O=!0}O||(S=sy(S),typeof f=="string"?S!=null&&encodeURIComponent(String(S)):ht(f,E,S))}function At(f){_e.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(At,_e);var Fk=/^https?$/i,Uk=["POST","PUT"];t=At.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,E,S,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);E=E?E.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$.g(),this.v=this.o?Wt(this.o):Wt($),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(E,String(f),!0),this.B=!1}catch(te){iy(this,te);return}if(f=S||"",S=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var J in O)S.set(J,O[J]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const te of O.keys())S.set(te,O.get(te));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(S.keys()).find(te=>te.toLowerCase()=="content-type"),J=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Uk,E,void 0))||O||J||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,xe]of S)this.g.setRequestHeader(te,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ly(this),this.u=!0,this.g.send(f),this.u=!1}catch(te){iy(this,te)}};function iy(f,E){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=E,f.m=5,oy(f),Jc(f)}function oy(f){f.A||(f.A=!0,Ne(f,"complete"),Ne(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ne(this,"complete"),Ne(this,"abort"),Jc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jc(this,!0)),At.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ay(this):this.bb())},t.bb=function(){ay(this)};function ay(f){if(f.h&&typeof o<"u"&&(!f.v[1]||os(f)!=4||f.Z()!=2)){if(f.u&&os(f)==4)kt(f.Ea,0,f);else if(Ne(f,"readystatechange"),os(f)==4){f.h=!1;try{const xe=f.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var S;if(!(S=E)){var O;if(O=xe===0){var J=String(f.D).match(Hc)[1]||null;!J&&a.self&&a.self.location&&(J=a.self.location.protocol.slice(0,-1)),O=!Fk.test(J?J.toLowerCase():"")}S=O}if(S)Ne(f,"complete"),Ne(f,"success");else{f.m=6;try{var te=2<os(f)?f.g.statusText:""}catch{te=""}f.l=te+" ["+f.Z()+"]",oy(f)}}finally{Jc(f)}}}}function Jc(f,E){if(f.g){ly(f);const S=f.g,O=f.v[0]?()=>{}:null;f.g=null,f.v=null,E||Ne(f,"ready");try{S.onreadystatechange=O}catch{}}}function ly(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function os(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<os(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var E=this.g.responseText;return f&&E.indexOf(f)==0&&(E=E.substring(f.length)),et(E)}};function cy(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Vk(f){const E={};f=(f.g&&2<=os(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<f.length;O++){if(_(f[O]))continue;var S=U(f[O]);const J=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const te=E[J]||[];E[J]=te,te.push(S)}k(E,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ka(f,E,S){return S&&S.internalChannelParams&&S.internalChannelParams[f]||E}function uy(f){this.Aa=0,this.i=[],this.j=new Qe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ka("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ka("baseRetryDelayMs",5e3,f),this.cb=Ka("retryDelaySeedMs",1e4,f),this.Wa=Ka("forwardChannelMaxRetries",2,f),this.wa=Ka("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Oc(f&&f.concurrentRequestLimit),this.Da=new Lk,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=uy.prototype,t.la=8,t.G=1,t.connect=function(f,E,S,O){Ct(0),this.W=f,this.H=E||{},S&&O!==void 0&&(this.H.OSID=S,this.H.OAID=O),this.F=this.X,this.I=xy(this,null,this.W),Qc(this)};function Xh(f){if(dy(f),f.G==3){var E=f.U++,S=kr(f.I);if(ht(S,"SID",f.K),ht(S,"RID",E),ht(S,"TYPE","terminate"),Ja(f,S),E=new pe(f,f.j,E),E.L=2,E.v=_o(kr(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!S&&a.Image&&(new Image().src=E.v,S=!0),S||(E.g=wy(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Ir(E)}vy(f)}function Yc(f){f.g&&(ef(f),f.g.cancel(),f.g=null)}function dy(f){Yc(f),f.u&&(a.clearTimeout(f.u),f.u=null),Xc(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function Qc(f){if(!Bc(f.h)&&!f.s){f.s=!0;var E=f.Ga;re||ue(),ne||(re(),ne=!0),Y.add(E,f),f.B=0}}function Ok(f,E){return zc(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=E.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=lr(g(f.Ga,f,E),yy(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const J=new pe(this,this.j,f);let te=this.o;if(this.S&&(te?(te=I(te),N(te,this.S)):te=this.S),this.m!==null||this.O||(J.H=te,te=null),this.P)e:{for(var E=0,S=0;S<this.i.length;S++){t:{var O=this.i[S];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(E+=O,4096<E){E=S;break e}if(E===4096||S===this.i.length-1){E=S+1;break e}}E=1e3}else E=1e3;E=fy(this,J,E),S=kr(this.I),ht(S,"RID",f),ht(S,"CVER",22),this.D&&ht(S,"X-HTTP-Session-Id",this.D),Ja(this,S),te&&(this.O?E="headers="+encodeURIComponent(String(sy(te)))+"&"+E:this.m&&Qh(S,this.m,te)),za(this.h,J),this.Ua&&ht(S,"TYPE","init"),this.P?(ht(S,"$req",E),ht(S,"SID","null"),J.T=!0,tt(J,S,null)):tt(J,S,E),this.G=2}}else this.G==3&&(f?hy(this,f):this.i.length==0||Bc(this.h)||hy(this))};function hy(f,E){var S;E?S=E.l:S=f.U++;const O=kr(f.I);ht(O,"SID",f.K),ht(O,"RID",S),ht(O,"AID",f.T),Ja(f,O),f.m&&f.o&&Qh(O,f.m,f.o),S=new pe(f,f.j,S,f.B+1),f.m===null&&(S.H=f.o),E&&(f.i=E.D.concat(f.i)),E=fy(f,S,1e3),S.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),za(f.h,S),tt(S,O,E)}function Ja(f,E){f.H&&B(f.H,function(S,O){ht(E,O,S)}),f.l&&$a({},function(S,O){ht(E,O,S)})}function fy(f,E,S){S=Math.min(f.i.length,S);var O=f.l?g(f.l.Na,f.l,f):null;e:{var J=f.i;let te=-1;for(;;){const xe=["count="+S];te==-1?0<S?(te=J[0].g,xe.push("ofs="+te)):te=0:xe.push("ofs="+te);let ft=!0;for(let Zt=0;Zt<S;Zt++){let nt=J[Zt].g;const dn=J[Zt].map;if(nt-=te,0>nt)te=Math.max(0,J[Zt].g-100),ft=!1;else try{jk(dn,xe,"req"+nt+"_")}catch{O&&O(dn)}}if(ft){O=xe.join("&");break e}}}return f=f.i.splice(0,S),E.D=f,O}function py(f){if(!f.g&&!f.u){f.Y=1;var E=f.Fa;re||ue(),ne||(re(),ne=!0),Y.add(E,f),f.v=0}}function Zh(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=lr(g(f.Fa,f),yy(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,my(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=lr(g(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),Yc(this),my(this))};function ef(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function my(f){f.g=new pe(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var E=kr(f.qa);ht(E,"RID","rpc"),ht(E,"SID",f.K),ht(E,"AID",f.T),ht(E,"CI",f.F?"0":"1"),!f.F&&f.ja&&ht(E,"TO",f.ja),ht(E,"TYPE","xmlhttp"),Ja(f,E),f.m&&f.o&&Qh(E,f.m,f.o),f.L&&(f.g.I=f.L);var S=f.g;f=f.ia,S.L=1,S.v=_o(kr(E)),S.m=null,S.P=!0,qn(S,f)}t.Za=function(){this.C!=null&&(this.C=null,Yc(this),Zh(this),Ct(19))};function Xc(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function gy(f,E){var S=null;if(f.g==E){Xc(f),ef(f),f.g=null;var O=2}else if(Ba(f.h,E))S=E.D,Ga(f.h,E),O=1;else return;if(f.G!=0){if(E.o)if(O==1){S=E.m?E.m.length:0,E=Date.now()-E.F;var J=f.B;O=Gr(),Ne(O,new Ei(O,S)),Qc(f)}else py(f);else if(J=E.s,J==3||J==0&&0<E.X||!(O==1&&Ok(f,E)||O==2&&Zh(f)))switch(S&&0<S.length&&(E=f.h,E.i=E.i.concat(S)),J){case 1:Ai(f,5);break;case 4:Ai(f,10);break;case 3:Ai(f,6);break;default:Ai(f,2)}}}function yy(f,E){let S=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(S*=2),S*E}function Ai(f,E){if(f.j.info("Error code "+E),E==2){var S=g(f.fb,f),O=f.Xa;const J=!O;O=new Hr(O||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ki(O,"https"),_o(O),J?Mk(O.toString(),S):Dk(O.toString(),S)}else Ct(2);f.G=0,f.l&&f.l.sa(E),vy(f),dy(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function vy(f){if(f.G=0,f.ka=[],f.l){const E=Gc(f.h);(E.length!=0||f.i.length!=0)&&(w(f.ka,E),w(f.ka,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.ra()}}function xy(f,E,S){var O=S instanceof Hr?kr(S):new Hr(S);if(O.g!="")E&&(O.g=E+"."+O.g),wo(O,O.s);else{var J=a.location;O=J.protocol,E=E?E+"."+J.hostname:J.hostname,J=+J.port;var te=new Hr(null);O&&ki(te,O),E&&(te.g=E),J&&wo(te,J),S&&(te.l=S),O=te}return S=f.D,E=f.ya,S&&E&&ht(O,S,E),ht(O,"VER",f.la),Ja(f,O),O}function wy(f,E,S){if(E&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=f.Ca&&!f.pa?new At(new Wc({eb:S})):new At(f.pa),E.Ha(f.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _y(){}t=_y.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zc(){}Zc.prototype.g=function(f,E){return new Kn(f,E)};function Kn(f,E){_e.call(this),this.g=new uy(E),this.l=f,this.h=E&&E.messageUrlParams||null,f=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(f?f["X-WebChannel-Content-Type"]=E.messageContentType:f={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(f?f["X-WebChannel-Client-Profile"]=E.va:f={"X-WebChannel-Client-Profile":E.va}),this.g.S=f,(f=E&&E.Sb)&&!_(f)&&(this.g.m=f),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!_(E)&&(this.g.D=E,f=this.h,f!==null&&E in f&&(f=this.h,E in f&&delete f[E])),this.j=new bo(this)}b(Kn,_e),Kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){Xh(this.g)},Kn.prototype.o=function(f){var E=this.g;if(typeof f=="string"){var S={};S.__data__=f,f=S}else this.u&&(S={},S.__data__=We(f),f=S);E.i.push(new Kh(E.Ya++,f)),E.G==3&&Qc(E)},Kn.prototype.N=function(){this.g.l=null,delete this.j,Xh(this.g),delete this.g,Kn.aa.N.call(this)};function by(f){Dn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var E=f.__sm__;if(E){e:{for(const S in E){f=S;break e}f=void 0}(this.i=f)&&(f=this.i,E=E!==null&&f in E?E[f]:void 0),this.data=E}else this.data=f}b(by,Dn);function Ey(){Ln.call(this),this.status=1}b(Ey,Ln);function bo(f){this.g=f}b(bo,_y),bo.prototype.ua=function(){Ne(this.g,"a")},bo.prototype.ta=function(f){Ne(this.g,new by(f))},bo.prototype.sa=function(f){Ne(this.g,new Ey)},bo.prototype.ra=function(){Ne(this.g,"b")},Zc.prototype.createWebChannel=Zc.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,C1=function(){return new Zc},k1=function(){return Gr()},S1=ar,rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},is.NO_ERROR=0,is.TIMEOUT=8,is.HTTP_ERROR=6,zu=is,Ii.COMPLETE="complete",I1=Ii,ln.EventType=jt,jt.OPEN="a",jt.CLOSE="b",jt.ERROR="c",jt.MESSAGE="d",_e.prototype.listen=_e.prototype.K,fl=ln,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,T1=At}).apply(typeof vu<"u"?vu:typeof self<"u"?self:typeof window<"u"?window:{});const dx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ka="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new mh("@firebase/firestore");function sl(){return Zi.logLevel}function Ce(t,...e){if(Zi.logLevel<=Ye.DEBUG){const n=e.map(qg);Zi.debug(`Firestore (${ka}): ${t}`,...n)}}function Is(t,...e){if(Zi.logLevel<=Ye.ERROR){const n=e.map(qg);Zi.error(`Firestore (${ka}): ${t}`,...n)}}function fa(t,...e){if(Zi.logLevel<=Ye.WARN){const n=e.map(qg);Zi.warn(`Firestore (${ka}): ${t}`,...n)}}function qg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t="Unexpected state"){const e=`FIRESTORE (${ka}) INTERNAL ASSERTION FAILED: `+t;throw Is(e),new Error(e)}function lt(t,e){t||Ue()}function Oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Br{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yn.UNAUTHENTICATED))}shutdown(){}}class O4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class B4{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){lt(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Xr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Xr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt(typeof r.accessToken=="string"),new A1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string"),new yn(e)}}class z4{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class G4{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new z4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){lt(this.o===void 0);const r=i=>{i.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(lt(typeof n.token=="string"),this.R=n.token,new $4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=q4(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function rt(t,e){return t<e?-1:t>e?1:0}function pa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new qt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new qt(0,0))}static max(){return new Ge(new qt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ue(),r===void 0?r=e.length-n:r>e.length-n&&Ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xt extends sc{construct(e,n,r){return new xt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new xt(n)}static emptyPath(){return new xt([])}}const W4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends sc{construct(e,n,r){return new nn(e,n,r)}static isValidIdentifier(e){return W4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nn(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Te(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Te(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Te(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Te(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(xt.fromString(e))}static fromName(e){return new Re(xt.fromString(e).popFirst(5))}static empty(){return new Re(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new xt(e.slice()))}}function K4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ge.fromTimestamp(r===1e9?new qt(n+1,0):new qt(n,r));return new di(s,Re.empty(),e)}function J4(t){return new di(t.readTime,t.key,-1)}class di{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new di(Ge.min(),Re.empty(),-1)}static max(){return new di(Ge.max(),Re.empty(),-1)}}function Y4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Re.comparator(t.documentKey,e.documentKey),n!==0?n:rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wc(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==Q4)throw t;Ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):fe.reject(n)}static resolve(e){return new fe((n,r)=>{n(e)})}static reject(e){return new fe((n,r)=>{r(e)})}static waitFor(e){return new fe((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=fe.resolve(!1);for(const r of e)n=n.next(s=>s?fe.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new fe((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new fe((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Z4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _c(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wg.oe=-1;function vh(t){return t==null}function Ad(t){return t===0&&1/t==-1/0}function eM(t){return typeof t=="number"&&Number.isInteger(t)&&!Ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ho(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tM(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function R1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xu(this.root,e,this.comparator,!0)}}class xu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??tn.RED,this.left=s??tn.EMPTY,this.right=i??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new tn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const e=this.left.check();if(e!==this.right.check())throw Ue();return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(e,n,r,s,i){return this}insert(e,n,r){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fx(this.data.getIterator())}getIteratorFrom(e){return new fx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new sn(this.comparator);return n.data=e,n}}class fx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new Qn([])}unionWith(e){let n=new sn(nn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new P1("Invalid base64 string: "+i):i}}(e);return new an(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new an(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const nM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(t){if(lt(!!t),typeof t=="string"){let e=0;const n=nM.exec(t);if(lt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(t.seconds),nanos:Pt(t.nanos)}}function Pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function eo(t){return typeof t=="string"?an.fromBase64String(t):an.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jg(t){const e=t.mapValue.fields.__previous_value__;return Kg(e)?Jg(e):e}function ic(t){const e=hi(t.mapValue.fields.__local_write_time__.timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n,r,s,i,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class oc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new oc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof oc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu={mapValue:{}};function to(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kg(t)?4:iM(t)?9007199254740991:sM(t)?10:11:Ue()}function rs(t,e){if(t===e)return!0;const n=to(t);if(n!==to(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ic(t).isEqual(ic(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=hi(s.timestampValue),a=hi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return eo(s.bytesValue).isEqual(eo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Pt(s.geoPointValue.latitude)===Pt(i.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Pt(s.integerValue)===Pt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Pt(s.doubleValue),a=Pt(i.doubleValue);return o===a?Ad(o)===Ad(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return pa(t.arrayValue.values||[],e.arrayValue.values||[],rs);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(hx(o)!==hx(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!rs(o[c],a[c])))return!1;return!0}(t,e);default:return Ue()}}function ac(t,e){return(t.values||[]).find(n=>rs(n,e))!==void 0}function ma(t,e){if(t===e)return 0;const n=to(t),r=to(e);if(n!==r)return rt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Pt(i.integerValue||i.doubleValue),c=Pt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return px(t.timestampValue,e.timestampValue);case 4:return px(ic(t),ic(e));case 5:return rt(t.stringValue,e.stringValue);case 6:return function(i,o){const a=eo(i),c=eo(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=rt(a[u],c[u]);if(d!==0)return d}return rt(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=rt(Pt(i.latitude),Pt(o.latitude));return a!==0?a:rt(Pt(i.longitude),Pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mx(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,d;const m=i.fields||{},g=o.fields||{},y=(a=m.value)===null||a===void 0?void 0:a.arrayValue,b=(c=g.value)===null||c===void 0?void 0:c.arrayValue,x=rt(((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0,((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:mx(y,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===wu.mapValue&&o===wu.mapValue)return 0;if(i===wu.mapValue)return 1;if(o===wu.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const g=rt(c[m],d[m]);if(g!==0)return g;const y=ma(a[c[m]],u[d[m]]);if(y!==0)return y}return rt(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Ue()}}function px(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const n=hi(t),r=hi(e),s=rt(n.seconds,r.seconds);return s!==0?s:rt(n.nanos,r.nanos)}function mx(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ma(n[s],r[s]);if(i)return i}return rt(n.length,r.length)}function ga(t){return sm(t)}function sm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return eo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=sm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${sm(n.fields[o])}`;return s+"}"}(t.mapValue):Ue()}function gx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function im(t){return!!t&&"integerValue"in t}function Yg(t){return!!t&&"arrayValue"in t}function yx(t){return!!t&&"nullValue"in t}function vx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gu(t){return!!t&&"mapValue"in t}function sM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Cl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ho(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Cl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cl(n)}setAll(e){let n=nn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Cl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Gu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Gu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ho(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Un(Cl(this.value))}}function M1(t){const e=[];return ho(t.fields,(n,r)=>{const s=new nn([n]);if(Gu(r)){const i=M1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new xn(e,0,Ge.min(),Ge.min(),Ge.min(),Un.empty(),0)}static newFoundDocument(e,n,r,s){return new xn(e,1,n,Ge.min(),r,s,0)}static newNoDocument(e,n){return new xn(e,2,n,Ge.min(),Ge.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new xn(e,3,n,Ge.min(),Ge.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.position=e,this.inclusive=n}}function xx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Re.comparator(Re.fromName(o.referenceValue),n.key):r=ma(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function wx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n="asc"){this.field=e,this.dir=n}}function oM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{}class Ot extends D1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lM(e,n,r):n==="array-contains"?new dM(e,r):n==="in"?new hM(e,r):n==="not-in"?new fM(e,r):n==="array-contains-any"?new pM(e,r):new Ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cM(e,r):new uM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ma(n,this.value)):n!==null&&to(this.value)===to(n)&&this.matchesComparison(ma(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Or extends D1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Or(e,n)}matches(e){return L1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function L1(t){return t.op==="and"}function j1(t){return aM(t)&&L1(t)}function aM(t){for(const e of t.filters)if(e instanceof Or)return!1;return!0}function om(t){if(t instanceof Ot)return t.field.canonicalString()+t.op.toString()+ga(t.value);if(j1(t))return t.filters.map(e=>om(e)).join(",");{const e=t.filters.map(n=>om(n)).join(",");return`${t.op}(${e})`}}function F1(t,e){return t instanceof Ot?function(r,s){return s instanceof Ot&&r.op===s.op&&r.field.isEqual(s.field)&&rs(r.value,s.value)}(t,e):t instanceof Or?function(r,s){return s instanceof Or&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&F1(o,s.filters[a]),!0):!1}(t,e):void Ue()}function U1(t){return t instanceof Ot?function(n){return`${n.field.canonicalString()} ${n.op} ${ga(n.value)}`}(t):t instanceof Or?function(n){return n.op.toString()+" {"+n.getFilters().map(U1).join(" ,")+"}"}(t):"Filter"}class lM extends Ot{constructor(e,n,r){super(e,n,r),this.key=Re.fromName(r.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class cM extends Ot{constructor(e,n){super(e,"in",n),this.keys=V1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uM extends Ot{constructor(e,n){super(e,"not-in",n),this.keys=V1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function V1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Re.fromName(r.referenceValue))}class dM extends Ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yg(n)&&ac(n.arrayValue,this.value)}}class hM extends Ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ac(this.value.arrayValue,n)}}class fM extends Ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ac(this.value.arrayValue,n)}}class pM extends Ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ac(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function _x(t,e=null,n=[],r=[],s=null,i=null,o=null){return new mM(t,e,n,r,s,i,o)}function Qg(t){const e=Oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>om(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ga(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ga(r)).join(",")),e.ue=n}return e.ue}function Xg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!F1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wx(t.startAt,e.startAt)&&wx(t.endAt,e.endAt)}function am(t){return Re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gM(t,e,n,r,s,i,o,a){return new Ca(t,e,n,r,s,i,o,a)}function Zg(t){return new Ca(t)}function bx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function O1(t){return t.collectionGroup!==null}function Al(t){const e=Oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new sn(nn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new lc(i,r))}),n.has(nn.keyField().canonicalString())||e.ce.push(new lc(nn.keyField(),r))}return e.ce}function Zr(t){const e=Oe(t);return e.le||(e.le=B1(e,Al(t))),e.le}function yM(t){const e=Oe(t);return e.he||(e.he=B1(e,t.explicitOrderBy)),e.he}function B1(t,e){if(t.limitType==="F")return _x(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new lc(s.field,i)});const n=t.endAt?new Nd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Nd(t.startAt.position,t.startAt.inclusive):null;return _x(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lm(t,e){const n=t.filters.concat([e]);return new Ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Rd(t,e,n){return new Ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xh(t,e){return Xg(Zr(t),Zr(e))&&t.limitType===e.limitType}function z1(t){return`${Qg(Zr(t))}|lt:${t.limitType}`}function So(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>U1(s)).join(", ")}]`),vh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ga(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ga(s)).join(",")),`Target(${r})`}(Zr(t))}; limitType=${t.limitType})`}function wh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Re.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Al(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=xx(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Al(r),s)||r.endAt&&!function(o,a,c){const u=xx(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Al(r),s))}(t,e)}function vM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function G1(t){return(e,n)=>{let r=!1;for(const s of Al(t)){const i=xM(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function xM(t,e,n){const r=t.field.isKeyField()?Re.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?ma(c,u):Ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return R1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=new It(Re.comparator);function Ss(){return wM}const $1=new It(Re.comparator);function pl(...t){let e=$1;for(const n of t)e=e.insert(n.key,n);return e}function H1(t){let e=$1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Vi(){return Nl()}function q1(){return Nl()}function Nl(){return new Aa(t=>t.toString(),(t,e)=>t.isEqual(e))}const _M=new It(Re.comparator),bM=new sn(Re.comparator);function Je(...t){let e=bM;for(const n of t)e=e.add(n);return e}const EM=new sn(rt);function TM(){return EM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function W1(t){return{integerValue:""+t}}function K1(t,e){return eM(e)?W1(e):e0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function IM(t,e,n){return t instanceof Pd?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Kg(i)&&(i=Jg(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof cc?Y1(t,e):t instanceof uc?Q1(t,e):function(s,i){const o=J1(s,i),a=Ex(o)+Ex(s.Pe);return im(o)&&im(s.Pe)?W1(a):e0(s.serializer,a)}(t,e)}function SM(t,e,n){return t instanceof cc?Y1(t,e):t instanceof uc?Q1(t,e):n}function J1(t,e){return t instanceof dc?function(r){return im(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Pd extends _h{}class cc extends _h{constructor(e){super(),this.elements=e}}function Y1(t,e){const n=X1(e);for(const r of t.elements)n.some(s=>rs(s,r))||n.push(r);return{arrayValue:{values:n}}}class uc extends _h{constructor(e){super(),this.elements=e}}function Q1(t,e){let n=X1(e);for(const r of t.elements)n=n.filter(s=>!rs(s,r));return{arrayValue:{values:n}}}class dc extends _h{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ex(t){return Pt(t.integerValue||t.doubleValue)}function X1(t){return Yg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,n){this.field=e,this.transform=n}}function CM(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof cc&&s instanceof cc||r instanceof uc&&s instanceof uc?pa(r.elements,s.elements,rs):r instanceof dc&&s instanceof dc?rs(r.Pe,s.Pe):r instanceof Pd&&s instanceof Pd}(t.transform,e.transform)}class AM{constructor(e,n){this.version=e,this.transformResults=n}}class An{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $u(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bh{}function Z1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Eh(t.key,An.none()):new bc(t.key,t.data,An.none());{const n=t.data,r=Un.empty();let s=new sn(nn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new xi(t.key,r,new Qn(s.toArray()),An.none())}}function NM(t,e,n){t instanceof bc?function(s,i,o){const a=s.value.clone(),c=Ix(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof xi?function(s,i,o){if(!$u(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Ix(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(eI(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Rl(t,e,n,r){return t instanceof bc?function(i,o,a,c){if(!$u(i.precondition,o))return a;const u=i.value.clone(),d=Sx(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof xi?function(i,o,a,c){if(!$u(i.precondition,o))return a;const u=Sx(i.fieldTransforms,c,o),d=o.data;return d.setAll(eI(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,a){return $u(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function RM(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=J1(r.transform,s||null);i!=null&&(n===null&&(n=Un.empty()),n.set(r.field,i))}return n||null}function Tx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pa(r,s,(i,o)=>CM(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bc extends bh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xi extends bh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function eI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ix(t,e,n){const r=new Map;lt(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,SM(o,a,n[s]))}return r}function Sx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,IM(i,o,e))}return r}class Eh extends bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PM extends bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&NM(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=q1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=Z1(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Je())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,(n,r)=>Tx(n,r))&&pa(this.baseMutations,e.baseMutations,(n,r)=>Tx(n,r))}}class t0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){lt(e.mutations.length===r.length);let s=function(){return _M}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new t0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut,Xe;function FM(t){switch(t){default:return Ue();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function tI(t){if(t===void 0)return Is("GRPC error has no .code"),ce.UNKNOWN;switch(t){case Ut.OK:return ce.OK;case Ut.CANCELLED:return ce.CANCELLED;case Ut.UNKNOWN:return ce.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return ce.INTERNAL;case Ut.UNAVAILABLE:return ce.UNAVAILABLE;case Ut.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Ut.NOT_FOUND:return ce.NOT_FOUND;case Ut.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Ut.ABORTED:return ce.ABORTED;case Ut.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Ut.DATA_LOSS:return ce.DATA_LOSS;default:return Ue()}}(Xe=Ut||(Ut={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new Gi([4294967295,4294967295],0);function kx(t){const e=UM().encode(t),n=new E1;return n.update(e),new Uint8Array(n.digest())}function Cx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Gi([n,r],0),new Gi([s,i],0)]}class n0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ml(`Invalid padding: ${n}`);if(r<0)throw new ml(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ml(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ml(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Gi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Gi.fromNumber(r)));return s.compare(VM)===1&&(s=new Gi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=kx(e),[r,s]=Cx(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new n0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=kx(e),[r,s]=Cx(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Th(Ge.min(),s,new It(rt),Ss(),Je())}}class Ec{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ec(r,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class nI{constructor(e,n){this.targetId=e,this.me=n}}class rI{constructor(e,n,r=an.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ax{constructor(){this.fe=0,this.ge=Rx(),this.pe=an.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Je(),n=Je(),r=Je();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ue()}}),new Ec(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Rx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,lt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class OM{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ss(),this.qe=Nx(),this.Qe=new It(rt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(am(i))if(r===0){const o=new Re(i.path);this.Ue(n,o,xn.newNoDocument(o,Ge.min()))}else lt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=eo(r).toUint8Array()}catch(c){if(c instanceof P1)return fa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new n0(o,s,i)}catch(c){return fa(c instanceof ml?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&am(a.target)){const c=new Re(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,xn.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Je();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Th(e,n,this.Qe,this.ke,r);return this.ke=Ss(),this.qe=Nx(),this.Qe=new It(rt),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ax,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new sn(rt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ce("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ax),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Nx(){return new It(Re.comparator)}function Rx(){return new It(Re.comparator)}const BM={asc:"ASCENDING",desc:"DESCENDING"},zM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GM={and:"AND",or:"OR"};class $M{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function cm(t,e){return t.useProto3Json||vh(e)?e:{value:e}}function Md(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HM(t,e){return Md(t,e.toTimestamp())}function es(t){return lt(!!t),Ge.fromTimestamp(function(n){const r=hi(n);return new qt(r.seconds,r.nanos)}(t))}function r0(t,e){return um(t,e).canonicalString()}function um(t,e){const n=function(s){return new xt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iI(t){const e=xt.fromString(t);return lt(dI(e)),e}function dm(t,e){return r0(t.databaseId,e.path)}function Bf(t,e){const n=iI(e);if(n.get(1)!==t.databaseId.projectId)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Re(aI(n))}function oI(t,e){return r0(t.databaseId,e)}function qM(t){const e=iI(t);return e.length===4?xt.emptyPath():aI(e)}function hm(t){return new xt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aI(t){return lt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Px(t,e,n){return{name:dm(t,e),fields:n.value.mapValue.fields}}function WM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(lt(d===void 0||typeof d=="string"),an.fromBase64String(d||"")):(lt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),an.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?ce.UNKNOWN:tI(u.code);return new Te(d,u.message||"")}(o);n=new rI(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Bf(t,r.document.name),i=es(r.document.updateTime),o=r.document.createTime?es(r.document.createTime):Ge.min(),a=new Un({mapValue:{fields:r.document.fields}}),c=xn.newFoundDocument(s,i,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Hu(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Bf(t,r.document),i=r.readTime?es(r.readTime):Ge.min(),o=xn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Hu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Bf(t,r.document),i=r.removedTargetIds||[];n=new Hu([],i,s,null)}else{if(!("filter"in e))return Ue();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new jM(s,i),a=r.targetId;n=new nI(a,o)}}return n}function KM(t,e){let n;if(e instanceof bc)n={update:Px(t,e.key,e.value)};else if(e instanceof Eh)n={delete:dm(t,e.key)};else if(e instanceof xi)n={update:Px(t,e.key,e.data),updateMask:rD(e.fieldMask)};else{if(!(e instanceof PM))return Ue();n={verify:dm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Pd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof uc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof dc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:HM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ue()}(t,e.precondition)),n}function JM(t,e){return t&&t.length>0?(lt(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?es(s.updateTime):es(i);return o.isEqual(Ge.min())&&(o=es(i)),new AM(o,s.transformResults||[])}(n,e))):[]}function YM(t,e){return{documents:[oI(t,e.path)]}}function lI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oI(t,s);const i=function(u){if(u.length!==0)return uI(Or.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:Gs(g.field),direction:eD(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=cm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function QM(t,e,n,r){const{_t:s,parent:i}=lI(t,e),o={},a=[];let c=0;return n.forEach(u=>{const d="aggregate_"+c++;o[d]=u.alias,u.aggregateType==="count"?a.push({alias:d,count:{}}):u.aggregateType==="avg"?a.push({alias:d,avg:{field:Gs(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:d,sum:{field:Gs(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function XM(t){let e=qM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){lt(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(m){const g=cI(m);return g instanceof Or&&j1(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(b){return new lc(ko(b.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,vh(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,y=m.values||[];return new Nd(y,g)}(n.startAt));let u=null;return n.endAt&&(u=function(m){const g=!m.before,y=m.values||[];return new Nd(y,g)}(n.endAt)),gM(e,s,o,i,a,"F",c,u)}function ZM(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ko(n.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ko(n.unaryFilter.field);return Ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ko(n.unaryFilter.field);return Ot.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ko(n.unaryFilter.field);return Ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ue()}}(t):t.fieldFilter!==void 0?function(n){return Ot.create(ko(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Or.create(n.compositeFilter.filters.map(r=>cI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ue()}}(n.compositeFilter.op))}(t):Ue()}function eD(t){return BM[t]}function tD(t){return zM[t]}function nD(t){return GM[t]}function Gs(t){return{fieldPath:t.canonicalString()}}function ko(t){return nn.fromServerFormat(t.fieldPath)}function uI(t){return t instanceof Ot?function(n){if(n.op==="=="){if(vx(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NAN"}};if(yx(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vx(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NOT_NAN"}};if(yx(n.value))return{unaryFilter:{field:Gs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(n.field),op:tD(n.op),value:n.value}}}(t):t instanceof Or?function(n){const r=n.getFilters().map(s=>uI(s));return r.length===1?r[0]:{compositeFilter:{op:nD(n.op),filters:r}}}(t):Ue()}function rD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n,r,s,i=Ge.min(),o=Ge.min(),a=an.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.ct=e}}function iD(t){const e=XM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this.un=new aD}addToCollectionParentIndex(e,n){return this.un.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(di.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(di.min())}updateCollectionGroup(e,n,r){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class aD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new sn(xt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new sn(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ya(0)}static kn(){return new ya(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(){this.changes=new Aa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?fe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Rl(r.mutation,s,Qn.empty(),qt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Je()){const s=Vi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=pl();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Vi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Je()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Ss();const o=Nl(),a=function(){return Nl()}();return n.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof xi)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Rl(d.mutation,u,d.mutation.getFieldMask(),qt.now())):o.set(u.key,Qn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var m;return a.set(u,new cD(d,(m=o.get(u))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Nl();let s=new It((o,a)=>o-a),i=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Qn.empty();d=a.applyToLocalView(u,d),r.set(c,d);const m=(s.get(a.batchId)||Je()).add(c);s=s.insert(a.batchId,m)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,m=q1();d.forEach(g=>{if(!i.has(g)){const y=Z1(n.get(g),r.get(g));y!==null&&m.set(g,y),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return fe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):O1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):fe.resolve(Vi());let a=-1,c=i;return o.next(u=>fe.forEach(u,(d,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(d)?fe.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Je())).next(d=>({batchId:a,changes:H1(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next(r=>{let s=pl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=pl();return this.indexManager.getCollectionParents(e,i).next(a=>fe.forEach(a,c=>{const u=function(m,g){return new Ca(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,xn.newInvalidDocument(d)))});let a=pl();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&Rl(d.mutation,u,Qn.empty(),qt.now()),wh(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return fe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:es(s.createTime)}}(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:iD(s.bundledQuery),readTime:es(s.readTime)}}(n)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(){this.overlays=new It(Re.comparator),this.Ir=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Vi();return fe.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),fe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),fe.resolve()}getOverlaysForCollection(e,n,r){const s=Vi(),i=n.length+1,o=new Re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return fe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new It((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=Vi(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Vi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=s)););return fe.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DM(n,r));let i=this.Ir.get(n);i===void 0&&(i=Je(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(){this.Tr=new sn(Kt.Er),this.dr=new sn(Kt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Kt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Kt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Re(new xt([])),r=new Kt(n,e),s=new Kt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Re(new xt([])),r=new Kt(n,e),s=new Kt(n,e+1);let i=Je();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Kt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Re.comparator(e.key,n.key)||rt(e.wr,n.wr)}static Ar(e,n){return rt(e.wr,n.wr)||Re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new sn(Kt.Er)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new MM(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Kt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return fe.resolve(o)}lookupMutationBatch(e,n){return fe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return fe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kt(n,0),s=new Kt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),fe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new sn(rt);return n.forEach(s=>{const i=new Kt(s,0),o=new Kt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),fe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Re.isDocumentKey(i)||(i=i.child(""));const o=new Kt(new Re(i),0);let a=new sn(rt);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.wr)),!0)},o),fe.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){lt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return fe.forEach(n.mutations,s=>{const i=new Kt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Kt(n,0),s=this.br.firstAfterOrEqual(r);return fe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.Mr=e,this.docs=function(){return new It(Re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return fe.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(n))}getEntries(e,n){let r=Ss();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():xn.newInvalidDocument(s))}),fe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ss();const o=n.path,a=new Re(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Y4(J4(d),r)<=0||(s.has(d.key)||wh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return fe.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Ue()}Or(e,n){return fe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new gD(this)}getSize(e){return fe.resolve(this.size)}}class gD extends lD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),fe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.persistence=e,this.Nr=new Aa(n=>Qg(n),Xg),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new s0,this.targetCount=0,this.kr=ya.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),fe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ya(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.Kn(n),fe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),fe.waitFor(i).next(()=>s)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return fe.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),fe.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),fe.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return fe.resolve(r)}containsKey(e,n){return fe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Wg(0),this.Kr=!1,this.Kr=!0,this.$r=new fD,this.referenceDelegate=e(this),this.Ur=new yD(this),this.indexManager=new oD,this.remoteDocumentCache=function(s){return new mD(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new sD(n),this.Gr=new dD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new pD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ce("MemoryPersistence","Starting transaction:",e);const s=new xD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return fe.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class xD extends X4{constructor(e){super(),this.currentSequenceNumber=e}}class i0{constructor(e){this.persistence=e,this.Jr=new s0,this.Yr=null}static Zr(e){return new i0(e)}get Xr(){if(this.Yr)return this.Yr;throw Ue()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),fe.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Xr,r=>{const s=Re.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Ge.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return fe.or([()=>fe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Je(),s=Je();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new o0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ZN()?8:Z4(bn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new wD;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(sl()<=Ye.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",So(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),fe.resolve()):(sl()<=Ye.DEBUG&&Ce("QueryEngine","Query:",So(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(sl()<=Ye.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",So(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(n))):fe.resolve())}Yi(e,n){if(bx(n))return fe.resolve(null);let r=Zr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Rd(n,null,"F"),r=Zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Je(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,a);return this.ns(n,u,o,c.readTime)?this.Yi(e,Rd(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,s){return bx(n)||s.isEqual(Ge.min())?fe.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?fe.resolve(null):(sl()<=Ye.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),So(n)),this.rs(e,o,n,K4(s,-1)).next(a=>a))})}ts(e,n){let r=new sn(G1(e));return n.forEach((s,i)=>{wh(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return sl()<=Ye.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",So(n)),this.Ji.getDocumentsMatchingQuery(e,n,di.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new It(rt),this._s=new Aa(i=>Qg(i),Xg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function ED(t,e,n,r){return new bD(t,e,n,r)}async function hI(t,e){const n=Oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=Je();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function TD(t,e){const n=Oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const m=u.batch,g=m.keys();let y=fe.resolve();return g.forEach(b=>{y=y.next(()=>d.getEntry(c,b)).next(x=>{const w=u.docVersions.get(b);lt(w!==null),x.version.compareTo(w)<0&&(m.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Je();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function fI(t){const e=Oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function ID(t,e){const n=Oe(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,m)=>{const g=s.get(m);if(!g)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,m)));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(an.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),s=s.insert(m,y),function(x,w,v){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(g,y,d)&&a.push(n.Ur.updateTargetData(i,y))});let c=Ss(),u=Je();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(SD(i,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(Ge.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return fe.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.os=s,i))}function SD(t,e,n){let r=Je(),s=Je();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ss();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(Ge.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):Ce("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function kD(t,e){const n=Oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function CD(t,e){const n=Oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,fe.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Ys(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function fm(t,e,n){const r=Oe(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!_c(o))throw o;Ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Mx(t,e,n){const r=Oe(t);let s=Ge.min(),i=Je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const m=Oe(c),g=m._s.get(d);return g!==void 0?fe.resolve(m.os.get(g)):m.Ur.getTargetData(u,d)}(r,o,Zr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Ge.min(),n?i:Je())).next(a=>(AD(r,vM(e),a),{documents:a,Ts:i})))}function AD(t,e,n){let r=t.us.get(e)||Ge.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Dx{constructor(){this.activeTargetIds=TM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ND{constructor(){this.so=new Dx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Dx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u=null;function zf(){return _u===null?_u=function(){return 268435456+Math.round(2147483648*Math.random())}():_u++,"0x"+_u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class DD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=zf(),c=this.xo(n,r.toUriEncodedString());Ce("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(n,c,u,s).then(d=>(Ce("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw fa("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ka}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=PD[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=zf();return new Promise((o,a)=>{const c=new T1;c.setWithCredentials(!0),c.listenOnce(I1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case zu.NO_ERROR:const d=c.getResponseJson();Ce(mn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case zu.TIMEOUT:Ce(mn,`RPC '${e}' ${i} timed out`),a(new Te(ce.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:const m=c.getStatus();if(Ce(mn,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const b=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(v)>=0?v:ce.UNKNOWN}(y.status);a(new Te(b,y.message))}else a(new Te(ce.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Te(ce.UNAVAILABLE,"Connection failed."));break;default:Ue()}}finally{Ce(mn,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);Ce(mn,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const s=zf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=C1(),a=k1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");Ce(mn,`Creating RPC '${e}' stream ${s}: ${d}`,c);const m=o.createWebChannel(d,c);let g=!1,y=!1;const b=new MD({Io:w=>{y?Ce(mn,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(g||(Ce(mn,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Ce(mn,`RPC '${e}' stream ${s} sending:`,w),m.send(w))},To:()=>m.close()}),x=(w,v,_)=>{w.listen(v,T=>{try{_(T)}catch(P){setTimeout(()=>{throw P},0)}})};return x(m,fl.EventType.OPEN,()=>{y||(Ce(mn,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),x(m,fl.EventType.CLOSE,()=>{y||(y=!0,Ce(mn,`RPC '${e}' stream ${s} transport closed`),b.So())}),x(m,fl.EventType.ERROR,w=>{y||(y=!0,fa(mn,`RPC '${e}' stream ${s} transport errored:`,w),b.So(new Te(ce.UNAVAILABLE,"The operation could not be completed")))}),x(m,fl.EventType.MESSAGE,w=>{var v;if(!y){const _=w.data[0];lt(!!_);const T=_,P=T.error||((v=T[0])===null||v===void 0?void 0:v.error);if(P){Ce(mn,`RPC '${e}' stream ${s} received error:`,P);const L=P.status;let B=function(A){const N=Ut[A];if(N!==void 0)return tI(N)}(L),k=P.message;B===void 0&&(B=ce.INTERNAL,k="Unknown error status: "+L+" with message "+P.message),y=!0,b.So(new Te(B,k)),m.close()}else Ce(mn,`RPC '${e}' stream ${s} received:`,_),b.bo(_)}}),x(a,S1.STAT_EVENT,w=>{w.stat===rm.PROXY?Ce(mn,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===rm.NOPROXY&&Ce(mn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Gf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t){return new $M(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r,s,i,o,a,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new pI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Is(n.toString()),Is("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Te(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LD extends mI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=WM(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ge.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ge.min():o.readTime?es(o.readTime):Ge.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=hm(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=am(c)?{documents:YM(i,c)}:{query:lI(i,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sI(i,o.resumeToken);const u=cm(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ge.min())>0){a.readTime=Md(i,o.snapshotVersion.toTimestamp());const u=cm(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=ZM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=hm(this.serializer),n.removeTarget=e,this.a_(n)}}class jD extends mI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return lt(!!e.streamToken),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=JM(e.writeResults,e.commitTime),r=es(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=hm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>KM(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,um(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Te(ce.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,um(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(ce.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class UD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Is(n),this.D_=!1):Ce("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{fo(this)&&(Ce("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Oe(c);u.L_.add(4),await Tc(u),u.q_.set("Unknown"),u.L_.delete(4),await Sh(u)}(this))})}),this.q_=new UD(r,s)}}async function Sh(t){if(fo(t))for(const e of t.B_)await e(!0)}async function Tc(t){for(const e of t.B_)await e(!1)}function gI(t,e){const n=Oe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),u0(n)?c0(n):Na(n).r_()&&l0(n,e))}function a0(t,e){const n=Oe(t),r=Na(n);n.N_.delete(e),r.r_()&&yI(n,e),n.N_.size===0&&(r.r_()?r.o_():fo(n)&&n.q_.set("Unknown"))}function l0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Na(t).A_(e)}function yI(t,e){t.Q_.xe(e),Na(t).R_(e)}function c0(t){t.Q_=new OM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Na(t).start(),t.q_.v_()}function u0(t){return fo(t)&&!Na(t).n_()&&t.N_.size>0}function fo(t){return Oe(t).L_.size===0}function vI(t){t.Q_=void 0}async function OD(t){t.q_.set("Online")}async function BD(t){t.N_.forEach((e,n)=>{l0(t,e)})}async function zD(t,e){vI(t),u0(t)?(t.q_.M_(e),c0(t)):t.q_.set("Unknown")}async function GD(t,e,n){if(t.q_.set("Online"),e instanceof rI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){Ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dd(t,r)}else if(e instanceof Hu?t.Q_.Ke(e):e instanceof nI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ge.min()))try{const r=await fI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.N_.get(u);d&&i.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const d=i.N_.get(c);if(!d)return;i.N_.set(c,d.withResumeToken(an.EMPTY_BYTE_STRING,d.snapshotVersion)),yI(i,c);const m=new Ys(d.target,c,u,d.sequenceNumber);l0(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Ce("RemoteStore","Failed to raise snapshot:",r),await Dd(t,r)}}async function Dd(t,e,n){if(!_c(e))throw e;t.L_.add(1),await Tc(t),t.q_.set("Offline"),n||(n=()=>fI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ce("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Sh(t)})}function xI(t,e){return e().catch(n=>Dd(t,n,e))}async function kh(t){const e=Oe(t),n=fi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$D(e);)try{const s=await kD(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,HD(e,s)}catch(s){await Dd(e,s)}wI(e)&&_I(e)}function $D(t){return fo(t)&&t.O_.length<10}function HD(t,e){t.O_.push(e);const n=fi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function wI(t){return fo(t)&&!fi(t).n_()&&t.O_.length>0}function _I(t){fi(t).start()}async function qD(t){fi(t).p_()}async function WD(t){const e=fi(t);for(const n of t.O_)e.m_(n.mutations)}async function KD(t,e,n){const r=t.O_.shift(),s=t0.from(r,e,n);await xI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await kh(t)}async function JD(t,e){e&&fi(t).V_&&await async function(r,s){if(function(o){return FM(o)&&o!==ce.ABORTED}(s.code)){const i=r.O_.shift();fi(r).s_(),await xI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await kh(r)}}(t,e),wI(t)&&_I(t)}async function jx(t,e){const n=Oe(t);n.asyncQueue.verifyOperationInProgress(),Ce("RemoteStore","RemoteStore received new credentials");const r=fo(n);n.L_.add(3),await Tc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Sh(n)}async function YD(t,e){const n=Oe(t);e?(n.L_.delete(2),await Sh(n)):e||(n.L_.add(2),await Tc(n),n.q_.set("Unknown"))}function Na(t){return t.K_||(t.K_=function(n,r,s){const i=Oe(n);return i.w_(),new LD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:OD.bind(null,t),Ro:BD.bind(null,t),mo:zD.bind(null,t),d_:GD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),u0(t)?c0(t):t.q_.set("Unknown")):(await t.K_.stop(),vI(t))})),t.K_}function fi(t){return t.U_||(t.U_=function(n,r,s){const i=Oe(n);return i.w_(),new jD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qD.bind(null,t),mo:JD.bind(null,t),f_:WD.bind(null,t),g_:KD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await kh(t)):(await t.U_.stop(),t.O_.length>0&&(Ce("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new d0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function h0(t,e){if(Is("AsyncQueue",`${e}: ${t}`),_c(t))return new Te(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Re.comparator(n.key,r.key):(n,r)=>Re.comparator(n.key,r.key),this.keyedMap=pl(),this.sortedSet=new It(this.comparator)}static emptySet(e){return new Yo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.W_=new It(Re.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ue():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class va{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new va(e,n,Yo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class XD{constructor(){this.queries=Ux(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Oe(n),i=s.queries;s.queries=Ux(),i.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})})(this,new Te(ce.ABORTED,"Firestore shutting down"))}}function Ux(){return new Aa(t=>z1(t),xh)}async function bI(t,e){const n=Oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new QD,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=h0(o,`Initialization of query '${So(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&f0(n)}async function EI(t,e){const n=Oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ZD(t,e){const n=Oe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&f0(n)}function e5(t,e,n){const r=Oe(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function f0(t){t.Y_.forEach(e=>{e.next()})}var pm,Vx;(Vx=pm||(pm={})).ea="default",Vx.Cache="cache";class TI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new va(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==pm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.key=e}}class SI{constructor(e){this.key=e}}class t5{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Je(),this.mutatedKeys=Je(),this.Aa=G1(e),this.Ra=new Yo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Fx,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const g=s.get(d),y=wh(this.query,m)?m:null,b=!!g&&this.mutatedKeys.has(g.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let w=!1;g&&y?g.data.isEqual(y.data)?b!==x&&(r.track({type:3,doc:y}),w=!0):this.ga(g,y)||(r.track({type:2,doc:y}),w=!0,(c&&this.Aa(y,c)>0||u&&this.Aa(y,u)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),w=!0):g&&!y&&(r.track({type:1,doc:g}),w=!0,(c||u)&&(a=!0)),w&&(y?(o=o.add(y),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,m)=>function(y,b){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue()}};return x(y)-x(b)}(d.type,m.type)||this.Aa(d.doc,m.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new va(this.query,e.Ra,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Fx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Je(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new SI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new II(r))}),n}ba(e){this.Ta=e.Ts,this.da=Je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return va.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class n5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class r5{constructor(e){this.key=e,this.va=!1}}class s5{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Aa(a=>z1(a),xh),this.Ma=new Map,this.xa=new Set,this.Oa=new It(Re.comparator),this.Na=new Map,this.La=new s0,this.Ba={},this.ka=new Map,this.qa=ya.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function i5(t,e,n=!0){const r=PI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await kI(r,e,n,!0),s}async function o5(t,e){const n=PI(t);await kI(n,e,!0,!1)}async function kI(t,e,n,r){const s=await CD(t.localStore,Zr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await a5(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&gI(t.remoteStore,s),a}async function a5(t,e,n,r,s){t.Ka=(m,g,y)=>async function(x,w,v,_){let T=w.view.ma(v);T.ns&&(T=await Mx(x.localStore,w.query,!1).then(({documents:k})=>w.view.ma(k,T)));const P=_&&_.targetChanges.get(w.targetId),L=_&&_.targetMismatches.get(w.targetId)!=null,B=w.view.applyChanges(T,x.isPrimaryClient,P,L);return Bx(x,w.targetId,B.wa),B.snapshot}(t,m,g,y);const i=await Mx(t.localStore,e,!0),o=new t5(e,i.Ts),a=o.ma(i.documents),c=Ec.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);Bx(t,n,u.wa);const d=new n5(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function l5(t,e,n){const r=Oe(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!xh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await fm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&a0(r.remoteStore,s.targetId),mm(r,s.targetId)}).catch(wc)):(mm(r,s.targetId),await fm(r.localStore,s.targetId,!0))}async function c5(t,e){const n=Oe(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),a0(n.remoteStore,r.targetId))}async function u5(t,e,n){const r=y5(t);try{const s=await function(o,a){const c=Oe(o),u=qt.now(),d=a.reduce((y,b)=>y.add(b.key),Je());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Ss(),x=Je();return c.cs.getEntries(y,d).next(w=>{b=w,b.forEach((v,_)=>{_.isValidDocument()||(x=x.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,b)).next(w=>{m=w;const v=[];for(const _ of a){const T=RM(_,m.get(_.key).overlayedDocument);T!=null&&v.push(new xi(_.key,T,M1(T.value.mapValue),An.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,v,a)}).next(w=>{g=w;const v=w.applyToLocalDocumentSet(m,x);return c.documentOverlayCache.saveOverlays(y,w.batchId,v)})}).then(()=>({batchId:g.batchId,changes:H1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new It(rt)),u=u.insert(a,c),o.Ba[o.currentUser.toKey()]=u}(r,s.batchId,n),await Ic(r,s.changes),await kh(r.remoteStore)}catch(s){const i=h0(s,"Failed to persist write");n.reject(i)}}async function CI(t,e){const n=Oe(t);try{const r=await ID(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?lt(o.va):s.removedDocuments.size>0&&(lt(o.va),o.va=!1))}),await Ic(n,r,e)}catch(r){await wc(r)}}function Ox(t,e,n){const r=Oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=Oe(o);c.onlineState=a;let u=!1;c.queries.forEach((d,m)=>{for(const g of m.j_)g.Z_(a)&&(u=!0)}),u&&f0(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function d5(t,e,n){const r=Oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new It(Re.comparator);o=o.insert(i,xn.newNoDocument(i,Ge.min()));const a=Je().add(i),c=new Th(Ge.min(),new Map,new It(rt),o,a);await CI(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),p0(r)}else await fm(r.localStore,e,!1).then(()=>mm(r,e,n)).catch(wc)}async function h5(t,e){const n=Oe(t),r=e.batch.batchId;try{const s=await TD(n.localStore,e);NI(n,r,null),AI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ic(n,s)}catch(s){await wc(s)}}async function f5(t,e,n){const r=Oe(t);try{const s=await function(o,a){const c=Oe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(m=>(lt(m!==null),d=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);NI(r,e,n),AI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ic(r,s)}catch(s){await wc(s)}}function AI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function NI(t,e,n){const r=Oe(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function mm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||RI(t,r)})}function RI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(a0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),p0(t))}function Bx(t,e,n){for(const r of n)r instanceof II?(t.La.addReference(r.key,e),p5(t,r)):r instanceof SI?(Ce("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||RI(t,r.key)):Ue()}function p5(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ce("SyncEngine","New document in limbo: "+n),t.xa.add(r),p0(t))}function p0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Re(xt.fromString(e)),r=t.qa.next();t.Na.set(r,new r5(n)),t.Oa=t.Oa.insert(n,r),gI(t.remoteStore,new Ys(Zr(Zg(n.path)),r,"TargetPurposeLimboResolution",Wg.oe))}}async function Ic(t,e,n){const r=Oe(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const m=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(u){s.push(u);const m=o0.Wi(c.targetId,u);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,u){const d=Oe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>fe.forEach(u,g=>fe.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(m,g.targetId,y)).next(()=>fe.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(m,g.targetId,y)))))}catch(m){if(!_c(m))throw m;Ce("LocalStore","Failed to update sequence numbers: "+m)}for(const m of u){const g=m.targetId;if(!m.fromCache){const y=d.os.get(g),b=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(b);d.os=d.os.insert(g,x)}}}(r.localStore,i))}async function m5(t,e){const n=Oe(t);if(!n.currentUser.isEqual(e)){Ce("SyncEngine","User change. New user:",e.toKey());const r=await hI(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(c=>{c.reject(new Te(ce.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ic(n,r.hs)}}function g5(t,e){const n=Oe(t),r=n.Na.get(e);if(r&&r.va)return Je().add(r.key);{let s=Je();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function PI(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=CI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d5.bind(null,e),e.Ca.d_=ZD.bind(null,e.eventManager),e.Ca.$a=e5.bind(null,e.eventManager),e}function y5(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f5.bind(null,e),e}class Ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ih(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return ED(this.persistence,new _D,e.initialUser,this.serializer)}Ga(e){return new vD(i0.Zr,this.serializer)}Wa(e){return new ND}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ld.provider={build:()=>new Ld};class gm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ox(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=m5.bind(null,this.syncEngine),await YD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XD}()}createDatastore(e){const n=Ih(e.databaseInfo.databaseId),r=function(i){return new DD(i)}(e.databaseInfo);return function(i,o,a,c){return new FD(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new VD(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ox(this.syncEngine,n,0),function(){return Lx.D()?new Lx:new RD}())}createSyncEngine(e,n){return function(s,i,o,a,c,u,d){const m=new s5(s,i,o,a,c,u);return d&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Oe(s);Ce("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Tc(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}gm.provider={build:()=>new gm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Is("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=yn.UNAUTHENTICATED,this.clientId=N1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Ce("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ce("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=h0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $f(t,e){t.asyncQueue.verifyOperationInProgress(),Ce("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await hI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function zx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await x5(t);Ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>jx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>jx(e.remoteStore,s)),t._onlineComponents=e}async function x5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await $f(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ce.FAILED_PRECONDITION||s.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fa("Error using user provided cache. Falling back to memory cache: "+n),await $f(t,new Ld)}}else Ce("FirestoreClient","Using default OfflineComponentProvider"),await $f(t,new Ld);return t._offlineComponents}async function m0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ce("FirestoreClient","Using user provided OnlineComponentProvider"),await zx(t,t._uninitializedComponentsProvider._online)):(Ce("FirestoreClient","Using default OnlineComponentProvider"),await zx(t,new gm))),t._onlineComponents}function w5(t){return m0(t).then(e=>e.syncEngine)}function _5(t){return m0(t).then(e=>e.datastore)}async function DI(t){const e=await m0(t),n=e.eventManager;return n.onListen=i5.bind(null,e.syncEngine),n.onUnlisten=l5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=o5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=c5.bind(null,e.syncEngine),n}function b5(t,e,n={}){const r=new Xr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const d=new MI({next:g=>{d.Za(),o.enqueueAndForget(()=>EI(i,m));const y=g.docs.has(a);!y&&g.fromCache?u.reject(new Te(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?u.reject(new Te(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),m=new TI(Zg(a.path),d,{includeMetadataChanges:!0,_a:!0});return bI(i,m)}(await DI(t),t.asyncQueue,e,n,r)),r.promise}function E5(t,e,n={}){const r=new Xr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const d=new MI({next:g=>{d.Za(),o.enqueueAndForget(()=>EI(i,m)),g.fromCache&&c.source==="server"?u.reject(new Te(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),m=new TI(a,d,{includeMetadataChanges:!0,_a:!0});return bI(i,m)}(await DI(t),t.asyncQueue,e,n,r)),r.promise}function T5(t,e,n){const r=new Xr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await _5(t);r.resolve(async function(o,a,c){var u;const d=Oe(o),{request:m,ut:g,parent:y}=QM(d.serializer,yM(a),c);d.connection.Fo||delete m.parent;const b=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,y,m,1)).filter(w=>!!w.result);lt(b.length===1);const x=(u=b[0].result)===null||u===void 0?void 0:u.aggregateFields;return Object.keys(x).reduce((w,v)=>(w[g[v]]=x[v],w),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t,e,n){if(!n)throw new Te(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function I5(t,e,n,r){if(e===!0&&r===!0)throw new Te(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $x(t){if(!Re.isDocumentKey(t))throw new Te(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hx(t){if(Re.isDocumentKey(t))throw new Te(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ch(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ue()}function nr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Te(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ch(t);throw new Te(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function S5(t,e){if(e<=0)throw new Te(ce.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Te(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}I5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ah{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new V4;switch(r.type){case"firstParty":return new G4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gx.get(n);r&&(Ce("ComponentProvider","Removing Datastore"),Gx.delete(n),r.terminate())}(this),Promise.resolve()}}function k5(t,e,n,r={}){var s;const i=(t=nr(t,Ah))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=yn.MOCK_USER;else{a=WN(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Te(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new yn(u)}t._authCredentials=new O4(new A1(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wi(this.firestore,e,this._query)}}class Nn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}}class li extends wi{constructor(e,n,r){super(e,n,Zg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new Re(e))}withConverter(e){return new li(this.firestore,e,this._path)}}function St(t,e,...n){if(t=Bt(t),jI("collection","path",e),t instanceof Ah){const r=xt.fromString(e,...n);return Hx(r),new li(t,null,r)}{if(!(t instanceof Nn||t instanceof li))throw new Te(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xt.fromString(e,...n));return Hx(r),new li(t.firestore,null,r)}}function Rt(t,e,...n){if(t=Bt(t),arguments.length===1&&(e=N1.newId()),jI("doc","path",e),t instanceof Ah){const r=xt.fromString(e,...n);return $x(r),new Nn(t,null,new Re(r))}{if(!(t instanceof Nn||t instanceof li))throw new Te(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xt.fromString(e,...n));return $x(r),new Nn(t.firestore,t instanceof li?t.converter:null,new Re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new pI(this,"async_queue_retry"),this.Vu=()=>{const r=Gf();r&&Ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Gf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Gf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Xr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_c(e))throw e;Ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Is("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=d0.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Rs extends Ah{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Wx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wx(e),this._firestoreClient=void 0,await e}}}function C5(t,e){const n=typeof t=="object"?t:Og(),r=typeof t=="string"?t:"(default)",s=uo(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=HN("firestore");i&&k5(s,...i)}return s}function Sc(t){if(t._terminated)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||A5(t),t._firestoreClient}function A5(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,u,d){return new rM(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,LI(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new v5(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class R5{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xa(an.fromBase64String(e))}catch(n){throw new Te(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xa(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Te(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Te(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Te(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=/^__.*__$/;class M5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xi(e,this.data,this.fieldMask,n,this.fieldTransforms):new bc(e,this.data,n,this.fieldTransforms)}}class FI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new xi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue()}}class v0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new v0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(UI(this.Cu)&&P5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class D5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ih(e)}Qu(e,n,r,s=!1){return new v0({Cu:e,methodName:n,qu:r,path:nn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cc(t){const e=t._freezeSettings(),n=Ih(t._databaseId);return new D5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function x0(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);_0("Data must be an object, but it was:",o,r);const a=BI(r,o);let c,u;if(i.merge)c=new Qn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const g=ym(e,m,n);if(!o.contains(g))throw new Te(ce.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);GI(d,g)||d.push(g)}c=new Qn(d),u=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=o.fieldTransforms;return new M5(new Un(a),c,u)}class Rh extends Nh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rh}}class w0 extends Nh{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new dc(e.serializer,K1(e.serializer,this.$u));return new kM(e.path,n)}isEqual(e){return e instanceof w0&&this.$u===e.$u}}function VI(t,e,n,r){const s=t.Qu(1,e,n);_0("Data must be an object, but it was:",s,r);const i=[],o=Un.empty();ho(r,(c,u)=>{const d=b0(e,c,n);u=Bt(u);const m=s.Nu(d);if(u instanceof Rh)i.push(d);else{const g=Ac(u,m);g!=null&&(i.push(d),o.set(d,g))}});const a=new Qn(i);return new FI(o,a,s.fieldTransforms)}function OI(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[ym(e,r,n)],c=[s];if(i.length%2!=0)throw new Te(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(ym(e,i[g])),c.push(i[g+1]);const u=[],d=Un.empty();for(let g=a.length-1;g>=0;--g)if(!GI(u,a[g])){const y=a[g];let b=c[g];b=Bt(b);const x=o.Nu(y);if(b instanceof Rh)u.push(y);else{const w=Ac(b,x);w!=null&&(u.push(y),d.set(y,w))}}const m=new Qn(u);return new FI(d,m,o.fieldTransforms)}function L5(t,e,n,r=!1){return Ac(n,t.Qu(r?4:3,e))}function Ac(t,e){if(zI(t=Bt(t)))return _0("Unsupported field value:",e,t),BI(t,e);if(t instanceof Nh)return function(r,s){if(!UI(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=Ac(a,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return K1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=qt.fromDate(r);return{timestampValue:Md(s.serializer,i)}}if(r instanceof qt){const i=new qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Md(s.serializer,i)}}if(r instanceof g0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xa)return{bytesValue:sI(s.serializer,r._byteString)};if(r instanceof Nn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:r0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof y0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return e0(a.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Ch(r)}`)}(t,e)}function BI(t,e){const n={};return R1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(t,(r,s)=>{const i=Ac(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function zI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qt||t instanceof g0||t instanceof xa||t instanceof Nn||t instanceof Nh||t instanceof y0)}function _0(t,e,n){if(!zI(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ch(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function ym(t,e,n){if((e=Bt(e))instanceof kc)return e._internalPath;if(typeof e=="string")return b0(t,e);throw jd("Field path arguments must be of type string or ",t,!1,void 0,n)}const j5=new RegExp("[~\\*/\\[\\]]");function b0(t,e,n){if(e.search(j5)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new kc(...e.split("."))._internalPath}catch{throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Te(ce.INVALID_ARGUMENT,a+t+c)}function GI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ph("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class F5 extends $I{data(){return super.data()}}function Ph(t,e){return typeof e=="string"?b0(t,e):e instanceof kc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Te(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E0{}class T0 extends E0{}function rr(t,e,...n){let r=[];e instanceof E0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof I0).length,a=i.filter(c=>c instanceof Mh).length;if(o>1||o>0&&a>0)throw new Te(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Mh extends T0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mh(e,n,r)}_apply(e){const n=this._parse(e);return HI(e._query,n),new wi(e.firestore,e.converter,lm(e._query,n))}_parse(e){const n=Cc(e.firestore);return function(i,o,a,c,u,d,m){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Te(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Jx(m,d);const y=[];for(const b of m)y.push(Kx(c,i,b));g={arrayValue:{values:y}}}else g=Kx(c,i,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Jx(m,d),g=L5(a,o,m,d==="in"||d==="not-in");return Ot.create(u,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function no(t,e,n){const r=e,s=Ph("where",t);return Mh._create(s,r,n)}class I0 extends E0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new I0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Or.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)HI(o,c),o=lm(o,c)}(e._query,n),new wi(e.firestore,e.converter,lm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class S0 extends T0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new S0(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Te(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Te(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lc(i,o)}(e._query,this._field,this._direction);return new wi(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ca(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function wa(t,e="asc"){const n=e,r=Ph("orderBy",t);return S0._create(r,n)}class k0 extends T0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new k0(e,n,r)}_apply(e){return new wi(e.firestore,e.converter,Rd(e._query,this._limit,this._limitType))}}function ro(t){return S5("limit",t),k0._create("limit",t,"F")}function Kx(t,e,n){if(typeof(n=Bt(n))=="string"){if(n==="")throw new Te(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!O1(e)&&n.indexOf("/")!==-1)throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xt.fromString(n));if(!Re.isDocumentKey(r))throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gx(t,new Re(r))}if(n instanceof Nn)return gx(t,n._key);throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ch(n)}.`)}function Jx(t,e){if(!Array.isArray(t)||t.length===0)throw new Te(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HI(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Te(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class V5{convertValue(e,n="none"){switch(to(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ho(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Pt(o.doubleValue));return new y0(i)}convertGeoPoint(e){return new g0(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){const n=hi(e);return new qt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xt.fromString(e);lt(dI(r));const s=new oc(r.get(1),r.get(3)),i=new Re(r.popFirst(5));return s.isEqual(n)||Is(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function O5(){return new N5("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qI extends $I{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ph("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qu extends qI{data(e={}){return super.data(e)}}class B5{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new gl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qu(this._firestore,this._userDataWriter,r.key,r,new gl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Te(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new qu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new gl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new qu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new gl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:z5(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function z5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(t){t=nr(t,Nn);const e=nr(t.firestore,Rs);return b5(Sc(e),t._key).then(n=>G5(e,t,n))}class A0 extends V5{constructor(e){super(),this.firestore=e}convertBytes(e){return new xa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,n)}}function sr(t){t=nr(t,wi);const e=nr(t.firestore,Rs),n=Sc(e),r=new A0(e);return U5(t._query),E5(n,t._query).then(s=>new B5(e,r,t,s))}function Lh(t,e,n){t=nr(t,Nn);const r=nr(t.firestore,Rs),s=C0(t.converter,e,n);return Rc(r,[x0(Cc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,An.none())])}function Ra(t,e,n,...r){t=nr(t,Nn);const s=nr(t.firestore,Rs),i=Cc(s);let o;return o=typeof(e=Bt(e))=="string"||e instanceof kc?OI(i,"updateDoc",t._key,e,n,r):VI(i,"updateDoc",t._key,e),Rc(s,[o.toMutation(t._key,An.exists(!0))])}function Nc(t){return Rc(nr(t.firestore,Rs),[new Eh(t._key,An.none())])}function po(t,e){const n=nr(t.firestore,Rs),r=Rt(t),s=C0(t.converter,e);return Rc(n,[x0(Cc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,An.exists(!1))]).then(()=>r)}function Rc(t,e){return function(r,s){const i=new Xr;return r.asyncQueue.enqueueAndForget(async()=>u5(await w5(r),s,i)),i.promise}(Sc(t),e)}function G5(t,e,n){const r=n.docs.get(e._key),s=new A0(t);return new qI(t,s,e._key,r,new gl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t){return $5(t,{count:O5()})}function $5(t,e){const n=nr(t.firestore,Rs),r=Sc(n),s=tM(e,(i,o)=>new LM(o,i.aggregateType,i._internalFieldPath));return T5(r,t._query,s).then(i=>function(a,c,u){const d=new A0(a);return new R5(c,d,u)}(n,t,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Cc(e)}set(e,n,r){this._verifyNotCommitted();const s=Hf(e,this._firestore),i=C0(s.converter,n,r),o=x0(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,An.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Hf(e,this._firestore);let o;return o=typeof(n=Bt(n))=="string"||n instanceof kc?OI(this._dataReader,"WriteBatch.update",i._key,n,r,s):VI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,An.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Hf(e,this._firestore);return this._mutations=this._mutations.concat(new Eh(n._key,An.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hf(t,e){if((t=Bt(t)).firestore!==e)throw new Te(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function vm(t){return new w0("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t){return Sc(t=nr(t,Rs)),new H5(t,e=>Rc(t,e))}(function(e,n=!0){(function(s){ka=s})(Sa),ns(new Vr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Rs(new B4(r.getProvider("auth-internal")),new H4(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Te(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oc(u.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),yr(dx,"4.7.3",e),yr(dx,"4.7.3","esm2017")})();function R0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function WI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const q5=WI,KI=new co("auth","Firebase",WI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=new mh("@firebase/auth");function W5(t,...e){Fd.logLevel<=Ye.WARN&&Fd.warn(`Auth (${Sa}): ${t}`,...e)}function Wu(t,...e){Fd.logLevel<=Ye.ERROR&&Fd.error(`Auth (${Sa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t,...e){throw M0(t,...e)}function Lr(t,...e){return M0(t,...e)}function P0(t,e,n){const r=Object.assign(Object.assign({},q5()),{[e]:n});return new co("auth","Firebase",r).create(e,{appName:t.name})}function $i(t){return P0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function K5(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ss(t,"argument-error"),P0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function M0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return KI.create(t,...e)}function Fe(t,e,...n){if(!t)throw M0(e,...n)}function ps(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wu(e),new Error(e)}function ks(t,e){t||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function J5(){return Yx()==="http:"||Yx()==="https:"}function Yx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J5()||qT()||"connection"in navigator)?navigator.onLine:!0}function Q5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ks(n>e,"Short delay should be less than long delay!"),this.isMobile=KN()||QN()}get(){return Y5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t,e){ks(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=new Mc(3e4,6e4);function L0(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pa(t,e,n,r,s={}){return YI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=xc(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return YN()||(u.referrerPolicy="no-referrer"),JI.fetch()(QI(t,t.config.apiHost,n,a),u)})}async function YI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},X5),e);try{const s=new tL(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw bu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw bu(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw bu(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw bu(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw P0(t,d,u);ss(t,d)}}catch(s){if(s instanceof Br)throw s;ss(t,"network-request-failed",{message:String(s)})}}async function eL(t,e,n,r,s={}){const i=await Pa(t,e,n,r,s);return"mfaPendingCredential"in i&&ss(t,"multi-factor-auth-required",{_serverResponse:i}),i}function QI(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?D0(t.config,s):`${t.config.apiScheme}://${s}`}class tL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Lr(this.auth,"network-request-failed")),Z5.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Lr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(t,e){return Pa(t,"POST","/v1/accounts:delete",e)}async function XI(t,e){return Pa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rL(t,e=!1){const n=Bt(t),r=await n.getIdToken(e),s=j0(r);Fe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Pl(qf(s.auth_time)),issuedAtTime:Pl(qf(s.iat)),expirationTime:Pl(qf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function qf(t){return Number(t)*1e3}function j0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wu("JWT malformed, contained fewer than 3 sections"),null;try{const s=zT(n);return s?JSON.parse(s):(Wu("Failed to decode base64 JWT payload"),null)}catch(s){return Wu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Qx(t){const e=j0(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Br&&sL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function sL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pl(this.lastLoginAt),this.creationTime=Pl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(t){var e;const n=t.auth,r=await t.getIdToken(),s=await hc(t,XI(n,{idToken:r}));Fe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ZI(i.providerUserInfo):[],a=aL(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=c?u:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new wm(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function oL(t){const e=Bt(t);await Ud(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aL(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ZI(t){return t.map(e=>{var{providerId:n}=e,r=R0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(t,e){const n=await YI(t,{},async()=>{const r=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=QI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",JI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cL(t,e){return Pa(t,"POST","/v2/accounts:revokeToken",L0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=Qx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await lL(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Qo;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Fe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Fe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qo,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ms{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=R0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await hc(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rL(this,e)}reload(){return oL(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ms(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ud(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fs(this.auth.app))return Promise.reject($i(this.auth));const e=await this.getIdToken();return await hc(this,nL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,c,u,d;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,_=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:P,isAnonymous:L,providerData:B,stsTokenManager:k}=n;Fe(T&&k,e,"internal-error");const I=Qo.fromJSON(this.name,k);Fe(typeof T=="string",e,"internal-error"),Us(m,e.name),Us(g,e.name),Fe(typeof P=="boolean",e,"internal-error"),Fe(typeof L=="boolean",e,"internal-error"),Us(y,e.name),Us(b,e.name),Us(x,e.name),Us(w,e.name),Us(v,e.name),Us(_,e.name);const A=new ms({uid:T,auth:e,email:g,emailVerified:P,displayName:m,isAnonymous:L,photoURL:b,phoneNumber:y,tenantId:x,stsTokenManager:I,createdAt:v,lastLoginAt:_});return B&&Array.isArray(B)&&(A.providerData=B.map(N=>Object.assign({},N))),w&&(A._redirectEventId=w),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new Qo;s.updateFromServerResponse(n);const i=new ms({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ud(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Fe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ZI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Qo;a.updateFromIdToken(r);const c=new ms({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new wm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=new Map;function gs(t){ks(t instanceof Function,"Expected a class definition");let e=Xx.get(t);return e?(ks(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}eS.type="NONE";const Zx=eS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t,e,n){return`firebase:${t}:${e}:${n}`}class Xo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ku(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ku("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ms._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xo(gs(Zx),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||gs(Zx);const o=Ku(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const m=ms._fromJSON(e,d);u!==i&&(a=m),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Xo(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Xo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oS(e))return"Blackberry";if(aS(e))return"Webos";if(nS(e))return"Safari";if((e.includes("chrome/")||rS(e))&&!e.includes("edge/"))return"Chrome";if(iS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function tS(t=bn()){return/firefox\//i.test(t)}function nS(t=bn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rS(t=bn()){return/crios\//i.test(t)}function sS(t=bn()){return/iemobile/i.test(t)}function iS(t=bn()){return/android/i.test(t)}function oS(t=bn()){return/blackberry/i.test(t)}function aS(t=bn()){return/webos/i.test(t)}function F0(t=bn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uL(t=bn()){var e;return F0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dL(){return XN()&&document.documentMode===10}function lS(t=bn()){return F0(t)||iS(t)||aS(t)||oS(t)||/windows phone/i.test(t)||sS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(t,e=[]){let n;switch(t){case"Browser":n=ew(bn());break;case"Worker":n=`${ew(bn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fL(t,e={}){return Pa(t,"GET","/v2/passwordPolicy",L0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=6;class mL{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:pL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tw(this),this.idTokenSubscription=new tw(this),this.beforeStateQueue=new hL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gs(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Xo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await XI(this,{idToken:e}),r=await ms._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(fs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ud(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Q5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fs(this.app))return Promise.reject($i(this));const n=e?Bt(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fs(this.app)?Promise.reject($i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fs(this.app)?Promise.reject($i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fL(this),n=new mL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new co("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gs(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await Xo.create(this,[gs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&W5(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function jh(t){return Bt(t)}class tw{constructor(e){this.auth=e,this.observer=null,this.addObserver=iR(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yL(t){U0=t}function vL(t){return U0.loadJS(t)}function xL(){return U0.gapiScript}function wL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t,e){const n=uo(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(nc(i,e??{}))return s;ss(s,"already-initialized")}return n.initialize({options:e})}function bL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function EL(t,e,n){const r=jh(t);Fe(r._canInitEmulator,r,"emulator-config-failed"),Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=uS(e),{host:o,port:a}=TL(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),IL()}function uS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TL(t){const e=uS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:nw(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:nw(o)}}}function nw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,n){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(t,e){return eL(t,"POST","/v1/accounts:signInWithIdp",L0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL="http://localhost";class so extends dS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ss("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=R0(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new so(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Zo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Zo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zo(e,n)}buildRequest(){const e={requestUri:SL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends V0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends Dc{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.FACEBOOK_SIGN_IN_METHOD="facebook.com";$s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return so._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return us.credential(n,r)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Dc{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.GITHUB_SIGN_IN_METHOD="github.com";Hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Dc{constructor(){super("twitter.com")}static credential(e,n){return so._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qs.credential(n,r)}catch{return null}}}qs.TWITTER_SIGN_IN_METHOD="twitter.com";qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ms._fromIdTokenResponse(e,r,s),o=rw(r);return new _a({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=rw(r);return new _a({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function rw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends Br{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Vd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Vd(e,n,r,s)}}function hS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Vd._fromErrorAndOperation(t,i,e,r):i})}async function kL(t,e,n=!1){const r=await hc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _a._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CL(t,e,n=!1){const{auth:r}=t;if(fs(r.app))return Promise.reject($i(r));const s="reauthenticate";try{const i=await hc(t,hS(r,s,e,t),n);Fe(i.idToken,r,"internal-error");const o=j0(i.idToken);Fe(o,r,"internal-error");const{sub:a}=o;return Fe(t.uid===a,r,"user-mismatch"),_a._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ss(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AL(t,e,n=!1){if(fs(t.app))return Promise.reject($i(t));const r="signIn",s=await hS(t,r,e),i=await _a._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function NL(t,e,n,r){return Bt(t).onIdTokenChanged(e,n,r)}function RL(t,e,n){return Bt(t).beforeAuthStateChanged(e,n)}function PL(t){return Bt(t).signOut()}const Od="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Od,"1"),this.storage.removeItem(Od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=1e3,DL=10;class pS extends fS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);dL()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,DL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ML)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pS.type="LOCAL";const LL=pS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS extends fS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mS.type="SESSION";const gS=mS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Fh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await jL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=O0("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function UL(t){ts().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function VL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function BL(){return yS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="firebaseLocalStorageDb",zL=1,Bd="firebaseLocalStorage",xS="fbase_key";class Lc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Uh(t,e){return t.transaction([Bd],e?"readwrite":"readonly").objectStore(Bd)}function GL(){const t=indexedDB.deleteDatabase(vS);return new Lc(t).toPromise()}function _m(){const t=indexedDB.open(vS,zL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Bd,{keyPath:xS})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Bd)?e(r):(r.close(),await GL(),e(await _m()))})})}async function sw(t,e,n){const r=Uh(t,!0).put({[xS]:e,value:n});return new Lc(r).toPromise()}async function $L(t,e){const n=Uh(t,!1).get(e),r=await new Lc(n).toPromise();return r===void 0?null:r.value}function iw(t,e){const n=Uh(t,!0).delete(e);return new Lc(n).toPromise()}const HL=800,qL=3;class wS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _m(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>qL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fh._getInstance(BL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await VL(),!this.activeServiceWorker)return;this.sender=new FL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _m();return await sw(e,Od,"1"),await iw(e,Od),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$L(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>iw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Uh(s,!1).getAll();return new Lc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wS.type="LOCAL";const WL=wS;new Mc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t,e){return e?gs(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0 extends dS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function KL(t){return AL(t.auth,new B0(t),t.bypassAuthState)}function JL(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),CL(n,new B0(t),t.bypassAuthState)}async function YL(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),kL(n,new B0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KL;case"linkViaPopup":case"linkViaRedirect":return YL;case"reauthViaPopup":case"reauthViaRedirect":return JL;default:ss(this.auth,"internal-error")}}resolve(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=new Mc(2e3,1e4);async function XL(t,e,n){if(fs(t.app))return Promise.reject(Lr(t,"operation-not-supported-in-this-environment"));const r=jh(t);K5(t,e,V0);const s=_S(r,n);return new Oi(r,"signInViaPopup",e,s).executeNotNull()}class Oi extends bS{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Oi.currentPopupAction&&Oi.currentPopupAction.cancel(),Oi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){ks(this.filter.length===1,"Popup operations only handle one event");const e=O0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QL.get())};e()}}Oi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL="pendingRedirect",Ju=new Map;class ej extends bS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const r=await tj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tj(t,e){const n=sj(e),r=rj(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function nj(t,e){Ju.set(t._key(),e)}function rj(t){return gs(t._redirectPersistence)}function sj(t){return Ku(ZL,t.config.apiKey,t.name)}async function ij(t,e,n=!1){if(fs(t.app))return Promise.reject($i(t));const r=jh(t),s=_S(r,e),o=await new ej(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=10*60*1e3;class aj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ES(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Lr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oj&&this.cachedEventUids.clear(),this.cachedEventUids.has(ow(e))}saveEventToCache(e){this.cachedEventUids.add(ow(e)),this.lastProcessedEventTime=Date.now()}}function ow(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ES({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ES(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cj(t,e={}){return Pa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dj=/^https?/;async function hj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cj(t);for(const n of e)try{if(fj(n))return}catch{}ss(t,"unauthorized-domain")}function fj(t){const e=xm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!dj.test(n))return!1;if(uj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=new Mc(3e4,6e4);function aw(){const t=ts().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function mj(t){return new Promise((e,n)=>{var r,s,i;function o(){aw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aw(),n(Lr(t,"network-request-failed"))},timeout:pj.get()})}if(!((s=(r=ts().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ts().gapi)===null||i===void 0)&&i.load)o();else{const a=wL("iframefcb");return ts()[a]=()=>{gapi.load?o():n(Lr(t,"network-request-failed"))},vL(`${xL()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Yu=null,e})}let Yu=null;function gj(t){return Yu=Yu||mj(t),Yu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=new Mc(5e3,15e3),vj="__/auth/iframe",xj="emulator/auth/iframe",wj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_j=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bj(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?D0(e,xj):`https://${t.config.authDomain}/${vj}`,r={apiKey:e.apiKey,appName:t.name,v:Sa},s=_j.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${xc(r).slice(1)}`}async function Ej(t){const e=await gj(t),n=ts().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:bj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wj,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Lr(t,"network-request-failed"),a=ts().setTimeout(()=>{i(o)},yj.get());function c(){ts().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ij=500,Sj=600,kj="_blank",Cj="http://localhost";class lw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Aj(t,e,n,r=Ij,s=Sj){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Tj),{width:r.toString(),height:s.toString(),top:i,left:o}),u=bn().toLowerCase();n&&(a=rS(u)?kj:n),tS(u)&&(e=e||Cj,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[y,b])=>`${g}${y}=${b},`,"");if(uL(u)&&a!=="_self")return Nj(e||"",a),new lw(null);const m=window.open(e||"",a,d);Fe(m,t,"popup-blocked");try{m.focus()}catch{}return new lw(m)}function Nj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj="__/auth/handler",Pj="emulator/auth/handler",Mj=encodeURIComponent("fac");async function cw(t,e,n,r,s,i){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Sa,eventId:s};if(e instanceof V0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",sR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof Dc){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await t._getAppCheckToken(),u=c?`#${Mj}=${encodeURIComponent(c)}`:"";return`${Dj(t)}?${xc(a).slice(1)}${u}`}function Dj({config:t}){return t.emulator?D0(t,Pj):`https://${t.authDomain}/${Rj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="webStorageSupport";class Lj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gS,this._completeRedirectFn=ij,this._overrideRedirectResult=nj}async _openPopup(e,n,r,s){var i;ks((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await cw(e,n,r,xm(),s);return Aj(e,o,O0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await cw(e,n,r,xm(),s);return UL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ks(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Ej(e),r=new aj(e);return n.register("authEvent",s=>(Fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wf,{type:Wf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Wf];o!==void 0&&n(!!o),ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lS()||nS()||F0()}}const jj=Lj;var uw="@firebase/auth",dw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Vj(t){ns(new Vr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cS(t)},u=new gL(r,s,i,c);return bL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ns(new Vr("auth-internal",e=>{const n=jh(e.getProvider("auth").getImmediate());return(r=>new Fj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(uw,dw,Uj(t)),yr(uw,dw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=5*60,Bj=HT("authIdTokenMaxAge")||Oj;let hw=null;const zj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Bj)return;const s=n==null?void 0:n.token;hw!==s&&(hw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Gj(t=Og()){const e=uo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_L(t,{popupRedirectResolver:jj,persistence:[WL,LL,gS]}),r=HT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=zj(i.toString());RL(n,o,()=>o(n.currentUser)),NL(n,a=>o(a))}}const s=GT("auth");return s&&EL(n,`http://${s}`),n}function $j(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}yL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Lr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",$j().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Vj("Browser");const Hj={apiKey:"AIzaSyDjgrBvKUaVg9U1XustHj9TeO4lHZDrcNg",authDomain:"fanra-dev.firebaseapp.com",projectId:"fanra-dev",storageBucket:"fanra-dev.firebasestorage.app",messagingSenderId:"664735861834",appId:"1:664735861834:web:6519570201553dbe4faab3",measurementId:"G-HMKEVZS65H"},z0=XT(Hj);L4(z0);const Ve=C5(z0),TS=Gj(z0),qj=new us,Ma="users",IS="chats",fc="shared_api_keys",jc="gallery_photos_production",Da="blog_posts_production",La="music_playlist",SS="site_content",kS="analytics_daily",G0="analytics_logs",CS="analytics_counts",Vh="messages",Kf=5,AS=[{src:"https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?q=80&w=1000&auto=format&fit=crop",caption:"Awal tahun yang tenang. Duduk santai menikmati pemandangan.",month:"Januari",year:"2026",timestamp:1768608e6},{src:"https://images.unsplash.com/photo-1504608524841-42fe6f032b4b?q=80&w=1000&auto=format&fit=crop",caption:"Eksperimen fotografi cuaca mendung.",month:"Februari",year:"2026",timestamp:17712e8}],zd=[{title:"Glitch in the Matrix: Bukti Kita Cuma Kode Biner?",subtitle:"Teori simulasi Nick Bostrom yang bikin Elon Musk kepikiran tiap malam.",category:"Konspirasi Sains",date:"20 Januari 2026",readTime:"8 min read",author:"Fanra",image:"https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?q=80&w=2070&auto=format&fit=crop",content:`Pernah ngerasa dj vu? Atau ngeliat sesuatu yang kayaknya 'nggak masuk akal' secara fisika? Banyak ilmuwan, termasuk Elon Musk, percaya peluang kita hidup di 'base reality' (kenyataan asli) itu cuma satu banding miliaran.

Bayangkan game The Sims atau GTA. Karakternya nggak sadar mereka ada di game. Seiring teknologi komputer kita makin canggih (VR, AI, Quantum Computing), kita makin dekat bisa bikin simulasi yang persis kenyataan. Kalau kita bisa bikin itu, siapa yang menjamin kalau KITA ini bukan hasil simulasi peradaban yang lebih maju?

Fisikawan James Gates bahkan nemuin kode error koreksi komputer (adinkras) di dalam persamaan supersimetri yang menjelaskan alam semesta. Kok bisa ada kode komputer di hukum fisika?`,timestamp:17699168e5},{title:"Paradoks Fermi: Keheningan yang Memekakkan Telinga",subtitle:"Jika alam semesta ini tak terhingga luasnya dan tua usianya, di mana semua orang?",category:"Sains & Filsafat",date:"9 Januari 2026",readTime:"7 min read",author:"Fanra",image:"https://upload.wikimedia.org/wikipedia/commons/6/69/NASA-HS201427a-HubbleUltraDeepField2014-20140603.jpg",content:`Pernahkah lo menatap langit malam yang cerah, melihat ribuan bintang, dan merasa betapa kecilnya kita? Lalu muncul satu pertanyaan sederhana yang menghantui para ilmuwan selama puluhan tahun: "Di mana mereka semua?"

Mari kita bicara matematika sebentar. Galaksi Bima Sakti kita sendiri memiliki sekitar 100 hingga 400 miliar bintang. Dan di alam semesta yang teramati, ada triliunan galaksi lain. Bahkan jika hanya sebagian kecil dari bintang-bintang itu memiliki planet yang mirip Bumi, seharusnya ada jutaan peradaban cerdas di luar sana.

Alam semesta berumur sekitar 13,8 miliar tahun. Bumi baru berumur 4,5 miliar tahun. Artinya, ada peradaban lain yang mungkin sudah ada miliaran tahun sebelum kita. Bayangkan teknologi mereka. Seharusnya, mereka sudah mengkolonisasi galaksi, atau setidaknya mengirim sinyal yang bisa kita tangkap. Tapi yang kita dapatkan hanyalah... kesunyian. Inilah yang disebut Paradoks Fermi.`,sources:[{label:"Wikipedia - Fermi Paradox",url:"https://en.wikipedia.org/wiki/Fermi_paradox"},{label:"Wait But Why - The Fermi Paradox",url:"https://waitbutwhy.com/2014/05/fermi-paradox.html"}],timestamp:17679168e5}],NS=[{id:"initial_track_1",spotifyId:"08A9yuCnJwBmItI1U9BZ7a",title:"Cincin",artist:"Hindia",addedAt:Date.now(),order:0}],Wj=t=>t.toLowerCase().trim().replace(/[^a-z0-9-_]/g,""),Kj=async()=>{try{const e=(await XL(TS,qj)).user,n=Rt(Ve,Ma,e.uid),r=await Dh(n),s=e.email==="irfanrizkiaditri@gmail.com";let i=Kf,o={name:e.displayName||"Pengguna Google",school:"Google Account",deviceId:e.uid,email:e.email,photoURL:e.photoURL,isAdmin:s,lastLogin:new Date().toISOString()};if(r.exists()){const a=r.data();i=a.credits??Kf,o.isAdmin=a.isAdmin||s,await Ra(n,{lastLogin:new Date().toISOString(),photoURL:e.photoURL})}else await Lh(n,{...o,credits:Kf,createdAt:new Date().toISOString(),apiKeys:[]});return{user:o,credits:i,id:e.uid}}catch(t){throw t}},Jj=async()=>{try{await PL(TS)}catch(t){console.error("Logout error",t)}},Yj=async t=>{if(t.startsWith("offline_"))return[];try{const e=await Dh(Rt(Ve,Ma,t));return e.exists()?e.data().apiKeys||[]:[]}catch{return[]}},fw=async(t,e)=>{if(!t.startsWith("offline_"))try{await Ra(Rt(Ve,Ma,t),{apiKeys:e});for(const n of e)if(n.isShared){const r=rr(St(Ve,fc),no("key","==",n.key));(await sr(r)).empty&&await po(St(Ve,fc),{key:n.key,provider:t,addedAt:Date.now(),isActive:!0})}}catch{}},Qj=async(t,e,n)=>{if(!t.startsWith("offline_"))try{const r=n.filter(o=>o.key!==e);await Ra(Rt(Ve,Ma,t),{apiKeys:r});const s=rr(St(Ve,fc),no("key","==",e),no("provider","==",t));(await sr(s)).forEach(async o=>{await Nc(Rt(Ve,fc,o.id))})}catch{}},Xj=async()=>{try{const t=rr(St(Ve,fc),no("isActive","==",!0),wa("addedAt","desc"),ro(10));return(await sr(t)).docs.map(n=>n.data().key).sort(()=>.5-Math.random()).slice(0,5)}catch{return[]}},pw=async(t,e)=>{if(!t.startsWith("offline_"))try{await po(St(Ve,Ma,t,IS),e)}catch{}},Zj=async t=>{if(t.startsWith("offline_"))return[];try{const e=rr(St(Ve,Ma,t,IS),wa("timestamp","asc"),ro(50));return(await sr(e)).docs.map(r=>r.data())}catch{return[]}},e3=async()=>{try{const t=St(Ve,jc);if((await N0(t)).data().count===0){const e=Pc(Ve);AS.forEach(n=>e.set(Rt(t),{...n})),await e.commit()}}catch{}},$0=async()=>{try{await e3();const t=rr(St(Ve,jc),wa("timestamp","desc")),e=await sr(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return AS.map((e,n)=>({id:`local-${n}`,...e}))}},t3=async t=>{try{await po(St(Ve,jc),t)}catch(e){throw e}},mw=async(t,e)=>{try{await Ra(Rt(Ve,jc,t),e)}catch(n){throw n}},n3=async t=>{try{await Nc(Rt(Ve,jc,t))}catch(e){throw e}},r3=async()=>{try{const t=St(Ve,Da);if((await N0(t)).data().count===0){const e=Pc(Ve);zd.forEach(n=>e.set(Rt(t),{...n})),await e.commit()}}catch{}},RS=async()=>{try{await r3();const t=rr(St(Ve,Da),wa("timestamp","desc")),e=await sr(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return zd.map((e,n)=>({id:`local-${n}`,...e}))}},s3=async t=>{try{if(t.startsWith("local-")){const r=parseInt(t.split("-")[1]);return zd[r]?{id:t,...zd[r]}:null}const e=Rt(Ve,Da,t),n=await Dh(e);return n.exists()?{id:n.id,...n.data()}:null}catch{return null}},i3=async t=>{try{await po(St(Ve,Da),t)}catch(e){throw e}},o3=async(t,e)=>{try{await Ra(Rt(Ve,Da,t),e)}catch(n){throw n}},a3=async t=>{try{await Nc(Rt(Ve,Da,t))}catch(e){throw e}},l3=async()=>{try{const t=St(Ve,La);if((await N0(t)).data().count===0){const e=Pc(Ve);NS.forEach(n=>e.set(Rt(t),{...n})),await e.commit()}}catch{}},PS=async()=>{try{await l3();const t=rr(St(Ve,La)),e=await sr(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>typeof r.order=="number"&&typeof s.order=="number"?r.order-s.order:typeof r.order=="number"?-1:typeof s.order=="number"?1:s.addedAt-r.addedAt)}catch{return NS}},c3=async t=>{try{const e=await PS(),n=e.length>0?Math.max(...e.map(r=>r.order||0)):0;await po(St(Ve,La),{...t,order:n+1})}catch(e){throw e}},u3=async(t,e)=>{try{await Ra(Rt(Ve,La,t),e)}catch(n){throw console.error("Update track failed",n),n}},d3=async t=>{try{await Nc(Rt(Ve,La,t))}catch(e){throw e}},h3=async t=>{try{const e=Pc(Ve);t.forEach((n,r)=>{if(n.id){const s=Rt(Ve,La,n.id);e.update(s,{order:r})}}),await e.commit()}catch(e){throw console.error("Order update failed",e),e}};let ea={};const gw=()=>{ea={},console.log("Cache cleared.")},yw=t=>ea[t]||null,ja=async t=>{if(ea[t])return ea[t];try{const e=await Dh(Rt(Ve,SS,t));if(e.exists()){const n=e.data().text;return ea[t]=n,n}return null}catch{return null}},Fc=async(t,e)=>{ea[t]=e;try{await Lh(Rt(Ve,SS,t),{text:e,updatedAt:Date.now()},{merge:!0}),MS(`Updated Content: ${t}`)}catch(n){throw n}},f3=async t=>{try{await po(St(Ve,Vh),{...t,timestamp:Date.now(),isRead:!1})}catch(e){throw e}},p3=async t=>{try{await Nc(Rt(Ve,Vh,t))}catch(e){throw e}},m3=async()=>{try{const t=rr(St(Ve,Vh),no("type","==","public"),ro(100));return(await sr(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch{return[]}},g3=async()=>{try{const t=rr(St(Ve,Vh),no("type","==","private"),ro(100));return(await sr(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch{return[]}},y3=()=>new Date().toISOString().split("T")[0],v3=async()=>{let t="Unknown";try{const e=new AbortController,n=setTimeout(()=>e.abort(),2e3),r=await fetch("https://ipapi.co/country/",{signal:e.signal});if(clearTimeout(n),r.ok){const s=await r.text();s&&s.length===2&&(t=s.toUpperCase())}}catch{}try{const e=y3(),n=Rt(Ve,kS,e);await Lh(n,{date:e,visitors:vm(1),[`geo.${t}`]:vm(1),timestamp:Date.now()},{merge:!0})}catch{}},MS=async(t,e)=>{try{await po(St(Ve,G0),{type:"info",message:t,details:e||"",timestamp:Date.now()})}catch{}},x3=async()=>{try{const t=rr(St(Ve,G0),ro(500)),e=await sr(t);if(e.empty)return;const n=Pc(Ve);e.docs.forEach(r=>{n.delete(r.ref)}),await n.commit(),console.log(`Deleted ${e.size} log entries.`)}catch(t){throw console.error("Clear logs error",t),t}},io=async(t,e,n)=>{try{const r=Wj(e)||"unknown",s=`${t}_${r}`,i=Rt(Ve,CS,s);await Lh(i,{category:t,itemId:e,label:n,count:vm(1),lastUpdated:Date.now()},{merge:!0})}catch(r){console.warn("Failed to log analytics event",r)}},il=async(t,e=5)=>{try{const n=rr(St(Ve,CS),no("category","==",t));return(await sr(n)).docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>o.count-i.count).slice(0,e)}catch(n){return console.error(`Error fetching top ${t}:`,n),[]}},vw=async()=>{try{const t=rr(St(Ve,kS),wa("date","desc"),ro(365)),n=(await sr(t)).docs.map(v=>v.data()).sort((v,_)=>v.date.localeCompare(_.date));let r=0,s=0,i=0;const o={};n.slice(-7).forEach(v=>s+=v.visitors||0),n.forEach(v=>{r+=v.visitors||0,i+=v.errors||0,v.geo&&Object.keys(v.geo).forEach(_=>{o[_]=(o[_]||0)+v.geo[_]})});const c=rr(St(Ve,G0),wa("timestamp","desc"),ro(15)),d=(await sr(c)).docs.map(v=>({id:v.id,...v.data()})),m=Object.entries(o).map(([v,_])=>({country:v,count:_})).sort((v,_)=>_.count-v.count),[g,y,b,x,w]=await Promise.all([il("menu"),il("project"),il("blog"),il("photo"),il("music")]);return{allStats:n,totalVisitors7Days:s,totalVisitorsAllTime:r,totalErrors:i,logs:d,geoStats:m,topMenus:g,topProjects:y,topBlogs:b,topPhotos:x,topMusic:w}}catch(t){return console.error("Dashboard Stats Error",t),null}},w3=[{label:"Biru",hex:"#3b82f6"},{label:"Merah",hex:"#ef4444"},{label:"Hijau",hex:"#22c55e"},{label:"Ungu",hex:"#a855f7"},{label:"Emas",hex:"#eab308"},{label:"Hitam",hex:"#0f172a"},{label:"Slate",hex:"#64748b"}],_3=[{label:"",value:"to right",title:"Ke Kanan"},{label:"",value:"to bottom",title:"Ke Bawah"},{label:"",value:"135deg",title:"Diagonal Bawah"},{label:"",value:"to left",title:"Ke Kiri"},{label:"",value:"to top",title:"Ke Atas"},{label:"",value:"45deg",title:"Diagonal Atas"}],dt=({id:t,defaultText:e,isAdmin:n,className:r="",tag:s="p",multiline:i=!1})=>{const[o,a]=j.useState(()=>yw(t)||e),[c,u]=j.useState(!1),[d,m]=j.useState("solid"),[g,y]=j.useState("#3b82f6"),[b,x]=j.useState("#3b82f6"),[w,v]=j.useState("#a855f7"),[_,T]=j.useState("to right"),P=j.useRef(null);j.useEffect(()=>{let N=!0;return(async()=>{try{const R=await ja(t);N&&R&&R!==o&&a(R)}catch{}})(),()=>{N=!1}},[t]),j.useEffect(()=>{c&&P.current&&(P.current.style.height="auto",P.current.style.height=P.current.scrollHeight+"px")},[c,o]);const L=async()=>{u(!1);try{await Fc(t,o)}catch{alert("Gagal menyimpan perubahan teks.")}},B=()=>{u(!1);const N=yw(t);N&&a(N)},k=()=>{const N=P.current;if(!N)return;const U=N.selectionStart,R=N.selectionEnd;if(U===R)return;const D=o.substring(U,R),M=o.substring(0,U),H=o.substring(R);let ye="";d==="solid"?ye=`<span style="color: ${g}">${D}</span>`:ye=`<span style="background: ${`linear-gradient(${_}, ${b}, ${w})`}; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 800; -webkit-box-decoration-break: clone; box-decoration-break: clone;">${D}</span>`,a(M+ye+H)},I=()=>{const N=P.current;if(!N)return;const U=N.selectionStart,R=N.selectionEnd;if(U===R)return;const D=o.substring(U,R),M=o.substring(0,U),H=o.substring(R),ye=D.replace(/<\/?[^>]+(>|$)/g,"");a(M+ye+H)},A=()=>{const N=b;x(w),v(N)};return c?l.jsx("div",{className:`relative z-[100] ${r}`,children:l.jsxs("div",{className:"bg-white border border-slate-200 shadow-2xl rounded-2xl overflow-hidden min-w-[300px] md:min-w-[500px] flex flex-col animate-fade-in-up",children:[l.jsxs("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-100 flex justify-between items-center",children:[l.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:["Editing: ",l.jsx("span",{className:"text-slate-800",children:t.split("_").pop()})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:B,className:"px-3 py-1.5 text-xs font-bold text-slate-500 hover:text-slate-800 rounded-lg transition-colors",children:"Batal"}),l.jsxs("button",{onClick:L,className:"px-4 py-1.5 text-xs font-bold bg-slate-900 text-white hover:bg-slate-800 rounded-lg flex items-center gap-1.5 shadow-md active:scale-95 transition-all",children:[l.jsx(Es,{className:"w-3 h-3"})," Simpan"]})]})]}),l.jsxs("div",{className:"p-4 bg-white relative",children:[l.jsx("textarea",{ref:P,value:o,onChange:N=>a(N.target.value),className:"w-full bg-transparent border-none outline-none text-sm font-mono text-slate-600 resize-none min-h-[100px] leading-relaxed placeholder:text-slate-300",placeholder:"Tulis teks atau HTML disini...",spellCheck:!1}),l.jsx("div",{className:"absolute top-2 right-2 opacity-10 pointer-events-none",children:l.jsx("span",{className:"text-[10px] font-mono",children:"HTML MODE"})})]}),l.jsx("div",{className:"bg-slate-50/50 border-t border-slate-100 p-4",children:l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-lg w-fit",children:[l.jsx("button",{onClick:()=>m("solid"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all ${d==="solid"?"bg-white text-slate-900 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:"Solid Color"}),l.jsxs("button",{onClick:()=>m("gradient"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all flex items-center gap-1 ${d==="gradient"?"bg-white text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[l.jsx(Fg,{className:"w-3 h-3"})," Gradient"]})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[d==="solid"?l.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[l.jsx("div",{className:"p-1.5 bg-white border border-slate-200 rounded-lg shadow-sm shrink-0",children:l.jsx(bN,{className:"w-4 h-4 text-slate-400"})}),l.jsxs("div",{className:"flex gap-2",children:[w3.map(N=>l.jsx("button",{onClick:()=>y(N.hex),className:`w-6 h-6 rounded-full border-2 transition-transform hover:scale-110 shrink-0 ${g===N.hex?"border-slate-400 scale-110":"border-white shadow-sm"}`,style:{backgroundColor:N.hex},title:N.label},N.hex)),l.jsx("div",{className:"w-px h-6 bg-slate-300 mx-1"}),l.jsx("input",{type:"color",value:g,onChange:N=>y(N.target.value),className:"w-6 h-6 rounded-full cursor-pointer border border-slate-200 bg-white p-0 overflow-hidden shrink-0",title:"Custom Color"})]})]}):l.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Start"}),l.jsx("input",{type:"color",value:b,onChange:N=>x(N.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),l.jsx("button",{onClick:A,className:"text-slate-400 hover:text-slate-600 transition-colors p-1",title:"Tukar Warna",children:l.jsx(ua,{className:"w-3.5 h-3.5"})}),l.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"End"}),l.jsx("input",{type:"color",value:w,onChange:N=>v(N.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),l.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white shadow-md ml-auto",style:{background:`linear-gradient(${_}, ${b}, ${w})`},title:"Preview Gradient"})]}),l.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 no-scrollbar",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase shrink-0 mr-1",children:"Arah:"}),_3.map(N=>l.jsx("button",{onClick:()=>T(N.value),className:`w-7 h-7 flex items-center justify-center rounded-md border text-sm transition-all shrink-0 ${_===N.value?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,title:N.title,children:N.label},N.value))]})]}),l.jsxs("div",{className:"flex items-center gap-2 w-full justify-end mt-2 pt-2 border-t border-slate-100",children:[l.jsxs("button",{onClick:I,className:"text-[10px] font-bold bg-white border border-slate-200 hover:border-red-300 hover:text-red-500 text-slate-500 px-3 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex items-center gap-1.5",title:"Hapus format",children:[l.jsx(vN,{className:"w-3.5 h-3.5"}),"Hapus Format"]}),l.jsxs("button",{onClick:k,className:"text-[10px] font-bold bg-blue-50 border border-blue-200 hover:bg-blue-100 text-blue-700 px-4 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex-1 justify-center flex",children:["Terapkan ",d==="solid"?"Warna":"Gradasi"]})]})]}),l.jsxs("p",{className:"text-[9px] text-slate-400 italic text-center",children:["*Blok teks di atas, atur ",d,", lalu klik Terapkan."]})]})})]})}):l.jsxs(s,{className:`relative group ${r} ${n?"cursor-pointer hover:opacity-80 transition-opacity decoration-blue-500/30":""}`,onClick:N=>{n&&(N.stopPropagation(),u(!0))},title:n?"Klik untuk mengedit warna & teks":void 0,children:[l.jsx("span",{dangerouslySetInnerHTML:{__html:o}}),n&&l.jsx("span",{className:"inline-flex ml-2 opacity-0 group-hover:opacity-100 transition-all duration-300 align-middle bg-slate-100 p-1 rounded-md border border-slate-200 shadow-sm absolute -top-4 -right-4 md:static",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-500",children:[l.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),l.jsx("path",{d:"m15 5 4 4"})]})})]})},b3=({isAdmin:t})=>{const e=vi(),[n,r]=j.useState(!1),[s,i]=j.useState({left:0,width:0,opacity:0}),[o,a]=j.useState(!1),c=j.useRef({}),u=[{path:"/",label:"Home"},{path:"/projects",label:"Projects"},{path:"/blog",label:"Blog"},{path:"/gallery",label:"Gallery"},{path:"/music",label:"Music"},{path:"/messages",label:"Pesan"}];j.useEffect(()=>(n?(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.documentElement.style.overflow="",document.body.style.position="",document.body.style.width=""),()=>{document.body.style.overflow="",document.documentElement.style.overflow="",document.body.style.position="",document.body.style.width=""}),[n]),j.useEffect(()=>{const y=()=>{const x=e.pathname;let w=u.find(_=>_.path===x);w||(w=u.find(_=>_.path!=="/"&&x.startsWith(_.path))),w||(w=u[0]);const v=c.current[w.path];v&&i({left:v.offsetLeft,width:v.offsetWidth,opacity:1})},b=setTimeout(y,50);return window.addEventListener("resize",y),()=>{clearTimeout(b),window.removeEventListener("resize",y)}},[e.pathname]);const d=y=>{var b;a(!0),io("menu",y,((b=u.find(x=>x.path===y))==null?void 0:b.label)||y),setTimeout(()=>{r(!1),a(!1)},700)},m=(y,b)=>{io("menu",y,b)},g=y=>y==="/"?e.pathname==="/":e.pathname.startsWith(y);return l.jsxs(l.Fragment,{children:[l.jsx("style",{children:`
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          @keyframes curtainDown {
             from { transform: translateY(-100%); }
             to { transform: translateY(0); }
          }
          @keyframes curtainUp {
             from { transform: translateY(0); }
             to { transform: translateY(-100%); }
          }
          .animate-blob { animation: blob 10s infinite; }
          .animation-delay-2000 { animation-delay: 2s; }
          .animation-delay-4000 { animation-delay: 4s; }
          .animate-curtain-down { animation: curtainDown 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
          .animate-curtain-up { animation: curtainUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        `}),l.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-100 transition-all",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center",children:[l.jsxs(Kr,{to:"/",onClick:()=>m("/","Home"),className:"flex items-center gap-3 cursor-pointer group mr-8",children:[l.jsx(Zl,{className:"w-8 h-8 transition-all duration-500 ease-out group-hover:scale-110 group-hover:drop-shadow-[0_0_15px_rgba(59,130,246,0.5)]",variant:"dark"}),l.jsx("div",{className:"flex flex-col justify-center",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(dt,{id:"navbar_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:t,tag:"span",className:"text-sm font-black tracking-tighter uppercase text-slate-900 leading-none"}),t&&l.jsx("span",{className:"bg-slate-900 text-white text-[9px] font-bold px-1.5 py-0.5 rounded leading-none shadow-sm",children:"ADMIN"})]})})]}),l.jsxs("div",{className:"hidden md:flex items-center relative ml-auto bg-slate-50/50 rounded-full p-1 border border-slate-200/60",children:[l.jsx("div",{className:"absolute top-1 bottom-1 bg-slate-900 rounded-full transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1)] shadow-md z-0 pointer-events-none",style:{left:s.left,width:s.width,opacity:s.opacity}}),u.map(y=>l.jsx(Kr,{to:y.path,ref:b=>{c.current[y.path]=b},onClick:()=>m(y.path,y.label),className:`relative z-10 px-6 py-2 rounded-full text-xs font-bold uppercase tracking-wide transition-colors duration-300 ${g(y.path)?"text-white":"text-slate-500 hover:text-slate-900"}`,children:y.label},y.path))]}),l.jsx("button",{className:"md:hidden p-2 text-slate-600 ml-auto",onClick:()=>r(!n),children:l.jsx(RT,{className:"w-6 h-6"})})]})}),(n||o)&&l.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden flex flex-col items-center justify-center p-6 overflow-hidden bg-white ${o?"animate-curtain-up":"animate-curtain-down"}`,style:{touchAction:"none"},onTouchMove:y=>y.preventDefault(),children:[l.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),l.jsxs("div",{className:"absolute inset-0 z-0 w-full h-full pointer-events-none",children:[l.jsx("div",{className:"absolute top-0 -left-10 w-96 h-96 bg-slate-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob"}),l.jsx("div",{className:"absolute top-1/4 -right-20 w-80 h-80 bg-gray-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"}),l.jsx("div",{className:"absolute -bottom-20 left-1/3 w-96 h-96 bg-zinc-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-4000"}),l.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-[10px]"})]}),l.jsx("button",{className:"absolute top-6 right-6 p-4 text-slate-800 hover:text-slate-500 transition-colors z-50",onClick:()=>d(e.pathname),children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M18 6 6 18"}),l.jsx("path",{d:"m6 6 12 12"})]})}),l.jsxs("div",{className:`relative z-10 w-full flex flex-col items-center transition-all duration-500 ${o?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:[l.jsx("div",{className:"flex flex-col gap-8 w-full max-w-xs mt-10",children:u.map((y,b)=>l.jsx(Kr,{to:y.path,onClick:()=>d(y.path),className:`
                           text-4xl font-black uppercase tracking-tight text-center py-2 relative group
                           transition-all duration-300
                           ${g(y.path)?"text-slate-900 scale-110":"text-slate-300 hover:text-slate-500 hover:scale-105"}
                        `,style:{animationDelay:`${b*50}ms`},children:y.label},y.path))}),l.jsxs("div",{className:"absolute -bottom-40 flex flex-col items-center gap-3",children:[l.jsx("div",{className:"w-1 h-12 bg-slate-200 rounded-full"}),l.jsx("div",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-[0.4em]",children:"Fanra Studio"})]})]})]})]})},Jt=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null;let Jf=null;const DS=t=>{if(Jf)return Jf;const e=t.sampleRate*2,n=t.createBuffer(1,e,t.sampleRate),r=n.getChannelData(0);for(let s=0;s<e;s++)r[s]=Math.random()*2-1;return Jf=n,n},E3=()=>{if(!Jt)return;Jt.state==="suspended"&&Jt.resume();const t=DS(Jt),e=Jt.createBufferSource();e.buffer=t;const n=Jt.createBiquadFilter();n.type="lowpass",n.Q.value=1;const r=Jt.createGain();e.connect(n),n.connect(r),r.connect(Jt.destination);const s=Jt.currentTime;n.frequency.setValueAtTime(100,s),n.frequency.exponentialRampToValueAtTime(4e3,s+.15),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.3,s+.05),r.gain.exponentialRampToValueAtTime(.001,s+.3),e.start(s),e.stop(s+.3)},T3=()=>{if(!Jt)return;Jt.state==="suspended"&&Jt.resume();const t=DS(Jt),e=Jt.createBufferSource();e.buffer=t;const n=Jt.createBiquadFilter();n.type="lowpass",n.Q.value=.5;const r=Jt.createGain();e.connect(n),n.connect(r),r.connect(Jt.destination);const s=Jt.currentTime;n.frequency.setValueAtTime(200,s),n.frequency.exponentialRampToValueAtTime(1200,s+.8),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.4,s+.2),r.gain.exponentialRampToValueAtTime(.001,s+1.2),e.start(s),e.stop(s+1.2)};class I3{constructor(e,n,r){this.x=e,this.y=n;const s=Math.random()*Math.PI*2,i=Math.random()*10+2;this.vx=Math.cos(s)*i,this.vy=Math.sin(s)*i,this.size=3,this.friction=.92,this.opacity=1,this.ease=.2-r*.015,this.ease<.05&&(this.ease=.05)}update(e,n){this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction,this.x+=(e-this.x)*this.ease,this.y+=(n-this.y)*this.ease;const r=e-this.x,s=n-this.y;return Math.sqrt(r*r+s*s)<10&&(this.opacity-=.05),this.opacity>0}draw(e){e.save(),e.globalAlpha=this.opacity,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fillStyle="#2563eb",e.fill(),e.restore()}}const S3=({onComplete:t,onTriggerAdmin:e})=>{const[n,r]=j.useState(0),[s,i]=j.useState(!1),[o,a]=j.useState(!1),[c,u]=j.useState(!1),d=j.useRef(null),m=j.useRef(null),g=j.useRef([]),y=j.useRef({x:window.innerWidth/2,y:window.innerHeight/2});j.useEffect(()=>(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",window.scrollTo(0,0),()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[]),j.useEffect(()=>{const _=m.current;if(!_)return;const T=_.getContext("2d");if(!T)return;const P=()=>{_.width=window.innerWidth,_.height=window.innerHeight};window.addEventListener("resize",P),P();const L=I=>{y.current={x:I.clientX,y:I.clientY}};window.addEventListener("mousemove",L);let B;const k=()=>{T.clearRect(0,0,_.width,_.height),g.current.length>0?(g.current=g.current.filter(I=>I.update(y.current.x,y.current.y)?(I.draw(T),!0):!1),g.current.length===0&&o&&a(!1)):o&&a(!1),B=requestAnimationFrame(k)};return k(),()=>{window.removeEventListener("resize",P),window.removeEventListener("mousemove",L),cancelAnimationFrame(B)}},[o]);const b=_=>{if(o||!d.current)return;const T=d.current.getBoundingClientRect(),P=T.left+T.width/2,L=T.top+T.height/2;a(!0);let B=0;const k=10;g.current=[];const I=setInterval(()=>{if(B>=k){clearInterval(I);return}g.current.push(new I3(P,L,B)),B++},50)},x=()=>{s||(E3(),i(!0),r(1),setTimeout(()=>i(!1),1e3))},w=()=>{s||(T3(),i(!0),r(2),setTimeout(()=>{window.scrollTo(0,0),t()},1e3))},v=()=>{c||(u(!0),setTimeout(()=>{e&&e(),setTimeout(()=>u(!1),2e3)},500))};return l.jsxs("div",{className:`fixed inset-0 z-[999] bg-white transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1) overflow-hidden h-[100dvh] w-screen ${n===2?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none"}`,onTouchMove:_=>_.preventDefault(),children:[l.jsx("canvas",{ref:m,className:"absolute inset-0 pointer-events-none z-50"}),l.jsxs("div",{className:"flex flex-col w-full h-[200vh] transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1)",style:{transform:n>=1?"translateY(-50%)":"translateY(0)"},children:[l.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center relative bg-white px-6",style:{backgroundImage:"radial-gradient(#e2e8f0 1px, transparent 1px)",backgroundSize:"32px 32px"},children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-[0.03] pointer-events-none overflow-hidden",children:l.jsx(Zl,{className:"w-[150%] h-[150%] -translate-x-1/4 -translate-y-1/4",variant:"dark"})}),l.jsxs("div",{className:"relative z-10 text-center animate-fade-in-up flex flex-col items-center",children:[l.jsx("div",{className:"mb-8 flex justify-center transform hover:scale-105 transition-transform duration-500",children:l.jsx(Zl,{className:"w-32 h-32 md:w-40 md:h-40 shadow-2xl shadow-slate-200/50 rounded-[2rem] bg-white",variant:"dark"})}),l.jsxs("h1",{className:"text-4xl md:text-7xl font-black text-slate-900 mb-4 tracking-tighter leading-tight",children:["IRFAN RIZKI ADITRI",l.jsx("span",{ref:d,onDoubleClick:b,className:`text-blue-600 inline-block cursor-pointer transition-opacity duration-100 select-none ${o?"opacity-0":"opacity-100"} hover:opacity-80`,title:"Double click me!",children:"."})]}),l.jsx("p",{className:"text-slate-400 text-lg md:text-2xl font-medium tracking-widest uppercase",children:"Portfolio & Playground"}),l.jsxs("button",{onClick:x,className:"group flex flex-col items-center gap-3 transition-all outline-none cursor-pointer mt-20 hover:-translate-y-1 duration-300",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-900 transition-colors",children:"Next"}),l.jsx("div",{className:"w-12 h-12 rounded-full border border-slate-200 bg-white hover:bg-slate-50 flex items-center justify-center shadow-lg transition-all duration-300 group-hover:border-slate-300 group-hover:shadow-xl",children:l.jsx($n,{className:"w-5 h-5 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})})]})]})]}),l.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center bg-slate-50 px-6 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),l.jsx("div",{className:`absolute bottom-8 right-8 z-50 transition-all duration-700 ease-out cursor-default select-none ${c?"scale-[10] opacity-0 rotate-180 text-blue-600":"scale-100 opacity-5 hover:opacity-30 text-slate-900"}`,onDoubleClick:v,title:".",children:l.jsx(tc,{className:"w-6 h-6"})}),l.jsxs("div",{className:"relative z-10 max-w-4xl w-full grid md:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{className:"text-center md:text-left space-y-6 flex flex-col items-center md:items-start",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-[10px] font-bold uppercase tracking-wider",children:[l.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),"Student & Developer"]}),l.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-slate-900 tracking-tight leading-none",children:["Welcome to ",l.jsx("br",{}),l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-slate-500",children:"My Perspective."})]}),l.jsx("p",{className:"text-slate-500 text-lg leading-relaxed max-w-md",children:"Jelajahi eksperimen kode, cerita tentang alam semesta, dan tools AI buatan mahasiswa gabut."}),l.jsxs("button",{onClick:w,className:"inline-flex items-center gap-3 bg-slate-900 text-white px-8 py-4 rounded-xl font-bold shadow-xl shadow-slate-900/20 hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 group",children:["Explore Studio",l.jsx(Yi,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),l.jsxs("div",{className:"relative hidden md:block",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-500 to-purple-500 rounded-[2.5rem] rotate-3 opacity-20 blur-2xl transform translate-y-4"}),l.jsxs("div",{className:"relative bg-white p-8 rounded-[2.5rem] shadow-2xl border border-slate-100 rotate-[-2deg] hover:rotate-0 transition-transform duration-500",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-slate-100 pb-6",children:[l.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center p-2.5",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra",className:"w-full h-full object-contain"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-900",children:"Fanra"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Intelligent Assistant"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"bg-slate-50 p-4 rounded-xl rounded-tl-none border border-slate-100 text-sm text-slate-600",children:"Halo! Ada yang bisa gue bantu hari ini? Mau edit foto atau ngobrol soal fisika?"}),l.jsx("div",{className:"bg-blue-600 p-4 rounded-xl rounded-tr-none text-sm text-white ml-auto max-w-[80%]",children:"Gue mau coba fitur AI Studio lo dong, Fanra!"})]})]})]})]})]})]})]})},k3=({onClose:t})=>{const e=br(),[n,r]=j.useState(!1);j.useEffect(()=>{requestAnimationFrame(()=>r(!0))},[]);const s=()=>{r(!1),setTimeout(()=>{e("/studio"),t()},300)},i=()=>{r(!1),setTimeout(t,300)};return l.jsxs("div",{className:`fixed inset-0 z-[100] flex items-center justify-center pointer-events-none p-6 transition-opacity duration-300 ${n?"opacity-100":"opacity-0"}`,children:[l.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-[4px] pointer-events-auto transition-opacity",onClick:i}),l.jsxs("div",{className:`
                    relative w-full max-w-sm bg-white/90 backdrop-blur-2xl border border-white/60 shadow-[0_20px_60px_-15px_rgba(0,0,0,0.3)] rounded-[2.5rem] overflow-hidden pointer-events-auto
                    transform transition-all duration-500 cubic-bezier(0.34, 1.56, 0.64, 1)
                    ${n?"translate-y-0 scale-100":"translate-y-10 scale-90 opacity-0"}
                `,children:[l.jsx("div",{className:"absolute -top-20 -right-20 w-48 h-48 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),l.jsx("div",{className:"absolute -bottom-20 -left-20 w-48 h-48 bg-purple-500/20 rounded-full blur-3xl animate-pulse delay-700"}),l.jsxs("div",{className:"p-8 relative z-10 flex flex-col items-center text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-900 to-slate-800 rounded-3xl flex items-center justify-center shadow-xl shadow-slate-900/20 mb-6 transform -rotate-3 border border-slate-700",children:l.jsx(Fg,{className:"w-8 h-8 text-yellow-400 drop-shadow-md"})}),l.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-3 leading-tight tracking-tight",children:"Coba Project Unggulan!"}),l.jsxs("p",{className:"text-base text-slate-600 font-medium leading-relaxed mb-8",children:["Fanra AI Studio kini hadir dengan fitur ",l.jsx("span",{className:"text-blue-600 font-bold bg-blue-50 px-1 rounded",children:"Upscale 4K"})," & ",l.jsx("span",{className:"text-purple-600 font-bold bg-purple-50 px-1 rounded",children:"Hapus BG"})," otomatis. Gratis untuk dicoba."]}),l.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[l.jsxs("button",{onClick:s,className:"w-full py-4 px-6 rounded-2xl text-sm font-bold bg-slate-900 text-white hover:bg-slate-800 transition-all shadow-xl shadow-slate-900/20 active:scale-95 flex items-center justify-center gap-2 group border border-slate-900",children:["Coba Sekarang",l.jsx(Yi,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]}),l.jsx("button",{onClick:i,className:"w-full py-3 px-6 rounded-2xl text-sm font-bold text-slate-500 hover:text-slate-800 hover:bg-slate-100 transition-colors",children:"Nanti Saja"})]})]}),l.jsx("button",{onClick:i,className:"absolute top-5 right-5 w-8 h-8 flex items-center justify-center rounded-full bg-slate-100/50 hover:bg-slate-100 text-slate-400 hover:text-slate-900 transition-colors z-20 backdrop-blur-sm",children:""})]})]})};class C3{constructor(e,n,r){this.x=e,this.y=n,this.baseX=e,this.baseY=n,this.size=1.5,this.density=Math.random()*20+5,this.color=r}draw(e,n){const r=this.y/n;let s=1-Math.pow(r,.8);s=Math.max(0,s),e.fillStyle=`rgba(203, 213, 225, ${s})`,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.closePath(),e.fill()}update(e,n){const r=e.x-this.x,s=e.y-this.y,i=Math.sqrt(r*r+s*s),o=r/i,a=s/i,c=e.radius,u=(c-i)/c,d=o*u*this.density,m=a*u*this.density;if(i<e.radius)n==="repel"?(this.x-=d,this.y-=m):(this.x+=d,this.y+=m);else{if(this.x!==this.baseX){const g=this.x-this.baseX;this.x-=g/15}if(this.y!==this.baseY){const g=this.y-this.baseY;this.y-=g/15}}}}const A3=({onTriggerAdmin:t,isAdmin:e=!1})=>{const n=br(),[r]=j.useState(()=>Math.random()>.5?"repel":"attract"),s=j.useRef(null),i=j.useRef([]),o=j.useRef({x:-1e3,y:-1e3,radius:120}),a=j.useRef(null),[c,u]=j.useState([]),[d,m]=j.useState([]),[g,y]=j.useState(!0),[b,x]=j.useState(!1);return j.useEffect(()=>{(async()=>{try{const _=await RS();u(_.slice(0,2));const T=await $0();if(T.length>0){const P=Array(60).fill(T).flat();m(P)}else m([])}catch(_){console.error("Home data fetch error",_)}finally{y(!1)}})(),(async()=>{if(!sessionStorage.getItem("fanra_home_promo_seen"))try{await ja("home_promo_enabled")!=="false"&&setTimeout(()=>{x(!0),sessionStorage.setItem("fanra_home_promo_seen","true")},3e3)}catch{console.warn("Failed to check promo status")}})()},[]),j.useEffect(()=>{const w=s.current;if(!w)return;const v=w.getContext("2d");if(!v)return;const _=()=>{w.width=window.innerWidth,w.height=window.innerHeight,T()},T=()=>{i.current=[];const I=30,A=Math.ceil(w.height/I),N=Math.ceil(w.width/I);for(let U=0;U<A;U++)for(let R=0;R<N;R++){const D=R*I+I/2,M=U*I+I/2;i.current.push(new C3(D,M,"#cbd5e1"))}};_(),window.addEventListener("resize",_);const P=I=>{const A=w.getBoundingClientRect();o.current.x=I.clientX-A.left,o.current.y=I.clientY-A.top},L=()=>{o.current.x=-1e3,o.current.y=-1e3};window.addEventListener("mousemove",P),window.addEventListener("mouseout",L);let B;const k=()=>{v.clearRect(0,0,w.width,w.height),i.current.forEach(I=>{I.draw(v,w.height),I.update(o.current,r)}),B=requestAnimationFrame(k)};return k(),()=>{window.removeEventListener("resize",_),window.removeEventListener("mousemove",P),window.removeEventListener("mouseout",L),cancelAnimationFrame(B)}},[r]),j.useEffect(()=>{a.current&&d.length>0&&setTimeout(()=>{if(a.current){const w=a.current;w.scrollLeft=(w.scrollWidth-w.clientWidth)/2}},100)},[d]),l.jsxs("div",{className:"relative min-h-[90vh] flex flex-col overflow-hidden bg-gradient-to-b from-slate-50 via-white to-white",children:[b&&l.jsx(k3,{onClose:()=>x(!1)}),l.jsx("style",{children:`
            .no-scrollbar::-webkit-scrollbar { display: none; }
            .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        `}),l.jsx("canvas",{ref:s,className:"fixed inset-0 z-0 pointer-events-none opacity-60"}),l.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 md:px-12 py-12 flex-grow w-full space-y-24",children:[l.jsxs("div",{className:"mt-8",children:[l.jsx("h1",{className:"text-6xl md:text-8xl font-black text-slate-900 mb-8 leading-tight tracking-tighter max-w-5xl flex items-center flex-wrap gap-2",children:l.jsx(dt,{id:"home_hero_title",defaultText:"Fanra is here.",isAdmin:e,tag:"span",className:"inline-block"})}),l.jsx("div",{className:"max-w-5xl mt-16 relative",children:l.jsxs("div",{className:"grid md:grid-cols-5 gap-12 items-start",children:[l.jsxs("div",{className:"md:col-span-3 space-y-4",children:[l.jsx(dt,{id:"home_about_title",defaultText:"Physics Student & Tech Enthusiast.",isAdmin:e,tag:"h2",className:"text-2xl font-bold text-slate-900 leading-tight"}),l.jsx(dt,{id:"home_about_desc",defaultText:"Irfan Rizki Aditri (Fanra) merupakan mahasiswa Fisika angkatan 2025 di Institut Teknologi Sumatera (ITERA). Platform ini dikembangkan sebagai sarana dokumentasi akademik dan eksplorasi teknologi di sela kesibukan perkuliahan.",isAdmin:e,tag:"p",multiline:!0,className:"text-slate-600 text-lg leading-relaxed font-medium"})]}),l.jsxs("div",{className:"md:col-span-2 flex flex-col gap-4 pt-2",children:[l.jsxs("div",{className:"flex items-center gap-4 group",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14614/14614573.png",alt:"Physics",className:"w-6 h-6 object-contain"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Physics Major"}),l.jsx("span",{className:"text-sm text-slate-500 block",children:"Institut Teknologi Sumatera '25"})]})]}),l.jsxs("div",{className:"flex items-center gap-4 group",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/2120/2120483.png",alt:"AI & Dev",className:"w-6 h-6 object-contain"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Interests"}),l.jsx("span",{className:"text-sm text-slate-500 block",children:"AI & Web Development"})]})]}),l.jsxs("div",{className:"flex items-center gap-4 group",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3037/3037821.png",alt:"Location",className:"w-6 h-6 object-contain"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Based In"}),l.jsx("span",{className:"text-sm text-slate-500 block",children:"Sumatera, Indonesia"})]})]})]})]})})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-8 md:p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer",onClick:()=>n("/projects"),children:[l.jsxs("div",{className:"flex items-start justify-between mb-8",children:[l.jsx("div",{className:"w-14 h-14 bg-slate-50 border border-slate-200 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3310/3310054.png",alt:"Projects",className:"w-8 h-8 object-contain"})}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-slate-100 px-3 py-1 rounded-full",children:"Projects"})]}),l.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-3",children:"Projects & Tools"}),l.jsx("p",{className:"text-slate-500 mb-6 text-base leading-relaxed",children:"Eksperimen digital yang mencakup pengembangan Fanra AI Studio serta berbagai alat bantu sederhana."}),l.jsxs("div",{className:"flex items-center text-sm font-bold text-blue-600 group-hover:translate-x-2 transition-transform",children:["View Projects ",l.jsx(Yi,{className:"w-5 h-5 ml-2"})]})]}),l.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-8 md:p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer flex flex-col",onClick:()=>n("/blog"),children:[l.jsxs("div",{className:"flex items-start justify-between mb-6",children:[l.jsx("div",{className:"w-14 h-14 bg-slate-50 border border-slate-200 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1170/1170221.png",alt:"Blog",className:"w-8 h-8 object-contain"})}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-slate-100 px-3 py-1 rounded-full",children:"Blog"})]}),l.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Recent Stories"}),l.jsx("div",{className:"space-y-4 flex-1",children:!g&&c.length>0?c.map(w=>l.jsxs("div",{className:"border-l-2 border-slate-200 pl-4 hover:border-slate-900 transition-colors",children:[l.jsx("h4",{className:"font-bold text-slate-800 text-sm line-clamp-1",children:w.title}),l.jsx("p",{className:"text-xs text-slate-400 mt-1 line-clamp-1",children:w.subtitle})]},w.id)):l.jsx("p",{className:"text-slate-400 text-sm italic",children:"Belum ada tulisan terbaru."})}),l.jsxs("div",{className:"mt-6 flex items-center text-sm font-bold text-slate-600 group-hover:text-slate-900 group-hover:translate-x-2 transition-transform",children:["Read Blog ",l.jsx(Yi,{className:"w-5 h-5 ml-2"})]})]})]}),l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-[2.5rem] p-8 md:p-10 relative overflow-hidden group",children:[l.jsx("div",{className:"flex justify-between items-end mb-8 relative z-10 px-2",children:l.jsxs("div",{className:"cursor-pointer",onClick:()=>n("/gallery"),children:[l.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-1",children:"Visual Diaries"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Arsip dokumentasi momen visual."})]})}),l.jsx("div",{ref:a,className:"flex gap-3 overflow-x-auto no-scrollbar pb-2 items-center cursor-grab active:cursor-grabbing",children:!g&&d.length>0?d.map((w,v)=>l.jsxs("div",{className:"w-32 h-32 md:w-44 md:h-44 flex-shrink-0 rounded-xl overflow-hidden bg-slate-200 shadow-sm border border-slate-100 relative group/item cursor-pointer",onClick:()=>n("/gallery"),children:[l.jsx("img",{src:w.src,alt:"Gallery",className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover/item:opacity-100 transition-opacity"})]},`${w.id}-${v}`)):l.jsx("div",{className:"w-full h-32 flex items-center justify-center text-slate-400 text-sm italic border-2 border-dashed border-slate-200 rounded-2xl",children:"Galeri masih kosong."})})]}),l.jsxs("div",{className:"relative rounded-[3rem] overflow-hidden bg-white border border-slate-200 p-12 md:p-16 text-center shadow-xl",children:[l.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto",children:[l.jsx(dt,{id:"home_cta_title",defaultText:"Let's Connect.",isAdmin:e,tag:"h2",className:"text-3xl md:text-5xl font-black mb-6 tracking-tight text-slate-900"}),l.jsx(dt,{id:"home_cta_desc",defaultText:"Terbuka untuk diskusi mengenai kolaborasi, ide proyek, atau sekadar bertukar wawasan seputar teknologi dan sains.",isAdmin:e,tag:"p",className:"text-slate-500 mb-10 text-lg max-w-lg mx-auto"}),l.jsxs("button",{onClick:()=>n("/messages"),className:"bg-slate-900 text-white px-10 py-4 rounded-full font-bold hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 text-lg shadow-lg shadow-slate-900/20 flex items-center gap-3 mx-auto",children:[l.jsx(DT,{className:"w-5 h-5"}),"Send Message"]})]}),l.jsx("div",{className:"absolute -top-24 -left-24 w-64 h-64 bg-blue-50 rounded-full blur-3xl opacity-50 pointer-events-none"}),l.jsx("div",{className:"absolute -bottom-24 -right-24 w-64 h-64 bg-purple-50 rounded-full blur-3xl opacity-50 pointer-events-none"})]})]})]})},$e=t=>{if(typeof window<"u"){const e=new CustomEvent("fanra-toast",{detail:{message:t}});window.dispatchEvent(e)}},xw=[{id:"fanra-ai",titleId:"projects_p1_title",descId:"projects_p1_desc",statusId:"status_project_p1",defaultTitle:"Fanra AI Studio",defaultDesc:"Asisten AI hybrid yang bisa ngobrol santai, edit foto (Hapus BG, Upscale 4K), dan cari info akurat.",fullDesc:"Fanra AI Studio adalah platform kecerdasan buatan terintegrasi yang dirancang untuk membantu produktivitas dan kreativitas. Menggunakan model Google Gemini Pro vision terbaru, aplikasi ini mampu memahami konteks visual, melakukan pengeditan gambar tingkat lanjut seperti penghapusan latar belakang yang presisi, peningkatan resolusi (Upscale 4K), hingga pencarian informasi real-time melalui integrasi Wikipedia dan Google Search.",iconUrl:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",theme:"blue",appPath:"/studio",buttonText:"Open Studio",features:["Smart Chatbot (Hybrid Search)","Background Remover","HD Upscale (4K)","Creative Remix","Wikipedia Integration"]},{id:"ig-panorama",titleId:"projects_p2_title",descId:"projects_p2_desc",statusId:"status_project_p2",defaultTitle:"IG Seamless Studio",defaultDesc:"Bikin konten carousel Instagram yang nyambung (Panorama) dengan mudah. Auto-slice saat download.",fullDesc:"IG Seamless Studio adalah tool khusus untuk konten kreator yang ingin membuat postingan carousel Instagram yang estetik dan menyambung (seamless). Tidak perlu lagi memotong gambar secara manual di Photoshop. Cukup upload gambar, atur layout di kanvas tanpa batas, tambahkan elemen dekoratif, dan sistem akan otomatis memotongnya menjadi slide-slide presisi siap posting.",iconUrl:"https://cdn-icons-png.flaticon.com/128/4327/4327816.png",theme:"pink",appPath:"/panorama",buttonText:"Open App",features:["Canvas Drag & Drop","Auto Slicing","Shape & Masking Tools","Layer Management","Instant Zip Download"]},{id:"fanragem",titleId:"projects_p3_title",descId:"projects_p3_desc",statusId:"status_project_p3",defaultTitle:"Fanragem",defaultDesc:"Game simulasi kehidupan mini. Bangun ekosistem digital, atur sumber daya, dan lihat perkembangannya.",fullDesc:"Fanragem adalah sebuah eksperimen simulasi kehidupan berbasis web. Di sini, Anda berperan sebagai pengatur ekosistem digital. Kelola sumber daya, populasi, dan lingkungan untuk melihat bagaimana keputusan kecil berdampak pada kelangsungan hidup dunia buatan Anda. Project ini masih dalam tahap pengembangan aktif.",iconUrl:"https://cdn-icons-png.flaticon.com/128/14047/14047858.png",theme:"purple",appPath:"",buttonText:"Play Demo",features:["Resource Management","Population Simulation","Dynamic Events","Pixel Art Style"]}],LS=({id:t,isAdmin:e,onStatusChange:n})=>{const[r,s]=j.useState("active"),[i,o]=j.useState(!0);j.useEffect(()=>{(async()=>{const m=await ja(t);s(m==="maintenance"||m==="development"?m:"active"),o(!1),n(m||"active")})()},[t]);const a=async d=>{if(d.stopPropagation(),!e)return;let m="active";r==="active"?m="maintenance":r==="maintenance"?m="development":m="active",s(m),n(m),await Fc(t,m)};if(i)return l.jsx("div",{className:"w-16 h-5 bg-slate-100 rounded-full animate-pulse"});const u={active:{color:"bg-green-100 text-green-700 border-green-200",icon:l.jsx(Es,{className:"w-3 h-3"}),label:"Active"},maintenance:{color:"bg-orange-100 text-orange-700 border-orange-200",icon:l.jsx(da,{className:"w-3 h-3"}),label:"Maintenance"},development:{color:"bg-blue-100 text-blue-700 border-blue-200",icon:l.jsx(MT,{className:"w-3 h-3"}),label:"Building"}}[r];return l.jsxs("button",{onClick:a,disabled:!e,className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border transition-all ${u.color} ${e?"cursor-pointer hover:brightness-95 active:scale-95":"cursor-default"}`,title:e?"Klik untuk ubah status":"",children:[u.icon,u.label]})},N3=({project:t,isAdmin:e,onClick:n})=>{const[r,s]=j.useState("active"),i=u=>{s(u)},a={blue:{bg:"bg-blue-50 border border-blue-100",text:"text-blue-600",hoverBorder:"group-hover:border-blue-300",glow:"bg-blue-500/10"},pink:{bg:"bg-pink-50 border border-pink-100",text:"text-pink-600",hoverBorder:"group-hover:border-pink-300",glow:"bg-pink-500/10"},purple:{bg:"bg-purple-50 border border-purple-100",text:"text-purple-600",hoverBorder:"group-hover:border-purple-300",glow:"bg-purple-500/10"}}[t.theme],c=r!=="active"&&!e;return l.jsxs("div",{onClick:n,className:`
                group relative bg-white rounded-[2rem] p-8 border transition-all duration-300 flex flex-col justify-between overflow-hidden h-full min-h-[320px]
                ${c?"cursor-default opacity-80 grayscale-[0.5]":"cursor-pointer hover:shadow-xl hover:-translate-y-1"}
                ${c?"border-slate-100":`border-slate-200 ${a.hoverBorder}`}
            `,children:[l.jsx("div",{className:`absolute top-0 right-0 w-48 h-48 rounded-full blur-3xl transition-opacity duration-500 opacity-0 group-hover:opacity-100 pointer-events-none translate-x-10 -translate-y-10 ${a.glow}`}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-start mb-6",children:[l.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-transform duration-500 group-hover:scale-110 ${a.bg} ${a.text}`,children:l.jsx("img",{src:t.iconUrl,alt:t.defaultTitle,className:"w-8 h-8 object-contain"})}),l.jsx(LS,{id:t.statusId,isAdmin:e,onStatusChange:i})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx(dt,{id:t.titleId,defaultText:t.defaultTitle,isAdmin:e,tag:"h3",className:`text-2xl font-black text-slate-900 mb-3 tracking-tight ${!c&&`group-hover:${a.text} transition-colors`}`}),l.jsx(dt,{id:t.descId,defaultText:t.defaultDesc,isAdmin:e,tag:"p",multiline:!0,className:"text-slate-500 text-sm leading-relaxed font-medium line-clamp-3"})]})]}),l.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[l.jsx("span",{className:`text-xs font-bold uppercase tracking-wider transition-colors ${c?"text-slate-400":`${a.text}`}`,children:"See Details"}),l.jsx("div",{className:`p-2 rounded-full transition-all ${c?"bg-slate-100 text-slate-300":`bg-slate-50 ${a.text} group-hover:bg-white group-hover:shadow-md`}`,children:l.jsx(Yi,{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform"})})]})]})},R3=({project:t,isAdmin:e})=>{const n=br(),[r,s]=j.useState("active"),i=d=>{s(d)},o=r!=="active"&&!e,c={blue:{bg:"bg-blue-50",text:"text-blue-600",btn:"bg-blue-600 hover:bg-blue-700",gradient:"from-blue-500 to-cyan-500"},pink:{bg:"bg-pink-50",text:"text-pink-600",btn:"bg-pink-600 hover:bg-pink-700",gradient:"from-pink-500 to-rose-500"},purple:{bg:"bg-purple-50",text:"text-purple-600",btn:"bg-purple-600 hover:bg-purple-700",gradient:"from-purple-500 to-indigo-500"}}[t.theme],u=()=>{if(o){$e(r==="maintenance"?"Aplikasi sedang dalam perbaikan (Maintenance).":"Aplikasi masih dalam tahap pengembangan.");return}t.appPath?(io("project",t.id,t.defaultTitle),n(t.appPath)):$e("Link aplikasi belum tersedia.")};return l.jsx("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:l.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-12",children:[l.jsxs("button",{onClick:()=>n("/projects"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[l.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:l.jsx(Zn,{className:"w-4 h-4"})}),"Kembali ke Daftar"]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${c.bg} ${c.text}`,children:l.jsx("img",{src:t.iconUrl,alt:"Icon",className:"w-8 h-8 object-contain"})}),l.jsx(LS,{id:t.statusId,isAdmin:e,onStatusChange:i})]}),l.jsx(dt,{id:t.titleId,defaultText:t.defaultTitle,isAdmin:e,tag:"h1",className:"text-4xl md:text-5xl font-black text-slate-900 mb-6 tracking-tight"}),l.jsx("p",{className:"text-lg text-slate-600 leading-relaxed mb-8",children:t.fullDesc}),l.jsxs("div",{className:"space-y-3 mb-10",children:[l.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Fitur Utama"}),t.features.map((d,m)=>l.jsxs("div",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[l.jsx("div",{className:`w-5 h-5 rounded-full ${c.bg} ${c.text} flex items-center justify-center shrink-0`,children:l.jsx(Es,{className:"w-3 h-3"})}),d]},m))]}),l.jsxs("button",{onClick:u,disabled:o,className:`
                                px-8 py-4 rounded-2xl font-bold text-white text-lg shadow-xl shadow-slate-200/50 flex items-center gap-3 transition-all active:scale-95
                                ${o?"bg-slate-300 cursor-not-allowed":`${c.btn} hover:-translate-y-1`}
                            `,children:[o?"Terkunci":t.buttonText,!o&&l.jsx(Yi,{className:"w-5 h-5"})]})]}),l.jsxs("div",{className:`aspect-square rounded-[3rem] bg-gradient-to-br ${c.gradient} opacity-90 relative overflow-hidden shadow-2xl flex items-center justify-center`,children:[l.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-white/20 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-white/10 rounded-full blur-2xl"}),l.jsxs("div",{className:"relative z-10 bg-white/10 backdrop-blur-md border border-white/20 p-8 rounded-3xl shadow-lg max-w-xs text-white/90 text-center",children:[l.jsx("img",{src:t.iconUrl,className:"w-20 h-20 mx-auto mb-4 opacity-90 drop-shadow-md"}),l.jsx("p",{className:"font-bold text-lg",children:"Preview Mode"}),l.jsx("p",{className:"text-xs opacity-70 mt-2",children:"Gambaran visual aplikasi saat dijalankan."})]})]})]})]})})},ww=({isAdmin:t})=>{const e=br(),{projectId:n}=TT(),r=xw.find(s=>s.id===n);return n&&r?l.jsx(R3,{project:r,isAdmin:t}):l.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-12 gap-4",children:[l.jsxs("div",{children:[l.jsx(dt,{id:"projects_title",defaultText:"Selected Projects",isAdmin:t,tag:"h1",className:"text-4xl md:text-5xl font-black text-slate-900 mb-3 tracking-tighter"}),l.jsx(dt,{id:"projects_subtitle",defaultText:"Kumpulan tools dan simulasi interaktif.",isAdmin:t,tag:"p",className:"text-slate-500 text-lg max-w-2xl"})]}),t&&l.jsxs("div",{className:"bg-slate-900 text-white px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 shadow-lg",children:[l.jsx(Td,{className:"w-4 h-4"}),"Admin Mode: Klik status badge untuk ubah."]})]}),l.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl p-5 mb-12 flex gap-4 items-start shadow-sm",children:[l.jsx("div",{className:"p-2 bg-amber-100 rounded-xl text-amber-600 shrink-0",children:l.jsx(da,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx(dt,{id:"projects_disclaimer_title",defaultText:"Info Pengunjung",isAdmin:t,tag:"h4",className:"font-bold text-amber-900 text-sm uppercase tracking-wide mb-1"}),l.jsx(dt,{id:"projects_disclaimer_text",defaultText:"Project dengan label 'Maintenance' atau 'Building' tidak bisa diakses sementara waktu demi alasan kestabilan. Silakan coba project yang berstatus 'Active'.",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-amber-700/80 leading-relaxed font-medium"})]})]}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:xw.map(s=>l.jsx(N3,{project:s,isAdmin:t,onClick:()=>{io("project",s.id,s.defaultTitle),e(`/projects/${s.id}`)}},s.id))})]})},Fa=({isOpen:t,title:e,description:n,onConfirm:r,onCancel:s,confirmText:i="Yes, Leave"})=>t?l.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:l.jsx("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl transform transition-all scale-100 animate-fade-in-up border border-slate-100",children:l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-amber-50 text-amber-500 rounded-full flex items-center justify-center mb-4 border border-amber-100",children:l.jsx(da,{className:"w-6 h-6"})}),l.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:e}),l.jsx("p",{className:"text-sm text-slate-500 mb-6 leading-relaxed",children:n}),l.jsxs("div",{className:"flex w-full gap-3",children:[l.jsx("button",{onClick:s,className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 rounded-xl font-medium hover:bg-slate-50 transition-colors text-sm",children:"Cancel"}),l.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-colors shadow-lg shadow-red-500/20 text-sm",children:i})]})]})})}):null,_w=({isAdmin:t})=>{const{id:e}=TT(),n=br(),[r,s]=j.useState([]),[i,o]=j.useState(!0),[a,c]=j.useState("list"),[u,d]=j.useState(null),m=6,[g,y]=j.useState(m),[b,x]=j.useState("add"),[w,v]=j.useState({}),[_,T]=j.useState(!1),[P,L]=j.useState([]),[B,k]=j.useState(null),[I,A]=j.useState(null),[N,U]=j.useState(""),[R,D]=j.useState(""),[M,H]=j.useState(null),[ye,re]=j.useState(null),[ne,Y]=j.useState({x:0,y:0,visible:!1}),[ue,q]=j.useState(!1),[z,X]=j.useState("url"),[le,ae]=j.useState(""),Ae=j.useRef(null),we=j.useRef(null);j.useEffect(()=>{e?(c("detail"),o(!0),s3(e).then(se=>{se?d(se):($e("Artikel tidak ditemukan."),n("/blog",{replace:!0})),o(!1)})):a!=="editor"&&(c("list"),Se())},[e]);const Se=async()=>{o(!0);try{const se=await RS();s(se)}catch(se){console.error("Failed to fetch blog posts",se)}finally{o(!1)}};j.useEffect(()=>{if(a==="editor"){const se=w.content||"";if(!se){L([{id:Date.now().toString(),type:"text",content:""}]);return}const de=/(!image\(.*?\))/g,De=se.split(de),We=De.map(et=>{const Lt=et.match(/^!image\((.*?)\)$/);return Lt?{id:Math.random().toString(36).substr(2,9),type:"image",content:Lt[1]}:{id:Math.random().toString(36).substr(2,9),type:"text",content:et}}).filter(et=>et.type==="image"||et.content.length>0||De.length===1);We.length===0&&We.push({id:Date.now().toString(),type:"text",content:""}),L(We)}},[a,w.id]);const ke=se=>{se&&(se.style.height="auto",se.style.height=`${se.scrollHeight}px`)};j.useEffect(()=>{a==="editor"&&(ke(Ae.current),ke(we.current))},[a,w.title,w.subtitle]),j.useEffect(()=>{const se=()=>{ne.visible&&Y({...ne,visible:!1})};return window.addEventListener("click",se),()=>window.removeEventListener("click",se)},[ne]);const qe=()=>{y(se=>se+m)},Be=()=>{y(m);const se=document.getElementById("blog-top");se&&se.scrollIntoView({behavior:"smooth"})},pt=()=>{x("add"),v({title:"",subtitle:"",category:"Category",date:new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),readTime:"5 min read",author:"Fanra",image:"",content:"",timestamp:Date.now(),sources:[]}),U(""),D(""),c("editor"),window.scrollTo(0,0)},it=(se,de)=>{se.stopPropagation(),x("edit"),v({...de,sources:de.sources||[]}),U(""),D(""),c("editor"),window.scrollTo(0,0)},C=(se,de)=>{se.stopPropagation(),H(de)},ie=async()=>{if(!M)return;const se=M;re(se),H(null);try{await a3(se),s(de=>de.filter(De=>De.id!==se)),(u==null?void 0:u.id)===se&&n("/blog"),$e("Artikel berhasil dihapus.")}catch{$e("Gagal menghapus artikel."),Se()}finally{re(null)}},Q=async()=>{if(!w.title){$e("Judul wajib diisi.");return}const se=P.map(de=>de.type==="image"?`

!image(${de.content})

`:de.content).join("").trim();if(!se){$e("Konten tidak boleh kosong.");return}T(!0);try{const de={...w,content:se,image:w.image||"https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop"};b==="add"?await i3(de):w.id&&await o3(w.id,de),$e(b==="add"?"Artikel berhasil diterbitkan!":"Artikel berhasil diperbarui!"),n("/blog")}catch(de){console.error(de),$e("Gagal menyimpan artikel.")}finally{T(!1)}},F=()=>{if(!N.trim()||!R.trim())return;const se={label:N.trim(),url:R.trim()},de=[...w.sources||[],se];v(De=>({...De,sources:de})),U(""),D("")},V=se=>{const de=(w.sources||[]).filter((De,We)=>We!==se);v(De=>({...De,sources:de}))},G=se=>{var De;const de=(De=se.target.files)==null?void 0:De[0];if(de){const We=new FileReader;We.onloadend=()=>{const et=We.result;v(Lt=>({...Lt,image:et}))},We.readAsDataURL(de)}},Z=se=>{io("blog",se.id||"unknown",se.title),n(`/blog/${se.id}`)},oe=(se,de)=>{se.preventDefault();const De=se.target;k(de),A(De.selectionStart),Y({x:se.pageX,y:se.pageY,visible:!0})},K=()=>{Y({...ne,visible:!1}),ae(""),X("url"),q(!0)},he=se=>{var De;const de=(De=se.target.files)==null?void 0:De[0];if(de){const We=new FileReader;We.onloadend=()=>{const et=We.result;ae(et)},We.readAsDataURL(de)}},ve=()=>{if(!le||!B){q(!1);return}const se=P.findIndex(Wt=>Wt.id===B);if(se===-1)return;const de=P[se],De=de.content.slice(0,I||de.content.length),We=de.content.slice(I||de.content.length),et=[...P];et[se]={...de,content:De};const Lt={id:Date.now().toString(),type:"image",content:le},yt={id:(Date.now()+1).toString(),type:"text",content:We};et.splice(se+1,0,Lt,yt),L(et),q(!1),ae("")},me=(se,de)=>{L(De=>De.map(We=>We.id===se?{...We,content:de}:We))},_e=se=>{confirm("Hapus elemen ini?")&&L(de=>de.filter((De,We)=>We!==se))},Ne=se=>se?se.split(`
`).map((de,De)=>{if(!de.trim())return l.jsx("br",{},De);const We=de.match(/^!image\((.*?)\)$/);if(We)return l.jsx("div",{className:"my-8",children:l.jsx("img",{src:We[1],alt:"Content Illustration",className:"w-full rounded-xl shadow-lg border border-slate-100"})},De);const et=/(\\\(.*?\\\)|\\\[.*?\\\])/g,Lt=de.split(et);return l.jsx("p",{className:"mb-6 text-slate-700 leading-8 text-lg",children:Lt.map((yt,Wt)=>{if(yt.startsWith("\\(")&&yt.endsWith("\\)")){const ln=yt.slice(2,-2);try{if(window.katex){const jt=window.katex.renderToString(ln,{throwOnError:!1,displayMode:!1});return l.jsx("span",{dangerouslySetInnerHTML:{__html:jt},className:"mx-1"},Wt)}return l.jsx("span",{className:"font-mono bg-yellow-100 px-1 rounded",children:ln},Wt)}catch{return yt}}if(yt.startsWith("\\[")&&yt.endsWith("\\]")){const ln=yt.slice(2,-2);try{if(window.katex){const jt=window.katex.renderToString(ln,{throwOnError:!1,displayMode:!0});return l.jsx("div",{dangerouslySetInnerHTML:{__html:jt},className:"my-4 text-center overflow-x-auto py-2"},Wt)}return l.jsx("div",{className:"font-mono bg-yellow-100 p-2 rounded my-2 text-center",children:ln},Wt)}catch{return yt}}return l.jsx("span",{children:yt},Wt)})},De)}):null,Le=r.slice(0,g),kt=g<r.length,En=g>m,zt=()=>u?r.filter(se=>se.id!==u.id).slice(0,2):[];if(a==="editor")return l.jsxs("div",{className:"min-h-screen bg-slate-100 animate-fade-in relative pb-20",children:[l.jsxs("div",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur-md border-b border-slate-200 px-6 py-4 flex items-center justify-between shadow-sm",children:[l.jsxs("button",{onClick:()=>n("/blog"),className:"flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 transition-colors px-4 py-2 rounded-xl hover:bg-slate-100 border border-transparent hover:border-slate-200",children:[l.jsx(Zn,{className:"w-4 h-4"}),"Cancel"]}),l.jsx("span",{className:"text-sm font-black text-slate-400 uppercase tracking-widest hidden md:block",children:b==="add"?"Creating New Story":"Editing Mode"}),l.jsxs("button",{onClick:Q,disabled:_,className:"bg-slate-900 text-white px-6 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[_?l.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):l.jsx(Es,{className:"w-4 h-4"}),_?"Publishing...":"Publish"]})]}),l.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:l.jsxs("div",{className:"bg-white shadow-xl shadow-slate-200/50 rounded-3xl p-8 md:p-12 border border-slate-200",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-5 mb-8 p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[l.jsxs("div",{className:"flex flex-col gap-1.5",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Kategori"}),l.jsx("input",{type:"text",value:w.category,onChange:se=>v(de=>({...de,category:se.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors",placeholder:"Science..."})]}),l.jsxs("div",{className:"flex flex-col gap-1.5",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Penulis"}),l.jsx("input",{type:"text",value:w.author,onChange:se=>v(de=>({...de,author:se.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]}),l.jsxs("div",{className:"flex flex-col gap-1.5",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu Baca"}),l.jsx("input",{type:"text",value:w.readTime,onChange:se=>v(de=>({...de,readTime:se.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]}),l.jsxs("div",{className:"flex flex-col gap-1.5",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Tanggal"}),l.jsx("input",{type:"text",value:w.date,onChange:se=>v(de=>({...de,date:se.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]})]}),l.jsxs("div",{className:"space-y-6 mb-10 pb-10 border-b border-dashed border-slate-200",children:[l.jsx("textarea",{ref:Ae,rows:1,value:w.title||"",onChange:se=>v(de=>({...de,title:se.target.value})),className:"w-full text-4xl md:text-5xl font-black text-slate-900 bg-transparent border-b-2 border-transparent focus:border-slate-200 outline-none placeholder:text-slate-300 resize-none overflow-hidden leading-tight py-2 transition-colors",placeholder:"Judul Utama Artikel..."}),l.jsx("textarea",{ref:we,rows:1,value:w.subtitle||"",onChange:se=>v(de=>({...de,subtitle:se.target.value})),className:"w-full text-xl font-medium text-slate-500 bg-transparent border-b border-transparent focus:border-slate-200 outline-none placeholder:text-slate-300 resize-none overflow-hidden leading-relaxed py-2 transition-colors",placeholder:"Tulis subtitle atau ringkasan menarik di sini..."})]}),l.jsxs("div",{className:"mb-10 group relative p-4 rounded-3xl border-2 border-dashed border-slate-200 hover:border-blue-400 transition-colors bg-slate-50/50",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-3 text-center",children:"Cover Image"}),l.jsxs("div",{className:"w-full aspect-video rounded-2xl overflow-hidden shadow-sm bg-white border border-slate-100 flex flex-col items-center justify-center relative",children:[w.image?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:w.image,alt:"Cover",className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:l.jsxs("div",{className:"text-white font-bold flex items-center gap-2",children:[l.jsx(ha,{className:"w-5 h-5"})," Ganti Gambar"]})})]}):l.jsxs("div",{className:"text-center p-8",children:[l.jsx(bs,{className:"w-8 h-8 text-slate-300 mx-auto mb-3"}),l.jsx("p",{className:"text-slate-400 font-bold text-sm",children:"Upload Cover Image"})]}),l.jsx("input",{type:"file",accept:"image/*",onChange:G,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),l.jsx("input",{type:"text",value:w.image||"",onChange:se=>v(de=>({...de,image:se.target.value})),placeholder:"...atau tempel URL gambar disini",className:"w-full mt-4 text-xs text-slate-500 bg-white border border-slate-200 rounded-lg px-3 py-2 outline-none focus:border-blue-400 transition-colors text-center"})]}),l.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-100 p-4 rounded-xl text-xs text-blue-800 flex flex-col gap-2",children:[l.jsxs("p",{className:"font-bold flex items-center gap-2",children:[l.jsx($v,{className:"w-4 h-4"})," Panduan Editor:"]}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 opacity-80",children:[l.jsxs("li",{children:["Gunakan ",l.jsx("code",{children:"\\( rumus \\)"})," untuk matematika inline."]}),l.jsxs("li",{children:["Gunakan ",l.jsx("code",{children:"\\[ rumus \\]"})," untuk matematika blok."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Klik Kanan"})," di area teks untuk menyisipkan gambar di tengah paragraf."]})]})]}),l.jsxs("div",{className:"relative space-y-2",children:[P.map((se,de)=>l.jsx("div",{className:"relative group/block",children:se.type==="text"?l.jsx("textarea",{value:se.content,onChange:De=>{me(se.id,De.target.value),ke(De.target)},onFocus:De=>ke(De.target),onContextMenu:De=>oe(De,se.id),className:"w-full text-lg leading-9 text-slate-800 bg-transparent border-none outline-none placeholder:text-slate-300 resize-none font-serif transition-colors overflow-hidden focus:bg-slate-50 rounded-lg px-2",placeholder:de===0?"Mulai menulis cerita Anda di sini...":"Lanjutkan menulis...",rows:1}):l.jsxs("div",{className:"relative my-4 group/image",children:[l.jsx("div",{className:"rounded-xl overflow-hidden shadow-lg border border-slate-200 bg-slate-50",children:l.jsx("img",{src:se.content,alt:"Inline",className:"w-full h-auto object-contain max-h-[500px]"})}),l.jsx("button",{onClick:()=>_e(de),className:"absolute top-3 right-3 bg-red-500 text-white p-2 rounded-full shadow-md opacity-0 group-hover/image:opacity-100 transition-opacity hover:bg-red-600 hover:scale-110",title:"Hapus Gambar",children:l.jsx(gr,{className:"w-4 h-4"})})]})},se.id)),ne.visible&&l.jsx("div",{className:"fixed z-50 bg-white border border-slate-200 rounded-lg shadow-xl py-1 w-48 animate-fade-in",style:{top:ne.y,left:ne.x},children:l.jsxs("button",{onClick:K,className:"w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 hover:text-blue-600 flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 bg-slate-100 rounded flex items-center justify-center text-[10px]",children:""}),"Sisipkan Gambar"]})}),ue&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-2xl w-full max-w-md animate-fade-in-up border border-slate-100",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Sisipkan Gambar"}),l.jsxs("div",{className:"flex gap-2 mb-4 bg-slate-100 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>X("url"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${z==="url"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Link URL"}),l.jsx("button",{onClick:()=>X("upload"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${z==="upload"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Upload File"})]}),z==="url"?l.jsx("input",{type:"text",value:le,onChange:se=>ae(se.target.value),placeholder:"https://example.com/image.jpg",className:"w-full border border-slate-200 rounded-xl px-4 py-3 text-sm mb-6 outline-none focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10 bg-slate-50 text-slate-900 placeholder:text-slate-400",autoFocus:!0}):l.jsxs("div",{className:"mb-6",children:[l.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-slate-300 border-dashed rounded-2xl cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors",children:[l.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[l.jsx(bs,{className:"w-8 h-8 text-slate-400 mb-2"}),l.jsx("p",{className:"text-xs text-slate-500 font-bold",children:"Klik untuk pilih file"}),l.jsx("p",{className:"text-[10px] text-slate-400",children:"JPG, PNG, WEBP (Max 2MB)"})]}),l.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:he})]}),le&&l.jsx("div",{className:"mt-2 text-center",children:l.jsxs("p",{className:"text-xs text-green-600 font-bold flex items-center justify-center gap-1",children:[l.jsx(Es,{className:"w-3 h-3"})," File siap disisipkan"]})})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>q(!1),className:"px-5 py-2.5 text-xs font-bold text-slate-500 hover:bg-slate-100 rounded-xl transition-colors",children:"Batal"}),l.jsx("button",{onClick:ve,className:"px-6 py-2.5 text-xs font-bold bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-900/20 active:scale-95",children:"Sisipkan"})]})]})})]}),l.jsxs("div",{className:"mt-16 pt-10 border-t border-slate-200",children:[l.jsxs("h4",{className:"text-sm font-bold text-slate-800 uppercase tracking-widest mb-6 flex items-center gap-2",children:[l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/2420/2420165.png",alt:"Sources",className:"w-4 h-4 object-contain opacity-60"})," Referensi & Sumber"]}),l.jsx("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200 mb-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Nama Sumber"}),l.jsx("input",{type:"text",value:N,onChange:se=>U(se.target.value),placeholder:"Contoh: Wikipedia",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"URL Link"}),l.jsx("input",{type:"text",value:R,onChange:se=>D(se.target.value),placeholder:"https://...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),l.jsx("div",{children:l.jsx("button",{onClick:F,disabled:!N||!R,className:"w-full py-2 bg-slate-900 text-white rounded-lg text-sm font-bold hover:bg-slate-800 disabled:opacity-50 transition-all",children:"+ Tambah"})})]})}),w.sources&&w.sources.length>0&&l.jsx("div",{className:"space-y-2",children:w.sources.map((se,de)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-xl hover:border-slate-300 transition-colors group",children:[l.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center shrink-0",children:l.jsx(ec,{className:"w-4 h-4"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:se.label}),l.jsx("p",{className:"text-xs text-slate-400 truncate",children:se.url})]})]}),l.jsx("button",{onClick:()=>V(de),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:l.jsx(gr,{className:"w-4 h-4"})})]},de))}),(!w.sources||w.sources.length===0)&&l.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"Belum ada sumber yang ditambahkan."})]})]})})]});if(a==="detail"&&u){const se=zt();return l.jsx("article",{className:"min-h-screen bg-white animate-fade-in pb-20",children:l.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-12",children:[l.jsxs("button",{onClick:()=>n("/blog"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[l.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:l.jsx(Zn,{className:"w-4 h-4"})}),"Kembali"]}),l.jsxs("header",{className:"mb-12",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-bold uppercase tracking-wider",children:u.category}),l.jsx("span",{className:"text-slate-400 text-sm font-medium",children:u.readTime})]}),l.jsx("h1",{className:"text-3xl md:text-5xl font-black text-slate-900 mb-6 leading-tight tracking-tight",children:u.title}),l.jsx("p",{className:"text-lg md:text-xl text-slate-500 leading-relaxed font-medium",children:u.subtitle}),l.jsxs("div",{className:"flex items-center gap-4 mt-8 pt-8 border-t border-slate-100",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-900 text-white flex items-center justify-center font-bold text-sm",children:u.author.charAt(0)}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-bold text-slate-900",children:u.author}),l.jsx("p",{className:"text-xs text-slate-500",children:u.date})]})]})]}),l.jsx("figure",{className:"mb-12",children:l.jsx("img",{src:u.image,alt:u.title,className:"w-full aspect-video object-cover rounded-2xl shadow-lg border border-slate-100"})}),l.jsx("div",{className:"prose prose-lg prose-slate max-w-none mb-16 font-serif",children:Ne(u.content)}),u.sources&&u.sources.length>0&&l.jsxs("div",{className:"border-t border-slate-100 pt-10 mb-16",children:[l.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[l.jsx(ec,{className:"w-4 h-4"}),"Sumber Referensi"]}),l.jsx("ul",{className:"space-y-3",children:u.sources.map((de,De)=>l.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[l.jsxs("span",{className:"text-slate-300 font-bold select-none",children:[De+1,"."]}),l.jsx("a",{href:de.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline font-medium break-all",children:de.label})]},De))})]}),se.length>0&&l.jsxs("div",{className:"border-t-2 border-slate-100 pt-12",children:[l.jsxs("h3",{className:"text-xl font-black text-slate-900 mb-6 flex items-center gap-3",children:[l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1170/1170221.png",alt:"Read Also",className:"w-6 h-6 object-contain opacity-60"}),"Baca Juga"]}),l.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:se.map(de=>l.jsxs("div",{onClick:()=>Z(de),className:"group cursor-pointer bg-slate-50 rounded-2xl p-4 border border-slate-100 hover:border-slate-300 hover:bg-white hover:shadow-lg transition-all",children:[l.jsx("div",{className:"aspect-video rounded-xl overflow-hidden mb-4 bg-slate-200",children:l.jsx("img",{src:de.image,alt:de.title,className:"w-full h-full object-cover opacity-90 group-hover:scale-105 transition-transform duration-500"})}),l.jsx("h4",{className:"font-bold text-slate-900 leading-tight mb-2 group-hover:text-blue-600 line-clamp-2",children:de.title}),l.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:de.subtitle})]},de.id))})]})]})})}return l.jsxs("div",{id:"blog-top",className:"max-w-7xl mx-auto px-6 py-12 animate-fade-in relative pb-24",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-16 gap-6",children:[l.jsxs("div",{className:"max-w-2xl",children:[l.jsx(dt,{id:"blog_header_title",defaultText:"Insights & Stories",isAdmin:t,tag:"h1",className:"text-4xl md:text-6xl font-black text-slate-900 mb-6 tracking-tight"}),l.jsx(dt,{id:"blog_header_desc",defaultText:"Kumpulan pemikiran mendalam, fakta sains, dan eksplorasi ide yang mungkin bikin lo begadang mikirin alam semesta.",isAdmin:t,tag:"p",multiline:!0,className:"text-lg text-slate-500 leading-relaxed"})]}),t&&l.jsxs("button",{onClick:pt,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 whitespace-nowrap",children:[l.jsx($v,{className:"w-5 h-5"}),"Write Story"]})]}),l.jsx(Fa,{isOpen:!!M,title:"Hapus Artikel?",description:"Artikel ini akan dihapus permanen. Tindakan ini tidak bisa dibatalkan.",confirmText:"Ya, Hapus",onConfirm:ie,onCancel:()=>H(null)}),i&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[l.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),l.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Artikel..."})]}),!i&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[Le.map(se=>l.jsxs("div",{onClick:()=>Z(se),className:"group cursor-pointer flex flex-col h-full relative",children:[l.jsxs("div",{className:"relative aspect-[4/3] bg-slate-100 rounded-[2rem] overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500 border border-slate-200",children:[l.jsx("img",{src:se.image,alt:se.title,loading:"lazy",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"}),t&&l.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2",children:[l.jsx("button",{onClick:de=>it(de,se),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-blue-600 hover:bg-white transition-colors",children:l.jsx(ha,{className:"w-4 h-4"})}),l.jsx("button",{onClick:de=>C(de,se.id),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-red-500 hover:bg-white transition-colors",children:ye===se.id?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):l.jsx(gr,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 to-transparent pointer-events-none"}),l.jsx("div",{className:"absolute top-6 left-6",children:l.jsx("span",{className:"bg-white/90 backdrop-blur text-slate-900 text-[10px] font-bold px-3 py-1.5 rounded-full uppercase tracking-wider shadow-sm",children:se.category})})]}),l.jsxs("div",{className:"flex-1 flex flex-col",children:[l.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium text-slate-400 mb-3",children:[l.jsx("span",{children:se.date}),l.jsx("span",{children:""}),l.jsx("span",{children:se.readTime})]}),l.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3 leading-tight group-hover:text-blue-600 transition-colors",children:se.title}),l.jsx("p",{className:"text-slate-500 line-clamp-3 leading-relaxed mb-6",children:se.subtitle}),l.jsxs("div",{className:"mt-auto flex items-center text-sm font-bold text-slate-900 group-hover:translate-x-2 transition-transform duration-300",children:["Baca Selengkapnya ",l.jsx(Yi,{className:"w-4 h-4 ml-2"})]})]})]},se.id)),r.length<=m&&l.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-[2rem] flex flex-col items-center justify-center p-8 text-center min-h-[400px]",children:[l.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4 text-slate-300",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3018/3018445.png",alt:"Coming Soon",className:"w-8 h-8 object-contain opacity-50"})}),l.jsx(dt,{id:"blog_placeholder_title",defaultText:"Tulisan Mendatang",isAdmin:t,tag:"h3",className:"font-bold text-slate-400 mb-2"}),l.jsx(dt,{id:"blog_placeholder_desc",defaultText:"Artikel tentang AI Consciousness, Sejarah Internet, dan Psikologi Warna sedang ditulis...",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-slate-400 max-w-xs mx-auto"})]})]}),l.jsxs("div",{className:"flex flex-col items-center gap-3 mt-16 mb-8",children:[kt&&l.jsxs("button",{onClick:qe,className:"px-6 py-3 rounded-full bg-white border border-slate-200 text-slate-700 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Artikel Lainnya ",l.jsx($n,{className:"w-4 h-4"})]}),En&&l.jsxs("button",{onClick:Be,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Tutup / Sembunyikan ",l.jsx($n,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]})},P3=({isAdmin:t})=>{const[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,o]=j.useState("All"),[a,c]=j.useState(null),u=9,[d,m]=j.useState(u),[g,y]=j.useState(!1),[b,x]=j.useState("add"),[w,v]=j.useState({}),[_,T]=j.useState(!1),P=j.useRef(null),[L,B]=j.useState(null),[k,I]=j.useState(null),[A,N]=j.useState(null),[U,R]=j.useState(null),D=async()=>{s(!0);try{const F=await $0();n(F)}catch(F){console.error("Failed to load photos",F)}finally{s(!1)}};j.useEffect(()=>{D()},[]),j.useEffect(()=>{m(u)},[i]),j.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]);const M=["All",...Array.from(new Set(e.map(F=>F.year))).sort().reverse()],H=i==="All"?e:e.filter(F=>F.year===i),ye=H.slice(0,d),re=d<H.length,ne=d>u,Y=ye.reduce((F,V)=>(F[V.year]||(F[V.year]=[]),F[V.year].push(V),F),{}),ue=Object.keys(Y).sort().reverse(),q=a?H.findIndex(F=>F.id===a.id):-1,z=q<H.length-1,X=q>0,le=F=>{F==null||F.stopPropagation(),z&&Ae(H[q+1])},ae=F=>{F==null||F.stopPropagation(),X&&Ae(H[q-1])},Ae=F=>{c(F),F&&io("photo",F.id||"unknown",F.caption||"Untitled Photo")};j.useEffect(()=>{if(!a)return;const F=V=>{V.key==="ArrowRight"&&le(),V.key==="ArrowLeft"&&ae(),V.key==="Escape"&&c(null),V.key==="Home"&&(V.preventDefault(),H.length>0&&Ae(H[0])),V.key==="End"&&(V.preventDefault(),H.length>0&&Ae(H[H.length-1]))};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[a,H]);const we=()=>{m(F=>F+u)},Se=()=>{m(u);const F=document.getElementById("gallery-top-anchor");F&&F.scrollIntoView({behavior:"smooth"})},ke=()=>{x("add"),v({src:"",caption:"",month:"Januari",year:new Date().getFullYear().toString(),timestamp:Date.now()}),y(!0)},qe=(F,V)=>{F.stopPropagation(),x("edit"),v({...V}),y(!0)},Be=(F,V)=>{F.stopPropagation(),V&&R(V)},pt=(F,V)=>{F.stopPropagation(),B(V),P.current&&(P.current.value="",P.current.click())},it=F=>{var G;const V=(G=F.target.files)==null?void 0:G[0];if(V&&L){const Z=L;I(Z);const oe=new FileReader;oe.onloadend=async()=>{const K=oe.result;try{await mw(Z,{src:K}),n(he=>he.map(ve=>ve.id===Z?{...ve,src:K}:ve)),a&&a.id===Z&&c(he=>he?{...he,src:K}:null),$e("Foto berhasil diganti!")}catch(he){console.error("Gagal ganti foto:",he),$e("Gagal mengganti foto.")}finally{I(null),B(null)}},oe.readAsDataURL(V)}},C=async()=>{if(!U)return;const F=U;N(F),R(null);try{await n3(F),n(V=>V.filter(G=>G.id!==F)),(a==null?void 0:a.id)===F&&c(null),$e("Foto berhasil dihapus.")}catch(V){console.error(V),$e("Gagal menghapus foto. Cek koneksi internet."),D()}finally{N(null)}},ie=async()=>{if(!w.src||!w.year){$e("Gambar dan Tahun wajib diisi.");return}T(!0);try{b==="add"?await t3(w):w.id&&(await mw(w.id,w),a&&a.id===w.id&&c(w)),y(!1),$e(b==="add"?"Foto ditambahkan!":"Foto diperbarui!"),D()}catch(F){console.error(F),$e("Gagal menyimpan data.")}finally{T(!1)}},Q=F=>{var G;const V=(G=F.target.files)==null?void 0:G[0];if(V){const Z=new FileReader;Z.onloadend=()=>{const oe=Z.result;v(K=>({...K,src:oe}))},Z.readAsDataURL(V)}};return l.jsxs("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:[l.jsx("input",{type:"file",ref:P,onChange:it,accept:"image/*",className:"hidden"}),l.jsx(Fa,{isOpen:!!U,title:"Hapus Memori?",description:"Foto ini akan dihapus secara permanen dari galeri. Tindakan ini tidak dapat dibatalkan.",confirmText:"Ya, Hapus",onConfirm:C,onCancel:()=>R(null)}),l.jsxs("div",{id:"gallery-top-anchor",className:"max-w-7xl mx-auto px-6 pt-12 pb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-slate-900 mb-4 tracking-tight",children:["Visual ",l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Diaries"})]}),l.jsx("p",{className:"text-lg text-slate-500 max-w-2xl leading-relaxed",children:"Koleksi momen acak, dikelompokkan berdasarkan waktu."})]}),t&&l.jsxs("button",{onClick:ke,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95",children:[l.jsx(bs,{className:"w-5 h-5"}),"Add Memory"]})]}),l.jsx("div",{className:"flex flex-wrap gap-2 mt-8",children:M.map(F=>l.jsx("button",{onClick:()=>o(F),className:`px-5 py-2 rounded-full text-sm font-bold transition-all duration-300 ${i===F?"bg-slate-900 text-white shadow-lg shadow-slate-900/20":"bg-slate-50 text-slate-500 hover:bg-slate-100 hover:text-slate-900"}`,children:F},F))})]}),l.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[l.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),l.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Galeri..."})]}),!r&&H.length===0&&l.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[l.jsx(fh,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada foto di periode ini."})]}),!r&&ye.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"space-y-16",children:ue.map(F=>l.jsxs("div",{className:"animate-fade-in-up",children:[l.jsxs("div",{className:"flex items-center gap-6 mb-8 mt-4",children:[l.jsx("span",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tighter",children:F}),l.jsx("div",{className:"h-0.5 bg-slate-200 flex-1 rounded-full opacity-50"})]}),l.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-3 gap-6 space-y-6",children:Y[F].map(V=>l.jsxs("div",{className:"break-inside-avoid relative group cursor-pointer rounded-2xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-lg transition-all duration-300 transform translate-z-0",onClick:()=>Ae(V),children:[k===V.id&&l.jsxs("div",{className:"absolute inset-0 z-30 bg-slate-900/50 backdrop-blur-sm flex flex-col items-center justify-center",children:[l.jsx("div",{className:"w-8 h-8 border-4 border-white/30 border-t-white rounded-full animate-spin mb-2"}),l.jsx("span",{className:"text-white text-[10px] font-bold uppercase tracking-wider",children:"Mengganti..."})]}),l.jsx("img",{src:V.src,alt:V.caption,loading:"lazy",className:"w-full h-auto object-cover transform transition-transform duration-700 group-hover:scale-105",onError:G=>{G.currentTarget.src="https://placehold.co/600x400/e2e8f0/94a3b8?text=Image+Error",G.currentTarget.onerror=null}}),t&&l.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:G=>pt(G,V.id),className:"p-2.5 bg-white text-slate-700 rounded-full shadow-md hover:bg-green-50 hover:text-green-600 transition-colors border border-slate-100",title:"Ganti Foto (Quick Swap)",children:l.jsx(ua,{className:"w-4 h-4"})}),l.jsx("button",{onClick:G=>qe(G,V),className:"p-2.5 bg-white text-slate-700 rounded-full shadow-md hover:bg-blue-50 hover:text-blue-600 transition-colors border border-slate-100",title:"Edit Caption & Info",children:l.jsx(ha,{className:"w-4 h-4"})}),l.jsx("button",{onClick:G=>Be(G,V.id),disabled:A===V.id,className:`p-2.5 bg-white rounded-full shadow-md transition-colors border border-slate-100 ${A===V.id?"text-slate-300 cursor-wait":"text-red-500 hover:bg-red-50"}`,title:"Hapus",children:A===V.id?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):l.jsx(gr,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),l.jsx("div",{className:"absolute bottom-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:l.jsx("span",{className:"bg-black/30 backdrop-blur-md text-white text-[10px] font-bold px-3 py-1.5 rounded-full border border-white/20 uppercase tracking-widest shadow-sm",children:V.month})})]},V.id||V.src))})]},F))}),l.jsxs("div",{className:"flex flex-col items-center gap-3 mt-20 mb-8",children:[re&&l.jsxs("button",{onClick:we,className:"px-6 py-3 rounded-full bg-white border border-slate-200 text-slate-700 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Momen Terdahulu ",l.jsx($n,{className:"w-4 h-4"})]}),ne&&l.jsxs("button",{onClick:Se,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Tutup / Sembunyikan ",l.jsx($n,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]}),a&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white/95 backdrop-blur-xl flex items-center justify-center p-4 animate-fade-in",onClick:()=>c(null),children:[X&&l.jsx("button",{onClick:ae,className:"fixed left-4 top-1/2 -translate-y-1/2 z-[110] p-3 bg-white/80 hover:bg-white text-slate-800 rounded-full shadow-lg border border-slate-200 transition-all hover:scale-110 active:scale-95 group hidden md:block",title:"Sebelumnya (Arrow Left)",children:l.jsx(Zn,{className:"w-6 h-6"})}),z&&l.jsx("button",{onClick:le,className:"fixed right-4 top-1/2 -translate-y-1/2 z-[110] p-3 bg-white/80 hover:bg-white text-slate-800 rounded-full shadow-lg border border-slate-200 transition-all hover:scale-110 active:scale-95 group hidden md:block",title:"Selanjutnya (Arrow Right)",children:l.jsx(Zn,{className:"w-6 h-6 rotate-180"})}),l.jsxs("div",{className:"relative max-w-5xl w-full flex flex-col items-center gap-6",onClick:F=>F.stopPropagation(),children:[l.jsxs("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl max-h-[75vh] w-auto max-w-full bg-slate-50 border border-slate-200",children:[k===a.id&&l.jsxs("div",{className:"absolute inset-0 z-30 bg-slate-900/50 backdrop-blur-sm flex flex-col items-center justify-center",children:[l.jsx("div",{className:"w-10 h-10 border-4 border-white/30 border-t-white rounded-full animate-spin mb-3"}),l.jsx("span",{className:"text-white text-xs font-bold uppercase tracking-wider",children:"Updating..."})]}),l.jsx("img",{src:a.src,alt:"Gallery View",className:"max-w-full max-h-[75vh] object-contain",onError:F=>{F.currentTarget.src="https://placehold.co/600x400/e2e8f0/94a3b8?text=Image+Error",F.currentTarget.onerror=null}})]}),l.jsxs("div",{className:"text-center max-w-2xl px-4 animate-fade-in-up",children:[l.jsxs("p",{className:"text-lg md:text-xl text-slate-900 font-medium leading-relaxed",children:['"',a.caption,'"']}),l.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:l.jsxs("div",{className:"inline-block px-3 py-1 bg-slate-100 rounded-full text-slate-600 text-xs font-bold uppercase tracking-widest border border-slate-200",children:[a.month," ",a.year]})}),t&&l.jsxs("div",{className:"flex justify-center gap-3 mt-6 pt-6 border-t border-slate-100",children:[l.jsxs("button",{onClick:F=>pt(F,a.id),className:"px-4 py-2 bg-green-50 text-green-700 hover:bg-green-100 rounded-lg text-xs font-bold flex items-center gap-2 transition-colors border border-green-100",children:[l.jsx(ua,{className:"w-3.5 h-3.5"})," Ganti Foto"]}),l.jsxs("button",{onClick:F=>qe(F,a),className:"px-4 py-2 bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg text-xs font-bold flex items-center gap-2 transition-colors border border-blue-100",children:[l.jsx(ha,{className:"w-3.5 h-3.5"})," Edit Info"]}),l.jsxs("button",{onClick:F=>Be(F,a.id),className:"px-4 py-2 bg-red-50 text-red-700 hover:bg-red-100 rounded-lg text-xs font-bold flex items-center gap-2 transition-colors border border-red-100",children:[l.jsx(gr,{className:"w-3.5 h-3.5"})," Hapus"]})]})]})]})]}),g&&l.jsx("div",{className:"fixed inset-0 z-[120] bg-slate-900/40 backdrop-blur-md flex items-center justify-center p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl p-8 shadow-2xl animate-fade-in-up border border-slate-100 overflow-y-auto max-h-[90vh]",children:[l.jsxs("div",{className:"flex justify-between items-center mb-8",children:[l.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:b==="add"?"Tambah Memori":"Edit Memori"}),l.jsx("button",{onClick:()=>y(!1),className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-900 transition-colors",children:""})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Gambar"}),l.jsx("div",{className:"flex gap-3 mb-3",children:l.jsx("input",{type:"file",accept:"image/*",onChange:Q,className:"text-xs w-full file:mr-4 file:py-2.5 file:px-5 file:rounded-full file:border-0 file:text-xs file:font-bold file:bg-blue-50 file:text-blue-600 hover:file:bg-blue-100 transition-colors cursor-pointer bg-slate-50 rounded-xl p-1"})}),l.jsx("input",{type:"text",placeholder:"Atau tempel URL gambar...",value:w.src||"",onChange:F=>v(V=>({...V,src:F.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none placeholder:text-slate-400"}),w.src&&l.jsxs("div",{className:"mt-4 h-32 w-full rounded-xl overflow-hidden border border-slate-200 bg-slate-50 relative group",children:[l.jsx("img",{src:w.src,alt:"Preview",className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xs font-bold bg-black/50 px-3 py-1 rounded-full backdrop-blur-sm",children:"Preview"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Caption"}),l.jsx("textarea",{value:w.caption||"",onChange:F=>v(V=>({...V,caption:F.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none resize-none h-32 leading-relaxed placeholder:text-slate-400",placeholder:"Ceritakan momen ini..."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Bulan"}),l.jsxs("div",{className:"relative",children:[l.jsx("select",{value:w.month||"Januari",onChange:F=>v(V=>({...V,month:F.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none appearance-none font-medium",children:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"].map(F=>l.jsx("option",{value:F,children:F},F))}),l.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:l.jsx($n,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Tahun"}),l.jsx("input",{type:"number",value:w.year||"",onChange:F=>v(V=>({...V,year:F.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none font-medium"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 mt-10 pt-6 border-t border-slate-100",children:[l.jsx("button",{onClick:()=>y(!1),className:"px-6 py-3 text-slate-500 hover:text-slate-800 hover:bg-slate-50 rounded-xl text-sm font-bold transition-all",children:"Batal"}),l.jsxs("button",{onClick:ie,disabled:_,className:"px-8 py-3 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800 disabled:opacity-50 transition-all shadow-lg shadow-slate-900/20 active:scale-95 flex items-center gap-2",children:[_&&l.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),_?"Menyimpan...":"Simpan Memori"]})]})]})})]})},M3=({isAdmin:t})=>{const[e,n]=j.useState([]),[r,s]=j.useState(null),[i,o]=j.useState(!1),[a,c]=j.useState(!0),[u,d]=j.useState(!1),[m,g]=j.useState(""),[y,b]=j.useState(""),[x,w]=j.useState(""),[v,_]=j.useState(""),[T,P]=j.useState(!1),L=j.useRef(null),B=j.useRef(null),[k,I]=j.useState(!1),[A,N]=j.useState(null),U=j.useRef(null),R=async()=>{c(!0);try{const z=await PS();n(z),z.length>0&&(s(X=>X&&z.find(ae=>ae.id===X.id)||z[0]),o(!1))}catch(z){console.error(z)}finally{c(!1)}};j.useEffect(()=>{R()},[]),j.useEffect(()=>{let z;return!a&&e.length>0&&(z=setTimeout(()=>{o(!0)},5e3)),()=>{z&&clearTimeout(z)}},[a,e.length]);const D=z=>{try{if(z.includes("/track/")){const X=z.split("/track/");if(X.length>1)return X[1].split("?")[0]}if(z.includes("spotify:track:")){const X=z.split(":");if(X.length>2)return X[2]}if(z.length>15&&!z.includes("/"))return z}catch{return null}return null},M=z=>{var le;const X=(le=z.target.files)==null?void 0:le[0];if(X){const ae=new FileReader;ae.onloadend=()=>{_(ae.result)},ae.readAsDataURL(X)}},H=async()=>{if(!m||!y||!x){$e("Harap isi URL, Judul, dan Artis.");return}const z=D(m);if(!z){$e("Link Spotify tidak valid.");return}P(!0);try{await c3({spotifyId:z,title:y,artist:x,image:v,addedAt:Date.now()}),await R(),d(!1),g(""),b(""),w(""),_(""),$e("Lagu berhasil ditambahkan!")}catch{$e("Gagal menambahkan lagu.")}finally{P(!1)}},ye=z=>{var le;const X=(le=z.target.files)==null?void 0:le[0];if(X&&(r!=null&&r.id)){const ae=new FileReader;ae.onloadend=async()=>{const Ae=ae.result;try{await u3(r.id,{image:Ae}),s(we=>we?{...we,image:Ae}:null),n(we=>we.map(Se=>Se.id===r.id?{...Se,image:Ae}:Se)),$e("Cover lagu diperbarui!")}catch{$e("Gagal update cover.")}},ae.readAsDataURL(X)}},re=(z,X)=>{X.stopPropagation(),N(z),I(!0)},ne=async()=>{if(A)try{if(await d3(A),n(z=>z.filter(X=>X.id!==A)),(r==null?void 0:r.id)===A){const z=e.filter(X=>X.id!==A);z.length>0?(s(z[0]),o(!1)):(s(null),o(!1))}$e("Lagu dihapus.")}catch{$e("Gagal menghapus.")}finally{I(!1),N(null)}},Y=z=>{(r==null?void 0:r.id)===z.id?o(!i):(s(z),o(!0),io("music",z.id||"unknown",`${z.title} - ${z.artist}`))},ue=async(z,X)=>{if(X==="up"&&z===0||X==="down"&&z===e.length-1)return;const le=[...e],ae=X==="up"?z-1:z+1;[le[z],le[ae]]=[le[ae],le[z]],n(le);try{await h3(le)}catch{$e("Gagal menyimpan urutan."),R()}},q=`bg-gradient-to-tr ${i?"from-blue-300 to-purple-300":"from-slate-200 to-gray-200"}`;return l.jsxs("div",{className:"min-h-screen bg-white relative overflow-hidden flex flex-col h-full",children:[l.jsx("style",{children:".no-scrollbar::-webkit-scrollbar { display: none; } .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }"}),l.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-blue-50/50 rounded-full blur-3xl opacity-60 pointer-events-none translate-x-1/3 -translate-y-1/3"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-purple-50/50 rounded-full blur-3xl opacity-60 pointer-events-none -translate-x-1/3 translate-y-1/3"}),l.jsx(Fa,{isOpen:k,title:"Hapus Lagu?",description:"Lagu ini akan dihapus dari playlist publik. Yakin?",confirmText:"Ya, Hapus",onConfirm:ne,onCancel:()=>I(!1)}),l.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar relative z-10 pb-24",children:l.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8 md:py-12",children:[l.jsxs("div",{className:"text-center mb-8 md:mb-10",children:[l.jsx(dt,{id:"music_title",defaultText:"Soundtrack of Life",isAdmin:t,tag:"h1",className:"text-3xl md:text-5xl font-black text-slate-900 tracking-tighter mb-2 md:mb-4"}),l.jsx(dt,{id:"music_desc",defaultText:"Kumpulan frekuensi pengiring coding & kontemplasi malam.",isAdmin:t,tag:"p",className:"text-sm md:text-base text-slate-500 font-medium"})]}),r&&l.jsxs("div",{className:"relative rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 shadow-2xl shadow-slate-200/50 mb-10 md:mb-12 overflow-hidden transition-all hover:shadow-slate-300/50 group/player border border-slate-100",style:{backgroundColor:r.image?"transparent":"rgba(255, 255, 255, 0.8)",backgroundImage:r.image?`url(${r.image})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[r.image&&l.jsx("div",{className:"absolute inset-0 bg-white/40 backdrop-blur-md z-0 transition-opacity duration-500"}),!r.image&&l.jsx("div",{className:"absolute inset-0 z-0 opacity-20 blur-3xl scale-125 pointer-events-none transition-colors duration-1000",children:l.jsx("div",{className:`w-full h-full ${q}`})}),t&&l.jsxs("div",{className:"absolute top-4 right-4 z-30 flex gap-2 opacity-0 group-hover/player:opacity-100 transition-opacity",children:[l.jsx("input",{type:"file",ref:B,onChange:ye,className:"hidden",accept:"image/*"}),l.jsx("button",{onClick:()=>{var z;return(z=B.current)==null?void 0:z.click()},className:"p-2 bg-white/90 hover:bg-white text-slate-700 rounded-full shadow-sm hover:shadow-md transition-all border border-slate-100",title:"Ganti Cover Lagu Ini",children:l.jsx(bs,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[l.jsxs("div",{className:"relative mb-6 mt-2 md:mb-8 md:mt-4 group cursor-pointer",onClick:()=>o(!i),children:[l.jsxs("div",{className:`w-48 h-48 md:w-64 md:h-64 rounded-full bg-slate-900 shadow-2xl flex items-center justify-center relative overflow-hidden border-4 border-slate-800 ${i?"animate-[spin_4s_linear_infinite]":"transition-transform duration-700 ease-out"}`,children:[l.jsx("div",{className:"absolute inset-2 rounded-full border border-slate-800/50 pointer-events-none z-10"}),l.jsx("div",{className:"absolute inset-4 rounded-full border border-slate-800/50 pointer-events-none z-10"}),l.jsx("div",{className:"absolute inset-8 rounded-full border border-slate-800/50 pointer-events-none z-10"}),l.jsxs("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-full flex items-center justify-center relative shadow-inner overflow-hidden border-2 border-slate-700 bg-slate-800 z-0",children:[r.image?l.jsx("img",{src:r.image,alt:"Album Art",className:"w-full h-full object-cover opacity-90"}):l.jsx("div",{className:"w-full h-full bg-gradient-to-tr from-blue-500 to-purple-600 opacity-80"}),l.jsx("div",{className:"absolute w-2 h-2 md:w-2.5 md:h-2.5 bg-white rounded-full shadow-sm z-20"})]}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-full z-20"})]}),l.jsx("div",{className:`absolute -top-8 -right-6 md:-top-12 md:-right-8 w-24 h-32 md:w-28 md:h-40 pointer-events-none transition-transform duration-1000 ease-in-out origin-[70%_15%] drop-shadow-xl z-20 ${i?"rotate-[0deg]":"-rotate-[40deg]"}`,children:l.jsxs("svg",{viewBox:"0 0 100 150",className:"w-full h-full",children:[l.jsx("circle",{cx:"70",cy:"20",r:"8",fill:"#94a3b8",stroke:"#64748b",strokeWidth:"2"}),l.jsx("path",{d:"M70 20 L60 90 L45 100",fill:"none",stroke:"#64748b",strokeWidth:"5",strokeLinecap:"round"}),l.jsx("rect",{x:"38",y:"95",width:"16",height:"20",fill:"#334155",rx:"2",transform:"rotate(20 46 105)"})]})}),!i&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-30",children:l.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-full p-3 md:p-4",children:l.jsx(SN,{className:"w-6 h-6 md:w-8 md:h-8 text-white ml-1"})})})]}),l.jsxs("div",{className:"w-full text-center",children:[l.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-900 mb-1 leading-tight line-clamp-1 drop-shadow-sm",children:r.title}),l.jsx("p",{className:"text-xs md:text-sm text-slate-600 font-bold uppercase tracking-widest mb-4 md:mb-6 line-clamp-1",children:r.artist}),l.jsx("div",{className:"w-full rounded-2xl overflow-hidden shadow-sm border border-slate-100 bg-white/60 backdrop-blur-md relative z-20",children:l.jsx("iframe",{ref:U,src:`https://open.spotify.com/embed/track/${r.spotifyId}?utm_source=generator&theme=0&autoplay=1`,width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Player",className:"border-0 block",style:{overflow:"hidden"}})}),l.jsx("button",{onClick:()=>o(!i),className:"mt-4 text-[10px] font-bold text-slate-500 bg-white/70 backdrop-blur px-3 py-1.5 rounded-full hover:bg-white transition-colors shadow-sm",children:i?"Matikan Animasi Manual":"Nyalakan Animasi Manual"})]})]})]}),l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[l.jsxs("h3",{className:"text-base md:text-lg font-bold text-slate-900 flex items-center gap-2",children:[l.jsx(kN,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-400"})," Daftar Putar"]}),t&&l.jsx("button",{onClick:()=>d(!u),className:"text-[10px] md:text-xs font-bold bg-slate-900 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-slate-800 transition-all shadow-md active:scale-95",children:u?"Tutup":"+ Add Song"})]}),u&&l.jsxs("div",{className:"bg-slate-50 p-4 md:p-6 rounded-2xl border border-slate-200 mb-6 md:mb-8 animate-fade-in-up",children:[l.jsx("h4",{className:"text-sm font-bold text-slate-800 mb-4",children:"Tambah Lagu Baru"}),l.jsxs("div",{className:"grid gap-3 md:gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{onClick:()=>{var z;return(z=L.current)==null?void 0:z.click()},className:"w-16 h-16 rounded-xl bg-white border border-slate-200 flex items-center justify-center cursor-pointer hover:border-slate-400 overflow-hidden shrink-0",children:v?l.jsx("img",{src:v,className:"w-full h-full object-cover",alt:"Preview"}):l.jsx(bs,{className:"w-5 h-5 text-slate-400"})}),l.jsx("input",{type:"file",ref:L,onChange:M,className:"hidden",accept:"image/*"}),l.jsx("div",{className:"flex-1",children:l.jsx("input",{type:"text",placeholder:"Link Spotify...",value:m,onChange:z=>g(z.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[l.jsx("input",{type:"text",placeholder:"Judul Lagu",value:y,onChange:z=>b(z.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"}),l.jsx("input",{type:"text",placeholder:"Nama Artis",value:x,onChange:z=>w(z.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"})]}),l.jsx("button",{onClick:H,disabled:T,className:"w-full bg-blue-600 text-white font-bold py-2.5 md:py-3 rounded-xl hover:bg-blue-700 transition-all disabled:opacity-50 text-sm",children:T?"Menyimpan...":"Simpan ke Playlist"})]})]}),l.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.map((z,X)=>l.jsxs("div",{onClick:()=>Y(z),className:`group flex items-center gap-3 md:gap-4 p-3 pr-4 rounded-xl cursor-pointer border transition-all duration-300 ${(r==null?void 0:r.id)===z.id?"bg-slate-900 border-slate-900 shadow-lg scale-[1.01] md:scale-[1.02]":"bg-white border-slate-100 hover:border-slate-300 hover:shadow-md"}`,children:[l.jsx("div",{className:`w-10 h-10 flex items-center justify-center text-xs md:text-sm font-bold rounded-lg shrink-0 overflow-hidden ${(r==null?void 0:r.id)===z.id?"text-white":"text-slate-400 bg-slate-50 group-hover:bg-slate-100 group-hover:text-slate-600"}`,children:(r==null?void 0:r.id)===z.id&&i?l.jsxs("div",{className:"flex gap-0.5 items-end h-3",children:[l.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1s_infinite] h-2"}),l.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1.2s_infinite] h-3"}),l.jsx("div",{className:"w-0.5 bg-white animate-[bounce_0.8s_infinite] h-1.5"})]}):z.image?l.jsx("img",{src:z.image,alt:z.title,className:"w-full h-full object-cover"}):X+1}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:`font-bold text-xs md:text-sm truncate ${(r==null?void 0:r.id)===z.id?"text-white":"text-slate-800"}`,children:z.title}),l.jsx("p",{className:`text-[10px] md:text-xs truncate ${(r==null?void 0:r.id)===z.id?"text-slate-400":"text-slate-500"}`,children:z.artist})]}),l.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[l.jsx("div",{className:`p-1.5 md:p-2 rounded-full transition-colors ${(r==null?void 0:r.id)===z.id?"bg-white/10 text-white":"bg-slate-100 text-slate-400 group-hover:text-green-600 group-hover:bg-green-50"}`,children:l.jsx(UT,{className:"w-4 h-4"})}),t&&l.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 rounded-lg p-1 border border-slate-100",onClick:le=>le.stopPropagation(),children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("button",{onClick:()=>ue(X,"up"),disabled:X===0,className:"p-0.5 text-slate-300 hover:text-blue-600 hover:bg-blue-50 rounded disabled:opacity-20 disabled:hover:bg-transparent transition-colors",children:l.jsx(jg,{className:"w-3 h-3"})}),l.jsx("button",{onClick:()=>ue(X,"down"),disabled:X===e.length-1,className:"p-0.5 text-slate-300 hover:text-blue-600 hover:bg-blue-50 rounded disabled:opacity-20 disabled:hover:bg-transparent transition-colors",children:l.jsx(NT,{className:"w-3 h-3"})})]}),l.jsx("div",{className:"w-px h-6 bg-slate-200 mx-1"}),l.jsx("button",{onClick:le=>re(z.id,le),className:"p-1.5 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-full transition-all",title:"Hapus",children:l.jsx(gr,{className:"w-3.5 h-3.5"})})]})]})]},z.id||X)),e.length===0&&!a&&l.jsx("div",{className:"text-center py-12 text-slate-400 text-sm",children:"Playlist kosong. Tambahkan lagu baru."})]})]})]})})]})},D3=({isAdmin:t})=>{const[e,n]=j.useState([]),[r,s]=j.useState(!0),i=6,[o,a]=j.useState(i),[c,u]=j.useState(""),[d,m]=j.useState(!1),[g,y]=j.useState(!1),[b,x]=j.useState(!1),[w,v]=j.useState(null),[_,T]=j.useState(null),P=280,L=async()=>{s(!0);try{const H=await m3();n(H)}catch(H){console.error(H)}finally{s(!1)}};j.useEffect(()=>{L()},[]);const B=async()=>{if(c.trim()){y(!0);try{await f3({content:c.trim(),type:d?"private":"public",sender:"Anonim"}),x(!0),u(""),d||(L(),a(i)),setTimeout(()=>x(!1),3e3)}catch{$e("Gagal mengirim pesan.")}finally{y(!1)}}},k=(H,ye)=>{ye.stopPropagation(),H&&T(H)},I=async()=>{if(!_)return;const H=_;v(H),T(null);try{await p3(H),n(ye=>ye.filter(re=>re.id!==H)),$e("Pesan dihapus.")}catch(ye){$e("Gagal menghapus pesan."),console.error(ye)}finally{v(null)}},A=()=>{a(H=>H+i)},N=()=>{a(i);const H=document.getElementById("message-feed-top");H&&H.scrollIntoView({behavior:"smooth"})},U=H=>new Date(H).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),R=e.slice(0,o),D=o<e.length,M=o>i;return l.jsxs("div",{className:"min-h-screen bg-slate-50 relative pb-20",children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-40",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),l.jsx(Fa,{isOpen:!!_,title:"Hapus Pesan?",description:"Pesan ini akan dihapus secara permanen dari Public Wall. Tindakan ini tidak dapat dibatalkan.",confirmText:"Ya, Hapus",onConfirm:I,onCancel:()=>T(null)}),l.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12 relative z-10",children:[l.jsxs("div",{className:"mb-16 text-center space-y-8",children:[l.jsxs("div",{children:[l.jsx(dt,{id:"msg_feed_title",defaultText:"Public Wall",isAdmin:t,tag:"h1",className:"text-4xl font-black text-slate-900 tracking-tight mb-2"}),l.jsx(dt,{id:"msg_feed_desc",defaultText:"Tulis sesuatu. Rahasia, harapan, atau sekadar 'Halo'.",isAdmin:t,tag:"p",className:"text-slate-500 font-medium"})]}),l.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-xl shadow-slate-200/60 border border-slate-100 max-w-2xl mx-auto transition-all focus-within:ring-2 focus-within:ring-slate-900/5 relative group",children:[l.jsx("textarea",{value:c,onChange:H=>u(H.target.value),maxLength:P,className:"w-full h-32 bg-transparent text-lg font-medium text-slate-800 placeholder:text-slate-300 resize-none outline-none leading-relaxed",placeholder:"Apa yang sedang kamu pikirkan?"}),l.jsxs("div",{className:`absolute bottom-20 right-6 text-[10px] font-bold transition-colors ${c.length>=P?"text-red-500":"text-slate-300"}`,children:[c.length,"/",P]}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-50 flex items-center justify-between flex-wrap gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none relative",children:[l.jsx("input",{type:"checkbox",className:"sr-only peer",checked:d,onChange:H=>m(H.target.checked)}),l.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-slate-900 transition-colors"}),l.jsx("span",{className:`text-xs font-bold transition-colors ${d?"text-slate-900":"text-slate-500"}`,children:d?"Privat":"Publik"})]}),l.jsx("div",{className:"hidden sm:block w-px h-5 bg-slate-200"}),l.jsxs("div",{className:`hidden sm:flex items-center gap-1.5 text-[10px] font-medium transition-colors ${d?"text-emerald-600":"text-slate-400"}`,children:[d?l.jsx(Ug,{className:"w-3 h-3"}):l.jsx(ec,{className:"w-3 h-3"}),l.jsx("span",{children:d?"Hanya terbaca oleh Admin.":"Tayang untuk umum."})]})]}),l.jsx("button",{onClick:B,disabled:!c.trim()||g,className:`
                                    flex items-center gap-2 px-6 py-2.5 rounded-xl font-bold text-sm transition-all shadow-lg active:scale-95 shrink-0 ml-auto
                                    ${b?"bg-green-500 text-white shadow-green-500/20":"bg-slate-900 text-white hover:bg-slate-800 shadow-slate-900/20 disabled:bg-slate-200 disabled:text-slate-400 disabled:shadow-none disabled:cursor-not-allowed"}
                                `,children:g?l.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):b?l.jsxs(l.Fragment,{children:["Terkirim ",l.jsx(Es,{className:"w-4 h-4"})]}):l.jsxs(l.Fragment,{children:["Kirim ",l.jsx(DT,{className:"w-4 h-4"})]})})]})]})]}),l.jsxs("div",{id:"message-feed-top",className:"flex items-center justify-between mb-6 px-2",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/417/417720.png",alt:"Feed",className:"w-4 h-4 object-contain opacity-60"})," Pesan Terbaru"]}),l.jsx("button",{onClick:L,className:"p-2 text-slate-400 hover:text-slate-900 hover:bg-white rounded-full transition-all",title:"Refresh",children:l.jsx(ua,{className:"w-4 h-4"})})]}),r?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(H=>l.jsx("div",{className:"h-32 bg-slate-200/50 rounded-2xl animate-pulse"},H))}):e.length===0?l.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[l.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada pesan publik."}),l.jsx("p",{className:"text-slate-300 text-sm",children:"Jadilah yang pertama menulis!"})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"columns-1 md:columns-2 gap-6 space-y-6",children:R.map((H,ye)=>l.jsxs("div",{className:"break-inside-avoid bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md hover:border-slate-200 hover:-translate-y-1 transition-all duration-300 group relative overflow-hidden",children:[l.jsxs("p",{className:"text-slate-800 text-[15px] font-medium leading-relaxed whitespace-pre-wrap break-words relative z-10",children:['"',H.content,'"']}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-widest bg-slate-50 px-2 py-1 rounded",children:U(H.timestamp)})}),t&&l.jsx("button",{onClick:re=>k(H.id,re),disabled:w===H.id,className:"absolute top-2 right-2 p-2 bg-white/80 backdrop-blur-sm rounded-full text-slate-400 hover:text-red-500 hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100 border border-transparent hover:border-red-100 shadow-sm z-20",title:"Hapus Pesan",children:w===H.id?l.jsx("div",{className:"w-3.5 h-3.5 border-2 border-red-200 border-t-red-500 rounded-full animate-spin"}):l.jsx(gr,{className:"w-3.5 h-3.5"})})]},H.id||ye))}),l.jsxs("div",{className:"flex flex-col items-center gap-3 mt-12",children:[D&&l.jsxs("button",{onClick:A,className:"px-6 py-2.5 rounded-full bg-white border border-slate-200 text-slate-600 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Pesan Lainnya",l.jsx($n,{className:"w-4 h-4"})]}),M&&l.jsxs("button",{onClick:N,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Sembunyikan (Tutup)",l.jsx($n,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]})]})};function L3(){return null}function j3(){return null}var kn=(t=>(t.BACKGROUND_REMOVER="bg_remove",t.HD_UPSCALE="hd_upscale",t.CREATIVE_REMIX="creative_remix",t.COLORIZE="colorize",t.SKETCH_TO_REAL="sketch_real",t))(kn||{});const Uc={id:{welcome:"Halo, Siapa Disana?",welcomeSubtitle:"Biar kita makin akrab, kenalan dulu yuk! Isi nama dan sekolahmu ya, biar enak ngobrolnya.",enterName:"Aku biasa dipanggil...",enterSchool:"Aku sekolah / kuliah di...",namePlaceholder:"Contoh: Rara",schoolPlaceholder:"Contoh: SMA 1 Jakarta / UI",accessButton:"Oke, Salam Kenal!",verifying:"Lagi mencatat...",deviceIdNote:"Santai aja, ini cuma biar aku inget temen baru.",credits:"Limit",adminMode:"Mode Admin",unlimited:"Tanpa Batas",logOut:"Ganti Akun",heroTitle:"Hai,",heroSubtitle:"Sudah siap bikin karya keren hari ini?",toolBgRemove:"Hapus Background",toolBgRemoveDesc:"Hapus latar belakang secara instan dan rapi.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Pertajam detail & resolusi tinggi agar tidak pecah.",toolRemix:"Creative Remix",toolRemixDesc:"Ubah gaya gambar dengan bantuan AI.",toolColorize:"Warnai Foto",toolColorizeDesc:"Ubah foto hitam putih jadi berwarna.",toolSketch:"Sketsa ke Nyata",toolSketchDesc:"Ubah coretan tangan jadi gambar realistis.",moreTools:"Lihat Lainnya",lessTools:"Sembunyikan",back:"Kembali",preview:"Pratinjau",changePhoto:"Ganti Foto",aiPrompt:"Instruksi AI",aiPromptPlaceholder:"Jelaskan bagaimana Anda ingin mengubah gambar ini...",generate:"Mulai Proses",generateMagic:"Buat Keajaiban",processing:"Memproses",processingStandard:"Sedang meracik gambar...",processingCloud:"Mengirim ke awan...",processingAI:"AI sedang bekerja...",refining:"Sedikit polesan lagi...",optimizingLocal:"Memproses di perangkatmu (Mode Hemat)...",initializing:"Siap-siap...",resultComparison:"Hasil Karya Kamu",download:"Simpan Gambar",reset:"Ulangi",original:"ASLI",result:"HASIL",bgColor:"Ganti Warna Belakang",uploadPrompt:"Pilih foto terbaikmu untuk diedit",settingsTitle:"Pengaturan Sistem",systemPref:"Preferensi AI",knowledgeMode:"Mode Pengetahuan (Database)",knowledgeModeDesc:"Hemat Kuota. AI hanya menjawab dari database lokal tanpa Gemini API.",totalKnowledge:"Total Memori Tersimpan",wikiMode:"Izinkan Wikipedia",wikiModeDesc:"Jika info tidak ada di database, cari di Wikipedia (Tetap hemat kuota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Kelola API Key untuk fitur chat cerdas dan edit gambar.",selectKeyBtn:"Ambil Key via AI Studio",orManually:"Kelola Key Manual",customKeyActive:"Key Pribadi Aktif",defaultKeyActive:"Key Sistem (Terbatas)",removeBgTitle:"Remove.bg API",removeBgDesc:"Engine khusus hapus background presisi tinggi.",supabaseTitle:"Supabase Engine",supabaseDesc:"Engine cadangan untuk pemrosesan gambar.",googleSearchTitle:"Google Search API",googleSearchDesc:"Opsi pencarian terakhir (Fallback) jika DB & Wiki gagal.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Tutup",save:"Simpan",active:"Aktif",inactive:"Nonaktif",addKeyPlaceholder:"Tempel API Key Gemini disini...",addKeyBtn:"Tambah Key",keyDisclaimerTitle:" Peringatan Penting",keyDisclaimerText:"Dengan menambahkan API Key pribadi, saya sadar bahwa segala bentuk penggunaan, kuota, dan keamanan key tersebut adalah tanggung jawab saya sepenuhnya. Fanra AI Studio tidak bertanggung jawab atas penyalahgunaan atau tagihan yang muncul akibat kelalaian pengguna.",consentCheckbox:"Saya mengerti dan setuju untuk melanjutkan.",keysStored:"Daftar Key",noKeysYet:"Belum ada key tersimpan. Masih pakai limit bawaan.",newChat:"Percakapan Baru",historyHeader:"Riwayat",loginToSave:"Login untuk simpan progres",loginBtn:"Masuk Akun",historyItem1:"editing foto sekolah...",historyItem2:"hapus background merah...",chatPlaceholder:"ketik pesan atau tanya Fanra...",chatDisclaimer:"Fanra bisa salah. cek lagi info penting.",chatFallbackError:"duh, koneksi gue lagi putus dan gue belum pernah dapet pertanyaan ini sebelumnya. cek internet lo atau API key nya deh.",chatOfflineMode:"(Mode Database) Info tidak ditemukan di database.",chatImageResponse:"wih, kirim gambar ya? sori nih gue baru bisa edit gambar kalo lo pake menu di atas itu. coba klik ikon-ikon di atas deh.",errorTitle:"Ups, Ada Masalah",insufficientCredits:"Yah, limit habis! Masukkan API Key di pengaturan agar Unlimited.",limitReachedHQ:"Kuota High Quality harian sudah penuh.",serviceBusy:"Server lagi ramai nih. Coba lagi sebentar ya.",networkError:"Koneksi internetmu sepertinya putus nyambung.",memoryError:"HP keberatan proses gambar ini. Coba gambar lain ya.",confirmTitle:"Yakin mau ganti?",confirmDesc:"Proses yang ini belum disimpan lho. Mau ganti aktivitas?",yesChange:"Ya, Ganti Aja",uploadTitle:"Unggah Foto",uploadDesc:"Klik atau tarik fotomu ke sini",dropHere:"Lepaskan fotonya!",invalidImage:"Format file ini tidak didukung. Pakai JPG/PNG ya.",toolLockedMsg:"Fitur ini sedang dalam pengembangan/perbaikan. Mohon pengertiannya ya, developer lagi ngoprek!",limitChatReached:"Energi Fanra habis untuk hari ini. Karena ini project mandiri dengan resource terbatas, chat dibatasi dulu ya. Besok reset kok! (Login untuk kuota lebih)",limitImageReached:"Limit upload gambar hari ini sudah habis. Server butuh istirahat karena resource terbatas. Coba lagi besok ya!"},en:{welcome:"Hello, Who's There?",welcomeSubtitle:"Let's be friends! Tell me your name and school so we can chat comfortably.",enterName:"You can call me...",enterSchool:"I study at...",namePlaceholder:"Ex: Sarah",schoolPlaceholder:"Ex: High School NY / MIT",accessButton:"Okay, Nice to Meet You!",verifying:"Writing that down...",deviceIdNote:"Relax, just remembering a new friend.",credits:"Credits",adminMode:"Admin Mode",unlimited:"Unlimited",logOut:"Switch Account",heroTitle:"Hi,",heroSubtitle:"Ready to make something cool today?",toolBgRemove:"Remove Background",toolBgRemoveDesc:"Instantly remove backgrounds cleanly.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Sharpen details to 4K resolution.",toolRemix:"Creative Remix",toolRemixDesc:"Reimagine image with AI assistance.",toolColorize:"Colorize Photo",toolColorizeDesc:"Turn black & white photos into color.",toolSketch:"Sketch to Real",toolSketchDesc:"Turn hand drawings into realistic images.",moreTools:"See More",lessTools:"Show Less",back:"Back",preview:"Preview",changePhoto:"Change Photo",aiPrompt:"AI Prompt",aiPromptPlaceholder:"Describe how you want to remix this image...",generate:"Generate",generateMagic:"Generate Magic",processing:"Processing",processingStandard:"Working magic...",processingCloud:"Sending to cloud...",processingAI:"AI is thinking...",refining:"Polishing details...",optimizingLocal:"Processing on device (Offline Mode)...",initializing:"Warming up...",resultComparison:"Your Masterpiece",download:"Save Image",reset:"Reset",original:"ORIGINAL",result:"RESULT",bgColor:"Background Color",uploadPrompt:"Upload an image to start editing",settingsTitle:"System Settings",systemPref:"AI Preferences",knowledgeMode:"Knowledge Mode (Database)",knowledgeModeDesc:"Save Quota. AI only answers from local database without Gemini API.",totalKnowledge:"Total Stored Memory",wikiMode:"Enable Wikipedia",wikiModeDesc:"If info not in DB, search Wikipedia (Still saves API quota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Manage keys for smart chat and image editing.",selectKeyBtn:"Get Key via AI Studio",orManually:"Manage Keys Manually",customKeyActive:"Custom Key Active",defaultKeyActive:"System Key (Limited)",removeBgTitle:"Remove.bg API",removeBgDesc:"Precision background removal engine.",supabaseTitle:"Supabase Engine",supabaseDesc:"Backup engine for image processing.",googleSearchTitle:"Google Search API",googleSearchDesc:"Fallback search option if DB & Wiki fail.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Close",save:"Save",active:"Active",inactive:"Inactive",addKeyPlaceholder:"Paste Gemini API Key here...",addKeyBtn:"Add Key",keyDisclaimerTitle:" Important Warning",keyDisclaimerText:"By adding personal API Keys, I acknowledge that all usage, quotas, and security of said keys are my sole responsibility. Fanra AI Studio is not liable for misuse or charges incurred due to user negligence.",consentCheckbox:"I understand and agree to proceed.",keysStored:"Key List",noKeysYet:"No keys saved yet. Using default limits.",newChat:"New Conversation",historyHeader:"History",loginToSave:"Login to save progress",loginBtn:"Login",historyItem1:"editing school photo...",historyItem2:"removing red background...",chatPlaceholder:"type a message or ask Fanra...",chatDisclaimer:"Fanra can make mistakes. Check important info.",chatFallbackError:"ugh, my connection is down and I haven't heard this question before. Check your internet or API key.",chatOfflineMode:"(DB Mode) Info not found in database.",chatImageResponse:"woah, sending an image? sorry, I can only edit images if you use the menu above. try clicking those icons.",errorTitle:"Whoops",insufficientCredits:"Out of credits! Enter your own Google Gemini API Key in settings for unlimited access.",limitReachedHQ:"High Quality daily limit reached.",serviceBusy:"Service is busy. Please try again.",networkError:"Connection issue. Check your internet.",memoryError:"Device memory low. Try a smaller image.",confirmTitle:"Change Activity?",confirmDesc:"Current progress will be lost. Are you sure?",yesChange:"Yes, Change",uploadTitle:"Upload Image",uploadDesc:"Click to browse or drag & drop",dropHere:"Drop it here!",invalidImage:"Please upload a valid image file (JPG/PNG).",toolLockedMsg:"This feature is under maintenance/development. Please understand, developer is working on it!",limitChatReached:"Fanra's energy is depleted for today. Due to limited resources on this personal project, chats are limited. Resets tomorrow!",limitImageReached:"Daily image upload limit reached. Server needs a break due to limited resources. Try again tomorrow!"}};var F3={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let U3,V3;function O3(){return{geminiUrl:U3,vertexUrl:V3}}function B3(t,e,n,r){var s,i;if(!(t!=null&&t.baseUrl)){const o=O3();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:n:(i=o.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ps{}function Ee(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const i=e[s];return i!=null?String(i):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function p(t,e,n){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const c=t[a];if(Array.isArray(n))for(let u=0;u<c.length;u++){const d=c[u];p(d,e.slice(i+1),n[u])}else for(const u of c)p(u,e.slice(i+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const c=t[a];p(c[0],e.slice(i+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function h(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const i=s.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(a=>h(a,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function z3(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),i=r.split("."),o=new Set;let a=-1;for(let c=0;c<s.length;c++)if(s[c]==="*"){a=c;break}if(a!==-1&&i.length>a)for(let c=a;c<i.length;c++){const u=i[c];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}bm(t,s,i,0,o)}}function bm(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const c of a[o])bm(c,e,n,r+1,s)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(u=>!u.startsWith("_")&&!s.has(u)),c={};for(const u of a)c[u]=o[u];for(const[u,d]of Object.entries(c)){const m=[];for(const g of n.slice(r))g==="*"?m.push(u):m.push(g);p(o,m,d)}for(const u of a)delete o[u]}}else{const o=t;i in o&&bm(o[i],e,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H0(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G3(t){const e={},n=h(t,["operationName"]);n!=null&&p(e,["operationName"],n);const r=h(t,["resourceName"]);return r!=null&&p(e,["_url","resourceName"],r),e}function $3(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],q3(o)),e}function H3(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],W3(o)),e}function q3(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>K3(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function W3(t){const e={},n=h(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>J3(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function K3(t){const e={},n=h(t,["video"]);return n!=null&&p(e,["video"],tF(n)),e}function J3(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],nF(n)),e}function Y3(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function Q3(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function X3(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],Z3(o)),e}function Z3(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function jS(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],eF(o)),e}function eF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function tF(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],H0(r));const s=h(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function nF(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],H0(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bw;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(bw||(bw={}));var Ew;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Ew||(Ew={}));var Tw;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Tw||(Tw={}));var On;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(On||(On={}));var Iw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Iw||(Iw={}));var Sw;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Sw||(Sw={}));var kw;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(kw||(kw={}));var Cw;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Cw||(Cw={}));var Aw;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Aw||(Aw={}));var Nw;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Nw||(Nw={}));var Rw;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Rw||(Rw={}));var Pw;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Pw||(Pw={}));var Mw;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Mw||(Mw={}));var Dw;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Dw||(Dw={}));var Lw;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Lw||(Lw={}));var jw;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(jw||(jw={}));var Fw;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Fw||(Fw={}));var Uw;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Uw||(Uw={}));var Vw;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Vw||(Vw={}));var Gd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Gd||(Gd={}));var Ow;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ow||(Ow={}));var Bw;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Bw||(Bw={}));var zw;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(zw||(zw={}));var Em;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Em||(Em={}));var Gw;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Gw||(Gw={}));var $w;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})($w||($w={}));var Hw;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Hw||(Hw={}));var qw;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(qw||(qw={}));var Ww;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ww||(Ww={}));var Kw;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Kw||(Kw={}));var Jw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Jw||(Jw={}));var Yw;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Yw||(Yw={}));var Qw;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Qw||(Qw={}));var Xw;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Xw||(Xw={}));var Zw;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Zw||(Zw={}));var e_;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(e_||(e_={}));var t_;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(t_||(t_={}));var n_;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(n_||(n_={}));var r_;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(r_||(r_={}));var s_;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(s_||(s_={}));var i_;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(i_||(i_={}));var o_;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(o_||(o_={}));var a_;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(a_||(a_={}));var l_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(l_||(l_={}));var c_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(c_||(c_={}));var u_;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(u_||(u_={}));var d_;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(d_||(d_={}));var h_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(h_||(h_={}));var f_;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(f_||(f_={}));var p_;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(p_||(p_={}));var m_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(m_||(m_={}));var g_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(g_||(g_={}));var y_;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(y_||(y_={}));var v_;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(v_||(v_={}));var x_;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(x_||(x_={}));var Bo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Bo||(Bo={}));class Tm{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ol{get text(){var e,n,r,s,i,o,a,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const m=[];for(const g of(c=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[y,b]of Object.entries(g))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(b!==null||b!==void 0)&&m.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;d=!0,u+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,n,r,s,i,o,a,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const m of(c=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[g,y]of Object.entries(m))g!=="inlineData"&&(y!==null||y!==void 0)&&d.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(u+=atob(m.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,s,i,o,a,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,s,i,o,a,c,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(c=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,s,i,o,a,c,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(c=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class w_{}class __{}class rF{}class sF{}class iF{}class oF{}class b_{}class E_{}class T_{}class aF{}class $d{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new $d;let s;const i=e;return n?s=H3(i):s=$3(i),Object.assign(r,s),r}}class I_{}class S_{}class k_{}class C_{}class lF{}class cF{}class uF{}class q0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new q0,i=X3(e);return Object.assign(r,i),r}}class dF{}class hF{}class fF{}class A_{}class pF{get text(){var e,n,r;let s="",i=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,u]of Object.entries(a))c!=="text"&&c!=="thought"&&u!==null&&o.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,s+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?s:void 0}get data(){var e,n,r;let s="";const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,c]of Object.entries(o))a!=="inlineData"&&c!==null&&i.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class mF{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class W0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new W0,i=jS(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function st(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function FS(t,e){const n=st(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function US(t){return Array.isArray(t)?t.map(e=>Hd(e)):[Hd(t)]}function Hd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function VS(t){const e=Hd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function OS(t){const e=Hd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function N_(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function BS(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>N_(e)):[N_(t)]}function Im(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function R_(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function P_(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function wn(t){if(t==null)throw new Error("ContentUnion is required");return Im(t)?t:{role:"user",parts:BS(t)}}function K0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=wn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=wn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>wn(n)):[wn(e)]}function vr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(R_(t)||P_(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wn(t)]}const e=[],n=[],r=Im(t[0]);for(const s of t){const i=Im(s);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(s);else{if(R_(s)||P_(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:BS(n)}),e}function gF(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(On).includes(n[0].toUpperCase())?n[0].toUpperCase():On.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(On).includes(r.toUpperCase())?r.toUpperCase():On.TYPE_UNSPECIFIED})}}function ta(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&gF(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(On).includes(a.toUpperCase())?a.toUpperCase():On.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=ta(a);else if(r.includes(o)){const c=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}c.push(ta(u))}e[o]=c}else if(s.includes(o)){const c={};for(const[u,d]of Object.entries(a))c[u]=ta(d);e[o]=c}else{if(o==="additionalProperties")continue;e[o]=a}return e}function J0(t){return ta(t)}function Y0(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Q0(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ua(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ta(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ta(e.response));return t}function Va(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function yF(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Ms(t,e){if(typeof e!="string")throw new Error("name must be a string");return yF(t,e,"cachedContents")}function zS(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function _i(t){return H0(t)}function vF(t){return t!=null&&typeof t=="object"&&"name"in t}function xF(t){return t!=null&&typeof t=="object"&&"video"in t}function wF(t){return t!=null&&typeof t=="object"&&"uri"in t}function GS(t){var e;let n;if(vF(t)&&(n=t.name),!(wF(t)&&(n=t.uri,n===void 0))&&!(xF(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function $S(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function HS(t){for(const e of["models","tunedModels","publisherModels"])if(_F(t,e))return t[e];return[]}function _F(t,e){return t!==null&&typeof t=="object"&&e in t}function bF(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function EF(t,e={}){const n=[],r=new Set;for(const s of t){const i=s.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const o=bF(s,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function qS(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function TF(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function WS(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let i=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const c=o.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Oa(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function KS(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IF(t){const e={},n=h(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const r=h(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>iU(o))),p(e,["inlinedResponses"],i)}const s=h(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["inlinedEmbedContentResponses"],i)}return e}function SF(t){const e={},n=h(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsDestination","outputUriPrefix"]);r!=null&&p(e,["gcsUri"],r);const s=h(t,["bigqueryDestination","outputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function kF(t){const e={},n=h(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsDestination","outputUriPrefix"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&p(e,["bigqueryDestination","outputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Qu(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata","displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["metadata","state"]);s!=null&&p(e,["state"],KS(s));const i=h(t,["metadata","createTime"]);i!=null&&p(e,["createTime"],i);const o=h(t,["metadata","endTime"]);o!=null&&p(e,["endTime"],o);const a=h(t,["metadata","updateTime"]);a!=null&&p(e,["updateTime"],a);const c=h(t,["metadata","model"]);c!=null&&p(e,["model"],c);const u=h(t,["metadata","output"]);return u!=null&&p(e,["dest"],IF(WS(u))),e}function Sm(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["state"]);s!=null&&p(e,["state"],KS(s));const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["createTime"]);o!=null&&p(e,["createTime"],o);const a=h(t,["startTime"]);a!=null&&p(e,["startTime"],a);const c=h(t,["endTime"]);c!=null&&p(e,["endTime"],c);const u=h(t,["updateTime"]);u!=null&&p(e,["updateTime"],u);const d=h(t,["model"]);d!=null&&p(e,["model"],d);const m=h(t,["inputConfig"]);m!=null&&p(e,["src"],CF(m));const g=h(t,["outputConfig"]);g!=null&&p(e,["dest"],SF(WS(g)));const y=h(t,["completionStats"]);return y!=null&&p(e,["completionStats"],y),e}function CF(t){const e={},n=h(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsSource","uris"]);r!=null&&p(e,["gcsUri"],r);const s=h(t,["bigquerySource","inputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function AF(t,e){const n={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=h(e,["fileName"]);r!=null&&p(n,["fileName"],r);const s=h(e,["inlinedRequests"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>sU(t,o))),p(n,["requests","requests"],i)}return n}function NF(t){const e={},n=h(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsSource","uris"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&p(e,["bigquerySource","inputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function RF(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function PF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Oa(t,r)),n}function MF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Oa(t,r)),n}function DF(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],LF(r));const s=h(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=h(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const c=h(t,["index"]);c!=null&&p(e,["index"],c);const u=h(t,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const d=h(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=h(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function LF(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function JS(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>hU(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function jF(t,e){const n={},r=h(t,["displayName"]);if(e!==void 0&&r!=null&&p(e,["batch","displayName"],r),h(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function FF(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["dest"]);return e!==void 0&&s!=null&&p(e,["outputConfig"],kF(TF(s))),n}function M_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["src"]);s!=null&&p(n,["batch","inputConfig"],AF(t,qS(t,s)));const i=h(e,["config"]);return i!=null&&jF(i,n),n}function UF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],st(t,r));const s=h(e,["src"]);s!=null&&p(n,["inputConfig"],NF(qS(t,s)));const i=h(e,["config"]);return i!=null&&FF(i,n),n}function VF(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["batch","displayName"],r),n}function OF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["src"]);s!=null&&p(n,["batch","inputConfig"],WF(t,s));const i=h(e,["config"]);return i!=null&&VF(i,n),n}function BF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Oa(t,r)),n}function zF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Oa(t,r)),n}function GF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);return i!=null&&p(e,["error"],i),e}function $F(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);return i!=null&&p(e,["error"],i),e}function HF(t,e){const n={},r=h(e,["contents"]);if(r!=null){let i=K0(t,r);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["requests[]","request","content"],i)}const s=h(e,["config"]);return s!=null&&(p(n,["_self"],qF(s,n)),z3(n,{"requests[].*":"requests[].request.*"})),n}function qF(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=h(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function WF(t,e){const n={},r=h(e,["fileName"]);r!=null&&p(n,["file_name"],r);const s=h(e,["inlinedRequests"]);return s!=null&&p(n,["requests"],HF(t,s)),n}function KF(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function JF(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function YF(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function QF(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],JS(wn(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const c=h(e,["candidateCount"]);c!=null&&p(r,["candidateCount"],c);const u=h(e,["maxOutputTokens"]);u!=null&&p(r,["maxOutputTokens"],u);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const b=h(e,["frequencyPenalty"]);b!=null&&p(r,["frequencyPenalty"],b);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const w=h(e,["responseMimeType"]);w!=null&&p(r,["responseMimeType"],w);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],J0(v));const _=h(e,["responseJsonSchema"]);if(_!=null&&p(r,["responseJsonSchema"],_),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=h(e,["safetySettings"]);if(n!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(M=>fU(M))),p(n,["safetySettings"],D)}const P=h(e,["tools"]);if(n!==void 0&&P!=null){let D=Va(P);Array.isArray(D)&&(D=D.map(M=>mU(Ua(M)))),p(n,["tools"],D)}const L=h(e,["toolConfig"]);if(n!==void 0&&L!=null&&p(n,["toolConfig"],pU(L)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=h(e,["cachedContent"]);n!==void 0&&B!=null&&p(n,["cachedContent"],Ms(t,B));const k=h(e,["responseModalities"]);k!=null&&p(r,["responseModalities"],k);const I=h(e,["mediaResolution"]);I!=null&&p(r,["mediaResolution"],I);const A=h(e,["speechConfig"]);if(A!=null&&p(r,["speechConfig"],Y0(A)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=h(e,["thinkingConfig"]);N!=null&&p(r,["thinkingConfig"],N);const U=h(e,["imageConfig"]);U!=null&&p(r,["imageConfig"],rU(U));const R=h(e,["enableEnhancedCivicAnswers"]);return R!=null&&p(r,["enableEnhancedCivicAnswers"],R),r}function XF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>DF(u))),p(e,["candidates"],c)}const s=h(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=h(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=h(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=h(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function ZF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Oa(t,r)),n}function eU(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Oa(t,r)),n}function tU(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function nU(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function rU(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function sU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["request","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let a=vr(s);Array.isArray(a)&&(a=a.map(c=>JS(c))),p(n,["request","contents"],a)}const i=h(e,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(e,["config"]);return o!=null&&p(n,["request","generationConfig"],QF(t,o,h(n,["request"],{}))),n}function iU(t){const e={},n=h(t,["response"]);n!=null&&p(e,["response"],XF(n));const r=h(t,["error"]);return r!=null&&p(e,["error"],r),e}function oU(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);if(e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),h(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function aU(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const i=h(t,["filter"]);return e!==void 0&&i!=null&&p(e,["_query","filter"],i),n}function lU(t){const e={},n=h(t,["config"]);return n!=null&&oU(n,e),e}function cU(t){const e={},n=h(t,["config"]);return n!=null&&aU(n,e),e}function uU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["operations"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Qu(o))),p(e,["batchJobs"],i)}return e}function dU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["batchPredictionJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Sm(o))),p(e,["batchJobs"],i)}return e}function hU(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],KF(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],JF(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const c=h(t,["inlineData"]);c!=null&&p(e,["inlineData"],RF(c));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function fU(t){const e={},n=h(t,["category"]);if(n!=null&&p(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function pU(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],YF(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function mU(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],tU(a));const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],nU(c));const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Cs||(Cs={}));class mo{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gU extends Ps{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mo(Cs.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=M_(this.apiClient,e),r=n._url,s=Ee("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,c=a.requests,u=[];for(const d of c){const m=Object.assign({},d);if(m.systemInstruction){const g=m.systemInstruction;delete m.systemInstruction;const y=m.request;y.systemInstruction=g,m.request=y}u.push(m)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const i=this.getGcsUri(e),o=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${s}`;else if(o)r.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=UF(this.apiClient,e);return a=Ee("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Sm(d))}else{const u=M_(this.apiClient,e);return a=Ee("{model}:batchGenerateContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Qu(d))}}async createEmbeddingsInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=OF(this.apiClient,e);return i=Ee("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>Qu(c))}}async get(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=eU(this.apiClient,e);return a=Ee("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Sm(d))}else{const u=ZF(this.apiClient,e);return a=Ee("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Qu(d))}}async cancel(e){var n,r,s,i;let o="",a={};if(this.apiClient.isVertexAI()){const c=MF(this.apiClient,e);o=Ee("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=PF(this.apiClient,e);o=Ee("batches/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=cU(e);return a=Ee("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=dU(d),g=new A_;return Object.assign(g,m),g})}else{const u=lU(e);return a=Ee("batches",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=uU(d),g=new A_;return Object.assign(g,m),g})}}async delete(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=zF(this.apiClient,e);return a=Ee("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>$F(d))}else{const u=BF(this.apiClient,e);return a=Ee("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>GF(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yU(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function D_(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>OU(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function vU(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["contents"]);if(e!==void 0&&o!=null){let d=vr(o);Array.isArray(d)&&(d=d.map(m=>D_(m))),p(e,["contents"],d)}const a=h(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],D_(wn(a)));const c=h(t,["tools"]);if(e!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(m=>zU(m))),p(e,["tools"],d)}const u=h(t,["toolConfig"]);if(e!==void 0&&u!=null&&p(e,["toolConfig"],BU(u)),h(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function xU(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["contents"]);if(e!==void 0&&o!=null){let m=vr(o);Array.isArray(m)&&(m=m.map(g=>g)),p(e,["contents"],m)}const a=h(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],wn(a));const c=h(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>GU(g))),p(e,["tools"],m)}const u=h(t,["toolConfig"]);e!==void 0&&u!=null&&p(e,["toolConfig"],u);const d=h(t,["kmsKeyName"]);return e!==void 0&&d!=null&&p(e,["encryption_spec","kmsKeyName"],d),n}function wU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],FS(t,r));const s=h(e,["config"]);return s!=null&&vU(s,n),n}function _U(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],FS(t,r));const s=h(e,["config"]);return s!=null&&xU(s,n),n}function bU(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Ms(t,r)),n}function EU(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Ms(t,r)),n}function TU(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function IU(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function SU(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function kU(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CU(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function AU(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function NU(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Ms(t,r)),n}function RU(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Ms(t,r)),n}function PU(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function MU(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function DU(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function LU(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function jU(t){const e={},n=h(t,["config"]);return n!=null&&DU(n,e),e}function FU(t){const e={},n=h(t,["config"]);return n!=null&&LU(n,e),e}function UU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function VU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function OU(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],SU(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],kU(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const c=h(t,["inlineData"]);c!=null&&p(e,["inlineData"],yU(c));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function BU(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],CU(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function zU(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],PU(a));const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],MU(c));const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function GU(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>AU(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const c=h(t,["googleMaps"]);c!=null&&p(e,["googleMaps"],c);const u=h(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],u);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function $U(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function HU(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function qU(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],Ms(t,r));const s=h(e,["config"]);return s!=null&&$U(s,n),n}function WU(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],Ms(t,r));const s=h(e,["config"]);return s!=null&&HU(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KU extends Ps{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mo(Cs.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=_U(this.apiClient,e);return a=Ee("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=wU(this.apiClient,e);return a=Ee("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=RU(this.apiClient,e);return a=Ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=NU(this.apiClient,e);return a=Ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=EU(this.apiClient,e);return a=Ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=IU(d),g=new k_;return Object.assign(g,m),g})}else{const u=bU(this.apiClient,e);return a=Ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=TU(d),g=new k_;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=WU(this.apiClient,e);return a=Ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=qU(this.apiClient,e);return a=Ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async listInternal(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=FU(e);return a=Ee("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=VU(d),g=new C_;return Object.assign(g,m),g})}else{const u=jU(e);return a=Ee("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=UU(d),g=new C_;return Object.assign(g,m),g})}}}function qd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function L_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ze(t){return this instanceof ze?(this.v=t,this):new ze(t)}function jr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(y){return function(b){return Promise.resolve(b).then(y,m)}}function a(y,b){r[y]&&(s[y]=function(x){return new Promise(function(w,v){i.push([y,x,w,v])>1||c(y,x)})},b&&(s[y]=b(s[y])))}function c(y,b){try{u(r[y](b))}catch(x){g(i[0][3],x)}}function u(y){y.value instanceof ze?Promise.resolve(y.value.v).then(d,m):g(i[0][2],y)}function d(y){c("next",y)}function m(y){c("throw",y)}function g(y,b){y(b),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Fr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof L_=="function"?L_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JU(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:YS(n)}function YS(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function YU(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function j_(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let i=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),i&&!YS(t[r])&&(i=!1),r++;i?e.push(...s):e.pop()}return e}class QU{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new XU(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class XU{constructor(e,n,r,s={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=i,this.sendPromise=Promise.resolve(),YU(i)}async sendMessage(e){var n;await this.sendPromise;const r=wn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,o,a;const c=await s,u=(o=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,d=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];d!=null&&(g=(a=d.slice(m))!==null&&a!==void 0?a:[]);const y=u?[u]:[];this.recordHistory(r,y,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=wn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const i=await s;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?j_(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return jr(this,arguments,function*(){var s,i,o,a,c,u;const d=[];try{for(var m=!0,g=Fr(e),y;y=yield ze(g.next()),s=y.done,!s;m=!0){a=y.value,m=!1;const b=a;if(JU(b)){const x=(u=(c=b.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content;x!==void 0&&d.push(x)}yield yield ze(b)}}catch(b){i={error:b}}finally{try{!m&&!s&&(o=g.return)&&(yield ze(o.call(g)))}finally{if(i)throw i.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(i=>i.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...j_(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Oh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZU(t){const e={},n=h(t,["file"]);return n!=null&&p(e,["file"],n),e}function e6(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function t6(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],GS(n)),e}function n6(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function r6(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],GS(n)),e}function s6(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function i6(t){const e={},n=h(t,["config"]);return n!=null&&s6(n,e),e}function o6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["files"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a6 extends Ps{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mo(Cs.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=i6(e);return i=Ee("files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=o6(c),d=new dF;return Object.assign(d,u),d})}}async createInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ZU(e);return i=Ee("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=e6(c),d=new hF;return Object.assign(d,u),d})}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=r6(e);return i=Ee("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=t6(e);return i=Ee("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=n6(c),d=new fF;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xu(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function l6(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>T6(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function c6(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function u6(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function d6(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function h6(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=h(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=h(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=h(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const c=h(t,["logprobs"]);c!=null&&p(e,["logprobs"],c);const u=h(t,["maxOutputTokens"]);u!=null&&p(e,["maxOutputTokens"],u);const d=h(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const m=h(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=h(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=h(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const b=h(t,["responseModalities"]);b!=null&&p(e,["responseModalities"],b);const x=h(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const w=h(t,["routingConfig"]);w!=null&&p(e,["routingConfig"],w);const v=h(t,["seed"]);v!=null&&p(e,["seed"],v);const _=h(t,["speechConfig"]);_!=null&&p(e,["speechConfig"],_);const T=h(t,["stopSequences"]);T!=null&&p(e,["stopSequences"],T);const P=h(t,["temperature"]);P!=null&&p(e,["temperature"],P);const L=h(t,["thinkingConfig"]);L!=null&&p(e,["thinkingConfig"],L);const B=h(t,["topK"]);B!=null&&p(e,["topK"],B);const k=h(t,["topP"]);if(k!=null&&p(e,["topP"],k),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function f6(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function p6(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function m6(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const c=h(t,["maxOutputTokens"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","maxOutputTokens"],c);const u=h(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],Q0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const b=h(t,["systemInstruction"]);e!==void 0&&b!=null&&p(e,["setup","systemInstruction"],l6(wn(b)));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let B=Va(x);Array.isArray(B)&&(B=B.map(k=>S6(Ua(k)))),p(e,["setup","tools"],B)}const w=h(t,["sessionResumption"]);e!==void 0&&w!=null&&p(e,["setup","sessionResumption"],I6(w));const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const _=h(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&p(e,["setup","outputAudioTranscription"],_);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const P=h(t,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],P);const L=h(t,["proactivity"]);if(e!==void 0&&L!=null&&p(e,["setup","proactivity"],L),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function g6(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],h6(r));const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const c=h(t,["maxOutputTokens"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","maxOutputTokens"],c);const u=h(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],Q0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const b=h(t,["systemInstruction"]);e!==void 0&&b!=null&&p(e,["setup","systemInstruction"],wn(b));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let k=Va(x);Array.isArray(k)&&(k=k.map(I=>k6(Ua(I)))),p(e,["setup","tools"],k)}const w=h(t,["sessionResumption"]);e!==void 0&&w!=null&&p(e,["setup","sessionResumption"],w);const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const _=h(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&p(e,["setup","outputAudioTranscription"],_);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const P=h(t,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],P);const L=h(t,["proactivity"]);e!==void 0&&L!=null&&p(e,["setup","proactivity"],L);const B=h(t,["explicitVadSignal"]);return e!==void 0&&B!=null&&p(e,["setup","explicitVadSignal"],B),n}function y6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],st(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],m6(s,n)),n}function v6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],st(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],g6(s,n)),n}function x6(t){const e={},n=h(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function w6(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["weightedPrompts"],r)}return e}function _6(t){const e={},n=h(t,["media"]);if(n!=null){let u=US(n);Array.isArray(u)&&(u=u.map(d=>Xu(d))),p(e,["mediaChunks"],u)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],Xu(OS(r)));const s=h(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(t,["video"]);i!=null&&p(e,["video"],Xu(VS(i)));const o=h(t,["text"]);o!=null&&p(e,["text"],o);const a=h(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const c=h(t,["activityEnd"]);return c!=null&&p(e,["activityEnd"],c),e}function b6(t){const e={},n=h(t,["media"]);if(n!=null){let u=US(n);Array.isArray(u)&&(u=u.map(d=>d)),p(e,["mediaChunks"],u)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],OS(r));const s=h(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(t,["video"]);i!=null&&p(e,["video"],VS(i));const o=h(t,["text"]);o!=null&&p(e,["text"],o);const a=h(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const c=h(t,["activityEnd"]);return c!=null&&p(e,["activityEnd"],c),e}function E6(t){const e={},n=h(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const r=h(t,["serverContent"]);r!=null&&p(e,["serverContent"],r);const s=h(t,["toolCall"]);s!=null&&p(e,["toolCall"],s);const i=h(t,["toolCallCancellation"]);i!=null&&p(e,["toolCallCancellation"],i);const o=h(t,["usageMetadata"]);o!=null&&p(e,["usageMetadata"],C6(o));const a=h(t,["goAway"]);a!=null&&p(e,["goAway"],a);const c=h(t,["sessionResumptionUpdate"]);c!=null&&p(e,["sessionResumptionUpdate"],c);const u=h(t,["voiceActivityDetectionSignal"]);return u!=null&&p(e,["voiceActivityDetectionSignal"],u),e}function T6(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],c6(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],u6(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const c=h(t,["inlineData"]);c!=null&&p(e,["inlineData"],Xu(c));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function I6(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function S6(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],f6(a));const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],p6(c));const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function k6(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>d6(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const c=h(t,["googleMaps"]);c!=null&&p(e,["googleMaps"],c);const u=h(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],u);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function C6(t){const e={},n=h(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const r=h(t,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const s=h(t,["candidatesTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const i=h(t,["toolUsePromptTokenCount"]);i!=null&&p(e,["toolUsePromptTokenCount"],i);const o=h(t,["thoughtsTokenCount"]);o!=null&&p(e,["thoughtsTokenCount"],o);const a=h(t,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);const c=h(t,["promptTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(b=>b)),p(e,["promptTokensDetails"],y)}const u=h(t,["cacheTokensDetails"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(b=>b)),p(e,["cacheTokensDetails"],y)}const d=h(t,["candidatesTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(b=>b)),p(e,["responseTokensDetails"],y)}const m=h(t,["toolUsePromptTokensDetails"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(b=>b)),p(e,["toolUsePromptTokensDetails"],y)}const g=h(t,["trafficType"]);return g!=null&&p(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A6(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function N6(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],R6(r));const s=h(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=h(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const c=h(t,["index"]);c!=null&&p(e,["index"],c);const u=h(t,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const d=h(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=h(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function R6(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function P6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let i=vr(s);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["contents"],i)}return n}function M6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["tokensInfo"],s)}return e}function D6(t){const e={},n=h(t,["values"]);n!=null&&p(e,["values"],n);const r=h(t,["statistics"]);return r!=null&&p(e,["statistics"],L6(r)),e}function L6(t){const e={},n=h(t,["truncated"]);n!=null&&p(e,["truncated"],n);const r=h(t,["token_count"]);return r!=null&&p(e,["tokenCount"],r),e}function Bh(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>$V(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function j6(t){const e={},n=h(t,["controlType"]);n!=null&&p(e,["controlType"],n);const r=h(t,["enableControlImageComputation"]);return r!=null&&p(e,["computeControl"],r),e}function F6(t){const e={};if(h(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function U6(t,e){const n={},r=h(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],wn(r));const s=h(t,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>ek(a))),p(e,["tools"],o)}const i=h(t,["generationConfig"]);return e!==void 0&&i!=null&&p(e,["generationConfig"],AV(i)),n}function V6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let o=vr(s);Array.isArray(o)&&(o=o.map(a=>Bh(a))),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&F6(i),n}function O6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let o=vr(s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&U6(i,n),n}function B6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);r!=null&&p(e,["totalTokens"],r);const s=h(t,["cachedContentTokenCount"]);return s!=null&&p(e,["cachedContentTokenCount"],s),e}function z6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);return r!=null&&p(e,["totalTokens"],r),e}function G6(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],st(t,r)),n}function $6(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],st(t,r)),n}function H6(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function q6(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function W6(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const c=h(t,["seed"]);e!==void 0&&c!=null&&p(e,["parameters","seed"],c);const u=h(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const b=h(t,["outputMimeType"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","mimeType"],b);const x=h(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const w=h(t,["addWatermark"]);e!==void 0&&w!=null&&p(e,["parameters","addWatermark"],w);const v=h(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const _=h(t,["editMode"]);e!==void 0&&_!=null&&p(e,["parameters","editMode"],_);const T=h(t,["baseSteps"]);return e!==void 0&&T!=null&&p(e,["parameters","editConfig","baseSteps"],T),n}function K6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["referenceImages"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>YV(c))),p(n,["instances[0]","referenceImages"],a)}const o=h(e,["config"]);return o!=null&&W6(o,n),n}function J6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>zh(i))),p(e,["generatedImages"],s)}return e}function Y6(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=h(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Q6(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["instances[]","title"],s);const i=h(t,["outputDimensionality"]);e!==void 0&&i!=null&&p(e,["parameters","outputDimensionality"],i);const o=h(t,["mimeType"]);e!==void 0&&o!=null&&p(e,["instances[]","mimeType"],o);const a=h(t,["autoTruncate"]);return e!==void 0&&a!=null&&p(e,["parameters","autoTruncate"],a),n}function X6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let a=K0(t,s);Array.isArray(a)&&(a=a.map(c=>c)),p(n,["requests[]","content"],a)}const i=h(e,["config"]);i!=null&&Y6(i,n);const o=h(e,["model"]);return o!==void 0&&p(n,["requests[]","model"],st(t,o)),n}function Z6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let o=K0(t,s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["instances[]","content"],o)}const i=h(e,["config"]);return i!=null&&Q6(i,n),n}function eV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["embeddings"],i)}const s=h(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function tV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>D6(o))),p(e,["embeddings"],i)}const s=h(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function nV(t){const e={},n=h(t,["endpoint"]);n!=null&&p(e,["name"],n);const r=h(t,["deployedModelId"]);return r!=null&&p(e,["deployedModelId"],r),e}function rV(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function sV(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iV(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function oV(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function aV(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],Bh(wn(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const c=h(e,["candidateCount"]);c!=null&&p(r,["candidateCount"],c);const u=h(e,["maxOutputTokens"]);u!=null&&p(r,["maxOutputTokens"],u);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const b=h(e,["frequencyPenalty"]);b!=null&&p(r,["frequencyPenalty"],b);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const w=h(e,["responseMimeType"]);w!=null&&p(r,["responseMimeType"],w);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],J0(v));const _=h(e,["responseJsonSchema"]);if(_!=null&&p(r,["responseJsonSchema"],_),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=h(e,["safetySettings"]);if(n!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(M=>QV(M))),p(n,["safetySettings"],D)}const P=h(e,["tools"]);if(n!==void 0&&P!=null){let D=Va(P);Array.isArray(D)&&(D=D.map(M=>sO(Ua(M)))),p(n,["tools"],D)}const L=h(e,["toolConfig"]);if(n!==void 0&&L!=null&&p(n,["toolConfig"],rO(L)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=h(e,["cachedContent"]);n!==void 0&&B!=null&&p(n,["cachedContent"],Ms(t,B));const k=h(e,["responseModalities"]);k!=null&&p(r,["responseModalities"],k);const I=h(e,["mediaResolution"]);I!=null&&p(r,["mediaResolution"],I);const A=h(e,["speechConfig"]);if(A!=null&&p(r,["speechConfig"],Y0(A)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=h(e,["thinkingConfig"]);N!=null&&p(r,["thinkingConfig"],N);const U=h(e,["imageConfig"]);U!=null&&p(r,["imageConfig"],DV(U));const R=h(e,["enableEnhancedCivicAnswers"]);return R!=null&&p(r,["enableEnhancedCivicAnswers"],R),r}function lV(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],wn(s));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const c=h(e,["candidateCount"]);c!=null&&p(r,["candidateCount"],c);const u=h(e,["maxOutputTokens"]);u!=null&&p(r,["maxOutputTokens"],u);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const b=h(e,["frequencyPenalty"]);b!=null&&p(r,["frequencyPenalty"],b);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const w=h(e,["responseMimeType"]);w!=null&&p(r,["responseMimeType"],w);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],J0(v));const _=h(e,["responseJsonSchema"]);_!=null&&p(r,["responseJsonSchema"],_);const T=h(e,["routingConfig"]);T!=null&&p(r,["routingConfig"],T);const P=h(e,["modelSelectionConfig"]);P!=null&&p(r,["modelConfig"],P);const L=h(e,["safetySettings"]);if(n!==void 0&&L!=null){let ye=L;Array.isArray(ye)&&(ye=ye.map(re=>re)),p(n,["safetySettings"],ye)}const B=h(e,["tools"]);if(n!==void 0&&B!=null){let ye=Va(B);Array.isArray(ye)&&(ye=ye.map(re=>ek(Ua(re)))),p(n,["tools"],ye)}const k=h(e,["toolConfig"]);n!==void 0&&k!=null&&p(n,["toolConfig"],k);const I=h(e,["labels"]);n!==void 0&&I!=null&&p(n,["labels"],I);const A=h(e,["cachedContent"]);n!==void 0&&A!=null&&p(n,["cachedContent"],Ms(t,A));const N=h(e,["responseModalities"]);N!=null&&p(r,["responseModalities"],N);const U=h(e,["mediaResolution"]);U!=null&&p(r,["mediaResolution"],U);const R=h(e,["speechConfig"]);R!=null&&p(r,["speechConfig"],Y0(R));const D=h(e,["audioTimestamp"]);D!=null&&p(r,["audioTimestamp"],D);const M=h(e,["thinkingConfig"]);M!=null&&p(r,["thinkingConfig"],M);const H=h(e,["imageConfig"]);if(H!=null&&p(r,["imageConfig"],LV(H)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function F_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let o=vr(s);Array.isArray(o)&&(o=o.map(a=>Bh(a))),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(n,["generationConfig"],aV(t,i,n)),n}function U_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let o=vr(s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(n,["generationConfig"],lV(t,i,n)),n}function V_(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>N6(u))),p(e,["candidates"],c)}const s=h(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=h(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=h(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=h(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function O_(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),p(e,["candidates"],u)}const s=h(t,["createTime"]);s!=null&&p(e,["createTime"],s);const i=h(t,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const o=h(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=h(t,["responseId"]);a!=null&&p(e,["responseId"],a);const c=h(t,["usageMetadata"]);return c!=null&&p(e,["usageMetadata"],c),e}function cV(t,e){const n={};if(h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const i=h(t,["guidanceScale"]);if(e!==void 0&&i!=null&&p(e,["parameters","guidanceScale"],i),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=h(t,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const c=h(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&p(e,["parameters","includeSafetyAttributes"],c);const u=h(t,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const d=h(t,["language"]);e!==void 0&&d!=null&&p(e,["parameters","language"],d);const m=h(t,["outputMimeType"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","mimeType"],m);const g=h(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g),h(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=h(t,["imageSize"]);if(e!==void 0&&y!=null&&p(e,["parameters","sampleImageSize"],y),h(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function uV(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const c=h(t,["seed"]);e!==void 0&&c!=null&&p(e,["parameters","seed"],c);const u=h(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const b=h(t,["outputMimeType"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","mimeType"],b);const x=h(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const w=h(t,["addWatermark"]);e!==void 0&&w!=null&&p(e,["parameters","addWatermark"],w);const v=h(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const _=h(t,["imageSize"]);e!==void 0&&_!=null&&p(e,["parameters","sampleImageSize"],_);const T=h(t,["enhancePrompt"]);return e!==void 0&&T!=null&&p(e,["parameters","enhancePrompt"],T),n}function dV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&cV(i,n),n}function hV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&uV(i,n),n}function fV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>IV(o))),p(e,["generatedImages"],i)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],XS(s)),e}function pV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>zh(o))),p(e,["generatedImages"],i)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],ZS(s)),e}function mV(t,e){const n={},r=h(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=h(t,["durationSeconds"]);if(e!==void 0&&s!=null&&p(e,["parameters","durationSeconds"],s),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=h(t,["aspectRatio"]);e!==void 0&&i!=null&&p(e,["parameters","aspectRatio"],i);const o=h(t,["resolution"]);e!==void 0&&o!=null&&p(e,["parameters","resolution"],o);const a=h(t,["personGeneration"]);if(e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a),h(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=h(t,["negativePrompt"]);e!==void 0&&c!=null&&p(e,["parameters","negativePrompt"],c);const u=h(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&p(e,["parameters","enhancePrompt"],u),h(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=h(t,["lastFrame"]);e!==void 0&&d!=null&&p(e,["instances[0]","lastFrame"],Gh(d));const m=h(t,["referenceImages"]);if(e!==void 0&&m!=null){let g=m;Array.isArray(g)&&(g=g.map(y=>yO(y))),p(e,["instances[0]","referenceImages"],g)}if(h(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function gV(t,e){const n={},r=h(t,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const i=h(t,["fps"]);e!==void 0&&i!=null&&p(e,["parameters","fps"],i);const o=h(t,["durationSeconds"]);e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o);const a=h(t,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const c=h(t,["aspectRatio"]);e!==void 0&&c!=null&&p(e,["parameters","aspectRatio"],c);const u=h(t,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["pubsubTopic"]);e!==void 0&&m!=null&&p(e,["parameters","pubsubTopic"],m);const g=h(t,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const y=h(t,["enhancePrompt"]);e!==void 0&&y!=null&&p(e,["parameters","enhancePrompt"],y);const b=h(t,["generateAudio"]);e!==void 0&&b!=null&&p(e,["parameters","generateAudio"],b);const x=h(t,["lastFrame"]);e!==void 0&&x!=null&&p(e,["instances[0]","lastFrame"],zr(x));const w=h(t,["referenceImages"]);if(e!==void 0&&w!=null){let T=w;Array.isArray(T)&&(T=T.map(P=>vO(P))),p(e,["instances[0]","referenceImages"],T)}const v=h(t,["mask"]);e!==void 0&&v!=null&&p(e,["instances[0]","mask"],gO(v));const _=h(t,["compressionQuality"]);return e!==void 0&&_!=null&&p(e,["parameters","compressionQuality"],_),n}function yV(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],_V(o)),e}function vV(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],bV(o)),e}function xV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["image"]);i!=null&&p(n,["instances[0]","image"],Gh(i));const o=h(e,["video"]);o!=null&&p(n,["instances[0]","video"],tk(o));const a=h(e,["source"]);a!=null&&EV(a,n);const c=h(e,["config"]);return c!=null&&mV(c,n),n}function wV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["image"]);i!=null&&p(n,["instances[0]","image"],zr(i));const o=h(e,["video"]);o!=null&&p(n,["instances[0]","video"],nk(o));const a=h(e,["source"]);a!=null&&TV(a,n);const c=h(e,["config"]);return c!=null&&gV(c,n),n}function _V(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>kV(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function bV(t){const e={},n=h(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>CV(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function EV(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Gh(s));const i=h(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],tk(i)),n}function TV(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],zr(s));const i=h(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],nk(i)),n}function IV(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],jV(n));const r=h(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(t,["_self"]);return s!=null&&p(e,["safetyAttributes"],XS(s)),e}function zh(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],QS(n));const r=h(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(t,["_self"]);s!=null&&p(e,["safetyAttributes"],ZS(s));const i=h(t,["prompt"]);return i!=null&&p(e,["enhancedPrompt"],i),e}function SV(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["mask"],QS(n));const r=h(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["labels"],s)}return e}function kV(t){const e={},n=h(t,["video"]);return n!=null&&p(e,["video"],pO(n)),e}function CV(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],mO(n)),e}function AV(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=h(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=h(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=h(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const c=h(t,["logprobs"]);c!=null&&p(e,["logprobs"],c);const u=h(t,["maxOutputTokens"]);u!=null&&p(e,["maxOutputTokens"],u);const d=h(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const m=h(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=h(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=h(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const b=h(t,["responseModalities"]);b!=null&&p(e,["responseModalities"],b);const x=h(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const w=h(t,["routingConfig"]);w!=null&&p(e,["routingConfig"],w);const v=h(t,["seed"]);v!=null&&p(e,["seed"],v);const _=h(t,["speechConfig"]);_!=null&&p(e,["speechConfig"],_);const T=h(t,["stopSequences"]);T!=null&&p(e,["stopSequences"],T);const P=h(t,["temperature"]);P!=null&&p(e,["temperature"],P);const L=h(t,["thinkingConfig"]);L!=null&&p(e,["thinkingConfig"],L);const B=h(t,["topK"]);B!=null&&p(e,["topK"],B);const k=h(t,["topP"]);if(k!=null&&p(e,["topP"],k),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function NV(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],st(t,r)),n}function RV(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],st(t,r)),n}function PV(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function MV(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function DV(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function LV(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);r!=null&&p(e,["imageSize"],r);const s=h(t,["outputMimeType"]);s!=null&&p(e,["imageOutputOptions","mimeType"],s);const i=h(t,["outputCompressionQuality"]);return i!=null&&p(e,["imageOutputOptions","compressionQuality"],i),e}function jV(t){const e={},n=h(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],_i(n));const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function QS(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["imageBytes"],_i(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Gh(t){const e={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],_i(n));const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function zr(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["imageBytes"]);r!=null&&p(e,["bytesBase64Encoded"],_i(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function FV(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=h(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=h(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=h(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],$S(t,a)),r}function UV(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=h(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=h(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=h(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],$S(t,a)),r}function VV(t,e){const n={},r=h(e,["config"]);return r!=null&&FV(t,r,n),n}function OV(t,e){const n={},r=h(e,["config"]);return r!=null&&UV(t,r,n),n}function BV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let i=HS(s);Array.isArray(i)&&(i=i.map(o=>km(o))),p(e,["models"],i)}return e}function zV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let i=HS(s);Array.isArray(i)&&(i=i.map(o=>Cm(o))),p(e,["models"],i)}return e}function GV(t){const e={},n=h(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const r=h(t,["segmentationClasses"]);r!=null&&p(e,["maskClasses"],r);const s=h(t,["maskDilation"]);return s!=null&&p(e,["dilation"],s),e}function km(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);s!=null&&p(e,["description"],s);const i=h(t,["version"]);i!=null&&p(e,["version"],i);const o=h(t,["_self"]);o!=null&&p(e,["tunedModelInfo"],iO(o));const a=h(t,["inputTokenLimit"]);a!=null&&p(e,["inputTokenLimit"],a);const c=h(t,["outputTokenLimit"]);c!=null&&p(e,["outputTokenLimit"],c);const u=h(t,["supportedGenerationMethods"]);u!=null&&p(e,["supportedActions"],u);const d=h(t,["temperature"]);d!=null&&p(e,["temperature"],d);const m=h(t,["maxTemperature"]);m!=null&&p(e,["maxTemperature"],m);const g=h(t,["topP"]);g!=null&&p(e,["topP"],g);const y=h(t,["topK"]);y!=null&&p(e,["topK"],y);const b=h(t,["thinking"]);return b!=null&&p(e,["thinking"],b),e}function Cm(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);s!=null&&p(e,["description"],s);const i=h(t,["versionId"]);i!=null&&p(e,["version"],i);const o=h(t,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>nV(g))),p(e,["endpoints"],m)}const a=h(t,["labels"]);a!=null&&p(e,["labels"],a);const c=h(t,["_self"]);c!=null&&p(e,["tunedModelInfo"],oO(c));const u=h(t,["defaultCheckpointId"]);u!=null&&p(e,["defaultCheckpointId"],u);const d=h(t,["checkpoints"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),p(e,["checkpoints"],m)}return e}function $V(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],rV(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],sV(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const c=h(t,["inlineData"]);c!=null&&p(e,["inlineData"],A6(c));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function HV(t){const e={},n=h(t,["productImage"]);return n!=null&&p(e,["image"],zr(n)),e}function qV(t,e){const n={},r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["baseSteps"]);e!==void 0&&s!=null&&p(e,["parameters","baseSteps"],s);const i=h(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=h(t,["seed"]);e!==void 0&&o!=null&&p(e,["parameters","seed"],o);const a=h(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const c=h(t,["personGeneration"]);e!==void 0&&c!=null&&p(e,["parameters","personGeneration"],c);const u=h(t,["addWatermark"]);e!==void 0&&u!=null&&p(e,["parameters","addWatermark"],u);const d=h(t,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const m=h(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const g=h(t,["enhancePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","enhancePrompt"],g);const y=h(t,["labels"]);return e!==void 0&&y!=null&&p(e,["labels"],y),n}function WV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["source"]);s!=null&&JV(s,n);const i=h(e,["config"]);return i!=null&&qV(i,n),n}function KV(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>zh(s))),p(e,["generatedImages"],r)}return e}function JV(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["personImage"]);e!==void 0&&s!=null&&p(e,["instances[0]","personImage","image"],zr(s));const i=h(t,["productImages"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>HV(a))),p(e,["instances[0]","productImages"],o)}return n}function YV(t){const e={},n=h(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],zr(n));const r=h(t,["referenceId"]);r!=null&&p(e,["referenceId"],r);const s=h(t,["referenceType"]);s!=null&&p(e,["referenceType"],s);const i=h(t,["maskImageConfig"]);i!=null&&p(e,["maskImageConfig"],GV(i));const o=h(t,["controlImageConfig"]);o!=null&&p(e,["controlImageConfig"],j6(o));const a=h(t,["styleImageConfig"]);a!=null&&p(e,["styleImageConfig"],a);const c=h(t,["subjectImageConfig"]);return c!=null&&p(e,["subjectImageConfig"],c),e}function XS(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function ZS(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function QV(t){const e={},n=h(t,["category"]);if(n!=null&&p(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function XV(t){const e={},n=h(t,["image"]);return n!=null&&p(e,["image"],zr(n)),e}function ZV(t,e){const n={},r=h(t,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const s=h(t,["maxPredictions"]);e!==void 0&&s!=null&&p(e,["parameters","maxPredictions"],s);const i=h(t,["confidenceThreshold"]);e!==void 0&&i!=null&&p(e,["parameters","confidenceThreshold"],i);const o=h(t,["maskDilation"]);e!==void 0&&o!=null&&p(e,["parameters","maskDilation"],o);const a=h(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","binaryColorThreshold"],a);const c=h(t,["labels"]);return e!==void 0&&c!=null&&p(e,["labels"],c),n}function eO(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["source"]);s!=null&&nO(s,n);const i=h(e,["config"]);return i!=null&&ZV(i,n),n}function tO(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>SV(s))),p(e,["generatedMasks"],r)}return e}function nO(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],zr(s));const i=h(t,["scribbleImage"]);return e!==void 0&&i!=null&&p(e,["instances[0]","scribble"],XV(i)),n}function rO(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],iV(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function sO(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],PV(a));const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],MV(c));const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function ek(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>oV(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const c=h(t,["googleMaps"]);c!=null&&p(e,["googleMaps"],c);const u=h(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],u);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function iO(t){const e={},n=h(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function oO(t){const e={},n=h(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function aO(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function lO(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function cO(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","name"],st(t,r));const s=h(e,["config"]);return s!=null&&aO(s,n),n}function uO(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["config"]);return s!=null&&lO(s,n),n}function dO(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&p(e,["parameters","safetySetting"],s);const i=h(t,["personGeneration"]);e!==void 0&&i!=null&&p(e,["parameters","personGeneration"],i);const o=h(t,["includeRaiReason"]);e!==void 0&&o!=null&&p(e,["parameters","includeRaiReason"],o);const a=h(t,["outputMimeType"]);e!==void 0&&a!=null&&p(e,["parameters","outputOptions","mimeType"],a);const c=h(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&p(e,["parameters","outputOptions","compressionQuality"],c);const u=h(t,["enhanceInputImage"]);e!==void 0&&u!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],u);const d=h(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const m=h(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=h(t,["numberOfImages"]);e!==void 0&&g!=null&&p(e,["parameters","sampleCount"],g);const y=h(t,["mode"]);return e!==void 0&&y!=null&&p(e,["parameters","mode"],y),n}function hO(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["image"]);s!=null&&p(n,["instances[0]","image"],zr(s));const i=h(e,["upscaleFactor"]);i!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],i);const o=h(e,["config"]);return o!=null&&dO(o,n),n}function fO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>zh(i))),p(e,["generatedImages"],s)}return e}function pO(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],_i(r));const s=h(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function mO(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],_i(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function gO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["_self"],zr(n));const r=h(t,["maskMode"]);return r!=null&&p(e,["maskMode"],r),e}function yO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["image"],Gh(n));const r=h(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function vO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["image"],zr(n));const r=h(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function tk(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["videoBytes"]);r!=null&&p(e,["encodedVideo"],_i(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["encoding"],s),e}function nk(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["videoBytes"]);r!=null&&p(e,["bytesBase64Encoded"],_i(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xO(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["displayName"],r),n}function wO(t){const e={},n=h(t,["config"]);return n!=null&&xO(n,e),e}function _O(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function bO(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&_O(r,e),e}function EO(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function TO(t,e){const n={},r=h(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["customMetadata"],i)}const s=h(t,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),n}function IO(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],kO(o)),e}function SO(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["fileName"]);r!=null&&p(e,["fileName"],r);const s=h(t,["config"]);return s!=null&&TO(s,e),e}function kO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function CO(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function AO(t){const e={},n=h(t,["config"]);return n!=null&&CO(n,e),e}function NO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["fileSearchStores"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["fileSearchStores"],i)}return e}function rk(t,e){const n={},r=h(t,["mimeType"]);e!==void 0&&r!=null&&p(e,["mimeType"],r);const s=h(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const i=h(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>c)),p(e,["customMetadata"],a)}const o=h(t,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),n}function RO(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["config"]);return r!=null&&rk(r,e),e}function PO(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MO="Content-Type",DO="X-Server-Timeout",LO="User-Agent",Am="x-goog-api-client",jO="1.34.0",FO=`google-genai-sdk/${jO}`,UO="v1beta1",VO="v1beta";class OO{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:UO,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:VO,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.unaryApiCall(s,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,i]of Object.entries(n))typeof i=="object"?r[s]=Object.assign(Object.assign({},r[s]),i):i!==void 0&&(r[s]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.streamApiCall(s,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>i.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}s&&s.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&BO(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await B_(s),new Tm(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await B_(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return jr(this,arguments,function*(){var r;const s=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";const a="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:d}=yield ze(s.read());if(u){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(d,{stream:!0});try{const b=JSON.parse(m);if("error"in b){const x=JSON.parse(JSON.stringify(b.error)),w=x.status,v=x.code,_=`got status: ${w}. ${JSON.stringify(b)}`;if(v>=400&&v<600)throw new Oh({message:_,status:v})}}catch(b){if(b.name==="ApiError")throw b}o+=m;let g=-1,y=0;for(;;){g=-1,y=0;for(const w of c){const v=o.indexOf(w);v!==-1&&(g===-1||v<g)&&(g=v,y=w.length)}if(g===-1)break;const b=o.substring(0,g);o=o.substring(g+y);const x=b.trim();if(x.startsWith(a)){const w=x.substring(a.length).trim();try{const v=new Response(w,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ze(new Tm(v))}catch(v){throw new Error(`exception parsing stream chunk ${w}. ${v}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=FO+" "+this.clientOptions.userAgentExtra;return e[LO]=n,e[Am]=n,e[MO]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,i]of Object.entries(e.headers))r.append(s,i);e.timeout&&e.timeout>0&&r.append(DO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);s.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const c={file:s},u=this.getFileName(e),d=Ee("upload/v1beta/files",c._url),m=await this.fetchUploadUrl(d,s.sizeBytes,s.mimeType,u,c,n==null?void 0:n.httpOptions);return i.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var s;const i=this.clientOptions.uploader,o=await i.stat(n),a=String(o.size),c=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:o.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),m={};r!=null&&rk(r,m);const g=await this.fetchUploadUrl(u,a,c,d,m,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,i,o){var a;let c={};o?c=o:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const u=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function B_(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new Oh({message:s,status:n}):new Error(s)}}function BO(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,o){const a=Object.assign({},i);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const u=o[c],d=a[c];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?a[c]=r(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),a[c]=u)}return a}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zO="mcp_used/unknown";let GO=!1;function sk(t){for(const e of t)if($O(e)||typeof e=="object"&&"inputSchema"in e)return!0;return GO}function ik(t){var e;const n=(e=t[Am])!==null&&e!==void 0?e:"";t[Am]=(n+` ${zO}`).trimStart()}function $O(t){return t!==null&&typeof t=="object"&&t instanceof X0}function HO(t){return jr(this,arguments,function*(n,r=100){let s,i=0;for(;i<r;){const o=yield ze(n.listTools({cursor:s}));for(const a of o.tools)yield yield ze(a),i++;if(!o.nextCursor)break;s=o.nextCursor}})}class X0{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new X0(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const i={},o=[];for(const d of this.mcpClients)try{for(var a=!0,c=(n=void 0,Fr(HO(d))),u;u=await c.next(),e=u.done,!e;a=!0){s=u.value,a=!1;const m=s;o.push(m);const g=m.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=d}}catch(m){n={error:m}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),EF(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await s.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function qO(t,e,n){const r=new mF;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class WO{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=YO(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${s}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const d=new Promise(T=>{u=T}),m=e.callbacks,g=function(){u({})},y=this.apiClient,b={onopen:g,onmessage:T=>{qO(y,m.onmessage,T)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(T){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(T){}},x=this.webSocketFactory.create(c,JO(o),b);x.connect(),await d;const _={setup:{model:st(this.apiClient,e.model)}};return x.send(JSON.stringify(_)),new KO(x,this.apiClient)}}class KO{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=w6(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=x6(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Bo.PLAY)}pause(){this.sendPlaybackControl(Bo.PAUSE)}stop(){this.sendPlaybackControl(Bo.STOP)}resetContext(){this.sendPlaybackControl(Bo.RESET_CONTEXT)}close(){this.conn.close()}}function JO(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function YO(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function XO(t,e,n){const r=new pF;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const i=JSON.parse(s);if(t.isVertexAI()){const o=E6(i);Object.assign(r,o)}else Object.assign(r,i);e(r)}class ZO{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new WO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,i,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&sk(e.config.tools)&&ik(m);const g=r9(m);if(this.apiClient.isVertexAI())d=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,d);else{const A=this.apiClient.getApiKey();let N="BidiGenerateContent",U="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",U="access_token"),d=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${N}?${U}=${A}`}let y=()=>{};const b=new Promise(A=>{y=A}),x=e.callbacks,w=function(){var A;(A=x==null?void 0:x.onopen)===null||A===void 0||A.call(x),y({})},v=this.apiClient,_={onopen:w,onmessage:A=>{XO(v,x.onmessage,A)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(A){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(A){}},T=this.webSocketFactory.create(d,n9(g),_);T.connect(),await b;let P=st(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const A=this.apiClient.getProject(),N=this.apiClient.getLocation();P=`projects/${A}/locations/${N}/`+P}let L={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Gd.AUDIO]}:e.config.responseModalities=[Gd.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const B=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],k=[];for(const A of B)if(this.isCallableTool(A)){const N=A;k.push(await N.tool())}else k.push(A);k.length>0&&(e.config.tools=k);const I={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=v6(this.apiClient,I):L=y6(this.apiClient,I),delete L.config,T.send(JSON.stringify(L)),new t9(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const e9={turnComplete:!0};class t9{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=vr(n.turns),e.isVertexAI()||(r=r.map(s=>Bh(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(QO)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},e9),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:b6(e)}:n={realtimeInput:_6(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function n9(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function r9(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z_=10;function G_(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(na(o)){s=!0;break}if(!s)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function na(t){return"callTool"in t&&typeof t.callTool=="function"}function s9(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>na(s)))!==null&&r!==void 0?r:!1}function $_(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(na(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(s)}),n}function H_(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i9 extends Ps{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,i,o,a;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!s9(n)||G_(n.config))return await this.generateContentInternal(c);const u=$_(n);if(u.length>0){const x=u.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let d,m;const g=vr(c.contents),y=(i=(s=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:z_;let b=0;for(;b<y&&(d=await this.generateContentInternal(c),!(!d.functionCalls||d.functionCalls.length===0));){const x=d.candidates[0].content,w=[];for(const v of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(na(v)){const T=await v.callTool(d.functionCalls);w.push(...T)}b++,m={role:"user",parts:w},c.contents=vr(c.contents),c.contents.push(x),c.contents.push(m),H_(c.config)&&(g.push(x),g.push(m))}return H_(c.config)&&(d.automaticFunctionCallingHistory=g),d},this.generateContentStream=async n=>{var r,s,i,o,a;if(this.maybeMoveToResponseJsonSchem(n),G_(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const c=$_(n);if(c.length>0){const m=c.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(i=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,d=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let i;const o=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((s=c==null?void 0:c.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:o.push(c);let a;return i?a={generatedImages:o,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new mo(Cs.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,i,o,a,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(i=n.source)===null||i===void 0?void 0:i.video)===null||o===void 0)&&o.uri&&(!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const o=await Promise.all(i.map(async c=>na(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&sk(e.config.tools)){const c=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},c);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),ik(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,r,s;const i=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(na(o)){const a=o,c=await a.tool();for(const u of(s=c.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(i.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);i.set(u.name,a)}}return i}async processAfcStream(e){var n,r,s;const i=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:z_;let o=!1,a=0;const c=await this.initAfcToolsMap(e);return function(u,d,m){return jr(this,arguments,function*(){for(var g,y,b,x,w,v;a<i;){o&&(a++,o=!1);const L=yield ze(u.processParamsMaybeAddMcpUsage(m)),B=yield ze(u.generateContentStreamInternal(L)),k=[],I=[];try{for(var _=!0,T=(y=void 0,Fr(B)),P;P=yield ze(T.next()),g=P.done,!g;_=!0){x=P.value,_=!1;const A=x;if(yield yield ze(A),A.candidates&&(!((w=A.candidates[0])===null||w===void 0)&&w.content)){I.push(A.candidates[0].content);for(const N of(v=A.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<i&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(N.functionCall.name)){const U=yield ze(d.get(N.functionCall.name).callTool([N.functionCall]));k.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(A){y={error:A}}finally{try{!_&&!g&&(b=T.return)&&(yield ze(b.call(T)))}finally{if(y)throw y.error}}if(k.length>0){o=!0;const A=new ol;A.candidates=[{content:{role:"user",parts:k}}],yield yield ze(A);const N=[];N.push(...I),N.push({role:"user",parts:k});const U=vr(m.contents).concat(N);m.contents=U}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=U_(this.apiClient,e);return a=Ee("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=O_(d),g=new ol;return Object.assign(g,m),g})}else{const u=F_(this.apiClient,e);return a=Ee("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=V_(d),g=new ol;return Object.assign(g,m),g})}}async generateContentStreamInternal(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=U_(this.apiClient,e);return a=Ee("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return jr(this,arguments,function*(){var g,y,b,x;try{for(var w=!0,v=Fr(m),_;_=yield ze(v.next()),g=_.done,!g;w=!0){x=_.value,w=!1;const T=x,P=O_(yield ze(T.json()));P.sdkHttpResponse={headers:T.headers};const L=new ol;Object.assign(L,P),yield yield ze(L)}}catch(T){y={error:T}}finally{try{!w&&!g&&(b=v.return)&&(yield ze(b.call(v)))}finally{if(y)throw y.error}}})})}else{const u=F_(this.apiClient,e);return a=Ee("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(m){return jr(this,arguments,function*(){var g,y,b,x;try{for(var w=!0,v=Fr(m),_;_=yield ze(v.next()),g=_.done,!g;w=!0){x=_.value,w=!1;const T=x,P=V_(yield ze(T.json()));P.sdkHttpResponse={headers:T.headers};const L=new ol;Object.assign(L,P),yield yield ze(L)}}catch(T){y={error:T}}finally{try{!w&&!g&&(b=v.return)&&(yield ze(b.call(v)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=Z6(this.apiClient,e);return a=Ee("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=tV(d),g=new w_;return Object.assign(g,m),g})}else{const u=X6(this.apiClient,e);return a=Ee("{model}:batchEmbedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=eV(d),g=new w_;return Object.assign(g,m),g})}}async generateImagesInternal(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=hV(this.apiClient,e);return a=Ee("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=pV(d),g=new __;return Object.assign(g,m),g})}else{const u=dV(this.apiClient,e);return a=Ee("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=fV(d),g=new __;return Object.assign(g,m),g})}}async editImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=K6(this.apiClient,e);return i=Ee("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=J6(c),d=new rF;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=hO(this.apiClient,e);return i=Ee("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=fO(c),d=new sF;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=WV(this.apiClient,e);return i=Ee("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=KV(c),d=new iF;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=eO(this.apiClient,e);return i=Ee("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=tO(c),d=new oF;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=RV(this.apiClient,e);return a=Ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Cm(d))}else{const u=NV(this.apiClient,e);return a=Ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>km(d))}}async listInternal(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=OV(this.apiClient,e);return a=Ee("{models_url}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=zV(d),g=new b_;return Object.assign(g,m),g})}else{const u=VV(this.apiClient,e);return a=Ee("{models_url}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=BV(d),g=new b_;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=uO(this.apiClient,e);return a=Ee("{model}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Cm(d))}else{const u=cO(this.apiClient,e);return a=Ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>km(d))}}async delete(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=$6(this.apiClient,e);return a=Ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=q6(d),g=new E_;return Object.assign(g,m),g})}else{const u=G6(this.apiClient,e);return a=Ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=H6(d),g=new E_;return Object.assign(g,m),g})}}async countTokens(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=O6(this.apiClient,e);return a=Ee("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=z6(d),g=new T_;return Object.assign(g,m),g})}else{const u=V6(this.apiClient,e);return a=Ee("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=B6(d),g=new T_;return Object.assign(g,m),g})}}async computeTokens(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=P6(this.apiClient,e);return i=Ee("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=M6(c),d=new aF;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=wV(this.apiClient,e);return a=Ee("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const m=vV(d),g=new $d;return Object.assign(g,m),g})}else{const u=xV(this.apiClient,e);return a=Ee("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=yV(d),g=new $d;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o9 extends Ps{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=Q3(e);return a=Ee("{operationName}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}else{const u=Y3(e);return a=Ee("{operationName}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=G3(e);return i=Ee("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a9(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function l9(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>y9(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function c9(t,e,n){const r={},s=h(e,["expireTime"]);n!==void 0&&s!=null&&p(n,["expireTime"],s);const i=h(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&p(n,["newSessionExpireTime"],i);const o=h(e,["uses"]);n!==void 0&&o!=null&&p(n,["uses"],o);const a=h(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&p(n,["bidiGenerateContentSetup"],g9(t,a));const c=h(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&p(n,["fieldMask"],c),r}function u9(t,e){const n={},r=h(e,["config"]);return r!=null&&p(n,["config"],c9(t,r,n)),n}function d9(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function h9(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function f9(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function p9(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function m9(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const c=h(t,["maxOutputTokens"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","maxOutputTokens"],c);const u=h(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],Q0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const b=h(t,["systemInstruction"]);e!==void 0&&b!=null&&p(e,["setup","systemInstruction"],l9(wn(b)));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let B=Va(x);Array.isArray(B)&&(B=B.map(k=>x9(Ua(k)))),p(e,["setup","tools"],B)}const w=h(t,["sessionResumption"]);e!==void 0&&w!=null&&p(e,["setup","sessionResumption"],v9(w));const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const _=h(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&p(e,["setup","outputAudioTranscription"],_);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const P=h(t,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],P);const L=h(t,["proactivity"]);if(e!==void 0&&L!=null&&p(e,["setup","proactivity"],L),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function g9(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],st(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],m9(s,n)),n}function y9(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],d9(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],h9(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const c=h(t,["inlineData"]);c!=null&&p(e,["inlineData"],a9(c));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function v9(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function x9(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],f9(a));const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],p9(c));const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w9(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(i=>`${n}.${i}`);e.push(...s)}else e.push(n)}return e.join(",")}function _9(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const i=w9(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(u=>o.includes(u)?`generationConfig.${u}`:u));const c=[];i&&c.push(i),a.length>0&&c.push(...a),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class b9 extends Ps{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=u9(this.apiClient,e);i=Ee("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const c=_9(a,e.config);return s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E9(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function T9(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&E9(r,e),e}function I9(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function S9(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function k9(t){const e={},n=h(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const r=h(t,["config"]);return r!=null&&S9(r,e),e}function C9(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["documents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A9 extends Ps{constructor(e){super(),this.apiClient=e,this.list=async n=>new mo(Cs.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=I9(e);return i=Ee("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=T9(e);s=Ee("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=k9(e);return i=Ee("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=C9(c),d=new lF;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N9 extends Ps{constructor(e,n=new A9(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new mo(Cs.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=wO(e);return i=Ee("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=EO(e);return i=Ee("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=bO(e);s=Ee("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=AO(e);return i=Ee("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=NO(c),d=new cF;return Object.assign(d,u),d})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=RO(e);return i=Ee("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=PO(c),d=new uF;return Object.assign(d,u),d})}}async importFile(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=SO(e);return i=Ee("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=IO(c),d=new q0;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ok=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return ok=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const R9=()=>ok();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nm(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Rm=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _r extends Error{}class Rn extends _r{constructor(e,n,r,s){super(`${Rn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new $h({message:r,cause:Rm(n)});const i=n;return e===400?new lk(e,i,r,s):e===401?new ck(e,i,r,s):e===403?new uk(e,i,r,s):e===404?new dk(e,i,r,s):e===409?new hk(e,i,r,s):e===422?new fk(e,i,r,s):e===429?new pk(e,i,r,s):e>=500?new mk(e,i,r,s):new Rn(e,i,r,s)}}class Pm extends Rn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class $h extends Rn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class ak extends $h{constructor({message:e}={}){super({message:e??"Request timed out."})}}class lk extends Rn{}class ck extends Rn{}class uk extends Rn{}class dk extends Rn{}class hk extends Rn{}class fk extends Rn{}class pk extends Rn{}class mk extends Rn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P9=/^[a-z][a-z0-9+.-]*:/i,M9=t=>P9.test(t);let Mm=t=>(Mm=Array.isArray,Mm(t));const D9=Mm;let L9=D9;const q_=L9;function j9(t){if(!t)return!0;for(const e in t)return!1;return!0}function F9(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const U9=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _r(`${t} must be an integer`);if(e<0)throw new _r(`${t} must be a positive integer`);return e},V9=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O9=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Co="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B9(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const z9=()=>{var t,e,n,r,s;const i=B9();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Co,"X-Stainless-OS":K_(Deno.build.os),"X-Stainless-Arch":W_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Co,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Co,"X-Stainless-OS":K_((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":W_((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const o=G9();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Co,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Co,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function G9(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const W_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",K_=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Eu;const $9=()=>Eu??(Eu=z9());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H9(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function gk(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function q9(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return gk({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function yk(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function W9(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),s=r.cancel();r.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const K9=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vk=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Yf(t,e,n){return vk(),new File(t,e??"unknown_file",n)}function J9(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Y9=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xk=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Q9=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&xk(t),X9=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Z9(t,e,n){if(vk(),t=await t,Q9(t))return t instanceof File?t:Yf([await t.arrayBuffer()],t.name);if(X9(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Yf(await Dm(s),e,n)}const r=await Dm(t);if(e||(e=J9(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Yf(r,e,n)}async function Dm(t){var e,n,r,s,i;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(xk(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(Y9(t))try{for(var a=!0,c=Fr(t),u;u=await c.next(),e=u.done,!e;a=!0){s=u.value,a=!1;const d=s;o.push(...await Dm(d))}}catch(d){n={error:d}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}else{const d=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${eB(t)}`)}return o}function eB(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wk{constructor(e){this._client=e}}wk._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _k(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const J_=Object.freeze(Object.create(null)),tB=(t=_k)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],o=n.reduce((d,m,g)=>{var y,b,x;/[?#]/.test(m)&&(s=!0);const w=r[g];let v=(s?encodeURIComponent:t)(""+w);return g!==r.length&&(w==null||typeof w=="object"&&w.toString===((x=Object.getPrototypeOf((b=Object.getPrototypeOf((y=w.hasOwnProperty)!==null&&y!==void 0?y:J_))!==null&&b!==void 0?b:J_))===null||x===void 0?void 0:x.toString))&&(v=w+"",i.push({start:d.length+m.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),d+m+(g===r.length?"":v)},""),a=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=c.exec(a))!==null;)i.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(i.sort((d,m)=>d.start-m.start),i.length>0){let d=0;const m=i.reduce((g,y)=>{const b=" ".repeat(y.start-d),x="^".repeat(y.length);return d=y.start+y.length,g+b+x},"");throw new _r(`Path parameters result in path with invalid segments:
${i.map(g=>g.error).join(`
`)}
${o}
${m}`)}return o},Tu=tB(_k);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bk extends wk{create(e,n){var r;const{api_version:s=this._client.apiVersion}=e,i=qd(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new _r("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new _r("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Tu`/${s}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(Tu`/${s}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(Tu`/${s}/interactions/${e}/cancel`,r)}get(e,n={},r){var s;const i=n??{},{api_version:o=this._client.apiVersion}=i,a=qd(i,["api_version"]);return this._client.get(Tu`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}bk._key=Object.freeze(["interactions"]);class Ek extends bk{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nB(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let Iu;function Z0(t){let e;return(Iu??(e=new globalThis.TextEncoder,Iu=e.encode.bind(e)))(t)}let Su;function Y_(t){let e;return(Su??(e=new globalThis.TextDecoder,Su=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Z0(e):e;this.buffer=nB([this.buffer,n]);const r=[];let s;for(;(s=rB(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(Y_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,o=Y_(this.buffer.subarray(0,i));r.push(o),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Hh.NEWLINE_CHARS=new Set([`
`,"\r"]);Hh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function rB(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function sB(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wd={off:0,error:200,warn:300,info:400,debug:500},Q_=(t,e,n)=>{if(t){if(F9(Wd,t))return t;In(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Wd))}`)}};function yl(){}function ku(t,e,n){return!e||Wd[t]>Wd[n]?yl:e[t].bind(e)}const iB={error:yl,warn:yl,info:yl,debug:yl};let X_=new WeakMap;function In(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return iB;const s=X_.get(n);if(s&&s[0]===r)return s[1];const i={error:ku("error",n,r),warn:ku("warn",n,r),info:ku("info",n,r),debug:ku("debug",n,r)};return X_.set(n,[r,i]),i}const Di=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zo{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let s=!1;const i=r?In(r):console;function o(){return jr(this,arguments,function*(){var c,u,d,m;if(s)throw new _r("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,b=Fr(oB(e,n)),x;x=yield ze(b.next()),c=x.done,!c;y=!0){m=x.value,y=!1;const w=m;if(!g)if(w.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield ze(JSON.parse(w.data))}catch(v){throw i.error("Could not parse message into JSON:",w.data),i.error("From chunk:",w.raw),v}}}catch(w){u={error:w}}finally{try{!y&&!c&&(d=b.return)&&(yield ze(d.call(b)))}finally{if(u)throw u.error}}g=!0}catch(w){if(Nm(w))return yield ze(void 0);throw w}finally{g||n.abort()}})}return new zo(o,n,r)}static fromReadableStream(e,n,r){let s=!1;function i(){return jr(this,arguments,function*(){var c,u,d,m;const g=new Hh,y=yk(e);try{for(var b=!0,x=Fr(y),w;w=yield ze(x.next()),c=w.done,!c;b=!0){m=w.value,b=!1;const v=m;for(const _ of g.decode(v))yield yield ze(_)}}catch(v){u={error:v}}finally{try{!b&&!c&&(d=x.return)&&(yield ze(d.call(x)))}finally{if(u)throw u.error}}for(const v of g.flush())yield yield ze(v)})}function o(){return jr(this,arguments,function*(){var c,u,d,m;if(s)throw new _r("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,b=Fr(i()),x;x=yield ze(b.next()),c=x.done,!c;y=!0){m=x.value,y=!1;const w=m;g||w&&(yield yield ze(JSON.parse(w)))}}catch(w){u={error:w}}finally{try{!y&&!c&&(d=b.return)&&(yield ze(d.call(b)))}finally{if(u)throw u.error}}g=!0}catch(w){if(Nm(w))return yield ze(void 0);throw w}finally{g||n.abort()}})}return new zo(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=r.next();e.push(o),n.push(o)}return i.shift()}});return[new zo(()=>s(e),this.controller,this.client),new zo(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return gk({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const o=Z0(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function oB(t,e){return jr(this,arguments,function*(){var r,s,i,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _r("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _r("Attempted to iterate over a response with no body");const a=new lB,c=new Hh,u=yk(t.body);try{for(var d=!0,m=Fr(aB(u)),g;g=yield ze(m.next()),r=g.done,!r;d=!0){o=g.value,d=!1;const y=o;for(const b of c.decode(y)){const x=a.decode(b);x&&(yield yield ze(x))}}}catch(y){s={error:y}}finally{try{!d&&!r&&(i=m.return)&&(yield ze(i.call(m)))}finally{if(s)throw s.error}}for(const y of c.flush()){const b=a.decode(y);b&&(yield yield ze(b))}})}function aB(t){return jr(this,arguments,function*(){var n,r,s,i;let o=new Uint8Array;try{for(var a=!0,c=Fr(t),u;u=yield ze(c.next()),n=u.done,!n;a=!0){i=u.value,a=!1;const d=i;if(d==null)continue;const m=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?Z0(d):d;let g=new Uint8Array(o.length+m.length);g.set(o),g.set(m,o.length),o=g;let y;for(;(y=sB(o))!==-1;)yield yield ze(o.slice(0,y)),o=o.slice(y)}}catch(d){r={error:d}}finally{try{!a&&!n&&(s=c.return)&&(yield ze(s.call(c)))}finally{if(r)throw r.error}}o.length>0&&(yield yield ze(o))})}class lB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=cB(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function cB(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function uB(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,o=await(async()=>{var a;if(e.options.stream)return In(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):zo.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),u=(a=c==null?void 0:c.split(";")[0])===null||a===void 0?void 0:a.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return In(t).debug(`[${r}] response parsed`,Di({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ey extends Promise{constructor(e,n,r=uB){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new ey(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tk=Symbol("brand.privateNullableHeaders");function*dB(t){if(!t)return;if(Tk in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():q_(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=q_(r[1])?r[1]:[r[1]];let o=!1;for(const a of i)a!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,a])}}const al=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,o]of dB(r)){const a=i.toLowerCase();s.has(a)||(e.delete(i),s.add(a)),o===null?(e.delete(i),n.add(a)):(e.append(i,o),n.delete(a))}}return{[Tk]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qf=t=>{var e,n,r,s,i,o;if(typeof globalThis.process<"u")return(r=(n=(e=F3)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(i=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||i===void 0?void 0:i.call(s,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ik;class qh{constructor(e){var n,r,s,i,o,a,c,{baseURL:u=Qf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=Qf("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,g=qd(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:d,apiVersion:m},g),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(r=y.timeout)!==null&&r!==void 0?r:qh.DEFAULT_TIMEOUT,this.logger=(s=y.logger)!==null&&s!==void 0?s:console;const b="warn";this.logLevel=b,this.logLevel=(o=(i=Q_(y.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:Q_(Qf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:b,this.fetchOptions=y.fetchOptions,this.maxRetries=(a=y.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(c=y.fetch)!==null&&c!==void 0?c:H9(),this.encoder=K9,this._options=y,this.apiKey=d,this.apiVersion=m,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=al([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return al([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return al([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new _r(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Co}`}defaultIdempotencyKey(){return`stainless-node-retry-${R9()}`}makeStatusError(e,n,r,s){return Rn.generate(e,n,r,s)}buildURL(e,n,r){const s=!this.baseURLOverridden()&&r||this.baseURL,i=M9(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return j9(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new ey(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var s,i,o;const a=await e,c=(s=a.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=c),await this.prepareOptions(a);const{req:u,url:d,timeout:m}=await this.buildRequest(a,{retryCount:c-n});await this.prepareRequest(u,{url:d,options:a});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=r===void 0?"":`, retryOf: ${r}`,b=Date.now();if(In(this).debug(`[${g}] sending request`,Di({retryOfRequestLogID:r,method:a.method,url:d,options:a,headers:u.headers})),!((i=a.signal)===null||i===void 0)&&i.aborted)throw new Pm;const x=new AbortController,w=await this.fetchWithTimeout(d,u,m,x).catch(Rm),v=Date.now();if(w instanceof globalThis.Error){const T=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new Pm;const P=Nm(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(n)return In(this).info(`[${g}] connection ${P?"timed out":"failed"} - ${T}`),In(this).debug(`[${g}] connection ${P?"timed out":"failed"} (${T})`,Di({retryOfRequestLogID:r,url:d,durationMs:v-b,message:w.message})),this.retryRequest(a,n,r??g);throw In(this).info(`[${g}] connection ${P?"timed out":"failed"} - error; no more retries left`),In(this).debug(`[${g}] connection ${P?"timed out":"failed"} (error; no more retries left)`,Di({retryOfRequestLogID:r,url:d,durationMs:v-b,message:w.message})),P?new ak:new $h({cause:w})}const _=`[${g}${y}] ${u.method} ${d} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${v-b}ms`;if(!w.ok){const T=await this.shouldRetry(w);if(n&&T){const A=`retrying, ${n} attempts remaining`;return await W9(w.body),In(this).info(`${_} - ${A}`),In(this).debug(`[${g}] response error (${A})`,Di({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:v-b})),this.retryRequest(a,n,r??g,w.headers)}const P=T?"error; no more retries left":"error; not retryable";In(this).info(`${_} - ${P}`);const L=await w.text().catch(A=>Rm(A).message),B=V9(L),k=B?void 0:L;throw In(this).debug(`[${g}] response error (${P})`,Di({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,message:k,durationMs:Date.now()-b})),this.makeStatusError(w.status,B,k,w.headers)}return In(this).info(_),In(this).debug(`[${g}] response start`,Di({retryOfRequestLogID:r,url:w.url,status:w.status,headers:w.headers,durationMs:v-b})),{response:w,options:a,controller:x,requestLogID:g,retryOfRequestLogID:r,startTime:b}}async fetchWithTimeout(e,n,r,s){const i=n||{},{signal:o,method:a}=i,c=qd(i,["signal","method"]);o&&o.addEventListener("abort",()=>s.abort());const u=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},d?{duplex:"half"}:{}),{method:"GET"}),c);a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){var i;let o;const a=s==null?void 0:s.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(o=u)}const c=s==null?void 0:s.get("retry-after");if(c&&!o){const u=parseFloat(c);Number.isNaN(u)?o=Date.parse(c)-Date.now():o=u*1e3}if(!(o&&0<=o&&o<60*1e3)){const u=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,u)}return await O9(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,s,i;const o=Object.assign({},e),{method:a,path:c,query:u,defaultBaseURL:d}=o,m=this.buildURL(c,u,d);"timeout"in o&&U9("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:g,body:y}=this.buildBody({options:o}),b=await this.buildHeaders({options:e,method:a,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:b},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(i=o.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=al([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),$9()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=al([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:q9(e)}:this.encoder({body:e,headers:r})}}qh.DEFAULT_TIMEOUT=6e4;class Xt extends qh{constructor(){super(...arguments),this.interactions=new Ek(this)}}Ik=Xt;Xt.GeminiNextGenAPIClient=Ik;Xt.GeminiNextGenAPIClientError=_r;Xt.APIError=Rn;Xt.APIConnectionError=$h;Xt.APIConnectionTimeoutError=ak;Xt.APIUserAbortError=Pm;Xt.NotFoundError=dk;Xt.ConflictError=hk;Xt.RateLimitError=pk;Xt.BadRequestError=lk;Xt.AuthenticationError=ck;Xt.InternalServerError=mk;Xt.PermissionDeniedError=uk;Xt.UnprocessableEntityError=fk;Xt.toFile=Z9;Xt.Interactions=Ek;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hB(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function fB(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function pB(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function mB(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function gB(t,e,n){const r={};if(h(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=h(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&p(e,["displayName"],s),h(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=h(t,["epochCount"]);e!==void 0&&i!=null&&p(e,["tuningTask","hyperparameters","epochCount"],i);const o=h(t,["learningRateMultiplier"]);if(o!=null&&p(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),h(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=h(t,["batchSize"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","batchSize"],a);const c=h(t,["learningRate"]);if(e!==void 0&&c!=null&&p(e,["tuningTask","hyperparameters","learningRate"],c),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function yB(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const y=h(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec"],Z_(y))}else if(s==="PREFERENCE_TUNING"){const y=h(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec"],Z_(y))}const i=h(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&p(e,["tunedModelDisplayName"],i);const o=h(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);let a=h(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const y=h(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(a==="PREFERENCE_TUNING"){const y=h(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let c=h(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=h(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(c==="PREFERENCE_TUNING"){const y=h(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let u=h(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const y=h(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(u==="PREFERENCE_TUNING"){const y=h(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let d=h(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=h(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(d==="PREFERENCE_TUNING"){const y=h(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(h(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=h(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=h(t,["beta"]);return e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),r}function vB(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=h(t,["trainingDataset"]);i!=null&&AB(i);const o=h(t,["config"]);return o!=null&&gB(o,n),n}function xB(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=h(t,["trainingDataset"]);i!=null&&NB(i,n,e);const o=h(t,["config"]);return o!=null&&yB(o,n,e),n}function wB(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function _B(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function bB(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=h(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function EB(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=h(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function TB(t,e){const n={},r=h(t,["config"]);return r!=null&&bB(r,n),n}function IB(t,e){const n={},r=h(t,["config"]);return r!=null&&EB(r,n),n}function SB(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=h(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Sk(a))),p(n,["tuningJobs"],o)}return n}function kB(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=h(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Lm(a))),p(n,["tuningJobs"],o)}return n}function CB(t,e){const n={},r=h(t,["name"]);r!=null&&p(n,["model"],r);const s=h(t,["name"]);return s!=null&&p(n,["endpoint"],s),n}function AB(t,e){const n={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=h(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(n,["examples","examples"],s)}return n}function NB(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=h(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=h(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let i=h(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=h(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=h(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(h(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Sk(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["state"]);i!=null&&p(n,["state"],zS(i));const o=h(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=h(t,["tuningTask","startTime"]);a!=null&&p(n,["startTime"],a);const c=h(t,["tuningTask","completeTime"]);c!=null&&p(n,["endTime"],c);const u=h(t,["updateTime"]);u!=null&&p(n,["updateTime"],u);const d=h(t,["description"]);d!=null&&p(n,["description"],d);const m=h(t,["baseModel"]);m!=null&&p(n,["baseModel"],m);const g=h(t,["_self"]);return g!=null&&p(n,["tunedModel"],CB(g)),n}function Lm(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["state"]);i!=null&&p(n,["state"],zS(i));const o=h(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=h(t,["startTime"]);a!=null&&p(n,["startTime"],a);const c=h(t,["endTime"]);c!=null&&p(n,["endTime"],c);const u=h(t,["updateTime"]);u!=null&&p(n,["updateTime"],u);const d=h(t,["error"]);d!=null&&p(n,["error"],d);const m=h(t,["description"]);m!=null&&p(n,["description"],m);const g=h(t,["baseModel"]);g!=null&&p(n,["baseModel"],g);const y=h(t,["tunedModel"]);y!=null&&p(n,["tunedModel"],y);const b=h(t,["preTunedModel"]);b!=null&&p(n,["preTunedModel"],b);const x=h(t,["supervisedTuningSpec"]);x!=null&&p(n,["supervisedTuningSpec"],x);const w=h(t,["preferenceOptimizationSpec"]);w!=null&&p(n,["preferenceOptimizationSpec"],w);const v=h(t,["tuningDataStats"]);v!=null&&p(n,["tuningDataStats"],v);const _=h(t,["encryptionSpec"]);_!=null&&p(n,["encryptionSpec"],_);const T=h(t,["partnerModelTuningSpec"]);T!=null&&p(n,["partnerModelTuningSpec"],T);const P=h(t,["customBaseModel"]);P!=null&&p(n,["customBaseModel"],P);const L=h(t,["experiment"]);L!=null&&p(n,["experiment"],L);const B=h(t,["labels"]);B!=null&&p(n,["labels"],B);const k=h(t,["outputUri"]);k!=null&&p(n,["outputUri"],k);const I=h(t,["pipelineJob"]);I!=null&&p(n,["pipelineJob"],I);const A=h(t,["serviceAccount"]);A!=null&&p(n,["serviceAccount"],A);const N=h(t,["tunedModelDisplayName"]);N!=null&&p(n,["tunedModelDisplayName"],N);const U=h(t,["veoTuningSpec"]);return U!=null&&p(n,["veoTuningSpec"],U),n}function RB(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(t,["done"]);o!=null&&p(n,["done"],o);const a=h(t,["error"]);return a!=null&&p(n,["error"],a),n}function Z_(t,e){const n={},r=h(t,["gcsUri"]);r!=null&&p(n,["validationDatasetUri"],r);const s=h(t,["vertexDatasetResource"]);return s!=null&&p(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PB extends Ps{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mo(Cs.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:s});return i.baseModel=void 0,await this.tuneInternal(i)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),i=await this.tuneMldevInternal(s);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:Em.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=_B(e);return a=Ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>Lm(d))}else{const u=wB(e);return a=Ee("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>Sk(d))}}async listInternal(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=IB(e);return a=Ee("tuningJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=kB(d),g=new I_;return Object.assign(g,m),g})}else{const u=TB(e);return a=Ee("tunedModels",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=SB(d),g=new I_;return Object.assign(g,m),g})}}async cancel(e){var n,r,s,i;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=fB(e);return a=Ee("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=mB(d),g=new S_;return Object.assign(g,m),g})}else{const u=hB(e);return a=Ee("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=pB(d),g=new S_;return Object.assign(g,m),g})}}async tuneInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=xB(e,e);return i=Ee("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>Lm(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=vB(e);return i=Ee("tunedModels",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>RB(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MB{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const DB=1024*1024*8,LB=3,jB=1e3,FB=2,Kd="x-goog-upload-status";async function UB(t,e,n){var r;const s=await kk(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Kd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function VB(t,e,n){var r;const s=await kk(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Kd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=jS(i),a=new W0;return Object.assign(a,o),a}async function kk(t,e,n){var r,s;let i=0,o=0,a=new Tm(new Response),c="upload";for(i=t.size;o<i;){const u=Math.min(DB,i-o),d=t.slice(o,o+u);o+u>=i&&(c+=", finalize");let m=0,g=jB;for(;m<LB&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(o),"Content-Length":String(u)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[Kd]));)m++,await BB(g),g=g*FB;if(o+=u,((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Kd])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function OB(t){return{size:t.size,type:t.type}}function BB(t){return new Promise(e=>setTimeout(e,t))}class zB{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await UB(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await VB(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await OB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GB{create(e,n,r){return new $B(e,n,r)}}class $B{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eb="x-goog-api-key";class HB{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(eb)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(eb,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qB="gl-node/";class ty{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Xt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=B3(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new HB(this.apiKey);this.apiClient=new OO({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:qB+"web",uploader:new zB,downloader:new MB}),this.models=new i9(this.apiClient),this.live=new ZO(this.apiClient,s,new GB),this.batches=new gU(this.apiClient),this.chats=new QU(this.models,this.apiClient),this.caches=new KU(this.apiClient),this.files=new a6(this.apiClient),this.operations=new o9(this.apiClient),this.authTokens=new b9(this.apiClient),this.tunings=new PB(this.apiClient),this.fileSearchStores=new N9(this.apiClient)}}const jm="fanra_api_cd_",ny=t=>t&&t.length>5?t.slice(-8):"unknown",Go=t=>{if(!t)return!0;const e=ny(t),n=localStorage.getItem(`${jm}${e}`);if(n){const r=parseInt(n,10);if(Date.now()<r)return console.warn(`Skipping key ending in ...${e} (Cooldown active)`),!0;localStorage.removeItem(`${jm}${e}`)}return!1},Vc=t=>{if(!t)return;const e=ny(t),n=Date.now()+24*60*60*1e3;localStorage.setItem(`${jm}${e}`,n.toString()),console.warn(`Key ending in ...${e} marked for 24h cooldown due to Quota Limit.`)},WB=(t,e)=>{const n=t/e;return[{label:"1:1",value:1},{label:"3:4",value:.75},{label:"4:3",value:1.33},{label:"9:16",value:.5625},{label:"16:9",value:1.7778}].reduce((i,o)=>Math.abs(o.value-n)<Math.abs(i.value-n)?o:i).label},KB=(t,e,n,r)=>{const s=WB(e,n);switch(t){case kn.BACKGROUND_REMOVER:return{model:"gemini-2.5-flash-image",prompt:"Edit this image. Your task is to keep the foreground subject EXACTLY as it is. Do not alter the subject's face, body, clothing, lighting, or resolution. Do not 'redraw' or 'regenerate' the subject. Simply COPY the main subject and place it against a solid bright Green background (Hex Code #00FF00). If the subject is cropped in the original, keep it cropped. Do not add new details.",config:{imageConfig:{aspectRatio:s}}};case kn.HD_UPSCALE:return{model:"gemini-3-pro-image-preview",prompt:"Upscale this image to high definition (4K quality). Sharpen all details and improve lighting. IMPORTANT: Keep the image composition, colors, and BACKGROUND exactly the same as the original. Do not remove the background. Do not change the subject's identity.",config:{imageConfig:{aspectRatio:s,imageSize:"4K"}}};case kn.CREATIVE_REMIX:return{model:"gemini-2.5-flash-image",prompt:r||"Make a creative cyberpunk variation of this image.",config:{imageConfig:{aspectRatio:s}}};case kn.COLORIZE:return{model:"gemini-2.5-flash-image",prompt:"Colorize this black and white image realistically. Keep the subject and background details exactly the same, just add natural colors. Do not change the content.",config:{imageConfig:{aspectRatio:s}}};case kn.SKETCH_TO_REAL:return{model:"gemini-2.5-flash-image",prompt:"Turn this sketch or drawing into a photorealistic image. Keep the composition and subject exactly as drawn, but make it look like a high-quality photograph.",config:{imageConfig:{aspectRatio:s}}};default:throw new Error("Unknown tool type")}},JB=async t=>{const{tool:e,image:n,prompt:r,apiKeys:s}=t,i=KB(e,n.width,n.height,r);let o=[...s||[]];o.push("AIzaSyDzwJLdjFvu5jrsF_HYtYSWLPSoQc2JYzA"),o=Array.from(new Set(o.filter(u=>!!u&&!Go(u))));let a=!1,c=null;for(let u=0;u<o.length;u++){const d=o[u];try{const g=await new ty({apiKey:d}).models.generateContent({model:i.model,contents:{parts:[{inlineData:{mimeType:n.mimeType,data:n.data}},{text:i.prompt}]},config:i.config});if(g.candidates&&g.candidates[0].content.parts){for(const y of g.candidates[0].content.parts)if(y.inlineData&&y.inlineData.data)return y.inlineData.data}throw new Error("No image data returned from Gemini.")}catch(m){console.warn(`Key ending in ...${d.slice(-4)} failed.`),c=m;const g=(m.message||"").toLowerCase(),y=g.includes("429")||g.includes("quota")||g.includes("exhausted")||g.includes("503");if(y&&Vc(d),u===o.length-1&&y&&!a)try{const b=await Xj();if(b.length>0){const x=b.filter(w=>!o.includes(w)&&!Go(w));o.push(...x),a=!0;continue}}catch{console.error("Failed to fetch community keys")}}}throw c||new Error("All API keys (Personal, System, and Community) failed or are in cooldown.")},YB={name:"searchWeather",description:"Get REAL-TIME weather data for a specific city.",parameters:{type:On.OBJECT,properties:{city:{type:On.STRING,description:"The name of the city."}},required:["city"]}},QB={name:"searchCountryFact",description:"Get detailed facts about a country (Capital, Population, Currency, Flag).",parameters:{type:On.OBJECT,properties:{country_name:{type:On.STRING,description:"The name of the country."}},required:["country_name"]}},XB={name:"searchGoogle",description:"Search Google for latest news or trending info.",parameters:{type:On.OBJECT,properties:{query:{type:On.STRING,description:"The search keywords."}},required:["query"]}},Wh=async(t,e)=>{if(!e)return t;const n=t.split(/(\s+)/);let r="";for(const s of n)r+=s,e(r),await new Promise(i=>setTimeout(i,Math.random()*10+5));return t},ZB=async(t,e,n,r)=>{var s,i,o;try{console.log("Attempting OpenRouter Fallback...");const a=[{role:"system",content:n},...e.map(m=>{var g;return{role:m.role==="model"?"assistant":"user",content:((g=m.parts.find(y=>y.text))==null?void 0:g.text)||""}}).filter(m=>m.content)],c=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:"google/gemini-2.0-flash-lite-preview-02-05:free",messages:a,stream:!1})});if(c.status===429)throw Vc(t),new Error("OpenRouter Quota Exceeded");if(!c.ok)throw new Error(`OpenRouter Error: ${c.status}`);const d=((o=(i=(s=(await c.json()).choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:o.content)||"";return r&&d&&await Wh(d,r),d}catch(a){throw console.error("OpenRouter Failed:",a),a}},e8=async(t,e,n,r)=>{var s,i,o;try{console.log("Attempting Groq Fallback...");const a=[{role:"system",content:n},...e.map(m=>{var g;return{role:m.role==="model"?"assistant":"user",content:((g=m.parts.find(y=>y.text))==null?void 0:g.text)||""}}).filter(m=>m.content)],c=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:"llama3-8b-8192",messages:a,stream:!1})});if(c.status===429)throw Vc(t),new Error("Groq Quota Exceeded");if(!c.ok)throw new Error(`Groq Error: ${c.status}`);const d=((o=(i=(s=(await c.json()).choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:o.content)||"";return r&&d&&await Wh(d,r),d}catch(a){throw console.error("Groq Failed:",a),a}},t8=async(t,e,n,r)=>{try{console.log("Attempting Hugging Face Fallback...");let s=`<start_of_turn>system
${n}<end_of_turn>
`;e.forEach(c=>{var d;const u=((d=c.parts.find(m=>m.text))==null?void 0:d.text)||"";u&&(s+=`<start_of_turn>${c.role==="model"?"model":"user"}
${u}<end_of_turn>
`)}),s+=`<start_of_turn>model
`;const i=await fetch("https://api-inference.huggingface.co/models/google/gemma-1.1-7b-it",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:s,parameters:{max_new_tokens:512,return_full_text:!1,temperature:.7}})});if(i.status===429)throw Vc(t),new Error("HuggingFace Quota Exceeded");if(!i.ok)throw new Error(`Hugging Face Error: ${i.status}`);const o=await i.json();let a=Array.isArray(o)&&o.length>0?o[0].generated_text:o.generated_text||"";return r&&a&&await Wh(a,r),a}catch(s){throw console.error("Hugging Face Failed:",s),s}},n8=async(t,e,n=[],r="id",s=[],i,o=!1,a=!1,c,u,d,m,g)=>{var P,L,B,k;const y=n.slice(-10).map(I=>({role:I.role,parts:[{text:I.text}]})),b=[];t?b.push({text:t}):s.length>0&&b.push({text:"Describe these images or answer based on them."}),s.length>0&&s.forEach(I=>b.push({inlineData:{mimeType:I.mimeType,data:I.data}}));const x=[...y,{role:"user",parts:b}],w=!!(c!=null&&c.apiKey&&c.cx),v=[{functionDeclarations:[YB,QB]}];w&&v[0].functionDeclarations.push(XB);const _=`
        Nama lo: Fanra.
        Sifat: Cool, santai, & solutif. Gaya ngomong: lo-gue, normal, asik.
        
        ATURAN MUTLAK:
        1. JANGAN PERNAH MENCARI DI WIKIPEDIA ATAU DATABASE LAMA.
        2. Gunakan pengetahuan lo sendiri (Generative AI) untuk menjawab pertanyaan.
        3. Jika user tanya hal sepele ("hmm", "halo", "apa kabar"), jawab dengan santai dan natural layaknya teman. Jangan berikan definisi kamus.
        4. Jika user tanya fakta spesifik (misal: cuaca, negara), gunakan function calling yang tersedia.
    `;let T=[...e||[]];T.push("AIzaSyDzwJLdjFvu5jrsF_HYtYSWLPSoQc2JYzA"),T=Array.from(new Set(T.filter(I=>!!I&&!Go(I))));for(const I of T){if(u!=null&&u.aborted)throw new Error("Request cancelled by user");try{const U=(k=(B=(L=(P=(await new ty({apiKey:I}).models.generateContent({model:"gemini-3-flash-preview",contents:x,config:{systemInstruction:_,tools:v}})).candidates)==null?void 0:P[0])==null?void 0:L.content)==null?void 0:B.parts)==null?void 0:k.find(R=>R.text);return U&&U.text?(await Wh(U.text,i),{text:U.text,source:"gemini"}):{text:"...",source:"gemini"}}catch(A){console.warn(`Gemini Key failed: ${ny(I)}`);const N=(A.message||"").toLowerCase();(N.includes("429")||N.includes("quota")||N.includes("exhausted"))&&Vc(I)}}if(!Go(d)){if(u!=null&&u.aborted)throw new Error("Request cancelled");try{return{text:await ZB(d,x,_,i),source:"openrouter"}}catch{console.warn("OpenRouter Failed.")}}if(!Go(g)){if(u!=null&&u.aborted)throw new Error("Request cancelled");try{return{text:await e8(g,x,_,i),source:"groq"}}catch{console.warn("Groq Failed.")}}if(!Go(m)){if(u!=null&&u.aborted)throw new Error("Request cancelled");try{return{text:await t8(m,x,_,i),source:"huggingface"}}catch{console.warn("Hugging Face Failed.")}}throw new Error("All AI services unavailable. Check your API Keys.")},r8=t=>new Promise((e,n)=>{const r=new Image;r.src=`data:image/png;base64,${t}`,r.crossOrigin="Anonymous",r.onload=()=>{const s=document.createElement("canvas");s.width=r.width,s.height=r.height;const i=s.getContext("2d");if(!i){n(new Error("Could not get canvas context"));return}i.drawImage(r,0,0);const o=i.getImageData(0,0,s.width,s.height),a=o.data;for(let c=0;c<a.length;c+=4){const u=a[c],d=a[c+1],m=a[c+2],g=Math.max(u,m);let y=d-g;const b=10,x=60;if(y>b){const w=1-Math.max(0,Math.min(1,(y-b)/(x-b)));a[c+3]=Math.floor(255*w),d>g&&(a[c+1]=g)}}i.putImageData(o,0,0),e(s.toDataURL("image/png",1).split(",")[1])},r.onerror=s=>n(new Error("Failed to load image for processing"))}),s8=(t,e="image/png")=>{const n=t.replace(/[\n\r]/g,"").trim(),r=atob(n),s=new Array(r.length);for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);const i=new Uint8Array(s);return new Blob([i],{type:e})},i8=async(t,e)=>{const n=new FormData,r=s8(t);n.append("image_file",r,"image.png"),n.append("size","auto");try{const s=await fetch("https://api.remove.bg/v1.0/removebg",{method:"POST",headers:{"X-Api-Key":e},body:n});if(!s.ok){let o="Failed to remove background via Remove.bg";try{const a=await s.json();a.errors&&a.errors[0]&&(o=a.errors[0].title)}catch{o=`Remove.bg Error: ${s.statusText}`}throw new Error(o)}const i=await s.blob();return new Promise((o,a)=>{const c=new FileReader;c.onloadend=()=>{const u=c.result;o(u.split(",")[1])},c.onerror=a,c.readAsDataURL(i)})}catch(s){throw console.error("Remove.bg Service Error:",s),s}};const o8=({onImageSelect:t,language:e})=>{const n=j.useRef(null),[r,s]=j.useState(!1),i=Uc[e],o=m=>{if(!m.type.startsWith("image/")){$e(i.invalidImage);return}const g=new FileReader;g.onloadend=()=>{const y=g.result,b=new Image;b.onload=()=>{const x=document.createElement("canvas");x.width=b.width,x.height=b.height;const w=x.getContext("2d");if(!w)return;w.drawImage(b,0,0);const v="image/png",T=x.toDataURL(v).split(",")[1];t(T,v,b.width,b.height)},b.src=y},g.readAsDataURL(m)},a=m=>{var y;const g=(y=m.target.files)==null?void 0:y[0];g&&o(g)},c=m=>{m.preventDefault(),m.stopPropagation(),s(!0)},u=m=>{m.preventDefault(),m.stopPropagation(),s(!1)},d=m=>{var y;m.preventDefault(),m.stopPropagation(),s(!1);const g=(y=m.dataTransfer.files)==null?void 0:y[0];g&&o(g)};return l.jsxs("div",{className:`w-full max-w-xl mx-auto border-2 border-dashed rounded-2xl p-12 flex flex-col items-center justify-center text-center cursor-pointer transition-all duration-300 group bg-white ${r?"border-primary bg-slate-50 scale-[1.02] shadow-xl":"border-slate-300 hover:border-primary hover:bg-slate-50"}`,onClick:()=>{var m;return(m=n.current)==null?void 0:m.click()},onDragOver:c,onDragLeave:u,onDrop:d,children:[l.jsx("input",{type:"file",ref:n,onChange:a,className:"hidden",accept:"image/png, image/jpeg, image/webp"}),l.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 transition-transform duration-300 ${r?"scale-110 bg-white shadow-md":"bg-slate-50 group-hover:scale-110"}`,children:l.jsx(bs,{className:`w-6 h-6 ${r?"text-primary":"text-slate-400 group-hover:text-primary"}`})}),l.jsx("h3",{className:`text-lg font-bold mb-2 transition-colors ${r?"text-primary":"text-slate-700 group-hover:text-primary"}`,children:r?i.dropHere:i.uploadTitle}),l.jsx("p",{className:"text-slate-500 text-sm",children:i.uploadDesc})]})},tb=[{label:"Transparent",value:null,hex:"transparent"},{label:"White",value:"#FFFFFF",hex:"#FFFFFF"},{label:"Black",value:"#000000",hex:"#000000"},{label:"Red",value:"#DB2828",hex:"#DB2828"},{label:"Blue",value:"#2185D0",hex:"#2185D0"},{label:"Green",value:"#21BA45",hex:"#21BA45"},{label:"Yellow",value:"#FBBD08",hex:"#FBBD08"}],a8=({originalImage:t,resultImageBase64:e,isProcessing:n,processingText:r,onReset:s,language:i})=>{const[o,a]=j.useState(50),[c,u]=j.useState(!1),[d,m]=j.useState(null),g=j.useRef(null),y=j.useRef(null),b=Uc[i],x=()=>{if(!e)return;if(!d){const k=document.createElement("a");k.href=`data:image/png;base64,${e}`,k.download="pixelmagic-edited.png",document.body.appendChild(k),k.click(),document.body.removeChild(k);return}const P=document.createElement("canvas"),L=P.getContext("2d"),B=new Image;B.onload=()=>{if(P.width=B.width,P.height=B.height,L){L.fillStyle=d,L.fillRect(0,0,P.width,P.height),L.drawImage(B,0,0);const k=document.createElement("a");k.href=P.toDataURL("image/png"),k.download="pixelmagic-edited-bg.png",document.body.appendChild(k),k.click(),document.body.removeChild(k)}},B.src=`data:image/png;base64,${e}`},w=j.useCallback(()=>u(!0),[]),v=j.useCallback(()=>u(!1),[]),_=j.useCallback(P=>{if(!c||!g.current)return;const{left:L,width:B}=g.current.getBoundingClientRect();let k;"touches"in P?k=P.touches[0].clientX:k=P.clientX;const I=(k-L)/B*100;a(Math.min(100,Math.max(0,I)))},[c]);j.useEffect(()=>(window.addEventListener("mousemove",_),window.addEventListener("mouseup",v),window.addEventListener("touchmove",_),window.addEventListener("touchend",v),()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",_),window.removeEventListener("touchend",v)}),[_,v]);const T=()=>d?{backgroundColor:d}:{backgroundColor:"#f8fafc",backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"};return l.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6 animate-fade-in pb-10",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[l.jsx("h2",{className:"text-xl font-bold text-primary self-start md:self-auto",children:n?l.jsxs("span",{className:"flex items-center gap-2",children:[b.processing,l.jsxs("span",{className:"flex gap-1",children:[l.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce"}),l.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-100"}),l.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-200"})]})]}):b.resultComparison}),!n&&l.jsxs("div",{className:"flex items-center gap-3 self-end md:self-auto",children:[l.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-slate-500 hover:text-primary transition-colors hover:bg-slate-50 rounded-lg active:scale-95 duration-200",children:b.reset}),e&&l.jsxs("button",{onClick:x,className:"flex items-center gap-2 bg-primary hover:bg-slate-800 text-white px-5 py-2 rounded-lg font-semibold text-sm transition-all shadow-lg shadow-slate-900/10 active:scale-95 hover:shadow-xl hover:-translate-y-0.5",children:[l.jsx(AT,{className:"w-4 h-4"}),b.download," ",d?"JPG":"PNG"]})]})]}),l.jsxs("div",{className:"relative w-full h-[60vh] rounded-xl overflow-hidden border border-slate-200 shadow-xl shadow-slate-200/50 bg-white select-none mx-auto group",ref:g,children:[n&&l.jsxs("div",{className:"absolute inset-0 z-50 bg-white/90 backdrop-blur-md flex flex-col items-center justify-center transition-all duration-300",children:[l.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,className:"absolute inset-0 w-full h-full object-contain opacity-10 blur-md scale-105",alt:"Background Blur"}),l.jsxs("div",{className:"relative z-10 flex flex-col items-center p-8 bg-white/80 rounded-2xl shadow-sm border border-slate-100/50 backdrop-blur-xl",children:[l.jsxs("div",{className:"relative mb-6",children:[l.jsx("div",{className:"w-16 h-16 border-4 border-slate-100 rounded-full"}),l.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"})})]}),l.jsx("p",{className:"font-bold text-lg tracking-wide animate-shimmer-text",children:r||"..."})]})]}),!n&&e&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center transition-colors duration-300",style:T(),children:l.jsx("img",{src:`data:image/png;base64,${e}`,alt:"Result",className:"max-w-full max-h-full object-contain animate-fade-in",draggable:!1})}),l.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden",style:{clipPath:`inset(0 ${100-o}% 0 0)`},children:[l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white/95",children:l.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain",draggable:!1})}),l.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur text-primary text-[10px] font-bold px-2 py-1 rounded shadow-sm border border-slate-100 select-none",children:b.original})]}),l.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white z-30 cursor-ew-resize shadow-[0_0_10px_rgba(0,0,0,0.2)] hover:bg-blue-100 transition-colors",style:{left:`${o}%`},onMouseDown:w,onTouchStart:w,children:l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg border border-slate-100 flex items-center justify-center text-primary transform hover:scale-110 active:scale-95 transition-all duration-200 cursor-ew-resize",children:l.jsx(wN,{className:"w-4 h-4"})})}),l.jsx("div",{className:"absolute top-4 right-4 bg-primary/90 backdrop-blur text-white text-[10px] font-bold px-2 py-1 rounded shadow-sm z-20 select-none",children:b.result})]}),!n&&!e&&l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain"})})]}),!n&&e&&l.jsxs("div",{className:"flex flex-col items-center gap-3 animate-fade-in-up",children:[l.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:b.bgColor}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-3 bg-white p-3 rounded-2xl border border-slate-200 shadow-sm transition-all hover:shadow-md",children:[tb.map(P=>l.jsx("button",{onClick:()=>m(P.value),className:`w-10 h-10 rounded-full border-2 transition-all duration-200 hover:scale-110 active:scale-95 flex items-center justify-center ${d===P.value?"border-primary ring-2 ring-primary/20 scale-110":"border-slate-200 hover:border-slate-300"}`,style:{backgroundColor:P.value||"white"},title:P.label,children:P.value===null&&l.jsx("div",{className:"w-full h-full rounded-full opacity-40",style:{backgroundImage:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 0 4px, 4px -4px, -4px 0px"}})},P.label)),l.jsx("div",{className:"w-px h-8 bg-slate-200 mx-2 self-center"}),l.jsxs("div",{className:"relative group",children:[l.jsx("input",{type:"color",ref:y,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:P=>m(P.target.value),value:d||"#ffffff"}),l.jsx("button",{className:`w-10 h-10 rounded-full border-2 flex items-center justify-center bg-white hover:bg-slate-50 transition-all duration-200 hover:scale-110 active:scale-95 ${d&&!tb.find(P=>P.value===d)?"border-primary ring-2 ring-primary/20":"border-slate-200 group-hover:border-slate-300"}`,title:"Custom Color",children:l.jsx("span",{className:"text-xl leading-none pb-1 text-slate-400 group-hover:text-primary transition-colors",children:"+"})})]})]})]}),!n&&!e&&l.jsx("p",{className:"text-center text-slate-400 text-xs animate-fade-in",children:b.uploadPrompt})]})},l8=({isOpen:t,onClose:e,removeBgKey:n,onSaveRemoveBgKey:r,storedApiKeys:s,onAddApiKey:i,onDeleteApiKey:o,onToggleApiKey:a,onSelectGoogleKey:c,googleSearchKey:u,googleSearchCx:d,onSaveGoogleSearch:m,openRouterKey:g,onSaveOpenRouterKey:y,huggingFaceKey:b,onSaveHuggingFaceKey:x,groqKey:w,onSaveGroqKey:v,language:_})=>{const[T,P]=j.useState(n),[L,B]=j.useState(u),[k,I]=j.useState(d),[A,N]=j.useState(g),[U,R]=j.useState(b),[D,M]=j.useState(w),[H,ye]=j.useState(""),[re,ne]=j.useState(!1),[Y,ue]=j.useState(!1),[q,z]=j.useState(!1),X=Uc[_];if(j.useEffect(()=>{P(n),B(u),N(g),R(b),M(w),I(!d&&!k?"3040e7dd9eac6414b":d),t||(ne(!1),ye(""),ue(!1))},[n,u,d,g,b,w,t]),!t)return null;const le=async()=>{const we=H.trim();if(!(!we||!re)){if(!we.startsWith("AIza")){$e("Format Key salah. Harus dimulai dengan 'AIza'.");return}if(we.length!==39){$e(`Panjang Key salah (${we.length}). Harusnya 39 karakter.`);return}if(s.some(Se=>Se.key===we)){$e("Key ini sudah ada di daftar.");return}z(!0);try{const ke=await new ty({apiKey:we}).models.generateContent({model:"gemini-3-flash-preview",contents:"Ping"});if(!ke||!ke.candidates||ke.candidates.length===0)throw new Error("API Valid, but response empty.");i(we,Y),ye(""),ue(!1),$e("Key berhasil diverifikasi & disimpan!")}catch(Se){console.error("Key Validation Failed:",Se);const ke=(Se.message||"").toLowerCase();ke.includes("400")||ke.includes("invalid_argument")?$e("Key DITOLAK oleh Google (Invalid)."):ke.includes("403")?$e("Key valid tapi tidak punya izin (Billing/Project problem)."):ke.includes("404")?$e("Model tidak ditemukan."):$e("Gagal memvalidasi Key. "+(Se.message||"Unknown error"))}finally{z(!1)}}},ae=()=>{r(T.trim()),m(L.trim(),k.trim()),y(A.trim()),x(U.trim()),v(D.trim()),e(),$e("Pengaturan disimpan!")},Ae=({value:we,hasSystemDefault:Se=!0})=>we&&we.trim().length>0?l.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-md border border-green-200",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"})," Key Pribadi (Custom)"]}):Se?l.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-blue-100 text-blue-700 px-2 py-0.5 rounded-md border border-blue-200",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"})," Key Sistem (Bawaan)"]}):l.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-slate-100 text-slate-500 px-2 py-0.5 rounded-md border border-slate-200",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full"})," Nonaktif"]});return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-fade-in-up ring-1 ring-slate-900/5",children:[l.jsxs("div",{className:"bg-white px-6 py-5 border-b border-slate-100 flex items-center justify-between sticky top-0 z-10",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 border border-slate-100 flex items-center justify-center text-primary",children:l.jsx(tc,{className:"w-5 h-5"})})," ",X.settingsTitle]}),l.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-50 hover:bg-slate-100 text-slate-400 hover:text-slate-800 transition-all",children:""})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-slate-50",children:[l.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/18889/18889881.png",className:"w-6 h-6 object-contain",alt:"Gemini"})," ",X.googleApiTitle," (Utama)"]}),l.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:X.googleApiDesc})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"flex items-center justify-between mb-3 px-1",children:l.jsxs("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[X.keysStored,l.jsx("span",{className:"bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded text-[10px]",children:s.length})]})}),s.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center py-6 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50 mb-4",children:[l.jsx(tc,{className:"w-6 h-6 text-slate-300 mb-2"}),l.jsx("p",{className:"text-xs text-slate-400 font-medium text-center",children:X.noKeysYet})]}):l.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto custom-scrollbar pr-1 mb-4",children:s.map((we,Se)=>l.jsxs("div",{className:`flex items-center justify-between p-3 bg-white border rounded-xl shadow-sm transition-all ${we.isActive!==!1?"border-slate-200":"border-slate-100 bg-slate-50/50 opacity-70"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 text-xs font-bold border ${we.isShared?"bg-green-50 text-green-600 border-green-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:we.isShared?l.jsx(ec,{className:"w-3.5 h-3.5"}):Se+1}),l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("span",{className:"text-xs font-mono text-slate-700 font-bold tracking-tight",children:[" ",we.key.slice(-4)]}),l.jsx("span",{className:`text-[9px] font-bold ${we.isActive!==!1?"text-green-500":"text-slate-400"}`,children:we.isActive!==!1?" "+X.active:" "+X.inactive})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{onClick:ke=>ke.stopPropagation(),children:l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer scale-75",children:[l.jsx("input",{type:"checkbox",className:"sr-only peer",checked:we.isActive!==!1,onChange:ke=>a(we.key,ke.target.checked)}),l.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-green-500"})]})}),l.jsx("button",{onClick:()=>o(we.key),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg",children:l.jsx(gr,{className:"w-3.5 h-3.5"})})]})]},Se))})]}),l.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer w-fit mb-3",children:[l.jsx("input",{type:"checkbox",checked:re,onChange:we=>ne(we.target.checked),className:"w-3.5 h-3.5 text-blue-600 rounded border-slate-300 focus:ring-blue-500"}),l.jsx("span",{className:"text-[10px] text-slate-500 font-medium",children:"Saya bertanggung jawab atas penggunaan Key ini."})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"password",value:H,onChange:we=>ye(we.target.value),placeholder:re?X.addKeyPlaceholder:"Centang dulu di atas...",disabled:!re||q,maxLength:50,className:"flex-1 px-3 py-2 bg-white border rounded-lg text-xs outline-none transition-colors disabled:bg-slate-100 border-slate-200 focus:border-blue-500"}),l.jsx("button",{onClick:le,disabled:!re||!H.trim()||q,className:"px-4 py-2 bg-slate-900 text-white rounded-lg text-xs font-bold hover:bg-slate-800 disabled:bg-slate-300 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:q?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-3 h-3 border-2 border-white/50 border-t-white rounded-full animate-spin"}),"Checking..."]}):"+ Add"})]}),l.jsx("div",{className:"mt-3 flex justify-center",children:l.jsxs("button",{onClick:c,className:"text-[10px] font-bold text-blue-600 hover:underline flex items-center gap-1",children:[X.selectKeyBtn," "]})})]})]}),l.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[l.jsxs("div",{className:"mb-5 border-b border-slate-100 pb-4",children:[l.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[l.jsx("div",{className:"p-1.5 bg-emerald-50 rounded-lg",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/11681/11681335.png",className:"w-5 h-5 object-contain",alt:"API"})})," Integrasi API Eksternal"]}),l.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:"Kelola key untuk layanan Fallback (Cadangan) dan Tools tambahan."})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(Td,{className:"w-3.5 h-3.5 text-slate-400"}),l.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Fallback AI (Cadangan Chat)"})]}),l.jsxs("div",{className:"space-y-4 pl-1",children:[l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"OpenRouter (Prioritas 2)"}),l.jsx(Ae,{value:A,hasSystemDefault:!0})]}),l.jsx("input",{type:"password",value:A,onChange:we=>N(we.target.value),placeholder:"sk-or-v1-...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-emerald-500/10 focus:border-emerald-500 outline-none transition-all font-mono"})]}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Groq API (Prioritas 3)"}),l.jsx(Ae,{value:D,hasSystemDefault:!0})]}),l.jsx("input",{type:"password",value:D,onChange:we=>M(we.target.value),placeholder:"gsk_...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-orange-500/10 focus:border-orange-500 outline-none transition-all font-mono"})]}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Hugging Face (Prioritas 4)"}),l.jsx(Ae,{value:U,hasSystemDefault:!0})]}),l.jsx("input",{type:"password",value:U,onChange:we=>R(we.target.value),placeholder:"hf_...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-yellow-500/10 focus:border-yellow-500 outline-none transition-all font-mono"})]})]})]}),l.jsx("div",{className:"h-px bg-slate-100 w-full"}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/6710/6710433.png",className:"w-4 h-4 object-contain",alt:"Tools"}),l.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Search & Tools"})]}),l.jsxs("div",{className:"space-y-4 pl-1",children:[l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-2",children:"Google Search API"}),l.jsx(Ae,{value:L,hasSystemDefault:!1})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("input",{type:"password",value:L,onChange:we=>B(we.target.value),placeholder:"API Key",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-blue-500 outline-none font-mono"}),l.jsx("input",{type:"text",value:k,onChange:we=>I(we.target.value),placeholder:"Search Engine ID (CX)",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-blue-500 outline-none font-mono"})]})]}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Remove.bg API"}),l.jsx("span",{className:"text-[9px] bg-green-100 text-green-700 px-1.5 rounded-md border border-green-200",children:"Aktif"})]}),l.jsx(Ae,{value:T,hasSystemDefault:!0})]}),l.jsx("input",{type:"password",value:T,onChange:we=>P(we.target.value),placeholder:"API Key Remove.bg...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-purple-500 outline-none font-mono"})]})]})]})]})]})]}),l.jsxs("div",{className:"p-5 border-t border-slate-100 bg-white flex items-center justify-end gap-3 shrink-0",children:[l.jsx("button",{onClick:e,className:"px-5 py-2.5 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded-xl font-bold text-sm transition-all",children:X.cancel}),l.jsxs("button",{onClick:ae,className:"px-6 py-2.5 bg-slate-900 hover:bg-slate-800 text-white rounded-xl font-bold text-sm shadow-lg shadow-slate-900/20 active:scale-95 transition-all flex items-center gap-2",children:[l.jsx(Es,{className:"w-4 h-4"}),X.save]})]})]})})},c8=({onLogin:t,language:e,onToggleLanguage:n,onClose:r})=>{const[s,i]=j.useState(!1),[o,a]=j.useState(null),c=async()=>{i(!0),a(null);try{const{user:u,credits:d,id:m}=await Kj();t(u,m,d)}catch(u){console.error(u),u.code==="auth/popup-closed-by-user"?a("Login dibatalkan."):a("Gagal login dengan Google. Coba lagi.")}finally{i(!1)}};return l.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center overflow-hidden bg-slate-50",children:[l.jsx("div",{className:"absolute inset-0 z-0 opacity-40 pointer-events-none",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),l.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),l.jsxs("div",{className:"relative z-10 w-full max-w-sm rounded-[2rem] shadow-2xl animate-fade-in-up border border-slate-200 overflow-hidden bg-white p-2",children:[l.jsx("div",{className:"absolute inset-0 opacity-[0.4] pointer-events-none",style:{backgroundImage:"linear-gradient(#f1f5f9 1px, transparent 1px), linear-gradient(90deg, #f1f5f9 1px, transparent 1px)",backgroundSize:"20px 20px"}}),r&&l.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 rounded-full text-slate-400 hover:bg-slate-100 hover:text-slate-900 transition-all z-20",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),l.jsxs("div",{className:"relative z-10 p-8 flex flex-col items-center text-center bg-white/80 backdrop-blur-sm rounded-[1.5rem]",children:[l.jsx("div",{className:"relative mb-6",children:l.jsx("div",{className:"w-20 h-20 bg-white border border-slate-100 rounded-3xl shadow-sm flex items-center justify-center transform hover:rotate-3 transition-transform duration-500",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra Logo",className:"w-10 h-10 object-contain"})})}),l.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Fanra AI Studio"}),l.jsx("p",{className:"text-slate-500 text-sm mb-8 leading-relaxed font-medium",children:"Masuk untuk menyimpan riwayat chat dan mengakses fitur kreatif."}),l.jsx("button",{onClick:c,disabled:s,className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-3.5 px-6 rounded-xl flex items-center justify-center gap-3 transition-all shadow-lg shadow-slate-900/20 active:scale-95 group disabled:opacity-70 disabled:cursor-not-allowed",children:s?l.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center p-0.5",children:l.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google",className:"w-full h-full"})}),l.jsx("span",{className:"text-sm",children:"Lanjutkan dengan Google"})]})}),o&&l.jsxs("div",{className:"mt-6 flex items-center gap-2 text-red-500 bg-red-50 px-4 py-2 rounded-lg text-xs font-bold animate-pulse",children:[l.jsx("span",{children:""})," ",o]}),l.jsx("div",{className:"mt-8 flex flex-col gap-1",children:l.jsx("span",{className:"text-[10px] text-slate-400 font-semibold uppercase tracking-wider",children:"Powered by Google"})})]})]})]})},u8=({isOpen:t,onClose:e,onNewChat:n,user:r,onLogout:s,onOpenLogin:i,language:o,tools:a,toolStatuses:c,onSelectTool:u,onExit:d,chatHistory:m=[],onLoadSession:g,currentSessionId:y})=>{const b=Uc[o],[x,w]=j.useState(!1),v=x?a:a.slice(0,3),_=j.useMemo(()=>{const P={};return[...m].sort((B,k)=>k.timestamp-B.timestamp).forEach(B=>{const k=B.sessionId||"legacy";P[k]||(P[k]=[]),P[k].push(B)}),Object.keys(P).map(B=>{var N,U;const k=P[B],I=k.slice().reverse().find(R=>R.role==="user"),A=k[0];return{id:B,title:I?I.text:(U=(N=k[0])==null?void 0:N.attachments)!=null&&U.length?"Image Analysis":"Percakapan Baru",timestamp:A.timestamp,preview:A.text}}).sort((B,k)=>k.timestamp-B.timestamp)},[m]),T=(P,L)=>{L?$e(b.toolLockedMsg):(u(P),window.innerWidth<768&&e())};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),l.jsx("div",{className:`
          fixed md:relative top-0 left-0 bottom-0 z-50 h-full
          bg-slate-900 text-slate-200
          overflow-hidden flex flex-col
          transition-[width,transform,opacity] duration-300 ease-in-out
          w-[280px]
          ${t?"translate-x-0 shadow-2xl":"-translate-x-full shadow-none"}
          md:transform-none md:shadow-none md:top-auto md:left-auto md:bottom-auto
          ${t?"md:w-[260px]":"md:w-0"}
        `,children:l.jsxs("div",{className:"w-[280px] md:w-[260px] h-full flex flex-col border-r border-slate-800 bg-slate-900",children:[l.jsxs("div",{className:"p-4 flex items-center justify-between h-14 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra Logo",className:"w-8 h-8 object-contain"}),l.jsx("span",{className:"font-bold text-white tracking-wide",children:"Fanra"})]}),l.jsx("button",{onClick:e,className:"md:hidden text-slate-400 hover:text-white p-1",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-3 py-2 custom-scrollbar space-y-4",children:[l.jsxs("button",{onClick:()=>{n(),window.innerWidth<768&&e()},className:"w-full flex items-center gap-3 bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-xl transition-all active:scale-95 border border-slate-700 shadow-sm group",children:[l.jsx("span",{className:"text-xl font-light group-hover:scale-110 transition-transform",children:"+"}),l.jsx("span",{className:"text-sm font-medium",children:b.newChat})]}),l.jsx("div",{className:"h-px bg-slate-800/50 mx-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Creative Tools"}),l.jsxs("div",{className:"space-y-1",children:[v.map(P=>{const L=c[P.id]!==!1,B=(r==null?void 0:r.isAdmin)||!1,k=!L&&!B;return l.jsxs("button",{onClick:()=>T(P,k),className:`w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all border border-transparent group relative
                                        ${k?"opacity-70 hover:bg-slate-800/50 cursor-pointer":"hover:bg-slate-800 hover:border-slate-700/50 active:scale-95 cursor-pointer"}
                                    `,children:[l.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 ${k?"bg-slate-800 grayscale":P.color.replace("bg-","bg-opacity-90 bg-")} shadow-sm`,children:l.jsx("div",{className:"scale-75 text-slate-800",children:P.icon})}),l.jsx("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:l.jsx("span",{className:`block text-xs font-bold truncate ${k?"text-slate-500":"text-slate-200 group-hover:text-white"}`,children:b[P.nameKey]})}),k&&l.jsx("div",{className:"absolute right-2",children:l.jsx(Ug,{className:"w-3 h-3 text-slate-500"})})]},P.id)}),l.jsxs("button",{onClick:()=>w(!x),className:"w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all hover:bg-slate-800 border border-transparent border-dashed hover:border-slate-700/50 group",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center shrink-0 bg-slate-800 text-slate-400",children:l.jsx(fh,{className:"w-4 h-4"})}),l.jsx("span",{className:"text-xs font-medium text-slate-400 group-hover:text-white",children:x?b.lessTools:b.moreTools})]})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase mb-2 mt-4",children:b.historyHeader}),l.jsx("div",{className:"space-y-1",children:r?_.length>0?_.map(P=>l.jsxs("button",{onClick:()=>{g(P.id),window.innerWidth<768&&e()},className:`w-full text-left px-4 py-2.5 rounded-lg truncate transition-all group border ${y===P.id?"bg-slate-800 text-white border-slate-700":"text-slate-400 hover:bg-slate-800/50 hover:text-slate-200 border-transparent"}`,children:[l.jsx("div",{className:"text-xs font-medium truncate",children:P.title}),l.jsxs("div",{className:"text-[9px] text-slate-600 mt-0.5 group-hover:text-slate-500",children:[new Date(P.timestamp).toLocaleDateString(),"  ",new Date(P.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},P.id)):l.jsx("p",{className:"px-4 py-2 text-xs text-slate-600 italic text-center border border-slate-800/50 rounded-lg",children:"Belum ada riwayat chat."}):l.jsx("p",{className:"px-4 py-2 text-xs text-slate-600 italic text-center",children:"Login untuk melihat riwayat."})})]})]}),l.jsxs("div",{className:"p-4 border-t border-slate-800 bg-slate-900 shrink-0",children:[d&&l.jsxs("button",{onClick:d,className:"w-full mb-4 py-2.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-xl font-bold text-xs uppercase tracking-wider transition-all flex items-center justify-center gap-2 border border-slate-700/50 hover:border-slate-600 group",children:[l.jsx(Zn,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Exit Studio"]}),r?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.photoURL?l.jsx("img",{src:r.photoURL,alt:r.name,className:"w-8 h-8 rounded-full object-cover border border-slate-700"}):l.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500 flex items-center justify-center text-xs font-bold text-white shrink-0",children:r.name.charAt(0).toUpperCase()}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-white truncate",title:r.name,children:r.name.length>20?r.name.substring(0,20)+"...":r.name}),l.jsx("p",{className:"text-xs text-slate-500 truncate",children:r.school})]})]}),l.jsxs("button",{onClick:s,className:"w-full py-2 text-xs font-medium text-slate-400 hover:text-red-400 hover:bg-red-900/10 rounded-lg transition-colors flex items-center justify-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),b.logOut]})]}):l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-xs text-slate-400 mb-3",children:b.loginToSave}),l.jsxs("button",{onClick:i,className:"w-full py-2.5 bg-white text-slate-900 font-bold rounded-xl text-sm hover:bg-slate-200 transition-colors shadow-lg active:scale-95 flex items-center justify-center gap-2",children:[l.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"G",className:"w-4 h-4"}),b.loginBtn]})]})]})]})})]})};class d8{constructor(e,n,r,s,i){this.x=e,this.y=n,this.vx=0,this.vy=0,this.radius=s,this.color=r,this.friction=.92,this.ease=i,this.dx=(Math.random()-.5)*80,this.dy=(Math.random()-.5)*80,this.angle=Math.random()*Math.PI*2,this.angleSpeed=.02+Math.random()*.03,this.wobbleRadius=15+Math.random()*25}update(e,n,r){if(r)this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction;else{this.angle+=this.angleSpeed;const s=Math.cos(this.angle)*this.wobbleRadius,i=Math.sin(this.angle)*this.wobbleRadius,o=e+this.dx+s,a=n+this.dy+i;this.x+=(o-this.x)*this.ease,this.y+=(a-this.y)*this.ease,this.vx=0,this.vy=0}}shatter(){const e=Math.random()*Math.PI*2,n=Math.random()*30+15;this.vx=Math.cos(e)*n,this.vy=Math.sin(e)*n}draw(e){e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2),e.fillStyle=this.color,e.fill()}}const h8=({onEnter:t})=>{const[e,n]=j.useState(!1),[r,s]=j.useState(!1),i=j.useRef(null),o=j.useRef(!1),a=j.useRef({x:window.innerWidth/2,y:window.innerHeight/2}),c=j.useRef([]);j.useEffect(()=>{setTimeout(()=>s(!0),300);const m=i.current;if(!m)return;const g=m.getContext("2d");if(!g)return;const y=()=>{m.width=window.innerWidth,m.height=window.innerHeight};window.addEventListener("resize",y),y();const b=T=>{a.current={x:T.clientX,y:T.clientY}};window.addEventListener("mousemove",b);const x=["#0f172a","#1e293b","#312e81","#1e1b4b","#4c1d95","#2563eb"],w=[];for(let T=0;T<15;T++){const P=Math.random()*30+20,L=x[Math.floor(Math.random()*x.length)],B=Math.random()*.08+.03;w.push(new d8(m.width/2,m.height/2,L,P,B))}c.current=w;let v;const _=()=>{g.clearRect(0,0,m.width,m.height),c.current.forEach(T=>{T.update(a.current.x,a.current.y,o.current),T.draw(g)}),v=requestAnimationFrame(_)};return _(),()=>{window.removeEventListener("resize",y),window.removeEventListener("mousemove",b),cancelAnimationFrame(v)}},[]);const u=()=>{o.current||(o.current=!0,c.current.forEach(m=>m.shatter()),setTimeout(()=>{o.current=!1},1500))},d=()=>{n(!0),setTimeout(()=>{t()},900)};return l.jsxs("div",{className:`fixed inset-0 z-[999] bg-white flex flex-col items-center justify-center overflow-hidden transition-transform duration-[900ms] cubic-bezier(0.76, 0, 0.24, 1) ${e?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none shadow-none"}`,onDoubleClick:u,children:[l.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none filter blur-[60px] opacity-80",children:l.jsx("canvas",{ref:i,className:"w-full h-full"})}),l.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.4] pointer-events-none mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),l.jsxs("div",{className:`relative z-10 flex flex-col items-center max-w-lg w-full text-center px-6 transition-all duration-1000 ease-out transform select-none ${r?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,children:[l.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-slate-900 mb-2 tracking-tighter",children:["FANRA",l.jsx("span",{className:"text-blue-600",children:"."})]}),l.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-400 mb-8 tracking-widest uppercase",children:"AI Studio"}),l.jsxs("p",{className:"text-slate-500 text-sm md:text-base font-medium leading-relaxed mb-16 max-w-xs mx-auto",children:["Ruang imajinasi tanpa batas. ",l.jsx("br",{}),l.jsx("span",{className:"text-slate-800",children:"Edit, Ciptakan, dan Berdiskusi."})]}),l.jsxs("button",{onClick:d,className:"group flex flex-col items-center gap-4 transition-all outline-none cursor-pointer",children:[l.jsx("div",{className:"w-16 h-16 rounded-full border border-slate-200 bg-white/80 backdrop-blur-sm flex items-center justify-center shadow-lg transition-all duration-500 group-hover:scale-110 group-hover:bg-white group-hover:border-slate-300 group-active:scale-95 group-hover:shadow-xl",children:l.jsx($n,{className:"w-6 h-6 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-600 transition-colors duration-300",children:"Open Studio"})]})]})]})},f8="3JEZ69gonQmxU83WxzidFCFf",p8="AIzaSyDzwJLdjFvu5jrsF_HYtYSWLPSoQc2JYzA",m8="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",g8="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",y8="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",v8="sb_publishable_ikw-BNV8Wu3qhNPuSti8Rg_7XmPMWqV",x8="",Cu=[{id:kn.BACKGROUND_REMOVER,nameKey:"toolBgRemove",descKey:"toolBgRemoveDesc",icon:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/593/593398.png",className:"w-8 h-8 object-contain",alt:"Hapus Background"}),color:"bg-blue-50",model:"gemini-2.5-flash-image",cost:1},{id:kn.HD_UPSCALE,nameKey:"toolUpscale",descKey:"toolUpscaleDesc",icon:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/17558/17558323.png",className:"w-8 h-8 object-contain",alt:"HD Upscale"}),color:"bg-amber-50",model:"gemini-2.5-flash-image",cost:3},{id:kn.CREATIVE_REMIX,nameKey:"toolRemix",descKey:"toolRemixDesc",icon:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/17142/17142644.png",className:"w-8 h-8 object-contain",alt:"Creative Remix"}),color:"bg-purple-50",model:"gemini-2.5-flash-image",cost:3},{id:kn.COLORIZE,nameKey:"toolColorize",descKey:"toolColorizeDesc",icon:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/15109/15109276.png",className:"w-8 h-8 object-contain",alt:"Warnai Foto"}),color:"bg-pink-50",model:"gemini-2.5-flash-image",cost:2},{id:kn.SKETCH_TO_REAL,nameKey:"toolSketch",descKey:"toolSketchDesc",icon:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/9798/9798973.png",className:"w-8 h-8 object-contain",alt:"Sketsa ke Nyata"}),color:"bg-emerald-50",model:"gemini-2.5-flash-image",cost:3}],w8=({language:t,code:e})=>{const[n,r]=j.useState(!1),s=()=>{navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)},i=o=>o.split(`
`).map((a,c)=>l.jsxs("div",{className:"table-row",children:[l.jsx("span",{className:"table-cell select-none text-slate-600 text-right pr-4 w-8 text-xs",children:c+1}),l.jsx("span",{className:"table-cell",children:a.split(/([<>{}"']|class|const|let|var|function|return|import|export)/g).map((u,d)=>u.startsWith("<")||u.startsWith(">")?l.jsx("span",{className:"text-blue-400",children:u},d):u.startsWith('"')||u.startsWith("'")?l.jsx("span",{className:"text-green-400",children:u},d):["const","let","var","function","return","import","export","class"].includes(u)?l.jsx("span",{className:"text-purple-400 font-bold",children:u},d):["=","{","}","(",")",";"].includes(u)?l.jsx("span",{className:"text-slate-400",children:u},d):l.jsx("span",{className:"text-slate-200",children:u},d))})]},c));return l.jsxs("div",{className:"my-4 rounded-xl overflow-hidden border border-slate-700/50 shadow-lg bg-[#1e1e1e] w-full max-w-full group",children:[l.jsxs("div",{className:"bg-[#2d2d2d] px-4 py-2 flex items-center justify-between border-b border-white/5",children:[l.jsx("span",{className:"text-xs font-mono text-slate-400 lowercase font-bold",children:t||"code"}),l.jsx("button",{onClick:s,className:"flex items-center gap-1.5 text-[10px] font-medium text-slate-400 hover:text-white bg-white/5 hover:bg-white/10 px-2 py-1 rounded transition-all",children:n?l.jsxs(l.Fragment,{children:[l.jsx(Es,{className:"w-3 h-3 text-green-400"})," Copied"]}):l.jsxs(l.Fragment,{children:[l.jsx(PT,{className:"w-3 h-3"})," Copy Code"]})})]}),l.jsx("div",{className:"p-4 overflow-x-auto custom-scrollbar",children:l.jsx("pre",{className:"font-mono text-sm leading-relaxed whitespace-pre font-normal",style:{tabSize:2},children:l.jsx("code",{className:"table w-full border-collapse",children:i(e)})})})]})},_8=({isOpen:t,onClose:e})=>t?l.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-6 shadow-2xl animate-fade-in-up border border-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center",children:l.jsx(tc,{className:"w-5 h-5"})}),l.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Cara Dapet API Key Gemini"})]}),l.jsxs("ol",{className:"space-y-4 text-sm text-slate-600 mb-6 list-decimal list-inside marker:font-bold marker:text-blue-600",children:[l.jsxs("li",{className:"pl-2",children:["Buka website ",l.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-bold hover:underline",children:"Google AI Studio"}),"."]}),l.jsx("li",{className:"pl-2",children:"Login pakai akun Google kamu."}),l.jsxs("li",{className:"pl-2",children:["Klik tombol biru besar bertuliskan ",l.jsx("b",{children:'"Create API Key"'}),"."]}),l.jsxs("li",{className:"pl-2",children:["Pilih ",l.jsx("b",{children:'"Create API key in new project"'}),"."]}),l.jsxs("li",{className:"pl-2",children:["Salin (Copy) kode yang muncul, lalu tempel di menu ",l.jsx("b",{children:"Pengaturan"})," aplikasi ini."]})]}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-xs text-slate-500 mb-6",children:[" ",l.jsx("b",{children:"Tips:"})," API Key ini gratis (Free Tier). Jangan kasih tau kode ini ke orang lain ya."]}),l.jsx("button",{onClick:e,className:"w-full py-3 bg-primary text-white rounded-xl font-bold shadow-lg shadow-primary/20 hover:bg-slate-800 transition-all active:scale-95",children:"Oke, Siap!"})]})}):null,nb=({text:t,block:e=!1})=>{const[n,r]=j.useState(t);j.useEffect(()=>{if(window.katex)try{const i=window.katex.renderToString(t,{throwOnError:!1,displayMode:e});r(i)}catch{r(t)}},[t,e]);const s=()=>{navigator.clipboard.writeText(t),$e("Rumus LaTeX disalin! ")};return window.katex?l.jsx("span",{dangerouslySetInnerHTML:{__html:n},className:`${e?"block my-2 overflow-x-auto overflow-y-hidden py-1":""} cursor-pointer hover:bg-slate-100/50 rounded transition-colors`,title:"Klik 2x untuk salin rumus",onDoubleClick:s}):l.jsx("code",{children:t})},rb=t=>{const e=[],n=i=>{const o=`___TOKEN_${e.length}___`;return e.push({id:o,node:i}),o};let r=t.replace(/```([\w-]*)\n([\s\S]*?)```/g,(i,o,a)=>n(l.jsx(w8,{language:o,code:a})));return r=r.replace(/(\$\$[\s\S]*?\$\$|\\\[[\s\S]*?\\\])/g,i=>{const o=(i.startsWith("$$"),i.slice(2,-2));return n(l.jsx(nb,{text:o,block:!0}))}),r=r.replace(new RegExp("(\\\\\\([\\s\\S]*?\\\\\\)|(?<!\\\\)\\$(?:[^$\\n]+?)(?<!\\\\)\\$)","g"),i=>{const o=i.startsWith("\\(")?i.slice(2,-2):i.slice(1,-1);return n(l.jsx(nb,{text:o,block:!1}))}),r.split(`
`).map((i,o)=>i.trim().startsWith("### ")?l.jsx("h3",{className:"text-base font-bold text-slate-900 mt-3 mb-1",children:Xf(i.replace(/^###\s+/,""),e)},o):i.trim().startsWith("## ")?l.jsx("h2",{className:"text-lg font-bold text-slate-900 mt-4 mb-2",children:Xf(i.replace(/^##\s+/,""),e)},o):i.trim()==="***"||i.trim()==="---"?l.jsx("div",{className:"h-px bg-slate-200 my-4 w-full"},o):i.trim()===""?l.jsx("div",{className:"h-2"},o):l.jsx("div",{className:"block leading-relaxed",children:Xf(i,e)},o))},Xf=(t,e)=>t.split(/(\*\*[\s\S]*?\*\*)/g).map((r,s)=>r.startsWith("**")&&r.endsWith("**")?l.jsx("strong",{className:"font-bold text-slate-900",children:sb(r.slice(2,-2),e)},s):l.jsx(Ml.Fragment,{children:sb(r,e)},s)),sb=(t,e)=>t.split(new RegExp("(?<!\\*)\\*([^*]+?)\\*(?!\\*)","g")).map((r,s)=>s%2===1?l.jsx("em",{className:"italic text-slate-800",children:ib(r,e)},s):ib(r,e)),ib=(t,e)=>t.split(/(___TOKEN_\d+___)/g).map((r,s)=>{const i=e.find(c=>c.id===r);if(i)return l.jsx(Ml.Fragment,{children:i.node},s);const a=/\[(.*?)\]\((.*?)\)/g.exec(r);return a?l.jsxs(Ml.Fragment,{children:[r.substring(0,a.index),l.jsx("a",{href:a[2],target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline font-medium",children:a[1]}),r.substring(a.index+a[0].length)]},s):r});function b8({onExit:t,isAdmin:e=!1}){const[n,r]=j.useState(!0),[s,i]=j.useState("id"),[o,a]=j.useState(null),[c,u]=j.useState(null),d=(o==null?void 0:o.isAdmin)||e,[m,g]=j.useState(!1),[y,b]=j.useState(!1),[x,w]=j.useState(!1),[v,_]=j.useState(!0),[T,P]=j.useState(null),[L,B]=j.useState(null),[k,I]=j.useState(null),[A,N]=j.useState(""),[U,R]=j.useState({isProcessing:!1,progress:"",error:null}),[D,M]=j.useState({}),[H,ye]=j.useState(Date.now().toString()),[re,ne]=j.useState([]),[Y,ue]=j.useState([]),[q,z]=j.useState(""),[X,le]=j.useState([]),[ae,Ae]=j.useState(null),[we,Se]=j.useState(!1),[ke,qe]=j.useState(!1),[Be,pt]=j.useState(null),it=j.useRef(null),C=j.useRef(null),ie=j.useRef(null),Q=j.useRef(null),[F,V]=j.useState(!1),[G,Z]=j.useState(""),[oe,K]=j.useState([]),[he,ve]=j.useState(""),[me,_e]=j.useState(""),[Ne,Le]=j.useState(""),[kt,En]=j.useState(""),[zt,se]=j.useState(""),[de,De]=j.useState(!0),[We,et]=j.useState(!0),[Lt,yt]=j.useState(!1),[Wt,ln]=j.useState(!1),[jt,Dn]=j.useState(!1),[Ln,ar]=j.useState(!1),[at,Gr]=j.useState(!1),[go,Er]=j.useState(!1),[bi,Ct]=j.useState(!1),[Ei,lr]=j.useState(null),Qe=Uc[s];j.useEffect(()=>{const W=(Me,je)=>{const ot=localStorage.getItem(Me);ot&&je(ot)};W("remove_bg_key",Z),W("google_search_key",ve),W("google_search_cx",_e),W("open_router_key",Le),W("hugging_face_key",En),W("groq_key",se),localStorage.getItem("fanra_rb_enabled")==="false"&&De(!1),localStorage.getItem("fanra_sb_enabled")==="false"&&et(!1),localStorage.getItem("fanra_km_enabled")==="true"&&yt(!0),localStorage.getItem("fanra_wiki_enabled")==="true"&&ln(!0),(async()=>{const Me={};for(const je of Cu){const ot=`tool_status_${je.id}`,Ft=await ja(ot);Me[je.id]=Ft!=="false"}M(Me)})(),cn()},[]),j.useEffect(()=>{at&&oe.some(W=>W.isActive)&&Gr(!1)},[oe]),j.useEffect(()=>{var W;(W=C.current)==null||W.scrollIntoView({behavior:"smooth"})},[Y,U.isProcessing,X]),j.useEffect(()=>{c&&(Zj(c).then(W=>{ne(W);const be=W.filter(Me=>Me.sessionId===H);ue(be)}),Yj(c).then(W=>K(W))),cn()},[c,H]),j.useEffect(()=>{if(Q.current){Q.current.style.height="auto";const W=Math.min(Q.current.scrollHeight,128);Q.current.style.height=`${Math.max(42,W)}px`}},[q,X]);const yo=()=>G||f8,Ti=()=>{const W=oe.filter(be=>be.isActive!==!1).map(be=>be.key);return W.length===0?[p8]:W},Tr=W=>{Z(W),localStorage.setItem("remove_bg_key",W)},vo=(W,be)=>{ve(W),_e(be),localStorage.setItem("google_search_key",W),localStorage.setItem("google_search_cx",be)},xo=W=>{Le(W),localStorage.setItem("open_router_key",W)},is=W=>{En(W),localStorage.setItem("hugging_face_key",W)},Ii=W=>{se(W),localStorage.setItem("groq_key",W)},$=async(W,be)=>{const Me={key:W,addedAt:Date.now(),isShared:be,isActive:!0},je=[...oe,Me];K(je),c&&await fw(c,je)},ee=async W=>{const be=oe.filter(Me=>Me.key!==W);K(be),c&&await Qj(c,W,be)},pe=async(W,be)=>{const Me=oe.map(je=>je.key===W?{...je,isActive:be}:je);K(Me),c&&await fw(c,Me)},Pe=W=>{De(W),localStorage.setItem("fanra_rb_enabled",W.toString())},He=W=>{et(W),localStorage.setItem("fanra_sb_enabled",W.toString())},ct=W=>{yt(W),localStorage.setItem("fanra_km_enabled",W.toString())},tt=W=>{ln(W),localStorage.setItem("fanra_wiki_enabled",W.toString())},qn=async()=>{try{window.aistudio&&await window.aistudio.openSelectKey()}catch(W){console.error(W)}},cn=()=>{if(oe.length>0){Dn(!1),ar(!1);return}const W=new Date().toISOString().split("T")[0],be=o?c||"user":"guest",Me=`fanra_limit_${W}_${be}_chat`,je=`fanra_limit_${W}_${be}_image`,ot=parseInt(localStorage.getItem(Me)||"0"),Ft=parseInt(localStorage.getItem(je)||"0"),mt=o?10:3,Gt=o?3:1;Dn(ot>=mt),ar(Ft>=Gt)},$r=W=>{if(oe.length>0)return!0;const je=`fanra_limit_${new Date().toISOString().split("T")[0]}_${o?c||"user":"guest"}_${W}`,ot=parseInt(localStorage.getItem(je)||"0");let Ft=0;return o?Ft=W==="chat"?10:3:Ft=W==="chat"?3:1,ot>=Ft?(cn(),!1):(localStorage.setItem(je,(ot+1).toString()),cn(),!0)},Ir=(W,be,Me,je)=>{B({data:W,mimeType:be,width:Me,height:je})},Sr=(W,be,Me)=>{a(W),u(be),g(!1)},un=()=>{B(null),I(null),N(""),P(null),R({isProcessing:!1,progress:"",error:null}),le([]),lr(null)},cr=async()=>{await Jj(),a(null),u(null),K([]),un(),ne([]),ue([]),Gr(!1),cn()},Tn=()=>i(W=>W==="id"?"en":"id"),Si=(W,be)=>{W&&navigator.clipboard.writeText(W).then(()=>{Ae(be),setTimeout(()=>Ae(null),2e3)})},Kh=W=>{pt(be=>be===W?null:W)},Oc=async(W,be)=>{if(be.stopPropagation(),!d)return;const Me=!D[W];M(je=>({...je,[W]:Me}));try{await Fc(`tool_status_${W}`,Me.toString())}catch{M(ot=>({...ot,[W]:!Me}))}},Bc=(W,be)=>{be?$e(Qe.toolLockedMsg):P(W)},zc=W=>{W.preventDefault(),W.stopPropagation(),Se(!0)},Ba=W=>{W.preventDefault(),W.stopPropagation(),Se(!1)},za=W=>{const be=new FileReader;be.onloadend=()=>{const Me=be.result,je=new Image;je.onload=()=>{Ir(Me.split(",")[1],W.type,je.width,je.height)},je.src=Me},be.readAsDataURL(W)},Ga=W=>{if(W.length+X.length>3){alert("Maksimal 3 gambar sekaligus.");return}W.forEach(be=>{if(!be.type.startsWith("image/"))return;const Me=new FileReader;Me.onloadend=()=>{const je=Me.result.split(",")[1];le(ot=>[...ot,{data:je,mimeType:be.type,name:be.name}])},Me.readAsDataURL(be)})},Gc=W=>{W.preventDefault(),W.stopPropagation(),Se(!1);const be=Array.from(W.dataTransfer.files);if(be.length!==0)if(T){const Me=be[0];Me.type.startsWith("image/")&&za(Me)}else Ga(be)},$c=()=>{const W=Date.now().toString();ye(W),ue([]),le([]),un(),b(!1)},Jh=W=>{ye(W);const be=re.filter(Me=>Me.sessionId===W);ue(be),b(!1),un()},$a=()=>{k?(lr("back"),Ct(!0)):un()},Hc=()=>{Ei==="back"&&un(),Ct(!1),lr(null)},Yh=()=>{it.current&&(it.current.abort(),it.current=null,R({isProcessing:!1,progress:"",error:"Stopped by user."}))},Hr=async W=>{var ot,Ft;if(W==null||W.preventDefault(),!q.trim()&&X.length===0||at||!$r("chat")||X.length>0&&!$r("image"))return;const be={id:Date.now().toString(),sessionId:H,role:"user",text:q,timestamp:Date.now(),attachments:[...X]},Me={id:"temp-thinking",sessionId:H,role:"model",text:"",timestamp:Date.now()+1},je=[...Y,be,Me];ue(je),ne(mt=>[...mt,be,Me]),z(""),le([]),R({isProcessing:!0,progress:"AI Thinking...",error:null}),c&&pw(c,be);try{it.current=new AbortController;const mt=he&&me?{apiKey:he,cx:me}:void 0,Gt=Ti(),Wn=await n8(be.text,Gt,Y,s,be.attachments||[],Ls=>{ue(jn=>jn.map(Ha=>Ha.id==="temp-thinking"?{...Ha,text:Ls}:Ha))},Lt,Wt,mt,it.current.signal,Ne||m8,kt||g8,zt||y8),ur={id:(Date.now()+2).toString(),sessionId:H,role:"model",text:Wn.text,timestamp:Date.now(),source:Wn.source};ue(Ls=>Ls.map(jn=>jn.id==="temp-thinking"?ur:jn)),ne(Ls=>Ls.map(jn=>jn.id==="temp-thinking"?ur:jn)),c&&pw(c,ur)}catch(mt){if(mt.message==="Request cancelled by user")ue(Gt=>Gt.filter(Wn=>Wn.id!=="temp-thinking")),ne(Gt=>Gt.filter(Wn=>Wn.id!=="temp-thinking"));else{const Gt={id:(Date.now()+2).toString(),sessionId:H,role:"model",text:Qe.chatFallbackError+(mt.message?` (${mt.message})`:""),timestamp:Date.now()};ue(Wn=>Wn.map(ur=>ur.id==="temp-thinking"?Gt:ur)),ne(Wn=>Wn.map(ur=>ur.id==="temp-thinking"?Gt:ur)),((ot=mt.message)!=null&&ot.includes("429")||(Ft=mt.message)!=null&&Ft.includes("quota"))&&Gr(!0)}}finally{R({isProcessing:!1,progress:"",error:null}),it.current=null}},kr=W=>{le(be=>be.filter((Me,je)=>je!==W))},ki=()=>{var W;Ln||(W=ie.current)==null||W.click()},wo=W=>{if(W.target.files){const be=Array.from(W.target.files);Ga(be)}W.target.value=""},qc=o||{name:"Guest"},ht=x?Cu:Cu.slice(0,3),_o=async()=>{if(!L||!T||!$r("image"))return;R({isProcessing:!0,progress:Qe.initializing,error:null}),I(null);const W=T.id===kn.BACKGROUND_REMOVER,be=yo(),Me=Ti();try{let je="",ot=!1;if(W&&be&&de&&!ot)try{R(mt=>({...mt,progress:Qe.processingStandard})),je=await i8(L.data,be),ot=!0}catch{console.warn("Standard Engine failed")}if(!ot&&(W||!W)&&!ot&&Me.length>0)try{R(mt=>({...mt,progress:Qe.processingAI})),je=await JB({image:L,tool:T.id,prompt:T.id===kn.CREATIVE_REMIX?A:void 0,apiKeys:Me}),W&&(R(mt=>({...mt,progress:Qe.refining})),je=await r8(je)),ot=!0}catch(mt){console.warn("Gemini failed",mt)}if(!ot||!je)throw new Error("No available API Keys or Services found/enabled.");I(je),R({isProcessing:!1,progress:"",error:null})}catch(je){console.error("Execution Error:",je);let ot=Qe.serviceBusy;const Ft=(je.message||"").toLowerCase();Ft.includes("network")||Ft.includes("fetch")?ot=Qe.networkError:Ft.includes("memory")||Ft.includes("oom")?ot=Qe.memoryError:(Ft.includes("no available api")||Ft.includes("enabled"))&&(ot=Qe.insufficientCredits),R({isProcessing:!1,progress:"",error:ot})}},Ds=jt&&!at&&!U.isProcessing,Ci=/(\$\$|\\\[|\\\(|\$)/.test(q);return l.jsxs("div",{className:"flex h-[100dvh] bg-white font-sans text-primary overflow-hidden relative",onDragOver:zc,onDragLeave:Ba,onDrop:Gc,children:[n&&l.jsx(h8,{onEnter:()=>r(!1)}),we&&l.jsx("div",{className:"absolute inset-0 z-[100] bg-primary/10 backdrop-blur-sm border-4 border-primary border-dashed m-4 rounded-3xl flex items-center justify-center pointer-events-none",children:l.jsxs("div",{className:"bg-white px-8 py-4 rounded-2xl shadow-xl flex items-center gap-3",children:[l.jsx(Gv,{className:"w-6 h-6 text-primary"}),l.jsx("span",{className:"font-bold text-lg text-primary",children:"Drop files to send"})]})}),m&&l.jsx("div",{className:"fixed inset-0 z-[60] bg-white",children:l.jsx(c8,{onLogin:Sr,language:s,onToggleLanguage:Tn,onClose:()=>g(!1)})}),l.jsx(_8,{isOpen:go,onClose:()=>Er(!1)}),l.jsx(l8,{isOpen:F,onClose:()=>V(!1),removeBgKey:G,onSaveRemoveBgKey:Tr,storedApiKeys:oe,onAddApiKey:$,onDeleteApiKey:ee,onToggleApiKey:pe,onSelectGoogleKey:qn,knowledgeMode:Lt,onToggleKnowledgeMode:ct,wikiEnabled:Wt,onToggleWiki:tt,removeBgEnabled:de,onToggleRemoveBg:Pe,supabaseEnabled:We,onToggleSupabase:He,googleSearchKey:he,googleSearchCx:me,onSaveGoogleSearch:vo,openRouterKey:Ne,onSaveOpenRouterKey:xo,huggingFaceKey:kt,onSaveHuggingFaceKey:is,groqKey:zt,onSaveGroqKey:Ii,language:s}),l.jsx(Fa,{isOpen:bi,title:Qe.confirmTitle,description:Qe.confirmDesc,confirmText:Qe.yesChange,onConfirm:Hc,onCancel:()=>Ct(!1)}),l.jsx(u8,{isOpen:y,onClose:()=>b(!1),onNewChat:$c,user:o,onLogout:cr,onOpenLogin:()=>g(!0),language:s,tools:Cu,toolStatuses:D,onSelectTool:P,onExit:t,chatHistory:re,onLoadSession:Jh,currentSessionId:H}),l.jsxs("div",{className:"flex-1 flex flex-col h-full relative w-full overflow-hidden bg-slate-50/50",children:[l.jsx("header",{className:"absolute top-0 left-0 right-0 z-30 p-4 pointer-events-none",children:l.jsxs("div",{className:"max-w-5xl mx-auto bg-white/80 backdrop-blur-xl border border-white/40 shadow-lg shadow-slate-200/50 rounded-2xl px-4 py-3 flex items-center justify-between pointer-events-auto",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>b(!y),className:"p-2 rounded-xl hover:bg-slate-100 text-slate-600 transition-colors",children:l.jsx(RT,{className:"w-5 h-5"})}),l.jsx("div",{className:"font-bold text-lg tracking-tight bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent hidden md:block",children:"Fanra Studio"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:Tn,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-full text-xs font-bold text-slate-700 transition-all hover:shadow-sm active:scale-95",children:[l.jsx("img",{src:s==="id"?"https://cdn-icons-png.flaticon.com/128/11654/11654463.png":"https://cdn-icons-png.flaticon.com/128/9906/9906532.png",alt:"Lang",className:"w-4 h-4 object-contain"}),l.jsx("span",{children:s.toUpperCase()})]}),l.jsxs("button",{onClick:()=>V(!0),className:"p-2 text-slate-400 hover:text-primary hover:bg-slate-100 rounded-full transition-all relative",children:[l.jsx(Jp,{className:"w-5 h-5"}),at&&l.jsx("span",{className:"absolute top-1.5 right-1.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]})]})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto pt-24 px-4 scroll-smooth custom-scrollbar",children:l.jsxs("div",{className:"max-w-3xl mx-auto min-h-full flex flex-col pb-4",children:[Y.length===0&&!T&&l.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center py-10 animate-fade-in-up",children:[l.jsxs("div",{className:"mb-8 text-center",children:[l.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 mb-3 tracking-tight",children:[Qe.heroTitle," ",qc.name]}),l.jsx("p",{className:"text-slate-500 text-lg",children:Qe.heroSubtitle})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-5 w-full max-w-2xl px-2",children:[ht.map(W=>{const be=D[W.id]!==!1,Me=!be&&!d;return l.jsxs("button",{onClick:()=>Bc(W,Me),className:`relative flex flex-col items-center text-center p-4 md:p-6 bg-white border rounded-2xl shadow-sm transition-all duration-300 group h-full ${Me?"border-slate-100 opacity-80 bg-slate-50 hover:bg-slate-100 cursor-pointer":"hover:border-primary/20 hover:shadow-xl hover:-translate-y-1 border-slate-100 cursor-pointer"}`,children:[d&&l.jsx("div",{className:"absolute top-2 right-2 z-20",onClick:je=>Oc(W.id,je),children:l.jsx("div",{className:`w-8 h-4 rounded-full transition-colors flex items-center p-0.5 ${be?"bg-green-500":"bg-slate-300"}`,children:l.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transform transition-transform ${be?"translate-x-4":"translate-x-0"}`})})}),Me&&l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsx("div",{className:"bg-slate-100 p-1.5 rounded-full shadow-sm",children:l.jsx(Ug,{className:"w-3 h-3 text-slate-400"})})}),l.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 ${Me?"bg-slate-200 grayscale":W.color} rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110 shadow-sm`,children:W.icon}),l.jsx("span",{className:`text-xs md:text-sm font-bold leading-tight ${Me?"text-slate-400":"text-slate-700"}`,children:Qe[W.nameKey]}),l.jsx("span",{className:"hidden md:block text-[10px] text-slate-400 mt-2 leading-tight",children:Qe[W.descKey]})]},W.id)}),l.jsxs("button",{onClick:()=>w(!x),className:`flex flex-col items-center justify-center text-center p-4 md:p-6 bg-slate-50 border border-slate-200 border-dashed rounded-2xl hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-300 group h-full ${x?"":"col-start-2"}`,children:[l.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-slate-100 text-slate-400 rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110",children:l.jsx(fh,{className:"w-6 h-6"})}),l.jsx("span",{className:"text-xs md:text-sm font-bold text-slate-500 group-hover:text-slate-700 leading-tight",children:x?Qe.lessTools:Qe.moreTools})]})]})]}),Y.map(W=>l.jsxs("div",{className:`flex flex-col mb-6 animate-fade-in ${W.role==="user"?"items-end":"items-start"}`,children:[W.attachments&&W.attachments.length>0&&l.jsx("div",{className:`flex flex-wrap gap-2 mb-2 max-w-[85%] ${W.role==="user"?"justify-end":"justify-start"}`,children:W.attachments.map((be,Me)=>l.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200/50 shadow-sm transition-transform hover:scale-[1.02]",children:l.jsx("img",{src:`data:${be.mimeType};base64,${be.data}`,alt:be.name,className:"h-32 w-auto object-cover md:h-48 rounded-lg bg-slate-100"})},Me))}),(W.text||W.role==="model"&&!W.text)&&l.jsxs("div",{className:`flex flex-col gap-1 max-w-lg lg:max-w-2xl ${W.role==="user"?"items-end":"items-start"}`,children:[l.jsx("div",{className:`relative px-5 py-3.5 rounded-2xl text-sm leading-relaxed shadow-sm break-words group w-full ${W.role==="user"?"bg-white text-slate-800 rounded-tr-sm border border-slate-100 shadow-slate-200/50":"bg-transparent text-slate-700 p-0 shadow-none"}`,children:W.role==="model"&&!W.text?l.jsxs("div",{className:"flex gap-1.5 h-5 items-center",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"}),l.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-100"}),l.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-200"})]}):rb(W.text)}),l.jsxs("div",{className:`flex items-center gap-2 mt-1 px-1 ${W.role==="user"?"justify-end":"justify-start"}`,children:[W.role==="model"&&W.source&&l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>Kh(W.id),className:`p-1.5 rounded-full transition-all ${Be===W.id?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-400 hover:text-slate-600"}`,title:"Info Sumber",children:l.jsx(EN,{className:"w-3.5 h-3.5"})}),Be===W.id&&l.jsxs("div",{className:"absolute bottom-8 left-0 z-10 bg-white border border-slate-200 rounded-xl shadow-xl p-2 min-w-[140px] animate-fade-in-up origin-bottom-left flex flex-col gap-1",children:[l.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider px-1",children:"Sumber Data"}),l.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg bg-slate-50 text-xs font-semibold text-slate-700",children:[W.source==="gemini"&&l.jsx(zv,{className:"w-3.5 h-3.5"}),W.source==="openrouter"&&l.jsx("div",{className:"w-3.5 h-3.5 bg-green-500 rounded-full flex items-center justify-center text-[8px] text-white font-bold",children:"OR"}),W.source==="groq"&&l.jsx(xN,{className:"w-3.5 h-3.5 text-orange-500"}),W.source==="huggingface"&&l.jsx("div",{className:"w-3.5 h-3.5 bg-yellow-400 rounded-full flex items-center justify-center text-[8px] text-black font-bold",children:"HF"}),W.source==="google_search"&&l.jsx(zv,{className:"w-3.5 h-3.5 text-orange-500"}),W.source==="weather"&&l.jsx(TN,{className:"w-3.5 h-3.5 text-blue-400"}),W.source==="country_fact"&&l.jsx(IN,{className:"w-3.5 h-3.5 text-red-500"}),l.jsx("span",{children:W.source==="gemini"?"Google Gemini":W.source==="openrouter"?"OpenRouter":W.source==="groq"?"Groq LPU":W.source==="huggingface"?"HuggingFace":W.source==="weather"?"Open-Meteo":W.source==="country_fact"?"RestCountries":W.source==="google_search"?"Google":W.source})]})]})]}),W.text&&l.jsx("button",{onClick:()=>Si(W.text,W.id),className:`p-1.5 rounded-full transition-all ${ae===W.id?"bg-green-100 text-green-600":"bg-white border border-slate-100 text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:ae===W.id?l.jsx(Es,{className:"w-3.5 h-3.5"}):l.jsx(PT,{className:"w-3.5 h-3.5"})})]})]})]},W.id)),T&&l.jsxs("div",{className:"w-full animate-fade-in py-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("button",{onClick:$a,className:"text-xs flex items-center gap-1 text-slate-500 hover:text-primary px-3 py-1.5 bg-white border border-slate-200 rounded-full shadow-sm hover:shadow transition-all",children:[l.jsx(Zn,{className:"w-4 h-4"})," ",Qe.back]}),l.jsx("span",{className:"font-bold text-sm text-slate-700 bg-white px-3 py-1 rounded-full border border-slate-100 shadow-sm",children:Qe[T.nameKey]})]}),L?l.jsxs("div",{className:"space-y-4",children:[!k&&!U.isProcessing&&l.jsx("div",{className:"bg-slate-100 p-4 rounded-2xl border border-slate-200/60 max-w-sm mx-auto shadow-inner",children:l.jsx("img",{src:`data:${L.mimeType};base64,${L.data}`,className:"rounded-xl max-h-60 mx-auto object-contain shadow-sm"})}),T.id===kn.CREATIVE_REMIX&&!k&&l.jsx("textarea",{className:"w-full bg-white border border-slate-200 rounded-2xl p-4 text-sm focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none shadow-sm transition-all",placeholder:Qe.aiPromptPlaceholder,value:A,onChange:W=>N(W.target.value)}),!k&&!U.isProcessing&&l.jsx("button",{onClick:_o,disabled:T.id===kn.CREATIVE_REMIX&&!A.trim(),className:"w-full py-4 bg-primary text-white rounded-2xl font-bold shadow-xl shadow-slate-900/10 active:scale-95 transition-all hover:-translate-y-0.5",children:Qe.generateMagic}),(U.isProcessing||k)&&l.jsx(a8,{originalImage:L,resultImageBase64:k,isProcessing:U.isProcessing,processingText:U.progress,onReset:$a,language:s})]}):l.jsx(o8,{onImageSelect:Ir,language:s})]}),U.isProcessing&&T&&l.jsx("div",{className:"flex gap-4 animate-fade-in pl-5",children:l.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[l.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-100"}),l.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-200"})]})}),l.jsx("div",{ref:C})]})}),!T&&l.jsx("div",{className:"shrink-0 w-full px-4 pb-6 pt-2 z-40 bg-slate-50/50 backdrop-blur-sm",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[at&&l.jsx("div",{className:"mb-3 animate-fade-in-up",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 flex items-center justify-between shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[l.jsx(da,{className:"w-5 h-5"}),l.jsx("span",{className:"text-xs font-bold",children:"Limit Chat Habis."})]}),l.jsx("button",{onClick:()=>Er(!0),className:"text-xs font-bold text-white bg-red-500 hover:bg-red-600 px-3 py-1.5 rounded-lg transition-colors shadow-sm",children:"Cara Dapet API Key?"})]})}),Ds&&l.jsxs("div",{className:"bg-slate-900 text-white rounded-t-3xl p-3 px-4 flex items-center justify-between shadow-2xl animate-fade-in z-10 relative mt-2 mx-1",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("span",{className:"text-xs font-bold leading-tight",children:o?"Limit harian habis. Besok lagi ya!":"Login/Masuk untuk lanjut mengobrol dengan Fanra"})}),!o&&l.jsx("button",{onClick:()=>g(!0),className:"text-[10px] font-bold bg-white text-slate-900 px-3 py-1.5 rounded-lg hover:bg-slate-200 transition-colors shadow-sm whitespace-nowrap",children:"Login Sekarang"})]}),l.jsxs("form",{onSubmit:Hr,className:`relative flex flex-col bg-white border shadow-2xl shadow-slate-200/60 transition-all duration-300 focus-within:shadow-xl ${at?"border-red-200 opacity-80 rounded-3xl":Ds?"rounded-b-3xl rounded-t-sm border-t-0 border-slate-900/10":"rounded-3xl border-slate-200 focus-within:border-slate-300"}`,children:[Ci&&l.jsxs("div",{className:"border-b border-slate-100 bg-slate-50/50 rounded-t-2xl animate-fade-in overflow-hidden transition-all",children:[l.jsxs("div",{onClick:()=>_(!v),className:"flex items-center justify-between p-2 cursor-pointer hover:bg-slate-100 transition-colors select-none",children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase px-1",children:"Pratinjau Rumus"}),l.jsx($n,{className:`w-3 h-3 text-slate-400 transition-transform ${v?"":"-rotate-90"}`})]}),v&&l.jsx("div",{className:"p-3 bg-white text-sm overflow-x-auto border-t border-slate-100 max-h-40 custom-scrollbar",children:rb(q)})]}),X.length>0&&l.jsxs("div",{className:"p-3 border-b border-slate-100 bg-slate-50 flex items-start gap-3 animate-fade-in overflow-x-auto custom-scrollbar rounded-t-[22px]",children:[X.map((W,be)=>l.jsxs("div",{className:"relative group flex-shrink-0",children:[l.jsx("img",{src:`data:${W.mimeType};base64,${W.data}`,alt:"Preview",className:"h-16 w-16 object-cover rounded-lg border border-slate-200 shadow-sm"}),l.jsx("button",{type:"button",onClick:()=>kr(be),className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full p-0.5 shadow-md hover:bg-red-600 transition-colors",children:l.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},be)),X.length<3&&l.jsx("div",{onClick:ki,className:"h-16 w-16 rounded-lg border-2 border-dashed border-slate-300 flex items-center justify-center cursor-pointer hover:border-primary hover:bg-white transition-colors flex-shrink-0 text-slate-400 hover:text-primary",children:l.jsx("span",{className:"text-xs font-bold",children:"+"})})]}),l.jsxs("div",{className:"flex items-end gap-1.5 p-2.5",children:[l.jsxs("div",{className:"relative",children:[l.jsx("button",{type:"button",onClick:()=>qe(!ke),className:"p-2.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors flex-shrink-0 mb-0.5",children:l.jsx(_N,{className:"w-5 h-5"})}),ke&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>qe(!1)}),l.jsxs("div",{className:"absolute bottom-12 left-0 w-48 bg-white border border-slate-200 rounded-xl shadow-xl z-[60] py-1 overflow-hidden animate-fade-in-up origin-bottom-left",children:[l.jsxs("button",{type:"button",onClick:()=>{$c(),qe(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-red-500 hover:bg-red-50 flex items-center gap-2",children:[l.jsx(gr,{className:"w-4 h-4"})," Clear Chat"]}),l.jsxs("button",{type:"button",onClick:()=>{V(!0),qe(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-2",children:[l.jsx(Jp,{className:"w-4 h-4"})," Settings"]})]})]})]}),l.jsx("input",{type:"file",ref:ie,className:"hidden",accept:"image/*",multiple:!0,onChange:wo}),l.jsx("button",{type:"button",onClick:ki,disabled:Ln,className:`p-2.5 rounded-full transition-colors flex-shrink-0 mb-0.5 ${Ln?"text-slate-300 cursor-not-allowed":"text-slate-400 hover:text-slate-600 hover:bg-slate-100"}`,children:l.jsx(Gv,{className:"w-5 h-5"})}),l.jsx("textarea",{ref:Q,value:q,onChange:W=>z(W.target.value),onKeyDown:W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),Hr(W))},disabled:at||jt,placeholder:at?"Limit API Key Habis.":Lt?"(Knowledge Mode Active)":X.length>0?Qe.aiPromptPlaceholder:Qe.chatPlaceholder,className:"flex-1 bg-transparent border-none focus:ring-0 focus:outline-none resize-none max-h-32 py-3 px-2 text-sm text-primary placeholder:text-slate-400 leading-relaxed custom-scrollbar disabled:text-slate-400 disabled:cursor-not-allowed",rows:1,style:{minHeight:"44px",overflowY:"auto"}}),U.isProcessing&&!T?l.jsx("button",{type:"button",onClick:Yh,className:"p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 bg-slate-900 text-white hover:bg-slate-700 animate-pulse",title:"Stop Generation",children:l.jsx(MT,{className:"w-5 h-5"})}):l.jsx("button",{type:"submit",disabled:!q.trim()&&X.length===0||U.isProcessing||at||jt&&q.trim().length>0,className:`p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 ${Lt?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-primary text-white hover:bg-slate-800"} ${at||jt?"bg-slate-300 text-white cursor-not-allowed opacity-50 blur-[1px]":""}`,children:l.jsx("svg",{className:"w-5 h-5 transform rotate-90",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})]})})]})]})}function Au(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ck={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,s,i){function o(u,d){if(!s[u]){if(!r[u]){var m=typeof Au=="function"&&Au;if(!d&&m)return m(u,!0);if(a)return a(u,!0);var g=new Error("Cannot find module '"+u+"'");throw g.code="MODULE_NOT_FOUND",g}var y=s[u]={exports:{}};r[u][0].call(y.exports,function(b){var x=r[u][1][b];return o(x||b)},y,y.exports,n,r,s,i)}return s[u].exports}for(var a=typeof Au=="function"&&Au,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var u,d,m,g,y,b,x,w=[],v=0,_=c.length,T=_,P=i.getTypeOf(c)!=="string";v<c.length;)T=_-v,m=P?(u=c[v++],d=v<_?c[v++]:0,v<_?c[v++]:0):(u=c.charCodeAt(v++),d=v<_?c.charCodeAt(v++):0,v<_?c.charCodeAt(v++):0),g=u>>2,y=(3&u)<<4|d>>4,b=1<T?(15&d)<<2|m>>6:64,x=2<T?63&m:64,w.push(a.charAt(g)+a.charAt(y)+a.charAt(b)+a.charAt(x));return w.join("")},s.decode=function(c){var u,d,m,g,y,b,x=0,w=0,v="data:";if(c.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var _,T=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===a.charAt(64)&&T--,c.charAt(c.length-2)===a.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=o.uint8array?new Uint8Array(0|T):new Array(0|T);x<c.length;)u=a.indexOf(c.charAt(x++))<<2|(g=a.indexOf(c.charAt(x++)))>>4,d=(15&g)<<4|(y=a.indexOf(c.charAt(x++)))>>2,m=(3&y)<<6|(b=a.indexOf(c.charAt(x++))),_[w++]=u,y!==64&&(_[w++]=d),b!==64&&(_[w++]=m);return _}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function u(d,m,g,y,b){this.compressedSize=d,this.uncompressedSize=m,this.crc32=g,this.compression=y,this.compressedContent=b}u.prototype={getContentWorker:function(){var d=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),m=this;return d.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,m,g){return d.pipe(new a).pipe(new c("uncompressedSize")).pipe(m.compressWorker(g)).pipe(new c("compressedSize")).withStreamInfo("compression",m)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,c=[],u=0;u<256;u++){a=u;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;c[u]=a}return c}();r.exports=function(a,c){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(u,d,m,g){var y=o,b=g+m;u^=-1;for(var x=g;x<b;x++)u=u>>>8^y[255&(u^d[x])];return-1^u}(0|c,a,a.length,0):function(u,d,m,g){var y=o,b=g+m;u^=-1;for(var x=g;x<b;x++)u=u>>>8^y[255&(u^d.charCodeAt(x))];return-1^u}(0|c,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),c=n("./stream/GenericWorker"),u=i?"uint8array":"array";function d(m,g){c.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=g,this.meta={}}s.magic="\b\0",a.inherits(d,c),d.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,m.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(g){m.push({data:g,meta:m.meta})}},s.compressWorker=function(m){return new d("Deflate",m)},s.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(y,b){var x,w="";for(x=0;x<b;x++)w+=String.fromCharCode(255&y),y>>>=8;return w}function o(y,b,x,w,v,_){var T,P,L=y.file,B=y.compression,k=_!==u.utf8encode,I=a.transformTo("string",_(L.name)),A=a.transformTo("string",u.utf8encode(L.name)),N=L.comment,U=a.transformTo("string",_(N)),R=a.transformTo("string",u.utf8encode(N)),D=A.length!==L.name.length,M=R.length!==N.length,H="",ye="",re="",ne=L.dir,Y=L.date,ue={crc32:0,compressedSize:0,uncompressedSize:0};b&&!x||(ue.crc32=y.crc32,ue.compressedSize=y.compressedSize,ue.uncompressedSize=y.uncompressedSize);var q=0;b&&(q|=8),k||!D&&!M||(q|=2048);var z=0,X=0;ne&&(z|=16),v==="UNIX"?(X=798,z|=function(ae,Ae){var we=ae;return ae||(we=Ae?16893:33204),(65535&we)<<16}(L.unixPermissions,ne)):(X=20,z|=function(ae){return 63&(ae||0)}(L.dosPermissions)),T=Y.getUTCHours(),T<<=6,T|=Y.getUTCMinutes(),T<<=5,T|=Y.getUTCSeconds()/2,P=Y.getUTCFullYear()-1980,P<<=4,P|=Y.getUTCMonth()+1,P<<=5,P|=Y.getUTCDate(),D&&(ye=i(1,1)+i(d(I),4)+A,H+="up"+i(ye.length,2)+ye),M&&(re=i(1,1)+i(d(U),4)+R,H+="uc"+i(re.length,2)+re);var le="";return le+=`
\0`,le+=i(q,2),le+=B.magic,le+=i(T,2),le+=i(P,2),le+=i(ue.crc32,4),le+=i(ue.compressedSize,4),le+=i(ue.uncompressedSize,4),le+=i(I.length,2),le+=i(H.length,2),{fileRecord:m.LOCAL_FILE_HEADER+le+I+H,dirRecord:m.CENTRAL_FILE_HEADER+i(X,2)+le+i(U.length,2)+"\0\0\0\0"+i(z,4)+i(w,4)+I+H+U}}var a=n("../utils"),c=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),m=n("../signature");function g(y,b,x,w){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=x,this.encodeFileName=w,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(g,c),g.prototype.push=function(y){var b=y.meta.percent||0,x=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,c.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:x?(b+100*(x-w-1))/x:100}}))},g.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var b=this.streamFiles&&!y.file.dir;if(b){var x=o(y,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(y){this.accumulate=!1;var b=this.streamFiles&&!y.file.dir,x=o(y,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),b)this.push({data:function(w){return m.DATA_DESCRIPTOR+i(w.crc32,4)+i(w.compressedSize,4)+i(w.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var y=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var x=this.bytesWritten-y,w=function(v,_,T,P,L){var B=a.transformTo("string",L(P));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(v,2)+i(v,2)+i(_,4)+i(T,4)+i(B.length,2)+B}(this.dirRecords.length,x,y,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(y){this._sources.push(y);var b=this;return y.on("data",function(x){b.processChunk(x)}),y.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),y.on("error",function(x){b.error(x)}),this},g.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(y){var b=this._sources;if(!c.prototype.error.call(this,y))return!1;for(var x=0;x<b.length;x++)try{b[x].error(y)}catch{}return!0},g.prototype.lock=function(){c.prototype.lock.call(this);for(var y=this._sources,b=0;b<y.length;b++)y[b].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,c,u){var d=new o(c.streamFiles,u,c.platform,c.encodeFileName),m=0;try{a.forEach(function(g,y){m++;var b=function(_,T){var P=_||T,L=i[P];if(!L)throw new Error(P+" is not a valid compression method !");return L}(y.options.compression,c.compression),x=y.options.compressionOptions||c.compressionOptions||{},w=y.dir,v=y.date;y._compressWorker(b,x).withStreamInfo("file",{name:g,dir:w,date:v,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(d)}),d.entriesCount=m}catch(g){d.error(g)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),c=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function m(g){return new o.Promise(function(y,b){var x=g.decompressed.getContentWorker().pipe(new u);x.on("error",function(w){b(w)}).on("end",function(){x.streamInfo.crc32!==g.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(g,y){var b=this;return y=i.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",g,!0,y.optimizedBinaryString,y.base64).then(function(x){var w=new c(y);return w.load(x),w}).then(function(x){var w=[o.Promise.resolve(x)],v=x.files;if(y.checkCRC32)for(var _=0;_<v.length;_++)w.push(m(v[_]));return o.Promise.all(w)}).then(function(x){for(var w=x.shift(),v=w.files,_=0;_<v.length;_++){var T=v[_],P=T.fileNameStr,L=i.resolve(T.fileNameStr);b.file(L,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:y.createFolders}),T.dir||(b.file(L).unsafeOriginalName=P)}return w.zipComment.length&&(b.comment=w.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(c,u){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(a,o),a.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,c,u){i.call(this,c),this._helper=a;var d=this;a.on("data",function(m,g){d.push(m)||d._helper.pause(),u&&u(g)}).on("error",function(m){d.emit("error",m)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(L,B,k){var I,A=a.getTypeOf(B),N=a.extend(k||{},d);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(L=v(L)),N.createFolders&&(I=w(L))&&_.call(this,I,!0);var U=A==="string"&&N.binary===!1&&N.base64===!1;k&&k.binary!==void 0||(N.binary=!U),(B instanceof m&&B.uncompressedSize===0||N.dir||!B||B.length===0)&&(N.base64=!1,N.binary=!0,B="",N.compression="STORE",A="string");var R=null;R=B instanceof m||B instanceof c?B:b.isNode&&b.isStream(B)?new x(L,B):a.prepareContent(L,B,N.binary,N.optimizedBinaryString,N.base64);var D=new g(L,R,N);this.files[L]=D}var o=n("./utf8"),a=n("./utils"),c=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),m=n("./compressedObject"),g=n("./zipObject"),y=n("./generate"),b=n("./nodejsUtils"),x=n("./nodejs/NodejsStreamInputAdapter"),w=function(L){L.slice(-1)==="/"&&(L=L.substring(0,L.length-1));var B=L.lastIndexOf("/");return 0<B?L.substring(0,B):""},v=function(L){return L.slice(-1)!=="/"&&(L+="/"),L},_=function(L,B){return B=B!==void 0?B:d.createFolders,L=v(L),this.files[L]||i.call(this,L,null,{dir:!0,createFolders:B}),this.files[L]};function T(L){return Object.prototype.toString.call(L)==="[object RegExp]"}var P={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(L){var B,k,I;for(B in this.files)I=this.files[B],(k=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&L(k,I)},filter:function(L){var B=[];return this.forEach(function(k,I){L(k,I)&&B.push(I)}),B},file:function(L,B,k){if(arguments.length!==1)return L=this.root+L,i.call(this,L,B,k),this;if(T(L)){var I=L;return this.filter(function(N,U){return!U.dir&&I.test(N)})}var A=this.files[this.root+L];return A&&!A.dir?A:null},folder:function(L){if(!L)return this;if(T(L))return this.filter(function(A,N){return N.dir&&L.test(A)});var B=this.root+L,k=_.call(this,B),I=this.clone();return I.root=k.name,I},remove:function(L){L=this.root+L;var B=this.files[L];if(B||(L.slice(-1)!=="/"&&(L+="/"),B=this.files[L]),B&&!B.dir)delete this.files[L];else for(var k=this.filter(function(A,N){return N.name.slice(0,L.length)===L}),I=0;I<k.length;I++)delete this.files[k[I].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(L){var B,k={};try{if((k=a.extend(L||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");a.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var I=k.comment||this.comment||"";B=y.generateWorker(this,k,I)}catch(A){(B=new c("error")).error(A)}return new u(B,k.type||"string",k.mimeType)},generateAsync:function(L,B){return this.generateInternalStream(L).accumulate(B)},generateNodeStream:function(L,B){return(L=L||{}).type||(L.type="nodebuffer"),this.generateInternalStream(L).toNodejsStream(B)}};r.exports=P},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var c=0;c<this.data.length;c++)a[c]=255&a[c]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var c=a.charCodeAt(0),u=a.charCodeAt(1),d=a.charCodeAt(2),m=a.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===c&&this.data[g+1]===u&&this.data[g+2]===d&&this.data[g+3]===m)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var c=a.charCodeAt(0),u=a.charCodeAt(1),d=a.charCodeAt(2),m=a.charCodeAt(3),g=this.readData(4);return c===g[0]&&u===g[1]&&d===g[2]&&m===g[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var c,u=0;for(this.checkOffset(a),c=this.index+a-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=a,u},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),c=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(m){var g=i.getTypeOf(m);return i.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new u(m):o.uint8array?new d(i.transformTo("uint8array",m)):new a(i.transformTo("array",m)):new c(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(c){i.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(a,i),a.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(a,o),a.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}o.prototype.processChunk.call(this,c)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(c){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=i.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(c){a.processChunk(c)}),o.on("end",function(){a.end()}),o.on("error",function(c){a.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),c=n("../base64"),u=n("../support"),d=n("../external"),m=null;if(u.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(b,x){return new d.Promise(function(w,v){var _=[],T=b._internalType,P=b._outputType,L=b._mimeType;b.on("data",function(B,k){_.push(B),x&&x(k)}).on("error",function(B){_=[],v(B)}).on("end",function(){try{var B=function(k,I,A){switch(k){case"blob":return i.newBlob(i.transformTo("arraybuffer",I),A);case"base64":return c.encode(I);default:return i.transformTo(k,I)}}(P,function(k,I){var A,N=0,U=null,R=0;for(A=0;A<I.length;A++)R+=I[A].length;switch(k){case"string":return I.join("");case"array":return Array.prototype.concat.apply([],I);case"uint8array":for(U=new Uint8Array(R),A=0;A<I.length;A++)U.set(I[A],N),N+=I[A].length;return U;case"nodebuffer":return Buffer.concat(I);default:throw new Error("concat : unsupported type '"+k+"'")}}(T,_),L);w(B)}catch(k){v(k)}_=[]}).resume()})}function y(b,x,w){var v=x;switch(x){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=x,this._mimeType=w,i.checkSupport(v),this._worker=b.pipe(new o(v)),b.lock()}catch(_){this._worker=new a("error"),this._worker.error(_)}}y.prototype={accumulate:function(b){return g(this,b)},on:function(b,x){var w=this;return b==="data"?this._worker.on(b,function(v){x.call(w,v.data,v.meta)}):this._worker.on(b,function(){i.delay(x,arguments,w)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},b)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),c=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function m(){c.call(this,"utf-8 decode"),this.leftOver=null}function g(){c.call(this,"utf-8 encode")}s.utf8encode=function(y){return o.nodebuffer?a.newBufferFrom(y,"utf-8"):function(b){var x,w,v,_,T,P=b.length,L=0;for(_=0;_<P;_++)(64512&(w=b.charCodeAt(_)))==55296&&_+1<P&&(64512&(v=b.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(v-56320),_++),L+=w<128?1:w<2048?2:w<65536?3:4;for(x=o.uint8array?new Uint8Array(L):new Array(L),_=T=0;T<L;_++)(64512&(w=b.charCodeAt(_)))==55296&&_+1<P&&(64512&(v=b.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(v-56320),_++),w<128?x[T++]=w:(w<2048?x[T++]=192|w>>>6:(w<65536?x[T++]=224|w>>>12:(x[T++]=240|w>>>18,x[T++]=128|w>>>12&63),x[T++]=128|w>>>6&63),x[T++]=128|63&w);return x}(y)},s.utf8decode=function(y){return o.nodebuffer?i.transformTo("nodebuffer",y).toString("utf-8"):function(b){var x,w,v,_,T=b.length,P=new Array(2*T);for(x=w=0;x<T;)if((v=b[x++])<128)P[w++]=v;else if(4<(_=u[v]))P[w++]=65533,x+=_-1;else{for(v&=_===2?31:_===3?15:7;1<_&&x<T;)v=v<<6|63&b[x++],_--;1<_?P[w++]=65533:v<65536?P[w++]=v:(v-=65536,P[w++]=55296|v>>10&1023,P[w++]=56320|1023&v)}return P.length!==w&&(P.subarray?P=P.subarray(0,w):P.length=w),i.applyFromCharCode(P)}(y=i.transformTo(o.uint8array?"uint8array":"array",y))},i.inherits(m,c),m.prototype.processChunk=function(y){var b=i.transformTo(o.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=b;(b=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),b.set(x,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var w=function(_,T){var P;for((T=T||_.length)>_.length&&(T=_.length),P=T-1;0<=P&&(192&_[P])==128;)P--;return P<0||P===0?T:P+u[_[P]]>T?P:T}(b),v=b;w!==b.length&&(o.uint8array?(v=b.subarray(0,w),this.leftOver=b.subarray(w,b.length)):(v=b.slice(0,w),this.leftOver=b.slice(w,b.length))),this.push({data:s.utf8decode(v),meta:y.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=m,i.inherits(g,c),g.prototype.processChunk=function(y){this.push({data:s.utf8encode(y.data),meta:y.meta})},s.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),c=n("./external");function u(x){return x}function d(x,w){for(var v=0;v<x.length;++v)w[v]=255&x.charCodeAt(v);return w}n("setimmediate"),s.newBlob=function(x,w){s.checkSupport("blob");try{return new Blob([x],{type:w})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(x),v.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(x,w,v){var _=[],T=0,P=x.length;if(P<=v)return String.fromCharCode.apply(null,x);for(;T<P;)w==="array"||w==="nodebuffer"?_.push(String.fromCharCode.apply(null,x.slice(T,Math.min(T+v,P)))):_.push(String.fromCharCode.apply(null,x.subarray(T,Math.min(T+v,P)))),T+=v;return _.join("")},stringifyByChar:function(x){for(var w="",v=0;v<x.length;v++)w+=String.fromCharCode(x[v]);return w},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function g(x){var w=65536,v=s.getTypeOf(x),_=!0;if(v==="uint8array"?_=m.applyCanBeUsed.uint8array:v==="nodebuffer"&&(_=m.applyCanBeUsed.nodebuffer),_)for(;1<w;)try{return m.stringifyByChunk(x,v,w)}catch{w=Math.floor(w/2)}return m.stringifyByChar(x)}function y(x,w){for(var v=0;v<x.length;v++)w[v]=x[v];return w}s.applyFromCharCode=g;var b={};b.string={string:u,array:function(x){return d(x,new Array(x.length))},arraybuffer:function(x){return b.string.uint8array(x).buffer},uint8array:function(x){return d(x,new Uint8Array(x.length))},nodebuffer:function(x){return d(x,a.allocBuffer(x.length))}},b.array={string:g,array:u,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(x)}},b.arraybuffer={string:function(x){return g(new Uint8Array(x))},array:function(x){return y(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:u,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(new Uint8Array(x))}},b.uint8array={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:u,nodebuffer:function(x){return a.newBufferFrom(x)}},b.nodebuffer={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return b.nodebuffer.uint8array(x).buffer},uint8array:function(x){return y(x,new Uint8Array(x.length))},nodebuffer:u},s.transformTo=function(x,w){if(w=w||"",!x)return w;s.checkSupport(x);var v=s.getTypeOf(w);return b[v][x](w)},s.resolve=function(x){for(var w=x.split("/"),v=[],_=0;_<w.length;_++){var T=w[_];T==="."||T===""&&_!==0&&_!==w.length-1||(T===".."?v.pop():v.push(T))}return v.join("/")},s.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(x)?"nodebuffer":i.uint8array&&x instanceof Uint8Array?"uint8array":i.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(x){if(!i[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(x){var w,v,_="";for(v=0;v<(x||"").length;v++)_+="\\x"+((w=x.charCodeAt(v))<16?"0":"")+w.toString(16).toUpperCase();return _},s.delay=function(x,w,v){setImmediate(function(){x.apply(v||null,w||[])})},s.inherits=function(x,w){function v(){}v.prototype=w.prototype,x.prototype=new v},s.extend=function(){var x,w,v={};for(x=0;x<arguments.length;x++)for(w in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],w)&&v[w]===void 0&&(v[w]=arguments[x][w]);return v},s.prepareContent=function(x,w,v,_,T){return c.Promise.resolve(w).then(function(P){return i.blob&&(P instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(P))!==-1)&&typeof FileReader<"u"?new c.Promise(function(L,B){var k=new FileReader;k.onload=function(I){L(I.target.result)},k.onerror=function(I){B(I.target.error)},k.readAsArrayBuffer(P)}):P}).then(function(P){var L=s.getTypeOf(P);return L?(L==="arraybuffer"?P=s.transformTo("uint8array",P):L==="string"&&(T?P=o.decode(P):v&&_!==!0&&(P=function(B){return d(B,i.uint8array?new Uint8Array(B.length):new Array(B.length))}(P))),P):c.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),c=n("./zipEntry"),u=n("./support");function d(m){this.files=[],this.loadOptions=m}d.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(m)+")")}},isSignature:function(m,g){var y=this.reader.index;this.reader.setIndex(m);var b=this.reader.readString(4)===g;return this.reader.setIndex(y),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),g=u.uint8array?"uint8array":"array",y=o.transformTo(g,m);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,g,y,b=this.zip64EndOfCentralSize-44;0<b;)m=this.reader.readInt(2),g=this.reader.readInt(4),y=this.reader.readData(g),this.zip64ExtensibleData[m]={id:m,length:g,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,g;for(m=0;m<this.files.length;m++)g=this.files[m],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(m=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var g=m;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var b=g-y;if(0<b)this.isSignature(g,a.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),c=n("./crc32"),u=n("./utf8"),d=n("./compressions"),m=n("./support");function g(y,b){this.options=y,this.loadOptions=b}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var b,x;if(y.skip(22),this.fileNameLength=y.readInt(2),x=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(w){for(var v in d)if(Object.prototype.hasOwnProperty.call(d,v)&&d[v].magic===w)return d[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,b,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var b=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(b),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var b,x,w,v=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<v;)b=y.readInt(2),x=y.readInt(2),w=y.readData(x),this.extraFields[b]={id:b,length:x,value:w};y.setIndex(v)},handleUTF8:function(){var y=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var x=o.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var v=o.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var b=i(y.value);return b.readInt(1)!==1||c(this.fileName)!==b.readInt(4)?null:u.utf8decode(b.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var b=i(y.value);return b.readInt(1)!==1||c(this.fileComment)!==b.readInt(4)?null:u.utf8decode(b.readData(y.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(b,x,w){this.name=b,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=x,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),c=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(b){var x=null,w="string";try{if(!b)throw new Error("No output type specified.");var v=(w=b.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),x=this._decompressWorker();var _=!this._dataBinary;_&&!v&&(x=x.pipe(new c.Utf8EncodeWorker)),!_&&v&&(x=x.pipe(new c.Utf8DecodeWorker))}catch(T){(x=new d("error")).error(T)}return new o(x,w,"")},async:function(b,x){return this.internalStream(b).accumulate(x)},nodeStream:function(b,x){return this.internalStream(b||"nodebuffer").toNodejsStream(x)},_compressWorker:function(b,x){if(this._data instanceof u&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(w,b,x)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<m.length;y++)i.prototype[m[y]]=g;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var u=0,d=new c(b),m=i.document.createTextNode("");d.observe(m,{characterData:!0}),o=function(){m.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var x=i.document.createElement("script");x.onreadystatechange=function(){b(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},i.document.documentElement.appendChild(x)}:function(){setTimeout(b,0)};else{var g=new i.MessageChannel;g.port1.onmessage=b,o=function(){g.port2.postMessage(0)}}var y=[];function b(){var x,w;a=!0;for(var v=y.length;v;){for(w=y,y=[],x=-1;++x<v;)w[x]();v=y.length}a=!1}r.exports=function(x){y.push(x)!==1||a||o()}}).call(this,typeof cs<"u"?cs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},c=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function m(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,v!==o&&x(this,v)}function g(v,_,T){this.promise=v,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function y(v,_,T){i(function(){var P;try{P=_(T)}catch(L){return a.reject(v,L)}P===v?a.reject(v,new TypeError("Cannot resolve promise with itself")):a.resolve(v,P)})}function b(v){var _=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof _=="function")return function(){_.apply(v,arguments)}}function x(v,_){var T=!1;function P(k){T||(T=!0,a.reject(v,k))}function L(k){T||(T=!0,a.resolve(v,k))}var B=w(function(){_(L,P)});B.status==="error"&&P(B.value)}function w(v,_){var T={};try{T.value=v(_),T.status="success"}catch(P){T.status="error",T.value=P}return T}(r.exports=m).prototype.finally=function(v){if(typeof v!="function")return this;var _=this.constructor;return this.then(function(T){return _.resolve(v()).then(function(){return T})},function(T){return _.resolve(v()).then(function(){throw T})})},m.prototype.catch=function(v){return this.then(null,v)},m.prototype.then=function(v,_){if(typeof v!="function"&&this.state===u||typeof _!="function"&&this.state===c)return this;var T=new this.constructor(o);return this.state!==d?y(T,this.state===u?v:_,this.outcome):this.queue.push(new g(T,v,_)),T},g.prototype.callFulfilled=function(v){a.resolve(this.promise,v)},g.prototype.otherCallFulfilled=function(v){y(this.promise,this.onFulfilled,v)},g.prototype.callRejected=function(v){a.reject(this.promise,v)},g.prototype.otherCallRejected=function(v){y(this.promise,this.onRejected,v)},a.resolve=function(v,_){var T=w(b,_);if(T.status==="error")return a.reject(v,T.value);var P=T.value;if(P)x(v,P);else{v.state=u,v.outcome=_;for(var L=-1,B=v.queue.length;++L<B;)v.queue[L].callFulfilled(_)}return v},a.reject=function(v,_){v.state=c,v.outcome=_;for(var T=-1,P=v.queue.length;++T<P;)v.queue[T].callRejected(_);return v},m.resolve=function(v){return v instanceof this?v:a.resolve(new this(o),v)},m.reject=function(v){var _=new this(o);return a.reject(_,v)},m.all=function(v){var _=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=v.length,P=!1;if(!T)return this.resolve([]);for(var L=new Array(T),B=0,k=-1,I=new this(o);++k<T;)A(v[k],k);return I;function A(N,U){_.resolve(N).then(function(R){L[U]=R,++B!==T||P||(P=!0,a.resolve(I,L))},function(R){P||(P=!0,a.reject(I,R))})}},m.race=function(v){var _=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=v.length,P=!1;if(!T)return this.resolve([]);for(var L=-1,B=new this(o);++L<T;)k=v[L],_.resolve(k).then(function(I){P||(P=!0,a.resolve(B,I))},function(I){P||(P=!0,a.reject(B,I))});var k;return B}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,m=0,g=-1,y=0,b=8;function x(v){if(!(this instanceof x))return new x(v);this.options=o.assign({level:g,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},v||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var T=i.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(T!==m)throw new Error(c[T]);if(_.header&&i.deflateSetHeader(this.strm,_.header),_.dictionary){var P;if(P=typeof _.dictionary=="string"?a.string2buf(_.dictionary):d.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(T=i.deflateSetDictionary(this.strm,P))!==m)throw new Error(c[T]);this._dict_set=!0}}function w(v,_){var T=new x(_);if(T.push(v,!0),T.err)throw T.msg||c[T.err];return T.result}x.prototype.push=function(v,_){var T,P,L=this.strm,B=this.options.chunkSize;if(this.ended)return!1;P=_===~~_?_:_===!0?4:0,typeof v=="string"?L.input=a.string2buf(v):d.call(v)==="[object ArrayBuffer]"?L.input=new Uint8Array(v):L.input=v,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new o.Buf8(B),L.next_out=0,L.avail_out=B),(T=i.deflate(L,P))!==1&&T!==m)return this.onEnd(T),!(this.ended=!0);L.avail_out!==0&&(L.avail_in!==0||P!==4&&P!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(L.output,L.next_out))):this.onData(o.shrinkBuf(L.output,L.next_out)))}while((0<L.avail_in||L.avail_out===0)&&T!==1);return P===4?(T=i.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===m):P!==2||(this.onEnd(m),!(L.avail_out=0))},x.prototype.onData=function(v){this.chunks.push(v)},x.prototype.onEnd=function(v){v===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Deflate=x,s.deflate=w,s.deflateRaw=function(v,_){return(_=_||{}).raw=!0,w(v,_)},s.gzip=function(v,_){return(_=_||{}).gzip=!0,w(v,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),m=n("./zlib/gzheader"),g=Object.prototype.toString;function y(x){if(!(this instanceof y))return new y(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||x&&x.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&!(15&w.windowBits)&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var v=i.inflateInit2(this.strm,w.windowBits);if(v!==c.Z_OK)throw new Error(u[v]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function b(x,w){var v=new y(w);if(v.push(x,!0),v.err)throw v.msg||u[v.err];return v.result}y.prototype.push=function(x,w){var v,_,T,P,L,B,k=this.strm,I=this.options.chunkSize,A=this.options.dictionary,N=!1;if(this.ended)return!1;_=w===~~w?w:w===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof x=="string"?k.input=a.binstring2buf(x):g.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(I),k.next_out=0,k.avail_out=I),(v=i.inflate(k,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&A&&(B=typeof A=="string"?a.string2buf(A):g.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,v=i.inflateSetDictionary(this.strm,B)),v===c.Z_BUF_ERROR&&N===!0&&(v=c.Z_OK,N=!1),v!==c.Z_STREAM_END&&v!==c.Z_OK)return this.onEnd(v),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&v!==c.Z_STREAM_END&&(k.avail_in!==0||_!==c.Z_FINISH&&_!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=a.utf8border(k.output,k.next_out),P=k.next_out-T,L=a.buf2string(k.output,T),k.next_out=P,k.avail_out=I-P,P&&o.arraySet(k.output,k.output,T,P,0),this.onData(L)):this.onData(o.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(N=!0)}while((0<k.avail_in||k.avail_out===0)&&v!==c.Z_STREAM_END);return v===c.Z_STREAM_END&&(_=c.Z_FINISH),_===c.Z_FINISH?(v=i.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===c.Z_OK):_!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(k.avail_out=0))},y.prototype.onData=function(x){this.chunks.push(x)},y.prototype.onEnd=function(x){x===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},s.Inflate=y,s.inflate=b,s.inflateRaw=function(x,w){return(w=w||{}).raw=!0,b(x,w)},s.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var m in d)d.hasOwnProperty(m)&&(c[m]=d[m])}}return c},s.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var o={arraySet:function(c,u,d,m,g){if(u.subarray&&c.subarray)c.set(u.subarray(d,d+m),g);else for(var y=0;y<m;y++)c[g+y]=u[d+y]},flattenChunks:function(c){var u,d,m,g,y,b;for(u=m=0,d=c.length;u<d;u++)m+=c[u].length;for(b=new Uint8Array(m),u=g=0,d=c.length;u<d;u++)y=c[u],b.set(y,g),g+=y.length;return b}},a={arraySet:function(c,u,d,m,g){for(var y=0;y<m;y++)c[g+y]=u[d+y]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var c=new i.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(m,g){if(g<65537&&(m.subarray&&a||!m.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(m,g));for(var y="",b=0;b<g;b++)y+=String.fromCharCode(m[b]);return y}c[254]=c[254]=1,s.string2buf=function(m){var g,y,b,x,w,v=m.length,_=0;for(x=0;x<v;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(b=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(b-56320),x++),_+=y<128?1:y<2048?2:y<65536?3:4;for(g=new i.Buf8(_),x=w=0;w<_;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(b=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(b-56320),x++),y<128?g[w++]=y:(y<2048?g[w++]=192|y>>>6:(y<65536?g[w++]=224|y>>>12:(g[w++]=240|y>>>18,g[w++]=128|y>>>12&63),g[w++]=128|y>>>6&63),g[w++]=128|63&y);return g},s.buf2binstring=function(m){return d(m,m.length)},s.binstring2buf=function(m){for(var g=new i.Buf8(m.length),y=0,b=g.length;y<b;y++)g[y]=m.charCodeAt(y);return g},s.buf2string=function(m,g){var y,b,x,w,v=g||m.length,_=new Array(2*v);for(y=b=0;y<v;)if((x=m[y++])<128)_[b++]=x;else if(4<(w=c[x]))_[b++]=65533,y+=w-1;else{for(x&=w===2?31:w===3?15:7;1<w&&y<v;)x=x<<6|63&m[y++],w--;1<w?_[b++]=65533:x<65536?_[b++]=x:(x-=65536,_[b++]=55296|x>>10&1023,_[b++]=56320|1023&x)}return d(_,b)},s.utf8border=function(m,g){var y;for((g=g||m.length)>m.length&&(g=m.length),y=g-1;0<=y&&(192&m[y])==128;)y--;return y<0||y===0?g:y+c[m[y]]>g?y:g}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,c){for(var u=65535&i|0,d=i>>>16&65535|0,m=0;a!==0;){for(a-=m=2e3<a?2e3:a;d=d+(u=u+o[c++]|0)|0,--m;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[c]=o}return a}();r.exports=function(o,a,c,u){var d=i,m=u+c;o^=-1;for(var g=u;g<m;g++)o=o>>>8^d[255&(o^a[g])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),c=n("./adler32"),u=n("./crc32"),d=n("./messages"),m=0,g=4,y=0,b=-2,x=-1,w=4,v=2,_=8,T=9,P=286,L=30,B=19,k=2*P+1,I=15,A=3,N=258,U=N+A+1,R=42,D=113,M=1,H=2,ye=3,re=4;function ne(C,ie){return C.msg=d[ie],ie}function Y(C){return(C<<1)-(4<C?9:0)}function ue(C){for(var ie=C.length;0<=--ie;)C[ie]=0}function q(C){var ie=C.state,Q=ie.pending;Q>C.avail_out&&(Q=C.avail_out),Q!==0&&(o.arraySet(C.output,ie.pending_buf,ie.pending_out,Q,C.next_out),C.next_out+=Q,ie.pending_out+=Q,C.total_out+=Q,C.avail_out-=Q,ie.pending-=Q,ie.pending===0&&(ie.pending_out=0))}function z(C,ie){a._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,ie),C.block_start=C.strstart,q(C.strm)}function X(C,ie){C.pending_buf[C.pending++]=ie}function le(C,ie){C.pending_buf[C.pending++]=ie>>>8&255,C.pending_buf[C.pending++]=255&ie}function ae(C,ie){var Q,F,V=C.max_chain_length,G=C.strstart,Z=C.prev_length,oe=C.nice_match,K=C.strstart>C.w_size-U?C.strstart-(C.w_size-U):0,he=C.window,ve=C.w_mask,me=C.prev,_e=C.strstart+N,Ne=he[G+Z-1],Le=he[G+Z];C.prev_length>=C.good_match&&(V>>=2),oe>C.lookahead&&(oe=C.lookahead);do if(he[(Q=ie)+Z]===Le&&he[Q+Z-1]===Ne&&he[Q]===he[G]&&he[++Q]===he[G+1]){G+=2,Q++;do;while(he[++G]===he[++Q]&&he[++G]===he[++Q]&&he[++G]===he[++Q]&&he[++G]===he[++Q]&&he[++G]===he[++Q]&&he[++G]===he[++Q]&&he[++G]===he[++Q]&&he[++G]===he[++Q]&&G<_e);if(F=N-(_e-G),G=_e-N,Z<F){if(C.match_start=ie,oe<=(Z=F))break;Ne=he[G+Z-1],Le=he[G+Z]}}while((ie=me[ie&ve])>K&&--V!=0);return Z<=C.lookahead?Z:C.lookahead}function Ae(C){var ie,Q,F,V,G,Z,oe,K,he,ve,me=C.w_size;do{if(V=C.window_size-C.lookahead-C.strstart,C.strstart>=me+(me-U)){for(o.arraySet(C.window,C.window,me,me,0),C.match_start-=me,C.strstart-=me,C.block_start-=me,ie=Q=C.hash_size;F=C.head[--ie],C.head[ie]=me<=F?F-me:0,--Q;);for(ie=Q=me;F=C.prev[--ie],C.prev[ie]=me<=F?F-me:0,--Q;);V+=me}if(C.strm.avail_in===0)break;if(Z=C.strm,oe=C.window,K=C.strstart+C.lookahead,he=V,ve=void 0,ve=Z.avail_in,he<ve&&(ve=he),Q=ve===0?0:(Z.avail_in-=ve,o.arraySet(oe,Z.input,Z.next_in,ve,K),Z.state.wrap===1?Z.adler=c(Z.adler,oe,ve,K):Z.state.wrap===2&&(Z.adler=u(Z.adler,oe,ve,K)),Z.next_in+=ve,Z.total_in+=ve,ve),C.lookahead+=Q,C.lookahead+C.insert>=A)for(G=C.strstart-C.insert,C.ins_h=C.window[G],C.ins_h=(C.ins_h<<C.hash_shift^C.window[G+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[G+A-1])&C.hash_mask,C.prev[G&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=G,G++,C.insert--,!(C.lookahead+C.insert<A)););}while(C.lookahead<U&&C.strm.avail_in!==0)}function we(C,ie){for(var Q,F;;){if(C.lookahead<U){if(Ae(C),C.lookahead<U&&ie===m)return M;if(C.lookahead===0)break}if(Q=0,C.lookahead>=A&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+A-1])&C.hash_mask,Q=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),Q!==0&&C.strstart-Q<=C.w_size-U&&(C.match_length=ae(C,Q)),C.match_length>=A)if(F=a._tr_tally(C,C.strstart-C.match_start,C.match_length-A),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=A){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+A-1])&C.hash_mask,Q=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else F=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(F&&(z(C,!1),C.strm.avail_out===0))return M}return C.insert=C.strstart<A-1?C.strstart:A-1,ie===g?(z(C,!0),C.strm.avail_out===0?ye:re):C.last_lit&&(z(C,!1),C.strm.avail_out===0)?M:H}function Se(C,ie){for(var Q,F,V;;){if(C.lookahead<U){if(Ae(C),C.lookahead<U&&ie===m)return M;if(C.lookahead===0)break}if(Q=0,C.lookahead>=A&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+A-1])&C.hash_mask,Q=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=A-1,Q!==0&&C.prev_length<C.max_lazy_match&&C.strstart-Q<=C.w_size-U&&(C.match_length=ae(C,Q),C.match_length<=5&&(C.strategy===1||C.match_length===A&&4096<C.strstart-C.match_start)&&(C.match_length=A-1)),C.prev_length>=A&&C.match_length<=C.prev_length){for(V=C.strstart+C.lookahead-A,F=a._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-A),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=V&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+A-1])&C.hash_mask,Q=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=A-1,C.strstart++,F&&(z(C,!1),C.strm.avail_out===0))return M}else if(C.match_available){if((F=a._tr_tally(C,0,C.window[C.strstart-1]))&&z(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return M}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(F=a._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<A-1?C.strstart:A-1,ie===g?(z(C,!0),C.strm.avail_out===0?ye:re):C.last_lit&&(z(C,!1),C.strm.avail_out===0)?M:H}function ke(C,ie,Q,F,V){this.good_length=C,this.max_lazy=ie,this.nice_length=Q,this.max_chain=F,this.func=V}function qe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*k),this.dyn_dtree=new o.Buf16(2*(2*L+1)),this.bl_tree=new o.Buf16(2*(2*B+1)),ue(this.dyn_ltree),ue(this.dyn_dtree),ue(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(I+1),this.heap=new o.Buf16(2*P+1),ue(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*P+1),ue(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Be(C){var ie;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=v,(ie=C.state).pending=0,ie.pending_out=0,ie.wrap<0&&(ie.wrap=-ie.wrap),ie.status=ie.wrap?R:D,C.adler=ie.wrap===2?0:1,ie.last_flush=m,a._tr_init(ie),y):ne(C,b)}function pt(C){var ie=Be(C);return ie===y&&function(Q){Q.window_size=2*Q.w_size,ue(Q.head),Q.max_lazy_match=i[Q.level].max_lazy,Q.good_match=i[Q.level].good_length,Q.nice_match=i[Q.level].nice_length,Q.max_chain_length=i[Q.level].max_chain,Q.strstart=0,Q.block_start=0,Q.lookahead=0,Q.insert=0,Q.match_length=Q.prev_length=A-1,Q.match_available=0,Q.ins_h=0}(C.state),ie}function it(C,ie,Q,F,V,G){if(!C)return b;var Z=1;if(ie===x&&(ie=6),F<0?(Z=0,F=-F):15<F&&(Z=2,F-=16),V<1||T<V||Q!==_||F<8||15<F||ie<0||9<ie||G<0||w<G)return ne(C,b);F===8&&(F=9);var oe=new qe;return(C.state=oe).strm=C,oe.wrap=Z,oe.gzhead=null,oe.w_bits=F,oe.w_size=1<<oe.w_bits,oe.w_mask=oe.w_size-1,oe.hash_bits=V+7,oe.hash_size=1<<oe.hash_bits,oe.hash_mask=oe.hash_size-1,oe.hash_shift=~~((oe.hash_bits+A-1)/A),oe.window=new o.Buf8(2*oe.w_size),oe.head=new o.Buf16(oe.hash_size),oe.prev=new o.Buf16(oe.w_size),oe.lit_bufsize=1<<V+6,oe.pending_buf_size=4*oe.lit_bufsize,oe.pending_buf=new o.Buf8(oe.pending_buf_size),oe.d_buf=1*oe.lit_bufsize,oe.l_buf=3*oe.lit_bufsize,oe.level=ie,oe.strategy=G,oe.method=Q,pt(C)}i=[new ke(0,0,0,0,function(C,ie){var Q=65535;for(Q>C.pending_buf_size-5&&(Q=C.pending_buf_size-5);;){if(C.lookahead<=1){if(Ae(C),C.lookahead===0&&ie===m)return M;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var F=C.block_start+Q;if((C.strstart===0||C.strstart>=F)&&(C.lookahead=C.strstart-F,C.strstart=F,z(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-U&&(z(C,!1),C.strm.avail_out===0))return M}return C.insert=0,ie===g?(z(C,!0),C.strm.avail_out===0?ye:re):(C.strstart>C.block_start&&(z(C,!1),C.strm.avail_out),M)}),new ke(4,4,8,4,we),new ke(4,5,16,8,we),new ke(4,6,32,32,we),new ke(4,4,16,16,Se),new ke(8,16,32,32,Se),new ke(8,16,128,128,Se),new ke(8,32,128,256,Se),new ke(32,128,258,1024,Se),new ke(32,258,258,4096,Se)],s.deflateInit=function(C,ie){return it(C,ie,_,15,8,0)},s.deflateInit2=it,s.deflateReset=pt,s.deflateResetKeep=Be,s.deflateSetHeader=function(C,ie){return C&&C.state?C.state.wrap!==2?b:(C.state.gzhead=ie,y):b},s.deflate=function(C,ie){var Q,F,V,G;if(!C||!C.state||5<ie||ie<0)return C?ne(C,b):b;if(F=C.state,!C.output||!C.input&&C.avail_in!==0||F.status===666&&ie!==g)return ne(C,C.avail_out===0?-5:b);if(F.strm=C,Q=F.last_flush,F.last_flush=ie,F.status===R)if(F.wrap===2)C.adler=0,X(F,31),X(F,139),X(F,8),F.gzhead?(X(F,(F.gzhead.text?1:0)+(F.gzhead.hcrc?2:0)+(F.gzhead.extra?4:0)+(F.gzhead.name?8:0)+(F.gzhead.comment?16:0)),X(F,255&F.gzhead.time),X(F,F.gzhead.time>>8&255),X(F,F.gzhead.time>>16&255),X(F,F.gzhead.time>>24&255),X(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),X(F,255&F.gzhead.os),F.gzhead.extra&&F.gzhead.extra.length&&(X(F,255&F.gzhead.extra.length),X(F,F.gzhead.extra.length>>8&255)),F.gzhead.hcrc&&(C.adler=u(C.adler,F.pending_buf,F.pending,0)),F.gzindex=0,F.status=69):(X(F,0),X(F,0),X(F,0),X(F,0),X(F,0),X(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),X(F,3),F.status=D);else{var Z=_+(F.w_bits-8<<4)<<8;Z|=(2<=F.strategy||F.level<2?0:F.level<6?1:F.level===6?2:3)<<6,F.strstart!==0&&(Z|=32),Z+=31-Z%31,F.status=D,le(F,Z),F.strstart!==0&&(le(F,C.adler>>>16),le(F,65535&C.adler)),C.adler=1}if(F.status===69)if(F.gzhead.extra){for(V=F.pending;F.gzindex<(65535&F.gzhead.extra.length)&&(F.pending!==F.pending_buf_size||(F.gzhead.hcrc&&F.pending>V&&(C.adler=u(C.adler,F.pending_buf,F.pending-V,V)),q(C),V=F.pending,F.pending!==F.pending_buf_size));)X(F,255&F.gzhead.extra[F.gzindex]),F.gzindex++;F.gzhead.hcrc&&F.pending>V&&(C.adler=u(C.adler,F.pending_buf,F.pending-V,V)),F.gzindex===F.gzhead.extra.length&&(F.gzindex=0,F.status=73)}else F.status=73;if(F.status===73)if(F.gzhead.name){V=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>V&&(C.adler=u(C.adler,F.pending_buf,F.pending-V,V)),q(C),V=F.pending,F.pending===F.pending_buf_size)){G=1;break}G=F.gzindex<F.gzhead.name.length?255&F.gzhead.name.charCodeAt(F.gzindex++):0,X(F,G)}while(G!==0);F.gzhead.hcrc&&F.pending>V&&(C.adler=u(C.adler,F.pending_buf,F.pending-V,V)),G===0&&(F.gzindex=0,F.status=91)}else F.status=91;if(F.status===91)if(F.gzhead.comment){V=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>V&&(C.adler=u(C.adler,F.pending_buf,F.pending-V,V)),q(C),V=F.pending,F.pending===F.pending_buf_size)){G=1;break}G=F.gzindex<F.gzhead.comment.length?255&F.gzhead.comment.charCodeAt(F.gzindex++):0,X(F,G)}while(G!==0);F.gzhead.hcrc&&F.pending>V&&(C.adler=u(C.adler,F.pending_buf,F.pending-V,V)),G===0&&(F.status=103)}else F.status=103;if(F.status===103&&(F.gzhead.hcrc?(F.pending+2>F.pending_buf_size&&q(C),F.pending+2<=F.pending_buf_size&&(X(F,255&C.adler),X(F,C.adler>>8&255),C.adler=0,F.status=D)):F.status=D),F.pending!==0){if(q(C),C.avail_out===0)return F.last_flush=-1,y}else if(C.avail_in===0&&Y(ie)<=Y(Q)&&ie!==g)return ne(C,-5);if(F.status===666&&C.avail_in!==0)return ne(C,-5);if(C.avail_in!==0||F.lookahead!==0||ie!==m&&F.status!==666){var oe=F.strategy===2?function(K,he){for(var ve;;){if(K.lookahead===0&&(Ae(K),K.lookahead===0)){if(he===m)return M;break}if(K.match_length=0,ve=a._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++,ve&&(z(K,!1),K.strm.avail_out===0))return M}return K.insert=0,he===g?(z(K,!0),K.strm.avail_out===0?ye:re):K.last_lit&&(z(K,!1),K.strm.avail_out===0)?M:H}(F,ie):F.strategy===3?function(K,he){for(var ve,me,_e,Ne,Le=K.window;;){if(K.lookahead<=N){if(Ae(K),K.lookahead<=N&&he===m)return M;if(K.lookahead===0)break}if(K.match_length=0,K.lookahead>=A&&0<K.strstart&&(me=Le[_e=K.strstart-1])===Le[++_e]&&me===Le[++_e]&&me===Le[++_e]){Ne=K.strstart+N;do;while(me===Le[++_e]&&me===Le[++_e]&&me===Le[++_e]&&me===Le[++_e]&&me===Le[++_e]&&me===Le[++_e]&&me===Le[++_e]&&me===Le[++_e]&&_e<Ne);K.match_length=N-(Ne-_e),K.match_length>K.lookahead&&(K.match_length=K.lookahead)}if(K.match_length>=A?(ve=a._tr_tally(K,1,K.match_length-A),K.lookahead-=K.match_length,K.strstart+=K.match_length,K.match_length=0):(ve=a._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++),ve&&(z(K,!1),K.strm.avail_out===0))return M}return K.insert=0,he===g?(z(K,!0),K.strm.avail_out===0?ye:re):K.last_lit&&(z(K,!1),K.strm.avail_out===0)?M:H}(F,ie):i[F.level].func(F,ie);if(oe!==ye&&oe!==re||(F.status=666),oe===M||oe===ye)return C.avail_out===0&&(F.last_flush=-1),y;if(oe===H&&(ie===1?a._tr_align(F):ie!==5&&(a._tr_stored_block(F,0,0,!1),ie===3&&(ue(F.head),F.lookahead===0&&(F.strstart=0,F.block_start=0,F.insert=0))),q(C),C.avail_out===0))return F.last_flush=-1,y}return ie!==g?y:F.wrap<=0?1:(F.wrap===2?(X(F,255&C.adler),X(F,C.adler>>8&255),X(F,C.adler>>16&255),X(F,C.adler>>24&255),X(F,255&C.total_in),X(F,C.total_in>>8&255),X(F,C.total_in>>16&255),X(F,C.total_in>>24&255)):(le(F,C.adler>>>16),le(F,65535&C.adler)),q(C),0<F.wrap&&(F.wrap=-F.wrap),F.pending!==0?y:1)},s.deflateEnd=function(C){var ie;return C&&C.state?(ie=C.state.status)!==R&&ie!==69&&ie!==73&&ie!==91&&ie!==103&&ie!==D&&ie!==666?ne(C,b):(C.state=null,ie===D?ne(C,-3):y):b},s.deflateSetDictionary=function(C,ie){var Q,F,V,G,Z,oe,K,he,ve=ie.length;if(!C||!C.state||(G=(Q=C.state).wrap)===2||G===1&&Q.status!==R||Q.lookahead)return b;for(G===1&&(C.adler=c(C.adler,ie,ve,0)),Q.wrap=0,ve>=Q.w_size&&(G===0&&(ue(Q.head),Q.strstart=0,Q.block_start=0,Q.insert=0),he=new o.Buf8(Q.w_size),o.arraySet(he,ie,ve-Q.w_size,Q.w_size,0),ie=he,ve=Q.w_size),Z=C.avail_in,oe=C.next_in,K=C.input,C.avail_in=ve,C.next_in=0,C.input=ie,Ae(Q);Q.lookahead>=A;){for(F=Q.strstart,V=Q.lookahead-(A-1);Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[F+A-1])&Q.hash_mask,Q.prev[F&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=F,F++,--V;);Q.strstart=F,Q.lookahead=A-1,Ae(Q)}return Q.strstart+=Q.lookahead,Q.block_start=Q.strstart,Q.insert=Q.lookahead,Q.lookahead=0,Q.match_length=Q.prev_length=A-1,Q.match_available=0,C.next_in=oe,C.input=K,C.avail_in=Z,Q.wrap=G,y},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,c,u,d,m,g,y,b,x,w,v,_,T,P,L,B,k,I,A,N,U,R,D,M,H;a=i.state,c=i.next_in,M=i.input,u=c+(i.avail_in-5),d=i.next_out,H=i.output,m=d-(o-i.avail_out),g=d+(i.avail_out-257),y=a.dmax,b=a.wsize,x=a.whave,w=a.wnext,v=a.window,_=a.hold,T=a.bits,P=a.lencode,L=a.distcode,B=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{T<15&&(_+=M[c++]<<T,T+=8,_+=M[c++]<<T,T+=8),I=P[_&B];t:for(;;){if(_>>>=A=I>>>24,T-=A,(A=I>>>16&255)===0)H[d++]=65535&I;else{if(!(16&A)){if(!(64&A)){I=P[(65535&I)+(_&(1<<A)-1)];continue t}if(32&A){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}N=65535&I,(A&=15)&&(T<A&&(_+=M[c++]<<T,T+=8),N+=_&(1<<A)-1,_>>>=A,T-=A),T<15&&(_+=M[c++]<<T,T+=8,_+=M[c++]<<T,T+=8),I=L[_&k];n:for(;;){if(_>>>=A=I>>>24,T-=A,!(16&(A=I>>>16&255))){if(!(64&A)){I=L[(65535&I)+(_&(1<<A)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(U=65535&I,T<(A&=15)&&(_+=M[c++]<<T,(T+=8)<A&&(_+=M[c++]<<T,T+=8)),y<(U+=_&(1<<A)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(_>>>=A,T-=A,(A=d-m)<U){if(x<(A=U-A)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(D=v,(R=0)===w){if(R+=b-A,A<N){for(N-=A;H[d++]=v[R++],--A;);R=d-U,D=H}}else if(w<A){if(R+=b+w-A,(A-=w)<N){for(N-=A;H[d++]=v[R++],--A;);if(R=0,w<N){for(N-=A=w;H[d++]=v[R++],--A;);R=d-U,D=H}}}else if(R+=w-A,A<N){for(N-=A;H[d++]=v[R++],--A;);R=d-U,D=H}for(;2<N;)H[d++]=D[R++],H[d++]=D[R++],H[d++]=D[R++],N-=3;N&&(H[d++]=D[R++],1<N&&(H[d++]=D[R++]))}else{for(R=d-U;H[d++]=H[R++],H[d++]=H[R++],H[d++]=H[R++],2<(N-=3););N&&(H[d++]=H[R++],1<N&&(H[d++]=H[R++]))}break}}break}}while(c<u&&d<g);c-=N=T>>3,_&=(1<<(T-=N<<3))-1,i.next_in=c,i.next_out=d,i.avail_in=c<u?u-c+5:5-(c-u),i.avail_out=d<g?g-d+257:257-(d-g),a.hold=_,a.bits=T}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),c=n("./inffast"),u=n("./inftrees"),d=1,m=2,g=0,y=-2,b=1,x=852,w=592;function v(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(R){var D;return R&&R.state?(D=R.state,R.total_in=R.total_out=D.total=0,R.msg="",D.wrap&&(R.adler=1&D.wrap),D.mode=b,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new i.Buf32(x),D.distcode=D.distdyn=new i.Buf32(w),D.sane=1,D.back=-1,g):y}function P(R){var D;return R&&R.state?((D=R.state).wsize=0,D.whave=0,D.wnext=0,T(R)):y}function L(R,D){var M,H;return R&&R.state?(H=R.state,D<0?(M=0,D=-D):(M=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?y:(H.window!==null&&H.wbits!==D&&(H.window=null),H.wrap=M,H.wbits=D,P(R))):y}function B(R,D){var M,H;return R?(H=new _,(R.state=H).window=null,(M=L(R,D))!==g&&(R.state=null),M):y}var k,I,A=!0;function N(R){if(A){var D;for(k=new i.Buf32(512),I=new i.Buf32(32),D=0;D<144;)R.lens[D++]=8;for(;D<256;)R.lens[D++]=9;for(;D<280;)R.lens[D++]=7;for(;D<288;)R.lens[D++]=8;for(u(d,R.lens,0,288,k,0,R.work,{bits:9}),D=0;D<32;)R.lens[D++]=5;u(m,R.lens,0,32,I,0,R.work,{bits:5}),A=!1}R.lencode=k,R.lenbits=9,R.distcode=I,R.distbits=5}function U(R,D,M,H){var ye,re=R.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new i.Buf8(re.wsize)),H>=re.wsize?(i.arraySet(re.window,D,M-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(H<(ye=re.wsize-re.wnext)&&(ye=H),i.arraySet(re.window,D,M-H,ye,re.wnext),(H-=ye)?(i.arraySet(re.window,D,M-H,H,0),re.wnext=H,re.whave=re.wsize):(re.wnext+=ye,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=ye))),0}s.inflateReset=P,s.inflateReset2=L,s.inflateResetKeep=T,s.inflateInit=function(R){return B(R,15)},s.inflateInit2=B,s.inflate=function(R,D){var M,H,ye,re,ne,Y,ue,q,z,X,le,ae,Ae,we,Se,ke,qe,Be,pt,it,C,ie,Q,F,V=0,G=new i.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return y;(M=R.state).mode===12&&(M.mode=13),ne=R.next_out,ye=R.output,ue=R.avail_out,re=R.next_in,H=R.input,Y=R.avail_in,q=M.hold,z=M.bits,X=Y,le=ue,ie=g;e:for(;;)switch(M.mode){case b:if(M.wrap===0){M.mode=13;break}for(;z<16;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}if(2&M.wrap&&q===35615){G[M.check=0]=255&q,G[1]=q>>>8&255,M.check=a(M.check,G,2,0),z=q=0,M.mode=2;break}if(M.flags=0,M.head&&(M.head.done=!1),!(1&M.wrap)||(((255&q)<<8)+(q>>8))%31){R.msg="incorrect header check",M.mode=30;break}if((15&q)!=8){R.msg="unknown compression method",M.mode=30;break}if(z-=4,C=8+(15&(q>>>=4)),M.wbits===0)M.wbits=C;else if(C>M.wbits){R.msg="invalid window size",M.mode=30;break}M.dmax=1<<C,R.adler=M.check=1,M.mode=512&q?10:12,z=q=0;break;case 2:for(;z<16;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}if(M.flags=q,(255&M.flags)!=8){R.msg="unknown compression method",M.mode=30;break}if(57344&M.flags){R.msg="unknown header flags set",M.mode=30;break}M.head&&(M.head.text=q>>8&1),512&M.flags&&(G[0]=255&q,G[1]=q>>>8&255,M.check=a(M.check,G,2,0)),z=q=0,M.mode=3;case 3:for(;z<32;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}M.head&&(M.head.time=q),512&M.flags&&(G[0]=255&q,G[1]=q>>>8&255,G[2]=q>>>16&255,G[3]=q>>>24&255,M.check=a(M.check,G,4,0)),z=q=0,M.mode=4;case 4:for(;z<16;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}M.head&&(M.head.xflags=255&q,M.head.os=q>>8),512&M.flags&&(G[0]=255&q,G[1]=q>>>8&255,M.check=a(M.check,G,2,0)),z=q=0,M.mode=5;case 5:if(1024&M.flags){for(;z<16;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}M.length=q,M.head&&(M.head.extra_len=q),512&M.flags&&(G[0]=255&q,G[1]=q>>>8&255,M.check=a(M.check,G,2,0)),z=q=0}else M.head&&(M.head.extra=null);M.mode=6;case 6:if(1024&M.flags&&(Y<(ae=M.length)&&(ae=Y),ae&&(M.head&&(C=M.head.extra_len-M.length,M.head.extra||(M.head.extra=new Array(M.head.extra_len)),i.arraySet(M.head.extra,H,re,ae,C)),512&M.flags&&(M.check=a(M.check,H,ae,re)),Y-=ae,re+=ae,M.length-=ae),M.length))break e;M.length=0,M.mode=7;case 7:if(2048&M.flags){if(Y===0)break e;for(ae=0;C=H[re+ae++],M.head&&C&&M.length<65536&&(M.head.name+=String.fromCharCode(C)),C&&ae<Y;);if(512&M.flags&&(M.check=a(M.check,H,ae,re)),Y-=ae,re+=ae,C)break e}else M.head&&(M.head.name=null);M.length=0,M.mode=8;case 8:if(4096&M.flags){if(Y===0)break e;for(ae=0;C=H[re+ae++],M.head&&C&&M.length<65536&&(M.head.comment+=String.fromCharCode(C)),C&&ae<Y;);if(512&M.flags&&(M.check=a(M.check,H,ae,re)),Y-=ae,re+=ae,C)break e}else M.head&&(M.head.comment=null);M.mode=9;case 9:if(512&M.flags){for(;z<16;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}if(q!==(65535&M.check)){R.msg="header crc mismatch",M.mode=30;break}z=q=0}M.head&&(M.head.hcrc=M.flags>>9&1,M.head.done=!0),R.adler=M.check=0,M.mode=12;break;case 10:for(;z<32;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}R.adler=M.check=v(q),z=q=0,M.mode=11;case 11:if(M.havedict===0)return R.next_out=ne,R.avail_out=ue,R.next_in=re,R.avail_in=Y,M.hold=q,M.bits=z,2;R.adler=M.check=1,M.mode=12;case 12:if(D===5||D===6)break e;case 13:if(M.last){q>>>=7&z,z-=7&z,M.mode=27;break}for(;z<3;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}switch(M.last=1&q,z-=1,3&(q>>>=1)){case 0:M.mode=14;break;case 1:if(N(M),M.mode=20,D!==6)break;q>>>=2,z-=2;break e;case 2:M.mode=17;break;case 3:R.msg="invalid block type",M.mode=30}q>>>=2,z-=2;break;case 14:for(q>>>=7&z,z-=7&z;z<32;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}if((65535&q)!=(q>>>16^65535)){R.msg="invalid stored block lengths",M.mode=30;break}if(M.length=65535&q,z=q=0,M.mode=15,D===6)break e;case 15:M.mode=16;case 16:if(ae=M.length){if(Y<ae&&(ae=Y),ue<ae&&(ae=ue),ae===0)break e;i.arraySet(ye,H,re,ae,ne),Y-=ae,re+=ae,ue-=ae,ne+=ae,M.length-=ae;break}M.mode=12;break;case 17:for(;z<14;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}if(M.nlen=257+(31&q),q>>>=5,z-=5,M.ndist=1+(31&q),q>>>=5,z-=5,M.ncode=4+(15&q),q>>>=4,z-=4,286<M.nlen||30<M.ndist){R.msg="too many length or distance symbols",M.mode=30;break}M.have=0,M.mode=18;case 18:for(;M.have<M.ncode;){for(;z<3;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}M.lens[Z[M.have++]]=7&q,q>>>=3,z-=3}for(;M.have<19;)M.lens[Z[M.have++]]=0;if(M.lencode=M.lendyn,M.lenbits=7,Q={bits:M.lenbits},ie=u(0,M.lens,0,19,M.lencode,0,M.work,Q),M.lenbits=Q.bits,ie){R.msg="invalid code lengths set",M.mode=30;break}M.have=0,M.mode=19;case 19:for(;M.have<M.nlen+M.ndist;){for(;ke=(V=M.lencode[q&(1<<M.lenbits)-1])>>>16&255,qe=65535&V,!((Se=V>>>24)<=z);){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}if(qe<16)q>>>=Se,z-=Se,M.lens[M.have++]=qe;else{if(qe===16){for(F=Se+2;z<F;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}if(q>>>=Se,z-=Se,M.have===0){R.msg="invalid bit length repeat",M.mode=30;break}C=M.lens[M.have-1],ae=3+(3&q),q>>>=2,z-=2}else if(qe===17){for(F=Se+3;z<F;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}z-=Se,C=0,ae=3+(7&(q>>>=Se)),q>>>=3,z-=3}else{for(F=Se+7;z<F;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}z-=Se,C=0,ae=11+(127&(q>>>=Se)),q>>>=7,z-=7}if(M.have+ae>M.nlen+M.ndist){R.msg="invalid bit length repeat",M.mode=30;break}for(;ae--;)M.lens[M.have++]=C}}if(M.mode===30)break;if(M.lens[256]===0){R.msg="invalid code -- missing end-of-block",M.mode=30;break}if(M.lenbits=9,Q={bits:M.lenbits},ie=u(d,M.lens,0,M.nlen,M.lencode,0,M.work,Q),M.lenbits=Q.bits,ie){R.msg="invalid literal/lengths set",M.mode=30;break}if(M.distbits=6,M.distcode=M.distdyn,Q={bits:M.distbits},ie=u(m,M.lens,M.nlen,M.ndist,M.distcode,0,M.work,Q),M.distbits=Q.bits,ie){R.msg="invalid distances set",M.mode=30;break}if(M.mode=20,D===6)break e;case 20:M.mode=21;case 21:if(6<=Y&&258<=ue){R.next_out=ne,R.avail_out=ue,R.next_in=re,R.avail_in=Y,M.hold=q,M.bits=z,c(R,le),ne=R.next_out,ye=R.output,ue=R.avail_out,re=R.next_in,H=R.input,Y=R.avail_in,q=M.hold,z=M.bits,M.mode===12&&(M.back=-1);break}for(M.back=0;ke=(V=M.lencode[q&(1<<M.lenbits)-1])>>>16&255,qe=65535&V,!((Se=V>>>24)<=z);){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}if(ke&&!(240&ke)){for(Be=Se,pt=ke,it=qe;ke=(V=M.lencode[it+((q&(1<<Be+pt)-1)>>Be)])>>>16&255,qe=65535&V,!(Be+(Se=V>>>24)<=z);){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}q>>>=Be,z-=Be,M.back+=Be}if(q>>>=Se,z-=Se,M.back+=Se,M.length=qe,ke===0){M.mode=26;break}if(32&ke){M.back=-1,M.mode=12;break}if(64&ke){R.msg="invalid literal/length code",M.mode=30;break}M.extra=15&ke,M.mode=22;case 22:if(M.extra){for(F=M.extra;z<F;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}M.length+=q&(1<<M.extra)-1,q>>>=M.extra,z-=M.extra,M.back+=M.extra}M.was=M.length,M.mode=23;case 23:for(;ke=(V=M.distcode[q&(1<<M.distbits)-1])>>>16&255,qe=65535&V,!((Se=V>>>24)<=z);){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}if(!(240&ke)){for(Be=Se,pt=ke,it=qe;ke=(V=M.distcode[it+((q&(1<<Be+pt)-1)>>Be)])>>>16&255,qe=65535&V,!(Be+(Se=V>>>24)<=z);){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}q>>>=Be,z-=Be,M.back+=Be}if(q>>>=Se,z-=Se,M.back+=Se,64&ke){R.msg="invalid distance code",M.mode=30;break}M.offset=qe,M.extra=15&ke,M.mode=24;case 24:if(M.extra){for(F=M.extra;z<F;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}M.offset+=q&(1<<M.extra)-1,q>>>=M.extra,z-=M.extra,M.back+=M.extra}if(M.offset>M.dmax){R.msg="invalid distance too far back",M.mode=30;break}M.mode=25;case 25:if(ue===0)break e;if(ae=le-ue,M.offset>ae){if((ae=M.offset-ae)>M.whave&&M.sane){R.msg="invalid distance too far back",M.mode=30;break}Ae=ae>M.wnext?(ae-=M.wnext,M.wsize-ae):M.wnext-ae,ae>M.length&&(ae=M.length),we=M.window}else we=ye,Ae=ne-M.offset,ae=M.length;for(ue<ae&&(ae=ue),ue-=ae,M.length-=ae;ye[ne++]=we[Ae++],--ae;);M.length===0&&(M.mode=21);break;case 26:if(ue===0)break e;ye[ne++]=M.length,ue--,M.mode=21;break;case 27:if(M.wrap){for(;z<32;){if(Y===0)break e;Y--,q|=H[re++]<<z,z+=8}if(le-=ue,R.total_out+=le,M.total+=le,le&&(R.adler=M.check=M.flags?a(M.check,ye,le,ne-le):o(M.check,ye,le,ne-le)),le=ue,(M.flags?q:v(q))!==M.check){R.msg="incorrect data check",M.mode=30;break}z=q=0}M.mode=28;case 28:if(M.wrap&&M.flags){for(;z<32;){if(Y===0)break e;Y--,q+=H[re++]<<z,z+=8}if(q!==(4294967295&M.total)){R.msg="incorrect length check",M.mode=30;break}z=q=0}M.mode=29;case 29:ie=1;break e;case 30:ie=-3;break e;case 31:return-4;case 32:default:return y}return R.next_out=ne,R.avail_out=ue,R.next_in=re,R.avail_in=Y,M.hold=q,M.bits=z,(M.wsize||le!==R.avail_out&&M.mode<30&&(M.mode<27||D!==4))&&U(R,R.output,R.next_out,le-R.avail_out)?(M.mode=31,-4):(X-=R.avail_in,le-=R.avail_out,R.total_in+=X,R.total_out+=le,M.total+=le,M.wrap&&le&&(R.adler=M.check=M.flags?a(M.check,ye,le,R.next_out-le):o(M.check,ye,le,R.next_out-le)),R.data_type=M.bits+(M.last?64:0)+(M.mode===12?128:0)+(M.mode===20||M.mode===15?256:0),(X==0&&le===0||D===4)&&ie===g&&(ie=-5),ie)},s.inflateEnd=function(R){if(!R||!R.state)return y;var D=R.state;return D.window&&(D.window=null),R.state=null,g},s.inflateGetHeader=function(R,D){var M;return R&&R.state&&2&(M=R.state).wrap?((M.head=D).done=!1,g):y},s.inflateSetDictionary=function(R,D){var M,H=D.length;return R&&R.state?(M=R.state).wrap!==0&&M.mode!==11?y:M.mode===11&&o(1,D,H,0)!==M.check?-3:U(R,D,H,H)?(M.mode=31,-4):(M.havedict=1,g):y},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,m,g,y,b,x,w,v){var _,T,P,L,B,k,I,A,N,U=v.bits,R=0,D=0,M=0,H=0,ye=0,re=0,ne=0,Y=0,ue=0,q=0,z=null,X=0,le=new i.Buf16(16),ae=new i.Buf16(16),Ae=null,we=0;for(R=0;R<=15;R++)le[R]=0;for(D=0;D<y;D++)le[m[g+D]]++;for(ye=U,H=15;1<=H&&le[H]===0;H--);if(H<ye&&(ye=H),H===0)return b[x++]=20971520,b[x++]=20971520,v.bits=1,0;for(M=1;M<H&&le[M]===0;M++);for(ye<M&&(ye=M),R=Y=1;R<=15;R++)if(Y<<=1,(Y-=le[R])<0)return-1;if(0<Y&&(d===0||H!==1))return-1;for(ae[1]=0,R=1;R<15;R++)ae[R+1]=ae[R]+le[R];for(D=0;D<y;D++)m[g+D]!==0&&(w[ae[m[g+D]]++]=D);if(k=d===0?(z=Ae=w,19):d===1?(z=o,X-=257,Ae=a,we-=257,256):(z=c,Ae=u,-1),R=M,B=x,ne=D=q=0,P=-1,L=(ue=1<<(re=ye))-1,d===1&&852<ue||d===2&&592<ue)return 1;for(;;){for(I=R-ne,N=w[D]<k?(A=0,w[D]):w[D]>k?(A=Ae[we+w[D]],z[X+w[D]]):(A=96,0),_=1<<R-ne,M=T=1<<re;b[B+(q>>ne)+(T-=_)]=I<<24|A<<16|N|0,T!==0;);for(_=1<<R-1;q&_;)_>>=1;if(_!==0?(q&=_-1,q+=_):q=0,D++,--le[R]==0){if(R===H)break;R=m[g+w[D]]}if(ye<R&&(q&L)!==P){for(ne===0&&(ne=ye),B+=M,Y=1<<(re=R-ne);re+ne<H&&!((Y-=le[re+ne])<=0);)re++,Y<<=1;if(ue+=1<<re,d===1&&852<ue||d===2&&592<ue)return 1;b[P=q&L]=ye<<24|re<<16|B-x|0}}return q!==0&&(b[B+q]=R-ne<<24|64<<16|0),v.bits=ye,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function c(V){for(var G=V.length;0<=--G;)V[G]=0}var u=0,d=29,m=256,g=m+1+d,y=30,b=19,x=2*g+1,w=15,v=16,_=7,T=256,P=16,L=17,B=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=new Array(2*(g+2));c(U);var R=new Array(2*y);c(R);var D=new Array(512);c(D);var M=new Array(256);c(M);var H=new Array(d);c(H);var ye,re,ne,Y=new Array(y);function ue(V,G,Z,oe,K){this.static_tree=V,this.extra_bits=G,this.extra_base=Z,this.elems=oe,this.max_length=K,this.has_stree=V&&V.length}function q(V,G){this.dyn_tree=V,this.max_code=0,this.stat_desc=G}function z(V){return V<256?D[V]:D[256+(V>>>7)]}function X(V,G){V.pending_buf[V.pending++]=255&G,V.pending_buf[V.pending++]=G>>>8&255}function le(V,G,Z){V.bi_valid>v-Z?(V.bi_buf|=G<<V.bi_valid&65535,X(V,V.bi_buf),V.bi_buf=G>>v-V.bi_valid,V.bi_valid+=Z-v):(V.bi_buf|=G<<V.bi_valid&65535,V.bi_valid+=Z)}function ae(V,G,Z){le(V,Z[2*G],Z[2*G+1])}function Ae(V,G){for(var Z=0;Z|=1&V,V>>>=1,Z<<=1,0<--G;);return Z>>>1}function we(V,G,Z){var oe,K,he=new Array(w+1),ve=0;for(oe=1;oe<=w;oe++)he[oe]=ve=ve+Z[oe-1]<<1;for(K=0;K<=G;K++){var me=V[2*K+1];me!==0&&(V[2*K]=Ae(he[me]++,me))}}function Se(V){var G;for(G=0;G<g;G++)V.dyn_ltree[2*G]=0;for(G=0;G<y;G++)V.dyn_dtree[2*G]=0;for(G=0;G<b;G++)V.bl_tree[2*G]=0;V.dyn_ltree[2*T]=1,V.opt_len=V.static_len=0,V.last_lit=V.matches=0}function ke(V){8<V.bi_valid?X(V,V.bi_buf):0<V.bi_valid&&(V.pending_buf[V.pending++]=V.bi_buf),V.bi_buf=0,V.bi_valid=0}function qe(V,G,Z,oe){var K=2*G,he=2*Z;return V[K]<V[he]||V[K]===V[he]&&oe[G]<=oe[Z]}function Be(V,G,Z){for(var oe=V.heap[Z],K=Z<<1;K<=V.heap_len&&(K<V.heap_len&&qe(G,V.heap[K+1],V.heap[K],V.depth)&&K++,!qe(G,oe,V.heap[K],V.depth));)V.heap[Z]=V.heap[K],Z=K,K<<=1;V.heap[Z]=oe}function pt(V,G,Z){var oe,K,he,ve,me=0;if(V.last_lit!==0)for(;oe=V.pending_buf[V.d_buf+2*me]<<8|V.pending_buf[V.d_buf+2*me+1],K=V.pending_buf[V.l_buf+me],me++,oe===0?ae(V,K,G):(ae(V,(he=M[K])+m+1,G),(ve=k[he])!==0&&le(V,K-=H[he],ve),ae(V,he=z(--oe),Z),(ve=I[he])!==0&&le(V,oe-=Y[he],ve)),me<V.last_lit;);ae(V,T,G)}function it(V,G){var Z,oe,K,he=G.dyn_tree,ve=G.stat_desc.static_tree,me=G.stat_desc.has_stree,_e=G.stat_desc.elems,Ne=-1;for(V.heap_len=0,V.heap_max=x,Z=0;Z<_e;Z++)he[2*Z]!==0?(V.heap[++V.heap_len]=Ne=Z,V.depth[Z]=0):he[2*Z+1]=0;for(;V.heap_len<2;)he[2*(K=V.heap[++V.heap_len]=Ne<2?++Ne:0)]=1,V.depth[K]=0,V.opt_len--,me&&(V.static_len-=ve[2*K+1]);for(G.max_code=Ne,Z=V.heap_len>>1;1<=Z;Z--)Be(V,he,Z);for(K=_e;Z=V.heap[1],V.heap[1]=V.heap[V.heap_len--],Be(V,he,1),oe=V.heap[1],V.heap[--V.heap_max]=Z,V.heap[--V.heap_max]=oe,he[2*K]=he[2*Z]+he[2*oe],V.depth[K]=(V.depth[Z]>=V.depth[oe]?V.depth[Z]:V.depth[oe])+1,he[2*Z+1]=he[2*oe+1]=K,V.heap[1]=K++,Be(V,he,1),2<=V.heap_len;);V.heap[--V.heap_max]=V.heap[1],function(Le,kt){var En,zt,se,de,De,We,et=kt.dyn_tree,Lt=kt.max_code,yt=kt.stat_desc.static_tree,Wt=kt.stat_desc.has_stree,ln=kt.stat_desc.extra_bits,jt=kt.stat_desc.extra_base,Dn=kt.stat_desc.max_length,Ln=0;for(de=0;de<=w;de++)Le.bl_count[de]=0;for(et[2*Le.heap[Le.heap_max]+1]=0,En=Le.heap_max+1;En<x;En++)Dn<(de=et[2*et[2*(zt=Le.heap[En])+1]+1]+1)&&(de=Dn,Ln++),et[2*zt+1]=de,Lt<zt||(Le.bl_count[de]++,De=0,jt<=zt&&(De=ln[zt-jt]),We=et[2*zt],Le.opt_len+=We*(de+De),Wt&&(Le.static_len+=We*(yt[2*zt+1]+De)));if(Ln!==0){do{for(de=Dn-1;Le.bl_count[de]===0;)de--;Le.bl_count[de]--,Le.bl_count[de+1]+=2,Le.bl_count[Dn]--,Ln-=2}while(0<Ln);for(de=Dn;de!==0;de--)for(zt=Le.bl_count[de];zt!==0;)Lt<(se=Le.heap[--En])||(et[2*se+1]!==de&&(Le.opt_len+=(de-et[2*se+1])*et[2*se],et[2*se+1]=de),zt--)}}(V,G),we(he,Ne,V.bl_count)}function C(V,G,Z){var oe,K,he=-1,ve=G[1],me=0,_e=7,Ne=4;for(ve===0&&(_e=138,Ne=3),G[2*(Z+1)+1]=65535,oe=0;oe<=Z;oe++)K=ve,ve=G[2*(oe+1)+1],++me<_e&&K===ve||(me<Ne?V.bl_tree[2*K]+=me:K!==0?(K!==he&&V.bl_tree[2*K]++,V.bl_tree[2*P]++):me<=10?V.bl_tree[2*L]++:V.bl_tree[2*B]++,he=K,Ne=(me=0)===ve?(_e=138,3):K===ve?(_e=6,3):(_e=7,4))}function ie(V,G,Z){var oe,K,he=-1,ve=G[1],me=0,_e=7,Ne=4;for(ve===0&&(_e=138,Ne=3),oe=0;oe<=Z;oe++)if(K=ve,ve=G[2*(oe+1)+1],!(++me<_e&&K===ve)){if(me<Ne)for(;ae(V,K,V.bl_tree),--me!=0;);else K!==0?(K!==he&&(ae(V,K,V.bl_tree),me--),ae(V,P,V.bl_tree),le(V,me-3,2)):me<=10?(ae(V,L,V.bl_tree),le(V,me-3,3)):(ae(V,B,V.bl_tree),le(V,me-11,7));he=K,Ne=(me=0)===ve?(_e=138,3):K===ve?(_e=6,3):(_e=7,4)}}c(Y);var Q=!1;function F(V,G,Z,oe){le(V,(u<<1)+(oe?1:0),3),function(K,he,ve,me){ke(K),X(K,ve),X(K,~ve),i.arraySet(K.pending_buf,K.window,he,ve,K.pending),K.pending+=ve}(V,G,Z)}s._tr_init=function(V){Q||(function(){var G,Z,oe,K,he,ve=new Array(w+1);for(K=oe=0;K<d-1;K++)for(H[K]=oe,G=0;G<1<<k[K];G++)M[oe++]=K;for(M[oe-1]=K,K=he=0;K<16;K++)for(Y[K]=he,G=0;G<1<<I[K];G++)D[he++]=K;for(he>>=7;K<y;K++)for(Y[K]=he<<7,G=0;G<1<<I[K]-7;G++)D[256+he++]=K;for(Z=0;Z<=w;Z++)ve[Z]=0;for(G=0;G<=143;)U[2*G+1]=8,G++,ve[8]++;for(;G<=255;)U[2*G+1]=9,G++,ve[9]++;for(;G<=279;)U[2*G+1]=7,G++,ve[7]++;for(;G<=287;)U[2*G+1]=8,G++,ve[8]++;for(we(U,g+1,ve),G=0;G<y;G++)R[2*G+1]=5,R[2*G]=Ae(G,5);ye=new ue(U,k,m+1,g,w),re=new ue(R,I,0,y,w),ne=new ue(new Array(0),A,0,b,_)}(),Q=!0),V.l_desc=new q(V.dyn_ltree,ye),V.d_desc=new q(V.dyn_dtree,re),V.bl_desc=new q(V.bl_tree,ne),V.bi_buf=0,V.bi_valid=0,Se(V)},s._tr_stored_block=F,s._tr_flush_block=function(V,G,Z,oe){var K,he,ve=0;0<V.level?(V.strm.data_type===2&&(V.strm.data_type=function(me){var _e,Ne=4093624447;for(_e=0;_e<=31;_e++,Ne>>>=1)if(1&Ne&&me.dyn_ltree[2*_e]!==0)return o;if(me.dyn_ltree[18]!==0||me.dyn_ltree[20]!==0||me.dyn_ltree[26]!==0)return a;for(_e=32;_e<m;_e++)if(me.dyn_ltree[2*_e]!==0)return a;return o}(V)),it(V,V.l_desc),it(V,V.d_desc),ve=function(me){var _e;for(C(me,me.dyn_ltree,me.l_desc.max_code),C(me,me.dyn_dtree,me.d_desc.max_code),it(me,me.bl_desc),_e=b-1;3<=_e&&me.bl_tree[2*N[_e]+1]===0;_e--);return me.opt_len+=3*(_e+1)+5+5+4,_e}(V),K=V.opt_len+3+7>>>3,(he=V.static_len+3+7>>>3)<=K&&(K=he)):K=he=Z+5,Z+4<=K&&G!==-1?F(V,G,Z,oe):V.strategy===4||he===K?(le(V,2+(oe?1:0),3),pt(V,U,R)):(le(V,4+(oe?1:0),3),function(me,_e,Ne,Le){var kt;for(le(me,_e-257,5),le(me,Ne-1,5),le(me,Le-4,4),kt=0;kt<Le;kt++)le(me,me.bl_tree[2*N[kt]+1],3);ie(me,me.dyn_ltree,_e-1),ie(me,me.dyn_dtree,Ne-1)}(V,V.l_desc.max_code+1,V.d_desc.max_code+1,ve+1),pt(V,V.dyn_ltree,V.dyn_dtree)),Se(V),oe&&ke(V)},s._tr_tally=function(V,G,Z){return V.pending_buf[V.d_buf+2*V.last_lit]=G>>>8&255,V.pending_buf[V.d_buf+2*V.last_lit+1]=255&G,V.pending_buf[V.l_buf+V.last_lit]=255&Z,V.last_lit++,G===0?V.dyn_ltree[2*Z]++:(V.matches++,G--,V.dyn_ltree[2*(M[Z]+m+1)]++,V.dyn_dtree[2*z(G)]++),V.last_lit===V.lit_bufsize-1},s._tr_align=function(V){le(V,2,3),ae(V,T,U),function(G){G.bi_valid===16?(X(G,G.bi_buf),G.bi_buf=0,G.bi_valid=0):8<=G.bi_valid&&(G.pending_buf[G.pending++]=255&G.bi_buf,G.bi_buf>>=8,G.bi_valid-=8)}(V)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var c,u,d,m,g=1,y={},b=!1,x=o.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(o);w=w&&w.setTimeout?w:o,c={}.toString.call(o.process)==="[object process]"?function(P){process.nextTick(function(){_(P)})}:function(){if(o.postMessage&&!o.importScripts){var P=!0,L=o.onmessage;return o.onmessage=function(){P=!1},o.postMessage("","*"),o.onmessage=L,P}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",T,!1):o.attachEvent("onmessage",T),function(P){o.postMessage(m+P,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(P){_(P.data)},function(P){d.port2.postMessage(P)}):x&&"onreadystatechange"in x.createElement("script")?(u=x.documentElement,function(P){var L=x.createElement("script");L.onreadystatechange=function(){_(P),L.onreadystatechange=null,u.removeChild(L),L=null},u.appendChild(L)}):function(P){setTimeout(_,0,P)},w.setImmediate=function(P){typeof P!="function"&&(P=new Function(""+P));for(var L=new Array(arguments.length-1),B=0;B<L.length;B++)L[B]=arguments[B+1];var k={callback:P,args:L};return y[g]=k,c(g),g++},w.clearImmediate=v}function v(P){delete y[P]}function _(P){if(b)setTimeout(_,0,P);else{var L=y[P];if(L){b=!0;try{(function(B){var k=B.callback,I=B.args;switch(I.length){case 0:k();break;case 1:k(I[0]);break;case 2:k(I[0],I[1]);break;case 3:k(I[0],I[1],I[2]);break;default:k.apply(a,I)}})(L)}finally{v(P),b=!1}}}}function T(P){P.source===o&&typeof P.data=="string"&&P.data.indexOf(m)===0&&_(+P.data.slice(m.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof cs<"u"?cs:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ck);var E8=Ck.exports;const T8=Fm(E8);var Ak={exports:{}};(function(t,e){(function(n,r){r()})(cs,function(){function n(u,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,d,m){var g=new XMLHttpRequest;g.open("GET",u),g.responseType="blob",g.onload=function(){c(g.response,d,m)},g.onerror=function(){console.error("could not download file")},g.send()}function s(u){var d=new XMLHttpRequest;d.open("HEAD",u,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function i(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof cs=="object"&&cs.global===cs?cs:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(u,d,m){var g=o.URL||o.webkitURL,y=document.createElement("a");d=d||u.name||"download",y.download=d,y.rel="noopener",typeof u=="string"?(y.href=u,y.origin===location.origin?i(y):s(y.href)?r(u,d,m):i(y,y.target="_blank")):(y.href=g.createObjectURL(u),setTimeout(function(){g.revokeObjectURL(y.href)},4e4),setTimeout(function(){i(y)},0))}:"msSaveOrOpenBlob"in navigator?function(u,d,m){if(d=d||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,m),d);else if(s(u))r(u,d,m);else{var g=document.createElement("a");g.href=u,g.target="_blank",setTimeout(function(){i(g)})}}:function(u,d,m,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof u=="string")return r(u,d,m);var y=u.type==="application/octet-stream",b=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||y&&b||a)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var T=w.result;T=x?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=T:location=T,g=null},w.readAsDataURL(u)}else{var v=o.URL||o.webkitURL,_=v.createObjectURL(u);g?g.location=_:location.href=_,g=null,setTimeout(function(){v.revokeObjectURL(_)},4e4)}});o.saveAs=c.saveAs=c,t.exports=c})})(Ak);var I8=Ak.exports;const S8=Fm(I8),Ni=1080,ob=[{name:"Animal",items:["https://cdn-icons-png.flaticon.com/256/4193/4193243.png","https://cdn-icons-png.flaticon.com/256/4193/4193245.png","https://cdn-icons-png.flaticon.com/256/4193/4193247.png","https://cdn-icons-png.flaticon.com/256/4193/4193251.png","https://cdn-icons-png.flaticon.com/256/4193/4193254.png","https://cdn-icons-png.flaticon.com/256/4193/4193256.png","https://cdn-icons-png.flaticon.com/256/4193/4193260.png","https://cdn-icons-png.flaticon.com/256/4193/4193263.png","https://cdn-icons-png.flaticon.com/256/4193/4193266.png","https://cdn-icons-png.flaticon.com/256/4193/4193269.png","https://cdn-icons-png.flaticon.com/256/4193/4193273.png","https://cdn-icons-png.flaticon.com/256/4193/4193275.png","https://cdn-icons-png.flaticon.com/256/4193/4193279.png"]},{name:"Food",items:["https://cdn-icons-png.flaticon.com/256/4359/4359613.png","https://cdn-icons-png.flaticon.com/256/4359/4359623.png","https://cdn-icons-png.flaticon.com/256/4359/4359633.png","https://cdn-icons-png.flaticon.com/256/4359/4359642.png","https://cdn-icons-png.flaticon.com/256/4359/4359651.png","https://cdn-icons-png.flaticon.com/256/4359/4359658.png","https://cdn-icons-png.flaticon.com/256/4359/4359672.png","https://cdn-icons-png.flaticon.com/256/4359/4359682.png","https://cdn-icons-png.flaticon.com/256/4359/4359692.png","https://cdn-icons-png.flaticon.com/256/4359/4359703.png","https://cdn-icons-png.flaticon.com/256/4359/4359725.png","https://cdn-icons-png.flaticon.com/256/4359/4359746.png","https://cdn-icons-png.flaticon.com/256/4359/4359763.png","https://cdn-icons-png.flaticon.com/256/4359/4359781.png","https://cdn-icons-png.flaticon.com/256/4359/4359814.png","https://cdn-icons-png.flaticon.com/256/4359/4359840.png","https://cdn-icons-png.flaticon.com/256/4359/4359859.png","https://cdn-icons-png.flaticon.com/256/4359/4359883.png","https://cdn-icons-png.flaticon.com/256/4359/4359904.png","https://cdn-icons-png.flaticon.com/256/4359/4359922.png"]}],k8=({onExit:t})=>{var Er,bi,Ct,Ei,lr,Qe,yo,Ti,Tr,vo,xo,is,Ii;const[e,n]=j.useState([]),[r,s]=j.useState(null),[i,o]=j.useState([[]]),[a,c]=j.useState(0),[u,d]=j.useState(.5),[m,g]=j.useState({x:0,y:0}),[y,b]=j.useState(3),[x,w]=j.useState("square"),[v,_]=j.useState("#ffffff"),[T,P]=j.useState(!1),[L,B]=j.useState("add"),[k,I]=j.useState(null),[A,N]=j.useState("none"),[U,R]=j.useState(null),[D,M]=j.useState(!1),[H,ye]=j.useState(null),[re,ne]=j.useState(""),Y=j.useRef(null),ue=j.useRef(null),q=j.useRef(!1),z=j.useRef(!1),X=j.useRef({x:0,y:0}),le=j.useRef({x:0,y:0}),ae=j.useRef({x:0,y:0}),Ae=j.useRef(!1),we=j.useRef(!1),Se=j.useRef({x:0,y:0}),ke=j.useRef(!1),qe=j.useRef({x:0,y:0,w:0,h:0}),Be=j.useRef(null),pt=x==="square"?Ni:Ni*5/4,it=y*Ni,C=pt;j.useEffect(()=>{const $=()=>R(null);return window.addEventListener("click",$),()=>window.removeEventListener("click",$)},[]);const ie=$=>{const pe=Math.max(100,$.length*42+50),Pe=60*2,He=`<svg xmlns="http://www.w3.org/2000/svg" width="${pe}" height="${Pe}" viewBox="0 0 ${pe} ${Pe}">
            <text x="50%" y="50%" font-family="Arial, sans-serif" font-size="60" font-weight="bold" fill="#0f172a" text-anchor="middle" dominant-baseline="middle">${$}</text>
        </svg>`;try{return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(He)))}`}catch(ct){return console.error("Text encoding failed",ct),`data:image/svg+xml;base64,${btoa(He)}`}},Q=$=>{let ee="";return $==="circle"?ee='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><circle cx="100" cy="100" r="100" fill="#1e293b"/></svg>':$==="square"?ee='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect width="200" height="200" fill="#334155"/></svg>':$==="triangle"?ee='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 10 L190 190 L10 190 Z" fill="#475569"/></svg>':$==="star"?ee='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="m100 10 25 60 65 5-50 45 15 65-55-35-55 35 15-65-50-45 65-5z" fill="#0f172a"/></svg>':$==="heart"&&(ee='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 180 C10 100 -20 50 40 20 C70 5 90 30 100 50 C110 30 130 5 160 20 C220 50 190 100 100 180 Z" fill="#ef4444"/></svg>'),`data:image/svg+xml;base64,${btoa(ee)}`},F=$=>{const ee=i.slice(0,a+1);ee.push($),o(ee),c(ee.length-1)},V=()=>{if(a>0){const $=a-1;n(i[$]),c($)}else a===0&&(n([]),c(-1))},G=$=>{n($),F($)},Z=($,ee="image",pe)=>{const Pe=new Image;Pe.crossOrigin="anonymous",Pe.onload=()=>{const He=Pe.width/Pe.height,ct={id:Date.now().toString(),type:ee,textContent:pe,src:$,x:it/2-Pe.width/2,y:C/2-Pe.height/2,width:Pe.width,height:Pe.height,originalAspectRatio:He,currentAspectRatio:He,rotation:0,scaleX:1,borderRadius:0,borderColor:"#000000",borderWidth:0,isGrayscale:!1,maskShape:"none"};ct.width>1200&&(ct.width=1200,ct.height=1200/ct.originalAspectRatio);const tt=[...e,ct];G(tt),s(ct.id),N("none")},Pe.src=$},oe=()=>{const $="Double Tap to Edit";Z(ie($),"text",$),R(null)},K=$=>{if($.target.files&&$.target.files[0]){const ee=$.target.files[0],pe=new FileReader;pe.onload=Pe=>{var He;(He=Pe.target)!=null&&He.result&&Z(Pe.target.result,"image")},pe.readAsDataURL(ee)}$.target.value=""},he=()=>{if(!r)return;const $=e.filter(ee=>ee.id!==r);G($),s(null),N("none")},ve=()=>{if(!r)return;const $=e.find(ee=>ee.id===r);if($){const ee={...$,id:Date.now().toString(),x:$.x+50,y:$.y+50},pe=[...e,ee];G(pe),s(ee.id),N("none")}},me=()=>{const $=e.find(ee=>ee.id===r);!$||$.type!=="text"||(ye($.id),ne($.textContent||""),N("none"))},_e=()=>{if(!H)return;const $=re.trim()===""?" ":re,ee=ie($),pe=new Image;pe.onload=()=>{const Pe=pe.width/pe.height,He=e.map(ct=>ct.id===H?{...ct,src:ee,textContent:$,width:pe.width,height:pe.height,originalAspectRatio:Pe,currentAspectRatio:Pe}:ct);G(He),ye(null)},pe.src=ee},Ne=($,ee=!0)=>{if(!r)return;const pe=e.map(Pe=>Pe.id===r?{...Pe,...$}:Pe);ee?G(pe):n(pe)},Le=()=>{const $=e.find(ee=>ee.id===r);$&&Ne({rotation:($.rotation+90)%360})},kt=()=>{const $=e.find(ee=>ee.id===r);$&&Ne({scaleX:$.scaleX*-1})},En=()=>{if(!r)return;const $=e.find(Pe=>Pe.id===r);if(!$)return;let ee=$.originalAspectRatio;Math.abs($.currentAspectRatio-$.originalAspectRatio)<.01?ee=1:Math.abs($.currentAspectRatio-1)<.01?ee=.8:Math.abs($.currentAspectRatio-.8)<.01?ee=1.77:ee=$.originalAspectRatio;const pe=$.width/ee;Ne({currentAspectRatio:ee,height:pe})},zt=$=>{n(ee=>{const pe=ee.find(He=>He.id===$);return pe?[...ee.filter(He=>He.id!==$),pe]:ee})},se=$=>{if(!r)return;const ee=e.findIndex(Pe=>Pe.id===r);if(ee===-1)return;const pe=[...e];if($==="front"){const[Pe]=pe.splice(ee,1);pe.push(Pe)}else if($==="back"){const[Pe]=pe.splice(ee,1);pe.unshift(Pe)}else $==="forward"&&ee<pe.length-1?[pe[ee],pe[ee+1]]=[pe[ee+1],pe[ee]]:$==="backward"&&ee>0&&([pe[ee],pe[ee-1]]=[pe[ee-1],pe[ee]]);G(pe)},de=async()=>{M(!0);try{const $=document.createElement("canvas");$.width=it,$.height=C;const ee=$.getContext("2d");if(!ee)throw new Error("Canvas context failed");ee.fillStyle=v,ee.fillRect(0,0,it,C);const pe=tt=>new Promise(qn=>{const cn=new Image;cn.crossOrigin="anonymous",cn.onload=()=>{ee.save();const $r=tt.x+tt.width/2,Ir=tt.y+tt.height/2;ee.translate($r,Ir),ee.rotate(tt.rotation*Math.PI/180),ee.scale(tt.scaleX,1),tt.isGrayscale&&(ee.filter="grayscale(100%)");const Sr=tt.width,un=tt.height,cr=-Sr/2,Tn=-un/2;if(ee.beginPath(),tt.maskShape==="circle"){const Si=Math.min(Sr,un)/2;ee.arc(0,0,Si,0,Math.PI*2)}else(tt.maskShape==="square"||tt.borderRadius>0)&&ee.roundRect?ee.roundRect(cr,Tn,Sr,un,tt.borderRadius):ee.rect(cr,Tn,Sr,un);ee.closePath(),ee.save(),ee.clip(),ee.drawImage(cn,cr,Tn,Sr,un),ee.restore(),ee.filter="none",tt.borderWidth>0&&(ee.lineWidth=tt.borderWidth,ee.strokeStyle=tt.borderColor,ee.stroke()),ee.restore(),qn()},cn.src=tt.src});await Promise.all(e.map(pe));const Pe=new T8,He=Pe.folder("instagram-panorama");for(let tt=0;tt<y;tt++){const qn=document.createElement("canvas");qn.width=Ni,qn.height=pt;const cn=qn.getContext("2d");if(cn){cn.drawImage($,tt*Ni,0,Ni,pt,0,0,Ni,pt);const $r=await new Promise(Ir=>qn.toBlob(Ir,"image/jpeg",.95));$r&&He&&He.file(`slide_${tt+1}.jpg`,$r)}}const ct=await Pe.generateAsync({type:"blob"});S8.saveAs(ct,"ig-panorama-slides.zip")}catch{alert("Gagal membuat zip.")}finally{M(!1)}},De=$=>{$.ctrlKey&&$.preventDefault();const ee=-$.deltaY*.001,pe=Math.min(Math.max(.05,u+ee),3);d(pe)},We=$=>{const ee=$.target;(ee===ue.current||ee.classList.contains("canvas-bg"))&&!q.current&&$.pointerType==="mouse"&&(z.current=!0,X.current={x:$.clientX,y:$.clientY},ae.current={...m},$.button===0&&(s(null),ye(null),N("none")))},et=$=>{$.preventDefault(),R({x:$.clientX,y:$.clientY})},Lt=$=>{if(z.current){const ee=$.clientX-X.current.x,pe=$.clientY-X.current.y;g({x:ae.current.x+ee,y:ae.current.y+pe});return}if(q.current&&r){Math.hypot($.clientX-Se.current.x,$.clientY-Se.current.y)>3&&(Ae.current=!0);const pe=($.clientX-X.current.x)/u,Pe=($.clientY-X.current.y)/u;n(He=>He.map(ct=>ct.id===r?{...ct,x:le.current.x+pe,y:le.current.y+Pe}:ct));return}if(ke.current&&r){const ee=($.clientX-qe.current.x)/u,pe=Math.max(50,qe.current.w+ee);n(Pe=>Pe.map(He=>He.id===r?{...He,width:pe,height:pe/He.currentAspectRatio}:He))}},yt=()=>{(q.current||ke.current)&&F(e),q.current=!1,ke.current=!1,z.current=!1,Be.current=null},Wt=($,ee,pe)=>{if(H)return;we.current=r===pe,s(pe),N("none"),zt(pe),q.current=!0,Ae.current=!1,Se.current={x:$,y:ee},X.current={x:$,y:ee};const Pe=e.find(He=>He.id===pe);Pe&&(le.current={x:Pe.x,y:Pe.y})},ln=($,ee)=>{$.stopPropagation(),$.preventDefault();const pe="touches"in $?$.touches[0].clientX:$.clientX,Pe="touches"in $?$.touches[0].clientY:$.clientY;ke.current=!0;const He=e.find(ct=>ct.id===ee);He&&(qe.current={x:pe,y:Pe,w:He.width,h:He.height})},jt=$=>{!Ae.current&&we.current,yt()},Dn=$=>{const ee=e.find(pe=>pe.id===$);ee&&ee.type==="text"&&me()},Ln=$=>{if($.touches.length===2){$.preventDefault(),z.current=!1;const ee=$.touches[0],pe=$.touches[1],Pe=Math.hypot(pe.clientX-ee.clientX,pe.clientY-ee.clientY),He={x:(ee.clientX+pe.clientX)/2,y:(ee.clientY+pe.clientY)/2};Be.current={startDist:Pe,startScale:u,startPan:{...m},startCenter:He}}else if($.touches.length===1){const ee=$.target;(ee===ue.current||ee.classList.contains("canvas-bg"))&&!q.current&&(s(null),ye(null),N("none"))}},ar=$=>{if($.touches.length===2&&Be.current){$.preventDefault();const ee=$.touches[0],pe=$.touches[1],Pe=Math.hypot(pe.clientX-ee.clientX,pe.clientY-ee.clientY),He={x:(ee.clientX+pe.clientX)/2,y:(ee.clientY+pe.clientY)/2},ct=Math.max(.05,Math.min(3,Be.current.startScale*(Pe/Be.current.startDist))),tt=He.x-Be.current.startCenter.x,qn=He.y-Be.current.startCenter.y;g({x:Be.current.startPan.x+tt,y:Be.current.startPan.y+qn}),d(ct)}},at=()=>e.find($=>$.id===r),Gr=()=>d($=>Math.min($+.1,3)),go=()=>d($=>Math.max($-.1,.05));return l.jsxs("div",{className:"h-[100dvh] bg-slate-50 text-slate-900 flex flex-col overflow-hidden font-sans relative",children:[l.jsx("style",{children:`
                    .no-scrollbar::-webkit-scrollbar { display: none; }
                    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
                `}),U&&l.jsxs("div",{className:"fixed z-[200] bg-white/90 backdrop-blur-md border border-slate-200 rounded-xl shadow-2xl p-2 animate-fade-in origin-top-left flex flex-col gap-1 w-48",style:{top:U.y,left:U.x},onClick:$=>$.stopPropagation(),children:[l.jsxs("button",{onClick:()=>{b($=>Math.min($+1,10)),R(null)},className:"flex items-center gap-3 px-3 py-2 text-xs font-bold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors text-left",children:[l.jsx(LT,{className:"w-4 h-4 text-slate-500"})," Tambah Slide (+1)"]}),l.jsxs("button",{onClick:()=>{var $;($=Y.current)==null||$.click(),R(null)},className:"flex items-center gap-3 px-3 py-2 text-xs font-bold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors text-left",children:[l.jsx(bs,{className:"w-4 h-4 text-slate-500"})," Upload Foto"]}),l.jsxs("button",{onClick:oe,className:"flex items-center gap-3 px-3 py-2 text-xs font-bold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors text-left",children:[l.jsx("div",{className:"w-4 h-4 flex items-center justify-center font-serif font-black text-slate-500 border border-slate-300 rounded bg-white text-[9px]",children:"T"})," Tambah Teks"]}),l.jsx("div",{className:"h-px bg-slate-200 my-1"}),l.jsx("div",{className:"px-3 py-1 text-[9px] font-bold text-slate-400 uppercase tracking-wider",children:"Shapes"}),l.jsxs("div",{className:"flex gap-2 px-2 pb-1",children:[l.jsx("button",{onClick:()=>{Z(Q("square"),"shape"),R(null)},className:"p-2 bg-slate-50 hover:bg-slate-200 rounded-lg",children:l.jsx(Pf,{className:"w-4 h-4 text-slate-600"})}),l.jsx("button",{onClick:()=>{Z(Q("circle"),"shape"),R(null)},className:"p-2 bg-slate-50 hover:bg-slate-200 rounded-lg",children:l.jsx(Rf,{className:"w-4 h-4 text-slate-600"})}),l.jsx("button",{onClick:()=>{Z(Q("star"),"shape"),R(null)},className:"p-2 bg-slate-50 hover:bg-slate-200 rounded-lg",children:l.jsx(Yp,{className:"w-4 h-4 text-slate-600"})})]})]}),l.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 pointer-events-none flex justify-between items-start",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:t,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors",children:l.jsx(Zn,{className:"w-5 h-5"})}),l.jsx("button",{onClick:V,disabled:a<0,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors disabled:opacity-50",children:l.jsx(LN,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"pointer-events-auto bg-white/90 backdrop-blur-md border border-slate-200 rounded-full flex items-center p-1 shadow-sm",children:[l.jsx("button",{onClick:go,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:l.jsx(FN,{className:"w-4 h-4"})}),l.jsxs("div",{className:"px-2 text-xs font-mono font-bold text-slate-700 w-10 text-center select-none",children:[Math.round(u*100),"%"]}),l.jsx("button",{onClick:Gr,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:l.jsx(jN,{className:"w-4 h-4"})})]}),l.jsx("button",{onClick:de,disabled:D||e.length===0,className:"pointer-events-auto bg-slate-900 hover:bg-slate-800 text-white px-4 py-2.5 rounded-full shadow-lg shadow-slate-900/10 font-bold text-xs flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 border border-slate-800",children:D?"Saving...":l.jsxs(l.Fragment,{children:[l.jsx(AT,{className:"w-4 h-4"})," Save"]})})]}),l.jsx("div",{className:"flex-1 bg-slate-100 overflow-hidden relative flex flex-col",children:l.jsx("div",{ref:ue,className:"flex-1 w-full h-full cursor-grab active:cursor-grabbing touch-none flex items-center justify-center overflow-hidden relative",onWheel:De,onPointerDown:We,onPointerMove:Lt,onPointerUp:yt,onPointerLeave:yt,onTouchStart:Ln,onTouchMove:ar,onTouchEnd:yt,onContextMenu:et,children:l.jsx("div",{style:{transform:`translate(${m.x}px, ${m.y}px) scale(${u})`,transformOrigin:"center",display:"flex",alignItems:"center",justifyContent:"center",transition:z.current||q.current||ke.current||Be.current?"none":"transform 0.1s ease-out",willChange:"transform",pointerEvents:"none"},children:l.jsxs("div",{className:"relative shadow-2xl shrink-0 pointer-events-auto",style:{width:it,height:C},children:[l.jsx("div",{className:"absolute inset-0 canvas-bg",style:{backgroundColor:v}}),l.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.map(($,ee)=>l.jsx("div",{className:"absolute group",style:{left:$.x,top:$.y,width:$.width,height:$.height,transform:`rotate(${$.rotation}deg) scaleX(${$.scaleX})`,zIndex:ee},children:H===$.id?l.jsx("div",{className:"w-full h-full relative",children:l.jsx("textarea",{autoFocus:!0,value:re,onChange:pe=>ne(pe.target.value),onBlur:_e,onKeyDown:pe=>{pe.key==="Enter"&&!pe.shiftKey&&(pe.preventDefault(),_e())},className:"w-full h-full bg-transparent border-2 border-blue-500 rounded resize-none outline-none text-center font-bold text-slate-900 overflow-hidden p-0 m-0",style:{fontFamily:"Arial, sans-serif",fontSize:"60px",lineHeight:"1.2",display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"pre-wrap"},onFocus:pe=>pe.target.select()})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`absolute -inset-0.5 pointer-events-none transition-opacity duration-200 z-50 ${r===$.id?"opacity-100":"opacity-0"}`,style:{border:"2px dashed #0f172a",borderRadius:$.maskShape==="circle"?"50%":`${$.borderRadius}px`}}),l.jsx("div",{style:{width:"100%",height:"100%",borderRadius:$.maskShape==="circle"?"50%":`${$.borderRadius}px`,overflow:"hidden",border:$.borderWidth>0?`${$.borderWidth}px solid ${$.borderColor}`:"none",filter:$.isGrayscale?"grayscale(100%)":"none",position:"relative"},onMouseDown:pe=>Wt(pe.clientX,pe.clientY,$.id),onTouchStart:pe=>{pe.touches.length===1&&Wt(pe.touches[0].clientX,pe.touches[0].clientY,$.id)},onMouseUp:jt,onTouchEnd:jt,onDoubleClick:()=>Dn($.id),children:l.jsx("img",{src:$.src,alt:"item",className:"w-full h-full select-none",draggable:!1,style:{objectFit:"cover"}})})]})},$.id))}),e.map($=>r===$.id&&!H&&l.jsxs("div",{className:"absolute pointer-events-none z-[51]",style:{left:$.x,top:$.y,width:$.width,height:$.height,transform:`rotate(${$.rotation}deg) scaleX(${$.scaleX})`},children:[l.jsx("div",{className:"absolute -bottom-3 -right-3 w-6 h-6 pointer-events-auto flex items-center justify-center cursor-nwse-resize hover:scale-110 transition-transform bg-white rounded-full shadow-md",style:{transform:`scale(${1/u})`},onMouseDown:ee=>ln(ee,$.id),onTouchStart:ee=>ln(ee,$.id),children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/11398/11398919.png",className:"w-4 h-4 object-contain",alt:"Resize",draggable:!1})}),ke.current&&l.jsxs("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-[10px] px-2 py-1 rounded shadow whitespace-nowrap",style:{transform:`translateX(-50%) scale(${1/u})`},children:[Math.round($.width),"px"]})]},`resize-${$.id}`)),r&&at()&&!H&&l.jsxs("div",{className:"absolute pointer-events-auto z-[100]",style:{left:at().x+at().width/2,top:at().y-60/u,transform:`translateX(-50%) scale(${1/u})`,transformOrigin:"bottom center",transition:"top 0.2s ease-out"},onMouseDown:$=>$.stopPropagation(),onTouchStart:$=>$.stopPropagation(),children:[l.jsx("div",{className:"bg-white/90 backdrop-blur-md text-slate-700 rounded-full shadow-xl border border-slate-200 flex items-center p-1.5 gap-1 transition-all duration-200",children:A==="none"?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>N("layers"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",title:"Layer",children:l.jsx(Nf,{className:"w-4 h-4"})}),((Er=at())==null?void 0:Er.type)==="text"&&l.jsx("button",{onClick:me,className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",title:"Edit Teks",children:l.jsx(ha,{className:"w-4 h-4"})}),((bi=at())==null?void 0:bi.type)!=="text"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>N("mask"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",title:"Masking",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1215/1215945.png",className:"w-4 h-4 object-contain",alt:"Mask"})}),l.jsx("button",{onClick:()=>N("border"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",title:"Border",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/33/33587.png",className:"w-4 h-4 object-contain",alt:"Border"})})]}),l.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),l.jsx("button",{onClick:Le,className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",children:l.jsx(AN,{className:"w-4 h-4"})}),l.jsx("button",{onClick:kt,className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",children:l.jsx(NN,{className:"w-4 h-4"})}),((Ct=at())==null?void 0:Ct.type)!=="text"&&l.jsx("button",{onClick:En,className:"p-2 hover:bg-slate-100 rounded-full text-slate-900",children:l.jsx(DN,{className:"w-4 h-4"})}),l.jsx("button",{onClick:ve,className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",children:l.jsx(RN,{className:"w-4 h-4"})}),l.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),l.jsx("button",{onClick:he,className:"p-2 hover:bg-red-50 text-red-500 rounded-full",children:l.jsx(gr,{className:"w-4 h-4"})})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>N("none"),className:"p-2 hover:bg-slate-200 rounded-full text-slate-900 bg-slate-100",title:"Kembali",children:l.jsx(Zn,{className:"w-4 h-4"})}),l.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),A==="layers"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>se("front"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-700",title:"Paling Depan",children:l.jsx(Nf,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>se("forward"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-700",title:"Maju",children:l.jsx(jg,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>se("backward"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-700",title:"Mundur",children:l.jsx(NT,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>se("back"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-700",title:"Paling Belakang",children:l.jsx(Nf,{className:"w-4 h-4 opacity-50"})})]}),A==="mask"&&((Ei=at())==null?void 0:Ei.type)!=="text"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Ne({maskShape:"none",borderRadius:0}),className:`p-2 rounded-full ${((lr=at())==null?void 0:lr.maskShape)==="none"?"bg-slate-900 text-white":"hover:bg-slate-100 text-slate-700"}`,title:"Kotak",children:l.jsx(Pf,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>Ne({maskShape:"circle"}),className:`p-2 rounded-full ${((Qe=at())==null?void 0:Qe.maskShape)==="circle"?"bg-slate-900 text-white":"hover:bg-slate-100 text-slate-700"}`,title:"Lingkaran",children:l.jsx(Rf,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>Ne({maskShape:"square",borderRadius:40}),className:`p-2 rounded-full ${((yo=at())==null?void 0:yo.maskShape)==="square"?"bg-slate-900 text-white":"hover:bg-slate-100 text-slate-700"}`,title:"Rounded",children:l.jsx("div",{className:"w-4 h-4 border-2 border-current rounded-md"})})]}),A==="border"&&((Ti=at())==null?void 0:Ti.type)!=="text"&&l.jsxs("div",{className:"flex items-center gap-3 px-2",children:[l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"w-6 h-6 rounded-full border border-slate-300 shadow-sm",style:{backgroundColor:(Tr=at())==null?void 0:Tr.borderColor}}),l.jsx("input",{type:"color",value:(vo=at())==null?void 0:vo.borderColor,onChange:$=>Ne({borderColor:$.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})]}),l.jsx("input",{type:"range",min:"0",max:"20",value:(xo=at())==null?void 0:xo.borderWidth,onChange:$=>Ne({borderWidth:parseInt($.target.value)}),className:"w-24 h-1.5 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"}),l.jsx("span",{className:"text-[10px] font-mono font-bold text-slate-500 w-4",children:(is=at())==null?void 0:is.borderWidth})]})]})}),l.jsx("div",{className:"w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-t-[6px] border-t-white/90 absolute -bottom-1.5 left-1/2 -translate-x-1/2 drop-shadow-sm"})]}),l.jsx("div",{className:"absolute inset-0 pointer-events-none z-20",children:Array.from({length:y-1}).map(($,ee)=>l.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-dashed border-slate-400/50 flex flex-col justify-between items-center py-2 mix-blend-difference",style:{left:`${(ee+1)/y*100}%`},children:l.jsx("div",{style:{transform:`scale(${1/u})`},children:l.jsx(CN,{className:"w-4 h-4 text-slate-600 opacity-80 bg-white/20 rounded-full p-0.5"})})},ee))}),l.jsx("div",{className:"absolute top-0 left-0 w-full flex pointer-events-none z-20",children:Array.from({length:y}).map(($,ee)=>l.jsx("div",{className:"flex-1 border-r border-transparent h-6 flex items-center justify-center",children:l.jsxs("span",{className:"bg-white/80 text-slate-900 text-[9px] font-bold px-2 rounded-b backdrop-blur-sm shadow-sm border-x border-b border-slate-200",style:{transform:`scale(${Math.max(1,1/u)})`,transformOrigin:"top center"},children:["Slide ",ee+1]})},ee))})]})})})}),l.jsxs("div",{className:`fixed bottom-0 left-0 right-0 z-[60] flex flex-col bg-white border-t border-slate-200 transition-transform duration-300 ease-out shadow-[0_-10px_30px_-10px_rgba(0,0,0,0.05)] ${T?"translate-y-0":"translate-y-[calc(100%-40px)]"}`,children:[l.jsxs("div",{onClick:()=>P(!T),className:"h-10 flex items-center justify-center cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors border-b border-slate-200 group shrink-0",children:[l.jsx("div",{className:"w-12 h-1 bg-slate-300 rounded-full group-hover:bg-slate-400 mb-1"}),l.jsx($n,{className:`w-4 h-4 text-slate-400 absolute right-4 transition-transform duration-300 ${T?"":"rotate-180"}`})]}),l.jsxs("div",{className:"flex border-b border-slate-200 bg-white shrink-0",children:[l.jsx("button",{onClick:()=>{B("add"),P(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${L==="add"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Add"}),l.jsx("button",{onClick:()=>{B("canvas"),P(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${L==="canvas"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Layout"})]}),l.jsxs("div",{className:"h-28 overflow-x-auto overflow-y-hidden bg-white no-scrollbar flex items-center",children:[L==="add"&&l.jsx("div",{className:"flex items-center gap-4 px-6 min-w-max",children:k?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>I(null),className:"h-16 w-16 bg-slate-100 hover:bg-slate-200 rounded-xl text-slate-600 flex flex-col items-center justify-center gap-1 border border-transparent transition-all shrink-0",children:[l.jsx(Zn,{className:"w-5 h-5"}),l.jsx("span",{className:"text-[9px] font-bold uppercase",children:"Back"})]}),l.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0 mx-2"}),l.jsx("div",{className:"flex flex-col items-center justify-center mr-2",children:l.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase rotate-180",style:{writingMode:"vertical-rl"},children:k})}),l.jsx("div",{className:"flex gap-3",children:(Ii=ob.find($=>$.name===k))==null?void 0:Ii.items.map(($,ee)=>l.jsx("button",{onClick:()=>Z($,"image"),className:"bg-white w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-50 border border-slate-200 transition-all hover:scale-105 hover:shadow-sm",children:l.jsx("img",{src:$,alt:"Sticker",className:"w-10 h-10 object-contain pointer-events-none"})},ee))})]}):l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>{var $;return($=Y.current)==null?void 0:$.click()},className:"h-20 w-20 bg-slate-50 hover:bg-slate-100 rounded-xl text-slate-700 font-bold flex flex-col items-center justify-center gap-2 border border-slate-200 transition-all shrink-0",children:[l.jsx(bs,{className:"w-6 h-6 text-slate-900"}),l.jsx("span",{className:"text-[10px] uppercase",children:"Upload"})]}),l.jsx("input",{type:"file",ref:Y,onChange:K,className:"hidden",accept:"image/*"}),l.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>Z(Q("circle"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:l.jsx(Rf,{className:"w-6 h-6 text-slate-700"})}),l.jsx("button",{onClick:()=>Z(Q("square"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:l.jsx(Pf,{className:"w-6 h-6 text-slate-700"})}),l.jsx("button",{onClick:()=>Z(Q("triangle"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:l.jsx(PN,{className:"w-6 h-6 text-slate-700"})}),l.jsx("button",{onClick:()=>Z(Q("heart"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:l.jsx(MN,{className:"w-6 h-6 text-red-500"})}),l.jsx("button",{onClick:()=>Z(Q("star"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:l.jsx(Yp,{className:"w-6 h-6 text-slate-900"})}),l.jsx("button",{onClick:oe,className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors font-bold text-xs text-slate-700",children:"TXT"})]}),l.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0 mx-2"}),ob.map($=>l.jsxs("button",{onClick:()=>I($.name),className:"bg-white w-20 h-20 rounded-xl flex flex-col items-center justify-center hover:bg-slate-50 border border-slate-200 transition-all hover:scale-105 hover:shadow-sm gap-1",children:[l.jsxs("div",{className:"relative w-8 h-8",children:[l.jsx("img",{src:$.items[0],alt:"Pack",className:"w-full h-full object-contain pointer-events-none opacity-80"}),l.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full border border-white"})]}),l.jsx("span",{className:"text-[9px] font-bold text-slate-600 uppercase",children:$.name})]},$.name))]})}),L==="canvas"&&l.jsxs("div",{className:"flex items-center gap-6 px-6 min-w-max h-full",children:[l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl flex flex-col justify-center gap-1 w-48 shrink-0 border border-slate-100",children:[l.jsx("div",{className:"flex justify-between text-[10px] text-slate-500 font-bold uppercase",children:l.jsxs("span",{children:["Slides (",y,")"]})}),l.jsx("input",{type:"range",min:"2",max:"10",value:y,onChange:$=>b(parseInt($.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>w("square"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${x==="square"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Square 1:1"}),l.jsx("button",{onClick:()=>w("portrait"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${x==="portrait"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Portrait 4:5"})]}),l.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100 flex items-center justify-between gap-3 shrink-0",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Background"}),l.jsx("input",{type:"color",value:v,onChange:$=>_($.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-0"})]})]})]})]})]})},C8=t=>{if(t==="Unknown")return"";const e=t.toUpperCase().split("").map(n=>127397+n.charCodeAt(0));return String.fromCodePoint(...e)},A8=t=>new Date(t).toLocaleString("id-ID",{month:"short"}),Io=({title:t,icon:e,children:n,defaultOpen:r=!1,className:s=""})=>{const[i,o]=j.useState(r);return l.jsxs("div",{className:`bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden transition-all duration-300 ${s}`,children:[l.jsxs("div",{className:"p-5 flex items-center justify-between cursor-pointer hover:bg-slate-50/50 transition-colors",onClick:()=>o(!i),children:[l.jsxs("div",{className:"flex items-center gap-3",children:[e,l.jsx("h3",{className:"text-sm font-bold text-slate-900",children:t})]}),l.jsx("div",{className:`p-2 rounded-full text-slate-400 transition-transform duration-300 ${i?"rotate-180 bg-slate-50":""}`,children:l.jsx($n,{className:"w-4 h-4"})})]}),l.jsx("div",{className:`transition-[max-height,opacity] duration-500 ease-in-out overflow-hidden ${i?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:l.jsx("div",{className:"p-5 pt-0 border-t border-slate-50",children:n})})]})},N8=({data:t,labelType:e})=>{if(!t||t.length===0)return l.jsx("div",{className:"h-40 flex items-center justify-center text-slate-300",children:"No Data"});const n=200,r=600,s=30,o=Math.max(...t.map(c=>c.value),5)*1.2,a=t.map((c,u)=>{const d=s+u/(t.length-1||1)*(r-2*s),m=n-s-c.value/o*(n-2*s);return`${d},${m}`}).join(" ");return l.jsxs("div",{className:"w-full overflow-visible",children:[l.jsxs("svg",{viewBox:`0 0 ${r} ${n}`,className:"w-full h-auto overflow-visible",children:[l.jsx("line",{x1:s,y1:s,x2:r-s,y2:s,stroke:"#f1f5f9",strokeWidth:"1",strokeDasharray:"4 4"}),l.jsx("line",{x1:s,y1:n/2,x2:r-s,y2:n/2,stroke:"#f1f5f9",strokeWidth:"1",strokeDasharray:"4 4"}),l.jsx("line",{x1:s,y1:n-s,x2:r-s,y2:n-s,stroke:"#e2e8f0",strokeWidth:"1"}),t.length>1&&l.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"3",points:a,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((c,u)=>{const d=s+u/(t.length-1||1)*(r-2*s),m=n-s-c.value/o*(n-2*s);return l.jsxs("g",{className:"group",children:[l.jsx("circle",{cx:d,cy:m,r:"4",fill:"white",stroke:"#3b82f6",strokeWidth:"2.5",className:"transition-all duration-300 group-hover:r-6"}),l.jsx("text",{x:d,y:m-12,textAnchor:"middle",fontSize:"12",fontWeight:"bold",fill:"#1e293b",className:"opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:c.value})]},u)})]}),l.jsx("div",{className:"flex justify-between px-2 mt-2 text-[10px] text-slate-400 font-medium",children:t.map((c,u)=>t.length>12&&u%2!==0?null:l.jsx("span",{children:c.label},u))})]})},ll=({title:t,items:e,color:n="blue"})=>{const r=e&&e.length>0?Math.max(...e.map(i=>i.count),1):1,s={blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",pink:"bg-pink-500",amber:"bg-amber-500"};return l.jsxs("div",{className:"bg-slate-50/50 p-4 rounded-xl border border-slate-100 h-full flex flex-col",children:[l.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${s[n]}`})," ",t]}),!e||e.length===0?l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center py-4 rounded-lg",children:l.jsx("span",{className:"text-[10px] font-medium text-slate-400 italic",children:"Belum ada data"})}):l.jsx("div",{className:"space-y-3",children:e.map(i=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-slate-600 mb-1",children:[l.jsx("span",{className:"truncate pr-2 max-w-[120px]",children:i.label}),l.jsx("span",{children:i.count})]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1 overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${s[n]||"bg-slate-800"}`,style:{width:`${i.count/r*100}%`}})})]},i.id))})]})},R8=()=>{const[t,e]=j.useState(!0),[n,r]=j.useState(!1),[s,i]=j.useState(!1),[o,a]=j.useState("week"),[c,u]=j.useState(!1),[d,m]=j.useState(!1),[g,y]=j.useState(null),[b,x]=j.useState([]),[w,v]=j.useState(!1),_=async()=>{e(!0),await MS("Admin Dashboard Accessed","User opened dashboard view");const[N,U,R]=await Promise.all([vw(),g3(),ja("home_promo_enabled")]);y(N),x(U),u(R!=="false"),e(!1)};j.useEffect(()=>{_()},[]);const T=()=>{i(!0)},P=async()=>{r(!0),i(!1);try{await x3();const N=await vw();N&&y(U=>U?{...U,logs:N.logs}:N)}catch(N){console.error("Gagal menghapus log:",N),alert("Gagal menghapus log.")}finally{r(!1)}},L=async()=>{m(!0);const N=!c;u(N);try{await Fc("home_promo_enabled",N.toString())}catch(U){console.error(U),u(!N)}finally{m(!1)}},B=j.useMemo(()=>{if(!(g!=null&&g.allStats))return[];const N=g.allStats;if(o==="week")return N.slice(-7).map(U=>({label:U.date.slice(5),value:U.visitors||0}));if(o==="month")return N.slice(-30).map(U=>({label:U.date.slice(8),value:U.visitors||0}));if(o==="year"){const U={};for(let R=11;R>=0;R--){const D=new Date;D.setMonth(D.getMonth()-R);const M=D.toISOString().slice(0,7);U[M]=0}return N.forEach(R=>{const D=R.date.slice(0,7);U.hasOwnProperty(D)&&(U[D]+=R.visitors||0)}),Object.entries(U).map(([R,D])=>({label:A8(R+"-01"),value:D}))}return[]},[g,o]),k=N=>new Date(N).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});if(t)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"})});if(!g)return l.jsx("div",{className:"p-10 text-center",children:"Failed to load data."});const I=g.allStats.length>1?Math.round((g.allStats[g.allStats.length-1].visitors-g.allStats[g.allStats.length-2].visitors)/(g.allStats[g.allStats.length-2].visitors||1)*100):0,A=w?b:b.slice(0,3);return l.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 md:p-8 animate-fade-in",children:[l.jsx(Fa,{isOpen:s,title:"Bersihkan Log Sistem?",description:"Tindakan ini akan menghapus semua riwayat aktivitas sistem secara permanen. Anda tidak dapat membatalkan ini.",confirmText:"Ya, Bersihkan",onConfirm:P,onCancel:()=>i(!1)}),l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"Dashboard Overview"}),l.jsx("p",{className:"text-slate-500 text-sm",children:"Real-time insight & system health."})]}),l.jsxs("button",{onClick:_,className:"bg-white border border-slate-200 text-slate-600 px-4 py-2 rounded-xl text-xs font-bold flex items-center gap-2 hover:bg-slate-50 hover:text-slate-900 transition-colors shadow-sm",children:[l.jsx(ua,{className:"w-3.5 h-3.5"})," Refresh Data"]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center shrink-0",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/8860/8860683.png",className:"w-6 h-6 object-contain opacity-80",alt:"Visitor"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-black text-slate-900 leading-none",children:g.totalVisitors7Days}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Visitors (7d)"})]}),I!==0&&l.jsxs("span",{className:`ml-auto text-[10px] font-bold px-1.5 py-0.5 rounded ${I>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[I>0?"+":"",I,"%"]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center shrink-0",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/8860/8860683.png",className:"w-6 h-6 object-contain opacity-80",alt:"All Time"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-black text-slate-900 leading-none",children:g.totalVisitorsAllTime}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"All Time"})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-900 text-white flex items-center justify-center shrink-0",children:l.jsx(Td,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-black text-slate-900 leading-none",children:b.length}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Messages"})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-50 text-red-600 flex items-center justify-center shrink-0",children:l.jsx(da,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-black text-slate-900 leading-none",children:g.totalErrors}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Errors"})]})]})]}),l.jsx(Io,{title:"Marketing & Configuration",icon:l.jsx(Fg,{className:"w-5 h-5 text-purple-600"}),defaultOpen:!0,children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-bold text-slate-800",children:"Home Popup Promo"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:'Iklan "Project Unggulan" muncul 3 detik setelah masuk Home.'})]}),l.jsx("button",{onClick:L,disabled:d,className:`
                                    relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2
                                    ${c?"bg-purple-600":"bg-slate-200"}
                                    ${d?"opacity-50 cursor-wait":""}
                                `,children:l.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition duration-200 ease-in-out ${c?"translate-x-6":"translate-x-1"}`})})]})})}),l.jsx(Io,{title:"Popular Content & Insights",icon:l.jsx(Yp,{className:"w-5 h-5 text-amber-500"}),defaultOpen:!1,children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[l.jsx(ll,{title:"Top Menus",items:g.topMenus,color:"blue"}),l.jsx(ll,{title:"Top Projects",items:g.topProjects,color:"purple"}),l.jsx(ll,{title:"Top Blogs",items:g.topBlogs,color:"green"}),l.jsx(ll,{title:"Top Photos",items:g.topPhotos,color:"pink"}),l.jsx(ll,{title:"Top Music",items:g.topMusic,color:"amber"})]})}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-1",children:l.jsxs(Io,{title:`Inbox Rahasia (${b.length})`,icon:l.jsx(Td,{className:"w-5 h-5 text-slate-900"}),defaultOpen:!1,children:[l.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar pr-2",children:b.length===0?l.jsx("div",{className:"p-8 text-center text-slate-400 text-xs italic",children:"Belum ada pesan."}):l.jsx("div",{className:"space-y-3 pt-2",children:A.map(N=>l.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("span",{className:"text-[10px] font-bold bg-slate-200 text-slate-600 px-2 py-0.5 rounded",children:"Anonim"}),l.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:k(N.timestamp)})]}),l.jsx("p",{className:"text-slate-700 text-xs leading-relaxed whitespace-pre-wrap",children:N.content})]},N.id))})}),b.length>3&&l.jsx("div",{className:"pt-3 flex justify-center",children:l.jsx("button",{onClick:()=>v(!w),className:"text-[10px] font-bold text-slate-500 hover:text-slate-800 flex items-center gap-1",children:w?"Sembunyikan":"Lihat Semua"})})]})}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs(Io,{title:"Traffic Trend",icon:l.jsx(jg,{className:"w-5 h-5 text-blue-600"}),defaultOpen:!1,children:[l.jsx("div",{className:"flex justify-end mb-4",children:l.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>a("week"),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${o==="week"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Week"}),l.jsx("button",{onClick:()=>a("month"),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${o==="month"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Month"}),l.jsx("button",{onClick:()=>a("year"),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${o==="year"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Year"})]})}),l.jsx(N8,{data:B,labelType:o==="year"?"month":"day"})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(Io,{title:"System Logs",icon:l.jsx(da,{className:"w-5 h-5 text-slate-600"}),defaultOpen:!1,children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Recent Activity"}),l.jsx("button",{onClick:T,disabled:n,className:"text-[10px] font-bold text-red-500 hover:text-red-700 hover:bg-red-50 px-2 py-1 rounded transition-colors flex items-center gap-1",children:n?"Cleaning...":l.jsxs(l.Fragment,{children:[l.jsx(gr,{className:"w-3 h-3"})," Hapus Semua Log"]})})]}),l.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto custom-scrollbar",children:g.logs.length===0?l.jsx("p",{className:"text-slate-400 text-xs italic text-center py-4",children:"No logs recorded."}):g.logs.map(N=>l.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-slate-50 rounded-lg transition-colors border-b border-slate-50 last:border-0",children:[l.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${N.type==="error"?"bg-red-500":N.type==="info"?"bg-blue-500":"bg-slate-400"}`}),l.jsx("span",{className:"text-[10px] font-mono text-slate-400 w-28 shrink-0",children:new Date(N.timestamp).toLocaleString("id-ID",{hour:"2-digit",minute:"2-digit",day:"numeric",month:"short"})}),l.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-slate-700 truncate",children:N.message}),N.details&&l.jsx("span",{className:"text-[10px] text-slate-400 truncate border-l border-slate-200 pl-2 hidden sm:inline",children:N.details})]})]},N.id))})]}),l.jsx(Io,{title:"Demographics",icon:l.jsx(ec,{className:"w-5 h-5 text-indigo-500"}),defaultOpen:!1,children:l.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pt-2",children:g.geoStats.length===0?l.jsx("p",{className:"text-slate-400 text-xs italic",children:"No data yet."}):g.geoStats.map((N,U)=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-lg w-6 text-center",children:C8(N.country)}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-slate-700 mb-1",children:[l.jsx("span",{children:N.country}),l.jsx("span",{children:N.count})]}),l.jsx("div",{className:"w-full bg-slate-100 rounded-full h-1.5 overflow-hidden",children:l.jsx("div",{className:"bg-indigo-500 h-full rounded-full",style:{width:`${N.count/g.totalVisitorsAllTime*100}%`}})})]})]},U))})})]}),l.jsxs("div",{className:"bg-slate-900 p-6 rounded-[2rem] text-white shadow-xl relative overflow-hidden flex items-center justify-between",children:[l.jsxs("div",{className:"relative z-10",children:[l.jsxs("h3",{className:"text-sm font-bold mb-1 flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})," System Operational"]}),l.jsx("p",{className:"text-[10px] text-slate-400",children:"Database Connected  API OK"})]}),l.jsx("div",{className:"relative z-10 text-right",children:l.jsx("p",{className:"text-[10px] text-slate-500",children:"v2.4.3 (Stable)"})}),l.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-blue-600/20 rounded-full blur-3xl pointer-events-none"})]})]})]})},Nk=({onClose:t})=>{const e=br();j.useEffect(()=>{t||window.scrollTo(0,0)},[t]);const n=()=>{t?t():e(-1)};return l.jsx("div",{className:`bg-white text-slate-900 pb-20 pt-12 min-h-full ${t?"":"min-h-screen animate-fade-in"}`,children:l.jsxs("div",{className:"max-w-3xl mx-auto px-6",children:[l.jsxs("button",{onClick:n,className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[l.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:t?l.jsx($n,{className:"w-4 h-4"}):l.jsx(Zn,{className:"w-4 h-4"})}),t?"Tutup":"Kembali"]}),l.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-2 tracking-tight",children:"Kebijakan Privasi"}),l.jsxs("p",{className:"text-slate-500 text-lg font-medium mb-12",children:["Terakhir diperbarui: ",new Date().getFullYear()]}),l.jsxs("div",{className:"prose prose-slate max-w-none prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-600 prose-p:leading-relaxed",children:[l.jsxs("p",{children:["Selamat datang di ",l.jsx("strong",{children:"Fanra AI Studio"})," (irfanrizkiaditri.site). Kami menghargai privasi Anda. Kebijakan ini menjelaskan bagaimana kami mengelola data Anda saat Anda menggunakan fitur portfolio, chat AI, dan alat pengeditan gambar di situs ini."]}),l.jsx("h3",{children:"1. Data yang Kami Kumpulkan"}),l.jsx("p",{children:"Kami mengumpulkan informasi seminimal mungkin untuk memastikan fitur berjalan lancar:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Autentikasi (Google Login):"})," Saat Anda login, kami menyimpan Nama, Email, Foto Profil, dan User ID (UID) yang disediakan oleh Google melalui Firebase Authentication. Kami tidak memiliki akses ke password Anda."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"API Key Pribadi:"})," Jika Anda memasukkan API Key sendiri (misalnya Google Gemini API Key atau Remove.bg API Key), key tersebut disimpan secara terenkripsi di penyimpanan lokal browser Anda (LocalStorage) atau di database pribadi yang hanya bisa diakses oleh akun Anda."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Konten Pengguna:"}),' Pesan yang Anda kirim ke "Public Wall" bersifat publik. Riwayat chat AI disimpan secara pribadi di database akun Anda.']}),l.jsxs("li",{children:[l.jsx("strong",{children:"File Gambar:"})," Gambar yang Anda unggah untuk fitur editing (Hapus Background, Upscale, dll) diproses sementara melalui API pihak ketiga (seperti Google Gemini Vision atau Remove.bg) dan tidak disimpan secara permanen di server kami setelah pemrosesan selesai, kecuali Anda menyimpannya ke galeri pribadi (jika fitur tersedia)."]})]}),l.jsx("h3",{children:"2. Penggunaan Data"}),l.jsx("p",{children:"Informasi yang dikumpulkan digunakan semata-mata untuk:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[l.jsx("li",{children:"Memungkinkan Anda mengakses fitur interaktif (Chatbot, Image Editing)."}),l.jsx("li",{children:"Menyimpan preferensi dan riwayat aktivitas Anda agar tidak hilang saat Anda kembali."}),l.jsx("li",{children:"Memantau performa website dan mencegah penyalahgunaan sistem (spam/bot)."})]}),l.jsx("h3",{children:"3. Layanan Pihak Ketiga"}),l.jsx("p",{children:"Website ini terhubung dengan layanan pihak ketiga untuk berfungsi. Data Anda mungkin diproses oleh layanan berikut sesuai kebijakan privasi mereka masing-masing:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Google Firebase:"})," Untuk autentikasi, database, dan hosting."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Google Generative AI (Gemini):"})," Untuk memproses percakapan chat dan analisis gambar."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Remove.bg / Supabase:"})," Untuk fitur penghapusan latar belakang gambar."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Spotify:"})," Untuk fitur pemutar musik (Music Player)."]})]}),l.jsx("h3",{children:"4. Keamanan API Key"}),l.jsxs("p",{children:["Kami memahami bahwa API Key adalah aset berharga. Platform ini didesain agar API Key yang Anda masukkan ",l.jsx("strong",{children:"hanya digunakan untuk sesi Anda sendiri"}),". Kami tidak menggunakan API Key Anda untuk kepentingan pengguna lain atau kepentingan pengembang. Namun, Anda bertanggung jawab penuh untuk menjaga kerahasiaan perangkat Anda."]}),l.jsx("h3",{children:"5. Cookies & Penyimpanan Lokal"}),l.jsxs("p",{children:["Kami menggunakan ",l.jsx("em",{children:"Local Storage"})," dan ",l.jsx("em",{children:"Cookies"})," browser untuk menyimpan pengaturan tema, status login, dan API Key Anda agar Anda tidak perlu memasukkannya berulang kali. Anda dapat menghapus data ini kapan saja melalui pengaturan browser (Clear Cache)."]}),l.jsx("h3",{children:"6. Perubahan Kebijakan"}),l.jsx("p",{children:"Kebijakan privasi ini dapat berubah seiring dengan penambahan fitur baru pada website. Perubahan signifikan akan diinformasikan melalui notifikasi di dalam website."})]}),l.jsx("div",{className:"mt-12 pt-8 border-t border-slate-200",children:l.jsxs("p",{className:"text-sm text-slate-400",children:["Jika ada pertanyaan mengenai privasi data Anda, silakan hubungi pengembang melalui email: ",l.jsx("a",{href:"mailto:irfanrizkiaditri@gmail.com",className:"text-blue-600 hover:underline",children:"irfanrizkiaditri@gmail.com"})]})})]})})},Rk=({onClose:t})=>{const e=br();j.useEffect(()=>{t||window.scrollTo(0,0)},[t]);const n=()=>{t?t():e(-1)};return l.jsx("div",{className:`bg-white text-slate-900 pb-20 pt-12 min-h-full ${t?"":"min-h-screen animate-fade-in"}`,children:l.jsxs("div",{className:"max-w-3xl mx-auto px-6",children:[l.jsxs("button",{onClick:n,className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[l.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:t?l.jsx($n,{className:"w-4 h-4"}):l.jsx(Zn,{className:"w-4 h-4"})}),t?"Tutup":"Kembali"]}),l.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-2 tracking-tight",children:"Syarat & Ketentuan"}),l.jsxs("p",{className:"text-slate-500 text-lg font-medium mb-12",children:["Berlaku Efektif: ",new Date().getFullYear()]}),l.jsxs("div",{className:"prose prose-slate max-w-none prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-600 prose-p:leading-relaxed",children:[l.jsxs("p",{children:["Dengan mengakses dan menggunakan situs web ",l.jsx("strong",{children:"Irfan Rizki Aditri (irfanrizkiaditri.site)"})," serta fitur ",l.jsx("strong",{children:"Fanra AI Studio"})," di dalamnya, Anda setuju untuk mematuhi syarat dan ketentuan berikut."]}),l.jsx("h3",{children:"1. Penggunaan Wajar"}),l.jsx("p",{children:"Situs ini adalah proyek personal yang mencakup portfolio dan alat eksperimental (AI Tools). Anda diizinkan menggunakan fitur yang tersedia untuk tujuan personal, edukasi, dan non-komersial. Dilarang keras melakukan:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[l.jsxs("li",{children:["Upaya peretasan, ",l.jsx("em",{children:"spamming"}),", atau membebani server secara sengaja (DDoS)."]}),l.jsx("li",{children:'Mengunggah konten ilegal, pornografi, atau ujaran kebencian di fitur "Public Wall" atau saat memproses gambar.'}),l.jsx("li",{children:"Mencoba merekayasa balik (reverse engineer) kode sumber aplikasi ini untuk tujuan jahat."})]}),l.jsx("h3",{children:"2. Penafian Hasil AI (AI Disclaimer)"}),l.jsx("p",{children:"Fitur Chatbot dan Pengolahan Gambar di situs ini menggunakan teknologi Kecerdasan Buatan (Google Gemini). Harap diperhatikan:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[l.jsx("li",{children:'AI dapat membuat kesalahan atau memberikan informasi yang tidak akurat ("Halusinasi AI").'}),l.jsx("li",{children:"Jangan gunakan saran medis, hukum, atau finansial dari AI ini sebagai acuan mutlak."}),l.jsx("li",{children:"Kami tidak bertanggung jawab atas kerugian yang timbul akibat penggunaan informasi yang dihasilkan oleh AI."})]}),l.jsx("h3",{children:"3. Penggunaan API Key Mandiri"}),l.jsx("p",{children:"Fitur tertentu memungkinkan Anda memasukkan API Key pribadi (BYOK - Bring Your Own Key). Dengan menggunakan fitur ini:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[l.jsx("li",{children:"Anda bertanggung jawab penuh atas penggunaan kuota, biaya (billing), dan keamanan API Key Anda sendiri di platform penyedia (Google Cloud, Remove.bg, dll)."}),l.jsx("li",{children:"Fanra AI Studio tidak bertanggung jawab atas tagihan yang muncul akibat kelalaian Anda dalam mengelola API Key."})]}),l.jsx("h3",{children:"4. Konten Pengguna (Public Wall)"}),l.jsx("p",{children:'Pesan yang Anda kirimkan ke fitur "Public Wall" dapat dilihat oleh siapa saja. Kami berhak (namun tidak berkewajiban) untuk menghapus pesan yang mengandung unsur SARA, promosi spam, atau konten yang tidak pantas tanpa pemberitahuan sebelumnya.'}),l.jsx("h3",{children:"5. Hak Kekayaan Intelektual"}),l.jsxs("p",{children:["Seluruh desain antarmuka, logo, kode program, dan konten tulisan (Blog) di situs ini adalah hak cipta milik ",l.jsx("strong",{children:"Irfan Rizki Aditri"}),", kecuali dinyatakan lain (seperti library open-source atau aset pihak ketiga). Anda tidak diperkenankan menyalin atau menduplikasi situs ini untuk tujuan komersial tanpa izin tertulis."]}),l.jsx("h3",{children:"6. Batasan Tanggung Jawab"}),l.jsxs("p",{children:['Layanan ini disediakan "sebagaimana adanya" (as is). Pengembang tidak memberikan jaminan bahwa layanan akan selalu aktif tanpa gangguan (uptime 100%) atau bebas dari ',l.jsx("em",{children:"bug"}),". Penggunaan situs ini sepenuhnya merupakan risiko pengguna."]}),l.jsx("h3",{children:"7. Perubahan Ketentuan"}),l.jsx("p",{children:"Kami dapat merevisi syarat dan ketentuan ini sewaktu-waktu. Dengan terus menggunakan situs ini setelah perubahan dilakukan, Anda dianggap menyetujui ketentuan yang baru."})]})]})})},P8=({isAdmin:t})=>{const e=br(),[n,r]=j.useState("https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=1000&auto=format&fit=crop"),[s,i]=j.useState(!1),[o,a]=j.useState([]),[c,u]=j.useState(!1),d=j.useRef(null);j.useEffect(()=>{(async()=>{try{const w=await ja("aboutme_profile_photo");w&&r(w)}catch{}})()},[]);const m=async()=>{if(t){i(!0),u(!0);try{const x=await $0();a(x)}catch(x){console.error("Failed to load gallery",x)}finally{u(!1)}}},g=async x=>{r(x);try{await Fc("aboutme_profile_photo",x),$e("Foto profil diperbarui!")}catch{$e("Gagal menyimpan foto.")}i(!1)},y=x=>{var v;const w=(v=x.target.files)==null?void 0:v[0];if(w){const _=new FileReader;_.onloadend=()=>{const T=_.result;g(T)},_.readAsDataURL(w)}};return l.jsx("div",{className:"min-h-screen bg-white animate-fade-in pb-20 pt-8 md:pt-12",children:l.jsxs("div",{className:"max-w-5xl mx-auto px-6",children:[l.jsx("div",{className:"mb-8 md:mb-12",children:l.jsxs("button",{onClick:()=>e("/"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 transition-colors w-fit",children:[l.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:l.jsx(Zn,{className:"w-4 h-4"})}),l.jsx("span",{children:"Kembali ke Home"})]})}),l.jsxs("div",{className:"flex flex-col md:flex-row gap-10 md:gap-16 items-start",children:[l.jsxs("div",{className:"w-full md:w-1/3 flex flex-col gap-6 sticky top-24",children:[l.jsxs("div",{className:"relative aspect-[3/4] w-full rounded-2xl overflow-hidden shadow-sm border border-slate-200 bg-slate-50 group",children:[l.jsx("img",{src:n,alt:"Profile",className:"w-full h-full object-cover"}),t&&l.jsx("button",{onClick:m,className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",children:l.jsxs("div",{className:"bg-white text-slate-900 px-4 py-2 rounded-full text-xs font-bold flex items-center gap-2 shadow-lg",children:[l.jsx(ha,{className:"w-3 h-3"})," Ganti Foto"]})})]}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("a",{href:"https://github.com",target:"_blank",rel:"noreferrer",className:"flex items-center justify-between px-4 py-3 bg-white border border-slate-200 rounded-xl text-slate-600 hover:text-slate-900 hover:border-slate-400 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(FT,{className:"w-4 h-4"}),l.jsx("span",{className:"text-xs font-bold",children:"Github"})]}),l.jsx("span",{className:"text-[10px] text-slate-400 group-hover:text-slate-600",children:"Explore Code"})]}),l.jsxs("a",{href:"https://instagram.com",target:"_blank",rel:"noreferrer",className:"flex items-center justify-between px-4 py-3 bg-white border border-slate-200 rounded-xl text-slate-600 hover:text-slate-900 hover:border-slate-400 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(jT,{className:"w-4 h-4"}),l.jsx("span",{className:"text-xs font-bold",children:"IG"})]}),l.jsx("span",{className:"text-[10px] text-slate-400 group-hover:text-slate-600",children:"Daily Updates"})]}),l.jsxs("a",{href:"mailto:irfanrizkiaditri@gmail.com",className:"flex items-center justify-between px-4 py-3 bg-white border border-slate-200 rounded-xl text-slate-600 hover:text-slate-900 hover:border-slate-400 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(VT,{className:"w-4 h-4"}),l.jsx("span",{className:"text-xs font-bold",children:"Email"})]}),l.jsx("span",{className:"text-[10px] text-slate-400 group-hover:text-slate-600",children:"Contact Me"})]})]})]}),l.jsxs("div",{className:"w-full md:w-2/3 flex flex-col gap-8",children:[l.jsx("div",{className:"border-b border-slate-100 pb-4",children:l.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 mb-2 tracking-tight",children:"About Me"})}),l.jsx("div",{className:"prose prose-slate prose-p:text-slate-600 prose-p:leading-relaxed prose-p:text-sm md:prose-p:text-base max-w-none font-medium whitespace-pre-wrap",children:l.jsx(dt,{id:"aboutme_full_story",defaultText:`Halo, saya Irfan Rizki Aditri, biasa dipanggil Fanra.
Saya adalah mahasiswa Fisika angkatan 2025 di Institut Teknologi Sumatera (ITERA), dengan ketertarikan besar pada teknologi dan pengembangan digital.

Perjalanan saya di dunia pemrograman tidak dimulai dari ruang kelas, melainkan dari rasa ingin tahu. Ketika pertama kali melihat bot WhatsApp yang mampu merespons pesan secara otomatis menggunakan AI, saya mulai tertarik untuk memahami bagaimana sistem tersebut bekerja. Dari rasa penasaran itu, saya masuk lebih dalam ke dunia coding dan mulai membangun berbagai proyek secara mandiri.

Saya adalah pembelajar independen yang berkembang melalui eksplorasi. Dalam prosesnya, saya memanfaatkan AI sebagai alat bantu untuk mempercepat pemahaman dan eksekusi. Bagi saya, teknologi bukan sekadar alat, tetapi medium untuk menciptakan sesuatu yang memiliki nilai dan dampak.

Sebelum fokus pada jalur ini, saya telah mencoba berbagai bentuk karya, mulai dari menulis novel, membuat komik, menciptakan lagu, hingga menjadi content creator. Setiap percobaan memberi saya satu kesadaran penting: saya ingin meninggalkan jejak yang nyata dan bertahan lama.

Website ini adalah representasi dari visi tersebut. Sebuah ruang digital yang saya bangun untuk mendokumentasikan perjalanan, mengembangkan kemampuan, dan menciptakan identitas yang tumbuh seiring waktu. Saya lahir dan besar di Pulau Sumatera, dan saya percaya bahwa latar belakang bukanlah batas, melainkan titik awal.

Saya tidak hanya ingin dikenal.
Saya ingin berkembang, berkontribusi, dan menciptakan sesuatu yang layak untuk diingat.`,isAdmin:t,tag:"div",multiline:!0,className:"text-justify"})})]})]}),s&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl p-6 shadow-2xl animate-fade-in-up border border-slate-100 max-h-[80vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Ganti Foto Profil"}),l.jsx("button",{onClick:()=>i(!1),className:"w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-500",children:""})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{onClick:()=>{var x;return(x=d.current)==null?void 0:x.click()},className:"bg-slate-50 hover:bg-blue-50 border-2 border-dashed border-slate-200 hover:border-blue-400 rounded-2xl p-6 flex flex-col items-center justify-center cursor-pointer transition-all gap-3 h-40",children:[l.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-sm",children:l.jsx(bs,{className:"w-5 h-5 text-blue-600"})}),l.jsx("span",{className:"text-xs font-bold text-slate-600",children:"Upload dari Komputer"}),l.jsx("input",{type:"file",ref:d,onChange:y,className:"hidden",accept:"image/*"})]}),c&&l.jsx("div",{className:"bg-slate-50 rounded-2xl p-6 flex items-center justify-center h-40",children:l.jsx("div",{className:"w-6 h-6 border-2 border-slate-300 border-t-slate-900 rounded-full animate-spin"})})]}),!c&&o.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[l.jsx(fh,{className:"w-3 h-3"})," Pilih dari Galeri"]}),l.jsx("div",{className:"grid grid-cols-3 gap-3",children:o.map(x=>l.jsxs("div",{onClick:()=>g(x.src),className:"aspect-square rounded-xl overflow-hidden cursor-pointer hover:opacity-80 border border-slate-100 bg-slate-100 relative group",children:[l.jsx("img",{src:x.src,className:"w-full h-full object-cover",alt:"Gallery"}),l.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"})]},x.id))})]}),!c&&o.length===0&&l.jsx("p",{className:"text-center text-xs text-slate-400 italic",children:"Belum ada foto di menu Gallery."})]})]})})]})})},M8=({onLogout:t})=>{const e=br(),[n,r]=j.useState(!1),[s,i]=j.useState({x:20,y:window.innerHeight-80}),[o,a]=j.useState(!1),c=j.useRef({x:0,y:0}),u=j.useRef({x:0,y:0}),d=j.useRef(null);j.useEffect(()=>{const v=T=>{if(!o)return;T.preventDefault();const P=T.clientX-c.current.x,L=T.clientY-c.current.y,B=Math.max(10,Math.min(window.innerWidth-60,u.current.x+P)),k=Math.max(10,Math.min(window.innerHeight-60,u.current.y+L));i({x:B,y:k})},_=()=>{a(!1)};return o&&(window.addEventListener("mousemove",v),window.addEventListener("mouseup",_)),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",_)}},[o]);const m=v=>{n||(a(!0),c.current={x:v.clientX,y:v.clientY},u.current={...s})},g=v=>{n||(a(!0),c.current={x:v.touches[0].clientX,y:v.touches[0].clientY},u.current={...s})},y=v=>{if(!o)return;const _=v.touches[0].clientX-c.current.x,T=v.touches[0].clientY-c.current.y,P=Math.max(10,Math.min(window.innerWidth-60,u.current.x+_)),L=Math.max(10,Math.min(window.innerHeight-60,u.current.y+T));i({x:P,y:L})},b=v=>{Math.sqrt(Math.pow(v.clientX-c.current.x,2)+Math.pow(v.clientY-c.current.y,2))<5&&r(!n)},x=()=>{gw(),alert("Cache teks di memori telah dihapus. Halaman akan dimuat ulang."),window.location.reload()},w=()=>{confirm("Yakin ingin reset total? Ini akan menghapus semua pengaturan lokal dan login.")&&(localStorage.clear(),gw(),window.location.reload())};return l.jsxs(l.Fragment,{children:[n&&l.jsx("div",{className:"fixed inset-0 z-[998]",onClick:()=>r(!1)}),l.jsx("div",{className:"fixed z-[999]",style:{left:s.x,top:s.y},children:l.jsxs("div",{className:"relative",children:[l.jsx("button",{onMouseDown:m,onClick:b,onTouchStart:g,onTouchMove:y,onTouchEnd:()=>a(!1),className:`w-12 h-12 rounded-full flex items-center justify-center shadow-xl transition-all duration-200 cursor-grab active:cursor-grabbing ${n?"bg-slate-900 text-white rotate-90 scale-110":"bg-white text-slate-700 border border-slate-200 hover:scale-105"}`,style:{touchAction:"none"},children:l.jsx(Jp,{className:"w-6 h-6"})}),n&&l.jsxs("div",{ref:d,className:"absolute bottom-16 left-0 bg-white/90 backdrop-blur-md border border-slate-200 rounded-2xl shadow-2xl p-2 w-60 flex flex-col gap-1 animate-fade-in-up origin-bottom-left",children:[l.jsx("div",{className:"px-3 py-2 border-b border-slate-100 mb-1",children:l.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Admin Tools"})}),l.jsxs("button",{onClick:()=>{e("/dashboard"),r(!1)},className:"flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-900 hover:bg-slate-100 rounded-xl transition-colors text-left",children:[l.jsx("div",{className:"p-1.5 bg-slate-200 text-slate-700 rounded-lg",children:l.jsx(LT,{className:"w-3.5 h-3.5"})}),l.jsxs("div",{children:[l.jsx("span",{className:"block font-bold text-xs",children:"Open Dashboard"}),l.jsx("span",{className:"block text-[9px] text-slate-400",children:"View analytics & charts"})]})]}),l.jsx("div",{className:"h-px bg-slate-100 mx-2 my-1"}),l.jsxs("button",{onClick:x,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:text-blue-600 rounded-xl transition-colors text-left",children:[l.jsx("div",{className:"p-1.5 bg-blue-50 text-blue-500 rounded-lg",children:l.jsx(ua,{className:"w-3.5 h-3.5"})}),l.jsxs("div",{children:[l.jsx("span",{className:"block font-bold text-xs",children:"Hapus Cache"}),l.jsx("span",{className:"block text-[9px] text-slate-400",children:"Fix teks nyangkut"})]})]}),l.jsxs("button",{onClick:w,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-red-50 hover:text-red-600 rounded-xl transition-colors text-left",children:[l.jsx("div",{className:"p-1.5 bg-red-50 text-red-500 rounded-lg",children:l.jsx(gr,{className:"w-3.5 h-3.5"})}),l.jsxs("div",{children:[l.jsx("span",{className:"block font-bold text-xs",children:"Reset Total"}),l.jsx("span",{className:"block text-[9px] text-slate-400",children:"Hapus data lokal"})]})]})]})]})})]})},D8="https://cdn-icons-png.flaticon.com/128/16739/16739754.png",L8=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!1),[s,i]=j.useState(""),o=j.useRef(null),a=j.useRef(null);return j.useEffect(()=>{const c=u=>{const d=u.detail.message;e(m=>m[m.length-1]===d?m:[...m,d])};return window.addEventListener("fanra-toast",c),()=>window.removeEventListener("fanra-toast",c)},[]),j.useEffect(()=>{if(!n&&t.length>0&&!s){const c=t[0];i(c),requestAnimationFrame(()=>{r(!0)}),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{r(!1)},3e3)}},[t,n,s]),j.useEffect(()=>{!n&&s&&(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{e(c=>c.slice(1)),i("")},700))},[n,s]),j.useEffect(()=>()=>{o.current&&clearTimeout(o.current),a.current&&clearTimeout(a.current)},[]),s?l.jsx("div",{className:"fixed top-0 left-0 right-0 z-[9999] flex justify-center pointer-events-none p-4",children:l.jsxs("div",{className:`
            bg-white/90 backdrop-blur-md 
            border border-slate-200 
            shadow-[0_8px_30px_rgb(0,0,0,0.12)] 
            rounded-full 
            pl-3 pr-6 py-3
            flex items-center gap-4
            min-w-[280px] max-w-[90vw] 
            pointer-events-auto 
            transform transition-all duration-700 cubic-bezier(0.23, 1, 0.32, 1)
            will-change-transform
            ${n?"translate-y-4 opacity-100":"-translate-y-[200%] opacity-0"}
        `,children:[l.jsx("div",{className:"w-10 h-10 bg-slate-50 rounded-full flex items-center justify-center shrink-0 shadow-inner border border-slate-100",children:l.jsx("img",{src:D8,alt:"Notif",className:"w-6 h-6 object-contain"})}),l.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[l.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"Fanra Studio"}),l.jsx("p",{className:"text-sm font-bold text-slate-800 leading-tight truncate",children:s})]})]})}):null},j8=({type:t,onClose:e})=>{const[n,r]=j.useState(!1);j.useEffect(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{r(!0)})})},[]);const s=()=>{r(!1),setTimeout(()=>{e()},500)};return l.jsxs("div",{className:"fixed inset-0 z-[200] flex items-end justify-center pointer-events-none",children:[l.jsx("div",{className:`fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity duration-500 ease-in-out pointer-events-auto ${n?"opacity-100":"opacity-0"}`,onClick:s}),l.jsxs("div",{className:`
                    w-full h-[95vh] md:h-[90vh] bg-white rounded-t-[2.5rem] shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.2)] 
                    overflow-hidden transform transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1) pointer-events-auto relative
                    ${n?"translate-y-0":"translate-y-full"}
                `,children:[l.jsx("div",{className:"absolute top-0 left-0 right-0 h-8 flex justify-center pt-3 z-20 bg-white cursor-pointer",onClick:s,children:l.jsx("div",{className:"w-12 h-1.5 bg-slate-200 rounded-full"})}),l.jsxs("div",{className:"h-full overflow-y-auto custom-scrollbar pt-4",children:[t==="privacy"&&l.jsx(Nk,{onClose:s}),t==="terms"&&l.jsx(Rk,{onClose:s})]})]})]})},F8=({isOpen:t,onClose:e,onSuccess:n})=>{const[r,s]=j.useState(["","","","",""]),[i,o]=j.useState(!1),a=j.useRef([]);j.useEffect(()=>{t&&(s(["","","","",""]),o(!1),setTimeout(()=>{var d;return(d=a.current[0])==null?void 0:d.focus()},100))},[t]);const c=(d,m)=>{var y;if(!/^\d*$/.test(m))return;const g=[...r];g[d]=m,s(g),o(!1),m&&d<4&&((y=a.current[d+1])==null||y.focus()),g.every(b=>b!=="")&&(g.join("")==="47326"?(n(),e()):(o(!0),setTimeout(()=>{var x;s(["","","","",""]),(x=a.current[0])==null||x.focus()},500)))},u=(d,m)=>{var g;m.key==="Backspace"&&!r[d]&&d>0&&((g=a.current[d-1])==null||g.focus())};return t?l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/80 backdrop-blur-sm p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-2xl max-w-sm w-full relative overflow-hidden",children:[l.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-800",children:""}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-slate-900 rounded-full flex items-center justify-center text-white mb-6 shadow-lg shadow-slate-900/30",children:l.jsx(tc,{className:"w-5 h-5"})}),l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Admin Access"}),l.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Enter secure PIN to continue"}),l.jsx("div",{className:"flex gap-3 mb-6",children:r.map((d,m)=>l.jsx("input",{ref:g=>{a.current[m]=g},type:"password",maxLength:1,value:d,onChange:g=>c(m,g.target.value),onKeyDown:g=>u(m,g),className:`w-10 h-12 border-2 rounded-lg text-center text-xl font-bold bg-slate-50 focus:bg-white transition-all outline-none ${i?"border-red-500 text-red-500 shake":"border-slate-200 focus:border-slate-900 text-slate-900"}`,autoComplete:"off",inputMode:"numeric"},m))}),i&&l.jsx("p",{className:"text-xs font-bold text-red-500 animate-pulse",children:"Access Denied"})]})]})}):null},dr=({children:t,isAdmin:e,onOpenPrivacy:n,onOpenTerms:r})=>l.jsxs("div",{className:"min-h-screen flex flex-col font-sans bg-[#fafafa] relative overflow-x-hidden",children:[l.jsx(b3,{isAdmin:e}),l.jsx("main",{className:"flex-grow pt-24 pb-12 animate-fade-in-up",children:t}),l.jsx(L3,{}),l.jsx(j3,{}),l.jsxs("footer",{className:"bg-slate-950 text-white pt-32 pb-12 px-6 overflow-hidden relative mt-12",children:[l.jsx("div",{className:"absolute inset-0 z-0 opacity-20 pointer-events-none mix-blend-overlay",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),l.jsx("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"20px 20px",maskImage:"linear-gradient(to bottom, transparent, black)"}}),l.jsx("div",{className:"absolute top-0 left-0 w-full overflow-hidden leading-[0] z-20",children:l.jsx("svg",{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",className:"relative block w-full h-[50px] md:h-[90px] fill-[#fafafa]",children:l.jsx("path",{d:"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"})})}),l.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-12 mb-16",children:[l.jsxs("div",{className:"lg:col-span-2",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[l.jsx(Zl,{className:"w-12 h-12",variant:"light"}),l.jsx(dt,{id:"footer_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:e,tag:"h2",className:"text-2xl font-black tracking-tighter uppercase"})]}),l.jsx(Kr,{to:"/aboutme",className:"text-sm font-bold text-slate-500 hover:text-white transition-colors inline-block mb-4",children:"About Me"}),l.jsx(dt,{id:"footer_brand_desc",defaultText:"Seorang mahasiswa ITERA angkatan 2025 yang hobi mengulik kode dan berbagi cerita lewat ruang digital.",isAdmin:e,tag:"p",multiline:!0,className:"text-slate-500 text-sm max-w-sm leading-relaxed font-medium"})]}),l.jsxs("div",{children:[l.jsx(dt,{id:"footer_explore_title",defaultText:"Explore",isAdmin:e,tag:"h3",className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6"}),l.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[l.jsxs("ul",{className:"space-y-4 text-sm font-bold text-slate-400",children:[l.jsx("li",{children:l.jsx(Kr,{to:"/",className:"hover:text-white transition-colors hover:translate-x-1 inline-block",children:"Home"})}),l.jsx("li",{children:l.jsx(Kr,{to:"/projects",className:"hover:text-white transition-colors hover:translate-x-1 inline-block",children:"Projects"})}),l.jsx("li",{children:l.jsx(Kr,{to:"/blog",className:"hover:text-white transition-colors hover:translate-x-1 inline-block",children:"Blog"})})]}),l.jsxs("ul",{className:"space-y-4 text-sm font-bold text-slate-400",children:[l.jsx("li",{children:l.jsx(Kr,{to:"/gallery",className:"hover:text-white transition-colors hover:translate-x-1 inline-block",children:"Gallery"})}),l.jsx("li",{children:l.jsx(Kr,{to:"/music",className:"hover:text-white transition-colors hover:translate-x-1 inline-block",children:"Music"})}),l.jsx("li",{children:l.jsx(Kr,{to:"/messages",className:"hover:text-white transition-colors hover:translate-x-1 inline-block",children:"Pesan"})})]})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Communication"}),l.jsxs("a",{href:"mailto:irfanrizkiaditri@gmail.com",className:"text-sm font-bold text-slate-200 hover:text-white transition-colors flex items-center gap-3 group",children:[l.jsx(VT,{className:"w-5 h-5 group-hover:scale-110 transition-transform text-slate-400 group-hover:text-white"}),l.jsx(dt,{id:"footer_email",defaultText:"irfanrizkiaditri@gmail.com",isAdmin:e,tag:"span"})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Social Discovery"}),l.jsxs("div",{className:"flex gap-6",children:[l.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:l.jsx(jT,{className:"w-6 h-6"})}),l.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:l.jsx(FT,{className:"w-6 h-6"})}),l.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:l.jsx(UT,{className:"w-6 h-6"})})]})]})]}),l.jsxs("div",{className:"pt-8 border-t border-slate-900 flex flex-col md:flex-row justify-between items-center gap-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 md:gap-8",children:[l.jsxs("p",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:[" ",new Date().getFullYear(),"  ",l.jsx(dt,{id:"footer_copyright",defaultText:"PERSPECTIVE OF FANRA",isAdmin:e,tag:"span"})]}),l.jsxs("div",{className:"flex gap-6",children:[l.jsx("button",{onClick:n,className:"text-[9px] font-bold text-slate-500 hover:text-white uppercase tracking-widest transition-colors",children:"Privacy Policy"}),l.jsx("button",{onClick:r,className:"text-[9px] font-bold text-slate-500 hover:text-white uppercase tracking-widest transition-colors",children:"Terms of Service"})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsx("span",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:l.jsx(dt,{id:"footer_location",defaultText:"Sumatera, Indonesia",isAdmin:e,tag:"span"})})})]})]}),l.jsx("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] opacity-[0.02] pointer-events-none translate-x-20 -translate-y-20",children:l.jsx(Zl,{className:"w-full h-full",variant:"light"})})]})]}),U8=()=>{const{pathname:t}=vi();return j.useEffect(()=>{t==="/privacy"||t==="/terms"||window.scrollTo(0,0)},[t]),null},V8=()=>{const t=vi(),e=br(),n=t.state,r=(n==null?void 0:n.background)||t,s=t.pathname==="/privacy"&&(n==null?void 0:n.background),i=t.pathname==="/terms"&&(n==null?void 0:n.background),o=s||i,[a,c]=j.useState(!0),[u,d]=j.useState(!1),[m,g]=j.useState(!1);j.useEffect(()=>{v3(),localStorage.removeItem("fanra_admin_auth")},[]),j.useEffect(()=>{const T=P=>{if(P.key.toLowerCase()==="f"){const L=P.target;if(L.tagName==="INPUT"||L.tagName==="TEXTAREA"||L.tagName==="SELECT"||L.isContentEditable)return;P.preventDefault(),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(k=>{console.error(`Error attempting to enable fullscreen: ${k.message}`)})}};return window.addEventListener("keydown",T),()=>{window.removeEventListener("keydown",T)}},[]);const y=()=>{window.scrollTo(0,0),c(!1)},b=()=>{g(!0)},x=()=>{e("/privacy",{state:{background:t}})},w=()=>{e("/terms",{state:{background:t}})},v=()=>{e(-1)},_={isAdmin:m,onOpenPrivacy:x,onOpenTerms:w};return l.jsxs(l.Fragment,{children:[l.jsx(U8,{}),l.jsx(L8,{}),l.jsx(F8,{isOpen:u,onClose:()=>d(!1),onSuccess:b}),m&&l.jsx(M8,{onLogout:()=>g(!1)}),l.jsxs(aN,{location:r,children:[l.jsx(gn,{path:"/",element:l.jsx(dr,{..._,children:l.jsx(A3,{onTriggerAdmin:()=>d(!0),isAdmin:m})})}),l.jsx(gn,{path:"/projects",element:l.jsx(dr,{..._,children:l.jsx(ww,{isAdmin:m})})}),l.jsx(gn,{path:"/projects/:projectId",element:l.jsx(dr,{..._,children:l.jsx(ww,{isAdmin:m})})}),l.jsx(gn,{path:"/blog",element:l.jsx(dr,{..._,children:l.jsx(_w,{isAdmin:m})})}),l.jsx(gn,{path:"/blog/:id",element:l.jsx(dr,{..._,children:l.jsx(_w,{isAdmin:m})})}),l.jsx(gn,{path:"/gallery",element:l.jsx(dr,{..._,children:l.jsx(P3,{isAdmin:m})})}),l.jsx(gn,{path:"/music",element:l.jsx(dr,{..._,children:l.jsx(M3,{isAdmin:m})})}),l.jsx(gn,{path:"/messages",element:l.jsx(dr,{..._,children:l.jsx(D3,{isAdmin:m})})}),l.jsx(gn,{path:"/dashboard",element:l.jsx(dr,{..._,children:l.jsx(R8,{})})}),l.jsx(gn,{path:"/aboutme",element:l.jsx(dr,{..._,children:l.jsx(P8,{isAdmin:m})})}),l.jsx(gn,{path:"/studio",element:l.jsx(b8,{isAdmin:m,onExit:()=>window.location.href="/#/projects"})}),l.jsx(gn,{path:"/panorama",element:l.jsx(k8,{onExit:()=>window.location.href="/#/projects"})}),l.jsx(gn,{path:"/privacy",element:l.jsx(dr,{..._,children:l.jsx(Nk,{})})}),l.jsx(gn,{path:"/terms",element:l.jsx(dr,{..._,children:l.jsx(Rk,{})})}),l.jsx(gn,{path:"*",element:l.jsx(iN,{to:"/",replace:!0})})]}),o&&l.jsx(j8,{type:s?"privacy":"terms",onClose:v}),a&&l.jsx(S3,{onComplete:y,onTriggerAdmin:()=>d(!0)})]})},O8=()=>l.jsx(pN,{children:l.jsx(V8,{})}),Pk=document.getElementById("root");if(!Pk)throw new Error("Could not find root element to mount to");const B8=Zf.createRoot(Pk);B8.render(l.jsx(Ml.StrictMode,{children:l.jsx(O8,{})}));

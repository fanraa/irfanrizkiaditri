function Gk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lb={exports:{}},Yd={},cb={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gc=Symbol.for("react.element"),$k=Symbol.for("react.portal"),Hk=Symbol.for("react.fragment"),qk=Symbol.for("react.strict_mode"),Wk=Symbol.for("react.profiler"),Kk=Symbol.for("react.provider"),Jk=Symbol.for("react.context"),Yk=Symbol.for("react.forward_ref"),Qk=Symbol.for("react.suspense"),Xk=Symbol.for("react.memo"),Zk=Symbol.for("react.lazy"),Iy=Symbol.iterator;function eC(t){return t===null||typeof t!="object"?null:(t=Iy&&t[Iy]||t["@@iterator"],typeof t=="function"?t:null)}var ub={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},db=Object.assign,hb={};function ba(t,e,n){this.props=t,this.context=e,this.refs=hb,this.updater=n||ub}ba.prototype.isReactComponent={};ba.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ba.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fb(){}fb.prototype=ba.prototype;function Um(t,e,n){this.props=t,this.context=e,this.refs=hb,this.updater=n||ub}var Vm=Um.prototype=new fb;Vm.constructor=Um;db(Vm,ba.prototype);Vm.isPureReactComponent=!0;var Sy=Array.isArray,pb=Object.prototype.hasOwnProperty,Om={current:null},mb={key:!0,ref:!0,__self:!0,__source:!0};function gb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)pb.call(e,r)&&!mb.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:gc,type:t,key:i,ref:o,props:s,_owner:Om.current}}function tC(t,e){return{$$typeof:gc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bm(t){return typeof t=="object"&&t!==null&&t.$$typeof===gc}function nC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ky=/\/+/g;function tf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nC(""+t.key):e.toString(36)}function Pu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case gc:case $k:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+tf(o,0):r,Sy(s)?(n="",t!=null&&(n=t.replace(ky,"$&/")+"/"),Pu(s,e,n,"",function(u){return u})):s!=null&&(Bm(s)&&(s=tC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ky,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Sy(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+tf(i,l);o+=Pu(i,e,n,c,s)}else if(c=eC(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+tf(i,l++),o+=Pu(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ru(t,e,n){if(t==null)return t;var r=[],s=0;return Pu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function rC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pn={current:null},Mu={transition:null},sC={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:Mu,ReactCurrentOwner:Om};function yb(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:ru,forEach:function(t,e,n){ru(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ru(t,function(){e++}),e},toArray:function(t){return ru(t,function(e){return e})||[]},only:function(t){if(!Bm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ke.Component=ba;Ke.Fragment=Hk;Ke.Profiler=Wk;Ke.PureComponent=Um;Ke.StrictMode=qk;Ke.Suspense=Qk;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sC;Ke.act=yb;Ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=db({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Om.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)pb.call(e,c)&&!mb.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:gc,type:t.type,key:s,ref:i,props:r,_owner:o}};Ke.createContext=function(t){return t={$$typeof:Jk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Kk,_context:t},t.Consumer=t};Ke.createElement=gb;Ke.createFactory=function(t){var e=gb.bind(null,t);return e.type=t,e};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(t){return{$$typeof:Yk,render:t}};Ke.isValidElement=Bm;Ke.lazy=function(t){return{$$typeof:Zk,_payload:{_status:-1,_result:t},_init:rC}};Ke.memo=function(t,e){return{$$typeof:Xk,type:t,compare:e===void 0?null:e}};Ke.startTransition=function(t){var e=Mu.transition;Mu.transition={};try{t()}finally{Mu.transition=e}};Ke.unstable_act=yb;Ke.useCallback=function(t,e){return Pn.current.useCallback(t,e)};Ke.useContext=function(t){return Pn.current.useContext(t)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(t){return Pn.current.useDeferredValue(t)};Ke.useEffect=function(t,e){return Pn.current.useEffect(t,e)};Ke.useId=function(){return Pn.current.useId()};Ke.useImperativeHandle=function(t,e,n){return Pn.current.useImperativeHandle(t,e,n)};Ke.useInsertionEffect=function(t,e){return Pn.current.useInsertionEffect(t,e)};Ke.useLayoutEffect=function(t,e){return Pn.current.useLayoutEffect(t,e)};Ke.useMemo=function(t,e){return Pn.current.useMemo(t,e)};Ke.useReducer=function(t,e,n){return Pn.current.useReducer(t,e,n)};Ke.useRef=function(t){return Pn.current.useRef(t)};Ke.useState=function(t){return Pn.current.useState(t)};Ke.useSyncExternalStore=function(t,e,n){return Pn.current.useSyncExternalStore(t,e,n)};Ke.useTransition=function(){return Pn.current.useTransition()};Ke.version="18.3.1";cb.exports=Ke;var L=cb.exports;const Dl=Fm(L),iC=Gk({__proto__:null,default:Dl},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oC=L,aC=Symbol.for("react.element"),lC=Symbol.for("react.fragment"),cC=Object.prototype.hasOwnProperty,uC=oC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dC={key:!0,ref:!0,__self:!0,__source:!0};function vb(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cC.call(e,r)&&!dC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:aC,type:t,key:i,ref:o,props:s,_owner:uC.current}}Yd.Fragment=lC;Yd.jsx=vb;Yd.jsxs=vb;lb.exports=Yd;var a=lb.exports,Xf={},xb={exports:{}},or={},wb={exports:{}},_b={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ee,Q){var ue=ee.length;ee.push(Q);e:for(;0<ue;){var $=ue-1>>>1,B=ee[$];if(0<s(B,Q))ee[$]=Q,ee[ue]=B,ue=$;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var Q=ee[0],ue=ee.pop();if(ue!==Q){ee[0]=ue;e:for(var $=0,B=ee.length,Z=B>>>1;$<Z;){var he=2*($+1)-1,ce=ee[he],Pe=he+1,xe=ee[Pe];if(0>s(ce,ue))Pe<B&&0>s(xe,ce)?(ee[$]=xe,ee[Pe]=ue,$=Pe):(ee[$]=ce,ee[he]=ue,$=he);else if(Pe<B&&0>s(xe,ue))ee[$]=xe,ee[Pe]=ue,$=Pe;else break e}}return Q}function s(ee,Q){var ue=ee.sortIndex-Q.sortIndex;return ue!==0?ue:ee.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,m=null,g=3,y=!1,w=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(ee){for(var Q=n(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=ee)r(u),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(u)}}function R(ee){if(x=!1,T(ee),!w)if(n(c)!==null)w=!0,pe(j);else{var Q=n(u);Q!==null&&ne(R,Q.startTime-ee)}}function j(ee,Q){w=!1,x&&(x=!1,v(I),I=-1),y=!0;var ue=g;try{for(T(Q),m=n(c);m!==null&&(!(m.expirationTime>Q)||ee&&!F());){var $=m.callback;if(typeof $=="function"){m.callback=null,g=m.priorityLevel;var B=$(m.expirationTime<=Q);Q=t.unstable_now(),typeof B=="function"?m.callback=B:m===n(c)&&r(c),T(Q)}else r(c);m=n(c)}if(m!==null)var Z=!0;else{var he=n(u);he!==null&&ne(R,he.startTime-Q),Z=!1}return Z}finally{m=null,g=ue,y=!1}}var V=!1,S=null,I=-1,C=5,A=-1;function F(){return!(t.unstable_now()-A<C)}function P(){if(S!==null){var ee=t.unstable_now();A=ee;var Q=!0;try{Q=S(!0,ee)}finally{Q?D():(V=!1,S=null)}}else V=!1}var D;if(typeof _=="function")D=function(){_(P)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,q=M.port2;M.port1.onmessage=P,D=function(){q.postMessage(null)}}else D=function(){b(P,0)};function pe(ee){S=ee,V||(V=!0,D())}function ne(ee,Q){I=b(function(){ee(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,pe(j))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(ee){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var ue=g;g=Q;try{return ee()}finally{g=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,Q){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ue=g;g=ee;try{return Q()}finally{g=ue}},t.unstable_scheduleCallback=function(ee,Q,ue){var $=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?$+ue:$):ue=$,ee){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=ue+B,ee={id:d++,callback:Q,priorityLevel:ee,startTime:ue,expirationTime:B,sortIndex:-1},ue>$?(ee.sortIndex=ue,e(u,ee),n(c)===null&&ee===n(u)&&(x?(v(I),I=-1):x=!0,ne(R,ue-$))):(ee.sortIndex=B,e(c,ee),w||y||(w=!0,pe(j))),ee},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(ee){var Q=g;return function(){var ue=g;g=Q;try{return ee.apply(this,arguments)}finally{g=ue}}}})(_b);wb.exports=_b;var hC=wb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC=L,nr=hC;function ve(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bb=new Set,jl={};function ao(t,e){sa(t,e),sa(t+"Capture",e)}function sa(t,e){for(jl[t]=e,t=0;t<e.length;t++)bb.add(e[t])}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zf=Object.prototype.hasOwnProperty,pC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cy={},Ay={};function mC(t){return Zf.call(Ay,t)?!0:Zf.call(Cy,t)?!1:pC.test(t)?Ay[t]=!0:(Cy[t]=!0,!1)}function gC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yC(t,e,n,r){if(e===null||typeof e>"u"||gC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ln[t]=new Mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ln[e]=new Mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ln[t]=new Mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ln[t]=new Mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ln[t]=new Mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ln[t]=new Mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ln[t]=new Mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ln[t]=new Mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ln[t]=new Mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var zm=/[\-:]([a-z])/g;function Gm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zm,Gm);ln[e]=new Mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zm,Gm);ln[e]=new Mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zm,Gm);ln[e]=new Mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ln[t]=new Mn(t,1,!1,t.toLowerCase(),null,!1,!1)});ln.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ln[t]=new Mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function $m(t,e,n,r){var s=ln.hasOwnProperty(e)?ln[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yC(e,n,s,r)&&(n=null),r||s===null?mC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ns=fC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,su=Symbol.for("react.element"),No=Symbol.for("react.portal"),Ro=Symbol.for("react.fragment"),Hm=Symbol.for("react.strict_mode"),ep=Symbol.for("react.profiler"),Eb=Symbol.for("react.provider"),Tb=Symbol.for("react.context"),qm=Symbol.for("react.forward_ref"),tp=Symbol.for("react.suspense"),np=Symbol.for("react.suspense_list"),Wm=Symbol.for("react.memo"),Os=Symbol.for("react.lazy"),Ib=Symbol.for("react.offscreen"),Ny=Symbol.iterator;function Ya(t){return t===null||typeof t!="object"?null:(t=Ny&&t[Ny]||t["@@iterator"],typeof t=="function"?t:null)}var St=Object.assign,nf;function cl(t){if(nf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nf=e&&e[1]||""}return`
`+nf+t}var rf=!1;function sf(t,e){if(!t||rf)return"";rf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{rf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cl(t):""}function vC(t){switch(t.tag){case 5:return cl(t.type);case 16:return cl("Lazy");case 13:return cl("Suspense");case 19:return cl("SuspenseList");case 0:case 2:case 15:return t=sf(t.type,!1),t;case 11:return t=sf(t.type.render,!1),t;case 1:return t=sf(t.type,!0),t;default:return""}}function rp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ro:return"Fragment";case No:return"Portal";case ep:return"Profiler";case Hm:return"StrictMode";case tp:return"Suspense";case np:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tb:return(t.displayName||"Context")+".Consumer";case Eb:return(t._context.displayName||"Context")+".Provider";case qm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wm:return e=t.displayName||null,e!==null?e:rp(t.type)||"Memo";case Os:e=t._payload,t=t._init;try{return rp(t(e))}catch{}}return null}function xC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rp(e);case 8:return e===Hm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ui(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wC(t){var e=Sb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function iu(t){t._valueTracker||(t._valueTracker=wC(t))}function kb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Sb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function td(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sp(t,e){var n=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ry(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ui(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Cb(t,e){e=e.checked,e!=null&&$m(t,"checked",e,!1)}function ip(t,e){Cb(t,e);var n=ui(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?op(t,e.type,n):e.hasOwnProperty("defaultValue")&&op(t,e.type,ui(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Py(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function op(t,e,n){(e!=="number"||td(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ul=Array.isArray;function Ho(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ui(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ap(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ve(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function My(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ve(92));if(ul(n)){if(1<n.length)throw Error(ve(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ui(n)}}function Ab(t,e){var n=ui(e.value),r=ui(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Nb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Nb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ou,Rb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ou=ou||document.createElement("div"),ou.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ou.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ll(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_C=["Webkit","ms","Moz","O"];Object.keys(vl).forEach(function(t){_C.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vl[e]=vl[t]})});function Pb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vl.hasOwnProperty(t)&&vl[t]?(""+e).trim():e+"px"}function Mb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Pb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var bC=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cp(t,e){if(e){if(bC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ve(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ve(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ve(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ve(62))}}function up(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dp=null;function Km(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hp=null,qo=null,Wo=null;function jy(t){if(t=xc(t)){if(typeof hp!="function")throw Error(ve(280));var e=t.stateNode;e&&(e=th(e),hp(t.stateNode,t.type,e))}}function Db(t){qo?Wo?Wo.push(t):Wo=[t]:qo=t}function jb(){if(qo){var t=qo,e=Wo;if(Wo=qo=null,jy(t),e)for(t=0;t<e.length;t++)jy(e[t])}}function Lb(t,e){return t(e)}function Fb(){}var of=!1;function Ub(t,e,n){if(of)return t(e,n);of=!0;try{return Lb(t,e,n)}finally{of=!1,(qo!==null||Wo!==null)&&(Fb(),jb())}}function Fl(t,e){var n=t.stateNode;if(n===null)return null;var r=th(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ve(231,e,typeof n));return n}var fp=!1;if(ws)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){fp=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{fp=!1}function EC(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var xl=!1,nd=null,rd=!1,pp=null,TC={onError:function(t){xl=!0,nd=t}};function IC(t,e,n,r,s,i,o,l,c){xl=!1,nd=null,EC.apply(TC,arguments)}function SC(t,e,n,r,s,i,o,l,c){if(IC.apply(this,arguments),xl){if(xl){var u=nd;xl=!1,nd=null}else throw Error(ve(198));rd||(rd=!0,pp=u)}}function lo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ly(t){if(lo(t)!==t)throw Error(ve(188))}function kC(t){var e=t.alternate;if(!e){if(e=lo(t),e===null)throw Error(ve(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ly(s),t;if(i===r)return Ly(s),e;i=i.sibling}throw Error(ve(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(ve(189))}}if(n.alternate!==r)throw Error(ve(190))}if(n.tag!==3)throw Error(ve(188));return n.stateNode.current===n?t:e}function Ob(t){return t=kC(t),t!==null?Bb(t):null}function Bb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Bb(t);if(e!==null)return e;t=t.sibling}return null}var zb=nr.unstable_scheduleCallback,Fy=nr.unstable_cancelCallback,CC=nr.unstable_shouldYield,AC=nr.unstable_requestPaint,Dt=nr.unstable_now,NC=nr.unstable_getCurrentPriorityLevel,Jm=nr.unstable_ImmediatePriority,Gb=nr.unstable_UserBlockingPriority,sd=nr.unstable_NormalPriority,RC=nr.unstable_LowPriority,$b=nr.unstable_IdlePriority,Qd=null,Qr=null;function PC(t){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(Qd,t,void 0,(t.current.flags&128)===128)}catch{}}var Mr=Math.clz32?Math.clz32:jC,MC=Math.log,DC=Math.LN2;function jC(t){return t>>>=0,t===0?32:31-(MC(t)/DC|0)|0}var au=64,lu=4194304;function dl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function id(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=dl(l):(i&=o,i!==0&&(r=dl(i)))}else o=n&~s,o!==0?r=dl(o):i!==0&&(r=dl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mr(e),s=1<<n,r|=t[n],e&=~s;return r}function LC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Mr(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=LC(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function mp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hb(){var t=au;return au<<=1,!(au&4194240)&&(au=64),t}function af(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mr(e),t[e]=n}function UC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ym(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var dt=0;function qb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wb,Qm,Kb,Jb,Yb,gp=!1,cu=[],Xs=null,Zs=null,ei=null,Ul=new Map,Vl=new Map,zs=[],VC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uy(t,e){switch(t){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":Ul.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vl.delete(e.pointerId)}}function Xa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=xc(e),e!==null&&Qm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function OC(t,e,n,r,s){switch(e){case"focusin":return Xs=Xa(Xs,t,e,n,r,s),!0;case"dragenter":return Zs=Xa(Zs,t,e,n,r,s),!0;case"mouseover":return ei=Xa(ei,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ul.set(i,Xa(Ul.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vl.set(i,Xa(Vl.get(i)||null,t,e,n,r,s)),!0}return!1}function Qb(t){var e=Li(t.target);if(e!==null){var n=lo(e);if(n!==null){if(e=n.tag,e===13){if(e=Vb(n),e!==null){t.blockedOn=e,Yb(t.priority,function(){Kb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Du(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);dp=r,n.target.dispatchEvent(r),dp=null}else return e=xc(n),e!==null&&Qm(e),t.blockedOn=n,!1;e.shift()}return!0}function Vy(t,e,n){Du(t)&&n.delete(e)}function BC(){gp=!1,Xs!==null&&Du(Xs)&&(Xs=null),Zs!==null&&Du(Zs)&&(Zs=null),ei!==null&&Du(ei)&&(ei=null),Ul.forEach(Vy),Vl.forEach(Vy)}function Za(t,e){t.blockedOn===e&&(t.blockedOn=null,gp||(gp=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,BC)))}function Ol(t){function e(s){return Za(s,t)}if(0<cu.length){Za(cu[0],t);for(var n=1;n<cu.length;n++){var r=cu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xs!==null&&Za(Xs,t),Zs!==null&&Za(Zs,t),ei!==null&&Za(ei,t),Ul.forEach(e),Vl.forEach(e),n=0;n<zs.length;n++)r=zs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zs.length&&(n=zs[0],n.blockedOn===null);)Qb(n),n.blockedOn===null&&zs.shift()}var Ko=Ns.ReactCurrentBatchConfig,od=!0;function zC(t,e,n,r){var s=dt,i=Ko.transition;Ko.transition=null;try{dt=1,Xm(t,e,n,r)}finally{dt=s,Ko.transition=i}}function GC(t,e,n,r){var s=dt,i=Ko.transition;Ko.transition=null;try{dt=4,Xm(t,e,n,r)}finally{dt=s,Ko.transition=i}}function Xm(t,e,n,r){if(od){var s=yp(t,e,n,r);if(s===null)yf(t,e,r,ad,n),Uy(t,r);else if(OC(s,t,e,n,r))r.stopPropagation();else if(Uy(t,r),e&4&&-1<VC.indexOf(t)){for(;s!==null;){var i=xc(s);if(i!==null&&Wb(i),i=yp(t,e,n,r),i===null&&yf(t,e,r,ad,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else yf(t,e,r,null,n)}}var ad=null;function yp(t,e,n,r){if(ad=null,t=Km(r),t=Li(t),t!==null)if(e=lo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ad=t,null}function Xb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NC()){case Jm:return 1;case Gb:return 4;case sd:case RC:return 16;case $b:return 536870912;default:return 16}default:return 16}}var Ks=null,Zm=null,ju=null;function Zb(){if(ju)return ju;var t,e=Zm,n=e.length,r,s="value"in Ks?Ks.value:Ks.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ju=s.slice(t,1<r?1-r:void 0)}function Lu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function uu(){return!0}function Oy(){return!1}function ar(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?uu:Oy,this.isPropagationStopped=Oy,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=uu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=uu)},persist:function(){},isPersistent:uu}),e}var Ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eg=ar(Ea),vc=St({},Ea,{view:0,detail:0}),$C=ar(vc),lf,cf,el,Xd=St({},vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==el&&(el&&t.type==="mousemove"?(lf=t.screenX-el.screenX,cf=t.screenY-el.screenY):cf=lf=0,el=t),lf)},movementY:function(t){return"movementY"in t?t.movementY:cf}}),By=ar(Xd),HC=St({},Xd,{dataTransfer:0}),qC=ar(HC),WC=St({},vc,{relatedTarget:0}),uf=ar(WC),KC=St({},Ea,{animationName:0,elapsedTime:0,pseudoElement:0}),JC=ar(KC),YC=St({},Ea,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QC=ar(YC),XC=St({},Ea,{data:0}),zy=ar(XC),ZC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=t2[t])?!!e[t]:!1}function tg(){return n2}var r2=St({},vc,{key:function(t){if(t.key){var e=ZC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?e2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tg,charCode:function(t){return t.type==="keypress"?Lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s2=ar(r2),i2=St({},Xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gy=ar(i2),o2=St({},vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tg}),a2=ar(o2),l2=St({},Ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),c2=ar(l2),u2=St({},Xd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),d2=ar(u2),h2=[9,13,27,32],ng=ws&&"CompositionEvent"in window,wl=null;ws&&"documentMode"in document&&(wl=document.documentMode);var f2=ws&&"TextEvent"in window&&!wl,eE=ws&&(!ng||wl&&8<wl&&11>=wl),$y=" ",Hy=!1;function tE(t,e){switch(t){case"keyup":return h2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Po=!1;function p2(t,e){switch(t){case"compositionend":return nE(e);case"keypress":return e.which!==32?null:(Hy=!0,$y);case"textInput":return t=e.data,t===$y&&Hy?null:t;default:return null}}function m2(t,e){if(Po)return t==="compositionend"||!ng&&tE(t,e)?(t=Zb(),ju=Zm=Ks=null,Po=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eE&&e.locale!=="ko"?null:e.data;default:return null}}var g2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!g2[t.type]:e==="textarea"}function rE(t,e,n,r){Db(r),e=ld(e,"onChange"),0<e.length&&(n=new eg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _l=null,Bl=null;function y2(t){pE(t,0)}function Zd(t){var e=jo(t);if(kb(e))return t}function v2(t,e){if(t==="change")return e}var sE=!1;if(ws){var df;if(ws){var hf="oninput"in document;if(!hf){var Wy=document.createElement("div");Wy.setAttribute("oninput","return;"),hf=typeof Wy.oninput=="function"}df=hf}else df=!1;sE=df&&(!document.documentMode||9<document.documentMode)}function Ky(){_l&&(_l.detachEvent("onpropertychange",iE),Bl=_l=null)}function iE(t){if(t.propertyName==="value"&&Zd(Bl)){var e=[];rE(e,Bl,t,Km(t)),Ub(y2,e)}}function x2(t,e,n){t==="focusin"?(Ky(),_l=e,Bl=n,_l.attachEvent("onpropertychange",iE)):t==="focusout"&&Ky()}function w2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zd(Bl)}function _2(t,e){if(t==="click")return Zd(e)}function b2(t,e){if(t==="input"||t==="change")return Zd(e)}function E2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ur=typeof Object.is=="function"?Object.is:E2;function zl(t,e){if(Ur(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Zf.call(e,s)||!Ur(t[s],e[s]))return!1}return!0}function Jy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yy(t,e){var n=Jy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jy(n)}}function oE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aE(){for(var t=window,e=td();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=td(t.document)}return e}function rg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function T2(t){var e=aE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oE(n.ownerDocument.documentElement,n)){if(r!==null&&rg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Yy(n,i);var o=Yy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var I2=ws&&"documentMode"in document&&11>=document.documentMode,Mo=null,vp=null,bl=null,xp=!1;function Qy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xp||Mo==null||Mo!==td(r)||(r=Mo,"selectionStart"in r&&rg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bl&&zl(bl,r)||(bl=r,r=ld(vp,"onSelect"),0<r.length&&(e=new eg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Mo)))}function du(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Do={animationend:du("Animation","AnimationEnd"),animationiteration:du("Animation","AnimationIteration"),animationstart:du("Animation","AnimationStart"),transitionend:du("Transition","TransitionEnd")},ff={},lE={};ws&&(lE=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function eh(t){if(ff[t])return ff[t];if(!Do[t])return t;var e=Do[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lE)return ff[t]=e[n];return t}var cE=eh("animationend"),uE=eh("animationiteration"),dE=eh("animationstart"),hE=eh("transitionend"),fE=new Map,Xy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mi(t,e){fE.set(t,e),ao(e,[t])}for(var pf=0;pf<Xy.length;pf++){var mf=Xy[pf],S2=mf.toLowerCase(),k2=mf[0].toUpperCase()+mf.slice(1);mi(S2,"on"+k2)}mi(cE,"onAnimationEnd");mi(uE,"onAnimationIteration");mi(dE,"onAnimationStart");mi("dblclick","onDoubleClick");mi("focusin","onFocus");mi("focusout","onBlur");mi(hE,"onTransitionEnd");sa("onMouseEnter",["mouseout","mouseover"]);sa("onMouseLeave",["mouseout","mouseover"]);sa("onPointerEnter",["pointerout","pointerover"]);sa("onPointerLeave",["pointerout","pointerover"]);ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C2=new Set("cancel close invalid load scroll toggle".split(" ").concat(hl));function Zy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,SC(r,e,void 0,t),t.currentTarget=null}function pE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Zy(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Zy(s,l,u),i=c}}}if(rd)throw t=pp,rd=!1,pp=null,t}function wt(t,e){var n=e[Tp];n===void 0&&(n=e[Tp]=new Set);var r=t+"__bubble";n.has(r)||(mE(e,t,2,!1),n.add(r))}function gf(t,e,n){var r=0;e&&(r|=4),mE(n,t,r,e)}var hu="_reactListening"+Math.random().toString(36).slice(2);function Gl(t){if(!t[hu]){t[hu]=!0,bb.forEach(function(n){n!=="selectionchange"&&(C2.has(n)||gf(n,!1,t),gf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hu]||(e[hu]=!0,gf("selectionchange",!1,e))}}function mE(t,e,n,r){switch(Xb(e)){case 1:var s=zC;break;case 4:s=GC;break;default:s=Xm}n=s.bind(null,e,n,t),s=void 0,!fp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function yf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Li(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Ub(function(){var u=i,d=Km(n),m=[];e:{var g=fE.get(t);if(g!==void 0){var y=eg,w=t;switch(t){case"keypress":if(Lu(n)===0)break e;case"keydown":case"keyup":y=s2;break;case"focusin":w="focus",y=uf;break;case"focusout":w="blur",y=uf;break;case"beforeblur":case"afterblur":y=uf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=By;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=qC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=a2;break;case cE:case uE:case dE:y=JC;break;case hE:y=c2;break;case"scroll":y=$C;break;case"wheel":y=d2;break;case"copy":case"cut":case"paste":y=QC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Gy}var x=(e&4)!==0,b=!x&&t==="scroll",v=x?g!==null?g+"Capture":null:g;x=[];for(var _=u,T;_!==null;){T=_;var R=T.stateNode;if(T.tag===5&&R!==null&&(T=R,v!==null&&(R=Fl(_,v),R!=null&&x.push($l(_,R,T)))),b)break;_=_.return}0<x.length&&(g=new y(g,w,null,n,d),m.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==dp&&(w=n.relatedTarget||n.fromElement)&&(Li(w)||w[_s]))break e;if((y||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=u,w=w?Li(w):null,w!==null&&(b=lo(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=u),y!==w)){if(x=By,R="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(x=Gy,R="onPointerLeave",v="onPointerEnter",_="pointer"),b=y==null?g:jo(y),T=w==null?g:jo(w),g=new x(R,_+"leave",y,n,d),g.target=b,g.relatedTarget=T,R=null,Li(d)===u&&(x=new x(v,_+"enter",w,n,d),x.target=T,x.relatedTarget=b,R=x),b=R,y&&w)t:{for(x=y,v=w,_=0,T=x;T;T=Io(T))_++;for(T=0,R=v;R;R=Io(R))T++;for(;0<_-T;)x=Io(x),_--;for(;0<T-_;)v=Io(v),T--;for(;_--;){if(x===v||v!==null&&x===v.alternate)break t;x=Io(x),v=Io(v)}x=null}else x=null;y!==null&&ev(m,g,y,x,!1),w!==null&&b!==null&&ev(m,b,w,x,!0)}}e:{if(g=u?jo(u):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var j=v2;else if(qy(g))if(sE)j=b2;else{j=w2;var V=x2}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(j=_2);if(j&&(j=j(t,u))){rE(m,j,n,d);break e}V&&V(t,g,u),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&op(g,"number",g.value)}switch(V=u?jo(u):window,t){case"focusin":(qy(V)||V.contentEditable==="true")&&(Mo=V,vp=u,bl=null);break;case"focusout":bl=vp=Mo=null;break;case"mousedown":xp=!0;break;case"contextmenu":case"mouseup":case"dragend":xp=!1,Qy(m,n,d);break;case"selectionchange":if(I2)break;case"keydown":case"keyup":Qy(m,n,d)}var S;if(ng)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Po?tE(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(eE&&n.locale!=="ko"&&(Po||I!=="onCompositionStart"?I==="onCompositionEnd"&&Po&&(S=Zb()):(Ks=d,Zm="value"in Ks?Ks.value:Ks.textContent,Po=!0)),V=ld(u,I),0<V.length&&(I=new zy(I,t,null,n,d),m.push({event:I,listeners:V}),S?I.data=S:(S=nE(n),S!==null&&(I.data=S)))),(S=f2?p2(t,n):m2(t,n))&&(u=ld(u,"onBeforeInput"),0<u.length&&(d=new zy("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:u}),d.data=S))}pE(m,e)})}function $l(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ld(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Fl(t,n),i!=null&&r.unshift($l(t,i,s)),i=Fl(t,e),i!=null&&r.push($l(t,i,s))),t=t.return}return r}function Io(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ev(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Fl(n,i),c!=null&&o.unshift($l(n,c,l))):s||(c=Fl(n,i),c!=null&&o.push($l(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var A2=/\r\n?/g,N2=/\u0000|\uFFFD/g;function tv(t){return(typeof t=="string"?t:""+t).replace(A2,`
`).replace(N2,"")}function fu(t,e,n){if(e=tv(e),tv(t)!==e&&n)throw Error(ve(425))}function cd(){}var wp=null,_p=null;function bp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ep=typeof setTimeout=="function"?setTimeout:void 0,R2=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,P2=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(t){return nv.resolve(null).then(t).catch(M2)}:Ep;function M2(t){setTimeout(function(){throw t})}function vf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ol(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ol(e)}function ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ta=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Ta,Hl="__reactProps$"+Ta,_s="__reactContainer$"+Ta,Tp="__reactEvents$"+Ta,D2="__reactListeners$"+Ta,j2="__reactHandles$"+Ta;function Li(t){var e=t[Yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_s]||n[Yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rv(t);t!==null;){if(n=t[Yr])return n;t=rv(t)}return e}t=n,n=t.parentNode}return null}function xc(t){return t=t[Yr]||t[_s],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ve(33))}function th(t){return t[Hl]||null}var Ip=[],Lo=-1;function gi(t){return{current:t}}function bt(t){0>Lo||(t.current=Ip[Lo],Ip[Lo]=null,Lo--)}function vt(t,e){Lo++,Ip[Lo]=t.current,t.current=e}var di={},bn=gi(di),Bn=gi(!1),Wi=di;function ia(t,e){var n=t.type.contextTypes;if(!n)return di;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function zn(t){return t=t.childContextTypes,t!=null}function ud(){bt(Bn),bt(bn)}function sv(t,e,n){if(bn.current!==di)throw Error(ve(168));vt(bn,e),vt(Bn,n)}function gE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ve(108,xC(t)||"Unknown",s));return St({},n,r)}function dd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||di,Wi=bn.current,vt(bn,t),vt(Bn,Bn.current),!0}function iv(t,e,n){var r=t.stateNode;if(!r)throw Error(ve(169));n?(t=gE(t,e,Wi),r.__reactInternalMemoizedMergedChildContext=t,bt(Bn),bt(bn),vt(bn,t)):bt(Bn),vt(Bn,n)}var us=null,nh=!1,xf=!1;function yE(t){us===null?us=[t]:us.push(t)}function L2(t){nh=!0,yE(t)}function yi(){if(!xf&&us!==null){xf=!0;var t=0,e=dt;try{var n=us;for(dt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}us=null,nh=!1}catch(s){throw us!==null&&(us=us.slice(t+1)),zb(Jm,yi),s}finally{dt=e,xf=!1}}return null}var Fo=[],Uo=0,hd=null,fd=0,hr=[],fr=0,Ki=null,fs=1,ps="";function Pi(t,e){Fo[Uo++]=fd,Fo[Uo++]=hd,hd=t,fd=e}function vE(t,e,n){hr[fr++]=fs,hr[fr++]=ps,hr[fr++]=Ki,Ki=t;var r=fs;t=ps;var s=32-Mr(r)-1;r&=~(1<<s),n+=1;var i=32-Mr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,fs=1<<32-Mr(e)+s|n<<s|r,ps=i+t}else fs=1<<i|n<<s|r,ps=t}function sg(t){t.return!==null&&(Pi(t,1),vE(t,1,0))}function ig(t){for(;t===hd;)hd=Fo[--Uo],Fo[Uo]=null,fd=Fo[--Uo],Fo[Uo]=null;for(;t===Ki;)Ki=hr[--fr],hr[fr]=null,ps=hr[--fr],hr[fr]=null,fs=hr[--fr],hr[fr]=null}var Zn=null,Qn=null,Et=!1,Pr=null;function xE(t,e){var n=pr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ov(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zn=t,Qn=ti(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zn=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ki!==null?{id:fs,overflow:ps}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zn=t,Qn=null,!0):!1;default:return!1}}function Sp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kp(t){if(Et){var e=Qn;if(e){var n=e;if(!ov(t,e)){if(Sp(t))throw Error(ve(418));e=ti(n.nextSibling);var r=Zn;e&&ov(t,e)?xE(r,n):(t.flags=t.flags&-4097|2,Et=!1,Zn=t)}}else{if(Sp(t))throw Error(ve(418));t.flags=t.flags&-4097|2,Et=!1,Zn=t}}}function av(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zn=t}function pu(t){if(t!==Zn)return!1;if(!Et)return av(t),Et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bp(t.type,t.memoizedProps)),e&&(e=Qn)){if(Sp(t))throw wE(),Error(ve(418));for(;e;)xE(t,e),e=ti(e.nextSibling)}if(av(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ve(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qn=ti(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=Zn?ti(t.stateNode.nextSibling):null;return!0}function wE(){for(var t=Qn;t;)t=ti(t.nextSibling)}function oa(){Qn=Zn=null,Et=!1}function og(t){Pr===null?Pr=[t]:Pr.push(t)}var F2=Ns.ReactCurrentBatchConfig;function tl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ve(309));var r=n.stateNode}if(!r)throw Error(ve(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ve(284));if(!n._owner)throw Error(ve(290,t))}return t}function mu(t,e){throw t=Object.prototype.toString.call(e),Error(ve(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lv(t){var e=t._init;return e(t._payload)}function _E(t){function e(v,_){if(t){var T=v.deletions;T===null?(v.deletions=[_],v.flags|=16):T.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function s(v,_){return v=ii(v,_),v.index=0,v.sibling=null,v}function i(v,_,T){return v.index=T,t?(T=v.alternate,T!==null?(T=T.index,T<_?(v.flags|=2,_):T):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,_,T,R){return _===null||_.tag!==6?(_=Sf(T,v.mode,R),_.return=v,_):(_=s(_,T),_.return=v,_)}function c(v,_,T,R){var j=T.type;return j===Ro?d(v,_,T.props.children,R,T.key):_!==null&&(_.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Os&&lv(j)===_.type)?(R=s(_,T.props),R.ref=tl(v,_,T),R.return=v,R):(R=Gu(T.type,T.key,T.props,null,v.mode,R),R.ref=tl(v,_,T),R.return=v,R)}function u(v,_,T,R){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=kf(T,v.mode,R),_.return=v,_):(_=s(_,T.children||[]),_.return=v,_)}function d(v,_,T,R,j){return _===null||_.tag!==7?(_=Gi(T,v.mode,R,j),_.return=v,_):(_=s(_,T),_.return=v,_)}function m(v,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Sf(""+_,v.mode,T),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case su:return T=Gu(_.type,_.key,_.props,null,v.mode,T),T.ref=tl(v,null,_),T.return=v,T;case No:return _=kf(_,v.mode,T),_.return=v,_;case Os:var R=_._init;return m(v,R(_._payload),T)}if(ul(_)||Ya(_))return _=Gi(_,v.mode,T,null),_.return=v,_;mu(v,_)}return null}function g(v,_,T,R){var j=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return j!==null?null:l(v,_,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case su:return T.key===j?c(v,_,T,R):null;case No:return T.key===j?u(v,_,T,R):null;case Os:return j=T._init,g(v,_,j(T._payload),R)}if(ul(T)||Ya(T))return j!==null?null:d(v,_,T,R,null);mu(v,T)}return null}function y(v,_,T,R,j){if(typeof R=="string"&&R!==""||typeof R=="number")return v=v.get(T)||null,l(_,v,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case su:return v=v.get(R.key===null?T:R.key)||null,c(_,v,R,j);case No:return v=v.get(R.key===null?T:R.key)||null,u(_,v,R,j);case Os:var V=R._init;return y(v,_,T,V(R._payload),j)}if(ul(R)||Ya(R))return v=v.get(T)||null,d(_,v,R,j,null);mu(_,R)}return null}function w(v,_,T,R){for(var j=null,V=null,S=_,I=_=0,C=null;S!==null&&I<T.length;I++){S.index>I?(C=S,S=null):C=S.sibling;var A=g(v,S,T[I],R);if(A===null){S===null&&(S=C);break}t&&S&&A.alternate===null&&e(v,S),_=i(A,_,I),V===null?j=A:V.sibling=A,V=A,S=C}if(I===T.length)return n(v,S),Et&&Pi(v,I),j;if(S===null){for(;I<T.length;I++)S=m(v,T[I],R),S!==null&&(_=i(S,_,I),V===null?j=S:V.sibling=S,V=S);return Et&&Pi(v,I),j}for(S=r(v,S);I<T.length;I++)C=y(S,v,I,T[I],R),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?I:C.key),_=i(C,_,I),V===null?j=C:V.sibling=C,V=C);return t&&S.forEach(function(F){return e(v,F)}),Et&&Pi(v,I),j}function x(v,_,T,R){var j=Ya(T);if(typeof j!="function")throw Error(ve(150));if(T=j.call(T),T==null)throw Error(ve(151));for(var V=j=null,S=_,I=_=0,C=null,A=T.next();S!==null&&!A.done;I++,A=T.next()){S.index>I?(C=S,S=null):C=S.sibling;var F=g(v,S,A.value,R);if(F===null){S===null&&(S=C);break}t&&S&&F.alternate===null&&e(v,S),_=i(F,_,I),V===null?j=F:V.sibling=F,V=F,S=C}if(A.done)return n(v,S),Et&&Pi(v,I),j;if(S===null){for(;!A.done;I++,A=T.next())A=m(v,A.value,R),A!==null&&(_=i(A,_,I),V===null?j=A:V.sibling=A,V=A);return Et&&Pi(v,I),j}for(S=r(v,S);!A.done;I++,A=T.next())A=y(S,v,I,A.value,R),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?I:A.key),_=i(A,_,I),V===null?j=A:V.sibling=A,V=A);return t&&S.forEach(function(P){return e(v,P)}),Et&&Pi(v,I),j}function b(v,_,T,R){if(typeof T=="object"&&T!==null&&T.type===Ro&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case su:e:{for(var j=T.key,V=_;V!==null;){if(V.key===j){if(j=T.type,j===Ro){if(V.tag===7){n(v,V.sibling),_=s(V,T.props.children),_.return=v,v=_;break e}}else if(V.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Os&&lv(j)===V.type){n(v,V.sibling),_=s(V,T.props),_.ref=tl(v,V,T),_.return=v,v=_;break e}n(v,V);break}else e(v,V);V=V.sibling}T.type===Ro?(_=Gi(T.props.children,v.mode,R,T.key),_.return=v,v=_):(R=Gu(T.type,T.key,T.props,null,v.mode,R),R.ref=tl(v,_,T),R.return=v,v=R)}return o(v);case No:e:{for(V=T.key;_!==null;){if(_.key===V)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(v,_.sibling),_=s(_,T.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=kf(T,v.mode,R),_.return=v,v=_}return o(v);case Os:return V=T._init,b(v,_,V(T._payload),R)}if(ul(T))return w(v,_,T,R);if(Ya(T))return x(v,_,T,R);mu(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(n(v,_.sibling),_=s(_,T),_.return=v,v=_):(n(v,_),_=Sf(T,v.mode,R),_.return=v,v=_),o(v)):n(v,_)}return b}var aa=_E(!0),bE=_E(!1),pd=gi(null),md=null,Vo=null,ag=null;function lg(){ag=Vo=md=null}function cg(t){var e=pd.current;bt(pd),t._currentValue=e}function Cp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jo(t,e){md=t,ag=Vo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vn=!0),t.firstContext=null)}function xr(t){var e=t._currentValue;if(ag!==t)if(t={context:t,memoizedValue:e,next:null},Vo===null){if(md===null)throw Error(ve(308));Vo=t,md.dependencies={lanes:0,firstContext:t}}else Vo=Vo.next=t;return e}var Fi=null;function ug(t){Fi===null?Fi=[t]:Fi.push(t)}function EE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ug(e)):(n.next=s.next,s.next=n),e.interleaved=n,bs(t,r)}function bs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bs=!1;function dg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ni(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,et&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,bs(t,n)}return s=r.interleaved,s===null?(e.next=e,ug(r)):(e.next=s.next,s.next=e),r.interleaved=e,bs(t,n)}function Fu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ym(t,n)}}function cv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function gd(t,e,n,r){var s=t.updateQueue;Bs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,d=u=c=null,l=i;do{var g=l.lane,y=l.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,x=l;switch(g=e,y=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){m=w.call(y,m,g);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,g=typeof w=="function"?w.call(y,m,g):w,g==null)break e;m=St({},m,g);break e;case 2:Bs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else y={eventTime:y,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,c=m):d=d.next=y,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(c=m),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Yi|=o,t.lanes=o,t.memoizedState=m}}function uv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ve(191,s));s.call(r)}}}var wc={},Xr=gi(wc),ql=gi(wc),Wl=gi(wc);function Ui(t){if(t===wc)throw Error(ve(174));return t}function hg(t,e){switch(vt(Wl,e),vt(ql,t),vt(Xr,wc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lp(e,t)}bt(Xr),vt(Xr,e)}function la(){bt(Xr),bt(ql),bt(Wl)}function IE(t){Ui(Wl.current);var e=Ui(Xr.current),n=lp(e,t.type);e!==n&&(vt(ql,t),vt(Xr,n))}function fg(t){ql.current===t&&(bt(Xr),bt(ql))}var Tt=gi(0);function yd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wf=[];function pg(){for(var t=0;t<wf.length;t++)wf[t]._workInProgressVersionPrimary=null;wf.length=0}var Uu=Ns.ReactCurrentDispatcher,_f=Ns.ReactCurrentBatchConfig,Ji=0,It=null,Ht=null,Qt=null,vd=!1,El=!1,Kl=0,U2=0;function mn(){throw Error(ve(321))}function mg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ur(t[n],e[n]))return!1;return!0}function gg(t,e,n,r,s,i){if(Ji=i,It=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uu.current=t===null||t.memoizedState===null?z2:G2,t=n(r,s),El){i=0;do{if(El=!1,Kl=0,25<=i)throw Error(ve(301));i+=1,Qt=Ht=null,e.updateQueue=null,Uu.current=$2,t=n(r,s)}while(El)}if(Uu.current=xd,e=Ht!==null&&Ht.next!==null,Ji=0,Qt=Ht=It=null,vd=!1,e)throw Error(ve(300));return t}function yg(){var t=Kl!==0;return Kl=0,t}function Kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?It.memoizedState=Qt=t:Qt=Qt.next=t,Qt}function wr(){if(Ht===null){var t=It.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var e=Qt===null?It.memoizedState:Qt.next;if(e!==null)Qt=e,Ht=t;else{if(t===null)throw Error(ve(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Qt===null?It.memoizedState=Qt=t:Qt=Qt.next=t}return Qt}function Jl(t,e){return typeof e=="function"?e(t):e}function bf(t){var e=wr(),n=e.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=t;var r=Ht,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Ji&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var m={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,It.lanes|=d,Yi|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,Ur(r,e.memoizedState)||(Vn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,It.lanes|=i,Yi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ef(t){var e=wr(),n=e.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ur(i,e.memoizedState)||(Vn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function SE(){}function kE(t,e){var n=It,r=wr(),s=e(),i=!Ur(r.memoizedState,s);if(i&&(r.memoizedState=s,Vn=!0),r=r.queue,vg(NE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Qt!==null&&Qt.memoizedState.tag&1){if(n.flags|=2048,Yl(9,AE.bind(null,n,r,s,e),void 0,null),Xt===null)throw Error(ve(349));Ji&30||CE(n,e,s)}return s}function CE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AE(t,e,n,r){e.value=n,e.getSnapshot=r,RE(e)&&PE(t)}function NE(t,e,n){return n(function(){RE(e)&&PE(t)})}function RE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ur(t,n)}catch{return!0}}function PE(t){var e=bs(t,1);e!==null&&Dr(e,t,1,-1)}function dv(t){var e=Kr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jl,lastRenderedState:t},e.queue=t,t=t.dispatch=B2.bind(null,It,t),[e.memoizedState,t]}function Yl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ME(){return wr().memoizedState}function Vu(t,e,n,r){var s=Kr();It.flags|=t,s.memoizedState=Yl(1|e,n,void 0,r===void 0?null:r)}function rh(t,e,n,r){var s=wr();r=r===void 0?null:r;var i=void 0;if(Ht!==null){var o=Ht.memoizedState;if(i=o.destroy,r!==null&&mg(r,o.deps)){s.memoizedState=Yl(e,n,i,r);return}}It.flags|=t,s.memoizedState=Yl(1|e,n,i,r)}function hv(t,e){return Vu(8390656,8,t,e)}function vg(t,e){return rh(2048,8,t,e)}function DE(t,e){return rh(4,2,t,e)}function jE(t,e){return rh(4,4,t,e)}function LE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function FE(t,e,n){return n=n!=null?n.concat([t]):null,rh(4,4,LE.bind(null,e,t),n)}function xg(){}function UE(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function VE(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function OE(t,e,n){return Ji&21?(Ur(n,e)||(n=Hb(),It.lanes|=n,Yi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vn=!0),t.memoizedState=n)}function V2(t,e){var n=dt;dt=n!==0&&4>n?n:4,t(!0);var r=_f.transition;_f.transition={};try{t(!1),e()}finally{dt=n,_f.transition=r}}function BE(){return wr().memoizedState}function O2(t,e,n){var r=si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zE(t))GE(e,n);else if(n=EE(t,e,n,r),n!==null){var s=Cn();Dr(n,t,r,s),$E(n,e,r)}}function B2(t,e,n){var r=si(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zE(t))GE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Ur(l,o)){var c=e.interleaved;c===null?(s.next=s,ug(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=EE(t,e,s,r),n!==null&&(s=Cn(),Dr(n,t,r,s),$E(n,e,r))}}function zE(t){var e=t.alternate;return t===It||e!==null&&e===It}function GE(t,e){El=vd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $E(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ym(t,n)}}var xd={readContext:xr,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},z2={readContext:xr,useCallback:function(t,e){return Kr().memoizedState=[t,e===void 0?null:e],t},useContext:xr,useEffect:hv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vu(4194308,4,LE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vu(4,2,t,e)},useMemo:function(t,e){var n=Kr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=O2.bind(null,It,t),[r.memoizedState,t]},useRef:function(t){var e=Kr();return t={current:t},e.memoizedState=t},useState:dv,useDebugValue:xg,useDeferredValue:function(t){return Kr().memoizedState=t},useTransition:function(){var t=dv(!1),e=t[0];return t=V2.bind(null,t[1]),Kr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=It,s=Kr();if(Et){if(n===void 0)throw Error(ve(407));n=n()}else{if(n=e(),Xt===null)throw Error(ve(349));Ji&30||CE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,hv(NE.bind(null,r,i,t),[t]),r.flags|=2048,Yl(9,AE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Kr(),e=Xt.identifierPrefix;if(Et){var n=ps,r=fs;n=(r&~(1<<32-Mr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Kl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=U2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},G2={readContext:xr,useCallback:UE,useContext:xr,useEffect:vg,useImperativeHandle:FE,useInsertionEffect:DE,useLayoutEffect:jE,useMemo:VE,useReducer:bf,useRef:ME,useState:function(){return bf(Jl)},useDebugValue:xg,useDeferredValue:function(t){var e=wr();return OE(e,Ht.memoizedState,t)},useTransition:function(){var t=bf(Jl)[0],e=wr().memoizedState;return[t,e]},useMutableSource:SE,useSyncExternalStore:kE,useId:BE,unstable_isNewReconciler:!1},$2={readContext:xr,useCallback:UE,useContext:xr,useEffect:vg,useImperativeHandle:FE,useInsertionEffect:DE,useLayoutEffect:jE,useMemo:VE,useReducer:Ef,useRef:ME,useState:function(){return Ef(Jl)},useDebugValue:xg,useDeferredValue:function(t){var e=wr();return Ht===null?e.memoizedState=t:OE(e,Ht.memoizedState,t)},useTransition:function(){var t=Ef(Jl)[0],e=wr().memoizedState;return[t,e]},useMutableSource:SE,useSyncExternalStore:kE,useId:BE,unstable_isNewReconciler:!1};function Nr(t,e){if(t&&t.defaultProps){e=St({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ap(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:St({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sh={isMounted:function(t){return(t=t._reactInternals)?lo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Cn(),s=si(t),i=xs(r,s);i.payload=e,n!=null&&(i.callback=n),e=ni(t,i,s),e!==null&&(Dr(e,t,s,r),Fu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Cn(),s=si(t),i=xs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ni(t,i,s),e!==null&&(Dr(e,t,s,r),Fu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Cn(),r=si(t),s=xs(n,r);s.tag=2,e!=null&&(s.callback=e),e=ni(t,s,r),e!==null&&(Dr(e,t,r,n),Fu(e,t,r))}};function fv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!zl(n,r)||!zl(s,i):!0}function HE(t,e,n){var r=!1,s=di,i=e.contextType;return typeof i=="object"&&i!==null?i=xr(i):(s=zn(e)?Wi:bn.current,r=e.contextTypes,i=(r=r!=null)?ia(t,s):di),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function pv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sh.enqueueReplaceState(e,e.state,null)}function Np(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},dg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=xr(i):(i=zn(e)?Wi:bn.current,s.context=ia(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ap(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&sh.enqueueReplaceState(s,s.state,null),gd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ca(t,e){try{var n="",r=e;do n+=vC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Tf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var H2=typeof WeakMap=="function"?WeakMap:Map;function qE(t,e,n){n=xs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_d||(_d=!0,Bp=r),Rp(t,e)},n}function WE(t,e,n){n=xs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Rp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Rp(t,e),typeof r!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function mv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new H2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=iA.bind(null,t,e,n),e.then(t,t))}function gv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xs(-1,1),e.tag=2,ni(n,e,1))),n.lanes|=1),t)}var q2=Ns.ReactCurrentOwner,Vn=!1;function Sn(t,e,n,r){e.child=t===null?bE(e,null,n,r):aa(e,t.child,n,r)}function vv(t,e,n,r,s){n=n.render;var i=e.ref;return Jo(e,s),r=gg(t,e,n,r,i,s),n=yg(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Es(t,e,s)):(Et&&n&&sg(e),e.flags|=1,Sn(t,e,r,s),e.child)}function xv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!kg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,KE(t,e,i,r,s)):(t=Gu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:zl,n(o,r)&&t.ref===e.ref)return Es(t,e,s)}return e.flags|=1,t=ii(i,r),t.ref=e.ref,t.return=e,e.child=t}function KE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(zl(i,r)&&t.ref===e.ref)if(Vn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Vn=!0);else return e.lanes=t.lanes,Es(t,e,s)}return Pp(t,e,n,r,s)}function JE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(Bo,Yn),Yn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,vt(Bo,Yn),Yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,vt(Bo,Yn),Yn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,vt(Bo,Yn),Yn|=r;return Sn(t,e,s,n),e.child}function YE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pp(t,e,n,r,s){var i=zn(n)?Wi:bn.current;return i=ia(e,i),Jo(e,s),n=gg(t,e,n,r,i,s),r=yg(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Es(t,e,s)):(Et&&r&&sg(e),e.flags|=1,Sn(t,e,n,s),e.child)}function wv(t,e,n,r,s){if(zn(n)){var i=!0;dd(e)}else i=!1;if(Jo(e,s),e.stateNode===null)Ou(t,e),HE(e,n,r),Np(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=xr(u):(u=zn(n)?Wi:bn.current,u=ia(e,u));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&pv(e,o,r,u),Bs=!1;var g=e.memoizedState;o.state=g,gd(e,r,o,s),c=e.memoizedState,l!==r||g!==c||Bn.current||Bs?(typeof d=="function"&&(Ap(e,n,d,r),c=e.memoizedState),(l=Bs||fv(e,n,l,r,g,c,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,TE(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Nr(e.type,l),o.props=u,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=xr(c):(c=zn(n)?Wi:bn.current,c=ia(e,c));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==c)&&pv(e,o,r,c),Bs=!1,g=e.memoizedState,o.state=g,gd(e,r,o,s);var w=e.memoizedState;l!==m||g!==w||Bn.current||Bs?(typeof y=="function"&&(Ap(e,n,y,r),w=e.memoizedState),(u=Bs||fv(e,n,u,r,g,w,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Mp(t,e,n,r,i,s)}function Mp(t,e,n,r,s,i){YE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&iv(e,n,!1),Es(t,e,i);r=e.stateNode,q2.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=aa(e,t.child,null,i),e.child=aa(e,null,l,i)):Sn(t,e,l,i),e.memoizedState=r.state,s&&iv(e,n,!0),e.child}function QE(t){var e=t.stateNode;e.pendingContext?sv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sv(t,e.context,!1),hg(t,e.containerInfo)}function _v(t,e,n,r,s){return oa(),og(s),e.flags|=256,Sn(t,e,n,r),e.child}var Dp={dehydrated:null,treeContext:null,retryLane:0};function jp(t){return{baseLanes:t,cachePool:null,transitions:null}}function XE(t,e,n){var r=e.pendingProps,s=Tt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),vt(Tt,s&1),t===null)return kp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ah(o,r,0,null),t=Gi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=jp(n),e.memoizedState=Dp,t):wg(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return W2(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ii(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ii(l,i):(i=Gi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?jp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Dp,r}return i=t.child,t=i.sibling,r=ii(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wg(t,e){return e=ah({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gu(t,e,n,r){return r!==null&&og(r),aa(e,t.child,null,n),t=wg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function W2(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Tf(Error(ve(422))),gu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ah({mode:"visible",children:r.children},s,0,null),i=Gi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&aa(e,t.child,null,o),e.child.memoizedState=jp(o),e.memoizedState=Dp,i);if(!(e.mode&1))return gu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ve(419)),r=Tf(i,r,void 0),gu(t,e,o,r)}if(l=(o&t.childLanes)!==0,Vn||l){if(r=Xt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,bs(t,s),Dr(r,t,s,-1))}return Sg(),r=Tf(Error(ve(421))),gu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=oA.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Qn=ti(s.nextSibling),Zn=e,Et=!0,Pr=null,t!==null&&(hr[fr++]=fs,hr[fr++]=ps,hr[fr++]=Ki,fs=t.id,ps=t.overflow,Ki=e),e=wg(e,r.children),e.flags|=4096,e)}function bv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cp(t.return,e,n)}function If(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ZE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Sn(t,e,r.children,n),r=Tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bv(t,n,e);else if(t.tag===19)bv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(vt(Tt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&yd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),If(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&yd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}If(e,!0,n,null,i);break;case"together":If(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ou(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Es(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ve(153));if(e.child!==null){for(t=e.child,n=ii(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ii(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function K2(t,e,n){switch(e.tag){case 3:QE(e),oa();break;case 5:IE(e);break;case 1:zn(e.type)&&dd(e);break;case 4:hg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;vt(pd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(vt(Tt,Tt.current&1),e.flags|=128,null):n&e.child.childLanes?XE(t,e,n):(vt(Tt,Tt.current&1),t=Es(t,e,n),t!==null?t.sibling:null);vt(Tt,Tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ZE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),vt(Tt,Tt.current),r)break;return null;case 22:case 23:return e.lanes=0,JE(t,e,n)}return Es(t,e,n)}var eT,Lp,tT,nT;eT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lp=function(){};tT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ui(Xr.current);var i=null;switch(n){case"input":s=sp(t,s),r=sp(t,r),i=[];break;case"select":s=St({},s,{value:void 0}),r=St({},r,{value:void 0}),i=[];break;case"textarea":s=ap(t,s),r=ap(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=cd)}cp(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(jl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(jl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&wt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};nT=function(t,e,n,r){n!==r&&(e.flags|=4)};function nl(t,e){if(!Et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function J2(t,e,n){var r=e.pendingProps;switch(ig(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(e),null;case 1:return zn(e.type)&&ud(),gn(e),null;case 3:return r=e.stateNode,la(),bt(Bn),bt(bn),pg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pr!==null&&($p(Pr),Pr=null))),Lp(t,e),gn(e),null;case 5:fg(e);var s=Ui(Wl.current);if(n=e.type,t!==null&&e.stateNode!=null)tT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ve(166));return gn(e),null}if(t=Ui(Xr.current),pu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Yr]=e,r[Hl]=i,t=(e.mode&1)!==0,n){case"dialog":wt("cancel",r),wt("close",r);break;case"iframe":case"object":case"embed":wt("load",r);break;case"video":case"audio":for(s=0;s<hl.length;s++)wt(hl[s],r);break;case"source":wt("error",r);break;case"img":case"image":case"link":wt("error",r),wt("load",r);break;case"details":wt("toggle",r);break;case"input":Ry(r,i),wt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},wt("invalid",r);break;case"textarea":My(r,i),wt("invalid",r)}cp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&fu(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&fu(r.textContent,l,t),s=["children",""+l]):jl.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&wt("scroll",r)}switch(n){case"input":iu(r),Py(r,i,!0);break;case"textarea":iu(r),Dy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=cd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Nb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yr]=e,t[Hl]=r,eT(t,e,!1,!1),e.stateNode=t;e:{switch(o=up(n,r),n){case"dialog":wt("cancel",t),wt("close",t),s=r;break;case"iframe":case"object":case"embed":wt("load",t),s=r;break;case"video":case"audio":for(s=0;s<hl.length;s++)wt(hl[s],t);s=r;break;case"source":wt("error",t),s=r;break;case"img":case"image":case"link":wt("error",t),wt("load",t),s=r;break;case"details":wt("toggle",t),s=r;break;case"input":Ry(t,r),s=sp(t,r),wt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=St({},r,{value:void 0}),wt("invalid",t);break;case"textarea":My(t,r),s=ap(t,r),wt("invalid",t);break;default:s=r}cp(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Mb(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Rb(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ll(t,c):typeof c=="number"&&Ll(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(jl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&wt("scroll",t):c!=null&&$m(t,i,c,o))}switch(n){case"input":iu(t),Py(t,r,!1);break;case"textarea":iu(t),Dy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ui(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ho(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ho(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=cd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gn(e),null;case 6:if(t&&e.stateNode!=null)nT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ve(166));if(n=Ui(Wl.current),Ui(Xr.current),pu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yr]=e,(i=r.nodeValue!==n)&&(t=Zn,t!==null))switch(t.tag){case 3:fu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yr]=e,e.stateNode=r}return gn(e),null;case 13:if(bt(Tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Et&&Qn!==null&&e.mode&1&&!(e.flags&128))wE(),oa(),e.flags|=98560,i=!1;else if(i=pu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ve(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ve(317));i[Yr]=e}else oa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gn(e),i=!1}else Pr!==null&&($p(Pr),Pr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Tt.current&1?qt===0&&(qt=3):Sg())),e.updateQueue!==null&&(e.flags|=4),gn(e),null);case 4:return la(),Lp(t,e),t===null&&Gl(e.stateNode.containerInfo),gn(e),null;case 10:return cg(e.type._context),gn(e),null;case 17:return zn(e.type)&&ud(),gn(e),null;case 19:if(bt(Tt),i=e.memoizedState,i===null)return gn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)nl(i,!1);else{if(qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yd(t),o!==null){for(e.flags|=128,nl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return vt(Tt,Tt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Dt()>ua&&(e.flags|=128,r=!0,nl(i,!1),e.lanes=4194304)}else{if(!r)if(t=yd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),nl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Et)return gn(e),null}else 2*Dt()-i.renderingStartTime>ua&&n!==1073741824&&(e.flags|=128,r=!0,nl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Dt(),e.sibling=null,n=Tt.current,vt(Tt,r?n&1|2:n&1),e):(gn(e),null);case 22:case 23:return Ig(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yn&1073741824&&(gn(e),e.subtreeFlags&6&&(e.flags|=8192)):gn(e),null;case 24:return null;case 25:return null}throw Error(ve(156,e.tag))}function Y2(t,e){switch(ig(e),e.tag){case 1:return zn(e.type)&&ud(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return la(),bt(Bn),bt(bn),pg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fg(e),null;case 13:if(bt(Tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ve(340));oa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bt(Tt),null;case 4:return la(),null;case 10:return cg(e.type._context),null;case 22:case 23:return Ig(),null;case 24:return null;default:return null}}var yu=!1,xn=!1,Q2=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Oo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Rt(t,e,r)}else n.current=null}function Fp(t,e,n){try{n()}catch(r){Rt(t,e,r)}}var Ev=!1;function X2(t,e){if(wp=od,t=aE(),rg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,m=t,g=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)g=m,m=y;for(;;){if(m===t)break t;if(g===n&&++u===s&&(l=o),g===i&&++d===r&&(c=o),(y=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(_p={focusedElem:t,selectionRange:n},od=!1,ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){e=ke;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,b=w.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:Nr(e.type,x),b);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ve(163))}}catch(R){Rt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}return w=Ev,Ev=!1,w}function Tl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fp(e,n,i)}s=s.next}while(s!==r)}}function ih(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Up(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rT(t){var e=t.alternate;e!==null&&(t.alternate=null,rT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yr],delete e[Hl],delete e[Tp],delete e[D2],delete e[j2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sT(t){return t.tag===5||t.tag===3||t.tag===4}function Tv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cd));else if(r!==4&&(t=t.child,t!==null))for(Vp(t,e,n),t=t.sibling;t!==null;)Vp(t,e,n),t=t.sibling}function Op(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Op(t,e,n),t=t.sibling;t!==null;)Op(t,e,n),t=t.sibling}var nn=null,Rr=!1;function Us(t,e,n){for(n=n.child;n!==null;)iT(t,e,n),n=n.sibling}function iT(t,e,n){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(Qd,n)}catch{}switch(n.tag){case 5:xn||Oo(n,e);case 6:var r=nn,s=Rr;nn=null,Us(t,e,n),nn=r,Rr=s,nn!==null&&(Rr?(t=nn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nn.removeChild(n.stateNode));break;case 18:nn!==null&&(Rr?(t=nn,n=n.stateNode,t.nodeType===8?vf(t.parentNode,n):t.nodeType===1&&vf(t,n),Ol(t)):vf(nn,n.stateNode));break;case 4:r=nn,s=Rr,nn=n.stateNode.containerInfo,Rr=!0,Us(t,e,n),nn=r,Rr=s;break;case 0:case 11:case 14:case 15:if(!xn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fp(n,e,o),s=s.next}while(s!==r)}Us(t,e,n);break;case 1:if(!xn&&(Oo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Rt(n,e,l)}Us(t,e,n);break;case 21:Us(t,e,n);break;case 22:n.mode&1?(xn=(r=xn)||n.memoizedState!==null,Us(t,e,n),xn=r):Us(t,e,n);break;default:Us(t,e,n)}}function Iv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Q2),e.forEach(function(r){var s=aA.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ar(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:nn=l.stateNode,Rr=!1;break e;case 3:nn=l.stateNode.containerInfo,Rr=!0;break e;case 4:nn=l.stateNode.containerInfo,Rr=!0;break e}l=l.return}if(nn===null)throw Error(ve(160));iT(i,o,s),nn=null,Rr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Rt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oT(e,t),e=e.sibling}function oT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ar(e,t),Wr(t),r&4){try{Tl(3,t,t.return),ih(3,t)}catch(x){Rt(t,t.return,x)}try{Tl(5,t,t.return)}catch(x){Rt(t,t.return,x)}}break;case 1:Ar(e,t),Wr(t),r&512&&n!==null&&Oo(n,n.return);break;case 5:if(Ar(e,t),Wr(t),r&512&&n!==null&&Oo(n,n.return),t.flags&32){var s=t.stateNode;try{Ll(s,"")}catch(x){Rt(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Cb(s,i),up(l,o);var u=up(l,i);for(o=0;o<c.length;o+=2){var d=c[o],m=c[o+1];d==="style"?Mb(s,m):d==="dangerouslySetInnerHTML"?Rb(s,m):d==="children"?Ll(s,m):$m(s,d,m,u)}switch(l){case"input":ip(s,i);break;case"textarea":Ab(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Ho(s,!!i.multiple,y,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ho(s,!!i.multiple,i.defaultValue,!0):Ho(s,!!i.multiple,i.multiple?[]:"",!1))}s[Hl]=i}catch(x){Rt(t,t.return,x)}}break;case 6:if(Ar(e,t),Wr(t),r&4){if(t.stateNode===null)throw Error(ve(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Rt(t,t.return,x)}}break;case 3:if(Ar(e,t),Wr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ol(e.containerInfo)}catch(x){Rt(t,t.return,x)}break;case 4:Ar(e,t),Wr(t);break;case 13:Ar(e,t),Wr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Eg=Dt())),r&4&&Iv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(xn=(u=xn)||d,Ar(e,t),xn=u):Ar(e,t),Wr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ke=t,d=t.child;d!==null;){for(m=ke=d;ke!==null;){switch(g=ke,y=g.child,g.tag){case 0:case 11:case 14:case 15:Tl(4,g,g.return);break;case 1:Oo(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){Rt(r,n,x)}}break;case 5:Oo(g,g.return);break;case 22:if(g.memoizedState!==null){kv(m);continue}}y!==null?(y.return=g,ke=y):kv(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{s=m.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Pb("display",o))}catch(x){Rt(t,t.return,x)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(x){Rt(t,t.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ar(e,t),Wr(t),r&4&&Iv(t);break;case 21:break;default:Ar(e,t),Wr(t)}}function Wr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sT(n)){var r=n;break e}n=n.return}throw Error(ve(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ll(s,""),r.flags&=-33);var i=Tv(t);Op(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Tv(t);Vp(t,l,o);break;default:throw Error(ve(161))}}catch(c){Rt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Z2(t,e,n){ke=t,aT(t)}function aT(t,e,n){for(var r=(t.mode&1)!==0;ke!==null;){var s=ke,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||yu;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||xn;l=yu;var u=xn;if(yu=o,(xn=c)&&!u)for(ke=s;ke!==null;)o=ke,c=o.child,o.tag===22&&o.memoizedState!==null?Cv(s):c!==null?(c.return=o,ke=c):Cv(s);for(;i!==null;)ke=i,aT(i),i=i.sibling;ke=s,yu=l,xn=u}Sv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ke=i):Sv(t)}}function Sv(t){for(;ke!==null;){var e=ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xn||ih(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Nr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&uv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uv(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&Ol(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ve(163))}xn||e.flags&512&&Up(e)}catch(g){Rt(e,e.return,g)}}if(e===t){ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,ke=n;break}ke=e.return}}function kv(t){for(;ke!==null;){var e=ke;if(e===t){ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ke=n;break}ke=e.return}}function Cv(t){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ih(4,e)}catch(c){Rt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Rt(e,s,c)}}var i=e.return;try{Up(e)}catch(c){Rt(e,i,c)}break;case 5:var o=e.return;try{Up(e)}catch(c){Rt(e,o,c)}}}catch(c){Rt(e,e.return,c)}if(e===t){ke=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ke=l;break}ke=e.return}}var eA=Math.ceil,wd=Ns.ReactCurrentDispatcher,_g=Ns.ReactCurrentOwner,mr=Ns.ReactCurrentBatchConfig,et=0,Xt=null,Bt=null,on=0,Yn=0,Bo=gi(0),qt=0,Ql=null,Yi=0,oh=0,bg=0,Il=null,Fn=null,Eg=0,ua=1/0,cs=null,_d=!1,Bp=null,ri=null,vu=!1,Js=null,bd=0,Sl=0,zp=null,Bu=-1,zu=0;function Cn(){return et&6?Dt():Bu!==-1?Bu:Bu=Dt()}function si(t){return t.mode&1?et&2&&on!==0?on&-on:F2.transition!==null?(zu===0&&(zu=Hb()),zu):(t=dt,t!==0||(t=window.event,t=t===void 0?16:Xb(t.type)),t):1}function Dr(t,e,n,r){if(50<Sl)throw Sl=0,zp=null,Error(ve(185));yc(t,n,r),(!(et&2)||t!==Xt)&&(t===Xt&&(!(et&2)&&(oh|=n),qt===4&&Gs(t,on)),Gn(t,r),n===1&&et===0&&!(e.mode&1)&&(ua=Dt()+500,nh&&yi()))}function Gn(t,e){var n=t.callbackNode;FC(t,e);var r=id(t,t===Xt?on:0);if(r===0)n!==null&&Fy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Fy(n),e===1)t.tag===0?L2(Av.bind(null,t)):yE(Av.bind(null,t)),P2(function(){!(et&6)&&yi()}),n=null;else{switch(qb(r)){case 1:n=Jm;break;case 4:n=Gb;break;case 16:n=sd;break;case 536870912:n=$b;break;default:n=sd}n=mT(n,lT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lT(t,e){if(Bu=-1,zu=0,et&6)throw Error(ve(327));var n=t.callbackNode;if(Yo()&&t.callbackNode!==n)return null;var r=id(t,t===Xt?on:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ed(t,r);else{e=r;var s=et;et|=2;var i=uT();(Xt!==t||on!==e)&&(cs=null,ua=Dt()+500,zi(t,e));do try{rA();break}catch(l){cT(t,l)}while(!0);lg(),wd.current=i,et=s,Bt!==null?e=0:(Xt=null,on=0,e=qt)}if(e!==0){if(e===2&&(s=mp(t),s!==0&&(r=s,e=Gp(t,s))),e===1)throw n=Ql,zi(t,0),Gs(t,r),Gn(t,Dt()),n;if(e===6)Gs(t,r);else{if(s=t.current.alternate,!(r&30)&&!tA(s)&&(e=Ed(t,r),e===2&&(i=mp(t),i!==0&&(r=i,e=Gp(t,i))),e===1))throw n=Ql,zi(t,0),Gs(t,r),Gn(t,Dt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ve(345));case 2:Mi(t,Fn,cs);break;case 3:if(Gs(t,r),(r&130023424)===r&&(e=Eg+500-Dt(),10<e)){if(id(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Cn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ep(Mi.bind(null,t,Fn,cs),e);break}Mi(t,Fn,cs);break;case 4:if(Gs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Mr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eA(r/1960))-r,10<r){t.timeoutHandle=Ep(Mi.bind(null,t,Fn,cs),r);break}Mi(t,Fn,cs);break;case 5:Mi(t,Fn,cs);break;default:throw Error(ve(329))}}}return Gn(t,Dt()),t.callbackNode===n?lT.bind(null,t):null}function Gp(t,e){var n=Il;return t.current.memoizedState.isDehydrated&&(zi(t,e).flags|=256),t=Ed(t,e),t!==2&&(e=Fn,Fn=n,e!==null&&$p(e)),t}function $p(t){Fn===null?Fn=t:Fn.push.apply(Fn,t)}function tA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ur(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gs(t,e){for(e&=~bg,e&=~oh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mr(e),r=1<<n;t[n]=-1,e&=~r}}function Av(t){if(et&6)throw Error(ve(327));Yo();var e=id(t,0);if(!(e&1))return Gn(t,Dt()),null;var n=Ed(t,e);if(t.tag!==0&&n===2){var r=mp(t);r!==0&&(e=r,n=Gp(t,r))}if(n===1)throw n=Ql,zi(t,0),Gs(t,e),Gn(t,Dt()),n;if(n===6)throw Error(ve(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mi(t,Fn,cs),Gn(t,Dt()),null}function Tg(t,e){var n=et;et|=1;try{return t(e)}finally{et=n,et===0&&(ua=Dt()+500,nh&&yi())}}function Qi(t){Js!==null&&Js.tag===0&&!(et&6)&&Yo();var e=et;et|=1;var n=mr.transition,r=dt;try{if(mr.transition=null,dt=1,t)return t()}finally{dt=r,mr.transition=n,et=e,!(et&6)&&yi()}}function Ig(){Yn=Bo.current,bt(Bo)}function zi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,R2(n)),Bt!==null)for(n=Bt.return;n!==null;){var r=n;switch(ig(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ud();break;case 3:la(),bt(Bn),bt(bn),pg();break;case 5:fg(r);break;case 4:la();break;case 13:bt(Tt);break;case 19:bt(Tt);break;case 10:cg(r.type._context);break;case 22:case 23:Ig()}n=n.return}if(Xt=t,Bt=t=ii(t.current,null),on=Yn=e,qt=0,Ql=null,bg=oh=Yi=0,Fn=Il=null,Fi!==null){for(e=0;e<Fi.length;e++)if(n=Fi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Fi=null}return t}function cT(t,e){do{var n=Bt;try{if(lg(),Uu.current=xd,vd){for(var r=It.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vd=!1}if(Ji=0,Qt=Ht=It=null,El=!1,Kl=0,_g.current=null,n===null||n.return===null){qt=1,Ql=e,Bt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=on,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=gv(o);if(y!==null){y.flags&=-257,yv(y,o,l,i,e),y.mode&1&&mv(i,u,e),e=y,c=u;var w=e.updateQueue;if(w===null){var x=new Set;x.add(c),e.updateQueue=x}else w.add(c);break e}else{if(!(e&1)){mv(i,u,e),Sg();break e}c=Error(ve(426))}}else if(Et&&l.mode&1){var b=gv(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),yv(b,o,l,i,e),og(ca(c,l));break e}}i=c=ca(c,l),qt!==4&&(qt=2),Il===null?Il=[i]:Il.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=qE(i,c,e);cv(i,v);break e;case 1:l=c;var _=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ri===null||!ri.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=WE(i,l,e);cv(i,R);break e}}i=i.return}while(i!==null)}hT(n)}catch(j){e=j,Bt===n&&n!==null&&(Bt=n=n.return);continue}break}while(!0)}function uT(){var t=wd.current;return wd.current=xd,t===null?xd:t}function Sg(){(qt===0||qt===3||qt===2)&&(qt=4),Xt===null||!(Yi&268435455)&&!(oh&268435455)||Gs(Xt,on)}function Ed(t,e){var n=et;et|=2;var r=uT();(Xt!==t||on!==e)&&(cs=null,zi(t,e));do try{nA();break}catch(s){cT(t,s)}while(!0);if(lg(),et=n,wd.current=r,Bt!==null)throw Error(ve(261));return Xt=null,on=0,qt}function nA(){for(;Bt!==null;)dT(Bt)}function rA(){for(;Bt!==null&&!CC();)dT(Bt)}function dT(t){var e=pT(t.alternate,t,Yn);t.memoizedProps=t.pendingProps,e===null?hT(t):Bt=e,_g.current=null}function hT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Y2(n,e),n!==null){n.flags&=32767,Bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qt=6,Bt=null;return}}else if(n=J2(n,e,Yn),n!==null){Bt=n;return}if(e=e.sibling,e!==null){Bt=e;return}Bt=e=t}while(e!==null);qt===0&&(qt=5)}function Mi(t,e,n){var r=dt,s=mr.transition;try{mr.transition=null,dt=1,sA(t,e,n,r)}finally{mr.transition=s,dt=r}return null}function sA(t,e,n,r){do Yo();while(Js!==null);if(et&6)throw Error(ve(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ve(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(UC(t,i),t===Xt&&(Bt=Xt=null,on=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vu||(vu=!0,mT(sd,function(){return Yo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=mr.transition,mr.transition=null;var o=dt;dt=1;var l=et;et|=4,_g.current=null,X2(t,n),oT(n,t),T2(_p),od=!!wp,_p=wp=null,t.current=n,Z2(n),AC(),et=l,dt=o,mr.transition=i}else t.current=n;if(vu&&(vu=!1,Js=t,bd=s),i=t.pendingLanes,i===0&&(ri=null),PC(n.stateNode),Gn(t,Dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_d)throw _d=!1,t=Bp,Bp=null,t;return bd&1&&t.tag!==0&&Yo(),i=t.pendingLanes,i&1?t===zp?Sl++:(Sl=0,zp=t):Sl=0,yi(),null}function Yo(){if(Js!==null){var t=qb(bd),e=mr.transition,n=dt;try{if(mr.transition=null,dt=16>t?16:t,Js===null)var r=!1;else{if(t=Js,Js=null,bd=0,et&6)throw Error(ve(331));var s=et;for(et|=4,ke=t.current;ke!==null;){var i=ke,o=i.child;if(ke.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ke=u;ke!==null;){var d=ke;switch(d.tag){case 0:case 11:case 15:Tl(8,d,i)}var m=d.child;if(m!==null)m.return=d,ke=m;else for(;ke!==null;){d=ke;var g=d.sibling,y=d.return;if(rT(d),d===u){ke=null;break}if(g!==null){g.return=y,ke=g;break}ke=y}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ke=o;else e:for(;ke!==null;){if(i=ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Tl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ke=v;break e}ke=i.return}}var _=t.current;for(ke=_;ke!==null;){o=ke;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ke=T;else e:for(o=_;ke!==null;){if(l=ke,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ih(9,l)}}catch(j){Rt(l,l.return,j)}if(l===o){ke=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,ke=R;break e}ke=l.return}}if(et=s,yi(),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(Qd,t)}catch{}r=!0}return r}finally{dt=n,mr.transition=e}}return!1}function Nv(t,e,n){e=ca(n,e),e=qE(t,e,1),t=ni(t,e,1),e=Cn(),t!==null&&(yc(t,1,e),Gn(t,e))}function Rt(t,e,n){if(t.tag===3)Nv(t,t,n);else for(;e!==null;){if(e.tag===3){Nv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ri===null||!ri.has(r))){t=ca(n,t),t=WE(e,t,1),e=ni(e,t,1),t=Cn(),e!==null&&(yc(e,1,t),Gn(e,t));break}}e=e.return}}function iA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Cn(),t.pingedLanes|=t.suspendedLanes&n,Xt===t&&(on&n)===n&&(qt===4||qt===3&&(on&130023424)===on&&500>Dt()-Eg?zi(t,0):bg|=n),Gn(t,e)}function fT(t,e){e===0&&(t.mode&1?(e=lu,lu<<=1,!(lu&130023424)&&(lu=4194304)):e=1);var n=Cn();t=bs(t,e),t!==null&&(yc(t,e,n),Gn(t,n))}function oA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fT(t,n)}function aA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ve(314))}r!==null&&r.delete(e),fT(t,n)}var pT;pT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bn.current)Vn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vn=!1,K2(t,e,n);Vn=!!(t.flags&131072)}else Vn=!1,Et&&e.flags&1048576&&vE(e,fd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ou(t,e),t=e.pendingProps;var s=ia(e,bn.current);Jo(e,n),s=gg(null,e,r,t,s,n);var i=yg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zn(r)?(i=!0,dd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,dg(e),s.updater=sh,e.stateNode=s,s._reactInternals=e,Np(e,r,t,n),e=Mp(null,e,r,!0,i,n)):(e.tag=0,Et&&i&&sg(e),Sn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ou(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=cA(r),t=Nr(r,t),s){case 0:e=Pp(null,e,r,t,n);break e;case 1:e=wv(null,e,r,t,n);break e;case 11:e=vv(null,e,r,t,n);break e;case 14:e=xv(null,e,r,Nr(r.type,t),n);break e}throw Error(ve(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Nr(r,s),Pp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Nr(r,s),wv(t,e,r,s,n);case 3:e:{if(QE(e),t===null)throw Error(ve(387));r=e.pendingProps,i=e.memoizedState,s=i.element,TE(t,e),gd(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ca(Error(ve(423)),e),e=_v(t,e,r,n,s);break e}else if(r!==s){s=ca(Error(ve(424)),e),e=_v(t,e,r,n,s);break e}else for(Qn=ti(e.stateNode.containerInfo.firstChild),Zn=e,Et=!0,Pr=null,n=bE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(oa(),r===s){e=Es(t,e,n);break e}Sn(t,e,r,n)}e=e.child}return e;case 5:return IE(e),t===null&&kp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,bp(r,s)?o=null:i!==null&&bp(r,i)&&(e.flags|=32),YE(t,e),Sn(t,e,o,n),e.child;case 6:return t===null&&kp(e),null;case 13:return XE(t,e,n);case 4:return hg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=aa(e,null,r,n):Sn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Nr(r,s),vv(t,e,r,s,n);case 7:return Sn(t,e,e.pendingProps,n),e.child;case 8:return Sn(t,e,e.pendingProps.children,n),e.child;case 12:return Sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,vt(pd,r._currentValue),r._currentValue=o,i!==null)if(Ur(i.value,o)){if(i.children===s.children&&!Bn.current){e=Es(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=xs(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Cp(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ve(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Cp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Sn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Jo(e,n),s=xr(s),r=r(s),e.flags|=1,Sn(t,e,r,n),e.child;case 14:return r=e.type,s=Nr(r,e.pendingProps),s=Nr(r.type,s),xv(t,e,r,s,n);case 15:return KE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Nr(r,s),Ou(t,e),e.tag=1,zn(r)?(t=!0,dd(e)):t=!1,Jo(e,n),HE(e,r,s),Np(e,r,s,n),Mp(null,e,r,!0,t,n);case 19:return ZE(t,e,n);case 22:return JE(t,e,n)}throw Error(ve(156,e.tag))};function mT(t,e){return zb(t,e)}function lA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(t,e,n,r){return new lA(t,e,n,r)}function kg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cA(t){if(typeof t=="function")return kg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qm)return 11;if(t===Wm)return 14}return 2}function ii(t,e){var n=t.alternate;return n===null?(n=pr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")kg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ro:return Gi(n.children,s,i,e);case Hm:o=8,s|=8;break;case ep:return t=pr(12,n,e,s|2),t.elementType=ep,t.lanes=i,t;case tp:return t=pr(13,n,e,s),t.elementType=tp,t.lanes=i,t;case np:return t=pr(19,n,e,s),t.elementType=np,t.lanes=i,t;case Ib:return ah(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Eb:o=10;break e;case Tb:o=9;break e;case qm:o=11;break e;case Wm:o=14;break e;case Os:o=16,r=null;break e}throw Error(ve(130,t==null?t:typeof t,""))}return e=pr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Gi(t,e,n,r){return t=pr(7,t,r,e),t.lanes=n,t}function ah(t,e,n,r){return t=pr(22,t,r,e),t.elementType=Ib,t.lanes=n,t.stateNode={isHidden:!1},t}function Sf(t,e,n){return t=pr(6,t,null,e),t.lanes=n,t}function kf(t,e,n){return e=pr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uA(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=af(0),this.expirationTimes=af(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=af(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cg(t,e,n,r,s,i,o,l,c){return t=new uA(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=pr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dg(i),t}function dA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:No,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gT(t){if(!t)return di;t=t._reactInternals;e:{if(lo(t)!==t||t.tag!==1)throw Error(ve(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ve(171))}if(t.tag===1){var n=t.type;if(zn(n))return gE(t,n,e)}return e}function yT(t,e,n,r,s,i,o,l,c){return t=Cg(n,r,!0,t,s,i,o,l,c),t.context=gT(null),n=t.current,r=Cn(),s=si(n),i=xs(r,s),i.callback=e??null,ni(n,i,s),t.current.lanes=s,yc(t,s,r),Gn(t,r),t}function lh(t,e,n,r){var s=e.current,i=Cn(),o=si(s);return n=gT(n),e.context===null?e.context=n:e.pendingContext=n,e=xs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ni(s,e,o),t!==null&&(Dr(t,s,o,i),Fu(t,s,o)),o}function Td(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ag(t,e){Rv(t,e),(t=t.alternate)&&Rv(t,e)}function hA(){return null}var vT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ng(t){this._internalRoot=t}ch.prototype.render=Ng.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ve(409));lh(t,e,null,null)};ch.prototype.unmount=Ng.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qi(function(){lh(null,t,null,null)}),e[_s]=null}};function ch(t){this._internalRoot=t}ch.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zs.length&&e!==0&&e<zs[n].priority;n++);zs.splice(n,0,t),n===0&&Qb(t)}};function Rg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pv(){}function fA(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Td(o);i.call(u)}}var o=yT(e,r,t,0,null,!1,!1,"",Pv);return t._reactRootContainer=o,t[_s]=o.current,Gl(t.nodeType===8?t.parentNode:t),Qi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Td(c);l.call(u)}}var c=Cg(t,0,!1,null,null,!1,!1,"",Pv);return t._reactRootContainer=c,t[_s]=c.current,Gl(t.nodeType===8?t.parentNode:t),Qi(function(){lh(e,c,n,r)}),c}function dh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Td(o);l.call(c)}}lh(e,o,t,s)}else o=fA(n,e,t,s,r);return Td(o)}Wb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=dl(e.pendingLanes);n!==0&&(Ym(e,n|1),Gn(e,Dt()),!(et&6)&&(ua=Dt()+500,yi()))}break;case 13:Qi(function(){var r=bs(t,1);if(r!==null){var s=Cn();Dr(r,t,1,s)}}),Ag(t,1)}};Qm=function(t){if(t.tag===13){var e=bs(t,134217728);if(e!==null){var n=Cn();Dr(e,t,134217728,n)}Ag(t,134217728)}};Kb=function(t){if(t.tag===13){var e=si(t),n=bs(t,e);if(n!==null){var r=Cn();Dr(n,t,e,r)}Ag(t,e)}};Jb=function(){return dt};Yb=function(t,e){var n=dt;try{return dt=t,e()}finally{dt=n}};hp=function(t,e,n){switch(e){case"input":if(ip(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=th(r);if(!s)throw Error(ve(90));kb(r),ip(r,s)}}}break;case"textarea":Ab(t,n);break;case"select":e=n.value,e!=null&&Ho(t,!!n.multiple,e,!1)}};Lb=Tg;Fb=Qi;var pA={usingClientEntryPoint:!1,Events:[xc,jo,th,Db,jb,Tg]},rl={findFiberByHostInstance:Li,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mA={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ob(t),t===null?null:t.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||hA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{Qd=xu.inject(mA),Qr=xu}catch{}}or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pA;or.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rg(e))throw Error(ve(200));return dA(t,e,null,n)};or.createRoot=function(t,e){if(!Rg(t))throw Error(ve(299));var n=!1,r="",s=vT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Cg(t,1,!1,null,null,n,!1,r,s),t[_s]=e.current,Gl(t.nodeType===8?t.parentNode:t),new Ng(e)};or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ve(188)):(t=Object.keys(t).join(","),Error(ve(268,t)));return t=Ob(e),t=t===null?null:t.stateNode,t};or.flushSync=function(t){return Qi(t)};or.hydrate=function(t,e,n){if(!uh(e))throw Error(ve(200));return dh(null,t,e,!0,n)};or.hydrateRoot=function(t,e,n){if(!Rg(t))throw Error(ve(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=vT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yT(e,null,t,1,n??null,s,!1,i,o),t[_s]=e.current,Gl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ch(e)};or.render=function(t,e,n){if(!uh(e))throw Error(ve(200));return dh(null,t,e,!1,n)};or.unmountComponentAtNode=function(t){if(!uh(t))throw Error(ve(40));return t._reactRootContainer?(Qi(function(){dh(null,null,t,!1,function(){t._reactRootContainer=null,t[_s]=null})}),!0):!1};or.unstable_batchedUpdates=Tg;or.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!uh(n))throw Error(ve(200));if(t==null||t._reactInternals===void 0)throw Error(ve(38));return dh(t,e,n,!1,r)};or.version="18.3.1-next-f1338f8080-20240426";function xT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xT)}catch(t){console.error(t)}}xT(),xb.exports=or;var wT=xb.exports,Mv=wT;Xf.createRoot=Mv.createRoot,Xf.hydrateRoot=Mv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xl.apply(this,arguments)}var Ys;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ys||(Ys={}));const Dv="popstate";function gA(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:l="",hash:c=""}=co(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Hp("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:Id(i))}function r(s,i){hh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return vA(e,n,r,t)}function jt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yA(){return Math.random().toString(36).substr(2,8)}function jv(t,e){return{usr:t.state,key:t.key,idx:e}}function Hp(t,e,n,r){return n===void 0&&(n=null),Xl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?co(e):e,{state:n,key:e&&e.key||r||yA()})}function Id(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function co(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function vA(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Ys.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Xl({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function m(){l=Ys.Pop;let b=d(),v=b==null?null:b-u;u=b,c&&c({action:l,location:x.location,delta:v})}function g(b,v){l=Ys.Push;let _=Hp(x.location,b,v);n&&n(_,b),u=d()+1;let T=jv(_,u),R=x.createHref(_);try{o.pushState(T,"",R)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(R)}i&&c&&c({action:l,location:x.location,delta:1})}function y(b,v){l=Ys.Replace;let _=Hp(x.location,b,v);n&&n(_,b),u=d();let T=jv(_,u),R=x.createHref(_);o.replaceState(T,"",R),i&&c&&c({action:l,location:x.location,delta:0})}function w(b){let v=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof b=="string"?b:Id(b);return _=_.replace(/ $/,"%20"),jt(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let x={get action(){return l},get location(){return t(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Dv,m),c=b,()=>{s.removeEventListener(Dv,m),c=null}},createHref(b){return e(s,b)},createURL:w,encodeLocation(b){let v=w(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:g,replace:y,go(b){return o.go(b)}};return x}var Lv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Lv||(Lv={}));function xA(t,e,n){return n===void 0&&(n="/"),wA(t,e,n)}function wA(t,e,n,r){let s=typeof e=="string"?co(e):e,i=Pg(s.pathname||"/",n);if(i==null)return null;let o=_T(t);_A(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=MA(i);l=NA(o[c],u)}return l}function _T(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(jt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=oi([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(jt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),_T(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:CA(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of bT(i.path))s(i,o,c)}),e}function bT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=bT(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function _A(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:AA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const bA=/^:[\w-]+$/,EA=3,TA=2,IA=1,SA=10,kA=-2,Fv=t=>t==="*";function CA(t,e){let n=t.split("/"),r=n.length;return n.some(Fv)&&(r+=kA),e&&(r+=TA),n.filter(s=>!Fv(s)).reduce((s,i)=>s+(bA.test(i)?EA:i===""?IA:SA),r)}function AA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function NA(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",m=RA({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),g=c.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:oi([i,m.pathname]),pathnameBase:UA(oi([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=oi([i,m.pathnameBase]))}return o}function RA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=PA(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,m)=>{let{paramName:g,isOptional:y}=d;if(g==="*"){let x=l[m]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const w=l[m];return y&&!w?u[g]=void 0:u[g]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function PA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),hh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function MA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Pg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const DA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jA=t=>DA.test(t);function LA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?co(t):t,i;if(n)if(jA(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),hh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Uv(n.substring(1),"/"):i=Uv(n,e)}else i=e;return{pathname:i,search:VA(r),hash:OA(s)}}function Uv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Cf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mg(t,e){let n=FA(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Dg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=co(t):(s=Xl({},t),jt(!s.pathname||!s.pathname.includes("?"),Cf("?","pathname","search",s)),jt(!s.pathname||!s.pathname.includes("#"),Cf("#","pathname","hash",s)),jt(!s.search||!s.search.includes("#"),Cf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let c=LA(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const oi=t=>t.join("/").replace(/\/\/+/g,"/"),UA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,OA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function BA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ET=["post","put","patch","delete"];new Set(ET);const zA=["get",...ET];new Set(zA);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zl(){return Zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zl.apply(this,arguments)}const jg=L.createContext(null),GA=L.createContext(null),vi=L.createContext(null),fh=L.createContext(null),Rs=L.createContext({outlet:null,matches:[],isDataRoute:!1}),TT=L.createContext(null);function $A(t,e){let{relative:n}=e===void 0?{}:e;Ia()||jt(!1);let{basename:r,navigator:s}=L.useContext(vi),{hash:i,pathname:o,search:l}=ST(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:oi([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Ia(){return L.useContext(fh)!=null}function xi(){return Ia()||jt(!1),L.useContext(fh).location}function IT(t){L.useContext(vi).static||L.useLayoutEffect(t)}function br(){let{isDataRoute:t}=L.useContext(Rs);return t?rN():HA()}function HA(){Ia()||jt(!1);let t=L.useContext(jg),{basename:e,future:n,navigator:r}=L.useContext(vi),{matches:s}=L.useContext(Rs),{pathname:i}=xi(),o=JSON.stringify(Mg(s,n.v7_relativeSplatPath)),l=L.useRef(!1);return IT(()=>{l.current=!0}),L.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let m=Dg(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:oi([e,m.pathname])),(d.replace?r.replace:r.push)(m,d.state,d)},[e,r,o,i,t])}function Lg(){let{matches:t}=L.useContext(Rs),e=t[t.length-1];return e?e.params:{}}function ST(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(vi),{matches:s}=L.useContext(Rs),{pathname:i}=xi(),o=JSON.stringify(Mg(s,r.v7_relativeSplatPath));return L.useMemo(()=>Dg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function qA(t,e){return WA(t,e)}function WA(t,e,n,r){Ia()||jt(!1);let{navigator:s}=L.useContext(vi),{matches:i}=L.useContext(Rs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=xi(),d;if(e){var m;let b=typeof e=="string"?co(e):e;c==="/"||(m=b.pathname)!=null&&m.startsWith(c)||jt(!1),d=b}else d=u;let g=d.pathname||"/",y=g;if(c!=="/"){let b=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=xA(t,{pathname:y}),x=XA(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:oi([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:oi([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&x?L.createElement(fh.Provider,{value:{location:Zl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ys.Pop}},x):x}function KA(){let t=nN(),e=BA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,null)}const JA=L.createElement(KA,null);class YA extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(Rs.Provider,{value:this.props.routeContext},L.createElement(TT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QA(t){let{routeContext:e,match:n,children:r}=t,s=L.useContext(jg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Rs.Provider,{value:e},r)}function XA(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);d>=0||jt(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=d),m.route.id){let{loaderData:g,errors:y}=n,w=m.route.loader&&g[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||w){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,m,g)=>{let y,w=!1,x=null,b=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,x=m.route.errorElement||JA,c&&(u<0&&g===0?(sN("route-fallback"),w=!0,b=null):u===g&&(w=!0,b=m.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,g+1)),_=()=>{let T;return y?T=x:w?T=b:m.route.Component?T=L.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=d,L.createElement(QA,{match:m,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?L.createElement(YA,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var kT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kT||{}),CT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(CT||{});function ZA(t){let e=L.useContext(jg);return e||jt(!1),e}function eN(t){let e=L.useContext(GA);return e||jt(!1),e}function tN(t){let e=L.useContext(Rs);return e||jt(!1),e}function AT(t){let e=tN(),n=e.matches[e.matches.length-1];return n.route.id||jt(!1),n.route.id}function nN(){var t;let e=L.useContext(TT),n=eN(),r=AT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function rN(){let{router:t}=ZA(kT.UseNavigateStable),e=AT(CT.UseNavigateStable),n=L.useRef(!1);return IT(()=>{n.current=!0}),L.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Zl({fromRouteId:e},i)))},[t,e])}const Vv={};function sN(t,e,n){Vv[t]||(Vv[t]=!0)}function iN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function oN(t){let{to:e,replace:n,state:r,relative:s}=t;Ia()||jt(!1);let{future:i,static:o}=L.useContext(vi),{matches:l}=L.useContext(Rs),{pathname:c}=xi(),u=br(),d=Dg(e,Mg(l,i.v7_relativeSplatPath),c,s==="path"),m=JSON.stringify(d);return L.useEffect(()=>u(JSON.parse(m),{replace:n,state:r,relative:s}),[u,m,s,n,r]),null}function tn(t){jt(!1)}function aN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ys.Pop,navigator:i,static:o=!1,future:l}=t;Ia()&&jt(!1);let c=e.replace(/^\/*/,"/"),u=L.useMemo(()=>({basename:c,navigator:i,static:o,future:Zl({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=co(r));let{pathname:d="/",search:m="",hash:g="",state:y=null,key:w="default"}=r,x=L.useMemo(()=>{let b=Pg(d,c);return b==null?null:{location:{pathname:b,search:m,hash:g,state:y,key:w},navigationType:s}},[c,d,m,g,y,w,s]);return x==null?null:L.createElement(vi.Provider,{value:u},L.createElement(fh.Provider,{children:n,value:x}))}function lN(t){let{children:e,location:n}=t;return qA(qp(e),n)}new Promise(()=>{});function qp(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,s)=>{if(!L.isValidElement(r))return;let i=[...e,s];if(r.type===L.Fragment){n.push.apply(n,qp(r.props.children,i));return}r.type!==tn&&jt(!1),!r.props.index||!r.props.children||jt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=qp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wp(){return Wp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wp.apply(this,arguments)}function cN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function uN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dN(t,e){return t.button===0&&(!e||e==="_self")&&!uN(t)}const hN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fN="6";try{window.__reactRouterVersion=fN}catch{}const pN="startTransition",Ov=iC[pN];function mN(t){let{basename:e,children:n,future:r,window:s}=t,i=L.useRef();i.current==null&&(i.current=gA({window:s,v5Compat:!0}));let o=i.current,[l,c]=L.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=L.useCallback(m=>{u&&Ov?Ov(()=>c(m)):c(m)},[c,u]);return L.useLayoutEffect(()=>o.listen(d),[o,d]),L.useEffect(()=>iN(r),[r]),L.createElement(aN,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const gN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jr=L.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:m}=e,g=cN(e,hN),{basename:y}=L.useContext(vi),w,x=!1;if(typeof u=="string"&&yN.test(u)&&(w=u,gN))try{let T=new URL(window.location.href),R=u.startsWith("//")?new URL(T.protocol+u):new URL(u),j=Pg(R.pathname,y);R.origin===T.origin&&j!=null?u=j+R.search+R.hash:x=!0}catch{}let b=$A(u,{relative:s}),v=vN(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:m});function _(T){r&&r(T),T.defaultPrevented||v(T)}return L.createElement("a",Wp({},g,{href:w||b,onClick:x||i?r:_,ref:n,target:c}))});var Bv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Bv||(Bv={}));var zv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zv||(zv={}));function vN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=br(),u=xi(),d=ST(t,{relative:o});return L.useCallback(m=>{if(dN(m,n)){m.preventDefault();let g=r!==void 0?r:Id(u)===Id(d);c(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,r,s,n,t,i,o,l])}const ec=({className:t="w-10 h-10",variant:e="dark"})=>{const n=e==="dark"?"#0f172a":"#ffffff",r=e==="dark"?"#ffffff":"#0f172a";return a.jsxs("svg",{viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[a.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",fill:n}),a.jsx("text",{x:"50%",y:"235",dominantBaseline:"middle",textAnchor:"middle",fill:r,style:{fontSize:"160px",fontWeight:"900",fontFamily:"'Plus Jakarta Sans', sans-serif",letterSpacing:"-2px",fontStyle:"normal"},children:"IRA"}),a.jsx("text",{x:"50%",y:"340",dominantBaseline:"middle",textAnchor:"middle",fill:r,textLength:"280",lengthAdjust:"spacingAndGlyphs",style:{fontSize:"32px",fontWeight:"800",fontFamily:"'Plus Jakarta Sans', sans-serif",textTransform:"uppercase",letterSpacing:"2px",opacity:.9,fontStyle:"normal"},children:"irfan rizki aditri"}),e==="light"&&a.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",stroke:"rgba(0,0,0,0.05)",strokeWidth:"2"})]})},xN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}),a.jsx("path",{d:"M22 21H7"}),a.jsx("path",{d:"m5 11 9 9"})]}),Af=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),a.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),a.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"})]}),wN=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4Z"})}),rs=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"17 8 12 3 7 8"}),a.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),NT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"7 10 12 15 17 10"}),a.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),er=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"m15 18-6-6 6-6"})}),$n=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"m6 9 6 6 6-6"})}),$i=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"m12 5 7 7-7 7"})]}),Fg=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"12",x2:"12",y1:"19",y2:"5"}),a.jsx("polyline",{points:"5 12 12 5 19 12"})]}),RT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),a.jsx("polyline",{points:"19 12 12 19 5 12"})]}),Kp=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),_N=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m9 7-5 5 5 5"}),a.jsx("path",{d:"m15 7 5 5-5 5"})]}),da=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),a.jsx("path",{d:"M3 3v5h5"}),a.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),a.jsx("path",{d:"M16 21h5v-5"})]}),ha=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),a.jsx("path",{d:"M12 9v4"}),a.jsx("path",{d:"M12 17h.01"})]}),PT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),a.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),a.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]}),tc=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),a.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1 4-10z"})]}),Gv=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-6v-4h4v4h-4z"}),a.jsx("path",{d:"M12 12.5a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 1 0v5a.5.5 0 0 1-.5.5z"}),a.jsx("path",{d:"M12 2a10 10 0 0 1 7.07 17.07l-1.41-1.41A8 8 0 1 0 5.34 4.34l1.41 1.41A10 10 0 0 1 12 2z"}),a.jsx("text",{x:"50%",y:"55%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"14",fontWeight:"bold",children:"G"})]}),$v=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),MT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),a.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Vr=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"20 6 9 17 4 12"})}),bN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"1"}),a.jsx("circle",{cx:"12",cy:"5",r:"1"}),a.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),gr=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),a.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),EN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),a.jsx("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),a.jsx("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),a.jsx("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),a.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]}),Xi=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),a.jsx("path",{d:"m15 5 4 4"})]}),nc=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),a.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),a.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),a.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),rc=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"m21 2-2 2m-7.6 7.6a6 6 0 1 1-8.4-8.4 6 6 0 0 1 8.4 8.4Zm0 0 5.7 5.7a2 2 0 0 1 0 2.8l-2.8 2.8"})}),Hv=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),a.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),DT=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"})}),TN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 16v-4"}),a.jsx("path",{d:"M12 8h.01"})]}),IN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M12 2v2"}),a.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),a.jsx("path",{d:"M20 12h2"}),a.jsx("path",{d:"m19.07 4.93-1.41 1.41"}),a.jsx("path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128"}),a.jsx("path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"})]}),SN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),a.jsx("line",{x1:"4",x2:"4",y1:"22",y2:"15"})]}),jT=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:a.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),Sd=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"}),a.jsx("path",{d:"m9 12 2 2 4-4"})]}),kN=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),CN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M9 18V5l12-2v13"}),a.jsx("circle",{cx:"6",cy:"18",r:"3"}),a.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),Ug=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),LT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),AN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"6",cy:"6",r:"3"}),a.jsx("circle",{cx:"6",cy:"18",r:"3"}),a.jsx("line",{x1:"20",x2:"8.12",y1:"4",y2:"15.88"}),a.jsx("line",{x1:"14.47",x2:"20",y1:"14.48",y2:"20"}),a.jsx("line",{x1:"8.12",x2:"12",y1:"8.12",y2:"12"})]}),FT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),a.jsx("line",{x1:"3",x2:"21",y1:"9",y2:"9"}),a.jsx("line",{x1:"9",x2:"9",y1:"21",y2:"9"})]}),NN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),a.jsx("path",{d:"M3 3v5h5"})]}),RN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("polyline",{points:"16 3 21 3 21 8"}),a.jsx("line",{x1:"4",x2:"21",y1:"20",y2:"3"}),a.jsx("polyline",{points:"21 16 21 21 16 21"}),a.jsx("line",{x1:"15",x2:"21",y1:"15",y2:"21"}),a.jsx("line",{x1:"4",x2:"9",y1:"4",y2:"9"})]}),PN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"13",height:"13",x:"9",y:"9",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Nf=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("circle",{cx:"12",cy:"12",r:"10"})}),Rf=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),MN=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"})}),Jp=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"m12 2 3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),DN=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),jN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M6 2v14a2 2 0 0 0 2 2h14"}),a.jsx("path",{d:"M18 22V8a2 2 0 0 0-2-2H2"})]}),LN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M3 7v6h6"}),a.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]}),UT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5"}),a.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),a.jsx("line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5"})]}),VT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),a.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]}),OT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M8 14.5c2.5-1 5.5-1 8 0"}),a.jsx("path",{d:"M6.5 11.5c3.5-1.5 7.5-1.5 11 0"}),a.jsx("path",{d:"M5 8.5c4.5-2 9.5-2 14 0"})]}),BT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),a.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),FN=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),a.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})]}),UN=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})});var qv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},VN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},GT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|u>>6,y=u&63;c||(y=64,o||(g=64)),r.push(n[d],n[m],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||m==null)throw new ON;const g=i<<2|l>>4;if(r.push(g),u!==64){const y=l<<4&240|u>>2;if(r.push(y),m!==64){const w=u<<6&192|m;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ON extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BN=function(t){const e=zT(t);return GT.encodeByteArray(e,!0)},kd=function(t){return BN(t).replace(/\./g,"")},$T=function(t){try{return GT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=()=>zN().__FIREBASE_DEFAULTS__,$N=()=>{if(typeof process>"u"||typeof qv>"u")return;const t=qv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},HN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$T(t[1]);return e&&JSON.parse(e)},ph=()=>{try{return GN()||$N()||HN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},HT=t=>{var e,n;return(n=(e=ph())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qN=t=>{const e=HT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qT=()=>{var t;return(t=ph())===null||t===void 0?void 0:t.config},WT=t=>{var e;return(e=ph())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kd(JSON.stringify(n)),kd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function YN(){var t;const e=(t=ph())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZN(){const t=En();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eR(){return!YN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JT(){try{return typeof indexedDB=="object"}catch{return!1}}function YT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function tR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="FirebaseError";class zr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nR,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uo.prototype.create)}}class uo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?rR(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new zr(s,l,r)}}function rR(t,e){return t.replace(sR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const sR=/\{\$([^}]+)}/g;function iR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Wv(i)&&Wv(o)){if(!sc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Wv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oR(t,e){const n=new aR(t,e);return n.subscribe.bind(n)}class aR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Pf),s.error===void 0&&(s.error=Pf),s.complete===void 0&&(s.complete=Pf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=1e3,uR=2,dR=4*60*60*1e3,hR=.5;function Kv(t,e=cR,n=uR){const r=e*Math.pow(n,t),s=Math.round(hR*r*(Math.random()-.5)*2);return Math.min(dR,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t){return t&&t._delegate?t._delegate:t}class Or{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new WN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mR(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pR(t){return t===Di?void 0:t}function mR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ye||(Ye={}));const yR={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},vR=Ye.INFO,xR={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},wR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=xR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mh{constructor(e){this.name=e,this._logLevel=vR,this._logHandler=wR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const _R=(t,e)=>e.some(n=>t instanceof n);let Jv,Yv;function bR(){return Jv||(Jv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ER(){return Yv||(Yv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QT=new WeakMap,Yp=new WeakMap,XT=new WeakMap,Mf=new WeakMap,Vg=new WeakMap;function TR(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ai(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&QT.set(n,t)}).catch(()=>{}),Vg.set(e,t),e}function IR(t){if(Yp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Yp.set(t,e)}let Qp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||XT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ai(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SR(t){Qp=t(Qp)}function kR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Df(this),e,...n);return XT.set(r,e.sort?e.sort():[e]),ai(r)}:ER().includes(t)?function(...e){return t.apply(Df(this),e),ai(QT.get(this))}:function(...e){return ai(t.apply(Df(this),e))}}function CR(t){return typeof t=="function"?kR(t):(t instanceof IDBTransaction&&IR(t),_R(t,bR())?new Proxy(t,Qp):t)}function ai(t){if(t instanceof IDBRequest)return TR(t);if(Mf.has(t))return Mf.get(t);const e=CR(t);return e!==t&&(Mf.set(t,e),Vg.set(e,t)),e}const Df=t=>Vg.get(t);function ZT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=ai(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ai(o.result),c.oldVersion,c.newVersion,ai(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const AR=["get","getKey","getAll","getAllKeys","count"],NR=["put","add","delete","clear"],jf=new Map;function Qv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jf.get(e))return jf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=NR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||AR.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return jf.set(e,i),i}SR(t=>({...t,get:(e,n,r)=>Qv(e,n)||t.get(e,n,r),has:(e,n)=>!!Qv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xp="@firebase/app",Xv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new mh("@firebase/app"),MR="@firebase/app-compat",DR="@firebase/analytics-compat",jR="@firebase/analytics",LR="@firebase/app-check-compat",FR="@firebase/app-check",UR="@firebase/auth",VR="@firebase/auth-compat",OR="@firebase/database",BR="@firebase/data-connect",zR="@firebase/database-compat",GR="@firebase/functions",$R="@firebase/functions-compat",HR="@firebase/installations",qR="@firebase/installations-compat",WR="@firebase/messaging",KR="@firebase/messaging-compat",JR="@firebase/performance",YR="@firebase/performance-compat",QR="@firebase/remote-config",XR="@firebase/remote-config-compat",ZR="@firebase/storage",eP="@firebase/storage-compat",tP="@firebase/firestore",nP="@firebase/vertexai-preview",rP="@firebase/firestore-compat",sP="firebase",iP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="[DEFAULT]",oP={[Xp]:"fire-core",[MR]:"fire-core-compat",[jR]:"fire-analytics",[DR]:"fire-analytics-compat",[FR]:"fire-app-check",[LR]:"fire-app-check-compat",[UR]:"fire-auth",[VR]:"fire-auth-compat",[OR]:"fire-rtdb",[BR]:"fire-data-connect",[zR]:"fire-rtdb-compat",[GR]:"fire-fn",[$R]:"fire-fn-compat",[HR]:"fire-iid",[qR]:"fire-iid-compat",[WR]:"fire-fcm",[KR]:"fire-fcm-compat",[JR]:"fire-perf",[YR]:"fire-perf-compat",[QR]:"fire-rc",[XR]:"fire-rc-compat",[ZR]:"fire-gcs",[eP]:"fire-gcs-compat",[tP]:"fire-fst",[rP]:"fire-fst-compat",[nP]:"fire-vertex","fire-js":"fire-js",[sP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Map,aP=new Map,em=new Map;function Zv(t,e){try{t.container.addComponent(e)}catch(n){Ts.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ss(t){const e=t.name;if(em.has(e))return Ts.debug(`There were multiple attempts to register component ${e}.`),!1;em.set(e,t);for(const n of Cd.values())Zv(n,t);for(const n of aP.values())Zv(n,t);return!0}function ho(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ms(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},li=new uo("app","Firebase",lP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=iP;function e1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Zp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw li.create("bad-app-name",{appName:String(s)});if(n||(n=qT()),!n)throw li.create("no-options");const i=Cd.get(s);if(i){if(sc(n,i.options)&&sc(r,i.config))return i;throw li.create("duplicate-app",{appName:s})}const o=new gR(s);for(const c of em.values())o.addComponent(c);const l=new cP(n,r,o);return Cd.set(s,l),l}function Og(t=Zp){const e=Cd.get(t);if(!e&&t===Zp&&qT())return e1();if(!e)throw li.create("no-app",{appName:t});return e}function yr(t,e,n){var r;let s=(r=oP[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ts.warn(l.join(" "));return}ss(new Or(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="firebase-heartbeat-database",dP=1,ic="firebase-heartbeat-store";let Lf=null;function t1(){return Lf||(Lf=ZT(uP,dP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ic)}catch(n){console.warn(n)}}}}).catch(t=>{throw li.create("idb-open",{originalErrorMessage:t.message})})),Lf}async function hP(t){try{const n=(await t1()).transaction(ic),r=await n.objectStore(ic).get(n1(t));return await n.done,r}catch(e){if(e instanceof zr)Ts.warn(e.message);else{const n=li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ts.warn(n.message)}}}async function ex(t,e){try{const r=(await t1()).transaction(ic,"readwrite");await r.objectStore(ic).put(e,n1(t)),await r.done}catch(n){if(n instanceof zr)Ts.warn(n.message);else{const r=li.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ts.warn(r.message)}}}function n1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=1024,pP=30*24*60*60*1e3;class mP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=pP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ts.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tx(),{heartbeatsToSend:r,unsentEntries:s}=gP(this._heartbeatsCache.heartbeats),i=kd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ts.warn(n),""}}}function tx(){return new Date().toISOString().substring(0,10)}function gP(t,e=fP){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),nx(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),nx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JT()?YT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ex(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ex(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nx(t){return kd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(t){ss(new Or("platform-logger",e=>new RR(e),"PRIVATE")),ss(new Or("heartbeat",e=>new mP(e),"PRIVATE")),yr(Xp,Xv,t),yr(Xp,Xv,"esm2017"),yr("fire-js","")}vP("");var xP="firebase",wP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(xP,wP,"app");const r1="@firebase/installations",Bg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=1e4,i1=`w:${Bg}`,o1="FIS_v2",_P="https://firebaseinstallations.googleapis.com/v1",bP=60*60*1e3,EP="installations",TP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Zi=new uo(EP,TP,IP);function a1(t){return t instanceof zr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1({projectId:t}){return`${_P}/projects/${t}/installations`}function c1(t){return{token:t.token,requestStatus:2,expiresIn:kP(t.expiresIn),creationTime:Date.now()}}async function u1(t,e){const r=(await e.json()).error;return Zi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function d1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function SP(t,{refreshToken:e}){const n=d1(t);return n.append("Authorization",CP(e)),n}async function h1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function kP(t){return Number(t.replace("s","000"))}function CP(t){return`${o1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=l1(t),s=d1(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:o1,appId:t.appId,sdkVersion:i1},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await h1(()=>fetch(r,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:c1(u.authToken)}}else throw await u1("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=/^[cdef][\w-]{21}$/,tm="";function PP(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=MP(t);return RP.test(n)?n:tm}catch{return tm}}function MP(t){return NP(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new Map;function m1(t,e){const n=gh(t);g1(n,e),DP(n,e)}function g1(t,e){const n=p1.get(t);if(n)for(const r of n)r(e)}function DP(t,e){const n=jP();n&&n.postMessage({key:t,fid:e}),LP()}let Vi=null;function jP(){return!Vi&&"BroadcastChannel"in self&&(Vi=new BroadcastChannel("[Firebase] FID Change"),Vi.onmessage=t=>{g1(t.data.key,t.data.fid)}),Vi}function LP(){p1.size===0&&Vi&&(Vi.close(),Vi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="firebase-installations-database",UP=1,eo="firebase-installations-store";let Ff=null;function zg(){return Ff||(Ff=ZT(FP,UP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(eo)}}})),Ff}async function Ad(t,e){const n=gh(t),s=(await zg()).transaction(eo,"readwrite"),i=s.objectStore(eo),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&m1(t,e.fid),e}async function y1(t){const e=gh(t),r=(await zg()).transaction(eo,"readwrite");await r.objectStore(eo).delete(e),await r.done}async function yh(t,e){const n=gh(t),s=(await zg()).transaction(eo,"readwrite"),i=s.objectStore(eo),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&m1(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gg(t){let e;const n=await yh(t.appConfig,r=>{const s=VP(r),i=OP(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===tm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function VP(t){const e=t||{fid:PP(),registrationStatus:0};return v1(e)}function OP(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Zi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=BP(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:zP(t)}:{installationEntry:e}}async function BP(t,e){try{const n=await AP(t,e);return Ad(t.appConfig,n)}catch(n){throw a1(n)&&n.customData.serverCode===409?await y1(t.appConfig):await Ad(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function zP(t){let e=await rx(t.appConfig);for(;e.registrationStatus===1;)await f1(100),e=await rx(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Gg(t);return r||n}return e}function rx(t){return yh(t,e=>{if(!e)throw Zi.create("installation-not-found");return v1(e)})}function v1(t){return GP(t)?{fid:t.fid,registrationStatus:0}:t}function GP(t){return t.registrationStatus===1&&t.registrationTime+s1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P({appConfig:t,heartbeatServiceProvider:e},n){const r=HP(t,n),s=SP(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:i1,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await h1(()=>fetch(r,l));if(c.ok){const u=await c.json();return c1(u)}else throw await u1("Generate Auth Token",c)}function HP(t,{fid:e}){return`${l1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $g(t,e=!1){let n;const r=await yh(t.appConfig,i=>{if(!x1(i))throw Zi.create("not-registered");const o=i.authToken;if(!e&&KP(o))return i;if(o.requestStatus===1)return n=qP(t,e),i;{if(!navigator.onLine)throw Zi.create("app-offline");const l=YP(i);return n=WP(t,l),l}});return n?await n:r.authToken}async function qP(t,e){let n=await sx(t.appConfig);for(;n.authToken.requestStatus===1;)await f1(100),n=await sx(t.appConfig);const r=n.authToken;return r.requestStatus===0?$g(t,e):r}function sx(t){return yh(t,e=>{if(!x1(e))throw Zi.create("not-registered");const n=e.authToken;return QP(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function WP(t,e){try{const n=await $P(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Ad(t.appConfig,r),n}catch(n){if(a1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await y1(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ad(t.appConfig,r)}throw n}}function x1(t){return t!==void 0&&t.registrationStatus===2}function KP(t){return t.requestStatus===2&&!JP(t)}function JP(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+bP}function YP(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function QP(t){return t.requestStatus===1&&t.requestTime+s1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(t){const e=t,{installationEntry:n,registrationPromise:r}=await Gg(e);return r?r.catch(console.error):$g(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(t,e=!1){const n=t;return await e4(n),(await $g(n,e)).token}async function e4(t){const{registrationPromise:e}=await Gg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t){if(!t||!t.options)throw Uf("App Configuration");if(!t.name)throw Uf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Uf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Uf(t){return Zi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="installations",n4="installations-internal",r4=t=>{const e=t.getProvider("app").getImmediate(),n=t4(e),r=ho(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},s4=t=>{const e=t.getProvider("app").getImmediate(),n=ho(e,w1).getImmediate();return{getId:()=>XP(n),getToken:s=>ZP(n,s)}};function i4(){ss(new Or(w1,r4,"PUBLIC")),ss(new Or(n4,s4,"PRIVATE"))}i4();yr(r1,Bg);yr(r1,Bg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="analytics",o4="firebase_id",a4="origin",l4=60*1e3,c4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Hg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new mh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},tr=new uo("analytics","Analytics",u4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t){if(!t.startsWith(Hg)){const e=tr.create("invalid-gtag-resource",{gtagURL:t});return Hn.warn(e.message),""}return t}function _1(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function h4(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function f4(t,e){const n=h4("firebase-js-sdk-policy",{createScriptURL:d4}),r=document.createElement("script"),s=`${Hg}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function p4(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function m4(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await _1(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(l){Hn.error(l)}t("config",s,i)}async function g4(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await _1(n);for(const c of o){const u=l.find(m=>m.measurementId===c),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Hn.error(i)}}function y4(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[l,c]=o;await g4(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await m4(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){Hn.error(l)}}return s}function v4(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=y4(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function x4(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Hg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=30,_4=1e3;class b4{constructor(e={},n=_4){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const b1=new b4;function E4(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function T4(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:E4(r)},i=c4.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw tr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function I4(t,e=b1,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw tr.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw tr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new C4;return setTimeout(async()=>{l.abort()},l4),E1({appId:r,apiKey:s,measurementId:i},o,l,e)}async function E1(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=b1){var i;const{appId:o,measurementId:l}=t;try{await S4(r,e)}catch(c){if(l)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await T4(t);return s.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!k4(u)){if(s.deleteThrottleMetadata(o),l)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw c}const d=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?Kv(n,s.intervalMillis,w4):Kv(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,m),Hn.debug(`Calling attemptFetch again in ${d} millis`),E1(t,m,r,s)}}function S4(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(tr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function k4(t){if(!(t instanceof zr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class C4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function A4(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4(){if(JT())try{await YT()}catch(t){return Hn.warn(tr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Hn.warn(tr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function R4(t,e,n,r,s,i,o){var l;const c=I4(t);c.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Hn.error(y)),e.push(c);const u=N4().then(y=>{if(y)return r.getId()}),[d,m]=await Promise.all([c,u]);x4(i)||f4(i,d.measurementId),s("js",new Date);const g=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return g[a4]="firebase",g.update=!0,m!=null&&(g[o4]=m),s("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.app=e}_delete(){return delete kl[this.app.options.appId],Promise.resolve()}}let kl={},ix=[];const ox={};let Vf="dataLayer",M4="gtag",ax,T1,lx=!1;function D4(){const t=[];if(KT()&&t.push("This is a browser extension environment."),tR()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=tr.create("invalid-analytics-context",{errorInfo:e});Hn.warn(n.message)}}function j4(t,e,n){D4();const r=t.options.appId;if(!r)throw tr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw tr.create("no-api-key");if(kl[r]!=null)throw tr.create("already-exists",{id:r});if(!lx){p4(Vf);const{wrappedGtag:i,gtagCore:o}=v4(kl,ix,ox,Vf,M4);T1=i,ax=o,lx=!0}return kl[r]=R4(t,ix,ox,e,ax,Vf,n),new P4(t)}function L4(t=Og()){t=Gt(t);const e=ho(t,Nd);return e.isInitialized()?e.getImmediate():F4(t)}function F4(t,e={}){const n=ho(t,Nd);if(n.isInitialized()){const s=n.getImmediate();if(sc(e,n.getOptions()))return s;throw tr.create("already-initialized")}return n.initialize({options:e})}function U4(t,e,n,r){t=Gt(t),A4(T1,kl[t.app.options.appId],e,n,r).catch(s=>Hn.error(s))}const cx="@firebase/analytics",ux="0.10.8";function V4(){ss(new Or(Nd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return j4(r,s,n)},"PUBLIC")),ss(new Or("analytics-internal",t,"PRIVATE")),yr(cx,ux),yr(cx,ux,"esm2017");function t(e){try{const n=e.getProvider(Nd).getImmediate();return{logEvent:(r,s,i)=>U4(n,r,s,i)}}catch(n){throw tr.create("interop-component-reg-failed",{reason:n})}}}V4();var dx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hi,I1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,I){function C(){}C.prototype=I.prototype,S.D=I.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(A,F,P){for(var D=Array(arguments.length-2),M=2;M<arguments.length;M++)D[M-2]=arguments[M];return I.prototype[F].apply(A,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,I,C){C||(C=0);var A=Array(16);if(typeof I=="string")for(var F=0;16>F;++F)A[F]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(F=0;16>F;++F)A[F]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=S.g[0],C=S.g[1],F=S.g[2];var P=S.g[3],D=I+(P^C&(F^P))+A[0]+3614090360&4294967295;I=C+(D<<7&4294967295|D>>>25),D=P+(F^I&(C^F))+A[1]+3905402710&4294967295,P=I+(D<<12&4294967295|D>>>20),D=F+(C^P&(I^C))+A[2]+606105819&4294967295,F=P+(D<<17&4294967295|D>>>15),D=C+(I^F&(P^I))+A[3]+3250441966&4294967295,C=F+(D<<22&4294967295|D>>>10),D=I+(P^C&(F^P))+A[4]+4118548399&4294967295,I=C+(D<<7&4294967295|D>>>25),D=P+(F^I&(C^F))+A[5]+1200080426&4294967295,P=I+(D<<12&4294967295|D>>>20),D=F+(C^P&(I^C))+A[6]+2821735955&4294967295,F=P+(D<<17&4294967295|D>>>15),D=C+(I^F&(P^I))+A[7]+4249261313&4294967295,C=F+(D<<22&4294967295|D>>>10),D=I+(P^C&(F^P))+A[8]+1770035416&4294967295,I=C+(D<<7&4294967295|D>>>25),D=P+(F^I&(C^F))+A[9]+2336552879&4294967295,P=I+(D<<12&4294967295|D>>>20),D=F+(C^P&(I^C))+A[10]+4294925233&4294967295,F=P+(D<<17&4294967295|D>>>15),D=C+(I^F&(P^I))+A[11]+2304563134&4294967295,C=F+(D<<22&4294967295|D>>>10),D=I+(P^C&(F^P))+A[12]+1804603682&4294967295,I=C+(D<<7&4294967295|D>>>25),D=P+(F^I&(C^F))+A[13]+4254626195&4294967295,P=I+(D<<12&4294967295|D>>>20),D=F+(C^P&(I^C))+A[14]+2792965006&4294967295,F=P+(D<<17&4294967295|D>>>15),D=C+(I^F&(P^I))+A[15]+1236535329&4294967295,C=F+(D<<22&4294967295|D>>>10),D=I+(F^P&(C^F))+A[1]+4129170786&4294967295,I=C+(D<<5&4294967295|D>>>27),D=P+(C^F&(I^C))+A[6]+3225465664&4294967295,P=I+(D<<9&4294967295|D>>>23),D=F+(I^C&(P^I))+A[11]+643717713&4294967295,F=P+(D<<14&4294967295|D>>>18),D=C+(P^I&(F^P))+A[0]+3921069994&4294967295,C=F+(D<<20&4294967295|D>>>12),D=I+(F^P&(C^F))+A[5]+3593408605&4294967295,I=C+(D<<5&4294967295|D>>>27),D=P+(C^F&(I^C))+A[10]+38016083&4294967295,P=I+(D<<9&4294967295|D>>>23),D=F+(I^C&(P^I))+A[15]+3634488961&4294967295,F=P+(D<<14&4294967295|D>>>18),D=C+(P^I&(F^P))+A[4]+3889429448&4294967295,C=F+(D<<20&4294967295|D>>>12),D=I+(F^P&(C^F))+A[9]+568446438&4294967295,I=C+(D<<5&4294967295|D>>>27),D=P+(C^F&(I^C))+A[14]+3275163606&4294967295,P=I+(D<<9&4294967295|D>>>23),D=F+(I^C&(P^I))+A[3]+4107603335&4294967295,F=P+(D<<14&4294967295|D>>>18),D=C+(P^I&(F^P))+A[8]+1163531501&4294967295,C=F+(D<<20&4294967295|D>>>12),D=I+(F^P&(C^F))+A[13]+2850285829&4294967295,I=C+(D<<5&4294967295|D>>>27),D=P+(C^F&(I^C))+A[2]+4243563512&4294967295,P=I+(D<<9&4294967295|D>>>23),D=F+(I^C&(P^I))+A[7]+1735328473&4294967295,F=P+(D<<14&4294967295|D>>>18),D=C+(P^I&(F^P))+A[12]+2368359562&4294967295,C=F+(D<<20&4294967295|D>>>12),D=I+(C^F^P)+A[5]+4294588738&4294967295,I=C+(D<<4&4294967295|D>>>28),D=P+(I^C^F)+A[8]+2272392833&4294967295,P=I+(D<<11&4294967295|D>>>21),D=F+(P^I^C)+A[11]+1839030562&4294967295,F=P+(D<<16&4294967295|D>>>16),D=C+(F^P^I)+A[14]+4259657740&4294967295,C=F+(D<<23&4294967295|D>>>9),D=I+(C^F^P)+A[1]+2763975236&4294967295,I=C+(D<<4&4294967295|D>>>28),D=P+(I^C^F)+A[4]+1272893353&4294967295,P=I+(D<<11&4294967295|D>>>21),D=F+(P^I^C)+A[7]+4139469664&4294967295,F=P+(D<<16&4294967295|D>>>16),D=C+(F^P^I)+A[10]+3200236656&4294967295,C=F+(D<<23&4294967295|D>>>9),D=I+(C^F^P)+A[13]+681279174&4294967295,I=C+(D<<4&4294967295|D>>>28),D=P+(I^C^F)+A[0]+3936430074&4294967295,P=I+(D<<11&4294967295|D>>>21),D=F+(P^I^C)+A[3]+3572445317&4294967295,F=P+(D<<16&4294967295|D>>>16),D=C+(F^P^I)+A[6]+76029189&4294967295,C=F+(D<<23&4294967295|D>>>9),D=I+(C^F^P)+A[9]+3654602809&4294967295,I=C+(D<<4&4294967295|D>>>28),D=P+(I^C^F)+A[12]+3873151461&4294967295,P=I+(D<<11&4294967295|D>>>21),D=F+(P^I^C)+A[15]+530742520&4294967295,F=P+(D<<16&4294967295|D>>>16),D=C+(F^P^I)+A[2]+3299628645&4294967295,C=F+(D<<23&4294967295|D>>>9),D=I+(F^(C|~P))+A[0]+4096336452&4294967295,I=C+(D<<6&4294967295|D>>>26),D=P+(C^(I|~F))+A[7]+1126891415&4294967295,P=I+(D<<10&4294967295|D>>>22),D=F+(I^(P|~C))+A[14]+2878612391&4294967295,F=P+(D<<15&4294967295|D>>>17),D=C+(P^(F|~I))+A[5]+4237533241&4294967295,C=F+(D<<21&4294967295|D>>>11),D=I+(F^(C|~P))+A[12]+1700485571&4294967295,I=C+(D<<6&4294967295|D>>>26),D=P+(C^(I|~F))+A[3]+2399980690&4294967295,P=I+(D<<10&4294967295|D>>>22),D=F+(I^(P|~C))+A[10]+4293915773&4294967295,F=P+(D<<15&4294967295|D>>>17),D=C+(P^(F|~I))+A[1]+2240044497&4294967295,C=F+(D<<21&4294967295|D>>>11),D=I+(F^(C|~P))+A[8]+1873313359&4294967295,I=C+(D<<6&4294967295|D>>>26),D=P+(C^(I|~F))+A[15]+4264355552&4294967295,P=I+(D<<10&4294967295|D>>>22),D=F+(I^(P|~C))+A[6]+2734768916&4294967295,F=P+(D<<15&4294967295|D>>>17),D=C+(P^(F|~I))+A[13]+1309151649&4294967295,C=F+(D<<21&4294967295|D>>>11),D=I+(F^(C|~P))+A[4]+4149444226&4294967295,I=C+(D<<6&4294967295|D>>>26),D=P+(C^(I|~F))+A[11]+3174756917&4294967295,P=I+(D<<10&4294967295|D>>>22),D=F+(I^(P|~C))+A[2]+718787259&4294967295,F=P+(D<<15&4294967295|D>>>17),D=C+(P^(F|~I))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+I&4294967295,S.g[1]=S.g[1]+(F+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+F&4294967295,S.g[3]=S.g[3]+P&4294967295}r.prototype.u=function(S,I){I===void 0&&(I=S.length);for(var C=I-this.blockSize,A=this.B,F=this.h,P=0;P<I;){if(F==0)for(;P<=C;)s(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<I;)if(A[F++]=S.charCodeAt(P++),F==this.blockSize){s(this,A),F=0;break}}else for(;P<I;)if(A[F++]=S[P++],F==this.blockSize){s(this,A),F=0;break}}this.h=F,this.o+=I},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var I=1;I<S.length-8;++I)S[I]=0;var C=8*this.o;for(I=S.length-8;I<S.length;++I)S[I]=C&255,C/=256;for(this.u(S),S=Array(16),I=C=0;4>I;++I)for(var A=0;32>A;A+=8)S[C++]=this.g[I]>>>A&255;return S};function i(S,I){var C=l;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=I(S)}function o(S,I){this.h=I;for(var C=[],A=!0,F=S.length-1;0<=F;F--){var P=S[F]|0;A&&P==I||(C[F]=P,A=!1)}this.g=C}var l={};function c(S){return-128<=S&&128>S?i(S,function(I){return new o([I|0],0>I?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return m;if(0>S)return b(u(-S));for(var I=[],C=1,A=0;S>=C;A++)I[A]=S/C|0,C*=4294967296;return new o(I,0)}function d(S,I){if(S.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S.charAt(0)=="-")return b(d(S.substring(1),I));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(I,8)),A=m,F=0;F<S.length;F+=8){var P=Math.min(8,S.length-F),D=parseInt(S.substring(F,F+P),I);8>P?(P=u(Math.pow(I,P)),A=A.j(P).add(u(D))):(A=A.j(C),A=A.add(u(D)))}return A}var m=c(0),g=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-b(this).m();for(var S=0,I=1,C=0;C<this.g.length;C++){var A=this.i(C);S+=(0<=A?A:4294967296+A)*I,I*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(x(this))return"-"+b(this).toString(S);for(var I=u(Math.pow(S,6)),C=this,A="";;){var F=R(C,I).g;C=v(C,F.j(I));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=F,w(C))return P+A;for(;6>P.length;)P="0"+P;A=P+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var I=0;I<S.g.length;I++)if(S.g[I]!=0)return!1;return!0}function x(S){return S.h==-1}t.l=function(S){return S=v(this,S),x(S)?-1:w(S)?0:1};function b(S){for(var I=S.g.length,C=[],A=0;A<I;A++)C[A]=~S.g[A];return new o(C,~S.h).add(g)}t.abs=function(){return x(this)?b(this):this},t.add=function(S){for(var I=Math.max(this.g.length,S.g.length),C=[],A=0,F=0;F<=I;F++){var P=A+(this.i(F)&65535)+(S.i(F)&65535),D=(P>>>16)+(this.i(F)>>>16)+(S.i(F)>>>16);A=D>>>16,P&=65535,D&=65535,C[F]=D<<16|P}return new o(C,C[C.length-1]&-2147483648?-1:0)};function v(S,I){return S.add(b(I))}t.j=function(S){if(w(this)||w(S))return m;if(x(this))return x(S)?b(this).j(b(S)):b(b(this).j(S));if(x(S))return b(this.j(b(S)));if(0>this.l(y)&&0>S.l(y))return u(this.m()*S.m());for(var I=this.g.length+S.g.length,C=[],A=0;A<2*I;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var F=0;F<S.g.length;F++){var P=this.i(A)>>>16,D=this.i(A)&65535,M=S.i(F)>>>16,q=S.i(F)&65535;C[2*A+2*F]+=D*q,_(C,2*A+2*F),C[2*A+2*F+1]+=P*q,_(C,2*A+2*F+1),C[2*A+2*F+1]+=D*M,_(C,2*A+2*F+1),C[2*A+2*F+2]+=P*M,_(C,2*A+2*F+2)}for(A=0;A<I;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=I;A<2*I;A++)C[A]=0;return new o(C,0)};function _(S,I){for(;(S[I]&65535)!=S[I];)S[I+1]+=S[I]>>>16,S[I]&=65535,I++}function T(S,I){this.g=S,this.h=I}function R(S,I){if(w(I))throw Error("division by zero");if(w(S))return new T(m,m);if(x(S))return I=R(b(S),I),new T(b(I.g),b(I.h));if(x(I))return I=R(S,b(I)),new T(b(I.g),I.h);if(30<S.g.length){if(x(S)||x(I))throw Error("slowDivide_ only works with positive integers.");for(var C=g,A=I;0>=A.l(S);)C=j(C),A=j(A);var F=V(C,1),P=V(A,1);for(A=V(A,2),C=V(C,2);!w(A);){var D=P.add(A);0>=D.l(S)&&(F=F.add(C),P=D),A=V(A,1),C=V(C,1)}return I=v(S,F.j(I)),new T(F,I)}for(F=m;0<=S.l(I);){for(C=Math.max(1,Math.floor(S.m()/I.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),P=u(C),D=P.j(I);x(D)||0<D.l(S);)C-=A,P=u(C),D=P.j(I);w(P)&&(P=g),F=F.add(P),S=v(S,D)}return new T(F,S)}t.A=function(S){return R(this,S).h},t.and=function(S){for(var I=Math.max(this.g.length,S.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)&S.i(A);return new o(C,this.h&S.h)},t.or=function(S){for(var I=Math.max(this.g.length,S.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)|S.i(A);return new o(C,this.h|S.h)},t.xor=function(S){for(var I=Math.max(this.g.length,S.g.length),C=[],A=0;A<I;A++)C[A]=this.i(A)^S.i(A);return new o(C,this.h^S.h)};function j(S){for(var I=S.g.length+1,C=[],A=0;A<I;A++)C[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(C,S.h)}function V(S,I){var C=I>>5;I%=32;for(var A=S.g.length-C,F=[],P=0;P<A;P++)F[P]=0<I?S.i(P+C)>>>I|S.i(P+C+1)<<32-I:S.i(P+C);return new o(F,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,I1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Hi=o}).apply(typeof dx<"u"?dx:typeof self<"u"?self:typeof window<"u"?window:{});var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var S1,fl,k1,$u,nm,C1,A1,N1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,E,k){return f==Array.prototype||f==Object.prototype||(f[E]=k.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof wu=="object"&&wu];for(var E=0;E<f.length;++E){var k=f[E];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var r=n(this);function s(f,E){if(E)e:{var k=r;f=f.split(".");for(var U=0;U<f.length-1;U++){var Y=f[U];if(!(Y in k))break e;k=k[Y]}f=f[f.length-1],U=k[f],E=E(U),E!=U&&E!=null&&e(k,f,{configurable:!0,writable:!0,value:E})}}function i(f,E){f instanceof String&&(f+="");var k=0,U=!1,Y={next:function(){if(!U&&k<f.length){var ie=k++;return{value:E(ie,f[ie]),done:!1}}return U=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(f){return f||function(){return i(this,function(E,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(f){var E=typeof f;return E=E!="object"?E:f?Array.isArray(f)?"array":E:"null",E=="array"||E=="object"&&typeof f.length=="number"}function u(f){var E=typeof f;return E=="object"&&f!=null||E=="function"}function d(f,E,k){return f.call.apply(f.bind,arguments)}function m(f,E,k){if(!f)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,U),f.apply(E,Y)}}return function(){return f.apply(E,arguments)}}function g(f,E,k){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,g.apply(null,arguments)}function y(f,E){var k=Array.prototype.slice.call(arguments,1);return function(){var U=k.slice();return U.push.apply(U,arguments),f.apply(this,U)}}function w(f,E){function k(){}k.prototype=E.prototype,f.aa=E.prototype,f.prototype=new k,f.prototype.constructor=f,f.Qb=function(U,Y,ie){for(var we=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)we[mt-2]=arguments[mt];return E.prototype[Y].apply(U,we)}}function x(f){const E=f.length;if(0<E){const k=Array(E);for(let U=0;U<E;U++)k[U]=f[U];return k}return[]}function b(f,E){for(let k=1;k<arguments.length;k++){const U=arguments[k];if(c(U)){const Y=f.length||0,ie=U.length||0;f.length=Y+ie;for(let we=0;we<ie;we++)f[Y+we]=U[we]}else f.push(U)}}class v{constructor(E,k){this.i=E,this.j=k,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function _(f){return/^[\s\xa0]*$/.test(f)}function T(){var f=l.navigator;return f&&(f=f.userAgent)?f:""}function R(f){return R[" "](f),f}R[" "]=function(){};var j=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(f,E,k){for(const U in f)E.call(k,f[U],U,f)}function S(f,E){for(const k in f)E.call(void 0,f[k],k,f)}function I(f){const E={};for(const k in f)E[k]=f[k];return E}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(f,E){let k,U;for(let Y=1;Y<arguments.length;Y++){U=arguments[Y];for(k in U)f[k]=U[k];for(let ie=0;ie<C.length;ie++)k=C[ie],Object.prototype.hasOwnProperty.call(U,k)&&(f[k]=U[k])}}function F(f){var E=1;f=f.split(":");const k=[];for(;0<E&&f.length;)k.push(f.shift()),E--;return f.length&&k.push(f.join(":")),k}function P(f){l.setTimeout(()=>{throw f},0)}function D(){var f=Q;let E=null;return f.g&&(E=f.g,f.g=f.g.next,f.g||(f.h=null),E.next=null),E}class M{constructor(){this.h=this.g=null}add(E,k){const U=q.get();U.set(E,k),this.h?this.h.next=U:this.g=U,this.h=U}}var q=new v(()=>new pe,f=>f.reset());class pe{constructor(){this.next=this.g=this.h=null}set(E,k){this.h=E,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,ee=!1,Q=new M,ue=()=>{const f=l.Promise.resolve(void 0);ne=()=>{f.then($)}};var $=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(k){P(k)}var E=q;E.j(f),100>E.h&&(E.h++,f.next=E.g,E.g=f)}ee=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(f,E){this.type=f,this.g=this.target=E,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var f=!1,E=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const k=()=>{};l.addEventListener("test",k,E),l.removeEventListener("test",k,E)}catch{}return f}();function ce(f,E){if(Z.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var k=this.type=f.type,U=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=E,E=f.relatedTarget){if(j){e:{try{R(E.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(E=null)}}else k=="mouseover"?E=f.fromElement:k=="mouseout"&&(E=f.toElement);this.relatedTarget=E,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Pe[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ce.aa.h.call(this)}}w(ce,Z);var Pe={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Se=0;function Ce(f,E,k,U,Y){this.listener=f,this.proxy=null,this.src=E,this.type=k,this.capture=!!U,this.ha=Y,this.key=++Se,this.da=this.fa=!1}function We(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Oe(f){this.src=f,this.g={},this.h=0}Oe.prototype.add=function(f,E,k,U,Y){var ie=f.toString();f=this.g[ie],f||(f=this.g[ie]=[],this.h++);var we=ot(f,E,U,Y);return-1<we?(E=f[we],k||(E.fa=!1)):(E=new Ce(E,this.src,ie,!!U,Y),E.fa=k,f.push(E)),E};function Ze(f,E){var k=E.type;if(k in f.g){var U=f.g[k],Y=Array.prototype.indexOf.call(U,E,void 0),ie;(ie=0<=Y)&&Array.prototype.splice.call(U,Y,1),ie&&(We(E),f.g[k].length==0&&(delete f.g[k],f.h--))}}function ot(f,E,k,U){for(var Y=0;Y<f.length;++Y){var ie=f[Y];if(!ie.da&&ie.listener==E&&ie.capture==!!k&&ie.ha==U)return Y}return-1}var N="closure_lm_"+(1e6*Math.random()|0),ae={};function X(f,E,k,U,Y){if(Array.isArray(E)){for(var ie=0;ie<E.length;ie++)X(f,E[ie],k,U,Y);return null}return k=K(k),f&&f[xe]?f.K(E,k,u(U)?!!U.capture:!1,Y):z(f,E,k,!1,U,Y)}function z(f,E,k,U,Y,ie){if(!E)throw Error("Invalid event type");var we=u(Y)?!!Y.capture:!!Y,mt=me(f);if(mt||(f[N]=mt=new Oe(f)),k=mt.add(E,k,U,we,ie),k.proxy)return k;if(U=O(),k.proxy=U,U.src=f,U.listener=k,f.addEventListener)he||(Y=we),Y===void 0&&(Y=!1),f.addEventListener(E.toString(),U,Y);else if(f.attachEvent)f.attachEvent(le(E.toString()),U);else if(f.addListener&&f.removeListener)f.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return k}function O(){function f(k){return E.call(f.src,f.listener,k)}const E=J;return f}function H(f,E,k,U,Y){if(Array.isArray(E))for(var ie=0;ie<E.length;ie++)H(f,E[ie],k,U,Y);else U=u(U)?!!U.capture:!!U,k=K(k),f&&f[xe]?(f=f.i,E=String(E).toString(),E in f.g&&(ie=f.g[E],k=ot(ie,k,U,Y),-1<k&&(We(ie[k]),Array.prototype.splice.call(ie,k,1),ie.length==0&&(delete f.g[E],f.h--)))):f&&(f=me(f))&&(E=f.g[E.toString()],f=-1,E&&(f=ot(E,k,U,Y)),(k=-1<f?E[f]:null)&&oe(k))}function oe(f){if(typeof f!="number"&&f&&!f.da){var E=f.src;if(E&&E[xe])Ze(E.i,f);else{var k=f.type,U=f.proxy;E.removeEventListener?E.removeEventListener(k,U,f.capture):E.detachEvent?E.detachEvent(le(k),U):E.addListener&&E.removeListener&&E.removeListener(U),(k=me(E))?(Ze(k,f),k.h==0&&(k.src=null,E[N]=null)):We(f)}}}function le(f){return f in ae?ae[f]:ae[f]="on"+f}function J(f,E){if(f.da)f=!0;else{E=new ce(E,this);var k=f.listener,U=f.ha||f.src;f.fa&&oe(f),f=k.call(U,E)}return f}function me(f){return f=f[N],f instanceof Oe?f:null}var _e="__closure_events_fn_"+(1e9*Math.random()>>>0);function K(f){return typeof f=="function"?f:(f[_e]||(f[_e]=function(E){return f.handleEvent(E)}),f[_e])}function re(){B.call(this),this.i=new Oe(this),this.M=this,this.F=null}w(re,B),re.prototype[xe]=!0,re.prototype.removeEventListener=function(f,E,k,U){H(this,f,E,k,U)};function be(f,E){var k,U=f.F;if(U)for(k=[];U;U=U.F)k.push(U);if(f=f.M,U=E.type||E,typeof E=="string")E=new Z(E,f);else if(E instanceof Z)E.target=E.target||f;else{var Y=E;E=new Z(U,f),A(E,Y)}if(Y=!0,k)for(var ie=k.length-1;0<=ie;ie--){var we=E.g=k[ie];Y=Ne(we,U,!0,E)&&Y}if(we=E.g=f,Y=Ne(we,U,!0,E)&&Y,Y=Ne(we,U,!1,E)&&Y,k)for(ie=0;ie<k.length;ie++)we=E.g=k[ie],Y=Ne(we,U,!1,E)&&Y}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var f=this.i,E;for(E in f.g){for(var k=f.g[E],U=0;U<k.length;U++)We(k[U]);delete f.g[E],f.h--}}this.F=null},re.prototype.K=function(f,E,k,U){return this.i.add(String(f),E,!1,k,U)},re.prototype.L=function(f,E,k,U){return this.i.add(String(f),E,!0,k,U)};function Ne(f,E,k,U){if(E=f.i.g[String(E)],!E)return!0;E=E.concat();for(var Y=!0,ie=0;ie<E.length;++ie){var we=E[ie];if(we&&!we.da&&we.capture==k){var mt=we.listener,en=we.ha||we.src;we.fa&&Ze(f.i,we),Y=mt.call(en,U)!==!1&&Y}}return Y&&!U.defaultPrevented}function ht(f,E,k){if(typeof f=="function")k&&(f=g(f,k));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:l.setTimeout(f,E||0)}function Pt(f){f.g=ht(()=>{f.g=null,f.i&&(f.i=!1,Pt(f))},f.l);const E=f.h;f.h=null,f.m.apply(null,E)}class gt extends B{constructor(E,k){super(),this.m=E,this.l=k,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Pt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function te(f){B.call(this),this.h=f,this.g={}}w(te,B);var fe=[];function Re(f){V(f.g,function(E,k){this.g.hasOwnProperty(k)&&oe(E)},f),f.g={}}te.prototype.N=function(){te.aa.N.call(this),Re(this)},te.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var He=l.JSON.stringify,tt=l.JSON.parse,Ft=class{stringify(f){return l.JSON.stringify(f,void 0)}parse(f){return l.JSON.parse(f,void 0)}};function xt(){}xt.prototype.h=null;function Kt(f){return f.h||(f.h=f.i())}function un(){}var Ut={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dn(){Z.call(this,"d")}w(Dn,Z);function jn(){Z.call(this,"c")}w(jn,Z);var lr={},lt=null;function $r(){return lt=lt||new re}lr.La="serverreachability";function yo(f){Z.call(this,lr.La,f)}w(yo,Z);function Er(f){const E=$r();be(E,new yo(E))}lr.STAT_EVENT="statevent";function Ei(f,E){Z.call(this,lr.STAT_EVENT,f),this.stat=E}w(Ei,Z);function At(f){const E=$r();be(E,new Ei(E,f))}lr.Ma="timingevent";function Ti(f,E){Z.call(this,lr.Ma,f),this.size=E}w(Ti,Z);function cr(f,E){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){f()},E)}function Qe(){this.g=!0}Qe.prototype.xa=function(){this.g=!1};function vo(f,E,k,U,Y,ie){f.info(function(){if(f.g)if(ie)for(var we="",mt=ie.split("&"),en=0;en<mt.length;en++){var rt=mt[en].split("=");if(1<rt.length){var fn=rt[0];rt=rt[1];var pn=fn.split("_");we=2<=pn.length&&pn[1]=="type"?we+(fn+"="+rt+"&"):we+(fn+"=redacted&")}}else we=null;else we=ie;return"XMLHTTP REQ ("+U+") [attempt "+Y+"]: "+E+`
`+k+`
`+we})}function Ii(f,E,k,U,Y,ie,we){f.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+Y+"]: "+E+`
`+k+`
`+ie+" "+we})}function Tr(f,E,k,U){f.info(function(){return"XMLHTTP TEXT ("+E+"): "+wo(f,k)+(U?" "+U:"")})}function xo(f,E){f.info(function(){return"TIMEOUT: "+E})}Qe.prototype.info=function(){};function wo(f,E){if(!f.g)return E;if(!E)return null;try{var k=JSON.parse(E);if(k){for(f=0;f<k.length;f++)if(Array.isArray(k[f])){var U=k[f];if(!(2>U.length)){var Y=U[1];if(Array.isArray(Y)&&!(1>Y.length)){var ie=Y[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var we=1;we<Y.length;we++)Y[we]=""}}}}return He(k)}catch{return E}}var as={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Si={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},G;function se(){}w(se,xt),se.prototype.g=function(){return new XMLHttpRequest},se.prototype.i=function(){return{}},G=new se;function ye(f,E,k,U){this.j=f,this.i=E,this.l=k,this.R=U||1,this.U=new te(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}var qe={},ut={};function nt(f,E,k){f.L=1,f.v=bo(kr(E)),f.m=k,f.P=!0,qn(f,null)}function qn(f,E){f.F=Date.now(),Ir(f),f.A=kr(f.v);var k=f.A,U=f.R;Array.isArray(U)||(U=[String(U)]),Ls(k.i,"t",U),f.C=0,k=f.j.J,f.h=new De,f.g=_y(f.j,k?E:null,!f.m),0<f.O&&(f.M=new gt(g(f.Y,f,f.g),f.O)),E=f.U,k=f.g,U=f.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(fe[0]=Y.toString()),Y=fe);for(var ie=0;ie<Y.length;ie++){var we=X(k,Y[ie],U||E.handleEvent,!1,E.h||E);if(!we)break;E.g[we.key]=we}E=f.H?I(f.H):{},f.m?(f.u||(f.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,E)):(f.u="GET",f.g.ea(f.A,f.u,null,E)),Er(),vo(f.i,f.u,f.A,f.l,f.R,f.m)}ye.prototype.ca=function(f){f=f.target;const E=this.M;E&&ls(f)==3?E.j():this.Y(f)},ye.prototype.Y=function(f){try{if(f==this.g)e:{const pn=ls(this.g);var E=this.g.Ba();const To=this.g.Z();if(!(3>pn)&&(pn!=3||this.g&&(this.h.h||this.g.oa()||uy(this.g)))){this.J||pn!=4||E==7||(E==8||0>=To?Er(3):Er(2)),hn(this);var k=this.g.Z();this.X=k;t:if(dn(this)){var U=uy(this.g);f="";var Y=U.length,ie=ls(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tn(this),ur(this);var we="";break t}this.h.i=new l.TextDecoder}for(E=0;E<Y;E++)this.h.h=!0,f+=this.h.i.decode(U[E],{stream:!(ie&&E==Y-1)});U.length=0,this.h.g+=f,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=k==200,Ii(this.i,this.u,this.A,this.l,this.R,pn,k),this.o){if(this.T&&!this.K){t:{if(this.g){var mt,en=this.g;if((mt=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(mt)){var rt=mt;break t}}rt=null}if(k=rt)Tr(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ki(this,k);else{this.o=!1,this.s=3,At(12),Tn(this),ur(this);break e}}if(this.P){k=!0;let Cr;for(;!this.J&&this.C<we.length;)if(Cr=Hr(this,we),Cr==ut){pn==4&&(this.s=4,At(14),k=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(Cr==qe){this.s=4,At(15),Tr(this.i,this.l,we,"[Invalid Chunk]"),k=!1;break}else Tr(this.i,this.l,Cr,null),ki(this,Cr);if(dn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pn!=4||we.length!=0||this.h.h||(this.s=1,At(16),k=!1),this.o=this.o&&k,!k)Tr(this.i,this.l,we,"[Invalid Chunked Response]"),Tn(this),ur(this);else if(0<we.length&&!this.W){this.W=!0;var fn=this.j;fn.g==this&&fn.ba&&!fn.M&&(fn.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),Zh(fn),fn.M=!0,At(11))}}else Tr(this.i,this.l,we,null),ki(this,we);pn==4&&Tn(this),this.o&&!this.J&&(pn==4?yy(this.j,this):(this.o=!1,Ir(this)))}else Bk(this.g),k==400&&0<we.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),Tn(this),ur(this)}}}catch{}finally{}};function dn(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Hr(f,E){var k=f.C,U=E.indexOf(`
`,k);return U==-1?ut:(k=Number(E.substring(k,U)),isNaN(k)?qe:(U+=1,U+k>E.length?ut:(E=E.slice(U,U+k),f.C=U+k,E)))}ye.prototype.cancel=function(){this.J=!0,Tn(this)};function Ir(f){f.S=Date.now()+f.I,Sr(f,f.I)}function Sr(f,E){if(f.B!=null)throw Error("WatchDog timer not null");f.B=cr(g(f.ba,f),E)}function hn(f){f.B&&(l.clearTimeout(f.B),f.B=null)}ye.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(xo(this.i,this.A),this.L!=2&&(Er(),At(17)),Tn(this),this.s=2,ur(this)):Sr(this,this.S-f)};function ur(f){f.j.G==0||f.J||yy(f.j,f)}function Tn(f){hn(f);var E=f.M;E&&typeof E.ma=="function"&&E.ma(),f.M=null,Re(f.U),f.g&&(E=f.g,f.g=null,E.abort(),E.ma())}function ki(f,E){try{var k=f.j;if(k.G!=0&&(k.g==f||Ba(k.h,f))){if(!f.K&&Ba(k.h,f)&&k.G==3){try{var U=k.Da.g.parse(E)}catch{U=null}if(Array.isArray(U)&&U.length==3){var Y=U;if(Y[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<f.F)eu(k),Xc(k);else break e;Xh(k),At(18)}}else k.za=Y[1],0<k.za-k.T&&37500>Y[2]&&k.F&&k.v==0&&!k.C&&(k.C=cr(g(k.Za,k),6e3));if(1>=$c(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else Ni(k,11)}else if((f.K||k.g==f)&&eu(k),!_(E))for(Y=k.Da.g.parse(E),E=0;E<Y.length;E++){let rt=Y[E];if(k.T=rt[0],rt=rt[1],k.G==2)if(rt[0]=="c"){k.K=rt[1],k.ia=rt[2];const fn=rt[3];fn!=null&&(k.la=fn,k.j.info("VER="+k.la));const pn=rt[4];pn!=null&&(k.Aa=pn,k.j.info("SVER="+k.Aa));const To=rt[5];To!=null&&typeof To=="number"&&0<To&&(U=1.5*To,k.L=U,k.j.info("backChannelRequestTimeoutMs_="+U)),U=k;const Cr=f.g;if(Cr){const nu=Cr.g?Cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nu){var ie=U.h;ie.g||nu.indexOf("spdy")==-1&&nu.indexOf("quic")==-1&&nu.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(za(ie,ie.h),ie.h=null))}if(U.D){const ef=Cr.g?Cr.g.getResponseHeader("X-HTTP-Session-Id"):null;ef&&(U.ya=ef,pt(U.I,U.D,ef))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-f.F,k.j.info("Handshake RTT: "+k.R+"ms")),U=k;var we=f;if(U.qa=wy(U,U.J?U.ia:null,U.W),we.K){Ga(U.h,we);var mt=we,en=U.L;en&&(mt.I=en),mt.B&&(hn(mt),Ir(mt)),U.g=we}else my(U);0<k.i.length&&Zc(k)}else rt[0]!="stop"&&rt[0]!="close"||Ni(k,7);else k.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Ni(k,7):Qh(k):rt[0]!="noop"&&k.l&&k.l.ta(rt),k.v=0)}}Er(4)}catch{}}var Wh=class{constructor(f,E){this.g=f,this.map=E}};function zc(f){this.l=f||10,l.PerformanceNavigationTiming?(f=l.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function $c(f){return f.h?1:f.g?f.g.size:0}function Ba(f,E){return f.h?f.h==E:f.g?f.g.has(E):!1}function za(f,E){f.g?f.g.add(E):f.h=E}function Ga(f,E){f.h&&f.h==E?f.h=null:f.g&&f.g.has(E)&&f.g.delete(E)}zc.prototype.cancel=function(){if(this.i=Hc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Hc(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let E=f.i;for(const k of f.g.values())E=E.concat(k.D);return E}return x(f.i)}function qc(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var E=[],k=f.length,U=0;U<k;U++)E.push(f[U]);return E}E=[],k=0;for(U in f)E[k++]=f[U];return E}function Kh(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var E=[];f=f.length;for(var k=0;k<f;k++)E.push(k);return E}E=[],k=0;for(const U in f)E[k++]=U;return E}}}function $a(f,E){if(f.forEach&&typeof f.forEach=="function")f.forEach(E,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,E,void 0);else for(var k=Kh(f),U=qc(f),Y=U.length,ie=0;ie<Y;ie++)E.call(void 0,U[ie],k&&k[ie],f)}var Wc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jh(f,E){if(f){f=f.split("&");for(var k=0;k<f.length;k++){var U=f[k].indexOf("="),Y=null;if(0<=U){var ie=f[k].substring(0,U);Y=f[k].substring(U+1)}else ie=f[k];E(ie,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function qr(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof qr){this.h=f.h,Ci(this,f.j),this.o=f.o,this.g=f.g,_o(this,f.s),this.l=f.l;var E=f.i,k=new yt;k.i=E.i,E.g&&(k.g=new Map(E.g),k.h=E.h),Kc(this,k),this.m=f.m}else f&&(E=String(f).match(Wc))?(this.h=!1,Ci(this,E[1]||"",!0),this.o=js(E[2]||""),this.g=js(E[3]||"",!0),_o(this,E[4]),this.l=js(E[5]||"",!0),Kc(this,E[6]||"",!0),this.m=js(E[7]||"")):(this.h=!1,this.i=new yt(null,this.h))}qr.prototype.toString=function(){var f=[],E=this.j;E&&f.push(Ai(E,Ee,!0),":");var k=this.g;return(k||E=="file")&&(f.push("//"),(E=this.o)&&f.push(Ai(E,Ee,!0),"@"),f.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&f.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&f.push("/"),f.push(Ai(k,k.charAt(0)=="/"?Le:je,!0))),(k=this.i.toString())&&f.push("?",k),(k=this.m)&&f.push("#",Ai(k,Vt)),f.join("")};function kr(f){return new qr(f)}function Ci(f,E,k){f.j=k?js(E,!0):E,f.j&&(f.j=f.j.replace(/:$/,""))}function _o(f,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);f.s=E}else f.s=null}function Kc(f,E,k){E instanceof yt?(f.i=E,Ha(f.i,f.h)):(k||(E=Ai(E,at)),f.i=new yt(E,f.h))}function pt(f,E,k){f.i.set(E,k)}function bo(f){return pt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function js(f,E){return f?E?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ai(f,E,k){return typeof f=="string"?(f=encodeURI(f).replace(E,W),k&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function W(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Ee=/[#\/\?@]/g,je=/[#\?:]/g,Le=/[#\?]/g,at=/[#\?@]/g,Vt=/#/g;function yt(f,E){this.h=this.g=null,this.i=f||null,this.j=!!E}function $t(f){f.g||(f.g=new Map,f.h=0,f.i&&Jh(f.i,function(E,k){f.add(decodeURIComponent(E.replace(/\+/g," ")),k)}))}t=yt.prototype,t.add=function(f,E){$t(this),this.i=null,f=Ln(this,f);var k=this.g.get(f);return k||this.g.set(f,k=[]),k.push(E),this.h+=1,this};function Wn(f,E){$t(f),E=Ln(f,E),f.g.has(E)&&(f.i=null,f.h-=f.g.get(E).length,f.g.delete(E))}function dr(f,E){return $t(f),E=Ln(f,E),f.g.has(E)}t.forEach=function(f,E){$t(this),this.g.forEach(function(k,U){k.forEach(function(Y){f.call(E,Y,U,this)},this)},this)},t.na=function(){$t(this);const f=Array.from(this.g.values()),E=Array.from(this.g.keys()),k=[];for(let U=0;U<E.length;U++){const Y=f[U];for(let ie=0;ie<Y.length;ie++)k.push(E[U])}return k},t.V=function(f){$t(this);let E=[];if(typeof f=="string")dr(this,f)&&(E=E.concat(this.g.get(Ln(this,f))));else{f=Array.from(this.g.values());for(let k=0;k<f.length;k++)E=E.concat(f[k])}return E},t.set=function(f,E){return $t(this),this.i=null,f=Ln(this,f),dr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[E]),this.h+=1,this},t.get=function(f,E){return f?(f=this.V(f),0<f.length?String(f[0]):E):E};function Ls(f,E,k){Wn(f,E),0<k.length&&(f.i=null,f.g.set(Ln(f,E),x(k)),f.h+=k.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],E=Array.from(this.g.keys());for(var k=0;k<E.length;k++){var U=E[k];const ie=encodeURIComponent(String(U)),we=this.V(U);for(U=0;U<we.length;U++){var Y=ie;we[U]!==""&&(Y+="="+encodeURIComponent(String(we[U]))),f.push(Y)}}return this.i=f.join("&")};function Ln(f,E){return E=String(E),f.j&&(E=E.toLowerCase()),E}function Ha(f,E){E&&!f.j&&($t(f),f.i=null,f.g.forEach(function(k,U){var Y=U.toLowerCase();U!=Y&&(Wn(this,U),Ls(this,Y,k))},f)),f.j=E}function jk(f,E){const k=new Qe;if(l.Image){const U=new Image;U.onload=y(Fs,k,"TestLoadImage: loaded",!0,E,U),U.onerror=y(Fs,k,"TestLoadImage: error",!1,E,U),U.onabort=y(Fs,k,"TestLoadImage: abort",!1,E,U),U.ontimeout=y(Fs,k,"TestLoadImage: timeout",!1,E,U),l.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=f}else E(!1)}function Lk(f,E){const k=new Qe,U=new AbortController,Y=setTimeout(()=>{U.abort(),Fs(k,"TestPingServer: timeout",!1,E)},1e4);fetch(f,{signal:U.signal}).then(ie=>{clearTimeout(Y),ie.ok?Fs(k,"TestPingServer: ok",!0,E):Fs(k,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),Fs(k,"TestPingServer: error",!1,E)})}function Fs(f,E,k,U,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),U(k)}catch{}}function Fk(){this.g=new Ft}function Uk(f,E,k){const U=k||"";try{$a(f,function(Y,ie){let we=Y;u(Y)&&(we=He(Y)),E.push(U+ie+"="+encodeURIComponent(we))})}catch(Y){throw E.push(U+"type="+encodeURIComponent("_badmap")),Y}}function Jc(f){this.l=f.Ub||null,this.j=f.eb||!1}w(Jc,xt),Jc.prototype.g=function(){return new Yc(this.l,this.j)},Jc.prototype.i=function(f){return function(){return f}}({});function Yc(f,E){re.call(this),this.D=f,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Yc,re),t=Yc.prototype,t.open=function(f,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=E,this.readyState=1,Wa(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(E.body=f),(this.D||l).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Wa(this)),this.g&&(this.readyState=3,Wa(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sy(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function sy(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var E=f.value?f.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!f.done}))&&(this.response=this.responseText+=E)}f.done?qa(this):Wa(this),this.readyState==3&&sy(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,qa(this))},t.Qa=function(f){this.g&&(this.response=f,qa(this))},t.ga=function(){this.g&&qa(this)};function qa(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Wa(f)}t.setRequestHeader=function(f,E){this.u.append(f,E)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],E=this.h.entries();for(var k=E.next();!k.done;)k=k.value,f.push(k[0]+": "+k[1]),k=E.next();return f.join(`\r
`)};function Wa(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Yc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function iy(f){let E="";return V(f,function(k,U){E+=U,E+=":",E+=k,E+=`\r
`}),E}function Yh(f,E,k){e:{for(U in k){var U=!1;break e}U=!0}U||(k=iy(k),typeof f=="string"?k!=null&&encodeURIComponent(String(k)):pt(f,E,k))}function Nt(f){re.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Nt,re);var Vk=/^https?$/i,Ok=["POST","PUT"];t=Nt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,E,k,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);E=E?E.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():G.g(),this.v=this.o?Kt(this.o):Kt(G),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(E,String(f),!0),this.B=!1}catch(ie){oy(this,ie);return}if(f=k||"",k=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var Y in U)k.set(Y,U[Y]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ie of U.keys())k.set(ie,U.get(ie));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(k.keys()).find(ie=>ie.toLowerCase()=="content-type"),Y=l.FormData&&f instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ok,E,void 0))||U||Y||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,we]of k)this.g.setRequestHeader(ie,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cy(this),this.u=!0,this.g.send(f),this.u=!1}catch(ie){oy(this,ie)}};function oy(f,E){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=E,f.m=5,ay(f),Qc(f)}function ay(f){f.A||(f.A=!0,be(f,"complete"),be(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,be(this,"complete"),be(this,"abort"),Qc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qc(this,!0)),Nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ly(this):this.bb())},t.bb=function(){ly(this)};function ly(f){if(f.h&&typeof o<"u"&&(!f.v[1]||ls(f)!=4||f.Z()!=2)){if(f.u&&ls(f)==4)ht(f.Ea,0,f);else if(be(f,"readystatechange"),ls(f)==4){f.h=!1;try{const we=f.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var k;if(!(k=E)){var U;if(U=we===0){var Y=String(f.D).match(Wc)[1]||null;!Y&&l.self&&l.self.location&&(Y=l.self.location.protocol.slice(0,-1)),U=!Vk.test(Y?Y.toLowerCase():"")}k=U}if(k)be(f,"complete"),be(f,"success");else{f.m=6;try{var ie=2<ls(f)?f.g.statusText:""}catch{ie=""}f.l=ie+" ["+f.Z()+"]",ay(f)}}finally{Qc(f)}}}}function Qc(f,E){if(f.g){cy(f);const k=f.g,U=f.v[0]?()=>{}:null;f.g=null,f.v=null,E||be(f,"ready");try{k.onreadystatechange=U}catch{}}}function cy(f){f.I&&(l.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function ls(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<ls(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var E=this.g.responseText;return f&&E.indexOf(f)==0&&(E=E.substring(f.length)),tt(E)}};function uy(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Bk(f){const E={};f=(f.g&&2<=ls(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<f.length;U++){if(_(f[U]))continue;var k=F(f[U]);const Y=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const ie=E[Y]||[];E[Y]=ie,ie.push(k)}S(E,function(U){return U.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ka(f,E,k){return k&&k.internalChannelParams&&k.internalChannelParams[f]||E}function dy(f){this.Aa=0,this.i=[],this.j=new Qe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ka("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ka("baseRetryDelayMs",5e3,f),this.cb=Ka("retryDelaySeedMs",1e4,f),this.Wa=Ka("forwardChannelMaxRetries",2,f),this.wa=Ka("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new zc(f&&f.concurrentRequestLimit),this.Da=new Fk,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dy.prototype,t.la=8,t.G=1,t.connect=function(f,E,k,U){At(0),this.W=f,this.H=E||{},k&&U!==void 0&&(this.H.OSID=k,this.H.OAID=U),this.F=this.X,this.I=wy(this,null,this.W),Zc(this)};function Qh(f){if(hy(f),f.G==3){var E=f.U++,k=kr(f.I);if(pt(k,"SID",f.K),pt(k,"RID",E),pt(k,"TYPE","terminate"),Ja(f,k),E=new ye(f,f.j,E),E.L=2,E.v=bo(kr(k)),k=!1,l.navigator&&l.navigator.sendBeacon)try{k=l.navigator.sendBeacon(E.v.toString(),"")}catch{}!k&&l.Image&&(new Image().src=E.v,k=!0),k||(E.g=_y(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Ir(E)}xy(f)}function Xc(f){f.g&&(Zh(f),f.g.cancel(),f.g=null)}function hy(f){Xc(f),f.u&&(l.clearTimeout(f.u),f.u=null),eu(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&l.clearTimeout(f.s),f.s=null)}function Zc(f){if(!Gc(f.h)&&!f.s){f.s=!0;var E=f.Ga;ne||ue(),ee||(ne(),ee=!0),Q.add(E,f),f.B=0}}function zk(f,E){return $c(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=E.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=cr(g(f.Ga,f,E),vy(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const Y=new ye(this,this.j,f);let ie=this.o;if(this.S&&(ie?(ie=I(ie),A(ie,this.S)):ie=this.S),this.m!==null||this.O||(Y.H=ie,ie=null),this.P)e:{for(var E=0,k=0;k<this.i.length;k++){t:{var U=this.i[k];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(E+=U,4096<E){E=k;break e}if(E===4096||k===this.i.length-1){E=k+1;break e}}E=1e3}else E=1e3;E=py(this,Y,E),k=kr(this.I),pt(k,"RID",f),pt(k,"CVER",22),this.D&&pt(k,"X-HTTP-Session-Id",this.D),Ja(this,k),ie&&(this.O?E="headers="+encodeURIComponent(String(iy(ie)))+"&"+E:this.m&&Yh(k,this.m,ie)),za(this.h,Y),this.Ua&&pt(k,"TYPE","init"),this.P?(pt(k,"$req",E),pt(k,"SID","null"),Y.T=!0,nt(Y,k,null)):nt(Y,k,E),this.G=2}}else this.G==3&&(f?fy(this,f):this.i.length==0||Gc(this.h)||fy(this))};function fy(f,E){var k;E?k=E.l:k=f.U++;const U=kr(f.I);pt(U,"SID",f.K),pt(U,"RID",k),pt(U,"AID",f.T),Ja(f,U),f.m&&f.o&&Yh(U,f.m,f.o),k=new ye(f,f.j,k,f.B+1),f.m===null&&(k.H=f.o),E&&(f.i=E.D.concat(f.i)),E=py(f,k,1e3),k.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),za(f.h,k),nt(k,U,E)}function Ja(f,E){f.H&&V(f.H,function(k,U){pt(E,U,k)}),f.l&&$a({},function(k,U){pt(E,U,k)})}function py(f,E,k){k=Math.min(f.i.length,k);var U=f.l?g(f.l.Na,f.l,f):null;e:{var Y=f.i;let ie=-1;for(;;){const we=["count="+k];ie==-1?0<k?(ie=Y[0].g,we.push("ofs="+ie)):ie=0:we.push("ofs="+ie);let mt=!0;for(let en=0;en<k;en++){let rt=Y[en].g;const fn=Y[en].map;if(rt-=ie,0>rt)ie=Math.max(0,Y[en].g-100),mt=!1;else try{Uk(fn,we,"req"+rt+"_")}catch{U&&U(fn)}}if(mt){U=we.join("&");break e}}}return f=f.i.splice(0,k),E.D=f,U}function my(f){if(!f.g&&!f.u){f.Y=1;var E=f.Fa;ne||ue(),ee||(ne(),ee=!0),Q.add(E,f),f.v=0}}function Xh(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=cr(g(f.Fa,f),vy(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,gy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=cr(g(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),Xc(this),gy(this))};function Zh(f){f.A!=null&&(l.clearTimeout(f.A),f.A=null)}function gy(f){f.g=new ye(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var E=kr(f.qa);pt(E,"RID","rpc"),pt(E,"SID",f.K),pt(E,"AID",f.T),pt(E,"CI",f.F?"0":"1"),!f.F&&f.ja&&pt(E,"TO",f.ja),pt(E,"TYPE","xmlhttp"),Ja(f,E),f.m&&f.o&&Yh(E,f.m,f.o),f.L&&(f.g.I=f.L);var k=f.g;f=f.ia,k.L=1,k.v=bo(kr(E)),k.m=null,k.P=!0,qn(k,f)}t.Za=function(){this.C!=null&&(this.C=null,Xc(this),Xh(this),At(19))};function eu(f){f.C!=null&&(l.clearTimeout(f.C),f.C=null)}function yy(f,E){var k=null;if(f.g==E){eu(f),Zh(f),f.g=null;var U=2}else if(Ba(f.h,E))k=E.D,Ga(f.h,E),U=1;else return;if(f.G!=0){if(E.o)if(U==1){k=E.m?E.m.length:0,E=Date.now()-E.F;var Y=f.B;U=$r(),be(U,new Ti(U,k)),Zc(f)}else my(f);else if(Y=E.s,Y==3||Y==0&&0<E.X||!(U==1&&zk(f,E)||U==2&&Xh(f)))switch(k&&0<k.length&&(E=f.h,E.i=E.i.concat(k)),Y){case 1:Ni(f,5);break;case 4:Ni(f,10);break;case 3:Ni(f,6);break;default:Ni(f,2)}}}function vy(f,E){let k=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(k*=2),k*E}function Ni(f,E){if(f.j.info("Error code "+E),E==2){var k=g(f.fb,f),U=f.Xa;const Y=!U;U=new qr(U||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ci(U,"https"),bo(U),Y?jk(U.toString(),k):Lk(U.toString(),k)}else At(2);f.G=0,f.l&&f.l.sa(E),xy(f),hy(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function xy(f){if(f.G=0,f.ka=[],f.l){const E=Hc(f.h);(E.length!=0||f.i.length!=0)&&(b(f.ka,E),b(f.ka,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.ra()}}function wy(f,E,k){var U=k instanceof qr?kr(k):new qr(k);if(U.g!="")E&&(U.g=E+"."+U.g),_o(U,U.s);else{var Y=l.location;U=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;var ie=new qr(null);U&&Ci(ie,U),E&&(ie.g=E),Y&&_o(ie,Y),k&&(ie.l=k),U=ie}return k=f.D,E=f.ya,k&&E&&pt(U,k,E),pt(U,"VER",f.la),Ja(f,U),U}function _y(f,E,k){if(E&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=f.Ca&&!f.pa?new Nt(new Jc({eb:k})):new Nt(f.pa),E.Ha(f.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function by(){}t=by.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function tu(){}tu.prototype.g=function(f,E){return new Kn(f,E)};function Kn(f,E){re.call(this),this.g=new dy(E),this.l=f,this.h=E&&E.messageUrlParams||null,f=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(f?f["X-WebChannel-Content-Type"]=E.messageContentType:f={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(f?f["X-WebChannel-Client-Profile"]=E.va:f={"X-WebChannel-Client-Profile":E.va}),this.g.S=f,(f=E&&E.Sb)&&!_(f)&&(this.g.m=f),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!_(E)&&(this.g.D=E,f=this.h,f!==null&&E in f&&(f=this.h,E in f&&delete f[E])),this.j=new Eo(this)}w(Kn,re),Kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){Qh(this.g)},Kn.prototype.o=function(f){var E=this.g;if(typeof f=="string"){var k={};k.__data__=f,f=k}else this.u&&(k={},k.__data__=He(f),f=k);E.i.push(new Wh(E.Ya++,f)),E.G==3&&Zc(E)},Kn.prototype.N=function(){this.g.l=null,delete this.j,Qh(this.g),delete this.g,Kn.aa.N.call(this)};function Ey(f){Dn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var E=f.__sm__;if(E){e:{for(const k in E){f=k;break e}f=void 0}(this.i=f)&&(f=this.i,E=E!==null&&f in E?E[f]:void 0),this.data=E}else this.data=f}w(Ey,Dn);function Ty(){jn.call(this),this.status=1}w(Ty,jn);function Eo(f){this.g=f}w(Eo,by),Eo.prototype.ua=function(){be(this.g,"a")},Eo.prototype.ta=function(f){be(this.g,new Ey(f))},Eo.prototype.sa=function(f){be(this.g,new Ty)},Eo.prototype.ra=function(){be(this.g,"b")},tu.prototype.createWebChannel=tu.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,N1=function(){return new tu},A1=function(){return $r()},C1=lr,nm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},as.NO_ERROR=0,as.TIMEOUT=8,as.HTTP_ERROR=6,$u=as,Si.COMPLETE="complete",k1=Si,un.EventType=Ut,Ut.OPEN="a",Ut.CLOSE="b",Ut.ERROR="c",Ut.MESSAGE="d",re.prototype.listen=re.prototype.K,fl=un,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,S1=Nt}).apply(typeof wu<"u"?wu:typeof self<"u"?self:typeof window<"u"?window:{});const hx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ka="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new mh("@firebase/firestore");function sl(){return to.logLevel}function Ae(t,...e){if(to.logLevel<=Ye.DEBUG){const n=e.map(qg);to.debug(`Firestore (${ka}): ${t}`,...n)}}function Is(t,...e){if(to.logLevel<=Ye.ERROR){const n=e.map(qg);to.error(`Firestore (${ka}): ${t}`,...n)}}function fa(t,...e){if(to.logLevel<=Ye.WARN){const n=e.map(qg);to.warn(`Firestore (${ka}): ${t}`,...n)}}function qg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t="Unexpected state"){const e=`FIRESTORE (${ka}) INTERNAL ASSERTION FAILED: `+t;throw Is(e),new Error(e)}function ct(t,e){t||Ue()}function Ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends zr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vn.UNAUTHENTICATED))}shutdown(){}}class B4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class z4{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string"),new R1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string"),new vn(e)}}class G4{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $4{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new G4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ct(this.o===void 0);const r=i=>{i.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ct(typeof n.token=="string"),this.R=n.token,new H4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=W4(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function st(t,e){return t<e?-1:t>e?1:0}function pa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ie(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ie(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ie(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wt.fromMillis(Date.now())}static fromDate(e){return Wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Wt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new Wt(0,0))}static max(){return new Ge(new Wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ue(),r===void 0?r=e.length-n:r>e.length-n&&Ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return oc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _t extends oc{construct(e,n,r){return new _t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const K4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends oc{construct(e,n,r){return new sn(e,n,r)}static isValidIdentifier(e){return K4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new sn(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Ie(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ie(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ie(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Ie(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(n)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(_t.fromString(e))}static fromName(e){return new Me(_t.fromString(e).popFirst(5))}static empty(){return new Me(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new _t(e.slice()))}}function J4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ge.fromTimestamp(r===1e9?new Wt(n+1,0):new Wt(n,r));return new hi(s,Me.empty(),e)}function Y4(t){return new hi(t.readTime,t.key,-1)}class hi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hi(Ge.min(),Me.empty(),-1)}static max(){return new hi(Ge.max(),Me.empty(),-1)}}function Q4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(t.documentKey,e.documentKey),n!==0?n:st(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(t){if(t.code!==de.FAILED_PRECONDITION||t.message!==X4)throw t;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ge((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ge?n:ge.resolve(n)}catch(n){return ge.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.reject(n)}static resolve(e){return new ge((n,r)=>{n(e)})}static reject(e){return new ge((n,r)=>{r(e)})}static waitFor(e){return new ge((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=ge.resolve(!1);for(const r of e)n=n.next(s=>s?ge.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new ge((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++l,l===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new ge((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function eM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ec(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wg.oe=-1;function vh(t){return t==null}function Rd(t){return t===0&&1/t==-1/0}function tM(t){return typeof t=="number"&&Number.isInteger(t)&&!Rd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nM(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function M1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n){this.comparator=e,this.root=n||rn.EMPTY}insert(e,n){return new kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _u(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _u(this.root,e,this.comparator,!1)}getReverseIterator(){return new _u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _u(this.root,e,this.comparator,!0)}}class _u{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rn.RED,this.left=s??rn.EMPTY,this.right=i??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new rn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return rn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const e=this.left.check();if(e!==this.right.check())throw Ue();return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(e,n,r,s,i){return this}insert(e,n,r){return new rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new px(this.data.getIterator())}getIteratorFrom(e){return new px(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new an(this.comparator);return n.data=e,n}}class px{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new Xn([])}unionWith(e){let n=new an(sn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new D1("Invalid base64 string: "+i):i}}(e);return new cn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const rM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(t){if(ct(!!t),typeof t=="string"){let e=0;const n=rM.exec(t);if(ct(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mt(t.seconds),nanos:Mt(t.nanos)}}function Mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function no(t){return typeof t=="string"?cn.fromBase64String(t):cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jg(t){const e=t.mapValue.fields.__previous_value__;return Kg(e)?Jg(e):e}function ac(t){const e=fi(t.mapValue.fields.__local_write_time__.timestampValue);return new Wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,n,r,s,i,o,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class lc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new lc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof lc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu={mapValue:{}};function ro(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kg(t)?4:oM(t)?9007199254740991:iM(t)?10:11:Ue()}function is(t,e){if(t===e)return!0;const n=ro(t);if(n!==ro(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ac(t).isEqual(ac(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=fi(s.timestampValue),l=fi(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return no(s.bytesValue).isEqual(no(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Mt(s.geoPointValue.latitude)===Mt(i.geoPointValue.latitude)&&Mt(s.geoPointValue.longitude)===Mt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Mt(s.integerValue)===Mt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Mt(s.doubleValue),l=Mt(i.doubleValue);return o===l?Rd(o)===Rd(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return pa(t.arrayValue.values||[],e.arrayValue.values||[],is);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(fx(o)!==fx(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!is(o[c],l[c])))return!1;return!0}(t,e);default:return Ue()}}function cc(t,e){return(t.values||[]).find(n=>is(n,e))!==void 0}function ma(t,e){if(t===e)return 0;const n=ro(t),r=ro(e);if(n!==r)return st(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Mt(i.integerValue||i.doubleValue),c=Mt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return mx(t.timestampValue,e.timestampValue);case 4:return mx(ac(t),ac(e));case 5:return st(t.stringValue,e.stringValue);case 6:return function(i,o){const l=no(i),c=no(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=st(l[u],c[u]);if(d!==0)return d}return st(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=st(Mt(i.latitude),Mt(o.latitude));return l!==0?l:st(Mt(i.longitude),Mt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gx(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,u,d;const m=i.fields||{},g=o.fields||{},y=(l=m.value)===null||l===void 0?void 0:l.arrayValue,w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,x=st(((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:gx(y,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===bu.mapValue&&o===bu.mapValue)return 0;if(i===bu.mapValue)return 1;if(o===bu.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const g=st(c[m],d[m]);if(g!==0)return g;const y=ma(l[c[m]],u[d[m]]);if(y!==0)return y}return st(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Ue()}}function mx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return st(t,e);const n=fi(t),r=fi(e),s=st(n.seconds,r.seconds);return s!==0?s:st(n.nanos,r.nanos)}function gx(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ma(n[s],r[s]);if(i)return i}return st(n.length,r.length)}function ga(t){return rm(t)}function rm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return no(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=rm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${rm(n.fields[o])}`;return s+"}"}(t.mapValue):Ue()}function yx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sm(t){return!!t&&"integerValue"in t}function Yg(t){return!!t&&"arrayValue"in t}function vx(t){return!!t&&"nullValue"in t}function xx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hu(t){return!!t&&"mapValue"in t}function iM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Cl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Cl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cl(n)}setAll(e){let n=sn.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Cl(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Hu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return is(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Hu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){fo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Un(Cl(this.value))}}function j1(t){const e=[];return fo(t.fields,(n,r)=>{const s=new sn([n]);if(Hu(r)){const i=j1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new wn(e,0,Ge.min(),Ge.min(),Ge.min(),Un.empty(),0)}static newFoundDocument(e,n,r,s){return new wn(e,1,n,Ge.min(),r,s,0)}static newNoDocument(e,n){return new wn(e,2,n,Ge.min(),Ge.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new wn(e,3,n,Ge.min(),Ge.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){this.position=e,this.inclusive=n}}function wx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Me.comparator(Me.fromName(o.referenceValue),n.key):r=ma(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _x(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!is(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n="asc"){this.field=e,this.dir=n}}function aM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{}class zt extends L1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cM(e,n,r):n==="array-contains"?new hM(e,r):n==="in"?new fM(e,r):n==="not-in"?new pM(e,r):n==="array-contains-any"?new mM(e,r):new zt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uM(e,r):new dM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ma(n,this.value)):n!==null&&ro(this.value)===ro(n)&&this.matchesComparison(ma(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Br extends L1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Br(e,n)}matches(e){return F1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function F1(t){return t.op==="and"}function U1(t){return lM(t)&&F1(t)}function lM(t){for(const e of t.filters)if(e instanceof Br)return!1;return!0}function im(t){if(t instanceof zt)return t.field.canonicalString()+t.op.toString()+ga(t.value);if(U1(t))return t.filters.map(e=>im(e)).join(",");{const e=t.filters.map(n=>im(n)).join(",");return`${t.op}(${e})`}}function V1(t,e){return t instanceof zt?function(r,s){return s instanceof zt&&r.op===s.op&&r.field.isEqual(s.field)&&is(r.value,s.value)}(t,e):t instanceof Br?function(r,s){return s instanceof Br&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&V1(o,s.filters[l]),!0):!1}(t,e):void Ue()}function O1(t){return t instanceof zt?function(n){return`${n.field.canonicalString()} ${n.op} ${ga(n.value)}`}(t):t instanceof Br?function(n){return n.op.toString()+" {"+n.getFilters().map(O1).join(" ,")+"}"}(t):"Filter"}class cM extends zt{constructor(e,n,r){super(e,n,r),this.key=Me.fromName(r.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class uM extends zt{constructor(e,n){super(e,"in",n),this.keys=B1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dM extends zt{constructor(e,n){super(e,"not-in",n),this.keys=B1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function B1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Me.fromName(r.referenceValue))}class hM extends zt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yg(n)&&cc(n.arrayValue,this.value)}}class fM extends zt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cc(this.value.arrayValue,n)}}class pM extends zt{constructor(e,n){super(e,"not-in",n)}matches(e){if(cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!cc(this.value.arrayValue,n)}}class mM extends zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function bx(t,e=null,n=[],r=[],s=null,i=null,o=null){return new gM(t,e,n,r,s,i,o)}function Qg(t){const e=Ve(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>im(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ga(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ga(r)).join(",")),e.ue=n}return e.ue}function Xg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!V1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_x(t.startAt,e.startAt)&&_x(t.endAt,e.endAt)}function om(t){return Me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function yM(t,e,n,r,s,i,o,l){return new Ca(t,e,n,r,s,i,o,l)}function Zg(t){return new Ca(t)}function Ex(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function z1(t){return t.collectionGroup!==null}function Al(t){const e=Ve(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new an(sn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new uc(i,r))}),n.has(sn.keyField().canonicalString())||e.ce.push(new uc(sn.keyField(),r))}return e.ce}function es(t){const e=Ve(t);return e.le||(e.le=G1(e,Al(t))),e.le}function vM(t){const e=Ve(t);return e.he||(e.he=G1(e,t.explicitOrderBy)),e.he}function G1(t,e){if(t.limitType==="F")return bx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new uc(s.field,i)});const n=t.endAt?new Pd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pd(t.startAt.position,t.startAt.inclusive):null;return bx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function am(t,e){const n=t.filters.concat([e]);return new Ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Md(t,e,n){return new Ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xh(t,e){return Xg(es(t),es(e))&&t.limitType===e.limitType}function $1(t){return`${Qg(es(t))}|lt:${t.limitType}`}function ko(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>O1(s)).join(", ")}]`),vh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ga(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ga(s)).join(",")),`Target(${r})`}(es(t))}; limitType=${t.limitType})`}function wh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Me.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Al(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=wx(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Al(r),s)||r.endAt&&!function(o,l,c){const u=wx(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Al(r),s))}(t,e)}function xM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function H1(t){return(e,n)=>{let r=!1;for(const s of Al(t)){const i=wM(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function wM(t,e,n){const r=t.field.isKeyField()?Me.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?ma(c,u):Ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return M1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=new kt(Me.comparator);function Ss(){return _M}const q1=new kt(Me.comparator);function pl(...t){let e=q1;for(const n of t)e=e.insert(n.key,n);return e}function W1(t){let e=q1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Oi(){return Nl()}function K1(){return Nl()}function Nl(){return new Aa(t=>t.toString(),(t,e)=>t.isEqual(e))}const bM=new kt(Me.comparator),EM=new an(Me.comparator);function Je(...t){let e=EM;for(const n of t)e=e.add(n);return e}const TM=new an(st);function IM(){return TM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function J1(t){return{integerValue:""+t}}function Y1(t,e){return tM(e)?J1(e):e0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function SM(t,e,n){return t instanceof Dd?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Kg(i)&&(i=Jg(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof dc?X1(t,e):t instanceof hc?Z1(t,e):function(s,i){const o=Q1(s,i),l=Tx(o)+Tx(s.Pe);return sm(o)&&sm(s.Pe)?J1(l):e0(s.serializer,l)}(t,e)}function kM(t,e,n){return t instanceof dc?X1(t,e):t instanceof hc?Z1(t,e):n}function Q1(t,e){return t instanceof fc?function(r){return sm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Dd extends _h{}class dc extends _h{constructor(e){super(),this.elements=e}}function X1(t,e){const n=eI(e);for(const r of t.elements)n.some(s=>is(s,r))||n.push(r);return{arrayValue:{values:n}}}class hc extends _h{constructor(e){super(),this.elements=e}}function Z1(t,e){let n=eI(e);for(const r of t.elements)n=n.filter(s=>!is(s,r));return{arrayValue:{values:n}}}class fc extends _h{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Tx(t){return Mt(t.integerValue||t.doubleValue)}function eI(t){return Yg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,n){this.field=e,this.transform=n}}function AM(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof dc&&s instanceof dc||r instanceof hc&&s instanceof hc?pa(r.elements,s.elements,is):r instanceof fc&&s instanceof fc?is(r.Pe,s.Pe):r instanceof Dd&&s instanceof Dd}(t.transform,e.transform)}class NM{constructor(e,n){this.version=e,this.transformResults=n}}class An{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bh{}function tI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Eh(t.key,An.none()):new Tc(t.key,t.data,An.none());{const n=t.data,r=Un.empty();let s=new an(sn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new wi(t.key,r,new Xn(s.toArray()),An.none())}}function RM(t,e,n){t instanceof Tc?function(s,i,o){const l=s.value.clone(),c=Sx(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof wi?function(s,i,o){if(!qu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Sx(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(nI(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Rl(t,e,n,r){return t instanceof Tc?function(i,o,l,c){if(!qu(i.precondition,o))return l;const u=i.value.clone(),d=kx(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof wi?function(i,o,l,c){if(!qu(i.precondition,o))return l;const u=kx(i.fieldTransforms,c,o),d=o.data;return d.setAll(nI(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return qu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function PM(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Q1(r.transform,s||null);i!=null&&(n===null&&(n=Un.empty()),n.set(r.field,i))}return n||null}function Ix(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pa(r,s,(i,o)=>AM(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tc extends bh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class wi extends bh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Sx(t,e,n){const r=new Map;ct(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,kM(o,l,n[s]))}return r}function kx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,SM(i,o,e))}return r}class Eh extends bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MM extends bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&RM(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=K1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=tI(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Je())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,(n,r)=>Ix(n,r))&&pa(this.baseMutations,e.baseMutations,(n,r)=>Ix(n,r))}}class t0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ct(e.mutations.length===r.length);let s=function(){return bM}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new t0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,Xe;function UM(t){switch(t){default:return Ue();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function rI(t){if(t===void 0)return Is("GRPC error has no .code"),de.UNKNOWN;switch(t){case Ot.OK:return de.OK;case Ot.CANCELLED:return de.CANCELLED;case Ot.UNKNOWN:return de.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return de.INTERNAL;case Ot.UNAVAILABLE:return de.UNAVAILABLE;case Ot.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Ot.NOT_FOUND:return de.NOT_FOUND;case Ot.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Ot.ABORTED:return de.ABORTED;case Ot.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Ot.DATA_LOSS:return de.DATA_LOSS;default:return Ue()}}(Xe=Ot||(Ot={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=new Hi([4294967295,4294967295],0);function Cx(t){const e=VM().encode(t),n=new I1;return n.update(e),new Uint8Array(n.digest())}function Ax(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hi([n,r],0),new Hi([s,i],0)]}class n0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ml(`Invalid padding: ${n}`);if(r<0)throw new ml(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ml(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ml(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Hi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Hi.fromNumber(r)));return s.compare(OM)===1&&(s=new Hi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Cx(e),[r,s]=Ax(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new n0(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Cx(e),[r,s]=Ax(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Th(Ge.min(),s,new kt(st),Ss(),Je())}}class Ic{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ic(r,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class sI{constructor(e,n){this.targetId=e,this.me=n}}class iI{constructor(e,n,r=cn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Nx{constructor(){this.fe=0,this.ge=Px(),this.pe=cn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Je(),n=Je(),r=Je();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ue()}}),new Ic(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Px()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ct(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class BM{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ss(),this.qe=Rx(),this.Qe=new kt(st)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(om(i))if(r===0){const o=new Me(i.path);this.Ue(n,o,wn.newNoDocument(o,Ge.min()))}else ct(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=no(r).toUint8Array()}catch(c){if(c instanceof D1)return fa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new n0(o,s,i)}catch(c){return fa(c instanceof ml?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&om(l.target)){const c=new Me(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,wn.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Je();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Th(e,n,this.Qe,this.ke,r);return this.ke=Ss(),this.qe=Rx(),this.Qe=new kt(st),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Nx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new an(st),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ae("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Nx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Rx(){return new kt(Me.comparator)}function Px(){return new kt(Me.comparator)}const zM={asc:"ASCENDING",desc:"DESCENDING"},GM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$M={and:"AND",or:"OR"};class HM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lm(t,e){return t.useProto3Json||vh(e)?e:{value:e}}function jd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qM(t,e){return jd(t,e.toTimestamp())}function ts(t){return ct(!!t),Ge.fromTimestamp(function(n){const r=fi(n);return new Wt(r.seconds,r.nanos)}(t))}function r0(t,e){return cm(t,e).canonicalString()}function cm(t,e){const n=function(s){return new _t(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aI(t){const e=_t.fromString(t);return ct(fI(e)),e}function um(t,e){return r0(t.databaseId,e.path)}function Of(t,e){const n=aI(e);if(n.get(1)!==t.databaseId.projectId)throw new Ie(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ie(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Me(cI(n))}function lI(t,e){return r0(t.databaseId,e)}function WM(t){const e=aI(t);return e.length===4?_t.emptyPath():cI(e)}function dm(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cI(t){return ct(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Mx(t,e,n){return{name:um(t,e),fields:n.value.mapValue.fields}}function KM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(ct(d===void 0||typeof d=="string"),cn.fromBase64String(d||"")):(ct(d===void 0||d instanceof Buffer||d instanceof Uint8Array),cn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?de.UNKNOWN:rI(u.code);return new Ie(d,u.message||"")}(o);n=new iI(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Of(t,r.document.name),i=ts(r.document.updateTime),o=r.document.createTime?ts(r.document.createTime):Ge.min(),l=new Un({mapValue:{fields:r.document.fields}}),c=wn.newFoundDocument(s,i,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Wu(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Of(t,r.document),i=r.readTime?ts(r.readTime):Ge.min(),o=wn.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Wu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Of(t,r.document),i=r.removedTargetIds||[];n=new Wu([],i,s,null)}else{if(!("filter"in e))return Ue();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new FM(s,i),l=r.targetId;n=new sI(l,o)}}return n}function JM(t,e){let n;if(e instanceof Tc)n={update:Mx(t,e.key,e.value)};else if(e instanceof Eh)n={delete:um(t,e.key)};else if(e instanceof wi)n={update:Mx(t,e.key,e.data),updateMask:sD(e.fieldMask)};else{if(!(e instanceof MM))return Ue();n={verify:um(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Dd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof dc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof hc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof fc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:qM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ue()}(t,e.precondition)),n}function YM(t,e){return t&&t.length>0?(ct(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?ts(s.updateTime):ts(i);return o.isEqual(Ge.min())&&(o=ts(i)),new NM(o,s.transformResults||[])}(n,e))):[]}function QM(t,e){return{documents:[lI(t,e.path)]}}function uI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lI(t,s);const i=function(u){if(u.length!==0)return hI(Br.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:$s(g.field),direction:tD(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=lm(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function XM(t,e,n,r){const{_t:s,parent:i}=uI(t,e),o={},l=[];let c=0;return n.forEach(u=>{const d="aggregate_"+c++;o[d]=u.alias,u.aggregateType==="count"?l.push({alias:d,count:{}}):u.aggregateType==="avg"?l.push({alias:d,avg:{field:$s(u.fieldPath)}}):u.aggregateType==="sum"&&l.push({alias:d,sum:{field:$s(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function ZM(t){let e=WM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ct(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(m){const g=dI(m);return g instanceof Br&&U1(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(w){return new uc(Co(w.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,vh(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,y=m.values||[];return new Pd(y,g)}(n.startAt));let u=null;return n.endAt&&(u=function(m){const g=!m.before,y=m.values||[];return new Pd(y,g)}(n.endAt)),yM(e,s,o,i,l,"F",c,u)}function eD(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Co(n.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Co(n.unaryFilter.field);return zt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Co(n.unaryFilter.field);return zt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Co(n.unaryFilter.field);return zt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ue()}}(t):t.fieldFilter!==void 0?function(n){return zt.create(Co(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Br.create(n.compositeFilter.filters.map(r=>dI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ue()}}(n.compositeFilter.op))}(t):Ue()}function tD(t){return zM[t]}function nD(t){return GM[t]}function rD(t){return $M[t]}function $s(t){return{fieldPath:t.canonicalString()}}function Co(t){return sn.fromServerFormat(t.fieldPath)}function hI(t){return t instanceof zt?function(n){if(n.op==="=="){if(xx(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NAN"}};if(vx(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xx(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NAN"}};if(vx(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(n.field),op:nD(n.op),value:n.value}}}(t):t instanceof Br?function(n){const r=n.getFilters().map(s=>hI(s));return r.length===1?r[0]:{compositeFilter:{op:rD(n.op),filters:r}}}(t):Ue()}function sD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n,r,s,i=Ge.min(),o=Ge.min(),l=cn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.ct=e}}function oD(t){const e=ZM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Md(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(){this.un=new lD}addToCollectionParentIndex(e,n){return this.un.add(n),ge.resolve()}getCollectionParents(e,n){return ge.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ge.resolve()}deleteFieldIndex(e,n){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,n){return ge.resolve()}getDocumentsMatchingTarget(e,n){return ge.resolve(null)}getIndexType(e,n){return ge.resolve(0)}getFieldIndexes(e,n){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,n){return ge.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,n){return ge.resolve(hi.min())}updateCollectionGroup(e,n,r){return ge.resolve()}updateIndexEntries(e,n){return ge.resolve()}}class lD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new an(_t.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new an(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ya(0)}static kn(){return new ya(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.changes=new Aa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ge.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Rl(r.mutation,s,Xn.empty(),Wt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Je()){const s=Oi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=pl();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Je()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Ss();const o=Nl(),l=function(){return Nl()}();return n.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof wi)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Rl(d.mutation,u,d.mutation.getFieldMask(),Wt.now())):o.set(u.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var m;return l.set(u,new uD(d,(m=o.get(u))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Nl();let s=new kt((o,l)=>o-l),i=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Xn.empty();d=l.applyToLocalView(u,d),r.set(c,d);const m=(s.get(l.batchId)||Je()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,m=K1();d.forEach(g=>{if(!i.has(g)){const y=tI(n.get(g),r.get(g));y!==null&&m.set(g,y),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return ge.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):z1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):ge.resolve(Oi());let l=-1,c=i;return o.next(u=>ge.forEach(u,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?ge.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Je())).next(d=>({batchId:l,changes:W1(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next(r=>{let s=pl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=pl();return this.indexManager.getCollectionParents(e,i).next(l=>ge.forEach(l,c=>{const u=function(m,g){return new Ca(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,wn.newInvalidDocument(d)))});let l=pl();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&Rl(d.mutation,u,Xn.empty(),Wt.now()),wh(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ge.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ts(s.createTime)}}(n)),ge.resolve()}getNamedQuery(e,n){return ge.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:oD(s.bundledQuery),readTime:ts(s.readTime)}}(n)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(){this.overlays=new kt(Me.comparator),this.Ir=new Map}getOverlay(e,n){return ge.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Oi();return ge.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),ge.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),ge.resolve()}getOverlaysForCollection(e,n,r){const s=Oi(),i=n.length+1,o=new Me(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return ge.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new kt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=Oi(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Oi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return ge.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new jM(n,r));let i=this.Ir.get(n);i===void 0&&(i=Je(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(){this.Tr=new an(Jt.Er),this.dr=new an(Jt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Jt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Jt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Me(new _t([])),r=new Jt(n,e),s=new Jt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Me(new _t([])),r=new Jt(n,e),s=new Jt(n,e+1);let i=Je();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Jt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Me.comparator(e.key,n.key)||st(e.wr,n.wr)}static Ar(e,n){return st(e.wr,n.wr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new an(Jt.Er)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new DM(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Jt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ge.resolve(o)}lookupMutationBatch(e,n){return ge.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return ge.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Jt(n,0),s=new Jt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),ge.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new an(st);return n.forEach(s=>{const i=new Jt(s,0),o=new Jt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),ge.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Me.isDocumentKey(i)||(i=i.child(""));const o=new Jt(new Me(i),0);let l=new an(st);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.wr)),!0)},o),ge.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ct(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ge.forEach(n.mutations,s=>{const i=new Jt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Jt(n,0),s=this.br.firstAfterOrEqual(r);return ge.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.Mr=e,this.docs=function(){return new kt(Me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ge.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(n))}getEntries(e,n){let r=Ss();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():wn.newInvalidDocument(s))}),ge.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ss();const o=n.path,l=new Me(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Q4(Y4(d),r)<=0||(s.has(d.key)||wh(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return ge.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Ue()}Or(e,n){return ge.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new yD(this)}getSize(e){return ge.resolve(this.size)}}class yD extends cD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),ge.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.persistence=e,this.Nr=new Aa(n=>Qg(n),Xg),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new s0,this.targetCount=0,this.kr=ya.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ge.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ya(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ge.resolve()}updateTargetData(e,n){return this.Kn(n),ge.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ge.waitFor(i).next(()=>s)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ge.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ge.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),ge.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ge.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ge.resolve(r)}containsKey(e,n){return ge.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Wg(0),this.Kr=!1,this.Kr=!0,this.$r=new pD,this.referenceDelegate=e(this),this.Ur=new vD(this),this.indexManager=new aD,this.remoteDocumentCache=function(s){return new gD(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new iD(n),this.Gr=new hD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new mD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ae("MemoryPersistence","Starting transaction:",e);const s=new wD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return ge.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class wD extends Z4{constructor(e){super(),this.currentSequenceNumber=e}}class i0{constructor(e){this.persistence=e,this.Jr=new s0,this.Yr=null}static Zr(e){return new i0(e)}get Xr(){if(this.Yr)return this.Yr;throw Ue()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ge.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ge.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Xr,r=>{const s=Me.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Ge.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ge.or([()=>ge.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Je(),s=Je();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new o0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return eR()?8:eM(En())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new _D;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(sl()<=Ye.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",ko(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ge.resolve()):(sl()<=Ye.DEBUG&&Ae("QueryEngine","Query:",ko(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(sl()<=Ye.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",ko(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,es(n))):ge.resolve())}Yi(e,n){if(Ex(n))return ge.resolve(null);let r=es(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Md(n,null,"F"),r=es(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Je(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,l);return this.ns(n,u,o,c.readTime)?this.Yi(e,Md(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,s){return Ex(n)||s.isEqual(Ge.min())?ge.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?ge.resolve(null):(sl()<=Ye.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ko(n)),this.rs(e,o,n,J4(s,-1)).next(l=>l))})}ts(e,n){let r=new an(H1(e));return n.forEach((s,i)=>{wh(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return sl()<=Ye.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",ko(n)),this.Ji.getDocumentsMatchingQuery(e,n,hi.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new kt(st),this._s=new Aa(i=>Qg(i),Xg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function TD(t,e,n,r){return new ED(t,e,n,r)}async function pI(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=Je();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function ID(t,e){const n=Ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const m=u.batch,g=m.keys();let y=ge.resolve();return g.forEach(w=>{y=y.next(()=>d.getEntry(c,w)).next(x=>{const b=u.docVersions.get(w);ct(b!==null),x.version.compareTo(b)<0&&(m.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Je();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function mI(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function SD(t,e){const n=Ve(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((d,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,m)));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(cn.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),s=s.insert(m,y),function(x,b,v){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(g,y,d)&&l.push(n.Ur.updateTargetData(i,y))});let c=Ss(),u=Je();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(kD(i,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(Ge.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return ge.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.os=s,i))}function kD(t,e,n){let r=Je(),s=Je();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ss();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Ge.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Ae("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function CD(t,e){const n=Ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function AD(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,ge.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Qs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function hm(t,e,n){const r=Ve(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ec(o))throw o;Ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Dx(t,e,n){const r=Ve(t);let s=Ge.min(),i=Je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const m=Ve(c),g=m._s.get(d);return g!==void 0?ge.resolve(m.os.get(g)):m.Ur.getTargetData(u,d)}(r,o,es(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Ge.min(),n?i:Je())).next(l=>(ND(r,xM(e),l),{documents:l,Ts:i})))}function ND(t,e,n){let r=t.us.get(e)||Ge.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class jx{constructor(){this.activeTargetIds=IM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RD{constructor(){this.so=new jx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new jx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eu=null;function Bf(){return Eu===null?Eu=function(){return 268435456+Math.round(2147483648*Math.random())}():Eu++,"0x"+Eu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class jD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Bf(),c=this.xo(n,r.toUriEncodedString());Ae("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(n,c,u,s).then(d=>(Ae("RestConnection",`Received RPC '${n}' ${l}: `,d),d),d=>{throw fa("RestConnection",`RPC '${n}' ${l} failed with error: `,d,"url: ",c,"request:",s),d})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ka}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=MD[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Bf();return new Promise((o,l)=>{const c=new S1;c.setWithCredentials(!0),c.listenOnce(k1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case $u.NO_ERROR:const d=c.getResponseJson();Ae(yn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case $u.TIMEOUT:Ae(yn,`RPC '${e}' ${i} timed out`),l(new Ie(de.DEADLINE_EXCEEDED,"Request time out"));break;case $u.HTTP_ERROR:const m=c.getStatus();if(Ae(yn,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const w=function(b){const v=b.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(v)>=0?v:de.UNKNOWN}(y.status);l(new Ie(w,y.message))}else l(new Ie(de.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Ie(de.UNAVAILABLE,"Connection failed."));break;default:Ue()}}finally{Ae(yn,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);Ae(yn,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const s=Bf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=N1(),l=A1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");Ae(yn,`Creating RPC '${e}' stream ${s}: ${d}`,c);const m=o.createWebChannel(d,c);let g=!1,y=!1;const w=new DD({Io:b=>{y?Ae(yn,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(g||(Ae(yn,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Ae(yn,`RPC '${e}' stream ${s} sending:`,b),m.send(b))},To:()=>m.close()}),x=(b,v,_)=>{b.listen(v,T=>{try{_(T)}catch(R){setTimeout(()=>{throw R},0)}})};return x(m,fl.EventType.OPEN,()=>{y||(Ae(yn,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),x(m,fl.EventType.CLOSE,()=>{y||(y=!0,Ae(yn,`RPC '${e}' stream ${s} transport closed`),w.So())}),x(m,fl.EventType.ERROR,b=>{y||(y=!0,fa(yn,`RPC '${e}' stream ${s} transport errored:`,b),w.So(new Ie(de.UNAVAILABLE,"The operation could not be completed")))}),x(m,fl.EventType.MESSAGE,b=>{var v;if(!y){const _=b.data[0];ct(!!_);const T=_,R=T.error||((v=T[0])===null||v===void 0?void 0:v.error);if(R){Ae(yn,`RPC '${e}' stream ${s} received error:`,R);const j=R.status;let V=function(C){const A=Ot[C];if(A!==void 0)return rI(A)}(j),S=R.message;V===void 0&&(V=de.INTERNAL,S="Unknown error status: "+j+" with message "+R.message),y=!0,w.So(new Ie(V,S)),m.close()}else Ae(yn,`RPC '${e}' stream ${s} received:`,_),w.bo(_)}}),x(l,C1.STAT_EVENT,b=>{b.stat===nm.PROXY?Ae(yn,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===nm.NOPROXY&&Ae(yn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function zf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t){return new HM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===de.RESOURCE_EXHAUSTED?(Is(n.toString()),Is("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Ie(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LD extends yI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=KM(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ge.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ge.min():o.readTime?ts(o.readTime):Ge.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=dm(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=om(c)?{documents:QM(i,c)}:{query:uI(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=oI(i,o.resumeToken);const u=lm(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ge.min())>0){l.readTime=jd(i,o.snapshotVersion.toTimestamp());const u=lm(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=eD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=dm(this.serializer),n.removeTarget=e,this.a_(n)}}class FD extends yI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ct(!!e.streamToken),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=YM(e.writeResults,e.commitTime),r=ts(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=dm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>JM(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Ie(de.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,cm(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ie(de.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,cm(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(de.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class VD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Is(n),this.D_=!1):Ae("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{po(this)&&(Ae("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Ve(c);u.L_.add(4),await Sc(u),u.q_.set("Unknown"),u.L_.delete(4),await Sh(u)}(this))})}),this.q_=new VD(r,s)}}async function Sh(t){if(po(t))for(const e of t.B_)await e(!0)}async function Sc(t){for(const e of t.B_)await e(!1)}function vI(t,e){const n=Ve(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),u0(n)?c0(n):Na(n).r_()&&l0(n,e))}function a0(t,e){const n=Ve(t),r=Na(n);n.N_.delete(e),r.r_()&&xI(n,e),n.N_.size===0&&(r.r_()?r.o_():po(n)&&n.q_.set("Unknown"))}function l0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Na(t).A_(e)}function xI(t,e){t.Q_.xe(e),Na(t).R_(e)}function c0(t){t.Q_=new BM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Na(t).start(),t.q_.v_()}function u0(t){return po(t)&&!Na(t).n_()&&t.N_.size>0}function po(t){return Ve(t).L_.size===0}function wI(t){t.Q_=void 0}async function BD(t){t.q_.set("Online")}async function zD(t){t.N_.forEach((e,n)=>{l0(t,e)})}async function GD(t,e){wI(t),u0(t)?(t.q_.M_(e),c0(t)):t.q_.set("Unknown")}async function $D(t,e,n){if(t.q_.set("Online"),e instanceof iI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){Ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ld(t,r)}else if(e instanceof Wu?t.Q_.Ke(e):e instanceof sI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ge.min()))try{const r=await mI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.N_.get(u);d&&i.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=i.N_.get(c);if(!d)return;i.N_.set(c,d.withResumeToken(cn.EMPTY_BYTE_STRING,d.snapshotVersion)),xI(i,c);const m=new Qs(d.target,c,u,d.sequenceNumber);l0(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Ae("RemoteStore","Failed to raise snapshot:",r),await Ld(t,r)}}async function Ld(t,e,n){if(!Ec(e))throw e;t.L_.add(1),await Sc(t),t.q_.set("Offline"),n||(n=()=>mI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ae("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Sh(t)})}function _I(t,e){return e().catch(n=>Ld(t,n,e))}async function kh(t){const e=Ve(t),n=pi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;HD(e);)try{const s=await CD(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,qD(e,s)}catch(s){await Ld(e,s)}bI(e)&&EI(e)}function HD(t){return po(t)&&t.O_.length<10}function qD(t,e){t.O_.push(e);const n=pi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function bI(t){return po(t)&&!pi(t).n_()&&t.O_.length>0}function EI(t){pi(t).start()}async function WD(t){pi(t).p_()}async function KD(t){const e=pi(t);for(const n of t.O_)e.m_(n.mutations)}async function JD(t,e,n){const r=t.O_.shift(),s=t0.from(r,e,n);await _I(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await kh(t)}async function YD(t,e){e&&pi(t).V_&&await async function(r,s){if(function(o){return UM(o)&&o!==de.ABORTED}(s.code)){const i=r.O_.shift();pi(r).s_(),await _I(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await kh(r)}}(t,e),bI(t)&&EI(t)}async function Fx(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials");const r=po(n);n.L_.add(3),await Sc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Sh(n)}async function QD(t,e){const n=Ve(t);e?(n.L_.delete(2),await Sh(n)):e||(n.L_.add(2),await Sc(n),n.q_.set("Unknown"))}function Na(t){return t.K_||(t.K_=function(n,r,s){const i=Ve(n);return i.w_(),new LD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:BD.bind(null,t),Ro:zD.bind(null,t),mo:GD.bind(null,t),d_:$D.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),u0(t)?c0(t):t.q_.set("Unknown")):(await t.K_.stop(),wI(t))})),t.K_}function pi(t){return t.U_||(t.U_=function(n,r,s){const i=Ve(n);return i.w_(),new FD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WD.bind(null,t),mo:YD.bind(null,t),f_:KD.bind(null,t),g_:JD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await kh(t)):(await t.U_.stop(),t.O_.length>0&&(Ae("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new d0(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function h0(t,e){if(Is("AsyncQueue",`${e}: ${t}`),Ec(t))return new Ie(de.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Me.comparator(n.key,r.key):(n,r)=>Me.comparator(n.key,r.key),this.keyedMap=pl(),this.sortedSet=new kt(this.comparator)}static emptySet(e){return new Qo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.W_=new kt(Me.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ue():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class va{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new va(e,n,Qo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class ZD{constructor(){this.queries=Vx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Ve(n),i=s.queries;s.queries=Vx(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new Ie(de.ABORTED,"Firestore shutting down"))}}function Vx(){return new Aa(t=>$1(t),xh)}async function TI(t,e){const n=Ve(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new XD,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=h0(o,`Initialization of query '${ko(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&f0(n)}async function II(t,e){const n=Ve(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function e5(t,e){const n=Ve(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&f0(n)}function t5(t,e,n){const r=Ve(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function f0(t){t.Y_.forEach(e=>{e.next()})}var fm,Ox;(Ox=fm||(fm={})).ea="default",Ox.Cache="cache";class SI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new va(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==fm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.key=e}}class CI{constructor(e){this.key=e}}class n5{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Je(),this.mutatedKeys=Je(),this.Aa=H1(e),this.Ra=new Qo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Ux,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const g=s.get(d),y=wh(this.query,m)?m:null,w=!!g&&this.mutatedKeys.has(g.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let b=!1;g&&y?g.data.isEqual(y.data)?w!==x&&(r.track({type:3,doc:y}),b=!0):this.ga(g,y)||(r.track({type:2,doc:y}),b=!0,(c&&this.Aa(y,c)>0||u&&this.Aa(y,u)<0)&&(l=!0)):!g&&y?(r.track({type:0,doc:y}),b=!0):g&&!y&&(r.track({type:1,doc:g}),b=!0,(c||u)&&(l=!0)),b&&(y?(o=o.add(y),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,m)=>function(y,w){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue()}};return x(y)-x(w)}(d.type,m.type)||this.Aa(d.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new va(this.query,e.Ra,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ux,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Je(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new CI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new kI(r))}),n}ba(e){this.Ta=e.Ts,this.da=Je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return va.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class r5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class s5{constructor(e){this.key=e,this.va=!1}}class i5{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Aa(l=>$1(l),xh),this.Ma=new Map,this.xa=new Set,this.Oa=new kt(Me.comparator),this.Na=new Map,this.La=new s0,this.Ba={},this.ka=new Map,this.qa=ya.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function o5(t,e,n=!0){const r=DI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await AI(r,e,n,!0),s}async function a5(t,e){const n=DI(t);await AI(n,e,!0,!1)}async function AI(t,e,n,r){const s=await AD(t.localStore,es(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await l5(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&vI(t.remoteStore,s),l}async function l5(t,e,n,r,s){t.Ka=(m,g,y)=>async function(x,b,v,_){let T=b.view.ma(v);T.ns&&(T=await Dx(x.localStore,b.query,!1).then(({documents:S})=>b.view.ma(S,T)));const R=_&&_.targetChanges.get(b.targetId),j=_&&_.targetMismatches.get(b.targetId)!=null,V=b.view.applyChanges(T,x.isPrimaryClient,R,j);return zx(x,b.targetId,V.wa),V.snapshot}(t,m,g,y);const i=await Dx(t.localStore,e,!0),o=new n5(e,i.Ts),l=o.ma(i.documents),c=Ic.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);zx(t,n,u.wa);const d=new r5(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function c5(t,e,n){const r=Ve(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!xh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await hm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&a0(r.remoteStore,s.targetId),pm(r,s.targetId)}).catch(bc)):(pm(r,s.targetId),await hm(r.localStore,s.targetId,!0))}async function u5(t,e){const n=Ve(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),a0(n.remoteStore,r.targetId))}async function d5(t,e,n){const r=v5(t);try{const s=await function(o,l){const c=Ve(o),u=Wt.now(),d=l.reduce((y,w)=>y.add(w.key),Je());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Ss(),x=Je();return c.cs.getEntries(y,d).next(b=>{w=b,w.forEach((v,_)=>{_.isValidDocument()||(x=x.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,w)).next(b=>{m=b;const v=[];for(const _ of l){const T=PM(_,m.get(_.key).overlayedDocument);T!=null&&v.push(new wi(_.key,T,j1(T.value.mapValue),An.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,v,l)}).next(b=>{g=b;const v=b.applyToLocalDocumentSet(m,x);return c.documentOverlayCache.saveOverlays(y,b.batchId,v)})}).then(()=>({batchId:g.batchId,changes:W1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new kt(st)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(r,s.batchId,n),await kc(r,s.changes),await kh(r.remoteStore)}catch(s){const i=h0(s,"Failed to persist write");n.reject(i)}}async function NI(t,e){const n=Ve(t);try{const r=await SD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ct(o.va):s.removedDocuments.size>0&&(ct(o.va),o.va=!1))}),await kc(n,r,e)}catch(r){await bc(r)}}function Bx(t,e,n){const r=Ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Ve(o);c.onlineState=l;let u=!1;c.queries.forEach((d,m)=>{for(const g of m.j_)g.Z_(l)&&(u=!0)}),u&&f0(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function h5(t,e,n){const r=Ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new kt(Me.comparator);o=o.insert(i,wn.newNoDocument(i,Ge.min()));const l=Je().add(i),c=new Th(Ge.min(),new Map,new kt(st),o,l);await NI(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),p0(r)}else await hm(r.localStore,e,!1).then(()=>pm(r,e,n)).catch(bc)}async function f5(t,e){const n=Ve(t),r=e.batch.batchId;try{const s=await ID(n.localStore,e);PI(n,r,null),RI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kc(n,s)}catch(s){await bc(s)}}async function p5(t,e,n){const r=Ve(t);try{const s=await function(o,l){const c=Ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(m=>(ct(m!==null),d=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);PI(r,e,n),RI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await kc(r,s)}catch(s){await bc(s)}}function RI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function PI(t,e,n){const r=Ve(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function pm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||MI(t,r)})}function MI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(a0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),p0(t))}function zx(t,e,n){for(const r of n)r instanceof kI?(t.La.addReference(r.key,e),m5(t,r)):r instanceof CI?(Ae("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||MI(t,r.key)):Ue()}function m5(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ae("SyncEngine","New document in limbo: "+n),t.xa.add(r),p0(t))}function p0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Me(_t.fromString(e)),r=t.qa.next();t.Na.set(r,new s5(n)),t.Oa=t.Oa.insert(n,r),vI(t.remoteStore,new Qs(es(Zg(n.path)),r,"TargetPurposeLimboResolution",Wg.oe))}}async function kc(t,e,n){const r=Ve(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const m=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(u){s.push(u);const m=o0.Wi(c.targetId,u);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,u){const d=Ve(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>ge.forEach(u,g=>ge.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(m,g.targetId,y)).next(()=>ge.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(m,g.targetId,y)))))}catch(m){if(!Ec(m))throw m;Ae("LocalStore","Failed to update sequence numbers: "+m)}for(const m of u){const g=m.targetId;if(!m.fromCache){const y=d.os.get(g),w=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,x)}}}(r.localStore,i))}async function g5(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){Ae("SyncEngine","User change. New user:",e.toKey());const r=await pI(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new Ie(de.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await kc(n,r.hs)}}function y5(t,e){const n=Ve(t),r=n.Na.get(e);if(r&&r.va)return Je().add(r.key);{let s=Je();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function DI(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h5.bind(null,e),e.Ca.d_=e5.bind(null,e.eventManager),e.Ca.$a=t5.bind(null,e.eventManager),e}function v5(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p5.bind(null,e),e}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ih(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return TD(this.persistence,new bD,e.initialUser,this.serializer)}Ga(e){return new xD(i0.Zr,this.serializer)}Wa(e){return new RD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class mm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Bx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=g5.bind(null,this.syncEngine),await QD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ZD}()}createDatastore(e){const n=Ih(e.databaseInfo.databaseId),r=function(i){return new jD(i)}(e.databaseInfo);return function(i,o,l,c){return new UD(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new OD(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Bx(this.syncEngine,n,0),function(){return Lx.D()?new Lx:new PD}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,d){const m=new i5(s,i,o,l,c,u);return d&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ve(s);Ae("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Sc(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mm.provider={build:()=>new mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Is("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=vn.UNAUTHENTICATED,this.clientId=P1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Ae("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ae("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=h0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gf(t,e){t.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await pI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Gx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await w5(t);Ae("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Fx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Fx(e.remoteStore,s)),t._onlineComponents=e}async function w5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ae("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===de.FAILED_PRECONDITION||s.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fa("Error using user provided cache. Falling back to memory cache: "+n),await Gf(t,new Fd)}}else Ae("FirestoreClient","Using default OfflineComponentProvider"),await Gf(t,new Fd);return t._offlineComponents}async function m0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ae("FirestoreClient","Using user provided OnlineComponentProvider"),await Gx(t,t._uninitializedComponentsProvider._online)):(Ae("FirestoreClient","Using default OnlineComponentProvider"),await Gx(t,new mm))),t._onlineComponents}function _5(t){return m0(t).then(e=>e.syncEngine)}function b5(t){return m0(t).then(e=>e.datastore)}async function LI(t){const e=await m0(t),n=e.eventManager;return n.onListen=o5.bind(null,e.syncEngine),n.onUnlisten=c5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=a5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=u5.bind(null,e.syncEngine),n}function E5(t,e,n={}){const r=new Zr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const d=new jI({next:g=>{d.Za(),o.enqueueAndForget(()=>II(i,m));const y=g.docs.has(l);!y&&g.fromCache?u.reject(new Ie(de.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?u.reject(new Ie(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),m=new SI(Zg(l.path),d,{includeMetadataChanges:!0,_a:!0});return TI(i,m)}(await LI(t),t.asyncQueue,e,n,r)),r.promise}function T5(t,e,n={}){const r=new Zr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const d=new jI({next:g=>{d.Za(),o.enqueueAndForget(()=>II(i,m)),g.fromCache&&c.source==="server"?u.reject(new Ie(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),m=new SI(l,d,{includeMetadataChanges:!0,_a:!0});return TI(i,m)}(await LI(t),t.asyncQueue,e,n,r)),r.promise}function I5(t,e,n){const r=new Zr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await b5(t);r.resolve(async function(o,l,c){var u;const d=Ve(o),{request:m,ut:g,parent:y}=XM(d.serializer,vM(l),c);d.connection.Fo||delete m.parent;const w=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,y,m,1)).filter(b=>!!b.result);ct(w.length===1);const x=(u=w[0].result)===null||u===void 0?void 0:u.aggregateFields;return Object.keys(x).reduce((b,v)=>(b[g[v]]=x[v],b),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t,e,n){if(!n)throw new Ie(de.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function S5(t,e,n,r){if(e===!0&&r===!0)throw new Ie(de.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Hx(t){if(!Me.isDocumentKey(t))throw new Ie(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qx(t){if(Me.isDocumentKey(t))throw new Ie(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ch(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ue()}function rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ie(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ch(t);throw new Ie(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function k5(t,e){if(e<=0)throw new Ie(de.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ie(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ie(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ie(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ie(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ah{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new O4;switch(r.type){case"firstParty":return new $4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$x.get(n);r&&(Ae("ComponentProvider","Removing Datastore"),$x.delete(n),r.terminate())}(this),Promise.resolve()}}function C5(t,e,n,r={}){var s;const i=(t=rr(t,Ah))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=vn.MOCK_USER;else{l=KN(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Ie(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new vn(u)}t._authCredentials=new B4(new R1(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _i(this.firestore,e,this._query)}}class Nn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}}class ci extends _i{constructor(e,n,r){super(e,n,Zg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new Me(e))}withConverter(e){return new ci(this.firestore,e,this._path)}}function Ct(t,e,...n){if(t=Gt(t),UI("collection","path",e),t instanceof Ah){const r=_t.fromString(e,...n);return qx(r),new ci(t,null,r)}{if(!(t instanceof Nn||t instanceof ci))throw new Ie(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return qx(r),new ci(t.firestore,null,r)}}function Lt(t,e,...n){if(t=Gt(t),arguments.length===1&&(e=P1.newId()),UI("doc","path",e),t instanceof Ah){const r=_t.fromString(e,...n);return Hx(r),new Nn(t,null,new Me(r))}{if(!(t instanceof Nn||t instanceof ci))throw new Ie(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return Hx(r),new Nn(t.firestore,t instanceof ci?t.converter:null,new Me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gI(this,"async_queue_retry"),this.Vu=()=>{const r=zf();r&&Ae("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=zf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=zf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Zr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ec(e))throw e;Ae("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Is("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=d0.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Ps extends Ah{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Kx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kx(e),this._firestoreClient=void 0,await e}}}function A5(t,e){const n=typeof t=="object"?t:Og(),r=typeof t=="string"?t:"(default)",s=ho(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=qN("firestore");i&&C5(s,...i)}return s}function Cc(t){if(t._terminated)throw new Ie(de.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||N5(t),t._firestoreClient}function N5(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,u,d){return new sM(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,FI(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new x5(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class P5{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xa(cn.fromBase64String(e))}catch(n){throw new Ie(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xa(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ie(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ie(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ie(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=/^__.*__$/;class D5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tc(e,this.data,n,this.fieldTransforms)}}class VI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new wi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function OI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue()}}class v0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new v0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ud(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(OI(this.Cu)&&M5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class j5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ih(e)}Qu(e,n,r,s=!1){return new v0({Cu:e,methodName:n,qu:r,path:sn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nc(t){const e=t._freezeSettings(),n=Ih(t._databaseId);return new j5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function x0(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);_0("Data must be an object, but it was:",o,r);const l=GI(r,o);let c,u;if(i.merge)c=new Xn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const g=gm(e,m,n);if(!o.contains(g))throw new Ie(de.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);HI(d,g)||d.push(g)}c=new Xn(d),u=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=o.fieldTransforms;return new D5(new Un(l),c,u)}class Rh extends Nh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rh}}class w0 extends Nh{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new fc(e.serializer,Y1(e.serializer,this.$u));return new CM(e.path,n)}isEqual(e){return e instanceof w0&&this.$u===e.$u}}function BI(t,e,n,r){const s=t.Qu(1,e,n);_0("Data must be an object, but it was:",s,r);const i=[],o=Un.empty();fo(r,(c,u)=>{const d=b0(e,c,n);u=Gt(u);const m=s.Nu(d);if(u instanceof Rh)i.push(d);else{const g=Rc(u,m);g!=null&&(i.push(d),o.set(d,g))}});const l=new Xn(i);return new VI(o,l,s.fieldTransforms)}function zI(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[gm(e,r,n)],c=[s];if(i.length%2!=0)throw new Ie(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(gm(e,i[g])),c.push(i[g+1]);const u=[],d=Un.empty();for(let g=l.length-1;g>=0;--g)if(!HI(u,l[g])){const y=l[g];let w=c[g];w=Gt(w);const x=o.Nu(y);if(w instanceof Rh)u.push(y);else{const b=Rc(w,x);b!=null&&(u.push(y),d.set(y,b))}}const m=new Xn(u);return new VI(d,m,o.fieldTransforms)}function L5(t,e,n,r=!1){return Rc(n,t.Qu(r?4:3,e))}function Rc(t,e){if($I(t=Gt(t)))return _0("Unsupported field value:",e,t),GI(t,e);if(t instanceof Nh)return function(r,s){if(!OI(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=Rc(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Y1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Wt.fromDate(r);return{timestampValue:jd(s.serializer,i)}}if(r instanceof Wt){const i=new Wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jd(s.serializer,i)}}if(r instanceof g0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xa)return{bytesValue:oI(s.serializer,r._byteString)};if(r instanceof Nn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:r0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof y0)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return e0(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Ch(r)}`)}(t,e)}function GI(t,e){const n={};return M1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(t,(r,s)=>{const i=Rc(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function $I(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Wt||t instanceof g0||t instanceof xa||t instanceof Nn||t instanceof Nh||t instanceof y0)}function _0(t,e,n){if(!$I(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ch(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function gm(t,e,n){if((e=Gt(e))instanceof Ac)return e._internalPath;if(typeof e=="string")return b0(t,e);throw Ud("Field path arguments must be of type string or ",t,!1,void 0,n)}const F5=new RegExp("[~\\*/\\[\\]]");function b0(t,e,n){if(e.search(F5)>=0)throw Ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ac(...e.split("."))._internalPath}catch{throw Ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ud(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Ie(de.INVALID_ARGUMENT,l+t+c)}function HI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new U5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ph("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class U5 extends qI{data(){return super.data()}}function Ph(t,e){return typeof e=="string"?b0(t,e):e instanceof Ac?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ie(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E0{}class T0 extends E0{}function sr(t,e,...n){let r=[];e instanceof E0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof I0).length,l=i.filter(c=>c instanceof Mh).length;if(o>1||o>0&&l>0)throw new Ie(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Mh extends T0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mh(e,n,r)}_apply(e){const n=this._parse(e);return WI(e._query,n),new _i(e.firestore,e.converter,am(e._query,n))}_parse(e){const n=Nc(e.firestore);return function(i,o,l,c,u,d,m){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ie(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Yx(m,d);const y=[];for(const w of m)y.push(Jx(c,i,w));g={arrayValue:{values:y}}}else g=Jx(c,i,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Yx(m,d),g=L5(l,o,m,d==="in"||d==="not-in");return zt.create(u,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function so(t,e,n){const r=e,s=Ph("where",t);return Mh._create(s,r,n)}class I0 extends E0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new I0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)WI(o,c),o=am(o,c)}(e._query,n),new _i(e.firestore,e.converter,am(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class S0 extends T0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new S0(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Ie(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ie(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uc(i,o)}(e._query,this._field,this._direction);return new _i(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ca(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function wa(t,e="asc"){const n=e,r=Ph("orderBy",t);return S0._create(r,n)}class k0 extends T0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new k0(e,n,r)}_apply(e){return new _i(e.firestore,e.converter,Md(e._query,this._limit,this._limitType))}}function io(t){return k5("limit",t),k0._create("limit",t,"F")}function Jx(t,e,n){if(typeof(n=Gt(n))=="string"){if(n==="")throw new Ie(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z1(e)&&n.indexOf("/")!==-1)throw new Ie(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_t.fromString(n));if(!Me.isDocumentKey(r))throw new Ie(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yx(t,new Me(r))}if(n instanceof Nn)return yx(t,n._key);throw new Ie(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ch(n)}.`)}function Yx(t,e){if(!Array.isArray(t)||t.length===0)throw new Ie(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WI(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ie(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ie(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class O5{convertValue(e,n="none"){switch(ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(no(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Mt(o.doubleValue));return new y0(i)}convertGeoPoint(e){return new g0(Mt(e.latitude),Mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ac(e));default:return null}}convertTimestamp(e){const n=fi(e);return new Wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_t.fromString(e);ct(fI(r));const s=new lc(r.get(1),r.get(3)),i=new Me(r.popFirst(5));return s.isEqual(n)||Is(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function B5(){return new R5("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class KI extends qI{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ph("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ku extends KI{data(e={}){return super.data(e)}}class z5{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new gl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ku(this._firestore,this._userDataWriter,r.key,r,new gl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ie(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Ku(s._firestore,s._userDataWriter,l.doc.key,l.doc,new gl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Ku(s._firestore,s._userDataWriter,l.doc.key,l.doc,new gl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:G5(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function G5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t){t=rr(t,Nn);const e=rr(t.firestore,Ps);return E5(Cc(e),t._key).then(n=>$5(e,t,n))}class N0 extends O5{constructor(e){super(),this.firestore=e}convertBytes(e){return new xa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,n)}}function ir(t){t=rr(t,_i);const e=rr(t.firestore,Ps),n=Cc(e),r=new N0(e);return V5(t._query),T5(n,t._query).then(s=>new z5(e,r,t,s))}function Dh(t,e,n){t=rr(t,Nn);const r=rr(t.firestore,Ps),s=C0(t.converter,e,n);return Mc(r,[x0(Nc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,An.none())])}function Ra(t,e,n,...r){t=rr(t,Nn);const s=rr(t.firestore,Ps),i=Nc(s);let o;return o=typeof(e=Gt(e))=="string"||e instanceof Ac?zI(i,"updateDoc",t._key,e,n,r):BI(i,"updateDoc",t._key,e),Mc(s,[o.toMutation(t._key,An.exists(!0))])}function Pc(t){return Mc(rr(t.firestore,Ps),[new Eh(t._key,An.none())])}function mo(t,e){const n=rr(t.firestore,Ps),r=Lt(t),s=C0(t.converter,e);return Mc(n,[x0(Nc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,An.exists(!1))]).then(()=>r)}function Mc(t,e){return function(r,s){const i=new Zr;return r.asyncQueue.enqueueAndForget(async()=>d5(await _5(r),s,i)),i.promise}(Cc(t),e)}function $5(t,e,n){const r=n.docs.get(e._key),s=new N0(t);return new KI(t,s,e._key,r,new gl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){return H5(t,{count:B5()})}function H5(t,e){const n=rr(t.firestore,Ps),r=Cc(n),s=nM(e,(i,o)=>new LM(o,i.aggregateType,i._internalFieldPath));return I5(r,t._query,s).then(i=>function(l,c,u){const d=new N0(l);return new P5(c,d,u)}(n,t,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Nc(e)}set(e,n,r){this._verifyNotCommitted();const s=$f(e,this._firestore),i=C0(s.converter,n,r),o=x0(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,An.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=$f(e,this._firestore);let o;return o=typeof(n=Gt(n))=="string"||n instanceof Ac?zI(this._dataReader,"WriteBatch.update",i._key,n,r,s):BI(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,An.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$f(e,this._firestore);return this._mutations=this._mutations.concat(new Eh(n._key,An.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $f(t,e){if((t=Gt(t)).firestore!==e)throw new Ie(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function ym(t){return new w0("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){return Cc(t=rr(t,Ps)),new q5(t,e=>Mc(t,e))}(function(e,n=!0){(function(s){ka=s})(Sa),ss(new Or("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Ps(new z4(r.getProvider("auth-internal")),new q4(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ie(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lc(u.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),yr(hx,"4.7.3",e),yr(hx,"4.7.3","esm2017")})();function P0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function JI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W5=JI,YI=new uo("auth","Firebase",JI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new mh("@firebase/auth");function K5(t,...e){Vd.logLevel<=Ye.WARN&&Vd.warn(`Auth (${Sa}): ${t}`,...e)}function Ju(t,...e){Vd.logLevel<=Ye.ERROR&&Vd.error(`Auth (${Sa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(t,...e){throw D0(t,...e)}function jr(t,...e){return D0(t,...e)}function M0(t,e,n){const r=Object.assign(Object.assign({},W5()),{[e]:n});return new uo("auth","Firebase",r).create(e,{appName:t.name})}function qi(t){return M0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function J5(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&os(t,"argument-error"),M0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function D0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return YI.create(t,...e)}function Fe(t,e,...n){if(!t)throw D0(e,...n)}function gs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ju(e),new Error(e)}function ks(t,e){t||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Y5(){return Qx()==="http:"||Qx()==="https:"}function Qx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y5()||KT()||"connection"in navigator)?navigator.onLine:!0}function X5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ks(n>e,"Short delay should be less than long delay!"),this.isMobile=JN()||XN()}get(){return Q5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t,e){ks(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=new jc(3e4,6e4);function L0(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pa(t,e,n,r,s={}){return XI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=_c(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return QN()||(u.referrerPolicy="no-referrer"),QI.fetch()(ZI(t,t.config.apiHost,n,l),u)})}async function XI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Z5),e);try{const s=new nj(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Tu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tu(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Tu(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Tu(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw M0(t,d,u);os(t,d)}}catch(s){if(s instanceof zr)throw s;os(t,"network-request-failed",{message:String(s)})}}async function tj(t,e,n,r,s={}){const i=await Pa(t,e,n,r,s);return"mfaPendingCredential"in i&&os(t,"multi-factor-auth-required",{_serverResponse:i}),i}function ZI(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?j0(t.config,s):`${t.config.apiScheme}://${s}`}class nj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jr(this.auth,"network-request-failed")),ej.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Tu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=jr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rj(t,e){return Pa(t,"POST","/v1/accounts:delete",e)}async function eS(t,e){return Pa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sj(t,e=!1){const n=Gt(t),r=await n.getIdToken(e),s=F0(r);Fe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Pl(Hf(s.auth_time)),issuedAtTime:Pl(Hf(s.iat)),expirationTime:Pl(Hf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Hf(t){return Number(t)*1e3}function F0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ju("JWT malformed, contained fewer than 3 sections"),null;try{const s=$T(n);return s?JSON.parse(s):(Ju("Failed to decode base64 JWT payload"),null)}catch(s){return Ju("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Xx(t){const e=F0(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zr&&ij(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ij({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pl(this.lastLoginAt),this.creationTime=Pl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Od(t){var e;const n=t.auth,r=await t.getIdToken(),s=await pc(t,eS(n,{idToken:r}));Fe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?tS(i.providerUserInfo):[],l=lj(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new xm(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function aj(t){const e=Gt(t);await Od(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function tS(t){return t.map(e=>{var{providerId:n}=e,r=P0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cj(t,e){const n=await XI(t,{},async()=>{const r=_c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=ZI(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",QI.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uj(t,e){return Pa(t,"POST","/v2/accounts:revokeToken",L0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=Xx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await cj(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Xo;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Fe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Fe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xo,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ys{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=P0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await pc(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sj(this,e)}reload(){return aj(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ys(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Od(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ms(this.auth.app))return Promise.reject(qi(this.auth));const e=await this.getIdToken();return await pc(this,rj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,u,d;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(l=n.tenantId)!==null&&l!==void 0?l:void 0,b=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,_=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:R,isAnonymous:j,providerData:V,stsTokenManager:S}=n;Fe(T&&S,e,"internal-error");const I=Xo.fromJSON(this.name,S);Fe(typeof T=="string",e,"internal-error"),Vs(m,e.name),Vs(g,e.name),Fe(typeof R=="boolean",e,"internal-error"),Fe(typeof j=="boolean",e,"internal-error"),Vs(y,e.name),Vs(w,e.name),Vs(x,e.name),Vs(b,e.name),Vs(v,e.name),Vs(_,e.name);const C=new ys({uid:T,auth:e,email:g,emailVerified:R,displayName:m,isAnonymous:j,photoURL:w,phoneNumber:y,tenantId:x,stsTokenManager:I,createdAt:v,lastLoginAt:_});return V&&Array.isArray(V)&&(C.providerData=V.map(A=>Object.assign({},A))),b&&(C._redirectEventId=b),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new Xo;s.updateFromServerResponse(n);const i=new ys({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Od(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Fe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?tS(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Xo;l.updateFromIdToken(r);const c=new ys({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new xm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new Map;function vs(t){ks(t instanceof Function,"Expected a class definition");let e=Zx.get(t);return e?(ks(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Zx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nS.type="NONE";const ew=nS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t,e,n){return`firebase:${t}:${e}:${n}`}class Zo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Yu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Yu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ys._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zo(vs(ew),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||vs(ew);const o=Yu(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){const m=ys._fromJSON(e,d);u!==i&&(l=m),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Zo(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Zo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lS(e))return"Blackberry";if(cS(e))return"Webos";if(sS(e))return"Safari";if((e.includes("chrome/")||iS(e))&&!e.includes("edge/"))return"Chrome";if(aS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rS(t=En()){return/firefox\//i.test(t)}function sS(t=En()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iS(t=En()){return/crios\//i.test(t)}function oS(t=En()){return/iemobile/i.test(t)}function aS(t=En()){return/android/i.test(t)}function lS(t=En()){return/blackberry/i.test(t)}function cS(t=En()){return/webos/i.test(t)}function U0(t=En()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dj(t=En()){var e;return U0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hj(){return ZN()&&document.documentMode===10}function uS(t=En()){return U0(t)||aS(t)||cS(t)||lS(t)||/windows phone/i.test(t)||oS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t,e=[]){let n;switch(t){case"Browser":n=tw(En());break;case"Worker":n=`${tw(En())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pj(t,e={}){return Pa(t,"GET","/v2/passwordPolicy",L0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=6;class gj{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:mj,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nw(this),this.idTokenSubscription=new nw(this),this.beforeStateQueue=new fj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vs(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Zo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await eS(this,{idToken:e}),r=await ys._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ms(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Od(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=X5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ms(this.app))return Promise.reject(qi(this));const n=e?Gt(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ms(this.app)?Promise.reject(qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ms(this.app)?Promise.reject(qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pj(this),n=new gj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new uo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vs(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[vs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&K5(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function jh(t){return Gt(t)}class nw{constructor(e){this.auth=e,this.observer=null,this.addObserver=oR(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vj(t){V0=t}function xj(t){return V0.loadJS(t)}function wj(){return V0.gapiScript}function _j(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t,e){const n=ho(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(sc(i,e??{}))return s;os(s,"already-initialized")}return n.initialize({options:e})}function Ej(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Tj(t,e,n){const r=jh(t);Fe(r._canInitEmulator,r,"emulator-config-failed"),Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=hS(e),{host:o,port:l}=Ij(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Sj()}function hS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ij(t){const e=hS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:rw(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:rw(o)}}}function rw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Sj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,n){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(t,e){return tj(t,"POST","/v1/accounts:signInWithIdp",L0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="http://localhost";class oo extends fS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):os("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=P0(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new oo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ea(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ea(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ea(e,n)}buildRequest(){const e={requestUri:kj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_c(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends O0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Lc{constructor(){super("facebook.com")}static credential(e){return oo._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oo._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return hs.credential(n,r)}catch{return null}}}hs.GOOGLE_SIGN_IN_METHOD="google.com";hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Lc{constructor(){super("github.com")}static credential(e){return oo._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.GITHUB_SIGN_IN_METHOD="github.com";qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends Lc{constructor(){super("twitter.com")}static credential(e,n){return oo._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ws.credential(n,r)}catch{return null}}}Ws.TWITTER_SIGN_IN_METHOD="twitter.com";Ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ys._fromIdTokenResponse(e,r,s),o=sw(r);return new _a({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=sw(r);return new _a({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function sw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends zr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Bd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Bd(e,n,r,s)}}function pS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Bd._fromErrorAndOperation(t,i,e,r):i})}async function Cj(t,e,n=!1){const r=await pc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _a._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aj(t,e,n=!1){const{auth:r}=t;if(ms(r.app))return Promise.reject(qi(r));const s="reauthenticate";try{const i=await pc(t,pS(r,s,e,t),n);Fe(i.idToken,r,"internal-error");const o=F0(i.idToken);Fe(o,r,"internal-error");const{sub:l}=o;return Fe(t.uid===l,r,"user-mismatch"),_a._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&os(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nj(t,e,n=!1){if(ms(t.app))return Promise.reject(qi(t));const r="signIn",s=await pS(t,r,e),i=await _a._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function Rj(t,e,n,r){return Gt(t).onIdTokenChanged(e,n,r)}function Pj(t,e,n){return Gt(t).beforeAuthStateChanged(e,n)}function Mj(t){return Gt(t).signOut()}const zd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zd,"1"),this.storage.removeItem(zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=1e3,jj=10;class gS extends mS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);hj()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,jj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Dj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gS.type="LOCAL";const Lj=gS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS extends mS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yS.type="SESSION";const vS=yS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Lh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await Fj(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=B0("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(){return window}function Vj(t){ns().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(){return typeof ns().WorkerGlobalScope<"u"&&typeof ns().importScripts=="function"}async function Oj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Bj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function zj(){return xS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="firebaseLocalStorageDb",Gj=1,Gd="firebaseLocalStorage",_S="fbase_key";class Fc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fh(t,e){return t.transaction([Gd],e?"readwrite":"readonly").objectStore(Gd)}function $j(){const t=indexedDB.deleteDatabase(wS);return new Fc(t).toPromise()}function wm(){const t=indexedDB.open(wS,Gj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gd,{keyPath:_S})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gd)?e(r):(r.close(),await $j(),e(await wm()))})})}async function iw(t,e,n){const r=Fh(t,!0).put({[_S]:e,value:n});return new Fc(r).toPromise()}async function Hj(t,e){const n=Fh(t,!1).get(e),r=await new Fc(n).toPromise();return r===void 0?null:r.value}function ow(t,e){const n=Fh(t,!0).delete(e);return new Fc(n).toPromise()}const qj=800,Wj=3;class bS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Wj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lh._getInstance(zj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Oj(),!this.activeServiceWorker)return;this.sender=new Uj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Bj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wm();return await iw(e,zd,"1"),await ow(e,zd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>iw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Hj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ow(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Fh(s,!1).getAll();return new Fc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bS.type="LOCAL";const Kj=bS;new jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t,e){return e?vs(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends fS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ea(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ea(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Jj(t){return Nj(t.auth,new z0(t),t.bypassAuthState)}function Yj(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),Aj(n,new z0(t),t.bypassAuthState)}async function Qj(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),Cj(n,new z0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jj;case"linkViaPopup":case"linkViaRedirect":return Qj;case"reauthViaPopup":case"reauthViaRedirect":return Yj;default:os(this.auth,"internal-error")}}resolve(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=new jc(2e3,1e4);async function Zj(t,e,n){if(ms(t.app))return Promise.reject(jr(t,"operation-not-supported-in-this-environment"));const r=jh(t);J5(t,e,O0);const s=ES(r,n);return new Bi(r,"signInViaPopup",e,s).executeNotNull()}class Bi extends TS{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Bi.currentPopupAction&&Bi.currentPopupAction.cancel(),Bi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){ks(this.filter.length===1,"Popup operations only handle one event");const e=B0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Xj.get())};e()}}Bi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL="pendingRedirect",Qu=new Map;class tL extends TS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Qu.get(this.auth._key());if(!e){try{const r=await nL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qu.set(this.auth._key(),e)}return this.bypassAuthState||Qu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nL(t,e){const n=iL(e),r=sL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function rL(t,e){Qu.set(t._key(),e)}function sL(t){return vs(t._redirectPersistence)}function iL(t){return Yu(eL,t.config.apiKey,t.name)}async function oL(t,e,n=!1){if(ms(t.app))return Promise.reject(qi(t));const r=jh(t),s=ES(r,e),o=await new tL(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=10*60*1e3;class lL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!IS(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(jr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aL&&this.cachedEventUids.clear(),this.cachedEventUids.has(aw(e))}saveEventToCache(e){this.cachedEventUids.add(aw(e)),this.lastProcessedEventTime=Date.now()}}function aw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(t,e={}){return Pa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hL=/^https?/;async function fL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await uL(t);for(const n of e)try{if(pL(n))return}catch{}os(t,"unauthorized-domain")}function pL(t){const e=vm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!hL.test(n))return!1;if(dL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=new jc(3e4,6e4);function lw(){const t=ns().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gL(t){return new Promise((e,n)=>{var r,s,i;function o(){lw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lw(),n(jr(t,"network-request-failed"))},timeout:mL.get()})}if(!((s=(r=ns().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ns().gapi)===null||i===void 0)&&i.load)o();else{const l=_j("iframefcb");return ns()[l]=()=>{gapi.load?o():n(jr(t,"network-request-failed"))},xj(`${wj()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Xu=null,e})}let Xu=null;function yL(t){return Xu=Xu||gL(t),Xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=new jc(5e3,15e3),xL="__/auth/iframe",wL="emulator/auth/iframe",_L={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EL(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?j0(e,wL):`https://${t.config.authDomain}/${xL}`,r={apiKey:e.apiKey,appName:t.name,v:Sa},s=bL.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${_c(r).slice(1)}`}async function TL(t){const e=await yL(t),n=ns().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:EL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_L,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=jr(t,"network-request-failed"),l=ns().setTimeout(()=>{i(o)},vL.get());function c(){ns().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SL=500,kL=600,CL="_blank",AL="http://localhost";class cw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NL(t,e,n,r=SL,s=kL){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},IL),{width:r.toString(),height:s.toString(),top:i,left:o}),u=En().toLowerCase();n&&(l=iS(u)?CL:n),rS(u)&&(e=e||AL,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(dj(u)&&l!=="_self")return RL(e||"",l),new cw(null);const m=window.open(e||"",l,d);Fe(m,t,"popup-blocked");try{m.focus()}catch{}return new cw(m)}function RL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL="__/auth/handler",ML="emulator/auth/handler",DL=encodeURIComponent("fac");async function uw(t,e,n,r,s,i){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Sa,eventId:s};if(e instanceof O0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",iR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof Lc){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${DL}=${encodeURIComponent(c)}`:"";return`${jL(t)}?${_c(l).slice(1)}${u}`}function jL({config:t}){return t.emulator?j0(t,ML):`https://${t.authDomain}/${PL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="webStorageSupport";class LL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vS,this._completeRedirectFn=oL,this._overrideRedirectResult=rL}async _openPopup(e,n,r,s){var i;ks((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await uw(e,n,r,vm(),s);return NL(e,o,B0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await uw(e,n,r,vm(),s);return Vj(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ks(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await TL(e),r=new lL(e);return n.register("authEvent",s=>(Fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qf,{type:qf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[qf];o!==void 0&&n(!!o),os(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uS()||sS()||U0()}}const FL=LL;var dw="@firebase/auth",hw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OL(t){ss(new Or("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dS(t)},u=new yj(r,s,i,c);return Ej(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ss(new Or("auth-internal",e=>{const n=jh(e.getProvider("auth").getImmediate());return(r=>new UL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(dw,hw,VL(t)),yr(dw,hw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=5*60,zL=WT("authIdTokenMaxAge")||BL;let fw=null;const GL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>zL)return;const s=n==null?void 0:n.token;fw!==s&&(fw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $L(t=Og()){const e=ho(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bj(t,{popupRedirectResolver:FL,persistence:[Kj,Lj,vS]}),r=WT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=GL(i.toString());Pj(n,o,()=>o(n.currentUser)),Rj(n,l=>o(l))}}const s=HT("auth");return s&&Tj(n,`http://${s}`),n}function HL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=jr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",HL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OL("Browser");const qL={apiKey:"AIzaSyDjgrBvKUaVg9U1XustHj9TeO4lHZDrcNg",authDomain:"fanra-dev.firebaseapp.com",projectId:"fanra-dev",storageBucket:"fanra-dev.firebasestorage.app",messagingSenderId:"664735861834",appId:"1:664735861834:web:6519570201553dbe4faab3",measurementId:"G-HMKEVZS65H"},G0=e1(qL);L4(G0);const ze=A5(G0),SS=$L(G0),WL=new hs,Ma="users",kS="chats",mc="shared_api_keys",Uc="gallery_photos_production",Vc="blog_posts_production",Da="music_playlist",CS="site_content",AS="analytics_daily",$0="analytics_logs",NS="analytics_counts",Uh="messages",Wf=5,RS=[{src:"https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?q=80&w=1000&auto=format&fit=crop",caption:"Awal tahun yang tenang. Duduk santai menikmati pemandangan.",month:"Januari",year:"2026",timestamp:1768608e6},{src:"https://images.unsplash.com/photo-1504608524841-42fe6f032b4b?q=80&w=1000&auto=format&fit=crop",caption:"Eksperimen fotografi cuaca mendung.",month:"Februari",year:"2026",timestamp:17712e8}],PS=[{title:"Glitch in the Matrix: Bukti Kita Cuma Kode Biner?",subtitle:"Teori simulasi Nick Bostrom yang bikin Elon Musk kepikiran tiap malam.",category:"Konspirasi Sains",date:"20 Januari 2026",readTime:"8 min read",author:"Fanra",image:"https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?q=80&w=2070&auto=format&fit=crop",content:`Pernah ngerasa dj vu? Atau ngeliat sesuatu yang kayaknya 'nggak masuk akal' secara fisika? Banyak ilmuwan, termasuk Elon Musk, percaya peluang kita hidup di 'base reality' (kenyataan asli) itu cuma satu banding miliaran.

Bayangkan game The Sims atau GTA. Karakternya nggak sadar mereka ada di game. Seiring teknologi komputer kita makin canggih (VR, AI, Quantum Computing), kita makin dekat bisa bikin simulasi yang persis kenyataan. Kalau kita bisa bikin itu, siapa yang menjamin kalau KITA ini bukan hasil simulasi peradaban yang lebih maju?

Fisikawan James Gates bahkan nemuin kode error koreksi komputer (adinkras) di dalam persamaan supersimetri yang menjelaskan alam semesta. Kok bisa ada kode komputer di hukum fisika?`,timestamp:17699168e5},{title:"Paradoks Fermi: Keheningan yang Memekakkan Telinga",subtitle:"Jika alam semesta ini tak terhingga luasnya dan tua usianya, di mana semua orang?",category:"Sains & Filsafat",date:"9 Januari 2026",readTime:"7 min read",author:"Fanra",image:"https://upload.wikimedia.org/wikipedia/commons/6/69/NASA-HS201427a-HubbleUltraDeepField2014-20140603.jpg",content:`Pernahkah lo menatap langit malam yang cerah, melihat ribuan bintang, dan merasa betapa kecilnya kita? Lalu muncul satu pertanyaan sederhana yang menghantui para ilmuwan selama puluhan tahun: "Di mana mereka semua?"

Mari kita bicara matematika sebentar. Galaksi Bima Sakti kita sendiri memiliki sekitar 100 hingga 400 miliar bintang. Dan di alam semesta yang teramati, ada triliunan galaksi lain. Bahkan jika hanya sebagian kecil dari bintang-bintang itu memiliki planet yang mirip Bumi, seharusnya ada jutaan peradaban cerdas di luar sana.

Alam semesta berumur sekitar 13,8 miliar tahun. Bumi baru berumur 4,5 miliar tahun. Artinya, ada peradaban lain yang mungkin sudah ada miliaran tahun sebelum kita. Bayangkan teknologi mereka. Seharusnya, mereka sudah mengkolonisasi galaksi, atau setidaknya mengirim sinyal yang bisa kita tangkap. Tapi yang kita dapatkan hanyalah... kesunyian. Inilah yang disebut Paradoks Fermi.`,sources:[{label:"Wikipedia - Fermi Paradox",url:"https://en.wikipedia.org/wiki/Fermi_paradox"},{label:"Wait But Why - The Fermi Paradox",url:"https://waitbutwhy.com/2014/05/fermi-paradox.html"}],timestamp:17679168e5}],MS=[{id:"initial_track_1",spotifyId:"08A9yuCnJwBmItI1U9BZ7a",title:"Cincin",artist:"Hindia",addedAt:Date.now(),order:0}],KL=t=>t.toLowerCase().trim().replace(/[^a-z0-9-_]/g,""),JL=async()=>{try{const e=(await Zj(SS,WL)).user,n=Lt(ze,Ma,e.uid),r=await A0(n),s=e.email==="irfanrizkiaditri@gmail.com";let i=Wf,o={name:e.displayName||"Pengguna Google",school:"Google Account",deviceId:e.uid,email:e.email,photoURL:e.photoURL,isAdmin:s,lastLogin:new Date().toISOString()};if(r.exists()){const l=r.data();i=l.credits??Wf,o.isAdmin=l.isAdmin||s,await Ra(n,{lastLogin:new Date().toISOString(),photoURL:e.photoURL})}else await Dh(n,{...o,credits:Wf,createdAt:new Date().toISOString(),apiKeys:[]});return{user:o,credits:i,id:e.uid}}catch(t){throw t}},YL=async()=>{try{await Mj(SS)}catch(t){console.error("Logout error",t)}},QL=async t=>{if(t.startsWith("offline_"))return[];try{const e=await A0(Lt(ze,Ma,t));return e.exists()?e.data().apiKeys||[]:[]}catch{return[]}},pw=async(t,e)=>{if(!t.startsWith("offline_"))try{await Ra(Lt(ze,Ma,t),{apiKeys:e});for(const n of e)if(n.isShared){const r=sr(Ct(ze,mc),so("key","==",n.key));(await ir(r)).empty&&await mo(Ct(ze,mc),{key:n.key,provider:t,addedAt:Date.now(),isActive:!0})}}catch{}},XL=async(t,e,n)=>{if(!t.startsWith("offline_"))try{const r=n.filter(o=>o.key!==e);await Ra(Lt(ze,Ma,t),{apiKeys:r});const s=sr(Ct(ze,mc),so("key","==",e),so("provider","==",t));(await ir(s)).forEach(async o=>{await Pc(Lt(ze,mc,o.id))})}catch{}},ZL=async()=>{try{const t=sr(Ct(ze,mc),so("isActive","==",!0),wa("addedAt","desc"),io(10));return(await ir(t)).docs.map(n=>n.data().key).sort(()=>.5-Math.random()).slice(0,5)}catch{return[]}},mw=async(t,e)=>{if(!t.startsWith("offline_"))try{await mo(Ct(ze,Ma,t,kS),e)}catch{}},e3=async t=>{if(t.startsWith("offline_"))return[];try{const e=sr(Ct(ze,Ma,t,kS),wa("timestamp","asc"),io(50));return(await ir(e)).docs.map(r=>r.data())}catch{return[]}},t3=async()=>{try{const t=Ct(ze,Uc);if((await R0(t)).data().count===0){const e=Dc(ze);RS.forEach(n=>e.set(Lt(t),{...n})),await e.commit()}}catch{}},H0=async()=>{try{await t3();const t=sr(Ct(ze,Uc),wa("timestamp","desc")),e=await ir(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return RS.map((e,n)=>({id:`local-${n}`,...e}))}},n3=async t=>{try{await mo(Ct(ze,Uc),t)}catch(e){throw e}},gw=async(t,e)=>{try{await Ra(Lt(ze,Uc,t),e)}catch(n){throw n}},r3=async t=>{try{await Pc(Lt(ze,Uc,t))}catch(e){throw e}},s3=async()=>{try{const t=Ct(ze,Vc);if((await R0(t)).data().count===0){const e=Dc(ze);PS.forEach(n=>e.set(Lt(t),{...n})),await e.commit()}}catch{}},_m=async()=>{try{await s3();const t=sr(Ct(ze,Vc),wa("timestamp","desc")),e=await ir(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return PS.map((e,n)=>({id:`local-${n}`,...e}))}},i3=async t=>{try{await mo(Ct(ze,Vc),t)}catch(e){throw e}},o3=async(t,e)=>{try{await Ra(Lt(ze,Vc,t),e)}catch(n){throw n}},a3=async t=>{try{await Pc(Lt(ze,Vc,t))}catch(e){throw e}},l3=async()=>{try{const t=Ct(ze,Da);if((await R0(t)).data().count===0){const e=Dc(ze);MS.forEach(n=>e.set(Lt(t),{...n})),await e.commit()}}catch{}},DS=async()=>{try{await l3();const t=sr(Ct(ze,Da)),e=await ir(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>typeof r.order=="number"&&typeof s.order=="number"?r.order-s.order:typeof r.order=="number"?-1:typeof s.order=="number"?1:s.addedAt-r.addedAt)}catch{return MS}},c3=async t=>{try{const e=await DS(),n=e.length>0?Math.max(...e.map(r=>r.order||0)):0;await mo(Ct(ze,Da),{...t,order:n+1})}catch(e){throw e}},u3=async(t,e)=>{try{await Ra(Lt(ze,Da,t),e)}catch(n){throw console.error("Update track failed",n),n}},d3=async t=>{try{await Pc(Lt(ze,Da,t))}catch(e){throw e}},h3=async t=>{try{const e=Dc(ze);t.forEach((n,r)=>{if(n.id){const s=Lt(ze,Da,n.id);e.update(s,{order:r})}}),await e.commit()}catch(e){throw console.error("Order update failed",e),e}};let ta={};const yw=()=>{ta={},console.log("Cache cleared.")},vw=t=>ta[t]||null,ja=async t=>{if(ta[t])return ta[t];try{const e=await A0(Lt(ze,CS,t));if(e.exists()){const n=e.data().text;return ta[t]=n,n}return null}catch{return null}},La=async(t,e)=>{ta[t]=e;try{await Dh(Lt(ze,CS,t),{text:e,updatedAt:Date.now()},{merge:!0}),jS(`Updated Content: ${t}`)}catch(n){throw n}},f3=async t=>{try{await mo(Ct(ze,Uh),{...t,timestamp:Date.now(),isRead:!1})}catch(e){throw e}},p3=async t=>{try{await Pc(Lt(ze,Uh,t))}catch(e){throw e}},m3=async()=>{try{const t=sr(Ct(ze,Uh),so("type","==","public"),io(100));return(await ir(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch{return[]}},g3=async()=>{try{const t=sr(Ct(ze,Uh),so("type","==","private"),io(100));return(await ir(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch{return[]}},y3=()=>new Date().toISOString().split("T")[0],v3=async()=>{let t="Unknown";try{const e=new AbortController,n=setTimeout(()=>e.abort(),2e3),r=await fetch("https://ipapi.co/country/",{signal:e.signal});if(clearTimeout(n),r.ok){const s=await r.text();s&&s.length===2&&(t=s.toUpperCase())}}catch{}try{const e=y3(),n=Lt(ze,AS,e);await Dh(n,{date:e,visitors:ym(1),[`geo.${t}`]:ym(1),timestamp:Date.now()},{merge:!0})}catch{}},jS=async(t,e)=>{try{await mo(Ct(ze,$0),{type:"info",message:t,details:e||"",timestamp:Date.now()})}catch{}},x3=async()=>{try{const t=sr(Ct(ze,$0),io(500)),e=await ir(t);if(e.empty)return;const n=Dc(ze);e.docs.forEach(r=>{n.delete(r.ref)}),await n.commit(),console.log(`Deleted ${e.size} log entries.`)}catch(t){throw console.error("Clear logs error",t),t}},Cs=async(t,e,n)=>{try{const r=KL(e)||"unknown",s=`${t}_${r}`,i=Lt(ze,NS,s);await Dh(i,{category:t,itemId:e,label:n,count:ym(1),lastUpdated:Date.now()},{merge:!0})}catch(r){console.warn("Failed to log analytics event",r)}},il=async(t,e=5)=>{try{const n=sr(Ct(ze,NS),so("category","==",t));return(await ir(n)).docs.map(i=>({id:i.id,...i.data()})).sort((i,o)=>o.count-i.count).slice(0,e)}catch(n){return console.error(`Error fetching top ${t}:`,n),[]}},xw=async()=>{try{const t=sr(Ct(ze,AS),wa("date","desc"),io(365)),n=(await ir(t)).docs.map(v=>v.data()).sort((v,_)=>v.date.localeCompare(_.date));let r=0,s=0,i=0;const o={};n.slice(-7).forEach(v=>s+=v.visitors||0),n.forEach(v=>{r+=v.visitors||0,i+=v.errors||0,v.geo&&Object.keys(v.geo).forEach(_=>{o[_]=(o[_]||0)+v.geo[_]})});const c=sr(Ct(ze,$0),wa("timestamp","desc"),io(15)),d=(await ir(c)).docs.map(v=>({id:v.id,...v.data()})),m=Object.entries(o).map(([v,_])=>({country:v,count:_})).sort((v,_)=>_.count-v.count),[g,y,w,x,b]=await Promise.all([il("menu"),il("project"),il("blog"),il("photo"),il("music")]);return{allStats:n,totalVisitors7Days:s,totalVisitorsAllTime:r,totalErrors:i,logs:d,geoStats:m,topMenus:g,topProjects:y,topBlogs:w,topPhotos:x,topMusic:b}}catch(t){return console.error("Dashboard Stats Error",t),null}},w3=[{label:"Biru",hex:"#3b82f6"},{label:"Merah",hex:"#ef4444"},{label:"Hijau",hex:"#22c55e"},{label:"Ungu",hex:"#a855f7"},{label:"Emas",hex:"#eab308"},{label:"Hitam",hex:"#0f172a"},{label:"Slate",hex:"#64748b"}],_3=[{label:"",value:"to right",title:"Ke Kanan"},{label:"",value:"to bottom",title:"Ke Bawah"},{label:"",value:"135deg",title:"Diagonal Bawah"},{label:"",value:"to left",title:"Ke Kiri"},{label:"",value:"to top",title:"Ke Atas"},{label:"",value:"45deg",title:"Diagonal Atas"}],ft=({id:t,defaultText:e,isAdmin:n,className:r="",tag:s="p",multiline:i=!1})=>{const[o,l]=L.useState(()=>vw(t)||e),[c,u]=L.useState(!1),[d,m]=L.useState("solid"),[g,y]=L.useState("#3b82f6"),[w,x]=L.useState("#3b82f6"),[b,v]=L.useState("#a855f7"),[_,T]=L.useState("to right"),R=L.useRef(null);L.useEffect(()=>{let A=!0;return(async()=>{try{const P=await ja(t);A&&P&&P!==o&&l(P)}catch{}})(),()=>{A=!1}},[t]),L.useEffect(()=>{c&&R.current&&(R.current.style.height="auto",R.current.style.height=R.current.scrollHeight+"px")},[c,o]);const j=async()=>{u(!1);try{await La(t,o)}catch{alert("Gagal menyimpan perubahan teks.")}},V=()=>{u(!1);const A=vw(t);A&&l(A)},S=()=>{const A=R.current;if(!A)return;const F=A.selectionStart,P=A.selectionEnd;if(F===P)return;const D=o.substring(F,P),M=o.substring(0,F),q=o.substring(P);let pe="";d==="solid"?pe=`<span style="color: ${g}">${D}</span>`:pe=`<span style="background: ${`linear-gradient(${_}, ${w}, ${b})`}; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 800; -webkit-box-decoration-break: clone; box-decoration-break: clone;">${D}</span>`,l(M+pe+q)},I=()=>{const A=R.current;if(!A)return;const F=A.selectionStart,P=A.selectionEnd;if(F===P)return;const D=o.substring(F,P),M=o.substring(0,F),q=o.substring(P),pe=D.replace(/<\/?[^>]+(>|$)/g,"");l(M+pe+q)},C=()=>{const A=w;x(b),v(A)};return c?a.jsx("div",{className:`relative z-[100] ${r}`,children:a.jsxs("div",{className:"bg-white border border-slate-200 shadow-2xl rounded-2xl overflow-hidden min-w-[300px] md:min-w-[500px] flex flex-col animate-fade-in-up",children:[a.jsxs("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-100 flex justify-between items-center",children:[a.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:["Editing: ",a.jsx("span",{className:"text-slate-800",children:t.split("_").pop()})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:V,className:"px-3 py-1.5 text-xs font-bold text-slate-500 hover:text-slate-800 rounded-lg transition-colors",children:"Batal"}),a.jsxs("button",{onClick:j,className:"px-4 py-1.5 text-xs font-bold bg-slate-900 text-white hover:bg-slate-800 rounded-lg flex items-center gap-1.5 shadow-md active:scale-95 transition-all",children:[a.jsx(Vr,{className:"w-3 h-3"})," Simpan"]})]})]}),a.jsxs("div",{className:"p-4 bg-white relative",children:[a.jsx("textarea",{ref:R,value:o,onChange:A=>l(A.target.value),className:"w-full bg-transparent border-none outline-none text-sm font-mono text-slate-600 resize-none min-h-[100px] leading-relaxed placeholder:text-slate-300",placeholder:"Tulis teks atau HTML disini...",spellCheck:!1}),a.jsx("div",{className:"absolute top-2 right-2 opacity-10 pointer-events-none",children:a.jsx("span",{className:"text-[10px] font-mono",children:"HTML MODE"})})]}),a.jsx("div",{className:"bg-slate-50/50 border-t border-slate-100 p-4",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-lg w-fit",children:[a.jsx("button",{onClick:()=>m("solid"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all ${d==="solid"?"bg-white text-slate-900 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:"Solid Color"}),a.jsxs("button",{onClick:()=>m("gradient"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all flex items-center gap-1 ${d==="gradient"?"bg-white text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[a.jsx(DT,{className:"w-3 h-3"})," Gradient"]})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[d==="solid"?a.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[a.jsx("div",{className:"p-1.5 bg-white border border-slate-200 rounded-lg shadow-sm shrink-0",children:a.jsx(EN,{className:"w-4 h-4 text-slate-400"})}),a.jsxs("div",{className:"flex gap-2",children:[w3.map(A=>a.jsx("button",{onClick:()=>y(A.hex),className:`w-6 h-6 rounded-full border-2 transition-transform hover:scale-110 shrink-0 ${g===A.hex?"border-slate-400 scale-110":"border-white shadow-sm"}`,style:{backgroundColor:A.hex},title:A.label},A.hex)),a.jsx("div",{className:"w-px h-6 bg-slate-300 mx-1"}),a.jsx("input",{type:"color",value:g,onChange:A=>y(A.target.value),className:"w-6 h-6 rounded-full cursor-pointer border border-slate-200 bg-white p-0 overflow-hidden shrink-0",title:"Custom Color"})]})]}):a.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[a.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Start"}),a.jsx("input",{type:"color",value:w,onChange:A=>x(A.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),a.jsx("button",{onClick:C,className:"text-slate-400 hover:text-slate-600 transition-colors p-1",title:"Tukar Warna",children:a.jsx(da,{className:"w-3.5 h-3.5"})}),a.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[a.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"End"}),a.jsx("input",{type:"color",value:b,onChange:A=>v(A.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),a.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white shadow-md ml-auto",style:{background:`linear-gradient(${_}, ${w}, ${b})`},title:"Preview Gradient"})]}),a.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 no-scrollbar",children:[a.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase shrink-0 mr-1",children:"Arah:"}),_3.map(A=>a.jsx("button",{onClick:()=>T(A.value),className:`w-7 h-7 flex items-center justify-center rounded-md border text-sm transition-all shrink-0 ${_===A.value?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,title:A.title,children:A.label},A.value))]})]}),a.jsxs("div",{className:"flex items-center gap-2 w-full justify-end mt-2 pt-2 border-t border-slate-100",children:[a.jsxs("button",{onClick:I,className:"text-[10px] font-bold bg-white border border-slate-200 hover:border-red-300 hover:text-red-500 text-slate-500 px-3 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex items-center gap-1.5",title:"Hapus format",children:[a.jsx(xN,{className:"w-3.5 h-3.5"}),"Hapus Format"]}),a.jsxs("button",{onClick:S,className:"text-[10px] font-bold bg-blue-50 border border-blue-200 hover:bg-blue-100 text-blue-700 px-4 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex-1 justify-center flex",children:["Terapkan ",d==="solid"?"Warna":"Gradasi"]})]})]}),a.jsxs("p",{className:"text-[9px] text-slate-400 italic text-center",children:["*Blok teks di atas, atur ",d,", lalu klik Terapkan."]})]})})]})}):a.jsxs(s,{className:`relative group ${r} ${n?"cursor-pointer hover:opacity-80 transition-opacity decoration-blue-500/30":""}`,onClick:A=>{n&&(A.stopPropagation(),u(!0))},title:n?"Klik untuk mengedit warna & teks":void 0,children:[a.jsx("span",{dangerouslySetInnerHTML:{__html:o}}),n&&a.jsx("span",{className:"inline-flex ml-2 opacity-0 group-hover:opacity-100 transition-all duration-300 align-middle bg-slate-100 p-1 rounded-md border border-slate-200 shadow-sm absolute -top-4 -right-4 md:static",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-500",children:[a.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),a.jsx("path",{d:"m15 5 4 4"})]})})]})},b3=({isAdmin:t})=>{const e=xi(),[n,r]=L.useState(!1),[s,i]=L.useState({left:0,width:0,opacity:0}),[o,l]=L.useState(!1),c=L.useRef({}),u=[{path:"/",label:"Home"},{path:"/projects",label:"Projects"},{path:"/blog",label:"Blog"},{path:"/gallery",label:"Gallery"},{path:"/music",label:"Music"},{path:"/messages",label:"Pesan"}];L.useEffect(()=>(n?(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.documentElement.style.overflow="",document.body.style.position="",document.body.style.width=""),()=>{document.body.style.overflow="",document.documentElement.style.overflow="",document.body.style.position="",document.body.style.width=""}),[n]),L.useEffect(()=>{const y=()=>{const x=e.pathname;let b=u.find(_=>_.path===x);b||(b=u.find(_=>_.path!=="/"&&x.startsWith(_.path))),b||(b=u[0]);const v=c.current[b.path];v&&i({left:v.offsetLeft,width:v.offsetWidth,opacity:1})},w=setTimeout(y,50);return window.addEventListener("resize",y),()=>{clearTimeout(w),window.removeEventListener("resize",y)}},[e.pathname]);const d=y=>{var w;l(!0),Cs("menu",y,((w=u.find(x=>x.path===y))==null?void 0:w.label)||y),setTimeout(()=>{r(!1),l(!1)},700)},m=(y,w)=>{Cs("menu",y,w)},g=y=>y==="/"?e.pathname==="/":e.pathname.startsWith(y);return a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          @keyframes curtainDown {
             from { transform: translateY(-100%); }
             to { transform: translateY(0); }
          }
          @keyframes curtainUp {
             from { transform: translateY(0); }
             to { transform: translateY(-100%); }
          }
          .animate-blob { animation: blob 10s infinite; }
          .animation-delay-2000 { animation-delay: 2s; }
          .animation-delay-4000 { animation-delay: 4s; }
          .animate-curtain-down { animation: curtainDown 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
          .animate-curtain-up { animation: curtainUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        `}),a.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-100 transition-all",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center",children:[a.jsxs(Jr,{to:"/",onClick:()=>m("/","Home"),className:"flex items-center gap-3 cursor-pointer group mr-8",children:[a.jsx(ec,{className:"w-8 h-8 transition-all duration-500 ease-out group-hover:scale-110 group-hover:drop-shadow-[0_0_15px_rgba(59,130,246,0.5)]",variant:"dark"}),a.jsx("div",{className:"flex flex-col justify-center",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ft,{id:"navbar_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:t,tag:"span",className:"text-sm font-black tracking-tighter uppercase text-slate-900 leading-none"}),t&&a.jsx("span",{className:"bg-slate-900 text-white text-[9px] font-bold px-1.5 py-0.5 rounded leading-none shadow-sm",children:"ADMIN"})]})})]}),a.jsxs("div",{className:"hidden md:flex items-center relative ml-auto bg-slate-50/50 rounded-full p-1 border border-slate-200/60",children:[a.jsx("div",{className:"absolute top-1 bottom-1 bg-slate-900 rounded-full transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1)] shadow-md z-0 pointer-events-none",style:{left:s.left,width:s.width,opacity:s.opacity}}),u.map(y=>a.jsx(Jr,{to:y.path,ref:w=>{c.current[y.path]=w},onClick:()=>m(y.path,y.label),className:`relative z-10 px-6 py-2 rounded-full text-xs font-bold uppercase tracking-wide transition-colors duration-300 ${g(y.path)?"text-white":"text-slate-500 hover:text-slate-900"}`,children:y.label},y.path))]}),a.jsx("button",{className:"md:hidden p-2 text-slate-600 ml-auto",onClick:()=>r(!n),children:a.jsx(PT,{className:"w-6 h-6"})})]})}),(n||o)&&a.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden flex flex-col items-center justify-center p-6 overflow-hidden bg-white ${o?"animate-curtain-up":"animate-curtain-down"}`,style:{touchAction:"none"},onTouchMove:y=>y.preventDefault(),children:[a.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),a.jsxs("div",{className:"absolute inset-0 z-0 w-full h-full pointer-events-none",children:[a.jsx("div",{className:"absolute top-0 -left-10 w-96 h-96 bg-slate-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob"}),a.jsx("div",{className:"absolute top-1/4 -right-20 w-80 h-80 bg-gray-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"}),a.jsx("div",{className:"absolute -bottom-20 left-1/3 w-96 h-96 bg-zinc-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-4000"}),a.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-[10px]"})]}),a.jsx("button",{className:"absolute top-6 right-6 p-4 text-slate-800 hover:text-slate-500 transition-colors z-50",onClick:()=>d(e.pathname),children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 6 6 18"}),a.jsx("path",{d:"m6 6 12 12"})]})}),a.jsxs("div",{className:`relative z-10 w-full flex flex-col items-center transition-all duration-500 ${o?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:[a.jsx("div",{className:"flex flex-col gap-8 w-full max-w-xs mt-10",children:u.map((y,w)=>a.jsx(Jr,{to:y.path,onClick:()=>d(y.path),className:`
                           text-4xl font-black uppercase tracking-tight text-center py-2 relative group
                           transition-all duration-300
                           ${g(y.path)?"text-slate-900 scale-110":"text-slate-300 hover:text-slate-500 hover:scale-105"}
                        `,style:{animationDelay:`${w*50}ms`},children:y.label},y.path))}),a.jsxs("div",{className:"absolute -bottom-40 flex flex-col items-center gap-3",children:[a.jsx("div",{className:"w-1 h-12 bg-slate-200 rounded-full"}),a.jsx("div",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-[0.4em]",children:"Fanra Studio"})]})]})]})]})},Yt=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null;let Kf=null;const LS=t=>{if(Kf)return Kf;const e=t.sampleRate*2,n=t.createBuffer(1,e,t.sampleRate),r=n.getChannelData(0);for(let s=0;s<e;s++)r[s]=Math.random()*2-1;return Kf=n,n},E3=()=>{if(!Yt)return;Yt.state==="suspended"&&Yt.resume();const t=LS(Yt),e=Yt.createBufferSource();e.buffer=t;const n=Yt.createBiquadFilter();n.type="lowpass",n.Q.value=1;const r=Yt.createGain();e.connect(n),n.connect(r),r.connect(Yt.destination);const s=Yt.currentTime;n.frequency.setValueAtTime(100,s),n.frequency.exponentialRampToValueAtTime(4e3,s+.15),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.3,s+.05),r.gain.exponentialRampToValueAtTime(.001,s+.3),e.start(s),e.stop(s+.3)},T3=()=>{if(!Yt)return;Yt.state==="suspended"&&Yt.resume();const t=LS(Yt),e=Yt.createBufferSource();e.buffer=t;const n=Yt.createBiquadFilter();n.type="lowpass",n.Q.value=.5;const r=Yt.createGain();e.connect(n),n.connect(r),r.connect(Yt.destination);const s=Yt.currentTime;n.frequency.setValueAtTime(200,s),n.frequency.exponentialRampToValueAtTime(1200,s+.8),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.4,s+.2),r.gain.exponentialRampToValueAtTime(.001,s+1.2),e.start(s),e.stop(s+1.2)};class I3{constructor(e,n,r){this.x=e,this.y=n;const s=Math.random()*Math.PI*2,i=Math.random()*10+2;this.vx=Math.cos(s)*i,this.vy=Math.sin(s)*i,this.size=3,this.friction=.92,this.opacity=1,this.ease=.2-r*.015,this.ease<.05&&(this.ease=.05)}update(e,n){this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction,this.x+=(e-this.x)*this.ease,this.y+=(n-this.y)*this.ease;const r=e-this.x,s=n-this.y;return Math.sqrt(r*r+s*s)<10&&(this.opacity-=.05),this.opacity>0}draw(e){e.save(),e.globalAlpha=this.opacity,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fillStyle="#2563eb",e.fill(),e.restore()}}const S3=({onComplete:t,onTriggerAdmin:e})=>{const[n,r]=L.useState(0),[s,i]=L.useState(!1),[o,l]=L.useState(!1),[c,u]=L.useState(!1),d=L.useRef(null),m=L.useRef(null),g=L.useRef([]),y=L.useRef({x:window.innerWidth/2,y:window.innerHeight/2});L.useEffect(()=>(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",window.scrollTo(0,0),()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[]),L.useEffect(()=>{const _=m.current;if(!_)return;const T=_.getContext("2d");if(!T)return;const R=()=>{_.width=window.innerWidth,_.height=window.innerHeight};window.addEventListener("resize",R),R();const j=I=>{y.current={x:I.clientX,y:I.clientY}};window.addEventListener("mousemove",j);let V;const S=()=>{T.clearRect(0,0,_.width,_.height),g.current.length>0?(g.current=g.current.filter(I=>I.update(y.current.x,y.current.y)?(I.draw(T),!0):!1),g.current.length===0&&o&&l(!1)):o&&l(!1),V=requestAnimationFrame(S)};return S(),()=>{window.removeEventListener("resize",R),window.removeEventListener("mousemove",j),cancelAnimationFrame(V)}},[o]);const w=_=>{if(o||!d.current)return;const T=d.current.getBoundingClientRect(),R=T.left+T.width/2,j=T.top+T.height/2;l(!0);let V=0;const S=10;g.current=[];const I=setInterval(()=>{if(V>=S){clearInterval(I);return}g.current.push(new I3(R,j,V)),V++},50)},x=()=>{s||(E3(),i(!0),r(1),setTimeout(()=>i(!1),1e3))},b=()=>{s||(T3(),i(!0),r(2),setTimeout(()=>{window.scrollTo(0,0),t()},1e3))},v=()=>{c||(u(!0),setTimeout(()=>{e&&e(),setTimeout(()=>u(!1),2e3)},500))};return a.jsxs("div",{className:`fixed inset-0 z-[999] bg-white transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1) overflow-hidden h-[100dvh] w-screen ${n===2?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none"}`,onTouchMove:_=>_.preventDefault(),children:[a.jsx("canvas",{ref:m,className:"absolute inset-0 pointer-events-none z-50"}),a.jsxs("div",{className:"flex flex-col w-full h-[200vh] transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1)",style:{transform:n>=1?"translateY(-50%)":"translateY(0)"},children:[a.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center relative bg-white px-6",style:{backgroundImage:"radial-gradient(#e2e8f0 1px, transparent 1px)",backgroundSize:"32px 32px"},children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-[0.03] pointer-events-none overflow-hidden",children:a.jsx(ec,{className:"w-[150%] h-[150%] -translate-x-1/4 -translate-y-1/4",variant:"dark"})}),a.jsxs("div",{className:"relative z-10 text-center animate-fade-in-up flex flex-col items-center",children:[a.jsx("div",{className:"mb-8 flex justify-center transform hover:scale-105 transition-transform duration-500",children:a.jsx(ec,{className:"w-32 h-32 md:w-40 md:h-40 shadow-2xl shadow-slate-200/50 rounded-[2rem] bg-white",variant:"dark"})}),a.jsxs("h1",{className:"text-4xl md:text-7xl font-black text-slate-900 mb-4 tracking-tighter leading-tight",children:["IRFAN RIZKI ADITRI",a.jsx("span",{ref:d,onDoubleClick:w,className:`text-blue-600 inline-block cursor-pointer transition-opacity duration-100 select-none ${o?"opacity-0":"opacity-100"} hover:opacity-80`,title:"Double click me!",children:"."})]}),a.jsx("p",{className:"text-slate-400 text-lg md:text-2xl font-medium tracking-widest uppercase",children:"Portfolio & Playground"}),a.jsxs("button",{onClick:x,className:"group flex flex-col items-center gap-3 transition-all outline-none cursor-pointer mt-20 hover:-translate-y-1 duration-300",children:[a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-900 transition-colors",children:"Next"}),a.jsx("div",{className:"w-12 h-12 rounded-full border border-slate-200 bg-white hover:bg-slate-50 flex items-center justify-center shadow-lg transition-all duration-300 group-hover:border-slate-300 group-hover:shadow-xl",children:a.jsx($n,{className:"w-5 h-5 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})})]})]})]}),a.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center bg-slate-50 px-6 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),a.jsx("div",{className:`absolute bottom-8 right-8 z-50 transition-all duration-700 ease-out cursor-default select-none ${c?"scale-[10] opacity-0 rotate-180 text-blue-600":"scale-100 opacity-5 hover:opacity-30 text-slate-900"}`,onDoubleClick:v,title:".",children:a.jsx(rc,{className:"w-6 h-6"})}),a.jsxs("div",{className:"relative z-10 max-w-4xl w-full grid md:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{className:"text-center md:text-left space-y-6 flex flex-col items-center md:items-start",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-[10px] font-bold uppercase tracking-wider",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),"Student & Developer"]}),a.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-slate-900 tracking-tight leading-none",children:["Welcome to ",a.jsx("br",{}),a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-slate-500",children:"My Perspective."})]}),a.jsx("p",{className:"text-slate-500 text-lg leading-relaxed max-w-md",children:"Jelajahi eksperimen kode, cerita tentang alam semesta, dan tools AI buatan mahasiswa gabut."}),a.jsxs("button",{onClick:b,className:"inline-flex items-center gap-3 bg-slate-900 text-white px-8 py-4 rounded-xl font-bold shadow-xl shadow-slate-900/20 hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 group",children:["Explore Studio",a.jsx($i,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),a.jsxs("div",{className:"relative hidden md:block",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-500 to-purple-500 rounded-[2.5rem] rotate-3 opacity-20 blur-2xl transform translate-y-4"}),a.jsxs("div",{className:"relative bg-white p-8 rounded-[2.5rem] shadow-2xl border border-slate-100 rotate-[-2deg] hover:rotate-0 transition-transform duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-slate-100 pb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center p-2.5",children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra",className:"w-full h-full object-contain"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-slate-900",children:"Fanra"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Intelligent Assistant"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-slate-50 p-4 rounded-xl rounded-tl-none border border-slate-100 text-sm text-slate-600",children:"Halo! Ada yang bisa gue bantu hari ini? Mau edit foto atau ngobrol soal fisika?"}),a.jsx("div",{className:"bg-blue-600 p-4 rounded-xl rounded-tr-none text-sm text-white ml-auto max-w-[80%]",children:"Gue mau coba fitur AI Studio lo dong, Fanra!"})]})]})]})]})]})]})]})},$e=t=>{if(typeof window<"u"){const e=new CustomEvent("fanra-toast",{detail:{message:t}});window.dispatchEvent(e)}},Ml=[{id:"fanra-ai",titleId:"projects_p1_title",descId:"projects_p1_desc",statusId:"status_project_p1",defaultTitle:"Fanra AI Studio",defaultDesc:"Asisten AI hybrid yang bisa ngobrol santai, edit foto (Hapus BG, Upscale 4K), dan cari info akurat.",fullDesc:"Fanra AI Studio adalah platform kecerdasan buatan terintegrasi yang dirancang untuk membantu produktivitas dan kreativitas. Menggunakan model Google Gemini Pro vision terbaru, aplikasi ini mampu memahami konteks visual, melakukan pengeditan gambar tingkat lanjut seperti penghapusan latar belakang yang presisi, peningkatan resolusi (Upscale 4K), hingga pencarian informasi real-time melalui integrasi Wikipedia dan Google Search.",iconUrl:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",theme:"blue",appPath:"/studio",buttonText:"Open Studio",features:["Smart Chatbot (Hybrid Search)","Background Remover","HD Upscale (4K)","Creative Remix","Wikipedia Integration"]},{id:"ig-panorama",titleId:"projects_p2_title",descId:"projects_p2_desc",statusId:"status_project_p2",defaultTitle:"IG Seamless Studio",defaultDesc:"Bikin konten carousel Instagram yang nyambung (Panorama) dengan mudah. Auto-slice saat download.",fullDesc:"IG Seamless Studio adalah tool khusus untuk konten kreator yang ingin membuat postingan carousel Instagram yang estetik dan menyambung (seamless). Tidak perlu lagi memotong gambar secara manual di Photoshop. Cukup upload gambar, atur layout di kanvas tanpa batas, tambahkan elemen dekoratif, dan sistem akan otomatis memotongnya menjadi slide-slide presisi siap posting.",iconUrl:"https://cdn-icons-png.flaticon.com/128/4327/4327816.png",theme:"pink",appPath:"/panorama",buttonText:"Open App",features:["Canvas Drag & Drop","Auto Slicing","Shape & Masking Tools","Layer Management","Instant Zip Download"]},{id:"fanragem",titleId:"projects_p3_title",descId:"projects_p3_desc",statusId:"status_project_p3",defaultTitle:"Fanragem",defaultDesc:"Game simulasi kehidupan mini. Bangun ekosistem digital, atur sumber daya, dan lihat perkembangannya.",fullDesc:"Fanragem adalah sebuah eksperimen simulasi kehidupan berbasis web. Di sini, Anda berperan sebagai pengatur ekosistem digital. Kelola sumber daya, populasi, dan lingkungan untuk melihat bagaimana keputusan kecil berdampak pada kelangsungan hidup dunia buatan Anda. Project ini masih dalam tahap pengembangan aktif.",iconUrl:"https://cdn-icons-png.flaticon.com/128/14047/14047858.png",theme:"purple",appPath:"",buttonText:"View Details",features:["Resource Management","Population Simulation","Dynamic Events","Pixel Art Style"]}],FS=({id:t,isAdmin:e,onStatusChange:n})=>{const[r,s]=L.useState("active"),[i,o]=L.useState(!0);L.useEffect(()=>{(async()=>{const m=await ja(t);s(m==="maintenance"||m==="development"?m:"active"),o(!1),n(m||"active")})()},[t]);const l=async d=>{if(d.stopPropagation(),!e)return;let m="active";r==="active"?m="maintenance":r==="maintenance"?m="development":m="active",s(m),n(m),await La(t,m)};if(i)return a.jsx("div",{className:"w-16 h-5 bg-slate-100 rounded-full animate-pulse"});const u={active:{color:"bg-green-100 text-green-700 border-green-200",icon:a.jsx(Vr,{className:"w-3 h-3"}),label:"Active"},maintenance:{color:"bg-orange-100 text-orange-700 border-orange-200",icon:a.jsx(ha,{className:"w-3 h-3"}),label:"Maintenance"},development:{color:"bg-blue-100 text-blue-700 border-blue-200",icon:a.jsx(jT,{className:"w-3 h-3"}),label:"Building"}}[r];return a.jsxs("button",{onClick:l,disabled:!e,className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border transition-all ${u.color} ${e?"cursor-pointer hover:brightness-95 active:scale-95":"cursor-default"}`,title:e?"Klik untuk ubah status":"",children:[u.icon,u.label]})},k3=({project:t,isAdmin:e,onClick:n})=>{const[r,s]=L.useState("active"),i=u=>{s(u)},l={blue:{bg:"bg-blue-50 border border-blue-100",text:"text-blue-600",hoverBorder:"group-hover:border-blue-300",glow:"bg-blue-500/10"},pink:{bg:"bg-pink-50 border border-pink-100",text:"text-pink-600",hoverBorder:"group-hover:border-pink-300",glow:"bg-pink-500/10"},purple:{bg:"bg-purple-50 border border-purple-100",text:"text-purple-600",hoverBorder:"group-hover:border-purple-300",glow:"bg-purple-500/10"}}[t.theme],c=r!=="active"&&!e;return a.jsxs("div",{onClick:n,className:`
                group relative bg-white rounded-[2rem] p-8 border transition-all duration-300 flex flex-col justify-between overflow-hidden h-full min-h-[320px]
                ${c?"cursor-default opacity-80 grayscale-[0.5]":"cursor-pointer hover:shadow-xl hover:-translate-y-1"}
                ${c?"border-slate-100":`border-slate-200 ${l.hoverBorder}`}
            `,children:[a.jsx("div",{className:`absolute top-0 right-0 w-48 h-48 rounded-full blur-3xl transition-opacity duration-500 opacity-0 group-hover:opacity-100 pointer-events-none translate-x-10 -translate-y-10 ${l.glow}`}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-transform duration-500 group-hover:scale-110 ${l.bg} ${l.text}`,children:a.jsx("img",{src:t.iconUrl,alt:t.defaultTitle,className:"w-8 h-8 object-contain"})}),a.jsx(FS,{id:t.statusId,isAdmin:e,onStatusChange:i})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx(ft,{id:t.titleId,defaultText:t.defaultTitle,isAdmin:e,tag:"h3",className:`text-2xl font-black text-slate-900 mb-3 tracking-tight ${!c&&`group-hover:${l.text} transition-colors`}`}),a.jsx(ft,{id:t.descId,defaultText:t.defaultDesc,isAdmin:e,tag:"p",multiline:!0,className:"text-slate-500 text-sm leading-relaxed font-medium line-clamp-3"})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[a.jsx("span",{className:`text-xs font-bold uppercase tracking-wider transition-colors ${c?"text-slate-400":`${l.text}`}`,children:"See Details"}),a.jsx("div",{className:`p-2 rounded-full transition-all ${c?"bg-slate-100 text-slate-300":`bg-slate-50 ${l.text} group-hover:bg-white group-hover:shadow-md`}`,children:a.jsx($i,{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform"})})]})]})},C3=({project:t,isAdmin:e})=>{const n=br(),[r,s]=L.useState("active"),i=d=>{s(d)},o=r!=="active"&&!e,c={blue:{bg:"bg-blue-50",text:"text-blue-600",btn:"bg-blue-600 hover:bg-blue-700",gradient:"from-blue-500 to-cyan-500"},pink:{bg:"bg-pink-50",text:"text-pink-600",btn:"bg-pink-600 hover:bg-pink-700",gradient:"from-pink-500 to-rose-500"},purple:{bg:"bg-purple-50",text:"text-purple-600",btn:"bg-purple-600 hover:bg-purple-700",gradient:"from-purple-500 to-indigo-500"}}[t.theme],u=()=>{if(o){$e(r==="maintenance"?"Aplikasi sedang dalam perbaikan (Maintenance).":"Aplikasi masih dalam tahap pengembangan.");return}t.appPath?(Cs("project",t.id,t.defaultTitle),n(t.appPath)):$e("Link aplikasi belum tersedia.")};return a.jsx("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-12",children:[a.jsxs("button",{onClick:()=>n("/projects"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[a.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:a.jsx(er,{className:"w-4 h-4"})}),"Kembali ke Daftar"]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${c.bg} ${c.text}`,children:a.jsx("img",{src:t.iconUrl,alt:"Icon",className:"w-8 h-8 object-contain"})}),a.jsx(FS,{id:t.statusId,isAdmin:e,onStatusChange:i})]}),a.jsx(ft,{id:t.titleId,defaultText:t.defaultTitle,isAdmin:e,tag:"h1",className:"text-4xl md:text-5xl font-black text-slate-900 mb-6 tracking-tight"}),a.jsx("p",{className:"text-lg text-slate-600 leading-relaxed mb-8",children:t.fullDesc}),a.jsxs("div",{className:"space-y-3 mb-10",children:[a.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Fitur Utama"}),t.features.map((d,m)=>a.jsxs("div",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[a.jsx("div",{className:`w-5 h-5 rounded-full ${c.bg} ${c.text} flex items-center justify-center shrink-0`,children:a.jsx(Vr,{className:"w-3 h-3"})}),d]},m))]}),a.jsxs("button",{onClick:u,disabled:o,className:`
                                px-8 py-4 rounded-2xl font-bold text-white text-lg shadow-xl shadow-slate-200/50 flex items-center gap-3 transition-all active:scale-95
                                ${o?"bg-slate-300 cursor-not-allowed":`${c.btn} hover:-translate-y-1`}
                            `,children:[o?"Terkunci":t.buttonText,!o&&a.jsx($i,{className:"w-5 h-5"})]})]}),a.jsxs("div",{className:`aspect-square rounded-[3rem] bg-gradient-to-br ${c.gradient} opacity-90 relative overflow-hidden shadow-2xl flex items-center justify-center`,children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-white/20 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-white/10 rounded-full blur-2xl"}),a.jsxs("div",{className:"relative z-10 bg-white/10 backdrop-blur-md border border-white/20 p-8 rounded-3xl shadow-lg max-w-xs text-white/90 text-center",children:[a.jsx("img",{src:t.iconUrl,className:"w-20 h-20 mx-auto mb-4 opacity-90 drop-shadow-md"}),a.jsx("p",{className:"font-bold text-lg",children:"Preview Mode"}),a.jsx("p",{className:"text-xs opacity-70 mt-2",children:"Gambaran visual aplikasi saat dijalankan."})]})]})]})]})})},ww=({isAdmin:t})=>{const e=br(),{projectId:n}=Lg(),r=Ml.find(s=>s.id===n);return n&&r?a.jsx(C3,{project:r,isAdmin:t}):a.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 animate-fade-in",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-12 gap-4",children:[a.jsxs("div",{children:[a.jsx(ft,{id:"projects_title",defaultText:"Selected Projects",isAdmin:t,tag:"h1",className:"text-4xl md:text-5xl font-black text-slate-900 mb-3 tracking-tighter"}),a.jsx(ft,{id:"projects_subtitle",defaultText:"Kumpulan tools dan simulasi interaktif.",isAdmin:t,tag:"p",className:"text-slate-500 text-lg max-w-2xl"})]}),t&&a.jsxs("div",{className:"bg-slate-900 text-white px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 shadow-lg",children:[a.jsx(Sd,{className:"w-4 h-4"}),"Admin Mode: Klik status badge untuk ubah."]})]}),a.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl p-5 mb-12 flex gap-4 items-start shadow-sm",children:[a.jsx("div",{className:"p-2 bg-amber-100 rounded-xl text-amber-600 shrink-0",children:a.jsx(ha,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx(ft,{id:"projects_disclaimer_title",defaultText:"Info Pengunjung",isAdmin:t,tag:"h4",className:"font-bold text-amber-900 text-sm uppercase tracking-wide mb-1"}),a.jsx(ft,{id:"projects_disclaimer_text",defaultText:"Project dengan label 'Maintenance' atau 'Building' tidak bisa diakses sementara waktu demi alasan kestabilan. Silakan coba project yang berstatus 'Active'.",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-amber-700/80 leading-relaxed font-medium"})]})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:Ml.map(s=>a.jsx(k3,{project:s,isAdmin:t,onClick:()=>{Cs("project",s.id,s.defaultTitle),e(`/projects/${s.id}`)}},s.id))})]})};class A3{constructor(e,n,r){this.x=e,this.y=n,this.baseX=e,this.baseY=n,this.size=1.5,this.density=Math.random()*20+5,this.color=r}draw(e,n){const r=this.y/n;let s=1-Math.pow(r,.8);s=Math.max(0,s),e.fillStyle=`rgba(203, 213, 225, ${s})`,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.closePath(),e.fill()}update(e,n){const r=e.x-this.x,s=e.y-this.y,i=Math.sqrt(r*r+s*s),o=r/i,l=s/i,c=e.radius,u=(c-i)/c,d=o*u*this.density,m=l*u*this.density;if(i<e.radius)n==="repel"?(this.x-=d,this.y-=m):(this.x+=d,this.y+=m);else{if(this.x!==this.baseX){const g=this.x-this.baseX;this.x-=g/15}if(this.y!==this.baseY){const g=this.y-this.baseY;this.y-=g/15}}}}const N3=({onTriggerAdmin:t,isAdmin:e=!1})=>{const n=br(),[r]=L.useState(()=>Math.random()>.5?"repel":"attract"),s=L.useRef(null),i=L.useRef([]),o=L.useRef({x:-1e3,y:-1e3,radius:120}),l=L.useRef(null),[c,u]=L.useState([]),[d,m]=L.useState([]),[g,y]=L.useState(!0),[w,x]=L.useState([]),[b,v]=L.useState(!1),[_,T]=L.useState(()=>sessionStorage.getItem("fanra_home_animated")==="true");L.useEffect(()=>{_||sessionStorage.setItem("fanra_home_animated","true")},[_]);const R=(I="")=>`scroll-reveal ${_?"opacity-100 translate-y-0":`opacity-0 translate-y-10 transition-all duration-1000 ease-out ${I}`}`;L.useEffect(()=>{(async()=>{try{const C=await _m();u(C.slice(0,2));const A=await H0();if(A.length>0){const P=Array(60).fill(A).flat();m(P)}else m([]);const F=await ja("featured_projects");x(F?F.split(",").filter(Boolean):[Ml[0].id])}catch(C){console.error("Home data fetch error",C)}finally{y(!1)}})()},[]);const j=async()=>{await La("featured_projects",w.join(",")),v(!1)},V=I=>{x(C=>C.includes(I)?C.filter(A=>A!==I):C.length>=3?C:[...C,I])},S=Ml.filter(I=>w.includes(I.id));return L.useEffect(()=>{const I=s.current;if(!I)return;const C=I.getContext("2d");if(!C)return;const A=()=>{I.width=window.innerWidth,I.height=window.innerHeight,F()},F=()=>{i.current=[];const pe=30,ne=Math.ceil(I.height/pe),ee=Math.ceil(I.width/pe);for(let Q=0;Q<ne;Q++)for(let ue=0;ue<ee;ue++){const $=ue*pe+pe/2,B=Q*pe+pe/2;i.current.push(new A3($,B,"#cbd5e1"))}};A(),window.addEventListener("resize",A);const P=pe=>{const ne=I.getBoundingClientRect();o.current.x=pe.clientX-ne.left,o.current.y=pe.clientY-ne.top},D=()=>{o.current.x=-1e3,o.current.y=-1e3};window.addEventListener("mousemove",P),window.addEventListener("mouseout",D);let M;const q=()=>{C.clearRect(0,0,I.width,I.height),i.current.forEach(pe=>{pe.draw(C,I.height),pe.update(o.current,r)}),M=requestAnimationFrame(q)};return q(),()=>{window.removeEventListener("resize",A),window.removeEventListener("mousemove",P),window.removeEventListener("mouseout",D),cancelAnimationFrame(M)}},[r]),L.useEffect(()=>{l.current&&d.length>0&&setTimeout(()=>{if(l.current){const I=l.current;I.scrollLeft=(I.scrollWidth-I.clientWidth)/2}},100)},[d]),L.useEffect(()=>{const I=new IntersectionObserver(A=>{A.forEach(F=>{F.isIntersecting&&(F.target.classList.add("opacity-100","translate-y-0"),F.target.classList.remove("opacity-0","translate-y-10"))})},{threshold:.1}),C=document.querySelectorAll(".scroll-reveal");return C.forEach(A=>I.observe(A)),()=>C.forEach(A=>I.unobserve(A))},[c,w]),a.jsxs("div",{className:"relative min-h-[90vh] flex flex-col overflow-hidden bg-gradient-to-b from-slate-50 via-white to-white",children:[a.jsx("style",{children:`
            .no-scrollbar::-webkit-scrollbar { display: none; }
            .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
            
            @keyframes blob {
                0% { transform: translate(0px, 0px) scale(1); }
                33% { transform: translate(30px, -50px) scale(1.1); }
                66% { transform: translate(-20px, 20px) scale(0.9); }
                100% { transform: translate(0px, 0px) scale(1); }
            }
            .animate-blob {
                animation: blob 7s infinite;
            }
            .animation-delay-2000 {
                animation-delay: 2s;
            }
            .animation-delay-4000 {
                animation-delay: 4s;
            }
        `}),a.jsx("canvas",{ref:s,className:"fixed inset-0 z-0 pointer-events-none opacity-60"}),a.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 md:px-12 py-12 flex-grow w-full space-y-24",children:[a.jsxs("div",{className:`mt-8 ${R()}`,children:[a.jsx("h1",{className:"text-6xl md:text-8xl font-black text-slate-900 mb-8 leading-tight tracking-tighter max-w-5xl flex items-center flex-wrap gap-2",children:a.jsx(ft,{id:"home_hero_title",defaultText:"Fanra is here.",isAdmin:e,tag:"span",className:"inline-block"})}),a.jsx("div",{className:"max-w-5xl mt-16 relative",children:a.jsxs("div",{className:"grid md:grid-cols-5 gap-12 items-start",children:[a.jsxs("div",{className:"md:col-span-3 space-y-4",children:[a.jsx(ft,{id:"home_about_title",defaultText:"Physics Student & Tech Enthusiast.",isAdmin:e,tag:"h2",className:"text-2xl font-bold text-slate-900 leading-tight"}),a.jsx(ft,{id:"home_about_desc",defaultText:"Irfan Rizki Aditri (Fanra) merupakan mahasiswa Fisika angkatan 2025 di Institut Teknologi Sumatera (ITERA). Platform ini dikembangkan sebagai sarana dokumentasi akademik dan eksplorasi teknologi di sela kesibukan perkuliahan.",isAdmin:e,tag:"p",multiline:!0,className:"text-slate-600 text-lg leading-relaxed font-medium"})]}),a.jsxs("div",{className:"md:col-span-2 flex flex-col gap-4 pt-2",children:[a.jsxs("div",{className:"flex items-center gap-4 group",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14614/14614573.png",alt:"Physics",className:"w-6 h-6 object-contain"})}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Physics Major"}),a.jsx("span",{className:"text-sm text-slate-500 block",children:"Institut Teknologi Sumatera '25"})]})]}),a.jsxs("div",{className:"flex items-center gap-4 group",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/2120/2120483.png",alt:"AI & Dev",className:"w-6 h-6 object-contain"})}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Interests"}),a.jsx("span",{className:"text-sm text-slate-500 block",children:"AI & Web Development"})]})]}),a.jsxs("div",{className:"flex items-center gap-4 group",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3037/3037821.png",alt:"Location",className:"w-6 h-6 object-contain"})}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Based In"}),a.jsx("span",{className:"text-sm text-slate-500 block",children:"Sumatera, Indonesia"})]})]})]})]})})]}),a.jsxs("div",{className:`grid md:grid-cols-2 gap-8 ${R("delay-200")}`,children:[a.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-8 md:p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer",onClick:()=>n("/projects"),children:[a.jsxs("div",{className:"flex items-start justify-between mb-8",children:[a.jsx("div",{className:"w-14 h-14 bg-slate-50 border border-slate-200 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm",children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3310/3310054.png",alt:"Projects",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-slate-100 px-3 py-1 rounded-full",children:"Projects"})]}),a.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-3",children:"Projects & Tools"}),a.jsx("p",{className:"text-slate-500 mb-6 text-base leading-relaxed",children:"Eksperimen digital yang mencakup pengembangan Fanra AI Studio serta berbagai alat bantu sederhana."}),a.jsxs("div",{className:"flex items-center text-sm font-bold text-blue-600 group-hover:translate-x-2 transition-transform",children:["View Projects ",a.jsx($i,{className:"w-5 h-5 ml-2"})]})]}),a.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-8 md:p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer flex flex-col",onClick:()=>n("/blog"),children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsx("div",{className:"w-14 h-14 bg-slate-50 border border-slate-200 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm",children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1170/1170221.png",alt:"Blog",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-slate-100 px-3 py-1 rounded-full",children:"Blog"})]}),a.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Recent Stories"}),a.jsx("div",{className:"space-y-4 flex-1",children:!g&&c.length>0?c.map(I=>a.jsxs("div",{className:"border-l-2 border-slate-200 pl-4 hover:border-slate-900 transition-colors",children:[a.jsx("h4",{className:"font-bold text-slate-800 text-sm line-clamp-1",children:I.title}),a.jsx("p",{className:"text-xs text-slate-400 mt-1 line-clamp-1",children:I.subtitle})]},I.id)):a.jsx("p",{className:"text-slate-400 text-sm italic",children:"Belum ada tulisan terbaru."})}),a.jsxs("div",{className:"mt-6 flex items-center text-sm font-bold text-slate-600 group-hover:text-slate-900 group-hover:translate-x-2 transition-transform",children:["Read Blog ",a.jsx($i,{className:"w-5 h-5 ml-2"})]})]})]}),(S.length>0||e)&&a.jsxs("div",{className:`relative group ${R("delay-300")}`,children:[e&&a.jsx("div",{className:"absolute -top-3 right-4 z-20",children:a.jsxs("button",{onClick:I=>{I.stopPropagation(),v(!b)},className:"px-3 py-1 bg-slate-900 text-white text-[10px] font-bold uppercase tracking-widest rounded-full shadow-lg hover:bg-slate-700 transition-colors flex items-center gap-2",children:[a.jsx(Xi,{className:"w-3 h-3"})," Edit Featured"]})}),b&&a.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/50 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>v(!1),children:a.jsxs("div",{className:"bg-white rounded-3xl p-6 w-full max-w-md shadow-2xl",onClick:I=>I.stopPropagation(),children:[a.jsx("h4",{className:"text-sm font-bold uppercase tracking-widest text-slate-400 mb-4",children:"Select Featured (Max 3)"}),a.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto no-scrollbar mb-4",children:Ml.map(I=>a.jsxs("button",{onClick:()=>V(I.id),className:`w-full flex items-center gap-3 p-3 rounded-xl border transition-all ${w.includes(I.id)?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[a.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center ${w.includes(I.id)?"border-blue-500 bg-blue-500 text-white":"border-slate-300"}`,children:w.includes(I.id)&&a.jsx(Vr,{className:"w-3 h-3"})}),a.jsx("span",{className:"text-sm font-bold truncate",children:I.defaultTitle})]},I.id))}),a.jsx("button",{onClick:j,className:"w-full py-3 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 transition-colors",children:"Save Changes"})]})}),a.jsx("div",{className:"bg-white border border-slate-200 rounded-[2.5rem] p-2 shadow-sm hover:shadow-xl transition-all duration-500 overflow-hidden",children:a.jsxs("div",{className:"bg-slate-50 rounded-[2rem] p-8 md:p-12 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute -top-[40%] -left-[20%] w-[70%] h-[70%] rounded-full bg-blue-200/30 mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),a.jsx("div",{className:"absolute top-[10%] -right-[20%] w-[70%] h-[70%] rounded-full bg-purple-200/30 mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),a.jsx("div",{className:"absolute -bottom-[40%] left-[20%] w-[70%] h-[70%] rounded-full bg-pink-200/30 mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/11818/11818064.png",className:"w-5 h-5 object-contain animate-pulse",alt:"Featured"}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400",children:"Featured Project"})]}),g?a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 md:gap-16 animate-pulse",children:[a.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 bg-slate-200 rounded-3xl shrink-0"}),a.jsxs("div",{className:"flex-1 w-full",children:[a.jsx("div",{className:"h-8 bg-slate-200 rounded-full w-3/4 mb-4"}),a.jsx("div",{className:"h-4 bg-slate-200 rounded-full w-full mb-2"}),a.jsx("div",{className:"h-4 bg-slate-200 rounded-full w-5/6 mb-8"}),a.jsx("div",{className:"h-12 bg-slate-200 rounded-full w-40"})]})]}):S.length===1?a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 md:gap-16",children:[a.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 bg-white rounded-3xl shadow-lg flex items-center justify-center shrink-0 p-6",children:a.jsx("img",{src:S[0].iconUrl,alt:"Icon",className:"w-full h-full object-contain"})}),a.jsxs("div",{className:"flex-1 text-center md:text-left",children:[a.jsx("h3",{className:"text-3xl md:text-4xl font-black text-slate-900 mb-4 tracking-tight",children:S[0].defaultTitle}),a.jsx("p",{className:"text-slate-500 text-lg leading-relaxed mb-8 max-w-2xl",children:S[0].defaultDesc}),a.jsxs("button",{onClick:()=>{Cs("project",S[0].id,"Featured Click"),n(`/projects/${S[0].id}`)},className:"inline-flex items-center gap-2 px-8 py-3 bg-slate-900 text-white rounded-full font-bold text-sm hover:bg-slate-800 transition-all hover:-translate-y-1 shadow-lg shadow-slate-900/20",children:[S[0].buttonText," ",a.jsx($i,{className:"w-4 h-4"})]})]})]}):a.jsx("div",{className:`grid gap-6 ${S.length===2?"md:grid-cols-2":"md:grid-cols-3"}`,children:S.map(I=>a.jsxs("div",{onClick:()=>{Cs("project",I.id,"Featured Click"),n(`/projects/${I.id}`)},className:"bg-white p-6 rounded-3xl border border-slate-100 hover:border-blue-200 hover:shadow-lg transition-all cursor-pointer group/item flex flex-col items-center text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-2xl flex items-center justify-center mb-4 group-hover/item:scale-110 transition-transform",children:a.jsx("img",{src:I.iconUrl,className:"w-6 h-6 object-contain"})}),a.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:I.defaultTitle}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 mb-4",children:I.defaultDesc}),a.jsx("span",{className:"mt-auto text-[10px] font-bold uppercase tracking-wider text-blue-600 opacity-0 group-hover/item:opacity-100 transition-opacity",children:"View Details"})]},I.id))})]})]})})]}),a.jsxs("div",{className:`bg-slate-50 border border-slate-200 rounded-[2.5rem] p-8 md:p-10 relative overflow-hidden group ${R("delay-500")}`,children:[a.jsx("div",{className:"flex justify-between items-end mb-8 relative z-10 px-2",children:a.jsxs("div",{className:"cursor-pointer",onClick:()=>n("/gallery"),children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/16566/16566085.png",alt:"Icon",className:"w-8 h-8 object-contain"}),a.jsx("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-yellow-500 via-green-500 to-blue-600",children:"Visual Diaries"})]}),a.jsx("p",{className:"text-sm text-slate-500",children:"Arsip dokumentasi momen visual."})]})}),a.jsx("div",{ref:l,className:"flex gap-3 overflow-x-auto no-scrollbar pb-2 items-center cursor-grab active:cursor-grabbing",children:g?Array(6).fill(0).map((I,C)=>a.jsx("div",{className:"w-32 h-32 md:w-44 md:h-44 flex-shrink-0 rounded-xl bg-slate-200 animate-pulse"},C)):d.length>0?d.map((I,C)=>a.jsxs("div",{className:"w-32 h-32 md:w-44 md:h-44 flex-shrink-0 rounded-xl overflow-hidden bg-slate-200 shadow-sm border border-slate-100 relative group/item cursor-pointer",onClick:()=>n("/gallery"),children:[a.jsx("img",{src:I.src,alt:"Gallery",className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover/item:opacity-100 transition-opacity"})]},`${I.id}-${C}`)):a.jsx("div",{className:"w-full h-32 flex items-center justify-center text-slate-400 text-sm italic border-2 border-dashed border-slate-200 rounded-2xl",children:"Galeri masih kosong."})})]}),a.jsxs("div",{className:`relative rounded-[3rem] overflow-hidden bg-white border border-slate-200 p-12 md:p-16 text-center shadow-xl ${R("delay-700")}`,children:[a.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto",children:[a.jsx(ft,{id:"home_cta_title",defaultText:"Let's Connect.",isAdmin:e,tag:"h2",className:"text-3xl md:text-5xl font-black mb-6 tracking-tight text-slate-900"}),a.jsx(ft,{id:"home_cta_desc",defaultText:"Terbuka untuk diskusi mengenai kolaborasi, ide proyek, atau sekadar bertukar wawasan seputar teknologi dan sains.",isAdmin:e,tag:"p",className:"text-slate-500 mb-10 text-lg max-w-lg mx-auto"}),a.jsxs("button",{onClick:()=>n("/messages"),className:"bg-slate-900 text-white px-10 py-4 rounded-full font-bold hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 text-lg shadow-lg shadow-slate-900/20 flex items-center gap-3 mx-auto",children:[a.jsx(LT,{className:"w-5 h-5"}),"Send Message"]})]}),a.jsx("div",{className:"absolute -top-24 -left-24 w-64 h-64 bg-blue-50 rounded-full blur-3xl opacity-50 pointer-events-none"}),a.jsx("div",{className:"absolute -bottom-24 -right-24 w-64 h-64 bg-purple-50 rounded-full blur-3xl opacity-50 pointer-events-none"})]})]})]})},Fa=({isOpen:t,title:e,description:n,onConfirm:r,onCancel:s,confirmText:i="Yes, Leave"})=>t?a.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:a.jsx("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl transform transition-all scale-100 animate-fade-in-up border border-slate-100",children:a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-amber-50 text-amber-500 rounded-full flex items-center justify-center mb-4 border border-amber-100",children:a.jsx(ha,{className:"w-6 h-6"})}),a.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:e}),a.jsx("p",{className:"text-sm text-slate-500 mb-6 leading-relaxed",children:n}),a.jsxs("div",{className:"flex w-full gap-3",children:[a.jsx("button",{onClick:s,className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 rounded-xl font-medium hover:bg-slate-50 transition-colors text-sm",children:"Cancel"}),a.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-colors shadow-lg shadow-red-500/20 text-sm",children:i})]})]})})}):null,_w=({isAdmin:t})=>{const{id:e}=Lg(),n=br(),[r,s]=L.useState([]),[i,o]=L.useState(!0),[l,c]=L.useState("list"),[u,d]=L.useState(null),m=6,[g,y]=L.useState(m),[w,x]=L.useState("add"),[b,v]=L.useState({}),[_,T]=L.useState(!1),[R,j]=L.useState([]),[V,S]=L.useState(null),[I,C]=L.useState(null),[A,F]=L.useState(""),[P,D]=L.useState(""),[M,q]=L.useState(null),[pe,ne]=L.useState(null),[ee,Q]=L.useState({x:0,y:0,visible:!1}),[ue,$]=L.useState(!1),[B,Z]=L.useState("url"),[he,ce]=L.useState(""),Pe=L.useRef(null),xe=L.useRef(null);L.useEffect(()=>{e?(c("detail"),o(!0),_m().then(te=>{const fe=decodeURIComponent(e);let Re=te.find(He=>He.title===fe);Re||(Re=te.find(He=>He.id===fe)),Re?(d(Re),s(te)):($e("Artikel tidak ditemukan."),n("/blog",{replace:!0})),o(!1)}).catch(te=>{console.error("Failed to load post:",te),o(!1)})):l!=="editor"&&(c("list"),Se())},[e]);const Se=async()=>{o(!0);try{const te=await _m();s(te)}catch(te){console.error("Failed to fetch blog posts",te)}finally{o(!1)}};L.useEffect(()=>{if(l==="editor"){const te=b.content||"";if(!te){j([{id:Date.now().toString(),type:"text",content:""}]);return}const fe=/(!image\(.*?\))/g,Re=te.split(fe),He=Re.map(tt=>{const Ft=tt.match(/^!image\((.*?)\)$/);return Ft?{id:Math.random().toString(36).substr(2,9),type:"image",content:Ft[1]}:{id:Math.random().toString(36).substr(2,9),type:"text",content:tt}}).filter(tt=>tt.type==="image"||tt.content.length>0||Re.length===1);He.length===0&&He.push({id:Date.now().toString(),type:"text",content:""}),j(He)}},[l,b.id]);const Ce=te=>{if(te){const fe=window.scrollY,Re=window.scrollX;te.style.height="auto",te.style.height=`${te.scrollHeight}px`,window.scrollTo(Re,fe)}};L.useEffect(()=>{l==="editor"&&(Ce(Pe.current),Ce(xe.current))},[l,b.title,b.subtitle]),L.useEffect(()=>{const te=()=>{ee.visible&&Q({...ee,visible:!1})};return window.addEventListener("click",te),()=>window.removeEventListener("click",te)},[ee]);const We=()=>{y(te=>te+m)},Oe=()=>{y(m);const te=document.getElementById("blog-top");te&&te.scrollIntoView({behavior:"smooth"})},Ze=()=>{x("add"),v({title:"",subtitle:"",category:"Category",date:new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),readTime:"5 min read",author:"Fanra",image:"",content:"",timestamp:Date.now(),sources:[]}),F(""),D(""),c("editor"),window.scrollTo(0,0)},ot=(te,fe)=>{te.stopPropagation(),x("edit"),v({...fe,sources:fe.sources||[]}),F(""),D(""),c("editor"),window.scrollTo(0,0)},N=(te,fe)=>{te.stopPropagation(),q(fe)},ae=async()=>{if(!M)return;const te=M;ne(te),q(null);try{await a3(te),s(fe=>fe.filter(Re=>Re.id!==te)),(u==null?void 0:u.id)===te&&n("/blog"),$e("Artikel berhasil dihapus.")}catch{$e("Gagal menghapus artikel."),Se()}finally{ne(null)}},X=async()=>{if(!b.title){$e("Judul wajib diisi.");return}const te=R.map(fe=>fe.type==="image"?`

!image(${fe.content})

`:fe.content).join("").trim();if(!te){$e("Konten tidak boleh kosong.");return}T(!0);try{const fe={...b,content:te,image:b.image||"https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop"};w==="add"?await i3(fe):b.id&&await o3(b.id,fe),$e(w==="add"?"Artikel berhasil diterbitkan!":"Artikel berhasil diperbarui!"),c("list"),Se()}catch(fe){console.error(fe),$e("Gagal menyimpan artikel.")}finally{T(!1)}},z=()=>{if(!A.trim()||!P.trim())return;const te={label:A.trim(),url:P.trim()},fe=[...b.sources||[],te];v(Re=>({...Re,sources:fe})),F(""),D("")},O=te=>{const fe=(b.sources||[]).filter((Re,He)=>He!==te);v(Re=>({...Re,sources:fe}))},H=te=>{var Re;const fe=(Re=te.target.files)==null?void 0:Re[0];if(fe){const He=new FileReader;He.onloadend=()=>{const tt=He.result;v(Ft=>({...Ft,image:tt}))},He.readAsDataURL(fe)}},oe=te=>{Cs("blog",te.id||"unknown",te.title),n(`/blog/${encodeURIComponent(te.title)}`)},le=(te,fe)=>{te.preventDefault();const Re=te.target;S(fe),C(Re.selectionStart),Q({x:te.pageX,y:te.pageY,visible:!0})},J=()=>{Q({...ee,visible:!1}),ce(""),Z("url"),$(!0)},me=te=>{var Re;const fe=(Re=te.target.files)==null?void 0:Re[0];if(fe){const He=new FileReader;He.onloadend=()=>{const tt=He.result;ce(tt)},He.readAsDataURL(fe)}},_e=()=>{if(!he||!V){$(!1);return}const te=R.findIndex(Kt=>Kt.id===V);if(te===-1)return;const fe=R[te],Re=fe.content.slice(0,I||fe.content.length),He=fe.content.slice(I||fe.content.length),tt=[...R];tt[te]={...fe,content:Re};const Ft={id:Date.now().toString(),type:"image",content:he},xt={id:(Date.now()+1).toString(),type:"text",content:He};tt.splice(te+1,0,Ft,xt),j(tt),$(!1),ce("")},K=(te,fe)=>{j(Re=>Re.map(He=>He.id===te?{...He,content:fe}:He))},re=te=>{confirm("Hapus elemen ini?")&&j(fe=>fe.filter((Re,He)=>He!==te))},be=te=>te?te.split(`
`).map((fe,Re)=>{if(!fe.trim())return a.jsx("br",{},Re);const He=fe.match(/^!image\((.*?)\)$/);if(He)return a.jsx("div",{className:"my-8",children:a.jsx("img",{src:He[1],alt:"Content Illustration",className:"w-full rounded-xl shadow-lg border border-slate-100"})},Re);const tt=/(\\\(.*?\\\)|\\\[.*?\\\])/g,Ft=fe.split(tt);return a.jsx("p",{className:"mb-6 text-slate-700 leading-8 text-lg",children:Ft.map((xt,Kt)=>{if(xt.startsWith("\\(")&&xt.endsWith("\\)")){const un=xt.slice(2,-2);try{if(window.katex){const Ut=window.katex.renderToString(un,{throwOnError:!1,displayMode:!1});return a.jsx("span",{dangerouslySetInnerHTML:{__html:Ut},className:"mx-1"},Kt)}return a.jsx("span",{className:"font-mono bg-yellow-100 px-1 rounded",children:un},Kt)}catch{return xt}}if(xt.startsWith("\\[")&&xt.endsWith("\\]")){const un=xt.slice(2,-2);try{if(window.katex){const Ut=window.katex.renderToString(un,{throwOnError:!1,displayMode:!0});return a.jsx("div",{dangerouslySetInnerHTML:{__html:Ut},className:"my-4 text-center overflow-x-auto py-2"},Kt)}return a.jsx("div",{className:"font-mono bg-yellow-100 p-2 rounded my-2 text-center",children:un},Kt)}catch{return xt}}return a.jsx("span",{children:xt},Kt)})},Re)}):null,Ne=r.slice(0,g),ht=g<r.length,Pt=g>m,gt=()=>u?r.filter(te=>te.id!==u.id).slice(0,2):[];if(l==="editor")return a.jsxs("div",{className:"min-h-screen bg-slate-100 animate-fade-in relative pb-20",children:[a.jsxs("div",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur-md border-b border-slate-200 px-6 py-4 flex items-center justify-between shadow-sm",children:[a.jsxs("button",{onClick:()=>c("list"),className:"flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 transition-colors px-4 py-2 rounded-xl hover:bg-slate-100 border border-transparent hover:border-slate-200",children:[a.jsx(er,{className:"w-4 h-4"}),"Cancel"]}),a.jsx("span",{className:"text-sm font-black text-slate-400 uppercase tracking-widest hidden md:block",children:w==="add"?"Creating New Story":"Editing Mode"}),a.jsxs("button",{onClick:X,disabled:_,className:"bg-slate-900 text-white px-6 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[_?a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(Vr,{className:"w-4 h-4"}),_?"Publishing...":"Publish"]})]}),a.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:a.jsxs("div",{className:"bg-white shadow-xl shadow-slate-200/50 rounded-3xl p-8 md:p-12 border border-slate-200",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-5 mb-8 p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Kategori"}),a.jsx("input",{type:"text",value:b.category,onChange:te=>v(fe=>({...fe,category:te.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors",placeholder:"Science..."})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Penulis"}),a.jsx("input",{type:"text",value:b.author,onChange:te=>v(fe=>({...fe,author:te.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu Baca"}),a.jsx("input",{type:"text",value:b.readTime,onChange:te=>v(fe=>({...fe,readTime:te.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Tanggal"}),a.jsx("input",{type:"text",value:b.date,onChange:te=>v(fe=>({...fe,date:te.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]})]}),a.jsxs("div",{className:"space-y-6 mb-10 pb-10 border-b border-dashed border-slate-200",children:[a.jsx("textarea",{ref:Pe,rows:1,value:b.title||"",onChange:te=>v(fe=>({...fe,title:te.target.value})),className:"w-full text-4xl md:text-5xl font-black text-slate-900 bg-transparent border-b-2 border-transparent focus:border-slate-200 outline-none placeholder:text-slate-300 resize-none overflow-hidden leading-tight py-2 transition-colors",placeholder:"Judul Utama Artikel..."}),a.jsx("textarea",{ref:xe,rows:1,value:b.subtitle||"",onChange:te=>v(fe=>({...fe,subtitle:te.target.value})),className:"w-full text-xl font-medium text-slate-500 bg-transparent border-b border-transparent focus:border-slate-200 outline-none placeholder:text-slate-300 resize-none overflow-hidden leading-relaxed py-2 transition-colors",placeholder:"Tulis subtitle atau ringkasan menarik di sini..."})]}),a.jsxs("div",{className:"mb-10 group relative p-4 rounded-3xl border-2 border-dashed border-slate-200 hover:border-blue-400 transition-colors bg-slate-50/50",children:[a.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-3 text-center",children:"Cover Image"}),a.jsxs("div",{className:"w-full aspect-video rounded-2xl overflow-hidden shadow-sm bg-white border border-slate-100 flex flex-col items-center justify-center relative",children:[b.image?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:b.image,alt:"Cover",className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:a.jsxs("div",{className:"text-white font-bold flex items-center gap-2",children:[a.jsx(Xi,{className:"w-5 h-5"})," Ganti Gambar"]})})]}):a.jsxs("div",{className:"text-center p-8",children:[a.jsx(rs,{className:"w-8 h-8 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-400 font-bold text-sm",children:"Upload Cover Image"})]}),a.jsx("input",{type:"file",accept:"image/*",onChange:H,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),a.jsx("input",{type:"text",value:b.image||"",onChange:te=>v(fe=>({...fe,image:te.target.value})),placeholder:"...atau tempel URL gambar disini",className:"w-full mt-4 text-xs text-slate-500 bg-white border border-slate-200 rounded-lg px-3 py-2 outline-none focus:border-blue-400 transition-colors text-center"})]}),a.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-100 p-4 rounded-xl text-xs text-blue-800 flex flex-col gap-2",children:[a.jsxs("p",{className:"font-bold flex items-center gap-2",children:[a.jsx(Hv,{className:"w-4 h-4"})," Panduan Editor:"]}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 opacity-80",children:[a.jsxs("li",{children:["Gunakan ",a.jsx("code",{children:"\\( rumus \\)"})," untuk matematika inline."]}),a.jsxs("li",{children:["Gunakan ",a.jsx("code",{children:"\\[ rumus \\]"})," untuk matematika blok."]}),a.jsxs("li",{children:[a.jsx("b",{children:"Klik Kanan"})," di area teks untuk menyisipkan gambar di tengah paragraf."]})]})]}),a.jsxs("div",{className:"relative space-y-2",children:[R.map((te,fe)=>a.jsx("div",{className:"relative group/block",children:te.type==="text"?a.jsx("textarea",{value:te.content,onChange:Re=>{K(te.id,Re.target.value),Ce(Re.target)},onFocus:Re=>Ce(Re.target),onContextMenu:Re=>le(Re,te.id),className:"w-full text-lg leading-9 text-slate-800 bg-transparent border-none outline-none placeholder:text-slate-300 resize-none font-serif transition-colors overflow-hidden focus:bg-slate-50 rounded-lg px-2",placeholder:fe===0?"Mulai menulis cerita Anda di sini...":"Lanjutkan menulis...",rows:1}):a.jsxs("div",{className:"relative my-4 group/image",children:[a.jsx("div",{className:"rounded-xl overflow-hidden shadow-lg border border-slate-200 bg-slate-50",children:a.jsx("img",{src:te.content,alt:"Inline",className:"w-full h-auto object-contain max-h-[500px]"})}),a.jsx("button",{onClick:()=>re(fe),className:"absolute top-3 right-3 bg-red-500 text-white p-2 rounded-full shadow-md opacity-0 group-hover/image:opacity-100 transition-opacity hover:bg-red-600 hover:scale-110",title:"Hapus Gambar",children:a.jsx(gr,{className:"w-4 h-4"})})]})},te.id)),ee.visible&&a.jsx("div",{className:"fixed z-50 bg-white border border-slate-200 rounded-lg shadow-xl py-1 w-48 animate-fade-in",style:{top:ee.y,left:ee.x},children:a.jsxs("button",{onClick:J,className:"w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 hover:text-blue-600 flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-100 rounded flex items-center justify-center text-[10px]",children:""}),"Sisipkan Gambar"]})}),ue&&a.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-2xl w-full max-w-md animate-fade-in-up border border-slate-100",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Sisipkan Gambar"}),a.jsxs("div",{className:"flex gap-2 mb-4 bg-slate-100 p-1 rounded-xl",children:[a.jsx("button",{onClick:()=>Z("url"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${B==="url"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Link URL"}),a.jsx("button",{onClick:()=>Z("upload"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${B==="upload"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Upload File"})]}),B==="url"?a.jsx("input",{type:"text",value:he,onChange:te=>ce(te.target.value),placeholder:"https://example.com/image.jpg",className:"w-full border border-slate-200 rounded-xl px-4 py-3 text-sm mb-6 outline-none focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10 bg-slate-50 text-slate-900 placeholder:text-slate-400",autoFocus:!0}):a.jsxs("div",{className:"mb-6",children:[a.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-slate-300 border-dashed rounded-2xl cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors",children:[a.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[a.jsx(rs,{className:"w-8 h-8 text-slate-400 mb-2"}),a.jsx("p",{className:"text-xs text-slate-500 font-bold",children:"Klik untuk pilih file"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"JPG, PNG, WEBP (Max 2MB)"})]}),a.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:me})]}),he&&a.jsx("div",{className:"mt-2 text-center",children:a.jsxs("p",{className:"text-xs text-green-600 font-bold flex items-center justify-center gap-1",children:[a.jsx(Vr,{className:"w-3 h-3"})," File siap disisipkan"]})})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>$(!1),className:"px-5 py-2.5 text-xs font-bold text-slate-500 hover:bg-slate-100 rounded-xl transition-colors",children:"Batal"}),a.jsx("button",{onClick:_e,className:"px-6 py-2.5 text-xs font-bold bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-900/20 active:scale-95",children:"Sisipkan"})]})]})})]}),a.jsxs("div",{className:"mt-16 pt-10 border-t border-slate-200",children:[a.jsxs("h4",{className:"text-sm font-bold text-slate-800 uppercase tracking-widest mb-6 flex items-center gap-2",children:[a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/2420/2420165.png",alt:"Sources",className:"w-4 h-4 object-contain opacity-60"})," Referensi & Sumber"]}),a.jsx("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Nama Sumber"}),a.jsx("input",{type:"text",value:A,onChange:te=>F(te.target.value),placeholder:"Contoh: Wikipedia",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"URL Link"}),a.jsx("input",{type:"text",value:P,onChange:te=>D(te.target.value),placeholder:"https://...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),a.jsx("div",{children:a.jsx("button",{onClick:z,disabled:!A||!P,className:"w-full py-2 bg-slate-900 text-white rounded-lg text-sm font-bold hover:bg-slate-800 disabled:opacity-50 transition-all",children:"+ Tambah"})})]})}),b.sources&&b.sources.length>0&&a.jsx("div",{className:"space-y-2",children:b.sources.map((te,fe)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-xl hover:border-slate-300 transition-colors group",children:[a.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center shrink-0",children:a.jsx(tc,{className:"w-4 h-4"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:te.label}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:te.url})]})]}),a.jsx("button",{onClick:()=>O(fe),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:a.jsx(gr,{className:"w-4 h-4"})})]},fe))}),(!b.sources||b.sources.length===0)&&a.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"Belum ada sumber yang ditambahkan."})]})]})})]});if(l==="detail"&&u){const te=gt();return a.jsx("article",{className:"min-h-screen bg-white animate-fade-in pb-20",children:a.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-12",children:[a.jsxs("button",{onClick:()=>n("/blog"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[a.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:a.jsx(er,{className:"w-4 h-4"})}),"Kembali"]}),a.jsxs("header",{className:"mb-12",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-bold uppercase tracking-wider",children:u.category}),a.jsx("span",{className:"text-slate-400 text-sm font-medium",children:u.readTime})]}),a.jsx("h1",{className:"text-3xl md:text-5xl font-black text-slate-900 mb-6 leading-tight tracking-tight",children:u.title}),a.jsx("p",{className:"text-lg md:text-xl text-slate-500 leading-relaxed font-medium",children:u.subtitle}),a.jsxs("div",{className:"flex items-center gap-4 mt-8 pt-8 border-t border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-900 text-white flex items-center justify-center font-bold text-sm",children:u.author.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:u.author}),a.jsx("p",{className:"text-xs text-slate-500",children:u.date})]})]})]}),a.jsx("figure",{className:"mb-12",children:a.jsx("img",{src:u.image,alt:u.title,className:"w-full aspect-video object-cover rounded-2xl shadow-lg border border-slate-100"})}),a.jsx("div",{className:"prose prose-lg prose-slate max-w-none mb-16 font-serif",children:be(u.content)}),u.sources&&u.sources.length>0&&a.jsxs("div",{className:"border-t border-slate-100 pt-10 mb-16",children:[a.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx(tc,{className:"w-4 h-4"}),"Sumber Referensi"]}),a.jsx("ul",{className:"space-y-3",children:u.sources.map((fe,Re)=>a.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[a.jsxs("span",{className:"text-slate-300 font-bold select-none",children:[Re+1,"."]}),a.jsx("a",{href:fe.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline font-medium break-all",children:fe.label})]},Re))})]}),te.length>0&&a.jsxs("div",{className:"border-t-2 border-slate-100 pt-12",children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900 mb-6 flex items-center gap-3",children:[a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1170/1170221.png",alt:"Read Also",className:"w-6 h-6 object-contain opacity-60"}),"Baca Juga"]}),a.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:te.map(fe=>a.jsxs("div",{onClick:()=>oe(fe),className:"group cursor-pointer bg-slate-50 rounded-2xl p-4 border border-slate-100 hover:border-slate-300 hover:bg-white hover:shadow-lg transition-all",children:[a.jsx("div",{className:"aspect-video rounded-xl overflow-hidden mb-4 bg-slate-200",children:a.jsx("img",{src:fe.image,alt:fe.title,className:"w-full h-full object-cover opacity-90 group-hover:scale-105 transition-transform duration-500"})}),a.jsx("h4",{className:"font-bold text-slate-900 leading-tight mb-2 group-hover:text-blue-600 line-clamp-2",children:fe.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:fe.subtitle})]},fe.id))})]})]})})}return a.jsxs("div",{id:"blog-top",className:"max-w-7xl mx-auto px-6 py-12 animate-fade-in relative pb-24",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-16 gap-6",children:[a.jsxs("div",{className:"max-w-2xl",children:[a.jsx(ft,{id:"blog_header_title",defaultText:"Insights & Stories",isAdmin:t,tag:"h1",className:"text-4xl md:text-6xl font-black text-slate-900 mb-6 tracking-tight"}),a.jsx(ft,{id:"blog_header_desc",defaultText:"Kumpulan pemikiran mendalam, fakta sains, dan eksplorasi ide yang mungkin bikin lo begadang mikirin alam semesta.",isAdmin:t,tag:"p",multiline:!0,className:"text-lg text-slate-500 leading-relaxed"})]}),t&&a.jsxs("button",{onClick:Ze,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 whitespace-nowrap",children:[a.jsx(Hv,{className:"w-5 h-5"}),"Write Story"]})]}),a.jsx(Fa,{isOpen:!!M,title:"Hapus Artikel?",description:"Artikel ini akan dihapus permanen. Tindakan ini tidak bisa dibatalkan.",confirmText:"Ya, Hapus",onConfirm:ae,onCancel:()=>q(null)}),i&&a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[a.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),a.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Artikel..."})]}),!i&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[Ne.map(te=>a.jsxs("div",{onClick:()=>oe(te),className:"group cursor-pointer flex flex-col h-full relative",children:[a.jsxs("div",{className:"relative aspect-[4/3] bg-slate-100 rounded-[2rem] overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500 border border-slate-200",children:[a.jsx("img",{src:te.image,alt:te.title,loading:"lazy",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"}),t&&a.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2",children:[a.jsx("button",{onClick:fe=>ot(fe,te),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-blue-600 hover:bg-white transition-colors",children:a.jsx(Xi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:fe=>N(fe,te.id),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-red-500 hover:bg-white transition-colors",children:pe===te.id?a.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):a.jsx(gr,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 to-transparent pointer-events-none"}),a.jsx("div",{className:"absolute top-6 left-6",children:a.jsx("span",{className:"bg-white/90 backdrop-blur text-slate-900 text-[10px] font-bold px-3 py-1.5 rounded-full uppercase tracking-wider shadow-sm",children:te.category})})]}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium text-slate-400 mb-3",children:[a.jsx("span",{children:te.date}),a.jsx("span",{children:""}),a.jsx("span",{children:te.readTime})]}),a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3 leading-tight group-hover:text-blue-600 transition-colors",children:te.title}),a.jsx("p",{className:"text-slate-500 line-clamp-3 leading-relaxed mb-6",children:te.subtitle}),a.jsxs("div",{className:"mt-auto flex items-center text-sm font-bold text-slate-900 group-hover:translate-x-2 transition-transform duration-300",children:["Baca Selengkapnya ",a.jsx($i,{className:"w-4 h-4 ml-2"})]})]})]},te.id)),r.length<=m&&a.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-[2rem] flex flex-col items-center justify-center p-8 text-center min-h-[400px]",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4 text-slate-300",children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3018/3018445.png",alt:"Coming Soon",className:"w-8 h-8 object-contain opacity-50"})}),a.jsx(ft,{id:"blog_placeholder_title",defaultText:"Tulisan Mendatang",isAdmin:t,tag:"h3",className:"font-bold text-slate-400 mb-2"}),a.jsx(ft,{id:"blog_placeholder_desc",defaultText:"Artikel tentang AI Consciousness, Sejarah Internet, dan Psikologi Warna sedang ditulis...",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-slate-400 max-w-xs mx-auto"})]})]}),a.jsxs("div",{className:"flex flex-col items-center gap-3 mt-16 mb-8",children:[ht&&a.jsxs("button",{onClick:We,className:"px-6 py-3 rounded-full bg-white border border-slate-200 text-slate-700 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Artikel Lainnya ",a.jsx($n,{className:"w-4 h-4"})]}),Pt&&a.jsxs("button",{onClick:Oe,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Tutup / Sembunyikan ",a.jsx($n,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]})},bw=({isAdmin:t})=>{const e=br(),{photoId:n}=Lg(),[r,s]=L.useState([]),[i,o]=L.useState(!0),[l,c]=L.useState("All"),[u,d]=L.useState(null),m=9,[g,y]=L.useState(m),[w,x]=L.useState(!1),[b,v]=L.useState(!1),[_,T]=L.useState("add"),[R,j]=L.useState({}),[V,S]=L.useState(!1),I=L.useRef(null),[C,A]=L.useState(null),[F,P]=L.useState(null),[D,M]=L.useState(null),[q,pe]=L.useState(null),[ne,ee]=L.useState(!1),Q=async()=>{o(!0);try{const K=await H0();s(K)}catch(K){console.error("Failed to load photos",K)}finally{o(!1)}};L.useEffect(()=>{Q()},[]),L.useEffect(()=>{y(m)},[l]),L.useEffect(()=>{if(r.length>0)if(n){const K=r.find(re=>(re.caption?re.caption.toLowerCase().replace(/\s+/g,"-"):re.id)===n||re.id===n);K&&d(K)}else d(null)},[n,r]),L.useEffect(()=>(u?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[u]);const ue=["All",...Array.from(new Set(r.map(K=>K.year))).sort().reverse()],$=l==="All"?r:r.filter(K=>K.year===l),B=$.slice(0,g),Z=g<$.length,he=g>m,ce=B.reduce((K,re)=>(K[re.year]||(K[re.year]=[]),K[re.year].push(re),K),{}),Pe=Object.keys(ce).sort().reverse(),xe=u?$.findIndex(K=>K.id===u.id):-1,Se=xe<$.length-1,Ce=xe>0,We=K=>{K==null||K.stopPropagation(),Se&&Ze($[xe+1])},Oe=K=>{K==null||K.stopPropagation(),Ce&&Ze($[xe-1])},Ze=K=>{if(K){const re=K.caption?K.caption.toLowerCase().replace(/\s+/g,"-"):K.id;e(`/gallery/${re}`),Cs("photo",K.id||"unknown",K.caption||"Untitled Photo")}else ee(!1),setTimeout(()=>{e("/gallery")},500)};L.useEffect(()=>{u?requestAnimationFrame(()=>{requestAnimationFrame(()=>{ee(!0)})}):ee(!1)},[u]),L.useEffect(()=>{if(!u)return;const K=re=>{re.key==="ArrowRight"&&We(),re.key==="ArrowLeft"&&Oe(),re.key==="Escape"&&Ze(null),re.key==="Home"&&(re.preventDefault(),$.length>0&&Ze($[0])),re.key==="End"&&(re.preventDefault(),$.length>0&&Ze($[$.length-1]))};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[u,$]);const ot=()=>{y(K=>K+m)},N=()=>{y(m);const K=document.getElementById("gallery-top-anchor");K&&K.scrollIntoView({behavior:"smooth"})},ae=()=>{x(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{v(!0)})})},X=()=>{v(!1),setTimeout(()=>{x(!1)},500)},z=()=>{T("add"),j({src:"",caption:"",month:"Januari",year:new Date().getFullYear().toString(),timestamp:Date.now()}),ae()},O=(K,re)=>{K.stopPropagation(),T("edit"),j({...re}),ae()},H=(K,re)=>{K.stopPropagation(),re&&pe(re)},oe=(K,re)=>{K.stopPropagation(),A(re),I.current&&(I.current.value="",I.current.click())},le=K=>{var be;const re=(be=K.target.files)==null?void 0:be[0];if(re&&C){const Ne=C;P(Ne);const ht=new FileReader;ht.onloadend=async()=>{const Pt=ht.result;try{await gw(Ne,{src:Pt}),s(gt=>gt.map(te=>te.id===Ne?{...te,src:Pt}:te)),u&&u.id===Ne&&d(gt=>gt?{...gt,src:Pt}:null),$e("Foto berhasil diganti!")}catch(gt){console.error("Gagal ganti foto:",gt),$e("Gagal mengganti foto.")}finally{P(null),A(null)}},ht.readAsDataURL(re)}},J=async()=>{if(!q)return;const K=q;M(K),pe(null);try{await r3(K),s(re=>re.filter(be=>be.id!==K)),(u==null?void 0:u.id)===K&&Ze(null),$e("Foto berhasil dihapus.")}catch(re){console.error(re),$e("Gagal menghapus foto. Cek koneksi internet."),Q()}finally{M(null)}},me=async()=>{if(!R.src||!R.year){$e("Gambar dan Tahun wajib diisi.");return}S(!0);try{_==="add"?await n3(R):R.id&&(await gw(R.id,R),u&&u.id===R.id&&d(R)),X(),$e(_==="add"?"Foto ditambahkan!":"Foto diperbarui!"),Q()}catch(K){console.error(K),$e("Gagal menyimpan data.")}finally{S(!1)}},_e=K=>{var be;const re=(be=K.target.files)==null?void 0:be[0];if(re){const Ne=new FileReader;Ne.onloadend=()=>{const ht=Ne.result;j(Pt=>({...Pt,src:ht}))},Ne.readAsDataURL(re)}};return L.useEffect(()=>{const K=new IntersectionObserver(be=>{be.forEach(Ne=>{Ne.isIntersecting&&(Ne.target.classList.add("opacity-100","translate-y-0"),Ne.target.classList.remove("opacity-0","translate-y-10"),K.unobserve(Ne.target))})},{threshold:.1});return document.querySelectorAll(".scroll-reveal").forEach(be=>K.observe(be)),()=>K.disconnect()},[r,g,l]),a.jsxs("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:[a.jsx("input",{type:"file",ref:I,onChange:le,accept:"image/*",className:"hidden"}),a.jsx(Fa,{isOpen:!!q,title:"Hapus Memori?",description:"Foto ini akan dihapus secara permanen dari galeri. Tindakan ini tidak dapat dibatalkan.",confirmText:"Ya, Hapus",onConfirm:J,onCancel:()=>pe(null)}),a.jsxs("div",{id:"gallery-top-anchor",className:"max-w-7xl mx-auto px-6 pt-12 pb-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-slate-900 mb-4 tracking-tight",children:["Visual ",a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Diaries"})]}),a.jsx("p",{className:"text-lg text-slate-500 max-w-2xl leading-relaxed",children:"Koleksi momen acak, dikelompokkan berdasarkan waktu."})]}),t&&a.jsxs("button",{onClick:z,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95",children:[a.jsx(rs,{className:"w-5 h-5"}),"Add Memory"]})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-8",children:ue.map(K=>a.jsx("button",{onClick:()=>c(K),className:`px-5 py-2 rounded-full text-sm font-bold transition-all duration-300 ${l===K?"bg-slate-900 text-white shadow-lg shadow-slate-900/20":"bg-slate-50 text-slate-500 hover:bg-slate-100 hover:text-slate-900"}`,children:K},K))})]}),a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[i&&a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[a.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),a.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Galeri..."})]}),!i&&$.length===0&&a.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[a.jsx(nc,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada foto di periode ini."})]}),!i&&B.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-16",children:Pe.map(K=>a.jsxs("div",{className:"animate-fade-in-up",children:[a.jsxs("div",{className:"flex items-center gap-6 mb-8 mt-4",children:[a.jsx("span",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tighter",children:K}),a.jsx("div",{className:"h-0.5 bg-slate-200 flex-1 rounded-full opacity-50"})]}),a.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-3 gap-6 space-y-6",children:ce[K].map(re=>a.jsxs("div",{className:"break-inside-avoid relative group cursor-pointer rounded-2xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-lg transition-all duration-700 transform translate-z-0 scroll-reveal opacity-0 translate-y-10",onClick:()=>Ze(re),children:[F===re.id&&a.jsxs("div",{className:"absolute inset-0 z-30 bg-slate-900/50 backdrop-blur-sm flex flex-col items-center justify-center",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-white/30 border-t-white rounded-full animate-spin mb-2"}),a.jsx("span",{className:"text-white text-[10px] font-bold uppercase tracking-wider",children:"Mengganti..."})]}),a.jsx("img",{src:re.src,alt:re.caption,loading:"lazy",className:"w-full h-auto object-cover transform transition-transform duration-700 group-hover:scale-105"}),t&&a.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:be=>oe(be,re.id),className:"p-2.5 bg-white text-slate-700 rounded-full shadow-md hover:bg-green-50 hover:text-green-600 transition-colors border border-slate-100",title:"Ganti Foto (Quick Swap)",children:a.jsx(da,{className:"w-4 h-4"})}),a.jsx("button",{onClick:be=>O(be,re),className:"p-2.5 bg-white text-slate-700 rounded-full shadow-md hover:bg-blue-50 hover:text-blue-600 transition-colors border border-slate-100",title:"Edit Caption & Info",children:a.jsx(Xi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:be=>H(be,re.id),disabled:D===re.id,className:`p-2.5 bg-white rounded-full shadow-md transition-colors border border-slate-100 ${D===re.id?"text-slate-300 cursor-wait":"text-red-500 hover:bg-red-50"}`,title:"Hapus",children:D===re.id?a.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):a.jsx(gr,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsx("div",{className:"absolute bottom-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:a.jsx("span",{className:"bg-black/30 backdrop-blur-md text-white text-[10px] font-bold px-3 py-1.5 rounded-full border border-white/20 uppercase tracking-widest shadow-sm",children:re.month})})]},re.id||re.src))})]},K))}),a.jsxs("div",{className:"flex flex-col items-center gap-3 mt-20 mb-8",children:[Z&&a.jsxs("button",{onClick:ot,className:"px-6 py-3 rounded-full bg-white border border-slate-200 text-slate-700 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Momen Terdahulu ",a.jsx($n,{className:"w-4 h-4"})]}),he&&a.jsxs("button",{onClick:N,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Tutup / Sembunyikan ",a.jsx($n,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]}),u&&wT.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[100000] flex items-end justify-center pointer-events-none",children:[a.jsx("div",{className:`fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity duration-500 ease-in-out pointer-events-auto ${ne?"opacity-100":"opacity-0"}`,onClick:()=>Ze(null)}),a.jsxs("div",{className:`
                            w-full h-[95vh] md:h-[90vh] bg-white rounded-t-[2.5rem] shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.2)] 
                            overflow-hidden transform transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1) pointer-events-auto relative flex flex-col
                            ${ne?"translate-y-0":"translate-y-full"}
                        `,onClick:K=>K.stopPropagation(),children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 h-8 flex justify-center pt-3 z-20 bg-white cursor-pointer",onClick:()=>Ze(null),children:a.jsx("div",{className:"w-12 h-1.5 bg-slate-200 rounded-full"})}),a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative w-full h-full p-4 md:p-8 pt-12",children:[a.jsxs("div",{className:"flex-1 w-full h-full flex items-center justify-center relative min-h-0",children:[Ce&&a.jsx("button",{onClick:Oe,className:"absolute left-0 md:left-4 top-1/2 -translate-y-1/2 z-[100001] p-3 bg-white/80 hover:bg-white text-slate-800 rounded-full shadow-lg border border-slate-200 transition-all hover:scale-110 active:scale-95 group hidden md:block",title:"Sebelumnya (Arrow Left)",children:a.jsx(er,{className:"w-6 h-6"})}),Se&&a.jsx("button",{onClick:We,className:"absolute right-0 md:right-4 top-1/2 -translate-y-1/2 z-[100001] p-3 bg-white/80 hover:bg-white text-slate-800 rounded-full shadow-lg border border-slate-200 transition-all hover:scale-110 active:scale-95 group hidden md:block",title:"Selanjutnya (Arrow Right)",children:a.jsx(er,{className:"w-6 h-6 rotate-180"})}),F===u.id&&a.jsxs("div",{className:"absolute inset-0 z-30 bg-slate-900/50 backdrop-blur-sm flex flex-col items-center justify-center",children:[a.jsx("div",{className:"w-10 h-10 border-4 border-white/30 border-t-white rounded-full animate-spin mb-3"}),a.jsx("span",{className:"text-white text-xs font-bold uppercase tracking-wider",children:"Updating..."})]}),a.jsx("img",{src:u.src,alt:u.caption,className:"max-w-full max-h-full object-contain shadow-2xl rounded-lg"})]}),a.jsxs("div",{className:"w-full max-w-3xl mx-auto mt-6 text-center shrink-0 pb-8 animate-fade-in-up",children:[a.jsxs("p",{className:"text-lg md:text-xl text-slate-900 font-medium leading-relaxed",children:['"',u.caption,'"']}),a.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:a.jsxs("div",{className:"inline-block px-3 py-1 bg-slate-100 rounded-full text-slate-600 text-xs font-bold uppercase tracking-widest border border-slate-200",children:[u.month," ",u.year]})}),t&&a.jsxs("div",{className:"flex justify-center gap-3 mt-6 pt-6 border-t border-slate-100",children:[a.jsxs("button",{onClick:K=>oe(K,u.id),className:"px-4 py-2 bg-green-50 text-green-700 hover:bg-green-100 rounded-lg text-xs font-bold flex items-center gap-2 transition-colors border border-green-100",children:[a.jsx(da,{className:"w-3.5 h-3.5"})," Ganti Foto"]}),a.jsxs("button",{onClick:K=>O(K,u),className:"px-4 py-2 bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg text-xs font-bold flex items-center gap-2 transition-colors border border-blue-100",children:[a.jsx(Xi,{className:"w-3.5 h-3.5"})," Edit Info"]}),a.jsxs("button",{onClick:K=>H(K,u.id),className:"px-4 py-2 bg-red-50 text-red-700 hover:bg-red-100 rounded-lg text-xs font-bold flex items-center gap-2 transition-colors border border-red-100",children:[a.jsx(gr,{className:"w-3.5 h-3.5"})," Hapus"]})]})]})]})]})]}),document.body),w&&a.jsxs("div",{className:"fixed inset-0 z-[120] flex items-start justify-center pointer-events-none",children:[a.jsx("div",{className:`fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity duration-500 ease-in-out pointer-events-auto ${b?"opacity-100":"opacity-0"}`,onClick:X}),a.jsxs("div",{className:`
                            w-full h-[96vh] bg-white rounded-b-[2rem] shadow-2xl 
                            overflow-hidden transform transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1) pointer-events-auto relative flex flex-col
                            ${b?"translate-y-0":"-translate-y-full"}
                        `,children:[a.jsx("div",{className:"flex-1 overflow-y-auto px-6 pt-10 pb-6 md:px-10 md:pt-10 md:pb-2",children:a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[a.jsx("h3",{className:"text-3xl font-black text-slate-900 tracking-tight",children:_==="add"?"New Memory":"Edit Memory"}),a.jsx("button",{onClick:X,className:"w-10 h-10 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-900 transition-colors",children:""})]}),a.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-8 min-h-0",children:[a.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 tracking-wide",children:"Image Source"}),a.jsx("div",{className:"flex gap-2",children:a.jsxs("label",{className:"flex-1 cursor-pointer bg-slate-50 hover:bg-blue-50 border border-slate-200 hover:border-blue-200 text-slate-600 hover:text-blue-600 rounded-xl px-4 py-3 flex items-center justify-center gap-2 transition-all group",children:[a.jsx(rs,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-bold",children:"Upload File"}),a.jsx("input",{type:"file",accept:"image/*",onChange:_e,className:"hidden"})]})}),a.jsx("div",{className:"mt-2",children:a.jsx("input",{type:"text",placeholder:"Or paste image URL...",value:R.src||"",onChange:K=>j(re=>({...re,src:K.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none"})})]}),a.jsx("div",{className:"flex-1 bg-slate-50 rounded-2xl border border-slate-200 overflow-hidden relative group min-h-[200px]",children:R.src?a.jsx("img",{src:R.src,alt:"Preview",className:"w-full h-full object-contain bg-slate-100/50"}):a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-300",children:[a.jsx(nc,{className:"w-12 h-12 mb-2 opacity-50"}),a.jsx("span",{className:"text-sm font-bold",children:"No Image Selected"})]})})]}),a.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 tracking-wide",children:"Caption / Story"}),a.jsx("textarea",{value:R.caption||"",onChange:K=>j(re=>({...re,caption:K.target.value})),className:"flex-1 w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl text-slate-800 text-base focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none resize-none leading-relaxed placeholder:text-slate-400",placeholder:"Write something about this moment..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 tracking-wide",children:"Month"}),a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:R.month||"Januari",onChange:K=>j(re=>({...re,month:K.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none appearance-none font-bold cursor-pointer",children:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"].map(K=>a.jsx("option",{value:K,children:K},K))}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:a.jsx($n,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 tracking-wide",children:"Year"}),a.jsx("input",{type:"number",value:R.year||"",onChange:K=>j(re=>({...re,year:K.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none font-bold"})]})]}),a.jsx("div",{className:"pt-4 mt-auto",children:a.jsx("button",{onClick:me,disabled:V,className:"w-full py-4 bg-slate-900 text-white rounded-xl text-base font-bold hover:bg-slate-800 disabled:opacity-50 transition-all shadow-xl shadow-slate-900/10 active:scale-[0.98] flex items-center justify-center gap-3",children:V?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),a.jsx("span",{children:"Saving..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Vr,{className:"w-5 h-5"}),a.jsx("span",{children:"Save Memory"})]})})})]})]})]})}),a.jsx("div",{className:"w-full h-8 flex justify-center items-center shrink-0 cursor-pointer hover:bg-slate-50 transition-colors border-t border-slate-100",onClick:X,children:a.jsx("div",{className:"w-16 h-1.5 bg-slate-300 rounded-full"})})]})]})]})},R3=({isAdmin:t})=>{const[e,n]=L.useState([]),[r,s]=L.useState(null),[i,o]=L.useState(!1),[l,c]=L.useState(!0),[u,d]=L.useState(!1),[m,g]=L.useState(""),[y,w]=L.useState(""),[x,b]=L.useState(""),[v,_]=L.useState(""),[T,R]=L.useState(!1),j=L.useRef(null),V=L.useRef(null),[S,I]=L.useState(!1),[C,A]=L.useState(null),F=L.useRef(null),P=async()=>{c(!0);try{const B=await DS();n(B),B.length>0&&(s(Z=>Z&&B.find(ce=>ce.id===Z.id)||B[0]),o(!1))}catch(B){console.error(B)}finally{c(!1)}};L.useEffect(()=>{P()},[]),L.useEffect(()=>{let B;return!l&&e.length>0&&(B=setTimeout(()=>{o(!0)},5e3)),()=>{B&&clearTimeout(B)}},[l,e.length]);const D=B=>{try{if(B.includes("/track/")){const Z=B.split("/track/");if(Z.length>1)return Z[1].split("?")[0]}if(B.includes("spotify:track:")){const Z=B.split(":");if(Z.length>2)return Z[2]}if(B.length>15&&!B.includes("/"))return B}catch{return null}return null},M=B=>{var he;const Z=(he=B.target.files)==null?void 0:he[0];if(Z){const ce=new FileReader;ce.onloadend=()=>{_(ce.result)},ce.readAsDataURL(Z)}},q=async()=>{if(!m||!y||!x){$e("Harap isi URL, Judul, dan Artis.");return}const B=D(m);if(!B){$e("Link Spotify tidak valid.");return}R(!0);try{await c3({spotifyId:B,title:y,artist:x,image:v,addedAt:Date.now()}),await P(),d(!1),g(""),w(""),b(""),_(""),$e("Lagu berhasil ditambahkan!")}catch{$e("Gagal menambahkan lagu.")}finally{R(!1)}},pe=B=>{var he;const Z=(he=B.target.files)==null?void 0:he[0];if(Z&&(r!=null&&r.id)){const ce=new FileReader;ce.onloadend=async()=>{const Pe=ce.result;try{await u3(r.id,{image:Pe}),s(xe=>xe?{...xe,image:Pe}:null),n(xe=>xe.map(Se=>Se.id===r.id?{...Se,image:Pe}:Se)),$e("Cover lagu diperbarui!")}catch{$e("Gagal update cover.")}},ce.readAsDataURL(Z)}},ne=(B,Z)=>{Z.stopPropagation(),A(B),I(!0)},ee=async()=>{if(C)try{if(await d3(C),n(B=>B.filter(Z=>Z.id!==C)),(r==null?void 0:r.id)===C){const B=e.filter(Z=>Z.id!==C);B.length>0?(s(B[0]),o(!1)):(s(null),o(!1))}$e("Lagu dihapus.")}catch{$e("Gagal menghapus.")}finally{I(!1),A(null)}},Q=B=>{(r==null?void 0:r.id)===B.id?o(!i):(s(B),o(!0),Cs("music",B.id||"unknown",`${B.title} - ${B.artist}`))},ue=async(B,Z)=>{if(Z==="up"&&B===0||Z==="down"&&B===e.length-1)return;const he=[...e],ce=Z==="up"?B-1:B+1;[he[B],he[ce]]=[he[ce],he[B]],n(he);try{await h3(he)}catch{$e("Gagal menyimpan urutan."),P()}},$=`bg-gradient-to-tr ${i?"from-blue-300 to-purple-300":"from-slate-200 to-gray-200"}`;return a.jsxs("div",{className:"min-h-screen bg-white relative overflow-hidden flex flex-col h-full",children:[a.jsx("style",{children:".no-scrollbar::-webkit-scrollbar { display: none; } .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }"}),a.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-blue-50/50 rounded-full blur-3xl opacity-60 pointer-events-none translate-x-1/3 -translate-y-1/3"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-purple-50/50 rounded-full blur-3xl opacity-60 pointer-events-none -translate-x-1/3 translate-y-1/3"}),a.jsx(Fa,{isOpen:S,title:"Hapus Lagu?",description:"Lagu ini akan dihapus dari playlist publik. Yakin?",confirmText:"Ya, Hapus",onConfirm:ee,onCancel:()=>I(!1)}),a.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar relative z-10 pb-24",children:a.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8 md:py-12",children:[a.jsxs("div",{className:"text-center mb-8 md:mb-10",children:[a.jsx(ft,{id:"music_title",defaultText:"Soundtrack of Life",isAdmin:t,tag:"h1",className:"text-3xl md:text-5xl font-black text-slate-900 tracking-tighter mb-2 md:mb-4"}),a.jsx(ft,{id:"music_desc",defaultText:"Kumpulan frekuensi pengiring coding & kontemplasi malam.",isAdmin:t,tag:"p",className:"text-sm md:text-base text-slate-500 font-medium"})]}),r&&a.jsxs("div",{className:"relative rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 shadow-2xl shadow-slate-200/50 mb-10 md:mb-12 overflow-hidden transition-all hover:shadow-slate-300/50 group/player border border-slate-100",style:{backgroundColor:r.image?"transparent":"rgba(255, 255, 255, 0.8)",backgroundImage:r.image?`url(${r.image})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[r.image&&a.jsx("div",{className:"absolute inset-0 bg-white/40 backdrop-blur-md z-0 transition-opacity duration-500"}),!r.image&&a.jsx("div",{className:"absolute inset-0 z-0 opacity-20 blur-3xl scale-125 pointer-events-none transition-colors duration-1000",children:a.jsx("div",{className:`w-full h-full ${$}`})}),t&&a.jsxs("div",{className:"absolute top-4 right-4 z-30 flex gap-2 opacity-0 group-hover/player:opacity-100 transition-opacity",children:[a.jsx("input",{type:"file",ref:V,onChange:pe,className:"hidden",accept:"image/*"}),a.jsx("button",{onClick:()=>{var B;return(B=V.current)==null?void 0:B.click()},className:"p-2 bg-white/90 hover:bg-white text-slate-700 rounded-full shadow-sm hover:shadow-md transition-all border border-slate-100",title:"Ganti Cover Lagu Ini",children:a.jsx(rs,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[a.jsxs("div",{className:"relative mb-6 mt-2 md:mb-8 md:mt-4 group cursor-pointer",onClick:()=>o(!i),children:[a.jsxs("div",{className:`w-48 h-48 md:w-64 md:h-64 rounded-full bg-slate-900 shadow-2xl flex items-center justify-center relative overflow-hidden border-4 border-slate-800 ${i?"animate-[spin_4s_linear_infinite]":"transition-transform duration-700 ease-out"}`,children:[a.jsx("div",{className:"absolute inset-2 rounded-full border border-slate-800/50 pointer-events-none z-10"}),a.jsx("div",{className:"absolute inset-4 rounded-full border border-slate-800/50 pointer-events-none z-10"}),a.jsx("div",{className:"absolute inset-8 rounded-full border border-slate-800/50 pointer-events-none z-10"}),a.jsxs("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-full flex items-center justify-center relative shadow-inner overflow-hidden border-2 border-slate-700 bg-slate-800 z-0",children:[r.image?a.jsx("img",{src:r.image,alt:"Album Art",className:"w-full h-full object-cover opacity-90"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-tr from-blue-500 to-purple-600 opacity-80"}),a.jsx("div",{className:"absolute w-2 h-2 md:w-2.5 md:h-2.5 bg-white rounded-full shadow-sm z-20"})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-full z-20"})]}),a.jsx("div",{className:`absolute -top-8 -right-6 md:-top-12 md:-right-8 w-24 h-32 md:w-28 md:h-40 pointer-events-none transition-transform duration-1000 ease-in-out origin-[70%_15%] drop-shadow-xl z-20 ${i?"rotate-[0deg]":"-rotate-[40deg]"}`,children:a.jsxs("svg",{viewBox:"0 0 100 150",className:"w-full h-full",children:[a.jsx("circle",{cx:"70",cy:"20",r:"8",fill:"#94a3b8",stroke:"#64748b",strokeWidth:"2"}),a.jsx("path",{d:"M70 20 L60 90 L45 100",fill:"none",stroke:"#64748b",strokeWidth:"5",strokeLinecap:"round"}),a.jsx("rect",{x:"38",y:"95",width:"16",height:"20",fill:"#334155",rx:"2",transform:"rotate(20 46 105)"})]})}),!i&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-30",children:a.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-full p-3 md:p-4",children:a.jsx(kN,{className:"w-6 h-6 md:w-8 md:h-8 text-white ml-1"})})})]}),a.jsxs("div",{className:"w-full text-center",children:[a.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-900 mb-1 leading-tight line-clamp-1 drop-shadow-sm",children:r.title}),a.jsx("p",{className:"text-xs md:text-sm text-slate-600 font-bold uppercase tracking-widest mb-4 md:mb-6 line-clamp-1",children:r.artist}),a.jsx("div",{className:"w-full rounded-2xl overflow-hidden shadow-sm border border-slate-100 bg-white/60 backdrop-blur-md relative z-20",children:a.jsx("iframe",{ref:F,src:`https://open.spotify.com/embed/track/${r.spotifyId}?utm_source=generator&theme=0&autoplay=1`,width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Player",className:"border-0 block",style:{overflow:"hidden"}})}),a.jsx("button",{onClick:()=>o(!i),className:"mt-4 text-[10px] font-bold text-slate-500 bg-white/70 backdrop-blur px-3 py-1.5 rounded-full hover:bg-white transition-colors shadow-sm",children:i?"Matikan Animasi Manual":"Nyalakan Animasi Manual"})]})]})]}),a.jsxs("div",{className:"w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[a.jsxs("h3",{className:"text-base md:text-lg font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(CN,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-400"})," Daftar Putar"]}),t&&a.jsx("button",{onClick:()=>d(!u),className:"text-[10px] md:text-xs font-bold bg-slate-900 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-slate-800 transition-all shadow-md active:scale-95",children:u?"Tutup":"+ Add Song"})]}),u&&a.jsxs("div",{className:"bg-slate-50 p-4 md:p-6 rounded-2xl border border-slate-200 mb-6 md:mb-8 animate-fade-in-up",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-800 mb-4",children:"Tambah Lagu Baru"}),a.jsxs("div",{className:"grid gap-3 md:gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{onClick:()=>{var B;return(B=j.current)==null?void 0:B.click()},className:"w-16 h-16 rounded-xl bg-white border border-slate-200 flex items-center justify-center cursor-pointer hover:border-slate-400 overflow-hidden shrink-0",children:v?a.jsx("img",{src:v,className:"w-full h-full object-cover",alt:"Preview"}):a.jsx(rs,{className:"w-5 h-5 text-slate-400"})}),a.jsx("input",{type:"file",ref:j,onChange:M,className:"hidden",accept:"image/*"}),a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"text",placeholder:"Link Spotify...",value:m,onChange:B=>g(B.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[a.jsx("input",{type:"text",placeholder:"Judul Lagu",value:y,onChange:B=>w(B.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"}),a.jsx("input",{type:"text",placeholder:"Nama Artis",value:x,onChange:B=>b(B.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"})]}),a.jsx("button",{onClick:q,disabled:T,className:"w-full bg-blue-600 text-white font-bold py-2.5 md:py-3 rounded-xl hover:bg-blue-700 transition-all disabled:opacity-50 text-sm",children:T?"Menyimpan...":"Simpan ke Playlist"})]})]}),a.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.map((B,Z)=>a.jsxs("div",{onClick:()=>Q(B),className:`group flex items-center gap-3 md:gap-4 p-3 pr-4 rounded-xl cursor-pointer border transition-all duration-300 ${(r==null?void 0:r.id)===B.id?"bg-slate-900 border-slate-900 shadow-lg scale-[1.01] md:scale-[1.02]":"bg-white border-slate-100 hover:border-slate-300 hover:shadow-md"}`,children:[a.jsx("div",{className:`w-10 h-10 flex items-center justify-center text-xs md:text-sm font-bold rounded-lg shrink-0 overflow-hidden ${(r==null?void 0:r.id)===B.id?"text-white":"text-slate-400 bg-slate-50 group-hover:bg-slate-100 group-hover:text-slate-600"}`,children:(r==null?void 0:r.id)===B.id&&i?a.jsxs("div",{className:"flex gap-0.5 items-end h-3",children:[a.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1s_infinite] h-2"}),a.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1.2s_infinite] h-3"}),a.jsx("div",{className:"w-0.5 bg-white animate-[bounce_0.8s_infinite] h-1.5"})]}):B.image?a.jsx("img",{src:B.image,alt:B.title,className:"w-full h-full object-cover"}):Z+1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:`font-bold text-xs md:text-sm truncate ${(r==null?void 0:r.id)===B.id?"text-white":"text-slate-800"}`,children:B.title}),a.jsx("p",{className:`text-[10px] md:text-xs truncate ${(r==null?void 0:r.id)===B.id?"text-slate-400":"text-slate-500"}`,children:B.artist})]}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsx("div",{className:`p-1.5 md:p-2 rounded-full transition-colors ${(r==null?void 0:r.id)===B.id?"bg-white/10 text-white":"bg-slate-100 text-slate-400 group-hover:text-green-600 group-hover:bg-green-50"}`,children:a.jsx(OT,{className:"w-4 h-4"})}),t&&a.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 rounded-lg p-1 border border-slate-100",onClick:he=>he.stopPropagation(),children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("button",{onClick:()=>ue(Z,"up"),disabled:Z===0,className:"p-0.5 text-slate-300 hover:text-blue-600 hover:bg-blue-50 rounded disabled:opacity-20 disabled:hover:bg-transparent transition-colors",children:a.jsx(Fg,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>ue(Z,"down"),disabled:Z===e.length-1,className:"p-0.5 text-slate-300 hover:text-blue-600 hover:bg-blue-50 rounded disabled:opacity-20 disabled:hover:bg-transparent transition-colors",children:a.jsx(RT,{className:"w-3 h-3"})})]}),a.jsx("div",{className:"w-px h-6 bg-slate-200 mx-1"}),a.jsx("button",{onClick:he=>ne(B.id,he),className:"p-1.5 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-full transition-all",title:"Hapus",children:a.jsx(gr,{className:"w-3.5 h-3.5"})})]})]})]},B.id||Z)),e.length===0&&!l&&a.jsx("div",{className:"text-center py-12 text-slate-400 text-sm",children:"Playlist kosong. Tambahkan lagu baru."})]})]})]})})]})},P3=({isAdmin:t})=>{const[e,n]=L.useState([]),[r,s]=L.useState(!0),i=6,[o,l]=L.useState(i),[c,u]=L.useState(""),[d,m]=L.useState(!1),[g,y]=L.useState(!1),[w,x]=L.useState(!1),[b,v]=L.useState(null),[_,T]=L.useState(null),R=280,j=async()=>{s(!0);try{const q=await m3();n(q)}catch(q){console.error(q)}finally{s(!1)}};L.useEffect(()=>{j()},[]);const V=async()=>{if(c.trim()){y(!0);try{await f3({content:c.trim(),type:d?"private":"public",sender:"Anonim"}),x(!0),u(""),d||(j(),l(i)),setTimeout(()=>x(!1),3e3)}catch{$e("Gagal mengirim pesan.")}finally{y(!1)}}},S=(q,pe)=>{pe.stopPropagation(),q&&T(q)},I=async()=>{if(!_)return;const q=_;v(q),T(null);try{await p3(q),n(pe=>pe.filter(ne=>ne.id!==q)),$e("Pesan dihapus.")}catch(pe){$e("Gagal menghapus pesan."),console.error(pe)}finally{v(null)}},C=()=>{l(q=>q+i)},A=()=>{l(i);const q=document.getElementById("message-feed-top");q&&q.scrollIntoView({behavior:"smooth"})},F=q=>new Date(q).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),P=e.slice(0,o),D=o<e.length,M=o>i;return a.jsxs("div",{className:"min-h-screen bg-slate-50 relative pb-20",children:[a.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-40",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),a.jsx(Fa,{isOpen:!!_,title:"Hapus Pesan?",description:"Pesan ini akan dihapus secara permanen dari Public Wall. Tindakan ini tidak dapat dibatalkan.",confirmText:"Ya, Hapus",onConfirm:I,onCancel:()=>T(null)}),a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12 relative z-10",children:[a.jsxs("div",{className:"mb-16 text-center space-y-8",children:[a.jsxs("div",{children:[a.jsx(ft,{id:"msg_feed_title",defaultText:"Public Wall",isAdmin:t,tag:"h1",className:"text-4xl font-black text-slate-900 tracking-tight mb-2"}),a.jsx(ft,{id:"msg_feed_desc",defaultText:"Tulis sesuatu. Rahasia, harapan, atau sekadar 'Halo'.",isAdmin:t,tag:"p",className:"text-slate-500 font-medium"})]}),a.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-xl shadow-slate-200/60 border border-slate-100 max-w-2xl mx-auto transition-all focus-within:ring-2 focus-within:ring-slate-900/5 relative group",children:[a.jsx("textarea",{value:c,onChange:q=>u(q.target.value),maxLength:R,className:"w-full h-32 bg-transparent text-lg font-medium text-slate-800 placeholder:text-slate-300 resize-none outline-none leading-relaxed",placeholder:"Apa yang sedang kamu pikirkan?"}),a.jsxs("div",{className:`absolute bottom-20 right-6 text-[10px] font-bold transition-colors ${c.length>=R?"text-red-500":"text-slate-300"}`,children:[c.length,"/",R]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-50 flex items-center justify-between flex-wrap gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none relative",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:d,onChange:q=>m(q.target.checked)}),a.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-slate-900 transition-colors"}),a.jsx("span",{className:`text-xs font-bold transition-colors ${d?"text-slate-900":"text-slate-500"}`,children:d?"Privat":"Publik"})]}),a.jsx("div",{className:"hidden sm:block w-px h-5 bg-slate-200"}),a.jsxs("div",{className:`hidden sm:flex items-center gap-1.5 text-[10px] font-medium transition-colors ${d?"text-emerald-600":"text-slate-400"}`,children:[d?a.jsx(Ug,{className:"w-3 h-3"}):a.jsx(tc,{className:"w-3 h-3"}),a.jsx("span",{children:d?"Hanya terbaca oleh Admin.":"Tayang untuk umum."})]})]}),a.jsx("button",{onClick:V,disabled:!c.trim()||g,className:`
                                    flex items-center gap-2 px-6 py-2.5 rounded-xl font-bold text-sm transition-all shadow-lg active:scale-95 shrink-0 ml-auto
                                    ${w?"bg-green-500 text-white shadow-green-500/20":"bg-slate-900 text-white hover:bg-slate-800 shadow-slate-900/20 disabled:bg-slate-200 disabled:text-slate-400 disabled:shadow-none disabled:cursor-not-allowed"}
                                `,children:g?a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):w?a.jsxs(a.Fragment,{children:["Terkirim ",a.jsx(Vr,{className:"w-4 h-4"})]}):a.jsxs(a.Fragment,{children:["Kirim ",a.jsx(LT,{className:"w-4 h-4"})]})})]})]})]}),a.jsxs("div",{id:"message-feed-top",className:"flex items-center justify-between mb-6 px-2",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/417/417720.png",alt:"Feed",className:"w-4 h-4 object-contain opacity-60"})," Pesan Terbaru"]}),a.jsx("button",{onClick:j,className:"p-2 text-slate-400 hover:text-slate-900 hover:bg-white rounded-full transition-all",title:"Refresh",children:a.jsx(da,{className:"w-4 h-4"})})]}),r?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(q=>a.jsx("div",{className:"h-32 bg-slate-200/50 rounded-2xl animate-pulse"},q))}):e.length===0?a.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[a.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada pesan publik."}),a.jsx("p",{className:"text-slate-300 text-sm",children:"Jadilah yang pertama menulis!"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"columns-1 md:columns-2 gap-6 space-y-6",children:P.map((q,pe)=>a.jsxs("div",{className:"break-inside-avoid bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md hover:border-slate-200 hover:-translate-y-1 transition-all duration-300 group relative overflow-hidden",children:[a.jsxs("p",{className:"text-slate-800 text-[15px] font-medium leading-relaxed whitespace-pre-wrap break-words relative z-10",children:['"',q.content,'"']}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-widest bg-slate-50 px-2 py-1 rounded",children:F(q.timestamp)})}),t&&a.jsx("button",{onClick:ne=>S(q.id,ne),disabled:b===q.id,className:"absolute top-2 right-2 p-2 bg-white/80 backdrop-blur-sm rounded-full text-slate-400 hover:text-red-500 hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100 border border-transparent hover:border-red-100 shadow-sm z-20",title:"Hapus Pesan",children:b===q.id?a.jsx("div",{className:"w-3.5 h-3.5 border-2 border-red-200 border-t-red-500 rounded-full animate-spin"}):a.jsx(gr,{className:"w-3.5 h-3.5"})})]},q.id||pe))}),a.jsxs("div",{className:"flex flex-col items-center gap-3 mt-12",children:[D&&a.jsxs("button",{onClick:C,className:"px-6 py-2.5 rounded-full bg-white border border-slate-200 text-slate-600 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Pesan Lainnya",a.jsx($n,{className:"w-4 h-4"})]}),M&&a.jsxs("button",{onClick:A,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Sembunyikan (Tutup)",a.jsx($n,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]})]})};function M3(){return null}function D3(){return null}var kn=(t=>(t.BACKGROUND_REMOVER="bg_remove",t.HD_UPSCALE="hd_upscale",t.CREATIVE_REMIX="creative_remix",t.COLORIZE="colorize",t.SKETCH_TO_REAL="sketch_real",t))(kn||{});const Oc={id:{welcome:"Halo, Siapa Disana?",welcomeSubtitle:"Biar kita makin akrab, kenalan dulu yuk! Isi nama dan sekolahmu ya, biar enak ngobrolnya.",enterName:"Aku biasa dipanggil...",enterSchool:"Aku sekolah / kuliah di...",namePlaceholder:"Contoh: Rara",schoolPlaceholder:"Contoh: SMA 1 Jakarta / UI",accessButton:"Oke, Salam Kenal!",verifying:"Lagi mencatat...",deviceIdNote:"Santai aja, ini cuma biar aku inget temen baru.",credits:"Limit",adminMode:"Mode Admin",unlimited:"Tanpa Batas",logOut:"Ganti Akun",heroTitle:"Hai,",heroSubtitle:"Sudah siap bikin karya keren hari ini?",toolBgRemove:"Hapus Background",toolBgRemoveDesc:"Hapus latar belakang secara instan dan rapi.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Pertajam detail & resolusi tinggi agar tidak pecah.",toolRemix:"Creative Remix",toolRemixDesc:"Ubah gaya gambar dengan bantuan AI.",toolColorize:"Warnai Foto",toolColorizeDesc:"Ubah foto hitam putih jadi berwarna.",toolSketch:"Sketsa ke Nyata",toolSketchDesc:"Ubah coretan tangan jadi gambar realistis.",moreTools:"Lihat Lainnya",lessTools:"Sembunyikan",back:"Kembali",preview:"Pratinjau",changePhoto:"Ganti Foto",aiPrompt:"Instruksi AI",aiPromptPlaceholder:"Jelaskan bagaimana Anda ingin mengubah gambar ini...",generate:"Mulai Proses",generateMagic:"Buat Keajaiban",processing:"Memproses",processingStandard:"Sedang meracik gambar...",processingCloud:"Mengirim ke awan...",processingAI:"AI sedang bekerja...",refining:"Sedikit polesan lagi...",optimizingLocal:"Memproses di perangkatmu (Mode Hemat)...",initializing:"Siap-siap...",resultComparison:"Hasil Karya Kamu",download:"Simpan Gambar",reset:"Ulangi",original:"ASLI",result:"HASIL",bgColor:"Ganti Warna Belakang",uploadPrompt:"Pilih foto terbaikmu untuk diedit",settingsTitle:"Pengaturan Sistem",systemPref:"Preferensi AI",knowledgeMode:"Mode Pengetahuan (Database)",knowledgeModeDesc:"Hemat Kuota. AI hanya menjawab dari database lokal tanpa Gemini API.",totalKnowledge:"Total Memori Tersimpan",wikiMode:"Izinkan Wikipedia",wikiModeDesc:"Jika info tidak ada di database, cari di Wikipedia (Tetap hemat kuota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Kelola API Key untuk fitur chat cerdas dan edit gambar.",selectKeyBtn:"Ambil Key via AI Studio",orManually:"Kelola Key Manual",customKeyActive:"Key Pribadi Aktif",defaultKeyActive:"Key Sistem (Terbatas)",removeBgTitle:"Remove.bg API",removeBgDesc:"Engine khusus hapus background presisi tinggi.",supabaseTitle:"Supabase Engine",supabaseDesc:"Engine cadangan untuk pemrosesan gambar.",googleSearchTitle:"Google Search API",googleSearchDesc:"Opsi pencarian terakhir (Fallback) jika DB & Wiki gagal.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Tutup",save:"Simpan",active:"Aktif",inactive:"Nonaktif",addKeyPlaceholder:"Tempel API Key Gemini disini...",addKeyBtn:"Tambah Key",keyDisclaimerTitle:" Peringatan Penting",keyDisclaimerText:"Dengan menambahkan API Key pribadi, saya sadar bahwa segala bentuk penggunaan, kuota, dan keamanan key tersebut adalah tanggung jawab saya sepenuhnya. Fanra AI Studio tidak bertanggung jawab atas penyalahgunaan atau tagihan yang muncul akibat kelalaian pengguna.",consentCheckbox:"Saya mengerti dan setuju untuk melanjutkan.",keysStored:"Daftar Key",noKeysYet:"Belum ada key tersimpan. Masih pakai limit bawaan.",newChat:"Percakapan Baru",historyHeader:"Riwayat",loginToSave:"Login untuk simpan progres",loginBtn:"Masuk Akun",historyItem1:"editing foto sekolah...",historyItem2:"hapus background merah...",chatPlaceholder:"ketik pesan atau tanya Fanra...",chatDisclaimer:"Fanra bisa salah. cek lagi info penting.",chatFallbackError:"duh, koneksi gue lagi putus dan gue belum pernah dapet pertanyaan ini sebelumnya. cek internet lo atau API key nya deh.",chatOfflineMode:"(Mode Database) Info tidak ditemukan di database.",chatImageResponse:"wih, kirim gambar ya? sori nih gue baru bisa edit gambar kalo lo pake menu di atas itu. coba klik ikon-ikon di atas deh.",errorTitle:"Ups, Ada Masalah",insufficientCredits:"Yah, limit habis! Masukkan API Key di pengaturan agar Unlimited.",limitReachedHQ:"Kuota High Quality harian sudah penuh.",serviceBusy:"Server lagi ramai nih. Coba lagi sebentar ya.",networkError:"Koneksi internetmu sepertinya putus nyambung.",memoryError:"HP keberatan proses gambar ini. Coba gambar lain ya.",confirmTitle:"Yakin mau ganti?",confirmDesc:"Proses yang ini belum disimpan lho. Mau ganti aktivitas?",yesChange:"Ya, Ganti Aja",uploadTitle:"Unggah Foto",uploadDesc:"Klik atau tarik fotomu ke sini",dropHere:"Lepaskan fotonya!",invalidImage:"Format file ini tidak didukung. Pakai JPG/PNG ya.",toolLockedMsg:"Fitur ini sedang dalam pengembangan/perbaikan. Mohon pengertiannya ya, developer lagi ngoprek!",limitChatReached:"Energi Fanra habis untuk hari ini. Karena ini project mandiri dengan resource terbatas, chat dibatasi dulu ya. Besok reset kok! (Login untuk kuota lebih)",limitImageReached:"Limit upload gambar hari ini sudah habis. Server butuh istirahat karena resource terbatas. Coba lagi besok ya!"},en:{welcome:"Hello, Who's There?",welcomeSubtitle:"Let's be friends! Tell me your name and school so we can chat comfortably.",enterName:"You can call me...",enterSchool:"I study at...",namePlaceholder:"Ex: Sarah",schoolPlaceholder:"Ex: High School NY / MIT",accessButton:"Okay, Nice to Meet You!",verifying:"Writing that down...",deviceIdNote:"Relax, just remembering a new friend.",credits:"Credits",adminMode:"Admin Mode",unlimited:"Unlimited",logOut:"Switch Account",heroTitle:"Hi,",heroSubtitle:"Ready to make something cool today?",toolBgRemove:"Remove Background",toolBgRemoveDesc:"Instantly remove backgrounds cleanly.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Sharpen details to 4K resolution.",toolRemix:"Creative Remix",toolRemixDesc:"Reimagine image with AI assistance.",toolColorize:"Colorize Photo",toolColorizeDesc:"Turn black & white photos into color.",toolSketch:"Sketch to Real",toolSketchDesc:"Turn hand drawings into realistic images.",moreTools:"See More",lessTools:"Show Less",back:"Back",preview:"Preview",changePhoto:"Change Photo",aiPrompt:"AI Prompt",aiPromptPlaceholder:"Describe how you want to remix this image...",generate:"Generate",generateMagic:"Generate Magic",processing:"Processing",processingStandard:"Working magic...",processingCloud:"Sending to cloud...",processingAI:"AI is thinking...",refining:"Polishing details...",optimizingLocal:"Processing on device (Offline Mode)...",initializing:"Warming up...",resultComparison:"Your Masterpiece",download:"Save Image",reset:"Reset",original:"ORIGINAL",result:"RESULT",bgColor:"Background Color",uploadPrompt:"Upload an image to start editing",settingsTitle:"System Settings",systemPref:"AI Preferences",knowledgeMode:"Knowledge Mode (Database)",knowledgeModeDesc:"Save Quota. AI only answers from local database without Gemini API.",totalKnowledge:"Total Stored Memory",wikiMode:"Enable Wikipedia",wikiModeDesc:"If info not in DB, search Wikipedia (Still saves API quota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Manage keys for smart chat and image editing.",selectKeyBtn:"Get Key via AI Studio",orManually:"Manage Keys Manually",customKeyActive:"Custom Key Active",defaultKeyActive:"System Key (Limited)",removeBgTitle:"Remove.bg API",removeBgDesc:"Precision background removal engine.",supabaseTitle:"Supabase Engine",supabaseDesc:"Backup engine for image processing.",googleSearchTitle:"Google Search API",googleSearchDesc:"Fallback search option if DB & Wiki fail.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Close",save:"Save",active:"Active",inactive:"Inactive",addKeyPlaceholder:"Paste Gemini API Key here...",addKeyBtn:"Add Key",keyDisclaimerTitle:" Important Warning",keyDisclaimerText:"By adding personal API Keys, I acknowledge that all usage, quotas, and security of said keys are my sole responsibility. Fanra AI Studio is not liable for misuse or charges incurred due to user negligence.",consentCheckbox:"I understand and agree to proceed.",keysStored:"Key List",noKeysYet:"No keys saved yet. Using default limits.",newChat:"New Conversation",historyHeader:"History",loginToSave:"Login to save progress",loginBtn:"Login",historyItem1:"editing school photo...",historyItem2:"removing red background...",chatPlaceholder:"type a message or ask Fanra...",chatDisclaimer:"Fanra can make mistakes. Check important info.",chatFallbackError:"ugh, my connection is down and I haven't heard this question before. Check your internet or API key.",chatOfflineMode:"(DB Mode) Info not found in database.",chatImageResponse:"woah, sending an image? sorry, I can only edit images if you use the menu above. try clicking those icons.",errorTitle:"Whoops",insufficientCredits:"Out of credits! Enter your own Google Gemini API Key in settings for unlimited access.",limitReachedHQ:"High Quality daily limit reached.",serviceBusy:"Service is busy. Please try again.",networkError:"Connection issue. Check your internet.",memoryError:"Device memory low. Try a smaller image.",confirmTitle:"Change Activity?",confirmDesc:"Current progress will be lost. Are you sure?",yesChange:"Yes, Change",uploadTitle:"Upload Image",uploadDesc:"Click to browse or drag & drop",dropHere:"Drop it here!",invalidImage:"Please upload a valid image file (JPG/PNG).",toolLockedMsg:"This feature is under maintenance/development. Please understand, developer is working on it!",limitChatReached:"Fanra's energy is depleted for today. Due to limited resources on this personal project, chats are limited. Resets tomorrow!",limitImageReached:"Daily image upload limit reached. Server needs a break due to limited resources. Try again tomorrow!"}};var j3={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let L3,F3;function U3(){return{geminiUrl:L3,vertexUrl:F3}}function V3(t,e,n,r){var s,i;if(!(t!=null&&t.baseUrl)){const o=U3();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:n:(i=o.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ms{}function Te(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const i=e[s];return i!=null?String(i):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function p(t,e,n){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let u=0;u<c.length;u++){const d=c[u];p(d,e.slice(i+1),n[u])}else for(const u of c)p(u,e.slice(i+1),n)}return}else if(o.endsWith("[0]")){const l=o.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];p(c[0],e.slice(i+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function h(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const i=s.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(l=>h(l,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function O3(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),i=r.split("."),o=new Set;let l=-1;for(let c=0;c<s.length;c++)if(s[c]==="*"){l=c;break}if(l!==-1&&i.length>l)for(let c=l;c<i.length;c++){const u=i[c];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}bm(t,s,i,0,o)}}function bm(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2),l=t;if(o in l&&Array.isArray(l[o]))for(const c of l[o])bm(c,e,n,r+1,s)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,l=Object.keys(o).filter(u=>!u.startsWith("_")&&!s.has(u)),c={};for(const u of l)c[u]=o[u];for(const[u,d]of Object.entries(c)){const m=[];for(const g of n.slice(r))g==="*"?m.push(u):m.push(g);p(o,m,d)}for(const u of l)delete o[u]}}else{const o=t;i in o&&bm(o[i],e,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q0(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B3(t){const e={},n=h(t,["operationName"]);n!=null&&p(e,["operationName"],n);const r=h(t,["resourceName"]);return r!=null&&p(e,["_url","resourceName"],r),e}function z3(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],$3(o)),e}function G3(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],H3(o)),e}function $3(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>q3(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function H3(t){const e={},n=h(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>W3(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function q3(t){const e={},n=h(t,["video"]);return n!=null&&p(e,["video"],Z3(n)),e}function W3(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],eF(n)),e}function K3(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function J3(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function Y3(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],Q3(o)),e}function Q3(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function US(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],X3(o)),e}function X3(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function Z3(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],q0(r));const s=h(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function eF(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],q0(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ew;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ew||(Ew={}));var Tw;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Tw||(Tw={}));var Iw;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Iw||(Iw={}));var On;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(On||(On={}));var Sw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Sw||(Sw={}));var kw;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kw||(kw={}));var Cw;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Cw||(Cw={}));var Aw;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Aw||(Aw={}));var Nw;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Nw||(Nw={}));var Rw;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Rw||(Rw={}));var Pw;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Pw||(Pw={}));var Mw;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Mw||(Mw={}));var Dw;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Dw||(Dw={}));var jw;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(jw||(jw={}));var Lw;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Lw||(Lw={}));var Fw;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Fw||(Fw={}));var Uw;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Uw||(Uw={}));var Vw;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Vw||(Vw={}));var Ow;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ow||(Ow={}));var $d;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})($d||($d={}));var Bw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Bw||(Bw={}));var zw;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(zw||(zw={}));var Gw;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Gw||(Gw={}));var Em;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Em||(Em={}));var $w;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})($w||($w={}));var Hw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Hw||(Hw={}));var qw;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(qw||(qw={}));var Ww;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ww||(Ww={}));var Kw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Kw||(Kw={}));var Jw;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Jw||(Jw={}));var Yw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Yw||(Yw={}));var Qw;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Qw||(Qw={}));var Xw;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Xw||(Xw={}));var Zw;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Zw||(Zw={}));var e_;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(e_||(e_={}));var t_;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(t_||(t_={}));var n_;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(n_||(n_={}));var r_;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(r_||(r_={}));var s_;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(s_||(s_={}));var i_;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(i_||(i_={}));var o_;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(o_||(o_={}));var a_;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(a_||(a_={}));var l_;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(l_||(l_={}));var c_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(c_||(c_={}));var u_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(u_||(u_={}));var d_;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(d_||(d_={}));var h_;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(h_||(h_={}));var f_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(f_||(f_={}));var p_;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(p_||(p_={}));var m_;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(m_||(m_={}));var g_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(g_||(g_={}));var y_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(y_||(y_={}));var v_;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(v_||(v_={}));var x_;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(x_||(x_={}));var w_;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(w_||(w_={}));var zo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(zo||(zo={}));class Tm{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ol{get text(){var e,n,r,s,i,o,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const m=[];for(const g of(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[y,w]of Object.entries(g))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(w!==null||w!==void 0)&&m.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;d=!0,u+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,n,r,s,i,o,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const m of(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,y]of Object.entries(m))g!=="inlineData"&&(y!==null||y!==void 0)&&d.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(u+=atob(m.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,s,i,o,l,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,s,i,o,l,c,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,s,i,o,l,c,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(c=(l=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class __{}class b_{}class tF{}class nF{}class rF{}class sF{}class E_{}class T_{}class I_{}class iF{}class Hd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Hd;let s;const i=e;return n?s=G3(i):s=z3(i),Object.assign(r,s),r}}class S_{}class k_{}class C_{}class A_{}class oF{}class aF{}class lF{}class W0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new W0,i=Y3(e);return Object.assign(r,i),r}}class cF{}class uF{}class dF{}class N_{}class hF{get text(){var e,n,r;let s="",i=!1;const o=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,u]of Object.entries(l))c!=="text"&&c!=="thought"&&u!==null&&o.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;i=!0,s+=l.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?s:void 0}get data(){var e,n,r;let s="";const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(o))l!=="inlineData"&&c!==null&&i.push(l);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class fF{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class K0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new K0,i=US(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function it(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function VS(t,e){const n=it(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function OS(t){return Array.isArray(t)?t.map(e=>qd(e)):[qd(t)]}function qd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function BS(t){const e=qd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function zS(t){const e=qd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function R_(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function GS(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>R_(e)):[R_(t)]}function Im(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function P_(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function M_(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function _n(t){if(t==null)throw new Error("ContentUnion is required");return Im(t)?t:{role:"user",parts:GS(t)}}function J0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=_n(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=_n(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>_n(n)):[_n(e)]}function vr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(P_(t)||M_(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[_n(t)]}const e=[],n=[],r=Im(t[0]);for(const s of t){const i=Im(s);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(s);else{if(P_(s)||M_(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:GS(n)}),e}function pF(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(On).includes(n[0].toUpperCase())?n[0].toUpperCase():On.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(On).includes(r.toUpperCase())?r.toUpperCase():On.TYPE_UNSPECIFIED})}}function na(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&pF(t.type,e);for(const[o,l]of Object.entries(t))if(l!=null)if(o=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(On).includes(l.toUpperCase())?l.toUpperCase():On.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=na(l);else if(r.includes(o)){const c=[];for(const u of l){if(u.type=="null"){e.nullable=!0;continue}c.push(na(u))}e[o]=c}else if(s.includes(o)){const c={};for(const[u,d]of Object.entries(l))c[u]=na(d);e[o]=c}else{if(o==="additionalProperties")continue;e[o]=l}return e}function Y0(t){return na(t)}function Q0(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function X0(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ua(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=na(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=na(e.response));return t}function Va(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function mF(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Ds(t,e){if(typeof e!="string")throw new Error("name must be a string");return mF(t,e,"cachedContents")}function $S(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function bi(t){return q0(t)}function gF(t){return t!=null&&typeof t=="object"&&"name"in t}function yF(t){return t!=null&&typeof t=="object"&&"video"in t}function vF(t){return t!=null&&typeof t=="object"&&"uri"in t}function HS(t){var e;let n;if(gF(t)&&(n=t.name),!(vF(t)&&(n=t.uri,n===void 0))&&!(yF(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function qS(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function WS(t){for(const e of["models","tunedModels","publisherModels"])if(xF(t,e))return t[e];return[]}function xF(t,e){return t!==null&&typeof t=="object"&&e in t}function wF(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function _F(t,e={}){const n=[],r=new Set;for(const s of t){const i=s.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const o=wF(s,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function KS(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function bF(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function JS(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let i=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const c=o.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Oa(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function YS(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EF(t){const e={},n=h(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const r=h(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>r6(o))),p(e,["inlinedResponses"],i)}const s=h(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["inlinedEmbedContentResponses"],i)}return e}function TF(t){const e={},n=h(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsDestination","outputUriPrefix"]);r!=null&&p(e,["gcsUri"],r);const s=h(t,["bigqueryDestination","outputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function IF(t){const e={},n=h(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsDestination","outputUriPrefix"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&p(e,["bigqueryDestination","outputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Zu(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata","displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["metadata","state"]);s!=null&&p(e,["state"],YS(s));const i=h(t,["metadata","createTime"]);i!=null&&p(e,["createTime"],i);const o=h(t,["metadata","endTime"]);o!=null&&p(e,["endTime"],o);const l=h(t,["metadata","updateTime"]);l!=null&&p(e,["updateTime"],l);const c=h(t,["metadata","model"]);c!=null&&p(e,["model"],c);const u=h(t,["metadata","output"]);return u!=null&&p(e,["dest"],EF(JS(u))),e}function Sm(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["state"]);s!=null&&p(e,["state"],YS(s));const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["createTime"]);o!=null&&p(e,["createTime"],o);const l=h(t,["startTime"]);l!=null&&p(e,["startTime"],l);const c=h(t,["endTime"]);c!=null&&p(e,["endTime"],c);const u=h(t,["updateTime"]);u!=null&&p(e,["updateTime"],u);const d=h(t,["model"]);d!=null&&p(e,["model"],d);const m=h(t,["inputConfig"]);m!=null&&p(e,["src"],SF(m));const g=h(t,["outputConfig"]);g!=null&&p(e,["dest"],TF(JS(g)));const y=h(t,["completionStats"]);return y!=null&&p(e,["completionStats"],y),e}function SF(t){const e={},n=h(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsSource","uris"]);r!=null&&p(e,["gcsUri"],r);const s=h(t,["bigquerySource","inputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function kF(t,e){const n={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=h(e,["fileName"]);r!=null&&p(n,["fileName"],r);const s=h(e,["inlinedRequests"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>n6(t,o))),p(n,["requests","requests"],i)}return n}function CF(t){const e={},n=h(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsSource","uris"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&p(e,["bigquerySource","inputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function AF(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function NF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Oa(t,r)),n}function RF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Oa(t,r)),n}function PF(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],MF(r));const s=h(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const l=h(t,["groundingMetadata"]);l!=null&&p(e,["groundingMetadata"],l);const c=h(t,["index"]);c!=null&&p(e,["index"],c);const u=h(t,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const d=h(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=h(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function MF(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function QS(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>u6(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function DF(t,e){const n={},r=h(t,["displayName"]);if(e!==void 0&&r!=null&&p(e,["batch","displayName"],r),h(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function jF(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["dest"]);return e!==void 0&&s!=null&&p(e,["outputConfig"],IF(bF(s))),n}function D_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["src"]);s!=null&&p(n,["batch","inputConfig"],kF(t,KS(t,s)));const i=h(e,["config"]);return i!=null&&DF(i,n),n}function LF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],it(t,r));const s=h(e,["src"]);s!=null&&p(n,["inputConfig"],CF(KS(t,s)));const i=h(e,["config"]);return i!=null&&jF(i,n),n}function FF(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["batch","displayName"],r),n}function UF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["src"]);s!=null&&p(n,["batch","inputConfig"],HF(t,s));const i=h(e,["config"]);return i!=null&&FF(i,n),n}function VF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Oa(t,r)),n}function OF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Oa(t,r)),n}function BF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);return i!=null&&p(e,["error"],i),e}function zF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);return i!=null&&p(e,["error"],i),e}function GF(t,e){const n={},r=h(e,["contents"]);if(r!=null){let i=J0(t,r);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["requests[]","request","content"],i)}const s=h(e,["config"]);return s!=null&&(p(n,["_self"],$F(s,n)),O3(n,{"requests[].*":"requests[].request.*"})),n}function $F(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=h(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function HF(t,e){const n={},r=h(e,["fileName"]);r!=null&&p(n,["file_name"],r);const s=h(e,["inlinedRequests"]);return s!=null&&p(n,["requests"],GF(t,s)),n}function qF(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function WF(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function KF(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function JF(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],QS(_n(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const l=h(e,["topK"]);l!=null&&p(r,["topK"],l);const c=h(e,["candidateCount"]);c!=null&&p(r,["candidateCount"],c);const u=h(e,["maxOutputTokens"]);u!=null&&p(r,["maxOutputTokens"],u);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const b=h(e,["responseMimeType"]);b!=null&&p(r,["responseMimeType"],b);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],Y0(v));const _=h(e,["responseJsonSchema"]);if(_!=null&&p(r,["responseJsonSchema"],_),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=h(e,["safetySettings"]);if(n!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(M=>d6(M))),p(n,["safetySettings"],D)}const R=h(e,["tools"]);if(n!==void 0&&R!=null){let D=Va(R);Array.isArray(D)&&(D=D.map(M=>f6(Ua(M)))),p(n,["tools"],D)}const j=h(e,["toolConfig"]);if(n!==void 0&&j!=null&&p(n,["toolConfig"],h6(j)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=h(e,["cachedContent"]);n!==void 0&&V!=null&&p(n,["cachedContent"],Ds(t,V));const S=h(e,["responseModalities"]);S!=null&&p(r,["responseModalities"],S);const I=h(e,["mediaResolution"]);I!=null&&p(r,["mediaResolution"],I);const C=h(e,["speechConfig"]);if(C!=null&&p(r,["speechConfig"],Q0(C)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=h(e,["thinkingConfig"]);A!=null&&p(r,["thinkingConfig"],A);const F=h(e,["imageConfig"]);F!=null&&p(r,["imageConfig"],t6(F));const P=h(e,["enableEnhancedCivicAnswers"]);return P!=null&&p(r,["enableEnhancedCivicAnswers"],P),r}function YF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>PF(u))),p(e,["candidates"],c)}const s=h(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=h(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=h(t,["responseId"]);o!=null&&p(e,["responseId"],o);const l=h(t,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function QF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Oa(t,r)),n}function XF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Oa(t,r)),n}function ZF(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function e6(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function t6(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function n6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["request","model"],it(t,r));const s=h(e,["contents"]);if(s!=null){let l=vr(s);Array.isArray(l)&&(l=l.map(c=>QS(c))),p(n,["request","contents"],l)}const i=h(e,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(e,["config"]);return o!=null&&p(n,["request","generationConfig"],JF(t,o,h(n,["request"],{}))),n}function r6(t){const e={},n=h(t,["response"]);n!=null&&p(e,["response"],YF(n));const r=h(t,["error"]);return r!=null&&p(e,["error"],r),e}function s6(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);if(e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),h(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function i6(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const i=h(t,["filter"]);return e!==void 0&&i!=null&&p(e,["_query","filter"],i),n}function o6(t){const e={},n=h(t,["config"]);return n!=null&&s6(n,e),e}function a6(t){const e={},n=h(t,["config"]);return n!=null&&i6(n,e),e}function l6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["operations"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Zu(o))),p(e,["batchJobs"],i)}return e}function c6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["batchPredictionJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Sm(o))),p(e,["batchJobs"],i)}return e}function u6(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],qF(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],WF(o));const l=h(t,["functionResponse"]);l!=null&&p(e,["functionResponse"],l);const c=h(t,["inlineData"]);c!=null&&p(e,["inlineData"],AF(c));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function d6(t){const e={},n=h(t,["category"]);if(n!=null&&p(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function h6(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],KF(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function f6(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],ZF(l));const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],e6(c));const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var As;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(As||(As={}));class go{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p6 extends Ms{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new go(As.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=D_(this.apiClient,e),r=n._url,s=Te("{model}:batchGenerateContent",r),l=n.batch.inputConfig.requests,c=l.requests,u=[];for(const d of c){const m=Object.assign({},d);if(m.systemInstruction){const g=m.systemInstruction;delete m.systemInstruction;const y=m.request;y.systemInstruction=g,m.request=y}u.push(m)}return l.requests=u,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const i=this.getGcsUri(e),o=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${s}`;else if(o)r.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=LF(this.apiClient,e);return l=Te("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Sm(d))}else{const u=D_(this.apiClient,e);return l=Te("{model}:batchGenerateContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Zu(d))}}async createEmbeddingsInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=UF(this.apiClient,e);return i=Te("{model}:asyncBatchEmbedContent",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>Zu(c))}}async get(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=XF(this.apiClient,e);return l=Te("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Sm(d))}else{const u=QF(this.apiClient,e);return l=Te("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Zu(d))}}async cancel(e){var n,r,s,i;let o="",l={};if(this.apiClient.isVertexAI()){const c=RF(this.apiClient,e);o=Te("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=NF(this.apiClient,e);o=Te("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=a6(e);return l=Te("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=c6(d),g=new N_;return Object.assign(g,m),g})}else{const u=o6(e);return l=Te("batches",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=l6(d),g=new N_;return Object.assign(g,m),g})}}async delete(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=OF(this.apiClient,e);return l=Te("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>zF(d))}else{const u=VF(this.apiClient,e);return l=Te("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>BF(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m6(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function j_(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>U6(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function g6(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["contents"]);if(e!==void 0&&o!=null){let d=vr(o);Array.isArray(d)&&(d=d.map(m=>j_(m))),p(e,["contents"],d)}const l=h(t,["systemInstruction"]);e!==void 0&&l!=null&&p(e,["systemInstruction"],j_(_n(l)));const c=h(t,["tools"]);if(e!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(m=>O6(m))),p(e,["tools"],d)}const u=h(t,["toolConfig"]);if(e!==void 0&&u!=null&&p(e,["toolConfig"],V6(u)),h(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function y6(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["contents"]);if(e!==void 0&&o!=null){let m=vr(o);Array.isArray(m)&&(m=m.map(g=>g)),p(e,["contents"],m)}const l=h(t,["systemInstruction"]);e!==void 0&&l!=null&&p(e,["systemInstruction"],_n(l));const c=h(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>B6(g))),p(e,["tools"],m)}const u=h(t,["toolConfig"]);e!==void 0&&u!=null&&p(e,["toolConfig"],u);const d=h(t,["kmsKeyName"]);return e!==void 0&&d!=null&&p(e,["encryption_spec","kmsKeyName"],d),n}function v6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],VS(t,r));const s=h(e,["config"]);return s!=null&&g6(s,n),n}function x6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],VS(t,r));const s=h(e,["config"]);return s!=null&&y6(s,n),n}function w6(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Ds(t,r)),n}function _6(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Ds(t,r)),n}function b6(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function E6(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function T6(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function I6(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function S6(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function k6(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const l=h(t,["responseJsonSchema"]);return l!=null&&p(e,["responseJsonSchema"],l),e}function C6(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Ds(t,r)),n}function A6(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Ds(t,r)),n}function N6(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function R6(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function P6(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function M6(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function D6(t){const e={},n=h(t,["config"]);return n!=null&&P6(n,e),e}function j6(t){const e={},n=h(t,["config"]);return n!=null&&M6(n,e),e}function L6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function F6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function U6(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],T6(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],I6(o));const l=h(t,["functionResponse"]);l!=null&&p(e,["functionResponse"],l);const c=h(t,["inlineData"]);c!=null&&p(e,["inlineData"],m6(c));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function V6(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],S6(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function O6(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],N6(l));const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],R6(c));const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function B6(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>k6(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const l=h(t,["enterpriseWebSearch"]);l!=null&&p(e,["enterpriseWebSearch"],l);const c=h(t,["googleMaps"]);c!=null&&p(e,["googleMaps"],c);const u=h(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],u);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function z6(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function G6(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function $6(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],Ds(t,r));const s=h(e,["config"]);return s!=null&&z6(s,n),n}function H6(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],Ds(t,r));const s=h(e,["config"]);return s!=null&&G6(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q6 extends Ms{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new go(As.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=x6(this.apiClient,e);return l=Te("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=v6(this.apiClient,e);return l=Te("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=A6(this.apiClient,e);return l=Te("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=C6(this.apiClient,e);return l=Te("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=_6(this.apiClient,e);return l=Te("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=E6(d),g=new C_;return Object.assign(g,m),g})}else{const u=w6(this.apiClient,e);return l=Te("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=b6(d),g=new C_;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=H6(this.apiClient,e);return l=Te("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=$6(this.apiClient,e);return l=Te("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async listInternal(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=j6(e);return l=Te("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=F6(d),g=new A_;return Object.assign(g,m),g})}else{const u=D6(e);return l=Te("cachedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=L6(d),g=new A_;return Object.assign(g,m),g})}}}function Wd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function L_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(t){return this instanceof Be?(this.v=t,this):new Be(t)}function Lr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(y){return function(w){return Promise.resolve(w).then(y,m)}}function l(y,w){r[y]&&(s[y]=function(x){return new Promise(function(b,v){i.push([y,x,b,v])>1||c(y,x)})},w&&(s[y]=w(s[y])))}function c(y,w){try{u(r[y](w))}catch(x){g(i[0][3],x)}}function u(y){y.value instanceof Be?Promise.resolve(y.value.v).then(d,m):g(i[0][2],y)}function d(y){c("next",y)}function m(y){c("throw",y)}function g(y,w){y(w),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Fr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof L_=="function"?L_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(l,c){o=t[i](o),s(l,c,o.done,o.value)})}}function s(i,o,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W6(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:XS(n)}function XS(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function K6(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function F_(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let i=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),i&&!XS(t[r])&&(i=!1),r++;i?e.push(...s):e.pop()}return e}class J6{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Y6(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Y6{constructor(e,n,r,s={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=i,this.sendPromise=Promise.resolve(),K6(i)}async sendMessage(e){var n;await this.sendPromise;const r=_n(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,o,l;const c=await s,u=(o=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,d=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];d!=null&&(g=(l=d.slice(m))!==null&&l!==void 0?l:[]);const y=u?[u]:[];this.recordHistory(r,y,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=_n(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const i=await s;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?F_(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Lr(this,arguments,function*(){var s,i,o,l,c,u;const d=[];try{for(var m=!0,g=Fr(e),y;y=yield Be(g.next()),s=y.done,!s;m=!0){l=y.value,m=!1;const w=l;if(W6(w)){const x=(u=(c=w.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content;x!==void 0&&d.push(x)}yield yield Be(w)}}catch(w){i={error:w}}finally{try{!m&&!s&&(o=g.return)&&(yield Be(o.call(g)))}finally{if(i)throw i.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(i=>i.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...F_(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Vh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q6(t){const e={},n=h(t,["file"]);return n!=null&&p(e,["file"],n),e}function X6(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function Z6(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],HS(n)),e}function eU(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function tU(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],HS(n)),e}function nU(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function rU(t){const e={},n=h(t,["config"]);return n!=null&&nU(n,e),e}function sU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["files"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iU extends Ms{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new go(As.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=rU(e);return i=Te("files",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=sU(c),d=new cF;return Object.assign(d,u),d})}}async createInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Q6(e);return i=Te("upload/v1beta/files",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=X6(c),d=new uF;return Object.assign(d,u),d})}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=tU(e);return i=Te("files/{file}",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Z6(e);return i=Te("files/{file}",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=eU(c),d=new dF;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ed(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function oU(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>bU(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function aU(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function lU(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function cU(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const l=h(t,["responseJsonSchema"]);return l!=null&&p(e,["responseJsonSchema"],l),e}function uU(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=h(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=h(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const l=h(t,["frequencyPenalty"]);l!=null&&p(e,["frequencyPenalty"],l);const c=h(t,["logprobs"]);c!=null&&p(e,["logprobs"],c);const u=h(t,["maxOutputTokens"]);u!=null&&p(e,["maxOutputTokens"],u);const d=h(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const m=h(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=h(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=h(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const w=h(t,["responseModalities"]);w!=null&&p(e,["responseModalities"],w);const x=h(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const b=h(t,["routingConfig"]);b!=null&&p(e,["routingConfig"],b);const v=h(t,["seed"]);v!=null&&p(e,["seed"],v);const _=h(t,["speechConfig"]);_!=null&&p(e,["speechConfig"],_);const T=h(t,["stopSequences"]);T!=null&&p(e,["stopSequences"],T);const R=h(t,["temperature"]);R!=null&&p(e,["temperature"],R);const j=h(t,["thinkingConfig"]);j!=null&&p(e,["thinkingConfig"],j);const V=h(t,["topK"]);V!=null&&p(e,["topK"],V);const S=h(t,["topP"]);if(S!=null&&p(e,["topP"],S),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function dU(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function hU(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function fU(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const l=h(t,["topK"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","topK"],l);const c=h(t,["maxOutputTokens"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","maxOutputTokens"],c);const u=h(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],X0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],oU(_n(w)));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let V=Va(x);Array.isArray(V)&&(V=V.map(S=>TU(Ua(S)))),p(e,["setup","tools"],V)}const b=h(t,["sessionResumption"]);e!==void 0&&b!=null&&p(e,["setup","sessionResumption"],EU(b));const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const _=h(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&p(e,["setup","outputAudioTranscription"],_);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const R=h(t,["contextWindowCompression"]);e!==void 0&&R!=null&&p(e,["setup","contextWindowCompression"],R);const j=h(t,["proactivity"]);if(e!==void 0&&j!=null&&p(e,["setup","proactivity"],j),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function pU(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],uU(r));const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const l=h(t,["topK"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","topK"],l);const c=h(t,["maxOutputTokens"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","maxOutputTokens"],c);const u=h(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],X0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],_n(w));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let S=Va(x);Array.isArray(S)&&(S=S.map(I=>IU(Ua(I)))),p(e,["setup","tools"],S)}const b=h(t,["sessionResumption"]);e!==void 0&&b!=null&&p(e,["setup","sessionResumption"],b);const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const _=h(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&p(e,["setup","outputAudioTranscription"],_);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const R=h(t,["contextWindowCompression"]);e!==void 0&&R!=null&&p(e,["setup","contextWindowCompression"],R);const j=h(t,["proactivity"]);e!==void 0&&j!=null&&p(e,["setup","proactivity"],j);const V=h(t,["explicitVadSignal"]);return e!==void 0&&V!=null&&p(e,["setup","explicitVadSignal"],V),n}function mU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],it(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],fU(s,n)),n}function gU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],it(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],pU(s,n)),n}function yU(t){const e={},n=h(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function vU(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["weightedPrompts"],r)}return e}function xU(t){const e={},n=h(t,["media"]);if(n!=null){let u=OS(n);Array.isArray(u)&&(u=u.map(d=>ed(d))),p(e,["mediaChunks"],u)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],ed(zS(r)));const s=h(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(t,["video"]);i!=null&&p(e,["video"],ed(BS(i)));const o=h(t,["text"]);o!=null&&p(e,["text"],o);const l=h(t,["activityStart"]);l!=null&&p(e,["activityStart"],l);const c=h(t,["activityEnd"]);return c!=null&&p(e,["activityEnd"],c),e}function wU(t){const e={},n=h(t,["media"]);if(n!=null){let u=OS(n);Array.isArray(u)&&(u=u.map(d=>d)),p(e,["mediaChunks"],u)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],zS(r));const s=h(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(t,["video"]);i!=null&&p(e,["video"],BS(i));const o=h(t,["text"]);o!=null&&p(e,["text"],o);const l=h(t,["activityStart"]);l!=null&&p(e,["activityStart"],l);const c=h(t,["activityEnd"]);return c!=null&&p(e,["activityEnd"],c),e}function _U(t){const e={},n=h(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const r=h(t,["serverContent"]);r!=null&&p(e,["serverContent"],r);const s=h(t,["toolCall"]);s!=null&&p(e,["toolCall"],s);const i=h(t,["toolCallCancellation"]);i!=null&&p(e,["toolCallCancellation"],i);const o=h(t,["usageMetadata"]);o!=null&&p(e,["usageMetadata"],SU(o));const l=h(t,["goAway"]);l!=null&&p(e,["goAway"],l);const c=h(t,["sessionResumptionUpdate"]);c!=null&&p(e,["sessionResumptionUpdate"],c);const u=h(t,["voiceActivityDetectionSignal"]);return u!=null&&p(e,["voiceActivityDetectionSignal"],u),e}function bU(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],aU(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],lU(o));const l=h(t,["functionResponse"]);l!=null&&p(e,["functionResponse"],l);const c=h(t,["inlineData"]);c!=null&&p(e,["inlineData"],ed(c));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function EU(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function TU(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],dU(l));const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],hU(c));const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function IU(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>cU(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const l=h(t,["enterpriseWebSearch"]);l!=null&&p(e,["enterpriseWebSearch"],l);const c=h(t,["googleMaps"]);c!=null&&p(e,["googleMaps"],c);const u=h(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],u);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function SU(t){const e={},n=h(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const r=h(t,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const s=h(t,["candidatesTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const i=h(t,["toolUsePromptTokenCount"]);i!=null&&p(e,["toolUsePromptTokenCount"],i);const o=h(t,["thoughtsTokenCount"]);o!=null&&p(e,["thoughtsTokenCount"],o);const l=h(t,["totalTokenCount"]);l!=null&&p(e,["totalTokenCount"],l);const c=h(t,["promptTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["promptTokensDetails"],y)}const u=h(t,["cacheTokensDetails"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["cacheTokensDetails"],y)}const d=h(t,["candidatesTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["responseTokensDetails"],y)}const m=h(t,["toolUsePromptTokensDetails"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["toolUsePromptTokensDetails"],y)}const g=h(t,["trafficType"]);return g!=null&&p(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kU(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function CU(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],AU(r));const s=h(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const l=h(t,["groundingMetadata"]);l!=null&&p(e,["groundingMetadata"],l);const c=h(t,["index"]);c!=null&&p(e,["index"],c);const u=h(t,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const d=h(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=h(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function AU(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function NU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["contents"]);if(s!=null){let i=vr(s);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["contents"],i)}return n}function RU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["tokensInfo"],s)}return e}function PU(t){const e={},n=h(t,["values"]);n!=null&&p(e,["values"],n);const r=h(t,["statistics"]);return r!=null&&p(e,["statistics"],MU(r)),e}function MU(t){const e={},n=h(t,["truncated"]);n!=null&&p(e,["truncated"],n);const r=h(t,["token_count"]);return r!=null&&p(e,["tokenCount"],r),e}function Oh(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>zV(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function DU(t){const e={},n=h(t,["controlType"]);n!=null&&p(e,["controlType"],n);const r=h(t,["enableControlImageComputation"]);return r!=null&&p(e,["computeControl"],r),e}function jU(t){const e={};if(h(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function LU(t,e){const n={},r=h(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],_n(r));const s=h(t,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>nk(l))),p(e,["tools"],o)}const i=h(t,["generationConfig"]);return e!==void 0&&i!=null&&p(e,["generationConfig"],kV(i)),n}function FU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["contents"]);if(s!=null){let o=vr(s);Array.isArray(o)&&(o=o.map(l=>Oh(l))),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&jU(i),n}function UU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["contents"]);if(s!=null){let o=vr(s);Array.isArray(o)&&(o=o.map(l=>l)),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&LU(i,n),n}function VU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);r!=null&&p(e,["totalTokens"],r);const s=h(t,["cachedContentTokenCount"]);return s!=null&&p(e,["cachedContentTokenCount"],s),e}function OU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);return r!=null&&p(e,["totalTokens"],r),e}function BU(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],it(t,r)),n}function zU(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],it(t,r)),n}function GU(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function $U(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function HU(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const l=h(t,["guidanceScale"]);e!==void 0&&l!=null&&p(e,["parameters","guidanceScale"],l);const c=h(t,["seed"]);e!==void 0&&c!=null&&p(e,["parameters","seed"],c);const u=h(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const w=h(t,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const x=h(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const b=h(t,["addWatermark"]);e!==void 0&&b!=null&&p(e,["parameters","addWatermark"],b);const v=h(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const _=h(t,["editMode"]);e!==void 0&&_!=null&&p(e,["parameters","editMode"],_);const T=h(t,["baseSteps"]);return e!==void 0&&T!=null&&p(e,["parameters","editConfig","baseSteps"],T),n}function qU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["referenceImages"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>KV(c))),p(n,["instances[0]","referenceImages"],l)}const o=h(e,["config"]);return o!=null&&HU(o,n),n}function WU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Bh(i))),p(e,["generatedImages"],s)}return e}function KU(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=h(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function JU(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["instances[]","title"],s);const i=h(t,["outputDimensionality"]);e!==void 0&&i!=null&&p(e,["parameters","outputDimensionality"],i);const o=h(t,["mimeType"]);e!==void 0&&o!=null&&p(e,["instances[]","mimeType"],o);const l=h(t,["autoTruncate"]);return e!==void 0&&l!=null&&p(e,["parameters","autoTruncate"],l),n}function YU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["contents"]);if(s!=null){let l=J0(t,s);Array.isArray(l)&&(l=l.map(c=>c)),p(n,["requests[]","content"],l)}const i=h(e,["config"]);i!=null&&KU(i,n);const o=h(e,["model"]);return o!==void 0&&p(n,["requests[]","model"],it(t,o)),n}function QU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["contents"]);if(s!=null){let o=J0(t,s);Array.isArray(o)&&(o=o.map(l=>l)),p(n,["instances[]","content"],o)}const i=h(e,["config"]);return i!=null&&JU(i,n),n}function XU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["embeddings"],i)}const s=h(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function ZU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>PU(o))),p(e,["embeddings"],i)}const s=h(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function eV(t){const e={},n=h(t,["endpoint"]);n!=null&&p(e,["name"],n);const r=h(t,["deployedModelId"]);return r!=null&&p(e,["deployedModelId"],r),e}function tV(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function nV(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rV(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function sV(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const l=h(t,["responseJsonSchema"]);return l!=null&&p(e,["responseJsonSchema"],l),e}function iV(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],Oh(_n(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const l=h(e,["topK"]);l!=null&&p(r,["topK"],l);const c=h(e,["candidateCount"]);c!=null&&p(r,["candidateCount"],c);const u=h(e,["maxOutputTokens"]);u!=null&&p(r,["maxOutputTokens"],u);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const b=h(e,["responseMimeType"]);b!=null&&p(r,["responseMimeType"],b);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],Y0(v));const _=h(e,["responseJsonSchema"]);if(_!=null&&p(r,["responseJsonSchema"],_),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=h(e,["safetySettings"]);if(n!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(M=>JV(M))),p(n,["safetySettings"],D)}const R=h(e,["tools"]);if(n!==void 0&&R!=null){let D=Va(R);Array.isArray(D)&&(D=D.map(M=>nO(Ua(M)))),p(n,["tools"],D)}const j=h(e,["toolConfig"]);if(n!==void 0&&j!=null&&p(n,["toolConfig"],tO(j)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=h(e,["cachedContent"]);n!==void 0&&V!=null&&p(n,["cachedContent"],Ds(t,V));const S=h(e,["responseModalities"]);S!=null&&p(r,["responseModalities"],S);const I=h(e,["mediaResolution"]);I!=null&&p(r,["mediaResolution"],I);const C=h(e,["speechConfig"]);if(C!=null&&p(r,["speechConfig"],Q0(C)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=h(e,["thinkingConfig"]);A!=null&&p(r,["thinkingConfig"],A);const F=h(e,["imageConfig"]);F!=null&&p(r,["imageConfig"],PV(F));const P=h(e,["enableEnhancedCivicAnswers"]);return P!=null&&p(r,["enableEnhancedCivicAnswers"],P),r}function oV(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],_n(s));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const l=h(e,["topK"]);l!=null&&p(r,["topK"],l);const c=h(e,["candidateCount"]);c!=null&&p(r,["candidateCount"],c);const u=h(e,["maxOutputTokens"]);u!=null&&p(r,["maxOutputTokens"],u);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const b=h(e,["responseMimeType"]);b!=null&&p(r,["responseMimeType"],b);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],Y0(v));const _=h(e,["responseJsonSchema"]);_!=null&&p(r,["responseJsonSchema"],_);const T=h(e,["routingConfig"]);T!=null&&p(r,["routingConfig"],T);const R=h(e,["modelSelectionConfig"]);R!=null&&p(r,["modelConfig"],R);const j=h(e,["safetySettings"]);if(n!==void 0&&j!=null){let pe=j;Array.isArray(pe)&&(pe=pe.map(ne=>ne)),p(n,["safetySettings"],pe)}const V=h(e,["tools"]);if(n!==void 0&&V!=null){let pe=Va(V);Array.isArray(pe)&&(pe=pe.map(ne=>nk(Ua(ne)))),p(n,["tools"],pe)}const S=h(e,["toolConfig"]);n!==void 0&&S!=null&&p(n,["toolConfig"],S);const I=h(e,["labels"]);n!==void 0&&I!=null&&p(n,["labels"],I);const C=h(e,["cachedContent"]);n!==void 0&&C!=null&&p(n,["cachedContent"],Ds(t,C));const A=h(e,["responseModalities"]);A!=null&&p(r,["responseModalities"],A);const F=h(e,["mediaResolution"]);F!=null&&p(r,["mediaResolution"],F);const P=h(e,["speechConfig"]);P!=null&&p(r,["speechConfig"],Q0(P));const D=h(e,["audioTimestamp"]);D!=null&&p(r,["audioTimestamp"],D);const M=h(e,["thinkingConfig"]);M!=null&&p(r,["thinkingConfig"],M);const q=h(e,["imageConfig"]);if(q!=null&&p(r,["imageConfig"],MV(q)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function U_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["contents"]);if(s!=null){let o=vr(s);Array.isArray(o)&&(o=o.map(l=>Oh(l))),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(n,["generationConfig"],iV(t,i,n)),n}function V_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["contents"]);if(s!=null){let o=vr(s);Array.isArray(o)&&(o=o.map(l=>l)),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(n,["generationConfig"],oV(t,i,n)),n}function O_(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>CU(u))),p(e,["candidates"],c)}const s=h(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=h(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=h(t,["responseId"]);o!=null&&p(e,["responseId"],o);const l=h(t,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function B_(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),p(e,["candidates"],u)}const s=h(t,["createTime"]);s!=null&&p(e,["createTime"],s);const i=h(t,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const o=h(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const l=h(t,["responseId"]);l!=null&&p(e,["responseId"],l);const c=h(t,["usageMetadata"]);return c!=null&&p(e,["usageMetadata"],c),e}function aV(t,e){const n={};if(h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const i=h(t,["guidanceScale"]);if(e!==void 0&&i!=null&&p(e,["parameters","guidanceScale"],i),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const l=h(t,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const c=h(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&p(e,["parameters","includeSafetyAttributes"],c);const u=h(t,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const d=h(t,["language"]);e!==void 0&&d!=null&&p(e,["parameters","language"],d);const m=h(t,["outputMimeType"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","mimeType"],m);const g=h(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g),h(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=h(t,["imageSize"]);if(e!==void 0&&y!=null&&p(e,["parameters","sampleImageSize"],y),h(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function lV(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const l=h(t,["guidanceScale"]);e!==void 0&&l!=null&&p(e,["parameters","guidanceScale"],l);const c=h(t,["seed"]);e!==void 0&&c!=null&&p(e,["parameters","seed"],c);const u=h(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const w=h(t,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const x=h(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const b=h(t,["addWatermark"]);e!==void 0&&b!=null&&p(e,["parameters","addWatermark"],b);const v=h(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const _=h(t,["imageSize"]);e!==void 0&&_!=null&&p(e,["parameters","sampleImageSize"],_);const T=h(t,["enhancePrompt"]);return e!==void 0&&T!=null&&p(e,["parameters","enhancePrompt"],T),n}function cV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&aV(i,n),n}function uV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&lV(i,n),n}function dV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>EV(o))),p(e,["generatedImages"],i)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],ek(s)),e}function hV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Bh(o))),p(e,["generatedImages"],i)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],tk(s)),e}function fV(t,e){const n={},r=h(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=h(t,["durationSeconds"]);if(e!==void 0&&s!=null&&p(e,["parameters","durationSeconds"],s),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=h(t,["aspectRatio"]);e!==void 0&&i!=null&&p(e,["parameters","aspectRatio"],i);const o=h(t,["resolution"]);e!==void 0&&o!=null&&p(e,["parameters","resolution"],o);const l=h(t,["personGeneration"]);if(e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l),h(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=h(t,["negativePrompt"]);e!==void 0&&c!=null&&p(e,["parameters","negativePrompt"],c);const u=h(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&p(e,["parameters","enhancePrompt"],u),h(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=h(t,["lastFrame"]);e!==void 0&&d!=null&&p(e,["instances[0]","lastFrame"],zh(d));const m=h(t,["referenceImages"]);if(e!==void 0&&m!=null){let g=m;Array.isArray(g)&&(g=g.map(y=>mO(y))),p(e,["instances[0]","referenceImages"],g)}if(h(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function pV(t,e){const n={},r=h(t,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const i=h(t,["fps"]);e!==void 0&&i!=null&&p(e,["parameters","fps"],i);const o=h(t,["durationSeconds"]);e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o);const l=h(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=h(t,["aspectRatio"]);e!==void 0&&c!=null&&p(e,["parameters","aspectRatio"],c);const u=h(t,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["pubsubTopic"]);e!==void 0&&m!=null&&p(e,["parameters","pubsubTopic"],m);const g=h(t,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const y=h(t,["enhancePrompt"]);e!==void 0&&y!=null&&p(e,["parameters","enhancePrompt"],y);const w=h(t,["generateAudio"]);e!==void 0&&w!=null&&p(e,["parameters","generateAudio"],w);const x=h(t,["lastFrame"]);e!==void 0&&x!=null&&p(e,["instances[0]","lastFrame"],Gr(x));const b=h(t,["referenceImages"]);if(e!==void 0&&b!=null){let T=b;Array.isArray(T)&&(T=T.map(R=>gO(R))),p(e,["instances[0]","referenceImages"],T)}const v=h(t,["mask"]);e!==void 0&&v!=null&&p(e,["instances[0]","mask"],pO(v));const _=h(t,["compressionQuality"]);return e!==void 0&&_!=null&&p(e,["parameters","compressionQuality"],_),n}function mV(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],xV(o)),e}function gV(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],wV(o)),e}function yV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["image"]);i!=null&&p(n,["instances[0]","image"],zh(i));const o=h(e,["video"]);o!=null&&p(n,["instances[0]","video"],rk(o));const l=h(e,["source"]);l!=null&&_V(l,n);const c=h(e,["config"]);return c!=null&&fV(c,n),n}function vV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["image"]);i!=null&&p(n,["instances[0]","image"],Gr(i));const o=h(e,["video"]);o!=null&&p(n,["instances[0]","video"],sk(o));const l=h(e,["source"]);l!=null&&bV(l,n);const c=h(e,["config"]);return c!=null&&pV(c,n),n}function xV(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>IV(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function wV(t){const e={},n=h(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>SV(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function _V(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],zh(s));const i=h(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],rk(i)),n}function bV(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Gr(s));const i=h(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],sk(i)),n}function EV(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],DV(n));const r=h(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(t,["_self"]);return s!=null&&p(e,["safetyAttributes"],ek(s)),e}function Bh(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],ZS(n));const r=h(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(t,["_self"]);s!=null&&p(e,["safetyAttributes"],tk(s));const i=h(t,["prompt"]);return i!=null&&p(e,["enhancedPrompt"],i),e}function TV(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["mask"],ZS(n));const r=h(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["labels"],s)}return e}function IV(t){const e={},n=h(t,["video"]);return n!=null&&p(e,["video"],hO(n)),e}function SV(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],fO(n)),e}function kV(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=h(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=h(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const l=h(t,["frequencyPenalty"]);l!=null&&p(e,["frequencyPenalty"],l);const c=h(t,["logprobs"]);c!=null&&p(e,["logprobs"],c);const u=h(t,["maxOutputTokens"]);u!=null&&p(e,["maxOutputTokens"],u);const d=h(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const m=h(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=h(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=h(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const w=h(t,["responseModalities"]);w!=null&&p(e,["responseModalities"],w);const x=h(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const b=h(t,["routingConfig"]);b!=null&&p(e,["routingConfig"],b);const v=h(t,["seed"]);v!=null&&p(e,["seed"],v);const _=h(t,["speechConfig"]);_!=null&&p(e,["speechConfig"],_);const T=h(t,["stopSequences"]);T!=null&&p(e,["stopSequences"],T);const R=h(t,["temperature"]);R!=null&&p(e,["temperature"],R);const j=h(t,["thinkingConfig"]);j!=null&&p(e,["thinkingConfig"],j);const V=h(t,["topK"]);V!=null&&p(e,["topK"],V);const S=h(t,["topP"]);if(S!=null&&p(e,["topP"],S),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function CV(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],it(t,r)),n}function AV(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],it(t,r)),n}function NV(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function RV(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function PV(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function MV(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);r!=null&&p(e,["imageSize"],r);const s=h(t,["outputMimeType"]);s!=null&&p(e,["imageOutputOptions","mimeType"],s);const i=h(t,["outputCompressionQuality"]);return i!=null&&p(e,["imageOutputOptions","compressionQuality"],i),e}function DV(t){const e={},n=h(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],bi(n));const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function ZS(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["imageBytes"],bi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function zh(t){const e={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],bi(n));const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Gr(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["imageBytes"]);r!=null&&p(e,["bytesBase64Encoded"],bi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function jV(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=h(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=h(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const l=h(e,["queryBase"]);return n!==void 0&&l!=null&&p(n,["_url","models_url"],qS(t,l)),r}function LV(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=h(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=h(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const l=h(e,["queryBase"]);return n!==void 0&&l!=null&&p(n,["_url","models_url"],qS(t,l)),r}function FV(t,e){const n={},r=h(e,["config"]);return r!=null&&jV(t,r,n),n}function UV(t,e){const n={},r=h(e,["config"]);return r!=null&&LV(t,r,n),n}function VV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let i=WS(s);Array.isArray(i)&&(i=i.map(o=>km(o))),p(e,["models"],i)}return e}function OV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let i=WS(s);Array.isArray(i)&&(i=i.map(o=>Cm(o))),p(e,["models"],i)}return e}function BV(t){const e={},n=h(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const r=h(t,["segmentationClasses"]);r!=null&&p(e,["maskClasses"],r);const s=h(t,["maskDilation"]);return s!=null&&p(e,["dilation"],s),e}function km(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);s!=null&&p(e,["description"],s);const i=h(t,["version"]);i!=null&&p(e,["version"],i);const o=h(t,["_self"]);o!=null&&p(e,["tunedModelInfo"],rO(o));const l=h(t,["inputTokenLimit"]);l!=null&&p(e,["inputTokenLimit"],l);const c=h(t,["outputTokenLimit"]);c!=null&&p(e,["outputTokenLimit"],c);const u=h(t,["supportedGenerationMethods"]);u!=null&&p(e,["supportedActions"],u);const d=h(t,["temperature"]);d!=null&&p(e,["temperature"],d);const m=h(t,["maxTemperature"]);m!=null&&p(e,["maxTemperature"],m);const g=h(t,["topP"]);g!=null&&p(e,["topP"],g);const y=h(t,["topK"]);y!=null&&p(e,["topK"],y);const w=h(t,["thinking"]);return w!=null&&p(e,["thinking"],w),e}function Cm(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);s!=null&&p(e,["description"],s);const i=h(t,["versionId"]);i!=null&&p(e,["version"],i);const o=h(t,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>eV(g))),p(e,["endpoints"],m)}const l=h(t,["labels"]);l!=null&&p(e,["labels"],l);const c=h(t,["_self"]);c!=null&&p(e,["tunedModelInfo"],sO(c));const u=h(t,["defaultCheckpointId"]);u!=null&&p(e,["defaultCheckpointId"],u);const d=h(t,["checkpoints"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),p(e,["checkpoints"],m)}return e}function zV(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],tV(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],nV(o));const l=h(t,["functionResponse"]);l!=null&&p(e,["functionResponse"],l);const c=h(t,["inlineData"]);c!=null&&p(e,["inlineData"],kU(c));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function GV(t){const e={},n=h(t,["productImage"]);return n!=null&&p(e,["image"],Gr(n)),e}function $V(t,e){const n={},r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["baseSteps"]);e!==void 0&&s!=null&&p(e,["parameters","baseSteps"],s);const i=h(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=h(t,["seed"]);e!==void 0&&o!=null&&p(e,["parameters","seed"],o);const l=h(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&p(e,["parameters","safetySetting"],l);const c=h(t,["personGeneration"]);e!==void 0&&c!=null&&p(e,["parameters","personGeneration"],c);const u=h(t,["addWatermark"]);e!==void 0&&u!=null&&p(e,["parameters","addWatermark"],u);const d=h(t,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const m=h(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const g=h(t,["enhancePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","enhancePrompt"],g);const y=h(t,["labels"]);return e!==void 0&&y!=null&&p(e,["labels"],y),n}function HV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["source"]);s!=null&&WV(s,n);const i=h(e,["config"]);return i!=null&&$V(i,n),n}function qV(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Bh(s))),p(e,["generatedImages"],r)}return e}function WV(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["personImage"]);e!==void 0&&s!=null&&p(e,["instances[0]","personImage","image"],Gr(s));const i=h(t,["productImages"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>GV(l))),p(e,["instances[0]","productImages"],o)}return n}function KV(t){const e={},n=h(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],Gr(n));const r=h(t,["referenceId"]);r!=null&&p(e,["referenceId"],r);const s=h(t,["referenceType"]);s!=null&&p(e,["referenceType"],s);const i=h(t,["maskImageConfig"]);i!=null&&p(e,["maskImageConfig"],BV(i));const o=h(t,["controlImageConfig"]);o!=null&&p(e,["controlImageConfig"],DU(o));const l=h(t,["styleImageConfig"]);l!=null&&p(e,["styleImageConfig"],l);const c=h(t,["subjectImageConfig"]);return c!=null&&p(e,["subjectImageConfig"],c),e}function ek(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function tk(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function JV(t){const e={},n=h(t,["category"]);if(n!=null&&p(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function YV(t){const e={},n=h(t,["image"]);return n!=null&&p(e,["image"],Gr(n)),e}function QV(t,e){const n={},r=h(t,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const s=h(t,["maxPredictions"]);e!==void 0&&s!=null&&p(e,["parameters","maxPredictions"],s);const i=h(t,["confidenceThreshold"]);e!==void 0&&i!=null&&p(e,["parameters","confidenceThreshold"],i);const o=h(t,["maskDilation"]);e!==void 0&&o!=null&&p(e,["parameters","maskDilation"],o);const l=h(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&p(e,["parameters","binaryColorThreshold"],l);const c=h(t,["labels"]);return e!==void 0&&c!=null&&p(e,["labels"],c),n}function XV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["source"]);s!=null&&eO(s,n);const i=h(e,["config"]);return i!=null&&QV(i,n),n}function ZV(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>TV(s))),p(e,["generatedMasks"],r)}return e}function eO(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Gr(s));const i=h(t,["scribbleImage"]);return e!==void 0&&i!=null&&p(e,["instances[0]","scribble"],YV(i)),n}function tO(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],rV(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function nO(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],NV(l));const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],RV(c));const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function nk(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>sV(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const l=h(t,["enterpriseWebSearch"]);l!=null&&p(e,["enterpriseWebSearch"],l);const c=h(t,["googleMaps"]);c!=null&&p(e,["googleMaps"],c);const u=h(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],u);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function rO(t){const e={},n=h(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function sO(t){const e={},n=h(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function iO(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function oO(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function aO(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","name"],it(t,r));const s=h(e,["config"]);return s!=null&&iO(s,n),n}function lO(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["config"]);return s!=null&&oO(s,n),n}function cO(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&p(e,["parameters","safetySetting"],s);const i=h(t,["personGeneration"]);e!==void 0&&i!=null&&p(e,["parameters","personGeneration"],i);const o=h(t,["includeRaiReason"]);e!==void 0&&o!=null&&p(e,["parameters","includeRaiReason"],o);const l=h(t,["outputMimeType"]);e!==void 0&&l!=null&&p(e,["parameters","outputOptions","mimeType"],l);const c=h(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&p(e,["parameters","outputOptions","compressionQuality"],c);const u=h(t,["enhanceInputImage"]);e!==void 0&&u!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],u);const d=h(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const m=h(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=h(t,["numberOfImages"]);e!==void 0&&g!=null&&p(e,["parameters","sampleCount"],g);const y=h(t,["mode"]);return e!==void 0&&y!=null&&p(e,["parameters","mode"],y),n}function uO(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],it(t,r));const s=h(e,["image"]);s!=null&&p(n,["instances[0]","image"],Gr(s));const i=h(e,["upscaleFactor"]);i!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],i);const o=h(e,["config"]);return o!=null&&cO(o,n),n}function dO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Bh(i))),p(e,["generatedImages"],s)}return e}function hO(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],bi(r));const s=h(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function fO(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],bi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function pO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["_self"],Gr(n));const r=h(t,["maskMode"]);return r!=null&&p(e,["maskMode"],r),e}function mO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["image"],zh(n));const r=h(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function gO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["image"],Gr(n));const r=h(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function rk(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["videoBytes"]);r!=null&&p(e,["encodedVideo"],bi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["encoding"],s),e}function sk(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["videoBytes"]);r!=null&&p(e,["bytesBase64Encoded"],bi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yO(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["displayName"],r),n}function vO(t){const e={},n=h(t,["config"]);return n!=null&&yO(n,e),e}function xO(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function wO(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&xO(r,e),e}function _O(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function bO(t,e){const n={},r=h(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["customMetadata"],i)}const s=h(t,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),n}function EO(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],IO(o)),e}function TO(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["fileName"]);r!=null&&p(e,["fileName"],r);const s=h(t,["config"]);return s!=null&&bO(s,e),e}function IO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function SO(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function kO(t){const e={},n=h(t,["config"]);return n!=null&&SO(n,e),e}function CO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["fileSearchStores"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["fileSearchStores"],i)}return e}function ik(t,e){const n={},r=h(t,["mimeType"]);e!==void 0&&r!=null&&p(e,["mimeType"],r);const s=h(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const i=h(t,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),p(e,["customMetadata"],l)}const o=h(t,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),n}function AO(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["config"]);return r!=null&&ik(r,e),e}function NO(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RO="Content-Type",PO="X-Server-Timeout",MO="User-Agent",Am="x-goog-api-client",DO="1.34.0",jO=`google-genai-sdk/${DO}`,LO="v1beta1",FO="v1beta";class UO{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:LO,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:FO,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,l]of Object.entries(e.queryParams))s.searchParams.append(o,String(l));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.unaryApiCall(s,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,i]of Object.entries(n))typeof i=="object"?r[s]=Object.assign(Object.assign({},r[s]),i):i!==void 0&&(r[s]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.streamApiCall(s,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>i.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}s&&s.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&VO(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await z_(s),new Tm(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await z_(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Lr(this,arguments,function*(){var r;const s=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";const l="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:d}=yield Be(s.read());if(u){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(d,{stream:!0});try{const w=JSON.parse(m);if("error"in w){const x=JSON.parse(JSON.stringify(w.error)),b=x.status,v=x.code,_=`got status: ${b}. ${JSON.stringify(w)}`;if(v>=400&&v<600)throw new Vh({message:_,status:v})}}catch(w){if(w.name==="ApiError")throw w}o+=m;let g=-1,y=0;for(;;){g=-1,y=0;for(const b of c){const v=o.indexOf(b);v!==-1&&(g===-1||v<g)&&(g=v,y=b.length)}if(g===-1)break;const w=o.substring(0,g);o=o.substring(g+y);const x=w.trim();if(x.startsWith(l)){const b=x.substring(l.length).trim();try{const v=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Be(new Tm(v))}catch(v){throw new Error(`exception parsing stream chunk ${b}. ${v}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=jO+" "+this.clientOptions.userAgentExtra;return e[MO]=n,e[Am]=n,e[RO]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,i]of Object.entries(e.headers))r.append(s,i);e.timeout&&e.timeout>0&&r.append(PO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);s.sizeBytes=String(o.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=l;const c={file:s},u=this.getFileName(e),d=Te("upload/v1beta/files",c._url),m=await this.fetchUploadUrl(d,s.sizeBytes,s.mimeType,u,c,n==null?void 0:n.httpOptions);return i.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var s;const i=this.clientOptions.uploader,o=await i.stat(n),l=String(o.size),c=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:o.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),m={};r!=null&&ik(r,m);const g=await this.fetchUploadUrl(u,l,c,d,m,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,i,o){var l;let c={};o?c=o:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const u=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(l=u==null?void 0:u.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function z_(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new Vh({message:s,status:n}):new Error(s)}}function VO(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,o){const l=Object.assign({},i);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const u=o[c],d=l[c];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?l[c]=r(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),l[c]=u)}return l}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OO="mcp_used/unknown";let BO=!1;function ok(t){for(const e of t)if(zO(e)||typeof e=="object"&&"inputSchema"in e)return!0;return BO}function ak(t){var e;const n=(e=t[Am])!==null&&e!==void 0?e:"";t[Am]=(n+` ${OO}`).trimStart()}function zO(t){return t!==null&&typeof t=="object"&&t instanceof Z0}function GO(t){return Lr(this,arguments,function*(n,r=100){let s,i=0;for(;i<r;){const o=yield Be(n.listTools({cursor:s}));for(const l of o.tools)yield yield Be(l),i++;if(!o.nextCursor)break;s=o.nextCursor}})}class Z0{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Z0(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const i={},o=[];for(const d of this.mcpClients)try{for(var l=!0,c=(n=void 0,Fr(GO(d))),u;u=await c.next(),e=u.done,!e;l=!0){s=u.value,l=!1;const m=s;o.push(m);const g=m.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=d}}catch(m){n={error:m}}finally{try{!l&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),_F(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await s.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function $O(t,e,n){const r=new fF;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class HO{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=KO(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${s}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${l}`;let u=()=>{};const d=new Promise(T=>{u=T}),m=e.callbacks,g=function(){u({})},y=this.apiClient,w={onopen:g,onmessage:T=>{$O(y,m.onmessage,T)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(T){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(T){}},x=this.webSocketFactory.create(c,WO(o),w);x.connect(),await d;const _={setup:{model:it(this.apiClient,e.model)}};return x.send(JSON.stringify(_)),new qO(x,this.apiClient)}}class qO{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=vU(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=yU(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(zo.PLAY)}pause(){this.sendPlaybackControl(zo.PAUSE)}stop(){this.sendPlaybackControl(zo.STOP)}resetContext(){this.sendPlaybackControl(zo.RESET_CONTEXT)}close(){this.conn.close()}}function WO(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function KO(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function YO(t,e,n){const r=new hF;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const i=JSON.parse(s);if(t.isVertexAI()){const o=_U(i);Object.assign(r,o)}else Object.assign(r,i);e(r)}class QO{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new HO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,i,o,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&ok(e.config.tools)&&ak(m);const g=t9(m);if(this.apiClient.isVertexAI())d=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,d);else{const C=this.apiClient.getApiKey();let A="BidiGenerateContent",F="key";C!=null&&C.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),A="BidiGenerateContentConstrained",F="access_token"),d=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${A}?${F}=${C}`}let y=()=>{};const w=new Promise(C=>{y=C}),x=e.callbacks,b=function(){var C;(C=x==null?void 0:x.onopen)===null||C===void 0||C.call(x),y({})},v=this.apiClient,_={onopen:b,onmessage:C=>{YO(v,x.onmessage,C)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(C){}},T=this.webSocketFactory.create(d,e9(g),_);T.connect(),await w;let R=it(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const C=this.apiClient.getProject(),A=this.apiClient.getLocation();R=`projects/${C}/locations/${A}/`+R}let j={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[$d.AUDIO]}:e.config.responseModalities=[$d.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const V=(l=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[],S=[];for(const C of V)if(this.isCallableTool(C)){const A=C;S.push(await A.tool())}else S.push(C);S.length>0&&(e.config.tools=S);const I={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?j=gU(this.apiClient,I):j=mU(this.apiClient,I),delete j.config,T.send(JSON.stringify(j)),new ZO(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const XO={turnComplete:!0};class ZO{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=vr(n.turns),e.isVertexAI()||(r=r.map(s=>Oh(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(JO)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},XO),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:wU(e)}:n={realtimeInput:xU(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function e9(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function t9(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G_=10;function $_(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ra(o)){s=!0;break}if(!s)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function ra(t){return"callTool"in t&&typeof t.callTool=="function"}function n9(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>ra(s)))!==null&&r!==void 0?r:!1}function H_(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(ra(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(s)}),n}function q_(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r9 extends Ms{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,i,o,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!n9(n)||$_(n.config))return await this.generateContentInternal(c);const u=H_(n);if(u.length>0){const x=u.map(b=>`tools[${b}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let d,m;const g=vr(c.contents),y=(i=(s=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:G_;let w=0;for(;w<y&&(d=await this.generateContentInternal(c),!(!d.functionCalls||d.functionCalls.length===0));){const x=d.candidates[0].content,b=[];for(const v of(l=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[])if(ra(v)){const T=await v.callTool(d.functionCalls);b.push(...T)}w++,m={role:"user",parts:b},c.contents=vr(c.contents),c.contents.push(x),c.contents.push(m),q_(c.config)&&(g.push(x),g.push(m))}return q_(c.config)&&(d.automaticFunctionCallingHistory=g),d},this.generateContentStream=async n=>{var r,s,i,o,l;if(this.maybeMoveToResponseJsonSchem(n),$_(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const c=H_(n);if(c.length>0){const m=c.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(i=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,d=(l=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(u&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let i;const o=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((s=c==null?void 0:c.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:o.push(c);let l;return i?l={generatedImages:o,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new go(As.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,i,o,l,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(i=n.source)===null||i===void 0?void 0:i.video)===null||o===void 0)&&o.uri&&(!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const o=await Promise.all(i.map(async c=>ra(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(l.config.tools=o,e.config&&e.config.tools&&ok(e.config.tools)){const c=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},c);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),ak(u),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return l}async initAfcToolsMap(e){var n,r,s;const i=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ra(o)){const l=o,c=await l.tool();for(const u of(s=c.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(i.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);i.set(u.name,l)}}return i}async processAfcStream(e){var n,r,s;const i=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:G_;let o=!1,l=0;const c=await this.initAfcToolsMap(e);return function(u,d,m){return Lr(this,arguments,function*(){for(var g,y,w,x,b,v;l<i;){o&&(l++,o=!1);const j=yield Be(u.processParamsMaybeAddMcpUsage(m)),V=yield Be(u.generateContentStreamInternal(j)),S=[],I=[];try{for(var _=!0,T=(y=void 0,Fr(V)),R;R=yield Be(T.next()),g=R.done,!g;_=!0){x=R.value,_=!1;const C=x;if(yield yield Be(C),C.candidates&&(!((b=C.candidates[0])===null||b===void 0)&&b.content)){I.push(C.candidates[0].content);for(const A of(v=C.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(l<i&&A.functionCall){if(!A.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(A.functionCall.name)){const F=yield Be(d.get(A.functionCall.name).callTool([A.functionCall]));S.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${A.functionCall.name}`)}}}}catch(C){y={error:C}}finally{try{!_&&!g&&(w=T.return)&&(yield Be(w.call(T)))}finally{if(y)throw y.error}}if(S.length>0){o=!0;const C=new ol;C.candidates=[{content:{role:"user",parts:S}}],yield yield Be(C);const A=[];A.push(...I),A.push({role:"user",parts:S});const F=vr(m.contents).concat(A);m.contents=F}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=V_(this.apiClient,e);return l=Te("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=B_(d),g=new ol;return Object.assign(g,m),g})}else{const u=U_(this.apiClient,e);return l=Te("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=O_(d),g=new ol;return Object.assign(g,m),g})}}async generateContentStreamInternal(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=V_(this.apiClient,e);return l=Te("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return Lr(this,arguments,function*(){var g,y,w,x;try{for(var b=!0,v=Fr(m),_;_=yield Be(v.next()),g=_.done,!g;b=!0){x=_.value,b=!1;const T=x,R=B_(yield Be(T.json()));R.sdkHttpResponse={headers:T.headers};const j=new ol;Object.assign(j,R),yield yield Be(j)}}catch(T){y={error:T}}finally{try{!b&&!g&&(w=v.return)&&(yield Be(w.call(v)))}finally{if(y)throw y.error}}})})}else{const u=U_(this.apiClient,e);return l=Te("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(m){return Lr(this,arguments,function*(){var g,y,w,x;try{for(var b=!0,v=Fr(m),_;_=yield Be(v.next()),g=_.done,!g;b=!0){x=_.value,b=!1;const T=x,R=O_(yield Be(T.json()));R.sdkHttpResponse={headers:T.headers};const j=new ol;Object.assign(j,R),yield yield Be(j)}}catch(T){y={error:T}}finally{try{!b&&!g&&(w=v.return)&&(yield Be(w.call(v)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=QU(this.apiClient,e);return l=Te("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=ZU(d),g=new __;return Object.assign(g,m),g})}else{const u=YU(this.apiClient,e);return l=Te("{model}:batchEmbedContents",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=XU(d),g=new __;return Object.assign(g,m),g})}}async generateImagesInternal(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=uV(this.apiClient,e);return l=Te("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=hV(d),g=new b_;return Object.assign(g,m),g})}else{const u=cV(this.apiClient,e);return l=Te("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=dV(d),g=new b_;return Object.assign(g,m),g})}}async editImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const l=qU(this.apiClient,e);return i=Te("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=WU(c),d=new tF;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const l=uO(this.apiClient,e);return i=Te("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=dO(c),d=new nF;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const l=HV(this.apiClient,e);return i=Te("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=qV(c),d=new rF;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const l=XV(this.apiClient,e);return i=Te("{model}:predict",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=ZV(c),d=new sF;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=AV(this.apiClient,e);return l=Te("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Cm(d))}else{const u=CV(this.apiClient,e);return l=Te("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>km(d))}}async listInternal(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=UV(this.apiClient,e);return l=Te("{models_url}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=OV(d),g=new E_;return Object.assign(g,m),g})}else{const u=FV(this.apiClient,e);return l=Te("{models_url}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=VV(d),g=new E_;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=lO(this.apiClient,e);return l=Te("{model}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Cm(d))}else{const u=aO(this.apiClient,e);return l=Te("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>km(d))}}async delete(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=zU(this.apiClient,e);return l=Te("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=$U(d),g=new T_;return Object.assign(g,m),g})}else{const u=BU(this.apiClient,e);return l=Te("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=GU(d),g=new T_;return Object.assign(g,m),g})}}async countTokens(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=UU(this.apiClient,e);return l=Te("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=OU(d),g=new I_;return Object.assign(g,m),g})}else{const u=FU(this.apiClient,e);return l=Te("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=VU(d),g=new I_;return Object.assign(g,m),g})}}async computeTokens(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const l=NU(this.apiClient,e);return i=Te("{model}:computeTokens",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>{const u=RU(c),d=new iF;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=vV(this.apiClient,e);return l=Te("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const m=gV(d),g=new Hd;return Object.assign(g,m),g})}else{const u=yV(this.apiClient,e);return l=Te("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=mV(d),g=new Hd;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s9 extends Ms{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=J3(e);return l=Te("{operationName}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}else{const u=K3(e);return l=Te("{operationName}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const l=B3(e);return i=Te("{resourceName}:fetchPredictOperation",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i9(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function o9(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>m9(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function a9(t,e,n){const r={},s=h(e,["expireTime"]);n!==void 0&&s!=null&&p(n,["expireTime"],s);const i=h(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&p(n,["newSessionExpireTime"],i);const o=h(e,["uses"]);n!==void 0&&o!=null&&p(n,["uses"],o);const l=h(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&p(n,["bidiGenerateContentSetup"],p9(t,l));const c=h(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&p(n,["fieldMask"],c),r}function l9(t,e){const n={},r=h(e,["config"]);return r!=null&&p(n,["config"],a9(t,r,n)),n}function c9(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function u9(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function d9(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function h9(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function f9(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const l=h(t,["topK"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","topK"],l);const c=h(t,["maxOutputTokens"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","maxOutputTokens"],c);const u=h(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],X0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],o9(_n(w)));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let V=Va(x);Array.isArray(V)&&(V=V.map(S=>y9(Ua(S)))),p(e,["setup","tools"],V)}const b=h(t,["sessionResumption"]);e!==void 0&&b!=null&&p(e,["setup","sessionResumption"],g9(b));const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const _=h(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&p(e,["setup","outputAudioTranscription"],_);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const R=h(t,["contextWindowCompression"]);e!==void 0&&R!=null&&p(e,["setup","contextWindowCompression"],R);const j=h(t,["proactivity"]);if(e!==void 0&&j!=null&&p(e,["setup","proactivity"],j),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function p9(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],it(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],f9(s,n)),n}function m9(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],c9(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],u9(o));const l=h(t,["functionResponse"]);l!=null&&p(e,["functionResponse"],l);const c=h(t,["inlineData"]);c!=null&&p(e,["inlineData"],i9(c));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function g9(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function y9(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=h(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],d9(l));const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],h9(c));const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v9(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(i=>`${n}.${i}`);e.push(...s)}else e.push(n)}return e.join(",")}function x9(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const i=v9(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];s.length>0&&(l=s.map(u=>o.includes(u)?`generationConfig.${u}`:u));const c=[];i&&c.push(i),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class w9 extends Ms{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=l9(this.apiClient,e);i=Te("auth_tokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query;const c=x9(l,e.config);return s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _9(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function b9(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&_9(r,e),e}function E9(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function T9(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function I9(t){const e={},n=h(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const r=h(t,["config"]);return r!=null&&T9(r,e),e}function S9(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["documents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k9 extends Ms{constructor(e){super(),this.apiClient=e,this.list=async n=>new go(As.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=E9(e);return i=Te("{name}",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=b9(e);s=Te("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=I9(e);return i=Te("{parent}/documents",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=S9(c),d=new oF;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C9 extends Ms{constructor(e,n=new k9(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new go(As.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=vO(e);return i=Te("fileSearchStores",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=_O(e);return i=Te("{name}",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=wO(e);s=Te("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=kO(e);return i=Te("fileSearchStores",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=CO(c),d=new aF;return Object.assign(d,u),d})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=AO(e);return i=Te("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=NO(c),d=new lF;return Object.assign(d,u),d})}}async importFile(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=TO(e);return i=Te("{file_search_store_name}:importFile",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const u=EO(c),d=new W0;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let lk=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return lk=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const A9=()=>lk();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nm(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Rm=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _r extends Error{}class Rn extends _r{constructor(e,n,r,s){super(`${Rn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new Gh({message:r,cause:Rm(n)});const i=n;return e===400?new uk(e,i,r,s):e===401?new dk(e,i,r,s):e===403?new hk(e,i,r,s):e===404?new fk(e,i,r,s):e===409?new pk(e,i,r,s):e===422?new mk(e,i,r,s):e===429?new gk(e,i,r,s):e>=500?new yk(e,i,r,s):new Rn(e,i,r,s)}}class Pm extends Rn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Gh extends Rn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class ck extends Gh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class uk extends Rn{}class dk extends Rn{}class hk extends Rn{}class fk extends Rn{}class pk extends Rn{}class mk extends Rn{}class gk extends Rn{}class yk extends Rn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N9=/^[a-z][a-z0-9+.-]*:/i,R9=t=>N9.test(t);let Mm=t=>(Mm=Array.isArray,Mm(t));const P9=Mm;let M9=P9;const W_=M9;function D9(t){if(!t)return!0;for(const e in t)return!1;return!0}function j9(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const L9=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _r(`${t} must be an integer`);if(e<0)throw new _r(`${t} must be a positive integer`);return e},F9=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U9=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ao="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V9(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const O9=()=>{var t,e,n,r,s;const i=V9();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ao,"X-Stainless-OS":J_(Deno.build.os),"X-Stainless-Arch":K_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ao,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ao,"X-Stainless-OS":J_((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":K_((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const o=B9();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ao,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ao,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function B9(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const K_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",J_=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Iu;const z9=()=>Iu??(Iu=O9());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G9(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function vk(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function $9(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return vk({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function xk(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function H9(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),s=r.cancel();r.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q9=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wk=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Jf(t,e,n){return wk(),new File(t,e??"unknown_file",n)}function W9(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const K9=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _k=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",J9=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&_k(t),Y9=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Q9(t,e,n){if(wk(),t=await t,J9(t))return t instanceof File?t:Jf([await t.arrayBuffer()],t.name);if(Y9(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Jf(await Dm(s),e,n)}const r=await Dm(t);if(e||(e=W9(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Jf(r,e,n)}async function Dm(t){var e,n,r,s,i;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(_k(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(K9(t))try{for(var l=!0,c=Fr(t),u;u=await c.next(),e=u.done,!e;l=!0){s=u.value,l=!1;const d=s;o.push(...await Dm(d))}}catch(d){n={error:d}}finally{try{!l&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}else{const d=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${X9(t)}`)}return o}function X9(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bk{constructor(e){this._client=e}}bk._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ek(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Y_=Object.freeze(Object.create(null)),Z9=(t=Ek)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],o=n.reduce((d,m,g)=>{var y,w,x;/[?#]/.test(m)&&(s=!0);const b=r[g];let v=(s?encodeURIComponent:t)(""+b);return g!==r.length&&(b==null||typeof b=="object"&&b.toString===((x=Object.getPrototypeOf((w=Object.getPrototypeOf((y=b.hasOwnProperty)!==null&&y!==void 0?y:Y_))!==null&&w!==void 0?w:Y_))===null||x===void 0?void 0:x.toString))&&(v=b+"",i.push({start:d.length+m.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),d+m+(g===r.length?"":v)},""),l=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=c.exec(l))!==null;)i.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(i.sort((d,m)=>d.start-m.start),i.length>0){let d=0;const m=i.reduce((g,y)=>{const w=" ".repeat(y.start-d),x="^".repeat(y.length);return d=y.start+y.length,g+w+x},"");throw new _r(`Path parameters result in path with invalid segments:
${i.map(g=>g.error).join(`
`)}
${o}
${m}`)}return o},Su=Z9(Ek);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tk extends bk{create(e,n){var r;const{api_version:s=this._client.apiVersion}=e,i=Wd(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new _r("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new _r("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Su`/${s}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(Su`/${s}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(Su`/${s}/interactions/${e}/cancel`,r)}get(e,n={},r){var s;const i=n??{},{api_version:o=this._client.apiVersion}=i,l=Wd(i,["api_version"]);return this._client.get(Su`/${o}/interactions/${e}`,Object.assign(Object.assign({query:l},r),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}Tk._key=Object.freeze(["interactions"]);class Ik extends Tk{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eB(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let ku;function ey(t){let e;return(ku??(e=new globalThis.TextEncoder,ku=e.encode.bind(e)))(t)}let Cu;function Q_(t){let e;return(Cu??(e=new globalThis.TextDecoder,Cu=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $h{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ey(e):e;this.buffer=eB([this.buffer,n]);const r=[];let s;for(;(s=tB(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(Q_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,o=Q_(this.buffer.subarray(0,i));r.push(o),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}$h.NEWLINE_CHARS=new Set([`
`,"\r"]);$h.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function tB(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function nB(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kd={off:0,error:200,warn:300,info:400,debug:500},X_=(t,e,n)=>{if(t){if(j9(Kd,t))return t;In(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Kd))}`)}};function yl(){}function Au(t,e,n){return!e||Kd[t]>Kd[n]?yl:e[t].bind(e)}const rB={error:yl,warn:yl,info:yl,debug:yl};let Z_=new WeakMap;function In(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return rB;const s=Z_.get(n);if(s&&s[0]===r)return s[1];const i={error:Au("error",n,r),warn:Au("warn",n,r),info:Au("info",n,r),debug:Au("debug",n,r)};return Z_.set(n,[r,i]),i}const ji=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Go{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let s=!1;const i=r?In(r):console;function o(){return Lr(this,arguments,function*(){var c,u,d,m;if(s)throw new _r("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,w=Fr(sB(e,n)),x;x=yield Be(w.next()),c=x.done,!c;y=!0){m=x.value,y=!1;const b=m;if(!g)if(b.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield Be(JSON.parse(b.data))}catch(v){throw i.error("Could not parse message into JSON:",b.data),i.error("From chunk:",b.raw),v}}}catch(b){u={error:b}}finally{try{!y&&!c&&(d=w.return)&&(yield Be(d.call(w)))}finally{if(u)throw u.error}}g=!0}catch(b){if(Nm(b))return yield Be(void 0);throw b}finally{g||n.abort()}})}return new Go(o,n,r)}static fromReadableStream(e,n,r){let s=!1;function i(){return Lr(this,arguments,function*(){var c,u,d,m;const g=new $h,y=xk(e);try{for(var w=!0,x=Fr(y),b;b=yield Be(x.next()),c=b.done,!c;w=!0){m=b.value,w=!1;const v=m;for(const _ of g.decode(v))yield yield Be(_)}}catch(v){u={error:v}}finally{try{!w&&!c&&(d=x.return)&&(yield Be(d.call(x)))}finally{if(u)throw u.error}}for(const v of g.flush())yield yield Be(v)})}function o(){return Lr(this,arguments,function*(){var c,u,d,m;if(s)throw new _r("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,w=Fr(i()),x;x=yield Be(w.next()),c=x.done,!c;y=!0){m=x.value,y=!1;const b=m;g||b&&(yield yield Be(JSON.parse(b)))}}catch(b){u={error:b}}finally{try{!y&&!c&&(d=w.return)&&(yield Be(d.call(w)))}finally{if(u)throw u.error}}g=!0}catch(b){if(Nm(b))return yield Be(void 0);throw b}finally{g||n.abort()}})}return new Go(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=r.next();e.push(o),n.push(o)}return i.shift()}});return[new Go(()=>s(e),this.controller,this.client),new Go(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return vk({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const o=ey(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function sB(t,e){return Lr(this,arguments,function*(){var r,s,i,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _r("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _r("Attempted to iterate over a response with no body");const l=new oB,c=new $h,u=xk(t.body);try{for(var d=!0,m=Fr(iB(u)),g;g=yield Be(m.next()),r=g.done,!r;d=!0){o=g.value,d=!1;const y=o;for(const w of c.decode(y)){const x=l.decode(w);x&&(yield yield Be(x))}}}catch(y){s={error:y}}finally{try{!d&&!r&&(i=m.return)&&(yield Be(i.call(m)))}finally{if(s)throw s.error}}for(const y of c.flush()){const w=l.decode(y);w&&(yield yield Be(w))}})}function iB(t){return Lr(this,arguments,function*(){var n,r,s,i;let o=new Uint8Array;try{for(var l=!0,c=Fr(t),u;u=yield Be(c.next()),n=u.done,!n;l=!0){i=u.value,l=!1;const d=i;if(d==null)continue;const m=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?ey(d):d;let g=new Uint8Array(o.length+m.length);g.set(o),g.set(m,o.length),o=g;let y;for(;(y=nB(o))!==-1;)yield yield Be(o.slice(0,y)),o=o.slice(y)}}catch(d){r={error:d}}finally{try{!l&&!n&&(s=c.return)&&(yield Be(s.call(c)))}finally{if(r)throw r.error}}o.length>0&&(yield yield Be(o))})}class oB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=aB(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function aB(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function lB(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,o=await(async()=>{var l;if(e.options.stream)return In(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Go.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),u=(l=c==null?void 0:c.split(";")[0])===null||l===void 0?void 0:l.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return In(t).debug(`[${r}] response parsed`,ji({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ty extends Promise{constructor(e,n,r=lB){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new ty(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sk=Symbol("brand.privateNullableHeaders");function*cB(t){if(!t)return;if(Sk in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():W_(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=W_(r[1])?r[1]:[r[1]];let o=!1;for(const l of i)l!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,l])}}const al=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,o]of cB(r)){const l=i.toLowerCase();s.has(l)||(e.delete(i),s.add(l)),o===null?(e.delete(i),n.add(l)):(e.append(i,o),n.delete(l))}}return{[Sk]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yf=t=>{var e,n,r,s,i,o;if(typeof globalThis.process<"u")return(r=(n=(e=j3)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(i=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||i===void 0?void 0:i.call(s,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kk;class Hh{constructor(e){var n,r,s,i,o,l,c,{baseURL:u=Yf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=Yf("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,g=Wd(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:d,apiVersion:m},g),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(r=y.timeout)!==null&&r!==void 0?r:Hh.DEFAULT_TIMEOUT,this.logger=(s=y.logger)!==null&&s!==void 0?s:console;const w="warn";this.logLevel=w,this.logLevel=(o=(i=X_(y.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:X_(Yf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:w,this.fetchOptions=y.fetchOptions,this.maxRetries=(l=y.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(c=y.fetch)!==null&&c!==void 0?c:G9(),this.encoder=q9,this._options=y,this.apiKey=d,this.apiVersion=m,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=al([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return al([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return al([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new _r(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ao}`}defaultIdempotencyKey(){return`stainless-node-retry-${A9()}`}makeStatusError(e,n,r,s){return Rn.generate(e,n,r,s)}buildURL(e,n,r){const s=!this.baseURLOverridden()&&r||this.baseURL,i=R9(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return D9(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new ty(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var s,i,o;const l=await e,c=(s=l.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=c),await this.prepareOptions(l);const{req:u,url:d,timeout:m}=await this.buildRequest(l,{retryCount:c-n});await this.prepareRequest(u,{url:d,options:l});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=r===void 0?"":`, retryOf: ${r}`,w=Date.now();if(In(this).debug(`[${g}] sending request`,ji({retryOfRequestLogID:r,method:l.method,url:d,options:l,headers:u.headers})),!((i=l.signal)===null||i===void 0)&&i.aborted)throw new Pm;const x=new AbortController,b=await this.fetchWithTimeout(d,u,m,x).catch(Rm),v=Date.now();if(b instanceof globalThis.Error){const T=`retrying, ${n} attempts remaining`;if(!((o=l.signal)===null||o===void 0)&&o.aborted)throw new Pm;const R=Nm(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return In(this).info(`[${g}] connection ${R?"timed out":"failed"} - ${T}`),In(this).debug(`[${g}] connection ${R?"timed out":"failed"} (${T})`,ji({retryOfRequestLogID:r,url:d,durationMs:v-w,message:b.message})),this.retryRequest(l,n,r??g);throw In(this).info(`[${g}] connection ${R?"timed out":"failed"} - error; no more retries left`),In(this).debug(`[${g}] connection ${R?"timed out":"failed"} (error; no more retries left)`,ji({retryOfRequestLogID:r,url:d,durationMs:v-w,message:b.message})),R?new ck:new Gh({cause:b})}const _=`[${g}${y}] ${u.method} ${d} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${v-w}ms`;if(!b.ok){const T=await this.shouldRetry(b);if(n&&T){const C=`retrying, ${n} attempts remaining`;return await H9(b.body),In(this).info(`${_} - ${C}`),In(this).debug(`[${g}] response error (${C})`,ji({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:v-w})),this.retryRequest(l,n,r??g,b.headers)}const R=T?"error; no more retries left":"error; not retryable";In(this).info(`${_} - ${R}`);const j=await b.text().catch(C=>Rm(C).message),V=F9(j),S=V?void 0:j;throw In(this).debug(`[${g}] response error (${R})`,ji({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,message:S,durationMs:Date.now()-w})),this.makeStatusError(b.status,V,S,b.headers)}return In(this).info(_),In(this).debug(`[${g}] response start`,ji({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:v-w})),{response:b,options:l,controller:x,requestLogID:g,retryOfRequestLogID:r,startTime:w}}async fetchWithTimeout(e,n,r,s){const i=n||{},{signal:o,method:l}=i,c=Wd(i,["signal","method"]);o&&o.addEventListener("abort",()=>s.abort());const u=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},d?{duplex:"half"}:{}),{method:"GET"}),c);l&&(m.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){var i;let o;const l=s==null?void 0:s.get("retry-after-ms");if(l){const u=parseFloat(l);Number.isNaN(u)||(o=u)}const c=s==null?void 0:s.get("retry-after");if(c&&!o){const u=parseFloat(c);Number.isNaN(u)?o=Date.parse(c)-Date.now():o=u*1e3}if(!(o&&0<=o&&o<60*1e3)){const u=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,u)}return await U9(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),l=1-Math.random()*.25;return o*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,s,i;const o=Object.assign({},e),{method:l,path:c,query:u,defaultBaseURL:d}=o,m=this.buildURL(c,u,d);"timeout"in o&&L9("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:g,body:y}=this.buildBody({options:o}),w=await this.buildHeaders({options:e,method:l,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:w},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(i=o.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let l=al([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),z9()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=al([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:$9(e)}:this.encoder({body:e,headers:r})}}Hh.DEFAULT_TIMEOUT=6e4;class Zt extends Hh{constructor(){super(...arguments),this.interactions=new Ik(this)}}kk=Zt;Zt.GeminiNextGenAPIClient=kk;Zt.GeminiNextGenAPIClientError=_r;Zt.APIError=Rn;Zt.APIConnectionError=Gh;Zt.APIConnectionTimeoutError=ck;Zt.APIUserAbortError=Pm;Zt.NotFoundError=fk;Zt.ConflictError=pk;Zt.RateLimitError=gk;Zt.BadRequestError=uk;Zt.AuthenticationError=dk;Zt.InternalServerError=yk;Zt.PermissionDeniedError=hk;Zt.UnprocessableEntityError=mk;Zt.toFile=Q9;Zt.Interactions=Ik;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uB(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function dB(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function hB(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function fB(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function pB(t,e,n){const r={};if(h(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=h(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&p(e,["displayName"],s),h(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=h(t,["epochCount"]);e!==void 0&&i!=null&&p(e,["tuningTask","hyperparameters","epochCount"],i);const o=h(t,["learningRateMultiplier"]);if(o!=null&&p(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),h(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=h(t,["batchSize"]);e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","batchSize"],l);const c=h(t,["learningRate"]);if(e!==void 0&&c!=null&&p(e,["tuningTask","hyperparameters","learningRate"],c),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function mB(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const y=h(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec"],eb(y))}else if(s==="PREFERENCE_TUNING"){const y=h(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec"],eb(y))}const i=h(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&p(e,["tunedModelDisplayName"],i);const o=h(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);let l=h(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const y=h(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(l==="PREFERENCE_TUNING"){const y=h(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let c=h(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=h(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(c==="PREFERENCE_TUNING"){const y=h(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let u=h(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const y=h(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(u==="PREFERENCE_TUNING"){const y=h(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let d=h(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=h(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(d==="PREFERENCE_TUNING"){const y=h(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(h(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=h(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=h(t,["beta"]);return e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),r}function gB(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=h(t,["trainingDataset"]);i!=null&&kB(i);const o=h(t,["config"]);return o!=null&&pB(o,n),n}function yB(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=h(t,["trainingDataset"]);i!=null&&CB(i,n,e);const o=h(t,["config"]);return o!=null&&mB(o,n,e),n}function vB(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function xB(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function wB(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=h(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function _B(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=h(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function bB(t,e){const n={},r=h(t,["config"]);return r!=null&&wB(r,n),n}function EB(t,e){const n={},r=h(t,["config"]);return r!=null&&_B(r,n),n}function TB(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=h(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Ck(l))),p(n,["tuningJobs"],o)}return n}function IB(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=h(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>jm(l))),p(n,["tuningJobs"],o)}return n}function SB(t,e){const n={},r=h(t,["name"]);r!=null&&p(n,["model"],r);const s=h(t,["name"]);return s!=null&&p(n,["endpoint"],s),n}function kB(t,e){const n={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=h(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(n,["examples","examples"],s)}return n}function CB(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=h(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=h(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let i=h(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=h(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=h(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(h(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Ck(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["state"]);i!=null&&p(n,["state"],$S(i));const o=h(t,["createTime"]);o!=null&&p(n,["createTime"],o);const l=h(t,["tuningTask","startTime"]);l!=null&&p(n,["startTime"],l);const c=h(t,["tuningTask","completeTime"]);c!=null&&p(n,["endTime"],c);const u=h(t,["updateTime"]);u!=null&&p(n,["updateTime"],u);const d=h(t,["description"]);d!=null&&p(n,["description"],d);const m=h(t,["baseModel"]);m!=null&&p(n,["baseModel"],m);const g=h(t,["_self"]);return g!=null&&p(n,["tunedModel"],SB(g)),n}function jm(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["state"]);i!=null&&p(n,["state"],$S(i));const o=h(t,["createTime"]);o!=null&&p(n,["createTime"],o);const l=h(t,["startTime"]);l!=null&&p(n,["startTime"],l);const c=h(t,["endTime"]);c!=null&&p(n,["endTime"],c);const u=h(t,["updateTime"]);u!=null&&p(n,["updateTime"],u);const d=h(t,["error"]);d!=null&&p(n,["error"],d);const m=h(t,["description"]);m!=null&&p(n,["description"],m);const g=h(t,["baseModel"]);g!=null&&p(n,["baseModel"],g);const y=h(t,["tunedModel"]);y!=null&&p(n,["tunedModel"],y);const w=h(t,["preTunedModel"]);w!=null&&p(n,["preTunedModel"],w);const x=h(t,["supervisedTuningSpec"]);x!=null&&p(n,["supervisedTuningSpec"],x);const b=h(t,["preferenceOptimizationSpec"]);b!=null&&p(n,["preferenceOptimizationSpec"],b);const v=h(t,["tuningDataStats"]);v!=null&&p(n,["tuningDataStats"],v);const _=h(t,["encryptionSpec"]);_!=null&&p(n,["encryptionSpec"],_);const T=h(t,["partnerModelTuningSpec"]);T!=null&&p(n,["partnerModelTuningSpec"],T);const R=h(t,["customBaseModel"]);R!=null&&p(n,["customBaseModel"],R);const j=h(t,["experiment"]);j!=null&&p(n,["experiment"],j);const V=h(t,["labels"]);V!=null&&p(n,["labels"],V);const S=h(t,["outputUri"]);S!=null&&p(n,["outputUri"],S);const I=h(t,["pipelineJob"]);I!=null&&p(n,["pipelineJob"],I);const C=h(t,["serviceAccount"]);C!=null&&p(n,["serviceAccount"],C);const A=h(t,["tunedModelDisplayName"]);A!=null&&p(n,["tunedModelDisplayName"],A);const F=h(t,["veoTuningSpec"]);return F!=null&&p(n,["veoTuningSpec"],F),n}function AB(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(t,["done"]);o!=null&&p(n,["done"],o);const l=h(t,["error"]);return l!=null&&p(n,["error"],l),n}function eb(t,e){const n={},r=h(t,["gcsUri"]);r!=null&&p(n,["validationDatasetUri"],r);const s=h(t,["vertexDatasetResource"]);return s!=null&&p(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NB extends Ms{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new go(As.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:s});return i.baseModel=void 0,await this.tuneInternal(i)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),i=await this.tuneMldevInternal(s);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:Em.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=xB(e);return l=Te("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>jm(d))}else{const u=vB(e);return l=Te("{name}",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>Ck(d))}}async listInternal(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=EB(e);return l=Te("tuningJobs",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=IB(d),g=new S_;return Object.assign(g,m),g})}else{const u=bB(e);return l=Te("tunedModels",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=TB(d),g=new S_;return Object.assign(g,m),g})}}async cancel(e){var n,r,s,i;let o,l="",c={};if(this.apiClient.isVertexAI()){const u=dB(e);return l=Te("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=fB(d),g=new k_;return Object.assign(g,m),g})}else{const u=uB(e);return l=Te("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=hB(d),g=new k_;return Object.assign(g,m),g})}}async tuneInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const l=yB(e,e);return i=Te("tuningJobs",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>jm(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=gB(e);return i=Te("tunedModels",l._url),o=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),s.then(c=>AB(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RB{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const PB=1024*1024*8,MB=3,DB=1e3,jB=2,Jd="x-goog-upload-status";async function LB(t,e,n){var r;const s=await Ak(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Jd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function FB(t,e,n){var r;const s=await Ak(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Jd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=US(i),l=new K0;return Object.assign(l,o),l}async function Ak(t,e,n){var r,s;let i=0,o=0,l=new Tm(new Response),c="upload";for(i=t.size;o<i;){const u=Math.min(PB,i-o),d=t.slice(o,o+u);o+u>=i&&(c+=", finalize");let m=0,g=DB;for(;m<MB&&(l=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(o),"Content-Length":String(u)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[Jd]));)m++,await VB(g),g=g*jB;if(o+=u,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[Jd])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function UB(t){return{size:t.size,type:t.type}}function VB(t){return new Promise(e=>setTimeout(e,t))}class OB{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await LB(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await FB(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await UB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BB{create(e,n,r){return new zB(e,n,r)}}class zB{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tb="x-goog-api-key";class GB{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(tb)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(tb,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $B="gl-node/";class ny{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Zt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=V3(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new GB(this.apiKey);this.apiClient=new UO({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:$B+"web",uploader:new OB,downloader:new RB}),this.models=new r9(this.apiClient),this.live=new QO(this.apiClient,s,new BB),this.batches=new p6(this.apiClient),this.chats=new J6(this.models,this.apiClient),this.caches=new q6(this.apiClient),this.files=new iU(this.apiClient),this.operations=new s9(this.apiClient),this.authTokens=new w9(this.apiClient),this.tunings=new NB(this.apiClient),this.fileSearchStores=new C9(this.apiClient)}}const Lm="fanra_api_cd_",ry=t=>t&&t.length>5?t.slice(-8):"unknown",$o=t=>{if(!t)return!0;const e=ry(t),n=localStorage.getItem(`${Lm}${e}`);if(n){const r=parseInt(n,10);if(Date.now()<r)return console.warn(`Skipping key ending in ...${e} (Cooldown active)`),!0;localStorage.removeItem(`${Lm}${e}`)}return!1},Bc=t=>{if(!t)return;const e=ry(t),n=Date.now()+24*60*60*1e3;localStorage.setItem(`${Lm}${e}`,n.toString()),console.warn(`Key ending in ...${e} marked for 24h cooldown due to Quota Limit.`)},HB=(t,e)=>{const n=t/e;return[{label:"1:1",value:1},{label:"3:4",value:.75},{label:"4:3",value:1.33},{label:"9:16",value:.5625},{label:"16:9",value:1.7778}].reduce((i,o)=>Math.abs(o.value-n)<Math.abs(i.value-n)?o:i).label},qB=(t,e,n,r)=>{const s=HB(e,n);switch(t){case kn.BACKGROUND_REMOVER:return{model:"gemini-2.5-flash-image",prompt:"Edit this image. Your task is to keep the foreground subject EXACTLY as it is. Do not alter the subject's face, body, clothing, lighting, or resolution. Do not 'redraw' or 'regenerate' the subject. Simply COPY the main subject and place it against a solid bright Green background (Hex Code #00FF00). If the subject is cropped in the original, keep it cropped. Do not add new details.",config:{imageConfig:{aspectRatio:s}}};case kn.HD_UPSCALE:return{model:"gemini-3-pro-image-preview",prompt:"Upscale this image to high definition (4K quality). Sharpen all details and improve lighting. IMPORTANT: Keep the image composition, colors, and BACKGROUND exactly the same as the original. Do not remove the background. Do not change the subject's identity.",config:{imageConfig:{aspectRatio:s,imageSize:"4K"}}};case kn.CREATIVE_REMIX:return{model:"gemini-2.5-flash-image",prompt:r||"Make a creative cyberpunk variation of this image.",config:{imageConfig:{aspectRatio:s}}};case kn.COLORIZE:return{model:"gemini-2.5-flash-image",prompt:"Colorize this black and white image realistically. Keep the subject and background details exactly the same, just add natural colors. Do not change the content.",config:{imageConfig:{aspectRatio:s}}};case kn.SKETCH_TO_REAL:return{model:"gemini-2.5-flash-image",prompt:"Turn this sketch or drawing into a photorealistic image. Keep the composition and subject exactly as drawn, but make it look like a high-quality photograph.",config:{imageConfig:{aspectRatio:s}}};default:throw new Error("Unknown tool type")}},WB=async t=>{const{tool:e,image:n,prompt:r,apiKeys:s}=t,i=qB(e,n.width,n.height,r);let o=[...s||[]];o.push("AIzaSyDzwJLdjFvu5jrsF_HYtYSWLPSoQc2JYzA"),o=Array.from(new Set(o.filter(u=>!!u&&!$o(u))));let l=!1,c=null;for(let u=0;u<o.length;u++){const d=o[u];try{const g=await new ny({apiKey:d}).models.generateContent({model:i.model,contents:{parts:[{inlineData:{mimeType:n.mimeType,data:n.data}},{text:i.prompt}]},config:i.config});if(g.candidates&&g.candidates[0].content.parts){for(const y of g.candidates[0].content.parts)if(y.inlineData&&y.inlineData.data)return y.inlineData.data}throw new Error("No image data returned from Gemini.")}catch(m){console.warn(`Key ending in ...${d.slice(-4)} failed.`),c=m;const g=(m.message||"").toLowerCase(),y=g.includes("429")||g.includes("quota")||g.includes("exhausted")||g.includes("503");if(y&&Bc(d),u===o.length-1&&y&&!l)try{const w=await ZL();if(w.length>0){const x=w.filter(b=>!o.includes(b)&&!$o(b));o.push(...x),l=!0;continue}}catch{console.error("Failed to fetch community keys")}}}throw c||new Error("All API keys (Personal, System, and Community) failed or are in cooldown.")},KB={name:"searchWeather",description:"Get REAL-TIME weather data for a specific city.",parameters:{type:On.OBJECT,properties:{city:{type:On.STRING,description:"The name of the city."}},required:["city"]}},JB={name:"searchCountryFact",description:"Get detailed facts about a country (Capital, Population, Currency, Flag).",parameters:{type:On.OBJECT,properties:{country_name:{type:On.STRING,description:"The name of the country."}},required:["country_name"]}},YB={name:"searchGoogle",description:"Search Google for latest news or trending info.",parameters:{type:On.OBJECT,properties:{query:{type:On.STRING,description:"The search keywords."}},required:["query"]}},qh=async(t,e)=>{if(!e)return t;const n=t.split(/(\s+)/);let r="";for(const s of n)r+=s,e(r),await new Promise(i=>setTimeout(i,Math.random()*10+5));return t},QB=async(t,e,n,r)=>{var s,i,o;try{console.log("Attempting OpenRouter Fallback...");const l=[{role:"system",content:n},...e.map(m=>{var g;return{role:m.role==="model"?"assistant":"user",content:((g=m.parts.find(y=>y.text))==null?void 0:g.text)||""}}).filter(m=>m.content)],c=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:"google/gemini-2.0-flash-lite-preview-02-05:free",messages:l,stream:!1})});if(c.status===429)throw Bc(t),new Error("OpenRouter Quota Exceeded");if(!c.ok)throw new Error(`OpenRouter Error: ${c.status}`);const d=((o=(i=(s=(await c.json()).choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:o.content)||"";return r&&d&&await qh(d,r),d}catch(l){throw console.error("OpenRouter Failed:",l),l}},XB=async(t,e,n,r)=>{var s,i,o;try{console.log("Attempting Groq Fallback...");const l=[{role:"system",content:n},...e.map(m=>{var g;return{role:m.role==="model"?"assistant":"user",content:((g=m.parts.find(y=>y.text))==null?void 0:g.text)||""}}).filter(m=>m.content)],c=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:"llama3-8b-8192",messages:l,stream:!1})});if(c.status===429)throw Bc(t),new Error("Groq Quota Exceeded");if(!c.ok)throw new Error(`Groq Error: ${c.status}`);const d=((o=(i=(s=(await c.json()).choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:o.content)||"";return r&&d&&await qh(d,r),d}catch(l){throw console.error("Groq Failed:",l),l}},ZB=async(t,e,n,r)=>{try{console.log("Attempting Hugging Face Fallback...");let s=`<start_of_turn>system
${n}<end_of_turn>
`;e.forEach(c=>{var d;const u=((d=c.parts.find(m=>m.text))==null?void 0:d.text)||"";u&&(s+=`<start_of_turn>${c.role==="model"?"model":"user"}
${u}<end_of_turn>
`)}),s+=`<start_of_turn>model
`;const i=await fetch("https://api-inference.huggingface.co/models/google/gemma-1.1-7b-it",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:s,parameters:{max_new_tokens:512,return_full_text:!1,temperature:.7}})});if(i.status===429)throw Bc(t),new Error("HuggingFace Quota Exceeded");if(!i.ok)throw new Error(`Hugging Face Error: ${i.status}`);const o=await i.json();let l=Array.isArray(o)&&o.length>0?o[0].generated_text:o.generated_text||"";return r&&l&&await qh(l,r),l}catch(s){throw console.error("Hugging Face Failed:",s),s}},e8=async(t,e,n=[],r="id",s=[],i,o=!1,l=!1,c,u,d,m,g)=>{var R,j,V,S;const y=n.slice(-10).map(I=>({role:I.role,parts:[{text:I.text}]})),w=[];t?w.push({text:t}):s.length>0&&w.push({text:"Describe these images or answer based on them."}),s.length>0&&s.forEach(I=>w.push({inlineData:{mimeType:I.mimeType,data:I.data}}));const x=[...y,{role:"user",parts:w}],b=!!(c!=null&&c.apiKey&&c.cx),v=[{functionDeclarations:[KB,JB]}];b&&v[0].functionDeclarations.push(YB);const _=`
        Nama lo: Fanra.
        Sifat: Cool, santai, & solutif. Gaya ngomong: lo-gue, normal, asik.
        
        ATURAN MUTLAK:
        1. JANGAN PERNAH MENCARI DI WIKIPEDIA ATAU DATABASE LAMA.
        2. Gunakan pengetahuan lo sendiri (Generative AI) untuk menjawab pertanyaan.
        3. Jika user tanya hal sepele ("hmm", "halo", "apa kabar"), jawab dengan santai dan natural layaknya teman. Jangan berikan definisi kamus.
        4. Jika user tanya fakta spesifik (misal: cuaca, negara), gunakan function calling yang tersedia.
    `;let T=[...e||[]];T.push("AIzaSyDzwJLdjFvu5jrsF_HYtYSWLPSoQc2JYzA"),T=Array.from(new Set(T.filter(I=>!!I&&!$o(I))));for(const I of T){if(u!=null&&u.aborted)throw new Error("Request cancelled by user");try{const F=(S=(V=(j=(R=(await new ny({apiKey:I}).models.generateContent({model:"gemini-3-flash-preview",contents:x,config:{systemInstruction:_,tools:v}})).candidates)==null?void 0:R[0])==null?void 0:j.content)==null?void 0:V.parts)==null?void 0:S.find(P=>P.text);return F&&F.text?(await qh(F.text,i),{text:F.text,source:"gemini"}):{text:"...",source:"gemini"}}catch(C){console.warn(`Gemini Key failed: ${ry(I)}`);const A=(C.message||"").toLowerCase();(A.includes("429")||A.includes("quota")||A.includes("exhausted"))&&Bc(I)}}if(!$o(d)){if(u!=null&&u.aborted)throw new Error("Request cancelled");try{return{text:await QB(d,x,_,i),source:"openrouter"}}catch{console.warn("OpenRouter Failed.")}}if(!$o(g)){if(u!=null&&u.aborted)throw new Error("Request cancelled");try{return{text:await XB(g,x,_,i),source:"groq"}}catch{console.warn("Groq Failed.")}}if(!$o(m)){if(u!=null&&u.aborted)throw new Error("Request cancelled");try{return{text:await ZB(m,x,_,i),source:"huggingface"}}catch{console.warn("Hugging Face Failed.")}}throw new Error("All AI services unavailable. Check your API Keys.")},t8=t=>new Promise((e,n)=>{const r=new Image;r.src=`data:image/png;base64,${t}`,r.crossOrigin="Anonymous",r.onload=()=>{const s=document.createElement("canvas");s.width=r.width,s.height=r.height;const i=s.getContext("2d");if(!i){n(new Error("Could not get canvas context"));return}i.drawImage(r,0,0);const o=i.getImageData(0,0,s.width,s.height),l=o.data;for(let c=0;c<l.length;c+=4){const u=l[c],d=l[c+1],m=l[c+2],g=Math.max(u,m);let y=d-g;const w=10,x=60;if(y>w){const b=1-Math.max(0,Math.min(1,(y-w)/(x-w)));l[c+3]=Math.floor(255*b),d>g&&(l[c+1]=g)}}i.putImageData(o,0,0),e(s.toDataURL("image/png",1).split(",")[1])},r.onerror=s=>n(new Error("Failed to load image for processing"))}),n8=(t,e="image/png")=>{const n=t.replace(/[\n\r]/g,"").trim(),r=atob(n),s=new Array(r.length);for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);const i=new Uint8Array(s);return new Blob([i],{type:e})},r8=async(t,e)=>{const n=new FormData,r=n8(t);n.append("image_file",r,"image.png"),n.append("size","auto");try{const s=await fetch("https://api.remove.bg/v1.0/removebg",{method:"POST",headers:{"X-Api-Key":e},body:n});if(!s.ok){let o="Failed to remove background via Remove.bg";try{const l=await s.json();l.errors&&l.errors[0]&&(o=l.errors[0].title)}catch{o=`Remove.bg Error: ${s.statusText}`}throw new Error(o)}const i=await s.blob();return new Promise((o,l)=>{const c=new FileReader;c.onloadend=()=>{const u=c.result;o(u.split(",")[1])},c.onerror=l,c.readAsDataURL(i)})}catch(s){throw console.error("Remove.bg Service Error:",s),s}};const s8=({onImageSelect:t,language:e})=>{const n=L.useRef(null),[r,s]=L.useState(!1),i=Oc[e],o=m=>{if(!m.type.startsWith("image/")){$e(i.invalidImage);return}const g=new FileReader;g.onloadend=()=>{const y=g.result,w=new Image;w.onload=()=>{const x=document.createElement("canvas");x.width=w.width,x.height=w.height;const b=x.getContext("2d");if(!b)return;b.drawImage(w,0,0);const v="image/png",T=x.toDataURL(v).split(",")[1];t(T,v,w.width,w.height)},w.src=y},g.readAsDataURL(m)},l=m=>{var y;const g=(y=m.target.files)==null?void 0:y[0];g&&o(g)},c=m=>{m.preventDefault(),m.stopPropagation(),s(!0)},u=m=>{m.preventDefault(),m.stopPropagation(),s(!1)},d=m=>{var y;m.preventDefault(),m.stopPropagation(),s(!1);const g=(y=m.dataTransfer.files)==null?void 0:y[0];g&&o(g)};return a.jsxs("div",{className:`w-full max-w-xl mx-auto border-2 border-dashed rounded-2xl p-12 flex flex-col items-center justify-center text-center cursor-pointer transition-all duration-300 group bg-white ${r?"border-primary bg-slate-50 scale-[1.02] shadow-xl":"border-slate-300 hover:border-primary hover:bg-slate-50"}`,onClick:()=>{var m;return(m=n.current)==null?void 0:m.click()},onDragOver:c,onDragLeave:u,onDrop:d,children:[a.jsx("input",{type:"file",ref:n,onChange:l,className:"hidden",accept:"image/png, image/jpeg, image/webp"}),a.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 transition-transform duration-300 ${r?"scale-110 bg-white shadow-md":"bg-slate-50 group-hover:scale-110"}`,children:a.jsx(rs,{className:`w-6 h-6 ${r?"text-primary":"text-slate-400 group-hover:text-primary"}`})}),a.jsx("h3",{className:`text-lg font-bold mb-2 transition-colors ${r?"text-primary":"text-slate-700 group-hover:text-primary"}`,children:r?i.dropHere:i.uploadTitle}),a.jsx("p",{className:"text-slate-500 text-sm",children:i.uploadDesc})]})},nb=[{label:"Transparent",value:null,hex:"transparent"},{label:"White",value:"#FFFFFF",hex:"#FFFFFF"},{label:"Black",value:"#000000",hex:"#000000"},{label:"Red",value:"#DB2828",hex:"#DB2828"},{label:"Blue",value:"#2185D0",hex:"#2185D0"},{label:"Green",value:"#21BA45",hex:"#21BA45"},{label:"Yellow",value:"#FBBD08",hex:"#FBBD08"}],i8=({originalImage:t,resultImageBase64:e,isProcessing:n,processingText:r,onReset:s,language:i})=>{const[o,l]=L.useState(50),[c,u]=L.useState(!1),[d,m]=L.useState(null),g=L.useRef(null),y=L.useRef(null),w=Oc[i],x=()=>{if(!e)return;if(!d){const S=document.createElement("a");S.href=`data:image/png;base64,${e}`,S.download="pixelmagic-edited.png",document.body.appendChild(S),S.click(),document.body.removeChild(S);return}const R=document.createElement("canvas"),j=R.getContext("2d"),V=new Image;V.onload=()=>{if(R.width=V.width,R.height=V.height,j){j.fillStyle=d,j.fillRect(0,0,R.width,R.height),j.drawImage(V,0,0);const S=document.createElement("a");S.href=R.toDataURL("image/png"),S.download="pixelmagic-edited-bg.png",document.body.appendChild(S),S.click(),document.body.removeChild(S)}},V.src=`data:image/png;base64,${e}`},b=L.useCallback(()=>u(!0),[]),v=L.useCallback(()=>u(!1),[]),_=L.useCallback(R=>{if(!c||!g.current)return;const{left:j,width:V}=g.current.getBoundingClientRect();let S;"touches"in R?S=R.touches[0].clientX:S=R.clientX;const I=(S-j)/V*100;l(Math.min(100,Math.max(0,I)))},[c]);L.useEffect(()=>(window.addEventListener("mousemove",_),window.addEventListener("mouseup",v),window.addEventListener("touchmove",_),window.addEventListener("touchend",v),()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",_),window.removeEventListener("touchend",v)}),[_,v]);const T=()=>d?{backgroundColor:d}:{backgroundColor:"#f8fafc",backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"};return a.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6 animate-fade-in pb-10",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[a.jsx("h2",{className:"text-xl font-bold text-primary self-start md:self-auto",children:n?a.jsxs("span",{className:"flex items-center gap-2",children:[w.processing,a.jsxs("span",{className:"flex gap-1",children:[a.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce"}),a.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-100"}),a.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-200"})]})]}):w.resultComparison}),!n&&a.jsxs("div",{className:"flex items-center gap-3 self-end md:self-auto",children:[a.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-slate-500 hover:text-primary transition-colors hover:bg-slate-50 rounded-lg active:scale-95 duration-200",children:w.reset}),e&&a.jsxs("button",{onClick:x,className:"flex items-center gap-2 bg-primary hover:bg-slate-800 text-white px-5 py-2 rounded-lg font-semibold text-sm transition-all shadow-lg shadow-slate-900/10 active:scale-95 hover:shadow-xl hover:-translate-y-0.5",children:[a.jsx(NT,{className:"w-4 h-4"}),w.download," ",d?"JPG":"PNG"]})]})]}),a.jsxs("div",{className:"relative w-full h-[60vh] rounded-xl overflow-hidden border border-slate-200 shadow-xl shadow-slate-200/50 bg-white select-none mx-auto group",ref:g,children:[n&&a.jsxs("div",{className:"absolute inset-0 z-50 bg-white/90 backdrop-blur-md flex flex-col items-center justify-center transition-all duration-300",children:[a.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,className:"absolute inset-0 w-full h-full object-contain opacity-10 blur-md scale-105",alt:"Background Blur"}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center p-8 bg-white/80 rounded-2xl shadow-sm border border-slate-100/50 backdrop-blur-xl",children:[a.jsxs("div",{className:"relative mb-6",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-slate-100 rounded-full"}),a.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"})})]}),a.jsx("p",{className:"font-bold text-lg tracking-wide animate-shimmer-text",children:r||"..."})]})]}),!n&&e&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center transition-colors duration-300",style:T(),children:a.jsx("img",{src:`data:image/png;base64,${e}`,alt:"Result",className:"max-w-full max-h-full object-contain animate-fade-in",draggable:!1})}),a.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden",style:{clipPath:`inset(0 ${100-o}% 0 0)`},children:[a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white/95",children:a.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain",draggable:!1})}),a.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur text-primary text-[10px] font-bold px-2 py-1 rounded shadow-sm border border-slate-100 select-none",children:w.original})]}),a.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white z-30 cursor-ew-resize shadow-[0_0_10px_rgba(0,0,0,0.2)] hover:bg-blue-100 transition-colors",style:{left:`${o}%`},onMouseDown:b,onTouchStart:b,children:a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg border border-slate-100 flex items-center justify-center text-primary transform hover:scale-110 active:scale-95 transition-all duration-200 cursor-ew-resize",children:a.jsx(_N,{className:"w-4 h-4"})})}),a.jsx("div",{className:"absolute top-4 right-4 bg-primary/90 backdrop-blur text-white text-[10px] font-bold px-2 py-1 rounded shadow-sm z-20 select-none",children:w.result})]}),!n&&!e&&a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain"})})]}),!n&&e&&a.jsxs("div",{className:"flex flex-col items-center gap-3 animate-fade-in-up",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:w.bgColor}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-3 bg-white p-3 rounded-2xl border border-slate-200 shadow-sm transition-all hover:shadow-md",children:[nb.map(R=>a.jsx("button",{onClick:()=>m(R.value),className:`w-10 h-10 rounded-full border-2 transition-all duration-200 hover:scale-110 active:scale-95 flex items-center justify-center ${d===R.value?"border-primary ring-2 ring-primary/20 scale-110":"border-slate-200 hover:border-slate-300"}`,style:{backgroundColor:R.value||"white"},title:R.label,children:R.value===null&&a.jsx("div",{className:"w-full h-full rounded-full opacity-40",style:{backgroundImage:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 0 4px, 4px -4px, -4px 0px"}})},R.label)),a.jsx("div",{className:"w-px h-8 bg-slate-200 mx-2 self-center"}),a.jsxs("div",{className:"relative group",children:[a.jsx("input",{type:"color",ref:y,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:R=>m(R.target.value),value:d||"#ffffff"}),a.jsx("button",{className:`w-10 h-10 rounded-full border-2 flex items-center justify-center bg-white hover:bg-slate-50 transition-all duration-200 hover:scale-110 active:scale-95 ${d&&!nb.find(R=>R.value===d)?"border-primary ring-2 ring-primary/20":"border-slate-200 group-hover:border-slate-300"}`,title:"Custom Color",children:a.jsx("span",{className:"text-xl leading-none pb-1 text-slate-400 group-hover:text-primary transition-colors",children:"+"})})]})]})]}),!n&&!e&&a.jsx("p",{className:"text-center text-slate-400 text-xs animate-fade-in",children:w.uploadPrompt})]})},o8=({isOpen:t,onClose:e,removeBgKey:n,onSaveRemoveBgKey:r,storedApiKeys:s,onAddApiKey:i,onDeleteApiKey:o,onToggleApiKey:l,onSelectGoogleKey:c,googleSearchKey:u,googleSearchCx:d,onSaveGoogleSearch:m,openRouterKey:g,onSaveOpenRouterKey:y,huggingFaceKey:w,onSaveHuggingFaceKey:x,groqKey:b,onSaveGroqKey:v,language:_})=>{const[T,R]=L.useState(n),[j,V]=L.useState(u),[S,I]=L.useState(d),[C,A]=L.useState(g),[F,P]=L.useState(w),[D,M]=L.useState(b),[q,pe]=L.useState(""),[ne,ee]=L.useState(!1),[Q,ue]=L.useState(!1),[$,B]=L.useState(!1),Z=Oc[_];if(L.useEffect(()=>{R(n),V(u),A(g),P(w),M(b),I(!d&&!S?"3040e7dd9eac6414b":d),t||(ee(!1),pe(""),ue(!1))},[n,u,d,g,w,b,t]),!t)return null;const he=async()=>{const xe=q.trim();if(!(!xe||!ne)){if(!xe.startsWith("AIza")){$e("Format Key salah. Harus dimulai dengan 'AIza'.");return}if(xe.length!==39){$e(`Panjang Key salah (${xe.length}). Harusnya 39 karakter.`);return}if(s.some(Se=>Se.key===xe)){$e("Key ini sudah ada di daftar.");return}B(!0);try{const Ce=await new ny({apiKey:xe}).models.generateContent({model:"gemini-3-flash-preview",contents:"Ping"});if(!Ce||!Ce.candidates||Ce.candidates.length===0)throw new Error("API Valid, but response empty.");i(xe,Q),pe(""),ue(!1),$e("Key berhasil diverifikasi & disimpan!")}catch(Se){console.error("Key Validation Failed:",Se);const Ce=(Se.message||"").toLowerCase();Ce.includes("400")||Ce.includes("invalid_argument")?$e("Key DITOLAK oleh Google (Invalid)."):Ce.includes("403")?$e("Key valid tapi tidak punya izin (Billing/Project problem)."):Ce.includes("404")?$e("Model tidak ditemukan."):$e("Gagal memvalidasi Key. "+(Se.message||"Unknown error"))}finally{B(!1)}}},ce=()=>{r(T.trim()),m(j.trim(),S.trim()),y(C.trim()),x(F.trim()),v(D.trim()),e(),$e("Pengaturan disimpan!")},Pe=({value:xe,hasSystemDefault:Se=!0})=>xe&&xe.trim().length>0?a.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-md border border-green-200",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"})," Key Pribadi (Custom)"]}):Se?a.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-blue-100 text-blue-700 px-2 py-0.5 rounded-md border border-blue-200",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"})," Key Sistem (Bawaan)"]}):a.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-slate-100 text-slate-500 px-2 py-0.5 rounded-md border border-slate-200",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full"})," Nonaktif"]});return a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-fade-in-up ring-1 ring-slate-900/5",children:[a.jsxs("div",{className:"bg-white px-6 py-5 border-b border-slate-100 flex items-center justify-between sticky top-0 z-10",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 border border-slate-100 flex items-center justify-center text-primary",children:a.jsx(rc,{className:"w-5 h-5"})})," ",Z.settingsTitle]}),a.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-50 hover:bg-slate-100 text-slate-400 hover:text-slate-800 transition-all",children:""})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-slate-50",children:[a.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/18889/18889881.png",className:"w-6 h-6 object-contain",alt:"Gemini"})," ",Z.googleApiTitle," (Utama)"]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:Z.googleApiDesc})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-3 px-1",children:a.jsxs("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[Z.keysStored,a.jsx("span",{className:"bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded text-[10px]",children:s.length})]})}),s.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-6 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50 mb-4",children:[a.jsx(rc,{className:"w-6 h-6 text-slate-300 mb-2"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium text-center",children:Z.noKeysYet})]}):a.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto custom-scrollbar pr-1 mb-4",children:s.map((xe,Se)=>a.jsxs("div",{className:`flex items-center justify-between p-3 bg-white border rounded-xl shadow-sm transition-all ${xe.isActive!==!1?"border-slate-200":"border-slate-100 bg-slate-50/50 opacity-70"}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 text-xs font-bold border ${xe.isShared?"bg-green-50 text-green-600 border-green-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:xe.isShared?a.jsx(tc,{className:"w-3.5 h-3.5"}):Se+1}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("span",{className:"text-xs font-mono text-slate-700 font-bold tracking-tight",children:[" ",xe.key.slice(-4)]}),a.jsx("span",{className:`text-[9px] font-bold ${xe.isActive!==!1?"text-green-500":"text-slate-400"}`,children:xe.isActive!==!1?" "+Z.active:" "+Z.inactive})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{onClick:Ce=>Ce.stopPropagation(),children:a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer scale-75",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:xe.isActive!==!1,onChange:Ce=>l(xe.key,Ce.target.checked)}),a.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-green-500"})]})}),a.jsx("button",{onClick:()=>o(xe.key),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg",children:a.jsx(gr,{className:"w-3.5 h-3.5"})})]})]},Se))})]}),a.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer w-fit mb-3",children:[a.jsx("input",{type:"checkbox",checked:ne,onChange:xe=>ee(xe.target.checked),className:"w-3.5 h-3.5 text-blue-600 rounded border-slate-300 focus:ring-blue-500"}),a.jsx("span",{className:"text-[10px] text-slate-500 font-medium",children:"Saya bertanggung jawab atas penggunaan Key ini."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"password",value:q,onChange:xe=>pe(xe.target.value),placeholder:ne?Z.addKeyPlaceholder:"Centang dulu di atas...",disabled:!ne||$,maxLength:50,className:"flex-1 px-3 py-2 bg-white border rounded-lg text-xs outline-none transition-colors disabled:bg-slate-100 border-slate-200 focus:border-blue-500"}),a.jsx("button",{onClick:he,disabled:!ne||!q.trim()||$,className:"px-4 py-2 bg-slate-900 text-white rounded-lg text-xs font-bold hover:bg-slate-800 disabled:bg-slate-300 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:$?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-3 h-3 border-2 border-white/50 border-t-white rounded-full animate-spin"}),"Checking..."]}):"+ Add"})]}),a.jsx("div",{className:"mt-3 flex justify-center",children:a.jsxs("button",{onClick:c,className:"text-[10px] font-bold text-blue-600 hover:underline flex items-center gap-1",children:[Z.selectKeyBtn," "]})})]})]}),a.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"mb-5 border-b border-slate-100 pb-4",children:[a.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[a.jsx("div",{className:"p-1.5 bg-emerald-50 rounded-lg",children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/11681/11681335.png",className:"w-5 h-5 object-contain",alt:"API"})})," Integrasi API Eksternal"]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:"Kelola key untuk layanan Fallback (Cadangan) dan Tools tambahan."})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Sd,{className:"w-3.5 h-3.5 text-slate-400"}),a.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Fallback AI (Cadangan Chat)"})]}),a.jsxs("div",{className:"space-y-4 pl-1",children:[a.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"OpenRouter (Prioritas 2)"}),a.jsx(Pe,{value:C,hasSystemDefault:!0})]}),a.jsx("input",{type:"password",value:C,onChange:xe=>A(xe.target.value),placeholder:"sk-or-v1-...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-emerald-500/10 focus:border-emerald-500 outline-none transition-all font-mono"})]}),a.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Groq API (Prioritas 3)"}),a.jsx(Pe,{value:D,hasSystemDefault:!0})]}),a.jsx("input",{type:"password",value:D,onChange:xe=>M(xe.target.value),placeholder:"gsk_...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-orange-500/10 focus:border-orange-500 outline-none transition-all font-mono"})]}),a.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Hugging Face (Prioritas 4)"}),a.jsx(Pe,{value:F,hasSystemDefault:!0})]}),a.jsx("input",{type:"password",value:F,onChange:xe=>P(xe.target.value),placeholder:"hf_...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-yellow-500/10 focus:border-yellow-500 outline-none transition-all font-mono"})]})]})]}),a.jsx("div",{className:"h-px bg-slate-100 w-full"}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/6710/6710433.png",className:"w-4 h-4 object-contain",alt:"Tools"}),a.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Search & Tools"})]}),a.jsxs("div",{className:"space-y-4 pl-1",children:[a.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-2",children:"Google Search API"}),a.jsx(Pe,{value:j,hasSystemDefault:!1})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx("input",{type:"password",value:j,onChange:xe=>V(xe.target.value),placeholder:"API Key",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-blue-500 outline-none font-mono"}),a.jsx("input",{type:"text",value:S,onChange:xe=>I(xe.target.value),placeholder:"Search Engine ID (CX)",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-blue-500 outline-none font-mono"})]})]}),a.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Remove.bg API"}),a.jsx("span",{className:"text-[9px] bg-green-100 text-green-700 px-1.5 rounded-md border border-green-200",children:"Aktif"})]}),a.jsx(Pe,{value:T,hasSystemDefault:!0})]}),a.jsx("input",{type:"password",value:T,onChange:xe=>R(xe.target.value),placeholder:"API Key Remove.bg...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-purple-500 outline-none font-mono"})]})]})]})]})]})]}),a.jsxs("div",{className:"p-5 border-t border-slate-100 bg-white flex items-center justify-end gap-3 shrink-0",children:[a.jsx("button",{onClick:e,className:"px-5 py-2.5 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded-xl font-bold text-sm transition-all",children:Z.cancel}),a.jsxs("button",{onClick:ce,className:"px-6 py-2.5 bg-slate-900 hover:bg-slate-800 text-white rounded-xl font-bold text-sm shadow-lg shadow-slate-900/20 active:scale-95 transition-all flex items-center gap-2",children:[a.jsx(Vr,{className:"w-4 h-4"}),Z.save]})]})]})})},a8=({onLogin:t,language:e,onToggleLanguage:n,onClose:r})=>{const[s,i]=L.useState(!1),[o,l]=L.useState(null),c=async()=>{i(!0),l(null);try{const{user:u,credits:d,id:m}=await JL();t(u,m,d)}catch(u){console.error(u),u.code==="auth/popup-closed-by-user"?l("Login dibatalkan."):l("Gagal login dengan Google. Coba lagi.")}finally{i(!1)}};return a.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center overflow-hidden bg-slate-50",children:[a.jsx("div",{className:"absolute inset-0 z-0 opacity-40 pointer-events-none",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),a.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),a.jsxs("div",{className:"relative z-10 w-full max-w-sm rounded-[2rem] shadow-2xl animate-fade-in-up border border-slate-200 overflow-hidden bg-white p-2",children:[a.jsx("div",{className:"absolute inset-0 opacity-[0.4] pointer-events-none",style:{backgroundImage:"linear-gradient(#f1f5f9 1px, transparent 1px), linear-gradient(90deg, #f1f5f9 1px, transparent 1px)",backgroundSize:"20px 20px"}}),r&&a.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 rounded-full text-slate-400 hover:bg-slate-100 hover:text-slate-900 transition-all z-20",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsxs("div",{className:"relative z-10 p-8 flex flex-col items-center text-center bg-white/80 backdrop-blur-sm rounded-[1.5rem]",children:[a.jsx("div",{className:"relative mb-6",children:a.jsx("div",{className:"w-20 h-20 bg-white border border-slate-100 rounded-3xl shadow-sm flex items-center justify-center transform hover:rotate-3 transition-transform duration-500",children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra Logo",className:"w-10 h-10 object-contain"})})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Fanra AI Studio"}),a.jsx("p",{className:"text-slate-500 text-sm mb-8 leading-relaxed font-medium",children:"Masuk untuk menyimpan riwayat chat dan mengakses fitur kreatif."}),a.jsx("button",{onClick:c,disabled:s,className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-3.5 px-6 rounded-xl flex items-center justify-center gap-3 transition-all shadow-lg shadow-slate-900/20 active:scale-95 group disabled:opacity-70 disabled:cursor-not-allowed",children:s?a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center p-0.5",children:a.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google",className:"w-full h-full"})}),a.jsx("span",{className:"text-sm",children:"Lanjutkan dengan Google"})]})}),o&&a.jsxs("div",{className:"mt-6 flex items-center gap-2 text-red-500 bg-red-50 px-4 py-2 rounded-lg text-xs font-bold animate-pulse",children:[a.jsx("span",{children:""})," ",o]}),a.jsx("div",{className:"mt-8 flex flex-col gap-1",children:a.jsx("span",{className:"text-[10px] text-slate-400 font-semibold uppercase tracking-wider",children:"Powered by Google"})})]})]})]})},l8=({isOpen:t,onClose:e,onNewChat:n,user:r,onLogout:s,onOpenLogin:i,language:o,tools:l,toolStatuses:c,onSelectTool:u,onExit:d,chatHistory:m=[],onLoadSession:g,currentSessionId:y})=>{const w=Oc[o],[x,b]=L.useState(!1),v=x?l:l.slice(0,3),_=L.useMemo(()=>{const R={};return[...m].sort((V,S)=>S.timestamp-V.timestamp).forEach(V=>{const S=V.sessionId||"legacy";R[S]||(R[S]=[]),R[S].push(V)}),Object.keys(R).map(V=>{var A,F;const S=R[V],I=S.slice().reverse().find(P=>P.role==="user"),C=S[0];return{id:V,title:I?I.text:(F=(A=S[0])==null?void 0:A.attachments)!=null&&F.length?"Image Analysis":"Percakapan Baru",timestamp:C.timestamp,preview:C.text}}).sort((V,S)=>S.timestamp-V.timestamp)},[m]),T=(R,j)=>{j?$e(w.toolLockedMsg):(u(R),window.innerWidth<768&&e())};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),a.jsx("div",{className:`
          fixed md:relative top-0 left-0 bottom-0 z-50 h-full
          bg-slate-900 text-slate-200
          overflow-hidden flex flex-col
          transition-[width,transform,opacity] duration-300 ease-in-out
          w-[280px]
          ${t?"translate-x-0 shadow-2xl":"-translate-x-full shadow-none"}
          md:transform-none md:shadow-none md:top-auto md:left-auto md:bottom-auto
          ${t?"md:w-[260px]":"md:w-0"}
        `,children:a.jsxs("div",{className:"w-[280px] md:w-[260px] h-full flex flex-col border-r border-slate-800 bg-slate-900",children:[a.jsxs("div",{className:"p-4 flex items-center justify-between h-14 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra Logo",className:"w-8 h-8 object-contain"}),a.jsx("span",{className:"font-bold text-white tracking-wide",children:"Fanra"})]}),a.jsx("button",{onClick:e,className:"md:hidden text-slate-400 hover:text-white p-1",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-3 py-2 custom-scrollbar space-y-4",children:[a.jsxs("button",{onClick:()=>{n(),window.innerWidth<768&&e()},className:"w-full flex items-center gap-3 bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-xl transition-all active:scale-95 border border-slate-700 shadow-sm group",children:[a.jsx("span",{className:"text-xl font-light group-hover:scale-110 transition-transform",children:"+"}),a.jsx("span",{className:"text-sm font-medium",children:w.newChat})]}),a.jsx("div",{className:"h-px bg-slate-800/50 mx-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Creative Tools"}),a.jsxs("div",{className:"space-y-1",children:[v.map(R=>{const j=c[R.id]!==!1,V=(r==null?void 0:r.isAdmin)||!1,S=!j&&!V;return a.jsxs("button",{onClick:()=>T(R,S),className:`w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all border border-transparent group relative
                                        ${S?"opacity-70 hover:bg-slate-800/50 cursor-pointer":"hover:bg-slate-800 hover:border-slate-700/50 active:scale-95 cursor-pointer"}
                                    `,children:[a.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 ${S?"bg-slate-800 grayscale":R.color.replace("bg-","bg-opacity-90 bg-")} shadow-sm`,children:a.jsx("div",{className:"scale-75 text-slate-800",children:R.icon})}),a.jsx("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:a.jsx("span",{className:`block text-xs font-bold truncate ${S?"text-slate-500":"text-slate-200 group-hover:text-white"}`,children:w[R.nameKey]})}),S&&a.jsx("div",{className:"absolute right-2",children:a.jsx(Ug,{className:"w-3 h-3 text-slate-500"})})]},R.id)}),a.jsxs("button",{onClick:()=>b(!x),className:"w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all hover:bg-slate-800 border border-transparent border-dashed hover:border-slate-700/50 group",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center shrink-0 bg-slate-800 text-slate-400",children:a.jsx(nc,{className:"w-4 h-4"})}),a.jsx("span",{className:"text-xs font-medium text-slate-400 group-hover:text-white",children:x?w.lessTools:w.moreTools})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase mb-2 mt-4",children:w.historyHeader}),a.jsx("div",{className:"space-y-1",children:r?_.length>0?_.map(R=>a.jsxs("button",{onClick:()=>{g(R.id),window.innerWidth<768&&e()},className:`w-full text-left px-4 py-2.5 rounded-lg truncate transition-all group border ${y===R.id?"bg-slate-800 text-white border-slate-700":"text-slate-400 hover:bg-slate-800/50 hover:text-slate-200 border-transparent"}`,children:[a.jsx("div",{className:"text-xs font-medium truncate",children:R.title}),a.jsxs("div",{className:"text-[9px] text-slate-600 mt-0.5 group-hover:text-slate-500",children:[new Date(R.timestamp).toLocaleDateString(),"  ",new Date(R.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},R.id)):a.jsx("p",{className:"px-4 py-2 text-xs text-slate-600 italic text-center border border-slate-800/50 rounded-lg",children:"Belum ada riwayat chat."}):a.jsx("p",{className:"px-4 py-2 text-xs text-slate-600 italic text-center",children:"Login untuk melihat riwayat."})})]})]}),a.jsxs("div",{className:"p-4 border-t border-slate-800 bg-slate-900 shrink-0",children:[d&&a.jsxs("button",{onClick:d,className:"w-full mb-4 py-2.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-xl font-bold text-xs uppercase tracking-wider transition-all flex items-center justify-center gap-2 border border-slate-700/50 hover:border-slate-600 group",children:[a.jsx(er,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Exit Studio"]}),r?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.photoURL?a.jsx("img",{src:r.photoURL,alt:r.name,className:"w-8 h-8 rounded-full object-cover border border-slate-700"}):a.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500 flex items-center justify-center text-xs font-bold text-white shrink-0",children:r.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-white truncate",title:r.name,children:r.name.length>20?r.name.substring(0,20)+"...":r.name}),a.jsx("p",{className:"text-xs text-slate-500 truncate",children:r.school})]})]}),a.jsxs("button",{onClick:s,className:"w-full py-2 text-xs font-medium text-slate-400 hover:text-red-400 hover:bg-red-900/10 rounded-lg transition-colors flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),w.logOut]})]}):a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-slate-400 mb-3",children:w.loginToSave}),a.jsxs("button",{onClick:i,className:"w-full py-2.5 bg-white text-slate-900 font-bold rounded-xl text-sm hover:bg-slate-200 transition-colors shadow-lg active:scale-95 flex items-center justify-center gap-2",children:[a.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"G",className:"w-4 h-4"}),w.loginBtn]})]})]})]})})]})};class c8{constructor(e,n,r,s,i){this.x=e,this.y=n,this.vx=0,this.vy=0,this.radius=s,this.color=r,this.friction=.92,this.ease=i,this.dx=(Math.random()-.5)*80,this.dy=(Math.random()-.5)*80,this.angle=Math.random()*Math.PI*2,this.angleSpeed=.02+Math.random()*.03,this.wobbleRadius=15+Math.random()*25}update(e,n,r){if(r)this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction;else{this.angle+=this.angleSpeed;const s=Math.cos(this.angle)*this.wobbleRadius,i=Math.sin(this.angle)*this.wobbleRadius,o=e+this.dx+s,l=n+this.dy+i;this.x+=(o-this.x)*this.ease,this.y+=(l-this.y)*this.ease,this.vx=0,this.vy=0}}shatter(){const e=Math.random()*Math.PI*2,n=Math.random()*30+15;this.vx=Math.cos(e)*n,this.vy=Math.sin(e)*n}draw(e){e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2),e.fillStyle=this.color,e.fill()}}const u8=({onEnter:t})=>{const[e,n]=L.useState(!1),[r,s]=L.useState(!1),i=L.useRef(null),o=L.useRef(!1),l=L.useRef({x:window.innerWidth/2,y:window.innerHeight/2}),c=L.useRef([]);L.useEffect(()=>{setTimeout(()=>s(!0),300);const m=i.current;if(!m)return;const g=m.getContext("2d");if(!g)return;const y=()=>{m.width=window.innerWidth,m.height=window.innerHeight};window.addEventListener("resize",y),y();const w=T=>{l.current={x:T.clientX,y:T.clientY}};window.addEventListener("mousemove",w);const x=["#0f172a","#1e293b","#312e81","#1e1b4b","#4c1d95","#2563eb"],b=[];for(let T=0;T<15;T++){const R=Math.random()*30+20,j=x[Math.floor(Math.random()*x.length)],V=Math.random()*.08+.03;b.push(new c8(m.width/2,m.height/2,j,R,V))}c.current=b;let v;const _=()=>{g.clearRect(0,0,m.width,m.height),c.current.forEach(T=>{T.update(l.current.x,l.current.y,o.current),T.draw(g)}),v=requestAnimationFrame(_)};return _(),()=>{window.removeEventListener("resize",y),window.removeEventListener("mousemove",w),cancelAnimationFrame(v)}},[]);const u=()=>{o.current||(o.current=!0,c.current.forEach(m=>m.shatter()),setTimeout(()=>{o.current=!1},1500))},d=()=>{n(!0),setTimeout(()=>{t()},900)};return a.jsxs("div",{className:`fixed inset-0 z-[999] bg-white flex flex-col items-center justify-center overflow-hidden transition-transform duration-[900ms] cubic-bezier(0.76, 0, 0.24, 1) ${e?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none shadow-none"}`,onDoubleClick:u,children:[a.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none filter blur-[60px] opacity-80",children:a.jsx("canvas",{ref:i,className:"w-full h-full"})}),a.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.4] pointer-events-none mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),a.jsxs("div",{className:`relative z-10 flex flex-col items-center max-w-lg w-full text-center px-6 transition-all duration-1000 ease-out transform select-none ${r?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,children:[a.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-slate-900 mb-2 tracking-tighter",children:["FANRA",a.jsx("span",{className:"text-blue-600",children:"."})]}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-400 mb-8 tracking-widest uppercase",children:"AI Studio"}),a.jsxs("p",{className:"text-slate-500 text-sm md:text-base font-medium leading-relaxed mb-16 max-w-xs mx-auto",children:["Ruang imajinasi tanpa batas. ",a.jsx("br",{}),a.jsx("span",{className:"text-slate-800",children:"Edit, Ciptakan, dan Berdiskusi."})]}),a.jsxs("button",{onClick:d,className:"group flex flex-col items-center gap-4 transition-all outline-none cursor-pointer",children:[a.jsx("div",{className:"w-16 h-16 rounded-full border border-slate-200 bg-white/80 backdrop-blur-sm flex items-center justify-center shadow-lg transition-all duration-500 group-hover:scale-110 group-hover:bg-white group-hover:border-slate-300 group-active:scale-95 group-hover:shadow-xl",children:a.jsx($n,{className:"w-6 h-6 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-600 transition-colors duration-300",children:"Open Studio"})]})]})]})},d8="3JEZ69gonQmxU83WxzidFCFf",h8="AIzaSyDzwJLdjFvu5jrsF_HYtYSWLPSoQc2JYzA",f8="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",p8="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",m8="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",g8="sb_publishable_ikw-BNV8Wu3qhNPuSti8Rg_7XmPMWqV",y8="",Nu=[{id:kn.BACKGROUND_REMOVER,nameKey:"toolBgRemove",descKey:"toolBgRemoveDesc",icon:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/593/593398.png",className:"w-8 h-8 object-contain",alt:"Hapus Background"}),color:"bg-blue-50",model:"gemini-2.5-flash-image",cost:1},{id:kn.HD_UPSCALE,nameKey:"toolUpscale",descKey:"toolUpscaleDesc",icon:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/17558/17558323.png",className:"w-8 h-8 object-contain",alt:"HD Upscale"}),color:"bg-amber-50",model:"gemini-2.5-flash-image",cost:3},{id:kn.CREATIVE_REMIX,nameKey:"toolRemix",descKey:"toolRemixDesc",icon:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/17142/17142644.png",className:"w-8 h-8 object-contain",alt:"Creative Remix"}),color:"bg-purple-50",model:"gemini-2.5-flash-image",cost:3},{id:kn.COLORIZE,nameKey:"toolColorize",descKey:"toolColorizeDesc",icon:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/15109/15109276.png",className:"w-8 h-8 object-contain",alt:"Warnai Foto"}),color:"bg-pink-50",model:"gemini-2.5-flash-image",cost:2},{id:kn.SKETCH_TO_REAL,nameKey:"toolSketch",descKey:"toolSketchDesc",icon:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/9798/9798973.png",className:"w-8 h-8 object-contain",alt:"Sketsa ke Nyata"}),color:"bg-emerald-50",model:"gemini-2.5-flash-image",cost:3}],v8=({language:t,code:e})=>{const[n,r]=L.useState(!1),s=()=>{navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)},i=o=>o.split(`
`).map((l,c)=>a.jsxs("div",{className:"table-row",children:[a.jsx("span",{className:"table-cell select-none text-slate-600 text-right pr-4 w-8 text-xs",children:c+1}),a.jsx("span",{className:"table-cell",children:l.split(/([<>{}"']|class|const|let|var|function|return|import|export)/g).map((u,d)=>u.startsWith("<")||u.startsWith(">")?a.jsx("span",{className:"text-blue-400",children:u},d):u.startsWith('"')||u.startsWith("'")?a.jsx("span",{className:"text-green-400",children:u},d):["const","let","var","function","return","import","export","class"].includes(u)?a.jsx("span",{className:"text-purple-400 font-bold",children:u},d):["=","{","}","(",")",";"].includes(u)?a.jsx("span",{className:"text-slate-400",children:u},d):a.jsx("span",{className:"text-slate-200",children:u},d))})]},c));return a.jsxs("div",{className:"my-4 rounded-xl overflow-hidden border border-slate-700/50 shadow-lg bg-[#1e1e1e] w-full max-w-full group",children:[a.jsxs("div",{className:"bg-[#2d2d2d] px-4 py-2 flex items-center justify-between border-b border-white/5",children:[a.jsx("span",{className:"text-xs font-mono text-slate-400 lowercase font-bold",children:t||"code"}),a.jsx("button",{onClick:s,className:"flex items-center gap-1.5 text-[10px] font-medium text-slate-400 hover:text-white bg-white/5 hover:bg-white/10 px-2 py-1 rounded transition-all",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Vr,{className:"w-3 h-3 text-green-400"})," Copied"]}):a.jsxs(a.Fragment,{children:[a.jsx(MT,{className:"w-3 h-3"})," Copy Code"]})})]}),a.jsx("div",{className:"p-4 overflow-x-auto custom-scrollbar",children:a.jsx("pre",{className:"font-mono text-sm leading-relaxed whitespace-pre font-normal",style:{tabSize:2},children:a.jsx("code",{className:"table w-full border-collapse",children:i(e)})})})]})},x8=({isOpen:t,onClose:e})=>t?a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-6 shadow-2xl animate-fade-in-up border border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center",children:a.jsx(rc,{className:"w-5 h-5"})}),a.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Cara Dapet API Key Gemini"})]}),a.jsxs("ol",{className:"space-y-4 text-sm text-slate-600 mb-6 list-decimal list-inside marker:font-bold marker:text-blue-600",children:[a.jsxs("li",{className:"pl-2",children:["Buka website ",a.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-bold hover:underline",children:"Google AI Studio"}),"."]}),a.jsx("li",{className:"pl-2",children:"Login pakai akun Google kamu."}),a.jsxs("li",{className:"pl-2",children:["Klik tombol biru besar bertuliskan ",a.jsx("b",{children:'"Create API Key"'}),"."]}),a.jsxs("li",{className:"pl-2",children:["Pilih ",a.jsx("b",{children:'"Create API key in new project"'}),"."]}),a.jsxs("li",{className:"pl-2",children:["Salin (Copy) kode yang muncul, lalu tempel di menu ",a.jsx("b",{children:"Pengaturan"})," aplikasi ini."]})]}),a.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-xs text-slate-500 mb-6",children:[" ",a.jsx("b",{children:"Tips:"})," API Key ini gratis (Free Tier). Jangan kasih tau kode ini ke orang lain ya."]}),a.jsx("button",{onClick:e,className:"w-full py-3 bg-primary text-white rounded-xl font-bold shadow-lg shadow-primary/20 hover:bg-slate-800 transition-all active:scale-95",children:"Oke, Siap!"})]})}):null,rb=({text:t,block:e=!1})=>{const[n,r]=L.useState(t);L.useEffect(()=>{if(window.katex)try{const i=window.katex.renderToString(t,{throwOnError:!1,displayMode:e});r(i)}catch{r(t)}},[t,e]);const s=()=>{navigator.clipboard.writeText(t),$e("Rumus LaTeX disalin! ")};return window.katex?a.jsx("span",{dangerouslySetInnerHTML:{__html:n},className:`${e?"block my-2 overflow-x-auto overflow-y-hidden py-1":""} cursor-pointer hover:bg-slate-100/50 rounded transition-colors`,title:"Klik 2x untuk salin rumus",onDoubleClick:s}):a.jsx("code",{children:t})},sb=t=>{const e=[],n=i=>{const o=`___TOKEN_${e.length}___`;return e.push({id:o,node:i}),o};let r=t.replace(/```([\w-]*)\n([\s\S]*?)```/g,(i,o,l)=>n(a.jsx(v8,{language:o,code:l})));return r=r.replace(/(\$\$[\s\S]*?\$\$|\\\[[\s\S]*?\\\])/g,i=>{const o=(i.startsWith("$$"),i.slice(2,-2));return n(a.jsx(rb,{text:o,block:!0}))}),r=r.replace(new RegExp("(\\\\\\([\\s\\S]*?\\\\\\)|(?<!\\\\)\\$(?:[^$\\n]+?)(?<!\\\\)\\$)","g"),i=>{const o=i.startsWith("\\(")?i.slice(2,-2):i.slice(1,-1);return n(a.jsx(rb,{text:o,block:!1}))}),r.split(`
`).map((i,o)=>i.trim().startsWith("### ")?a.jsx("h3",{className:"text-base font-bold text-slate-900 mt-3 mb-1",children:Qf(i.replace(/^###\s+/,""),e)},o):i.trim().startsWith("## ")?a.jsx("h2",{className:"text-lg font-bold text-slate-900 mt-4 mb-2",children:Qf(i.replace(/^##\s+/,""),e)},o):i.trim()==="***"||i.trim()==="---"?a.jsx("div",{className:"h-px bg-slate-200 my-4 w-full"},o):i.trim()===""?a.jsx("div",{className:"h-2"},o):a.jsx("div",{className:"block leading-relaxed",children:Qf(i,e)},o))},Qf=(t,e)=>t.split(/(\*\*[\s\S]*?\*\*)/g).map((r,s)=>r.startsWith("**")&&r.endsWith("**")?a.jsx("strong",{className:"font-bold text-slate-900",children:ib(r.slice(2,-2),e)},s):a.jsx(Dl.Fragment,{children:ib(r,e)},s)),ib=(t,e)=>t.split(new RegExp("(?<!\\*)\\*([^*]+?)\\*(?!\\*)","g")).map((r,s)=>s%2===1?a.jsx("em",{className:"italic text-slate-800",children:ob(r,e)},s):ob(r,e)),ob=(t,e)=>t.split(/(___TOKEN_\d+___)/g).map((r,s)=>{const i=e.find(c=>c.id===r);if(i)return a.jsx(Dl.Fragment,{children:i.node},s);const l=/\[(.*?)\]\((.*?)\)/g.exec(r);return l?a.jsxs(Dl.Fragment,{children:[r.substring(0,l.index),a.jsx("a",{href:l[2],target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline font-medium",children:l[1]}),r.substring(l.index+l[0].length)]},s):r});function w8({onExit:t,isAdmin:e=!1}){const[n,r]=L.useState(!0),[s,i]=L.useState("id"),[o,l]=L.useState(null),[c,u]=L.useState(null),d=(o==null?void 0:o.isAdmin)||e,[m,g]=L.useState(!1),[y,w]=L.useState(!1),[x,b]=L.useState(!1),[v,_]=L.useState(!0),[T,R]=L.useState(null),[j,V]=L.useState(null),[S,I]=L.useState(null),[C,A]=L.useState(""),[F,P]=L.useState({isProcessing:!1,progress:"",error:null}),[D,M]=L.useState({}),[q,pe]=L.useState(Date.now().toString()),[ne,ee]=L.useState([]),[Q,ue]=L.useState([]),[$,B]=L.useState(""),[Z,he]=L.useState([]),[ce,Pe]=L.useState(null),[xe,Se]=L.useState(!1),[Ce,We]=L.useState(!1),[Oe,Ze]=L.useState(null),ot=L.useRef(null),N=L.useRef(null),ae=L.useRef(null),X=L.useRef(null),[z,O]=L.useState(!1),[H,oe]=L.useState(""),[le,J]=L.useState([]),[me,_e]=L.useState(""),[K,re]=L.useState(""),[be,Ne]=L.useState(""),[ht,Pt]=L.useState(""),[gt,te]=L.useState(""),[fe,Re]=L.useState(!0),[He,tt]=L.useState(!0),[Ft,xt]=L.useState(!1),[Kt,un]=L.useState(!1),[Ut,Dn]=L.useState(!1),[jn,lr]=L.useState(!1),[lt,$r]=L.useState(!1),[yo,Er]=L.useState(!1),[Ei,At]=L.useState(!1),[Ti,cr]=L.useState(null),Qe=Oc[s];L.useEffect(()=>{const W=(je,Le)=>{const at=localStorage.getItem(je);at&&Le(at)};W("remove_bg_key",oe),W("google_search_key",_e),W("google_search_cx",re),W("open_router_key",Ne),W("hugging_face_key",Pt),W("groq_key",te),localStorage.getItem("fanra_rb_enabled")==="false"&&Re(!1),localStorage.getItem("fanra_sb_enabled")==="false"&&tt(!1),localStorage.getItem("fanra_km_enabled")==="true"&&xt(!0),localStorage.getItem("fanra_wiki_enabled")==="true"&&un(!0),(async()=>{const je={};for(const Le of Nu){const at=`tool_status_${Le.id}`,Vt=await ja(at);je[Le.id]=Vt!=="false"}M(je)})(),dn()},[]),L.useEffect(()=>{lt&&le.some(W=>W.isActive)&&$r(!1)},[le]),L.useEffect(()=>{var W;(W=N.current)==null||W.scrollIntoView({behavior:"smooth"})},[Q,F.isProcessing,Z]),L.useEffect(()=>{c&&(e3(c).then(W=>{ee(W);const Ee=W.filter(je=>je.sessionId===q);ue(Ee)}),QL(c).then(W=>J(W))),dn()},[c,q]),L.useEffect(()=>{if(X.current){X.current.style.height="auto";const W=Math.min(X.current.scrollHeight,128);X.current.style.height=`${Math.max(42,W)}px`}},[$,Z]);const vo=()=>H||d8,Ii=()=>{const W=le.filter(Ee=>Ee.isActive!==!1).map(Ee=>Ee.key);return W.length===0?[h8]:W},Tr=W=>{oe(W),localStorage.setItem("remove_bg_key",W)},xo=(W,Ee)=>{_e(W),re(Ee),localStorage.setItem("google_search_key",W),localStorage.setItem("google_search_cx",Ee)},wo=W=>{Ne(W),localStorage.setItem("open_router_key",W)},as=W=>{Pt(W),localStorage.setItem("hugging_face_key",W)},Si=W=>{te(W),localStorage.setItem("groq_key",W)},G=async(W,Ee)=>{const je={key:W,addedAt:Date.now(),isShared:Ee,isActive:!0},Le=[...le,je];J(Le),c&&await pw(c,Le)},se=async W=>{const Ee=le.filter(je=>je.key!==W);J(Ee),c&&await XL(c,W,Ee)},ye=async(W,Ee)=>{const je=le.map(Le=>Le.key===W?{...Le,isActive:Ee}:Le);J(je),c&&await pw(c,je)},De=W=>{Re(W),localStorage.setItem("fanra_rb_enabled",W.toString())},qe=W=>{tt(W),localStorage.setItem("fanra_sb_enabled",W.toString())},ut=W=>{xt(W),localStorage.setItem("fanra_km_enabled",W.toString())},nt=W=>{un(W),localStorage.setItem("fanra_wiki_enabled",W.toString())},qn=async()=>{try{window.aistudio&&await window.aistudio.openSelectKey()}catch(W){console.error(W)}},dn=()=>{if(le.length>0){Dn(!1),lr(!1);return}const W=new Date().toISOString().split("T")[0],Ee=o?c||"user":"guest",je=`fanra_limit_${W}_${Ee}_chat`,Le=`fanra_limit_${W}_${Ee}_image`,at=parseInt(localStorage.getItem(je)||"0"),Vt=parseInt(localStorage.getItem(Le)||"0"),yt=o?10:3,$t=o?3:1;Dn(at>=yt),lr(Vt>=$t)},Hr=W=>{if(le.length>0)return!0;const Le=`fanra_limit_${new Date().toISOString().split("T")[0]}_${o?c||"user":"guest"}_${W}`,at=parseInt(localStorage.getItem(Le)||"0");let Vt=0;return o?Vt=W==="chat"?10:3:Vt=W==="chat"?3:1,at>=Vt?(dn(),!1):(localStorage.setItem(Le,(at+1).toString()),dn(),!0)},Ir=(W,Ee,je,Le)=>{V({data:W,mimeType:Ee,width:je,height:Le})},Sr=(W,Ee,je)=>{l(W),u(Ee),g(!1)},hn=()=>{V(null),I(null),A(""),R(null),P({isProcessing:!1,progress:"",error:null}),he([]),cr(null)},ur=async()=>{await YL(),l(null),u(null),J([]),hn(),ee([]),ue([]),$r(!1),dn()},Tn=()=>i(W=>W==="id"?"en":"id"),ki=(W,Ee)=>{W&&navigator.clipboard.writeText(W).then(()=>{Pe(Ee),setTimeout(()=>Pe(null),2e3)})},Wh=W=>{Ze(Ee=>Ee===W?null:W)},zc=async(W,Ee)=>{if(Ee.stopPropagation(),!d)return;const je=!D[W];M(Le=>({...Le,[W]:je}));try{await La(`tool_status_${W}`,je.toString())}catch{M(at=>({...at,[W]:!je}))}},Gc=(W,Ee)=>{Ee?$e(Qe.toolLockedMsg):R(W)},$c=W=>{W.preventDefault(),W.stopPropagation(),Se(!0)},Ba=W=>{W.preventDefault(),W.stopPropagation(),Se(!1)},za=W=>{const Ee=new FileReader;Ee.onloadend=()=>{const je=Ee.result,Le=new Image;Le.onload=()=>{Ir(je.split(",")[1],W.type,Le.width,Le.height)},Le.src=je},Ee.readAsDataURL(W)},Ga=W=>{if(W.length+Z.length>3){alert("Maksimal 3 gambar sekaligus.");return}W.forEach(Ee=>{if(!Ee.type.startsWith("image/"))return;const je=new FileReader;je.onloadend=()=>{const Le=je.result.split(",")[1];he(at=>[...at,{data:Le,mimeType:Ee.type,name:Ee.name}])},je.readAsDataURL(Ee)})},Hc=W=>{W.preventDefault(),W.stopPropagation(),Se(!1);const Ee=Array.from(W.dataTransfer.files);if(Ee.length!==0)if(T){const je=Ee[0];je.type.startsWith("image/")&&za(je)}else Ga(Ee)},qc=()=>{const W=Date.now().toString();pe(W),ue([]),he([]),hn(),w(!1)},Kh=W=>{pe(W);const Ee=ne.filter(je=>je.sessionId===W);ue(Ee),w(!1),hn()},$a=()=>{S?(cr("back"),At(!0)):hn()},Wc=()=>{Ti==="back"&&hn(),At(!1),cr(null)},Jh=()=>{ot.current&&(ot.current.abort(),ot.current=null,P({isProcessing:!1,progress:"",error:"Stopped by user."}))},qr=async W=>{var at,Vt;if(W==null||W.preventDefault(),!$.trim()&&Z.length===0||lt||!Hr("chat")||Z.length>0&&!Hr("image"))return;const Ee={id:Date.now().toString(),sessionId:q,role:"user",text:$,timestamp:Date.now(),attachments:[...Z]},je={id:"temp-thinking",sessionId:q,role:"model",text:"",timestamp:Date.now()+1},Le=[...Q,Ee,je];ue(Le),ee(yt=>[...yt,Ee,je]),B(""),he([]),P({isProcessing:!0,progress:"AI Thinking...",error:null}),c&&mw(c,Ee);try{ot.current=new AbortController;const yt=me&&K?{apiKey:me,cx:K}:void 0,$t=Ii(),Wn=await e8(Ee.text,$t,Q,s,Ee.attachments||[],Ls=>{ue(Ln=>Ln.map(Ha=>Ha.id==="temp-thinking"?{...Ha,text:Ls}:Ha))},Ft,Kt,yt,ot.current.signal,be||f8,ht||p8,gt||m8),dr={id:(Date.now()+2).toString(),sessionId:q,role:"model",text:Wn.text,timestamp:Date.now(),source:Wn.source};ue(Ls=>Ls.map(Ln=>Ln.id==="temp-thinking"?dr:Ln)),ee(Ls=>Ls.map(Ln=>Ln.id==="temp-thinking"?dr:Ln)),c&&mw(c,dr)}catch(yt){if(yt.message==="Request cancelled by user")ue($t=>$t.filter(Wn=>Wn.id!=="temp-thinking")),ee($t=>$t.filter(Wn=>Wn.id!=="temp-thinking"));else{const $t={id:(Date.now()+2).toString(),sessionId:q,role:"model",text:Qe.chatFallbackError+(yt.message?` (${yt.message})`:""),timestamp:Date.now()};ue(Wn=>Wn.map(dr=>dr.id==="temp-thinking"?$t:dr)),ee(Wn=>Wn.map(dr=>dr.id==="temp-thinking"?$t:dr)),((at=yt.message)!=null&&at.includes("429")||(Vt=yt.message)!=null&&Vt.includes("quota"))&&$r(!0)}}finally{P({isProcessing:!1,progress:"",error:null}),ot.current=null}},kr=W=>{he(Ee=>Ee.filter((je,Le)=>Le!==W))},Ci=()=>{var W;jn||(W=ae.current)==null||W.click()},_o=W=>{if(W.target.files){const Ee=Array.from(W.target.files);Ga(Ee)}W.target.value=""},Kc=o||{name:"Guest"},pt=x?Nu:Nu.slice(0,3),bo=async()=>{if(!j||!T||!Hr("image"))return;P({isProcessing:!0,progress:Qe.initializing,error:null}),I(null);const W=T.id===kn.BACKGROUND_REMOVER,Ee=vo(),je=Ii();try{let Le="",at=!1;if(W&&Ee&&fe&&!at)try{P(yt=>({...yt,progress:Qe.processingStandard})),Le=await r8(j.data,Ee),at=!0}catch{console.warn("Standard Engine failed")}if(!at&&(W||!W)&&!at&&je.length>0)try{P(yt=>({...yt,progress:Qe.processingAI})),Le=await WB({image:j,tool:T.id,prompt:T.id===kn.CREATIVE_REMIX?C:void 0,apiKeys:je}),W&&(P(yt=>({...yt,progress:Qe.refining})),Le=await t8(Le)),at=!0}catch(yt){console.warn("Gemini failed",yt)}if(!at||!Le)throw new Error("No available API Keys or Services found/enabled.");I(Le),P({isProcessing:!1,progress:"",error:null})}catch(Le){console.error("Execution Error:",Le);let at=Qe.serviceBusy;const Vt=(Le.message||"").toLowerCase();Vt.includes("network")||Vt.includes("fetch")?at=Qe.networkError:Vt.includes("memory")||Vt.includes("oom")?at=Qe.memoryError:(Vt.includes("no available api")||Vt.includes("enabled"))&&(at=Qe.insufficientCredits),P({isProcessing:!1,progress:"",error:at})}},js=Ut&&!lt&&!F.isProcessing,Ai=/(\$\$|\\\[|\\\(|\$)/.test($);return a.jsxs("div",{className:"flex h-[100dvh] bg-white font-sans text-primary overflow-hidden relative",onDragOver:$c,onDragLeave:Ba,onDrop:Hc,children:[n&&a.jsx(u8,{onEnter:()=>r(!1)}),xe&&a.jsx("div",{className:"absolute inset-0 z-[100] bg-primary/10 backdrop-blur-sm border-4 border-primary border-dashed m-4 rounded-3xl flex items-center justify-center pointer-events-none",children:a.jsxs("div",{className:"bg-white px-8 py-4 rounded-2xl shadow-xl flex items-center gap-3",children:[a.jsx($v,{className:"w-6 h-6 text-primary"}),a.jsx("span",{className:"font-bold text-lg text-primary",children:"Drop files to send"})]})}),m&&a.jsx("div",{className:"fixed inset-0 z-[60] bg-white",children:a.jsx(a8,{onLogin:Sr,language:s,onToggleLanguage:Tn,onClose:()=>g(!1)})}),a.jsx(x8,{isOpen:yo,onClose:()=>Er(!1)}),a.jsx(o8,{isOpen:z,onClose:()=>O(!1),removeBgKey:H,onSaveRemoveBgKey:Tr,storedApiKeys:le,onAddApiKey:G,onDeleteApiKey:se,onToggleApiKey:ye,onSelectGoogleKey:qn,knowledgeMode:Ft,onToggleKnowledgeMode:ut,wikiEnabled:Kt,onToggleWiki:nt,removeBgEnabled:fe,onToggleRemoveBg:De,supabaseEnabled:He,onToggleSupabase:qe,googleSearchKey:me,googleSearchCx:K,onSaveGoogleSearch:xo,openRouterKey:be,onSaveOpenRouterKey:wo,huggingFaceKey:ht,onSaveHuggingFaceKey:as,groqKey:gt,onSaveGroqKey:Si,language:s}),a.jsx(Fa,{isOpen:Ei,title:Qe.confirmTitle,description:Qe.confirmDesc,confirmText:Qe.yesChange,onConfirm:Wc,onCancel:()=>At(!1)}),a.jsx(l8,{isOpen:y,onClose:()=>w(!1),onNewChat:qc,user:o,onLogout:ur,onOpenLogin:()=>g(!0),language:s,tools:Nu,toolStatuses:D,onSelectTool:R,onExit:t,chatHistory:ne,onLoadSession:Kh,currentSessionId:q}),a.jsxs("div",{className:"flex-1 flex flex-col h-full relative w-full overflow-hidden bg-slate-50/50",children:[a.jsx("header",{className:"absolute top-0 left-0 right-0 z-30 p-4 pointer-events-none",children:a.jsxs("div",{className:"max-w-5xl mx-auto bg-white/80 backdrop-blur-xl border border-white/40 shadow-lg shadow-slate-200/50 rounded-2xl px-4 py-3 flex items-center justify-between pointer-events-auto",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>w(!y),className:"p-2 rounded-xl hover:bg-slate-100 text-slate-600 transition-colors",children:a.jsx(PT,{className:"w-5 h-5"})}),a.jsx("div",{className:"font-bold text-lg tracking-tight bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent hidden md:block",children:"Fanra Studio"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:Tn,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-full text-xs font-bold text-slate-700 transition-all hover:shadow-sm active:scale-95",children:[a.jsx("img",{src:s==="id"?"https://cdn-icons-png.flaticon.com/128/11654/11654463.png":"https://cdn-icons-png.flaticon.com/128/9906/9906532.png",alt:"Lang",className:"w-4 h-4 object-contain"}),a.jsx("span",{children:s.toUpperCase()})]}),a.jsxs("button",{onClick:()=>O(!0),className:"p-2 text-slate-400 hover:text-primary hover:bg-slate-100 rounded-full transition-all relative",children:[a.jsx(Kp,{className:"w-5 h-5"}),lt&&a.jsx("span",{className:"absolute top-1.5 right-1.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]})]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto pt-24 px-4 scroll-smooth custom-scrollbar",children:a.jsxs("div",{className:"max-w-3xl mx-auto min-h-full flex flex-col pb-4",children:[Q.length===0&&!T&&a.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center py-10 animate-fade-in-up",children:[a.jsxs("div",{className:"mb-8 text-center",children:[a.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 mb-3 tracking-tight",children:[Qe.heroTitle," ",Kc.name]}),a.jsx("p",{className:"text-slate-500 text-lg",children:Qe.heroSubtitle})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-5 w-full max-w-2xl px-2",children:[pt.map(W=>{const Ee=D[W.id]!==!1,je=!Ee&&!d;return a.jsxs("button",{onClick:()=>Gc(W,je),className:`relative flex flex-col items-center text-center p-4 md:p-6 bg-white border rounded-2xl shadow-sm transition-all duration-300 group h-full ${je?"border-slate-100 opacity-80 bg-slate-50 hover:bg-slate-100 cursor-pointer":"hover:border-primary/20 hover:shadow-xl hover:-translate-y-1 border-slate-100 cursor-pointer"}`,children:[d&&a.jsx("div",{className:"absolute top-2 right-2 z-20",onClick:Le=>zc(W.id,Le),children:a.jsx("div",{className:`w-8 h-4 rounded-full transition-colors flex items-center p-0.5 ${Ee?"bg-green-500":"bg-slate-300"}`,children:a.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transform transition-transform ${Ee?"translate-x-4":"translate-x-0"}`})})}),je&&a.jsx("div",{className:"absolute top-2 right-2 z-10",children:a.jsx("div",{className:"bg-slate-100 p-1.5 rounded-full shadow-sm",children:a.jsx(Ug,{className:"w-3 h-3 text-slate-400"})})}),a.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 ${je?"bg-slate-200 grayscale":W.color} rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110 shadow-sm`,children:W.icon}),a.jsx("span",{className:`text-xs md:text-sm font-bold leading-tight ${je?"text-slate-400":"text-slate-700"}`,children:Qe[W.nameKey]}),a.jsx("span",{className:"hidden md:block text-[10px] text-slate-400 mt-2 leading-tight",children:Qe[W.descKey]})]},W.id)}),a.jsxs("button",{onClick:()=>b(!x),className:`flex flex-col items-center justify-center text-center p-4 md:p-6 bg-slate-50 border border-slate-200 border-dashed rounded-2xl hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-300 group h-full ${x?"":"col-start-2"}`,children:[a.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-slate-100 text-slate-400 rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110",children:a.jsx(nc,{className:"w-6 h-6"})}),a.jsx("span",{className:"text-xs md:text-sm font-bold text-slate-500 group-hover:text-slate-700 leading-tight",children:x?Qe.lessTools:Qe.moreTools})]})]})]}),Q.map(W=>a.jsxs("div",{className:`flex flex-col mb-6 animate-fade-in ${W.role==="user"?"items-end":"items-start"}`,children:[W.attachments&&W.attachments.length>0&&a.jsx("div",{className:`flex flex-wrap gap-2 mb-2 max-w-[85%] ${W.role==="user"?"justify-end":"justify-start"}`,children:W.attachments.map((Ee,je)=>a.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200/50 shadow-sm transition-transform hover:scale-[1.02]",children:a.jsx("img",{src:`data:${Ee.mimeType};base64,${Ee.data}`,alt:Ee.name,className:"h-32 w-auto object-cover md:h-48 rounded-lg bg-slate-100"})},je))}),(W.text||W.role==="model"&&!W.text)&&a.jsxs("div",{className:`flex flex-col gap-1 max-w-lg lg:max-w-2xl ${W.role==="user"?"items-end":"items-start"}`,children:[a.jsx("div",{className:`relative px-5 py-3.5 rounded-2xl text-sm leading-relaxed shadow-sm break-words group w-full ${W.role==="user"?"bg-white text-slate-800 rounded-tr-sm border border-slate-100 shadow-slate-200/50":"bg-transparent text-slate-700 p-0 shadow-none"}`,children:W.role==="model"&&!W.text?a.jsxs("div",{className:"flex gap-1.5 h-5 items-center",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"}),a.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-100"}),a.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-200"})]}):sb(W.text)}),a.jsxs("div",{className:`flex items-center gap-2 mt-1 px-1 ${W.role==="user"?"justify-end":"justify-start"}`,children:[W.role==="model"&&W.source&&a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>Wh(W.id),className:`p-1.5 rounded-full transition-all ${Oe===W.id?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-400 hover:text-slate-600"}`,title:"Info Sumber",children:a.jsx(TN,{className:"w-3.5 h-3.5"})}),Oe===W.id&&a.jsxs("div",{className:"absolute bottom-8 left-0 z-10 bg-white border border-slate-200 rounded-xl shadow-xl p-2 min-w-[140px] animate-fade-in-up origin-bottom-left flex flex-col gap-1",children:[a.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider px-1",children:"Sumber Data"}),a.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg bg-slate-50 text-xs font-semibold text-slate-700",children:[W.source==="gemini"&&a.jsx(Gv,{className:"w-3.5 h-3.5"}),W.source==="openrouter"&&a.jsx("div",{className:"w-3.5 h-3.5 bg-green-500 rounded-full flex items-center justify-center text-[8px] text-white font-bold",children:"OR"}),W.source==="groq"&&a.jsx(wN,{className:"w-3.5 h-3.5 text-orange-500"}),W.source==="huggingface"&&a.jsx("div",{className:"w-3.5 h-3.5 bg-yellow-400 rounded-full flex items-center justify-center text-[8px] text-black font-bold",children:"HF"}),W.source==="google_search"&&a.jsx(Gv,{className:"w-3.5 h-3.5 text-orange-500"}),W.source==="weather"&&a.jsx(IN,{className:"w-3.5 h-3.5 text-blue-400"}),W.source==="country_fact"&&a.jsx(SN,{className:"w-3.5 h-3.5 text-red-500"}),a.jsx("span",{children:W.source==="gemini"?"Google Gemini":W.source==="openrouter"?"OpenRouter":W.source==="groq"?"Groq LPU":W.source==="huggingface"?"HuggingFace":W.source==="weather"?"Open-Meteo":W.source==="country_fact"?"RestCountries":W.source==="google_search"?"Google":W.source})]})]})]}),W.text&&a.jsx("button",{onClick:()=>ki(W.text,W.id),className:`p-1.5 rounded-full transition-all ${ce===W.id?"bg-green-100 text-green-600":"bg-white border border-slate-100 text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:ce===W.id?a.jsx(Vr,{className:"w-3.5 h-3.5"}):a.jsx(MT,{className:"w-3.5 h-3.5"})})]})]})]},W.id)),T&&a.jsxs("div",{className:"w-full animate-fade-in py-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("button",{onClick:$a,className:"text-xs flex items-center gap-1 text-slate-500 hover:text-primary px-3 py-1.5 bg-white border border-slate-200 rounded-full shadow-sm hover:shadow transition-all",children:[a.jsx(er,{className:"w-4 h-4"})," ",Qe.back]}),a.jsx("span",{className:"font-bold text-sm text-slate-700 bg-white px-3 py-1 rounded-full border border-slate-100 shadow-sm",children:Qe[T.nameKey]})]}),j?a.jsxs("div",{className:"space-y-4",children:[!S&&!F.isProcessing&&a.jsx("div",{className:"bg-slate-100 p-4 rounded-2xl border border-slate-200/60 max-w-sm mx-auto shadow-inner",children:a.jsx("img",{src:`data:${j.mimeType};base64,${j.data}`,className:"rounded-xl max-h-60 mx-auto object-contain shadow-sm"})}),T.id===kn.CREATIVE_REMIX&&!S&&a.jsx("textarea",{className:"w-full bg-white border border-slate-200 rounded-2xl p-4 text-sm focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none shadow-sm transition-all",placeholder:Qe.aiPromptPlaceholder,value:C,onChange:W=>A(W.target.value)}),!S&&!F.isProcessing&&a.jsx("button",{onClick:bo,disabled:T.id===kn.CREATIVE_REMIX&&!C.trim(),className:"w-full py-4 bg-primary text-white rounded-2xl font-bold shadow-xl shadow-slate-900/10 active:scale-95 transition-all hover:-translate-y-0.5",children:Qe.generateMagic}),(F.isProcessing||S)&&a.jsx(i8,{originalImage:j,resultImageBase64:S,isProcessing:F.isProcessing,processingText:F.progress,onReset:$a,language:s})]}):a.jsx(s8,{onImageSelect:Ir,language:s})]}),F.isProcessing&&T&&a.jsx("div",{className:"flex gap-4 animate-fade-in pl-5",children:a.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[a.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-100"}),a.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-200"})]})}),a.jsx("div",{ref:N})]})}),!T&&a.jsx("div",{className:"shrink-0 w-full px-4 pb-6 pt-2 z-40 bg-slate-50/50 backdrop-blur-sm",children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[lt&&a.jsx("div",{className:"mb-3 animate-fade-in-up",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 flex items-center justify-between shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[a.jsx(ha,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold",children:"Limit Chat Habis."})]}),a.jsx("button",{onClick:()=>Er(!0),className:"text-xs font-bold text-white bg-red-500 hover:bg-red-600 px-3 py-1.5 rounded-lg transition-colors shadow-sm",children:"Cara Dapet API Key?"})]})}),js&&a.jsxs("div",{className:"bg-slate-900 text-white rounded-t-3xl p-3 px-4 flex items-center justify-between shadow-2xl animate-fade-in z-10 relative mt-2 mx-1",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("span",{className:"text-xs font-bold leading-tight",children:o?"Limit harian habis. Besok lagi ya!":"Login/Masuk untuk lanjut mengobrol dengan Fanra"})}),!o&&a.jsx("button",{onClick:()=>g(!0),className:"text-[10px] font-bold bg-white text-slate-900 px-3 py-1.5 rounded-lg hover:bg-slate-200 transition-colors shadow-sm whitespace-nowrap",children:"Login Sekarang"})]}),a.jsxs("form",{onSubmit:qr,className:`relative flex flex-col bg-white border shadow-2xl shadow-slate-200/60 transition-all duration-300 focus-within:shadow-xl ${lt?"border-red-200 opacity-80 rounded-3xl":js?"rounded-b-3xl rounded-t-sm border-t-0 border-slate-900/10":"rounded-3xl border-slate-200 focus-within:border-slate-300"}`,children:[Ai&&a.jsxs("div",{className:"border-b border-slate-100 bg-slate-50/50 rounded-t-2xl animate-fade-in overflow-hidden transition-all",children:[a.jsxs("div",{onClick:()=>_(!v),className:"flex items-center justify-between p-2 cursor-pointer hover:bg-slate-100 transition-colors select-none",children:[a.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase px-1",children:"Pratinjau Rumus"}),a.jsx($n,{className:`w-3 h-3 text-slate-400 transition-transform ${v?"":"-rotate-90"}`})]}),v&&a.jsx("div",{className:"p-3 bg-white text-sm overflow-x-auto border-t border-slate-100 max-h-40 custom-scrollbar",children:sb($)})]}),Z.length>0&&a.jsxs("div",{className:"p-3 border-b border-slate-100 bg-slate-50 flex items-start gap-3 animate-fade-in overflow-x-auto custom-scrollbar rounded-t-[22px]",children:[Z.map((W,Ee)=>a.jsxs("div",{className:"relative group flex-shrink-0",children:[a.jsx("img",{src:`data:${W.mimeType};base64,${W.data}`,alt:"Preview",className:"h-16 w-16 object-cover rounded-lg border border-slate-200 shadow-sm"}),a.jsx("button",{type:"button",onClick:()=>kr(Ee),className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full p-0.5 shadow-md hover:bg-red-600 transition-colors",children:a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Ee)),Z.length<3&&a.jsx("div",{onClick:Ci,className:"h-16 w-16 rounded-lg border-2 border-dashed border-slate-300 flex items-center justify-center cursor-pointer hover:border-primary hover:bg-white transition-colors flex-shrink-0 text-slate-400 hover:text-primary",children:a.jsx("span",{className:"text-xs font-bold",children:"+"})})]}),a.jsxs("div",{className:"flex items-end gap-1.5 p-2.5",children:[a.jsxs("div",{className:"relative",children:[a.jsx("button",{type:"button",onClick:()=>We(!Ce),className:"p-2.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors flex-shrink-0 mb-0.5",children:a.jsx(bN,{className:"w-5 h-5"})}),Ce&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>We(!1)}),a.jsxs("div",{className:"absolute bottom-12 left-0 w-48 bg-white border border-slate-200 rounded-xl shadow-xl z-[60] py-1 overflow-hidden animate-fade-in-up origin-bottom-left",children:[a.jsxs("button",{type:"button",onClick:()=>{qc(),We(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-red-500 hover:bg-red-50 flex items-center gap-2",children:[a.jsx(gr,{className:"w-4 h-4"})," Clear Chat"]}),a.jsxs("button",{type:"button",onClick:()=>{O(!0),We(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-2",children:[a.jsx(Kp,{className:"w-4 h-4"})," Settings"]})]})]})]}),a.jsx("input",{type:"file",ref:ae,className:"hidden",accept:"image/*",multiple:!0,onChange:_o}),a.jsx("button",{type:"button",onClick:Ci,disabled:jn,className:`p-2.5 rounded-full transition-colors flex-shrink-0 mb-0.5 ${jn?"text-slate-300 cursor-not-allowed":"text-slate-400 hover:text-slate-600 hover:bg-slate-100"}`,children:a.jsx($v,{className:"w-5 h-5"})}),a.jsx("textarea",{ref:X,value:$,onChange:W=>B(W.target.value),onKeyDown:W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),qr(W))},disabled:lt||Ut,placeholder:lt?"Limit API Key Habis.":Ft?"(Knowledge Mode Active)":Z.length>0?Qe.aiPromptPlaceholder:Qe.chatPlaceholder,className:"flex-1 bg-transparent border-none focus:ring-0 focus:outline-none resize-none max-h-32 py-3 px-2 text-sm text-primary placeholder:text-slate-400 leading-relaxed custom-scrollbar disabled:text-slate-400 disabled:cursor-not-allowed",rows:1,style:{minHeight:"44px",overflowY:"auto"}}),F.isProcessing&&!T?a.jsx("button",{type:"button",onClick:Jh,className:"p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 bg-slate-900 text-white hover:bg-slate-700 animate-pulse",title:"Stop Generation",children:a.jsx(jT,{className:"w-5 h-5"})}):a.jsx("button",{type:"submit",disabled:!$.trim()&&Z.length===0||F.isProcessing||lt||Ut&&$.trim().length>0,className:`p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 ${Ft?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-primary text-white hover:bg-slate-800"} ${lt||Ut?"bg-slate-300 text-white cursor-not-allowed opacity-50 blur-[1px]":""}`,children:a.jsx("svg",{className:"w-5 h-5 transform rotate-90",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})]})})]})]})}function Ru(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Nk={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,s,i){function o(u,d){if(!s[u]){if(!r[u]){var m=typeof Ru=="function"&&Ru;if(!d&&m)return m(u,!0);if(l)return l(u,!0);var g=new Error("Cannot find module '"+u+"'");throw g.code="MODULE_NOT_FOUND",g}var y=s[u]={exports:{}};r[u][0].call(y.exports,function(w){var x=r[u][1][w];return o(x||w)},y,y.exports,n,r,s,i)}return s[u].exports}for(var l=typeof Ru=="function"&&Ru,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var u,d,m,g,y,w,x,b=[],v=0,_=c.length,T=_,R=i.getTypeOf(c)!=="string";v<c.length;)T=_-v,m=R?(u=c[v++],d=v<_?c[v++]:0,v<_?c[v++]:0):(u=c.charCodeAt(v++),d=v<_?c.charCodeAt(v++):0,v<_?c.charCodeAt(v++):0),g=u>>2,y=(3&u)<<4|d>>4,w=1<T?(15&d)<<2|m>>6:64,x=2<T?63&m:64,b.push(l.charAt(g)+l.charAt(y)+l.charAt(w)+l.charAt(x));return b.join("")},s.decode=function(c){var u,d,m,g,y,w,x=0,b=0,v="data:";if(c.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var _,T=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&T--,c.charAt(c.length-2)===l.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=o.uint8array?new Uint8Array(0|T):new Array(0|T);x<c.length;)u=l.indexOf(c.charAt(x++))<<2|(g=l.indexOf(c.charAt(x++)))>>4,d=(15&g)<<4|(y=l.indexOf(c.charAt(x++)))>>2,m=(3&y)<<6|(w=l.indexOf(c.charAt(x++))),_[b++]=u,y!==64&&(_[b++]=d),w!==64&&(_[b++]=m);return _}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),l=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function u(d,m,g,y,w){this.compressedSize=d,this.uncompressedSize=m,this.crc32=g,this.compression=y,this.compressedContent=w}u.prototype={getContentWorker:function(){var d=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),m=this;return d.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,m,g){return d.pipe(new l).pipe(new c("uncompressedSize")).pipe(m.compressWorker(g)).pipe(new c("compressedSize")).withStreamInfo("compression",m)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var l,c=[],u=0;u<256;u++){l=u;for(var d=0;d<8;d++)l=1&l?3988292384^l>>>1:l>>>1;c[u]=l}return c}();r.exports=function(l,c){return l!==void 0&&l.length?i.getTypeOf(l)!=="string"?function(u,d,m,g){var y=o,w=g+m;u^=-1;for(var x=g;x<w;x++)u=u>>>8^y[255&(u^d[x])];return-1^u}(0|c,l,l.length,0):function(u,d,m,g){var y=o,w=g+m;u^=-1;for(var x=g;x<w;x++)u=u>>>8^y[255&(u^d.charCodeAt(x))];return-1^u}(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),l=n("./utils"),c=n("./stream/GenericWorker"),u=i?"uint8array":"array";function d(m,g){c.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=g,this.meta={}}s.magic="\b\0",l.inherits(d,c),d.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(u,m.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(g){m.push({data:g,meta:m.meta})}},s.compressWorker=function(m){return new d("Deflate",m)},s.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(y,w){var x,b="";for(x=0;x<w;x++)b+=String.fromCharCode(255&y),y>>>=8;return b}function o(y,w,x,b,v,_){var T,R,j=y.file,V=y.compression,S=_!==u.utf8encode,I=l.transformTo("string",_(j.name)),C=l.transformTo("string",u.utf8encode(j.name)),A=j.comment,F=l.transformTo("string",_(A)),P=l.transformTo("string",u.utf8encode(A)),D=C.length!==j.name.length,M=P.length!==A.length,q="",pe="",ne="",ee=j.dir,Q=j.date,ue={crc32:0,compressedSize:0,uncompressedSize:0};w&&!x||(ue.crc32=y.crc32,ue.compressedSize=y.compressedSize,ue.uncompressedSize=y.uncompressedSize);var $=0;w&&($|=8),S||!D&&!M||($|=2048);var B=0,Z=0;ee&&(B|=16),v==="UNIX"?(Z=798,B|=function(ce,Pe){var xe=ce;return ce||(xe=Pe?16893:33204),(65535&xe)<<16}(j.unixPermissions,ee)):(Z=20,B|=function(ce){return 63&(ce||0)}(j.dosPermissions)),T=Q.getUTCHours(),T<<=6,T|=Q.getUTCMinutes(),T<<=5,T|=Q.getUTCSeconds()/2,R=Q.getUTCFullYear()-1980,R<<=4,R|=Q.getUTCMonth()+1,R<<=5,R|=Q.getUTCDate(),D&&(pe=i(1,1)+i(d(I),4)+C,q+="up"+i(pe.length,2)+pe),M&&(ne=i(1,1)+i(d(F),4)+P,q+="uc"+i(ne.length,2)+ne);var he="";return he+=`
\0`,he+=i($,2),he+=V.magic,he+=i(T,2),he+=i(R,2),he+=i(ue.crc32,4),he+=i(ue.compressedSize,4),he+=i(ue.uncompressedSize,4),he+=i(I.length,2),he+=i(q.length,2),{fileRecord:m.LOCAL_FILE_HEADER+he+I+q,dirRecord:m.CENTRAL_FILE_HEADER+i(Z,2)+he+i(F.length,2)+"\0\0\0\0"+i(B,4)+i(b,4)+I+q+F}}var l=n("../utils"),c=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),m=n("../signature");function g(y,w,x,b){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=x,this.encodeFileName=b,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(g,c),g.prototype.push=function(y){var w=y.meta.percent||0,x=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,c.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:x?(w+100*(x-b-1))/x:100}}))},g.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var w=this.streamFiles&&!y.file.dir;if(w){var x=o(y,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(y){this.accumulate=!1;var w=this.streamFiles&&!y.file.dir,x=o(y,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),w)this.push({data:function(b){return m.DATA_DESCRIPTOR+i(b.crc32,4)+i(b.compressedSize,4)+i(b.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var y=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var x=this.bytesWritten-y,b=function(v,_,T,R,j){var V=l.transformTo("string",j(R));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(v,2)+i(v,2)+i(_,4)+i(T,4)+i(V.length,2)+V}(this.dirRecords.length,x,y,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(y){this._sources.push(y);var w=this;return y.on("data",function(x){w.processChunk(x)}),y.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),y.on("error",function(x){w.error(x)}),this},g.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(y){var w=this._sources;if(!c.prototype.error.call(this,y))return!1;for(var x=0;x<w.length;x++)try{w[x].error(y)}catch{}return!0},g.prototype.lock=function(){c.prototype.lock.call(this);for(var y=this._sources,w=0;w<y.length;w++)y[w].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(l,c,u){var d=new o(c.streamFiles,u,c.platform,c.encodeFileName),m=0;try{l.forEach(function(g,y){m++;var w=function(_,T){var R=_||T,j=i[R];if(!j)throw new Error(R+" is not a valid compression method !");return j}(y.options.compression,c.compression),x=y.options.compressionOptions||c.compressionOptions||{},b=y.dir,v=y.date;y._compressWorker(w,x).withStreamInfo("file",{name:g,dir:b,date:v,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(d)}),d.entriesCount=m}catch(g){d.error(g)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var l in this)typeof this[l]!="function"&&(o[l]=this[l]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,l){return new i().loadAsync(o,l)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),l=n("./utf8"),c=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function m(g){return new o.Promise(function(y,w){var x=g.decompressed.getContentWorker().pipe(new u);x.on("error",function(b){w(b)}).on("end",function(){x.streamInfo.crc32!==g.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(g,y){var w=this;return y=i.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),d.isNode&&d.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",g,!0,y.optimizedBinaryString,y.base64).then(function(x){var b=new c(y);return b.load(x),b}).then(function(x){var b=[o.Promise.resolve(x)],v=x.files;if(y.checkCRC32)for(var _=0;_<v.length;_++)b.push(m(v[_]));return o.Promise.all(b)}).then(function(x){for(var b=x.shift(),v=b.files,_=0;_<v.length;_++){var T=v[_],R=T.fileNameStr,j=i.resolve(T.fileNameStr);w.file(j,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:y.createFolders}),T.dir||(w.file(j).unsafeOriginalName=R)}return b.zipComment.length&&(w.comment=b.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function l(c,u){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(l,o),l.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},l.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(l,c,u){i.call(this,c),this._helper=l;var d=this;l.on("data",function(m,g){d.push(m)||d._helper.pause(),u&&u(g)}).on("error",function(m){d.emit("error",m)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(j,V,S){var I,C=l.getTypeOf(V),A=l.extend(S||{},d);A.date=A.date||new Date,A.compression!==null&&(A.compression=A.compression.toUpperCase()),typeof A.unixPermissions=="string"&&(A.unixPermissions=parseInt(A.unixPermissions,8)),A.unixPermissions&&16384&A.unixPermissions&&(A.dir=!0),A.dosPermissions&&16&A.dosPermissions&&(A.dir=!0),A.dir&&(j=v(j)),A.createFolders&&(I=b(j))&&_.call(this,I,!0);var F=C==="string"&&A.binary===!1&&A.base64===!1;S&&S.binary!==void 0||(A.binary=!F),(V instanceof m&&V.uncompressedSize===0||A.dir||!V||V.length===0)&&(A.base64=!1,A.binary=!0,V="",A.compression="STORE",C="string");var P=null;P=V instanceof m||V instanceof c?V:w.isNode&&w.isStream(V)?new x(j,V):l.prepareContent(j,V,A.binary,A.optimizedBinaryString,A.base64);var D=new g(j,P,A);this.files[j]=D}var o=n("./utf8"),l=n("./utils"),c=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),m=n("./compressedObject"),g=n("./zipObject"),y=n("./generate"),w=n("./nodejsUtils"),x=n("./nodejs/NodejsStreamInputAdapter"),b=function(j){j.slice(-1)==="/"&&(j=j.substring(0,j.length-1));var V=j.lastIndexOf("/");return 0<V?j.substring(0,V):""},v=function(j){return j.slice(-1)!=="/"&&(j+="/"),j},_=function(j,V){return V=V!==void 0?V:d.createFolders,j=v(j),this.files[j]||i.call(this,j,null,{dir:!0,createFolders:V}),this.files[j]};function T(j){return Object.prototype.toString.call(j)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(j){var V,S,I;for(V in this.files)I=this.files[V],(S=V.slice(this.root.length,V.length))&&V.slice(0,this.root.length)===this.root&&j(S,I)},filter:function(j){var V=[];return this.forEach(function(S,I){j(S,I)&&V.push(I)}),V},file:function(j,V,S){if(arguments.length!==1)return j=this.root+j,i.call(this,j,V,S),this;if(T(j)){var I=j;return this.filter(function(A,F){return!F.dir&&I.test(A)})}var C=this.files[this.root+j];return C&&!C.dir?C:null},folder:function(j){if(!j)return this;if(T(j))return this.filter(function(C,A){return A.dir&&j.test(C)});var V=this.root+j,S=_.call(this,V),I=this.clone();return I.root=S.name,I},remove:function(j){j=this.root+j;var V=this.files[j];if(V||(j.slice(-1)!=="/"&&(j+="/"),V=this.files[j]),V&&!V.dir)delete this.files[j];else for(var S=this.filter(function(C,A){return A.name.slice(0,j.length)===j}),I=0;I<S.length;I++)delete this.files[S[I].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(j){var V,S={};try{if((S=l.extend(j||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");l.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var I=S.comment||this.comment||"";V=y.generateWorker(this,S,I)}catch(C){(V=new c("error")).error(C)}return new u(V,S.type||"string",S.mimeType)},generateAsync:function(j,V){return this.generateInternalStream(j).accumulate(V)},generateNodeStream:function(j,V){return(j=j||{}).type||(j.type="nodebuffer"),this.generateInternalStream(j).toNodejsStream(V)}};r.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(l){i.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}n("../utils").inherits(o,i),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),u=l.charCodeAt(1),d=l.charCodeAt(2),m=l.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===c&&this.data[g+1]===u&&this.data[g+2]===d&&this.data[g+3]===m)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),u=l.charCodeAt(1),d=l.charCodeAt(2),m=l.charCodeAt(3),g=this.readData(4);return c===g[0]&&u===g[1]&&d===g[2]&&m===g[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,u=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=l,u},readString:function(l){return i.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(l){i.call(this,l)}n("../utils").inherits(o,i),o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(l){i.call(this,l)}n("../utils").inherits(o,i),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},o.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(l){i.call(this,l)}n("../utils").inherits(o,i),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),l=n("./ArrayReader"),c=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(m){var g=i.getTypeOf(m);return i.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new u(m):o.uint8array?new d(i.transformTo("uint8array",m)):new l(i.transformTo("array",m)):new c(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function l(c){i.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(l,i),l.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},r.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function l(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(l,i),l.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function l(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(l,o),l.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}o.prototype.processChunk.call(this,c)},r.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function l(c){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=i.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}i.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,l){return this._listeners[o].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,l){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,l)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var l=this;return o.on("data",function(c){l.processChunk(c)}),o.on("end",function(){l.end()}),o.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,l){return this.extraStreamInfo[o]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),l=n("./GenericWorker"),c=n("../base64"),u=n("../support"),d=n("../external"),m=null;if(u.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(w,x){return new d.Promise(function(b,v){var _=[],T=w._internalType,R=w._outputType,j=w._mimeType;w.on("data",function(V,S){_.push(V),x&&x(S)}).on("error",function(V){_=[],v(V)}).on("end",function(){try{var V=function(S,I,C){switch(S){case"blob":return i.newBlob(i.transformTo("arraybuffer",I),C);case"base64":return c.encode(I);default:return i.transformTo(S,I)}}(R,function(S,I){var C,A=0,F=null,P=0;for(C=0;C<I.length;C++)P+=I[C].length;switch(S){case"string":return I.join("");case"array":return Array.prototype.concat.apply([],I);case"uint8array":for(F=new Uint8Array(P),C=0;C<I.length;C++)F.set(I[C],A),A+=I[C].length;return F;case"nodebuffer":return Buffer.concat(I);default:throw new Error("concat : unsupported type '"+S+"'")}}(T,_),j);b(V)}catch(S){v(S)}_=[]}).resume()})}function y(w,x,b){var v=x;switch(x){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=x,this._mimeType=b,i.checkSupport(v),this._worker=w.pipe(new o(v)),w.lock()}catch(_){this._worker=new l("error"),this._worker.error(_)}}y.prototype={accumulate:function(w){return g(this,w)},on:function(w,x){var b=this;return w==="data"?this._worker.on(w,function(v){x.call(b,v.data,v.meta)}):this._worker.on(w,function(){i.delay(x,arguments,b)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),l=n("./nodejsUtils"),c=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function m(){c.call(this,"utf-8 decode"),this.leftOver=null}function g(){c.call(this,"utf-8 encode")}s.utf8encode=function(y){return o.nodebuffer?l.newBufferFrom(y,"utf-8"):function(w){var x,b,v,_,T,R=w.length,j=0;for(_=0;_<R;_++)(64512&(b=w.charCodeAt(_)))==55296&&_+1<R&&(64512&(v=w.charCodeAt(_+1)))==56320&&(b=65536+(b-55296<<10)+(v-56320),_++),j+=b<128?1:b<2048?2:b<65536?3:4;for(x=o.uint8array?new Uint8Array(j):new Array(j),_=T=0;T<j;_++)(64512&(b=w.charCodeAt(_)))==55296&&_+1<R&&(64512&(v=w.charCodeAt(_+1)))==56320&&(b=65536+(b-55296<<10)+(v-56320),_++),b<128?x[T++]=b:(b<2048?x[T++]=192|b>>>6:(b<65536?x[T++]=224|b>>>12:(x[T++]=240|b>>>18,x[T++]=128|b>>>12&63),x[T++]=128|b>>>6&63),x[T++]=128|63&b);return x}(y)},s.utf8decode=function(y){return o.nodebuffer?i.transformTo("nodebuffer",y).toString("utf-8"):function(w){var x,b,v,_,T=w.length,R=new Array(2*T);for(x=b=0;x<T;)if((v=w[x++])<128)R[b++]=v;else if(4<(_=u[v]))R[b++]=65533,x+=_-1;else{for(v&=_===2?31:_===3?15:7;1<_&&x<T;)v=v<<6|63&w[x++],_--;1<_?R[b++]=65533:v<65536?R[b++]=v:(v-=65536,R[b++]=55296|v>>10&1023,R[b++]=56320|1023&v)}return R.length!==b&&(R.subarray?R=R.subarray(0,b):R.length=b),i.applyFromCharCode(R)}(y=i.transformTo(o.uint8array?"uint8array":"array",y))},i.inherits(m,c),m.prototype.processChunk=function(y){var w=i.transformTo(o.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=w;(w=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),w.set(x,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var b=function(_,T){var R;for((T=T||_.length)>_.length&&(T=_.length),R=T-1;0<=R&&(192&_[R])==128;)R--;return R<0||R===0?T:R+u[_[R]]>T?R:T}(w),v=w;b!==w.length&&(o.uint8array?(v=w.subarray(0,b),this.leftOver=w.subarray(b,w.length)):(v=w.slice(0,b),this.leftOver=w.slice(b,w.length))),this.push({data:s.utf8decode(v),meta:y.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=m,i.inherits(g,c),g.prototype.processChunk=function(y){this.push({data:s.utf8encode(y.data),meta:y.meta})},s.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),l=n("./nodejsUtils"),c=n("./external");function u(x){return x}function d(x,b){for(var v=0;v<x.length;++v)b[v]=255&x.charCodeAt(v);return b}n("setimmediate"),s.newBlob=function(x,b){s.checkSupport("blob");try{return new Blob([x],{type:b})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(x),v.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(x,b,v){var _=[],T=0,R=x.length;if(R<=v)return String.fromCharCode.apply(null,x);for(;T<R;)b==="array"||b==="nodebuffer"?_.push(String.fromCharCode.apply(null,x.slice(T,Math.min(T+v,R)))):_.push(String.fromCharCode.apply(null,x.subarray(T,Math.min(T+v,R)))),T+=v;return _.join("")},stringifyByChar:function(x){for(var b="",v=0;v<x.length;v++)b+=String.fromCharCode(x[v]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function g(x){var b=65536,v=s.getTypeOf(x),_=!0;if(v==="uint8array"?_=m.applyCanBeUsed.uint8array:v==="nodebuffer"&&(_=m.applyCanBeUsed.nodebuffer),_)for(;1<b;)try{return m.stringifyByChunk(x,v,b)}catch{b=Math.floor(b/2)}return m.stringifyByChar(x)}function y(x,b){for(var v=0;v<x.length;v++)b[v]=x[v];return b}s.applyFromCharCode=g;var w={};w.string={string:u,array:function(x){return d(x,new Array(x.length))},arraybuffer:function(x){return w.string.uint8array(x).buffer},uint8array:function(x){return d(x,new Uint8Array(x.length))},nodebuffer:function(x){return d(x,l.allocBuffer(x.length))}},w.array={string:g,array:u,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return l.newBufferFrom(x)}},w.arraybuffer={string:function(x){return g(new Uint8Array(x))},array:function(x){return y(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:u,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return l.newBufferFrom(new Uint8Array(x))}},w.uint8array={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:u,nodebuffer:function(x){return l.newBufferFrom(x)}},w.nodebuffer={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return w.nodebuffer.uint8array(x).buffer},uint8array:function(x){return y(x,new Uint8Array(x.length))},nodebuffer:u},s.transformTo=function(x,b){if(b=b||"",!x)return b;s.checkSupport(x);var v=s.getTypeOf(b);return w[v][x](b)},s.resolve=function(x){for(var b=x.split("/"),v=[],_=0;_<b.length;_++){var T=b[_];T==="."||T===""&&_!==0&&_!==b.length-1||(T===".."?v.pop():v.push(T))}return v.join("/")},s.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":i.nodebuffer&&l.isBuffer(x)?"nodebuffer":i.uint8array&&x instanceof Uint8Array?"uint8array":i.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(x){if(!i[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(x){var b,v,_="";for(v=0;v<(x||"").length;v++)_+="\\x"+((b=x.charCodeAt(v))<16?"0":"")+b.toString(16).toUpperCase();return _},s.delay=function(x,b,v){setImmediate(function(){x.apply(v||null,b||[])})},s.inherits=function(x,b){function v(){}v.prototype=b.prototype,x.prototype=new v},s.extend=function(){var x,b,v={};for(x=0;x<arguments.length;x++)for(b in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],b)&&v[b]===void 0&&(v[b]=arguments[x][b]);return v},s.prepareContent=function(x,b,v,_,T){return c.Promise.resolve(b).then(function(R){return i.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new c.Promise(function(j,V){var S=new FileReader;S.onload=function(I){j(I.target.result)},S.onerror=function(I){V(I.target.error)},S.readAsArrayBuffer(R)}):R}).then(function(R){var j=s.getTypeOf(R);return j?(j==="arraybuffer"?R=s.transformTo("uint8array",R):j==="string"&&(T?R=o.decode(R):v&&_!==!0&&(R=function(V){return d(V,i.uint8array?new Uint8Array(V.length):new Array(V.length))}(R))),R):c.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),l=n("./signature"),c=n("./zipEntry"),u=n("./support");function d(m){this.files=[],this.loadOptions=m}d.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(m)+")")}},isSignature:function(m,g){var y=this.reader.index;this.reader.setIndex(m);var w=this.reader.readString(4)===g;return this.reader.setIndex(y),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),g=u.uint8array?"uint8array":"array",y=o.transformTo(g,m);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,g,y,w=this.zip64EndOfCentralSize-44;0<w;)m=this.reader.readInt(2),g=this.reader.readInt(4),y=this.reader.readData(g),this.zip64ExtensibleData[m]={id:m,length:g,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,g;for(m=0;m<this.files.length;m++)g=this.files[m],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(m=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var g=m;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var w=g-y;if(0<w)this.isSignature(g,l.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),l=n("./compressedObject"),c=n("./crc32"),u=n("./utf8"),d=n("./compressions"),m=n("./support");function g(y,w){this.options=y,this.loadOptions=w}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var w,x;if(y.skip(22),this.fileNameLength=y.readInt(2),x=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(b){for(var v in d)if(Object.prototype.hasOwnProperty.call(d,v)&&d[v].magic===b)return d[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,w,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var w=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(w),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var w,x,b,v=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<v;)w=y.readInt(2),x=y.readInt(2),b=y.readData(x),this.extraFields[w]={id:w,length:x,value:b};y.setIndex(v)},handleUTF8:function(){var y=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var x=o.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var v=o.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var w=i(y.value);return w.readInt(1)!==1||c(this.fileName)!==w.readInt(4)?null:u.utf8decode(w.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var w=i(y.value);return w.readInt(1)!==1||c(this.fileComment)!==w.readInt(4)?null:u.utf8decode(w.readData(y.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(w,x,b){this.name=w,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=x,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=n("./stream/StreamHelper"),l=n("./stream/DataWorker"),c=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(w){var x=null,b="string";try{if(!w)throw new Error("No output type specified.");var v=(b=w.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),x=this._decompressWorker();var _=!this._dataBinary;_&&!v&&(x=x.pipe(new c.Utf8EncodeWorker)),!_&&v&&(x=x.pipe(new c.Utf8DecodeWorker))}catch(T){(x=new d("error")).error(T)}return new o(x,b,"")},async:function(w,x){return this.internalStream(w).accumulate(x)},nodeStream:function(w,x){return this.internalStream(w||"nodebuffer").toNodejsStream(x)},_compressWorker:function(w,x){if(this._data instanceof u&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(b,w,x)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new l(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<m.length;y++)i.prototype[m[y]]=g;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,l,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var u=0,d=new c(w),m=i.document.createTextNode("");d.observe(m,{characterData:!0}),o=function(){m.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var x=i.document.createElement("script");x.onreadystatechange=function(){w(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},i.document.documentElement.appendChild(x)}:function(){setTimeout(w,0)};else{var g=new i.MessageChannel;g.port1.onmessage=w,o=function(){g.port2.postMessage(0)}}var y=[];function w(){var x,b;l=!0;for(var v=y.length;v;){for(b=y,y=[],x=-1;++x<v;)b[x]();v=y.length}l=!1}r.exports=function(x){y.push(x)!==1||l||o()}}).call(this,typeof ds<"u"?ds:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var l={},c=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function m(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,v!==o&&x(this,v)}function g(v,_,T){this.promise=v,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function y(v,_,T){i(function(){var R;try{R=_(T)}catch(j){return l.reject(v,j)}R===v?l.reject(v,new TypeError("Cannot resolve promise with itself")):l.resolve(v,R)})}function w(v){var _=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof _=="function")return function(){_.apply(v,arguments)}}function x(v,_){var T=!1;function R(S){T||(T=!0,l.reject(v,S))}function j(S){T||(T=!0,l.resolve(v,S))}var V=b(function(){_(j,R)});V.status==="error"&&R(V.value)}function b(v,_){var T={};try{T.value=v(_),T.status="success"}catch(R){T.status="error",T.value=R}return T}(r.exports=m).prototype.finally=function(v){if(typeof v!="function")return this;var _=this.constructor;return this.then(function(T){return _.resolve(v()).then(function(){return T})},function(T){return _.resolve(v()).then(function(){throw T})})},m.prototype.catch=function(v){return this.then(null,v)},m.prototype.then=function(v,_){if(typeof v!="function"&&this.state===u||typeof _!="function"&&this.state===c)return this;var T=new this.constructor(o);return this.state!==d?y(T,this.state===u?v:_,this.outcome):this.queue.push(new g(T,v,_)),T},g.prototype.callFulfilled=function(v){l.resolve(this.promise,v)},g.prototype.otherCallFulfilled=function(v){y(this.promise,this.onFulfilled,v)},g.prototype.callRejected=function(v){l.reject(this.promise,v)},g.prototype.otherCallRejected=function(v){y(this.promise,this.onRejected,v)},l.resolve=function(v,_){var T=b(w,_);if(T.status==="error")return l.reject(v,T.value);var R=T.value;if(R)x(v,R);else{v.state=u,v.outcome=_;for(var j=-1,V=v.queue.length;++j<V;)v.queue[j].callFulfilled(_)}return v},l.reject=function(v,_){v.state=c,v.outcome=_;for(var T=-1,R=v.queue.length;++T<R;)v.queue[T].callRejected(_);return v},m.resolve=function(v){return v instanceof this?v:l.resolve(new this(o),v)},m.reject=function(v){var _=new this(o);return l.reject(_,v)},m.all=function(v){var _=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=v.length,R=!1;if(!T)return this.resolve([]);for(var j=new Array(T),V=0,S=-1,I=new this(o);++S<T;)C(v[S],S);return I;function C(A,F){_.resolve(A).then(function(P){j[F]=P,++V!==T||R||(R=!0,l.resolve(I,j))},function(P){R||(R=!0,l.reject(I,P))})}},m.race=function(v){var _=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=v.length,R=!1;if(!T)return this.resolve([]);for(var j=-1,V=new this(o);++j<T;)S=v[j],_.resolve(S).then(function(I){R||(R=!0,l.resolve(V,I))},function(I){R||(R=!0,l.reject(V,I))});var S;return V}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),l=n("./utils/strings"),c=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,m=0,g=-1,y=0,w=8;function x(v){if(!(this instanceof x))return new x(v);this.options=o.assign({level:g,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},v||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var T=i.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(T!==m)throw new Error(c[T]);if(_.header&&i.deflateSetHeader(this.strm,_.header),_.dictionary){var R;if(R=typeof _.dictionary=="string"?l.string2buf(_.dictionary):d.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(T=i.deflateSetDictionary(this.strm,R))!==m)throw new Error(c[T]);this._dict_set=!0}}function b(v,_){var T=new x(_);if(T.push(v,!0),T.err)throw T.msg||c[T.err];return T.result}x.prototype.push=function(v,_){var T,R,j=this.strm,V=this.options.chunkSize;if(this.ended)return!1;R=_===~~_?_:_===!0?4:0,typeof v=="string"?j.input=l.string2buf(v):d.call(v)==="[object ArrayBuffer]"?j.input=new Uint8Array(v):j.input=v,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new o.Buf8(V),j.next_out=0,j.avail_out=V),(T=i.deflate(j,R))!==1&&T!==m)return this.onEnd(T),!(this.ended=!0);j.avail_out!==0&&(j.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(j.output,j.next_out))):this.onData(o.shrinkBuf(j.output,j.next_out)))}while((0<j.avail_in||j.avail_out===0)&&T!==1);return R===4?(T=i.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===m):R!==2||(this.onEnd(m),!(j.avail_out=0))},x.prototype.onData=function(v){this.chunks.push(v)},x.prototype.onEnd=function(v){v===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Deflate=x,s.deflate=b,s.deflateRaw=function(v,_){return(_=_||{}).raw=!0,b(v,_)},s.gzip=function(v,_){return(_=_||{}).gzip=!0,b(v,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),l=n("./utils/strings"),c=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),m=n("./zlib/gzheader"),g=Object.prototype.toString;function y(x){if(!(this instanceof y))return new y(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||x&&x.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var v=i.inflateInit2(this.strm,b.windowBits);if(v!==c.Z_OK)throw new Error(u[v]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function w(x,b){var v=new y(b);if(v.push(x,!0),v.err)throw v.msg||u[v.err];return v.result}y.prototype.push=function(x,b){var v,_,T,R,j,V,S=this.strm,I=this.options.chunkSize,C=this.options.dictionary,A=!1;if(this.ended)return!1;_=b===~~b?b:b===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof x=="string"?S.input=l.binstring2buf(x):g.call(x)==="[object ArrayBuffer]"?S.input=new Uint8Array(x):S.input=x,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new o.Buf8(I),S.next_out=0,S.avail_out=I),(v=i.inflate(S,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&C&&(V=typeof C=="string"?l.string2buf(C):g.call(C)==="[object ArrayBuffer]"?new Uint8Array(C):C,v=i.inflateSetDictionary(this.strm,V)),v===c.Z_BUF_ERROR&&A===!0&&(v=c.Z_OK,A=!1),v!==c.Z_STREAM_END&&v!==c.Z_OK)return this.onEnd(v),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&v!==c.Z_STREAM_END&&(S.avail_in!==0||_!==c.Z_FINISH&&_!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=l.utf8border(S.output,S.next_out),R=S.next_out-T,j=l.buf2string(S.output,T),S.next_out=R,S.avail_out=I-R,R&&o.arraySet(S.output,S.output,T,R,0),this.onData(j)):this.onData(o.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(A=!0)}while((0<S.avail_in||S.avail_out===0)&&v!==c.Z_STREAM_END);return v===c.Z_STREAM_END&&(_=c.Z_FINISH),_===c.Z_FINISH?(v=i.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===c.Z_OK):_!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(S.avail_out=0))},y.prototype.onData=function(x){this.chunks.push(x)},y.prototype.onEnd=function(x){x===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},s.Inflate=y,s.inflate=w,s.inflateRaw=function(x,b){return(b=b||{}).raw=!0,w(x,b)},s.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var m in d)d.hasOwnProperty(m)&&(c[m]=d[m])}}return c},s.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var o={arraySet:function(c,u,d,m,g){if(u.subarray&&c.subarray)c.set(u.subarray(d,d+m),g);else for(var y=0;y<m;y++)c[g+y]=u[d+y]},flattenChunks:function(c){var u,d,m,g,y,w;for(u=m=0,d=c.length;u<d;u++)m+=c[u].length;for(w=new Uint8Array(m),u=g=0,d=c.length;u<d;u++)y=c[u],w.set(y,g),g+=y.length;return w}},l={arraySet:function(c,u,d,m,g){for(var y=0;y<m;y++)c[g+y]=u[d+y]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,l))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new i.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(m,g){if(g<65537&&(m.subarray&&l||!m.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(m,g));for(var y="",w=0;w<g;w++)y+=String.fromCharCode(m[w]);return y}c[254]=c[254]=1,s.string2buf=function(m){var g,y,w,x,b,v=m.length,_=0;for(x=0;x<v;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(w=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),x++),_+=y<128?1:y<2048?2:y<65536?3:4;for(g=new i.Buf8(_),x=b=0;b<_;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(w=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),x++),y<128?g[b++]=y:(y<2048?g[b++]=192|y>>>6:(y<65536?g[b++]=224|y>>>12:(g[b++]=240|y>>>18,g[b++]=128|y>>>12&63),g[b++]=128|y>>>6&63),g[b++]=128|63&y);return g},s.buf2binstring=function(m){return d(m,m.length)},s.binstring2buf=function(m){for(var g=new i.Buf8(m.length),y=0,w=g.length;y<w;y++)g[y]=m.charCodeAt(y);return g},s.buf2string=function(m,g){var y,w,x,b,v=g||m.length,_=new Array(2*v);for(y=w=0;y<v;)if((x=m[y++])<128)_[w++]=x;else if(4<(b=c[x]))_[w++]=65533,y+=b-1;else{for(x&=b===2?31:b===3?15:7;1<b&&y<v;)x=x<<6|63&m[y++],b--;1<b?_[w++]=65533:x<65536?_[w++]=x:(x-=65536,_[w++]=55296|x>>10&1023,_[w++]=56320|1023&x)}return d(_,w)},s.utf8border=function(m,g){var y;for((g=g||m.length)>m.length&&(g=m.length),y=g-1;0<=y&&(192&m[y])==128;)y--;return y<0||y===0?g:y+c[m[y]]>g?y:g}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,l,c){for(var u=65535&i|0,d=i>>>16&65535|0,m=0;l!==0;){for(l-=m=2e3<l?2e3:l;d=d+(u=u+o[c++]|0)|0,--m;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();r.exports=function(o,l,c,u){var d=i,m=u+c;o^=-1;for(var g=u;g<m;g++)o=o>>>8^d[255&(o^l[g])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),l=n("./trees"),c=n("./adler32"),u=n("./crc32"),d=n("./messages"),m=0,g=4,y=0,w=-2,x=-1,b=4,v=2,_=8,T=9,R=286,j=30,V=19,S=2*R+1,I=15,C=3,A=258,F=A+C+1,P=42,D=113,M=1,q=2,pe=3,ne=4;function ee(N,ae){return N.msg=d[ae],ae}function Q(N){return(N<<1)-(4<N?9:0)}function ue(N){for(var ae=N.length;0<=--ae;)N[ae]=0}function $(N){var ae=N.state,X=ae.pending;X>N.avail_out&&(X=N.avail_out),X!==0&&(o.arraySet(N.output,ae.pending_buf,ae.pending_out,X,N.next_out),N.next_out+=X,ae.pending_out+=X,N.total_out+=X,N.avail_out-=X,ae.pending-=X,ae.pending===0&&(ae.pending_out=0))}function B(N,ae){l._tr_flush_block(N,0<=N.block_start?N.block_start:-1,N.strstart-N.block_start,ae),N.block_start=N.strstart,$(N.strm)}function Z(N,ae){N.pending_buf[N.pending++]=ae}function he(N,ae){N.pending_buf[N.pending++]=ae>>>8&255,N.pending_buf[N.pending++]=255&ae}function ce(N,ae){var X,z,O=N.max_chain_length,H=N.strstart,oe=N.prev_length,le=N.nice_match,J=N.strstart>N.w_size-F?N.strstart-(N.w_size-F):0,me=N.window,_e=N.w_mask,K=N.prev,re=N.strstart+A,be=me[H+oe-1],Ne=me[H+oe];N.prev_length>=N.good_match&&(O>>=2),le>N.lookahead&&(le=N.lookahead);do if(me[(X=ae)+oe]===Ne&&me[X+oe-1]===be&&me[X]===me[H]&&me[++X]===me[H+1]){H+=2,X++;do;while(me[++H]===me[++X]&&me[++H]===me[++X]&&me[++H]===me[++X]&&me[++H]===me[++X]&&me[++H]===me[++X]&&me[++H]===me[++X]&&me[++H]===me[++X]&&me[++H]===me[++X]&&H<re);if(z=A-(re-H),H=re-A,oe<z){if(N.match_start=ae,le<=(oe=z))break;be=me[H+oe-1],Ne=me[H+oe]}}while((ae=K[ae&_e])>J&&--O!=0);return oe<=N.lookahead?oe:N.lookahead}function Pe(N){var ae,X,z,O,H,oe,le,J,me,_e,K=N.w_size;do{if(O=N.window_size-N.lookahead-N.strstart,N.strstart>=K+(K-F)){for(o.arraySet(N.window,N.window,K,K,0),N.match_start-=K,N.strstart-=K,N.block_start-=K,ae=X=N.hash_size;z=N.head[--ae],N.head[ae]=K<=z?z-K:0,--X;);for(ae=X=K;z=N.prev[--ae],N.prev[ae]=K<=z?z-K:0,--X;);O+=K}if(N.strm.avail_in===0)break;if(oe=N.strm,le=N.window,J=N.strstart+N.lookahead,me=O,_e=void 0,_e=oe.avail_in,me<_e&&(_e=me),X=_e===0?0:(oe.avail_in-=_e,o.arraySet(le,oe.input,oe.next_in,_e,J),oe.state.wrap===1?oe.adler=c(oe.adler,le,_e,J):oe.state.wrap===2&&(oe.adler=u(oe.adler,le,_e,J)),oe.next_in+=_e,oe.total_in+=_e,_e),N.lookahead+=X,N.lookahead+N.insert>=C)for(H=N.strstart-N.insert,N.ins_h=N.window[H],N.ins_h=(N.ins_h<<N.hash_shift^N.window[H+1])&N.hash_mask;N.insert&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[H+C-1])&N.hash_mask,N.prev[H&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=H,H++,N.insert--,!(N.lookahead+N.insert<C)););}while(N.lookahead<F&&N.strm.avail_in!==0)}function xe(N,ae){for(var X,z;;){if(N.lookahead<F){if(Pe(N),N.lookahead<F&&ae===m)return M;if(N.lookahead===0)break}if(X=0,N.lookahead>=C&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+C-1])&N.hash_mask,X=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),X!==0&&N.strstart-X<=N.w_size-F&&(N.match_length=ce(N,X)),N.match_length>=C)if(z=l._tr_tally(N,N.strstart-N.match_start,N.match_length-C),N.lookahead-=N.match_length,N.match_length<=N.max_lazy_match&&N.lookahead>=C){for(N.match_length--;N.strstart++,N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+C-1])&N.hash_mask,X=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart,--N.match_length!=0;);N.strstart++}else N.strstart+=N.match_length,N.match_length=0,N.ins_h=N.window[N.strstart],N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+1])&N.hash_mask;else z=l._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++;if(z&&(B(N,!1),N.strm.avail_out===0))return M}return N.insert=N.strstart<C-1?N.strstart:C-1,ae===g?(B(N,!0),N.strm.avail_out===0?pe:ne):N.last_lit&&(B(N,!1),N.strm.avail_out===0)?M:q}function Se(N,ae){for(var X,z,O;;){if(N.lookahead<F){if(Pe(N),N.lookahead<F&&ae===m)return M;if(N.lookahead===0)break}if(X=0,N.lookahead>=C&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+C-1])&N.hash_mask,X=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),N.prev_length=N.match_length,N.prev_match=N.match_start,N.match_length=C-1,X!==0&&N.prev_length<N.max_lazy_match&&N.strstart-X<=N.w_size-F&&(N.match_length=ce(N,X),N.match_length<=5&&(N.strategy===1||N.match_length===C&&4096<N.strstart-N.match_start)&&(N.match_length=C-1)),N.prev_length>=C&&N.match_length<=N.prev_length){for(O=N.strstart+N.lookahead-C,z=l._tr_tally(N,N.strstart-1-N.prev_match,N.prev_length-C),N.lookahead-=N.prev_length-1,N.prev_length-=2;++N.strstart<=O&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+C-1])&N.hash_mask,X=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),--N.prev_length!=0;);if(N.match_available=0,N.match_length=C-1,N.strstart++,z&&(B(N,!1),N.strm.avail_out===0))return M}else if(N.match_available){if((z=l._tr_tally(N,0,N.window[N.strstart-1]))&&B(N,!1),N.strstart++,N.lookahead--,N.strm.avail_out===0)return M}else N.match_available=1,N.strstart++,N.lookahead--}return N.match_available&&(z=l._tr_tally(N,0,N.window[N.strstart-1]),N.match_available=0),N.insert=N.strstart<C-1?N.strstart:C-1,ae===g?(B(N,!0),N.strm.avail_out===0?pe:ne):N.last_lit&&(B(N,!1),N.strm.avail_out===0)?M:q}function Ce(N,ae,X,z,O){this.good_length=N,this.max_lazy=ae,this.nice_length=X,this.max_chain=z,this.func=O}function We(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*S),this.dyn_dtree=new o.Buf16(2*(2*j+1)),this.bl_tree=new o.Buf16(2*(2*V+1)),ue(this.dyn_ltree),ue(this.dyn_dtree),ue(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(I+1),this.heap=new o.Buf16(2*R+1),ue(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*R+1),ue(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Oe(N){var ae;return N&&N.state?(N.total_in=N.total_out=0,N.data_type=v,(ae=N.state).pending=0,ae.pending_out=0,ae.wrap<0&&(ae.wrap=-ae.wrap),ae.status=ae.wrap?P:D,N.adler=ae.wrap===2?0:1,ae.last_flush=m,l._tr_init(ae),y):ee(N,w)}function Ze(N){var ae=Oe(N);return ae===y&&function(X){X.window_size=2*X.w_size,ue(X.head),X.max_lazy_match=i[X.level].max_lazy,X.good_match=i[X.level].good_length,X.nice_match=i[X.level].nice_length,X.max_chain_length=i[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=C-1,X.match_available=0,X.ins_h=0}(N.state),ae}function ot(N,ae,X,z,O,H){if(!N)return w;var oe=1;if(ae===x&&(ae=6),z<0?(oe=0,z=-z):15<z&&(oe=2,z-=16),O<1||T<O||X!==_||z<8||15<z||ae<0||9<ae||H<0||b<H)return ee(N,w);z===8&&(z=9);var le=new We;return(N.state=le).strm=N,le.wrap=oe,le.gzhead=null,le.w_bits=z,le.w_size=1<<le.w_bits,le.w_mask=le.w_size-1,le.hash_bits=O+7,le.hash_size=1<<le.hash_bits,le.hash_mask=le.hash_size-1,le.hash_shift=~~((le.hash_bits+C-1)/C),le.window=new o.Buf8(2*le.w_size),le.head=new o.Buf16(le.hash_size),le.prev=new o.Buf16(le.w_size),le.lit_bufsize=1<<O+6,le.pending_buf_size=4*le.lit_bufsize,le.pending_buf=new o.Buf8(le.pending_buf_size),le.d_buf=1*le.lit_bufsize,le.l_buf=3*le.lit_bufsize,le.level=ae,le.strategy=H,le.method=X,Ze(N)}i=[new Ce(0,0,0,0,function(N,ae){var X=65535;for(X>N.pending_buf_size-5&&(X=N.pending_buf_size-5);;){if(N.lookahead<=1){if(Pe(N),N.lookahead===0&&ae===m)return M;if(N.lookahead===0)break}N.strstart+=N.lookahead,N.lookahead=0;var z=N.block_start+X;if((N.strstart===0||N.strstart>=z)&&(N.lookahead=N.strstart-z,N.strstart=z,B(N,!1),N.strm.avail_out===0)||N.strstart-N.block_start>=N.w_size-F&&(B(N,!1),N.strm.avail_out===0))return M}return N.insert=0,ae===g?(B(N,!0),N.strm.avail_out===0?pe:ne):(N.strstart>N.block_start&&(B(N,!1),N.strm.avail_out),M)}),new Ce(4,4,8,4,xe),new Ce(4,5,16,8,xe),new Ce(4,6,32,32,xe),new Ce(4,4,16,16,Se),new Ce(8,16,32,32,Se),new Ce(8,16,128,128,Se),new Ce(8,32,128,256,Se),new Ce(32,128,258,1024,Se),new Ce(32,258,258,4096,Se)],s.deflateInit=function(N,ae){return ot(N,ae,_,15,8,0)},s.deflateInit2=ot,s.deflateReset=Ze,s.deflateResetKeep=Oe,s.deflateSetHeader=function(N,ae){return N&&N.state?N.state.wrap!==2?w:(N.state.gzhead=ae,y):w},s.deflate=function(N,ae){var X,z,O,H;if(!N||!N.state||5<ae||ae<0)return N?ee(N,w):w;if(z=N.state,!N.output||!N.input&&N.avail_in!==0||z.status===666&&ae!==g)return ee(N,N.avail_out===0?-5:w);if(z.strm=N,X=z.last_flush,z.last_flush=ae,z.status===P)if(z.wrap===2)N.adler=0,Z(z,31),Z(z,139),Z(z,8),z.gzhead?(Z(z,(z.gzhead.text?1:0)+(z.gzhead.hcrc?2:0)+(z.gzhead.extra?4:0)+(z.gzhead.name?8:0)+(z.gzhead.comment?16:0)),Z(z,255&z.gzhead.time),Z(z,z.gzhead.time>>8&255),Z(z,z.gzhead.time>>16&255),Z(z,z.gzhead.time>>24&255),Z(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),Z(z,255&z.gzhead.os),z.gzhead.extra&&z.gzhead.extra.length&&(Z(z,255&z.gzhead.extra.length),Z(z,z.gzhead.extra.length>>8&255)),z.gzhead.hcrc&&(N.adler=u(N.adler,z.pending_buf,z.pending,0)),z.gzindex=0,z.status=69):(Z(z,0),Z(z,0),Z(z,0),Z(z,0),Z(z,0),Z(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),Z(z,3),z.status=D);else{var oe=_+(z.w_bits-8<<4)<<8;oe|=(2<=z.strategy||z.level<2?0:z.level<6?1:z.level===6?2:3)<<6,z.strstart!==0&&(oe|=32),oe+=31-oe%31,z.status=D,he(z,oe),z.strstart!==0&&(he(z,N.adler>>>16),he(z,65535&N.adler)),N.adler=1}if(z.status===69)if(z.gzhead.extra){for(O=z.pending;z.gzindex<(65535&z.gzhead.extra.length)&&(z.pending!==z.pending_buf_size||(z.gzhead.hcrc&&z.pending>O&&(N.adler=u(N.adler,z.pending_buf,z.pending-O,O)),$(N),O=z.pending,z.pending!==z.pending_buf_size));)Z(z,255&z.gzhead.extra[z.gzindex]),z.gzindex++;z.gzhead.hcrc&&z.pending>O&&(N.adler=u(N.adler,z.pending_buf,z.pending-O,O)),z.gzindex===z.gzhead.extra.length&&(z.gzindex=0,z.status=73)}else z.status=73;if(z.status===73)if(z.gzhead.name){O=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>O&&(N.adler=u(N.adler,z.pending_buf,z.pending-O,O)),$(N),O=z.pending,z.pending===z.pending_buf_size)){H=1;break}H=z.gzindex<z.gzhead.name.length?255&z.gzhead.name.charCodeAt(z.gzindex++):0,Z(z,H)}while(H!==0);z.gzhead.hcrc&&z.pending>O&&(N.adler=u(N.adler,z.pending_buf,z.pending-O,O)),H===0&&(z.gzindex=0,z.status=91)}else z.status=91;if(z.status===91)if(z.gzhead.comment){O=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>O&&(N.adler=u(N.adler,z.pending_buf,z.pending-O,O)),$(N),O=z.pending,z.pending===z.pending_buf_size)){H=1;break}H=z.gzindex<z.gzhead.comment.length?255&z.gzhead.comment.charCodeAt(z.gzindex++):0,Z(z,H)}while(H!==0);z.gzhead.hcrc&&z.pending>O&&(N.adler=u(N.adler,z.pending_buf,z.pending-O,O)),H===0&&(z.status=103)}else z.status=103;if(z.status===103&&(z.gzhead.hcrc?(z.pending+2>z.pending_buf_size&&$(N),z.pending+2<=z.pending_buf_size&&(Z(z,255&N.adler),Z(z,N.adler>>8&255),N.adler=0,z.status=D)):z.status=D),z.pending!==0){if($(N),N.avail_out===0)return z.last_flush=-1,y}else if(N.avail_in===0&&Q(ae)<=Q(X)&&ae!==g)return ee(N,-5);if(z.status===666&&N.avail_in!==0)return ee(N,-5);if(N.avail_in!==0||z.lookahead!==0||ae!==m&&z.status!==666){var le=z.strategy===2?function(J,me){for(var _e;;){if(J.lookahead===0&&(Pe(J),J.lookahead===0)){if(me===m)return M;break}if(J.match_length=0,_e=l._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++,_e&&(B(J,!1),J.strm.avail_out===0))return M}return J.insert=0,me===g?(B(J,!0),J.strm.avail_out===0?pe:ne):J.last_lit&&(B(J,!1),J.strm.avail_out===0)?M:q}(z,ae):z.strategy===3?function(J,me){for(var _e,K,re,be,Ne=J.window;;){if(J.lookahead<=A){if(Pe(J),J.lookahead<=A&&me===m)return M;if(J.lookahead===0)break}if(J.match_length=0,J.lookahead>=C&&0<J.strstart&&(K=Ne[re=J.strstart-1])===Ne[++re]&&K===Ne[++re]&&K===Ne[++re]){be=J.strstart+A;do;while(K===Ne[++re]&&K===Ne[++re]&&K===Ne[++re]&&K===Ne[++re]&&K===Ne[++re]&&K===Ne[++re]&&K===Ne[++re]&&K===Ne[++re]&&re<be);J.match_length=A-(be-re),J.match_length>J.lookahead&&(J.match_length=J.lookahead)}if(J.match_length>=C?(_e=l._tr_tally(J,1,J.match_length-C),J.lookahead-=J.match_length,J.strstart+=J.match_length,J.match_length=0):(_e=l._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++),_e&&(B(J,!1),J.strm.avail_out===0))return M}return J.insert=0,me===g?(B(J,!0),J.strm.avail_out===0?pe:ne):J.last_lit&&(B(J,!1),J.strm.avail_out===0)?M:q}(z,ae):i[z.level].func(z,ae);if(le!==pe&&le!==ne||(z.status=666),le===M||le===pe)return N.avail_out===0&&(z.last_flush=-1),y;if(le===q&&(ae===1?l._tr_align(z):ae!==5&&(l._tr_stored_block(z,0,0,!1),ae===3&&(ue(z.head),z.lookahead===0&&(z.strstart=0,z.block_start=0,z.insert=0))),$(N),N.avail_out===0))return z.last_flush=-1,y}return ae!==g?y:z.wrap<=0?1:(z.wrap===2?(Z(z,255&N.adler),Z(z,N.adler>>8&255),Z(z,N.adler>>16&255),Z(z,N.adler>>24&255),Z(z,255&N.total_in),Z(z,N.total_in>>8&255),Z(z,N.total_in>>16&255),Z(z,N.total_in>>24&255)):(he(z,N.adler>>>16),he(z,65535&N.adler)),$(N),0<z.wrap&&(z.wrap=-z.wrap),z.pending!==0?y:1)},s.deflateEnd=function(N){var ae;return N&&N.state?(ae=N.state.status)!==P&&ae!==69&&ae!==73&&ae!==91&&ae!==103&&ae!==D&&ae!==666?ee(N,w):(N.state=null,ae===D?ee(N,-3):y):w},s.deflateSetDictionary=function(N,ae){var X,z,O,H,oe,le,J,me,_e=ae.length;if(!N||!N.state||(H=(X=N.state).wrap)===2||H===1&&X.status!==P||X.lookahead)return w;for(H===1&&(N.adler=c(N.adler,ae,_e,0)),X.wrap=0,_e>=X.w_size&&(H===0&&(ue(X.head),X.strstart=0,X.block_start=0,X.insert=0),me=new o.Buf8(X.w_size),o.arraySet(me,ae,_e-X.w_size,X.w_size,0),ae=me,_e=X.w_size),oe=N.avail_in,le=N.next_in,J=N.input,N.avail_in=_e,N.next_in=0,N.input=ae,Pe(X);X.lookahead>=C;){for(z=X.strstart,O=X.lookahead-(C-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[z+C-1])&X.hash_mask,X.prev[z&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=z,z++,--O;);X.strstart=z,X.lookahead=C-1,Pe(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=C-1,X.match_available=0,N.next_in=le,N.input=J,N.avail_in=oe,X.wrap=H,y},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var l,c,u,d,m,g,y,w,x,b,v,_,T,R,j,V,S,I,C,A,F,P,D,M,q;l=i.state,c=i.next_in,M=i.input,u=c+(i.avail_in-5),d=i.next_out,q=i.output,m=d-(o-i.avail_out),g=d+(i.avail_out-257),y=l.dmax,w=l.wsize,x=l.whave,b=l.wnext,v=l.window,_=l.hold,T=l.bits,R=l.lencode,j=l.distcode,V=(1<<l.lenbits)-1,S=(1<<l.distbits)-1;e:do{T<15&&(_+=M[c++]<<T,T+=8,_+=M[c++]<<T,T+=8),I=R[_&V];t:for(;;){if(_>>>=C=I>>>24,T-=C,(C=I>>>16&255)===0)q[d++]=65535&I;else{if(!(16&C)){if(!(64&C)){I=R[(65535&I)+(_&(1<<C)-1)];continue t}if(32&C){l.mode=12;break e}i.msg="invalid literal/length code",l.mode=30;break e}A=65535&I,(C&=15)&&(T<C&&(_+=M[c++]<<T,T+=8),A+=_&(1<<C)-1,_>>>=C,T-=C),T<15&&(_+=M[c++]<<T,T+=8,_+=M[c++]<<T,T+=8),I=j[_&S];n:for(;;){if(_>>>=C=I>>>24,T-=C,!(16&(C=I>>>16&255))){if(!(64&C)){I=j[(65535&I)+(_&(1<<C)-1)];continue n}i.msg="invalid distance code",l.mode=30;break e}if(F=65535&I,T<(C&=15)&&(_+=M[c++]<<T,(T+=8)<C&&(_+=M[c++]<<T,T+=8)),y<(F+=_&(1<<C)-1)){i.msg="invalid distance too far back",l.mode=30;break e}if(_>>>=C,T-=C,(C=d-m)<F){if(x<(C=F-C)&&l.sane){i.msg="invalid distance too far back",l.mode=30;break e}if(D=v,(P=0)===b){if(P+=w-C,C<A){for(A-=C;q[d++]=v[P++],--C;);P=d-F,D=q}}else if(b<C){if(P+=w+b-C,(C-=b)<A){for(A-=C;q[d++]=v[P++],--C;);if(P=0,b<A){for(A-=C=b;q[d++]=v[P++],--C;);P=d-F,D=q}}}else if(P+=b-C,C<A){for(A-=C;q[d++]=v[P++],--C;);P=d-F,D=q}for(;2<A;)q[d++]=D[P++],q[d++]=D[P++],q[d++]=D[P++],A-=3;A&&(q[d++]=D[P++],1<A&&(q[d++]=D[P++]))}else{for(P=d-F;q[d++]=q[P++],q[d++]=q[P++],q[d++]=q[P++],2<(A-=3););A&&(q[d++]=q[P++],1<A&&(q[d++]=q[P++]))}break}}break}}while(c<u&&d<g);c-=A=T>>3,_&=(1<<(T-=A<<3))-1,i.next_in=c,i.next_out=d,i.avail_in=c<u?u-c+5:5-(c-u),i.avail_out=d<g?g-d+257:257-(d-g),l.hold=_,l.bits=T}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),l=n("./crc32"),c=n("./inffast"),u=n("./inftrees"),d=1,m=2,g=0,y=-2,w=1,x=852,b=592;function v(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(P){var D;return P&&P.state?(D=P.state,P.total_in=P.total_out=D.total=0,P.msg="",D.wrap&&(P.adler=1&D.wrap),D.mode=w,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new i.Buf32(x),D.distcode=D.distdyn=new i.Buf32(b),D.sane=1,D.back=-1,g):y}function R(P){var D;return P&&P.state?((D=P.state).wsize=0,D.whave=0,D.wnext=0,T(P)):y}function j(P,D){var M,q;return P&&P.state?(q=P.state,D<0?(M=0,D=-D):(M=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?y:(q.window!==null&&q.wbits!==D&&(q.window=null),q.wrap=M,q.wbits=D,R(P))):y}function V(P,D){var M,q;return P?(q=new _,(P.state=q).window=null,(M=j(P,D))!==g&&(P.state=null),M):y}var S,I,C=!0;function A(P){if(C){var D;for(S=new i.Buf32(512),I=new i.Buf32(32),D=0;D<144;)P.lens[D++]=8;for(;D<256;)P.lens[D++]=9;for(;D<280;)P.lens[D++]=7;for(;D<288;)P.lens[D++]=8;for(u(d,P.lens,0,288,S,0,P.work,{bits:9}),D=0;D<32;)P.lens[D++]=5;u(m,P.lens,0,32,I,0,P.work,{bits:5}),C=!1}P.lencode=S,P.lenbits=9,P.distcode=I,P.distbits=5}function F(P,D,M,q){var pe,ne=P.state;return ne.window===null&&(ne.wsize=1<<ne.wbits,ne.wnext=0,ne.whave=0,ne.window=new i.Buf8(ne.wsize)),q>=ne.wsize?(i.arraySet(ne.window,D,M-ne.wsize,ne.wsize,0),ne.wnext=0,ne.whave=ne.wsize):(q<(pe=ne.wsize-ne.wnext)&&(pe=q),i.arraySet(ne.window,D,M-q,pe,ne.wnext),(q-=pe)?(i.arraySet(ne.window,D,M-q,q,0),ne.wnext=q,ne.whave=ne.wsize):(ne.wnext+=pe,ne.wnext===ne.wsize&&(ne.wnext=0),ne.whave<ne.wsize&&(ne.whave+=pe))),0}s.inflateReset=R,s.inflateReset2=j,s.inflateResetKeep=T,s.inflateInit=function(P){return V(P,15)},s.inflateInit2=V,s.inflate=function(P,D){var M,q,pe,ne,ee,Q,ue,$,B,Z,he,ce,Pe,xe,Se,Ce,We,Oe,Ze,ot,N,ae,X,z,O=0,H=new i.Buf8(4),oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return y;(M=P.state).mode===12&&(M.mode=13),ee=P.next_out,pe=P.output,ue=P.avail_out,ne=P.next_in,q=P.input,Q=P.avail_in,$=M.hold,B=M.bits,Z=Q,he=ue,ae=g;e:for(;;)switch(M.mode){case w:if(M.wrap===0){M.mode=13;break}for(;B<16;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}if(2&M.wrap&&$===35615){H[M.check=0]=255&$,H[1]=$>>>8&255,M.check=l(M.check,H,2,0),B=$=0,M.mode=2;break}if(M.flags=0,M.head&&(M.head.done=!1),!(1&M.wrap)||(((255&$)<<8)+($>>8))%31){P.msg="incorrect header check",M.mode=30;break}if((15&$)!=8){P.msg="unknown compression method",M.mode=30;break}if(B-=4,N=8+(15&($>>>=4)),M.wbits===0)M.wbits=N;else if(N>M.wbits){P.msg="invalid window size",M.mode=30;break}M.dmax=1<<N,P.adler=M.check=1,M.mode=512&$?10:12,B=$=0;break;case 2:for(;B<16;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}if(M.flags=$,(255&M.flags)!=8){P.msg="unknown compression method",M.mode=30;break}if(57344&M.flags){P.msg="unknown header flags set",M.mode=30;break}M.head&&(M.head.text=$>>8&1),512&M.flags&&(H[0]=255&$,H[1]=$>>>8&255,M.check=l(M.check,H,2,0)),B=$=0,M.mode=3;case 3:for(;B<32;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}M.head&&(M.head.time=$),512&M.flags&&(H[0]=255&$,H[1]=$>>>8&255,H[2]=$>>>16&255,H[3]=$>>>24&255,M.check=l(M.check,H,4,0)),B=$=0,M.mode=4;case 4:for(;B<16;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}M.head&&(M.head.xflags=255&$,M.head.os=$>>8),512&M.flags&&(H[0]=255&$,H[1]=$>>>8&255,M.check=l(M.check,H,2,0)),B=$=0,M.mode=5;case 5:if(1024&M.flags){for(;B<16;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}M.length=$,M.head&&(M.head.extra_len=$),512&M.flags&&(H[0]=255&$,H[1]=$>>>8&255,M.check=l(M.check,H,2,0)),B=$=0}else M.head&&(M.head.extra=null);M.mode=6;case 6:if(1024&M.flags&&(Q<(ce=M.length)&&(ce=Q),ce&&(M.head&&(N=M.head.extra_len-M.length,M.head.extra||(M.head.extra=new Array(M.head.extra_len)),i.arraySet(M.head.extra,q,ne,ce,N)),512&M.flags&&(M.check=l(M.check,q,ce,ne)),Q-=ce,ne+=ce,M.length-=ce),M.length))break e;M.length=0,M.mode=7;case 7:if(2048&M.flags){if(Q===0)break e;for(ce=0;N=q[ne+ce++],M.head&&N&&M.length<65536&&(M.head.name+=String.fromCharCode(N)),N&&ce<Q;);if(512&M.flags&&(M.check=l(M.check,q,ce,ne)),Q-=ce,ne+=ce,N)break e}else M.head&&(M.head.name=null);M.length=0,M.mode=8;case 8:if(4096&M.flags){if(Q===0)break e;for(ce=0;N=q[ne+ce++],M.head&&N&&M.length<65536&&(M.head.comment+=String.fromCharCode(N)),N&&ce<Q;);if(512&M.flags&&(M.check=l(M.check,q,ce,ne)),Q-=ce,ne+=ce,N)break e}else M.head&&(M.head.comment=null);M.mode=9;case 9:if(512&M.flags){for(;B<16;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}if($!==(65535&M.check)){P.msg="header crc mismatch",M.mode=30;break}B=$=0}M.head&&(M.head.hcrc=M.flags>>9&1,M.head.done=!0),P.adler=M.check=0,M.mode=12;break;case 10:for(;B<32;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}P.adler=M.check=v($),B=$=0,M.mode=11;case 11:if(M.havedict===0)return P.next_out=ee,P.avail_out=ue,P.next_in=ne,P.avail_in=Q,M.hold=$,M.bits=B,2;P.adler=M.check=1,M.mode=12;case 12:if(D===5||D===6)break e;case 13:if(M.last){$>>>=7&B,B-=7&B,M.mode=27;break}for(;B<3;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}switch(M.last=1&$,B-=1,3&($>>>=1)){case 0:M.mode=14;break;case 1:if(A(M),M.mode=20,D!==6)break;$>>>=2,B-=2;break e;case 2:M.mode=17;break;case 3:P.msg="invalid block type",M.mode=30}$>>>=2,B-=2;break;case 14:for($>>>=7&B,B-=7&B;B<32;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}if((65535&$)!=($>>>16^65535)){P.msg="invalid stored block lengths",M.mode=30;break}if(M.length=65535&$,B=$=0,M.mode=15,D===6)break e;case 15:M.mode=16;case 16:if(ce=M.length){if(Q<ce&&(ce=Q),ue<ce&&(ce=ue),ce===0)break e;i.arraySet(pe,q,ne,ce,ee),Q-=ce,ne+=ce,ue-=ce,ee+=ce,M.length-=ce;break}M.mode=12;break;case 17:for(;B<14;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}if(M.nlen=257+(31&$),$>>>=5,B-=5,M.ndist=1+(31&$),$>>>=5,B-=5,M.ncode=4+(15&$),$>>>=4,B-=4,286<M.nlen||30<M.ndist){P.msg="too many length or distance symbols",M.mode=30;break}M.have=0,M.mode=18;case 18:for(;M.have<M.ncode;){for(;B<3;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}M.lens[oe[M.have++]]=7&$,$>>>=3,B-=3}for(;M.have<19;)M.lens[oe[M.have++]]=0;if(M.lencode=M.lendyn,M.lenbits=7,X={bits:M.lenbits},ae=u(0,M.lens,0,19,M.lencode,0,M.work,X),M.lenbits=X.bits,ae){P.msg="invalid code lengths set",M.mode=30;break}M.have=0,M.mode=19;case 19:for(;M.have<M.nlen+M.ndist;){for(;Ce=(O=M.lencode[$&(1<<M.lenbits)-1])>>>16&255,We=65535&O,!((Se=O>>>24)<=B);){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}if(We<16)$>>>=Se,B-=Se,M.lens[M.have++]=We;else{if(We===16){for(z=Se+2;B<z;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}if($>>>=Se,B-=Se,M.have===0){P.msg="invalid bit length repeat",M.mode=30;break}N=M.lens[M.have-1],ce=3+(3&$),$>>>=2,B-=2}else if(We===17){for(z=Se+3;B<z;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}B-=Se,N=0,ce=3+(7&($>>>=Se)),$>>>=3,B-=3}else{for(z=Se+7;B<z;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}B-=Se,N=0,ce=11+(127&($>>>=Se)),$>>>=7,B-=7}if(M.have+ce>M.nlen+M.ndist){P.msg="invalid bit length repeat",M.mode=30;break}for(;ce--;)M.lens[M.have++]=N}}if(M.mode===30)break;if(M.lens[256]===0){P.msg="invalid code -- missing end-of-block",M.mode=30;break}if(M.lenbits=9,X={bits:M.lenbits},ae=u(d,M.lens,0,M.nlen,M.lencode,0,M.work,X),M.lenbits=X.bits,ae){P.msg="invalid literal/lengths set",M.mode=30;break}if(M.distbits=6,M.distcode=M.distdyn,X={bits:M.distbits},ae=u(m,M.lens,M.nlen,M.ndist,M.distcode,0,M.work,X),M.distbits=X.bits,ae){P.msg="invalid distances set",M.mode=30;break}if(M.mode=20,D===6)break e;case 20:M.mode=21;case 21:if(6<=Q&&258<=ue){P.next_out=ee,P.avail_out=ue,P.next_in=ne,P.avail_in=Q,M.hold=$,M.bits=B,c(P,he),ee=P.next_out,pe=P.output,ue=P.avail_out,ne=P.next_in,q=P.input,Q=P.avail_in,$=M.hold,B=M.bits,M.mode===12&&(M.back=-1);break}for(M.back=0;Ce=(O=M.lencode[$&(1<<M.lenbits)-1])>>>16&255,We=65535&O,!((Se=O>>>24)<=B);){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}if(Ce&&!(240&Ce)){for(Oe=Se,Ze=Ce,ot=We;Ce=(O=M.lencode[ot+(($&(1<<Oe+Ze)-1)>>Oe)])>>>16&255,We=65535&O,!(Oe+(Se=O>>>24)<=B);){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}$>>>=Oe,B-=Oe,M.back+=Oe}if($>>>=Se,B-=Se,M.back+=Se,M.length=We,Ce===0){M.mode=26;break}if(32&Ce){M.back=-1,M.mode=12;break}if(64&Ce){P.msg="invalid literal/length code",M.mode=30;break}M.extra=15&Ce,M.mode=22;case 22:if(M.extra){for(z=M.extra;B<z;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}M.length+=$&(1<<M.extra)-1,$>>>=M.extra,B-=M.extra,M.back+=M.extra}M.was=M.length,M.mode=23;case 23:for(;Ce=(O=M.distcode[$&(1<<M.distbits)-1])>>>16&255,We=65535&O,!((Se=O>>>24)<=B);){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}if(!(240&Ce)){for(Oe=Se,Ze=Ce,ot=We;Ce=(O=M.distcode[ot+(($&(1<<Oe+Ze)-1)>>Oe)])>>>16&255,We=65535&O,!(Oe+(Se=O>>>24)<=B);){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}$>>>=Oe,B-=Oe,M.back+=Oe}if($>>>=Se,B-=Se,M.back+=Se,64&Ce){P.msg="invalid distance code",M.mode=30;break}M.offset=We,M.extra=15&Ce,M.mode=24;case 24:if(M.extra){for(z=M.extra;B<z;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}M.offset+=$&(1<<M.extra)-1,$>>>=M.extra,B-=M.extra,M.back+=M.extra}if(M.offset>M.dmax){P.msg="invalid distance too far back",M.mode=30;break}M.mode=25;case 25:if(ue===0)break e;if(ce=he-ue,M.offset>ce){if((ce=M.offset-ce)>M.whave&&M.sane){P.msg="invalid distance too far back",M.mode=30;break}Pe=ce>M.wnext?(ce-=M.wnext,M.wsize-ce):M.wnext-ce,ce>M.length&&(ce=M.length),xe=M.window}else xe=pe,Pe=ee-M.offset,ce=M.length;for(ue<ce&&(ce=ue),ue-=ce,M.length-=ce;pe[ee++]=xe[Pe++],--ce;);M.length===0&&(M.mode=21);break;case 26:if(ue===0)break e;pe[ee++]=M.length,ue--,M.mode=21;break;case 27:if(M.wrap){for(;B<32;){if(Q===0)break e;Q--,$|=q[ne++]<<B,B+=8}if(he-=ue,P.total_out+=he,M.total+=he,he&&(P.adler=M.check=M.flags?l(M.check,pe,he,ee-he):o(M.check,pe,he,ee-he)),he=ue,(M.flags?$:v($))!==M.check){P.msg="incorrect data check",M.mode=30;break}B=$=0}M.mode=28;case 28:if(M.wrap&&M.flags){for(;B<32;){if(Q===0)break e;Q--,$+=q[ne++]<<B,B+=8}if($!==(4294967295&M.total)){P.msg="incorrect length check",M.mode=30;break}B=$=0}M.mode=29;case 29:ae=1;break e;case 30:ae=-3;break e;case 31:return-4;case 32:default:return y}return P.next_out=ee,P.avail_out=ue,P.next_in=ne,P.avail_in=Q,M.hold=$,M.bits=B,(M.wsize||he!==P.avail_out&&M.mode<30&&(M.mode<27||D!==4))&&F(P,P.output,P.next_out,he-P.avail_out)?(M.mode=31,-4):(Z-=P.avail_in,he-=P.avail_out,P.total_in+=Z,P.total_out+=he,M.total+=he,M.wrap&&he&&(P.adler=M.check=M.flags?l(M.check,pe,he,P.next_out-he):o(M.check,pe,he,P.next_out-he)),P.data_type=M.bits+(M.last?64:0)+(M.mode===12?128:0)+(M.mode===20||M.mode===15?256:0),(Z==0&&he===0||D===4)&&ae===g&&(ae=-5),ae)},s.inflateEnd=function(P){if(!P||!P.state)return y;var D=P.state;return D.window&&(D.window=null),P.state=null,g},s.inflateGetHeader=function(P,D){var M;return P&&P.state&&2&(M=P.state).wrap?((M.head=D).done=!1,g):y},s.inflateSetDictionary=function(P,D){var M,q=D.length;return P&&P.state?(M=P.state).wrap!==0&&M.mode!==11?y:M.mode===11&&o(1,D,q,0)!==M.check?-3:F(P,D,q,q)?(M.mode=31,-4):(M.havedict=1,g):y},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,m,g,y,w,x,b,v){var _,T,R,j,V,S,I,C,A,F=v.bits,P=0,D=0,M=0,q=0,pe=0,ne=0,ee=0,Q=0,ue=0,$=0,B=null,Z=0,he=new i.Buf16(16),ce=new i.Buf16(16),Pe=null,xe=0;for(P=0;P<=15;P++)he[P]=0;for(D=0;D<y;D++)he[m[g+D]]++;for(pe=F,q=15;1<=q&&he[q]===0;q--);if(q<pe&&(pe=q),q===0)return w[x++]=20971520,w[x++]=20971520,v.bits=1,0;for(M=1;M<q&&he[M]===0;M++);for(pe<M&&(pe=M),P=Q=1;P<=15;P++)if(Q<<=1,(Q-=he[P])<0)return-1;if(0<Q&&(d===0||q!==1))return-1;for(ce[1]=0,P=1;P<15;P++)ce[P+1]=ce[P]+he[P];for(D=0;D<y;D++)m[g+D]!==0&&(b[ce[m[g+D]]++]=D);if(S=d===0?(B=Pe=b,19):d===1?(B=o,Z-=257,Pe=l,xe-=257,256):(B=c,Pe=u,-1),P=M,V=x,ee=D=$=0,R=-1,j=(ue=1<<(ne=pe))-1,d===1&&852<ue||d===2&&592<ue)return 1;for(;;){for(I=P-ee,A=b[D]<S?(C=0,b[D]):b[D]>S?(C=Pe[xe+b[D]],B[Z+b[D]]):(C=96,0),_=1<<P-ee,M=T=1<<ne;w[V+($>>ee)+(T-=_)]=I<<24|C<<16|A|0,T!==0;);for(_=1<<P-1;$&_;)_>>=1;if(_!==0?($&=_-1,$+=_):$=0,D++,--he[P]==0){if(P===q)break;P=m[g+b[D]]}if(pe<P&&($&j)!==R){for(ee===0&&(ee=pe),V+=M,Q=1<<(ne=P-ee);ne+ee<q&&!((Q-=he[ne+ee])<=0);)ne++,Q<<=1;if(ue+=1<<ne,d===1&&852<ue||d===2&&592<ue)return 1;w[R=$&j]=pe<<24|ne<<16|V-x|0}}return $!==0&&(w[V+$]=P-ee<<24|64<<16|0),v.bits=pe,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,l=1;function c(O){for(var H=O.length;0<=--H;)O[H]=0}var u=0,d=29,m=256,g=m+1+d,y=30,w=19,x=2*g+1,b=15,v=16,_=7,T=256,R=16,j=17,V=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(g+2));c(F);var P=new Array(2*y);c(P);var D=new Array(512);c(D);var M=new Array(256);c(M);var q=new Array(d);c(q);var pe,ne,ee,Q=new Array(y);function ue(O,H,oe,le,J){this.static_tree=O,this.extra_bits=H,this.extra_base=oe,this.elems=le,this.max_length=J,this.has_stree=O&&O.length}function $(O,H){this.dyn_tree=O,this.max_code=0,this.stat_desc=H}function B(O){return O<256?D[O]:D[256+(O>>>7)]}function Z(O,H){O.pending_buf[O.pending++]=255&H,O.pending_buf[O.pending++]=H>>>8&255}function he(O,H,oe){O.bi_valid>v-oe?(O.bi_buf|=H<<O.bi_valid&65535,Z(O,O.bi_buf),O.bi_buf=H>>v-O.bi_valid,O.bi_valid+=oe-v):(O.bi_buf|=H<<O.bi_valid&65535,O.bi_valid+=oe)}function ce(O,H,oe){he(O,oe[2*H],oe[2*H+1])}function Pe(O,H){for(var oe=0;oe|=1&O,O>>>=1,oe<<=1,0<--H;);return oe>>>1}function xe(O,H,oe){var le,J,me=new Array(b+1),_e=0;for(le=1;le<=b;le++)me[le]=_e=_e+oe[le-1]<<1;for(J=0;J<=H;J++){var K=O[2*J+1];K!==0&&(O[2*J]=Pe(me[K]++,K))}}function Se(O){var H;for(H=0;H<g;H++)O.dyn_ltree[2*H]=0;for(H=0;H<y;H++)O.dyn_dtree[2*H]=0;for(H=0;H<w;H++)O.bl_tree[2*H]=0;O.dyn_ltree[2*T]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function Ce(O){8<O.bi_valid?Z(O,O.bi_buf):0<O.bi_valid&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function We(O,H,oe,le){var J=2*H,me=2*oe;return O[J]<O[me]||O[J]===O[me]&&le[H]<=le[oe]}function Oe(O,H,oe){for(var le=O.heap[oe],J=oe<<1;J<=O.heap_len&&(J<O.heap_len&&We(H,O.heap[J+1],O.heap[J],O.depth)&&J++,!We(H,le,O.heap[J],O.depth));)O.heap[oe]=O.heap[J],oe=J,J<<=1;O.heap[oe]=le}function Ze(O,H,oe){var le,J,me,_e,K=0;if(O.last_lit!==0)for(;le=O.pending_buf[O.d_buf+2*K]<<8|O.pending_buf[O.d_buf+2*K+1],J=O.pending_buf[O.l_buf+K],K++,le===0?ce(O,J,H):(ce(O,(me=M[J])+m+1,H),(_e=S[me])!==0&&he(O,J-=q[me],_e),ce(O,me=B(--le),oe),(_e=I[me])!==0&&he(O,le-=Q[me],_e)),K<O.last_lit;);ce(O,T,H)}function ot(O,H){var oe,le,J,me=H.dyn_tree,_e=H.stat_desc.static_tree,K=H.stat_desc.has_stree,re=H.stat_desc.elems,be=-1;for(O.heap_len=0,O.heap_max=x,oe=0;oe<re;oe++)me[2*oe]!==0?(O.heap[++O.heap_len]=be=oe,O.depth[oe]=0):me[2*oe+1]=0;for(;O.heap_len<2;)me[2*(J=O.heap[++O.heap_len]=be<2?++be:0)]=1,O.depth[J]=0,O.opt_len--,K&&(O.static_len-=_e[2*J+1]);for(H.max_code=be,oe=O.heap_len>>1;1<=oe;oe--)Oe(O,me,oe);for(J=re;oe=O.heap[1],O.heap[1]=O.heap[O.heap_len--],Oe(O,me,1),le=O.heap[1],O.heap[--O.heap_max]=oe,O.heap[--O.heap_max]=le,me[2*J]=me[2*oe]+me[2*le],O.depth[J]=(O.depth[oe]>=O.depth[le]?O.depth[oe]:O.depth[le])+1,me[2*oe+1]=me[2*le+1]=J,O.heap[1]=J++,Oe(O,me,1),2<=O.heap_len;);O.heap[--O.heap_max]=O.heap[1],function(Ne,ht){var Pt,gt,te,fe,Re,He,tt=ht.dyn_tree,Ft=ht.max_code,xt=ht.stat_desc.static_tree,Kt=ht.stat_desc.has_stree,un=ht.stat_desc.extra_bits,Ut=ht.stat_desc.extra_base,Dn=ht.stat_desc.max_length,jn=0;for(fe=0;fe<=b;fe++)Ne.bl_count[fe]=0;for(tt[2*Ne.heap[Ne.heap_max]+1]=0,Pt=Ne.heap_max+1;Pt<x;Pt++)Dn<(fe=tt[2*tt[2*(gt=Ne.heap[Pt])+1]+1]+1)&&(fe=Dn,jn++),tt[2*gt+1]=fe,Ft<gt||(Ne.bl_count[fe]++,Re=0,Ut<=gt&&(Re=un[gt-Ut]),He=tt[2*gt],Ne.opt_len+=He*(fe+Re),Kt&&(Ne.static_len+=He*(xt[2*gt+1]+Re)));if(jn!==0){do{for(fe=Dn-1;Ne.bl_count[fe]===0;)fe--;Ne.bl_count[fe]--,Ne.bl_count[fe+1]+=2,Ne.bl_count[Dn]--,jn-=2}while(0<jn);for(fe=Dn;fe!==0;fe--)for(gt=Ne.bl_count[fe];gt!==0;)Ft<(te=Ne.heap[--Pt])||(tt[2*te+1]!==fe&&(Ne.opt_len+=(fe-tt[2*te+1])*tt[2*te],tt[2*te+1]=fe),gt--)}}(O,H),xe(me,be,O.bl_count)}function N(O,H,oe){var le,J,me=-1,_e=H[1],K=0,re=7,be=4;for(_e===0&&(re=138,be=3),H[2*(oe+1)+1]=65535,le=0;le<=oe;le++)J=_e,_e=H[2*(le+1)+1],++K<re&&J===_e||(K<be?O.bl_tree[2*J]+=K:J!==0?(J!==me&&O.bl_tree[2*J]++,O.bl_tree[2*R]++):K<=10?O.bl_tree[2*j]++:O.bl_tree[2*V]++,me=J,be=(K=0)===_e?(re=138,3):J===_e?(re=6,3):(re=7,4))}function ae(O,H,oe){var le,J,me=-1,_e=H[1],K=0,re=7,be=4;for(_e===0&&(re=138,be=3),le=0;le<=oe;le++)if(J=_e,_e=H[2*(le+1)+1],!(++K<re&&J===_e)){if(K<be)for(;ce(O,J,O.bl_tree),--K!=0;);else J!==0?(J!==me&&(ce(O,J,O.bl_tree),K--),ce(O,R,O.bl_tree),he(O,K-3,2)):K<=10?(ce(O,j,O.bl_tree),he(O,K-3,3)):(ce(O,V,O.bl_tree),he(O,K-11,7));me=J,be=(K=0)===_e?(re=138,3):J===_e?(re=6,3):(re=7,4)}}c(Q);var X=!1;function z(O,H,oe,le){he(O,(u<<1)+(le?1:0),3),function(J,me,_e,K){Ce(J),Z(J,_e),Z(J,~_e),i.arraySet(J.pending_buf,J.window,me,_e,J.pending),J.pending+=_e}(O,H,oe)}s._tr_init=function(O){X||(function(){var H,oe,le,J,me,_e=new Array(b+1);for(J=le=0;J<d-1;J++)for(q[J]=le,H=0;H<1<<S[J];H++)M[le++]=J;for(M[le-1]=J,J=me=0;J<16;J++)for(Q[J]=me,H=0;H<1<<I[J];H++)D[me++]=J;for(me>>=7;J<y;J++)for(Q[J]=me<<7,H=0;H<1<<I[J]-7;H++)D[256+me++]=J;for(oe=0;oe<=b;oe++)_e[oe]=0;for(H=0;H<=143;)F[2*H+1]=8,H++,_e[8]++;for(;H<=255;)F[2*H+1]=9,H++,_e[9]++;for(;H<=279;)F[2*H+1]=7,H++,_e[7]++;for(;H<=287;)F[2*H+1]=8,H++,_e[8]++;for(xe(F,g+1,_e),H=0;H<y;H++)P[2*H+1]=5,P[2*H]=Pe(H,5);pe=new ue(F,S,m+1,g,b),ne=new ue(P,I,0,y,b),ee=new ue(new Array(0),C,0,w,_)}(),X=!0),O.l_desc=new $(O.dyn_ltree,pe),O.d_desc=new $(O.dyn_dtree,ne),O.bl_desc=new $(O.bl_tree,ee),O.bi_buf=0,O.bi_valid=0,Se(O)},s._tr_stored_block=z,s._tr_flush_block=function(O,H,oe,le){var J,me,_e=0;0<O.level?(O.strm.data_type===2&&(O.strm.data_type=function(K){var re,be=4093624447;for(re=0;re<=31;re++,be>>>=1)if(1&be&&K.dyn_ltree[2*re]!==0)return o;if(K.dyn_ltree[18]!==0||K.dyn_ltree[20]!==0||K.dyn_ltree[26]!==0)return l;for(re=32;re<m;re++)if(K.dyn_ltree[2*re]!==0)return l;return o}(O)),ot(O,O.l_desc),ot(O,O.d_desc),_e=function(K){var re;for(N(K,K.dyn_ltree,K.l_desc.max_code),N(K,K.dyn_dtree,K.d_desc.max_code),ot(K,K.bl_desc),re=w-1;3<=re&&K.bl_tree[2*A[re]+1]===0;re--);return K.opt_len+=3*(re+1)+5+5+4,re}(O),J=O.opt_len+3+7>>>3,(me=O.static_len+3+7>>>3)<=J&&(J=me)):J=me=oe+5,oe+4<=J&&H!==-1?z(O,H,oe,le):O.strategy===4||me===J?(he(O,2+(le?1:0),3),Ze(O,F,P)):(he(O,4+(le?1:0),3),function(K,re,be,Ne){var ht;for(he(K,re-257,5),he(K,be-1,5),he(K,Ne-4,4),ht=0;ht<Ne;ht++)he(K,K.bl_tree[2*A[ht]+1],3);ae(K,K.dyn_ltree,re-1),ae(K,K.dyn_dtree,be-1)}(O,O.l_desc.max_code+1,O.d_desc.max_code+1,_e+1),Ze(O,O.dyn_ltree,O.dyn_dtree)),Se(O),le&&Ce(O)},s._tr_tally=function(O,H,oe){return O.pending_buf[O.d_buf+2*O.last_lit]=H>>>8&255,O.pending_buf[O.d_buf+2*O.last_lit+1]=255&H,O.pending_buf[O.l_buf+O.last_lit]=255&oe,O.last_lit++,H===0?O.dyn_ltree[2*oe]++:(O.matches++,H--,O.dyn_ltree[2*(M[oe]+m+1)]++,O.dyn_dtree[2*B(H)]++),O.last_lit===O.lit_bufsize-1},s._tr_align=function(O){he(O,2,3),ce(O,T,F),function(H){H.bi_valid===16?(Z(H,H.bi_buf),H.bi_buf=0,H.bi_valid=0):8<=H.bi_valid&&(H.pending_buf[H.pending++]=255&H.bi_buf,H.bi_buf>>=8,H.bi_valid-=8)}(O)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,l){if(!o.setImmediate){var c,u,d,m,g=1,y={},w=!1,x=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,c={}.toString.call(o.process)==="[object process]"?function(R){process.nextTick(function(){_(R)})}:function(){if(o.postMessage&&!o.importScripts){var R=!0,j=o.onmessage;return o.onmessage=function(){R=!1},o.postMessage("","*"),o.onmessage=j,R}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",T,!1):o.attachEvent("onmessage",T),function(R){o.postMessage(m+R,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(R){_(R.data)},function(R){d.port2.postMessage(R)}):x&&"onreadystatechange"in x.createElement("script")?(u=x.documentElement,function(R){var j=x.createElement("script");j.onreadystatechange=function(){_(R),j.onreadystatechange=null,u.removeChild(j),j=null},u.appendChild(j)}):function(R){setTimeout(_,0,R)},b.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var j=new Array(arguments.length-1),V=0;V<j.length;V++)j[V]=arguments[V+1];var S={callback:R,args:j};return y[g]=S,c(g),g++},b.clearImmediate=v}function v(R){delete y[R]}function _(R){if(w)setTimeout(_,0,R);else{var j=y[R];if(j){w=!0;try{(function(V){var S=V.callback,I=V.args;switch(I.length){case 0:S();break;case 1:S(I[0]);break;case 2:S(I[0],I[1]);break;case 3:S(I[0],I[1],I[2]);break;default:S.apply(l,I)}})(j)}finally{v(R),w=!1}}}}function T(R){R.source===o&&typeof R.data=="string"&&R.data.indexOf(m)===0&&_(+R.data.slice(m.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ds<"u"?ds:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Nk);var _8=Nk.exports;const b8=Fm(_8);var Rk={exports:{}};(function(t,e){(function(n,r){r()})(ds,function(){function n(u,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,d,m){var g=new XMLHttpRequest;g.open("GET",u),g.responseType="blob",g.onload=function(){c(g.response,d,m)},g.onerror=function(){console.error("could not download file")},g.send()}function s(u){var d=new XMLHttpRequest;d.open("HEAD",u,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function i(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ds=="object"&&ds.global===ds?ds:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(u,d,m){var g=o.URL||o.webkitURL,y=document.createElement("a");d=d||u.name||"download",y.download=d,y.rel="noopener",typeof u=="string"?(y.href=u,y.origin===location.origin?i(y):s(y.href)?r(u,d,m):i(y,y.target="_blank")):(y.href=g.createObjectURL(u),setTimeout(function(){g.revokeObjectURL(y.href)},4e4),setTimeout(function(){i(y)},0))}:"msSaveOrOpenBlob"in navigator?function(u,d,m){if(d=d||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,m),d);else if(s(u))r(u,d,m);else{var g=document.createElement("a");g.href=u,g.target="_blank",setTimeout(function(){i(g)})}}:function(u,d,m,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof u=="string")return r(u,d,m);var y=u.type==="application/octet-stream",w=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||y&&w||l)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var T=b.result;T=x?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=T:location=T,g=null},b.readAsDataURL(u)}else{var v=o.URL||o.webkitURL,_=v.createObjectURL(u);g?g.location=_:location.href=_,g=null,setTimeout(function(){v.revokeObjectURL(_)},4e4)}});o.saveAs=c.saveAs=c,t.exports=c})})(Rk);var E8=Rk.exports;const T8=Fm(E8),Ri=1080,ab=[{name:"Animal",items:["https://cdn-icons-png.flaticon.com/256/4193/4193243.png","https://cdn-icons-png.flaticon.com/256/4193/4193245.png","https://cdn-icons-png.flaticon.com/256/4193/4193247.png","https://cdn-icons-png.flaticon.com/256/4193/4193251.png","https://cdn-icons-png.flaticon.com/256/4193/4193254.png","https://cdn-icons-png.flaticon.com/256/4193/4193256.png","https://cdn-icons-png.flaticon.com/256/4193/4193260.png","https://cdn-icons-png.flaticon.com/256/4193/4193263.png","https://cdn-icons-png.flaticon.com/256/4193/4193266.png","https://cdn-icons-png.flaticon.com/256/4193/4193269.png","https://cdn-icons-png.flaticon.com/256/4193/4193273.png","https://cdn-icons-png.flaticon.com/256/4193/4193275.png","https://cdn-icons-png.flaticon.com/256/4193/4193279.png"]},{name:"Food",items:["https://cdn-icons-png.flaticon.com/256/4359/4359613.png","https://cdn-icons-png.flaticon.com/256/4359/4359623.png","https://cdn-icons-png.flaticon.com/256/4359/4359633.png","https://cdn-icons-png.flaticon.com/256/4359/4359642.png","https://cdn-icons-png.flaticon.com/256/4359/4359651.png","https://cdn-icons-png.flaticon.com/256/4359/4359658.png","https://cdn-icons-png.flaticon.com/256/4359/4359672.png","https://cdn-icons-png.flaticon.com/256/4359/4359682.png","https://cdn-icons-png.flaticon.com/256/4359/4359692.png","https://cdn-icons-png.flaticon.com/256/4359/4359703.png","https://cdn-icons-png.flaticon.com/256/4359/4359725.png","https://cdn-icons-png.flaticon.com/256/4359/4359746.png","https://cdn-icons-png.flaticon.com/256/4359/4359763.png","https://cdn-icons-png.flaticon.com/256/4359/4359781.png","https://cdn-icons-png.flaticon.com/256/4359/4359814.png","https://cdn-icons-png.flaticon.com/256/4359/4359840.png","https://cdn-icons-png.flaticon.com/256/4359/4359859.png","https://cdn-icons-png.flaticon.com/256/4359/4359883.png","https://cdn-icons-png.flaticon.com/256/4359/4359904.png","https://cdn-icons-png.flaticon.com/256/4359/4359922.png"]}],I8=({onExit:t})=>{var Er,Ei,At,Ti,cr,Qe,vo,Ii,Tr,xo,wo,as,Si;const[e,n]=L.useState([]),[r,s]=L.useState(null),[i,o]=L.useState([[]]),[l,c]=L.useState(0),[u,d]=L.useState(.5),[m,g]=L.useState({x:0,y:0}),[y,w]=L.useState(3),[x,b]=L.useState("square"),[v,_]=L.useState("#ffffff"),[T,R]=L.useState(!1),[j,V]=L.useState("add"),[S,I]=L.useState(null),[C,A]=L.useState("none"),[F,P]=L.useState(null),[D,M]=L.useState(!1),[q,pe]=L.useState(null),[ne,ee]=L.useState(""),Q=L.useRef(null),ue=L.useRef(null),$=L.useRef(!1),B=L.useRef(!1),Z=L.useRef({x:0,y:0}),he=L.useRef({x:0,y:0}),ce=L.useRef({x:0,y:0}),Pe=L.useRef(!1),xe=L.useRef(!1),Se=L.useRef({x:0,y:0}),Ce=L.useRef(!1),We=L.useRef({x:0,y:0,w:0,h:0}),Oe=L.useRef(null),Ze=x==="square"?Ri:Ri*5/4,ot=y*Ri,N=Ze;L.useEffect(()=>{const G=()=>P(null);return window.addEventListener("click",G),()=>window.removeEventListener("click",G)},[]);const ae=G=>{const ye=Math.max(100,G.length*42+50),De=60*2,qe=`<svg xmlns="http://www.w3.org/2000/svg" width="${ye}" height="${De}" viewBox="0 0 ${ye} ${De}">
            <text x="50%" y="50%" font-family="Arial, sans-serif" font-size="60" font-weight="bold" fill="#0f172a" text-anchor="middle" dominant-baseline="middle">${G}</text>
        </svg>`;try{return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(qe)))}`}catch(ut){return console.error("Text encoding failed",ut),`data:image/svg+xml;base64,${btoa(qe)}`}},X=G=>{let se="";return G==="circle"?se='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><circle cx="100" cy="100" r="100" fill="#1e293b"/></svg>':G==="square"?se='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect width="200" height="200" fill="#334155"/></svg>':G==="triangle"?se='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 10 L190 190 L10 190 Z" fill="#475569"/></svg>':G==="star"?se='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="m100 10 25 60 65 5-50 45 15 65-55-35-55 35 15-65-50-45 65-5z" fill="#0f172a"/></svg>':G==="heart"&&(se='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 180 C10 100 -20 50 40 20 C70 5 90 30 100 50 C110 30 130 5 160 20 C220 50 190 100 100 180 Z" fill="#ef4444"/></svg>'),`data:image/svg+xml;base64,${btoa(se)}`},z=G=>{const se=i.slice(0,l+1);se.push(G),o(se),c(se.length-1)},O=()=>{if(l>0){const G=l-1;n(i[G]),c(G)}else l===0&&(n([]),c(-1))},H=G=>{n(G),z(G)},oe=(G,se="image",ye)=>{const De=new Image;De.crossOrigin="anonymous",De.onload=()=>{const qe=De.width/De.height,ut={id:Date.now().toString(),type:se,textContent:ye,src:G,x:ot/2-De.width/2,y:N/2-De.height/2,width:De.width,height:De.height,originalAspectRatio:qe,currentAspectRatio:qe,rotation:0,scaleX:1,borderRadius:0,borderColor:"#000000",borderWidth:0,isGrayscale:!1,maskShape:"none"};ut.width>1200&&(ut.width=1200,ut.height=1200/ut.originalAspectRatio);const nt=[...e,ut];H(nt),s(ut.id),A("none")},De.src=G},le=()=>{const G="Double Tap to Edit";oe(ae(G),"text",G),P(null)},J=G=>{if(G.target.files&&G.target.files[0]){const se=G.target.files[0],ye=new FileReader;ye.onload=De=>{var qe;(qe=De.target)!=null&&qe.result&&oe(De.target.result,"image")},ye.readAsDataURL(se)}G.target.value=""},me=()=>{if(!r)return;const G=e.filter(se=>se.id!==r);H(G),s(null),A("none")},_e=()=>{if(!r)return;const G=e.find(se=>se.id===r);if(G){const se={...G,id:Date.now().toString(),x:G.x+50,y:G.y+50},ye=[...e,se];H(ye),s(se.id),A("none")}},K=()=>{const G=e.find(se=>se.id===r);!G||G.type!=="text"||(pe(G.id),ee(G.textContent||""),A("none"))},re=()=>{if(!q)return;const G=ne.trim()===""?" ":ne,se=ae(G),ye=new Image;ye.onload=()=>{const De=ye.width/ye.height,qe=e.map(ut=>ut.id===q?{...ut,src:se,textContent:G,width:ye.width,height:ye.height,originalAspectRatio:De,currentAspectRatio:De}:ut);H(qe),pe(null)},ye.src=se},be=(G,se=!0)=>{if(!r)return;const ye=e.map(De=>De.id===r?{...De,...G}:De);se?H(ye):n(ye)},Ne=()=>{const G=e.find(se=>se.id===r);G&&be({rotation:(G.rotation+90)%360})},ht=()=>{const G=e.find(se=>se.id===r);G&&be({scaleX:G.scaleX*-1})},Pt=()=>{if(!r)return;const G=e.find(De=>De.id===r);if(!G)return;let se=G.originalAspectRatio;Math.abs(G.currentAspectRatio-G.originalAspectRatio)<.01?se=1:Math.abs(G.currentAspectRatio-1)<.01?se=.8:Math.abs(G.currentAspectRatio-.8)<.01?se=1.77:se=G.originalAspectRatio;const ye=G.width/se;be({currentAspectRatio:se,height:ye})},gt=G=>{n(se=>{const ye=se.find(qe=>qe.id===G);return ye?[...se.filter(qe=>qe.id!==G),ye]:se})},te=G=>{if(!r)return;const se=e.findIndex(De=>De.id===r);if(se===-1)return;const ye=[...e];if(G==="front"){const[De]=ye.splice(se,1);ye.push(De)}else if(G==="back"){const[De]=ye.splice(se,1);ye.unshift(De)}else G==="forward"&&se<ye.length-1?[ye[se],ye[se+1]]=[ye[se+1],ye[se]]:G==="backward"&&se>0&&([ye[se],ye[se-1]]=[ye[se-1],ye[se]]);H(ye)},fe=async()=>{M(!0);try{const G=document.createElement("canvas");G.width=ot,G.height=N;const se=G.getContext("2d");if(!se)throw new Error("Canvas context failed");se.fillStyle=v,se.fillRect(0,0,ot,N);const ye=nt=>new Promise(qn=>{const dn=new Image;dn.crossOrigin="anonymous",dn.onload=()=>{se.save();const Hr=nt.x+nt.width/2,Ir=nt.y+nt.height/2;se.translate(Hr,Ir),se.rotate(nt.rotation*Math.PI/180),se.scale(nt.scaleX,1),nt.isGrayscale&&(se.filter="grayscale(100%)");const Sr=nt.width,hn=nt.height,ur=-Sr/2,Tn=-hn/2;if(se.beginPath(),nt.maskShape==="circle"){const ki=Math.min(Sr,hn)/2;se.arc(0,0,ki,0,Math.PI*2)}else(nt.maskShape==="square"||nt.borderRadius>0)&&se.roundRect?se.roundRect(ur,Tn,Sr,hn,nt.borderRadius):se.rect(ur,Tn,Sr,hn);se.closePath(),se.save(),se.clip(),se.drawImage(dn,ur,Tn,Sr,hn),se.restore(),se.filter="none",nt.borderWidth>0&&(se.lineWidth=nt.borderWidth,se.strokeStyle=nt.borderColor,se.stroke()),se.restore(),qn()},dn.src=nt.src});await Promise.all(e.map(ye));const De=new b8,qe=De.folder("instagram-panorama");for(let nt=0;nt<y;nt++){const qn=document.createElement("canvas");qn.width=Ri,qn.height=Ze;const dn=qn.getContext("2d");if(dn){dn.drawImage(G,nt*Ri,0,Ri,Ze,0,0,Ri,Ze);const Hr=await new Promise(Ir=>qn.toBlob(Ir,"image/jpeg",.95));Hr&&qe&&qe.file(`slide_${nt+1}.jpg`,Hr)}}const ut=await De.generateAsync({type:"blob"});T8.saveAs(ut,"ig-panorama-slides.zip")}catch{alert("Gagal membuat zip.")}finally{M(!1)}},Re=G=>{G.ctrlKey&&G.preventDefault();const se=-G.deltaY*.001,ye=Math.min(Math.max(.05,u+se),3);d(ye)},He=G=>{const se=G.target;(se===ue.current||se.classList.contains("canvas-bg"))&&!$.current&&G.pointerType==="mouse"&&(B.current=!0,Z.current={x:G.clientX,y:G.clientY},ce.current={...m},G.button===0&&(s(null),pe(null),A("none")))},tt=G=>{G.preventDefault(),P({x:G.clientX,y:G.clientY})},Ft=G=>{if(B.current){const se=G.clientX-Z.current.x,ye=G.clientY-Z.current.y;g({x:ce.current.x+se,y:ce.current.y+ye});return}if($.current&&r){Math.hypot(G.clientX-Se.current.x,G.clientY-Se.current.y)>3&&(Pe.current=!0);const ye=(G.clientX-Z.current.x)/u,De=(G.clientY-Z.current.y)/u;n(qe=>qe.map(ut=>ut.id===r?{...ut,x:he.current.x+ye,y:he.current.y+De}:ut));return}if(Ce.current&&r){const se=(G.clientX-We.current.x)/u,ye=Math.max(50,We.current.w+se);n(De=>De.map(qe=>qe.id===r?{...qe,width:ye,height:ye/qe.currentAspectRatio}:qe))}},xt=()=>{($.current||Ce.current)&&z(e),$.current=!1,Ce.current=!1,B.current=!1,Oe.current=null},Kt=(G,se,ye)=>{if(q)return;xe.current=r===ye,s(ye),A("none"),gt(ye),$.current=!0,Pe.current=!1,Se.current={x:G,y:se},Z.current={x:G,y:se};const De=e.find(qe=>qe.id===ye);De&&(he.current={x:De.x,y:De.y})},un=(G,se)=>{G.stopPropagation(),G.preventDefault();const ye="touches"in G?G.touches[0].clientX:G.clientX,De="touches"in G?G.touches[0].clientY:G.clientY;Ce.current=!0;const qe=e.find(ut=>ut.id===se);qe&&(We.current={x:ye,y:De,w:qe.width,h:qe.height})},Ut=G=>{!Pe.current&&xe.current,xt()},Dn=G=>{const se=e.find(ye=>ye.id===G);se&&se.type==="text"&&K()},jn=G=>{if(G.touches.length===2){G.preventDefault(),B.current=!1;const se=G.touches[0],ye=G.touches[1],De=Math.hypot(ye.clientX-se.clientX,ye.clientY-se.clientY),qe={x:(se.clientX+ye.clientX)/2,y:(se.clientY+ye.clientY)/2};Oe.current={startDist:De,startScale:u,startPan:{...m},startCenter:qe}}else if(G.touches.length===1){const se=G.target;(se===ue.current||se.classList.contains("canvas-bg"))&&!$.current&&(s(null),pe(null),A("none"))}},lr=G=>{if(G.touches.length===2&&Oe.current){G.preventDefault();const se=G.touches[0],ye=G.touches[1],De=Math.hypot(ye.clientX-se.clientX,ye.clientY-se.clientY),qe={x:(se.clientX+ye.clientX)/2,y:(se.clientY+ye.clientY)/2},ut=Math.max(.05,Math.min(3,Oe.current.startScale*(De/Oe.current.startDist))),nt=qe.x-Oe.current.startCenter.x,qn=qe.y-Oe.current.startCenter.y;g({x:Oe.current.startPan.x+nt,y:Oe.current.startPan.y+qn}),d(ut)}},lt=()=>e.find(G=>G.id===r),$r=()=>d(G=>Math.min(G+.1,3)),yo=()=>d(G=>Math.max(G-.1,.05));return a.jsxs("div",{className:"h-[100dvh] bg-slate-50 text-slate-900 flex flex-col overflow-hidden font-sans relative",children:[a.jsx("style",{children:`
                    .no-scrollbar::-webkit-scrollbar { display: none; }
                    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
                `}),F&&a.jsxs("div",{className:"fixed z-[200] bg-white/90 backdrop-blur-md border border-slate-200 rounded-xl shadow-2xl p-2 animate-fade-in origin-top-left flex flex-col gap-1 w-48",style:{top:F.y,left:F.x},onClick:G=>G.stopPropagation(),children:[a.jsxs("button",{onClick:()=>{w(G=>Math.min(G+1,10)),P(null)},className:"flex items-center gap-3 px-3 py-2 text-xs font-bold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors text-left",children:[a.jsx(FT,{className:"w-4 h-4 text-slate-500"})," Tambah Slide (+1)"]}),a.jsxs("button",{onClick:()=>{var G;(G=Q.current)==null||G.click(),P(null)},className:"flex items-center gap-3 px-3 py-2 text-xs font-bold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors text-left",children:[a.jsx(rs,{className:"w-4 h-4 text-slate-500"})," Upload Foto"]}),a.jsxs("button",{onClick:le,className:"flex items-center gap-3 px-3 py-2 text-xs font-bold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors text-left",children:[a.jsx("div",{className:"w-4 h-4 flex items-center justify-center font-serif font-black text-slate-500 border border-slate-300 rounded bg-white text-[9px]",children:"T"})," Tambah Teks"]}),a.jsx("div",{className:"h-px bg-slate-200 my-1"}),a.jsx("div",{className:"px-3 py-1 text-[9px] font-bold text-slate-400 uppercase tracking-wider",children:"Shapes"}),a.jsxs("div",{className:"flex gap-2 px-2 pb-1",children:[a.jsx("button",{onClick:()=>{oe(X("square"),"shape"),P(null)},className:"p-2 bg-slate-50 hover:bg-slate-200 rounded-lg",children:a.jsx(Rf,{className:"w-4 h-4 text-slate-600"})}),a.jsx("button",{onClick:()=>{oe(X("circle"),"shape"),P(null)},className:"p-2 bg-slate-50 hover:bg-slate-200 rounded-lg",children:a.jsx(Nf,{className:"w-4 h-4 text-slate-600"})}),a.jsx("button",{onClick:()=>{oe(X("star"),"shape"),P(null)},className:"p-2 bg-slate-50 hover:bg-slate-200 rounded-lg",children:a.jsx(Jp,{className:"w-4 h-4 text-slate-600"})})]})]}),a.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 pointer-events-none flex justify-between items-start",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:t,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors",children:a.jsx(er,{className:"w-5 h-5"})}),a.jsx("button",{onClick:O,disabled:l<0,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors disabled:opacity-50",children:a.jsx(LN,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"pointer-events-auto bg-white/90 backdrop-blur-md border border-slate-200 rounded-full flex items-center p-1 shadow-sm",children:[a.jsx("button",{onClick:yo,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:a.jsx(UN,{className:"w-4 h-4"})}),a.jsxs("div",{className:"px-2 text-xs font-mono font-bold text-slate-700 w-10 text-center select-none",children:[Math.round(u*100),"%"]}),a.jsx("button",{onClick:$r,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:a.jsx(FN,{className:"w-4 h-4"})})]}),a.jsx("button",{onClick:fe,disabled:D||e.length===0,className:"pointer-events-auto bg-slate-900 hover:bg-slate-800 text-white px-4 py-2.5 rounded-full shadow-lg shadow-slate-900/10 font-bold text-xs flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 border border-slate-800",children:D?"Saving...":a.jsxs(a.Fragment,{children:[a.jsx(NT,{className:"w-4 h-4"})," Save"]})})]}),a.jsx("div",{className:"flex-1 bg-slate-100 overflow-hidden relative flex flex-col",children:a.jsx("div",{ref:ue,className:"flex-1 w-full h-full cursor-grab active:cursor-grabbing touch-none flex items-center justify-center overflow-hidden relative",onWheel:Re,onPointerDown:He,onPointerMove:Ft,onPointerUp:xt,onPointerLeave:xt,onTouchStart:jn,onTouchMove:lr,onTouchEnd:xt,onContextMenu:tt,children:a.jsx("div",{style:{transform:`translate(${m.x}px, ${m.y}px) scale(${u})`,transformOrigin:"center",display:"flex",alignItems:"center",justifyContent:"center",transition:B.current||$.current||Ce.current||Oe.current?"none":"transform 0.1s ease-out",willChange:"transform",pointerEvents:"none"},children:a.jsxs("div",{className:"relative shadow-2xl shrink-0 pointer-events-auto",style:{width:ot,height:N},children:[a.jsx("div",{className:"absolute inset-0 canvas-bg",style:{backgroundColor:v}}),a.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.map((G,se)=>a.jsx("div",{className:"absolute group",style:{left:G.x,top:G.y,width:G.width,height:G.height,transform:`rotate(${G.rotation}deg) scaleX(${G.scaleX})`,zIndex:se},children:q===G.id?a.jsx("div",{className:"w-full h-full relative",children:a.jsx("textarea",{autoFocus:!0,value:ne,onChange:ye=>ee(ye.target.value),onBlur:re,onKeyDown:ye=>{ye.key==="Enter"&&!ye.shiftKey&&(ye.preventDefault(),re())},className:"w-full h-full bg-transparent border-2 border-blue-500 rounded resize-none outline-none text-center font-bold text-slate-900 overflow-hidden p-0 m-0",style:{fontFamily:"Arial, sans-serif",fontSize:"60px",lineHeight:"1.2",display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"pre-wrap"},onFocus:ye=>ye.target.select()})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`absolute -inset-0.5 pointer-events-none transition-opacity duration-200 z-50 ${r===G.id?"opacity-100":"opacity-0"}`,style:{border:"2px dashed #0f172a",borderRadius:G.maskShape==="circle"?"50%":`${G.borderRadius}px`}}),a.jsx("div",{style:{width:"100%",height:"100%",borderRadius:G.maskShape==="circle"?"50%":`${G.borderRadius}px`,overflow:"hidden",border:G.borderWidth>0?`${G.borderWidth}px solid ${G.borderColor}`:"none",filter:G.isGrayscale?"grayscale(100%)":"none",position:"relative"},onMouseDown:ye=>Kt(ye.clientX,ye.clientY,G.id),onTouchStart:ye=>{ye.touches.length===1&&Kt(ye.touches[0].clientX,ye.touches[0].clientY,G.id)},onMouseUp:Ut,onTouchEnd:Ut,onDoubleClick:()=>Dn(G.id),children:a.jsx("img",{src:G.src,alt:"item",className:"w-full h-full select-none",draggable:!1,style:{objectFit:"cover"}})})]})},G.id))}),e.map(G=>r===G.id&&!q&&a.jsxs("div",{className:"absolute pointer-events-none z-[51]",style:{left:G.x,top:G.y,width:G.width,height:G.height,transform:`rotate(${G.rotation}deg) scaleX(${G.scaleX})`},children:[a.jsx("div",{className:"absolute -bottom-3 -right-3 w-6 h-6 pointer-events-auto flex items-center justify-center cursor-nwse-resize hover:scale-110 transition-transform bg-white rounded-full shadow-md",style:{transform:`scale(${1/u})`},onMouseDown:se=>un(se,G.id),onTouchStart:se=>un(se,G.id),children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/11398/11398919.png",className:"w-4 h-4 object-contain",alt:"Resize",draggable:!1})}),Ce.current&&a.jsxs("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-[10px] px-2 py-1 rounded shadow whitespace-nowrap",style:{transform:`translateX(-50%) scale(${1/u})`},children:[Math.round(G.width),"px"]})]},`resize-${G.id}`)),r&&lt()&&!q&&a.jsxs("div",{className:"absolute pointer-events-auto z-[100]",style:{left:lt().x+lt().width/2,top:lt().y-60/u,transform:`translateX(-50%) scale(${1/u})`,transformOrigin:"bottom center",transition:"top 0.2s ease-out"},onMouseDown:G=>G.stopPropagation(),onTouchStart:G=>G.stopPropagation(),children:[a.jsx("div",{className:"bg-white/90 backdrop-blur-md text-slate-700 rounded-full shadow-xl border border-slate-200 flex items-center p-1.5 gap-1 transition-all duration-200",children:C==="none"?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>A("layers"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",title:"Layer",children:a.jsx(Af,{className:"w-4 h-4"})}),((Er=lt())==null?void 0:Er.type)==="text"&&a.jsx("button",{onClick:K,className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",title:"Edit Teks",children:a.jsx(Xi,{className:"w-4 h-4"})}),((Ei=lt())==null?void 0:Ei.type)!=="text"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>A("mask"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",title:"Masking",children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1215/1215945.png",className:"w-4 h-4 object-contain",alt:"Mask"})}),a.jsx("button",{onClick:()=>A("border"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",title:"Border",children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/33/33587.png",className:"w-4 h-4 object-contain",alt:"Border"})})]}),a.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),a.jsx("button",{onClick:Ne,className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",children:a.jsx(NN,{className:"w-4 h-4"})}),a.jsx("button",{onClick:ht,className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",children:a.jsx(RN,{className:"w-4 h-4"})}),((At=lt())==null?void 0:At.type)!=="text"&&a.jsx("button",{onClick:Pt,className:"p-2 hover:bg-slate-100 rounded-full text-slate-900",children:a.jsx(jN,{className:"w-4 h-4"})}),a.jsx("button",{onClick:_e,className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",children:a.jsx(PN,{className:"w-4 h-4"})}),a.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),a.jsx("button",{onClick:me,className:"p-2 hover:bg-red-50 text-red-500 rounded-full",children:a.jsx(gr,{className:"w-4 h-4"})})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>A("none"),className:"p-2 hover:bg-slate-200 rounded-full text-slate-900 bg-slate-100",title:"Kembali",children:a.jsx(er,{className:"w-4 h-4"})}),a.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),C==="layers"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>te("front"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-700",title:"Paling Depan",children:a.jsx(Af,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>te("forward"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-700",title:"Maju",children:a.jsx(Fg,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>te("backward"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-700",title:"Mundur",children:a.jsx(RT,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>te("back"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-700",title:"Paling Belakang",children:a.jsx(Af,{className:"w-4 h-4 opacity-50"})})]}),C==="mask"&&((Ti=lt())==null?void 0:Ti.type)!=="text"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>be({maskShape:"none",borderRadius:0}),className:`p-2 rounded-full ${((cr=lt())==null?void 0:cr.maskShape)==="none"?"bg-slate-900 text-white":"hover:bg-slate-100 text-slate-700"}`,title:"Kotak",children:a.jsx(Rf,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>be({maskShape:"circle"}),className:`p-2 rounded-full ${((Qe=lt())==null?void 0:Qe.maskShape)==="circle"?"bg-slate-900 text-white":"hover:bg-slate-100 text-slate-700"}`,title:"Lingkaran",children:a.jsx(Nf,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>be({maskShape:"square",borderRadius:40}),className:`p-2 rounded-full ${((vo=lt())==null?void 0:vo.maskShape)==="square"?"bg-slate-900 text-white":"hover:bg-slate-100 text-slate-700"}`,title:"Rounded",children:a.jsx("div",{className:"w-4 h-4 border-2 border-current rounded-md"})})]}),C==="border"&&((Ii=lt())==null?void 0:Ii.type)!=="text"&&a.jsxs("div",{className:"flex items-center gap-3 px-2",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"w-6 h-6 rounded-full border border-slate-300 shadow-sm",style:{backgroundColor:(Tr=lt())==null?void 0:Tr.borderColor}}),a.jsx("input",{type:"color",value:(xo=lt())==null?void 0:xo.borderColor,onChange:G=>be({borderColor:G.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})]}),a.jsx("input",{type:"range",min:"0",max:"20",value:(wo=lt())==null?void 0:wo.borderWidth,onChange:G=>be({borderWidth:parseInt(G.target.value)}),className:"w-24 h-1.5 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"}),a.jsx("span",{className:"text-[10px] font-mono font-bold text-slate-500 w-4",children:(as=lt())==null?void 0:as.borderWidth})]})]})}),a.jsx("div",{className:"w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-t-[6px] border-t-white/90 absolute -bottom-1.5 left-1/2 -translate-x-1/2 drop-shadow-sm"})]}),a.jsx("div",{className:"absolute inset-0 pointer-events-none z-20",children:Array.from({length:y-1}).map((G,se)=>a.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-dashed border-slate-400/50 flex flex-col justify-between items-center py-2 mix-blend-difference",style:{left:`${(se+1)/y*100}%`},children:a.jsx("div",{style:{transform:`scale(${1/u})`},children:a.jsx(AN,{className:"w-4 h-4 text-slate-600 opacity-80 bg-white/20 rounded-full p-0.5"})})},se))}),a.jsx("div",{className:"absolute top-0 left-0 w-full flex pointer-events-none z-20",children:Array.from({length:y}).map((G,se)=>a.jsx("div",{className:"flex-1 border-r border-transparent h-6 flex items-center justify-center",children:a.jsxs("span",{className:"bg-white/80 text-slate-900 text-[9px] font-bold px-2 rounded-b backdrop-blur-sm shadow-sm border-x border-b border-slate-200",style:{transform:`scale(${Math.max(1,1/u)})`,transformOrigin:"top center"},children:["Slide ",se+1]})},se))})]})})})}),a.jsxs("div",{className:`fixed bottom-0 left-0 right-0 z-[60] flex flex-col bg-white border-t border-slate-200 transition-transform duration-300 ease-out shadow-[0_-10px_30px_-10px_rgba(0,0,0,0.05)] ${T?"translate-y-0":"translate-y-[calc(100%-40px)]"}`,children:[a.jsxs("div",{onClick:()=>R(!T),className:"h-10 flex items-center justify-center cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors border-b border-slate-200 group shrink-0",children:[a.jsx("div",{className:"w-12 h-1 bg-slate-300 rounded-full group-hover:bg-slate-400 mb-1"}),a.jsx($n,{className:`w-4 h-4 text-slate-400 absolute right-4 transition-transform duration-300 ${T?"":"rotate-180"}`})]}),a.jsxs("div",{className:"flex border-b border-slate-200 bg-white shrink-0",children:[a.jsx("button",{onClick:()=>{V("add"),R(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${j==="add"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Add"}),a.jsx("button",{onClick:()=>{V("canvas"),R(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${j==="canvas"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Layout"})]}),a.jsxs("div",{className:"h-28 overflow-x-auto overflow-y-hidden bg-white no-scrollbar flex items-center",children:[j==="add"&&a.jsx("div",{className:"flex items-center gap-4 px-6 min-w-max",children:S?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>I(null),className:"h-16 w-16 bg-slate-100 hover:bg-slate-200 rounded-xl text-slate-600 flex flex-col items-center justify-center gap-1 border border-transparent transition-all shrink-0",children:[a.jsx(er,{className:"w-5 h-5"}),a.jsx("span",{className:"text-[9px] font-bold uppercase",children:"Back"})]}),a.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0 mx-2"}),a.jsx("div",{className:"flex flex-col items-center justify-center mr-2",children:a.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase rotate-180",style:{writingMode:"vertical-rl"},children:S})}),a.jsx("div",{className:"flex gap-3",children:(Si=ab.find(G=>G.name===S))==null?void 0:Si.items.map((G,se)=>a.jsx("button",{onClick:()=>oe(G,"image"),className:"bg-white w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-50 border border-slate-200 transition-all hover:scale-105 hover:shadow-sm",children:a.jsx("img",{src:G,alt:"Sticker",className:"w-10 h-10 object-contain pointer-events-none"})},se))})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{var G;return(G=Q.current)==null?void 0:G.click()},className:"h-20 w-20 bg-slate-50 hover:bg-slate-100 rounded-xl text-slate-700 font-bold flex flex-col items-center justify-center gap-2 border border-slate-200 transition-all shrink-0",children:[a.jsx(rs,{className:"w-6 h-6 text-slate-900"}),a.jsx("span",{className:"text-[10px] uppercase",children:"Upload"})]}),a.jsx("input",{type:"file",ref:Q,onChange:J,className:"hidden",accept:"image/*"}),a.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>oe(X("circle"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:a.jsx(Nf,{className:"w-6 h-6 text-slate-700"})}),a.jsx("button",{onClick:()=>oe(X("square"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:a.jsx(Rf,{className:"w-6 h-6 text-slate-700"})}),a.jsx("button",{onClick:()=>oe(X("triangle"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:a.jsx(MN,{className:"w-6 h-6 text-slate-700"})}),a.jsx("button",{onClick:()=>oe(X("heart"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:a.jsx(DN,{className:"w-6 h-6 text-red-500"})}),a.jsx("button",{onClick:()=>oe(X("star"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:a.jsx(Jp,{className:"w-6 h-6 text-slate-900"})}),a.jsx("button",{onClick:le,className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors font-bold text-xs text-slate-700",children:"TXT"})]}),a.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0 mx-2"}),ab.map(G=>a.jsxs("button",{onClick:()=>I(G.name),className:"bg-white w-20 h-20 rounded-xl flex flex-col items-center justify-center hover:bg-slate-50 border border-slate-200 transition-all hover:scale-105 hover:shadow-sm gap-1",children:[a.jsxs("div",{className:"relative w-8 h-8",children:[a.jsx("img",{src:G.items[0],alt:"Pack",className:"w-full h-full object-contain pointer-events-none opacity-80"}),a.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full border border-white"})]}),a.jsx("span",{className:"text-[9px] font-bold text-slate-600 uppercase",children:G.name})]},G.name))]})}),j==="canvas"&&a.jsxs("div",{className:"flex items-center gap-6 px-6 min-w-max h-full",children:[a.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl flex flex-col justify-center gap-1 w-48 shrink-0 border border-slate-100",children:[a.jsx("div",{className:"flex justify-between text-[10px] text-slate-500 font-bold uppercase",children:a.jsxs("span",{children:["Slides (",y,")"]})}),a.jsx("input",{type:"range",min:"2",max:"10",value:y,onChange:G=>w(parseInt(G.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>b("square"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${x==="square"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Square 1:1"}),a.jsx("button",{onClick:()=>b("portrait"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${x==="portrait"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Portrait 4:5"})]}),a.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),a.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100 flex items-center justify-between gap-3 shrink-0",children:[a.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Background"}),a.jsx("input",{type:"color",value:v,onChange:G=>_(G.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-0"})]})]})]})]})]})},S8=t=>{if(t==="Unknown")return"";const e=t.toUpperCase().split("").map(n=>127397+n.charCodeAt(0));return String.fromCodePoint(...e)},k8=t=>new Date(t).toLocaleString("id-ID",{month:"short"}),So=({title:t,icon:e,children:n,defaultOpen:r=!1,className:s=""})=>{const[i,o]=L.useState(r);return a.jsxs("div",{className:`bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden transition-all duration-300 ${s}`,children:[a.jsxs("div",{className:"p-5 flex items-center justify-between cursor-pointer hover:bg-slate-50/50 transition-colors",onClick:()=>o(!i),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[e,a.jsx("h3",{className:"text-sm font-bold text-slate-900",children:t})]}),a.jsx("div",{className:`p-2 rounded-full text-slate-400 transition-transform duration-300 ${i?"rotate-180 bg-slate-50":""}`,children:a.jsx($n,{className:"w-4 h-4"})})]}),a.jsx("div",{className:`transition-[max-height,opacity] duration-500 ease-in-out overflow-hidden ${i?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:a.jsx("div",{className:"p-5 pt-0 border-t border-slate-50",children:n})})]})},C8=({data:t,labelType:e})=>{if(!t||t.length===0)return a.jsx("div",{className:"h-40 flex items-center justify-center text-slate-300",children:"No Data"});const n=200,r=600,s=30,o=Math.max(...t.map(c=>c.value),5)*1.2,l=t.map((c,u)=>{const d=s+u/(t.length-1||1)*(r-2*s),m=n-s-c.value/o*(n-2*s);return`${d},${m}`}).join(" ");return a.jsxs("div",{className:"w-full overflow-visible",children:[a.jsxs("svg",{viewBox:`0 0 ${r} ${n}`,className:"w-full h-auto overflow-visible",children:[a.jsx("line",{x1:s,y1:s,x2:r-s,y2:s,stroke:"#f1f5f9",strokeWidth:"1",strokeDasharray:"4 4"}),a.jsx("line",{x1:s,y1:n/2,x2:r-s,y2:n/2,stroke:"#f1f5f9",strokeWidth:"1",strokeDasharray:"4 4"}),a.jsx("line",{x1:s,y1:n-s,x2:r-s,y2:n-s,stroke:"#e2e8f0",strokeWidth:"1"}),t.length>1&&a.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"3",points:l,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((c,u)=>{const d=s+u/(t.length-1||1)*(r-2*s),m=n-s-c.value/o*(n-2*s);return a.jsxs("g",{className:"group",children:[a.jsx("circle",{cx:d,cy:m,r:"4",fill:"white",stroke:"#3b82f6",strokeWidth:"2.5",className:"transition-all duration-300 group-hover:r-6"}),a.jsx("text",{x:d,y:m-12,textAnchor:"middle",fontSize:"12",fontWeight:"bold",fill:"#1e293b",className:"opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:c.value})]},u)})]}),a.jsx("div",{className:"flex justify-between px-2 mt-2 text-[10px] text-slate-400 font-medium",children:t.map((c,u)=>t.length>12&&u%2!==0?null:a.jsx("span",{children:c.label},u))})]})},ll=({title:t,items:e,color:n="blue"})=>{const r=e&&e.length>0?Math.max(...e.map(i=>i.count),1):1,s={blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",pink:"bg-pink-500",amber:"bg-amber-500"};return a.jsxs("div",{className:"bg-slate-50/50 p-4 rounded-xl border border-slate-100 h-full flex flex-col",children:[a.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${s[n]}`})," ",t]}),!e||e.length===0?a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center py-4 rounded-lg",children:a.jsx("span",{className:"text-[10px] font-medium text-slate-400 italic",children:"Belum ada data"})}):a.jsx("div",{className:"space-y-3",children:e.map(i=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-slate-600 mb-1",children:[a.jsx("span",{className:"truncate pr-2 max-w-[120px]",children:i.label}),a.jsx("span",{children:i.count})]}),a.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1 overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${s[n]||"bg-slate-800"}`,style:{width:`${i.count/r*100}%`}})})]},i.id))})]})},A8=()=>{const[t,e]=L.useState(!0),[n,r]=L.useState(!1),[s,i]=L.useState(!1),[o,l]=L.useState("week"),[c,u]=L.useState(!1),[d,m]=L.useState(!1),[g,y]=L.useState(null),[w,x]=L.useState([]),[b,v]=L.useState(!1),_=async()=>{e(!0),await jS("Admin Dashboard Accessed","User opened dashboard view");const[A,F,P]=await Promise.all([xw(),g3(),ja("home_promo_enabled")]);y(A),x(F),u(P!=="false"),e(!1)};L.useEffect(()=>{_()},[]);const T=()=>{i(!0)},R=async()=>{r(!0),i(!1);try{await x3();const A=await xw();A&&y(F=>F?{...F,logs:A.logs}:A)}catch(A){console.error("Gagal menghapus log:",A),alert("Gagal menghapus log.")}finally{r(!1)}},j=async()=>{m(!0);const A=!c;u(A);try{await La("home_promo_enabled",A.toString())}catch(F){console.error(F),u(!A)}finally{m(!1)}},V=L.useMemo(()=>{if(!(g!=null&&g.allStats))return[];const A=g.allStats;if(o==="week")return A.slice(-7).map(F=>({label:F.date.slice(5),value:F.visitors||0}));if(o==="month")return A.slice(-30).map(F=>({label:F.date.slice(8),value:F.visitors||0}));if(o==="year"){const F={};for(let P=11;P>=0;P--){const D=new Date;D.setMonth(D.getMonth()-P);const M=D.toISOString().slice(0,7);F[M]=0}return A.forEach(P=>{const D=P.date.slice(0,7);F.hasOwnProperty(D)&&(F[D]+=P.visitors||0)}),Object.entries(F).map(([P,D])=>({label:k8(P+"-01"),value:D}))}return[]},[g,o]),S=A=>new Date(A).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});if(t)return a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"})});if(!g)return a.jsx("div",{className:"p-10 text-center",children:"Failed to load data."});const I=g.allStats.length>1?Math.round((g.allStats[g.allStats.length-1].visitors-g.allStats[g.allStats.length-2].visitors)/(g.allStats[g.allStats.length-2].visitors||1)*100):0,C=b?w:w.slice(0,3);return a.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 md:p-8 animate-fade-in",children:[a.jsx(Fa,{isOpen:s,title:"Bersihkan Log Sistem?",description:"Tindakan ini akan menghapus semua riwayat aktivitas sistem secara permanen. Anda tidak dapat membatalkan ini.",confirmText:"Ya, Bersihkan",onConfirm:R,onCancel:()=>i(!1)}),a.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"Dashboard Overview"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Real-time insight & system health."})]}),a.jsxs("button",{onClick:_,className:"bg-white border border-slate-200 text-slate-600 px-4 py-2 rounded-xl text-xs font-bold flex items-center gap-2 hover:bg-slate-50 hover:text-slate-900 transition-colors shadow-sm",children:[a.jsx(da,{className:"w-3.5 h-3.5"})," Refresh Data"]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center shrink-0",children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/8860/8860683.png",className:"w-6 h-6 object-contain opacity-80",alt:"Visitor"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900 leading-none",children:g.totalVisitors7Days}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Visitors (7d)"})]}),I!==0&&a.jsxs("span",{className:`ml-auto text-[10px] font-bold px-1.5 py-0.5 rounded ${I>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[I>0?"+":"",I,"%"]})]}),a.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center shrink-0",children:a.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/8860/8860683.png",className:"w-6 h-6 object-contain opacity-80",alt:"All Time"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900 leading-none",children:g.totalVisitorsAllTime}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"All Time"})]})]}),a.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-900 text-white flex items-center justify-center shrink-0",children:a.jsx(Sd,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900 leading-none",children:w.length}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Messages"})]})]}),a.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-50 text-red-600 flex items-center justify-center shrink-0",children:a.jsx(ha,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900 leading-none",children:g.totalErrors}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Errors"})]})]})]}),a.jsx(So,{title:"Marketing & Configuration",icon:a.jsx(DT,{className:"w-5 h-5 text-purple-600"}),defaultOpen:!0,children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-slate-800",children:"Home Popup Promo"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:'Iklan "Project Unggulan" muncul 3 detik setelah masuk Home.'})]}),a.jsx("button",{onClick:j,disabled:d,className:`
                                    relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2
                                    ${c?"bg-purple-600":"bg-slate-200"}
                                    ${d?"opacity-50 cursor-wait":""}
                                `,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition duration-200 ease-in-out ${c?"translate-x-6":"translate-x-1"}`})})]})})}),a.jsx(So,{title:"Popular Content & Insights",icon:a.jsx(Jp,{className:"w-5 h-5 text-amber-500"}),defaultOpen:!1,children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[a.jsx(ll,{title:"Top Menus",items:g.topMenus,color:"blue"}),a.jsx(ll,{title:"Top Projects",items:g.topProjects,color:"purple"}),a.jsx(ll,{title:"Top Blogs",items:g.topBlogs,color:"green"}),a.jsx(ll,{title:"Top Photos",items:g.topPhotos,color:"pink"}),a.jsx(ll,{title:"Top Music",items:g.topMusic,color:"amber"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs(So,{title:`Inbox Rahasia (${w.length})`,icon:a.jsx(Sd,{className:"w-5 h-5 text-slate-900"}),defaultOpen:!1,children:[a.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar pr-2",children:w.length===0?a.jsx("div",{className:"p-8 text-center text-slate-400 text-xs italic",children:"Belum ada pesan."}):a.jsx("div",{className:"space-y-3 pt-2",children:C.map(A=>a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:"text-[10px] font-bold bg-slate-200 text-slate-600 px-2 py-0.5 rounded",children:"Anonim"}),a.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:S(A.timestamp)})]}),a.jsx("p",{className:"text-slate-700 text-xs leading-relaxed whitespace-pre-wrap",children:A.content})]},A.id))})}),w.length>3&&a.jsx("div",{className:"pt-3 flex justify-center",children:a.jsx("button",{onClick:()=>v(!b),className:"text-[10px] font-bold text-slate-500 hover:text-slate-800 flex items-center gap-1",children:b?"Sembunyikan":"Lihat Semua"})})]})}),a.jsx("div",{className:"lg:col-span-2",children:a.jsxs(So,{title:"Traffic Trend",icon:a.jsx(Fg,{className:"w-5 h-5 text-blue-600"}),defaultOpen:!1,children:[a.jsx("div",{className:"flex justify-end mb-4",children:a.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[a.jsx("button",{onClick:()=>l("week"),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${o==="week"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Week"}),a.jsx("button",{onClick:()=>l("month"),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${o==="month"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Month"}),a.jsx("button",{onClick:()=>l("year"),className:`px-3 py-1 text-[10px] font-bold rounded-md transition-all ${o==="year"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Year"})]})}),a.jsx(C8,{data:V,labelType:o==="year"?"month":"day"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(So,{title:"System Logs",icon:a.jsx(ha,{className:"w-5 h-5 text-slate-600"}),defaultOpen:!1,children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[a.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Recent Activity"}),a.jsx("button",{onClick:T,disabled:n,className:"text-[10px] font-bold text-red-500 hover:text-red-700 hover:bg-red-50 px-2 py-1 rounded transition-colors flex items-center gap-1",children:n?"Cleaning...":a.jsxs(a.Fragment,{children:[a.jsx(gr,{className:"w-3 h-3"})," Hapus Semua Log"]})})]}),a.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto custom-scrollbar",children:g.logs.length===0?a.jsx("p",{className:"text-slate-400 text-xs italic text-center py-4",children:"No logs recorded."}):g.logs.map(A=>a.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-slate-50 rounded-lg transition-colors border-b border-slate-50 last:border-0",children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${A.type==="error"?"bg-red-500":A.type==="info"?"bg-blue-500":"bg-slate-400"}`}),a.jsx("span",{className:"text-[10px] font-mono text-slate-400 w-28 shrink-0",children:new Date(A.timestamp).toLocaleString("id-ID",{hour:"2-digit",minute:"2-digit",day:"numeric",month:"short"})}),a.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-bold text-slate-700 truncate",children:A.message}),A.details&&a.jsx("span",{className:"text-[10px] text-slate-400 truncate border-l border-slate-200 pl-2 hidden sm:inline",children:A.details})]})]},A.id))})]}),a.jsx(So,{title:"Demographics",icon:a.jsx(tc,{className:"w-5 h-5 text-indigo-500"}),defaultOpen:!1,children:a.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pt-2",children:g.geoStats.length===0?a.jsx("p",{className:"text-slate-400 text-xs italic",children:"No data yet."}):g.geoStats.map((A,F)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-lg w-6 text-center",children:S8(A.country)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-slate-700 mb-1",children:[a.jsx("span",{children:A.country}),a.jsx("span",{children:A.count})]}),a.jsx("div",{className:"w-full bg-slate-100 rounded-full h-1.5 overflow-hidden",children:a.jsx("div",{className:"bg-indigo-500 h-full rounded-full",style:{width:`${A.count/g.totalVisitorsAllTime*100}%`}})})]})]},F))})})]}),a.jsxs("div",{className:"bg-slate-900 p-6 rounded-[2rem] text-white shadow-xl relative overflow-hidden flex items-center justify-between",children:[a.jsxs("div",{className:"relative z-10",children:[a.jsxs("h3",{className:"text-sm font-bold mb-1 flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})," System Operational"]}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"Database Connected  API OK"})]}),a.jsx("div",{className:"relative z-10 text-right",children:a.jsx("p",{className:"text-[10px] text-slate-500",children:"v2.4.3 (Stable)"})}),a.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-blue-600/20 rounded-full blur-3xl pointer-events-none"})]})]})]})},Pk=({onClose:t})=>{const e=br();L.useEffect(()=>{t||window.scrollTo(0,0)},[t]);const n=()=>{t?t():e(-1)};return a.jsx("div",{className:`bg-white text-slate-900 pb-20 pt-12 min-h-full ${t?"":"min-h-screen animate-fade-in"}`,children:a.jsxs("div",{className:"max-w-3xl mx-auto px-6",children:[a.jsxs("button",{onClick:n,className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[a.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:t?a.jsx($n,{className:"w-4 h-4"}):a.jsx(er,{className:"w-4 h-4"})}),t?"Tutup":"Kembali"]}),a.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-2 tracking-tight",children:"Kebijakan Privasi"}),a.jsxs("p",{className:"text-slate-500 text-lg font-medium mb-12",children:["Terakhir diperbarui: ",new Date().getFullYear()]}),a.jsxs("div",{className:"prose prose-slate max-w-none prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-600 prose-p:leading-relaxed",children:[a.jsxs("p",{children:["Selamat datang di ",a.jsx("strong",{children:"irfanrizkiaditri.site"}),' (selanjutnya disebut "Website"). Website ini adalah platform personal yang mencakup portofolio, blog, galeri visual, serta berbagai aplikasi eksperimental seperti Fanra AI Studio, IG Seamless Studio, dan Fanragem.']}),a.jsx("p",{children:"Kami menghargai privasi Anda. Kebijakan ini menjelaskan bagaimana kami mengelola data Anda di seluruh aspek website ini."}),a.jsx("h3",{children:"1. Cakupan Layanan"}),a.jsx("p",{children:"Kebijakan ini berlaku untuk semua fitur yang tersedia di irfanrizkiaditri.site, termasuk namun tidak terbatas pada:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Halaman Utama & Portofolio:"})," Menampilkan proyek dan informasi profil."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Fanra AI Studio:"})," Asisten AI dan alat pengeditan gambar."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"IG Seamless Studio:"})," Alat pembuat carousel Instagram."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Fanragem:"})," Simulasi permainan ekosistem."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Visual Diaries (Galeri):"})," Arsip foto dan memori."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Blog:"})," Tulisan dan artikel."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Public Wall (Pesan):"})," Fitur kirim pesan publik."]})]}),a.jsx("h3",{children:"2. Data yang Kami Kumpulkan"}),a.jsx("p",{children:"Kami mengumpulkan informasi seminimal mungkin untuk memastikan fitur berjalan lancar:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Autentikasi (Google Login):"})," Jika Anda memilih untuk login (misalnya untuk mengakses fitur admin atau fitur khusus), kami menyimpan Nama, Email, Foto Profil, dan User ID (UID) yang disediakan oleh Google melalui Firebase Authentication. Kami tidak memiliki akses ke password Anda."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"API Key Pribadi:"})," Untuk fitur yang memerlukan API Key pribadi Anda (seperti di Fanra AI Studio), key tersebut disimpan secara ",a.jsx("strong",{children:"terenkripsi di Local Storage browser Anda"}),". Kami tidak menyimpannya di server kami."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Konten Pesan (Public Wall):"}),' Pesan yang Anda kirimkan melalui fitur "Send Message" atau "Public Wall" bersifat ',a.jsx("strong",{children:"publik"})," dan dapat dilihat oleh pengunjung lain. Harap tidak membagikan informasi sensitif di sana."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"File Media & Gambar:"}),a.jsx("ul",{className:"list-circle pl-5 mt-1 space-y-1",children:a.jsxs("li",{children:["Gambar yang Anda unggah di ",a.jsx("strong",{children:"Fanra AI Studio"})," atau ",a.jsx("strong",{children:"IG Seamless Studio"})," diproses secara lokal di browser atau dikirim sementara ke API pihak ketiga (seperti Google Gemini Vision) hanya untuk keperluan pemrosesan. Gambar tersebut ",a.jsx("strong",{children:"tidak disimpan"})," secara permanen di server kami setelah sesi berakhir."]})})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Data Aktivitas (Analytics):"})," Kami merekam data statistik anonim seperti jumlah kunjungan halaman dan klik pada proyek untuk memantau performa website."]})]}),a.jsx("h3",{children:"3. Penggunaan Data"}),a.jsx("p",{children:"Informasi yang dikumpulkan digunakan untuk:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[a.jsx("li",{children:"Menyediakan fungsionalitas fitur interaktif (Chatbot, Image Editing, Game)."}),a.jsx("li",{children:"Menyimpan preferensi pengguna (seperti Tema, Status Login, Progress Game di Fanragem)."}),a.jsx("li",{children:"Memastikan keamanan dan mencegah penyalahgunaan sistem (Spam)."})]}),a.jsx("h3",{children:"4. Layanan Pihak Ketiga"}),a.jsx("p",{children:"Website ini terhubung dengan layanan pihak ketiga. Data Anda mungkin diproses oleh layanan berikut sesuai kebijakan privasi mereka:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Google Firebase:"})," Infrastruktur backend (Auth, Database, Hosting)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Google Generative AI (Gemini):"})," Pemrosesan teks dan gambar cerdas."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Spotify:"})," Widget pemutar musik."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Remove.bg / Layanan Editing Lain:"})," Pemrosesan gambar spesifik."]})]}),a.jsx("h3",{children:"5. Cookies & Penyimpanan Lokal (Local Storage)"}),a.jsx("p",{children:"Kami menggunakan penyimpanan lokal browser Anda untuk:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[a.jsx("li",{children:"Menyimpan API Key Anda (agar tidak perlu input ulang)."}),a.jsx("li",{children:"Menyimpan progress permainan (Fanragem)."}),a.jsx("li",{children:"Menyimpan preferensi tampilan."})]}),a.jsx("p",{className:"mt-2",children:"Anda dapat menghapus data ini kapan saja dengan membersihkan cache browser Anda."}),a.jsx("h3",{children:"6. Keamanan"}),a.jsx("p",{children:"Kami menerapkan langkah-langkah keamanan standar untuk melindungi data Anda. Namun, perlu diingat bahwa tidak ada metode transmisi data melalui internet yang 100% aman."}),a.jsx("h3",{children:"7. Perubahan Kebijakan"}),a.jsx("p",{children:"Kebijakan ini dapat diperbarui sewaktu-waktu. Perubahan signifikan akan diinformasikan melalui notifikasi di website."})]}),a.jsx("div",{className:"mt-12 pt-8 border-t border-slate-200",children:a.jsxs("p",{className:"text-sm text-slate-400",children:["Jika ada pertanyaan mengenai privasi data Anda, silakan hubungi pengembang melalui email: ",a.jsx("a",{href:"mailto:irfanrizkiaditri@gmail.com",className:"text-blue-600 hover:underline",children:"irfanrizkiaditri@gmail.com"})]})})]})})},Mk=({onClose:t})=>{const e=br();L.useEffect(()=>{t||window.scrollTo(0,0)},[t]);const n=()=>{t?t():e(-1)};return a.jsx("div",{className:`bg-white text-slate-900 pb-20 pt-12 min-h-full ${t?"":"min-h-screen animate-fade-in"}`,children:a.jsxs("div",{className:"max-w-3xl mx-auto px-6",children:[a.jsxs("button",{onClick:n,className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[a.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:t?a.jsx($n,{className:"w-4 h-4"}):a.jsx(er,{className:"w-4 h-4"})}),t?"Tutup":"Kembali"]}),a.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-2 tracking-tight",children:"Syarat & Ketentuan"}),a.jsxs("p",{className:"text-slate-500 text-lg font-medium mb-12",children:["Berlaku Efektif: ",new Date().getFullYear()]}),a.jsxs("div",{className:"prose prose-slate max-w-none prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-600 prose-p:leading-relaxed",children:[a.jsxs("p",{children:["Dengan mengakses dan menggunakan situs web ",a.jsx("strong",{children:"Irfan Rizki Aditri (irfanrizkiaditri.site)"})," serta fitur ",a.jsx("strong",{children:"Fanra AI Studio"})," di dalamnya, Anda setuju untuk mematuhi syarat dan ketentuan berikut."]}),a.jsx("h3",{children:"1. Penggunaan Wajar"}),a.jsx("p",{children:"Situs ini adalah proyek personal yang mencakup portfolio dan alat eksperimental (AI Tools). Anda diizinkan menggunakan fitur yang tersedia untuk tujuan personal, edukasi, dan non-komersial. Dilarang keras melakukan:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[a.jsxs("li",{children:["Upaya peretasan, ",a.jsx("em",{children:"spamming"}),", atau membebani server secara sengaja (DDoS)."]}),a.jsx("li",{children:'Mengunggah konten ilegal, pornografi, atau ujaran kebencian di fitur "Public Wall" atau saat memproses gambar.'}),a.jsx("li",{children:"Mencoba merekayasa balik (reverse engineer) kode sumber aplikasi ini untuk tujuan jahat."})]}),a.jsx("h3",{children:"2. Penafian Hasil AI (AI Disclaimer)"}),a.jsx("p",{children:"Fitur Chatbot dan Pengolahan Gambar di situs ini menggunakan teknologi Kecerdasan Buatan (Google Gemini). Harap diperhatikan:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[a.jsx("li",{children:'AI dapat membuat kesalahan atau memberikan informasi yang tidak akurat ("Halusinasi AI").'}),a.jsx("li",{children:"Jangan gunakan saran medis, hukum, atau finansial dari AI ini sebagai acuan mutlak."}),a.jsx("li",{children:"Kami tidak bertanggung jawab atas kerugian yang timbul akibat penggunaan informasi yang dihasilkan oleh AI."})]}),a.jsx("h3",{children:"3. Penggunaan API Key Mandiri"}),a.jsx("p",{children:"Fitur tertentu memungkinkan Anda memasukkan API Key pribadi (BYOK - Bring Your Own Key). Dengan menggunakan fitur ini:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[a.jsx("li",{children:"Anda bertanggung jawab penuh atas penggunaan kuota, biaya (billing), dan keamanan API Key Anda sendiri di platform penyedia (Google Cloud, Remove.bg, dll)."}),a.jsx("li",{children:"Fanra AI Studio tidak bertanggung jawab atas tagihan yang muncul akibat kelalaian Anda dalam mengelola API Key."})]}),a.jsx("h3",{children:"4. Konten Pengguna (Public Wall)"}),a.jsx("p",{children:'Pesan yang Anda kirimkan ke fitur "Public Wall" dapat dilihat oleh siapa saja. Kami berhak (namun tidak berkewajiban) untuk menghapus pesan yang mengandung unsur SARA, promosi spam, atau konten yang tidak pantas tanpa pemberitahuan sebelumnya.'}),a.jsx("h3",{children:"5. Hak Kekayaan Intelektual"}),a.jsxs("p",{children:["Seluruh desain antarmuka, logo, kode program, dan konten tulisan (Blog) di situs ini adalah hak cipta milik ",a.jsx("strong",{children:"Irfan Rizki Aditri"}),", kecuali dinyatakan lain (seperti library open-source atau aset pihak ketiga). Anda tidak diperkenankan menyalin atau menduplikasi situs ini untuk tujuan komersial tanpa izin tertulis."]}),a.jsx("h3",{children:"6. Batasan Tanggung Jawab"}),a.jsxs("p",{children:['Layanan ini disediakan "sebagaimana adanya" (as is). Pengembang tidak memberikan jaminan bahwa layanan akan selalu aktif tanpa gangguan (uptime 100%) atau bebas dari ',a.jsx("em",{children:"bug"}),". Penggunaan situs ini sepenuhnya merupakan risiko pengguna."]}),a.jsx("h3",{children:"7. Perubahan Ketentuan"}),a.jsx("p",{children:"Kami dapat merevisi syarat dan ketentuan ini sewaktu-waktu. Dengan terus menggunakan situs ini setelah perubahan dilakukan, Anda dianggap menyetujui ketentuan yang baru."})]})]})})},N8=({isAdmin:t})=>{const e=br(),[n,r]=L.useState("https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=1000&auto=format&fit=crop"),[s,i]=L.useState(!1),[o,l]=L.useState([]),[c,u]=L.useState(!1),d=L.useRef(null);L.useEffect(()=>{(async()=>{try{const b=await ja("aboutme_profile_photo");b&&r(b)}catch{}})()},[]);const m=async()=>{if(t){i(!0),u(!0);try{const x=await H0();l(x)}catch(x){console.error("Failed to load gallery",x)}finally{u(!1)}}},g=async x=>{r(x);try{await La("aboutme_profile_photo",x),$e("Foto profil diperbarui!")}catch{$e("Gagal menyimpan foto.")}i(!1)},y=x=>{var v;const b=(v=x.target.files)==null?void 0:v[0];if(b){const _=new FileReader;_.onloadend=()=>{const T=_.result;g(T)},_.readAsDataURL(b)}};return a.jsx("div",{className:"min-h-screen bg-white animate-fade-in pb-20 pt-8 md:pt-12",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-6",children:[a.jsx("div",{className:"mb-8 md:mb-12",children:a.jsxs("button",{onClick:()=>e("/"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 transition-colors w-fit",children:[a.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:a.jsx(er,{className:"w-4 h-4"})}),a.jsx("span",{children:"Kembali ke Home"})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-10 md:gap-16 items-start",children:[a.jsxs("div",{className:"w-full md:w-1/3 flex flex-col gap-6 sticky top-24",children:[a.jsxs("div",{className:"relative aspect-[3/4] w-full rounded-2xl overflow-hidden shadow-sm border border-slate-200 bg-slate-50 group",children:[a.jsx("img",{src:n,alt:"Profile",className:"w-full h-full object-cover"}),t&&a.jsx("button",{onClick:m,className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",children:a.jsxs("div",{className:"bg-white text-slate-900 px-4 py-2 rounded-full text-xs font-bold flex items-center gap-2 shadow-lg",children:[a.jsx(Xi,{className:"w-3 h-3"})," Ganti Foto"]})})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("a",{href:"https://github.com",target:"_blank",rel:"noreferrer",className:"flex items-center justify-between px-4 py-3 bg-white border border-slate-200 rounded-xl text-slate-600 hover:text-slate-900 hover:border-slate-400 transition-all group",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(VT,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs font-bold",children:"Github"})]}),a.jsx("span",{className:"text-[10px] text-slate-400 group-hover:text-slate-600",children:"Explore Code"})]}),a.jsxs("a",{href:"https://instagram.com",target:"_blank",rel:"noreferrer",className:"flex items-center justify-between px-4 py-3 bg-white border border-slate-200 rounded-xl text-slate-600 hover:text-slate-900 hover:border-slate-400 transition-all group",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(UT,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs font-bold",children:"IG"})]}),a.jsx("span",{className:"text-[10px] text-slate-400 group-hover:text-slate-600",children:"Daily Updates"})]}),a.jsxs("a",{href:"mailto:irfanrizkiaditri@gmail.com",className:"flex items-center justify-between px-4 py-3 bg-white border border-slate-200 rounded-xl text-slate-600 hover:text-slate-900 hover:border-slate-400 transition-all group",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(BT,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs font-bold",children:"Email"})]}),a.jsx("span",{className:"text-[10px] text-slate-400 group-hover:text-slate-600",children:"Contact Me"})]})]})]}),a.jsxs("div",{className:"w-full md:w-2/3 flex flex-col gap-8",children:[a.jsx("div",{className:"border-b border-slate-100 pb-4",children:a.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 mb-2 tracking-tight",children:"About Me"})}),a.jsx("div",{className:"prose prose-slate prose-p:text-slate-600 prose-p:leading-relaxed prose-p:text-sm md:prose-p:text-base max-w-none font-medium whitespace-pre-wrap",children:a.jsx(ft,{id:"aboutme_full_story",defaultText:`Halo, saya Irfan Rizki Aditri, biasa dipanggil Fanra.
Saya adalah mahasiswa Fisika angkatan 2025 di Institut Teknologi Sumatera (ITERA), dengan ketertarikan besar pada teknologi dan pengembangan digital.

Perjalanan saya di dunia pemrograman tidak dimulai dari ruang kelas, melainkan dari rasa ingin tahu. Ketika pertama kali melihat bot WhatsApp yang mampu merespons pesan secara otomatis menggunakan AI, saya mulai tertarik untuk memahami bagaimana sistem tersebut bekerja. Dari rasa penasaran itu, saya masuk lebih dalam ke dunia coding dan mulai membangun berbagai proyek secara mandiri.

Saya adalah pembelajar independen yang berkembang melalui eksplorasi. Dalam prosesnya, saya memanfaatkan AI sebagai alat bantu untuk mempercepat pemahaman dan eksekusi. Bagi saya, teknologi bukan sekadar alat, tetapi medium untuk menciptakan sesuatu yang memiliki nilai dan dampak.

Sebelum fokus pada jalur ini, saya telah mencoba berbagai bentuk karya, mulai dari menulis novel, membuat komik, menciptakan lagu, hingga menjadi content creator. Setiap percobaan memberi saya satu kesadaran penting: saya ingin meninggalkan jejak yang nyata dan bertahan lama.

Website ini adalah representasi dari visi tersebut. Sebuah ruang digital yang saya bangun untuk mendokumentasikan perjalanan, mengembangkan kemampuan, dan menciptakan identitas yang tumbuh seiring waktu. Saya lahir dan besar di Pulau Sumatera, dan saya percaya bahwa latar belakang bukanlah batas, melainkan titik awal.

Saya tidak hanya ingin dikenal.
Saya ingin berkembang, berkontribusi, dan menciptakan sesuatu yang layak untuk diingat.`,isAdmin:t,tag:"div",multiline:!0,className:"text-justify"})})]})]}),s&&a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl p-6 shadow-2xl animate-fade-in-up border border-slate-100 max-h-[80vh] flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Ganti Foto Profil"}),a.jsx("button",{onClick:()=>i(!1),className:"w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-500",children:""})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{onClick:()=>{var x;return(x=d.current)==null?void 0:x.click()},className:"bg-slate-50 hover:bg-blue-50 border-2 border-dashed border-slate-200 hover:border-blue-400 rounded-2xl p-6 flex flex-col items-center justify-center cursor-pointer transition-all gap-3 h-40",children:[a.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-sm",children:a.jsx(rs,{className:"w-5 h-5 text-blue-600"})}),a.jsx("span",{className:"text-xs font-bold text-slate-600",children:"Upload dari Komputer"}),a.jsx("input",{type:"file",ref:d,onChange:y,className:"hidden",accept:"image/*"})]}),c&&a.jsx("div",{className:"bg-slate-50 rounded-2xl p-6 flex items-center justify-center h-40",children:a.jsx("div",{className:"w-6 h-6 border-2 border-slate-300 border-t-slate-900 rounded-full animate-spin"})})]}),!c&&o.length>0&&a.jsxs("div",{children:[a.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[a.jsx(nc,{className:"w-3 h-3"})," Pilih dari Galeri"]}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:o.map(x=>a.jsxs("div",{onClick:()=>g(x.src),className:"aspect-square rounded-xl overflow-hidden cursor-pointer hover:opacity-80 border border-slate-100 bg-slate-100 relative group",children:[a.jsx("img",{src:x.src,className:"w-full h-full object-cover",alt:"Gallery"}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"})]},x.id))})]}),!c&&o.length===0&&a.jsx("p",{className:"text-center text-xs text-slate-400 italic",children:"Belum ada foto di menu Gallery."})]})]})})]})})},R8=({onLogout:t})=>{const e=br(),[n,r]=L.useState(!1),[s,i]=L.useState({x:20,y:window.innerHeight-80}),[o,l]=L.useState(!1),c=L.useRef({x:0,y:0}),u=L.useRef({x:0,y:0}),d=L.useRef(null);L.useEffect(()=>{const v=T=>{if(!o)return;T.preventDefault();const R=T.clientX-c.current.x,j=T.clientY-c.current.y,V=Math.max(10,Math.min(window.innerWidth-60,u.current.x+R)),S=Math.max(10,Math.min(window.innerHeight-60,u.current.y+j));i({x:V,y:S})},_=()=>{l(!1)};return o&&(window.addEventListener("mousemove",v),window.addEventListener("mouseup",_)),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",_)}},[o]);const m=v=>{n||(l(!0),c.current={x:v.clientX,y:v.clientY},u.current={...s})},g=v=>{n||(l(!0),c.current={x:v.touches[0].clientX,y:v.touches[0].clientY},u.current={...s})},y=v=>{if(!o)return;const _=v.touches[0].clientX-c.current.x,T=v.touches[0].clientY-c.current.y,R=Math.max(10,Math.min(window.innerWidth-60,u.current.x+_)),j=Math.max(10,Math.min(window.innerHeight-60,u.current.y+T));i({x:R,y:j})},w=v=>{Math.sqrt(Math.pow(v.clientX-c.current.x,2)+Math.pow(v.clientY-c.current.y,2))<5&&r(!n)},x=()=>{yw(),alert("Cache teks di memori telah dihapus. Halaman akan dimuat ulang."),window.location.reload()},b=()=>{confirm("Yakin ingin reset total? Ini akan menghapus semua pengaturan lokal dan login.")&&(localStorage.clear(),yw(),window.location.reload())};return a.jsxs(a.Fragment,{children:[n&&a.jsx("div",{className:"fixed inset-0 z-[998]",onClick:()=>r(!1)}),a.jsx("div",{className:"fixed z-[999]",style:{left:s.x,top:s.y},children:a.jsxs("div",{className:"relative",children:[a.jsx("button",{onMouseDown:m,onClick:w,onTouchStart:g,onTouchMove:y,onTouchEnd:()=>l(!1),className:`w-12 h-12 rounded-full flex items-center justify-center shadow-xl transition-all duration-200 cursor-grab active:cursor-grabbing ${n?"bg-slate-900 text-white rotate-90 scale-110":"bg-white text-slate-700 border border-slate-200 hover:scale-105"}`,style:{touchAction:"none"},children:a.jsx(Kp,{className:"w-6 h-6"})}),n&&a.jsxs("div",{ref:d,className:"absolute bottom-16 left-0 bg-white/90 backdrop-blur-md border border-slate-200 rounded-2xl shadow-2xl p-2 w-60 flex flex-col gap-1 animate-fade-in-up origin-bottom-left",children:[a.jsx("div",{className:"px-3 py-2 border-b border-slate-100 mb-1",children:a.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Admin Tools"})}),a.jsxs("button",{onClick:()=>{e("/dashboard"),r(!1)},className:"flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-900 hover:bg-slate-100 rounded-xl transition-colors text-left",children:[a.jsx("div",{className:"p-1.5 bg-slate-200 text-slate-700 rounded-lg",children:a.jsx(FT,{className:"w-3.5 h-3.5"})}),a.jsxs("div",{children:[a.jsx("span",{className:"block font-bold text-xs",children:"Open Dashboard"}),a.jsx("span",{className:"block text-[9px] text-slate-400",children:"View analytics & charts"})]})]}),a.jsx("div",{className:"h-px bg-slate-100 mx-2 my-1"}),a.jsxs("button",{onClick:x,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:text-blue-600 rounded-xl transition-colors text-left",children:[a.jsx("div",{className:"p-1.5 bg-blue-50 text-blue-500 rounded-lg",children:a.jsx(da,{className:"w-3.5 h-3.5"})}),a.jsxs("div",{children:[a.jsx("span",{className:"block font-bold text-xs",children:"Hapus Cache"}),a.jsx("span",{className:"block text-[9px] text-slate-400",children:"Fix teks nyangkut"})]})]}),a.jsxs("button",{onClick:b,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-red-50 hover:text-red-600 rounded-xl transition-colors text-left",children:[a.jsx("div",{className:"p-1.5 bg-red-50 text-red-500 rounded-lg",children:a.jsx(gr,{className:"w-3.5 h-3.5"})}),a.jsxs("div",{children:[a.jsx("span",{className:"block font-bold text-xs",children:"Reset Total"}),a.jsx("span",{className:"block text-[9px] text-slate-400",children:"Hapus data lokal"})]})]})]})]})})]})},P8="https://cdn-icons-png.flaticon.com/128/16739/16739754.png",M8=()=>{const[t,e]=L.useState([]),[n,r]=L.useState(!1),[s,i]=L.useState(""),o=L.useRef(null),l=L.useRef(null);return L.useEffect(()=>{const c=u=>{const d=u.detail.message;e(m=>m[m.length-1]===d?m:[...m,d])};return window.addEventListener("fanra-toast",c),()=>window.removeEventListener("fanra-toast",c)},[]),L.useEffect(()=>{if(!n&&t.length>0&&!s){const c=t[0];i(c),requestAnimationFrame(()=>{r(!0)}),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{r(!1)},3e3)}},[t,n,s]),L.useEffect(()=>{!n&&s&&(l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{e(c=>c.slice(1)),i("")},700))},[n,s]),L.useEffect(()=>()=>{o.current&&clearTimeout(o.current),l.current&&clearTimeout(l.current)},[]),s?a.jsx("div",{className:"fixed top-0 left-0 right-0 z-[9999] flex justify-center pointer-events-none p-4",children:a.jsxs("div",{className:`
            bg-white/90 backdrop-blur-md 
            border border-slate-200 
            shadow-[0_8px_30px_rgb(0,0,0,0.12)] 
            rounded-full 
            pl-3 pr-6 py-3
            flex items-center gap-4
            min-w-[280px] max-w-[90vw] 
            pointer-events-auto 
            transform transition-all duration-700 cubic-bezier(0.23, 1, 0.32, 1)
            will-change-transform
            ${n?"translate-y-4 opacity-100":"-translate-y-[200%] opacity-0"}
        `,children:[a.jsx("div",{className:"w-10 h-10 bg-slate-50 rounded-full flex items-center justify-center shrink-0 shadow-inner border border-slate-100",children:a.jsx("img",{src:P8,alt:"Notif",className:"w-6 h-6 object-contain"})}),a.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[a.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"Fanra Studio"}),a.jsx("p",{className:"text-sm font-bold text-slate-800 leading-tight truncate",children:s})]})]})}):null},D8=({type:t,onClose:e})=>{const[n,r]=L.useState(!1);L.useEffect(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{r(!0)})})},[]);const s=()=>{r(!1),setTimeout(()=>{e()},500)};return a.jsxs("div",{className:"fixed inset-0 z-[200] flex items-end justify-center pointer-events-none",children:[a.jsx("div",{className:`fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity duration-500 ease-in-out pointer-events-auto ${n?"opacity-100":"opacity-0"}`,onClick:s}),a.jsxs("div",{className:`
                    w-full h-[95vh] md:h-[90vh] bg-white rounded-t-[2.5rem] shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.2)] 
                    overflow-hidden transform transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1) pointer-events-auto relative
                    ${n?"translate-y-0":"translate-y-full"}
                `,children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 h-8 flex justify-center pt-3 z-20 bg-white cursor-pointer",onClick:s,children:a.jsx("div",{className:"w-12 h-1.5 bg-slate-200 rounded-full"})}),a.jsxs("div",{className:"h-full overflow-y-auto custom-scrollbar pt-4",children:[t==="privacy"&&a.jsx(Pk,{onClose:s}),t==="terms"&&a.jsx(Mk,{onClose:s})]})]})]})},j8=({isOpen:t,onClose:e,onSuccess:n})=>{const[r,s]=L.useState(["","","","",""]),[i,o]=L.useState(!1),l=L.useRef([]);L.useEffect(()=>{t&&(s(["","","","",""]),o(!1),setTimeout(()=>{var d;return(d=l.current[0])==null?void 0:d.focus()},100))},[t]);const c=(d,m)=>{var y;if(!/^\d*$/.test(m))return;const g=[...r];g[d]=m,s(g),o(!1),m&&d<4&&((y=l.current[d+1])==null||y.focus()),g.every(w=>w!=="")&&(g.join("")==="47326"?(n(),e()):(o(!0),setTimeout(()=>{var x;s(["","","","",""]),(x=l.current[0])==null||x.focus()},500)))},u=(d,m)=>{var g;m.key==="Backspace"&&!r[d]&&d>0&&((g=l.current[d-1])==null||g.focus())};return t?a.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/80 backdrop-blur-sm p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-2xl max-w-sm w-full relative overflow-hidden",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-800",children:""}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-900 rounded-full flex items-center justify-center text-white mb-6 shadow-lg shadow-slate-900/30",children:a.jsx(rc,{className:"w-5 h-5"})}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Admin Access"}),a.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Enter secure PIN to continue"}),a.jsx("div",{className:"flex gap-3 mb-6",children:r.map((d,m)=>a.jsx("input",{ref:g=>{l.current[m]=g},type:"password",maxLength:1,value:d,onChange:g=>c(m,g.target.value),onKeyDown:g=>u(m,g),className:`w-10 h-12 border-2 rounded-lg text-center text-xl font-bold bg-slate-50 focus:bg-white transition-all outline-none ${i?"border-red-500 text-red-500 shake":"border-slate-200 focus:border-slate-900 text-slate-900"}`,autoComplete:"off",inputMode:"numeric"},m))}),i&&a.jsx("p",{className:"text-xs font-bold text-red-500 animate-pulse",children:"Access Denied"})]})]})}):null},Jn=({children:t,isAdmin:e,onOpenPrivacy:n,onOpenTerms:r})=>a.jsxs("div",{className:"min-h-screen flex flex-col font-sans bg-[#fafafa] relative overflow-x-hidden",children:[a.jsx(b3,{isAdmin:e}),a.jsx("main",{className:"flex-grow pt-24 pb-12 animate-fade-in-up",children:t}),a.jsx(M3,{}),a.jsx(D3,{}),a.jsxs("footer",{className:"bg-slate-950 text-white pt-32 pb-12 px-6 overflow-hidden relative mt-12",children:[a.jsx("div",{className:"absolute inset-0 z-0 opacity-20 pointer-events-none mix-blend-overlay",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),a.jsx("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"20px 20px",maskImage:"linear-gradient(to bottom, transparent, black)"}}),a.jsx("div",{className:"absolute top-0 left-0 w-full overflow-hidden leading-[0] z-20",children:a.jsx("svg",{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",className:"relative block w-full h-[50px] md:h-[90px] fill-[#fafafa]",children:a.jsx("path",{d:"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"})})}),a.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-12 mb-16",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx(ec,{className:"w-12 h-12",variant:"light"}),a.jsx(ft,{id:"footer_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:e,tag:"h2",className:"text-2xl font-black tracking-tighter uppercase"})]}),a.jsx(Jr,{to:"/aboutme",className:"text-sm font-bold text-slate-500 hover:text-white transition-colors inline-block mb-4",children:"About Me"}),a.jsx(ft,{id:"footer_brand_desc",defaultText:"Seorang mahasiswa ITERA angkatan 2025 yang hobi mengulik kode dan berbagi cerita lewat ruang digital.",isAdmin:e,tag:"p",multiline:!0,className:"text-slate-500 text-sm max-w-sm leading-relaxed font-medium"})]}),a.jsxs("div",{children:[a.jsx(ft,{id:"footer_explore_title",defaultText:"Explore",isAdmin:e,tag:"h3",className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6"}),a.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[a.jsxs("ul",{className:"space-y-4 text-sm font-bold text-slate-400",children:[a.jsx("li",{children:a.jsx(Jr,{to:"/",className:"hover:text-white transition-colors hover:translate-x-1 inline-block",children:"Home"})}),a.jsx("li",{children:a.jsx(Jr,{to:"/projects",className:"hover:text-white transition-colors hover:translate-x-1 inline-block",children:"Projects"})}),a.jsx("li",{children:a.jsx(Jr,{to:"/blog",className:"hover:text-white transition-colors hover:translate-x-1 inline-block",children:"Blog"})})]}),a.jsxs("ul",{className:"space-y-4 text-sm font-bold text-slate-400",children:[a.jsx("li",{children:a.jsx(Jr,{to:"/gallery",className:"hover:text-white transition-colors hover:translate-x-1 inline-block",children:"Gallery"})}),a.jsx("li",{children:a.jsx(Jr,{to:"/music",className:"hover:text-white transition-colors hover:translate-x-1 inline-block",children:"Music"})}),a.jsx("li",{children:a.jsx(Jr,{to:"/messages",className:"hover:text-white transition-colors hover:translate-x-1 inline-block",children:"Pesan"})})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Communication"}),a.jsxs("a",{href:"mailto:irfanrizkiaditri@gmail.com",className:"text-sm font-bold text-slate-200 hover:text-white transition-colors flex items-center gap-3 group",children:[a.jsx(BT,{className:"w-5 h-5 group-hover:scale-110 transition-transform text-slate-400 group-hover:text-white"}),a.jsx(ft,{id:"footer_email",defaultText:"irfanrizkiaditri@gmail.com",isAdmin:e,tag:"span"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Social Discovery"}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:a.jsx(UT,{className:"w-6 h-6"})}),a.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:a.jsx(VT,{className:"w-6 h-6"})}),a.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:a.jsx(OT,{className:"w-6 h-6"})})]})]})]}),a.jsxs("div",{className:"pt-8 border-t border-slate-900 flex flex-col md:flex-row justify-between items-center gap-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 md:gap-8",children:[a.jsxs("p",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:[" ",new Date().getFullYear(),"  ",a.jsx(ft,{id:"footer_copyright",defaultText:"PERSPECTIVE OF FANRA",isAdmin:e,tag:"span"})]}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("button",{onClick:n,className:"text-[9px] font-bold text-slate-500 hover:text-white uppercase tracking-widest transition-colors",children:"Privacy Policy"}),a.jsx("button",{onClick:r,className:"text-[9px] font-bold text-slate-500 hover:text-white uppercase tracking-widest transition-colors",children:"Terms of Service"})]})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsx("span",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:a.jsx(ft,{id:"footer_location",defaultText:"Sumatera, Indonesia",isAdmin:e,tag:"span"})})})]})]}),a.jsx("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] opacity-[0.02] pointer-events-none translate-x-20 -translate-y-20",children:a.jsx(ec,{className:"w-full h-full",variant:"light"})})]})]}),L8=()=>{const{pathname:t}=xi(),e=L.useRef(null);return L.useEffect(()=>{const n=e.current;e.current=t;const r=t==="/privacy"||t==="/terms",s=(n==null?void 0:n.startsWith("/gallery"))&&t.startsWith("/gallery");!r&&!s&&window.scrollTo(0,0)},[t]),null},F8=()=>{const t=xi(),e=br(),n=t.state,r=(n==null?void 0:n.background)||t,s=t.pathname==="/privacy"&&(n==null?void 0:n.background),i=t.pathname==="/terms"&&(n==null?void 0:n.background),o=s||i,[l,c]=L.useState(!0),[u,d]=L.useState(!1),[m,g]=L.useState(!1);L.useEffect(()=>{v3(),localStorage.removeItem("fanra_admin_auth")},[]),L.useEffect(()=>{const T=R=>{if(R.key.toLowerCase()==="f"){const j=R.target;if(j.tagName==="INPUT"||j.tagName==="TEXTAREA"||j.tagName==="SELECT"||j.isContentEditable)return;R.preventDefault(),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(S=>{console.error(`Error attempting to enable fullscreen: ${S.message}`)})}};return window.addEventListener("keydown",T),()=>{window.removeEventListener("keydown",T)}},[]);const y=()=>{window.scrollTo(0,0),c(!1)},w=()=>{g(!0)},x=()=>{e("/privacy",{state:{background:t}})},b=()=>{e("/terms",{state:{background:t}})},v=()=>{e(-1)},_={isAdmin:m,onOpenPrivacy:x,onOpenTerms:b};return a.jsxs(a.Fragment,{children:[a.jsx(L8,{}),a.jsx(M8,{}),a.jsx(j8,{isOpen:u,onClose:()=>d(!1),onSuccess:w}),m&&a.jsx(R8,{onLogout:()=>g(!1)}),a.jsxs(lN,{location:r,children:[a.jsx(tn,{path:"/",element:a.jsx(Jn,{..._,children:a.jsx(N3,{onTriggerAdmin:()=>d(!0),isAdmin:m})})}),a.jsx(tn,{path:"/projects",element:a.jsx(Jn,{..._,children:a.jsx(ww,{isAdmin:m})})}),a.jsx(tn,{path:"/projects/:projectId",element:a.jsx(Jn,{..._,children:a.jsx(ww,{isAdmin:m})})}),a.jsx(tn,{path:"/blog",element:a.jsx(Jn,{..._,children:a.jsx(_w,{isAdmin:m})})}),a.jsx(tn,{path:"/blog/:id",element:a.jsx(Jn,{..._,children:a.jsx(_w,{isAdmin:m})})}),a.jsx(tn,{path:"/gallery",element:a.jsx(Jn,{..._,children:a.jsx(bw,{isAdmin:m})})}),a.jsx(tn,{path:"/gallery/:photoId",element:a.jsx(Jn,{..._,children:a.jsx(bw,{isAdmin:m})})}),a.jsx(tn,{path:"/music",element:a.jsx(Jn,{..._,children:a.jsx(R3,{isAdmin:m})})}),a.jsx(tn,{path:"/messages",element:a.jsx(Jn,{..._,children:a.jsx(P3,{isAdmin:m})})}),a.jsx(tn,{path:"/dashboard",element:a.jsx(Jn,{..._,children:a.jsx(A8,{})})}),a.jsx(tn,{path:"/aboutme",element:a.jsx(Jn,{..._,children:a.jsx(N8,{isAdmin:m})})}),a.jsx(tn,{path:"/studio",element:a.jsx(w8,{isAdmin:m,onExit:()=>window.location.href="/#/projects"})}),a.jsx(tn,{path:"/panorama",element:a.jsx(I8,{onExit:()=>window.location.href="/#/projects"})}),a.jsx(tn,{path:"/privacy",element:a.jsx(Jn,{..._,children:a.jsx(Pk,{})})}),a.jsx(tn,{path:"/terms",element:a.jsx(Jn,{..._,children:a.jsx(Mk,{})})}),a.jsx(tn,{path:"*",element:a.jsx(oN,{to:"/",replace:!0})})]}),o&&a.jsx(D8,{type:s?"privacy":"terms",onClose:v}),l&&a.jsx(S3,{onComplete:y,onTriggerAdmin:()=>d(!0)})]})},U8=()=>a.jsx(mN,{children:a.jsx(F8,{})}),Dk=document.getElementById("root");if(!Dk)throw new Error("Could not find root element to mount to");const V8=Xf.createRoot(Dk);V8.render(a.jsx(Dl.StrictMode,{children:a.jsx(U8,{})}));

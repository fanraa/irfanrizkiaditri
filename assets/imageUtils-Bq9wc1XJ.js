const f=(d,s=1e3,l=.6)=>new Promise((o,t)=>{const c=new FileReader;c.readAsDataURL(d),c.onload=h=>{var a;const e=new Image;e.src=(a=h.target)==null?void 0:a.result,e.onload=()=>{const g=document.createElement("canvas");let n=e.width,r=e.height;n>r?n>s&&(r*=s/n,n=s):r>s&&(n*=s/r,r=s),g.width=n,g.height=r;const i=g.getContext("2d");i==null||i.drawImage(e,0,0,n,r);const m=g.toDataURL("image/jpeg",l);o(m)},e.onerror=g=>t(g)},c.onerror=h=>t(h)}),I=d=>new Promise((s,l)=>{const o=new Image;o.src=`data:image/png;base64,${d}`,o.crossOrigin="Anonymous",o.onload=()=>{const t=document.createElement("canvas");t.width=o.width,t.height=o.height;const c=t.getContext("2d");if(!c){l(new Error("Could not get canvas context"));return}c.drawImage(o,0,0);const h=c.getImageData(0,0,t.width,t.height),e=h.data;for(let a=0;a<e.length;a+=4){const g=e[a],n=e[a+1],r=e[a+2],i=Math.max(g,r);let m=n-i;const w=10,p=60;if(m>w){const u=1-Math.max(0,Math.min(1,(m-w)/(p-w)));e[a+3]=Math.floor(255*u),n>i&&(e[a+1]=i)}}c.putImageData(h,0,0),s(t.toDataURL("image/png",1).split(",")[1])},o.onerror=t=>l(new Error("Failed to load image for processing"))});export{f as c,I as r};

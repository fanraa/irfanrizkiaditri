import{a as Je,u as Ue,r as a,j as e,R as K,h as je,s as i,U as we,i as Ne,T as V,P as ye,c as A,k as Oe,C as He,m as _e,b as ke,n as Ke,o as q,p as Ve}from"./index-Cw6E8Nps.js";import{c as Ce}from"./imageUtils-Bq9wc1XJ.js";const Xe=({isAdmin:z})=>{const R=Je(),{photoId:S}=Ue(),[n,Se]=a.useState([]),[L,W]=a.useState(!0),[v,Me]=a.useState("All"),[l,B]=a.useState(null),M=9,[j,Q]=a.useState(M),[$,X]=a.useState(!1),[Z,ee]=a.useState(!1),[Y,Pe]=a.useState("add"),[o,x]=a.useState({}),[w,m]=a.useState(!1),[p,J]=a.useState(!1),[N,u]=a.useState(null),[P,c]=a.useState("idle"),[qe,te]=a.useState(null),I=a.useRef(null),[se,ae]=a.useState(null),[le,re]=a.useState(null),[U,ne]=a.useState(null),[f,E]=a.useState(null),[T,oe]=a.useState(!1),[ie,y]=a.useState(!1),[h,ce]=a.useState(""),[O,de]=a.useState(""),[D,ue]=a.useState("");a.useEffect(()=>(T||$?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[T,$]);const g=async()=>{W(!0);try{const t=await Ke();Se(t)}catch(t){console.error("Failed to fetch photos:",t),i("Gagal memuat galeri.")}finally{W(!1)}};a.useEffect(()=>(g(),()=>{o.src&&o.src.startsWith("blob:")&&URL.revokeObjectURL(o.src)}),[]),a.useEffect(()=>{if(S&&n.length>0){const t=n.find(s=>s.id===S);t&&(B(t),setTimeout(()=>oe(!0),50))}else S||(oe(!1),setTimeout(()=>B(null),500))},[S,n]);const b=t=>{t?R(`/gallery/${t.id}`):(y(!1),R("/gallery"))},Ie=async()=>{if(l){if(!h.trim()||!D){i("Keterangan dan Tahun wajib diisi.");return}m(!0);try{await q(l.id,{caption:h,month:O,year:D}),i("Info berhasil diperbarui!"),y(!1),g(),B({...l,caption:h,month:O,year:D})}catch(t){console.error(t),i("Gagal menyimpan perubahan.")}finally{m(!1)}}},Ee=()=>{X(!0),setTimeout(()=>ee(!0),50)},G=()=>{ee(!1),setTimeout(()=>{X(!1),x({}),te(null)},500)},Te=()=>{Pe("add"),x({src:"",caption:"",month:"Januari",year:new Date().getFullYear().toString(),timestamp:Date.now()}),te(null),Ee()},xe=(t,s)=>{t.stopPropagation(),ce(s.caption),de(s.month),ue(s.year),!l||l.id!==s.id?(R(`/gallery/${s.id}`),setTimeout(()=>y(!0),100)):y(!0)},me=(t,s)=>{t.stopPropagation(),E(s)},he=async()=>{if(f){ne(f);try{await Ve(f),i("Foto berhasil dihapus."),g(),(l==null?void 0:l.id)===f&&b(null)}catch(t){console.error("Delete failed:",t),i("Gagal menghapus foto.")}finally{ne(null),E(null)}}},be=(t,s)=>{t.stopPropagation(),ae(s),I.current&&(I.current.value="",I.current.click())},De=async t=>{var r;const s=(r=t.target.files)==null?void 0:r[0];if(s&&se){const d=se;re(d),u(0),c("uploading");try{const C=await Ce(s,800,.5);u(50),await q(d,{src:C},Ye=>{u(50+Ye/2)}),i("Foto berhasil diganti!"),g()}catch(C){console.error("Gagal ganti foto:",C),i("Gagal mengganti foto.")}finally{re(null),ae(null),u(null),c("idle")}}},Ge=async()=>{if(!o.src&&!o.year){i("Gambar dan Tahun wajib diisi.");return}m(!0),c("uploading"),u(0),G();try{const t={...o};Y==="add"?await je(t,s=>u(s)):o.id&&await q(o.id,t,s=>u(s)),c("done"),i(Y==="add"?"Memori berhasil ditambahkan!":"Memori berhasil diperbarui!"),g(),setTimeout(()=>{c("idle"),u(null)},2e3)}catch(t){console.error(t),i("Gagal menyimpan memori."),c("idle")}finally{m(!1)}},Fe=async t=>{var r;const s=(r=t.target.files)==null?void 0:r[0];if(s){J(!0),c("compressing");try{const d=await Ce(s,800,.5);x(C=>({...C,src:d}))}catch(d){console.error("Processing failed",d),i("Failed to process image.")}finally{J(!1),c("idle")}}},F=a.useMemo(()=>v==="All"?n:n.filter(t=>t.year===v),[n,v]),Ae=a.useMemo(()=>["All",...Array.from(new Set(n.map(s=>s.year))).sort((s,r)=>r.localeCompare(s))],[n]),H=a.useMemo(()=>F.slice(0,j),[F,j]),_=a.useMemo(()=>{const t={};return H.forEach(s=>{t[s.year]||(t[s.year]=[]),t[s.year].push(s)}),t},[H]),ze=a.useMemo(()=>Object.keys(_).sort((t,s)=>s.localeCompare(t)),[_]),Re=j<F.length,Le=j>M,Be=()=>Q(t=>t+M),$e=()=>{var t;Q(M),(t=document.getElementById("gallery-top-anchor"))==null||t.scrollIntoView({behavior:"smooth"})},k=a.useMemo(()=>l?n.findIndex(t=>t.id===l.id):-1,[l,n]),pe=k<n.length-1,fe=k>0,ge=()=>{pe&&b(n[k+1])},ve=()=>{fe&&b(n[k-1])};return a.useEffect(()=>{const t=s=>{l&&(s.key==="ArrowRight"&&ge(),s.key==="ArrowLeft"&&ve(),s.key==="Escape"&&b(null))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[l,k,n]),a.useEffect(()=>{const t=new IntersectionObserver(r=>{r.forEach(d=>{d.isIntersecting&&(d.target.classList.add("opacity-100","translate-y-0"),d.target.classList.remove("opacity-0","translate-y-10"),t.unobserve(d.target))})},{threshold:.1});return document.querySelectorAll(".scroll-reveal").forEach(r=>t.observe(r)),()=>t.disconnect()},[n,j,v]),e.jsxs("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:[(P==="uploading"||P==="compressing"||N!==null&&N<100)&&e.jsxs("div",{className:"fixed bottom-6 right-6 z-[10000] bg-slate-900 text-white p-4 rounded-2xl shadow-2xl flex items-center gap-4 animate-fade-in-up max-w-xs w-full",children:[e.jsxs("div",{className:"relative w-10 h-10 flex items-center justify-center",children:[e.jsxs("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[e.jsx("path",{className:"text-slate-700",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"text-blue-500 transition-all duration-300 ease-out",strokeDasharray:`${N||0}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"4"})]}),e.jsxs("div",{className:"absolute text-[10px] font-bold",children:[Math.round(N||0),"%"]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-slate-200 mb-0.5",children:P==="compressing"?"Mengoptimalkan Gambar...":P==="saving"?"Menyiapkan Data...":"Mengunggah ke Cloud..."}),e.jsxs("p",{className:"text-[10px] text-slate-400 truncate",children:["Mohon tunggu, sedang diproses (",Math.round(N||0),"%)"]})]}),e.jsx("button",{onClick:()=>{c("idle"),u(null),m(!1),J(!1)},className:"p-2 hover:bg-white/10 rounded-lg text-slate-400 hover:text-white transition-colors text-[10px] font-bold uppercase",children:"Batal"})]}),e.jsx("input",{type:"file",ref:I,onChange:De,accept:"image/*",className:"hidden"}),e.jsxs("div",{id:"gallery-top-anchor",className:"max-w-7xl mx-auto px-6 pt-12 pb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-slate-900 mb-4 tracking-tight",children:["Visual ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Diaries"})]}),e.jsx("p",{className:"text-lg text-slate-500 max-w-2xl leading-relaxed",children:"Koleksi momen acak, dikelompokkan berdasarkan waktu."})]}),z&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>{const s={src:`https://picsum.photos/seed/${Math.floor(Math.random()*1e3)}/1200/800`,caption:"Template Gambar (Klik edit untuk ganti)",month:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][new Date().getMonth()],year:new Date().getFullYear().toString(),timestamp:Date.now()};m(!0),c("saving"),je(s).then(()=>{i("Template berhasil ditambahkan!"),g()}).catch(()=>i("Gagal menambah template.")).finally(()=>{m(!1),c("idle")})},disabled:w,className:"bg-blue-50 text-blue-600 px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-blue-100 transition-all border border-blue-100 active:scale-95 disabled:opacity-50",children:[e.jsx(K,{className:"w-5 h-5"}),"Tambah Template"]}),e.jsxs("button",{onClick:Te,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95",children:[e.jsx(we,{className:"w-5 h-5"}),"Tambah Memori"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-8",children:Ae.map(t=>e.jsx("button",{onClick:()=>Me(t),className:`px-5 py-2 rounded-full text-sm font-bold transition-all duration-300 ${v===t?"bg-slate-900 text-white shadow-lg shadow-slate-900/20":"bg-slate-50 text-slate-500 hover:bg-slate-100 hover:text-slate-900"}`,children:t},t))})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[L&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),e.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Galeri..."})]}),!L&&F.length===0&&e.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[e.jsx(Ne,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada foto di periode ini."})]}),!L&&H.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-16",children:ze.map(t=>e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-8 mt-4",children:[e.jsx("span",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tighter",children:t}),e.jsx("div",{className:"h-0.5 bg-slate-200 flex-1 rounded-full opacity-50"})]}),e.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-3 gap-6 space-y-6",children:_[t].map(s=>e.jsxs("div",{className:"break-inside-avoid relative group cursor-pointer rounded-2xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-lg transition-all duration-700 transform translate-z-0 scroll-reveal opacity-0 translate-y-10",onClick:()=>b(s),children:[le===s.id&&e.jsxs("div",{className:"absolute inset-0 z-30 bg-slate-900/50 backdrop-blur-sm flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-white/30 border-t-white rounded-full animate-spin mb-2"}),e.jsx("span",{className:"text-white text-[10px] font-bold uppercase tracking-wider",children:"Mengganti..."})]}),f===s.id&&e.jsxs("div",{className:"absolute inset-0 z-40 bg-red-600/90 backdrop-blur-sm flex flex-col items-center justify-center p-4 text-center animate-fade-in",onClick:r=>r.stopPropagation(),children:[e.jsx(V,{className:"w-8 h-8 text-white mb-2 animate-bounce"}),e.jsx("p",{className:"text-white text-sm font-black mb-4 uppercase tracking-tight",children:"Hapus Memori Ini?"}),e.jsxs("div",{className:"flex gap-2 w-full max-w-[160px]",children:[e.jsx("button",{onClick:r=>{r.stopPropagation(),he()},className:"flex-1 py-2 bg-white text-red-600 rounded-xl font-bold text-xs hover:bg-red-50 transition-colors shadow-lg",children:"Ya"}),e.jsx("button",{onClick:r=>{r.stopPropagation(),E(null)},className:"flex-1 py-2 bg-white/20 text-white border border-white/30 rounded-xl font-bold text-xs hover:bg-white/30 transition-colors",children:"Batal"})]})]}),e.jsx("img",{src:s.src,alt:s.caption,loading:"lazy",className:"w-full h-auto object-cover transform transition-transform duration-700 group-hover:scale-105"}),z&&e.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:r=>be(r,s.id),className:"p-2.5 bg-white text-slate-700 rounded-full shadow-md hover:bg-green-50 hover:text-green-600 transition-colors border border-slate-100",title:"Ganti Foto (Quick Swap)",children:e.jsx(K,{className:"w-4 h-4"})}),e.jsx("button",{onClick:r=>xe(r,s),className:"p-2.5 bg-white text-slate-700 rounded-full shadow-md hover:bg-blue-50 hover:text-blue-600 transition-colors border border-slate-100",title:"Edit Caption & Info",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx("button",{onClick:r=>me(r,s.id),disabled:U===s.id,className:`p-2.5 bg-white rounded-full shadow-md transition-colors border border-slate-100 ${U===s.id?"text-slate-300 cursor-wait":"text-red-500 hover:bg-red-50"}`,title:"Hapus",children:U===s.id?e.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):e.jsx(V,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute bottom-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("span",{className:"bg-black/30 backdrop-blur-md text-white text-[10px] font-bold px-3 py-1.5 rounded-full border border-white/20 uppercase tracking-widest shadow-sm",children:s.month})})]},s.id||s.src))})]},t))}),e.jsxs("div",{className:"flex flex-col items-center gap-3 mt-20 mb-8",children:[Re&&e.jsxs("button",{onClick:Be,className:"px-6 py-3 rounded-full bg-white border border-slate-200 text-slate-700 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Momen Terdahulu ",e.jsx(A,{className:"w-4 h-4"})]}),Le&&e.jsxs("button",{onClick:$e,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Tutup / Sembunyikan ",e.jsx(A,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]}),l&&Oe.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100000] flex items-end justify-center pointer-events-none",children:[e.jsx("div",{className:`fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity duration-500 ease-in-out pointer-events-auto ${T?"opacity-100":"opacity-0"}`,onClick:()=>b(null)}),e.jsxs("div",{className:`
                            w-full h-[95vh] md:h-[90vh] bg-white rounded-t-[2.5rem] shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.2)] 
                            overflow-hidden transform transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1) pointer-events-auto relative flex flex-col
                            ${T?"translate-y-0":"translate-y-full"}
                        `,onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-8 flex justify-center pt-3 z-20 bg-white cursor-pointer",onClick:()=>b(null),children:e.jsx("div",{className:"w-12 h-1.5 bg-slate-200 rounded-full"})}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative w-full h-full p-4 md:p-8 pt-12",children:[e.jsxs("div",{className:"flex-1 w-full h-full flex items-center justify-center relative min-h-0",children:[fe&&e.jsx("button",{onClick:ve,className:"absolute left-0 md:left-4 top-1/2 -translate-y-1/2 z-[100001] p-3 bg-white/80 hover:bg-white text-slate-800 rounded-full shadow-lg border border-slate-200 transition-all hover:scale-110 active:scale-95 group hidden md:block",title:"Sebelumnya (Arrow Left)",children:e.jsx(He,{className:"w-6 h-6"})}),pe&&e.jsx("button",{onClick:ge,className:"absolute right-0 md:right-4 top-1/2 -translate-y-1/2 z-[100001] p-3 bg-white/80 hover:bg-white text-slate-800 rounded-full shadow-lg border border-slate-200 transition-all hover:scale-110 active:scale-95 group hidden md:block",title:"Selanjutnya (Arrow Right)",children:e.jsx(_e,{className:"w-6 h-6"})}),le===l.id&&e.jsxs("div",{className:"absolute inset-0 z-30 bg-slate-900/50 backdrop-blur-sm flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-white/30 border-t-white rounded-full animate-spin mb-3"}),e.jsx("span",{className:"text-white text-xs font-bold uppercase tracking-wider",children:"Updating..."})]}),e.jsx("img",{src:l.src,alt:l.caption,className:"max-w-full max-h-full object-contain shadow-2xl rounded-lg"})]}),e.jsxs("div",{className:"w-full max-w-3xl mx-auto mt-6 text-center shrink-0 pb-8 animate-fade-in-up",children:[ie?e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:h,onChange:t=>ce(t.target.value.slice(0,150)),className:`
                                                    w-full bg-slate-50 border-2 border-slate-200 rounded-2xl px-5 py-4 text-slate-900 text-center font-medium focus:border-blue-500 focus:bg-white outline-none transition-all resize-none leading-relaxed
                                                    ${h.length>100?"text-base":h.length>50?"text-lg":"text-xl"}
                                                `,placeholder:"Tulis keterangan...",rows:3,autoFocus:!0}),e.jsxs("div",{className:"absolute bottom-3 right-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:[h.length,"/150"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[e.jsxs("div",{className:"relative min-w-[140px]",children:[e.jsx("select",{value:O,onChange:t=>de(t.target.value),className:"w-full bg-slate-100 border border-slate-200 rounded-full px-5 py-2.5 text-slate-700 text-xs font-bold uppercase tracking-widest outline-none focus:ring-2 focus:ring-blue-500/20 appearance-none cursor-pointer",children:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"].map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:e.jsx(A,{className:"w-3.5 h-3.5"})})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"number",value:D,onChange:t=>ue(t.target.value),className:"w-24 bg-slate-100 border border-slate-200 rounded-full px-5 py-2.5 text-slate-700 text-xs font-bold uppercase tracking-widest outline-none focus:ring-2 focus:ring-blue-500/20 text-center",placeholder:"Tahun"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:`
                                            text-slate-900 font-medium leading-relaxed transition-all duration-300
                                            ${l.caption.length>100?"text-base":l.caption.length>50?"text-lg":"text-xl"}
                                        `,children:['"',l.caption,'"']}),e.jsx("div",{className:"mt-3 flex items-center justify-center gap-3",children:e.jsxs("div",{className:"inline-block px-4 py-1.5 bg-slate-100 rounded-full text-slate-600 text-[10px] font-bold uppercase tracking-widest border border-slate-200",children:[l.month," ",l.year]})})]}),z&&e.jsx("div",{className:"flex justify-center gap-3 mt-6 pt-6 border-t border-slate-100",children:ie?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:Ie,disabled:w,className:"px-8 py-2.5 bg-slate-900 text-white rounded-xl text-xs font-bold hover:bg-slate-800 transition-all shadow-lg active:scale-95 flex items-center gap-2",children:[w?e.jsx("div",{className:"w-3 h-3 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(ke,{className:"w-3.5 h-3.5"}),"Simpan Perubahan"]}),e.jsx("button",{onClick:()=>y(!1),className:"px-8 py-2.5 bg-slate-100 text-slate-500 hover:bg-slate-200 rounded-xl text-xs font-bold transition-all active:scale-95",children:"Batal"})]}):f===l.id?e.jsxs("div",{className:"flex items-center gap-3 animate-fade-in",children:[e.jsx("span",{className:"text-xs font-bold text-red-600 uppercase tracking-wider mr-2",children:"Hapus Foto?"}),e.jsx("button",{onClick:t=>{t.stopPropagation(),he()},className:"px-6 py-2 bg-red-600 text-white rounded-lg text-xs font-bold hover:bg-red-700 transition-colors shadow-md active:scale-95",children:"Ya, Hapus"}),e.jsx("button",{onClick:t=>{t.stopPropagation(),E(null)},className:"px-6 py-2 bg-slate-100 text-slate-600 hover:bg-slate-200 rounded-lg text-xs font-bold transition-colors active:scale-95",children:"Batal"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:t=>be(t,l.id),className:"px-4 py-2 bg-green-50 text-green-700 hover:bg-green-100 rounded-lg text-xs font-bold flex items-center gap-2 transition-colors border border-green-100",children:[e.jsx(K,{className:"w-3.5 h-3.5"})," Ganti Foto"]}),e.jsxs("button",{onClick:t=>xe(t,l),className:"px-4 py-2 bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg text-xs font-bold flex items-center gap-2 transition-colors border border-blue-100",children:[e.jsx(ye,{className:"w-3.5 h-3.5"})," Edit Info"]}),e.jsxs("button",{onClick:t=>me(t,l.id),className:"px-4 py-2 bg-red-50 text-red-700 hover:bg-red-100 rounded-lg text-xs font-bold flex items-center gap-2 transition-colors border border-red-100",children:[e.jsx(V,{className:"w-3.5 h-3.5"})," Hapus"]})]})})]})]})]})]}),document.body),$&&e.jsxs("div",{className:"fixed inset-0 z-[120] flex items-end justify-center pointer-events-none",children:[e.jsx("div",{className:`fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity duration-500 ease-in-out pointer-events-auto ${Z?"opacity-100":"opacity-0"}`,onClick:G}),e.jsxs("div",{className:`
                            w-full h-[96vh] bg-white rounded-t-[2rem] shadow-2xl 
                            overflow-hidden transform transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1) pointer-events-auto relative flex flex-col
                            ${Z?"translate-y-0":"translate-y-full"}
                        `,children:[e.jsx("div",{className:"flex-1 overflow-y-auto px-6 pt-10 pb-6 md:px-10 md:pt-10 md:pb-2",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[e.jsx("h3",{className:"text-3xl font-black text-slate-900 tracking-tight",children:Y==="add"?"Memori Baru":"Edit Memori"}),e.jsx("button",{onClick:G,className:"w-10 h-10 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-900 transition-colors",children:"âœ•"})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-8 min-h-0",children:[e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 tracking-wide",children:"Sumber Gambar"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("label",{className:`flex-1 cursor-pointer bg-slate-50 hover:bg-blue-50 border border-slate-200 hover:border-blue-200 text-slate-600 hover:text-blue-600 rounded-xl px-4 py-3 flex items-center justify-center gap-2 transition-all group ${p?"opacity-50 pointer-events-none":""}`,children:[p?e.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-blue-600 rounded-full animate-spin"}):e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-bold",children:p?"Memproses...":"Upload File"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Fe,className:"hidden",disabled:p})]})}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{type:"text",placeholder:"Atau tempel URL gambar...",value:o.src||"",onChange:t=>x(s=>({...s,src:t.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none",disabled:p})})]}),e.jsx("div",{className:"flex-1 bg-slate-50 rounded-2xl border border-slate-200 overflow-hidden relative group min-h-[200px]",children:o.src?e.jsx("img",{src:o.src,alt:"Preview",className:"w-full h-full object-contain bg-slate-100/50"}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-300",children:[e.jsx(Ne,{className:"w-12 h-12 mb-2 opacity-50"}),e.jsx("span",{className:"text-sm font-bold",children:"Belum Ada Gambar"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 tracking-wide",children:"Keterangan / Cerita"}),e.jsx("textarea",{value:o.caption||"",onChange:t=>x(s=>({...s,caption:t.target.value})),className:"flex-1 w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl text-slate-800 text-base focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none resize-none leading-relaxed placeholder:text-slate-400",placeholder:"Tulis sesuatu tentang momen ini..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 tracking-wide",children:"Bulan"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:o.month||"Januari",onChange:t=>x(s=>({...s,month:t.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none appearance-none font-bold cursor-pointer",children:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"].map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:e.jsx(A,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 tracking-wide",children:"Tahun"}),e.jsx("input",{type:"number",value:o.year||"",onChange:t=>x(s=>({...s,year:t.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none font-bold"})]})]}),e.jsx("div",{className:"pt-4 mt-auto",children:e.jsx("button",{onClick:Ge,disabled:w||p,className:"w-full py-4 bg-slate-900 text-white rounded-xl text-base font-bold hover:bg-slate-800 disabled:opacity-50 transition-all shadow-xl shadow-slate-900/10 active:scale-[0.98] flex items-center justify-center gap-3",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Menyimpan..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"w-5 h-5"}),e.jsx("span",{children:"Simpan Memori"})]})})})]})]})]})}),e.jsx("div",{className:"w-full h-8 flex justify-center items-center shrink-0 cursor-pointer hover:bg-slate-50 transition-colors border-t border-slate-100",onClick:G,children:e.jsx("div",{className:"w-16 h-1.5 bg-slate-300 rounded-full"})})]})]})]})};export{Xe as default};

function kk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Y_={exports:{}},Ud={},Q_={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tu=Symbol.for("react.element"),Ck=Symbol.for("react.portal"),Ak=Symbol.for("react.fragment"),Nk=Symbol.for("react.strict_mode"),Rk=Symbol.for("react.profiler"),Pk=Symbol.for("react.provider"),Mk=Symbol.for("react.context"),Dk=Symbol.for("react.forward_ref"),Lk=Symbol.for("react.suspense"),jk=Symbol.for("react.memo"),Fk=Symbol.for("react.lazy"),fy=Symbol.iterator;function Vk(t){return t===null||typeof t!="object"?null:(t=fy&&t[fy]||t["@@iterator"],typeof t=="function"?t:null)}var X_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z_=Object.assign,eb={};function ma(t,e,n){this.props=t,this.context=e,this.refs=eb,this.updater=n||X_}ma.prototype.isReactComponent={};ma.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ma.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tb(){}tb.prototype=ma.prototype;function km(t,e,n){this.props=t,this.context=e,this.refs=eb,this.updater=n||X_}var Cm=km.prototype=new tb;Cm.constructor=km;Z_(Cm,ma.prototype);Cm.isPureReactComponent=!0;var py=Array.isArray,nb=Object.prototype.hasOwnProperty,Am={current:null},rb={key:!0,ref:!0,__self:!0,__source:!0};function sb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)nb.call(e,r)&&!rb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:tu,type:t,key:i,ref:o,props:s,_owner:Am.current}}function Uk(t,e){return{$$typeof:tu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nm(t){return typeof t=="object"&&t!==null&&t.$$typeof===tu}function Ok(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var my=/\/+/g;function qh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ok(""+t.key):e.toString(36)}function vc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tu:case Ck:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+qh(o,0):r,py(s)?(n="",t!=null&&(n=t.replace(my,"$&/")+"/"),vc(s,e,n,"",function(c){return c})):s!=null&&(Nm(s)&&(s=Uk(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(my,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",py(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+qh(i,a);o+=vc(i,e,n,u,s)}else if(u=Vk(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+qh(i,a++),o+=vc(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gu(t,e,n){if(t==null)return t;var r=[],s=0;return vc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Bk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pn={current:null},xc={transition:null},zk={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:xc,ReactCurrentOwner:Am};function ib(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:Gu,forEach:function(t,e,n){Gu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gu(t,function(){e++}),e},toArray:function(t){return Gu(t,function(e){return e})||[]},only:function(t){if(!Nm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};qe.Component=ma;qe.Fragment=Ak;qe.Profiler=Rk;qe.PureComponent=km;qe.StrictMode=Nk;qe.Suspense=Lk;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zk;qe.act=ib;qe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Z_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Am.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)nb.call(e,u)&&!rb.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:tu,type:t.type,key:s,ref:i,props:r,_owner:o}};qe.createContext=function(t){return t={$$typeof:Mk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pk,_context:t},t.Consumer=t};qe.createElement=sb;qe.createFactory=function(t){var e=sb.bind(null,t);return e.type=t,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(t){return{$$typeof:Dk,render:t}};qe.isValidElement=Nm;qe.lazy=function(t){return{$$typeof:Fk,_payload:{_status:-1,_result:t},_init:Bk}};qe.memo=function(t,e){return{$$typeof:jk,type:t,compare:e===void 0?null:e}};qe.startTransition=function(t){var e=xc.transition;xc.transition={};try{t()}finally{xc.transition=e}};qe.unstable_act=ib;qe.useCallback=function(t,e){return Pn.current.useCallback(t,e)};qe.useContext=function(t){return Pn.current.useContext(t)};qe.useDebugValue=function(){};qe.useDeferredValue=function(t){return Pn.current.useDeferredValue(t)};qe.useEffect=function(t,e){return Pn.current.useEffect(t,e)};qe.useId=function(){return Pn.current.useId()};qe.useImperativeHandle=function(t,e,n){return Pn.current.useImperativeHandle(t,e,n)};qe.useInsertionEffect=function(t,e){return Pn.current.useInsertionEffect(t,e)};qe.useLayoutEffect=function(t,e){return Pn.current.useLayoutEffect(t,e)};qe.useMemo=function(t,e){return Pn.current.useMemo(t,e)};qe.useReducer=function(t,e,n){return Pn.current.useReducer(t,e,n)};qe.useRef=function(t){return Pn.current.useRef(t)};qe.useState=function(t){return Pn.current.useState(t)};qe.useSyncExternalStore=function(t,e,n){return Pn.current.useSyncExternalStore(t,e,n)};qe.useTransition=function(){return Pn.current.useTransition()};qe.version="18.3.1";Q_.exports=qe;var j=Q_.exports;const _l=Sm(j),Gk=kk({__proto__:null,default:_l},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hk=j,$k=Symbol.for("react.element"),qk=Symbol.for("react.fragment"),Wk=Object.prototype.hasOwnProperty,Kk=Hk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jk={key:!0,ref:!0,__self:!0,__source:!0};function ob(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Wk.call(e,r)&&!Jk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:$k,type:t,key:i,ref:o,props:s,_owner:Kk.current}}Ud.Fragment=qk;Ud.jsx=ob;Ud.jsxs=ob;Y_.exports=Ud;var l=Y_.exports,Hf={},ab={exports:{}},nr={},lb={exports:{}},ub={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ne,Y){var ue=ne.length;ne.push(Y);e:for(;0<ue;){var q=ue-1>>>1,$=ne[q];if(0<s($,Y))ne[q]=Y,ne[ue]=$,ue=q;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var Y=ne[0],ue=ne.pop();if(ue!==Y){ne[0]=ue;e:for(var q=0,$=ne.length,ce=$>>>1;q<ce;){var X=2*(q+1)-1,Z=ne[X],Ae=X+1,_e=ne[Ae];if(0>s(Z,ue))Ae<$&&0>s(_e,Z)?(ne[q]=_e,ne[Ae]=ue,q=Ae):(ne[q]=Z,ne[X]=ue,q=X);else if(Ae<$&&0>s(_e,ue))ne[q]=_e,ne[Ae]=ue,q=Ae;else break e}}return Y}function s(ne,Y){var ue=ne.sortIndex-Y.sortIndex;return ue!==0?ue:ne.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,m=null,g=3,y=!1,w=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(ne){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=ne)r(c),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(c)}}function R(ne){if(x=!1,T(ne),!w)if(n(u)!==null)w=!0,ye(L);else{var Y=n(c);Y!==null&&re(R,Y.startTime-ne)}}function L(ne,Y){w=!1,x&&(x=!1,v(C),C=-1),y=!0;var ue=g;try{for(T(Y),m=n(u);m!==null&&(!(m.expirationTime>Y)||ne&&!V());){var q=m.callback;if(typeof q=="function"){m.callback=null,g=m.priorityLevel;var $=q(m.expirationTime<=Y);Y=t.unstable_now(),typeof $=="function"?m.callback=$:m===n(u)&&r(u),T(Y)}else r(u);m=n(u)}if(m!==null)var ce=!0;else{var X=n(c);X!==null&&re(R,X.startTime-Y),ce=!1}return ce}finally{m=null,g=ue,y=!1}}var U=!1,S=null,C=-1,N=5,M=-1;function V(){return!(t.unstable_now()-M<N)}function P(){if(S!==null){var ne=t.unstable_now();M=ne;var Y=!0;try{Y=S(!0,ne)}finally{Y?D():(U=!1,S=null)}}else U=!1}var D;if(typeof b=="function")D=function(){b(P)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,G=k.port2;k.port1.onmessage=P,D=function(){G.postMessage(null)}}else D=function(){_(P,0)};function ye(ne){S=ne,U||(U=!0,D())}function re(ne,Y){C=_(function(){ne(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,ye(L))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(ne){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var ue=g;g=Y;try{return ne()}finally{g=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,Y){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ue=g;g=ne;try{return Y()}finally{g=ue}},t.unstable_scheduleCallback=function(ne,Y,ue){var q=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?q+ue:q):ue=q,ne){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ue+$,ne={id:d++,callback:Y,priorityLevel:ne,startTime:ue,expirationTime:$,sortIndex:-1},ue>q?(ne.sortIndex=ue,e(c,ne),n(u)===null&&ne===n(c)&&(x?(v(C),C=-1):x=!0,re(R,ue-q))):(ne.sortIndex=$,e(u,ne),w||y||(w=!0,ye(L))),ne},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(ne){var Y=g;return function(){var ue=g;g=Y;try{return ne.apply(this,arguments)}finally{g=ue}}}})(ub);lb.exports=ub;var Yk=lb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qk=j,er=Yk;function ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cb=new Set,bl={};function to(t,e){Yo(t,e),Yo(t+"Capture",e)}function Yo(t,e){for(bl[t]=e,t=0;t<e.length;t++)cb.add(e[t])}var ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$f=Object.prototype.hasOwnProperty,Xk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gy={},yy={};function Zk(t){return $f.call(yy,t)?!0:$f.call(gy,t)?!1:Xk.test(t)?yy[t]=!0:(gy[t]=!0,!1)}function eC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tC(t,e,n,r){if(e===null||typeof e>"u"||eC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){on[t]=new Mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];on[e]=new Mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){on[t]=new Mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){on[t]=new Mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){on[t]=new Mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){on[t]=new Mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){on[t]=new Mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){on[t]=new Mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){on[t]=new Mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rm=/[\-:]([a-z])/g;function Pm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rm,Pm);on[e]=new Mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rm,Pm);on[e]=new Mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rm,Pm);on[e]=new Mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){on[t]=new Mn(t,1,!1,t.toLowerCase(),null,!1,!1)});on.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){on[t]=new Mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mm(t,e,n,r){var s=on.hasOwnProperty(e)?on[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tC(e,n,s,r)&&(n=null),r||s===null?Zk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ks=Qk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hu=Symbol.for("react.element"),bo=Symbol.for("react.portal"),Eo=Symbol.for("react.fragment"),Dm=Symbol.for("react.strict_mode"),qf=Symbol.for("react.profiler"),db=Symbol.for("react.provider"),hb=Symbol.for("react.context"),Lm=Symbol.for("react.forward_ref"),Wf=Symbol.for("react.suspense"),Kf=Symbol.for("react.suspense_list"),jm=Symbol.for("react.memo"),Fs=Symbol.for("react.lazy"),fb=Symbol.for("react.offscreen"),vy=Symbol.iterator;function Oa(t){return t===null||typeof t!="object"?null:(t=vy&&t[vy]||t["@@iterator"],typeof t=="function"?t:null)}var Tt=Object.assign,Wh;function Qa(t){if(Wh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wh=e&&e[1]||""}return`
`+Wh+t}var Kh=!1;function Jh(t,e){if(!t||Kh)return"";Kh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Kh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qa(t):""}function nC(t){switch(t.tag){case 5:return Qa(t.type);case 16:return Qa("Lazy");case 13:return Qa("Suspense");case 19:return Qa("SuspenseList");case 0:case 2:case 15:return t=Jh(t.type,!1),t;case 11:return t=Jh(t.type.render,!1),t;case 1:return t=Jh(t.type,!0),t;default:return""}}function Jf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Eo:return"Fragment";case bo:return"Portal";case qf:return"Profiler";case Dm:return"StrictMode";case Wf:return"Suspense";case Kf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hb:return(t.displayName||"Context")+".Consumer";case db:return(t._context.displayName||"Context")+".Provider";case Lm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jm:return e=t.displayName||null,e!==null?e:Jf(t.type)||"Memo";case Fs:e=t._payload,t=t._init;try{return Jf(t(e))}catch{}}return null}function rC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jf(e);case 8:return e===Dm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ai(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sC(t){var e=pb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $u(t){t._valueTracker||(t._valueTracker=sC(t))}function mb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yf(t,e){var n=e.checked;return Tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ai(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gb(t,e){e=e.checked,e!=null&&Mm(t,"checked",e,!1)}function Qf(t,e){gb(t,e);var n=ai(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xf(t,e.type,ai(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xf(t,e,n){(e!=="number"||Bc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xa=Array.isArray;function Fo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ai(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Zf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return Tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _y(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ge(92));if(Xa(n)){if(1<n.length)throw Error(ge(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ai(n)}}function yb(t,e){var n=ai(e.value),r=ai(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function by(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ep(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qu,xb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qu=qu||document.createElement("div"),qu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function El(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iC=["Webkit","ms","Moz","O"];Object.keys(ol).forEach(function(t){iC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ol[e]=ol[t]})});function wb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ol.hasOwnProperty(t)&&ol[t]?(""+e).trim():e+"px"}function _b(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=wb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var oC=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tp(t,e){if(e){if(oC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function np(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rp=null;function Fm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sp=null,Vo=null,Uo=null;function Ey(t){if(t=su(t)){if(typeof sp!="function")throw Error(ge(280));var e=t.stateNode;e&&(e=Hd(e),sp(t.stateNode,t.type,e))}}function bb(t){Vo?Uo?Uo.push(t):Uo=[t]:Vo=t}function Eb(){if(Vo){var t=Vo,e=Uo;if(Uo=Vo=null,Ey(t),e)for(t=0;t<e.length;t++)Ey(e[t])}}function Tb(t,e){return t(e)}function Ib(){}var Yh=!1;function Sb(t,e,n){if(Yh)return t(e,n);Yh=!0;try{return Tb(t,e,n)}finally{Yh=!1,(Vo!==null||Uo!==null)&&(Ib(),Eb())}}function Tl(t,e){var n=t.stateNode;if(n===null)return null;var r=Hd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ge(231,e,typeof n));return n}var ip=!1;if(ys)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){ip=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{ip=!1}function aC(t,e,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var al=!1,zc=null,Gc=!1,op=null,lC={onError:function(t){al=!0,zc=t}};function uC(t,e,n,r,s,i,o,a,u){al=!1,zc=null,aC.apply(lC,arguments)}function cC(t,e,n,r,s,i,o,a,u){if(uC.apply(this,arguments),al){if(al){var c=zc;al=!1,zc=null}else throw Error(ge(198));Gc||(Gc=!0,op=c)}}function no(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ty(t){if(no(t)!==t)throw Error(ge(188))}function dC(t){var e=t.alternate;if(!e){if(e=no(t),e===null)throw Error(ge(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ty(s),t;if(i===r)return Ty(s),e;i=i.sibling}throw Error(ge(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ge(189))}}if(n.alternate!==r)throw Error(ge(190))}if(n.tag!==3)throw Error(ge(188));return n.stateNode.current===n?t:e}function Cb(t){return t=dC(t),t!==null?Ab(t):null}function Ab(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ab(t);if(e!==null)return e;t=t.sibling}return null}var Nb=er.unstable_scheduleCallback,Iy=er.unstable_cancelCallback,hC=er.unstable_shouldYield,fC=er.unstable_requestPaint,Rt=er.unstable_now,pC=er.unstable_getCurrentPriorityLevel,Vm=er.unstable_ImmediatePriority,Rb=er.unstable_UserBlockingPriority,Hc=er.unstable_NormalPriority,mC=er.unstable_LowPriority,Pb=er.unstable_IdlePriority,Od=null,Wr=null;function gC(t){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(Od,t,void 0,(t.current.flags&128)===128)}catch{}}var Cr=Math.clz32?Math.clz32:xC,yC=Math.log,vC=Math.LN2;function xC(t){return t>>>=0,t===0?32:31-(yC(t)/vC|0)|0}var Wu=64,Ku=4194304;function Za(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $c(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Za(a):(i&=o,i!==0&&(r=Za(i)))}else o=n&~s,o!==0?r=Za(o):i!==0&&(r=Za(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cr(e),s=1<<n,r|=t[n],e&=~s;return r}function wC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _C(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Cr(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=wC(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function ap(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Mb(){var t=Wu;return Wu<<=1,!(Wu&4194240)&&(Wu=64),t}function Qh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cr(e),t[e]=n}function bC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Cr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Um(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ct=0;function Db(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lb,Om,jb,Fb,Vb,lp=!1,Ju=[],Js=null,Ys=null,Qs=null,Il=new Map,Sl=new Map,Us=[],EC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sy(t,e){switch(t){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":Il.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(e.pointerId)}}function za(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=su(e),e!==null&&Om(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function TC(t,e,n,r,s){switch(e){case"focusin":return Js=za(Js,t,e,n,r,s),!0;case"dragenter":return Ys=za(Ys,t,e,n,r,s),!0;case"mouseover":return Qs=za(Qs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Il.set(i,za(Il.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Sl.set(i,za(Sl.get(i)||null,t,e,n,r,s)),!0}return!1}function Ub(t){var e=Mi(t.target);if(e!==null){var n=no(e);if(n!==null){if(e=n.tag,e===13){if(e=kb(n),e!==null){t.blockedOn=e,Vb(t.priority,function(){jb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=up(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rp=r,n.target.dispatchEvent(r),rp=null}else return e=su(n),e!==null&&Om(e),t.blockedOn=n,!1;e.shift()}return!0}function ky(t,e,n){wc(t)&&n.delete(e)}function IC(){lp=!1,Js!==null&&wc(Js)&&(Js=null),Ys!==null&&wc(Ys)&&(Ys=null),Qs!==null&&wc(Qs)&&(Qs=null),Il.forEach(ky),Sl.forEach(ky)}function Ga(t,e){t.blockedOn===e&&(t.blockedOn=null,lp||(lp=!0,er.unstable_scheduleCallback(er.unstable_NormalPriority,IC)))}function kl(t){function e(s){return Ga(s,t)}if(0<Ju.length){Ga(Ju[0],t);for(var n=1;n<Ju.length;n++){var r=Ju[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Js!==null&&Ga(Js,t),Ys!==null&&Ga(Ys,t),Qs!==null&&Ga(Qs,t),Il.forEach(e),Sl.forEach(e),n=0;n<Us.length;n++)r=Us[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Us.length&&(n=Us[0],n.blockedOn===null);)Ub(n),n.blockedOn===null&&Us.shift()}var Oo=ks.ReactCurrentBatchConfig,qc=!0;function SC(t,e,n,r){var s=ct,i=Oo.transition;Oo.transition=null;try{ct=1,Bm(t,e,n,r)}finally{ct=s,Oo.transition=i}}function kC(t,e,n,r){var s=ct,i=Oo.transition;Oo.transition=null;try{ct=4,Bm(t,e,n,r)}finally{ct=s,Oo.transition=i}}function Bm(t,e,n,r){if(qc){var s=up(t,e,n,r);if(s===null)lf(t,e,r,Wc,n),Sy(t,r);else if(TC(s,t,e,n,r))r.stopPropagation();else if(Sy(t,r),e&4&&-1<EC.indexOf(t)){for(;s!==null;){var i=su(s);if(i!==null&&Lb(i),i=up(t,e,n,r),i===null&&lf(t,e,r,Wc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else lf(t,e,r,null,n)}}var Wc=null;function up(t,e,n,r){if(Wc=null,t=Fm(r),t=Mi(t),t!==null)if(e=no(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wc=t,null}function Ob(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pC()){case Vm:return 1;case Rb:return 4;case Hc:case mC:return 16;case Pb:return 536870912;default:return 16}default:return 16}}var $s=null,zm=null,_c=null;function Bb(){if(_c)return _c;var t,e=zm,n=e.length,r,s="value"in $s?$s.value:$s.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return _c=s.slice(t,1<r?1-r:void 0)}function bc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yu(){return!0}function Cy(){return!1}function rr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Yu:Cy,this.isPropagationStopped=Cy,this}return Tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yu)},persist:function(){},isPersistent:Yu}),e}var ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gm=rr(ga),ru=Tt({},ga,{view:0,detail:0}),CC=rr(ru),Xh,Zh,Ha,Bd=Tt({},ru,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ha&&(Ha&&t.type==="mousemove"?(Xh=t.screenX-Ha.screenX,Zh=t.screenY-Ha.screenY):Zh=Xh=0,Ha=t),Xh)},movementY:function(t){return"movementY"in t?t.movementY:Zh}}),Ay=rr(Bd),AC=Tt({},Bd,{dataTransfer:0}),NC=rr(AC),RC=Tt({},ru,{relatedTarget:0}),ef=rr(RC),PC=Tt({},ga,{animationName:0,elapsedTime:0,pseudoElement:0}),MC=rr(PC),DC=Tt({},ga,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LC=rr(DC),jC=Tt({},ga,{data:0}),Ny=rr(jC),FC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UC[t])?!!e[t]:!1}function Hm(){return OC}var BC=Tt({},ru,{key:function(t){if(t.key){var e=FC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hm,charCode:function(t){return t.type==="keypress"?bc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zC=rr(BC),GC=Tt({},Bd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ry=rr(GC),HC=Tt({},ru,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hm}),$C=rr(HC),qC=Tt({},ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),WC=rr(qC),KC=Tt({},Bd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),JC=rr(KC),YC=[9,13,27,32],$m=ys&&"CompositionEvent"in window,ll=null;ys&&"documentMode"in document&&(ll=document.documentMode);var QC=ys&&"TextEvent"in window&&!ll,zb=ys&&(!$m||ll&&8<ll&&11>=ll),Py=" ",My=!1;function Gb(t,e){switch(t){case"keyup":return YC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var To=!1;function XC(t,e){switch(t){case"compositionend":return Hb(e);case"keypress":return e.which!==32?null:(My=!0,Py);case"textInput":return t=e.data,t===Py&&My?null:t;default:return null}}function ZC(t,e){if(To)return t==="compositionend"||!$m&&Gb(t,e)?(t=Bb(),_c=zm=$s=null,To=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zb&&e.locale!=="ko"?null:e.data;default:return null}}var e2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!e2[t.type]:e==="textarea"}function $b(t,e,n,r){bb(r),e=Kc(e,"onChange"),0<e.length&&(n=new Gm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ul=null,Cl=null;function t2(t){nE(t,0)}function zd(t){var e=ko(t);if(mb(e))return t}function n2(t,e){if(t==="change")return e}var qb=!1;if(ys){var tf;if(ys){var nf="oninput"in document;if(!nf){var Ly=document.createElement("div");Ly.setAttribute("oninput","return;"),nf=typeof Ly.oninput=="function"}tf=nf}else tf=!1;qb=tf&&(!document.documentMode||9<document.documentMode)}function jy(){ul&&(ul.detachEvent("onpropertychange",Wb),Cl=ul=null)}function Wb(t){if(t.propertyName==="value"&&zd(Cl)){var e=[];$b(e,Cl,t,Fm(t)),Sb(t2,e)}}function r2(t,e,n){t==="focusin"?(jy(),ul=e,Cl=n,ul.attachEvent("onpropertychange",Wb)):t==="focusout"&&jy()}function s2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zd(Cl)}function i2(t,e){if(t==="click")return zd(e)}function o2(t,e){if(t==="input"||t==="change")return zd(e)}function a2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dr=typeof Object.is=="function"?Object.is:a2;function Al(t,e){if(Dr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!$f.call(e,s)||!Dr(t[s],e[s]))return!1}return!0}function Fy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vy(t,e){var n=Fy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fy(n)}}function Kb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Kb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Jb(){for(var t=window,e=Bc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bc(t.document)}return e}function qm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function l2(t){var e=Jb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Kb(n.ownerDocument.documentElement,n)){if(r!==null&&qm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Vy(n,i);var o=Vy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var u2=ys&&"documentMode"in document&&11>=document.documentMode,Io=null,cp=null,cl=null,dp=!1;function Uy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dp||Io==null||Io!==Bc(r)||(r=Io,"selectionStart"in r&&qm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cl&&Al(cl,r)||(cl=r,r=Kc(cp,"onSelect"),0<r.length&&(e=new Gm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Io)))}function Qu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var So={animationend:Qu("Animation","AnimationEnd"),animationiteration:Qu("Animation","AnimationIteration"),animationstart:Qu("Animation","AnimationStart"),transitionend:Qu("Transition","TransitionEnd")},rf={},Yb={};ys&&(Yb=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function Gd(t){if(rf[t])return rf[t];if(!So[t])return t;var e=So[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Yb)return rf[t]=e[n];return t}var Qb=Gd("animationend"),Xb=Gd("animationiteration"),Zb=Gd("animationstart"),eE=Gd("transitionend"),tE=new Map,Oy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(t,e){tE.set(t,e),to(e,[t])}for(var sf=0;sf<Oy.length;sf++){var of=Oy[sf],c2=of.toLowerCase(),d2=of[0].toUpperCase()+of.slice(1);hi(c2,"on"+d2)}hi(Qb,"onAnimationEnd");hi(Xb,"onAnimationIteration");hi(Zb,"onAnimationStart");hi("dblclick","onDoubleClick");hi("focusin","onFocus");hi("focusout","onBlur");hi(eE,"onTransitionEnd");Yo("onMouseEnter",["mouseout","mouseover"]);Yo("onMouseLeave",["mouseout","mouseover"]);Yo("onPointerEnter",["pointerout","pointerover"]);Yo("onPointerLeave",["pointerout","pointerover"]);to("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));to("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));to("onBeforeInput",["compositionend","keypress","textInput","paste"]);to("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));to("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));to("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h2=new Set("cancel close invalid load scroll toggle".split(" ").concat(el));function By(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,cC(r,e,void 0,t),t.currentTarget=null}function nE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;By(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;By(s,a,c),i=u}}}if(Gc)throw t=op,Gc=!1,op=null,t}function yt(t,e){var n=e[gp];n===void 0&&(n=e[gp]=new Set);var r=t+"__bubble";n.has(r)||(rE(e,t,2,!1),n.add(r))}function af(t,e,n){var r=0;e&&(r|=4),rE(n,t,r,e)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function Nl(t){if(!t[Xu]){t[Xu]=!0,cb.forEach(function(n){n!=="selectionchange"&&(h2.has(n)||af(n,!1,t),af(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xu]||(e[Xu]=!0,af("selectionchange",!1,e))}}function rE(t,e,n,r){switch(Ob(e)){case 1:var s=SC;break;case 4:s=kC;break;default:s=Bm}n=s.bind(null,e,n,t),s=void 0,!ip||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function lf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Mi(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Sb(function(){var c=i,d=Fm(n),m=[];e:{var g=tE.get(t);if(g!==void 0){var y=Gm,w=t;switch(t){case"keypress":if(bc(n)===0)break e;case"keydown":case"keyup":y=zC;break;case"focusin":w="focus",y=ef;break;case"focusout":w="blur",y=ef;break;case"beforeblur":case"afterblur":y=ef;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Ay;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=NC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=$C;break;case Qb:case Xb:case Zb:y=MC;break;case eE:y=WC;break;case"scroll":y=CC;break;case"wheel":y=JC;break;case"copy":case"cut":case"paste":y=LC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Ry}var x=(e&4)!==0,_=!x&&t==="scroll",v=x?g!==null?g+"Capture":null:g;x=[];for(var b=c,T;b!==null;){T=b;var R=T.stateNode;if(T.tag===5&&R!==null&&(T=R,v!==null&&(R=Tl(b,v),R!=null&&x.push(Rl(b,R,T)))),_)break;b=b.return}0<x.length&&(g=new y(g,w,null,n,d),m.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==rp&&(w=n.relatedTarget||n.fromElement)&&(Mi(w)||w[vs]))break e;if((y||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=c,w=w?Mi(w):null,w!==null&&(_=no(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(x=Ay,R="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(x=Ry,R="onPointerLeave",v="onPointerEnter",b="pointer"),_=y==null?g:ko(y),T=w==null?g:ko(w),g=new x(R,b+"leave",y,n,d),g.target=_,g.relatedTarget=T,R=null,Mi(d)===c&&(x=new x(v,b+"enter",w,n,d),x.target=T,x.relatedTarget=_,R=x),_=R,y&&w)t:{for(x=y,v=w,b=0,T=x;T;T=vo(T))b++;for(T=0,R=v;R;R=vo(R))T++;for(;0<b-T;)x=vo(x),b--;for(;0<T-b;)v=vo(v),T--;for(;b--;){if(x===v||v!==null&&x===v.alternate)break t;x=vo(x),v=vo(v)}x=null}else x=null;y!==null&&zy(m,g,y,x,!1),w!==null&&_!==null&&zy(m,_,w,x,!0)}}e:{if(g=c?ko(c):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var L=n2;else if(Dy(g))if(qb)L=o2;else{L=s2;var U=r2}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=i2);if(L&&(L=L(t,c))){$b(m,L,n,d);break e}U&&U(t,g,c),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&Xf(g,"number",g.value)}switch(U=c?ko(c):window,t){case"focusin":(Dy(U)||U.contentEditable==="true")&&(Io=U,cp=c,cl=null);break;case"focusout":cl=cp=Io=null;break;case"mousedown":dp=!0;break;case"contextmenu":case"mouseup":case"dragend":dp=!1,Uy(m,n,d);break;case"selectionchange":if(u2)break;case"keydown":case"keyup":Uy(m,n,d)}var S;if($m)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else To?Gb(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(zb&&n.locale!=="ko"&&(To||C!=="onCompositionStart"?C==="onCompositionEnd"&&To&&(S=Bb()):($s=d,zm="value"in $s?$s.value:$s.textContent,To=!0)),U=Kc(c,C),0<U.length&&(C=new Ny(C,t,null,n,d),m.push({event:C,listeners:U}),S?C.data=S:(S=Hb(n),S!==null&&(C.data=S)))),(S=QC?XC(t,n):ZC(t,n))&&(c=Kc(c,"onBeforeInput"),0<c.length&&(d=new Ny("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:c}),d.data=S))}nE(m,e)})}function Rl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Kc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Tl(t,n),i!=null&&r.unshift(Rl(t,i,s)),i=Tl(t,e),i!=null&&r.push(Rl(t,i,s))),t=t.return}return r}function vo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=Tl(n,i),u!=null&&o.unshift(Rl(n,u,a))):s||(u=Tl(n,i),u!=null&&o.push(Rl(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var f2=/\r\n?/g,p2=/\u0000|\uFFFD/g;function Gy(t){return(typeof t=="string"?t:""+t).replace(f2,`
`).replace(p2,"")}function Zu(t,e,n){if(e=Gy(e),Gy(t)!==e&&n)throw Error(ge(425))}function Jc(){}var hp=null,fp=null;function pp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mp=typeof setTimeout=="function"?setTimeout:void 0,m2=typeof clearTimeout=="function"?clearTimeout:void 0,Hy=typeof Promise=="function"?Promise:void 0,g2=typeof queueMicrotask=="function"?queueMicrotask:typeof Hy<"u"?function(t){return Hy.resolve(null).then(t).catch(y2)}:mp;function y2(t){setTimeout(function(){throw t})}function uf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),kl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);kl(e)}function Xs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $y(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ya=Math.random().toString(36).slice(2),qr="__reactFiber$"+ya,Pl="__reactProps$"+ya,vs="__reactContainer$"+ya,gp="__reactEvents$"+ya,v2="__reactListeners$"+ya,x2="__reactHandles$"+ya;function Mi(t){var e=t[qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vs]||n[qr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$y(t);t!==null;){if(n=t[qr])return n;t=$y(t)}return e}t=n,n=t.parentNode}return null}function su(t){return t=t[qr]||t[vs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ko(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ge(33))}function Hd(t){return t[Pl]||null}var yp=[],Co=-1;function fi(t){return{current:t}}function xt(t){0>Co||(t.current=yp[Co],yp[Co]=null,Co--)}function pt(t,e){Co++,yp[Co]=t.current,t.current=e}var li={},wn=fi(li),Bn=fi(!1),Gi=li;function Qo(t,e){var n=t.type.contextTypes;if(!n)return li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function zn(t){return t=t.childContextTypes,t!=null}function Yc(){xt(Bn),xt(wn)}function qy(t,e,n){if(wn.current!==li)throw Error(ge(168));pt(wn,e),pt(Bn,n)}function sE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ge(108,rC(t)||"Unknown",s));return Tt({},n,r)}function Qc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||li,Gi=wn.current,pt(wn,t),pt(Bn,Bn.current),!0}function Wy(t,e,n){var r=t.stateNode;if(!r)throw Error(ge(169));n?(t=sE(t,e,Gi),r.__reactInternalMemoizedMergedChildContext=t,xt(Bn),xt(wn),pt(wn,t)):xt(Bn),pt(Bn,n)}var as=null,$d=!1,cf=!1;function iE(t){as===null?as=[t]:as.push(t)}function w2(t){$d=!0,iE(t)}function pi(){if(!cf&&as!==null){cf=!0;var t=0,e=ct;try{var n=as;for(ct=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}as=null,$d=!1}catch(s){throw as!==null&&(as=as.slice(t+1)),Nb(Vm,pi),s}finally{ct=e,cf=!1}}return null}var Ao=[],No=0,Xc=null,Zc=0,lr=[],ur=0,Hi=null,cs=1,ds="";function Ai(t,e){Ao[No++]=Zc,Ao[No++]=Xc,Xc=t,Zc=e}function oE(t,e,n){lr[ur++]=cs,lr[ur++]=ds,lr[ur++]=Hi,Hi=t;var r=cs;t=ds;var s=32-Cr(r)-1;r&=~(1<<s),n+=1;var i=32-Cr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,cs=1<<32-Cr(e)+s|n<<s|r,ds=i+t}else cs=1<<i|n<<s|r,ds=t}function Wm(t){t.return!==null&&(Ai(t,1),oE(t,1,0))}function Km(t){for(;t===Xc;)Xc=Ao[--No],Ao[No]=null,Zc=Ao[--No],Ao[No]=null;for(;t===Hi;)Hi=lr[--ur],lr[ur]=null,ds=lr[--ur],lr[ur]=null,cs=lr[--ur],lr[ur]=null}var Qn=null,Jn=null,wt=!1,kr=null;function aE(t,e){var n=cr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ky(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qn=t,Jn=Xs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qn=t,Jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hi!==null?{id:cs,overflow:ds}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qn=t,Jn=null,!0):!1;default:return!1}}function vp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xp(t){if(wt){var e=Jn;if(e){var n=e;if(!Ky(t,e)){if(vp(t))throw Error(ge(418));e=Xs(n.nextSibling);var r=Qn;e&&Ky(t,e)?aE(r,n):(t.flags=t.flags&-4097|2,wt=!1,Qn=t)}}else{if(vp(t))throw Error(ge(418));t.flags=t.flags&-4097|2,wt=!1,Qn=t}}}function Jy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qn=t}function ec(t){if(t!==Qn)return!1;if(!wt)return Jy(t),wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pp(t.type,t.memoizedProps)),e&&(e=Jn)){if(vp(t))throw lE(),Error(ge(418));for(;e;)aE(t,e),e=Xs(e.nextSibling)}if(Jy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ge(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jn=Xs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jn=null}}else Jn=Qn?Xs(t.stateNode.nextSibling):null;return!0}function lE(){for(var t=Jn;t;)t=Xs(t.nextSibling)}function Xo(){Jn=Qn=null,wt=!1}function Jm(t){kr===null?kr=[t]:kr.push(t)}var _2=ks.ReactCurrentBatchConfig;function $a(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ge(309));var r=n.stateNode}if(!r)throw Error(ge(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ge(284));if(!n._owner)throw Error(ge(290,t))}return t}function tc(t,e){throw t=Object.prototype.toString.call(e),Error(ge(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Yy(t){var e=t._init;return e(t._payload)}function uE(t){function e(v,b){if(t){var T=v.deletions;T===null?(v.deletions=[b],v.flags|=16):T.push(b)}}function n(v,b){if(!t)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function r(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function s(v,b){return v=ni(v,b),v.index=0,v.sibling=null,v}function i(v,b,T){return v.index=T,t?(T=v.alternate,T!==null?(T=T.index,T<b?(v.flags|=2,b):T):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,b,T,R){return b===null||b.tag!==6?(b=yf(T,v.mode,R),b.return=v,b):(b=s(b,T),b.return=v,b)}function u(v,b,T,R){var L=T.type;return L===Eo?d(v,b,T.props.children,R,T.key):b!==null&&(b.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Fs&&Yy(L)===b.type)?(R=s(b,T.props),R.ref=$a(v,b,T),R.return=v,R):(R=Ac(T.type,T.key,T.props,null,v.mode,R),R.ref=$a(v,b,T),R.return=v,R)}function c(v,b,T,R){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=vf(T,v.mode,R),b.return=v,b):(b=s(b,T.children||[]),b.return=v,b)}function d(v,b,T,R,L){return b===null||b.tag!==7?(b=Oi(T,v.mode,R,L),b.return=v,b):(b=s(b,T),b.return=v,b)}function m(v,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=yf(""+b,v.mode,T),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Hu:return T=Ac(b.type,b.key,b.props,null,v.mode,T),T.ref=$a(v,null,b),T.return=v,T;case bo:return b=vf(b,v.mode,T),b.return=v,b;case Fs:var R=b._init;return m(v,R(b._payload),T)}if(Xa(b)||Oa(b))return b=Oi(b,v.mode,T,null),b.return=v,b;tc(v,b)}return null}function g(v,b,T,R){var L=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:a(v,b,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Hu:return T.key===L?u(v,b,T,R):null;case bo:return T.key===L?c(v,b,T,R):null;case Fs:return L=T._init,g(v,b,L(T._payload),R)}if(Xa(T)||Oa(T))return L!==null?null:d(v,b,T,R,null);tc(v,T)}return null}function y(v,b,T,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return v=v.get(T)||null,a(b,v,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Hu:return v=v.get(R.key===null?T:R.key)||null,u(b,v,R,L);case bo:return v=v.get(R.key===null?T:R.key)||null,c(b,v,R,L);case Fs:var U=R._init;return y(v,b,T,U(R._payload),L)}if(Xa(R)||Oa(R))return v=v.get(T)||null,d(b,v,R,L,null);tc(b,R)}return null}function w(v,b,T,R){for(var L=null,U=null,S=b,C=b=0,N=null;S!==null&&C<T.length;C++){S.index>C?(N=S,S=null):N=S.sibling;var M=g(v,S,T[C],R);if(M===null){S===null&&(S=N);break}t&&S&&M.alternate===null&&e(v,S),b=i(M,b,C),U===null?L=M:U.sibling=M,U=M,S=N}if(C===T.length)return n(v,S),wt&&Ai(v,C),L;if(S===null){for(;C<T.length;C++)S=m(v,T[C],R),S!==null&&(b=i(S,b,C),U===null?L=S:U.sibling=S,U=S);return wt&&Ai(v,C),L}for(S=r(v,S);C<T.length;C++)N=y(S,v,C,T[C],R),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?C:N.key),b=i(N,b,C),U===null?L=N:U.sibling=N,U=N);return t&&S.forEach(function(V){return e(v,V)}),wt&&Ai(v,C),L}function x(v,b,T,R){var L=Oa(T);if(typeof L!="function")throw Error(ge(150));if(T=L.call(T),T==null)throw Error(ge(151));for(var U=L=null,S=b,C=b=0,N=null,M=T.next();S!==null&&!M.done;C++,M=T.next()){S.index>C?(N=S,S=null):N=S.sibling;var V=g(v,S,M.value,R);if(V===null){S===null&&(S=N);break}t&&S&&V.alternate===null&&e(v,S),b=i(V,b,C),U===null?L=V:U.sibling=V,U=V,S=N}if(M.done)return n(v,S),wt&&Ai(v,C),L;if(S===null){for(;!M.done;C++,M=T.next())M=m(v,M.value,R),M!==null&&(b=i(M,b,C),U===null?L=M:U.sibling=M,U=M);return wt&&Ai(v,C),L}for(S=r(v,S);!M.done;C++,M=T.next())M=y(S,v,C,M.value,R),M!==null&&(t&&M.alternate!==null&&S.delete(M.key===null?C:M.key),b=i(M,b,C),U===null?L=M:U.sibling=M,U=M);return t&&S.forEach(function(P){return e(v,P)}),wt&&Ai(v,C),L}function _(v,b,T,R){if(typeof T=="object"&&T!==null&&T.type===Eo&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Hu:e:{for(var L=T.key,U=b;U!==null;){if(U.key===L){if(L=T.type,L===Eo){if(U.tag===7){n(v,U.sibling),b=s(U,T.props.children),b.return=v,v=b;break e}}else if(U.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Fs&&Yy(L)===U.type){n(v,U.sibling),b=s(U,T.props),b.ref=$a(v,U,T),b.return=v,v=b;break e}n(v,U);break}else e(v,U);U=U.sibling}T.type===Eo?(b=Oi(T.props.children,v.mode,R,T.key),b.return=v,v=b):(R=Ac(T.type,T.key,T.props,null,v.mode,R),R.ref=$a(v,b,T),R.return=v,v=R)}return o(v);case bo:e:{for(U=T.key;b!==null;){if(b.key===U)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){n(v,b.sibling),b=s(b,T.children||[]),b.return=v,v=b;break e}else{n(v,b);break}else e(v,b);b=b.sibling}b=vf(T,v.mode,R),b.return=v,v=b}return o(v);case Fs:return U=T._init,_(v,b,U(T._payload),R)}if(Xa(T))return w(v,b,T,R);if(Oa(T))return x(v,b,T,R);tc(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(n(v,b.sibling),b=s(b,T),b.return=v,v=b):(n(v,b),b=yf(T,v.mode,R),b.return=v,v=b),o(v)):n(v,b)}return _}var Zo=uE(!0),cE=uE(!1),ed=fi(null),td=null,Ro=null,Ym=null;function Qm(){Ym=Ro=td=null}function Xm(t){var e=ed.current;xt(ed),t._currentValue=e}function wp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bo(t,e){td=t,Ym=Ro=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Un=!0),t.firstContext=null)}function pr(t){var e=t._currentValue;if(Ym!==t)if(t={context:t,memoizedValue:e,next:null},Ro===null){if(td===null)throw Error(ge(308));Ro=t,td.dependencies={lanes:0,firstContext:t}}else Ro=Ro.next=t;return e}var Di=null;function Zm(t){Di===null?Di=[t]:Di.push(t)}function dE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Zm(e)):(n.next=s.next,s.next=n),e.interleaved=n,xs(t,r)}function xs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vs=!1;function eg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ze&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,xs(t,n)}return s=r.interleaved,s===null?(e.next=e,Zm(r)):(e.next=s.next,s.next=e),r.interleaved=e,xs(t,n)}function Ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Um(t,n)}}function Qy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nd(t,e,n,r){var s=t.updateQueue;Vs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,d=c=u=null,a=i;do{var g=a.lane,y=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,x=a;switch(g=e,y=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){m=w.call(y,m,g);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,g=typeof w=="function"?w.call(y,m,g):w,g==null)break e;m=Tt({},m,g);break e;case 2:Vs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,u=m):d=d.next=y,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(d===null&&(u=m),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);qi|=o,t.lanes=o,t.memoizedState=m}}function Xy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ge(191,s));s.call(r)}}}var iu={},Kr=fi(iu),Ml=fi(iu),Dl=fi(iu);function Li(t){if(t===iu)throw Error(ge(174));return t}function tg(t,e){switch(pt(Dl,e),pt(Ml,t),pt(Kr,iu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ep(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ep(e,t)}xt(Kr),pt(Kr,e)}function ea(){xt(Kr),xt(Ml),xt(Dl)}function fE(t){Li(Dl.current);var e=Li(Kr.current),n=ep(e,t.type);e!==n&&(pt(Ml,t),pt(Kr,n))}function ng(t){Ml.current===t&&(xt(Kr),xt(Ml))}var bt=fi(0);function rd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var df=[];function rg(){for(var t=0;t<df.length;t++)df[t]._workInProgressVersionPrimary=null;df.length=0}var Tc=ks.ReactCurrentDispatcher,hf=ks.ReactCurrentBatchConfig,$i=0,Et=null,Gt=null,Yt=null,sd=!1,dl=!1,Ll=0,b2=0;function fn(){throw Error(ge(321))}function sg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dr(t[n],e[n]))return!1;return!0}function ig(t,e,n,r,s,i){if($i=i,Et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Tc.current=t===null||t.memoizedState===null?S2:k2,t=n(r,s),dl){i=0;do{if(dl=!1,Ll=0,25<=i)throw Error(ge(301));i+=1,Yt=Gt=null,e.updateQueue=null,Tc.current=C2,t=n(r,s)}while(dl)}if(Tc.current=id,e=Gt!==null&&Gt.next!==null,$i=0,Yt=Gt=Et=null,sd=!1,e)throw Error(ge(300));return t}function og(){var t=Ll!==0;return Ll=0,t}function $r(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Et.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function mr(){if(Gt===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=Gt.next;var e=Yt===null?Et.memoizedState:Yt.next;if(e!==null)Yt=e,Gt=t;else{if(t===null)throw Error(ge(310));Gt=t,t={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Yt===null?Et.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function jl(t,e){return typeof e=="function"?e(t):e}function ff(t){var e=mr(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=Gt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var d=c.lane;if(($i&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=m,o=r):u=u.next=m,Et.lanes|=d,qi|=d}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,Dr(r,e.memoizedState)||(Un=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Et.lanes|=i,qi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pf(t){var e=mr(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Dr(i,e.memoizedState)||(Un=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function pE(){}function mE(t,e){var n=Et,r=mr(),s=e(),i=!Dr(r.memoizedState,s);if(i&&(r.memoizedState=s,Un=!0),r=r.queue,ag(vE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Yt!==null&&Yt.memoizedState.tag&1){if(n.flags|=2048,Fl(9,yE.bind(null,n,r,s,e),void 0,null),Qt===null)throw Error(ge(349));$i&30||gE(n,e,s)}return s}function gE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yE(t,e,n,r){e.value=n,e.getSnapshot=r,xE(e)&&wE(t)}function vE(t,e,n){return n(function(){xE(e)&&wE(t)})}function xE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dr(t,n)}catch{return!0}}function wE(t){var e=xs(t,1);e!==null&&Ar(e,t,1,-1)}function Zy(t){var e=$r();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:t},e.queue=t,t=t.dispatch=I2.bind(null,Et,t),[e.memoizedState,t]}function Fl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _E(){return mr().memoizedState}function Ic(t,e,n,r){var s=$r();Et.flags|=t,s.memoizedState=Fl(1|e,n,void 0,r===void 0?null:r)}function qd(t,e,n,r){var s=mr();r=r===void 0?null:r;var i=void 0;if(Gt!==null){var o=Gt.memoizedState;if(i=o.destroy,r!==null&&sg(r,o.deps)){s.memoizedState=Fl(e,n,i,r);return}}Et.flags|=t,s.memoizedState=Fl(1|e,n,i,r)}function ev(t,e){return Ic(8390656,8,t,e)}function ag(t,e){return qd(2048,8,t,e)}function bE(t,e){return qd(4,2,t,e)}function EE(t,e){return qd(4,4,t,e)}function TE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function IE(t,e,n){return n=n!=null?n.concat([t]):null,qd(4,4,TE.bind(null,e,t),n)}function lg(){}function SE(t,e){var n=mr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kE(t,e){var n=mr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function CE(t,e,n){return $i&21?(Dr(n,e)||(n=Mb(),Et.lanes|=n,qi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Un=!0),t.memoizedState=n)}function E2(t,e){var n=ct;ct=n!==0&&4>n?n:4,t(!0);var r=hf.transition;hf.transition={};try{t(!1),e()}finally{ct=n,hf.transition=r}}function AE(){return mr().memoizedState}function T2(t,e,n){var r=ti(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},NE(t))RE(e,n);else if(n=dE(t,e,n,r),n!==null){var s=Cn();Ar(n,t,r,s),PE(n,e,r)}}function I2(t,e,n){var r=ti(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(NE(t))RE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Dr(a,o)){var u=e.interleaved;u===null?(s.next=s,Zm(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=dE(t,e,s,r),n!==null&&(s=Cn(),Ar(n,t,r,s),PE(n,e,r))}}function NE(t){var e=t.alternate;return t===Et||e!==null&&e===Et}function RE(t,e){dl=sd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function PE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Um(t,n)}}var id={readContext:pr,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},S2={readContext:pr,useCallback:function(t,e){return $r().memoizedState=[t,e===void 0?null:e],t},useContext:pr,useEffect:ev,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ic(4194308,4,TE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ic(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ic(4,2,t,e)},useMemo:function(t,e){var n=$r();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$r();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=T2.bind(null,Et,t),[r.memoizedState,t]},useRef:function(t){var e=$r();return t={current:t},e.memoizedState=t},useState:Zy,useDebugValue:lg,useDeferredValue:function(t){return $r().memoizedState=t},useTransition:function(){var t=Zy(!1),e=t[0];return t=E2.bind(null,t[1]),$r().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Et,s=$r();if(wt){if(n===void 0)throw Error(ge(407));n=n()}else{if(n=e(),Qt===null)throw Error(ge(349));$i&30||gE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ev(vE.bind(null,r,i,t),[t]),r.flags|=2048,Fl(9,yE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=$r(),e=Qt.identifierPrefix;if(wt){var n=ds,r=cs;n=(r&~(1<<32-Cr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ll++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=b2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},k2={readContext:pr,useCallback:SE,useContext:pr,useEffect:ag,useImperativeHandle:IE,useInsertionEffect:bE,useLayoutEffect:EE,useMemo:kE,useReducer:ff,useRef:_E,useState:function(){return ff(jl)},useDebugValue:lg,useDeferredValue:function(t){var e=mr();return CE(e,Gt.memoizedState,t)},useTransition:function(){var t=ff(jl)[0],e=mr().memoizedState;return[t,e]},useMutableSource:pE,useSyncExternalStore:mE,useId:AE,unstable_isNewReconciler:!1},C2={readContext:pr,useCallback:SE,useContext:pr,useEffect:ag,useImperativeHandle:IE,useInsertionEffect:bE,useLayoutEffect:EE,useMemo:kE,useReducer:pf,useRef:_E,useState:function(){return pf(jl)},useDebugValue:lg,useDeferredValue:function(t){var e=mr();return Gt===null?e.memoizedState=t:CE(e,Gt.memoizedState,t)},useTransition:function(){var t=pf(jl)[0],e=mr().memoizedState;return[t,e]},useMutableSource:pE,useSyncExternalStore:mE,useId:AE,unstable_isNewReconciler:!1};function Ir(t,e){if(t&&t.defaultProps){e=Tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _p(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wd={isMounted:function(t){return(t=t._reactInternals)?no(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Cn(),s=ti(t),i=gs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Zs(t,i,s),e!==null&&(Ar(e,t,s,r),Ec(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Cn(),s=ti(t),i=gs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Zs(t,i,s),e!==null&&(Ar(e,t,s,r),Ec(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Cn(),r=ti(t),s=gs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Zs(t,s,r),e!==null&&(Ar(e,t,r,n),Ec(e,t,r))}};function tv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Al(n,r)||!Al(s,i):!0}function ME(t,e,n){var r=!1,s=li,i=e.contextType;return typeof i=="object"&&i!==null?i=pr(i):(s=zn(e)?Gi:wn.current,r=e.contextTypes,i=(r=r!=null)?Qo(t,s):li),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function nv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wd.enqueueReplaceState(e,e.state,null)}function bp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},eg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=pr(i):(i=zn(e)?Gi:wn.current,s.context=Qo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(_p(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wd.enqueueReplaceState(s,s.state,null),nd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ta(t,e){try{var n="",r=e;do n+=nC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function mf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ep(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var A2=typeof WeakMap=="function"?WeakMap:Map;function DE(t,e,n){n=gs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ad||(ad=!0,Mp=r),Ep(t,e)},n}function LE(t,e,n){n=gs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ep(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ep(t,e),typeof r!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function rv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new A2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=G2.bind(null,t,e,n),e.then(t,t))}function sv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function iv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gs(-1,1),e.tag=2,Zs(n,e,1))),n.lanes|=1),t)}var N2=ks.ReactCurrentOwner,Un=!1;function Sn(t,e,n,r){e.child=t===null?cE(e,null,n,r):Zo(e,t.child,n,r)}function ov(t,e,n,r,s){n=n.render;var i=e.ref;return Bo(e,s),r=ig(t,e,n,r,i,s),n=og(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ws(t,e,s)):(wt&&n&&Wm(e),e.flags|=1,Sn(t,e,r,s),e.child)}function av(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!gg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,jE(t,e,i,r,s)):(t=Ac(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Al,n(o,r)&&t.ref===e.ref)return ws(t,e,s)}return e.flags|=1,t=ni(i,r),t.ref=e.ref,t.return=e,e.child=t}function jE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Al(i,r)&&t.ref===e.ref)if(Un=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Un=!0);else return e.lanes=t.lanes,ws(t,e,s)}return Tp(t,e,n,r,s)}function FE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Mo,Kn),Kn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pt(Mo,Kn),Kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pt(Mo,Kn),Kn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pt(Mo,Kn),Kn|=r;return Sn(t,e,s,n),e.child}function VE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tp(t,e,n,r,s){var i=zn(n)?Gi:wn.current;return i=Qo(e,i),Bo(e,s),n=ig(t,e,n,r,i,s),r=og(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ws(t,e,s)):(wt&&r&&Wm(e),e.flags|=1,Sn(t,e,n,s),e.child)}function lv(t,e,n,r,s){if(zn(n)){var i=!0;Qc(e)}else i=!1;if(Bo(e,s),e.stateNode===null)Sc(t,e),ME(e,n,r),bp(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=pr(c):(c=zn(n)?Gi:wn.current,c=Qo(e,c));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&nv(e,o,r,c),Vs=!1;var g=e.memoizedState;o.state=g,nd(e,r,o,s),u=e.memoizedState,a!==r||g!==u||Bn.current||Vs?(typeof d=="function"&&(_p(e,n,d,r),u=e.memoizedState),(a=Vs||tv(e,n,a,r,g,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,hE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ir(e.type,a),o.props=c,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=pr(u):(u=zn(n)?Gi:wn.current,u=Qo(e,u));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||g!==u)&&nv(e,o,r,u),Vs=!1,g=e.memoizedState,o.state=g,nd(e,r,o,s);var w=e.memoizedState;a!==m||g!==w||Bn.current||Vs?(typeof y=="function"&&(_p(e,n,y,r),w=e.memoizedState),(c=Vs||tv(e,n,c,r,g,w,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Ip(t,e,n,r,i,s)}function Ip(t,e,n,r,s,i){VE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Wy(e,n,!1),ws(t,e,i);r=e.stateNode,N2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zo(e,t.child,null,i),e.child=Zo(e,null,a,i)):Sn(t,e,a,i),e.memoizedState=r.state,s&&Wy(e,n,!0),e.child}function UE(t){var e=t.stateNode;e.pendingContext?qy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qy(t,e.context,!1),tg(t,e.containerInfo)}function uv(t,e,n,r,s){return Xo(),Jm(s),e.flags|=256,Sn(t,e,n,r),e.child}var Sp={dehydrated:null,treeContext:null,retryLane:0};function kp(t){return{baseLanes:t,cachePool:null,transitions:null}}function OE(t,e,n){var r=e.pendingProps,s=bt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pt(bt,s&1),t===null)return xp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Yd(o,r,0,null),t=Oi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=kp(n),e.memoizedState=Sp,t):ug(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return R2(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ni(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ni(a,i):(i=Oi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?kp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Sp,r}return i=t.child,t=i.sibling,r=ni(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ug(t,e){return e=Yd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nc(t,e,n,r){return r!==null&&Jm(r),Zo(e,t.child,null,n),t=ug(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function R2(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=mf(Error(ge(422))),nc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Yd({mode:"visible",children:r.children},s,0,null),i=Oi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Zo(e,t.child,null,o),e.child.memoizedState=kp(o),e.memoizedState=Sp,i);if(!(e.mode&1))return nc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ge(419)),r=mf(i,r,void 0),nc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Un||a){if(r=Qt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,xs(t,s),Ar(r,t,s,-1))}return mg(),r=mf(Error(ge(421))),nc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=H2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Jn=Xs(s.nextSibling),Qn=e,wt=!0,kr=null,t!==null&&(lr[ur++]=cs,lr[ur++]=ds,lr[ur++]=Hi,cs=t.id,ds=t.overflow,Hi=e),e=ug(e,r.children),e.flags|=4096,e)}function cv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wp(t.return,e,n)}function gf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function BE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Sn(t,e,r.children,n),r=bt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cv(t,n,e);else if(t.tag===19)cv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pt(bt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&rd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),gf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&rd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}gf(e,!0,n,null,i);break;case"together":gf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ws(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ge(153));if(e.child!==null){for(t=e.child,n=ni(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ni(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function P2(t,e,n){switch(e.tag){case 3:UE(e),Xo();break;case 5:fE(e);break;case 1:zn(e.type)&&Qc(e);break;case 4:tg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pt(ed,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pt(bt,bt.current&1),e.flags|=128,null):n&e.child.childLanes?OE(t,e,n):(pt(bt,bt.current&1),t=ws(t,e,n),t!==null?t.sibling:null);pt(bt,bt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return BE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pt(bt,bt.current),r)break;return null;case 22:case 23:return e.lanes=0,FE(t,e,n)}return ws(t,e,n)}var zE,Cp,GE,HE;zE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cp=function(){};GE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Li(Kr.current);var i=null;switch(n){case"input":s=Yf(t,s),r=Yf(t,r),i=[];break;case"select":s=Tt({},s,{value:void 0}),r=Tt({},r,{value:void 0}),i=[];break;case"textarea":s=Zf(t,s),r=Zf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Jc)}tp(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(bl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(bl.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&yt("scroll",t),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};HE=function(t,e,n,r){n!==r&&(e.flags|=4)};function qa(t,e){if(!wt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function M2(t,e,n){var r=e.pendingProps;switch(Km(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(e),null;case 1:return zn(e.type)&&Yc(),pn(e),null;case 3:return r=e.stateNode,ea(),xt(Bn),xt(wn),rg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ec(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kr!==null&&(jp(kr),kr=null))),Cp(t,e),pn(e),null;case 5:ng(e);var s=Li(Dl.current);if(n=e.type,t!==null&&e.stateNode!=null)GE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ge(166));return pn(e),null}if(t=Li(Kr.current),ec(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[qr]=e,r[Pl]=i,t=(e.mode&1)!==0,n){case"dialog":yt("cancel",r),yt("close",r);break;case"iframe":case"object":case"embed":yt("load",r);break;case"video":case"audio":for(s=0;s<el.length;s++)yt(el[s],r);break;case"source":yt("error",r);break;case"img":case"image":case"link":yt("error",r),yt("load",r);break;case"details":yt("toggle",r);break;case"input":xy(r,i),yt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},yt("invalid",r);break;case"textarea":_y(r,i),yt("invalid",r)}tp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Zu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Zu(r.textContent,a,t),s=["children",""+a]):bl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&yt("scroll",r)}switch(n){case"input":$u(r),wy(r,i,!0);break;case"textarea":$u(r),by(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Jc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[qr]=e,t[Pl]=r,zE(t,e,!1,!1),e.stateNode=t;e:{switch(o=np(n,r),n){case"dialog":yt("cancel",t),yt("close",t),s=r;break;case"iframe":case"object":case"embed":yt("load",t),s=r;break;case"video":case"audio":for(s=0;s<el.length;s++)yt(el[s],t);s=r;break;case"source":yt("error",t),s=r;break;case"img":case"image":case"link":yt("error",t),yt("load",t),s=r;break;case"details":yt("toggle",t),s=r;break;case"input":xy(t,r),s=Yf(t,r),yt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Tt({},r,{value:void 0}),yt("invalid",t);break;case"textarea":_y(t,r),s=Zf(t,r),yt("invalid",t);break;default:s=r}tp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?_b(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&xb(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&El(t,u):typeof u=="number"&&El(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bl.hasOwnProperty(i)?u!=null&&i==="onScroll"&&yt("scroll",t):u!=null&&Mm(t,i,u,o))}switch(n){case"input":$u(t),wy(t,r,!1);break;case"textarea":$u(t),by(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ai(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Fo(t,!!r.multiple,i,!1):r.defaultValue!=null&&Fo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Jc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pn(e),null;case 6:if(t&&e.stateNode!=null)HE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ge(166));if(n=Li(Dl.current),Li(Kr.current),ec(e)){if(r=e.stateNode,n=e.memoizedProps,r[qr]=e,(i=r.nodeValue!==n)&&(t=Qn,t!==null))switch(t.tag){case 3:Zu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qr]=e,e.stateNode=r}return pn(e),null;case 13:if(xt(bt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wt&&Jn!==null&&e.mode&1&&!(e.flags&128))lE(),Xo(),e.flags|=98560,i=!1;else if(i=ec(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ge(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ge(317));i[qr]=e}else Xo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pn(e),i=!1}else kr!==null&&(jp(kr),kr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||bt.current&1?Ht===0&&(Ht=3):mg())),e.updateQueue!==null&&(e.flags|=4),pn(e),null);case 4:return ea(),Cp(t,e),t===null&&Nl(e.stateNode.containerInfo),pn(e),null;case 10:return Xm(e.type._context),pn(e),null;case 17:return zn(e.type)&&Yc(),pn(e),null;case 19:if(xt(bt),i=e.memoizedState,i===null)return pn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)qa(i,!1);else{if(Ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rd(t),o!==null){for(e.flags|=128,qa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pt(bt,bt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Rt()>na&&(e.flags|=128,r=!0,qa(i,!1),e.lanes=4194304)}else{if(!r)if(t=rd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!wt)return pn(e),null}else 2*Rt()-i.renderingStartTime>na&&n!==1073741824&&(e.flags|=128,r=!0,qa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Rt(),e.sibling=null,n=bt.current,pt(bt,r?n&1|2:n&1),e):(pn(e),null);case 22:case 23:return pg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kn&1073741824&&(pn(e),e.subtreeFlags&6&&(e.flags|=8192)):pn(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}function D2(t,e){switch(Km(e),e.tag){case 1:return zn(e.type)&&Yc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ea(),xt(Bn),xt(wn),rg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ng(e),null;case 13:if(xt(bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));Xo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(bt),null;case 4:return ea(),null;case 10:return Xm(e.type._context),null;case 22:case 23:return pg(),null;case 24:return null;default:return null}}var rc=!1,yn=!1,L2=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Po(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){At(t,e,r)}else n.current=null}function Ap(t,e,n){try{n()}catch(r){At(t,e,r)}}var dv=!1;function j2(t,e){if(hp=qc,t=Jb(),qm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,m=t,g=null;t:for(;;){for(var y;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)g=m,m=y;for(;;){if(m===t)break t;if(g===n&&++c===s&&(a=o),g===i&&++d===r&&(u=o),(y=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=y}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(fp={focusedElem:t,selectionRange:n},qc=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,_=w.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:Ir(e.type,x),_);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(R){At(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return w=dv,dv=!1,w}function hl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ap(e,n,i)}s=s.next}while(s!==r)}}function Kd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Np(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $E(t){var e=t.alternate;e!==null&&(t.alternate=null,$E(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qr],delete e[Pl],delete e[gp],delete e[v2],delete e[x2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qE(t){return t.tag===5||t.tag===3||t.tag===4}function hv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jc));else if(r!==4&&(t=t.child,t!==null))for(Rp(t,e,n),t=t.sibling;t!==null;)Rp(t,e,n),t=t.sibling}function Pp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Pp(t,e,n),t=t.sibling;t!==null;)Pp(t,e,n),t=t.sibling}var en=null,Sr=!1;function Ls(t,e,n){for(n=n.child;n!==null;)WE(t,e,n),n=n.sibling}function WE(t,e,n){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(Od,n)}catch{}switch(n.tag){case 5:yn||Po(n,e);case 6:var r=en,s=Sr;en=null,Ls(t,e,n),en=r,Sr=s,en!==null&&(Sr?(t=en,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):en.removeChild(n.stateNode));break;case 18:en!==null&&(Sr?(t=en,n=n.stateNode,t.nodeType===8?uf(t.parentNode,n):t.nodeType===1&&uf(t,n),kl(t)):uf(en,n.stateNode));break;case 4:r=en,s=Sr,en=n.stateNode.containerInfo,Sr=!0,Ls(t,e,n),en=r,Sr=s;break;case 0:case 11:case 14:case 15:if(!yn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ap(n,e,o),s=s.next}while(s!==r)}Ls(t,e,n);break;case 1:if(!yn&&(Po(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){At(n,e,a)}Ls(t,e,n);break;case 21:Ls(t,e,n);break;case 22:n.mode&1?(yn=(r=yn)||n.memoizedState!==null,Ls(t,e,n),yn=r):Ls(t,e,n);break;default:Ls(t,e,n)}}function fv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new L2),e.forEach(function(r){var s=$2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Er(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:en=a.stateNode,Sr=!1;break e;case 3:en=a.stateNode.containerInfo,Sr=!0;break e;case 4:en=a.stateNode.containerInfo,Sr=!0;break e}a=a.return}if(en===null)throw Error(ge(160));WE(i,o,s),en=null,Sr=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){At(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)KE(e,t),e=e.sibling}function KE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Er(e,t),Hr(t),r&4){try{hl(3,t,t.return),Kd(3,t)}catch(x){At(t,t.return,x)}try{hl(5,t,t.return)}catch(x){At(t,t.return,x)}}break;case 1:Er(e,t),Hr(t),r&512&&n!==null&&Po(n,n.return);break;case 5:if(Er(e,t),Hr(t),r&512&&n!==null&&Po(n,n.return),t.flags&32){var s=t.stateNode;try{El(s,"")}catch(x){At(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&gb(s,i),np(a,o);var c=np(a,i);for(o=0;o<u.length;o+=2){var d=u[o],m=u[o+1];d==="style"?_b(s,m):d==="dangerouslySetInnerHTML"?xb(s,m):d==="children"?El(s,m):Mm(s,d,m,c)}switch(a){case"input":Qf(s,i);break;case"textarea":yb(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Fo(s,!!i.multiple,y,!1):g!==!!i.multiple&&(i.defaultValue!=null?Fo(s,!!i.multiple,i.defaultValue,!0):Fo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pl]=i}catch(x){At(t,t.return,x)}}break;case 6:if(Er(e,t),Hr(t),r&4){if(t.stateNode===null)throw Error(ge(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){At(t,t.return,x)}}break;case 3:if(Er(e,t),Hr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{kl(e.containerInfo)}catch(x){At(t,t.return,x)}break;case 4:Er(e,t),Hr(t);break;case 13:Er(e,t),Hr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hg=Rt())),r&4&&fv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(yn=(c=yn)||d,Er(e,t),yn=c):Er(e,t),Hr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Ie=t,d=t.child;d!==null;){for(m=Ie=d;Ie!==null;){switch(g=Ie,y=g.child,g.tag){case 0:case 11:case 14:case 15:hl(4,g,g.return);break;case 1:Po(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){At(r,n,x)}}break;case 5:Po(g,g.return);break;case 22:if(g.memoizedState!==null){mv(m);continue}}y!==null?(y.return=g,Ie=y):mv(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=wb("display",o))}catch(x){At(t,t.return,x)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(x){At(t,t.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Er(e,t),Hr(t),r&4&&fv(t);break;case 21:break;default:Er(e,t),Hr(t)}}function Hr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qE(n)){var r=n;break e}n=n.return}throw Error(ge(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(El(s,""),r.flags&=-33);var i=hv(t);Pp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=hv(t);Rp(t,a,o);break;default:throw Error(ge(161))}}catch(u){At(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function F2(t,e,n){Ie=t,JE(t)}function JE(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var s=Ie,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||rc;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||yn;a=rc;var c=yn;if(rc=o,(yn=u)&&!c)for(Ie=s;Ie!==null;)o=Ie,u=o.child,o.tag===22&&o.memoizedState!==null?gv(s):u!==null?(u.return=o,Ie=u):gv(s);for(;i!==null;)Ie=i,JE(i),i=i.sibling;Ie=s,rc=a,yn=c}pv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ie=i):pv(t)}}function pv(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yn||Kd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ir(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Xy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Xy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&kl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}yn||e.flags&512&&Np(e)}catch(g){At(e,e.return,g)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function mv(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function gv(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kd(4,e)}catch(u){At(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){At(e,s,u)}}var i=e.return;try{Np(e)}catch(u){At(e,i,u)}break;case 5:var o=e.return;try{Np(e)}catch(u){At(e,o,u)}}}catch(u){At(e,e.return,u)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var V2=Math.ceil,od=ks.ReactCurrentDispatcher,cg=ks.ReactCurrentOwner,dr=ks.ReactCurrentBatchConfig,Ze=0,Qt=null,Ft=null,rn=0,Kn=0,Mo=fi(0),Ht=0,Vl=null,qi=0,Jd=0,dg=0,fl=null,Fn=null,hg=0,na=1/0,os=null,ad=!1,Mp=null,ei=null,sc=!1,qs=null,ld=0,pl=0,Dp=null,kc=-1,Cc=0;function Cn(){return Ze&6?Rt():kc!==-1?kc:kc=Rt()}function ti(t){return t.mode&1?Ze&2&&rn!==0?rn&-rn:_2.transition!==null?(Cc===0&&(Cc=Mb()),Cc):(t=ct,t!==0||(t=window.event,t=t===void 0?16:Ob(t.type)),t):1}function Ar(t,e,n,r){if(50<pl)throw pl=0,Dp=null,Error(ge(185));nu(t,n,r),(!(Ze&2)||t!==Qt)&&(t===Qt&&(!(Ze&2)&&(Jd|=n),Ht===4&&Os(t,rn)),Gn(t,r),n===1&&Ze===0&&!(e.mode&1)&&(na=Rt()+500,$d&&pi()))}function Gn(t,e){var n=t.callbackNode;_C(t,e);var r=$c(t,t===Qt?rn:0);if(r===0)n!==null&&Iy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Iy(n),e===1)t.tag===0?w2(yv.bind(null,t)):iE(yv.bind(null,t)),g2(function(){!(Ze&6)&&pi()}),n=null;else{switch(Db(r)){case 1:n=Vm;break;case 4:n=Rb;break;case 16:n=Hc;break;case 536870912:n=Pb;break;default:n=Hc}n=rT(n,YE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YE(t,e){if(kc=-1,Cc=0,Ze&6)throw Error(ge(327));var n=t.callbackNode;if(zo()&&t.callbackNode!==n)return null;var r=$c(t,t===Qt?rn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ud(t,r);else{e=r;var s=Ze;Ze|=2;var i=XE();(Qt!==t||rn!==e)&&(os=null,na=Rt()+500,Ui(t,e));do try{B2();break}catch(a){QE(t,a)}while(!0);Qm(),od.current=i,Ze=s,Ft!==null?e=0:(Qt=null,rn=0,e=Ht)}if(e!==0){if(e===2&&(s=ap(t),s!==0&&(r=s,e=Lp(t,s))),e===1)throw n=Vl,Ui(t,0),Os(t,r),Gn(t,Rt()),n;if(e===6)Os(t,r);else{if(s=t.current.alternate,!(r&30)&&!U2(s)&&(e=ud(t,r),e===2&&(i=ap(t),i!==0&&(r=i,e=Lp(t,i))),e===1))throw n=Vl,Ui(t,0),Os(t,r),Gn(t,Rt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ge(345));case 2:Ni(t,Fn,os);break;case 3:if(Os(t,r),(r&130023424)===r&&(e=hg+500-Rt(),10<e)){if($c(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Cn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=mp(Ni.bind(null,t,Fn,os),e);break}Ni(t,Fn,os);break;case 4:if(Os(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Cr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*V2(r/1960))-r,10<r){t.timeoutHandle=mp(Ni.bind(null,t,Fn,os),r);break}Ni(t,Fn,os);break;case 5:Ni(t,Fn,os);break;default:throw Error(ge(329))}}}return Gn(t,Rt()),t.callbackNode===n?YE.bind(null,t):null}function Lp(t,e){var n=fl;return t.current.memoizedState.isDehydrated&&(Ui(t,e).flags|=256),t=ud(t,e),t!==2&&(e=Fn,Fn=n,e!==null&&jp(e)),t}function jp(t){Fn===null?Fn=t:Fn.push.apply(Fn,t)}function U2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Dr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Os(t,e){for(e&=~dg,e&=~Jd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cr(e),r=1<<n;t[n]=-1,e&=~r}}function yv(t){if(Ze&6)throw Error(ge(327));zo();var e=$c(t,0);if(!(e&1))return Gn(t,Rt()),null;var n=ud(t,e);if(t.tag!==0&&n===2){var r=ap(t);r!==0&&(e=r,n=Lp(t,r))}if(n===1)throw n=Vl,Ui(t,0),Os(t,e),Gn(t,Rt()),n;if(n===6)throw Error(ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ni(t,Fn,os),Gn(t,Rt()),null}function fg(t,e){var n=Ze;Ze|=1;try{return t(e)}finally{Ze=n,Ze===0&&(na=Rt()+500,$d&&pi())}}function Wi(t){qs!==null&&qs.tag===0&&!(Ze&6)&&zo();var e=Ze;Ze|=1;var n=dr.transition,r=ct;try{if(dr.transition=null,ct=1,t)return t()}finally{ct=r,dr.transition=n,Ze=e,!(Ze&6)&&pi()}}function pg(){Kn=Mo.current,xt(Mo)}function Ui(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,m2(n)),Ft!==null)for(n=Ft.return;n!==null;){var r=n;switch(Km(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yc();break;case 3:ea(),xt(Bn),xt(wn),rg();break;case 5:ng(r);break;case 4:ea();break;case 13:xt(bt);break;case 19:xt(bt);break;case 10:Xm(r.type._context);break;case 22:case 23:pg()}n=n.return}if(Qt=t,Ft=t=ni(t.current,null),rn=Kn=e,Ht=0,Vl=null,dg=Jd=qi=0,Fn=fl=null,Di!==null){for(e=0;e<Di.length;e++)if(n=Di[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Di=null}return t}function QE(t,e){do{var n=Ft;try{if(Qm(),Tc.current=id,sd){for(var r=Et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}sd=!1}if($i=0,Yt=Gt=Et=null,dl=!1,Ll=0,cg.current=null,n===null||n.return===null){Ht=1,Vl=e,Ft=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=rn,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=sv(o);if(y!==null){y.flags&=-257,iv(y,o,a,i,e),y.mode&1&&rv(i,c,e),e=y,u=c;var w=e.updateQueue;if(w===null){var x=new Set;x.add(u),e.updateQueue=x}else w.add(u);break e}else{if(!(e&1)){rv(i,c,e),mg();break e}u=Error(ge(426))}}else if(wt&&a.mode&1){var _=sv(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),iv(_,o,a,i,e),Jm(ta(u,a));break e}}i=u=ta(u,a),Ht!==4&&(Ht=2),fl===null?fl=[i]:fl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=DE(i,u,e);Qy(i,v);break e;case 1:a=u;var b=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ei===null||!ei.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=LE(i,a,e);Qy(i,R);break e}}i=i.return}while(i!==null)}eT(n)}catch(L){e=L,Ft===n&&n!==null&&(Ft=n=n.return);continue}break}while(!0)}function XE(){var t=od.current;return od.current=id,t===null?id:t}function mg(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Qt===null||!(qi&268435455)&&!(Jd&268435455)||Os(Qt,rn)}function ud(t,e){var n=Ze;Ze|=2;var r=XE();(Qt!==t||rn!==e)&&(os=null,Ui(t,e));do try{O2();break}catch(s){QE(t,s)}while(!0);if(Qm(),Ze=n,od.current=r,Ft!==null)throw Error(ge(261));return Qt=null,rn=0,Ht}function O2(){for(;Ft!==null;)ZE(Ft)}function B2(){for(;Ft!==null&&!hC();)ZE(Ft)}function ZE(t){var e=nT(t.alternate,t,Kn);t.memoizedProps=t.pendingProps,e===null?eT(t):Ft=e,cg.current=null}function eT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=D2(n,e),n!==null){n.flags&=32767,Ft=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ht=6,Ft=null;return}}else if(n=M2(n,e,Kn),n!==null){Ft=n;return}if(e=e.sibling,e!==null){Ft=e;return}Ft=e=t}while(e!==null);Ht===0&&(Ht=5)}function Ni(t,e,n){var r=ct,s=dr.transition;try{dr.transition=null,ct=1,z2(t,e,n,r)}finally{dr.transition=s,ct=r}return null}function z2(t,e,n,r){do zo();while(qs!==null);if(Ze&6)throw Error(ge(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ge(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(bC(t,i),t===Qt&&(Ft=Qt=null,rn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sc||(sc=!0,rT(Hc,function(){return zo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=dr.transition,dr.transition=null;var o=ct;ct=1;var a=Ze;Ze|=4,cg.current=null,j2(t,n),KE(n,t),l2(fp),qc=!!hp,fp=hp=null,t.current=n,F2(n),fC(),Ze=a,ct=o,dr.transition=i}else t.current=n;if(sc&&(sc=!1,qs=t,ld=s),i=t.pendingLanes,i===0&&(ei=null),gC(n.stateNode),Gn(t,Rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ad)throw ad=!1,t=Mp,Mp=null,t;return ld&1&&t.tag!==0&&zo(),i=t.pendingLanes,i&1?t===Dp?pl++:(pl=0,Dp=t):pl=0,pi(),null}function zo(){if(qs!==null){var t=Db(ld),e=dr.transition,n=ct;try{if(dr.transition=null,ct=16>t?16:t,qs===null)var r=!1;else{if(t=qs,qs=null,ld=0,Ze&6)throw Error(ge(331));var s=Ze;for(Ze|=4,Ie=t.current;Ie!==null;){var i=Ie,o=i.child;if(Ie.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(Ie=c;Ie!==null;){var d=Ie;switch(d.tag){case 0:case 11:case 15:hl(8,d,i)}var m=d.child;if(m!==null)m.return=d,Ie=m;else for(;Ie!==null;){d=Ie;var g=d.sibling,y=d.return;if($E(d),d===c){Ie=null;break}if(g!==null){g.return=y,Ie=g;break}Ie=y}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}Ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ie=o;else e:for(;Ie!==null;){if(i=Ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:hl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ie=v;break e}Ie=i.return}}var b=t.current;for(Ie=b;Ie!==null;){o=Ie;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Ie=T;else e:for(o=b;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kd(9,a)}}catch(L){At(a,a.return,L)}if(a===o){Ie=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,Ie=R;break e}Ie=a.return}}if(Ze=s,pi(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(Od,t)}catch{}r=!0}return r}finally{ct=n,dr.transition=e}}return!1}function vv(t,e,n){e=ta(n,e),e=DE(t,e,1),t=Zs(t,e,1),e=Cn(),t!==null&&(nu(t,1,e),Gn(t,e))}function At(t,e,n){if(t.tag===3)vv(t,t,n);else for(;e!==null;){if(e.tag===3){vv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ei===null||!ei.has(r))){t=ta(n,t),t=LE(e,t,1),e=Zs(e,t,1),t=Cn(),e!==null&&(nu(e,1,t),Gn(e,t));break}}e=e.return}}function G2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Cn(),t.pingedLanes|=t.suspendedLanes&n,Qt===t&&(rn&n)===n&&(Ht===4||Ht===3&&(rn&130023424)===rn&&500>Rt()-hg?Ui(t,0):dg|=n),Gn(t,e)}function tT(t,e){e===0&&(t.mode&1?(e=Ku,Ku<<=1,!(Ku&130023424)&&(Ku=4194304)):e=1);var n=Cn();t=xs(t,e),t!==null&&(nu(t,e,n),Gn(t,n))}function H2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tT(t,n)}function $2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ge(314))}r!==null&&r.delete(e),tT(t,n)}var nT;nT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bn.current)Un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Un=!1,P2(t,e,n);Un=!!(t.flags&131072)}else Un=!1,wt&&e.flags&1048576&&oE(e,Zc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sc(t,e),t=e.pendingProps;var s=Qo(e,wn.current);Bo(e,n),s=ig(null,e,r,t,s,n);var i=og();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zn(r)?(i=!0,Qc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,eg(e),s.updater=Wd,e.stateNode=s,s._reactInternals=e,bp(e,r,t,n),e=Ip(null,e,r,!0,i,n)):(e.tag=0,wt&&i&&Wm(e),Sn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Sc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=W2(r),t=Ir(r,t),s){case 0:e=Tp(null,e,r,t,n);break e;case 1:e=lv(null,e,r,t,n);break e;case 11:e=ov(null,e,r,t,n);break e;case 14:e=av(null,e,r,Ir(r.type,t),n);break e}throw Error(ge(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ir(r,s),Tp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ir(r,s),lv(t,e,r,s,n);case 3:e:{if(UE(e),t===null)throw Error(ge(387));r=e.pendingProps,i=e.memoizedState,s=i.element,hE(t,e),nd(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ta(Error(ge(423)),e),e=uv(t,e,r,n,s);break e}else if(r!==s){s=ta(Error(ge(424)),e),e=uv(t,e,r,n,s);break e}else for(Jn=Xs(e.stateNode.containerInfo.firstChild),Qn=e,wt=!0,kr=null,n=cE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xo(),r===s){e=ws(t,e,n);break e}Sn(t,e,r,n)}e=e.child}return e;case 5:return fE(e),t===null&&xp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,pp(r,s)?o=null:i!==null&&pp(r,i)&&(e.flags|=32),VE(t,e),Sn(t,e,o,n),e.child;case 6:return t===null&&xp(e),null;case 13:return OE(t,e,n);case 4:return tg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zo(e,null,r,n):Sn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ir(r,s),ov(t,e,r,s,n);case 7:return Sn(t,e,e.pendingProps,n),e.child;case 8:return Sn(t,e,e.pendingProps.children,n),e.child;case 12:return Sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pt(ed,r._currentValue),r._currentValue=o,i!==null)if(Dr(i.value,o)){if(i.children===s.children&&!Bn.current){e=ws(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=gs(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),wp(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ge(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),wp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Sn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Bo(e,n),s=pr(s),r=r(s),e.flags|=1,Sn(t,e,r,n),e.child;case 14:return r=e.type,s=Ir(r,e.pendingProps),s=Ir(r.type,s),av(t,e,r,s,n);case 15:return jE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ir(r,s),Sc(t,e),e.tag=1,zn(r)?(t=!0,Qc(e)):t=!1,Bo(e,n),ME(e,r,s),bp(e,r,s,n),Ip(null,e,r,!0,t,n);case 19:return BE(t,e,n);case 22:return FE(t,e,n)}throw Error(ge(156,e.tag))};function rT(t,e){return Nb(t,e)}function q2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(t,e,n,r){return new q2(t,e,n,r)}function gg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function W2(t){if(typeof t=="function")return gg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Lm)return 11;if(t===jm)return 14}return 2}function ni(t,e){var n=t.alternate;return n===null?(n=cr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ac(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")gg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Eo:return Oi(n.children,s,i,e);case Dm:o=8,s|=8;break;case qf:return t=cr(12,n,e,s|2),t.elementType=qf,t.lanes=i,t;case Wf:return t=cr(13,n,e,s),t.elementType=Wf,t.lanes=i,t;case Kf:return t=cr(19,n,e,s),t.elementType=Kf,t.lanes=i,t;case fb:return Yd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case db:o=10;break e;case hb:o=9;break e;case Lm:o=11;break e;case jm:o=14;break e;case Fs:o=16,r=null;break e}throw Error(ge(130,t==null?t:typeof t,""))}return e=cr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Oi(t,e,n,r){return t=cr(7,t,r,e),t.lanes=n,t}function Yd(t,e,n,r){return t=cr(22,t,r,e),t.elementType=fb,t.lanes=n,t.stateNode={isHidden:!1},t}function yf(t,e,n){return t=cr(6,t,null,e),t.lanes=n,t}function vf(t,e,n){return e=cr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function K2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qh(0),this.expirationTimes=Qh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yg(t,e,n,r,s,i,o,a,u){return t=new K2(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=cr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eg(i),t}function J2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function sT(t){if(!t)return li;t=t._reactInternals;e:{if(no(t)!==t||t.tag!==1)throw Error(ge(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(t.tag===1){var n=t.type;if(zn(n))return sE(t,n,e)}return e}function iT(t,e,n,r,s,i,o,a,u){return t=yg(n,r,!0,t,s,i,o,a,u),t.context=sT(null),n=t.current,r=Cn(),s=ti(n),i=gs(r,s),i.callback=e??null,Zs(n,i,s),t.current.lanes=s,nu(t,s,r),Gn(t,r),t}function Qd(t,e,n,r){var s=e.current,i=Cn(),o=ti(s);return n=sT(n),e.context===null?e.context=n:e.pendingContext=n,e=gs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zs(s,e,o),t!==null&&(Ar(t,s,o,i),Ec(t,s,o)),o}function cd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vg(t,e){xv(t,e),(t=t.alternate)&&xv(t,e)}function Y2(){return null}var oT=typeof reportError=="function"?reportError:function(t){console.error(t)};function xg(t){this._internalRoot=t}Xd.prototype.render=xg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ge(409));Qd(t,e,null,null)};Xd.prototype.unmount=xg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wi(function(){Qd(null,t,null,null)}),e[vs]=null}};function Xd(t){this._internalRoot=t}Xd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Us.length&&e!==0&&e<Us[n].priority;n++);Us.splice(n,0,t),n===0&&Ub(t)}};function wg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wv(){}function Q2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=cd(o);i.call(c)}}var o=iT(e,r,t,0,null,!1,!1,"",wv);return t._reactRootContainer=o,t[vs]=o.current,Nl(t.nodeType===8?t.parentNode:t),Wi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=cd(u);a.call(c)}}var u=yg(t,0,!1,null,null,!1,!1,"",wv);return t._reactRootContainer=u,t[vs]=u.current,Nl(t.nodeType===8?t.parentNode:t),Wi(function(){Qd(e,u,n,r)}),u}function eh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=cd(o);a.call(u)}}Qd(e,o,t,s)}else o=Q2(n,e,t,s,r);return cd(o)}Lb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Za(e.pendingLanes);n!==0&&(Um(e,n|1),Gn(e,Rt()),!(Ze&6)&&(na=Rt()+500,pi()))}break;case 13:Wi(function(){var r=xs(t,1);if(r!==null){var s=Cn();Ar(r,t,1,s)}}),vg(t,1)}};Om=function(t){if(t.tag===13){var e=xs(t,134217728);if(e!==null){var n=Cn();Ar(e,t,134217728,n)}vg(t,134217728)}};jb=function(t){if(t.tag===13){var e=ti(t),n=xs(t,e);if(n!==null){var r=Cn();Ar(n,t,e,r)}vg(t,e)}};Fb=function(){return ct};Vb=function(t,e){var n=ct;try{return ct=t,e()}finally{ct=n}};sp=function(t,e,n){switch(e){case"input":if(Qf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Hd(r);if(!s)throw Error(ge(90));mb(r),Qf(r,s)}}}break;case"textarea":yb(t,n);break;case"select":e=n.value,e!=null&&Fo(t,!!n.multiple,e,!1)}};Tb=fg;Ib=Wi;var X2={usingClientEntryPoint:!1,Events:[su,ko,Hd,bb,Eb,fg]},Wa={findFiberByHostInstance:Mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z2={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cb(t),t===null?null:t.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance||Y2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{Od=ic.inject(Z2),Wr=ic}catch{}}nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X2;nr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wg(e))throw Error(ge(200));return J2(t,e,null,n)};nr.createRoot=function(t,e){if(!wg(t))throw Error(ge(299));var n=!1,r="",s=oT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yg(t,1,!1,null,null,n,!1,r,s),t[vs]=e.current,Nl(t.nodeType===8?t.parentNode:t),new xg(e)};nr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ge(188)):(t=Object.keys(t).join(","),Error(ge(268,t)));return t=Cb(e),t=t===null?null:t.stateNode,t};nr.flushSync=function(t){return Wi(t)};nr.hydrate=function(t,e,n){if(!Zd(e))throw Error(ge(200));return eh(null,t,e,!0,n)};nr.hydrateRoot=function(t,e,n){if(!wg(t))throw Error(ge(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=oT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=iT(e,null,t,1,n??null,s,!1,i,o),t[vs]=e.current,Nl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Xd(e)};nr.render=function(t,e,n){if(!Zd(e))throw Error(ge(200));return eh(null,t,e,!1,n)};nr.unmountComponentAtNode=function(t){if(!Zd(t))throw Error(ge(40));return t._reactRootContainer?(Wi(function(){eh(null,null,t,!1,function(){t._reactRootContainer=null,t[vs]=null})}),!0):!1};nr.unstable_batchedUpdates=fg;nr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zd(n))throw Error(ge(200));if(t==null||t._reactInternals===void 0)throw Error(ge(38));return eh(t,e,n,!1,r)};nr.version="18.3.1-next-f1338f8080-20240426";function aT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aT)}catch(t){console.error(t)}}aT(),ab.exports=nr;var eA=ab.exports,_v=eA;Hf.createRoot=_v.createRoot,Hf.hydrateRoot=_v.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ul(){return Ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ul.apply(this,arguments)}var Ws;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ws||(Ws={}));const bv="popstate";function tA(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:u=""}=ro(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Fp("",{pathname:o,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");a=c===-1?u:u.slice(0,c)}return a+"#"+(typeof i=="string"?i:dd(i))}function r(s,i){th(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return rA(e,n,r,t)}function Pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function th(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nA(){return Math.random().toString(36).substr(2,8)}function Ev(t,e){return{usr:t.state,key:t.key,idx:e}}function Fp(t,e,n,r){return n===void 0&&(n=null),Ul({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ro(e):e,{state:n,key:e&&e.key||r||nA()})}function dd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ro(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function rA(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ws.Pop,u=null,c=d();c==null&&(c=0,o.replaceState(Ul({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function m(){a=Ws.Pop;let _=d(),v=_==null?null:_-c;c=_,u&&u({action:a,location:x.location,delta:v})}function g(_,v){a=Ws.Push;let b=Fp(x.location,_,v);n&&n(b,_),c=d()+1;let T=Ev(b,c),R=x.createHref(b);try{o.pushState(T,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(R)}i&&u&&u({action:a,location:x.location,delta:1})}function y(_,v){a=Ws.Replace;let b=Fp(x.location,_,v);n&&n(b,_),c=d();let T=Ev(b,c),R=x.createHref(b);o.replaceState(T,"",R),i&&u&&u({action:a,location:x.location,delta:0})}function w(_){let v=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof _=="string"?_:dd(_);return b=b.replace(/ $/,"%20"),Pt(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let x={get action(){return a},get location(){return t(s,o)},listen(_){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(bv,m),u=_,()=>{s.removeEventListener(bv,m),u=null}},createHref(_){return e(s,_)},createURL:w,encodeLocation(_){let v=w(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:g,replace:y,go(_){return o.go(_)}};return x}var Tv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Tv||(Tv={}));function sA(t,e,n){return n===void 0&&(n="/"),iA(t,e,n)}function iA(t,e,n,r){let s=typeof e=="string"?ro(e):e,i=_g(s.pathname||"/",n);if(i==null)return null;let o=lT(t);oA(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=vA(i);a=mA(o[u],c)}return a}function lT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let u={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Pt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=ri([r,u.relativePath]),d=n.concat(u);i.children&&i.children.length>0&&(Pt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),lT(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:fA(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let u of uT(i.path))s(i,o,u)}),e}function uT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=uT(r.join("/")),a=[];return a.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function oA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:pA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const aA=/^:[\w-]+$/,lA=3,uA=2,cA=1,dA=10,hA=-2,Iv=t=>t==="*";function fA(t,e){let n=t.split("/"),r=n.length;return n.some(Iv)&&(r+=hA),e&&(r+=uA),n.filter(s=>!Iv(s)).reduce((s,i)=>s+(aA.test(i)?lA:i===""?cA:dA),r)}function pA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function mA(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",m=gA({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),g=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:ri([i,m.pathname]),pathnameBase:EA(ri([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=ri([i,m.pathnameBase]))}return o}function gA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=yA(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,m)=>{let{paramName:g,isOptional:y}=d;if(g==="*"){let x=a[m]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const w=a[m];return y&&!w?c[g]=void 0:c[g]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function yA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),th(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function vA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return th(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _g(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const xA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wA=t=>xA.test(t);function _A(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ro(t):t,i;if(n)if(wA(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),th(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Sv(n.substring(1),"/"):i=Sv(n,e)}else i=e;return{pathname:i,search:TA(r),hash:IA(s)}}function Sv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function xf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bg(t,e){let n=bA(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Eg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ro(t):(s=Ul({},t),Pt(!s.pathname||!s.pathname.includes("?"),xf("?","pathname","search",s)),Pt(!s.pathname||!s.pathname.includes("#"),xf("#","pathname","hash",s)),Pt(!s.search||!s.search.includes("#"),xf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}a=m>=0?e[m]:"/"}let u=_A(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const ri=t=>t.join("/").replace(/\/\/+/g,"/"),EA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,IA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const cT=["post","put","patch","delete"];new Set(cT);const kA=["get",...cT];new Set(kA);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ol(){return Ol=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ol.apply(this,arguments)}const Tg=j.createContext(null),CA=j.createContext(null),mi=j.createContext(null),nh=j.createContext(null),Cs=j.createContext({outlet:null,matches:[],isDataRoute:!1}),dT=j.createContext(null);function AA(t,e){let{relative:n}=e===void 0?{}:e;va()||Pt(!1);let{basename:r,navigator:s}=j.useContext(mi),{hash:i,pathname:o,search:a}=pT(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:ri([r,o])),s.createHref({pathname:u,search:a,hash:i})}function va(){return j.useContext(nh)!=null}function gi(){return va()||Pt(!1),j.useContext(nh).location}function hT(t){j.useContext(mi).static||j.useLayoutEffect(t)}function rs(){let{isDataRoute:t}=j.useContext(Cs);return t?zA():NA()}function NA(){va()||Pt(!1);let t=j.useContext(Tg),{basename:e,future:n,navigator:r}=j.useContext(mi),{matches:s}=j.useContext(Cs),{pathname:i}=gi(),o=JSON.stringify(bg(s,n.v7_relativeSplatPath)),a=j.useRef(!1);return hT(()=>{a.current=!0}),j.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let m=Eg(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ri([e,m.pathname])),(d.replace?r.replace:r.push)(m,d.state,d)},[e,r,o,i,t])}function fT(){let{matches:t}=j.useContext(Cs),e=t[t.length-1];return e?e.params:{}}function pT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(mi),{matches:s}=j.useContext(Cs),{pathname:i}=gi(),o=JSON.stringify(bg(s,r.v7_relativeSplatPath));return j.useMemo(()=>Eg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function RA(t,e){return PA(t,e)}function PA(t,e,n,r){va()||Pt(!1);let{navigator:s}=j.useContext(mi),{matches:i}=j.useContext(Cs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=gi(),d;if(e){var m;let _=typeof e=="string"?ro(e):e;u==="/"||(m=_.pathname)!=null&&m.startsWith(u)||Pt(!1),d=_}else d=c;let g=d.pathname||"/",y=g;if(u!=="/"){let _=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=sA(t,{pathname:y}),x=FA(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:ri([u,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:ri([u,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&x?j.createElement(nh.Provider,{value:{location:Ol({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ws.Pop}},x):x}function MA(){let t=BA(),e=SA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const DA=j.createElement(MA,null);class LA extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(Cs.Provider,{value:this.props.routeContext},j.createElement(dT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jA(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(Tg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Cs.Provider,{value:e},r)}function FA(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);d>=0||Pt(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=d),m.route.id){let{loaderData:g,errors:y}=n,w=m.route.loader&&g[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||w){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,m,g)=>{let y,w=!1,x=null,_=null;n&&(y=a&&m.route.id?a[m.route.id]:void 0,x=m.route.errorElement||DA,u&&(c<0&&g===0?(GA("route-fallback"),w=!0,_=null):c===g&&(w=!0,_=m.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,g+1)),b=()=>{let T;return y?T=x:w?T=_:m.route.Component?T=j.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=d,j.createElement(jA,{match:m,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?j.createElement(LA,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var mT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mT||{}),gT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gT||{});function VA(t){let e=j.useContext(Tg);return e||Pt(!1),e}function UA(t){let e=j.useContext(CA);return e||Pt(!1),e}function OA(t){let e=j.useContext(Cs);return e||Pt(!1),e}function yT(t){let e=OA(),n=e.matches[e.matches.length-1];return n.route.id||Pt(!1),n.route.id}function BA(){var t;let e=j.useContext(dT),n=UA(),r=yT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function zA(){let{router:t}=VA(mT.UseNavigateStable),e=yT(gT.UseNavigateStable),n=j.useRef(!1);return hT(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ol({fromRouteId:e},i)))},[t,e])}const kv={};function GA(t,e,n){kv[t]||(kv[t]=!0)}function HA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function $A(t){let{to:e,replace:n,state:r,relative:s}=t;va()||Pt(!1);let{future:i,static:o}=j.useContext(mi),{matches:a}=j.useContext(Cs),{pathname:u}=gi(),c=rs(),d=Eg(e,bg(a,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(d);return j.useEffect(()=>c(JSON.parse(m),{replace:n,state:r,relative:s}),[c,m,s,n,r]),null}function Tn(t){Pt(!1)}function qA(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ws.Pop,navigator:i,static:o=!1,future:a}=t;va()&&Pt(!1);let u=e.replace(/^\/*/,"/"),c=j.useMemo(()=>({basename:u,navigator:i,static:o,future:Ol({v7_relativeSplatPath:!1},a)}),[u,a,i,o]);typeof r=="string"&&(r=ro(r));let{pathname:d="/",search:m="",hash:g="",state:y=null,key:w="default"}=r,x=j.useMemo(()=>{let _=_g(d,u);return _==null?null:{location:{pathname:_,search:m,hash:g,state:y,key:w},navigationType:s}},[u,d,m,g,y,w,s]);return x==null?null:j.createElement(mi.Provider,{value:c},j.createElement(nh.Provider,{children:n,value:x}))}function WA(t){let{children:e,location:n}=t;return RA(Vp(e),n)}new Promise(()=>{});function Vp(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,Vp(r.props.children,i));return}r.type!==Tn&&Pt(!1),!r.props.index||!r.props.children||Pt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Vp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Up(){return Up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Up.apply(this,arguments)}function KA(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function JA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function YA(t,e){return t.button===0&&(!e||e==="_self")&&!JA(t)}const QA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],XA="6";try{window.__reactRouterVersion=XA}catch{}const ZA="startTransition",Cv=Gk[ZA];function eN(t){let{basename:e,children:n,future:r,window:s}=t,i=j.useRef();i.current==null&&(i.current=tA({window:s,v5Compat:!0}));let o=i.current,[a,u]=j.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=j.useCallback(m=>{c&&Cv?Cv(()=>u(m)):u(m)},[u,c]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.useEffect(()=>HA(r),[r]),j.createElement(qA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const tN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wf=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:u,to:c,preventScrollReset:d,viewTransition:m}=e,g=KA(e,QA),{basename:y}=j.useContext(mi),w,x=!1;if(typeof c=="string"&&nN.test(c)&&(w=c,tN))try{let T=new URL(window.location.href),R=c.startsWith("//")?new URL(T.protocol+c):new URL(c),L=_g(R.pathname,y);R.origin===T.origin&&L!=null?c=L+R.search+R.hash:x=!0}catch{}let _=AA(c,{relative:s}),v=rN(c,{replace:o,state:a,target:u,preventScrollReset:d,relative:s,viewTransition:m});function b(T){r&&r(T),T.defaultPrevented||v(T)}return j.createElement("a",Up({},g,{href:w||_,onClick:x||i?r:b,ref:n,target:u}))});var Av;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Av||(Av={}));var Nv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Nv||(Nv={}));function rN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,u=rs(),c=gi(),d=pT(t,{relative:o});return j.useCallback(m=>{if(YA(m,n)){m.preventDefault();let g=r!==void 0?r:dd(c)===dd(d);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,u,d,r,s,n,t,i,o,a])}const Bl=({className:t="w-10 h-10",variant:e="dark"})=>{const n=e==="dark"?"#0f172a":"#ffffff",r=e==="dark"?"#ffffff":"#0f172a";return l.jsxs("svg",{viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[l.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",fill:n}),l.jsx("text",{x:"50%",y:"235",dominantBaseline:"middle",textAnchor:"middle",fill:r,style:{fontSize:"160px",fontWeight:"900",fontFamily:"'Plus Jakarta Sans', sans-serif",letterSpacing:"-2px",fontStyle:"normal"},children:"IRA"}),l.jsx("text",{x:"50%",y:"340",dominantBaseline:"middle",textAnchor:"middle",fill:r,textLength:"280",lengthAdjust:"spacingAndGlyphs",style:{fontSize:"32px",fontWeight:"800",fontFamily:"'Plus Jakarta Sans', sans-serif",textTransform:"uppercase",letterSpacing:"2px",opacity:.9,fontStyle:"normal"},children:"irfan rizki aditri"}),e==="light"&&l.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",stroke:"rgba(0,0,0,0.05)",strokeWidth:"2"})]})},sN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}),l.jsx("path",{d:"M22 21H7"}),l.jsx("path",{d:"m5 11 9 9"})]}),_f=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),l.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),l.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"})]}),iN=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4Z"})}),ra=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),vT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),Nr=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"m15 18-6-6 6-6"})}),Xn=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"m6 9 6 6 6-6"})}),sa=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M5 12h14"}),l.jsx("path",{d:"m12 5 7 7-7 7"})]}),xT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("line",{x1:"12",x2:"12",y1:"19",y2:"5"}),l.jsx("polyline",{points:"5 12 12 5 19 12"})]}),wT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),l.jsx("polyline",{points:"19 12 12 19 5 12"})]}),Op=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),oN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"m9 7-5 5 5 5"}),l.jsx("path",{d:"m15 7 5 5-5 5"})]}),rh=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),l.jsx("path",{d:"M16 21h5v-5"})]}),ou=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),l.jsx("path",{d:"M12 9v4"}),l.jsx("path",{d:"M12 17h.01"})]}),_T=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),l.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),l.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]}),hd=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),l.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1 4-10z"})]}),Rv=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-6v-4h4v4h-4z"}),l.jsx("path",{d:"M12 12.5a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 1 0v5a.5.5 0 0 1-.5.5z"}),l.jsx("path",{d:"M12 2a10 10 0 0 1 7.07 17.07l-1.41-1.41A8 8 0 1 0 5.34 4.34l1.41 1.41A10 10 0 0 1 12 2z"}),l.jsx("text",{x:"50%",y:"55%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"14",fontWeight:"bold",children:"G"})]}),Pv=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),bT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),l.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),_s=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("polyline",{points:"20 6 9 17 4 12"})}),aN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("circle",{cx:"12",cy:"12",r:"1"}),l.jsx("circle",{cx:"12",cy:"5",r:"1"}),l.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),Jr=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M3 6h18"}),l.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),l.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),lN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),l.jsx("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),l.jsx("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),l.jsx("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),l.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]}),fd=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),l.jsx("path",{d:"m15 5 4 4"})]}),Ig=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),l.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),l.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),l.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),zl=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"m21 2-2 2m-7.6 7.6a6 6 0 1 1-8.4-8.4 6 6 0 0 1 8.4 8.4Zm0 0 5.7 5.7a2 2 0 0 1 0 2.8l-2.8 2.8"})}),Mv=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),l.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),uN=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"})}),cN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M12 16v-4"}),l.jsx("path",{d:"M12 8h.01"})]}),dN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M12 2v2"}),l.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),l.jsx("path",{d:"M20 12h2"}),l.jsx("path",{d:"m19.07 4.93-1.41 1.41"}),l.jsx("path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128"}),l.jsx("path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"})]}),hN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),l.jsx("line",{x1:"4",x2:"4",y1:"22",y2:"15"})]}),ET=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:l.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),pd=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"}),l.jsx("path",{d:"m9 12 2 2 4-4"})]}),fN=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:l.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),pN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M9 18V5l12-2v13"}),l.jsx("circle",{cx:"6",cy:"18",r:"3"}),l.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),TT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),l.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),IT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),mN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("circle",{cx:"6",cy:"6",r:"3"}),l.jsx("circle",{cx:"6",cy:"18",r:"3"}),l.jsx("line",{x1:"20",x2:"8.12",y1:"4",y2:"15.88"}),l.jsx("line",{x1:"14.47",x2:"20",y1:"14.48",y2:"20"}),l.jsx("line",{x1:"8.12",x2:"12",y1:"8.12",y2:"12"})]}),ST=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("line",{x1:"3",x2:"21",y1:"9",y2:"9"}),l.jsx("line",{x1:"9",x2:"9",y1:"21",y2:"9"})]}),gN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),l.jsx("path",{d:"M3 3v5h5"})]}),yN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("polyline",{points:"16 3 21 3 21 8"}),l.jsx("line",{x1:"4",x2:"21",y1:"20",y2:"3"}),l.jsx("polyline",{points:"21 16 21 21 16 21"}),l.jsx("line",{x1:"15",x2:"21",y1:"15",y2:"21"}),l.jsx("line",{x1:"4",x2:"9",y1:"4",y2:"9"})]}),vN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{width:"13",height:"13",x:"9",y:"9",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),bf=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("circle",{cx:"12",cy:"12",r:"10"})}),Ef=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),xN=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"})}),Dv=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"m12 2 3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),wN=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),_N=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M6 2v14a2 2 0 0 0 2 2h14"}),l.jsx("path",{d:"M18 22V8a2 2 0 0 0-2-2H2"})]}),bN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M3 7v6h6"}),l.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]}),EN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5"}),l.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),l.jsx("line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5"})]}),TN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),l.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]}),kT=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M8 14.5c2.5-1 5.5-1 8 0"}),l.jsx("path",{d:"M6.5 11.5c3.5-1.5 7.5-1.5 11 0"}),l.jsx("path",{d:"M5 8.5c4.5-2 9.5-2 14 0"})]}),IN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),l.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),SN=({className:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),l.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})]}),kN=({className:t})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:l.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})});var Lv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},CN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},AT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,d=i>>2,m=(i&3)<<4|a>>4;let g=(a&15)<<2|c>>6,y=c&63;u||(y=64,o||(g=64)),r.push(n[d],n[m],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||m==null)throw new AN;const g=i<<2|a>>4;if(r.push(g),c!==64){const y=a<<4&240|c>>2;if(r.push(y),m!==64){const w=c<<6&192|m;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NN=function(t){const e=CT(t);return AT.encodeByteArray(e,!0)},md=function(t){return NN(t).replace(/\./g,"")},NT=function(t){try{return AT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=()=>RN().__FIREBASE_DEFAULTS__,MN=()=>{if(typeof process>"u"||typeof Lv>"u")return;const t=Lv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NT(t[1]);return e&&JSON.parse(e)},sh=()=>{try{return PN()||MN()||DN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},RT=t=>{var e,n;return(n=(e=sh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},LN=t=>{const e=RT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},PT=()=>{var t;return(t=sh())===null||t===void 0?void 0:t.config},MT=t=>{var e;return(e=sh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[md(JSON.stringify(n)),md(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function UN(){var t;const e=(t=sh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ON(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zN(){const t=_n();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function GN(){return!UN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LT(){try{return typeof indexedDB=="object"}catch{return!1}}function jT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function HN(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="FirebaseError";class Ur extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$N,Object.setPrototypeOf(this,Ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,so.prototype.create)}}class so{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?qN(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ur(s,a,r)}}function qN(t,e){return t.replace(WN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const WN=/\{\$([^}]+)}/g;function KN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(jv(i)&&jv(o)){if(!Gl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function jv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function JN(t,e){const n=new YN(t,e);return n.subscribe.bind(n)}class YN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");QN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Tf),s.error===void 0&&(s.error=Tf),s.complete===void 0&&(s.complete=Tf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=1e3,ZN=2,eR=4*60*60*1e3,tR=.5;function Fv(t,e=XN,n=ZN){const r=e*Math.pow(n,t),s=Math.round(tR*r*(Math.random()-.5)*2);return Math.min(eR,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(t){return t&&t._delegate?t._delegate:t}class Lr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sR(e))try{this.getOrInitializeService({instanceIdentifier:Ri})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ri){return this.instances.has(e)}getOptions(e=Ri){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ri){return this.component?this.component.multipleInstances?e:Ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rR(t){return t===Ri?void 0:t}function sR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Je||(Je={}));const oR={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},aR=Je.INFO,lR={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},uR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=lR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ih{constructor(e){this.name=e,this._logLevel=aR,this._logHandler=uR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const cR=(t,e)=>e.some(n=>t instanceof n);let Vv,Uv;function dR(){return Vv||(Vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hR(){return Uv||(Uv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FT=new WeakMap,Bp=new WeakMap,VT=new WeakMap,If=new WeakMap,Sg=new WeakMap;function fR(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(si(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&FT.set(n,t)}).catch(()=>{}),Sg.set(e,t),e}function pR(t){if(Bp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Bp.set(t,e)}let zp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||VT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return si(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mR(t){zp=t(zp)}function gR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Sf(this),e,...n);return VT.set(r,e.sort?e.sort():[e]),si(r)}:hR().includes(t)?function(...e){return t.apply(Sf(this),e),si(FT.get(this))}:function(...e){return si(t.apply(Sf(this),e))}}function yR(t){return typeof t=="function"?gR(t):(t instanceof IDBTransaction&&pR(t),cR(t,dR())?new Proxy(t,zp):t)}function si(t){if(t instanceof IDBRequest)return fR(t);if(If.has(t))return If.get(t);const e=yR(t);return e!==t&&(If.set(t,e),Sg.set(e,t)),e}const Sf=t=>Sg.get(t);function UT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=si(o);return r&&o.addEventListener("upgradeneeded",u=>{r(si(o.result),u.oldVersion,u.newVersion,si(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const vR=["get","getKey","getAll","getAllKeys","count"],xR=["put","add","delete","clear"],kf=new Map;function Ov(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kf.get(e))return kf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=xR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vR.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return kf.set(e,i),i}mR(t=>({...t,get:(e,n,r)=>Ov(e,n)||t.get(e,n,r),has:(e,n)=>!!Ov(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_R(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _R(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gp="@firebase/app",Bv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new ih("@firebase/app"),bR="@firebase/app-compat",ER="@firebase/analytics-compat",TR="@firebase/analytics",IR="@firebase/app-check-compat",SR="@firebase/app-check",kR="@firebase/auth",CR="@firebase/auth-compat",AR="@firebase/database",NR="@firebase/data-connect",RR="@firebase/database-compat",PR="@firebase/functions",MR="@firebase/functions-compat",DR="@firebase/installations",LR="@firebase/installations-compat",jR="@firebase/messaging",FR="@firebase/messaging-compat",VR="@firebase/performance",UR="@firebase/performance-compat",OR="@firebase/remote-config",BR="@firebase/remote-config-compat",zR="@firebase/storage",GR="@firebase/storage-compat",HR="@firebase/firestore",$R="@firebase/vertexai-preview",qR="@firebase/firestore-compat",WR="firebase",KR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="[DEFAULT]",JR={[Gp]:"fire-core",[bR]:"fire-core-compat",[TR]:"fire-analytics",[ER]:"fire-analytics-compat",[SR]:"fire-app-check",[IR]:"fire-app-check-compat",[kR]:"fire-auth",[CR]:"fire-auth-compat",[AR]:"fire-rtdb",[NR]:"fire-data-connect",[RR]:"fire-rtdb-compat",[PR]:"fire-fn",[MR]:"fire-fn-compat",[DR]:"fire-iid",[LR]:"fire-iid-compat",[jR]:"fire-fcm",[FR]:"fire-fcm-compat",[VR]:"fire-perf",[UR]:"fire-perf-compat",[OR]:"fire-rc",[BR]:"fire-rc-compat",[zR]:"fire-gcs",[GR]:"fire-gcs-compat",[HR]:"fire-fst",[qR]:"fire-fst-compat",[$R]:"fire-vertex","fire-js":"fire-js",[WR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Map,YR=new Map,$p=new Map;function zv(t,e){try{t.container.addComponent(e)}catch(n){bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function es(t){const e=t.name;if($p.has(e))return bs.debug(`There were multiple attempts to register component ${e}.`),!1;$p.set(e,t);for(const n of gd.values())zv(n,t);for(const n of YR.values())zv(n,t);return!0}function io(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ii=new so("app","Firebase",QR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=KR;function OT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ii.create("bad-app-name",{appName:String(s)});if(n||(n=PT()),!n)throw ii.create("no-options");const i=gd.get(s);if(i){if(Gl(n,i.options)&&Gl(r,i.config))return i;throw ii.create("duplicate-app",{appName:s})}const o=new iR(s);for(const u of $p.values())o.addComponent(u);const a=new XR(n,r,o);return gd.set(s,a),a}function kg(t=Hp){const e=gd.get(t);if(!e&&t===Hp&&PT())return OT();if(!e)throw ii.create("no-app",{appName:t});return e}function hr(t,e,n){var r;let s=(r=JR[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bs.warn(a.join(" "));return}es(new Lr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="firebase-heartbeat-database",eP=1,Hl="firebase-heartbeat-store";let Cf=null;function BT(){return Cf||(Cf=UT(ZR,eP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ii.create("idb-open",{originalErrorMessage:t.message})})),Cf}async function tP(t){try{const n=(await BT()).transaction(Hl),r=await n.objectStore(Hl).get(zT(t));return await n.done,r}catch(e){if(e instanceof Ur)bs.warn(e.message);else{const n=ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bs.warn(n.message)}}}async function Gv(t,e){try{const r=(await BT()).transaction(Hl,"readwrite");await r.objectStore(Hl).put(e,zT(t)),await r.done}catch(n){if(n instanceof Ur)bs.warn(n.message);else{const r=ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bs.warn(r.message)}}}function zT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=1024,rP=30*24*60*60*1e3;class sP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Hv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=rP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){bs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Hv(),{heartbeatsToSend:r,unsentEntries:s}=iP(this._heartbeatsCache.heartbeats),i=md(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return bs.warn(n),""}}}function Hv(){return new Date().toISOString().substring(0,10)}function iP(t,e=nP){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),$v(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$v(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class oP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LT()?jT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Gv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $v(t){return md(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(t){es(new Lr("platform-logger",e=>new wR(e),"PRIVATE")),es(new Lr("heartbeat",e=>new sP(e),"PRIVATE")),hr(Gp,Bv,t),hr(Gp,Bv,"esm2017"),hr("fire-js","")}aP("");var lP="firebase",uP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr(lP,uP,"app");const GT="@firebase/installations",Cg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=1e4,$T=`w:${Cg}`,qT="FIS_v2",cP="https://firebaseinstallations.googleapis.com/v1",dP=60*60*1e3,hP="installations",fP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ki=new so(hP,fP,pP);function WT(t){return t instanceof Ur&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT({projectId:t}){return`${cP}/projects/${t}/installations`}function JT(t){return{token:t.token,requestStatus:2,expiresIn:gP(t.expiresIn),creationTime:Date.now()}}async function YT(t,e){const r=(await e.json()).error;return Ki.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function QT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function mP(t,{refreshToken:e}){const n=QT(t);return n.append("Authorization",yP(e)),n}async function XT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function gP(t){return Number(t.replace("s","000"))}function yP(t){return`${qT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=KT(t),s=QT(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:qT,appId:t.appId,sdkVersion:$T},a={method:"POST",headers:s,body:JSON.stringify(o)},u=await XT(()=>fetch(r,a));if(u.ok){const c=await u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:JT(c.authToken)}}else throw await YT("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=/^[cdef][\w-]{21}$/,qp="";function _P(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=bP(t);return wP.test(n)?n:qp}catch{return qp}}function bP(t){return xP(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=new Map;function tI(t,e){const n=oh(t);nI(n,e),EP(n,e)}function nI(t,e){const n=eI.get(t);if(n)for(const r of n)r(e)}function EP(t,e){const n=TP();n&&n.postMessage({key:t,fid:e}),IP()}let ji=null;function TP(){return!ji&&"BroadcastChannel"in self&&(ji=new BroadcastChannel("[Firebase] FID Change"),ji.onmessage=t=>{nI(t.data.key,t.data.fid)}),ji}function IP(){eI.size===0&&ji&&(ji.close(),ji=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP="firebase-installations-database",kP=1,Ji="firebase-installations-store";let Af=null;function Ag(){return Af||(Af=UT(SP,kP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ji)}}})),Af}async function yd(t,e){const n=oh(t),s=(await Ag()).transaction(Ji,"readwrite"),i=s.objectStore(Ji),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&tI(t,e.fid),e}async function rI(t){const e=oh(t),r=(await Ag()).transaction(Ji,"readwrite");await r.objectStore(Ji).delete(e),await r.done}async function ah(t,e){const n=oh(t),s=(await Ag()).transaction(Ji,"readwrite"),i=s.objectStore(Ji),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&tI(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ng(t){let e;const n=await ah(t.appConfig,r=>{const s=CP(r),i=AP(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===qp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function CP(t){const e=t||{fid:_P(),registrationStatus:0};return sI(e)}function AP(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ki.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=NP(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:RP(t)}:{installationEntry:e}}async function NP(t,e){try{const n=await vP(t,e);return yd(t.appConfig,n)}catch(n){throw WT(n)&&n.customData.serverCode===409?await rI(t.appConfig):await yd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function RP(t){let e=await qv(t.appConfig);for(;e.registrationStatus===1;)await ZT(100),e=await qv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Ng(t);return r||n}return e}function qv(t){return ah(t,e=>{if(!e)throw Ki.create("installation-not-found");return sI(e)})}function sI(t){return PP(t)?{fid:t.fid,registrationStatus:0}:t}function PP(t){return t.registrationStatus===1&&t.registrationTime+HT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MP({appConfig:t,heartbeatServiceProvider:e},n){const r=DP(t,n),s=mP(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:$T,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},u=await XT(()=>fetch(r,a));if(u.ok){const c=await u.json();return JT(c)}else throw await YT("Generate Auth Token",u)}function DP(t,{fid:e}){return`${KT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rg(t,e=!1){let n;const r=await ah(t.appConfig,i=>{if(!iI(i))throw Ki.create("not-registered");const o=i.authToken;if(!e&&FP(o))return i;if(o.requestStatus===1)return n=LP(t,e),i;{if(!navigator.onLine)throw Ki.create("app-offline");const a=UP(i);return n=jP(t,a),a}});return n?await n:r.authToken}async function LP(t,e){let n=await Wv(t.appConfig);for(;n.authToken.requestStatus===1;)await ZT(100),n=await Wv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Rg(t,e):r}function Wv(t){return ah(t,e=>{if(!iI(e))throw Ki.create("not-registered");const n=e.authToken;return OP(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function jP(t,e){try{const n=await MP(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await yd(t.appConfig,r),n}catch(n){if(WT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await rI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await yd(t.appConfig,r)}throw n}}function iI(t){return t!==void 0&&t.registrationStatus===2}function FP(t){return t.requestStatus===2&&!VP(t)}function VP(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+dP}function UP(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function OP(t){return t.requestStatus===1&&t.requestTime+HT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BP(t){const e=t,{installationEntry:n,registrationPromise:r}=await Ng(e);return r?r.catch(console.error):Rg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(t,e=!1){const n=t;return await GP(n),(await Rg(n,e)).token}async function GP(t){const{registrationPromise:e}=await Ng(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t){if(!t||!t.options)throw Nf("App Configuration");if(!t.name)throw Nf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Nf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Nf(t){return Ki.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="installations",$P="installations-internal",qP=t=>{const e=t.getProvider("app").getImmediate(),n=HP(e),r=io(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},WP=t=>{const e=t.getProvider("app").getImmediate(),n=io(e,oI).getImmediate();return{getId:()=>BP(n),getToken:s=>zP(n,s)}};function KP(){es(new Lr(oI,qP,"PUBLIC")),es(new Lr($P,WP,"PRIVATE"))}KP();hr(GT,Cg);hr(GT,Cg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="analytics",JP="firebase_id",YP="origin",QP=60*1e3,XP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new ih("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zn=new so("analytics","Analytics",ZP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t){if(!t.startsWith(Pg)){const e=Zn.create("invalid-gtag-resource",{gtagURL:t});return Hn.warn(e.message),""}return t}function aI(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function tM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function nM(t,e){const n=tM("firebase-js-sdk-policy",{createScriptURL:eM}),r=document.createElement("script"),s=`${Pg}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function rM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function sM(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const u=(await aI(n)).find(c=>c.measurementId===s);u&&await e[u.appId]}}catch(a){Hn.error(a)}t("config",s,i)}async function iM(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await aI(n);for(const u of o){const c=a.find(m=>m.measurementId===u),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Hn.error(i)}}function oM(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,u]=o;await iM(t,e,n,a,u)}else if(i==="config"){const[a,u]=o;await sM(t,e,n,r,a,u)}else if(i==="consent"){const[a,u]=o;t("consent",a,u)}else if(i==="get"){const[a,u,c]=o;t("get",a,u,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Hn.error(a)}}return s}function aM(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=oM(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function lM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Pg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=30,cM=1e3;class dM{constructor(e={},n=cM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const lI=new dM;function hM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function fM(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:hM(r)},i=XP.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(a=u.error.message)}catch{}throw Zn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function pM(t,e=lI,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Zn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Zn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new yM;return setTimeout(async()=>{a.abort()},QP),uI({appId:r,apiKey:s,measurementId:i},o,a,e)}async function uI(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=lI){var i;const{appId:o,measurementId:a}=t;try{await mM(r,e)}catch(u){if(a)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw u}try{const u=await fM(t);return s.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!gM(c)){if(s.deleteThrottleMetadata(o),a)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw u}const d=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?Fv(n,s.intervalMillis,uM):Fv(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,m),Hn.debug(`Calling attemptFetch again in ${d} millis`),uI(t,m,r,s)}}function mM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function gM(t){if(!(t instanceof Ur)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class yM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function vM(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(){if(LT())try{await jT()}catch(t){return Hn.warn(Zn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Hn.warn(Zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function wM(t,e,n,r,s,i,o){var a;const u=pM(t);u.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Hn.error(y)),e.push(u);const c=xM().then(y=>{if(y)return r.getId()}),[d,m]=await Promise.all([u,c]);lM(i)||nM(i,d.measurementId),s("js",new Date);const g=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return g[YP]="firebase",g.update=!0,m!=null&&(g[JP]=m),s("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.app=e}_delete(){return delete ml[this.app.options.appId],Promise.resolve()}}let ml={},Kv=[];const Jv={};let Rf="dataLayer",bM="gtag",Yv,cI,Qv=!1;function EM(){const t=[];if(DT()&&t.push("This is a browser extension environment."),HN()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Zn.create("invalid-analytics-context",{errorInfo:e});Hn.warn(n.message)}}function TM(t,e,n){EM();const r=t.options.appId;if(!r)throw Zn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zn.create("no-api-key");if(ml[r]!=null)throw Zn.create("already-exists",{id:r});if(!Qv){rM(Rf);const{wrappedGtag:i,gtagCore:o}=aM(ml,Kv,Jv,Rf,bM);cI=i,Yv=o,Qv=!0}return ml[r]=wM(t,Kv,Jv,e,Yv,Rf,n),new _M(t)}function IM(t=kg()){t=Ut(t);const e=io(t,vd);return e.isInitialized()?e.getImmediate():SM(t)}function SM(t,e={}){const n=io(t,vd);if(n.isInitialized()){const s=n.getImmediate();if(Gl(e,n.getOptions()))return s;throw Zn.create("already-initialized")}return n.initialize({options:e})}function kM(t,e,n,r){t=Ut(t),vM(cI,ml[t.app.options.appId],e,n,r).catch(s=>Hn.error(s))}const Xv="@firebase/analytics",Zv="0.10.8";function CM(){es(new Lr(vd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return TM(r,s,n)},"PUBLIC")),es(new Lr("analytics-internal",t,"PRIVATE")),hr(Xv,Zv),hr(Xv,Zv,"esm2017");function t(e){try{const n=e.getProvider(vd).getImmediate();return{logEvent:(r,s,i)=>kM(n,r,s,i)}}catch(n){throw Zn.create("interop-component-reg-failed",{reason:n})}}}CM();var ex=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bi,dI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,C){function N(){}N.prototype=C.prototype,S.D=C.prototype,S.prototype=new N,S.prototype.constructor=S,S.C=function(M,V,P){for(var D=Array(arguments.length-2),k=2;k<arguments.length;k++)D[k-2]=arguments[k];return C.prototype[V].apply(M,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,C,N){N||(N=0);var M=Array(16);if(typeof C=="string")for(var V=0;16>V;++V)M[V]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(V=0;16>V;++V)M[V]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=S.g[0],N=S.g[1],V=S.g[2];var P=S.g[3],D=C+(P^N&(V^P))+M[0]+3614090360&4294967295;C=N+(D<<7&4294967295|D>>>25),D=P+(V^C&(N^V))+M[1]+3905402710&4294967295,P=C+(D<<12&4294967295|D>>>20),D=V+(N^P&(C^N))+M[2]+606105819&4294967295,V=P+(D<<17&4294967295|D>>>15),D=N+(C^V&(P^C))+M[3]+3250441966&4294967295,N=V+(D<<22&4294967295|D>>>10),D=C+(P^N&(V^P))+M[4]+4118548399&4294967295,C=N+(D<<7&4294967295|D>>>25),D=P+(V^C&(N^V))+M[5]+1200080426&4294967295,P=C+(D<<12&4294967295|D>>>20),D=V+(N^P&(C^N))+M[6]+2821735955&4294967295,V=P+(D<<17&4294967295|D>>>15),D=N+(C^V&(P^C))+M[7]+4249261313&4294967295,N=V+(D<<22&4294967295|D>>>10),D=C+(P^N&(V^P))+M[8]+1770035416&4294967295,C=N+(D<<7&4294967295|D>>>25),D=P+(V^C&(N^V))+M[9]+2336552879&4294967295,P=C+(D<<12&4294967295|D>>>20),D=V+(N^P&(C^N))+M[10]+4294925233&4294967295,V=P+(D<<17&4294967295|D>>>15),D=N+(C^V&(P^C))+M[11]+2304563134&4294967295,N=V+(D<<22&4294967295|D>>>10),D=C+(P^N&(V^P))+M[12]+1804603682&4294967295,C=N+(D<<7&4294967295|D>>>25),D=P+(V^C&(N^V))+M[13]+4254626195&4294967295,P=C+(D<<12&4294967295|D>>>20),D=V+(N^P&(C^N))+M[14]+2792965006&4294967295,V=P+(D<<17&4294967295|D>>>15),D=N+(C^V&(P^C))+M[15]+1236535329&4294967295,N=V+(D<<22&4294967295|D>>>10),D=C+(V^P&(N^V))+M[1]+4129170786&4294967295,C=N+(D<<5&4294967295|D>>>27),D=P+(N^V&(C^N))+M[6]+3225465664&4294967295,P=C+(D<<9&4294967295|D>>>23),D=V+(C^N&(P^C))+M[11]+643717713&4294967295,V=P+(D<<14&4294967295|D>>>18),D=N+(P^C&(V^P))+M[0]+3921069994&4294967295,N=V+(D<<20&4294967295|D>>>12),D=C+(V^P&(N^V))+M[5]+3593408605&4294967295,C=N+(D<<5&4294967295|D>>>27),D=P+(N^V&(C^N))+M[10]+38016083&4294967295,P=C+(D<<9&4294967295|D>>>23),D=V+(C^N&(P^C))+M[15]+3634488961&4294967295,V=P+(D<<14&4294967295|D>>>18),D=N+(P^C&(V^P))+M[4]+3889429448&4294967295,N=V+(D<<20&4294967295|D>>>12),D=C+(V^P&(N^V))+M[9]+568446438&4294967295,C=N+(D<<5&4294967295|D>>>27),D=P+(N^V&(C^N))+M[14]+3275163606&4294967295,P=C+(D<<9&4294967295|D>>>23),D=V+(C^N&(P^C))+M[3]+4107603335&4294967295,V=P+(D<<14&4294967295|D>>>18),D=N+(P^C&(V^P))+M[8]+1163531501&4294967295,N=V+(D<<20&4294967295|D>>>12),D=C+(V^P&(N^V))+M[13]+2850285829&4294967295,C=N+(D<<5&4294967295|D>>>27),D=P+(N^V&(C^N))+M[2]+4243563512&4294967295,P=C+(D<<9&4294967295|D>>>23),D=V+(C^N&(P^C))+M[7]+1735328473&4294967295,V=P+(D<<14&4294967295|D>>>18),D=N+(P^C&(V^P))+M[12]+2368359562&4294967295,N=V+(D<<20&4294967295|D>>>12),D=C+(N^V^P)+M[5]+4294588738&4294967295,C=N+(D<<4&4294967295|D>>>28),D=P+(C^N^V)+M[8]+2272392833&4294967295,P=C+(D<<11&4294967295|D>>>21),D=V+(P^C^N)+M[11]+1839030562&4294967295,V=P+(D<<16&4294967295|D>>>16),D=N+(V^P^C)+M[14]+4259657740&4294967295,N=V+(D<<23&4294967295|D>>>9),D=C+(N^V^P)+M[1]+2763975236&4294967295,C=N+(D<<4&4294967295|D>>>28),D=P+(C^N^V)+M[4]+1272893353&4294967295,P=C+(D<<11&4294967295|D>>>21),D=V+(P^C^N)+M[7]+4139469664&4294967295,V=P+(D<<16&4294967295|D>>>16),D=N+(V^P^C)+M[10]+3200236656&4294967295,N=V+(D<<23&4294967295|D>>>9),D=C+(N^V^P)+M[13]+681279174&4294967295,C=N+(D<<4&4294967295|D>>>28),D=P+(C^N^V)+M[0]+3936430074&4294967295,P=C+(D<<11&4294967295|D>>>21),D=V+(P^C^N)+M[3]+3572445317&4294967295,V=P+(D<<16&4294967295|D>>>16),D=N+(V^P^C)+M[6]+76029189&4294967295,N=V+(D<<23&4294967295|D>>>9),D=C+(N^V^P)+M[9]+3654602809&4294967295,C=N+(D<<4&4294967295|D>>>28),D=P+(C^N^V)+M[12]+3873151461&4294967295,P=C+(D<<11&4294967295|D>>>21),D=V+(P^C^N)+M[15]+530742520&4294967295,V=P+(D<<16&4294967295|D>>>16),D=N+(V^P^C)+M[2]+3299628645&4294967295,N=V+(D<<23&4294967295|D>>>9),D=C+(V^(N|~P))+M[0]+4096336452&4294967295,C=N+(D<<6&4294967295|D>>>26),D=P+(N^(C|~V))+M[7]+1126891415&4294967295,P=C+(D<<10&4294967295|D>>>22),D=V+(C^(P|~N))+M[14]+2878612391&4294967295,V=P+(D<<15&4294967295|D>>>17),D=N+(P^(V|~C))+M[5]+4237533241&4294967295,N=V+(D<<21&4294967295|D>>>11),D=C+(V^(N|~P))+M[12]+1700485571&4294967295,C=N+(D<<6&4294967295|D>>>26),D=P+(N^(C|~V))+M[3]+2399980690&4294967295,P=C+(D<<10&4294967295|D>>>22),D=V+(C^(P|~N))+M[10]+4293915773&4294967295,V=P+(D<<15&4294967295|D>>>17),D=N+(P^(V|~C))+M[1]+2240044497&4294967295,N=V+(D<<21&4294967295|D>>>11),D=C+(V^(N|~P))+M[8]+1873313359&4294967295,C=N+(D<<6&4294967295|D>>>26),D=P+(N^(C|~V))+M[15]+4264355552&4294967295,P=C+(D<<10&4294967295|D>>>22),D=V+(C^(P|~N))+M[6]+2734768916&4294967295,V=P+(D<<15&4294967295|D>>>17),D=N+(P^(V|~C))+M[13]+1309151649&4294967295,N=V+(D<<21&4294967295|D>>>11),D=C+(V^(N|~P))+M[4]+4149444226&4294967295,C=N+(D<<6&4294967295|D>>>26),D=P+(N^(C|~V))+M[11]+3174756917&4294967295,P=C+(D<<10&4294967295|D>>>22),D=V+(C^(P|~N))+M[2]+718787259&4294967295,V=P+(D<<15&4294967295|D>>>17),D=N+(P^(V|~C))+M[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+V&4294967295,S.g[3]=S.g[3]+P&4294967295}r.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var N=C-this.blockSize,M=this.B,V=this.h,P=0;P<C;){if(V==0)for(;P<=N;)s(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<C;)if(M[V++]=S.charCodeAt(P++),V==this.blockSize){s(this,M),V=0;break}}else for(;P<C;)if(M[V++]=S[P++],V==this.blockSize){s(this,M),V=0;break}}this.h=V,this.o+=C},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var N=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=N&255,N/=256;for(this.u(S),S=Array(16),C=N=0;4>C;++C)for(var M=0;32>M;M+=8)S[N++]=this.g[C]>>>M&255;return S};function i(S,C){var N=a;return Object.prototype.hasOwnProperty.call(N,S)?N[S]:N[S]=C(S)}function o(S,C){this.h=C;for(var N=[],M=!0,V=S.length-1;0<=V;V--){var P=S[V]|0;M&&P==C||(N[V]=P,M=!1)}this.g=N}var a={};function u(S){return-128<=S&&128>S?i(S,function(C){return new o([C|0],0>C?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return m;if(0>S)return _(c(-S));for(var C=[],N=1,M=0;S>=N;M++)C[M]=S/N|0,N*=4294967296;return new o(C,0)}function d(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return _(d(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=c(Math.pow(C,8)),M=m,V=0;V<S.length;V+=8){var P=Math.min(8,S.length-V),D=parseInt(S.substring(V,V+P),C);8>P?(P=c(Math.pow(C,P)),M=M.j(P).add(c(D))):(M=M.j(N),M=M.add(c(D)))}return M}var m=u(0),g=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-_(this).m();for(var S=0,C=1,N=0;N<this.g.length;N++){var M=this.i(N);S+=(0<=M?M:4294967296+M)*C,C*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(x(this))return"-"+_(this).toString(S);for(var C=c(Math.pow(S,6)),N=this,M="";;){var V=R(N,C).g;N=v(N,V.j(C));var P=((0<N.g.length?N.g[0]:N.h)>>>0).toString(S);if(N=V,w(N))return P+M;for(;6>P.length;)P="0"+P;M=P+M}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function x(S){return S.h==-1}t.l=function(S){return S=v(this,S),x(S)?-1:w(S)?0:1};function _(S){for(var C=S.g.length,N=[],M=0;M<C;M++)N[M]=~S.g[M];return new o(N,~S.h).add(g)}t.abs=function(){return x(this)?_(this):this},t.add=function(S){for(var C=Math.max(this.g.length,S.g.length),N=[],M=0,V=0;V<=C;V++){var P=M+(this.i(V)&65535)+(S.i(V)&65535),D=(P>>>16)+(this.i(V)>>>16)+(S.i(V)>>>16);M=D>>>16,P&=65535,D&=65535,N[V]=D<<16|P}return new o(N,N[N.length-1]&-2147483648?-1:0)};function v(S,C){return S.add(_(C))}t.j=function(S){if(w(this)||w(S))return m;if(x(this))return x(S)?_(this).j(_(S)):_(_(this).j(S));if(x(S))return _(this.j(_(S)));if(0>this.l(y)&&0>S.l(y))return c(this.m()*S.m());for(var C=this.g.length+S.g.length,N=[],M=0;M<2*C;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(var V=0;V<S.g.length;V++){var P=this.i(M)>>>16,D=this.i(M)&65535,k=S.i(V)>>>16,G=S.i(V)&65535;N[2*M+2*V]+=D*G,b(N,2*M+2*V),N[2*M+2*V+1]+=P*G,b(N,2*M+2*V+1),N[2*M+2*V+1]+=D*k,b(N,2*M+2*V+1),N[2*M+2*V+2]+=P*k,b(N,2*M+2*V+2)}for(M=0;M<C;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=C;M<2*C;M++)N[M]=0;return new o(N,0)};function b(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function T(S,C){this.g=S,this.h=C}function R(S,C){if(w(C))throw Error("division by zero");if(w(S))return new T(m,m);if(x(S))return C=R(_(S),C),new T(_(C.g),_(C.h));if(x(C))return C=R(S,_(C)),new T(_(C.g),C.h);if(30<S.g.length){if(x(S)||x(C))throw Error("slowDivide_ only works with positive integers.");for(var N=g,M=C;0>=M.l(S);)N=L(N),M=L(M);var V=U(N,1),P=U(M,1);for(M=U(M,2),N=U(N,2);!w(M);){var D=P.add(M);0>=D.l(S)&&(V=V.add(N),P=D),M=U(M,1),N=U(N,1)}return C=v(S,V.j(C)),new T(V,C)}for(V=m;0<=S.l(C);){for(N=Math.max(1,Math.floor(S.m()/C.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),P=c(N),D=P.j(C);x(D)||0<D.l(S);)N-=M,P=c(N),D=P.j(C);w(P)&&(P=g),V=V.add(P),S=v(S,D)}return new T(V,S)}t.A=function(S){return R(this,S).h},t.and=function(S){for(var C=Math.max(this.g.length,S.g.length),N=[],M=0;M<C;M++)N[M]=this.i(M)&S.i(M);return new o(N,this.h&S.h)},t.or=function(S){for(var C=Math.max(this.g.length,S.g.length),N=[],M=0;M<C;M++)N[M]=this.i(M)|S.i(M);return new o(N,this.h|S.h)},t.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),N=[],M=0;M<C;M++)N[M]=this.i(M)^S.i(M);return new o(N,this.h^S.h)};function L(S){for(var C=S.g.length+1,N=[],M=0;M<C;M++)N[M]=S.i(M)<<1|S.i(M-1)>>>31;return new o(N,S.h)}function U(S,C){var N=C>>5;C%=32;for(var M=S.g.length-N,V=[],P=0;P<M;P++)V[P]=0<C?S.i(P+N)>>>C|S.i(P+N+1)<<32-C:S.i(P+N);return new o(V,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Bi=o}).apply(typeof ex<"u"?ex:typeof self<"u"?self:typeof window<"u"?window:{});var oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hI,tl,fI,Nc,Wp,pI,mI,gI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,E,I){return f==Array.prototype||f==Object.prototype||(f[E]=I.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof oc=="object"&&oc];for(var E=0;E<f.length;++E){var I=f[E];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(f,E){if(E)e:{var I=r;f=f.split(".");for(var F=0;F<f.length-1;F++){var K=f[F];if(!(K in I))break e;I=I[K]}f=f[f.length-1],F=I[f],E=E(F),E!=F&&E!=null&&e(I,f,{configurable:!0,writable:!0,value:E})}}function i(f,E){f instanceof String&&(f+="");var I=0,F=!1,K={next:function(){if(!F&&I<f.length){var te=I++;return{value:E(te,f[te]),done:!1}}return F=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}s("Array.prototype.values",function(f){return f||function(){return i(this,function(E,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(f){var E=typeof f;return E=E!="object"?E:f?Array.isArray(f)?"array":E:"null",E=="array"||E=="object"&&typeof f.length=="number"}function c(f){var E=typeof f;return E=="object"&&f!=null||E=="function"}function d(f,E,I){return f.call.apply(f.bind,arguments)}function m(f,E,I){if(!f)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,F),f.apply(E,K)}}return function(){return f.apply(E,arguments)}}function g(f,E,I){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,g.apply(null,arguments)}function y(f,E){var I=Array.prototype.slice.call(arguments,1);return function(){var F=I.slice();return F.push.apply(F,arguments),f.apply(this,F)}}function w(f,E){function I(){}I.prototype=E.prototype,f.aa=E.prototype,f.prototype=new I,f.prototype.constructor=f,f.Qb=function(F,K,te){for(var ve=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)ve[ht-2]=arguments[ht];return E.prototype[K].apply(F,ve)}}function x(f){const E=f.length;if(0<E){const I=Array(E);for(let F=0;F<E;F++)I[F]=f[F];return I}return[]}function _(f,E){for(let I=1;I<arguments.length;I++){const F=arguments[I];if(u(F)){const K=f.length||0,te=F.length||0;f.length=K+te;for(let ve=0;ve<te;ve++)f[K+ve]=F[ve]}else f.push(F)}}class v{constructor(E,I){this.i=E,this.j=I,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function b(f){return/^[\s\xa0]*$/.test(f)}function T(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function R(f){return R[" "](f),f}R[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function U(f,E,I){for(const F in f)E.call(I,f[F],F,f)}function S(f,E){for(const I in f)E.call(void 0,f[I],I,f)}function C(f){const E={};for(const I in f)E[I]=f[I];return E}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,E){let I,F;for(let K=1;K<arguments.length;K++){F=arguments[K];for(I in F)f[I]=F[I];for(let te=0;te<N.length;te++)I=N[te],Object.prototype.hasOwnProperty.call(F,I)&&(f[I]=F[I])}}function V(f){var E=1;f=f.split(":");const I=[];for(;0<E&&f.length;)I.push(f.shift()),E--;return f.length&&I.push(f.join(":")),I}function P(f){a.setTimeout(()=>{throw f},0)}function D(){var f=Y;let E=null;return f.g&&(E=f.g,f.g=f.g.next,f.g||(f.h=null),E.next=null),E}class k{constructor(){this.h=this.g=null}add(E,I){const F=G.get();F.set(E,I),this.h?this.h.next=F:this.g=F,this.h=F}}var G=new v(()=>new ye,f=>f.reset());class ye{constructor(){this.next=this.g=this.h=null}set(E,I){this.h=E,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ne=!1,Y=new k,ue=()=>{const f=a.Promise.resolve(void 0);re=()=>{f.then(q)}};var q=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(I){P(I)}var E=G;E.j(f),100>E.h&&(E.h++,f.next=E.g,E.g=f)}ne=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(f,E){this.type=f,this.g=this.target=E,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,E=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const I=()=>{};a.addEventListener("test",I,E),a.removeEventListener("test",I,E)}catch{}return f}();function Z(f,E){if(ce.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var I=this.type=f.type,F=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=E,E=f.relatedTarget){if(L){e:{try{R(E.nodeName);var K=!0;break e}catch{}K=!1}K||(E=null)}}else I=="mouseover"?E=f.fromElement:I=="mouseout"&&(E=f.toElement);this.relatedTarget=E,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Ae[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Z.aa.h.call(this)}}w(Z,ce);var Ae={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function Se(f,E,I,F,K){this.listener=f,this.proxy=null,this.src=E,this.type=I,this.capture=!!F,this.ha=K,this.key=++Ce,this.da=this.fa=!1}function Ye(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ze(f){this.src=f,this.g={},this.h=0}ze.prototype.add=function(f,E,I,F,K){var te=f.toString();f=this.g[te],f||(f=this.g[te]=[],this.h++);var ve=lt(f,E,F,K);return-1<ve?(E=f[ve],I||(E.fa=!1)):(E=new Se(E,this.src,te,!!F,K),E.fa=I,f.push(E)),E};function _t(f,E){var I=E.type;if(I in f.g){var F=f.g[I],K=Array.prototype.indexOf.call(F,E,void 0),te;(te=0<=K)&&Array.prototype.splice.call(F,K,1),te&&(Ye(E),f.g[I].length==0&&(delete f.g[I],f.h--))}}function lt(f,E,I,F){for(var K=0;K<f.length;++K){var te=f[K];if(!te.da&&te.listener==E&&te.capture==!!I&&te.ha==F)return K}return-1}var A="closure_lm_"+(1e6*Math.random()|0),oe={};function Q(f,E,I,F,K){if(Array.isArray(E)){for(var te=0;te<E.length;te++)Q(f,E[te],I,F,K);return null}return I=me(I),f&&f[_e]?f.K(E,I,c(F)?!!F.capture:!1,K):B(f,E,I,!1,F,K)}function B(f,E,I,F,K,te){if(!E)throw Error("Invalid event type");var ve=c(K)?!!K.capture:!!K,ht=fe(f);if(ht||(f[A]=ht=new ze(f)),I=ht.add(E,I,F,ve,te),I.proxy)return I;if(F=O(),I.proxy=F,F.src=f,F.listener=I,f.addEventListener)X||(K=ve),K===void 0&&(K=!1),f.addEventListener(E.toString(),F,K);else if(f.attachEvent)f.attachEvent(ae(E.toString()),F);else if(f.addListener&&f.removeListener)f.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return I}function O(){function f(I){return E.call(f.src,f.listener,I)}const E=J;return f}function H(f,E,I,F,K){if(Array.isArray(E))for(var te=0;te<E.length;te++)H(f,E[te],I,F,K);else F=c(F)?!!F.capture:!!F,I=me(I),f&&f[_e]?(f=f.i,E=String(E).toString(),E in f.g&&(te=f.g[E],I=lt(te,I,F,K),-1<I&&(Ye(te[I]),Array.prototype.splice.call(te,I,1),te.length==0&&(delete f.g[E],f.h--)))):f&&(f=fe(f))&&(E=f.g[E.toString()],f=-1,E&&(f=lt(E,I,F,K)),(I=-1<f?E[f]:null)&&ie(I))}function ie(f){if(typeof f!="number"&&f&&!f.da){var E=f.src;if(E&&E[_e])_t(E.i,f);else{var I=f.type,F=f.proxy;E.removeEventListener?E.removeEventListener(I,F,f.capture):E.detachEvent?E.detachEvent(ae(I),F):E.addListener&&E.removeListener&&E.removeListener(F),(I=fe(E))?(_t(I,f),I.h==0&&(I.src=null,E[A]=null)):Ye(f)}}}function ae(f){return f in oe?oe[f]:oe[f]="on"+f}function J(f,E){if(f.da)f=!0;else{E=new Z(E,this);var I=f.listener,F=f.ha||f.src;f.fa&&ie(f),f=I.call(F,E)}return f}function fe(f){return f=f[A],f instanceof ze?f:null}var xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(f){return typeof f=="function"?f:(f[xe]||(f[xe]=function(E){return f.handleEvent(E)}),f[xe])}function we(){$.call(this),this.i=new ze(this),this.M=this,this.F=null}w(we,$),we.prototype[_e]=!0,we.prototype.removeEventListener=function(f,E,I,F){H(this,f,E,I,F)};function Ne(f,E){var I,F=f.F;if(F)for(I=[];F;F=F.F)I.push(F);if(f=f.M,F=E.type||E,typeof E=="string")E=new ce(E,f);else if(E instanceof ce)E.target=E.target||f;else{var K=E;E=new ce(F,f),M(E,K)}if(K=!0,I)for(var te=I.length-1;0<=te;te--){var ve=E.g=I[te];K=Le(ve,F,!0,E)&&K}if(ve=E.g=f,K=Le(ve,F,!0,E)&&K,K=Le(ve,F,!1,E)&&K,I)for(te=0;te<I.length;te++)ve=E.g=I[te],K=Le(ve,F,!1,E)&&K}we.prototype.N=function(){if(we.aa.N.call(this),this.i){var f=this.i,E;for(E in f.g){for(var I=f.g[E],F=0;F<I.length;F++)Ye(I[F]);delete f.g[E],f.h--}}this.F=null},we.prototype.K=function(f,E,I,F){return this.i.add(String(f),E,!1,I,F)},we.prototype.L=function(f,E,I,F){return this.i.add(String(f),E,!0,I,F)};function Le(f,E,I,F){if(E=f.i.g[String(E)],!E)return!0;E=E.concat();for(var K=!0,te=0;te<E.length;++te){var ve=E[te];if(ve&&!ve.da&&ve.capture==I){var ht=ve.listener,Zt=ve.ha||ve.src;ve.fa&&_t(f.i,ve),K=ht.call(Zt,F)!==!1&&K}}return K&&!F.defaultPrevented}function St(f,E,I){if(typeof f=="function")I&&(f=g(f,I));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:a.setTimeout(f,E||0)}function bn(f){f.g=St(()=>{f.g=null,f.i&&(f.i=!1,bn(f))},f.l);const E=f.h;f.h=null,f.m.apply(null,E)}class Bt extends ${constructor(E,I){super(),this.m=E,this.l=I,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:bn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(f){$.call(this),this.h=f,this.g={}}w(se,$);var de=[];function De(f){U(f.g,function(E,I){this.g.hasOwnProperty(I)&&ie(E)},f),f.g={}}se.prototype.N=function(){se.aa.N.call(this),De(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $e=a.JSON.stringify,et=a.JSON.parse,Mt=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function gt(){}gt.prototype.h=null;function Wt(f){return f.h||(f.h=f.i())}function ln(){}var Dt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dn(){ce.call(this,"d")}w(Dn,ce);function Ln(){ce.call(this,"c")}w(Ln,ce);var sr={},ot=null;function Br(){return ot=ot||new we}sr.La="serverreachability";function uo(f){ce.call(this,sr.La,f)}w(uo,ce);function yr(f){const E=Br();Ne(E,new uo(E))}sr.STAT_EVENT="statevent";function wi(f,E){ce.call(this,sr.STAT_EVENT,f),this.stat=E}w(wi,ce);function kt(f){const E=Br();Ne(E,new wi(E,f))}sr.Ma="timingevent";function _i(f,E){ce.call(this,sr.Ma,f),this.size=E}w(_i,ce);function ir(f,E){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},E)}function Qe(){this.g=!0}Qe.prototype.xa=function(){this.g=!1};function co(f,E,I,F,K,te){f.info(function(){if(f.g)if(te)for(var ve="",ht=te.split("&"),Zt=0;Zt<ht.length;Zt++){var nt=ht[Zt].split("=");if(1<nt.length){var dn=nt[0];nt=nt[1];var hn=dn.split("_");ve=2<=hn.length&&hn[1]=="type"?ve+(dn+"="+nt+"&"):ve+(dn+"=redacted&")}}else ve=null;else ve=te;return"XMLHTTP REQ ("+F+") [attempt "+K+"]: "+E+`
`+I+`
`+ve})}function bi(f,E,I,F,K,te,ve){f.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+K+"]: "+E+`
`+I+`
`+te+" "+ve})}function vr(f,E,I,F){f.info(function(){return"XMLHTTP TEXT ("+E+"): "+fo(f,I)+(F?" "+F:"")})}function ho(f,E){f.info(function(){return"TIMEOUT: "+E})}Qe.prototype.info=function(){};function fo(f,E){if(!f.g)return E;if(!E)return null;try{var I=JSON.parse(E);if(I){for(f=0;f<I.length;f++)if(Array.isArray(I[f])){var F=I[f];if(!(2>F.length)){var K=F[1];if(Array.isArray(K)&&!(1>K.length)){var te=K[0];if(te!="noop"&&te!="stop"&&te!="close")for(var ve=1;ve<K.length;ve++)K[ve]=""}}}}return $e(I)}catch{return E}}var ss={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},z;function ee(){}w(ee,gt),ee.prototype.g=function(){return new XMLHttpRequest},ee.prototype.i=function(){return{}},z=new ee;function pe(f,E,I,F){this.j=f,this.i=E,this.l=I,this.R=F||1,this.U=new se(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}var Ge={},ut={};function tt(f,E,I){f.L=1,f.v=mo(_r(E)),f.m=I,f.P=!0,$n(f,null)}function $n(f,E){f.F=Date.now(),xr(f),f.A=_r(f.v);var I=f.A,F=f.R;Array.isArray(F)||(F=[String(F)]),Ms(I.i,"t",F),f.C=0,I=f.j.J,f.h=new Pe,f.g=uy(f.j,I?E:null,!f.m),0<f.O&&(f.M=new Bt(g(f.Y,f,f.g),f.O)),E=f.U,I=f.g,F=f.ca;var K="readystatechange";Array.isArray(K)||(K&&(de[0]=K.toString()),K=de);for(var te=0;te<K.length;te++){var ve=Q(I,K[te],F||E.handleEvent,!1,E.h||E);if(!ve)break;E.g[ve.key]=ve}E=f.H?C(f.H):{},f.m?(f.u||(f.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,E)):(f.u="GET",f.g.ea(f.A,f.u,null,E)),yr(),co(f.i,f.u,f.A,f.l,f.R,f.m)}pe.prototype.ca=function(f){f=f.target;const E=this.M;E&&is(f)==3?E.j():this.Y(f)},pe.prototype.Y=function(f){try{if(f==this.g)e:{const hn=is(this.g);var E=this.g.Ba();const yo=this.g.Z();if(!(3>hn)&&(hn!=3||this.g&&(this.h.h||this.g.oa()||X0(this.g)))){this.J||hn!=4||E==7||(E==8||0>=yo?yr(3):yr(2)),cn(this);var I=this.g.Z();this.X=I;t:if(un(this)){var F=X0(this.g);f="";var K=F.length,te=is(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){En(this),or(this);var ve="";break t}this.h.i=new a.TextDecoder}for(E=0;E<K;E++)this.h.h=!0,f+=this.h.i.decode(F[E],{stream:!(te&&E==K-1)});F.length=0,this.h.g+=f,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=I==200,bi(this.i,this.u,this.A,this.l,this.R,hn,I),this.o){if(this.T&&!this.K){t:{if(this.g){var ht,Zt=this.g;if((ht=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(ht)){var nt=ht;break t}}nt=null}if(I=nt)vr(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ti(this,I);else{this.o=!1,this.s=3,kt(12),En(this),or(this);break e}}if(this.P){I=!0;let br;for(;!this.J&&this.C<ve.length;)if(br=zr(this,ve),br==ut){hn==4&&(this.s=4,kt(14),I=!1),vr(this.i,this.l,null,"[Incomplete Response]");break}else if(br==Ge){this.s=4,kt(15),vr(this.i,this.l,ve,"[Invalid Chunk]"),I=!1;break}else vr(this.i,this.l,br,null),Ti(this,br);if(un(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hn!=4||ve.length!=0||this.h.h||(this.s=1,kt(16),I=!1),this.o=this.o&&I,!I)vr(this.i,this.l,ve,"[Invalid Chunked Response]"),En(this),or(this);else if(0<ve.length&&!this.W){this.W=!0;var dn=this.j;dn.g==this&&dn.ba&&!dn.M&&(dn.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),Hh(dn),dn.M=!0,kt(11))}}else vr(this.i,this.l,ve,null),Ti(this,ve);hn==4&&En(this),this.o&&!this.J&&(hn==4?iy(this.j,this):(this.o=!1,xr(this)))}else Ik(this.g),I==400&&0<ve.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),En(this),or(this)}}}catch{}finally{}};function un(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function zr(f,E){var I=f.C,F=E.indexOf(`
`,I);return F==-1?ut:(I=Number(E.substring(I,F)),isNaN(I)?Ge:(F+=1,F+I>E.length?ut:(E=E.slice(F,F+I),f.C=F+I,E)))}pe.prototype.cancel=function(){this.J=!0,En(this)};function xr(f){f.S=Date.now()+f.I,wr(f,f.I)}function wr(f,E){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ir(g(f.ba,f),E)}function cn(f){f.B&&(a.clearTimeout(f.B),f.B=null)}pe.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ho(this.i,this.A),this.L!=2&&(yr(),kt(17)),En(this),this.s=2,or(this)):wr(this,this.S-f)};function or(f){f.j.G==0||f.J||iy(f.j,f)}function En(f){cn(f);var E=f.M;E&&typeof E.ma=="function"&&E.ma(),f.M=null,De(f.U),f.g&&(E=f.g,f.g=null,E.abort(),E.ma())}function Ti(f,E){try{var I=f.j;if(I.G!=0&&(I.g==f||Ra(I.h,f))){if(!f.K&&Ra(I.h,f)&&I.G==3){try{var F=I.Da.g.parse(E)}catch{F=null}if(Array.isArray(F)&&F.length==3){var K=F;if(K[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<f.F)Ou(I),Vu(I);else break e;Gh(I),kt(18)}}else I.za=K[1],0<I.za-I.T&&37500>K[2]&&I.F&&I.v==0&&!I.C&&(I.C=ir(g(I.Za,I),6e3));if(1>=Nu(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else ki(I,11)}else if((f.K||I.g==f)&&Ou(I),!b(E))for(K=I.Da.g.parse(E),E=0;E<K.length;E++){let nt=K[E];if(I.T=nt[0],nt=nt[1],I.G==2)if(nt[0]=="c"){I.K=nt[1],I.ia=nt[2];const dn=nt[3];dn!=null&&(I.la=dn,I.j.info("VER="+I.la));const hn=nt[4];hn!=null&&(I.Aa=hn,I.j.info("SVER="+I.Aa));const yo=nt[5];yo!=null&&typeof yo=="number"&&0<yo&&(F=1.5*yo,I.L=F,I.j.info("backChannelRequestTimeoutMs_="+F)),F=I;const br=f.g;if(br){const zu=br.g?br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zu){var te=F.h;te.g||zu.indexOf("spdy")==-1&&zu.indexOf("quic")==-1&&zu.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Pa(te,te.h),te.h=null))}if(F.D){const $h=br.g?br.g.getResponseHeader("X-HTTP-Session-Id"):null;$h&&(F.ya=$h,dt(F.I,F.D,$h))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-f.F,I.j.info("Handshake RTT: "+I.R+"ms")),F=I;var ve=f;if(F.qa=ly(F,F.J?F.ia:null,F.W),ve.K){Ma(F.h,ve);var ht=ve,Zt=F.L;Zt&&(ht.I=Zt),ht.B&&(cn(ht),xr(ht)),F.g=ve}else ry(F);0<I.i.length&&Uu(I)}else nt[0]!="stop"&&nt[0]!="close"||ki(I,7);else I.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?ki(I,7):zh(I):nt[0]!="noop"&&I.l&&I.l.ta(nt),I.v=0)}}yr(4)}catch{}}var Vh=class{constructor(f,E){this.g=f,this.map=E}};function Cu(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Au(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Nu(f){return f.h?1:f.g?f.g.size:0}function Ra(f,E){return f.h?f.h==E:f.g?f.g.has(E):!1}function Pa(f,E){f.g?f.g.add(E):f.h=E}function Ma(f,E){f.h&&f.h==E?f.h=null:f.g&&f.g.has(E)&&f.g.delete(E)}Cu.prototype.cancel=function(){if(this.i=Ru(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ru(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let E=f.i;for(const I of f.g.values())E=E.concat(I.D);return E}return x(f.i)}function Pu(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var E=[],I=f.length,F=0;F<I;F++)E.push(f[F]);return E}E=[],I=0;for(F in f)E[I++]=f[F];return E}function Uh(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(u(f)||typeof f=="string"){var E=[];f=f.length;for(var I=0;I<f;I++)E.push(I);return E}E=[],I=0;for(const F in f)E[I++]=F;return E}}}function Da(f,E){if(f.forEach&&typeof f.forEach=="function")f.forEach(E,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,E,void 0);else for(var I=Uh(f),F=Pu(f),K=F.length,te=0;te<K;te++)E.call(void 0,F[te],I&&I[te],f)}var Mu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oh(f,E){if(f){f=f.split("&");for(var I=0;I<f.length;I++){var F=f[I].indexOf("="),K=null;if(0<=F){var te=f[I].substring(0,F);K=f[I].substring(F+1)}else te=f[I];E(te,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Gr(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Gr){this.h=f.h,Ii(this,f.j),this.o=f.o,this.g=f.g,po(this,f.s),this.l=f.l;var E=f.i,I=new ft;I.i=E.i,E.g&&(I.g=new Map(E.g),I.h=E.h),Du(this,I),this.m=f.m}else f&&(E=String(f).match(Mu))?(this.h=!1,Ii(this,E[1]||"",!0),this.o=Ps(E[2]||""),this.g=Ps(E[3]||"",!0),po(this,E[4]),this.l=Ps(E[5]||"",!0),Du(this,E[6]||"",!0),this.m=Ps(E[7]||"")):(this.h=!1,this.i=new ft(null,this.h))}Gr.prototype.toString=function(){var f=[],E=this.j;E&&f.push(Si(E,be,!0),":");var I=this.g;return(I||E=="file")&&(f.push("//"),(E=this.o)&&f.push(Si(E,be,!0),"@"),f.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&f.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&f.push("/"),f.push(Si(I,I.charAt(0)=="/"?je:Me,!0))),(I=this.i.toString())&&f.push("?",I),(I=this.m)&&f.push("#",Si(I,Lt)),f.join("")};function _r(f){return new Gr(f)}function Ii(f,E,I){f.j=I?Ps(E,!0):E,f.j&&(f.j=f.j.replace(/:$/,""))}function po(f,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);f.s=E}else f.s=null}function Du(f,E,I){E instanceof ft?(f.i=E,La(f.i,f.h)):(I||(E=Si(E,it)),f.i=new ft(E,f.h))}function dt(f,E,I){f.i.set(E,I)}function mo(f){return dt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Ps(f,E){return f?E?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Si(f,E,I){return typeof f=="string"?(f=encodeURI(f).replace(E,W),I&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function W(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var be=/[#\/\?@]/g,Me=/[#\?:]/g,je=/[#\?]/g,it=/[#\?@]/g,Lt=/#/g;function ft(f,E){this.h=this.g=null,this.i=f||null,this.j=!!E}function zt(f){f.g||(f.g=new Map,f.h=0,f.i&&Oh(f.i,function(E,I){f.add(decodeURIComponent(E.replace(/\+/g," ")),I)}))}t=ft.prototype,t.add=function(f,E){zt(this),this.i=null,f=jn(this,f);var I=this.g.get(f);return I||this.g.set(f,I=[]),I.push(E),this.h+=1,this};function qn(f,E){zt(f),E=jn(f,E),f.g.has(E)&&(f.i=null,f.h-=f.g.get(E).length,f.g.delete(E))}function ar(f,E){return zt(f),E=jn(f,E),f.g.has(E)}t.forEach=function(f,E){zt(this),this.g.forEach(function(I,F){I.forEach(function(K){f.call(E,K,F,this)},this)},this)},t.na=function(){zt(this);const f=Array.from(this.g.values()),E=Array.from(this.g.keys()),I=[];for(let F=0;F<E.length;F++){const K=f[F];for(let te=0;te<K.length;te++)I.push(E[F])}return I},t.V=function(f){zt(this);let E=[];if(typeof f=="string")ar(this,f)&&(E=E.concat(this.g.get(jn(this,f))));else{f=Array.from(this.g.values());for(let I=0;I<f.length;I++)E=E.concat(f[I])}return E},t.set=function(f,E){return zt(this),this.i=null,f=jn(this,f),ar(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[E]),this.h+=1,this},t.get=function(f,E){return f?(f=this.V(f),0<f.length?String(f[0]):E):E};function Ms(f,E,I){qn(f,E),0<I.length&&(f.i=null,f.g.set(jn(f,E),x(I)),f.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],E=Array.from(this.g.keys());for(var I=0;I<E.length;I++){var F=E[I];const te=encodeURIComponent(String(F)),ve=this.V(F);for(F=0;F<ve.length;F++){var K=te;ve[F]!==""&&(K+="="+encodeURIComponent(String(ve[F]))),f.push(K)}}return this.i=f.join("&")};function jn(f,E){return E=String(E),f.j&&(E=E.toLowerCase()),E}function La(f,E){E&&!f.j&&(zt(f),f.i=null,f.g.forEach(function(I,F){var K=F.toLowerCase();F!=K&&(qn(this,F),Ms(this,K,I))},f)),f.j=E}function xk(f,E){const I=new Qe;if(a.Image){const F=new Image;F.onload=y(Ds,I,"TestLoadImage: loaded",!0,E,F),F.onerror=y(Ds,I,"TestLoadImage: error",!1,E,F),F.onabort=y(Ds,I,"TestLoadImage: abort",!1,E,F),F.ontimeout=y(Ds,I,"TestLoadImage: timeout",!1,E,F),a.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=f}else E(!1)}function wk(f,E){const I=new Qe,F=new AbortController,K=setTimeout(()=>{F.abort(),Ds(I,"TestPingServer: timeout",!1,E)},1e4);fetch(f,{signal:F.signal}).then(te=>{clearTimeout(K),te.ok?Ds(I,"TestPingServer: ok",!0,E):Ds(I,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(K),Ds(I,"TestPingServer: error",!1,E)})}function Ds(f,E,I,F,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),F(I)}catch{}}function _k(){this.g=new Mt}function bk(f,E,I){const F=I||"";try{Da(f,function(K,te){let ve=K;c(K)&&(ve=$e(K)),E.push(F+te+"="+encodeURIComponent(ve))})}catch(K){throw E.push(F+"type="+encodeURIComponent("_badmap")),K}}function Lu(f){this.l=f.Ub||null,this.j=f.eb||!1}w(Lu,gt),Lu.prototype.g=function(){return new ju(this.l,this.j)},Lu.prototype.i=function(f){return function(){return f}}({});function ju(f,E){we.call(this),this.D=f,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(ju,we),t=ju.prototype,t.open=function(f,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=E,this.readyState=1,Fa(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(E.body=f),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ja(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Fa(this)),this.g&&(this.readyState=3,Fa(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;q0(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function q0(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var E=f.value?f.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!f.done}))&&(this.response=this.responseText+=E)}f.done?ja(this):Fa(this),this.readyState==3&&q0(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,ja(this))},t.Qa=function(f){this.g&&(this.response=f,ja(this))},t.ga=function(){this.g&&ja(this)};function ja(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Fa(f)}t.setRequestHeader=function(f,E){this.u.append(f,E)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],E=this.h.entries();for(var I=E.next();!I.done;)I=I.value,f.push(I[0]+": "+I[1]),I=E.next();return f.join(`\r
`)};function Fa(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(ju.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function W0(f){let E="";return U(f,function(I,F){E+=F,E+=":",E+=I,E+=`\r
`}),E}function Bh(f,E,I){e:{for(F in I){var F=!1;break e}F=!0}F||(I=W0(I),typeof f=="string"?I!=null&&encodeURIComponent(String(I)):dt(f,E,I))}function Ct(f){we.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ct,we);var Ek=/^https?$/i,Tk=["POST","PUT"];t=Ct.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,E,I,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);E=E?E.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():z.g(),this.v=this.o?Wt(this.o):Wt(z),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(E,String(f),!0),this.B=!1}catch(te){K0(this,te);return}if(f=I||"",I=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var K in F)I.set(K,F[K]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const te of F.keys())I.set(te,F.get(te));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(I.keys()).find(te=>te.toLowerCase()=="content-type"),K=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Tk,E,void 0))||F||K||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,ve]of I)this.g.setRequestHeader(te,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Q0(this),this.u=!0,this.g.send(f),this.u=!1}catch(te){K0(this,te)}};function K0(f,E){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=E,f.m=5,J0(f),Fu(f)}function J0(f){f.A||(f.A=!0,Ne(f,"complete"),Ne(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ne(this,"complete"),Ne(this,"abort"),Fu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fu(this,!0)),Ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Y0(this):this.bb())},t.bb=function(){Y0(this)};function Y0(f){if(f.h&&typeof o<"u"&&(!f.v[1]||is(f)!=4||f.Z()!=2)){if(f.u&&is(f)==4)St(f.Ea,0,f);else if(Ne(f,"readystatechange"),is(f)==4){f.h=!1;try{const ve=f.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var I;if(!(I=E)){var F;if(F=ve===0){var K=String(f.D).match(Mu)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),F=!Ek.test(K?K.toLowerCase():"")}I=F}if(I)Ne(f,"complete"),Ne(f,"success");else{f.m=6;try{var te=2<is(f)?f.g.statusText:""}catch{te=""}f.l=te+" ["+f.Z()+"]",J0(f)}}finally{Fu(f)}}}}function Fu(f,E){if(f.g){Q0(f);const I=f.g,F=f.v[0]?()=>{}:null;f.g=null,f.v=null,E||Ne(f,"ready");try{I.onreadystatechange=F}catch{}}}function Q0(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function is(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<is(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var E=this.g.responseText;return f&&E.indexOf(f)==0&&(E=E.substring(f.length)),et(E)}};function X0(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Ik(f){const E={};f=(f.g&&2<=is(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<f.length;F++){if(b(f[F]))continue;var I=V(f[F]);const K=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const te=E[K]||[];E[K]=te,te.push(I)}S(E,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Va(f,E,I){return I&&I.internalChannelParams&&I.internalChannelParams[f]||E}function Z0(f){this.Aa=0,this.i=[],this.j=new Qe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Va("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Va("baseRetryDelayMs",5e3,f),this.cb=Va("retryDelaySeedMs",1e4,f),this.Wa=Va("forwardChannelMaxRetries",2,f),this.wa=Va("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Cu(f&&f.concurrentRequestLimit),this.Da=new _k,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Z0.prototype,t.la=8,t.G=1,t.connect=function(f,E,I,F){kt(0),this.W=f,this.H=E||{},I&&F!==void 0&&(this.H.OSID=I,this.H.OAID=F),this.F=this.X,this.I=ly(this,null,this.W),Uu(this)};function zh(f){if(ey(f),f.G==3){var E=f.U++,I=_r(f.I);if(dt(I,"SID",f.K),dt(I,"RID",E),dt(I,"TYPE","terminate"),Ua(f,I),E=new pe(f,f.j,E),E.L=2,E.v=mo(_r(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!I&&a.Image&&(new Image().src=E.v,I=!0),I||(E.g=uy(E.j,null),E.g.ea(E.v)),E.F=Date.now(),xr(E)}ay(f)}function Vu(f){f.g&&(Hh(f),f.g.cancel(),f.g=null)}function ey(f){Vu(f),f.u&&(a.clearTimeout(f.u),f.u=null),Ou(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function Uu(f){if(!Au(f.h)&&!f.s){f.s=!0;var E=f.Ga;re||ue(),ne||(re(),ne=!0),Y.add(E,f),f.B=0}}function Sk(f,E){return Nu(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=E.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ir(g(f.Ga,f,E),oy(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const K=new pe(this,this.j,f);let te=this.o;if(this.S&&(te?(te=C(te),M(te,this.S)):te=this.S),this.m!==null||this.O||(K.H=te,te=null),this.P)e:{for(var E=0,I=0;I<this.i.length;I++){t:{var F=this.i[I];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(E+=F,4096<E){E=I;break e}if(E===4096||I===this.i.length-1){E=I+1;break e}}E=1e3}else E=1e3;E=ny(this,K,E),I=_r(this.I),dt(I,"RID",f),dt(I,"CVER",22),this.D&&dt(I,"X-HTTP-Session-Id",this.D),Ua(this,I),te&&(this.O?E="headers="+encodeURIComponent(String(W0(te)))+"&"+E:this.m&&Bh(I,this.m,te)),Pa(this.h,K),this.Ua&&dt(I,"TYPE","init"),this.P?(dt(I,"$req",E),dt(I,"SID","null"),K.T=!0,tt(K,I,null)):tt(K,I,E),this.G=2}}else this.G==3&&(f?ty(this,f):this.i.length==0||Au(this.h)||ty(this))};function ty(f,E){var I;E?I=E.l:I=f.U++;const F=_r(f.I);dt(F,"SID",f.K),dt(F,"RID",I),dt(F,"AID",f.T),Ua(f,F),f.m&&f.o&&Bh(F,f.m,f.o),I=new pe(f,f.j,I,f.B+1),f.m===null&&(I.H=f.o),E&&(f.i=E.D.concat(f.i)),E=ny(f,I,1e3),I.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Pa(f.h,I),tt(I,F,E)}function Ua(f,E){f.H&&U(f.H,function(I,F){dt(E,F,I)}),f.l&&Da({},function(I,F){dt(E,F,I)})}function ny(f,E,I){I=Math.min(f.i.length,I);var F=f.l?g(f.l.Na,f.l,f):null;e:{var K=f.i;let te=-1;for(;;){const ve=["count="+I];te==-1?0<I?(te=K[0].g,ve.push("ofs="+te)):te=0:ve.push("ofs="+te);let ht=!0;for(let Zt=0;Zt<I;Zt++){let nt=K[Zt].g;const dn=K[Zt].map;if(nt-=te,0>nt)te=Math.max(0,K[Zt].g-100),ht=!1;else try{bk(dn,ve,"req"+nt+"_")}catch{F&&F(dn)}}if(ht){F=ve.join("&");break e}}}return f=f.i.splice(0,I),E.D=f,F}function ry(f){if(!f.g&&!f.u){f.Y=1;var E=f.Fa;re||ue(),ne||(re(),ne=!0),Y.add(E,f),f.v=0}}function Gh(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ir(g(f.Fa,f),oy(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,sy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ir(g(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Vu(this),sy(this))};function Hh(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function sy(f){f.g=new pe(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var E=_r(f.qa);dt(E,"RID","rpc"),dt(E,"SID",f.K),dt(E,"AID",f.T),dt(E,"CI",f.F?"0":"1"),!f.F&&f.ja&&dt(E,"TO",f.ja),dt(E,"TYPE","xmlhttp"),Ua(f,E),f.m&&f.o&&Bh(E,f.m,f.o),f.L&&(f.g.I=f.L);var I=f.g;f=f.ia,I.L=1,I.v=mo(_r(E)),I.m=null,I.P=!0,$n(I,f)}t.Za=function(){this.C!=null&&(this.C=null,Vu(this),Gh(this),kt(19))};function Ou(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function iy(f,E){var I=null;if(f.g==E){Ou(f),Hh(f),f.g=null;var F=2}else if(Ra(f.h,E))I=E.D,Ma(f.h,E),F=1;else return;if(f.G!=0){if(E.o)if(F==1){I=E.m?E.m.length:0,E=Date.now()-E.F;var K=f.B;F=Br(),Ne(F,new _i(F,I)),Uu(f)}else ry(f);else if(K=E.s,K==3||K==0&&0<E.X||!(F==1&&Sk(f,E)||F==2&&Gh(f)))switch(I&&0<I.length&&(E=f.h,E.i=E.i.concat(I)),K){case 1:ki(f,5);break;case 4:ki(f,10);break;case 3:ki(f,6);break;default:ki(f,2)}}}function oy(f,E){let I=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(I*=2),I*E}function ki(f,E){if(f.j.info("Error code "+E),E==2){var I=g(f.fb,f),F=f.Xa;const K=!F;F=new Gr(F||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ii(F,"https"),mo(F),K?xk(F.toString(),I):wk(F.toString(),I)}else kt(2);f.G=0,f.l&&f.l.sa(E),ay(f),ey(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function ay(f){if(f.G=0,f.ka=[],f.l){const E=Ru(f.h);(E.length!=0||f.i.length!=0)&&(_(f.ka,E),_(f.ka,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.ra()}}function ly(f,E,I){var F=I instanceof Gr?_r(I):new Gr(I);if(F.g!="")E&&(F.g=E+"."+F.g),po(F,F.s);else{var K=a.location;F=K.protocol,E=E?E+"."+K.hostname:K.hostname,K=+K.port;var te=new Gr(null);F&&Ii(te,F),E&&(te.g=E),K&&po(te,K),I&&(te.l=I),F=te}return I=f.D,E=f.ya,I&&E&&dt(F,I,E),dt(F,"VER",f.la),Ua(f,F),F}function uy(f,E,I){if(E&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=f.Ca&&!f.pa?new Ct(new Lu({eb:I})):new Ct(f.pa),E.Ha(f.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cy(){}t=cy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Bu(){}Bu.prototype.g=function(f,E){return new Wn(f,E)};function Wn(f,E){we.call(this),this.g=new Z0(E),this.l=f,this.h=E&&E.messageUrlParams||null,f=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(f?f["X-WebChannel-Content-Type"]=E.messageContentType:f={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(f?f["X-WebChannel-Client-Profile"]=E.va:f={"X-WebChannel-Client-Profile":E.va}),this.g.S=f,(f=E&&E.Sb)&&!b(f)&&(this.g.m=f),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!b(E)&&(this.g.D=E,f=this.h,f!==null&&E in f&&(f=this.h,E in f&&delete f[E])),this.j=new go(this)}w(Wn,we),Wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){zh(this.g)},Wn.prototype.o=function(f){var E=this.g;if(typeof f=="string"){var I={};I.__data__=f,f=I}else this.u&&(I={},I.__data__=$e(f),f=I);E.i.push(new Vh(E.Ya++,f)),E.G==3&&Uu(E)},Wn.prototype.N=function(){this.g.l=null,delete this.j,zh(this.g),delete this.g,Wn.aa.N.call(this)};function dy(f){Dn.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var E=f.__sm__;if(E){e:{for(const I in E){f=I;break e}f=void 0}(this.i=f)&&(f=this.i,E=E!==null&&f in E?E[f]:void 0),this.data=E}else this.data=f}w(dy,Dn);function hy(){Ln.call(this),this.status=1}w(hy,Ln);function go(f){this.g=f}w(go,cy),go.prototype.ua=function(){Ne(this.g,"a")},go.prototype.ta=function(f){Ne(this.g,new dy(f))},go.prototype.sa=function(f){Ne(this.g,new hy)},go.prototype.ra=function(){Ne(this.g,"b")},Bu.prototype.createWebChannel=Bu.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,gI=function(){return new Bu},mI=function(){return Br()},pI=sr,Wp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ss.NO_ERROR=0,ss.TIMEOUT=8,ss.HTTP_ERROR=6,Nc=ss,Ei.COMPLETE="complete",fI=Ei,ln.EventType=Dt,Dt.OPEN="a",Dt.CLOSE="b",Dt.ERROR="c",Dt.MESSAGE="d",we.prototype.listen=we.prototype.K,tl=ln,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,hI=Ct}).apply(typeof oc<"u"?oc:typeof self<"u"?self:typeof window<"u"?window:{});const tx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new ih("@firebase/firestore");function Ka(){return Yi.logLevel}function ke(t,...e){if(Yi.logLevel<=Je.DEBUG){const n=e.map(Mg);Yi.debug(`Firestore (${wa}): ${t}`,...n)}}function Es(t,...e){if(Yi.logLevel<=Je.ERROR){const n=e.map(Mg);Yi.error(`Firestore (${wa}): ${t}`,...n)}}function ia(t,...e){if(Yi.logLevel<=Je.WARN){const n=e.map(Mg);Yi.warn(`Firestore (${wa}): ${t}`,...n)}}function Mg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t="Unexpected state"){const e=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: `+t;throw Es(e),new Error(e)}function at(t,e){t||Ve()}function Ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gn.UNAUTHENTICATED))}shutdown(){}}class NM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class RM{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){at(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Yr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Yr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at(typeof r.accessToken=="string"),new yI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string"),new gn(e)}}class PM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class MM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new PM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){at(this.o===void 0);const r=i=>{i.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ke("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(at(typeof n.token=="string"),this.R=n.token,new DM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=jM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function rt(t,e){return t<e?-1:t>e?1:0}function oa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Te(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Te(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Be(e)}static min(){return new Be(new $t(0,0))}static max(){return new Be(new $t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ve(),r===void 0?r=e.length-n:r>e.length-n&&Ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $l.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $l?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class vt extends $l{construct(e,n,r){return new vt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new vt(n)}static emptyPath(){return new vt([])}}const FM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends $l{construct(e,n,r){return new nn(e,n,r)}static isValidIdentifier(e){return FM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nn(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Te(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Te(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Te(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Te(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(n)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.path=e}static fromPath(e){return new Re(vt.fromString(e))}static fromName(e){return new Re(vt.fromString(e).popFirst(5))}static empty(){return new Re(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new vt(e.slice()))}}function VM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Be.fromTimestamp(r===1e9?new $t(n+1,0):new $t(n,r));return new ui(s,Re.empty(),e)}function UM(t){return new ui(t.readTime,t.key,-1)}class ui{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ui(Be.min(),Re.empty(),-1)}static max(){return new ui(Be.max(),Re.empty(),-1)}}function OM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Re.comparator(t.documentKey,e.documentKey),n!==0?n:rt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==BM)throw t;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new he((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof he?n:he.resolve(n)}catch(n){return he.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):he.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):he.reject(n)}static resolve(e){return new he((n,r)=>{n(e)})}static reject(e){return new he((n,r)=>{r(e)})}static waitFor(e){return new he((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=he.resolve(!1);for(const r of e)n=n.next(s=>s?he.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new he((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new he((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function GM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function uu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Dg.oe=-1;function lh(t){return t==null}function xd(t){return t===0&&1/t==-1/0}function HM(t){return typeof t=="number"&&Number.isInteger(t)&&!xd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function oo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $M(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function xI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ac(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ac(this.root,e,this.comparator,!1)}getReverseIterator(){return new ac(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ac(this.root,e,this.comparator,!0)}}class ac{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??tn.RED,this.left=s??tn.EMPTY,this.right=i??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new tn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ve();const e=this.left.check();if(e!==this.right.check())throw Ve();return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve()}get value(){throw Ve()}get color(){throw Ve()}get left(){throw Ve()}get right(){throw Ve()}copy(e,n,r,s,i){return this}insert(e,n,r){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rx(this.data.getIterator())}getIteratorFrom(e){return new rx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new sn(this.comparator);return n.data=e,n}}class rx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new Yn([])}unionWith(e){let n=new sn(nn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new wI("Invalid base64 string: "+i):i}}(e);return new an(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new an(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const qM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ci(t){if(at(!!t),typeof t=="string"){let e=0;const n=qM.exec(t);if(at(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qi(t){return typeof t=="string"?an.fromBase64String(t):an.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jg(t){const e=t.mapValue.fields.__previous_value__;return Lg(e)?jg(e):e}function ql(t){const e=ci(t.mapValue.fields.__local_write_time__.timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n,r,s,i,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Wl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc={mapValue:{}};function Xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lg(t)?4:JM(t)?9007199254740991:KM(t)?10:11:Ve()}function ts(t,e){if(t===e)return!0;const n=Xi(t);if(n!==Xi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ql(t).isEqual(ql(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ci(s.timestampValue),a=ci(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Qi(s.bytesValue).isEqual(Qi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Nt(s.geoPointValue.latitude)===Nt(i.geoPointValue.latitude)&&Nt(s.geoPointValue.longitude)===Nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Nt(s.integerValue)===Nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Nt(s.doubleValue),a=Nt(i.doubleValue);return o===a?xd(o)===xd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return oa(t.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(nx(o)!==nx(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!ts(o[u],a[u])))return!1;return!0}(t,e);default:return Ve()}}function Kl(t,e){return(t.values||[]).find(n=>ts(n,e))!==void 0}function aa(t,e){if(t===e)return 0;const n=Xi(t),r=Xi(e);if(n!==r)return rt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Nt(i.integerValue||i.doubleValue),u=Nt(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return sx(t.timestampValue,e.timestampValue);case 4:return sx(ql(t),ql(e));case 5:return rt(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Qi(i),u=Qi(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=rt(a[c],u[c]);if(d!==0)return d}return rt(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=rt(Nt(i.latitude),Nt(o.latitude));return a!==0?a:rt(Nt(i.longitude),Nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ix(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,c,d;const m=i.fields||{},g=o.fields||{},y=(a=m.value)===null||a===void 0?void 0:a.arrayValue,w=(u=g.value)===null||u===void 0?void 0:u.arrayValue,x=rt(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:ix(y,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===lc.mapValue&&o===lc.mapValue)return 0;if(i===lc.mapValue)return 1;if(o===lc.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const g=rt(u[m],d[m]);if(g!==0)return g;const y=aa(a[u[m]],c[d[m]]);if(y!==0)return y}return rt(u.length,d.length)}(t.mapValue,e.mapValue);default:throw Ve()}}function sx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);const n=ci(t),r=ci(e),s=rt(n.seconds,r.seconds);return s!==0?s:rt(n.nanos,r.nanos)}function ix(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=aa(n[s],r[s]);if(i)return i}return rt(n.length,r.length)}function la(t){return Kp(t)}function Kp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ci(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Kp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Kp(n.fields[o])}`;return s+"}"}(t.mapValue):Ve()}function ox(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jp(t){return!!t&&"integerValue"in t}function Fg(t){return!!t&&"arrayValue"in t}function ax(t){return!!t&&"nullValue"in t}function lx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rc(t){return!!t&&"mapValue"in t}function KM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function gl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return oo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=gl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function JM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Rc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gl(n)}setAll(e){let n=nn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=gl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Rc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Rc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){oo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Vn(gl(this.value))}}function _I(t){const e=[];return oo(t.fields,(n,r)=>{const s=new nn([n]);if(Rc(r)){const i=_I(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new vn(e,0,Be.min(),Be.min(),Be.min(),Vn.empty(),0)}static newFoundDocument(e,n,r,s){return new vn(e,1,n,Be.min(),r,s,0)}static newNoDocument(e,n){return new vn(e,2,n,Be.min(),Be.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new vn(e,3,n,Be.min(),Be.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n){this.position=e,this.inclusive=n}}function ux(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Re.comparator(Re.fromName(o.referenceValue),n.key):r=aa(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function cx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ts(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n="asc"){this.field=e,this.dir=n}}function YM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{}class Vt extends bI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new XM(e,n,r):n==="array-contains"?new t4(e,r):n==="in"?new n4(e,r):n==="not-in"?new r4(e,r):n==="array-contains-any"?new s4(e,r):new Vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ZM(e,r):new e4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(aa(n,this.value)):n!==null&&Xi(this.value)===Xi(n)&&this.matchesComparison(aa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jr extends bI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new jr(e,n)}matches(e){return EI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function EI(t){return t.op==="and"}function TI(t){return QM(t)&&EI(t)}function QM(t){for(const e of t.filters)if(e instanceof jr)return!1;return!0}function Yp(t){if(t instanceof Vt)return t.field.canonicalString()+t.op.toString()+la(t.value);if(TI(t))return t.filters.map(e=>Yp(e)).join(",");{const e=t.filters.map(n=>Yp(n)).join(",");return`${t.op}(${e})`}}function II(t,e){return t instanceof Vt?function(r,s){return s instanceof Vt&&r.op===s.op&&r.field.isEqual(s.field)&&ts(r.value,s.value)}(t,e):t instanceof jr?function(r,s){return s instanceof jr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&II(o,s.filters[a]),!0):!1}(t,e):void Ve()}function SI(t){return t instanceof Vt?function(n){return`${n.field.canonicalString()} ${n.op} ${la(n.value)}`}(t):t instanceof jr?function(n){return n.op.toString()+" {"+n.getFilters().map(SI).join(" ,")+"}"}(t):"Filter"}class XM extends Vt{constructor(e,n,r){super(e,n,r),this.key=Re.fromName(r.referenceValue)}matches(e){const n=Re.comparator(e.key,this.key);return this.matchesComparison(n)}}class ZM extends Vt{constructor(e,n){super(e,"in",n),this.keys=kI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class e4 extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=kI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Re.fromName(r.referenceValue))}class t4 extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fg(n)&&Kl(n.arrayValue,this.value)}}class n4 extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kl(this.value.arrayValue,n)}}class r4 extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Kl(this.value.arrayValue,n)}}class s4 extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Kl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function dx(t,e=null,n=[],r=[],s=null,i=null,o=null){return new i4(t,e,n,r,s,i,o)}function Vg(t){const e=Ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Yp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>la(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>la(r)).join(",")),e.ue=n}return e.ue}function Ug(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!II(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cx(t.startAt,e.startAt)&&cx(t.endAt,e.endAt)}function Qp(t){return Re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function o4(t,e,n,r,s,i,o,a){return new _a(t,e,n,r,s,i,o,a)}function Og(t){return new _a(t)}function hx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CI(t){return t.collectionGroup!==null}function yl(t){const e=Ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new sn(nn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Jl(i,r))}),n.has(nn.keyField().canonicalString())||e.ce.push(new Jl(nn.keyField(),r))}return e.ce}function Qr(t){const e=Ue(t);return e.le||(e.le=AI(e,yl(t))),e.le}function a4(t){const e=Ue(t);return e.he||(e.he=AI(e,t.explicitOrderBy)),e.he}function AI(t,e){if(t.limitType==="F")return dx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Jl(s.field,i)});const n=t.endAt?new wd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wd(t.startAt.position,t.startAt.inclusive):null;return dx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xp(t,e){const n=t.filters.concat([e]);return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _d(t,e,n){return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uh(t,e){return Ug(Qr(t),Qr(e))&&t.limitType===e.limitType}function NI(t){return`${Vg(Qr(t))}|lt:${t.limitType}`}function xo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>SI(s)).join(", ")}]`),lh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>la(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>la(s)).join(",")),`Target(${r})`}(Qr(t))}; limitType=${t.limitType})`}function ch(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Re.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of yl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const c=ux(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,yl(r),s)||r.endAt&&!function(o,a,u){const c=ux(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,yl(r),s))}(t,e)}function l4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RI(t){return(e,n)=>{let r=!1;for(const s of yl(t)){const i=u4(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function u4(t,e,n){const r=t.field.isKeyField()?Re.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?aa(u,c):Ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){oo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return xI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=new It(Re.comparator);function Ts(){return c4}const PI=new It(Re.comparator);function nl(...t){let e=PI;for(const n of t)e=e.insert(n.key,n);return e}function MI(t){let e=PI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fi(){return vl()}function DI(){return vl()}function vl(){return new ba(t=>t.toString(),(t,e)=>t.isEqual(e))}const d4=new It(Re.comparator),h4=new sn(Re.comparator);function Ke(...t){let e=h4;for(const n of t)e=e.add(n);return e}const f4=new sn(rt);function p4(){return f4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xd(e)?"-0":e}}function LI(t){return{integerValue:""+t}}function jI(t,e){return HM(e)?LI(e):Bg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this._=void 0}}function m4(t,e,n){return t instanceof bd?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Lg(i)&&(i=jg(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Yl?VI(t,e):t instanceof Ql?UI(t,e):function(s,i){const o=FI(s,i),a=fx(o)+fx(s.Pe);return Jp(o)&&Jp(s.Pe)?LI(a):Bg(s.serializer,a)}(t,e)}function g4(t,e,n){return t instanceof Yl?VI(t,e):t instanceof Ql?UI(t,e):n}function FI(t,e){return t instanceof Xl?function(r){return Jp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class bd extends dh{}class Yl extends dh{constructor(e){super(),this.elements=e}}function VI(t,e){const n=OI(e);for(const r of t.elements)n.some(s=>ts(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ql extends dh{constructor(e){super(),this.elements=e}}function UI(t,e){let n=OI(e);for(const r of t.elements)n=n.filter(s=>!ts(s,r));return{arrayValue:{values:n}}}class Xl extends dh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function fx(t){return Nt(t.integerValue||t.doubleValue)}function OI(t){return Fg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,n){this.field=e,this.transform=n}}function v4(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Yl&&s instanceof Yl||r instanceof Ql&&s instanceof Ql?oa(r.elements,s.elements,ts):r instanceof Xl&&s instanceof Xl?ts(r.Pe,s.Pe):r instanceof bd&&s instanceof bd}(t.transform,e.transform)}class x4{constructor(e,n){this.version=e,this.transformResults=n}}class An{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hh{}function BI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fh(t.key,An.none()):new cu(t.key,t.data,An.none());{const n=t.data,r=Vn.empty();let s=new sn(nn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new yi(t.key,r,new Yn(s.toArray()),An.none())}}function w4(t,e,n){t instanceof cu?function(s,i,o){const a=s.value.clone(),u=mx(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof yi?function(s,i,o){if(!Pc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=mx(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(zI(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xl(t,e,n,r){return t instanceof cu?function(i,o,a,u){if(!Pc(i.precondition,o))return a;const c=i.value.clone(),d=gx(i.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof yi?function(i,o,a,u){if(!Pc(i.precondition,o))return a;const c=gx(i.fieldTransforms,u,o),d=o.data;return d.setAll(zI(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,a){return Pc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function _4(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=FI(r.transform,s||null);i!=null&&(n===null&&(n=Vn.empty()),n.set(r.field,i))}return n||null}function px(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&oa(r,s,(i,o)=>v4(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cu extends hh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class yi extends hh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function zI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function mx(t,e,n){const r=new Map;at(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,g4(o,a,n[s]))}return r}function gx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,m4(i,o,e))}return r}class fh extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b4 extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&w4(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=DI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=BI(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ke())}isEqual(e){return this.batchId===e.batchId&&oa(this.mutations,e.mutations,(n,r)=>px(n,r))&&oa(this.baseMutations,e.baseMutations,(n,r)=>px(n,r))}}class zg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){at(e.mutations.length===r.length);let s=function(){return d4}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new zg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Xe;function k4(t){switch(t){default:return Ve();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function GI(t){if(t===void 0)return Es("GRPC error has no .code"),le.UNKNOWN;switch(t){case jt.OK:return le.OK;case jt.CANCELLED:return le.CANCELLED;case jt.UNKNOWN:return le.UNKNOWN;case jt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case jt.INTERNAL:return le.INTERNAL;case jt.UNAVAILABLE:return le.UNAVAILABLE;case jt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case jt.NOT_FOUND:return le.NOT_FOUND;case jt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case jt.ABORTED:return le.ABORTED;case jt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case jt.DATA_LOSS:return le.DATA_LOSS;default:return Ve()}}(Xe=jt||(jt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=new Bi([4294967295,4294967295],0);function yx(t){const e=C4().encode(t),n=new dI;return n.update(e),new Uint8Array(n.digest())}function vx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Bi([n,r],0),new Bi([s,i],0)]}class Gg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new rl(`Invalid padding: ${n}`);if(r<0)throw new rl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new rl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Bi.fromNumber(r)));return s.compare(A4)===1&&(s=new Bi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=yx(e),[r,s]=vx(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Gg(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=yx(e),[r,s]=vx(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ph(Be.min(),s,new It(rt),Ts(),Ke())}}class du{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new du(r,n,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class HI{constructor(e,n){this.targetId=e,this.me=n}}class $I{constructor(e,n,r=an.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class xx{constructor(){this.fe=0,this.ge=_x(),this.pe=an.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ke(),n=Ke(),r=Ke();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ve()}}),new du(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=_x()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,at(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class N4{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ts(),this.qe=wx(),this.Qe=new It(rt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Qp(i))if(r===0){const o=new Re(i.path);this.Ue(n,o,vn.newNoDocument(o,Be.min()))}else at(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Qi(r).toUint8Array()}catch(u){if(u instanceof wI)return ia("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Gg(o,s,i)}catch(u){return ia(u instanceof rl?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Qp(a.target)){const u=new Re(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,vn.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Ke();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new ph(e,n,this.Qe,this.ke,r);return this.ke=Ts(),this.qe=wx(),this.Qe=new It(rt),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new xx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new sn(rt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new xx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function wx(){return new It(Re.comparator)}function _x(){return new It(Re.comparator)}const R4={asc:"ASCENDING",desc:"DESCENDING"},P4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M4={and:"AND",or:"OR"};class D4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zp(t,e){return t.useProto3Json||lh(e)?e:{value:e}}function Ed(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function L4(t,e){return Ed(t,e.toTimestamp())}function Xr(t){return at(!!t),Be.fromTimestamp(function(n){const r=ci(n);return new $t(r.seconds,r.nanos)}(t))}function Hg(t,e){return em(t,e).canonicalString()}function em(t,e){const n=function(s){return new vt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function WI(t){const e=vt.fromString(t);return at(ZI(e)),e}function tm(t,e){return Hg(t.databaseId,e.path)}function Pf(t,e){const n=WI(e);if(n.get(1)!==t.databaseId.projectId)throw new Te(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Te(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Re(JI(n))}function KI(t,e){return Hg(t.databaseId,e)}function j4(t){const e=WI(t);return e.length===4?vt.emptyPath():JI(e)}function nm(t){return new vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JI(t){return at(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function bx(t,e,n){return{name:tm(t,e),fields:n.value.mapValue.fields}}function F4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(at(d===void 0||typeof d=="string"),an.fromBase64String(d||"")):(at(d===void 0||d instanceof Buffer||d instanceof Uint8Array),an.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?le.UNKNOWN:GI(c.code);return new Te(d,c.message||"")}(o);n=new $I(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Pf(t,r.document.name),i=Xr(r.document.updateTime),o=r.document.createTime?Xr(r.document.createTime):Be.min(),a=new Vn({mapValue:{fields:r.document.fields}}),u=vn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Mc(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Pf(t,r.document),i=r.readTime?Xr(r.readTime):Be.min(),o=vn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Mc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Pf(t,r.document),i=r.removedTargetIds||[];n=new Mc([],i,s,null)}else{if(!("filter"in e))return Ve();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new S4(s,i),a=r.targetId;n=new HI(a,o)}}return n}function V4(t,e){let n;if(e instanceof cu)n={update:bx(t,e.key,e.value)};else if(e instanceof fh)n={delete:tm(t,e.key)};else if(e instanceof yi)n={update:bx(t,e.key,e.data),updateMask:W4(e.fieldMask)};else{if(!(e instanceof b4))return Ve();n={verify:tm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof bd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ql)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xl)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ve()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:L4(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ve()}(t,e.precondition)),n}function U4(t,e){return t&&t.length>0?(at(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Xr(s.updateTime):Xr(i);return o.isEqual(Be.min())&&(o=Xr(i)),new x4(o,s.transformResults||[])}(n,e))):[]}function O4(t,e){return{documents:[KI(t,e.path)]}}function YI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=KI(t,s);const i=function(c){if(c.length!==0)return XI(jr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:Bs(g.field),direction:H4(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Zp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function B4(t,e,n,r){const{_t:s,parent:i}=YI(t,e),o={},a=[];let u=0;return n.forEach(c=>{const d="aggregate_"+u++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:Bs(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:Bs(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function z4(t){let e=j4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){at(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(m){const g=QI(m);return g instanceof jr&&TI(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(w){return new Jl(wo(w.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,lh(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,y=m.values||[];return new wd(y,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,y=m.values||[];return new wd(y,g)}(n.endAt)),o4(e,s,o,i,a,"F",u,c)}function G4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wo(n.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=wo(n.unaryFilter.field);return Vt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=wo(n.unaryFilter.field);return Vt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=wo(n.unaryFilter.field);return Vt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ve()}}(t):t.fieldFilter!==void 0?function(n){return Vt.create(wo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ve()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return jr.create(n.compositeFilter.filters.map(r=>QI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ve()}}(n.compositeFilter.op))}(t):Ve()}function H4(t){return R4[t]}function $4(t){return P4[t]}function q4(t){return M4[t]}function Bs(t){return{fieldPath:t.canonicalString()}}function wo(t){return nn.fromServerFormat(t.fieldPath)}function XI(t){return t instanceof Vt?function(n){if(n.op==="=="){if(lx(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NAN"}};if(ax(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lx(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NAN"}};if(ax(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(n.field),op:$4(n.op),value:n.value}}}(t):t instanceof jr?function(n){const r=n.getFilters().map(s=>XI(s));return r.length===1?r[0]:{compositeFilter:{op:q4(n.op),filters:r}}}(t):Ve()}function W4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n,r,s,i=Be.min(),o=Be.min(),a=an.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.ct=e}}function J4(t){const e=z4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_d(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(){this.un=new Q4}addToCollectionParentIndex(e,n){return this.un.add(n),he.resolve()}getCollectionParents(e,n){return he.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return he.resolve()}deleteFieldIndex(e,n){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,n){return he.resolve()}getDocumentsMatchingTarget(e,n){return he.resolve(null)}getIndexType(e,n){return he.resolve(0)}getFieldIndexes(e,n){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,n){return he.resolve(ui.min())}getMinOffsetFromCollectionGroup(e,n){return he.resolve(ui.min())}updateCollectionGroup(e,n,r){return he.resolve()}updateIndexEntries(e,n){return he.resolve()}}class Q4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new sn(vt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new sn(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ua(0)}static kn(){return new ua(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this.changes=new ba(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?he.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&xl(r.mutation,s,Yn.empty(),$t.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ke()){const s=Fi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=nl();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ke()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Ts();const o=vl(),a=function(){return vl()}();return n.forEach((u,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof yi)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),xl(d.mutation,c,d.mutation.getFieldMask(),$t.now())):o.set(c.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var m;return a.set(c,new Z4(d,(m=o.get(c))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){const r=vl();let s=new It((o,a)=>o-a),i=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||Yn.empty();d=a.applyToLocalView(c,d),r.set(u,d);const m=(s.get(a.batchId)||Ke()).add(u);s=s.insert(a.batchId,m)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,m=DI();d.forEach(g=>{if(!i.has(g)){const y=BI(n.get(g),r.get(g));y!==null&&m.set(g,y),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return he.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):CI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):he.resolve(Fi());let a=-1,u=i;return o.next(c=>he.forEach(c,(d,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),i.get(d)?he.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,Ke())).next(d=>({batchId:a,changes:MI(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Re(n)).next(r=>{let s=nl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=nl();return this.indexManager.getCollectionParents(e,i).next(a=>he.forEach(a,u=>{const c=function(m,g){return new _a(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,vn.newInvalidDocument(d)))});let a=nl();return o.forEach((u,c)=>{const d=i.get(u);d!==void 0&&xl(d.mutation,c,Yn.empty(),$t.now()),ch(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return he.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Xr(s.createTime)}}(n)),he.resolve()}getNamedQuery(e,n){return he.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:J4(s.bundledQuery),readTime:Xr(s.readTime)}}(n)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.overlays=new It(Re.comparator),this.Ir=new Map}getOverlay(e,n){return he.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fi();return he.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),he.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),he.resolve()}getOverlaysForCollection(e,n,r){const s=Fi(),i=n.length+1,o=new Re(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return he.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new It((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Fi(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Fi(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return he.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new T4(n,r));let i=this.Ir.get(n);i===void 0&&(i=Ke(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.Tr=new sn(Kt.Er),this.dr=new sn(Kt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Kt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Kt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Re(new vt([])),r=new Kt(n,e),s=new Kt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Re(new vt([])),r=new Kt(n,e),s=new Kt(n,e+1);let i=Ke();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Kt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Re.comparator(e.key,n.key)||rt(e.wr,n.wr)}static Ar(e,n){return rt(e.wr,n.wr)||Re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new sn(Kt.Er)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new E4(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Kt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return he.resolve(o)}lookupMutationBatch(e,n){return he.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return he.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kt(n,0),s=new Kt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),he.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new sn(rt);return n.forEach(s=>{const i=new Kt(s,0),o=new Kt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),he.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Re.isDocumentKey(i)||(i=i.child(""));const o=new Kt(new Re(i),0);let a=new sn(rt);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.wr)),!0)},o),he.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){at(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return he.forEach(n.mutations,s=>{const i=new Kt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Kt(n,0),s=this.br.firstAfterOrEqual(r);return he.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.Mr=e,this.docs=function(){return new It(Re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return he.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(n))}getEntries(e,n){let r=Ts();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():vn.newInvalidDocument(s))}),he.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ts();const o=n.path,a=new Re(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||OM(UM(d),r)<=0||(s.has(d.key)||ch(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Ve()}Or(e,n){return he.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new oD(this)}getSize(e){return he.resolve(this.size)}}class oD extends X4{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),he.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.persistence=e,this.Nr=new ba(n=>Vg(n),Ug),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $g,this.targetCount=0,this.kr=ua.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),he.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ua(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,he.resolve()}updateTargetData(e,n){return this.Kn(n),he.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),he.waitFor(i).next(()=>s)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return he.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),he.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),he.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),he.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return he.resolve(r)}containsKey(e,n){return he.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Dg(0),this.Kr=!1,this.Kr=!0,this.$r=new rD,this.referenceDelegate=e(this),this.Ur=new aD(this),this.indexManager=new Y4,this.remoteDocumentCache=function(s){return new iD(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new K4(n),this.Gr=new tD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new sD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ke("MemoryPersistence","Starting transaction:",e);const s=new uD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return he.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class uD extends zM{constructor(e){super(),this.currentSequenceNumber=e}}class qg{constructor(e){this.persistence=e,this.Jr=new $g,this.Yr=null}static Zr(e){return new qg(e)}get Xr(){if(this.Yr)return this.Yr;throw Ve()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),he.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),he.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Xr,r=>{const s=Re.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Be.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return he.or([()=>he.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ke(),s=Ke();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return GN()?8:GM(_n())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new cD;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ka()<=Je.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",xo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),he.resolve()):(Ka()<=Je.DEBUG&&ke("QueryEngine","Query:",xo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ka()<=Je.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",xo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qr(n))):he.resolve())}Yi(e,n){if(hx(n))return he.resolve(null);let r=Qr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=_d(n,null,"F"),r=Qr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ke(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,_d(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,s){return hx(n)||s.isEqual(Be.min())?he.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?he.resolve(null):(Ka()<=Je.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xo(n)),this.rs(e,o,n,VM(s,-1)).next(a=>a))})}ts(e,n){let r=new sn(RI(e));return n.forEach((s,i)=>{ch(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ka()<=Je.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",xo(n)),this.Ji.getDocumentsMatchingQuery(e,n,ui.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new It(rt),this._s=new ba(i=>Vg(i),Ug),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function fD(t,e,n,r){return new hD(t,e,n,r)}async function eS(t,e){const n=Ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=Ke();for(const c of s){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function pD(t,e){const n=Ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const m=c.batch,g=m.keys();let y=he.resolve();return g.forEach(w=>{y=y.next(()=>d.getEntry(u,w)).next(x=>{const _=c.docVersions.get(w);at(_!==null),x.version.compareTo(_)<0&&(m.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ke();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function tS(t){const e=Ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function mD(t,e){const n=Ue(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,m)=>{const g=s.get(m);if(!g)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,m)));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(an.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),s=s.insert(m,y),function(x,_,v){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(g,y,d)&&a.push(n.Ur.updateTargetData(i,y))});let u=Ts(),c=Ke();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(gD(i,o,e.documentUpdates).next(d=>{u=d.Ps,c=d.Is})),!r.isEqual(Be.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return he.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.os=s,i))}function gD(t,e,n){let r=Ke(),s=Ke();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ts();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(Be.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ke("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function yD(t,e){const n=Ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vD(t,e){const n=Ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,he.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Ks(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function rm(t,e,n){const r=Ue(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!uu(o))throw o;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Ex(t,e,n){const r=Ue(t);let s=Be.min(),i=Ke();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const m=Ue(u),g=m._s.get(d);return g!==void 0?he.resolve(m.os.get(g)):m.Ur.getTargetData(c,d)}(r,o,Qr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Be.min(),n?i:Ke())).next(a=>(xD(r,l4(e),a),{documents:a,Ts:i})))}function xD(t,e,n){let r=t.us.get(e)||Be.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Tx{constructor(){this.activeTargetIds=p4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wD{constructor(){this.so=new Tx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Tx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc=null;function Mf(){return uc===null?uc=function(){return 268435456+Math.round(2147483648*Math.random())}():uc++,"0x"+uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class TD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Mf(),u=this.xo(n,r.toUriEncodedString());ke("RestConnection",`Sending RPC '${n}' ${a}:`,u,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,u,c,s).then(d=>(ke("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw ia("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",u,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=bD[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Mf();return new Promise((o,a)=>{const u=new hI;u.setWithCredentials(!0),u.listenOnce(fI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Nc.NO_ERROR:const d=u.getResponseJson();ke(mn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Nc.TIMEOUT:ke(mn,`RPC '${e}' ${i} timed out`),a(new Te(le.DEADLINE_EXCEEDED,"Request time out"));break;case Nc.HTTP_ERROR:const m=u.getStatus();if(ke(mn,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const w=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(v)>=0?v:le.UNKNOWN}(y.status);a(new Te(w,y.message))}else a(new Te(le.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Te(le.UNAVAILABLE,"Connection failed."));break;default:Ve()}}finally{ke(mn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ke(mn,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Mf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gI(),a=mI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");ke(mn,`Creating RPC '${e}' stream ${s}: ${d}`,u);const m=o.createWebChannel(d,u);let g=!1,y=!1;const w=new ED({Io:_=>{y?ke(mn,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(g||(ke(mn,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),ke(mn,`RPC '${e}' stream ${s} sending:`,_),m.send(_))},To:()=>m.close()}),x=(_,v,b)=>{_.listen(v,T=>{try{b(T)}catch(R){setTimeout(()=>{throw R},0)}})};return x(m,tl.EventType.OPEN,()=>{y||(ke(mn,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),x(m,tl.EventType.CLOSE,()=>{y||(y=!0,ke(mn,`RPC '${e}' stream ${s} transport closed`),w.So())}),x(m,tl.EventType.ERROR,_=>{y||(y=!0,ia(mn,`RPC '${e}' stream ${s} transport errored:`,_),w.So(new Te(le.UNAVAILABLE,"The operation could not be completed")))}),x(m,tl.EventType.MESSAGE,_=>{var v;if(!y){const b=_.data[0];at(!!b);const T=b,R=T.error||((v=T[0])===null||v===void 0?void 0:v.error);if(R){ke(mn,`RPC '${e}' stream ${s} received error:`,R);const L=R.status;let U=function(N){const M=jt[N];if(M!==void 0)return GI(M)}(L),S=R.message;U===void 0&&(U=le.INTERNAL,S="Unknown error status: "+L+" with message "+R.message),y=!0,w.So(new Te(U,S)),m.close()}else ke(mn,`RPC '${e}' stream ${s} received:`,b),w.bo(b)}}),x(a,pI.STAT_EVENT,_=>{_.stat===Wp.PROXY?ke(mn,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Wp.NOPROXY&&ke(mn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function Df(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t){return new D4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n,r,s,i,o,a,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new nS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Es(n.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Te(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ID extends rS{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=F4(this.serializer,e),r=function(i){if(!("targetChange"in i))return Be.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Be.min():o.readTime?Xr(o.readTime):Be.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=nm(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=Qp(u)?{documents:O4(i,u)}:{query:YI(i,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qI(i,o.resumeToken);const c=Zp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Be.min())>0){a.readTime=Ed(i,o.snapshotVersion.toTimestamp());const c=Zp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=G4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=nm(this.serializer),n.removeTarget=e,this.a_(n)}}class SD extends rS{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return at(!!e.streamToken),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){at(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=U4(e.writeResults,e.commitTime),r=Xr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=nm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>V4(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Te(le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,em(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Te(le.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,em(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(le.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class CD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Es(n),this.D_=!1):ke("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ao(this)&&(ke("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=Ue(u);c.L_.add(4),await hu(c),c.q_.set("Unknown"),c.L_.delete(4),await gh(c)}(this))})}),this.q_=new CD(r,s)}}async function gh(t){if(ao(t))for(const e of t.B_)await e(!0)}async function hu(t){for(const e of t.B_)await e(!1)}function sS(t,e){const n=Ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Qg(n)?Yg(n):Ea(n).r_()&&Jg(n,e))}function Kg(t,e){const n=Ue(t),r=Ea(n);n.N_.delete(e),r.r_()&&iS(n,e),n.N_.size===0&&(r.r_()?r.o_():ao(n)&&n.q_.set("Unknown"))}function Jg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ea(t).A_(e)}function iS(t,e){t.Q_.xe(e),Ea(t).R_(e)}function Yg(t){t.Q_=new N4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ea(t).start(),t.q_.v_()}function Qg(t){return ao(t)&&!Ea(t).n_()&&t.N_.size>0}function ao(t){return Ue(t).L_.size===0}function oS(t){t.Q_=void 0}async function ND(t){t.q_.set("Online")}async function RD(t){t.N_.forEach((e,n)=>{Jg(t,e)})}async function PD(t,e){oS(t),Qg(t)?(t.q_.M_(e),Yg(t)):t.q_.set("Unknown")}async function MD(t,e,n){if(t.q_.set("Online"),e instanceof $I&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Td(t,r)}else if(e instanceof Mc?t.Q_.Ke(e):e instanceof HI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Be.min()))try{const r=await tS(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const d=i.N_.get(u);if(!d)return;i.N_.set(u,d.withResumeToken(an.EMPTY_BYTE_STRING,d.snapshotVersion)),iS(i,u);const m=new Ks(d.target,u,c,d.sequenceNumber);Jg(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),await Td(t,r)}}async function Td(t,e,n){if(!uu(e))throw e;t.L_.add(1),await hu(t),t.q_.set("Offline"),n||(n=()=>tS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ke("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await gh(t)})}function aS(t,e){return e().catch(n=>Td(t,n,e))}async function yh(t){const e=Ue(t),n=di(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;DD(e);)try{const s=await yD(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,LD(e,s)}catch(s){await Td(e,s)}lS(e)&&uS(e)}function DD(t){return ao(t)&&t.O_.length<10}function LD(t,e){t.O_.push(e);const n=di(t);n.r_()&&n.V_&&n.m_(e.mutations)}function lS(t){return ao(t)&&!di(t).n_()&&t.O_.length>0}function uS(t){di(t).start()}async function jD(t){di(t).p_()}async function FD(t){const e=di(t);for(const n of t.O_)e.m_(n.mutations)}async function VD(t,e,n){const r=t.O_.shift(),s=zg.from(r,e,n);await aS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await yh(t)}async function UD(t,e){e&&di(t).V_&&await async function(r,s){if(function(o){return k4(o)&&o!==le.ABORTED}(s.code)){const i=r.O_.shift();di(r).s_(),await aS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await yh(r)}}(t,e),lS(t)&&uS(t)}async function Sx(t,e){const n=Ue(t);n.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=ao(n);n.L_.add(3),await hu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await gh(n)}async function OD(t,e){const n=Ue(t);e?(n.L_.delete(2),await gh(n)):e||(n.L_.add(2),await hu(n),n.q_.set("Unknown"))}function Ea(t){return t.K_||(t.K_=function(n,r,s){const i=Ue(n);return i.w_(),new ID(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:ND.bind(null,t),Ro:RD.bind(null,t),mo:PD.bind(null,t),d_:MD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Qg(t)?Yg(t):t.q_.set("Unknown")):(await t.K_.stop(),oS(t))})),t.K_}function di(t){return t.U_||(t.U_=function(n,r,s){const i=Ue(n);return i.w_(),new SD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jD.bind(null,t),mo:UD.bind(null,t),f_:FD.bind(null,t),g_:VD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await yh(t)):(await t.U_.stop(),t.O_.length>0&&(ke("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Xg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zg(t,e){if(Es("AsyncQueue",`${e}: ${t}`),uu(t))return new Te(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Re.comparator(n.key,r.key):(n,r)=>Re.comparator(n.key,r.key),this.keyedMap=nl(),this.sortedSet=new It(this.comparator)}static emptySet(e){return new Go(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Go;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.W_=new It(Re.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ve():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ca{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ca(e,n,Go.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class zD{constructor(){this.queries=Cx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Ue(n),i=s.queries;s.queries=Cx(),i.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new Te(le.ABORTED,"Firestore shutting down"))}}function Cx(){return new ba(t=>NI(t),uh)}async function cS(t,e){const n=Ue(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new BD,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Zg(o,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&e0(n)}async function dS(t,e){const n=Ue(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GD(t,e){const n=Ue(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&e0(n)}function HD(t,e,n){const r=Ue(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function e0(t){t.Y_.forEach(e=>{e.next()})}var sm,Ax;(Ax=sm||(sm={})).ea="default",Ax.Cache="cache";class hS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ca(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==sm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.key=e}}class pS{constructor(e){this.key=e}}class $D{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ke(),this.mutatedKeys=Ke(),this.Aa=RI(e),this.Ra=new Go(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new kx,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const g=s.get(d),y=ch(this.query,m)?m:null,w=!!g&&this.mutatedKeys.has(g.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let _=!1;g&&y?g.data.isEqual(y.data)?w!==x&&(r.track({type:3,doc:y}),_=!0):this.ga(g,y)||(r.track({type:2,doc:y}),_=!0,(u&&this.Aa(y,u)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),_=!0):g&&!y&&(r.track({type:1,doc:g}),_=!0,(u||c)&&(a=!0)),_&&(y?(o=o.add(y),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,m)=>function(y,w){const x=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve()}};return x(y)-x(w)}(d.type,m.type)||this.Aa(d.doc,m.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new ca(this.query,e.Ra,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new kx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ke(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new pS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new fS(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ke();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ca.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class qD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class WD{constructor(e){this.key=e,this.va=!1}}class KD{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ba(a=>NI(a),uh),this.Ma=new Map,this.xa=new Set,this.Oa=new It(Re.comparator),this.Na=new Map,this.La=new $g,this.Ba={},this.ka=new Map,this.qa=ua.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function JD(t,e,n=!0){const r=wS(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await mS(r,e,n,!0),s}async function YD(t,e){const n=wS(t);await mS(n,e,!0,!1)}async function mS(t,e,n,r){const s=await vD(t.localStore,Qr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await QD(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&sS(t.remoteStore,s),a}async function QD(t,e,n,r,s){t.Ka=(m,g,y)=>async function(x,_,v,b){let T=_.view.ma(v);T.ns&&(T=await Ex(x.localStore,_.query,!1).then(({documents:S})=>_.view.ma(S,T)));const R=b&&b.targetChanges.get(_.targetId),L=b&&b.targetMismatches.get(_.targetId)!=null,U=_.view.applyChanges(T,x.isPrimaryClient,R,L);return Rx(x,_.targetId,U.wa),U.snapshot}(t,m,g,y);const i=await Ex(t.localStore,e,!0),o=new $D(e,i.Ts),a=o.ma(i.documents),u=du.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);Rx(t,n,c.wa);const d=new qD(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function XD(t,e,n){const r=Ue(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!uh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Kg(r.remoteStore,s.targetId),im(r,s.targetId)}).catch(lu)):(im(r,s.targetId),await rm(r.localStore,s.targetId,!0))}async function ZD(t,e){const n=Ue(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kg(n.remoteStore,r.targetId))}async function e5(t,e,n){const r=a5(t);try{const s=await function(o,a){const u=Ue(o),c=$t.now(),d=a.reduce((y,w)=>y.add(w.key),Ke());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Ts(),x=Ke();return u.cs.getEntries(y,d).next(_=>{w=_,w.forEach((v,b)=>{b.isValidDocument()||(x=x.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(_=>{m=_;const v=[];for(const b of a){const T=_4(b,m.get(b.key).overlayedDocument);T!=null&&v.push(new yi(b.key,T,_I(T.value.mapValue),An.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,v,a)}).next(_=>{g=_;const v=_.applyToLocalDocumentSet(m,x);return u.documentOverlayCache.saveOverlays(y,_.batchId,v)})}).then(()=>({batchId:g.batchId,changes:MI(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new It(rt)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await fu(r,s.changes),await yh(r.remoteStore)}catch(s){const i=Zg(s,"Failed to persist write");n.reject(i)}}async function gS(t,e){const n=Ue(t);try{const r=await mD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(at(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?at(o.va):s.removedDocuments.size>0&&(at(o.va),o.va=!1))}),await fu(n,r,e)}catch(r){await lu(r)}}function Nx(t,e,n){const r=Ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=Ue(o);u.onlineState=a;let c=!1;u.queries.forEach((d,m)=>{for(const g of m.j_)g.Z_(a)&&(c=!0)}),c&&e0(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function t5(t,e,n){const r=Ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new It(Re.comparator);o=o.insert(i,vn.newNoDocument(i,Be.min()));const a=Ke().add(i),u=new ph(Be.min(),new Map,new It(rt),o,a);await gS(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),t0(r)}else await rm(r.localStore,e,!1).then(()=>im(r,e,n)).catch(lu)}async function n5(t,e){const n=Ue(t),r=e.batch.batchId;try{const s=await pD(n.localStore,e);vS(n,r,null),yS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fu(n,s)}catch(s){await lu(s)}}async function r5(t,e,n){const r=Ue(t);try{const s=await function(o,a){const u=Ue(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(m=>(at(m!==null),d=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);vS(r,e,n),yS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fu(r,s)}catch(s){await lu(s)}}function yS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function vS(t,e,n){const r=Ue(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function im(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||xS(t,r)})}function xS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Kg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),t0(t))}function Rx(t,e,n){for(const r of n)r instanceof fS?(t.La.addReference(r.key,e),s5(t,r)):r instanceof pS?(ke("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||xS(t,r.key)):Ve()}function s5(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ke("SyncEngine","New document in limbo: "+n),t.xa.add(r),t0(t))}function t0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Re(vt.fromString(e)),r=t.qa.next();t.Na.set(r,new WD(n)),t.Oa=t.Oa.insert(n,r),sS(t.remoteStore,new Ks(Qr(Og(n.path)),r,"TargetPurposeLimboResolution",Dg.oe))}}async function fu(t,e,n){const r=Ue(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){s.push(c);const m=Wg.Wi(u.targetId,c);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,c){const d=Ue(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>he.forEach(c,g=>he.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(m,g.targetId,y)).next(()=>he.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(m,g.targetId,y)))))}catch(m){if(!uu(m))throw m;ke("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const y=d.os.get(g),w=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,x)}}}(r.localStore,i))}async function i5(t,e){const n=Ue(t);if(!n.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=await eS(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(u=>{u.reject(new Te(le.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fu(n,r.hs)}}function o5(t,e){const n=Ue(t),r=n.Na.get(e);if(r&&r.va)return Ke().add(r.key);{let s=Ke();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function wS(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t5.bind(null,e),e.Ca.d_=GD.bind(null,e.eventManager),e.Ca.$a=HD.bind(null,e.eventManager),e}function a5(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r5.bind(null,e),e}class Id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return fD(this.persistence,new dD,e.initialUser,this.serializer)}Ga(e){return new lD(qg.Zr,this.serializer)}Wa(e){return new wD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Id.provider={build:()=>new Id};class om{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Nx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=i5.bind(null,this.syncEngine),await OD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zD}()}createDatastore(e){const n=mh(e.databaseInfo.databaseId),r=function(i){return new TD(i)}(e.databaseInfo);return function(i,o,a,u){return new kD(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new AD(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Nx(this.syncEngine,n,0),function(){return Ix.D()?new Ix:new _D}())}createSyncEngine(e,n){return function(s,i,o,a,u,c,d){const m=new KD(s,i,o,a,u,c);return d&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ue(s);ke("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await hu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}om.provider={build:()=>new om};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Es("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=gn.UNAUTHENTICATED,this.clientId=vI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ke("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ke("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Lf(t,e){t.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await eS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Px(t,e){t.asyncQueue.verifyOperationInProgress();const n=await u5(t);ke("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Sx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Sx(e.remoteStore,s)),t._onlineComponents=e}async function u5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ke("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===le.FAILED_PRECONDITION||s.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ia("Error using user provided cache. Falling back to memory cache: "+n),await Lf(t,new Id)}}else ke("FirestoreClient","Using default OfflineComponentProvider"),await Lf(t,new Id);return t._offlineComponents}async function n0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ke("FirestoreClient","Using user provided OnlineComponentProvider"),await Px(t,t._uninitializedComponentsProvider._online)):(ke("FirestoreClient","Using default OnlineComponentProvider"),await Px(t,new om))),t._onlineComponents}function c5(t){return n0(t).then(e=>e.syncEngine)}function d5(t){return n0(t).then(e=>e.datastore)}async function bS(t){const e=await n0(t),n=e.eventManager;return n.onListen=JD.bind(null,e.syncEngine),n.onUnlisten=XD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZD.bind(null,e.syncEngine),n}function h5(t,e,n={}){const r=new Yr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const d=new _S({next:g=>{d.Za(),o.enqueueAndForget(()=>dS(i,m));const y=g.docs.has(a);!y&&g.fromCache?c.reject(new Te(le.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?c.reject(new Te(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new hS(Og(a.path),d,{includeMetadataChanges:!0,_a:!0});return cS(i,m)}(await bS(t),t.asyncQueue,e,n,r)),r.promise}function f5(t,e,n={}){const r=new Yr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const d=new _S({next:g=>{d.Za(),o.enqueueAndForget(()=>dS(i,m)),g.fromCache&&u.source==="server"?c.reject(new Te(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new hS(a,d,{includeMetadataChanges:!0,_a:!0});return cS(i,m)}(await bS(t),t.asyncQueue,e,n,r)),r.promise}function p5(t,e,n){const r=new Yr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await d5(t);r.resolve(async function(o,a,u){var c;const d=Ue(o),{request:m,ut:g,parent:y}=B4(d.serializer,a4(a),u);d.connection.Fo||delete m.parent;const w=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,y,m,1)).filter(_=>!!_.result);at(w.length===1);const x=(c=w[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(x).reduce((_,v)=>(_[g[v]]=x[v],_),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(t,e,n){if(!n)throw new Te(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function m5(t,e,n,r){if(e===!0&&r===!0)throw new Te(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Dx(t){if(!Re.isDocumentKey(t))throw new Te(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Lx(t){if(Re.isDocumentKey(t))throw new Te(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ve()}function tr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Te(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vh(t);throw new Te(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function g5(t,e){if(e<=0)throw new Te(le.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Te(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ES((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Te(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new AM;switch(r.type){case"firstParty":return new MM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Te(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Mx.get(n);r&&(ke("ComponentProvider","Removing Datastore"),Mx.delete(n),r.terminate())}(this),Promise.resolve()}}function y5(t,e,n,r={}){var s;const i=(t=tr(t,xh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=gn.MOCK_USER;else{a=FN(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Te(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new gn(c)}t._authCredentials=new NM(new yI(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vi(this.firestore,e,this._query)}}class Nn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}}class oi extends vi{constructor(e,n,r){super(e,n,Og(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new Re(e))}withConverter(e){return new oi(this.firestore,e,this._path)}}function Ot(t,e,...n){if(t=Ut(t),TS("collection","path",e),t instanceof xh){const r=vt.fromString(e,...n);return Lx(r),new oi(t,null,r)}{if(!(t instanceof Nn||t instanceof oi))throw new Te(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(vt.fromString(e,...n));return Lx(r),new oi(t.firestore,null,r)}}function qt(t,e,...n){if(t=Ut(t),arguments.length===1&&(e=vI.newId()),TS("doc","path",e),t instanceof xh){const r=vt.fromString(e,...n);return Dx(r),new Nn(t,null,new Re(r))}{if(!(t instanceof Nn||t instanceof oi))throw new Te(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(vt.fromString(e,...n));return Dx(r),new Nn(t.firestore,t instanceof oi?t.converter:null,new Re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new nS(this,"async_queue_retry"),this.Vu=()=>{const r=Df();r&&ke("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Df();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Df();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Yr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!uu(e))throw e;ke("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Es("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Xg.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Ve()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class As extends xh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Fx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fx(e),this._firestoreClient=void 0,await e}}}function v5(t,e){const n=typeof t=="object"?t:kg(),r=typeof t=="string"?t:"(default)",s=io(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=LN("firestore");i&&y5(s,...i)}return s}function pu(t){if(t._terminated)throw new Te(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||x5(t),t._firestoreClient}function x5(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,c,d){return new WM(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ES(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new l5(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class _5{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this._byteString=e}static fromBase64String(e){try{return new da(an.fromBase64String(e))}catch(n){throw new Te(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new da(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Te(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Te(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Te(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=/^__.*__$/;class E5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new yi(e,this.data,this.fieldMask,n,this.fieldTransforms):new cu(e,this.data,n,this.fieldTransforms)}}class IS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new yi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function SS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve()}}class i0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new i0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Sd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(SS(this.Cu)&&b5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class T5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mh(e)}Qu(e,n,r,s=!1){return new i0({Cu:e,methodName:n,qu:r,path:nn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gu(t){const e=t._freezeSettings(),n=mh(t._databaseId);return new T5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function o0(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);l0("Data must be an object, but it was:",o,r);const a=AS(r,o);let u,c;if(i.merge)u=new Yn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const g=am(e,m,n);if(!o.contains(g))throw new Te(le.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);RS(d,g)||d.push(g)}u=new Yn(d),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new E5(new Vn(a),u,c)}class _h extends wh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _h}}class a0 extends wh{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Xl(e.serializer,jI(e.serializer,this.$u));return new y4(e.path,n)}isEqual(e){return e instanceof a0&&this.$u===e.$u}}function kS(t,e,n,r){const s=t.Qu(1,e,n);l0("Data must be an object, but it was:",s,r);const i=[],o=Vn.empty();oo(r,(u,c)=>{const d=u0(e,u,n);c=Ut(c);const m=s.Nu(d);if(c instanceof _h)i.push(d);else{const g=yu(c,m);g!=null&&(i.push(d),o.set(d,g))}});const a=new Yn(i);return new IS(o,a,s.fieldTransforms)}function CS(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[am(e,r,n)],u=[s];if(i.length%2!=0)throw new Te(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(am(e,i[g])),u.push(i[g+1]);const c=[],d=Vn.empty();for(let g=a.length-1;g>=0;--g)if(!RS(c,a[g])){const y=a[g];let w=u[g];w=Ut(w);const x=o.Nu(y);if(w instanceof _h)c.push(y);else{const _=yu(w,x);_!=null&&(c.push(y),d.set(y,_))}}const m=new Yn(c);return new IS(d,m,o.fieldTransforms)}function I5(t,e,n,r=!1){return yu(n,t.Qu(r?4:3,e))}function yu(t,e){if(NS(t=Ut(t)))return l0("Unsupported field value:",e,t),AS(t,e);if(t instanceof wh)return function(r,s){if(!SS(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=yu(a,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=$t.fromDate(r);return{timestampValue:Ed(s.serializer,i)}}if(r instanceof $t){const i=new $t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ed(s.serializer,i)}}if(r instanceof r0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof da)return{bytesValue:qI(s.serializer,r._byteString)};if(r instanceof Nn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Hg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof s0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Bg(a.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${vh(r)}`)}(t,e)}function AS(t,e){const n={};return xI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oo(t,(r,s)=>{const i=yu(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function NS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $t||t instanceof r0||t instanceof da||t instanceof Nn||t instanceof wh||t instanceof s0)}function l0(t,e,n){if(!NS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=vh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function am(t,e,n){if((e=Ut(e))instanceof mu)return e._internalPath;if(typeof e=="string")return u0(t,e);throw Sd("Field path arguments must be of type string or ",t,!1,void 0,n)}const S5=new RegExp("[~\\*/\\[\\]]");function u0(t,e,n){if(e.search(S5)>=0)throw Sd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mu(...e.split("."))._internalPath}catch{throw Sd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Te(le.INVALID_ARGUMENT,a+t+u)}function RS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new k5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class k5 extends PS{data(){return super.data()}}function bh(t,e){return typeof e=="string"?u0(t,e):e instanceof mu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Te(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c0{}class d0 extends c0{}function Fr(t,e,...n){let r=[];e instanceof c0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof h0).length,a=i.filter(u=>u instanceof Eh).length;if(o>1||o>0&&a>0)throw new Te(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Eh extends d0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Eh(e,n,r)}_apply(e){const n=this._parse(e);return MS(e._query,n),new vi(e.firestore,e.converter,Xp(e._query,n))}_parse(e){const n=gu(e.firestore);return function(i,o,a,u,c,d,m){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Te(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Ux(m,d);const y=[];for(const w of m)y.push(Vx(u,i,w));g={arrayValue:{values:y}}}else g=Vx(u,i,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Ux(m,d),g=I5(a,o,m,d==="in"||d==="not-in");return Vt.create(c,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ha(t,e,n){const r=e,s=bh("where",t);return Eh._create(s,r,n)}class h0 extends c0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new h0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:jr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const u of a)MS(o,u),o=Xp(o,u)}(e._query,n),new vi(e.firestore,e.converter,Xp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class f0 extends d0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new f0(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Te(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Te(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jl(i,o)}(e._query,this._field,this._direction);return new vi(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new _a(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Zi(t,e="asc"){const n=e,r=bh("orderBy",t);return f0._create(r,n)}class p0 extends d0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new p0(e,n,r)}_apply(e){return new vi(e.firestore,e.converter,_d(e._query,this._limit,this._limitType))}}function fa(t){return g5("limit",t),p0._create("limit",t,"F")}function Vx(t,e,n){if(typeof(n=Ut(n))=="string"){if(n==="")throw new Te(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CI(e)&&n.indexOf("/")!==-1)throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(vt.fromString(n));if(!Re.isDocumentKey(r))throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ox(t,new Re(r))}if(n instanceof Nn)return ox(t,n._key);throw new Te(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vh(n)}.`)}function Ux(t,e){if(!Array.isArray(t)||t.length===0)throw new Te(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MS(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Te(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class A5{convertValue(e,n="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return oo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Nt(o.doubleValue));return new s0(i)}convertGeoPoint(e){return new r0(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ql(e));default:return null}}convertTimestamp(e){const n=ci(e);return new $t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=vt.fromString(e);at(ZI(r));const s=new Wl(r.get(1),r.get(3)),i=new Re(r.popFirst(5));return s.isEqual(n)||Es(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function N5(){return new w5("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DS extends PS{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Dc extends DS{data(e={}){return super.data(e)}}class R5{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new sl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dc(this._firestore,this._userDataWriter,r.key,r,new sl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Te(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new Dc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new sl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new Dc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new sl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:P5(a.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function P5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(t){t=tr(t,Nn);const e=tr(t.firestore,As);return h5(pu(e),t._key).then(n=>M5(e,t,n))}class g0 extends A5{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,n)}}function Vr(t){t=tr(t,vi);const e=tr(t.firestore,As),n=pu(e),r=new g0(e);return C5(t._query),f5(n,t._query).then(s=>new R5(e,r,t,s))}function y0(t,e,n){t=tr(t,Nn);const r=tr(t.firestore,As),s=m0(t.converter,e,n);return wu(r,[o0(gu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,An.none())])}function vu(t,e,n,...r){t=tr(t,Nn);const s=tr(t.firestore,As),i=gu(s);let o;return o=typeof(e=Ut(e))=="string"||e instanceof mu?CS(i,"updateDoc",t._key,e,n,r):kS(i,"updateDoc",t._key,e),wu(s,[o.toMutation(t._key,An.exists(!0))])}function xu(t){return wu(tr(t.firestore,As),[new fh(t._key,An.none())])}function Ta(t,e){const n=tr(t.firestore,As),r=qt(t),s=m0(t.converter,e);return wu(n,[o0(gu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,An.exists(!1))]).then(()=>r)}function wu(t,e){return function(r,s){const i=new Yr;return r.asyncQueue.enqueueAndForget(async()=>e5(await c5(r),s,i)),i.promise}(pu(t),e)}function M5(t,e,n){const r=n.docs.get(e._key),s=new g0(t);return new DS(t,s,e._key,r,new sl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t){return D5(t,{count:N5()})}function D5(t,e){const n=tr(t.firestore,As),r=pu(n),s=$M(e,(i,o)=>new I4(o,i.aggregateType,i._internalFieldPath));return p5(r,t._query,s).then(i=>function(a,u,c){const d=new g0(a);return new _5(u,d,c)}(n,t,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=gu(e)}set(e,n,r){this._verifyNotCommitted();const s=jf(e,this._firestore),i=m0(s.converter,n,r),o=o0(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,An.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=jf(e,this._firestore);let o;return o=typeof(n=Ut(n))=="string"||n instanceof mu?CS(this._dataReader,"WriteBatch.update",i._key,n,r,s):kS(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,An.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=jf(e,this._firestore);return this._mutations=this._mutations.concat(new fh(n._key,An.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jf(t,e){if((t=Ut(t)).firestore!==e)throw new Te(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Ox(t){return new a0("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(t){return pu(t=tr(t,As)),new L5(t,e=>wu(t,e))}(function(e,n=!0){(function(s){wa=s})(xa),es(new Lr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new As(new RM(r.getProvider("auth-internal")),new LM(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Te(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wl(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),hr(tx,"4.7.3",e),hr(tx,"4.7.3","esm2017")})();function w0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function LS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const j5=LS,jS=new so("auth","Firebase",LS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new ih("@firebase/auth");function F5(t,...e){kd.logLevel<=Je.WARN&&kd.warn(`Auth (${xa}): ${t}`,...e)}function Lc(t,...e){kd.logLevel<=Je.ERROR&&kd.error(`Auth (${xa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t,...e){throw b0(t,...e)}function Rr(t,...e){return b0(t,...e)}function _0(t,e,n){const r=Object.assign(Object.assign({},j5()),{[e]:n});return new so("auth","Firebase",r).create(e,{appName:t.name})}function zi(t){return _0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function V5(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ns(t,"argument-error"),_0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function b0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jS.create(t,...e)}function Fe(t,e,...n){if(!t)throw b0(e,...n)}function fs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lc(e),new Error(e)}function Is(t,e){t||fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function U5(){return Bx()==="http:"||Bx()==="https:"}function Bx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(U5()||DT()||"connection"in navigator)?navigator.onLine:!0}function B5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.shortDelay=e,this.longDelay=n,Is(n>e,"Short delay should be less than long delay!"),this.isMobile=VN()||BN()}get(){return O5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t,e){Is(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=new _u(3e4,6e4);function T0(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ia(t,e,n,r,s={}){return VS(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=au(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return ON()||(c.referrerPolicy="no-referrer"),FS.fetch()(US(t,t.config.apiHost,n,a),c)})}async function VS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},z5),e);try{const s=new $5(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw cc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw cc(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw cc(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw cc(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw _0(t,d,c);ns(t,d)}}catch(s){if(s instanceof Ur)throw s;ns(t,"network-request-failed",{message:String(s)})}}async function H5(t,e,n,r,s={}){const i=await Ia(t,e,n,r,s);return"mfaPendingCredential"in i&&ns(t,"multi-factor-auth-required",{_serverResponse:i}),i}function US(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?E0(t.config,s):`${t.config.apiScheme}://${s}`}class $5{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Rr(this.auth,"network-request-failed")),G5.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Rr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q5(t,e){return Ia(t,"POST","/v1/accounts:delete",e)}async function OS(t,e){return Ia(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function W5(t,e=!1){const n=Ut(t),r=await n.getIdToken(e),s=I0(r);Fe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:wl(Ff(s.auth_time)),issuedAtTime:wl(Ff(s.iat)),expirationTime:wl(Ff(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ff(t){return Number(t)*1e3}function I0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Lc("JWT malformed, contained fewer than 3 sections"),null;try{const s=NT(n);return s?JSON.parse(s):(Lc("Failed to decode base64 JWT payload"),null)}catch(s){return Lc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function zx(t){const e=I0(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ur&&K5(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function K5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wl(this.lastLoginAt),this.creationTime=wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Zl(t,OS(n,{idToken:r}));Fe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?BS(i.providerUserInfo):[],a=Q5(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=u?c:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new um(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function Y5(t){const e=Ut(t);await Cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Q5(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function BS(t){return t.map(e=>{var{providerId:n}=e,r=w0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5(t,e){const n=await VS(t,{},async()=>{const r=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=US(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",FS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Z5(t,e){return Ia(t,"POST","/v2/accounts:revokeToken",T0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=zx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await X5(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ho;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Fe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Fe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ps{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=w0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new J5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new um(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Zl(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return W5(this,e)}reload(){return Y5(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ps(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hs(this.auth.app))return Promise.reject(zi(this.auth));const e=await this.getIdToken();return await Zl(this,q5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,c,d;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,b=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:R,isAnonymous:L,providerData:U,stsTokenManager:S}=n;Fe(T&&S,e,"internal-error");const C=Ho.fromJSON(this.name,S);Fe(typeof T=="string",e,"internal-error"),js(m,e.name),js(g,e.name),Fe(typeof R=="boolean",e,"internal-error"),Fe(typeof L=="boolean",e,"internal-error"),js(y,e.name),js(w,e.name),js(x,e.name),js(_,e.name),js(v,e.name),js(b,e.name);const N=new ps({uid:T,auth:e,email:g,emailVerified:R,displayName:m,isAnonymous:L,photoURL:w,phoneNumber:y,tenantId:x,stsTokenManager:C,createdAt:v,lastLoginAt:b});return U&&Array.isArray(U)&&(N.providerData=U.map(M=>Object.assign({},M))),_&&(N._redirectEventId=_),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ho;s.updateFromServerResponse(n);const i=new ps({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Cd(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Fe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?BS(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ho;a.updateFromIdToken(r);const u=new ps({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new um(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new Map;function ms(t){Is(t instanceof Function,"Expected a class definition");let e=Gx.get(t);return e?(Is(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zS.type="NONE";const Hx=zS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t,e,n){return`firebase:${t}:${e}:${n}`}class $o{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=jc(this.userKey,s.apiKey,i),this.fullPersistenceKey=jc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ps._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $o(ms(Hx),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ms(Hx);const o=jc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const m=ps._fromJSON(e,d);c!==i&&(a=m),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new $o(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new $o(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KS(e))return"Blackberry";if(JS(e))return"Webos";if(HS(e))return"Safari";if((e.includes("chrome/")||$S(e))&&!e.includes("edge/"))return"Chrome";if(WS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function GS(t=_n()){return/firefox\//i.test(t)}function HS(t=_n()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $S(t=_n()){return/crios\//i.test(t)}function qS(t=_n()){return/iemobile/i.test(t)}function WS(t=_n()){return/android/i.test(t)}function KS(t=_n()){return/blackberry/i.test(t)}function JS(t=_n()){return/webos/i.test(t)}function S0(t=_n()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eL(t=_n()){var e;return S0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tL(){return zN()&&document.documentMode===10}function YS(t=_n()){return S0(t)||WS(t)||JS(t)||KS(t)||/windows phone/i.test(t)||qS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t,e=[]){let n;switch(t){case"Browser":n=$x(_n());break;case"Worker":n=`${$x(_n())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e={}){return Ia(t,"GET","/v2/passwordPolicy",T0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=6;class iL{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:sL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qx(this),this.idTokenSubscription=new qx(this),this.beforeStateQueue=new nL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ms(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await $o.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await OS(this,{idToken:e}),r=await ps._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(hs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=B5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hs(this.app))return Promise.reject(zi(this));const n=e?Ut(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hs(this.app)?Promise.reject(zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hs(this.app)?Promise.reject(zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rL(this),n=new iL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new so("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Z5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ms(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await $o.create(this,[ms(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&F5(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ih(t){return Ut(t)}class qx{constructor(e){this.auth=e,this.observer=null,this.addObserver=JN(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aL(t){k0=t}function lL(t){return k0.loadJS(t)}function uL(){return k0.gapiScript}function cL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t,e){const n=io(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Gl(i,e??{}))return s;ns(s,"already-initialized")}return n.initialize({options:e})}function hL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ms);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function fL(t,e,n){const r=Ih(t);Fe(r._canInitEmulator,r,"emulator-config-failed"),Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=XS(e),{host:o,port:a}=pL(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),mL()}function XS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pL(t){const e=XS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Wx(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Wx(o)}}}function Wx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function mL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,n){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(t,e){return H5(t,"POST","/v1/accounts:signInWithIdp",T0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="http://localhost";class eo extends ZS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ns("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=w0(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new eo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qo(e,n)}buildRequest(){const e={requestUri:gL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=au(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends C0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends bu{constructor(){super("facebook.com")}static credential(e){return eo._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return eo._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return us.credential(n,r)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends bu{constructor(){super("github.com")}static credential(e){return eo._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.GITHUB_SIGN_IN_METHOD="github.com";Gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends bu{constructor(){super("twitter.com")}static credential(e,n){return eo._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Hs.credential(n,r)}catch{return null}}}Hs.TWITTER_SIGN_IN_METHOD="twitter.com";Hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ps._fromIdTokenResponse(e,r,s),o=Kx(r);return new pa({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Kx(r);return new pa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Kx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends Ur{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ad(e,n,r,s)}}function e1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(t,i,e,r):i})}async function yL(t,e,n=!1){const r=await Zl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vL(t,e,n=!1){const{auth:r}=t;if(hs(r.app))return Promise.reject(zi(r));const s="reauthenticate";try{const i=await Zl(t,e1(r,s,e,t),n);Fe(i.idToken,r,"internal-error");const o=I0(i.idToken);Fe(o,r,"internal-error");const{sub:a}=o;return Fe(t.uid===a,r,"user-mismatch"),pa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ns(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(t,e,n=!1){if(hs(t.app))return Promise.reject(zi(t));const r="signIn",s=await e1(t,r,e),i=await pa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function wL(t,e,n,r){return Ut(t).onIdTokenChanged(e,n,r)}function _L(t,e,n){return Ut(t).beforeAuthStateChanged(e,n)}function bL(t){return Ut(t).signOut()}const Nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nd,"1"),this.storage.removeItem(Nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=1e3,TL=10;class n1 extends t1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);tL()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,TL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},EL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}n1.type="LOCAL";const IL=n1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1 extends t1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}r1.type="SESSION";const s1=r1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Sh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await SL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=A0("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(d),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(){return window}function CL(t){Zr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(){return typeof Zr().WorkerGlobalScope<"u"&&typeof Zr().importScripts=="function"}async function AL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function RL(){return i1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="firebaseLocalStorageDb",PL=1,Rd="firebaseLocalStorage",a1="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kh(t,e){return t.transaction([Rd],e?"readwrite":"readonly").objectStore(Rd)}function ML(){const t=indexedDB.deleteDatabase(o1);return new Eu(t).toPromise()}function cm(){const t=indexedDB.open(o1,PL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Rd,{keyPath:a1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Rd)?e(r):(r.close(),await ML(),e(await cm()))})})}async function Jx(t,e,n){const r=kh(t,!0).put({[a1]:e,value:n});return new Eu(r).toPromise()}async function DL(t,e){const n=kh(t,!1).get(e),r=await new Eu(n).toPromise();return r===void 0?null:r.value}function Yx(t,e){const n=kh(t,!0).delete(e);return new Eu(n).toPromise()}const LL=800,jL=3;class l1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>jL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return i1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sh._getInstance(RL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await AL(),!this.activeServiceWorker)return;this.sender=new kL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cm();return await Jx(e,Nd,"1"),await Yx(e,Nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Jx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>DL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=kh(s,!1).getAll();return new Eu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}l1.type="LOCAL";const FL=l1;new _u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t,e){return e?ms(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0 extends ZS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VL(t){return xL(t.auth,new N0(t),t.bypassAuthState)}function UL(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),vL(n,new N0(t),t.bypassAuthState)}async function OL(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),yL(n,new N0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VL;case"linkViaPopup":case"linkViaRedirect":return OL;case"reauthViaPopup":case"reauthViaRedirect":return UL;default:ns(this.auth,"internal-error")}}resolve(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=new _u(2e3,1e4);async function zL(t,e,n){if(hs(t.app))return Promise.reject(Rr(t,"operation-not-supported-in-this-environment"));const r=Ih(t);V5(t,e,C0);const s=u1(r,n);return new Vi(r,"signInViaPopup",e,s).executeNotNull()}class Vi extends c1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Vi.currentPopupAction&&Vi.currentPopupAction.cancel(),Vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){Is(this.filter.length===1,"Popup operations only handle one event");const e=A0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BL.get())};e()}}Vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL="pendingRedirect",Fc=new Map;class HL extends c1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fc.get(this.auth._key());if(!e){try{const r=await $L(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fc.set(this.auth._key(),e)}return this.bypassAuthState||Fc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $L(t,e){const n=KL(e),r=WL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function qL(t,e){Fc.set(t._key(),e)}function WL(t){return ms(t._redirectPersistence)}function KL(t){return jc(GL,t.config.apiKey,t.name)}async function JL(t,e,n=!1){if(hs(t.app))return Promise.reject(zi(t));const r=Ih(t),s=u1(r,e),o=await new HL(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=10*60*1e3;class QL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!d1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Rr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qx(e))}saveEventToCache(e){this.cachedEventUids.add(Qx(e)),this.lastProcessedEventTime=Date.now()}}function Qx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function d1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return d1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZL(t,e={}){return Ia(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t3=/^https?/;async function n3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ZL(t);for(const n of e)try{if(r3(n))return}catch{}ns(t,"unauthorized-domain")}function r3(t){const e=lm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!t3.test(n))return!1;if(e3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=new _u(3e4,6e4);function Xx(){const t=Zr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function i3(t){return new Promise((e,n)=>{var r,s,i;function o(){Xx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xx(),n(Rr(t,"network-request-failed"))},timeout:s3.get()})}if(!((s=(r=Zr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Zr().gapi)===null||i===void 0)&&i.load)o();else{const a=cL("iframefcb");return Zr()[a]=()=>{gapi.load?o():n(Rr(t,"network-request-failed"))},lL(`${uL()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Vc=null,e})}let Vc=null;function o3(t){return Vc=Vc||i3(t),Vc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=new _u(5e3,15e3),l3="__/auth/iframe",u3="emulator/auth/iframe",c3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h3(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?E0(e,u3):`https://${t.config.authDomain}/${l3}`,r={apiKey:e.apiKey,appName:t.name,v:xa},s=d3.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${au(r).slice(1)}`}async function f3(t){const e=await o3(t),n=Zr().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:h3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c3,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Rr(t,"network-request-failed"),a=Zr().setTimeout(()=>{i(o)},a3.get());function u(){Zr().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},m3=500,g3=600,y3="_blank",v3="http://localhost";class Zx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x3(t,e,n,r=m3,s=g3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},p3),{width:r.toString(),height:s.toString(),top:i,left:o}),c=_n().toLowerCase();n&&(a=$S(c)?y3:n),GS(c)&&(e=e||v3,u.scrollbars="yes");const d=Object.entries(u).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(eL(c)&&a!=="_self")return w3(e||"",a),new Zx(null);const m=window.open(e||"",a,d);Fe(m,t,"popup-blocked");try{m.focus()}catch{}return new Zx(m)}function w3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3="__/auth/handler",b3="emulator/auth/handler",E3=encodeURIComponent("fac");async function ew(t,e,n,r,s,i){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xa,eventId:s};if(e instanceof C0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",KN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof bu){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const u=await t._getAppCheckToken(),c=u?`#${E3}=${encodeURIComponent(u)}`:"";return`${T3(t)}?${au(a).slice(1)}${c}`}function T3({config:t}){return t.emulator?E0(t,b3):`https://${t.authDomain}/${_3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="webStorageSupport";class I3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=s1,this._completeRedirectFn=JL,this._overrideRedirectResult=qL}async _openPopup(e,n,r,s){var i;Is((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await ew(e,n,r,lm(),s);return x3(e,o,A0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ew(e,n,r,lm(),s);return CL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Is(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await f3(e),r=new QL(e);return n.register("authEvent",s=>(Fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vf,{type:Vf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Vf];o!==void 0&&n(!!o),ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=n3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return YS()||HS()||S0()}}const S3=I3;var tw="@firebase/auth",nw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A3(t){es(new Lr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QS(t)},c=new oL(r,s,i,u);return hL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),es(new Lr("auth-internal",e=>{const n=Ih(e.getProvider("auth").getImmediate());return(r=>new k3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hr(tw,nw,C3(t)),hr(tw,nw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=5*60,R3=MT("authIdTokenMaxAge")||N3;let rw=null;const P3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>R3)return;const s=n==null?void 0:n.token;rw!==s&&(rw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function M3(t=kg()){const e=io(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dL(t,{popupRedirectResolver:S3,persistence:[FL,IL,s1]}),r=MT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=P3(i.toString());_L(n,o,()=>o(n.currentUser)),wL(n,a=>o(a))}}const s=RT("auth");return s&&fL(n,`http://${s}`),n}function D3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}aL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Rr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",D3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A3("Browser");const L3={apiKey:"AIzaSyDjgrBvKUaVg9U1XustHj9TeO4lHZDrcNg",authDomain:"fanra-dev.firebaseapp.com",projectId:"fanra-dev",storageBucket:"fanra-dev.firebasestorage.app",messagingSenderId:"664735861834",appId:"1:664735861834:web:6519570201553dbe4faab3",measurementId:"G-HMKEVZS65H"},R0=OT(L3);IM(R0);const He=v5(R0),h1=M3(R0),j3=new us,Sa="users",f1="chats",eu="shared_api_keys",Tu="gallery_photos_production",ka="blog_posts_production",Ch="music_playlist",p1="site_content",m1="analytics_daily",F3="analytics_logs",Ah="messages",Uf=5,g1=[{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/609923798_2054349268723214_528785191593339343_n.webp?stp=dst-webp_s960x960&_nc_cat=110&ccb=1-7&_nc_sid=9f807c&_nc_ohc=BZOOtuLCh5UQ7kNvwGKzWef&_nc_oc=AdmGNpGcSr3xRboqLJeuQ8M5KjOpRBNLbsqQVscddteG1f05EVO_Kv4iZQn5l2OjztzywzdnV5Qp-sDi35XjQWpa&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QGA47iTm-6vGLy8O36BgFnvih3m4gJ3HjjJLwTB_h1_yg&oe=6987DFA2",caption:"Awal tahun yang tenang. Duduk santai menikmati sore.",month:"Januari",year:"2026",timestamp:1768608e6}],Pd=[{title:"Glitch in the Matrix: Bukti Kita Cuma Kode Biner?",subtitle:"Teori simulasi Nick Bostrom yang bikin Elon Musk kepikiran tiap malam.",category:"Konspirasi Sains",date:"20 Januari 2026",readTime:"8 min read",author:"Fanra",image:"https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?q=80&w=2070&auto=format&fit=crop",content:`Pernah ngerasa dj vu? Atau ngeliat sesuatu yang kayaknya 'nggak masuk akal' secara fisika? Banyak ilmuwan, termasuk Elon Musk, percaya peluang kita hidup di 'base reality' (kenyataan asli) itu cuma satu banding miliaran.

Bayangkan game The Sims atau GTA. Karakternya nggak sadar mereka ada di game. Seiring teknologi komputer kita makin canggih (VR, AI, Quantum Computing), kita makin dekat bisa bikin simulasi yang persis kenyataan. Kalau kita bisa bikin itu, siapa yang menjamin kalau KITA ini bukan hasil simulasi peradaban yang lebih maju?

Fisikawan James Gates bahkan nemuin kode error koreksi komputer (adinkras) di dalam persamaan supersimetri yang menjelaskan alam semesta. Kok bisa ada kode komputer di hukum fisika?`,timestamp:17699168e5},{title:"Paradoks Fermi: Keheningan yang Memekakkan Telinga",subtitle:"Jika alam semesta ini tak terhingga luasnya dan tua usianya, di mana semua orang?",category:"Sains & Filsafat",date:"9 Januari 2026",readTime:"7 min read",author:"Fanra",image:"https://upload.wikimedia.org/wikipedia/commons/6/69/NASA-HS201427a-HubbleUltraDeepField2014-20140603.jpg",content:`Pernahkah lo menatap langit malam yang cerah, melihat ribuan bintang, dan merasa betapa kecilnya kita? Lalu muncul satu pertanyaan sederhana yang menghantui para ilmuwan selama puluhan tahun: "Di mana mereka semua?"

Mari kita bicara matematika sebentar. Galaksi Bima Sakti kita sendiri memiliki sekitar 100 hingga 400 miliar bintang. Dan di alam semesta yang teramati, ada triliunan galaksi lain. Bahkan jika hanya sebagian kecil dari bintang-bintang itu memiliki planet yang mirip Bumi, seharusnya ada jutaan peradaban cerdas di luar sana.

Alam semesta berumur sekitar 13,8 miliar tahun. Bumi baru berumur 4,5 miliar tahun. Artinya, ada peradaban lain yang mungkin sudah ada miliaran tahun sebelum kita. Bayangkan teknologi mereka. Seharusnya, mereka sudah mengkolonisasi galaksi, atau setidaknya mengirim sinyal yang bisa kita tangkap. Tapi yang kita dapatkan hanyalah... kesunyian. Inilah yang disebut Paradoks Fermi.`,sources:[{label:"Wikipedia - Fermi Paradox",url:"https://en.wikipedia.org/wiki/Fermi_paradox"},{label:"Wait But Why - The Fermi Paradox",url:"https://waitbutwhy.com/2014/05/fermi-paradox.html"}],timestamp:17679168e5}],y1=[{id:"initial_track_1",spotifyId:"08A9yuCnJwBmItI1U9BZ7a",title:"Cincin",artist:"Hindia",addedAt:Date.now()}],V3=async()=>{try{const e=(await zL(h1,j3)).user,n=qt(He,Sa,e.uid),r=await Th(n),s=e.email==="irfanrizkiaditri@gmail.com";let i=Uf,o={name:e.displayName||"Pengguna Google",school:"Google Account",deviceId:e.uid,email:e.email,photoURL:e.photoURL,isAdmin:s,lastLogin:new Date().toISOString()};if(r.exists()){const a=r.data();i=a.credits??Uf,o.isAdmin=a.isAdmin||s,await vu(n,{lastLogin:new Date().toISOString(),photoURL:e.photoURL})}else await y0(n,{...o,credits:Uf,createdAt:new Date().toISOString(),apiKeys:[]});return{user:o,credits:i,id:e.uid}}catch(t){throw console.error("Google Sign In Error",t),t}},U3=async()=>{try{await bL(h1)}catch(t){console.error("Logout error",t)}},O3=async t=>{if(t.startsWith("offline_"))return[];try{const e=await Th(qt(He,Sa,t));return e.exists()?e.data().apiKeys||[]:[]}catch{return[]}},sw=async(t,e)=>{if(!t.startsWith("offline_"))try{await vu(qt(He,Sa,t),{apiKeys:e});for(const n of e)if(n.isShared){const r=Fr(Ot(He,eu),ha("key","==",n.key));(await Vr(r)).empty&&await Ta(Ot(He,eu),{key:n.key,provider:t,addedAt:Date.now(),isActive:!0})}}catch{}},B3=async(t,e,n)=>{if(!t.startsWith("offline_"))try{const r=n.filter(o=>o.key!==e);await vu(qt(He,Sa,t),{apiKeys:r});const s=Fr(Ot(He,eu),ha("key","==",e),ha("provider","==",t));(await Vr(s)).forEach(async o=>{await xu(qt(He,eu,o.id))})}catch{}},z3=async()=>{try{const t=Fr(Ot(He,eu),ha("isActive","==",!0),Zi("addedAt","desc"),fa(10));return(await Vr(t)).docs.map(n=>n.data().key).sort(()=>.5-Math.random()).slice(0,5)}catch{return[]}},iw=async(t,e)=>{if(!t.startsWith("offline_"))try{await Ta(Ot(He,Sa,t,f1),e)}catch{}},G3=async t=>{if(t.startsWith("offline_"))return[];try{const e=Fr(Ot(He,Sa,t,f1),Zi("timestamp","asc"),fa(50));return(await Vr(e)).docs.map(r=>r.data())}catch{return[]}},H3=async()=>{try{const t=Ot(He,Tu);if((await v0(t)).data().count===0){const e=x0(He);g1.forEach(n=>e.set(qt(t),{...n})),await e.commit()}}catch{}},v1=async()=>{try{await H3();const t=Fr(Ot(He,Tu),Zi("timestamp","desc")),e=await Vr(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return g1.map((e,n)=>({id:`local-${n}`,...e}))}},$3=async t=>{try{await Ta(Ot(He,Tu),t)}catch(e){throw e}},q3=async(t,e)=>{try{await vu(qt(He,Tu,t),e)}catch(n){throw n}},W3=async t=>{try{await xu(qt(He,Tu,t))}catch(e){throw e}},K3=async()=>{try{const t=Ot(He,ka);if((await v0(t)).data().count===0){const e=x0(He);Pd.forEach(n=>e.set(qt(t),{...n})),await e.commit()}}catch{}},x1=async()=>{try{await K3();const t=Fr(Ot(He,ka),Zi("timestamp","desc")),e=await Vr(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return Pd.map((e,n)=>({id:`local-${n}`,...e}))}},J3=async t=>{try{if(t.startsWith("local-")){const r=parseInt(t.split("-")[1]);return Pd[r]?{id:t,...Pd[r]}:null}const e=qt(He,ka,t),n=await Th(e);return n.exists()?{id:n.id,...n.data()}:null}catch{return null}},Y3=async t=>{try{await Ta(Ot(He,ka),t)}catch(e){throw e}},Q3=async(t,e)=>{try{await vu(qt(He,ka,t),e)}catch(n){throw n}},X3=async t=>{try{await xu(qt(He,ka,t))}catch(e){throw e}},Z3=async()=>{try{const t=Ot(He,Ch);if((await v0(t)).data().count===0){const e=x0(He);y1.forEach(n=>e.set(qt(t),{...n})),await e.commit()}}catch{}},ej=async()=>{try{await Z3();const t=Fr(Ot(He,Ch),Zi("addedAt","desc")),e=await Vr(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return y1}},tj=async t=>{try{await Ta(Ot(He,Ch),t)}catch(e){throw e}},nj=async t=>{try{await xu(qt(He,Ch,t))}catch(e){throw e}};let Wo={};const ow=()=>{Wo={},console.log("Cache cleared.")},aw=t=>Wo[t]||null,P0=async t=>{if(Wo[t])return Wo[t];try{const e=await Th(qt(He,p1,t));if(e.exists()){const n=e.data().text;return Wo[t]=n,n}return null}catch{return null}},M0=async(t,e)=>{Wo[t]=e;try{await y0(qt(He,p1,t),{text:e,updatedAt:Date.now()},{merge:!0})}catch(n){throw n}},rj=async t=>{try{await Ta(Ot(He,Ah),{...t,timestamp:Date.now(),isRead:!1})}catch(e){throw e}},sj=async t=>{try{await xu(qt(He,Ah,t))}catch(e){throw e}},ij=async()=>{try{const t=Fr(Ot(He,Ah),ha("type","==","public"),fa(100));return(await Vr(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch{return[]}},oj=async()=>{try{const t=Fr(Ot(He,Ah),ha("type","==","private"),fa(100));return(await Vr(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>s.timestamp-r.timestamp)}catch{return[]}},aj=()=>new Date().toISOString().split("T")[0],lj=async()=>{let t="ID";try{const e=new AbortController,n=setTimeout(()=>e.abort(),2e3),r=await fetch("https://ipapi.co/country/",{signal:e.signal});if(clearTimeout(n),r.ok){const s=await r.text();s&&s.length===2&&(t=s.toUpperCase())}}catch{t=Math.random()>.3?"ID":Math.random()>.5?"US":"SG"}try{const e=aj(),n=qt(He,m1,e);await y0(n,{date:e,visitors:Ox(1),[`geo.${t}`]:Ox(1),timestamp:Date.now()},{merge:!0})}catch{}},uj=async()=>{try{const t=Fr(Ot(He,m1),Zi("date","desc"),fa(7)),e=await Vr(t),n=[];let r=0,s=0;const i={};e.forEach(d=>{const m=d.data();n.unshift({date:m.date,visitors:m.visitors||0,errors:m.errors||0}),r+=m.visitors||0,s+=m.errors||0,m.geo&&Object.keys(m.geo).forEach(g=>{i[g]=(i[g]||0)+m.geo[g]})});const o=Fr(Ot(He,F3),Zi("timestamp","desc"),fa(10)),u=(await Vr(o)).docs.map(d=>({id:d.id,...d.data()})),c=Object.entries(i).map(([d,m])=>({country:d,count:m})).sort((d,m)=>m.count-d.count);return{dailyStats:n,totalVisitors:r,totalErrors:s,logs:u,geoStats:c}}catch{return null}},cj=[{label:"Biru",hex:"#3b82f6"},{label:"Merah",hex:"#ef4444"},{label:"Hijau",hex:"#22c55e"},{label:"Ungu",hex:"#a855f7"},{label:"Emas",hex:"#eab308"},{label:"Hitam",hex:"#0f172a"},{label:"Slate",hex:"#64748b"}],dj=[{label:"",value:"to right",title:"Ke Kanan"},{label:"",value:"to bottom",title:"Ke Bawah"},{label:"",value:"135deg",title:"Diagonal Bawah"},{label:"",value:"to left",title:"Ke Kiri"},{label:"",value:"to top",title:"Ke Atas"},{label:"",value:"45deg",title:"Diagonal Atas"}],mt=({id:t,defaultText:e,isAdmin:n,className:r="",tag:s="p",multiline:i=!1})=>{const[o,a]=j.useState(()=>aw(t)||e),[u,c]=j.useState(!1),[d,m]=j.useState("solid"),[g,y]=j.useState("#3b82f6"),[w,x]=j.useState("#3b82f6"),[_,v]=j.useState("#a855f7"),[b,T]=j.useState("to right"),R=j.useRef(null);j.useEffect(()=>{let M=!0;return(async()=>{try{const P=await P0(t);M&&P&&P!==o&&a(P)}catch{}})(),()=>{M=!1}},[t]),j.useEffect(()=>{u&&R.current&&(R.current.style.height="auto",R.current.style.height=R.current.scrollHeight+"px")},[u,o]);const L=async()=>{c(!1);try{await M0(t,o)}catch{alert("Gagal menyimpan perubahan teks.")}},U=()=>{c(!1);const M=aw(t);M&&a(M)},S=()=>{const M=R.current;if(!M)return;const V=M.selectionStart,P=M.selectionEnd;if(V===P)return;const D=o.substring(V,P),k=o.substring(0,V),G=o.substring(P);let ye="";d==="solid"?ye=`<span style="color: ${g}">${D}</span>`:ye=`<span style="background: ${`linear-gradient(${b}, ${w}, ${_})`}; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 800; -webkit-box-decoration-break: clone; box-decoration-break: clone;">${D}</span>`,a(k+ye+G)},C=()=>{const M=R.current;if(!M)return;const V=M.selectionStart,P=M.selectionEnd;if(V===P)return;const D=o.substring(V,P),k=o.substring(0,V),G=o.substring(P),ye=D.replace(/<\/?[^>]+(>|$)/g,"");a(k+ye+G)},N=()=>{const M=w;x(_),v(M)};return u?l.jsx("div",{className:`relative z-[100] ${r}`,children:l.jsxs("div",{className:"bg-white border border-slate-200 shadow-2xl rounded-2xl overflow-hidden min-w-[300px] md:min-w-[500px] flex flex-col animate-fade-in-up",children:[l.jsxs("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-100 flex justify-between items-center",children:[l.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:["Editing: ",l.jsx("span",{className:"text-slate-800",children:t.split("_").pop()})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:U,className:"px-3 py-1.5 text-xs font-bold text-slate-500 hover:text-slate-800 rounded-lg transition-colors",children:"Batal"}),l.jsxs("button",{onClick:L,className:"px-4 py-1.5 text-xs font-bold bg-slate-900 text-white hover:bg-slate-800 rounded-lg flex items-center gap-1.5 shadow-md active:scale-95 transition-all",children:[l.jsx(_s,{className:"w-3 h-3"})," Simpan"]})]})]}),l.jsxs("div",{className:"p-4 bg-white relative",children:[l.jsx("textarea",{ref:R,value:o,onChange:M=>a(M.target.value),className:"w-full bg-transparent border-none outline-none text-sm font-mono text-slate-600 resize-none min-h-[100px] leading-relaxed placeholder:text-slate-300",placeholder:"Tulis teks atau HTML disini...",spellCheck:!1}),l.jsx("div",{className:"absolute top-2 right-2 opacity-10 pointer-events-none",children:l.jsx("span",{className:"text-[10px] font-mono",children:"HTML MODE"})})]}),l.jsx("div",{className:"bg-slate-50/50 border-t border-slate-100 p-4",children:l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-lg w-fit",children:[l.jsx("button",{onClick:()=>m("solid"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all ${d==="solid"?"bg-white text-slate-900 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:"Solid Color"}),l.jsxs("button",{onClick:()=>m("gradient"),className:`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all flex items-center gap-1 ${d==="gradient"?"bg-white text-blue-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[l.jsx(uN,{className:"w-3 h-3"})," Gradient"]})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[d==="solid"?l.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[l.jsx("div",{className:"p-1.5 bg-white border border-slate-200 rounded-lg shadow-sm shrink-0",children:l.jsx(lN,{className:"w-4 h-4 text-slate-400"})}),l.jsxs("div",{className:"flex gap-2",children:[cj.map(M=>l.jsx("button",{onClick:()=>y(M.hex),className:`w-6 h-6 rounded-full border-2 transition-transform hover:scale-110 shrink-0 ${g===M.hex?"border-slate-400 scale-110":"border-white shadow-sm"}`,style:{backgroundColor:M.hex},title:M.label},M.hex)),l.jsx("div",{className:"w-px h-6 bg-slate-300 mx-1"}),l.jsx("input",{type:"color",value:g,onChange:M=>y(M.target.value),className:"w-6 h-6 rounded-full cursor-pointer border border-slate-200 bg-white p-0 overflow-hidden shrink-0",title:"Custom Color"})]})]}):l.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Start"}),l.jsx("input",{type:"color",value:w,onChange:M=>x(M.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),l.jsx("button",{onClick:N,className:"text-slate-400 hover:text-slate-600 transition-colors p-1",title:"Tukar Warna",children:l.jsx(rh,{className:"w-3.5 h-3.5"})}),l.jsxs("div",{className:"flex items-center gap-2 bg-white px-2 py-1 rounded-lg border border-slate-200 shadow-sm",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"End"}),l.jsx("input",{type:"color",value:_,onChange:M=>v(M.target.value),className:"w-6 h-6 rounded cursor-pointer border-none bg-transparent p-0"})]}),l.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white shadow-md ml-auto",style:{background:`linear-gradient(${b}, ${w}, ${_})`},title:"Preview Gradient"})]}),l.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 no-scrollbar",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase shrink-0 mr-1",children:"Arah:"}),dj.map(M=>l.jsx("button",{onClick:()=>T(M.value),className:`w-7 h-7 flex items-center justify-center rounded-md border text-sm transition-all shrink-0 ${b===M.value?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,title:M.title,children:M.label},M.value))]})]}),l.jsxs("div",{className:"flex items-center gap-2 w-full justify-end mt-2 pt-2 border-t border-slate-100",children:[l.jsxs("button",{onClick:C,className:"text-[10px] font-bold bg-white border border-slate-200 hover:border-red-300 hover:text-red-500 text-slate-500 px-3 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex items-center gap-1.5",title:"Hapus format",children:[l.jsx(sN,{className:"w-3.5 h-3.5"}),"Hapus Format"]}),l.jsxs("button",{onClick:S,className:"text-[10px] font-bold bg-blue-50 border border-blue-200 hover:bg-blue-100 text-blue-700 px-4 py-2 rounded-lg transition-all shadow-sm active:scale-95 flex-1 justify-center flex",children:["Terapkan ",d==="solid"?"Warna":"Gradasi"]})]})]}),l.jsxs("p",{className:"text-[9px] text-slate-400 italic text-center",children:["*Blok teks di atas, atur ",d,", lalu klik Terapkan."]})]})})]})}):l.jsxs(s,{className:`relative group ${r} ${n?"cursor-pointer hover:opacity-80 transition-opacity decoration-blue-500/30":""}`,onClick:M=>{n&&(M.stopPropagation(),c(!0))},title:n?"Klik untuk mengedit warna & teks":void 0,children:[l.jsx("span",{dangerouslySetInnerHTML:{__html:o}}),n&&l.jsx("span",{className:"inline-flex ml-2 opacity-0 group-hover:opacity-100 transition-all duration-300 align-middle bg-slate-100 p-1 rounded-md border border-slate-200 shadow-sm absolute -top-4 -right-4 md:static",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-500",children:[l.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),l.jsx("path",{d:"m15 5 4 4"})]})})]})},hj=({isAdmin:t})=>{const e=gi(),[n,r]=j.useState(!1),[s,i]=j.useState({left:0,width:0,opacity:0}),[o,a]=j.useState(!1),u=j.useRef({}),c=[{path:"/",label:"Home"},{path:"/projects",label:"Projects"},{path:"/blog",label:"Blog"},{path:"/gallery",label:"Gallery"},{path:"/music",label:"Music"},{path:"/messages",label:"Pesan"}];j.useEffect(()=>(n?(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.documentElement.style.overflow="",document.body.style.position="",document.body.style.width=""),()=>{document.body.style.overflow="",document.documentElement.style.overflow="",document.body.style.position="",document.body.style.width=""}),[n]),j.useEffect(()=>{const g=()=>{const w=e.pathname;let x=c.find(v=>v.path===w);x||(x=c.find(v=>v.path!=="/"&&w.startsWith(v.path))),x||(x=c[0]);const _=u.current[x.path];_&&i({left:_.offsetLeft,width:_.offsetWidth,opacity:1})},y=setTimeout(g,50);return window.addEventListener("resize",g),()=>{clearTimeout(y),window.removeEventListener("resize",g)}},[e.pathname]);const d=()=>{a(!0),setTimeout(()=>{r(!1),a(!1)},700)},m=g=>g==="/"?e.pathname==="/":e.pathname.startsWith(g);return l.jsxs(l.Fragment,{children:[l.jsx("style",{children:`
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          @keyframes curtainDown {
             from { transform: translateY(-100%); }
             to { transform: translateY(0); }
          }
          @keyframes curtainUp {
             from { transform: translateY(0); }
             to { transform: translateY(-100%); }
          }
          .animate-blob { animation: blob 10s infinite; }
          .animation-delay-2000 { animation-delay: 2s; }
          .animation-delay-4000 { animation-delay: 4s; }
          .animate-curtain-down { animation: curtainDown 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
          .animate-curtain-up { animation: curtainUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        `}),l.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-100 transition-all",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center",children:[l.jsxs(wf,{to:"/",className:"flex items-center gap-3 cursor-pointer group mr-8",children:[l.jsx(Bl,{className:"w-8 h-8 transition-all duration-500 ease-out group-hover:scale-110 group-hover:drop-shadow-[0_0_15px_rgba(59,130,246,0.5)]",variant:"dark"}),l.jsx("div",{className:"flex flex-col justify-center",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(mt,{id:"navbar_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:t,tag:"span",className:"text-sm font-black tracking-tighter uppercase text-slate-900 leading-none"}),t&&l.jsx("span",{className:"bg-slate-900 text-white text-[9px] font-bold px-1.5 py-0.5 rounded leading-none shadow-sm",children:"ADMIN"})]})})]}),l.jsxs("div",{className:"hidden md:flex items-center relative ml-auto bg-slate-50/50 rounded-full p-1 border border-slate-200/60",children:[l.jsx("div",{className:"absolute top-1 bottom-1 bg-slate-900 rounded-full transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1)] shadow-md z-0 pointer-events-none",style:{left:s.left,width:s.width,opacity:s.opacity}}),c.map(g=>l.jsx(wf,{to:g.path,ref:y=>{u.current[g.path]=y},className:`relative z-10 px-6 py-2 rounded-full text-xs font-bold uppercase tracking-wide transition-colors duration-300 ${m(g.path)?"text-white":"text-slate-500 hover:text-slate-900"}`,children:g.label},g.path))]}),l.jsx("button",{className:"md:hidden p-2 text-slate-600 ml-auto",onClick:()=>r(!n),children:l.jsx(_T,{className:"w-6 h-6"})})]})}),(n||o)&&l.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden flex flex-col items-center justify-center p-6 overflow-hidden bg-white ${o?"animate-curtain-up":"animate-curtain-down"}`,style:{touchAction:"none"},onTouchMove:g=>g.preventDefault(),children:[l.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),l.jsxs("div",{className:"absolute inset-0 z-0 w-full h-full pointer-events-none",children:[l.jsx("div",{className:"absolute top-0 -left-10 w-96 h-96 bg-slate-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob"}),l.jsx("div",{className:"absolute top-1/4 -right-20 w-80 h-80 bg-gray-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"}),l.jsx("div",{className:"absolute -bottom-20 left-1/3 w-96 h-96 bg-zinc-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-4000"}),l.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-[10px]"})]}),l.jsx("button",{className:"absolute top-6 right-6 p-4 text-slate-800 hover:text-slate-500 transition-colors z-50",onClick:()=>d(),children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M18 6 6 18"}),l.jsx("path",{d:"m6 6 12 12"})]})}),l.jsxs("div",{className:`relative z-10 w-full flex flex-col items-center transition-all duration-500 ${o?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:[l.jsx("div",{className:"flex flex-col gap-8 w-full max-w-xs mt-10",children:c.map((g,y)=>l.jsx(wf,{to:g.path,onClick:()=>d(),className:`
                           text-4xl font-black uppercase tracking-tight text-center py-2 relative group
                           transition-all duration-300
                           ${m(g.path)?"text-slate-900 scale-110":"text-slate-300 hover:text-slate-500 hover:scale-105"}
                        `,style:{animationDelay:`${y*50}ms`},children:g.label},g.path))}),l.jsxs("div",{className:"absolute -bottom-40 flex flex-col items-center gap-3",children:[l.jsx("div",{className:"w-1 h-12 bg-slate-200 rounded-full"}),l.jsx("div",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-[0.4em]",children:"Fanra Studio"})]})]})]})]})},Jt=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null;let Of=null;const w1=t=>{if(Of)return Of;const e=t.sampleRate*2,n=t.createBuffer(1,e,t.sampleRate),r=n.getChannelData(0);for(let s=0;s<e;s++)r[s]=Math.random()*2-1;return Of=n,n},fj=()=>{if(!Jt)return;Jt.state==="suspended"&&Jt.resume();const t=w1(Jt),e=Jt.createBufferSource();e.buffer=t;const n=Jt.createBiquadFilter();n.type="lowpass",n.Q.value=1;const r=Jt.createGain();e.connect(n),n.connect(r),r.connect(Jt.destination);const s=Jt.currentTime;n.frequency.setValueAtTime(100,s),n.frequency.exponentialRampToValueAtTime(4e3,s+.15),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.3,s+.05),r.gain.exponentialRampToValueAtTime(.001,s+.3),e.start(s),e.stop(s+.3)},pj=()=>{if(!Jt)return;Jt.state==="suspended"&&Jt.resume();const t=w1(Jt),e=Jt.createBufferSource();e.buffer=t;const n=Jt.createBiquadFilter();n.type="lowpass",n.Q.value=.5;const r=Jt.createGain();e.connect(n),n.connect(r),r.connect(Jt.destination);const s=Jt.currentTime;n.frequency.setValueAtTime(200,s),n.frequency.exponentialRampToValueAtTime(1200,s+.8),r.gain.setValueAtTime(.01,s),r.gain.linearRampToValueAtTime(.4,s+.2),r.gain.exponentialRampToValueAtTime(.001,s+1.2),e.start(s),e.stop(s+1.2)};class mj{constructor(e,n,r){this.x=e,this.y=n;const s=Math.random()*Math.PI*2,i=Math.random()*10+2;this.vx=Math.cos(s)*i,this.vy=Math.sin(s)*i,this.size=3,this.friction=.92,this.opacity=1,this.ease=.2-r*.015,this.ease<.05&&(this.ease=.05)}update(e,n){this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction,this.x+=(e-this.x)*this.ease,this.y+=(n-this.y)*this.ease;const r=e-this.x,s=n-this.y;return Math.sqrt(r*r+s*s)<10&&(this.opacity-=.05),this.opacity>0}draw(e){e.save(),e.globalAlpha=this.opacity,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fillStyle="#2563eb",e.fill(),e.restore()}}const gj=({onComplete:t,onTriggerAdmin:e})=>{const[n,r]=j.useState(0),[s,i]=j.useState(!1),[o,a]=j.useState(!1),[u,c]=j.useState(!1),d=j.useRef(null),m=j.useRef(null),g=j.useRef([]),y=j.useRef({x:window.innerWidth/2,y:window.innerHeight/2});j.useEffect(()=>(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",window.scrollTo(0,0),()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[]),j.useEffect(()=>{const b=m.current;if(!b)return;const T=b.getContext("2d");if(!T)return;const R=()=>{b.width=window.innerWidth,b.height=window.innerHeight};window.addEventListener("resize",R),R();const L=C=>{y.current={x:C.clientX,y:C.clientY}};window.addEventListener("mousemove",L);let U;const S=()=>{T.clearRect(0,0,b.width,b.height),g.current.length>0?(g.current=g.current.filter(C=>C.update(y.current.x,y.current.y)?(C.draw(T),!0):!1),g.current.length===0&&o&&a(!1)):o&&a(!1),U=requestAnimationFrame(S)};return S(),()=>{window.removeEventListener("resize",R),window.removeEventListener("mousemove",L),cancelAnimationFrame(U)}},[o]);const w=b=>{if(o||!d.current)return;const T=d.current.getBoundingClientRect(),R=T.left+T.width/2,L=T.top+T.height/2;a(!0);let U=0;const S=10;g.current=[];const C=setInterval(()=>{if(U>=S){clearInterval(C);return}g.current.push(new mj(R,L,U)),U++},50)},x=()=>{s||(fj(),i(!0),r(1),setTimeout(()=>i(!1),1e3))},_=()=>{s||(pj(),i(!0),r(2),setTimeout(()=>{window.scrollTo(0,0),t()},1e3))},v=()=>{u||(c(!0),setTimeout(()=>{e&&e(),setTimeout(()=>c(!1),2e3)},500))};return l.jsxs("div",{className:`fixed inset-0 z-[999] bg-white transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1) overflow-hidden h-[100dvh] w-screen ${n===2?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none"}`,onTouchMove:b=>b.preventDefault(),children:[l.jsx("canvas",{ref:m,className:"absolute inset-0 pointer-events-none z-50"}),l.jsxs("div",{className:"flex flex-col w-full h-[200vh] transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1)",style:{transform:n>=1?"translateY(-50%)":"translateY(0)"},children:[l.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center relative bg-white px-6",style:{backgroundImage:"radial-gradient(#e2e8f0 1px, transparent 1px)",backgroundSize:"32px 32px"},children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-[0.03] pointer-events-none overflow-hidden",children:l.jsx(Bl,{className:"w-[150%] h-[150%] -translate-x-1/4 -translate-y-1/4",variant:"dark"})}),l.jsxs("div",{className:"relative z-10 text-center animate-fade-in-up flex flex-col items-center",children:[l.jsx("div",{className:"mb-8 flex justify-center transform hover:scale-105 transition-transform duration-500",children:l.jsx(Bl,{className:"w-32 h-32 md:w-40 md:h-40 shadow-2xl shadow-slate-200/50 rounded-[2rem] bg-white",variant:"dark"})}),l.jsxs("h1",{className:"text-4xl md:text-7xl font-black text-slate-900 mb-4 tracking-tighter leading-tight",children:["IRFAN RIZKI ADITRI",l.jsx("span",{ref:d,onDoubleClick:w,className:`text-blue-600 inline-block cursor-pointer transition-opacity duration-100 select-none ${o?"opacity-0":"opacity-100"} hover:opacity-80`,title:"Double click me!",children:"."})]}),l.jsx("p",{className:"text-slate-400 text-lg md:text-2xl font-medium tracking-widest uppercase",children:"Portfolio & Playground"}),l.jsxs("button",{onClick:x,className:"group flex flex-col items-center gap-3 transition-all outline-none cursor-pointer mt-20 hover:-translate-y-1 duration-300",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-900 transition-colors",children:"Next"}),l.jsx("div",{className:"w-12 h-12 rounded-full border border-slate-200 bg-white hover:bg-slate-50 flex items-center justify-center shadow-lg transition-all duration-300 group-hover:border-slate-300 group-hover:shadow-xl",children:l.jsx(Xn,{className:"w-5 h-5 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})})]})]})]}),l.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center bg-slate-50 px-6 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),l.jsx("div",{className:`absolute bottom-8 right-8 z-50 transition-all duration-700 ease-out cursor-default select-none ${u?"scale-[10] opacity-0 rotate-180 text-blue-600":"scale-100 opacity-5 hover:opacity-30 text-slate-900"}`,onDoubleClick:v,title:".",children:l.jsx(zl,{className:"w-6 h-6"})}),l.jsxs("div",{className:"relative z-10 max-w-4xl w-full grid md:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{className:"text-center md:text-left space-y-6 flex flex-col items-center md:items-start",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-[10px] font-bold uppercase tracking-wider",children:[l.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),"Student & Developer"]}),l.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-slate-900 tracking-tight leading-none",children:["Welcome to ",l.jsx("br",{}),l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-slate-500",children:"My Perspective."})]}),l.jsx("p",{className:"text-slate-500 text-lg leading-relaxed max-w-md",children:"Jelajahi eksperimen kode, cerita tentang alam semesta, dan tools AI buatan mahasiswa gabut."}),l.jsxs("button",{onClick:_,className:"inline-flex items-center gap-3 bg-slate-900 text-white px-8 py-4 rounded-xl font-bold shadow-xl shadow-slate-900/20 hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 group",children:["Explore Studio",l.jsx(sa,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),l.jsxs("div",{className:"relative hidden md:block",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-500 to-purple-500 rounded-[2.5rem] rotate-3 opacity-20 blur-2xl transform translate-y-4"}),l.jsxs("div",{className:"relative bg-white p-8 rounded-[2.5rem] shadow-2xl border border-slate-100 rotate-[-2deg] hover:rotate-0 transition-transform duration-500",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-slate-100 pb-6",children:[l.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center p-2.5",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra",className:"w-full h-full object-contain"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-900",children:"Fanra"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Intelligent Assistant"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"bg-slate-50 p-4 rounded-xl rounded-tl-none border border-slate-100 text-sm text-slate-600",children:"Halo! Ada yang bisa gue bantu hari ini? Mau edit foto atau ngobrol soal fisika?"}),l.jsx("div",{className:"bg-blue-600 p-4 rounded-xl rounded-tr-none text-sm text-white ml-auto max-w-[80%]",children:"Gue mau coba fitur AI Studio lo dong, Fanra!"})]})]})]})]})]})]})]})};class yj{constructor(e,n,r){this.x=e,this.y=n,this.baseX=e,this.baseY=n,this.size=1.5,this.density=Math.random()*20+5,this.color=r}draw(e,n){const r=this.y/n;let s=1-Math.pow(r,.8);s=Math.max(0,s),e.fillStyle=`rgba(203, 213, 225, ${s})`,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.closePath(),e.fill()}update(e,n){const r=e.x-this.x,s=e.y-this.y,i=Math.sqrt(r*r+s*s),o=r/i,a=s/i,u=e.radius,c=(u-i)/u,d=o*c*this.density,m=a*c*this.density;if(i<e.radius)n==="repel"?(this.x-=d,this.y-=m):(this.x+=d,this.y+=m);else{if(this.x!==this.baseX){const g=this.x-this.baseX;this.x-=g/15}if(this.y!==this.baseY){const g=this.y-this.baseY;this.y-=g/15}}}}const vj=({onTriggerAdmin:t,isAdmin:e=!1})=>{const n=rs(),[r]=j.useState(()=>Math.random()>.5?"repel":"attract"),s=j.useRef(null),i=j.useRef([]),o=j.useRef({x:-1e3,y:-1e3,radius:120}),a=j.useRef(null),[u,c]=j.useState([]),[d,m]=j.useState([]),[g,y]=j.useState(!0);return j.useEffect(()=>{(async()=>{try{const x=await x1();c(x.slice(0,2));const _=await v1();if(_.length>0){const v=Array(60).fill(_).flat();m(v)}else m([])}catch(x){console.error("Home data fetch error",x)}finally{y(!1)}})()},[]),j.useEffect(()=>{const w=s.current;if(!w)return;const x=w.getContext("2d");if(!x)return;const _=()=>{w.width=window.innerWidth,w.height=window.innerHeight,v()},v=()=>{i.current=[];const U=30,S=Math.ceil(w.height/U),C=Math.ceil(w.width/U);for(let N=0;N<S;N++)for(let M=0;M<C;M++){const V=M*U+U/2,P=N*U+U/2;i.current.push(new yj(V,P,"#cbd5e1"))}};_(),window.addEventListener("resize",_);const b=U=>{const S=w.getBoundingClientRect();o.current.x=U.clientX-S.left,o.current.y=U.clientY-S.top},T=()=>{o.current.x=-1e3,o.current.y=-1e3};window.addEventListener("mousemove",b),window.addEventListener("mouseout",T);let R;const L=()=>{x.clearRect(0,0,w.width,w.height),i.current.forEach(U=>{U.draw(x,w.height),U.update(o.current,r)}),R=requestAnimationFrame(L)};return L(),()=>{window.removeEventListener("resize",_),window.removeEventListener("mousemove",b),window.removeEventListener("mouseout",T),cancelAnimationFrame(R)}},[r]),j.useEffect(()=>{a.current&&d.length>0&&setTimeout(()=>{if(a.current){const w=a.current;w.scrollLeft=(w.scrollWidth-w.clientWidth)/2}},100)},[d]),l.jsxs("div",{className:"relative min-h-[90vh] flex flex-col overflow-hidden bg-gradient-to-b from-slate-50 via-white to-white",children:[l.jsx("style",{children:`
            .no-scrollbar::-webkit-scrollbar { display: none; }
            .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        `}),l.jsx("canvas",{ref:s,className:"fixed inset-0 z-0 pointer-events-auto opacity-60"}),l.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 md:px-12 py-12 flex-grow w-full space-y-24",children:[l.jsxs("div",{className:"mt-8",children:[l.jsx("h1",{className:"text-6xl md:text-8xl font-black text-slate-900 mb-8 leading-tight tracking-tighter max-w-5xl flex items-center flex-wrap gap-2",children:l.jsx(mt,{id:"home_hero_title",defaultText:"Fanra is here.",isAdmin:e,tag:"span",className:"inline-block"})}),l.jsx("div",{className:"max-w-5xl mt-16 relative",children:l.jsxs("div",{className:"grid md:grid-cols-5 gap-12 items-start",children:[l.jsxs("div",{className:"md:col-span-3 space-y-4",children:[l.jsx(mt,{id:"home_about_title",defaultText:"Physics Student & Tech Enthusiast.",isAdmin:e,tag:"h2",className:"text-2xl font-bold text-slate-900 leading-tight"}),l.jsx(mt,{id:"home_about_desc",defaultText:"Irfan Rizki Aditri (Fanra) merupakan mahasiswa Fisika angkatan 2025 di Institut Teknologi Sumatera (ITERA). Platform ini dikembangkan sebagai sarana dokumentasi akademik dan eksplorasi teknologi di sela kesibukan perkuliahan.",isAdmin:e,tag:"p",multiline:!0,className:"text-slate-600 text-lg leading-relaxed font-medium"})]}),l.jsxs("div",{className:"md:col-span-2 flex flex-col gap-4 pt-2",children:[l.jsxs("div",{className:"flex items-center gap-4 group",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14614/14614573.png",alt:"Physics",className:"w-6 h-6 object-contain"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Physics Major"}),l.jsx("span",{className:"text-sm text-slate-500 block",children:"Institut Teknologi Sumatera '25"})]})]}),l.jsxs("div",{className:"flex items-center gap-4 group",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/2120/2120483.png",alt:"AI & Dev",className:"w-6 h-6 object-contain"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Interests"}),l.jsx("span",{className:"text-sm text-slate-500 block",children:"AI & Web Development"})]})]}),l.jsxs("div",{className:"flex items-center gap-4 group",children:[l.jsx("div",{className:"w-10 h-10 bg-slate-50 border border-slate-200 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform shadow-sm",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3037/3037821.png",alt:"Location",className:"w-6 h-6 object-contain"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider block",children:"Based In"}),l.jsx("span",{className:"text-sm text-slate-500 block",children:"Sumatera, Indonesia"})]})]})]})]})})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-8 md:p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer",onClick:()=>n("/projects"),children:[l.jsxs("div",{className:"flex items-start justify-between mb-8",children:[l.jsx("div",{className:"w-14 h-14 bg-slate-50 border border-slate-200 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3310/3310054.png",alt:"Projects",className:"w-8 h-8 object-contain"})}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-slate-100 px-3 py-1 rounded-full",children:"Projects"})]}),l.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-3",children:"Projects & Tools"}),l.jsx("p",{className:"text-slate-500 mb-6 text-base leading-relaxed",children:"Eksperimen digital yang mencakup pengembangan Fanra AI Studio serta berbagai alat bantu sederhana."}),l.jsxs("div",{className:"flex items-center text-sm font-bold text-blue-600 group-hover:translate-x-2 transition-transform",children:["View Projects ",l.jsx(sa,{className:"w-5 h-5 ml-2"})]})]}),l.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-8 md:p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer flex flex-col",onClick:()=>n("/blog"),children:[l.jsxs("div",{className:"flex items-start justify-between mb-6",children:[l.jsx("div",{className:"w-14 h-14 bg-slate-50 border border-slate-200 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1170/1170221.png",alt:"Blog",className:"w-8 h-8 object-contain"})}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-slate-100 px-3 py-1 rounded-full",children:"Blog"})]}),l.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Recent Stories"}),l.jsx("div",{className:"space-y-4 flex-1",children:!g&&u.length>0?u.map(w=>l.jsxs("div",{className:"border-l-2 border-slate-200 pl-4 hover:border-slate-900 transition-colors",children:[l.jsx("h4",{className:"font-bold text-slate-800 text-sm line-clamp-1",children:w.title}),l.jsx("p",{className:"text-xs text-slate-400 mt-1 line-clamp-1",children:w.subtitle})]},w.id)):l.jsx("p",{className:"text-slate-400 text-sm italic",children:"Belum ada tulisan terbaru."})}),l.jsxs("div",{className:"mt-6 flex items-center text-sm font-bold text-slate-600 group-hover:text-slate-900 group-hover:translate-x-2 transition-transform",children:["Read Blog ",l.jsx(sa,{className:"w-5 h-5 ml-2"})]})]})]}),l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-[2.5rem] p-8 md:p-10 relative overflow-hidden group",children:[l.jsx("div",{className:"flex justify-between items-end mb-8 relative z-10 px-2",children:l.jsxs("div",{className:"cursor-pointer",onClick:()=>n("/gallery"),children:[l.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-1",children:"Visual Diaries"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Arsip dokumentasi momen visual."})]})}),l.jsx("div",{ref:a,className:"flex gap-3 overflow-x-auto no-scrollbar pb-2 items-center cursor-grab active:cursor-grabbing",children:!g&&d.length>0?d.map((w,x)=>l.jsxs("div",{className:"w-32 h-32 md:w-44 md:h-44 flex-shrink-0 rounded-xl overflow-hidden bg-slate-200 shadow-sm border border-slate-100 relative group/item cursor-pointer",onClick:()=>n("/gallery"),children:[l.jsx("img",{src:w.src,alt:"Gallery",className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover/item:opacity-100 transition-opacity"})]},`${w.id}-${x}`)):l.jsx("div",{className:"w-full h-32 flex items-center justify-center text-slate-400 text-sm italic border-2 border-dashed border-slate-200 rounded-2xl",children:"Galeri masih kosong."})})]}),l.jsxs("div",{className:"relative rounded-[3rem] overflow-hidden bg-white border border-slate-200 p-12 md:p-16 text-center shadow-xl",children:[l.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto",children:[l.jsx(mt,{id:"home_cta_title",defaultText:"Let's Connect.",isAdmin:e,tag:"h2",className:"text-3xl md:text-5xl font-black mb-6 tracking-tight text-slate-900"}),l.jsx(mt,{id:"home_cta_desc",defaultText:"Terbuka untuk diskusi mengenai kolaborasi, ide proyek, atau sekadar bertukar wawasan seputar teknologi dan sains.",isAdmin:e,tag:"p",className:"text-slate-500 mb-10 text-lg max-w-lg mx-auto"}),l.jsxs("button",{onClick:()=>n("/messages"),className:"bg-slate-900 text-white px-10 py-4 rounded-full font-bold hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 text-lg shadow-lg shadow-slate-900/20 flex items-center gap-3 mx-auto",children:[l.jsx(IT,{className:"w-5 h-5"}),"Send Message"]})]}),l.jsx("div",{className:"absolute -top-24 -left-24 w-64 h-64 bg-blue-50 rounded-full blur-3xl opacity-50 pointer-events-none"}),l.jsx("div",{className:"absolute -bottom-24 -right-24 w-64 h-64 bg-purple-50 rounded-full blur-3xl opacity-50 pointer-events-none"})]})]})]})},We=t=>{if(typeof window<"u"){const e=new CustomEvent("fanra-toast",{detail:{message:t}});window.dispatchEvent(e)}},lw=[{id:"fanra-ai",titleId:"projects_p1_title",descId:"projects_p1_desc",statusId:"status_project_p1",defaultTitle:"Fanra AI Studio",defaultDesc:"Asisten AI hybrid yang bisa ngobrol santai, edit foto (Hapus BG, Upscale 4K), dan cari info akurat.",fullDesc:"Fanra AI Studio adalah platform kecerdasan buatan terintegrasi yang dirancang untuk membantu produktivitas dan kreativitas. Menggunakan model Google Gemini Pro vision terbaru, aplikasi ini mampu memahami konteks visual, melakukan pengeditan gambar tingkat lanjut seperti penghapusan latar belakang yang presisi, peningkatan resolusi (Upscale 4K), hingga pencarian informasi real-time melalui integrasi Wikipedia dan Google Search.",iconUrl:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",theme:"blue",appPath:"/studio",buttonText:"Open Studio",features:["Smart Chatbot (Hybrid Search)","Background Remover","HD Upscale (4K)","Creative Remix","Wikipedia Integration"]},{id:"ig-panorama",titleId:"projects_p2_title",descId:"projects_p2_desc",statusId:"status_project_p2",defaultTitle:"IG Seamless Studio",defaultDesc:"Bikin konten carousel Instagram yang nyambung (Panorama) dengan mudah. Auto-slice saat download.",fullDesc:"IG Seamless Studio adalah tool khusus untuk konten kreator yang ingin membuat postingan carousel Instagram yang estetik dan menyambung (seamless). Tidak perlu lagi memotong gambar secara manual di Photoshop. Cukup upload gambar, atur layout di kanvas tanpa batas, tambahkan elemen dekoratif, dan sistem akan otomatis memotongnya menjadi slide-slide presisi siap posting.",iconUrl:"https://cdn-icons-png.flaticon.com/128/4327/4327816.png",theme:"pink",appPath:"/panorama",buttonText:"Open App",features:["Canvas Drag & Drop","Auto Slicing","Shape & Masking Tools","Layer Management","Instant Zip Download"]},{id:"fanragem",titleId:"projects_p3_title",descId:"projects_p3_desc",statusId:"status_project_p3",defaultTitle:"Fanragem",defaultDesc:"Game simulasi kehidupan mini. Bangun ekosistem digital, atur sumber daya, dan lihat perkembangannya.",fullDesc:"Fanragem adalah sebuah eksperimen simulasi kehidupan berbasis web. Di sini, Anda berperan sebagai pengatur ekosistem digital. Kelola sumber daya, populasi, dan lingkungan untuk melihat bagaimana keputusan kecil berdampak pada kelangsungan hidup dunia buatan Anda. Project ini masih dalam tahap pengembangan aktif.",iconUrl:"https://cdn-icons-png.flaticon.com/128/14047/14047858.png",theme:"purple",appPath:"",buttonText:"Play Demo",features:["Resource Management","Population Simulation","Dynamic Events","Pixel Art Style"]}],_1=({id:t,isAdmin:e,onStatusChange:n})=>{const[r,s]=j.useState("active"),[i,o]=j.useState(!0);j.useEffect(()=>{(async()=>{const m=await P0(t);s(m==="maintenance"||m==="development"?m:"active"),o(!1),n(m||"active")})()},[t]);const a=async d=>{if(d.stopPropagation(),!e)return;let m="active";r==="active"?m="maintenance":r==="maintenance"?m="development":m="active",s(m),n(m),await M0(t,m)};if(i)return l.jsx("div",{className:"w-16 h-5 bg-slate-100 rounded-full animate-pulse"});const c={active:{color:"bg-green-100 text-green-700 border-green-200",icon:l.jsx(_s,{className:"w-3 h-3"}),label:"Active"},maintenance:{color:"bg-orange-100 text-orange-700 border-orange-200",icon:l.jsx(ou,{className:"w-3 h-3"}),label:"Maintenance"},development:{color:"bg-blue-100 text-blue-700 border-blue-200",icon:l.jsx(ET,{className:"w-3 h-3"}),label:"Building"}}[r];return l.jsxs("button",{onClick:a,disabled:!e,className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border transition-all ${c.color} ${e?"cursor-pointer hover:brightness-95 active:scale-95":"cursor-default"}`,title:e?"Klik untuk ubah status":"",children:[c.icon,c.label]})},xj=({project:t,isAdmin:e,onClick:n})=>{const[r,s]=j.useState("active"),i=c=>{s(c)},a={blue:{bg:"bg-blue-50 border border-blue-100",text:"text-blue-600",hoverBorder:"group-hover:border-blue-300",glow:"bg-blue-500/10"},pink:{bg:"bg-pink-50 border border-pink-100",text:"text-pink-600",hoverBorder:"group-hover:border-pink-300",glow:"bg-pink-500/10"},purple:{bg:"bg-purple-50 border border-purple-100",text:"text-purple-600",hoverBorder:"group-hover:border-purple-300",glow:"bg-purple-500/10"}}[t.theme],u=r!=="active"&&!e;return l.jsxs("div",{onClick:n,className:`
                group relative bg-white rounded-[2rem] p-8 border transition-all duration-300 flex flex-col justify-between overflow-hidden h-full min-h-[320px]
                ${u?"cursor-default opacity-80 grayscale-[0.5]":"cursor-pointer hover:shadow-xl hover:-translate-y-1"}
                ${u?"border-slate-100":`border-slate-200 ${a.hoverBorder}`}
            `,children:[l.jsx("div",{className:`absolute top-0 right-0 w-48 h-48 rounded-full blur-3xl transition-opacity duration-500 opacity-0 group-hover:opacity-100 pointer-events-none translate-x-10 -translate-y-10 ${a.glow}`}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-start mb-6",children:[l.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-transform duration-500 group-hover:scale-110 ${a.bg} ${a.text}`,children:l.jsx("img",{src:t.iconUrl,alt:t.defaultTitle,className:"w-8 h-8 object-contain"})}),l.jsx(_1,{id:t.statusId,isAdmin:e,onStatusChange:i})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx(mt,{id:t.titleId,defaultText:t.defaultTitle,isAdmin:e,tag:"h3",className:`text-2xl font-black text-slate-900 mb-3 tracking-tight ${!u&&`group-hover:${a.text} transition-colors`}`}),l.jsx(mt,{id:t.descId,defaultText:t.defaultDesc,isAdmin:e,tag:"p",multiline:!0,className:"text-slate-500 text-sm leading-relaxed font-medium line-clamp-3"})]})]}),l.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[l.jsx("span",{className:`text-xs font-bold uppercase tracking-wider transition-colors ${u?"text-slate-400":`${a.text}`}`,children:"See Details"}),l.jsx("div",{className:`p-2 rounded-full transition-all ${u?"bg-slate-100 text-slate-300":`bg-slate-50 ${a.text} group-hover:bg-white group-hover:shadow-md`}`,children:l.jsx(sa,{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform"})})]})]})},wj=({project:t,isAdmin:e})=>{const n=rs(),[r,s]=j.useState("active"),i=d=>{s(d)},o=r!=="active"&&!e,u={blue:{bg:"bg-blue-50",text:"text-blue-600",btn:"bg-blue-600 hover:bg-blue-700",gradient:"from-blue-500 to-cyan-500"},pink:{bg:"bg-pink-50",text:"text-pink-600",btn:"bg-pink-600 hover:bg-pink-700",gradient:"from-pink-500 to-rose-500"},purple:{bg:"bg-purple-50",text:"text-purple-600",btn:"bg-purple-600 hover:bg-purple-700",gradient:"from-purple-500 to-indigo-500"}}[t.theme],c=()=>{if(o){We(r==="maintenance"?"Aplikasi sedang dalam perbaikan (Maintenance).":"Aplikasi masih dalam tahap pengembangan.");return}t.appPath?n(t.appPath):We("Link aplikasi belum tersedia.")};return l.jsx("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:l.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-12",children:[l.jsxs("button",{onClick:()=>n("/projects"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[l.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:l.jsx(Nr,{className:"w-4 h-4"})}),"Kembali ke Daftar"]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${u.bg} ${u.text}`,children:l.jsx("img",{src:t.iconUrl,alt:"Icon",className:"w-8 h-8 object-contain"})}),l.jsx(_1,{id:t.statusId,isAdmin:e,onStatusChange:i})]}),l.jsx(mt,{id:t.titleId,defaultText:t.defaultTitle,isAdmin:e,tag:"h1",className:"text-4xl md:text-5xl font-black text-slate-900 mb-6 tracking-tight"}),l.jsx("p",{className:"text-lg text-slate-600 leading-relaxed mb-8",children:t.fullDesc}),l.jsxs("div",{className:"space-y-3 mb-10",children:[l.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Fitur Utama"}),t.features.map((d,m)=>l.jsxs("div",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[l.jsx("div",{className:`w-5 h-5 rounded-full ${u.bg} ${u.text} flex items-center justify-center shrink-0`,children:l.jsx(_s,{className:"w-3 h-3"})}),d]},m))]}),l.jsxs("button",{onClick:c,disabled:o,className:`
                                px-8 py-4 rounded-2xl font-bold text-white text-lg shadow-xl shadow-slate-200/50 flex items-center gap-3 transition-all active:scale-95
                                ${o?"bg-slate-300 cursor-not-allowed":`${u.btn} hover:-translate-y-1`}
                            `,children:[o?"Terkunci":t.buttonText,!o&&l.jsx(sa,{className:"w-5 h-5"})]})]}),l.jsxs("div",{className:`aspect-square rounded-[3rem] bg-gradient-to-br ${u.gradient} opacity-90 relative overflow-hidden shadow-2xl flex items-center justify-center`,children:[l.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-white/20 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-white/10 rounded-full blur-2xl"}),l.jsxs("div",{className:"relative z-10 bg-white/10 backdrop-blur-md border border-white/20 p-8 rounded-3xl shadow-lg max-w-xs text-white/90 text-center",children:[l.jsx("img",{src:t.iconUrl,className:"w-20 h-20 mx-auto mb-4 opacity-90 drop-shadow-md"}),l.jsx("p",{className:"font-bold text-lg",children:"Preview Mode"}),l.jsx("p",{className:"text-xs opacity-70 mt-2",children:"Gambaran visual aplikasi saat dijalankan."})]})]})]})]})})},uw=({isAdmin:t})=>{const e=rs(),{projectId:n}=fT(),r=lw.find(s=>s.id===n);return n&&r?l.jsx(wj,{project:r,isAdmin:t}):l.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-12 gap-4",children:[l.jsxs("div",{children:[l.jsx(mt,{id:"projects_title",defaultText:"Selected Projects",isAdmin:t,tag:"h1",className:"text-4xl md:text-5xl font-black text-slate-900 mb-3 tracking-tighter"}),l.jsx(mt,{id:"projects_subtitle",defaultText:"Kumpulan tools dan simulasi interaktif.",isAdmin:t,tag:"p",className:"text-slate-500 text-lg max-w-2xl"})]}),t&&l.jsxs("div",{className:"bg-slate-900 text-white px-4 py-2 rounded-lg text-xs font-bold flex items-center gap-2 shadow-lg",children:[l.jsx(pd,{className:"w-4 h-4"}),"Admin Mode: Klik status badge untuk ubah."]})]}),l.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl p-5 mb-12 flex gap-4 items-start shadow-sm",children:[l.jsx("div",{className:"p-2 bg-amber-100 rounded-xl text-amber-600 shrink-0",children:l.jsx(ou,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx(mt,{id:"projects_disclaimer_title",defaultText:"Info Pengunjung",isAdmin:t,tag:"h4",className:"font-bold text-amber-900 text-sm uppercase tracking-wide mb-1"}),l.jsx(mt,{id:"projects_disclaimer_text",defaultText:"Project dengan label 'Maintenance' atau 'Building' tidak bisa diakses sementara waktu demi alasan kestabilan. Silakan coba project yang berstatus 'Active'.",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-amber-700/80 leading-relaxed font-medium"})]})]}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:lw.map(s=>l.jsx(xj,{project:s,isAdmin:t,onClick:()=>e(`/projects/${s.id}`)},s.id))})]})},Iu=({isOpen:t,title:e,description:n,onConfirm:r,onCancel:s,confirmText:i="Yes, Leave"})=>t?l.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:l.jsx("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl transform transition-all scale-100 animate-fade-in-up border border-slate-100",children:l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-amber-50 text-amber-500 rounded-full flex items-center justify-center mb-4 border border-amber-100",children:l.jsx(ou,{className:"w-6 h-6"})}),l.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:e}),l.jsx("p",{className:"text-sm text-slate-500 mb-6 leading-relaxed",children:n}),l.jsxs("div",{className:"flex w-full gap-3",children:[l.jsx("button",{onClick:s,className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 rounded-xl font-medium hover:bg-slate-50 transition-colors text-sm",children:"Cancel"}),l.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-colors shadow-lg shadow-red-500/20 text-sm",children:i})]})]})})}):null,cw=({isAdmin:t})=>{const{id:e}=fT(),n=rs(),[r,s]=j.useState([]),[i,o]=j.useState(!0),[a,u]=j.useState("list"),[c,d]=j.useState(null),m=6,[g,y]=j.useState(m),[w,x]=j.useState("add"),[_,v]=j.useState({}),[b,T]=j.useState(!1),[R,L]=j.useState([]),[U,S]=j.useState(null),[C,N]=j.useState(null),[M,V]=j.useState(""),[P,D]=j.useState(""),[k,G]=j.useState(null),[ye,re]=j.useState(null),[ne,Y]=j.useState({x:0,y:0,visible:!1}),[ue,q]=j.useState(!1),[$,ce]=j.useState("url"),[X,Z]=j.useState(""),Ae=j.useRef(null),_e=j.useRef(null);j.useEffect(()=>{e?(u("detail"),o(!0),J3(e).then(se=>{se?d(se):(We("Artikel tidak ditemukan."),n("/blog",{replace:!0})),o(!1)})):a!=="editor"&&(u("list"),Ce())},[e]);const Ce=async()=>{o(!0);try{const se=await x1();s(se)}catch(se){console.error("Failed to fetch blog posts",se)}finally{o(!1)}};j.useEffect(()=>{if(a==="editor"){const se=_.content||"";if(!se){L([{id:Date.now().toString(),type:"text",content:""}]);return}const de=/(!image\(.*?\))/g,De=se.split(de),$e=De.map(et=>{const Mt=et.match(/^!image\((.*?)\)$/);return Mt?{id:Math.random().toString(36).substr(2,9),type:"image",content:Mt[1]}:{id:Math.random().toString(36).substr(2,9),type:"text",content:et}}).filter(et=>et.type==="image"||et.content.length>0||De.length===1);$e.length===0&&$e.push({id:Date.now().toString(),type:"text",content:""}),L($e)}},[a,_.id]);const Se=se=>{se&&(se.style.height="auto",se.style.height=`${se.scrollHeight}px`)};j.useEffect(()=>{a==="editor"&&(Se(Ae.current),Se(_e.current))},[a,_.title,_.subtitle]),j.useEffect(()=>{const se=()=>{ne.visible&&Y({...ne,visible:!1})};return window.addEventListener("click",se),()=>window.removeEventListener("click",se)},[ne]);const Ye=()=>{y(se=>se+m)},ze=()=>{y(m);const se=document.getElementById("blog-top");se&&se.scrollIntoView({behavior:"smooth"})},_t=()=>{x("add"),v({title:"",subtitle:"",category:"Category",date:new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),readTime:"5 min read",author:"Fanra",image:"",content:"",timestamp:Date.now(),sources:[]}),V(""),D(""),u("editor"),window.scrollTo(0,0)},lt=(se,de)=>{se.stopPropagation(),x("edit"),v({...de,sources:de.sources||[]}),V(""),D(""),u("editor"),window.scrollTo(0,0)},A=(se,de)=>{se.stopPropagation(),G(de)},oe=async()=>{if(!k)return;const se=k;re(se),G(null);try{await X3(se),s(de=>de.filter(De=>De.id!==se)),(c==null?void 0:c.id)===se&&n("/blog"),We("Artikel berhasil dihapus.")}catch{We("Gagal menghapus artikel."),Ce()}finally{re(null)}},Q=async()=>{if(!_.title){We("Judul wajib diisi.");return}const se=R.map(de=>de.type==="image"?`

!image(${de.content})

`:de.content).join("").trim();if(!se){We("Konten tidak boleh kosong.");return}T(!0);try{const de={..._,content:se,image:_.image||"https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop"};w==="add"?await Y3(de):_.id&&await Q3(_.id,de),We(w==="add"?"Artikel berhasil diterbitkan!":"Artikel berhasil diperbarui!"),n("/blog")}catch(de){console.error(de),We("Gagal menyimpan artikel.")}finally{T(!1)}},B=()=>{if(!M.trim()||!P.trim())return;const se={label:M.trim(),url:P.trim()},de=[..._.sources||[],se];v(De=>({...De,sources:de})),V(""),D("")},O=se=>{const de=(_.sources||[]).filter((De,$e)=>$e!==se);v(De=>({...De,sources:de}))},H=se=>{var De;const de=(De=se.target.files)==null?void 0:De[0];if(de){const $e=new FileReader;$e.onloadend=()=>{const et=$e.result;v(Mt=>({...Mt,image:et}))},$e.readAsDataURL(de)}},ie=se=>{n(`/blog/${se.id}`)},ae=(se,de)=>{se.preventDefault();const De=se.target;S(de),N(De.selectionStart),Y({x:se.pageX,y:se.pageY,visible:!0})},J=()=>{Y({...ne,visible:!1}),Z(""),ce("url"),q(!0)},fe=se=>{var De;const de=(De=se.target.files)==null?void 0:De[0];if(de){const $e=new FileReader;$e.onloadend=()=>{const et=$e.result;Z(et)},$e.readAsDataURL(de)}},xe=()=>{if(!X||!U){q(!1);return}const se=R.findIndex(Wt=>Wt.id===U);if(se===-1)return;const de=R[se],De=de.content.slice(0,C||de.content.length),$e=de.content.slice(C||de.content.length),et=[...R];et[se]={...de,content:De};const Mt={id:Date.now().toString(),type:"image",content:X},gt={id:(Date.now()+1).toString(),type:"text",content:$e};et.splice(se+1,0,Mt,gt),L(et),q(!1),Z("")},me=(se,de)=>{L(De=>De.map($e=>$e.id===se?{...$e,content:de}:$e))},we=se=>{confirm("Hapus elemen ini?")&&L(de=>de.filter((De,$e)=>$e!==se))},Ne=se=>se?se.split(`
`).map((de,De)=>{if(!de.trim())return l.jsx("br",{},De);const $e=de.match(/^!image\((.*?)\)$/);if($e)return l.jsx("div",{className:"my-8",children:l.jsx("img",{src:$e[1],alt:"Content Illustration",className:"w-full rounded-xl shadow-lg border border-slate-100"})},De);const et=/(\\\(.*?\\\)|\\\[.*?\\\])/g,Mt=de.split(et);return l.jsx("p",{className:"mb-6 text-slate-700 leading-8 text-lg",children:Mt.map((gt,Wt)=>{if(gt.startsWith("\\(")&&gt.endsWith("\\)")){const ln=gt.slice(2,-2);try{if(window.katex){const Dt=window.katex.renderToString(ln,{throwOnError:!1,displayMode:!1});return l.jsx("span",{dangerouslySetInnerHTML:{__html:Dt},className:"mx-1"},Wt)}return l.jsx("span",{className:"font-mono bg-yellow-100 px-1 rounded",children:ln},Wt)}catch{return gt}}if(gt.startsWith("\\[")&&gt.endsWith("\\]")){const ln=gt.slice(2,-2);try{if(window.katex){const Dt=window.katex.renderToString(ln,{throwOnError:!1,displayMode:!0});return l.jsx("div",{dangerouslySetInnerHTML:{__html:Dt},className:"my-4 text-center overflow-x-auto py-2"},Wt)}return l.jsx("div",{className:"font-mono bg-yellow-100 p-2 rounded my-2 text-center",children:ln},Wt)}catch{return gt}}return l.jsx("span",{children:gt},Wt)})},De)}):null,Le=r.slice(0,g),St=g<r.length,bn=g>m,Bt=()=>c?r.filter(se=>se.id!==c.id).slice(0,2):[];if(a==="editor")return l.jsxs("div",{className:"min-h-screen bg-slate-100 animate-fade-in relative pb-20",children:[l.jsxs("div",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur-md border-b border-slate-200 px-6 py-4 flex items-center justify-between shadow-sm",children:[l.jsxs("button",{onClick:()=>n("/blog"),className:"flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 transition-colors px-4 py-2 rounded-xl hover:bg-slate-100 border border-transparent hover:border-slate-200",children:[l.jsx(Nr,{className:"w-4 h-4"}),"Cancel"]}),l.jsx("span",{className:"text-sm font-black text-slate-400 uppercase tracking-widest hidden md:block",children:w==="add"?"Creating New Story":"Editing Mode"}),l.jsxs("button",{onClick:Q,disabled:b,className:"bg-slate-900 text-white px-6 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[b?l.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):l.jsx(_s,{className:"w-4 h-4"}),b?"Publishing...":"Publish"]})]}),l.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12",children:l.jsxs("div",{className:"bg-white shadow-xl shadow-slate-200/50 rounded-3xl p-8 md:p-12 border border-slate-200",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-5 mb-8 p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[l.jsxs("div",{className:"flex flex-col gap-1.5",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Kategori"}),l.jsx("input",{type:"text",value:_.category,onChange:se=>v(de=>({...de,category:se.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors",placeholder:"Science..."})]}),l.jsxs("div",{className:"flex flex-col gap-1.5",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Penulis"}),l.jsx("input",{type:"text",value:_.author,onChange:se=>v(de=>({...de,author:se.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]}),l.jsxs("div",{className:"flex flex-col gap-1.5",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Waktu Baca"}),l.jsx("input",{type:"text",value:_.readTime,onChange:se=>v(de=>({...de,readTime:se.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]}),l.jsxs("div",{className:"flex flex-col gap-1.5",children:[l.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Tanggal"}),l.jsx("input",{type:"text",value:_.date,onChange:se=>v(de=>({...de,date:se.target.value})),className:"w-full bg-white border border-slate-200 px-3 py-2 rounded-lg text-sm font-bold text-slate-800 focus:border-slate-900 outline-none transition-colors"})]})]}),l.jsxs("div",{className:"space-y-6 mb-10 pb-10 border-b border-dashed border-slate-200",children:[l.jsx("textarea",{ref:Ae,rows:1,value:_.title||"",onChange:se=>v(de=>({...de,title:se.target.value})),className:"w-full text-4xl md:text-5xl font-black text-slate-900 bg-transparent border-b-2 border-transparent focus:border-slate-200 outline-none placeholder:text-slate-300 resize-none overflow-hidden leading-tight py-2 transition-colors",placeholder:"Judul Utama Artikel..."}),l.jsx("textarea",{ref:_e,rows:1,value:_.subtitle||"",onChange:se=>v(de=>({...de,subtitle:se.target.value})),className:"w-full text-xl font-medium text-slate-500 bg-transparent border-b border-transparent focus:border-slate-200 outline-none placeholder:text-slate-300 resize-none overflow-hidden leading-relaxed py-2 transition-colors",placeholder:"Tulis subtitle atau ringkasan menarik di sini..."})]}),l.jsxs("div",{className:"mb-10 group relative p-4 rounded-3xl border-2 border-dashed border-slate-200 hover:border-blue-400 transition-colors bg-slate-50/50",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-3 text-center",children:"Cover Image"}),l.jsxs("div",{className:"w-full aspect-video rounded-2xl overflow-hidden shadow-sm bg-white border border-slate-100 flex flex-col items-center justify-center relative",children:[_.image?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:_.image,alt:"Cover",className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:l.jsxs("div",{className:"text-white font-bold flex items-center gap-2",children:[l.jsx(fd,{className:"w-5 h-5"})," Ganti Gambar"]})})]}):l.jsxs("div",{className:"text-center p-8",children:[l.jsx(ra,{className:"w-8 h-8 text-slate-300 mx-auto mb-3"}),l.jsx("p",{className:"text-slate-400 font-bold text-sm",children:"Upload Cover Image"})]}),l.jsx("input",{type:"file",accept:"image/*",onChange:H,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),l.jsx("input",{type:"text",value:_.image||"",onChange:se=>v(de=>({...de,image:se.target.value})),placeholder:"...atau tempel URL gambar disini",className:"w-full mt-4 text-xs text-slate-500 bg-white border border-slate-200 rounded-lg px-3 py-2 outline-none focus:border-blue-400 transition-colors text-center"})]}),l.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-100 p-4 rounded-xl text-xs text-blue-800 flex flex-col gap-2",children:[l.jsxs("p",{className:"font-bold flex items-center gap-2",children:[l.jsx(Mv,{className:"w-4 h-4"})," Panduan Editor:"]}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 opacity-80",children:[l.jsxs("li",{children:["Gunakan ",l.jsx("code",{children:"\\( rumus \\)"})," untuk matematika inline."]}),l.jsxs("li",{children:["Gunakan ",l.jsx("code",{children:"\\[ rumus \\]"})," untuk matematika blok."]}),l.jsxs("li",{children:[l.jsx("b",{children:"Klik Kanan"})," di area teks untuk menyisipkan gambar di tengah paragraf."]})]})]}),l.jsxs("div",{className:"relative space-y-2",children:[R.map((se,de)=>l.jsx("div",{className:"relative group/block",children:se.type==="text"?l.jsx("textarea",{value:se.content,onChange:De=>{me(se.id,De.target.value),Se(De.target)},onFocus:De=>Se(De.target),onContextMenu:De=>ae(De,se.id),className:"w-full text-lg leading-9 text-slate-800 bg-transparent border-none outline-none placeholder:text-slate-300 resize-none font-serif transition-colors overflow-hidden focus:bg-slate-50 rounded-lg px-2",placeholder:de===0?"Mulai menulis cerita Anda di sini...":"Lanjutkan menulis...",rows:1}):l.jsxs("div",{className:"relative my-4 group/image",children:[l.jsx("div",{className:"rounded-xl overflow-hidden shadow-lg border border-slate-200 bg-slate-50",children:l.jsx("img",{src:se.content,alt:"Inline",className:"w-full h-auto object-contain max-h-[500px]"})}),l.jsx("button",{onClick:()=>we(de),className:"absolute top-3 right-3 bg-red-500 text-white p-2 rounded-full shadow-md opacity-0 group-hover/image:opacity-100 transition-opacity hover:bg-red-600 hover:scale-110",title:"Hapus Gambar",children:l.jsx(Jr,{className:"w-4 h-4"})})]})},se.id)),ne.visible&&l.jsx("div",{className:"fixed z-50 bg-white border border-slate-200 rounded-lg shadow-xl py-1 w-48 animate-fade-in",style:{top:ne.y,left:ne.x},children:l.jsxs("button",{onClick:J,className:"w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 hover:text-blue-600 flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 bg-slate-100 rounded flex items-center justify-center text-[10px]",children:""}),"Sisipkan Gambar"]})}),ue&&l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-2xl w-full max-w-md animate-fade-in-up border border-slate-100",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Sisipkan Gambar"}),l.jsxs("div",{className:"flex gap-2 mb-4 bg-slate-100 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>ce("url"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${$==="url"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Link URL"}),l.jsx("button",{onClick:()=>ce("upload"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${$==="upload"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Upload File"})]}),$==="url"?l.jsx("input",{type:"text",value:X,onChange:se=>Z(se.target.value),placeholder:"https://example.com/image.jpg",className:"w-full border border-slate-200 rounded-xl px-4 py-3 text-sm mb-6 outline-none focus:border-slate-900 focus:ring-2 focus:ring-slate-900/10 bg-slate-50 text-slate-900 placeholder:text-slate-400",autoFocus:!0}):l.jsxs("div",{className:"mb-6",children:[l.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-slate-300 border-dashed rounded-2xl cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors",children:[l.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[l.jsx(ra,{className:"w-8 h-8 text-slate-400 mb-2"}),l.jsx("p",{className:"text-xs text-slate-500 font-bold",children:"Klik untuk pilih file"}),l.jsx("p",{className:"text-[10px] text-slate-400",children:"JPG, PNG, WEBP (Max 2MB)"})]}),l.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:fe})]}),X&&l.jsx("div",{className:"mt-2 text-center",children:l.jsxs("p",{className:"text-xs text-green-600 font-bold flex items-center justify-center gap-1",children:[l.jsx(_s,{className:"w-3 h-3"})," File siap disisipkan"]})})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>q(!1),className:"px-5 py-2.5 text-xs font-bold text-slate-500 hover:bg-slate-100 rounded-xl transition-colors",children:"Batal"}),l.jsx("button",{onClick:xe,className:"px-6 py-2.5 text-xs font-bold bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-900/20 active:scale-95",children:"Sisipkan"})]})]})})]}),l.jsxs("div",{className:"mt-16 pt-10 border-t border-slate-200",children:[l.jsxs("h4",{className:"text-sm font-bold text-slate-800 uppercase tracking-widest mb-6 flex items-center gap-2",children:[l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/2420/2420165.png",alt:"Sources",className:"w-4 h-4 object-contain opacity-60"}),"Referensi & Sumber"]}),l.jsx("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-200 mb-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Nama Sumber"}),l.jsx("input",{type:"text",value:M,onChange:se=>V(se.target.value),placeholder:"Contoh: Wikipedia",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"URL Link"}),l.jsx("input",{type:"text",value:P,onChange:se=>D(se.target.value),placeholder:"https://...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm focus:border-slate-900 outline-none"})]}),l.jsx("div",{children:l.jsx("button",{onClick:B,disabled:!M||!P,className:"w-full py-2 bg-slate-900 text-white rounded-lg text-sm font-bold hover:bg-slate-800 disabled:opacity-50 transition-all",children:"+ Tambah"})})]})}),_.sources&&_.sources.length>0&&l.jsx("div",{className:"space-y-2",children:_.sources.map((se,de)=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-xl hover:border-slate-300 transition-colors group",children:[l.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center shrink-0",children:l.jsx(hd,{className:"w-4 h-4"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:se.label}),l.jsx("p",{className:"text-xs text-slate-400 truncate",children:se.url})]})]}),l.jsx("button",{onClick:()=>O(de),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:l.jsx(Jr,{className:"w-4 h-4"})})]},de))}),(!_.sources||_.sources.length===0)&&l.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"Belum ada sumber yang ditambahkan."})]})]})})]});if(a==="detail"&&c){const se=Bt();return l.jsx("article",{className:"min-h-screen bg-white animate-fade-in pb-20",children:l.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-12",children:[l.jsxs("button",{onClick:()=>n("/blog"),className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[l.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:l.jsx(Nr,{className:"w-4 h-4"})}),"Kembali"]}),l.jsxs("header",{className:"mb-12",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-bold uppercase tracking-wider",children:c.category}),l.jsx("span",{className:"text-slate-400 text-sm font-medium",children:c.readTime})]}),l.jsx("h1",{className:"text-3xl md:text-5xl font-black text-slate-900 mb-6 leading-tight tracking-tight",children:c.title}),l.jsx("p",{className:"text-lg md:text-xl text-slate-500 leading-relaxed font-medium",children:c.subtitle}),l.jsxs("div",{className:"flex items-center gap-4 mt-8 pt-8 border-t border-slate-100",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-900 text-white flex items-center justify-center font-bold text-sm",children:c.author.charAt(0)}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-bold text-slate-900",children:c.author}),l.jsx("p",{className:"text-xs text-slate-500",children:c.date})]})]})]}),l.jsx("figure",{className:"mb-12",children:l.jsx("img",{src:c.image,alt:c.title,className:"w-full aspect-video object-cover rounded-2xl shadow-lg border border-slate-100"})}),l.jsx("div",{className:"prose prose-lg prose-slate max-w-none mb-16 font-serif",children:Ne(c.content)}),c.sources&&c.sources.length>0&&l.jsxs("div",{className:"border-t border-slate-100 pt-10 mb-16",children:[l.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[l.jsx(hd,{className:"w-4 h-4"}),"Sumber Referensi"]}),l.jsx("ul",{className:"space-y-3",children:c.sources.map((de,De)=>l.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[l.jsxs("span",{className:"text-slate-300 font-bold select-none",children:[De+1,"."]}),l.jsx("a",{href:de.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline font-medium break-all",children:de.label})]},De))})]}),se.length>0&&l.jsxs("div",{className:"border-t-2 border-slate-100 pt-12",children:[l.jsxs("h3",{className:"text-xl font-black text-slate-900 mb-6 flex items-center gap-3",children:[l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1170/1170221.png",alt:"Read Also",className:"w-6 h-6 object-contain opacity-60"}),"Baca Juga"]}),l.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:se.map(de=>l.jsxs("div",{onClick:()=>ie(de),className:"group cursor-pointer bg-slate-50 rounded-2xl p-4 border border-slate-100 hover:border-slate-300 hover:bg-white hover:shadow-lg transition-all",children:[l.jsx("div",{className:"aspect-video rounded-xl overflow-hidden mb-4 bg-slate-200",children:l.jsx("img",{src:de.image,alt:de.title,className:"w-full h-full object-cover opacity-90 group-hover:scale-105 transition-transform duration-500"})}),l.jsx("h4",{className:"font-bold text-slate-900 leading-tight mb-2 group-hover:text-blue-600 line-clamp-2",children:de.title}),l.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:de.subtitle})]},de.id))})]})]})})}return l.jsxs("div",{id:"blog-top",className:"max-w-7xl mx-auto px-6 py-12 animate-fade-in relative pb-24",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-16 gap-6",children:[l.jsxs("div",{className:"max-w-2xl",children:[l.jsx(mt,{id:"blog_header_title",defaultText:"Insights & Stories",isAdmin:t,tag:"h1",className:"text-4xl md:text-6xl font-black text-slate-900 mb-6 tracking-tight"}),l.jsx(mt,{id:"blog_header_desc",defaultText:"Kumpulan pemikiran mendalam, fakta sains, dan eksplorasi ide yang mungkin bikin lo begadang mikirin alam semesta.",isAdmin:t,tag:"p",multiline:!0,className:"text-lg text-slate-500 leading-relaxed"})]}),t&&l.jsxs("button",{onClick:_t,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95 whitespace-nowrap",children:[l.jsx(Mv,{className:"w-5 h-5"}),"Write Story"]})]}),l.jsx(Iu,{isOpen:!!k,title:"Hapus Artikel?",description:"Artikel ini akan dihapus permanen. Tindakan ini tidak bisa dibatalkan.",confirmText:"Ya, Hapus",onConfirm:oe,onCancel:()=>G(null)}),i&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[l.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),l.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Artikel..."})]}),!i&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[Le.map(se=>l.jsxs("div",{onClick:()=>ie(se),className:"group cursor-pointer flex flex-col h-full relative",children:[l.jsxs("div",{className:"relative aspect-[4/3] bg-slate-100 rounded-[2rem] overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500 border border-slate-200",children:[l.jsx("img",{src:se.image,alt:se.title,loading:"lazy",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"}),t&&l.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2",children:[l.jsx("button",{onClick:de=>lt(de,se),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-blue-600 hover:bg-white transition-colors",children:l.jsx(fd,{className:"w-4 h-4"})}),l.jsx("button",{onClick:de=>A(de,se.id),className:"p-2 bg-white/90 backdrop-blur text-slate-700 rounded-full shadow-md hover:text-red-500 hover:bg-white transition-colors",children:ye===se.id?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):l.jsx(Jr,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 to-transparent pointer-events-none"}),l.jsx("div",{className:"absolute top-6 left-6",children:l.jsx("span",{className:"bg-white/90 backdrop-blur text-slate-900 text-[10px] font-bold px-3 py-1.5 rounded-full uppercase tracking-wider shadow-sm",children:se.category})})]}),l.jsxs("div",{className:"flex-1 flex flex-col",children:[l.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium text-slate-400 mb-3",children:[l.jsx("span",{children:se.date}),l.jsx("span",{children:""}),l.jsx("span",{children:se.readTime})]}),l.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3 leading-tight group-hover:text-blue-600 transition-colors",children:se.title}),l.jsx("p",{className:"text-slate-500 line-clamp-3 leading-relaxed mb-6",children:se.subtitle}),l.jsxs("div",{className:"mt-auto flex items-center text-sm font-bold text-slate-900 group-hover:translate-x-2 transition-transform duration-300",children:["Baca Selengkapnya ",l.jsx(sa,{className:"w-4 h-4 ml-2"})]})]})]},se.id)),r.length<=m&&l.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-[2rem] flex flex-col items-center justify-center p-8 text-center min-h-[400px]",children:[l.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4 text-slate-300",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/3018/3018445.png",alt:"Coming Soon",className:"w-8 h-8 object-contain opacity-50"})}),l.jsx(mt,{id:"blog_placeholder_title",defaultText:"Tulisan Mendatang",isAdmin:t,tag:"h3",className:"font-bold text-slate-400 mb-2"}),l.jsx(mt,{id:"blog_placeholder_desc",defaultText:"Artikel tentang AI Consciousness, Sejarah Internet, dan Psikologi Warna sedang ditulis...",isAdmin:t,tag:"p",multiline:!0,className:"text-sm text-slate-400 max-w-xs mx-auto"})]})]}),l.jsxs("div",{className:"flex flex-col items-center gap-3 mt-16 mb-8",children:[St&&l.jsxs("button",{onClick:Ye,className:"px-6 py-3 rounded-full bg-white border border-slate-200 text-slate-700 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Artikel Lainnya",l.jsx(Xn,{className:"w-4 h-4"})]}),bn&&l.jsxs("button",{onClick:ze,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Tutup / Sembunyikan",l.jsx(Xn,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]})},_j=({isAdmin:t})=>{const[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,o]=j.useState("All"),[a,u]=j.useState(null),c=9,[d,m]=j.useState(c),[g,y]=j.useState(!1),[w,x]=j.useState("add"),[_,v]=j.useState({}),[b,T]=j.useState(!1),[R,L]=j.useState(null),[U,S]=j.useState(null),C=async()=>{s(!0);try{const X=await v1();n(X)}catch(X){console.error("Failed to load photos",X)}finally{s(!1)}};j.useEffect(()=>{C()},[]),j.useEffect(()=>{m(c)},[i]);const N=["All",...Array.from(new Set(e.map(X=>X.year))).sort().reverse()],M=i==="All"?e:e.filter(X=>X.year===i),V=M.slice(0,d),P=d<M.length,D=d>c,k=V.reduce((X,Z)=>(X[Z.year]||(X[Z.year]=[]),X[Z.year].push(Z),X),{}),G=Object.keys(k).sort().reverse(),ye=()=>{m(X=>X+c)},re=()=>{m(c);const X=document.getElementById("gallery-top-anchor");X&&X.scrollIntoView({behavior:"smooth"})},ne=()=>{x("add"),v({src:"",caption:"",month:"Januari",year:new Date().getFullYear().toString(),timestamp:Date.now()}),y(!0)},Y=(X,Z)=>{X.stopPropagation(),x("edit"),v({...Z}),y(!0)},ue=(X,Z)=>{X.stopPropagation(),Z&&S(Z)},q=async()=>{if(!U)return;const X=U;L(X),S(null);try{await W3(X),n(Z=>Z.filter(Ae=>Ae.id!==X)),We("Foto berhasil dihapus.")}catch(Z){console.error(Z),We("Gagal menghapus foto. Cek koneksi internet."),C()}finally{L(null)}},$=async()=>{if(!_.src||!_.year){We("Gambar dan Tahun wajib diisi.");return}T(!0);try{w==="add"?await $3(_):_.id&&await q3(_.id,_),y(!1),We(w==="add"?"Foto ditambahkan!":"Foto diperbarui!"),C()}catch(X){console.error(X),We("Gagal menyimpan data.")}finally{T(!1)}},ce=X=>{var Ae;const Z=(Ae=X.target.files)==null?void 0:Ae[0];if(Z){const _e=new FileReader;_e.onloadend=()=>{const Ce=_e.result;v(Se=>({...Se,src:Ce}))},_e.readAsDataURL(Z)}};return l.jsxs("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:[l.jsx(Iu,{isOpen:!!U,title:"Hapus Memori?",description:"Foto ini akan dihapus secara permanen dari galeri. Tindakan ini tidak dapat dibatalkan.",confirmText:"Ya, Hapus",onConfirm:q,onCancel:()=>S(null)}),l.jsxs("div",{id:"gallery-top-anchor",className:"max-w-7xl mx-auto px-6 pt-12 pb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-slate-900 mb-4 tracking-tight",children:["Visual ",l.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Diaries"})]}),l.jsx("p",{className:"text-lg text-slate-500 max-w-2xl leading-relaxed",children:"Koleksi momen acak, dikelompokkan berdasarkan waktu."})]}),t&&l.jsxs("button",{onClick:ne,className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg active:scale-95",children:[l.jsx(ra,{className:"w-5 h-5"}),"Add Memory"]})]}),l.jsx("div",{className:"flex flex-wrap gap-2 mt-8",children:N.map(X=>l.jsx("button",{onClick:()=>o(X),className:`px-5 py-2 rounded-full text-sm font-bold transition-all duration-300 ${i===X?"bg-slate-900 text-white shadow-lg shadow-slate-900/20":"bg-slate-50 text-slate-500 hover:bg-slate-100 hover:text-slate-900"}`,children:X},X))})]}),l.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r&&l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[l.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),l.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Galeri..."})]}),!r&&M.length===0&&l.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[l.jsx(Ig,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada foto di periode ini."})]}),!r&&V.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"space-y-16",children:G.map(X=>l.jsxs("div",{className:"animate-fade-in-up",children:[l.jsxs("div",{className:"flex items-center gap-6 mb-8 mt-4",children:[l.jsx("span",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tighter",children:X}),l.jsx("div",{className:"h-0.5 bg-slate-200 flex-1 rounded-full opacity-50"})]}),l.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-3 gap-6 space-y-6",children:k[X].map(Z=>l.jsxs("div",{className:"break-inside-avoid relative group cursor-pointer rounded-2xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-lg transition-all duration-300 transform translate-z-0",onClick:()=>u(Z),children:[l.jsx("img",{src:Z.src,alt:Z.caption,loading:"lazy",className:"w-full h-auto object-cover transform transition-transform duration-700 group-hover:scale-105"}),t&&l.jsxs("div",{className:"absolute top-3 right-3 z-20 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:Ae=>Y(Ae,Z),className:"p-2.5 bg-white text-slate-700 rounded-full shadow-md hover:bg-blue-50 hover:text-blue-600 transition-colors border border-slate-100",title:"Edit",children:l.jsx(fd,{className:"w-4 h-4"})}),l.jsx("button",{onClick:Ae=>ue(Ae,Z.id),disabled:R===Z.id,className:`p-2.5 bg-white rounded-full shadow-md transition-colors border border-slate-100 ${R===Z.id?"text-slate-300 cursor-wait":"text-red-500 hover:bg-red-50"}`,title:"Hapus",children:R===Z.id?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-red-500 rounded-full animate-spin"}):l.jsx(Jr,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),l.jsx("div",{className:"absolute bottom-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:l.jsx("span",{className:"bg-black/30 backdrop-blur-md text-white text-[10px] font-bold px-3 py-1.5 rounded-full border border-white/20 uppercase tracking-widest shadow-sm",children:Z.month})})]},Z.id||Z.src))})]},X))}),l.jsxs("div",{className:"flex flex-col items-center gap-3 mt-20 mb-8",children:[P&&l.jsxs("button",{onClick:ye,className:"px-6 py-3 rounded-full bg-white border border-slate-200 text-slate-700 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Momen Terdahulu",l.jsx(Xn,{className:"w-4 h-4"})]}),D&&l.jsxs("button",{onClick:re,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Tutup / Sembunyikan",l.jsx(Xn,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]}),a&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white/95 backdrop-blur-xl flex items-center justify-center p-4 animate-fade-in",onClick:()=>u(null),children:[l.jsx("button",{onClick:()=>u(null),className:"absolute top-6 left-6 z-10 p-3 bg-slate-100 hover:bg-slate-200 text-slate-800 rounded-full transition-all group shadow-sm border border-slate-200",children:l.jsx(Nr,{className:"w-6 h-6 group-hover:-translate-x-1 transition-transform"})}),l.jsxs("div",{className:"relative max-w-5xl w-full flex flex-col items-center gap-8",onClick:X=>X.stopPropagation(),children:[l.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-2xl max-h-[75vh] bg-slate-50",children:l.jsx("img",{src:a.src,alt:"Gallery View",className:"max-w-full max-h-[75vh] object-contain"})}),l.jsxs("div",{className:"text-center max-w-2xl px-4 animate-fade-in-up",children:[l.jsxs("p",{className:"text-lg md:text-xl text-slate-900 font-medium leading-relaxed",children:['"',a.caption,'"']}),l.jsx("div",{className:"mt-4 flex items-center justify-center gap-3",children:l.jsxs("div",{className:"inline-block px-3 py-1 bg-slate-100 rounded-full text-slate-600 text-xs font-bold uppercase tracking-widest border border-slate-200",children:[a.month," ",a.year]})})]})]})]}),g&&l.jsx("div",{className:"fixed inset-0 z-[120] bg-slate-900/40 backdrop-blur-md flex items-center justify-center p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl p-8 shadow-2xl animate-fade-in-up border border-slate-100 overflow-y-auto max-h-[90vh]",children:[l.jsxs("div",{className:"flex justify-between items-center mb-8",children:[l.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:w==="add"?"Tambah Memori":"Edit Memori"}),l.jsx("button",{onClick:()=>y(!1),className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-900 transition-colors",children:""})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Gambar"}),l.jsx("div",{className:"flex gap-3 mb-3",children:l.jsx("input",{type:"file",accept:"image/*",onChange:ce,className:"text-xs w-full file:mr-4 file:py-2.5 file:px-5 file:rounded-full file:border-0 file:text-xs file:font-bold file:bg-blue-50 file:text-blue-600 hover:file:bg-blue-100 transition-colors cursor-pointer bg-slate-50 rounded-xl p-1"})}),l.jsx("input",{type:"text",placeholder:"Atau tempel URL gambar...",value:_.src||"",onChange:X=>v(Z=>({...Z,src:X.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none placeholder:text-slate-400"}),_.src&&l.jsxs("div",{className:"mt-4 h-32 w-full rounded-xl overflow-hidden border border-slate-200 bg-slate-50 relative group",children:[l.jsx("img",{src:_.src,alt:"Preview",className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xs font-bold bg-black/50 px-3 py-1 rounded-full backdrop-blur-sm",children:"Preview"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Caption"}),l.jsx("textarea",{value:_.caption||"",onChange:X=>v(Z=>({...Z,caption:X.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none resize-none h-32 leading-relaxed placeholder:text-slate-400",placeholder:"Ceritakan momen ini..."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Bulan"}),l.jsxs("div",{className:"relative",children:[l.jsx("select",{value:_.month||"Januari",onChange:X=>v(Z=>({...Z,month:X.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none appearance-none font-medium",children:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"].map(X=>l.jsx("option",{value:X,children:X},X))}),l.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:l.jsx(Xn,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3 tracking-wide",children:"Tahun"}),l.jsx("input",{type:"number",value:_.year||"",onChange:X=>v(Z=>({...Z,year:X.target.value})),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none font-medium"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 mt-10 pt-6 border-t border-slate-100",children:[l.jsx("button",{onClick:()=>y(!1),className:"px-6 py-3 text-slate-500 hover:text-slate-800 hover:bg-slate-50 rounded-xl text-sm font-bold transition-all",children:"Batal"}),l.jsxs("button",{onClick:$,disabled:b,className:"px-8 py-3 bg-slate-900 text-white rounded-xl text-sm font-bold hover:bg-slate-800 disabled:opacity-50 transition-all shadow-lg shadow-slate-900/20 active:scale-95 flex items-center gap-2",children:[b&&l.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),b?"Menyimpan...":"Simpan Memori"]})]})]})})]})},bj=({isAdmin:t})=>{const[e,n]=j.useState([]),[r,s]=j.useState(null),[i,o]=j.useState(!1),[a,u]=j.useState(!0),[c,d]=j.useState(!1),[m,g]=j.useState(""),[y,w]=j.useState(""),[x,_]=j.useState(""),[v,b]=j.useState(!1),[T,R]=j.useState(!1),[L,U]=j.useState(null),S=j.useRef(null),C=async()=>{u(!0);try{const k=await ej();n(k),k.length>0&&(s(k[0]),o(!1))}catch(k){console.error(k)}finally{u(!1)}};j.useEffect(()=>{C()},[]),j.useEffect(()=>{let k;return!a&&e.length>0&&(k=setTimeout(()=>{o(!0)},5e3)),()=>{k&&clearTimeout(k)}},[a,e.length]);const N=k=>{try{if(k.includes("/track/")){const G=k.split("/track/");if(G.length>1)return G[1].split("?")[0]}if(k.includes("spotify:track:")){const G=k.split(":");if(G.length>2)return G[2]}if(k.length>15&&!k.includes("/"))return k}catch{return null}return null},M=async()=>{if(!m||!y||!x){We("Harap isi semua kolom.");return}const k=N(m);if(!k){We("Link Spotify tidak valid.");return}b(!0);try{await tj({spotifyId:k,title:y,artist:x,addedAt:Date.now()}),await C(),d(!1),g(""),w(""),_(""),We("Lagu berhasil ditambahkan!")}catch{We("Gagal menambahkan lagu.")}finally{b(!1)}},V=(k,G)=>{G.stopPropagation(),U(k),R(!0)},P=async()=>{if(L)try{if(await nj(L),n(k=>k.filter(G=>G.id!==L)),(r==null?void 0:r.id)===L){const k=e.filter(G=>G.id!==L);k.length>0?(s(k[0]),o(!1)):(s(null),o(!1))}We("Lagu dihapus.")}catch{We("Gagal menghapus.")}finally{R(!1),U(null)}},D=k=>{(r==null?void 0:r.id)===k.id?o(!i):(s(k),o(!0))};return l.jsxs("div",{className:"min-h-screen bg-white relative overflow-hidden flex flex-col h-full",children:[l.jsx("style",{children:`
                    .no-scrollbar::-webkit-scrollbar {
                        display: none;
                    }
                    .no-scrollbar {
                        -ms-overflow-style: none;
                        scrollbar-width: none;
                    }
                `}),l.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-blue-50/50 rounded-full blur-3xl opacity-60 pointer-events-none translate-x-1/3 -translate-y-1/3"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-purple-50/50 rounded-full blur-3xl opacity-60 pointer-events-none -translate-x-1/3 translate-y-1/3"}),l.jsx(Iu,{isOpen:T,title:"Hapus Lagu?",description:"Lagu ini akan dihapus dari playlist publik. Yakin?",confirmText:"Ya, Hapus",onConfirm:P,onCancel:()=>R(!1)}),l.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar relative z-10 pb-24",children:l.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8 md:py-12",children:[l.jsxs("div",{className:"text-center mb-8 md:mb-10",children:[l.jsx(mt,{id:"music_title",defaultText:"Soundtrack of Life",isAdmin:t,tag:"h1",className:"text-3xl md:text-5xl font-black text-slate-900 tracking-tighter mb-2 md:mb-4"}),l.jsx(mt,{id:"music_desc",defaultText:"Kumpulan frekuensi pengiring coding & kontemplasi malam.",isAdmin:t,tag:"p",className:"text-sm md:text-base text-slate-500 font-medium"})]}),r&&l.jsxs("div",{className:"bg-white/80 backdrop-blur-xl border border-slate-100 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 shadow-2xl shadow-slate-200/50 mb-10 md:mb-12 relative overflow-hidden transition-all hover:shadow-slate-300/50",children:[l.jsx("div",{className:"absolute inset-0 z-0 opacity-20 blur-3xl scale-125 pointer-events-none transition-colors duration-1000",children:l.jsx("div",{className:`w-full h-full bg-gradient-to-tr ${i?"from-blue-300 to-purple-300":"from-slate-200 to-gray-200"}`})}),l.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[l.jsxs("div",{className:"relative mb-6 mt-2 md:mb-8 md:mt-4 group cursor-pointer",onClick:()=>o(!i),children:[l.jsxs("div",{className:`w-48 h-48 md:w-64 md:h-64 rounded-full bg-slate-900 shadow-2xl flex items-center justify-center relative overflow-hidden border-4 border-slate-800 ${i?"animate-[spin_4s_linear_infinite]":"transition-transform duration-700 ease-out"}`,children:[l.jsx("div",{className:"absolute inset-2 rounded-full border border-slate-800/50"}),l.jsx("div",{className:"absolute inset-4 rounded-full border border-slate-800/50"}),l.jsx("div",{className:"absolute inset-8 rounded-full border border-slate-800/50"}),l.jsx("div",{className:"absolute inset-12 rounded-full border border-slate-800/50"}),l.jsxs("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-gradient-to-tr from-blue-500 to-purple-600 rounded-full flex items-center justify-center relative shadow-inner",children:[l.jsx("div",{className:"w-2 h-2 md:w-2.5 md:h-2.5 bg-white rounded-full shadow-sm"}),l.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-30"})]}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent pointer-events-none rounded-full"})]}),l.jsx("div",{className:`absolute -top-8 -right-6 md:-top-12 md:-right-8 w-24 h-32 md:w-28 md:h-40 pointer-events-none transition-transform duration-1000 ease-in-out origin-[70%_15%] drop-shadow-xl z-20 ${i?"rotate-[0deg]":"-rotate-[40deg]"}`,children:l.jsxs("svg",{viewBox:"0 0 100 150",className:"w-full h-full",children:[l.jsx("circle",{cx:"70",cy:"20",r:"8",fill:"#94a3b8",stroke:"#64748b",strokeWidth:"2"}),l.jsx("path",{d:"M70 20 L60 90 L45 100",fill:"none",stroke:"#64748b",strokeWidth:"5",strokeLinecap:"round"}),l.jsx("rect",{x:"38",y:"95",width:"16",height:"20",fill:"#334155",rx:"2",transform:"rotate(20 46 105)"})]})}),!i&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:l.jsx("div",{className:"bg-black/40 backdrop-blur-sm rounded-full p-3 md:p-4",children:l.jsx(fN,{className:"w-6 h-6 md:w-8 md:h-8 text-white ml-1"})})})]}),l.jsxs("div",{className:"w-full text-center",children:[l.jsx("h2",{className:"text-xl md:text-2xl font-black text-slate-900 mb-1 leading-tight line-clamp-1",children:r.title}),l.jsx("p",{className:"text-xs md:text-sm text-slate-500 font-bold uppercase tracking-widest mb-4 md:mb-6 line-clamp-1",children:r.artist}),l.jsx("div",{className:"w-full rounded-2xl overflow-hidden shadow-sm border border-slate-100 bg-slate-50 relative z-20",children:l.jsx("iframe",{ref:S,src:`https://open.spotify.com/embed/track/${r.spotifyId}?utm_source=generator&theme=0&autoplay=1`,width:"100%",height:"80",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Player",className:"border-0 block",style:{overflow:"hidden"}})}),l.jsx("button",{onClick:()=>o(!i),className:"mt-4 text-[10px] font-bold text-slate-400 bg-slate-50 px-3 py-1.5 rounded-full hover:bg-slate-100 transition-colors",children:i?"Matikan Animasi Manual":"Nyalakan Animasi Manual"})]})]})]}),l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[l.jsxs("h3",{className:"text-base md:text-lg font-bold text-slate-900 flex items-center gap-2",children:[l.jsx(pN,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-400"}),"Daftar Putar"]}),t&&l.jsx("button",{onClick:()=>d(!c),className:"text-[10px] md:text-xs font-bold bg-slate-900 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg hover:bg-slate-800 transition-all shadow-md active:scale-95",children:c?"Tutup":"+ Add Song"})]}),c&&l.jsxs("div",{className:"bg-slate-50 p-4 md:p-6 rounded-2xl border border-slate-200 mb-6 md:mb-8 animate-fade-in-up",children:[l.jsx("h4",{className:"text-sm font-bold text-slate-800 mb-4",children:"Tambah Lagu Baru"}),l.jsxs("div",{className:"grid gap-3 md:gap-4",children:[l.jsx("input",{type:"text",placeholder:"Link Spotify...",value:m,onChange:k=>g(k.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[l.jsx("input",{type:"text",placeholder:"Judul Lagu",value:y,onChange:k=>w(k.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"}),l.jsx("input",{type:"text",placeholder:"Nama Artis",value:x,onChange:k=>_(k.target.value),className:"w-full px-4 py-2 md:py-3 rounded-xl bg-white border border-slate-200 text-sm focus:border-slate-900 outline-none"})]}),l.jsx("button",{onClick:M,disabled:v,className:"w-full bg-blue-600 text-white font-bold py-2.5 md:py-3 rounded-xl hover:bg-blue-700 transition-all disabled:opacity-50 text-sm",children:v?"Menyimpan...":"Simpan ke Playlist"})]})]}),l.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.map((k,G)=>l.jsxs("div",{onClick:()=>D(k),className:`group flex items-center gap-3 md:gap-4 p-3 pr-4 rounded-xl cursor-pointer border transition-all duration-300 ${(r==null?void 0:r.id)===k.id?"bg-slate-900 border-slate-900 shadow-lg scale-[1.01] md:scale-[1.02]":"bg-white border-slate-100 hover:border-slate-300 hover:shadow-md"}`,children:[l.jsx("div",{className:`w-8 h-8 flex items-center justify-center text-xs md:text-sm font-bold rounded-lg shrink-0 ${(r==null?void 0:r.id)===k.id?"text-white":"text-slate-400 bg-slate-50 group-hover:bg-slate-100 group-hover:text-slate-600"}`,children:(r==null?void 0:r.id)===k.id&&i?l.jsxs("div",{className:"flex gap-0.5 items-end h-3",children:[l.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1s_infinite] h-2"}),l.jsx("div",{className:"w-0.5 bg-white animate-[bounce_1.2s_infinite] h-3"}),l.jsx("div",{className:"w-0.5 bg-white animate-[bounce_0.8s_infinite] h-1.5"})]}):G+1}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:`font-bold text-xs md:text-sm truncate ${(r==null?void 0:r.id)===k.id?"text-white":"text-slate-800"}`,children:k.title}),l.jsx("p",{className:`text-[10px] md:text-xs truncate ${(r==null?void 0:r.id)===k.id?"text-slate-400":"text-slate-500"}`,children:k.artist})]}),l.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[l.jsx("div",{className:`p-1.5 md:p-2 rounded-full transition-colors ${(r==null?void 0:r.id)===k.id?"bg-white/10 text-white":"bg-slate-100 text-slate-400 group-hover:text-green-600 group-hover:bg-green-50"}`,children:l.jsx(kT,{className:"w-4 h-4"})}),t&&l.jsx("button",{onClick:ye=>V(k.id,ye),className:"p-1.5 md:p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-full transition-all",title:"Hapus",children:l.jsx(Jr,{className:"w-4 h-4"})})]})]},k.id||G)),e.length===0&&!a&&l.jsx("div",{className:"text-center py-12 text-slate-400 text-sm",children:"Playlist kosong. Tambahkan lagu baru."})]})]})]})})]})},Ej=({isAdmin:t})=>{const[e,n]=j.useState([]),[r,s]=j.useState(!0),i=6,[o,a]=j.useState(i),[u,c]=j.useState(""),[d,m]=j.useState(!1),[g,y]=j.useState(!1),[w,x]=j.useState(!1),[_,v]=j.useState(null),[b,T]=j.useState(null),R=280,L=async()=>{s(!0);try{const G=await ij();n(G)}catch(G){console.error(G)}finally{s(!1)}};j.useEffect(()=>{L()},[]);const U=async()=>{if(u.trim()){y(!0);try{await rj({content:u.trim(),type:d?"private":"public",sender:"Anonim"}),x(!0),c(""),d||(L(),a(i)),setTimeout(()=>x(!1),3e3)}catch{We("Gagal mengirim pesan.")}finally{y(!1)}}},S=(G,ye)=>{ye.stopPropagation(),G&&T(G)},C=async()=>{if(!b)return;const G=b;v(G),T(null);try{await sj(G),n(ye=>ye.filter(re=>re.id!==G)),We("Pesan dihapus.")}catch(ye){We("Gagal menghapus pesan."),console.error(ye)}finally{v(null)}},N=()=>{a(G=>G+i)},M=()=>{a(i);const G=document.getElementById("message-feed-top");G&&G.scrollIntoView({behavior:"smooth"})},V=G=>new Date(G).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),P=e.slice(0,o),D=o<e.length,k=o>i;return l.jsxs("div",{className:"min-h-screen bg-slate-50 relative pb-20",children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-40",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),l.jsx(Iu,{isOpen:!!b,title:"Hapus Pesan?",description:"Pesan ini akan dihapus secara permanen dari Public Wall. Tindakan ini tidak dapat dibatalkan.",confirmText:"Ya, Hapus",onConfirm:C,onCancel:()=>T(null)}),l.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12 relative z-10",children:[l.jsxs("div",{className:"mb-16 text-center space-y-8",children:[l.jsxs("div",{children:[l.jsx(mt,{id:"msg_feed_title",defaultText:"Public Wall",isAdmin:t,tag:"h1",className:"text-4xl font-black text-slate-900 tracking-tight mb-2"}),l.jsx(mt,{id:"msg_feed_desc",defaultText:"Tulis sesuatu. Rahasia, harapan, atau sekadar 'Halo'.",isAdmin:t,tag:"p",className:"text-slate-500 font-medium"})]}),l.jsxs("div",{className:"bg-white rounded-3xl p-6 shadow-xl shadow-slate-200/60 border border-slate-100 max-w-2xl mx-auto transition-all focus-within:ring-2 focus-within:ring-slate-900/5 relative",children:[l.jsx("textarea",{value:u,onChange:G=>c(G.target.value),maxLength:R,className:"w-full h-32 bg-transparent text-lg font-medium text-slate-800 placeholder:text-slate-300 resize-none outline-none leading-relaxed",placeholder:"Apa yang sedang kamu pikirkan?"}),l.jsxs("div",{className:`absolute bottom-20 right-6 text-[10px] font-bold transition-colors ${u.length>=R?"text-red-500":"text-slate-300"}`,children:[u.length,"/",R]}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-50 flex items-center justify-between",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none px-2 py-1 rounded-lg hover:bg-slate-50 transition-colors",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"checkbox",className:"sr-only peer",checked:d,onChange:G=>m(G.target.checked)}),l.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-slate-900 transition-colors"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[d?l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/4436/4436450.png",alt:"Private",className:"w-4 h-4 object-contain"}):l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/417/417720.png",alt:"Public",className:"w-4 h-4 object-contain"}),l.jsx("span",{className:`text-xs font-bold transition-colors ${d?"text-slate-900":"text-slate-400"}`,children:d?"Privat":"Publik"})]})]}),l.jsx("button",{onClick:U,disabled:!u.trim()||g,className:`
                                    flex items-center gap-2 px-6 py-2.5 rounded-xl font-bold text-sm transition-all shadow-lg active:scale-95
                                    ${w?"bg-green-500 text-white shadow-green-500/20":"bg-slate-900 text-white hover:bg-slate-800 shadow-slate-900/20 disabled:bg-slate-200 disabled:text-slate-400 disabled:shadow-none disabled:cursor-not-allowed"}
                                `,children:g?l.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):w?l.jsxs(l.Fragment,{children:["Terkirim ",l.jsx(_s,{className:"w-4 h-4"})]}):l.jsxs(l.Fragment,{children:["Kirim ",l.jsx(IT,{className:"w-4 h-4"})]})})]})]})]}),l.jsxs("div",{id:"message-feed-top",className:"flex items-center justify-between mb-6 px-2",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/417/417720.png",alt:"Feed",className:"w-4 h-4 object-contain opacity-60"})," Pesan Terbaru"]}),l.jsx("button",{onClick:L,className:"p-2 text-slate-400 hover:text-slate-900 hover:bg-white rounded-full transition-all",title:"Refresh",children:l.jsx(rh,{className:"w-4 h-4"})})]}),r?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(G=>l.jsx("div",{className:"h-32 bg-slate-200/50 rounded-2xl animate-pulse"},G))}):e.length===0?l.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[l.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada pesan publik."}),l.jsx("p",{className:"text-slate-300 text-sm",children:"Jadilah yang pertama menulis!"})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"columns-1 md:columns-2 gap-6 space-y-6",children:P.map((G,ye)=>l.jsxs("div",{className:"break-inside-avoid bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md hover:border-slate-200 hover:-translate-y-1 transition-all duration-300 group relative overflow-hidden",children:[l.jsxs("p",{className:"text-slate-800 text-[15px] font-medium leading-relaxed whitespace-pre-wrap break-words relative z-10",children:['"',G.content,'"']}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-widest bg-slate-50 px-2 py-1 rounded",children:V(G.timestamp)})}),t&&l.jsx("button",{onClick:re=>S(G.id,re),disabled:_===G.id,className:"absolute top-2 right-2 p-2 bg-white/80 backdrop-blur-sm rounded-full text-slate-400 hover:text-red-500 hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100 border border-transparent hover:border-red-100 shadow-sm z-20",title:"Hapus Pesan",children:_===G.id?l.jsx("div",{className:"w-3.5 h-3.5 border-2 border-red-200 border-t-red-500 rounded-full animate-spin"}):l.jsx(Jr,{className:"w-3.5 h-3.5"})})]},G.id||ye))}),l.jsxs("div",{className:"flex flex-col items-center gap-3 mt-12",children:[D&&l.jsxs("button",{onClick:N,className:"px-6 py-2.5 rounded-full bg-white border border-slate-200 text-slate-600 font-bold text-xs hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 transition-all flex items-center gap-2 shadow-sm",children:["Lihat Pesan Lainnya",l.jsx(Xn,{className:"w-4 h-4"})]}),k&&l.jsxs("button",{onClick:M,className:"text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors flex items-center gap-1.5 py-2",children:["Sembunyikan (Tutup)",l.jsx(Xn,{className:"w-3.5 h-3.5 rotate-180"})]})]})]})]})]})};function Tj(){return null}function Ij(){return null}var kn=(t=>(t.BACKGROUND_REMOVER="bg_remove",t.HD_UPSCALE="hd_upscale",t.CREATIVE_REMIX="creative_remix",t.COLORIZE="colorize",t.SKETCH_TO_REAL="sketch_real",t))(kn||{});const Su={id:{welcome:"Halo, Siapa Disana?",welcomeSubtitle:"Biar kita makin akrab, kenalan dulu yuk! Isi nama dan sekolahmu ya, biar enak ngobrolnya.",enterName:"Aku biasa dipanggil...",enterSchool:"Aku sekolah / kuliah di...",namePlaceholder:"Contoh: Rara",schoolPlaceholder:"Contoh: SMA 1 Jakarta / UI",accessButton:"Oke, Salam Kenal!",verifying:"Lagi mencatat...",deviceIdNote:"Santai aja, ini cuma biar aku inget temen baru.",credits:"Limit",adminMode:"Mode Admin",unlimited:"Tanpa Batas",logOut:"Ganti Akun",heroTitle:"Hai,",heroSubtitle:"Sudah siap bikin karya keren hari ini?",toolBgRemove:"Hapus Background",toolBgRemoveDesc:"Hapus latar belakang secara instan dan rapi.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Pertajam detail & resolusi tinggi agar tidak pecah.",toolRemix:"Creative Remix",toolRemixDesc:"Ubah gaya gambar dengan bantuan AI.",toolColorize:"Warnai Foto",toolColorizeDesc:"Ubah foto hitam putih jadi berwarna.",toolSketch:"Sketsa ke Nyata",toolSketchDesc:"Ubah coretan tangan jadi gambar realistis.",moreTools:"Lihat Lainnya",lessTools:"Sembunyikan",back:"Kembali",preview:"Pratinjau",changePhoto:"Ganti Foto",aiPrompt:"Instruksi AI",aiPromptPlaceholder:"Jelaskan bagaimana Anda ingin mengubah gambar ini...",generate:"Mulai Proses",generateMagic:"Buat Keajaiban",processing:"Memproses",processingStandard:"Sedang meracik gambar...",processingCloud:"Mengirim ke awan...",processingAI:"AI sedang bekerja...",refining:"Sedikit polesan lagi...",optimizingLocal:"Memproses di perangkatmu (Mode Hemat)...",initializing:"Siap-siap...",resultComparison:"Hasil Karya Kamu",download:"Simpan Gambar",reset:"Ulangi",original:"ASLI",result:"HASIL",bgColor:"Ganti Warna Belakang",uploadPrompt:"Pilih foto terbaikmu untuk diedit",settingsTitle:"Pengaturan Sistem",systemPref:"Preferensi AI",knowledgeMode:"Mode Pengetahuan (Database)",knowledgeModeDesc:"Hemat Kuota. AI hanya menjawab dari database lokal tanpa Gemini API.",totalKnowledge:"Total Memori Tersimpan",wikiMode:"Izinkan Wikipedia",wikiModeDesc:"Jika info tidak ada di database, cari di Wikipedia (Tetap hemat kuota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Kelola API Key untuk fitur chat cerdas dan edit gambar.",selectKeyBtn:"Ambil Key via AI Studio",orManually:"Kelola Key Manual",customKeyActive:"Key Pribadi Aktif",defaultKeyActive:"Key Sistem (Terbatas)",removeBgTitle:"Remove.bg API",removeBgDesc:"Engine khusus hapus background presisi tinggi.",supabaseTitle:"Supabase Engine",supabaseDesc:"Engine cadangan untuk pemrosesan gambar.",googleSearchTitle:"Google Search API",googleSearchDesc:"Opsi pencarian terakhir (Fallback) jika DB & Wiki gagal.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Tutup",save:"Simpan",active:"Aktif",inactive:"Nonaktif",addKeyPlaceholder:"Tempel API Key Gemini disini...",addKeyBtn:"Tambah Key",keyDisclaimerTitle:" Peringatan Penting",keyDisclaimerText:"Dengan menambahkan API Key pribadi, saya sadar bahwa segala bentuk penggunaan, kuota, dan keamanan key tersebut adalah tanggung jawab saya sepenuhnya. Fanra AI Studio tidak bertanggung jawab atas penyalahgunaan atau tagihan yang muncul akibat kelalaian pengguna.",consentCheckbox:"Saya mengerti dan setuju untuk melanjutkan.",keysStored:"Daftar Key",noKeysYet:"Belum ada key tersimpan. Masih pakai limit bawaan.",newChat:"Percakapan Baru",historyHeader:"Riwayat",loginToSave:"Login untuk simpan progres",loginBtn:"Masuk Akun",historyItem1:"editing foto sekolah...",historyItem2:"hapus background merah...",chatPlaceholder:"ketik pesan atau tanya Fanra...",chatDisclaimer:"Fanra bisa salah. cek lagi info penting.",chatFallbackError:"duh, koneksi gue lagi putus dan gue belum pernah dapet pertanyaan ini sebelumnya. cek internet lo atau API key nya deh.",chatOfflineMode:"(Mode Database) Info tidak ditemukan di database.",chatImageResponse:"wih, kirim gambar ya? sori nih gue baru bisa edit gambar kalo lo pake menu di atas itu. coba klik ikon-ikon di atas deh.",errorTitle:"Ups, Ada Masalah",insufficientCredits:"Yah, limit habis! Masukkan API Key di pengaturan agar Unlimited.",limitReachedHQ:"Kuota High Quality harian sudah penuh.",serviceBusy:"Server lagi ramai nih. Coba lagi sebentar ya.",networkError:"Koneksi internetmu sepertinya putus nyambung.",memoryError:"HP keberatan proses gambar ini. Coba gambar lain ya.",confirmTitle:"Yakin mau ganti?",confirmDesc:"Proses yang ini belum disimpan lho. Mau ganti aktivitas?",yesChange:"Ya, Ganti Aja",uploadTitle:"Unggah Foto",uploadDesc:"Klik atau tarik fotomu ke sini",dropHere:"Lepaskan fotonya!",invalidImage:"Format file ini tidak didukung. Pakai JPG/PNG ya.",toolLockedMsg:"Fitur ini sedang dalam pengembangan/perbaikan. Mohon pengertiannya ya, developer lagi ngoprek!",limitChatReached:"Energi Fanra habis untuk hari ini. Karena ini project mandiri dengan resource terbatas, chat dibatasi dulu ya. Besok reset kok! (Login untuk kuota lebih)",limitImageReached:"Limit upload gambar hari ini sudah habis. Server butuh istirahat karena resource terbatas. Coba lagi besok ya!"},en:{welcome:"Hello, Who's There?",welcomeSubtitle:"Let's be friends! Tell me your name and school so we can chat comfortably.",enterName:"You can call me...",enterSchool:"I study at...",namePlaceholder:"Ex: Sarah",schoolPlaceholder:"Ex: High School NY / MIT",accessButton:"Okay, Nice to Meet You!",verifying:"Writing that down...",deviceIdNote:"Relax, just remembering a new friend.",credits:"Credits",adminMode:"Admin Mode",unlimited:"Unlimited",logOut:"Switch Account",heroTitle:"Hi,",heroSubtitle:"Ready to make something cool today?",toolBgRemove:"Remove Background",toolBgRemoveDesc:"Instantly remove backgrounds cleanly.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Sharpen details to 4K resolution.",toolRemix:"Creative Remix",toolRemixDesc:"Reimagine image with AI assistance.",toolColorize:"Colorize Photo",toolColorizeDesc:"Turn black & white photos into color.",toolSketch:"Sketch to Real",toolSketchDesc:"Turn hand drawings into realistic images.",moreTools:"See More",lessTools:"Show Less",back:"Back",preview:"Preview",changePhoto:"Change Photo",aiPrompt:"AI Prompt",aiPromptPlaceholder:"Describe how you want to remix this image...",generate:"Generate",generateMagic:"Generate Magic",processing:"Processing",processingStandard:"Working magic...",processingCloud:"Sending to cloud...",processingAI:"AI is thinking...",refining:"Polishing details...",optimizingLocal:"Processing on device (Offline Mode)...",initializing:"Warming up...",resultComparison:"Your Masterpiece",download:"Save Image",reset:"Reset",original:"ORIGINAL",result:"RESULT",bgColor:"Background Color",uploadPrompt:"Upload an image to start editing",settingsTitle:"System Settings",systemPref:"AI Preferences",knowledgeMode:"Knowledge Mode (Database)",knowledgeModeDesc:"Save Quota. AI only answers from local database without Gemini API.",totalKnowledge:"Total Stored Memory",wikiMode:"Enable Wikipedia",wikiModeDesc:"If info not in DB, search Wikipedia (Still saves API quota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Manage keys for smart chat and image editing.",selectKeyBtn:"Get Key via AI Studio",orManually:"Manage Keys Manually",customKeyActive:"Custom Key Active",defaultKeyActive:"System Key (Limited)",removeBgTitle:"Remove.bg API",removeBgDesc:"Precision background removal engine.",supabaseTitle:"Supabase Engine",supabaseDesc:"Backup engine for image processing.",googleSearchTitle:"Google Search API",googleSearchDesc:"Fallback search option if DB & Wiki fail.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Close",save:"Save",active:"Active",inactive:"Inactive",addKeyPlaceholder:"Paste Gemini API Key here...",addKeyBtn:"Add Key",keyDisclaimerTitle:" Important Warning",keyDisclaimerText:"By adding personal API Keys, I acknowledge that all usage, quotas, and security of said keys are my sole responsibility. Fanra AI Studio is not liable for misuse or charges incurred due to user negligence.",consentCheckbox:"I understand and agree to proceed.",keysStored:"Key List",noKeysYet:"No keys saved yet. Using default limits.",newChat:"New Conversation",historyHeader:"History",loginToSave:"Login to save progress",loginBtn:"Login",historyItem1:"editing school photo...",historyItem2:"removing red background...",chatPlaceholder:"type a message or ask Fanra...",chatDisclaimer:"Fanra can make mistakes. Check important info.",chatFallbackError:"ugh, my connection is down and I haven't heard this question before. Check your internet or API key.",chatOfflineMode:"(DB Mode) Info not found in database.",chatImageResponse:"woah, sending an image? sorry, I can only edit images if you use the menu above. try clicking those icons.",errorTitle:"Whoops",insufficientCredits:"Out of credits! Enter your own Google Gemini API Key in settings for unlimited access.",limitReachedHQ:"High Quality daily limit reached.",serviceBusy:"Service is busy. Please try again.",networkError:"Connection issue. Check your internet.",memoryError:"Device memory low. Try a smaller image.",confirmTitle:"Change Activity?",confirmDesc:"Current progress will be lost. Are you sure?",yesChange:"Yes, Change",uploadTitle:"Upload Image",uploadDesc:"Click to browse or drag & drop",dropHere:"Drop it here!",invalidImage:"Please upload a valid image file (JPG/PNG).",toolLockedMsg:"This feature is under maintenance/development. Please understand, developer is working on it!",limitChatReached:"Fanra's energy is depleted for today. Due to limited resources on this personal project, chats are limited. Resets tomorrow!",limitImageReached:"Daily image upload limit reached. Server needs a break due to limited resources. Try again tomorrow!"}};var Sj={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let kj,Cj;function Aj(){return{geminiUrl:kj,vertexUrl:Cj}}function Nj(t,e,n,r){var s,i;if(!(t!=null&&t.baseUrl)){const o=Aj();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:n:(i=o.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ns{}function Ee(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const i=e[s];return i!=null?String(i):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function p(t,e,n){for(let i=0;i<e.length-1;i++){const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const u=t[a];if(Array.isArray(n))for(let c=0;c<u.length;c++){const d=u[c];p(d,e.slice(i+1),n[c])}else for(const c of u)p(c,e.slice(i+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const u=t[a];p(u[0],e.slice(i+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function h(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const i=s.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(a=>h(a,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Rj(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),i=r.split("."),o=new Set;let a=-1;for(let u=0;u<s.length;u++)if(s[u]==="*"){a=u;break}if(a!==-1&&i.length>a)for(let u=a;u<i.length;u++){const c=i[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}dm(t,s,i,0,o)}}function dm(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const u of a[o])dm(u,e,n,r+1,s)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!s.has(c)),u={};for(const c of a)u[c]=o[c];for(const[c,d]of Object.entries(u)){const m=[];for(const g of n.slice(r))g==="*"?m.push(c):m.push(g);p(o,m,d)}for(const c of a)delete o[c]}}else{const o=t;i in o&&dm(o[i],e,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D0(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pj(t){const e={},n=h(t,["operationName"]);n!=null&&p(e,["operationName"],n);const r=h(t,["resourceName"]);return r!=null&&p(e,["_url","resourceName"],r),e}function Mj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],Lj(o)),e}function Dj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],jj(o)),e}function Lj(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Fj(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function jj(t){const e={},n=h(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Vj(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function Fj(t){const e={},n=h(t,["video"]);return n!=null&&p(e,["video"],Hj(n)),e}function Vj(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],$j(n)),e}function Uj(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function Oj(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function Bj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],zj(o)),e}function zj(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function b1(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],Gj(o)),e}function Gj(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function Hj(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],D0(r));const s=h(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function $j(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],D0(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dw;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(dw||(dw={}));var hw;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(hw||(hw={}));var fw;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(fw||(fw={}));var On;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(On||(On={}));var pw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(pw||(pw={}));var mw;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(mw||(mw={}));var gw;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(gw||(gw={}));var yw;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(yw||(yw={}));var vw;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(vw||(vw={}));var xw;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(xw||(xw={}));var ww;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ww||(ww={}));var _w;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(_w||(_w={}));var bw;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(bw||(bw={}));var Ew;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Ew||(Ew={}));var Tw;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Tw||(Tw={}));var Iw;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Iw||(Iw={}));var Sw;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Sw||(Sw={}));var kw;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(kw||(kw={}));var Cw;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Cw||(Cw={}));var Md;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Md||(Md={}));var Aw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Aw||(Aw={}));var Nw;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Nw||(Nw={}));var Rw;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Rw||(Rw={}));var hm;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(hm||(hm={}));var Pw;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Pw||(Pw={}));var Mw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Mw||(Mw={}));var Dw;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Dw||(Dw={}));var Lw;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Lw||(Lw={}));var jw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(jw||(jw={}));var Fw;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Fw||(Fw={}));var Vw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Vw||(Vw={}));var Uw;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Uw||(Uw={}));var Ow;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Ow||(Ow={}));var Bw;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Bw||(Bw={}));var zw;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(zw||(zw={}));var Gw;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Gw||(Gw={}));var Hw;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Hw||(Hw={}));var $w;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})($w||($w={}));var qw;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(qw||(qw={}));var Ww;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Ww||(Ww={}));var Kw;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Kw||(Kw={}));var Jw;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Jw||(Jw={}));var Yw;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Yw||(Yw={}));var Qw;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Qw||(Qw={}));var Xw;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Xw||(Xw={}));var Zw;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Zw||(Zw={}));var e_;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(e_||(e_={}));var t_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(t_||(t_={}));var n_;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(n_||(n_={}));var r_;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(r_||(r_={}));var s_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(s_||(s_={}));var i_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(i_||(i_={}));var o_;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(o_||(o_={}));var a_;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(a_||(a_={}));var l_;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(l_||(l_={}));var Do;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Do||(Do={}));class fm{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ja{get text(){var e,n,r,s,i,o,a,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const m=[];for(const g of(u=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(const[y,w]of Object.entries(g))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(w!==null||w!==void 0)&&m.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;d=!0,c+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,n,r,s,i,o,a,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const m of(u=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(const[g,y]of Object.entries(m))g!=="inlineData"&&(y!==null||y!==void 0)&&d.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,s,i,o,a,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(u=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,s,i,o,a,u,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(u=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,s,i,o,a,u,c;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(u=(a=(o=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class u_{}class c_{}class qj{}class Wj{}class Kj{}class Jj{}class d_{}class h_{}class f_{}class Yj{}class Dd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Dd;let s;const i=e;return n?s=Dj(i):s=Mj(i),Object.assign(r,s),r}}class p_{}class m_{}class g_{}class y_{}class Qj{}class Xj{}class Zj{}class L0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new L0,i=Bj(e);return Object.assign(r,i),r}}class eF{}class tF{}class nF{}class v_{}class rF{get text(){var e,n,r;let s="",i=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(a))u!=="text"&&u!=="thought"&&c!==null&&o.push(u);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,s+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?s:void 0}get data(){var e,n,r;let s="";const i=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,u]of Object.entries(o))a!=="inlineData"&&u!==null&&i.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class sF{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class j0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new j0,i=b1(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function st(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function E1(t,e){const n=st(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function T1(t){return Array.isArray(t)?t.map(e=>Ld(e)):[Ld(t)]}function Ld(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function I1(t){const e=Ld(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function S1(t){const e=Ld(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function x_(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function k1(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>x_(e)):[x_(t)]}function pm(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function w_(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function __(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function xn(t){if(t==null)throw new Error("ContentUnion is required");return pm(t)?t:{role:"user",parts:k1(t)}}function F0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=xn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=xn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>xn(n)):[xn(e)]}function fr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(w_(t)||__(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[xn(t)]}const e=[],n=[],r=pm(t[0]);for(const s of t){const i=pm(s);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(s);else{if(w_(s)||__(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:k1(n)}),e}function iF(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(On).includes(n[0].toUpperCase())?n[0].toUpperCase():On.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(On).includes(r.toUpperCase())?r.toUpperCase():On.TYPE_UNSPECIFIED})}}function Ko(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&iF(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(On).includes(a.toUpperCase())?a.toUpperCase():On.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Ko(a);else if(r.includes(o)){const u=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}u.push(Ko(c))}e[o]=u}else if(s.includes(o)){const u={};for(const[c,d]of Object.entries(a))u[c]=Ko(d);e[o]=u}else{if(o==="additionalProperties")continue;e[o]=a}return e}function V0(t){return Ko(t)}function U0(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function O0(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ca(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ko(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ko(e.response));return t}function Aa(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function oF(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Rs(t,e){if(typeof e!="string")throw new Error("name must be a string");return oF(t,e,"cachedContents")}function C1(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function xi(t){return D0(t)}function aF(t){return t!=null&&typeof t=="object"&&"name"in t}function lF(t){return t!=null&&typeof t=="object"&&"video"in t}function uF(t){return t!=null&&typeof t=="object"&&"uri"in t}function A1(t){var e;let n;if(aF(t)&&(n=t.name),!(uF(t)&&(n=t.uri,n===void 0))&&!(lF(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function N1(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function R1(t){for(const e of["models","tunedModels","publisherModels"])if(cF(t,e))return t[e];return[]}function cF(t,e){return t!==null&&typeof t=="object"&&e in t}function dF(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function hF(t,e={}){const n=[],r=new Set;for(const s of t){const i=s.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const o=dF(s,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function P1(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function fF(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function M1(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let i=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const u=o.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Na(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function D1(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pF(t){const e={},n=h(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const r=h(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>KF(o))),p(e,["inlinedResponses"],i)}const s=h(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["inlinedEmbedContentResponses"],i)}return e}function mF(t){const e={},n=h(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsDestination","outputUriPrefix"]);r!=null&&p(e,["gcsUri"],r);const s=h(t,["bigqueryDestination","outputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function gF(t){const e={},n=h(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsDestination","outputUriPrefix"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&p(e,["bigqueryDestination","outputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Uc(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata","displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["metadata","state"]);s!=null&&p(e,["state"],D1(s));const i=h(t,["metadata","createTime"]);i!=null&&p(e,["createTime"],i);const o=h(t,["metadata","endTime"]);o!=null&&p(e,["endTime"],o);const a=h(t,["metadata","updateTime"]);a!=null&&p(e,["updateTime"],a);const u=h(t,["metadata","model"]);u!=null&&p(e,["model"],u);const c=h(t,["metadata","output"]);return c!=null&&p(e,["dest"],pF(M1(c))),e}function mm(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["state"]);s!=null&&p(e,["state"],D1(s));const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["createTime"]);o!=null&&p(e,["createTime"],o);const a=h(t,["startTime"]);a!=null&&p(e,["startTime"],a);const u=h(t,["endTime"]);u!=null&&p(e,["endTime"],u);const c=h(t,["updateTime"]);c!=null&&p(e,["updateTime"],c);const d=h(t,["model"]);d!=null&&p(e,["model"],d);const m=h(t,["inputConfig"]);m!=null&&p(e,["src"],yF(m));const g=h(t,["outputConfig"]);g!=null&&p(e,["dest"],mF(M1(g)));const y=h(t,["completionStats"]);return y!=null&&p(e,["completionStats"],y),e}function yF(t){const e={},n=h(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsSource","uris"]);r!=null&&p(e,["gcsUri"],r);const s=h(t,["bigquerySource","inputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function vF(t,e){const n={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=h(e,["fileName"]);r!=null&&p(n,["fileName"],r);const s=h(e,["inlinedRequests"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>WF(t,o))),p(n,["requests","requests"],i)}return n}function xF(t){const e={},n=h(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsSource","uris"],r);const s=h(t,["bigqueryUri"]);if(s!=null&&p(e,["bigquerySource","inputUri"],s),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function wF(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function _F(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Na(t,r)),n}function bF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Na(t,r)),n}function EF(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],TF(r));const s=h(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=h(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const u=h(t,["index"]);u!=null&&p(e,["index"],u);const c=h(t,["logprobsResult"]);c!=null&&p(e,["logprobsResult"],c);const d=h(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=h(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function TF(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function L1(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>tV(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function IF(t,e){const n={},r=h(t,["displayName"]);if(e!==void 0&&r!=null&&p(e,["batch","displayName"],r),h(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function SF(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["dest"]);return e!==void 0&&s!=null&&p(e,["outputConfig"],gF(fF(s))),n}function b_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["src"]);s!=null&&p(n,["batch","inputConfig"],vF(t,P1(t,s)));const i=h(e,["config"]);return i!=null&&IF(i,n),n}function kF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],st(t,r));const s=h(e,["src"]);s!=null&&p(n,["inputConfig"],xF(P1(t,s)));const i=h(e,["config"]);return i!=null&&SF(i,n),n}function CF(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["batch","displayName"],r),n}function AF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["src"]);s!=null&&p(n,["batch","inputConfig"],jF(t,s));const i=h(e,["config"]);return i!=null&&CF(i,n),n}function NF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Na(t,r)),n}function RF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Na(t,r)),n}function PF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);return i!=null&&p(e,["error"],i),e}function MF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);return i!=null&&p(e,["error"],i),e}function DF(t,e){const n={},r=h(e,["contents"]);if(r!=null){let i=F0(t,r);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["requests[]","request","content"],i)}const s=h(e,["config"]);return s!=null&&(p(n,["_self"],LF(s,n)),Rj(n,{"requests[].*":"requests[].request.*"})),n}function LF(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=h(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function jF(t,e){const n={},r=h(e,["fileName"]);r!=null&&p(n,["file_name"],r);const s=h(e,["inlinedRequests"]);return s!=null&&p(n,["requests"],DF(t,s)),n}function FF(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function VF(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function UF(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function OF(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],L1(xn(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const u=h(e,["candidateCount"]);u!=null&&p(r,["candidateCount"],u);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const _=h(e,["responseMimeType"]);_!=null&&p(r,["responseMimeType"],_);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],V0(v));const b=h(e,["responseJsonSchema"]);if(b!=null&&p(r,["responseJsonSchema"],b),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=h(e,["safetySettings"]);if(n!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(k=>nV(k))),p(n,["safetySettings"],D)}const R=h(e,["tools"]);if(n!==void 0&&R!=null){let D=Aa(R);Array.isArray(D)&&(D=D.map(k=>sV(Ca(k)))),p(n,["tools"],D)}const L=h(e,["toolConfig"]);if(n!==void 0&&L!=null&&p(n,["toolConfig"],rV(L)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=h(e,["cachedContent"]);n!==void 0&&U!=null&&p(n,["cachedContent"],Rs(t,U));const S=h(e,["responseModalities"]);S!=null&&p(r,["responseModalities"],S);const C=h(e,["mediaResolution"]);C!=null&&p(r,["mediaResolution"],C);const N=h(e,["speechConfig"]);if(N!=null&&p(r,["speechConfig"],U0(N)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=h(e,["thinkingConfig"]);M!=null&&p(r,["thinkingConfig"],M);const V=h(e,["imageConfig"]);V!=null&&p(r,["imageConfig"],qF(V));const P=h(e,["enableEnhancedCivicAnswers"]);return P!=null&&p(r,["enableEnhancedCivicAnswers"],P),r}function BF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>EF(c))),p(e,["candidates"],u)}const s=h(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=h(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=h(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=h(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function zF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Na(t,r)),n}function GF(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Na(t,r)),n}function HF(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function $F(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function qF(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function WF(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["request","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let a=fr(s);Array.isArray(a)&&(a=a.map(u=>L1(u))),p(n,["request","contents"],a)}const i=h(e,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(e,["config"]);return o!=null&&p(n,["request","generationConfig"],OF(t,o,h(n,["request"],{}))),n}function KF(t){const e={},n=h(t,["response"]);n!=null&&p(e,["response"],BF(n));const r=h(t,["error"]);return r!=null&&p(e,["error"],r),e}function JF(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);if(e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),h(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function YF(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const i=h(t,["filter"]);return e!==void 0&&i!=null&&p(e,["_query","filter"],i),n}function QF(t){const e={},n=h(t,["config"]);return n!=null&&JF(n,e),e}function XF(t){const e={},n=h(t,["config"]);return n!=null&&YF(n,e),e}function ZF(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["operations"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>Uc(o))),p(e,["batchJobs"],i)}return e}function eV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["batchPredictionJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>mm(o))),p(e,["batchJobs"],i)}return e}function tV(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],FF(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],VF(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const u=h(t,["inlineData"]);u!=null&&p(e,["inlineData"],wF(u));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function nV(t){const e={},n=h(t,["category"]);if(n!=null&&p(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function rV(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],UF(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function sV(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],HF(a));const u=h(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],$F(u));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ss;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ss||(Ss={}));class lo{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(i=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iV extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new lo(Ss.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=b_(this.apiClient,e),r=n._url,s=Ee("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,u=a.requests,c=[];for(const d of u){const m=Object.assign({},d);if(m.systemInstruction){const g=m.systemInstruction;delete m.systemInstruction;const y=m.request;y.systemInstruction=g,m.request=y}c.push(m)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const i=this.getGcsUri(e),o=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${s}`;else if(o)r.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=kF(this.apiClient,e);return a=Ee("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>mm(d))}else{const c=b_(this.apiClient,e);return a=Ee("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Uc(d))}}async createEmbeddingsInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=AF(this.apiClient,e);return i=Ee("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>Uc(u))}}async get(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=GF(this.apiClient,e);return a=Ee("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>mm(d))}else{const c=zF(this.apiClient,e);return a=Ee("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>Uc(d))}}async cancel(e){var n,r,s,i;let o="",a={};if(this.apiClient.isVertexAI()){const u=bF(this.apiClient,e);o=Ee("batchPredictionJobs/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=_F(this.apiClient,e);o=Ee("batches/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=XF(e);return a=Ee("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=eV(d),g=new v_;return Object.assign(g,m),g})}else{const c=QF(e);return a=Ee("batches",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=ZF(d),g=new v_;return Object.assign(g,m),g})}}async delete(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=RF(this.apiClient,e);return a=Ee("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>MF(d))}else{const c=NF(this.apiClient,e);return a=Ee("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>PF(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oV(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function E_(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>AV(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function aV(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["contents"]);if(e!==void 0&&o!=null){let d=fr(o);Array.isArray(d)&&(d=d.map(m=>E_(m))),p(e,["contents"],d)}const a=h(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],E_(xn(a)));const u=h(t,["tools"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(m=>RV(m))),p(e,["tools"],d)}const c=h(t,["toolConfig"]);if(e!==void 0&&c!=null&&p(e,["toolConfig"],NV(c)),h(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function lV(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["contents"]);if(e!==void 0&&o!=null){let m=fr(o);Array.isArray(m)&&(m=m.map(g=>g)),p(e,["contents"],m)}const a=h(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],xn(a));const u=h(t,["tools"]);if(e!==void 0&&u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>PV(g))),p(e,["tools"],m)}const c=h(t,["toolConfig"]);e!==void 0&&c!=null&&p(e,["toolConfig"],c);const d=h(t,["kmsKeyName"]);return e!==void 0&&d!=null&&p(e,["encryption_spec","kmsKeyName"],d),n}function uV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],E1(t,r));const s=h(e,["config"]);return s!=null&&aV(s,n),n}function cV(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],E1(t,r));const s=h(e,["config"]);return s!=null&&lV(s,n),n}function dV(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Rs(t,r)),n}function hV(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Rs(t,r)),n}function fV(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function pV(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function mV(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function gV(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yV(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function vV(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function xV(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Rs(t,r)),n}function wV(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Rs(t,r)),n}function _V(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function bV(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function EV(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function TV(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function IV(t){const e={},n=h(t,["config"]);return n!=null&&EV(n,e),e}function SV(t){const e={},n=h(t,["config"]);return n!=null&&TV(n,e),e}function kV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function CV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["cachedContents"],i)}return e}function AV(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],mV(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],gV(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const u=h(t,["inlineData"]);u!=null&&p(e,["inlineData"],oV(u));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function NV(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],yV(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function RV(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],_V(a));const u=h(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],bV(u));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function PV(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>vV(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=h(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],u);const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function MV(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function DV(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=h(t,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),n}function LV(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],Rs(t,r));const s=h(e,["config"]);return s!=null&&MV(s,n),n}function jV(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],Rs(t,r));const s=h(e,["config"]);return s!=null&&DV(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FV extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new lo(Ss.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=cV(this.apiClient,e);return a=Ee("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=uV(this.apiClient,e);return a=Ee("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=wV(this.apiClient,e);return a=Ee("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=xV(this.apiClient,e);return a=Ee("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=hV(this.apiClient,e);return a=Ee("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=pV(d),g=new g_;return Object.assign(g,m),g})}else{const c=dV(this.apiClient,e);return a=Ee("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=fV(d),g=new g_;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=jV(this.apiClient,e);return a=Ee("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=LV(this.apiClient,e);return a=Ee("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async listInternal(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=SV(e);return a=Ee("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=CV(d),g=new y_;return Object.assign(g,m),g})}else{const c=IV(e);return a=Ee("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=kV(d),g=new y_;return Object.assign(g,m),g})}}}function jd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function T_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oe(t){return this instanceof Oe?(this.v=t,this):new Oe(t)}function Pr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(y){return function(w){return Promise.resolve(w).then(y,m)}}function a(y,w){r[y]&&(s[y]=function(x){return new Promise(function(_,v){i.push([y,x,_,v])>1||u(y,x)})},w&&(s[y]=w(s[y])))}function u(y,w){try{c(r[y](w))}catch(x){g(i[0][3],x)}}function c(y){y.value instanceof Oe?Promise.resolve(y.value.v).then(d,m):g(i[0][2],y)}function d(y){u("next",y)}function m(y){u("throw",y)}function g(y,w){y(w),i.shift(),i.length&&u(i[0][0],i[0][1])}}function Mr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof T_=="function"?T_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VV(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:j1(n)}function j1(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function UV(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function I_(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let i=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),i&&!j1(t[r])&&(i=!1),r++;i?e.push(...s):e.pop()}return e}class OV{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new BV(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class BV{constructor(e,n,r,s={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=i,this.sendPromise=Promise.resolve(),UV(i)}async sendMessage(e){var n;await this.sendPromise;const r=xn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,o,a;const u=await s,c=(o=(i=u.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content,d=u.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];d!=null&&(g=(a=d.slice(m))!==null&&a!==void 0?a:[]);const y=c?[c]:[];this.recordHistory(r,y,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=xn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const i=await s;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?I_(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Pr(this,arguments,function*(){var s,i,o,a,u,c;const d=[];try{for(var m=!0,g=Mr(e),y;y=yield Oe(g.next()),s=y.done,!s;m=!0){a=y.value,m=!1;const w=a;if(VV(w)){const x=(c=(u=w.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content;x!==void 0&&d.push(x)}yield yield Oe(w)}}catch(w){i={error:w}}finally{try{!m&&!s&&(o=g.return)&&(yield Oe(o.call(g)))}finally{if(i)throw i.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(i=>i.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...I_(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Nh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zV(t){const e={},n=h(t,["file"]);return n!=null&&p(e,["file"],n),e}function GV(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function HV(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],A1(n)),e}function $V(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function qV(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],A1(n)),e}function WV(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function KV(t){const e={},n=h(t,["config"]);return n!=null&&WV(n,e),e}function JV(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["files"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YV extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new lo(Ss.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=KV(e);return i=Ee("files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),s.then(u=>{const c=JV(u),d=new eF;return Object.assign(d,c),d})}}async createInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zV(e);return i=Ee("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const c=GV(u),d=new tF;return Object.assign(d,c),d})}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=qV(e);return i=Ee("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=HV(e);return i=Ee("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),s.then(u=>{const c=$V(u),d=new nF;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oc(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function QV(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>fU(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function XV(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function ZV(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eU(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function tU(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=h(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=h(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=h(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const u=h(t,["logprobs"]);u!=null&&p(e,["logprobs"],u);const c=h(t,["maxOutputTokens"]);c!=null&&p(e,["maxOutputTokens"],c);const d=h(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const m=h(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=h(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=h(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const w=h(t,["responseModalities"]);w!=null&&p(e,["responseModalities"],w);const x=h(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const _=h(t,["routingConfig"]);_!=null&&p(e,["routingConfig"],_);const v=h(t,["seed"]);v!=null&&p(e,["seed"],v);const b=h(t,["speechConfig"]);b!=null&&p(e,["speechConfig"],b);const T=h(t,["stopSequences"]);T!=null&&p(e,["stopSequences"],T);const R=h(t,["temperature"]);R!=null&&p(e,["temperature"],R);const L=h(t,["thinkingConfig"]);L!=null&&p(e,["thinkingConfig"],L);const U=h(t,["topK"]);U!=null&&p(e,["topK"],U);const S=h(t,["topP"]);if(S!=null&&p(e,["topP"],S),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function nU(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function rU(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function sU(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const u=h(t,["maxOutputTokens"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","maxOutputTokens"],u);const c=h(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],O0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],QV(xn(w)));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let U=Aa(x);Array.isArray(U)&&(U=U.map(S=>mU(Ca(S)))),p(e,["setup","tools"],U)}const _=h(t,["sessionResumption"]);e!==void 0&&_!=null&&p(e,["setup","sessionResumption"],pU(_));const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const b=h(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","outputAudioTranscription"],b);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const R=h(t,["contextWindowCompression"]);e!==void 0&&R!=null&&p(e,["setup","contextWindowCompression"],R);const L=h(t,["proactivity"]);if(e!==void 0&&L!=null&&p(e,["setup","proactivity"],L),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function iU(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],tU(r));const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const u=h(t,["maxOutputTokens"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","maxOutputTokens"],u);const c=h(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],O0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],xn(w));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let S=Aa(x);Array.isArray(S)&&(S=S.map(C=>gU(Ca(C)))),p(e,["setup","tools"],S)}const _=h(t,["sessionResumption"]);e!==void 0&&_!=null&&p(e,["setup","sessionResumption"],_);const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const b=h(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","outputAudioTranscription"],b);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const R=h(t,["contextWindowCompression"]);e!==void 0&&R!=null&&p(e,["setup","contextWindowCompression"],R);const L=h(t,["proactivity"]);e!==void 0&&L!=null&&p(e,["setup","proactivity"],L);const U=h(t,["explicitVadSignal"]);return e!==void 0&&U!=null&&p(e,["setup","explicitVadSignal"],U),n}function oU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],st(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],sU(s,n)),n}function aU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],st(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],iU(s,n)),n}function lU(t){const e={},n=h(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function uU(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["weightedPrompts"],r)}return e}function cU(t){const e={},n=h(t,["media"]);if(n!=null){let c=T1(n);Array.isArray(c)&&(c=c.map(d=>Oc(d))),p(e,["mediaChunks"],c)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],Oc(S1(r)));const s=h(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(t,["video"]);i!=null&&p(e,["video"],Oc(I1(i)));const o=h(t,["text"]);o!=null&&p(e,["text"],o);const a=h(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const u=h(t,["activityEnd"]);return u!=null&&p(e,["activityEnd"],u),e}function dU(t){const e={},n=h(t,["media"]);if(n!=null){let c=T1(n);Array.isArray(c)&&(c=c.map(d=>d)),p(e,["mediaChunks"],c)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],S1(r));const s=h(t,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const i=h(t,["video"]);i!=null&&p(e,["video"],I1(i));const o=h(t,["text"]);o!=null&&p(e,["text"],o);const a=h(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const u=h(t,["activityEnd"]);return u!=null&&p(e,["activityEnd"],u),e}function hU(t){const e={},n=h(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const r=h(t,["serverContent"]);r!=null&&p(e,["serverContent"],r);const s=h(t,["toolCall"]);s!=null&&p(e,["toolCall"],s);const i=h(t,["toolCallCancellation"]);i!=null&&p(e,["toolCallCancellation"],i);const o=h(t,["usageMetadata"]);o!=null&&p(e,["usageMetadata"],yU(o));const a=h(t,["goAway"]);a!=null&&p(e,["goAway"],a);const u=h(t,["sessionResumptionUpdate"]);u!=null&&p(e,["sessionResumptionUpdate"],u);const c=h(t,["voiceActivityDetectionSignal"]);return c!=null&&p(e,["voiceActivityDetectionSignal"],c),e}function fU(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],XV(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],ZV(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const u=h(t,["inlineData"]);u!=null&&p(e,["inlineData"],Oc(u));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function pU(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function mU(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],nU(a));const u=h(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],rU(u));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function gU(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>eU(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=h(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],u);const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function yU(t){const e={},n=h(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const r=h(t,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const s=h(t,["candidatesTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const i=h(t,["toolUsePromptTokenCount"]);i!=null&&p(e,["toolUsePromptTokenCount"],i);const o=h(t,["thoughtsTokenCount"]);o!=null&&p(e,["thoughtsTokenCount"],o);const a=h(t,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);const u=h(t,["promptTokensDetails"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["promptTokensDetails"],y)}const c=h(t,["cacheTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["cacheTokensDetails"],y)}const d=h(t,["candidatesTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["responseTokensDetails"],y)}const m=h(t,["toolUsePromptTokensDetails"]);if(m!=null){let y=m;Array.isArray(y)&&(y=y.map(w=>w)),p(e,["toolUsePromptTokensDetails"],y)}const g=h(t,["trafficType"]);return g!=null&&p(e,["trafficType"],g),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vU(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function xU(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],wU(r));const s=h(t,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const i=h(t,["finishReason"]);i!=null&&p(e,["finishReason"],i);const o=h(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=h(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const u=h(t,["index"]);u!=null&&p(e,["index"],u);const c=h(t,["logprobsResult"]);c!=null&&p(e,["logprobsResult"],c);const d=h(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["safetyRatings"],g)}const m=h(t,["urlContextMetadata"]);return m!=null&&p(e,["urlContextMetadata"],m),e}function wU(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function _U(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let i=fr(s);Array.isArray(i)&&(i=i.map(o=>o)),p(n,["contents"],i)}return n}function bU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["tokensInfo"],s)}return e}function EU(t){const e={},n=h(t,["values"]);n!=null&&p(e,["values"],n);const r=h(t,["statistics"]);return r!=null&&p(e,["statistics"],TU(r)),e}function TU(t){const e={},n=h(t,["truncated"]);n!=null&&p(e,["truncated"],n);const r=h(t,["token_count"]);return r!=null&&p(e,["tokenCount"],r),e}function Rh(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>M6(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function IU(t){const e={},n=h(t,["controlType"]);n!=null&&p(e,["controlType"],n);const r=h(t,["enableControlImageComputation"]);return r!=null&&p(e,["computeControl"],r),e}function SU(t){const e={};if(h(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function kU(t,e){const n={},r=h(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],xn(r));const s=h(t,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>O1(a))),p(e,["tools"],o)}const i=h(t,["generationConfig"]);return e!==void 0&&i!=null&&p(e,["generationConfig"],v6(i)),n}function CU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let o=fr(s);Array.isArray(o)&&(o=o.map(a=>Rh(a))),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&SU(i),n}function AU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let o=fr(s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&kU(i,n),n}function NU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);r!=null&&p(e,["totalTokens"],r);const s=h(t,["cachedContentTokenCount"]);return s!=null&&p(e,["cachedContentTokenCount"],s),e}function RU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["totalTokens"]);return r!=null&&p(e,["totalTokens"],r),e}function PU(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],st(t,r)),n}function MU(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],st(t,r)),n}function DU(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function LU(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function jU(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const u=h(t,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const c=h(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const w=h(t,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const x=h(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const _=h(t,["addWatermark"]);e!==void 0&&_!=null&&p(e,["parameters","addWatermark"],_);const v=h(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const b=h(t,["editMode"]);e!==void 0&&b!=null&&p(e,["parameters","editMode"],b);const T=h(t,["baseSteps"]);return e!==void 0&&T!=null&&p(e,["parameters","editConfig","baseSteps"],T),n}function FU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["referenceImages"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>U6(u))),p(n,["instances[0]","referenceImages"],a)}const o=h(e,["config"]);return o!=null&&jU(o,n),n}function VU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Ph(i))),p(e,["generatedImages"],s)}return e}function UU(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const i=h(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&p(e,["requests[]","outputDimensionality"],i),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function OU(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const s=h(t,["title"]);e!==void 0&&s!=null&&p(e,["instances[]","title"],s);const i=h(t,["outputDimensionality"]);e!==void 0&&i!=null&&p(e,["parameters","outputDimensionality"],i);const o=h(t,["mimeType"]);e!==void 0&&o!=null&&p(e,["instances[]","mimeType"],o);const a=h(t,["autoTruncate"]);return e!==void 0&&a!=null&&p(e,["parameters","autoTruncate"],a),n}function BU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let a=F0(t,s);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["requests[]","content"],a)}const i=h(e,["config"]);i!=null&&UU(i,n);const o=h(e,["model"]);return o!==void 0&&p(n,["requests[]","model"],st(t,o)),n}function zU(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let o=F0(t,s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["instances[]","content"],o)}const i=h(e,["config"]);return i!=null&&OU(i,n),n}function GU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["embeddings"],i)}const s=h(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function HU(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>EU(o))),p(e,["embeddings"],i)}const s=h(t,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function $U(t){const e={},n=h(t,["endpoint"]);n!=null&&p(e,["name"],n);const r=h(t,["deployedModelId"]);return r!=null&&p(e,["deployedModelId"],r),e}function qU(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function WU(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function KU(t){const e={},n=h(t,["mode"]);n!=null&&p(e,["mode"],n);const r=h(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function JU(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const s=h(t,["parameters"]);s!=null&&p(e,["parameters"],s);const i=h(t,["parametersJsonSchema"]);i!=null&&p(e,["parametersJsonSchema"],i);const o=h(t,["response"]);o!=null&&p(e,["response"],o);const a=h(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function YU(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],Rh(xn(s)));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const u=h(e,["candidateCount"]);u!=null&&p(r,["candidateCount"],u);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const _=h(e,["responseMimeType"]);_!=null&&p(r,["responseMimeType"],_);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],V0(v));const b=h(e,["responseJsonSchema"]);if(b!=null&&p(r,["responseJsonSchema"],b),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=h(e,["safetySettings"]);if(n!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(k=>O6(k))),p(n,["safetySettings"],D)}const R=h(e,["tools"]);if(n!==void 0&&R!=null){let D=Aa(R);Array.isArray(D)&&(D=D.map(k=>W6(Ca(k)))),p(n,["tools"],D)}const L=h(e,["toolConfig"]);if(n!==void 0&&L!=null&&p(n,["toolConfig"],q6(L)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=h(e,["cachedContent"]);n!==void 0&&U!=null&&p(n,["cachedContent"],Rs(t,U));const S=h(e,["responseModalities"]);S!=null&&p(r,["responseModalities"],S);const C=h(e,["mediaResolution"]);C!=null&&p(r,["mediaResolution"],C);const N=h(e,["speechConfig"]);if(N!=null&&p(r,["speechConfig"],U0(N)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=h(e,["thinkingConfig"]);M!=null&&p(r,["thinkingConfig"],M);const V=h(e,["imageConfig"]);V!=null&&p(r,["imageConfig"],E6(V));const P=h(e,["enableEnhancedCivicAnswers"]);return P!=null&&p(r,["enableEnhancedCivicAnswers"],P),r}function QU(t,e,n){const r={},s=h(e,["systemInstruction"]);n!==void 0&&s!=null&&p(n,["systemInstruction"],xn(s));const i=h(e,["temperature"]);i!=null&&p(r,["temperature"],i);const o=h(e,["topP"]);o!=null&&p(r,["topP"],o);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const u=h(e,["candidateCount"]);u!=null&&p(r,["candidateCount"],u);const c=h(e,["maxOutputTokens"]);c!=null&&p(r,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const m=h(e,["responseLogprobs"]);m!=null&&p(r,["responseLogprobs"],m);const g=h(e,["logprobs"]);g!=null&&p(r,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const w=h(e,["frequencyPenalty"]);w!=null&&p(r,["frequencyPenalty"],w);const x=h(e,["seed"]);x!=null&&p(r,["seed"],x);const _=h(e,["responseMimeType"]);_!=null&&p(r,["responseMimeType"],_);const v=h(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],V0(v));const b=h(e,["responseJsonSchema"]);b!=null&&p(r,["responseJsonSchema"],b);const T=h(e,["routingConfig"]);T!=null&&p(r,["routingConfig"],T);const R=h(e,["modelSelectionConfig"]);R!=null&&p(r,["modelConfig"],R);const L=h(e,["safetySettings"]);if(n!==void 0&&L!=null){let ye=L;Array.isArray(ye)&&(ye=ye.map(re=>re)),p(n,["safetySettings"],ye)}const U=h(e,["tools"]);if(n!==void 0&&U!=null){let ye=Aa(U);Array.isArray(ye)&&(ye=ye.map(re=>O1(Ca(re)))),p(n,["tools"],ye)}const S=h(e,["toolConfig"]);n!==void 0&&S!=null&&p(n,["toolConfig"],S);const C=h(e,["labels"]);n!==void 0&&C!=null&&p(n,["labels"],C);const N=h(e,["cachedContent"]);n!==void 0&&N!=null&&p(n,["cachedContent"],Rs(t,N));const M=h(e,["responseModalities"]);M!=null&&p(r,["responseModalities"],M);const V=h(e,["mediaResolution"]);V!=null&&p(r,["mediaResolution"],V);const P=h(e,["speechConfig"]);P!=null&&p(r,["speechConfig"],U0(P));const D=h(e,["audioTimestamp"]);D!=null&&p(r,["audioTimestamp"],D);const k=h(e,["thinkingConfig"]);k!=null&&p(r,["thinkingConfig"],k);const G=h(e,["imageConfig"]);if(G!=null&&p(r,["imageConfig"],T6(G)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function S_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let o=fr(s);Array.isArray(o)&&(o=o.map(a=>Rh(a))),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(n,["generationConfig"],YU(t,i,n)),n}function k_(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["contents"]);if(s!=null){let o=fr(s);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const i=h(e,["config"]);return i!=null&&p(n,["generationConfig"],QU(t,i,n)),n}function C_(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>xU(c))),p(e,["candidates"],u)}const s=h(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const i=h(t,["promptFeedback"]);i!=null&&p(e,["promptFeedback"],i);const o=h(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=h(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function A_(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),p(e,["candidates"],c)}const s=h(t,["createTime"]);s!=null&&p(e,["createTime"],s);const i=h(t,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const o=h(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=h(t,["responseId"]);a!=null&&p(e,["responseId"],a);const u=h(t,["usageMetadata"]);return u!=null&&p(e,["usageMetadata"],u),e}function XU(t,e){const n={};if(h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const i=h(t,["guidanceScale"]);if(e!==void 0&&i!=null&&p(e,["parameters","guidanceScale"],i),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=h(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=h(t,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const u=h(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&p(e,["parameters","includeSafetyAttributes"],u);const c=h(t,["includeRaiReason"]);e!==void 0&&c!=null&&p(e,["parameters","includeRaiReason"],c);const d=h(t,["language"]);e!==void 0&&d!=null&&p(e,["parameters","language"],d);const m=h(t,["outputMimeType"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","mimeType"],m);const g=h(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g),h(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=h(t,["imageSize"]);if(e!==void 0&&y!=null&&p(e,["parameters","sampleImageSize"],y),h(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function ZU(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=h(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const u=h(t,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const c=h(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const w=h(t,["outputMimeType"]);e!==void 0&&w!=null&&p(e,["parameters","outputOptions","mimeType"],w);const x=h(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const _=h(t,["addWatermark"]);e!==void 0&&_!=null&&p(e,["parameters","addWatermark"],_);const v=h(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const b=h(t,["imageSize"]);e!==void 0&&b!=null&&p(e,["parameters","sampleImageSize"],b);const T=h(t,["enhancePrompt"]);return e!==void 0&&T!=null&&p(e,["parameters","enhancePrompt"],T),n}function e6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&XU(i,n),n}function t6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["config"]);return i!=null&&ZU(i,n),n}function n6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>p6(o))),p(e,["generatedImages"],i)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],V1(s)),e}function r6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Ph(o))),p(e,["generatedImages"],i)}const s=h(t,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],U1(s)),e}function s6(t,e){const n={},r=h(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=h(t,["durationSeconds"]);if(e!==void 0&&s!=null&&p(e,["parameters","durationSeconds"],s),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=h(t,["aspectRatio"]);e!==void 0&&i!=null&&p(e,["parameters","aspectRatio"],i);const o=h(t,["resolution"]);e!==void 0&&o!=null&&p(e,["parameters","resolution"],o);const a=h(t,["personGeneration"]);if(e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a),h(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=h(t,["negativePrompt"]);e!==void 0&&u!=null&&p(e,["parameters","negativePrompt"],u);const c=h(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&p(e,["parameters","enhancePrompt"],c),h(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=h(t,["lastFrame"]);e!==void 0&&d!=null&&p(e,["instances[0]","lastFrame"],Mh(d));const m=h(t,["referenceImages"]);if(e!==void 0&&m!=null){let g=m;Array.isArray(g)&&(g=g.map(y=>oO(y))),p(e,["instances[0]","referenceImages"],g)}if(h(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function i6(t,e){const n={},r=h(t,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const i=h(t,["fps"]);e!==void 0&&i!=null&&p(e,["parameters","fps"],i);const o=h(t,["durationSeconds"]);e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o);const a=h(t,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const u=h(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const c=h(t,["resolution"]);e!==void 0&&c!=null&&p(e,["parameters","resolution"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=h(t,["pubsubTopic"]);e!==void 0&&m!=null&&p(e,["parameters","pubsubTopic"],m);const g=h(t,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const y=h(t,["enhancePrompt"]);e!==void 0&&y!=null&&p(e,["parameters","enhancePrompt"],y);const w=h(t,["generateAudio"]);e!==void 0&&w!=null&&p(e,["parameters","generateAudio"],w);const x=h(t,["lastFrame"]);e!==void 0&&x!=null&&p(e,["instances[0]","lastFrame"],Or(x));const _=h(t,["referenceImages"]);if(e!==void 0&&_!=null){let T=_;Array.isArray(T)&&(T=T.map(R=>aO(R))),p(e,["instances[0]","referenceImages"],T)}const v=h(t,["mask"]);e!==void 0&&v!=null&&p(e,["instances[0]","mask"],iO(v));const b=h(t,["compressionQuality"]);return e!==void 0&&b!=null&&p(e,["parameters","compressionQuality"],b),n}function o6(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],c6(o)),e}function a6(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],d6(o)),e}function l6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["image"]);i!=null&&p(n,["instances[0]","image"],Mh(i));const o=h(e,["video"]);o!=null&&p(n,["instances[0]","video"],B1(o));const a=h(e,["source"]);a!=null&&h6(a,n);const u=h(e,["config"]);return u!=null&&s6(u,n),n}function u6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["prompt"]);s!=null&&p(n,["instances[0]","prompt"],s);const i=h(e,["image"]);i!=null&&p(n,["instances[0]","image"],Or(i));const o=h(e,["video"]);o!=null&&p(n,["instances[0]","video"],z1(o));const a=h(e,["source"]);a!=null&&f6(a,n);const u=h(e,["config"]);return u!=null&&i6(u,n),n}function c6(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>g6(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function d6(t){const e={},n=h(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>y6(o))),p(e,["generatedVideos"],i)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=h(t,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function h6(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Mh(s));const i=h(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],B1(i)),n}function f6(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Or(s));const i=h(t,["video"]);return e!==void 0&&i!=null&&p(e,["instances[0]","video"],z1(i)),n}function p6(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],I6(n));const r=h(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(t,["_self"]);return s!=null&&p(e,["safetyAttributes"],V1(s)),e}function Ph(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["image"],F1(n));const r=h(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=h(t,["_self"]);s!=null&&p(e,["safetyAttributes"],U1(s));const i=h(t,["prompt"]);return i!=null&&p(e,["enhancedPrompt"],i),e}function m6(t){const e={},n=h(t,["_self"]);n!=null&&p(e,["mask"],F1(n));const r=h(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(e,["labels"],s)}return e}function g6(t){const e={},n=h(t,["video"]);return n!=null&&p(e,["video"],rO(n)),e}function y6(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],sO(n)),e}function v6(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=h(t,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const i=h(t,["candidateCount"]);i!=null&&p(e,["candidateCount"],i);const o=h(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=h(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const u=h(t,["logprobs"]);u!=null&&p(e,["logprobs"],u);const c=h(t,["maxOutputTokens"]);c!=null&&p(e,["maxOutputTokens"],c);const d=h(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const m=h(t,["presencePenalty"]);m!=null&&p(e,["presencePenalty"],m);const g=h(t,["responseLogprobs"]);g!=null&&p(e,["responseLogprobs"],g);const y=h(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const w=h(t,["responseModalities"]);w!=null&&p(e,["responseModalities"],w);const x=h(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const _=h(t,["routingConfig"]);_!=null&&p(e,["routingConfig"],_);const v=h(t,["seed"]);v!=null&&p(e,["seed"],v);const b=h(t,["speechConfig"]);b!=null&&p(e,["speechConfig"],b);const T=h(t,["stopSequences"]);T!=null&&p(e,["stopSequences"],T);const R=h(t,["temperature"]);R!=null&&p(e,["temperature"],R);const L=h(t,["thinkingConfig"]);L!=null&&p(e,["thinkingConfig"],L);const U=h(t,["topK"]);U!=null&&p(e,["topK"],U);const S=h(t,["topP"]);if(S!=null&&p(e,["topP"],S),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function x6(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],st(t,r)),n}function w6(t,e){const n={},r=h(e,["model"]);return r!=null&&p(n,["_url","name"],st(t,r)),n}function _6(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function b6(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function E6(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function T6(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);r!=null&&p(e,["imageSize"],r);const s=h(t,["outputMimeType"]);s!=null&&p(e,["imageOutputOptions","mimeType"],s);const i=h(t,["outputCompressionQuality"]);return i!=null&&p(e,["imageOutputOptions","compressionQuality"],i),e}function I6(t){const e={},n=h(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],xi(n));const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function F1(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["imageBytes"],xi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Mh(t){const e={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],xi(n));const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Or(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["imageBytes"]);r!=null&&p(e,["bytesBase64Encoded"],xi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function S6(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=h(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=h(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=h(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],N1(t,a)),r}function k6(t,e,n){const r={},s=h(e,["pageSize"]);n!==void 0&&s!=null&&p(n,["_query","pageSize"],s);const i=h(e,["pageToken"]);n!==void 0&&i!=null&&p(n,["_query","pageToken"],i);const o=h(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=h(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],N1(t,a)),r}function C6(t,e){const n={},r=h(e,["config"]);return r!=null&&S6(t,r,n),n}function A6(t,e){const n={},r=h(e,["config"]);return r!=null&&k6(t,r,n),n}function N6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let i=R1(s);Array.isArray(i)&&(i=i.map(o=>gm(o))),p(e,["models"],i)}return e}function R6(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["_self"]);if(s!=null){let i=R1(s);Array.isArray(i)&&(i=i.map(o=>ym(o))),p(e,["models"],i)}return e}function P6(t){const e={},n=h(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const r=h(t,["segmentationClasses"]);r!=null&&p(e,["maskClasses"],r);const s=h(t,["maskDilation"]);return s!=null&&p(e,["dilation"],s),e}function gm(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);s!=null&&p(e,["description"],s);const i=h(t,["version"]);i!=null&&p(e,["version"],i);const o=h(t,["_self"]);o!=null&&p(e,["tunedModelInfo"],K6(o));const a=h(t,["inputTokenLimit"]);a!=null&&p(e,["inputTokenLimit"],a);const u=h(t,["outputTokenLimit"]);u!=null&&p(e,["outputTokenLimit"],u);const c=h(t,["supportedGenerationMethods"]);c!=null&&p(e,["supportedActions"],c);const d=h(t,["temperature"]);d!=null&&p(e,["temperature"],d);const m=h(t,["maxTemperature"]);m!=null&&p(e,["maxTemperature"],m);const g=h(t,["topP"]);g!=null&&p(e,["topP"],g);const y=h(t,["topK"]);y!=null&&p(e,["topK"],y);const w=h(t,["thinking"]);return w!=null&&p(e,["thinking"],w),e}function ym(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);s!=null&&p(e,["description"],s);const i=h(t,["versionId"]);i!=null&&p(e,["version"],i);const o=h(t,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>$U(g))),p(e,["endpoints"],m)}const a=h(t,["labels"]);a!=null&&p(e,["labels"],a);const u=h(t,["_self"]);u!=null&&p(e,["tunedModelInfo"],J6(u));const c=h(t,["defaultCheckpointId"]);c!=null&&p(e,["defaultCheckpointId"],c);const d=h(t,["checkpoints"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),p(e,["checkpoints"],m)}return e}function M6(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],qU(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],WU(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const u=h(t,["inlineData"]);u!=null&&p(e,["inlineData"],vU(u));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function D6(t){const e={},n=h(t,["productImage"]);return n!=null&&p(e,["image"],Or(n)),e}function L6(t,e){const n={},r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=h(t,["baseSteps"]);e!==void 0&&s!=null&&p(e,["parameters","baseSteps"],s);const i=h(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=h(t,["seed"]);e!==void 0&&o!=null&&p(e,["parameters","seed"],o);const a=h(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const u=h(t,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const c=h(t,["addWatermark"]);e!==void 0&&c!=null&&p(e,["parameters","addWatermark"],c);const d=h(t,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const m=h(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const g=h(t,["enhancePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","enhancePrompt"],g);const y=h(t,["labels"]);return e!==void 0&&y!=null&&p(e,["labels"],y),n}function j6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["source"]);s!=null&&V6(s,n);const i=h(e,["config"]);return i!=null&&L6(i,n),n}function F6(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Ph(s))),p(e,["generatedImages"],r)}return e}function V6(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["personImage"]);e!==void 0&&s!=null&&p(e,["instances[0]","personImage","image"],Or(s));const i=h(t,["productImages"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>D6(a))),p(e,["instances[0]","productImages"],o)}return n}function U6(t){const e={},n=h(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],Or(n));const r=h(t,["referenceId"]);r!=null&&p(e,["referenceId"],r);const s=h(t,["referenceType"]);s!=null&&p(e,["referenceType"],s);const i=h(t,["maskImageConfig"]);i!=null&&p(e,["maskImageConfig"],P6(i));const o=h(t,["controlImageConfig"]);o!=null&&p(e,["controlImageConfig"],IU(o));const a=h(t,["styleImageConfig"]);a!=null&&p(e,["styleImageConfig"],a);const u=h(t,["subjectImageConfig"]);return u!=null&&p(e,["subjectImageConfig"],u),e}function V1(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function U1(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=h(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=h(t,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function O6(t){const e={},n=h(t,["category"]);if(n!=null&&p(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function B6(t){const e={},n=h(t,["image"]);return n!=null&&p(e,["image"],Or(n)),e}function z6(t,e){const n={},r=h(t,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const s=h(t,["maxPredictions"]);e!==void 0&&s!=null&&p(e,["parameters","maxPredictions"],s);const i=h(t,["confidenceThreshold"]);e!==void 0&&i!=null&&p(e,["parameters","confidenceThreshold"],i);const o=h(t,["maskDilation"]);e!==void 0&&o!=null&&p(e,["parameters","maskDilation"],o);const a=h(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","binaryColorThreshold"],a);const u=h(t,["labels"]);return e!==void 0&&u!=null&&p(e,["labels"],u),n}function G6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["source"]);s!=null&&$6(s,n);const i=h(e,["config"]);return i!=null&&z6(i,n),n}function H6(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>m6(s))),p(e,["generatedMasks"],r)}return e}function $6(t,e){const n={},r=h(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=h(t,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Or(s));const i=h(t,["scribbleImage"]);return e!==void 0&&i!=null&&p(e,["instances[0]","scribble"],B6(i)),n}function q6(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],KU(n));const r=h(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function W6(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],_6(a));const u=h(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],b6(u));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function O1(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>JU(g))),p(e,["functionDeclarations"],m)}const r=h(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const s=h(t,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const i=h(t,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=h(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=h(t,["googleMaps"]);u!=null&&p(e,["googleMaps"],u);const c=h(t,["googleSearch"]);c!=null&&p(e,["googleSearch"],c);const d=h(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function K6(t){const e={},n=h(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function J6(t){const e={},n=h(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const r=h(t,["createTime"]);r!=null&&p(e,["createTime"],r);const s=h(t,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function Y6(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function Q6(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const i=h(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&p(e,["defaultCheckpointId"],i),n}function X6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","name"],st(t,r));const s=h(e,["config"]);return s!=null&&Y6(s,n),n}function Z6(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["config"]);return s!=null&&Q6(s,n),n}function eO(t,e){const n={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=h(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&p(e,["parameters","safetySetting"],s);const i=h(t,["personGeneration"]);e!==void 0&&i!=null&&p(e,["parameters","personGeneration"],i);const o=h(t,["includeRaiReason"]);e!==void 0&&o!=null&&p(e,["parameters","includeRaiReason"],o);const a=h(t,["outputMimeType"]);e!==void 0&&a!=null&&p(e,["parameters","outputOptions","mimeType"],a);const u=h(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&p(e,["parameters","outputOptions","compressionQuality"],u);const c=h(t,["enhanceInputImage"]);e!==void 0&&c!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],c);const d=h(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const m=h(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=h(t,["numberOfImages"]);e!==void 0&&g!=null&&p(e,["parameters","sampleCount"],g);const y=h(t,["mode"]);return e!==void 0&&y!=null&&p(e,["parameters","mode"],y),n}function tO(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],st(t,r));const s=h(e,["image"]);s!=null&&p(n,["instances[0]","image"],Or(s));const i=h(e,["upscaleFactor"]);i!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],i);const o=h(e,["config"]);return o!=null&&eO(o,n),n}function nO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Ph(i))),p(e,["generatedImages"],s)}return e}function rO(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],xi(r));const s=h(t,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function sO(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],xi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function iO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["_self"],Or(n));const r=h(t,["maskMode"]);return r!=null&&p(e,["maskMode"],r),e}function oO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["image"],Mh(n));const r=h(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function aO(t){const e={},n=h(t,["image"]);n!=null&&p(e,["image"],Or(n));const r=h(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function B1(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["videoBytes"]);r!=null&&p(e,["encodedVideo"],xi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["encoding"],s),e}function z1(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const r=h(t,["videoBytes"]);r!=null&&p(e,["bytesBase64Encoded"],xi(r));const s=h(t,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lO(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["displayName"],r),n}function uO(t){const e={},n=h(t,["config"]);return n!=null&&lO(n,e),e}function cO(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function dO(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&cO(r,e),e}function hO(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function fO(t,e){const n={},r=h(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["customMetadata"],i)}const s=h(t,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),n}function pO(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const s=h(t,["done"]);s!=null&&p(e,["done"],s);const i=h(t,["error"]);i!=null&&p(e,["error"],i);const o=h(t,["response"]);return o!=null&&p(e,["response"],gO(o)),e}function mO(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["fileName"]);r!=null&&p(e,["fileName"],r);const s=h(t,["config"]);return s!=null&&fO(s,e),e}function gO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const s=h(t,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function yO(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function vO(t){const e={},n=h(t,["config"]);return n!=null&&yO(n,e),e}function xO(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["fileSearchStores"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["fileSearchStores"],i)}return e}function G1(t,e){const n={},r=h(t,["mimeType"]);e!==void 0&&r!=null&&p(e,["mimeType"],r);const s=h(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const i=h(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const o=h(t,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),n}function wO(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["config"]);return r!=null&&G1(r,e),e}function _O(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bO="Content-Type",EO="X-Server-Timeout",TO="User-Agent",vm="x-goog-api-client",IO="1.34.0",SO=`google-genai-sdk/${IO}`,kO="v1beta1",CO="v1beta";class AO{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:kO,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:CO,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.unaryApiCall(s,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,i]of Object.entries(n))typeof i=="object"?r[s]=Object.assign(Object.assign({},r[s]),i):i!==void 0&&(r[s]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),e.abortSignal),this.streamApiCall(s,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>i.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}s&&s.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&NO(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await N_(s),new fm(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await N_(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Pr(this,arguments,function*(){var r;const s=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";const a="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:d}=yield Oe(s.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(d,{stream:!0});try{const w=JSON.parse(m);if("error"in w){const x=JSON.parse(JSON.stringify(w.error)),_=x.status,v=x.code,b=`got status: ${_}. ${JSON.stringify(w)}`;if(v>=400&&v<600)throw new Nh({message:b,status:v})}}catch(w){if(w.name==="ApiError")throw w}o+=m;let g=-1,y=0;for(;;){g=-1,y=0;for(const _ of u){const v=o.indexOf(_);v!==-1&&(g===-1||v<g)&&(g=v,y=_.length)}if(g===-1)break;const w=o.substring(0,g);o=o.substring(g+y);const x=w.trim();if(x.startsWith(a)){const _=x.substring(a.length).trim();try{const v=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Oe(new fm(v))}catch(v){throw new Error(`exception parsing stream chunk ${_}. ${v}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=SO+" "+this.clientOptions.userAgentExtra;return e[TO]=n,e[vm]=n,e[bO]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,i]of Object.entries(e.headers))r.append(s,i);e.timeout&&e.timeout>0&&r.append(EO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const i=this.clientOptions.uploader,o=await i.stat(e);s.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const u={file:s},c=this.getFileName(e),d=Ee("upload/v1beta/files",u._url),m=await this.fetchUploadUrl(d,s.sizeBytes,s.mimeType,c,u,n==null?void 0:n.httpOptions);return i.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var s;const i=this.clientOptions.uploader,o=await i.stat(n),a=String(o.size),u=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:o.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),m={};r!=null&&G1(r,m);const g=await this.fetchUploadUrl(c,a,u,d,m,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,i,o){var a;let u={};o?u=o:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const c=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:u});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function N_(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new Nh({message:s,status:n}):new Error(s)}}function NO(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,o){const a=Object.assign({},i);for(const u in o)if(Object.prototype.hasOwnProperty.call(o,u)){const c=o[u],d=a[u];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?a[u]=r(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),a[u]=c)}return a}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RO="mcp_used/unknown";let PO=!1;function H1(t){for(const e of t)if(MO(e)||typeof e=="object"&&"inputSchema"in e)return!0;return PO}function $1(t){var e;const n=(e=t[vm])!==null&&e!==void 0?e:"";t[vm]=(n+` ${RO}`).trimStart()}function MO(t){return t!==null&&typeof t=="object"&&t instanceof B0}function DO(t){return Pr(this,arguments,function*(n,r=100){let s,i=0;for(;i<r;){const o=yield Oe(n.listTools({cursor:s}));for(const a of o.tools)yield yield Oe(a),i++;if(!o.nextCursor)break;s=o.nextCursor}})}class B0{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new B0(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const i={},o=[];for(const d of this.mcpClients)try{for(var a=!0,u=(n=void 0,Mr(DO(d))),c;c=await u.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const m=s;o.push(m);const g=m.name;if(i[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);i[g]=d}}catch(m){n={error:m}}finally{try{!a&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),hF(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const o=await s.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function LO(t,e,n){const r=new sF;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class jO{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),o=UO(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),u=`${s}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const d=new Promise(T=>{c=T}),m=e.callbacks,g=function(){c({})},y=this.apiClient,w={onopen:g,onmessage:T=>{LO(y,m.onmessage,T)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(T){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(T){}},x=this.webSocketFactory.create(u,VO(o),w);x.connect(),await d;const b={setup:{model:st(this.apiClient,e.model)}};return x.send(JSON.stringify(b)),new FO(x,this.apiClient)}}class FO{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=uU(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=lU(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Do.PLAY)}pause(){this.sendPlaybackControl(Do.PAUSE)}stop(){this.sendPlaybackControl(Do.STOP)}resetContext(){this.sendPlaybackControl(Do.RESET_CONTEXT)}close(){this.conn.close()}}function VO(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function UO(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function BO(t,e,n){const r=new rF;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const i=JSON.parse(s);if(t.isVertexAI()){const o=hU(i);Object.assign(r,o)}else Object.assign(r,i);e(r)}class zO{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new jO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,i,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&H1(e.config.tools)&&$1(m);const g=qO(m);if(this.apiClient.isVertexAI())d=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,d);else{const N=this.apiClient.getApiKey();let M="BidiGenerateContent",V="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",V="access_token"),d=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${M}?${V}=${N}`}let y=()=>{};const w=new Promise(N=>{y=N}),x=e.callbacks,_=function(){var N;(N=x==null?void 0:x.onopen)===null||N===void 0||N.call(x),y({})},v=this.apiClient,b={onopen:_,onmessage:N=>{BO(v,x.onmessage,N)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(N){}},T=this.webSocketFactory.create(d,$O(g),b);T.connect(),await w;let R=st(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const N=this.apiClient.getProject(),M=this.apiClient.getLocation();R=`projects/${N}/locations/${M}/`+R}let L={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Md.AUDIO]}:e.config.responseModalities=[Md.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],S=[];for(const N of U)if(this.isCallableTool(N)){const M=N;S.push(await M.tool())}else S.push(N);S.length>0&&(e.config.tools=S);const C={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=aU(this.apiClient,C):L=oU(this.apiClient,C),delete L.config,T.send(JSON.stringify(L)),new HO(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const GO={turnComplete:!0};class HO{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=fr(n.turns),e.isVertexAI()||(r=r.map(s=>Rh(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(OO)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},GO),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:dU(e)}:n={realtimeInput:cU(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function $O(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function qO(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R_=10;function P_(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Jo(o)){s=!0;break}if(!s)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Jo(t){return"callTool"in t&&typeof t.callTool=="function"}function WO(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Jo(s)))!==null&&r!==void 0?r:!1}function M_(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(Jo(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(s)}),n}function D_(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KO extends Ns{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,i,o,a;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!WO(n)||P_(n.config))return await this.generateContentInternal(u);const c=M_(n);if(c.length>0){const x=c.map(_=>`tools[${_}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let d,m;const g=fr(u.contents),y=(i=(s=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:R_;let w=0;for(;w<y&&(d=await this.generateContentInternal(u),!(!d.functionCalls||d.functionCalls.length===0));){const x=d.candidates[0].content,_=[];for(const v of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Jo(v)){const T=await v.callTool(d.functionCalls);_.push(...T)}w++,m={role:"user",parts:_},u.contents=fr(u.contents),u.contents.push(x),u.contents.push(m),D_(u.config)&&(g.push(x),g.push(m))}return D_(u.config)&&(d.automaticFunctionCallingHistory=g),d},this.generateContentStream=async n=>{var r,s,i,o,a;if(this.maybeMoveToResponseJsonSchem(n),P_(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const u=M_(n);if(u.length>0){const m=u.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(i=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,d=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let i;const o=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((s=u==null?void 0:u.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?i=u==null?void 0:u.safetyAttributes:o.push(u);let a;return i?a={generatedImages:o,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new lo(Ss.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,i,o,a,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(i=n.source)===null||i===void 0?void 0:i.video)===null||o===void 0)&&o.uri&&(!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const o=await Promise.all(i.map(async u=>Jo(u)?await u.tool():u)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&H1(e.config.tools)){const u=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),$1(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,s;const i=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Jo(o)){const a=o,u=await a.tool();for(const c of(s=u.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,a)}}return i}async processAfcStream(e){var n,r,s;const i=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:R_;let o=!1,a=0;const u=await this.initAfcToolsMap(e);return function(c,d,m){return Pr(this,arguments,function*(){for(var g,y,w,x,_,v;a<i;){o&&(a++,o=!1);const L=yield Oe(c.processParamsMaybeAddMcpUsage(m)),U=yield Oe(c.generateContentStreamInternal(L)),S=[],C=[];try{for(var b=!0,T=(y=void 0,Mr(U)),R;R=yield Oe(T.next()),g=R.done,!g;b=!0){x=R.value,b=!1;const N=x;if(yield yield Oe(N),N.candidates&&(!((_=N.candidates[0])===null||_===void 0)&&_.content)){C.push(N.candidates[0].content);for(const M of(v=N.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<i&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(M.functionCall.name)){const V=yield Oe(d.get(M.functionCall.name).callTool([M.functionCall]));S.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(N){y={error:N}}finally{try{!b&&!g&&(w=T.return)&&(yield Oe(w.call(T)))}finally{if(y)throw y.error}}if(S.length>0){o=!0;const N=new Ja;N.candidates=[{content:{role:"user",parts:S}}],yield yield Oe(N);const M=[];M.push(...C),M.push({role:"user",parts:S});const V=fr(m.contents).concat(M);m.contents=V}else break}})}(this,u,e)}async generateContentInternal(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=k_(this.apiClient,e);return a=Ee("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=A_(d),g=new Ja;return Object.assign(g,m),g})}else{const c=S_(this.apiClient,e);return a=Ee("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=C_(d),g=new Ja;return Object.assign(g,m),g})}}async generateContentStreamInternal(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=k_(this.apiClient,e);return a=Ee("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return Pr(this,arguments,function*(){var g,y,w,x;try{for(var _=!0,v=Mr(m),b;b=yield Oe(v.next()),g=b.done,!g;_=!0){x=b.value,_=!1;const T=x,R=A_(yield Oe(T.json()));R.sdkHttpResponse={headers:T.headers};const L=new Ja;Object.assign(L,R),yield yield Oe(L)}}catch(T){y={error:T}}finally{try{!_&&!g&&(w=v.return)&&(yield Oe(w.call(v)))}finally{if(y)throw y.error}}})})}else{const c=S_(this.apiClient,e);return a=Ee("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(m){return Pr(this,arguments,function*(){var g,y,w,x;try{for(var _=!0,v=Mr(m),b;b=yield Oe(v.next()),g=b.done,!g;_=!0){x=b.value,_=!1;const T=x,R=C_(yield Oe(T.json()));R.sdkHttpResponse={headers:T.headers};const L=new Ja;Object.assign(L,R),yield yield Oe(L)}}catch(T){y={error:T}}finally{try{!_&&!g&&(w=v.return)&&(yield Oe(w.call(v)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=zU(this.apiClient,e);return a=Ee("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=HU(d),g=new u_;return Object.assign(g,m),g})}else{const c=BU(this.apiClient,e);return a=Ee("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=GU(d),g=new u_;return Object.assign(g,m),g})}}async generateImagesInternal(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=t6(this.apiClient,e);return a=Ee("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=r6(d),g=new c_;return Object.assign(g,m),g})}else{const c=e6(this.apiClient,e);return a=Ee("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=n6(d),g=new c_;return Object.assign(g,m),g})}}async editImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=FU(this.apiClient,e);return i=Ee("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),s.then(u=>{const c=VU(u),d=new qj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=tO(this.apiClient,e);return i=Ee("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),s.then(u=>{const c=nO(u),d=new Wj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=j6(this.apiClient,e);return i=Ee("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const c=F6(u),d=new Kj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=G6(this.apiClient,e);return i=Ee("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const c=H6(u),d=new Jj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=w6(this.apiClient,e);return a=Ee("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>ym(d))}else{const c=x6(this.apiClient,e);return a=Ee("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>gm(d))}}async listInternal(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=A6(this.apiClient,e);return a=Ee("{models_url}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=R6(d),g=new d_;return Object.assign(g,m),g})}else{const c=C6(this.apiClient,e);return a=Ee("{models_url}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=N6(d),g=new d_;return Object.assign(g,m),g})}}async update(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=Z6(this.apiClient,e);return a=Ee("{model}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>ym(d))}else{const c=X6(this.apiClient,e);return a=Ee("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>gm(d))}}async delete(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=MU(this.apiClient,e);return a=Ee("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=LU(d),g=new h_;return Object.assign(g,m),g})}else{const c=PU(this.apiClient,e);return a=Ee("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=DU(d),g=new h_;return Object.assign(g,m),g})}}async countTokens(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=AU(this.apiClient,e);return a=Ee("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=RU(d),g=new f_;return Object.assign(g,m),g})}else{const c=CU(this.apiClient,e);return a=Ee("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=NU(d),g=new f_;return Object.assign(g,m),g})}}async computeTokens(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=_U(this.apiClient,e);return i=Ee("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),s.then(u=>{const c=bU(u),d=new Yj;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=u6(this.apiClient,e);return a=Ee("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const m=a6(d),g=new Dd;return Object.assign(g,m),g})}else{const c=l6(this.apiClient,e);return a=Ee("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const m=o6(d),g=new Dd;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JO extends Ns{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=Oj(e);return a=Ee("{operationName}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}else{const c=Uj(e);return a=Ee("{operationName}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=Pj(e);return i=Ee("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YO(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function QO(t){const e={},n=h(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>oB(i))),p(e,["parts"],s)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function XO(t,e,n){const r={},s=h(e,["expireTime"]);n!==void 0&&s!=null&&p(n,["expireTime"],s);const i=h(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&p(n,["newSessionExpireTime"],i);const o=h(e,["uses"]);n!==void 0&&o!=null&&p(n,["uses"],o);const a=h(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&p(n,["bidiGenerateContentSetup"],iB(t,a));const u=h(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&p(n,["fieldMask"],u),r}function ZO(t,e){const n={},r=h(e,["config"]);return r!=null&&p(n,["config"],XO(t,r,n)),n}function eB(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function tB(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const s=h(t,["name"]);if(s!=null&&p(e,["name"],s),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nB(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function rB(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function sB(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=h(t,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const i=h(t,["temperature"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","temperature"],i);const o=h(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const u=h(t,["maxOutputTokens"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","maxOutputTokens"],u);const c=h(t,["mediaResolution"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","mediaResolution"],c);const d=h(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const m=h(t,["speechConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","speechConfig"],O0(m));const g=h(t,["thinkingConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","thinkingConfig"],g);const y=h(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=h(t,["systemInstruction"]);e!==void 0&&w!=null&&p(e,["setup","systemInstruction"],QO(xn(w)));const x=h(t,["tools"]);if(e!==void 0&&x!=null){let U=Aa(x);Array.isArray(U)&&(U=U.map(S=>lB(Ca(S)))),p(e,["setup","tools"],U)}const _=h(t,["sessionResumption"]);e!==void 0&&_!=null&&p(e,["setup","sessionResumption"],aB(_));const v=h(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const b=h(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","outputAudioTranscription"],b);const T=h(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&p(e,["setup","realtimeInputConfig"],T);const R=h(t,["contextWindowCompression"]);e!==void 0&&R!=null&&p(e,["setup","contextWindowCompression"],R);const L=h(t,["proactivity"]);if(e!==void 0&&L!=null&&p(e,["setup","proactivity"],L),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function iB(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],st(t,r));const s=h(e,["config"]);return s!=null&&p(n,["config"],sB(s,n)),n}function oB(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=h(t,["executableCode"]);s!=null&&p(e,["executableCode"],s);const i=h(t,["fileData"]);i!=null&&p(e,["fileData"],eB(i));const o=h(t,["functionCall"]);o!=null&&p(e,["functionCall"],tB(o));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const u=h(t,["inlineData"]);u!=null&&p(e,["inlineData"],YO(u));const c=h(t,["text"]);c!=null&&p(e,["text"],c);const d=h(t,["thought"]);d!=null&&p(e,["thought"],d);const m=h(t,["thoughtSignature"]);m!=null&&p(e,["thoughtSignature"],m);const g=h(t,["videoMetadata"]);return g!=null&&p(e,["videoMetadata"],g),e}function aB(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lB(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["functionDeclarations"],d)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const s=h(t,["computerUse"]);s!=null&&p(e,["computerUse"],s);const i=h(t,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],nB(a));const u=h(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],rB(u));const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uB(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(i=>`${n}.${i}`);e.push(...s)}else e.push(n)}return e.join(",")}function cB(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const i=uB(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(c=>o.includes(c)?`generationConfig.${c}`:c));const u=[];i&&u.push(i),a.length>0&&u.push(...a),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class dB extends Ns{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=ZO(this.apiClient,e);i=Ee("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const u=cB(a,e.config);return s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hB(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function fB(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&hB(r,e),e}function pB(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function mB(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=h(t,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),n}function gB(t){const e={},n=h(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const r=h(t,["config"]);return r!=null&&mB(r,e),e}function yB(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=h(t,["documents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vB extends Ns{constructor(e){super(),this.apiClient=e,this.list=async n=>new lo(Ss.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=pB(e);return i=Ee("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=fB(e);s=Ee("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=gB(e);return i=Ee("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const c=yB(u),d=new Qj;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xB extends Ns{constructor(e,n=new vB(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new lo(Ss.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=uO(e);return i=Ee("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async get(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hO(e);return i=Ee("{name}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(e){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=dO(e);s=Ee("{name}",o._url),i=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=vO(e);return i=Ee("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const c=xO(u),d=new Xj;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=wO(e);return i=Ee("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const c=_O(u),d=new Zj;return Object.assign(d,c),d})}}async importFile(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=mO(e);return i=Ee("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const c=pO(u),d=new L0;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let q1=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return q1=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const wB=()=>q1();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xm(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const wm=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gr extends Error{}class Rn extends gr{constructor(e,n,r,s){super(`${Rn.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new Dh({message:r,cause:wm(n)});const i=n;return e===400?new K1(e,i,r,s):e===401?new J1(e,i,r,s):e===403?new Y1(e,i,r,s):e===404?new Q1(e,i,r,s):e===409?new X1(e,i,r,s):e===422?new Z1(e,i,r,s):e===429?new ek(e,i,r,s):e>=500?new tk(e,i,r,s):new Rn(e,i,r,s)}}class _m extends Rn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Dh extends Rn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class W1 extends Dh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class K1 extends Rn{}class J1 extends Rn{}class Y1 extends Rn{}class Q1 extends Rn{}class X1 extends Rn{}class Z1 extends Rn{}class ek extends Rn{}class tk extends Rn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _B=/^[a-z][a-z0-9+.-]*:/i,bB=t=>_B.test(t);let bm=t=>(bm=Array.isArray,bm(t));const EB=bm;let TB=EB;const L_=TB;function IB(t){if(!t)return!0;for(const e in t)return!1;return!0}function SB(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const kB=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new gr(`${t} must be an integer`);if(e<0)throw new gr(`${t} must be a positive integer`);return e},CB=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AB=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _o="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NB(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const RB=()=>{var t,e,n,r,s;const i=NB();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_o,"X-Stainless-OS":F_(Deno.build.os),"X-Stainless-Arch":j_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_o,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_o,"X-Stainless-OS":F_((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":j_((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const o=PB();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_o,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_o,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function PB(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const j_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",F_=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let dc;const MB=()=>dc??(dc=RB());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DB(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function nk(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function LB(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return nk({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function rk(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function jB(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),s=r.cancel();r.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FB=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sk=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Bf(t,e,n){return sk(),new File(t,e??"unknown_file",n)}function VB(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const UB=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ik=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",OB=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&ik(t),BB=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function zB(t,e,n){if(sk(),t=await t,OB(t))return t instanceof File?t:Bf([await t.arrayBuffer()],t.name);if(BB(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Bf(await Em(s),e,n)}const r=await Em(t);if(e||(e=VB(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Bf(r,e,n)}async function Em(t){var e,n,r,s,i;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(ik(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(UB(t))try{for(var a=!0,u=Mr(t),c;c=await u.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const d=s;o.push(...await Em(d))}}catch(d){n={error:d}}finally{try{!a&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}else{const d=(i=t==null?void 0:t.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${GB(t)}`)}return o}function GB(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ok{constructor(e){this._client=e}}ok._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ak(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const V_=Object.freeze(Object.create(null)),HB=(t=ak)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],o=n.reduce((d,m,g)=>{var y,w,x;/[?#]/.test(m)&&(s=!0);const _=r[g];let v=(s?encodeURIComponent:t)(""+_);return g!==r.length&&(_==null||typeof _=="object"&&_.toString===((x=Object.getPrototypeOf((w=Object.getPrototypeOf((y=_.hasOwnProperty)!==null&&y!==void 0?y:V_))!==null&&w!==void 0?w:V_))===null||x===void 0?void 0:x.toString))&&(v=_+"",i.push({start:d.length+m.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),d+m+(g===r.length?"":v)},""),a=o.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=u.exec(a))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((d,m)=>d.start-m.start),i.length>0){let d=0;const m=i.reduce((g,y)=>{const w=" ".repeat(y.start-d),x="^".repeat(y.length);return d=y.start+y.length,g+w+x},"");throw new gr(`Path parameters result in path with invalid segments:
${i.map(g=>g.error).join(`
`)}
${o}
${m}`)}return o},hc=HB(ak);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lk extends ok{create(e,n){var r;const{api_version:s=this._client.apiVersion}=e,i=jd(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new gr("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new gr("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(hc`/${s}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(hc`/${s}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(hc`/${s}/interactions/${e}/cancel`,r)}get(e,n={},r){var s;const i=n??{},{api_version:o=this._client.apiVersion}=i,a=jd(i,["api_version"]);return this._client.get(hc`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}lk._key=Object.freeze(["interactions"]);class uk extends lk{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $B(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let fc;function z0(t){let e;return(fc??(e=new globalThis.TextEncoder,fc=e.encode.bind(e)))(t)}let pc;function U_(t){let e;return(pc??(e=new globalThis.TextDecoder,pc=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?z0(e):e;this.buffer=$B([this.buffer,n]);const r=[];let s;for(;(s=qB(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(U_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,o=U_(this.buffer.subarray(0,i));r.push(o),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Lh.NEWLINE_CHARS=new Set([`
`,"\r"]);Lh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function qB(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function WB(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fd={off:0,error:200,warn:300,info:400,debug:500},O_=(t,e,n)=>{if(t){if(SB(Fd,t))return t;In(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Fd))}`)}};function il(){}function mc(t,e,n){return!e||Fd[t]>Fd[n]?il:e[t].bind(e)}const KB={error:il,warn:il,info:il,debug:il};let B_=new WeakMap;function In(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return KB;const s=B_.get(n);if(s&&s[0]===r)return s[1];const i={error:mc("error",n,r),warn:mc("warn",n,r),info:mc("info",n,r),debug:mc("debug",n,r)};return B_.set(n,[r,i]),i}const Pi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lo{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let s=!1;const i=r?In(r):console;function o(){return Pr(this,arguments,function*(){var u,c,d,m;if(s)throw new gr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,w=Mr(JB(e,n)),x;x=yield Oe(w.next()),u=x.done,!u;y=!0){m=x.value,y=!1;const _=m;if(!g)if(_.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield Oe(JSON.parse(_.data))}catch(v){throw i.error("Could not parse message into JSON:",_.data),i.error("From chunk:",_.raw),v}}}catch(_){c={error:_}}finally{try{!y&&!u&&(d=w.return)&&(yield Oe(d.call(w)))}finally{if(c)throw c.error}}g=!0}catch(_){if(xm(_))return yield Oe(void 0);throw _}finally{g||n.abort()}})}return new Lo(o,n,r)}static fromReadableStream(e,n,r){let s=!1;function i(){return Pr(this,arguments,function*(){var u,c,d,m;const g=new Lh,y=rk(e);try{for(var w=!0,x=Mr(y),_;_=yield Oe(x.next()),u=_.done,!u;w=!0){m=_.value,w=!1;const v=m;for(const b of g.decode(v))yield yield Oe(b)}}catch(v){c={error:v}}finally{try{!w&&!u&&(d=x.return)&&(yield Oe(d.call(x)))}finally{if(c)throw c.error}}for(const v of g.flush())yield yield Oe(v)})}function o(){return Pr(this,arguments,function*(){var u,c,d,m;if(s)throw new gr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let g=!1;try{try{for(var y=!0,w=Mr(i()),x;x=yield Oe(w.next()),u=x.done,!u;y=!0){m=x.value,y=!1;const _=m;g||_&&(yield yield Oe(JSON.parse(_)))}}catch(_){c={error:_}}finally{try{!y&&!u&&(d=w.return)&&(yield Oe(d.call(w)))}finally{if(c)throw c.error}}g=!0}catch(_){if(xm(_))return yield Oe(void 0);throw _}finally{g||n.abort()}})}return new Lo(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=r.next();e.push(o),n.push(o)}return i.shift()}});return[new Lo(()=>s(e),this.controller,this.client),new Lo(()=>s(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return nk({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const o=z0(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function JB(t,e){return Pr(this,arguments,function*(){var r,s,i,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new gr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new gr("Attempted to iterate over a response with no body");const a=new QB,u=new Lh,c=rk(t.body);try{for(var d=!0,m=Mr(YB(c)),g;g=yield Oe(m.next()),r=g.done,!r;d=!0){o=g.value,d=!1;const y=o;for(const w of u.decode(y)){const x=a.decode(w);x&&(yield yield Oe(x))}}}catch(y){s={error:y}}finally{try{!d&&!r&&(i=m.return)&&(yield Oe(i.call(m)))}finally{if(s)throw s.error}}for(const y of u.flush()){const w=a.decode(y);w&&(yield yield Oe(w))}})}function YB(t){return Pr(this,arguments,function*(){var n,r,s,i;let o=new Uint8Array;try{for(var a=!0,u=Mr(t),c;c=yield Oe(u.next()),n=c.done,!n;a=!0){i=c.value,a=!1;const d=i;if(d==null)continue;const m=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?z0(d):d;let g=new Uint8Array(o.length+m.length);g.set(o),g.set(m,o.length),o=g;let y;for(;(y=WB(o))!==-1;)yield yield Oe(o.slice(0,y)),o=o.slice(y)}}catch(d){r={error:d}}finally{try{!a&&!n&&(s=u.return)&&(yield Oe(s.call(u)))}finally{if(r)throw r.error}}o.length>0&&(yield yield Oe(o))})}class QB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=XB(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function XB(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ZB(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,o=await(async()=>{var a;if(e.options.stream)return In(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Lo.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const u=n.headers.get("content-type"),c=(a=u==null?void 0:u.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return In(t).debug(`[${r}] response parsed`,Pi({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G0 extends Promise{constructor(e,n,r=ZB){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new G0(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ck=Symbol("brand.privateNullableHeaders");function*e9(t){if(!t)return;if(ck in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():L_(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=L_(r[1])?r[1]:[r[1]];let o=!1;for(const a of i)a!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,a])}}const Ya=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,o]of e9(r)){const a=i.toLowerCase();s.has(a)||(e.delete(i),s.add(a)),o===null?(e.delete(i),n.add(a)):(e.append(i,o),n.delete(a))}}return{[ck]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zf=t=>{var e,n,r,s,i,o;if(typeof globalThis.process<"u")return(r=(n=(e=Sj)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(i=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||i===void 0?void 0:i.call(s,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dk;class jh{constructor(e){var n,r,s,i,o,a,u,{baseURL:c=zf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=zf("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,g=jd(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:d,apiVersion:m},g),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(r=y.timeout)!==null&&r!==void 0?r:jh.DEFAULT_TIMEOUT,this.logger=(s=y.logger)!==null&&s!==void 0?s:console;const w="warn";this.logLevel=w,this.logLevel=(o=(i=O_(y.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:O_(zf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:w,this.fetchOptions=y.fetchOptions,this.maxRetries=(a=y.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(u=y.fetch)!==null&&u!==void 0?u:DB(),this.encoder=FB,this._options=y,this.apiKey=d,this.apiVersion=m,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Ya([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Ya([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ya([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new gr(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${_o}`}defaultIdempotencyKey(){return`stainless-node-retry-${wB()}`}makeStatusError(e,n,r,s){return Rn.generate(e,n,r,s)}buildURL(e,n,r){const s=!this.baseURLOverridden()&&r||this.baseURL,i=bB(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return IB(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:e,path:n},s)))}request(e,n=null){return new G0(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var s,i,o;const a=await e,u=(s=a.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=u),await this.prepareOptions(a);const{req:c,url:d,timeout:m}=await this.buildRequest(a,{retryCount:u-n});await this.prepareRequest(c,{url:d,options:a});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=r===void 0?"":`, retryOf: ${r}`,w=Date.now();if(In(this).debug(`[${g}] sending request`,Pi({retryOfRequestLogID:r,method:a.method,url:d,options:a,headers:c.headers})),!((i=a.signal)===null||i===void 0)&&i.aborted)throw new _m;const x=new AbortController,_=await this.fetchWithTimeout(d,c,m,x).catch(wm),v=Date.now();if(_ instanceof globalThis.Error){const T=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new _m;const R=xm(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(n)return In(this).info(`[${g}] connection ${R?"timed out":"failed"} - ${T}`),In(this).debug(`[${g}] connection ${R?"timed out":"failed"} (${T})`,Pi({retryOfRequestLogID:r,url:d,durationMs:v-w,message:_.message})),this.retryRequest(a,n,r??g);throw In(this).info(`[${g}] connection ${R?"timed out":"failed"} - error; no more retries left`),In(this).debug(`[${g}] connection ${R?"timed out":"failed"} (error; no more retries left)`,Pi({retryOfRequestLogID:r,url:d,durationMs:v-w,message:_.message})),R?new W1:new Dh({cause:_})}const b=`[${g}${y}] ${c.method} ${d} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${v-w}ms`;if(!_.ok){const T=await this.shouldRetry(_);if(n&&T){const N=`retrying, ${n} attempts remaining`;return await jB(_.body),In(this).info(`${b} - ${N}`),In(this).debug(`[${g}] response error (${N})`,Pi({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:v-w})),this.retryRequest(a,n,r??g,_.headers)}const R=T?"error; no more retries left":"error; not retryable";In(this).info(`${b} - ${R}`);const L=await _.text().catch(N=>wm(N).message),U=CB(L),S=U?void 0:L;throw In(this).debug(`[${g}] response error (${R})`,Pi({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,message:S,durationMs:Date.now()-w})),this.makeStatusError(_.status,U,S,_.headers)}return In(this).info(b),In(this).debug(`[${g}] response start`,Pi({retryOfRequestLogID:r,url:_.url,status:_.status,headers:_.headers,durationMs:v-w})),{response:_,options:a,controller:x,requestLogID:g,retryOfRequestLogID:r,startTime:w}}async fetchWithTimeout(e,n,r,s){const i=n||{},{signal:o,method:a}=i,u=jd(i,["signal","method"]);o&&o.addEventListener("abort",()=>s.abort());const c=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},d?{duplex:"half"}:{}),{method:"GET"}),u);a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){var i;let o;const a=s==null?void 0:s.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(o=c)}const u=s==null?void 0:s.get("retry-after");if(u&&!o){const c=parseFloat(u);Number.isNaN(c)?o=Date.parse(u)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){const c=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,c)}return await AB(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,s,i;const o=Object.assign({},e),{method:a,path:u,query:c,defaultBaseURL:d}=o,m=this.buildURL(u,c,d);"timeout"in o&&kB("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:g,body:y}=this.buildBody({options:o}),w=await this.buildHeaders({options:e,method:a,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:w},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(i=o.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=Ya([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),MB()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ya([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:LB(e)}:this.encoder({body:e,headers:r})}}jh.DEFAULT_TIMEOUT=6e4;class Xt extends jh{constructor(){super(...arguments),this.interactions=new uk(this)}}dk=Xt;Xt.GeminiNextGenAPIClient=dk;Xt.GeminiNextGenAPIClientError=gr;Xt.APIError=Rn;Xt.APIConnectionError=Dh;Xt.APIConnectionTimeoutError=W1;Xt.APIUserAbortError=_m;Xt.NotFoundError=Q1;Xt.ConflictError=X1;Xt.RateLimitError=ek;Xt.BadRequestError=K1;Xt.AuthenticationError=J1;Xt.InternalServerError=tk;Xt.PermissionDeniedError=Y1;Xt.UnprocessableEntityError=Z1;Xt.toFile=zB;Xt.Interactions=uk;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t9(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function n9(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function r9(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function s9(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function i9(t,e,n){const r={};if(h(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=h(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&p(e,["displayName"],s),h(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=h(t,["epochCount"]);e!==void 0&&i!=null&&p(e,["tuningTask","hyperparameters","epochCount"],i);const o=h(t,["learningRateMultiplier"]);if(o!=null&&p(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),h(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=h(t,["batchSize"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","batchSize"],a);const u=h(t,["learningRate"]);if(e!==void 0&&u!=null&&p(e,["tuningTask","hyperparameters","learningRate"],u),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function o9(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const y=h(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec"],z_(y))}else if(s==="PREFERENCE_TUNING"){const y=h(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec"],z_(y))}const i=h(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&p(e,["tunedModelDisplayName"],i);const o=h(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);let a=h(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const y=h(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(a==="PREFERENCE_TUNING"){const y=h(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let u=h(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const y=h(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(u==="PREFERENCE_TUNING"){const y=h(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let c=h(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=h(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(c==="PREFERENCE_TUNING"){const y=h(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let d=h(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=h(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(d==="PREFERENCE_TUNING"){const y=h(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(h(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=h(t,["labels"]);e!==void 0&&m!=null&&p(e,["labels"],m);const g=h(t,["beta"]);return e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),r}function a9(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=h(t,["trainingDataset"]);i!=null&&v9(i);const o=h(t,["config"]);return o!=null&&i9(o,n),n}function l9(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const s=h(t,["preTunedModel"]);s!=null&&p(n,["preTunedModel"],s);const i=h(t,["trainingDataset"]);i!=null&&x9(i,n,e);const o=h(t,["config"]);return o!=null&&o9(o,n,e),n}function u9(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function c9(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function d9(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=h(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function h9(t,e,n){const r={},s=h(t,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const i=h(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function f9(t,e){const n={},r=h(t,["config"]);return r!=null&&d9(r,n),n}function p9(t,e){const n={},r=h(t,["config"]);return r!=null&&h9(r,n),n}function m9(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=h(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>hk(a))),p(n,["tuningJobs"],o)}return n}function g9(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["nextPageToken"]);s!=null&&p(n,["nextPageToken"],s);const i=h(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Tm(a))),p(n,["tuningJobs"],o)}return n}function y9(t,e){const n={},r=h(t,["name"]);r!=null&&p(n,["model"],r);const s=h(t,["name"]);return s!=null&&p(n,["endpoint"],s),n}function v9(t,e){const n={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=h(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),p(n,["examples","examples"],s)}return n}function x9(t,e,n){const r={};let s=h(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=h(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=h(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let i=h(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=h(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=h(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(h(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function hk(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["state"]);i!=null&&p(n,["state"],C1(i));const o=h(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=h(t,["tuningTask","startTime"]);a!=null&&p(n,["startTime"],a);const u=h(t,["tuningTask","completeTime"]);u!=null&&p(n,["endTime"],u);const c=h(t,["updateTime"]);c!=null&&p(n,["updateTime"],c);const d=h(t,["description"]);d!=null&&p(n,["description"],d);const m=h(t,["baseModel"]);m!=null&&p(n,["baseModel"],m);const g=h(t,["_self"]);return g!=null&&p(n,["tunedModel"],y9(g)),n}function Tm(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["state"]);i!=null&&p(n,["state"],C1(i));const o=h(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=h(t,["startTime"]);a!=null&&p(n,["startTime"],a);const u=h(t,["endTime"]);u!=null&&p(n,["endTime"],u);const c=h(t,["updateTime"]);c!=null&&p(n,["updateTime"],c);const d=h(t,["error"]);d!=null&&p(n,["error"],d);const m=h(t,["description"]);m!=null&&p(n,["description"],m);const g=h(t,["baseModel"]);g!=null&&p(n,["baseModel"],g);const y=h(t,["tunedModel"]);y!=null&&p(n,["tunedModel"],y);const w=h(t,["preTunedModel"]);w!=null&&p(n,["preTunedModel"],w);const x=h(t,["supervisedTuningSpec"]);x!=null&&p(n,["supervisedTuningSpec"],x);const _=h(t,["preferenceOptimizationSpec"]);_!=null&&p(n,["preferenceOptimizationSpec"],_);const v=h(t,["tuningDataStats"]);v!=null&&p(n,["tuningDataStats"],v);const b=h(t,["encryptionSpec"]);b!=null&&p(n,["encryptionSpec"],b);const T=h(t,["partnerModelTuningSpec"]);T!=null&&p(n,["partnerModelTuningSpec"],T);const R=h(t,["customBaseModel"]);R!=null&&p(n,["customBaseModel"],R);const L=h(t,["experiment"]);L!=null&&p(n,["experiment"],L);const U=h(t,["labels"]);U!=null&&p(n,["labels"],U);const S=h(t,["outputUri"]);S!=null&&p(n,["outputUri"],S);const C=h(t,["pipelineJob"]);C!=null&&p(n,["pipelineJob"],C);const N=h(t,["serviceAccount"]);N!=null&&p(n,["serviceAccount"],N);const M=h(t,["tunedModelDisplayName"]);M!=null&&p(n,["tunedModelDisplayName"],M);const V=h(t,["veoTuningSpec"]);return V!=null&&p(n,["veoTuningSpec"],V),n}function w9(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const s=h(t,["name"]);s!=null&&p(n,["name"],s);const i=h(t,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(t,["done"]);o!=null&&p(n,["done"],o);const a=h(t,["error"]);return a!=null&&p(n,["error"],a),n}function z_(t,e){const n={},r=h(t,["gcsUri"]);r!=null&&p(n,["validationDatasetUri"],r);const s=h(t,["vertexDatasetResource"]);return s!=null&&p(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _9 extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new lo(Ss.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:s});return i.baseModel=void 0,await this.tuneInternal(i)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),i=await this.tuneMldevInternal(s);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:hm.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=c9(e);return a=Ee("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>Tm(d))}else{const c=u9(e);return a=Ee("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>hk(d))}}async listInternal(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=p9(e);return a=Ee("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=g9(d),g=new p_;return Object.assign(g,m),g})}else{const c=f9(e);return a=Ee("tunedModels",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=m9(d),g=new p_;return Object.assign(g,m),g})}}async cancel(e){var n,r,s,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const c=n9(e);return a=Ee("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=s9(d),g=new m_;return Object.assign(g,m),g})}else{const c=t9(e);return a=Ee("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:d.headers},g})),o.then(d=>{const m=r9(d),g=new m_;return Object.assign(g,m),g})}}async tuneInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI()){const a=l9(e,e);return i=Ee("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),s.then(u=>Tm(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=a9(e);return i=Ee("tunedModels",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),s.then(u=>w9(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b9{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const E9=1024*1024*8,T9=3,I9=1e3,S9=2,Vd="x-goog-upload-status";async function k9(t,e,n){var r;const s=await fk(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Vd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function C9(t,e,n){var r;const s=await fk(t,e,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Vd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=b1(i),a=new j0;return Object.assign(a,o),a}async function fk(t,e,n){var r,s;let i=0,o=0,a=new fm(new Response),u="upload";for(i=t.size;o<i;){const c=Math.min(E9,i-o),d=t.slice(o,o+c);o+c>=i&&(u+=", finalize");let m=0,g=I9;for(;m<T9&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[Vd]));)m++,await N9(g),g=g*S9;if(o+=c,((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Vd])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function A9(t){return{size:t.size,type:t.type}}function N9(t){return new Promise(e=>setTimeout(e,t))}class R9{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await k9(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await C9(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await A9(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P9{create(e,n,r){return new M9(e,n,r)}}class M9{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G_="x-goog-api-key";class D9{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(G_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(G_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const L9="gl-node/";class H0{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Xt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Nj(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new D9(this.apiKey);this.apiClient=new AO({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:L9+"web",uploader:new R9,downloader:new b9}),this.models=new KO(this.apiClient),this.live=new zO(this.apiClient,s,new P9),this.batches=new iV(this.apiClient),this.chats=new OV(this.models,this.apiClient),this.caches=new FV(this.apiClient),this.files=new YV(this.apiClient),this.operations=new JO(this.apiClient),this.authTokens=new dB(this.apiClient),this.tunings=new _9(this.apiClient),this.fileSearchStores=new xB(this.apiClient)}}const Im="fanra_api_cd_",$0=t=>t&&t.length>5?t.slice(-8):"unknown",jo=t=>{if(!t)return!0;const e=$0(t),n=localStorage.getItem(`${Im}${e}`);if(n){const r=parseInt(n,10);if(Date.now()<r)return console.warn(`Skipping key ending in ...${e} (Cooldown active)`),!0;localStorage.removeItem(`${Im}${e}`)}return!1},ku=t=>{if(!t)return;const e=$0(t),n=Date.now()+24*60*60*1e3;localStorage.setItem(`${Im}${e}`,n.toString()),console.warn(`Key ending in ...${e} marked for 24h cooldown due to Quota Limit.`)},j9=(t,e)=>{const n=t/e;return[{label:"1:1",value:1},{label:"3:4",value:.75},{label:"4:3",value:1.33},{label:"9:16",value:.5625},{label:"16:9",value:1.7778}].reduce((i,o)=>Math.abs(o.value-n)<Math.abs(i.value-n)?o:i).label},F9=(t,e,n,r)=>{const s=j9(e,n);switch(t){case kn.BACKGROUND_REMOVER:return{model:"gemini-2.5-flash-image",prompt:"Edit this image. Your task is to keep the foreground subject EXACTLY as it is. Do not alter the subject's face, body, clothing, lighting, or resolution. Do not 'redraw' or 'regenerate' the subject. Simply COPY the main subject and place it against a solid bright Green background (Hex Code #00FF00). If the subject is cropped in the original, keep it cropped. Do not add new details.",config:{imageConfig:{aspectRatio:s}}};case kn.HD_UPSCALE:return{model:"gemini-3-pro-image-preview",prompt:"Upscale this image to high definition (4K quality). Sharpen all details and improve lighting. IMPORTANT: Keep the image composition, colors, and BACKGROUND exactly the same as the original. Do not remove the background. Do not change the subject's identity.",config:{imageConfig:{aspectRatio:s,imageSize:"4K"}}};case kn.CREATIVE_REMIX:return{model:"gemini-2.5-flash-image",prompt:r||"Make a creative cyberpunk variation of this image.",config:{imageConfig:{aspectRatio:s}}};case kn.COLORIZE:return{model:"gemini-2.5-flash-image",prompt:"Colorize this black and white image realistically. Keep the subject and background details exactly the same, just add natural colors. Do not change the content.",config:{imageConfig:{aspectRatio:s}}};case kn.SKETCH_TO_REAL:return{model:"gemini-2.5-flash-image",prompt:"Turn this sketch or drawing into a photorealistic image. Keep the composition and subject exactly as drawn, but make it look like a high-quality photograph.",config:{imageConfig:{aspectRatio:s}}};default:throw new Error("Unknown tool type")}},V9=async t=>{const{tool:e,image:n,prompt:r,apiKeys:s}=t,i=F9(e,n.width,n.height,r);let o=[...s||[]];o.push("AIzaSyDzwJLdjFvu5jrsF_HYtYSWLPSoQc2JYzA"),o=Array.from(new Set(o.filter(c=>!!c&&!jo(c))));let a=!1,u=null;for(let c=0;c<o.length;c++){const d=o[c];try{const g=await new H0({apiKey:d}).models.generateContent({model:i.model,contents:{parts:[{inlineData:{mimeType:n.mimeType,data:n.data}},{text:i.prompt}]},config:i.config});if(g.candidates&&g.candidates[0].content.parts){for(const y of g.candidates[0].content.parts)if(y.inlineData&&y.inlineData.data)return y.inlineData.data}throw new Error("No image data returned from Gemini.")}catch(m){console.warn(`Key ending in ...${d.slice(-4)} failed.`),u=m;const g=(m.message||"").toLowerCase(),y=g.includes("429")||g.includes("quota")||g.includes("exhausted")||g.includes("503");if(y&&ku(d),c===o.length-1&&y&&!a)try{const w=await z3();if(w.length>0){const x=w.filter(_=>!o.includes(_)&&!jo(_));o.push(...x),a=!0;continue}}catch{console.error("Failed to fetch community keys")}}}throw u||new Error("All API keys (Personal, System, and Community) failed or are in cooldown.")},U9={name:"searchWeather",description:"Get REAL-TIME weather data for a specific city.",parameters:{type:On.OBJECT,properties:{city:{type:On.STRING,description:"The name of the city."}},required:["city"]}},O9={name:"searchCountryFact",description:"Get detailed facts about a country (Capital, Population, Currency, Flag).",parameters:{type:On.OBJECT,properties:{country_name:{type:On.STRING,description:"The name of the country."}},required:["country_name"]}},B9={name:"searchGoogle",description:"Search Google for latest news or trending info.",parameters:{type:On.OBJECT,properties:{query:{type:On.STRING,description:"The search keywords."}},required:["query"]}},Fh=async(t,e)=>{if(!e)return t;const n=t.split(/(\s+)/);let r="";for(const s of n)r+=s,e(r),await new Promise(i=>setTimeout(i,Math.random()*10+5));return t},z9=async(t,e,n,r)=>{var s,i,o;try{console.log("Attempting OpenRouter Fallback...");const a=[{role:"system",content:n},...e.map(m=>{var g;return{role:m.role==="model"?"assistant":"user",content:((g=m.parts.find(y=>y.text))==null?void 0:g.text)||""}}).filter(m=>m.content)],u=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:"google/gemini-2.0-flash-lite-preview-02-05:free",messages:a,stream:!1})});if(u.status===429)throw ku(t),new Error("OpenRouter Quota Exceeded");if(!u.ok)throw new Error(`OpenRouter Error: ${u.status}`);const d=((o=(i=(s=(await u.json()).choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:o.content)||"";return r&&d&&await Fh(d,r),d}catch(a){throw console.error("OpenRouter Failed:",a),a}},G9=async(t,e,n,r)=>{var s,i,o;try{console.log("Attempting Groq Fallback...");const a=[{role:"system",content:n},...e.map(m=>{var g;return{role:m.role==="model"?"assistant":"user",content:((g=m.parts.find(y=>y.text))==null?void 0:g.text)||""}}).filter(m=>m.content)],u=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({model:"llama3-8b-8192",messages:a,stream:!1})});if(u.status===429)throw ku(t),new Error("Groq Quota Exceeded");if(!u.ok)throw new Error(`Groq Error: ${u.status}`);const d=((o=(i=(s=(await u.json()).choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:o.content)||"";return r&&d&&await Fh(d,r),d}catch(a){throw console.error("Groq Failed:",a),a}},H9=async(t,e,n,r)=>{try{console.log("Attempting Hugging Face Fallback...");let s=`<start_of_turn>system
${n}<end_of_turn>
`;e.forEach(u=>{var d;const c=((d=u.parts.find(m=>m.text))==null?void 0:d.text)||"";c&&(s+=`<start_of_turn>${u.role==="model"?"model":"user"}
${c}<end_of_turn>
`)}),s+=`<start_of_turn>model
`;const i=await fetch("https://api-inference.huggingface.co/models/google/gemma-1.1-7b-it",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:s,parameters:{max_new_tokens:512,return_full_text:!1,temperature:.7}})});if(i.status===429)throw ku(t),new Error("HuggingFace Quota Exceeded");if(!i.ok)throw new Error(`Hugging Face Error: ${i.status}`);const o=await i.json();let a=Array.isArray(o)&&o.length>0?o[0].generated_text:o.generated_text||"";return r&&a&&await Fh(a,r),a}catch(s){throw console.error("Hugging Face Failed:",s),s}},$9=async(t,e,n=[],r="id",s=[],i,o=!1,a=!1,u,c,d,m,g)=>{var R,L,U,S;const y=n.slice(-10).map(C=>({role:C.role,parts:[{text:C.text}]})),w=[];t?w.push({text:t}):s.length>0&&w.push({text:"Describe these images or answer based on them."}),s.length>0&&s.forEach(C=>w.push({inlineData:{mimeType:C.mimeType,data:C.data}}));const x=[...y,{role:"user",parts:w}],_=!!(u!=null&&u.apiKey&&u.cx),v=[{functionDeclarations:[U9,O9]}];_&&v[0].functionDeclarations.push(B9);const b=`
        Nama lo: Fanra.
        Sifat: Cool, santai, & solutif. Gaya ngomong: lo-gue, normal, asik.
        
        ATURAN MUTLAK:
        1. JANGAN PERNAH MENCARI DI WIKIPEDIA ATAU DATABASE LAMA.
        2. Gunakan pengetahuan lo sendiri (Generative AI) untuk menjawab pertanyaan.
        3. Jika user tanya hal sepele ("hmm", "halo", "apa kabar"), jawab dengan santai dan natural layaknya teman. Jangan berikan definisi kamus.
        4. Jika user tanya fakta spesifik (misal: cuaca, negara), gunakan function calling yang tersedia.
    `;let T=[...e||[]];T.push("AIzaSyDzwJLdjFvu5jrsF_HYtYSWLPSoQc2JYzA"),T=Array.from(new Set(T.filter(C=>!!C&&!jo(C))));for(const C of T){if(c!=null&&c.aborted)throw new Error("Request cancelled by user");try{const V=(S=(U=(L=(R=(await new H0({apiKey:C}).models.generateContent({model:"gemini-3-flash-preview",contents:x,config:{systemInstruction:b,tools:v}})).candidates)==null?void 0:R[0])==null?void 0:L.content)==null?void 0:U.parts)==null?void 0:S.find(P=>P.text);return V&&V.text?(await Fh(V.text,i),{text:V.text,source:"gemini"}):{text:"...",source:"gemini"}}catch(N){console.warn(`Gemini Key failed: ${$0(C)}`);const M=(N.message||"").toLowerCase();(M.includes("429")||M.includes("quota")||M.includes("exhausted"))&&ku(C)}}if(!jo(d)){if(c!=null&&c.aborted)throw new Error("Request cancelled");try{return{text:await z9(d,x,b,i),source:"openrouter"}}catch{console.warn("OpenRouter Failed.")}}if(!jo(g)){if(c!=null&&c.aborted)throw new Error("Request cancelled");try{return{text:await G9(g,x,b,i),source:"groq"}}catch{console.warn("Groq Failed.")}}if(!jo(m)){if(c!=null&&c.aborted)throw new Error("Request cancelled");try{return{text:await H9(m,x,b,i),source:"huggingface"}}catch{console.warn("Hugging Face Failed.")}}throw new Error("All AI services unavailable. Check your API Keys.")},q9=t=>new Promise((e,n)=>{const r=new Image;r.src=`data:image/png;base64,${t}`,r.crossOrigin="Anonymous",r.onload=()=>{const s=document.createElement("canvas");s.width=r.width,s.height=r.height;const i=s.getContext("2d");if(!i){n(new Error("Could not get canvas context"));return}i.drawImage(r,0,0);const o=i.getImageData(0,0,s.width,s.height),a=o.data;for(let u=0;u<a.length;u+=4){const c=a[u],d=a[u+1],m=a[u+2],g=Math.max(c,m);let y=d-g;const w=10,x=60;if(y>w){const _=1-Math.max(0,Math.min(1,(y-w)/(x-w)));a[u+3]=Math.floor(255*_),d>g&&(a[u+1]=g)}}i.putImageData(o,0,0),e(s.toDataURL("image/png",1).split(",")[1])},r.onerror=s=>n(new Error("Failed to load image for processing"))}),W9=(t,e="image/png")=>{const n=t.replace(/[\n\r]/g,"").trim(),r=atob(n),s=new Array(r.length);for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);const i=new Uint8Array(s);return new Blob([i],{type:e})},K9=async(t,e)=>{const n=new FormData,r=W9(t);n.append("image_file",r,"image.png"),n.append("size","auto");try{const s=await fetch("https://api.remove.bg/v1.0/removebg",{method:"POST",headers:{"X-Api-Key":e},body:n});if(!s.ok){let o="Failed to remove background via Remove.bg";try{const a=await s.json();a.errors&&a.errors[0]&&(o=a.errors[0].title)}catch{o=`Remove.bg Error: ${s.statusText}`}throw new Error(o)}const i=await s.blob();return new Promise((o,a)=>{const u=new FileReader;u.onloadend=()=>{const c=u.result;o(c.split(",")[1])},u.onerror=a,u.readAsDataURL(i)})}catch(s){throw console.error("Remove.bg Service Error:",s),s}};const J9=({onImageSelect:t,language:e})=>{const n=j.useRef(null),[r,s]=j.useState(!1),i=Su[e],o=m=>{if(!m.type.startsWith("image/")){We(i.invalidImage);return}const g=new FileReader;g.onloadend=()=>{const y=g.result,w=new Image;w.onload=()=>{const x=document.createElement("canvas");x.width=w.width,x.height=w.height;const _=x.getContext("2d");if(!_)return;_.drawImage(w,0,0);const v="image/png",T=x.toDataURL(v).split(",")[1];t(T,v,w.width,w.height)},w.src=y},g.readAsDataURL(m)},a=m=>{var y;const g=(y=m.target.files)==null?void 0:y[0];g&&o(g)},u=m=>{m.preventDefault(),m.stopPropagation(),s(!0)},c=m=>{m.preventDefault(),m.stopPropagation(),s(!1)},d=m=>{var y;m.preventDefault(),m.stopPropagation(),s(!1);const g=(y=m.dataTransfer.files)==null?void 0:y[0];g&&o(g)};return l.jsxs("div",{className:`w-full max-w-xl mx-auto border-2 border-dashed rounded-2xl p-12 flex flex-col items-center justify-center text-center cursor-pointer transition-all duration-300 group bg-white ${r?"border-primary bg-slate-50 scale-[1.02] shadow-xl":"border-slate-300 hover:border-primary hover:bg-slate-50"}`,onClick:()=>{var m;return(m=n.current)==null?void 0:m.click()},onDragOver:u,onDragLeave:c,onDrop:d,children:[l.jsx("input",{type:"file",ref:n,onChange:a,className:"hidden",accept:"image/png, image/jpeg, image/webp"}),l.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 transition-transform duration-300 ${r?"scale-110 bg-white shadow-md":"bg-slate-50 group-hover:scale-110"}`,children:l.jsx(ra,{className:`w-6 h-6 ${r?"text-primary":"text-slate-400 group-hover:text-primary"}`})}),l.jsx("h3",{className:`text-lg font-bold mb-2 transition-colors ${r?"text-primary":"text-slate-700 group-hover:text-primary"}`,children:r?i.dropHere:i.uploadTitle}),l.jsx("p",{className:"text-slate-500 text-sm",children:i.uploadDesc})]})},H_=[{label:"Transparent",value:null,hex:"transparent"},{label:"White",value:"#FFFFFF",hex:"#FFFFFF"},{label:"Black",value:"#000000",hex:"#000000"},{label:"Red",value:"#DB2828",hex:"#DB2828"},{label:"Blue",value:"#2185D0",hex:"#2185D0"},{label:"Green",value:"#21BA45",hex:"#21BA45"},{label:"Yellow",value:"#FBBD08",hex:"#FBBD08"}],Y9=({originalImage:t,resultImageBase64:e,isProcessing:n,processingText:r,onReset:s,language:i})=>{const[o,a]=j.useState(50),[u,c]=j.useState(!1),[d,m]=j.useState(null),g=j.useRef(null),y=j.useRef(null),w=Su[i],x=()=>{if(!e)return;if(!d){const S=document.createElement("a");S.href=`data:image/png;base64,${e}`,S.download="pixelmagic-edited.png",document.body.appendChild(S),S.click(),document.body.removeChild(S);return}const R=document.createElement("canvas"),L=R.getContext("2d"),U=new Image;U.onload=()=>{if(R.width=U.width,R.height=U.height,L){L.fillStyle=d,L.fillRect(0,0,R.width,R.height),L.drawImage(U,0,0);const S=document.createElement("a");S.href=R.toDataURL("image/png"),S.download="pixelmagic-edited-bg.png",document.body.appendChild(S),S.click(),document.body.removeChild(S)}},U.src=`data:image/png;base64,${e}`},_=j.useCallback(()=>c(!0),[]),v=j.useCallback(()=>c(!1),[]),b=j.useCallback(R=>{if(!u||!g.current)return;const{left:L,width:U}=g.current.getBoundingClientRect();let S;"touches"in R?S=R.touches[0].clientX:S=R.clientX;const C=(S-L)/U*100;a(Math.min(100,Math.max(0,C)))},[u]);j.useEffect(()=>(window.addEventListener("mousemove",b),window.addEventListener("mouseup",v),window.addEventListener("touchmove",b),window.addEventListener("touchend",v),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",b),window.removeEventListener("touchend",v)}),[b,v]);const T=()=>d?{backgroundColor:d}:{backgroundColor:"#f8fafc",backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"};return l.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6 animate-fade-in pb-10",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[l.jsx("h2",{className:"text-xl font-bold text-primary self-start md:self-auto",children:n?l.jsxs("span",{className:"flex items-center gap-2",children:[w.processing,l.jsxs("span",{className:"flex gap-1",children:[l.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce"}),l.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-100"}),l.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-200"})]})]}):w.resultComparison}),!n&&l.jsxs("div",{className:"flex items-center gap-3 self-end md:self-auto",children:[l.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-slate-500 hover:text-primary transition-colors hover:bg-slate-50 rounded-lg active:scale-95 duration-200",children:w.reset}),e&&l.jsxs("button",{onClick:x,className:"flex items-center gap-2 bg-primary hover:bg-slate-800 text-white px-5 py-2 rounded-lg font-semibold text-sm transition-all shadow-lg shadow-slate-900/10 active:scale-95 hover:shadow-xl hover:-translate-y-0.5",children:[l.jsx(vT,{className:"w-4 h-4"}),w.download," ",d?"JPG":"PNG"]})]})]}),l.jsxs("div",{className:"relative w-full h-[60vh] rounded-xl overflow-hidden border border-slate-200 shadow-xl shadow-slate-200/50 bg-white select-none mx-auto group",ref:g,children:[n&&l.jsxs("div",{className:"absolute inset-0 z-50 bg-white/90 backdrop-blur-md flex flex-col items-center justify-center transition-all duration-300",children:[l.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,className:"absolute inset-0 w-full h-full object-contain opacity-10 blur-md scale-105",alt:"Background Blur"}),l.jsxs("div",{className:"relative z-10 flex flex-col items-center p-8 bg-white/80 rounded-2xl shadow-sm border border-slate-100/50 backdrop-blur-xl",children:[l.jsxs("div",{className:"relative mb-6",children:[l.jsx("div",{className:"w-16 h-16 border-4 border-slate-100 rounded-full"}),l.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"})})]}),l.jsx("p",{className:"font-bold text-lg tracking-wide animate-shimmer-text",children:r||"..."})]})]}),!n&&e&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center transition-colors duration-300",style:T(),children:l.jsx("img",{src:`data:image/png;base64,${e}`,alt:"Result",className:"max-w-full max-h-full object-contain animate-fade-in",draggable:!1})}),l.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden",style:{clipPath:`inset(0 ${100-o}% 0 0)`},children:[l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white/95",children:l.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain",draggable:!1})}),l.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur text-primary text-[10px] font-bold px-2 py-1 rounded shadow-sm border border-slate-100 select-none",children:w.original})]}),l.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white z-30 cursor-ew-resize shadow-[0_0_10px_rgba(0,0,0,0.2)] hover:bg-blue-100 transition-colors",style:{left:`${o}%`},onMouseDown:_,onTouchStart:_,children:l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg border border-slate-100 flex items-center justify-center text-primary transform hover:scale-110 active:scale-95 transition-all duration-200 cursor-ew-resize",children:l.jsx(oN,{className:"w-4 h-4"})})}),l.jsx("div",{className:"absolute top-4 right-4 bg-primary/90 backdrop-blur text-white text-[10px] font-bold px-2 py-1 rounded shadow-sm z-20 select-none",children:w.result})]}),!n&&!e&&l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain"})})]}),!n&&e&&l.jsxs("div",{className:"flex flex-col items-center gap-3 animate-fade-in-up",children:[l.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:w.bgColor}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-3 bg-white p-3 rounded-2xl border border-slate-200 shadow-sm transition-all hover:shadow-md",children:[H_.map(R=>l.jsx("button",{onClick:()=>m(R.value),className:`w-10 h-10 rounded-full border-2 transition-all duration-200 hover:scale-110 active:scale-95 flex items-center justify-center ${d===R.value?"border-primary ring-2 ring-primary/20 scale-110":"border-slate-200 hover:border-slate-300"}`,style:{backgroundColor:R.value||"white"},title:R.label,children:R.value===null&&l.jsx("div",{className:"w-full h-full rounded-full opacity-40",style:{backgroundImage:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 0 4px, 4px -4px, -4px 0px"}})},R.label)),l.jsx("div",{className:"w-px h-8 bg-slate-200 mx-2 self-center"}),l.jsxs("div",{className:"relative group",children:[l.jsx("input",{type:"color",ref:y,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:R=>m(R.target.value),value:d||"#ffffff"}),l.jsx("button",{className:`w-10 h-10 rounded-full border-2 flex items-center justify-center bg-white hover:bg-slate-50 transition-all duration-200 hover:scale-110 active:scale-95 ${d&&!H_.find(R=>R.value===d)?"border-primary ring-2 ring-primary/20":"border-slate-200 group-hover:border-slate-300"}`,title:"Custom Color",children:l.jsx("span",{className:"text-xl leading-none pb-1 text-slate-400 group-hover:text-primary transition-colors",children:"+"})})]})]})]}),!n&&!e&&l.jsx("p",{className:"text-center text-slate-400 text-xs animate-fade-in",children:w.uploadPrompt})]})},Q9=({isOpen:t,onClose:e,removeBgKey:n,onSaveRemoveBgKey:r,storedApiKeys:s,onAddApiKey:i,onDeleteApiKey:o,onToggleApiKey:a,onSelectGoogleKey:u,googleSearchKey:c,googleSearchCx:d,onSaveGoogleSearch:m,openRouterKey:g,onSaveOpenRouterKey:y,huggingFaceKey:w,onSaveHuggingFaceKey:x,groqKey:_,onSaveGroqKey:v,language:b})=>{const[T,R]=j.useState(n),[L,U]=j.useState(c),[S,C]=j.useState(d),[N,M]=j.useState(g),[V,P]=j.useState(w),[D,k]=j.useState(_),[G,ye]=j.useState(""),[re,ne]=j.useState(!1),[Y,ue]=j.useState(!1),[q,$]=j.useState(!1),ce=Su[b];if(j.useEffect(()=>{R(n),U(c),M(g),P(w),k(_),C(!d&&!S?"3040e7dd9eac6414b":d),t||(ne(!1),ye(""),ue(!1))},[n,c,d,g,w,_,t]),!t)return null;const X=async()=>{const _e=G.trim();if(!(!_e||!re)){if(!_e.startsWith("AIza")){We("Format Key salah. Harus dimulai dengan 'AIza'.");return}if(_e.length!==39){We(`Panjang Key salah (${_e.length}). Harusnya 39 karakter.`);return}if(s.some(Ce=>Ce.key===_e)){We("Key ini sudah ada di daftar.");return}$(!0);try{const Se=await new H0({apiKey:_e}).models.generateContent({model:"gemini-3-flash-preview",contents:"Ping"});if(!Se||!Se.candidates||Se.candidates.length===0)throw new Error("API Valid, but response empty.");i(_e,Y),ye(""),ue(!1),We("Key berhasil diverifikasi & disimpan!")}catch(Ce){console.error("Key Validation Failed:",Ce);const Se=(Ce.message||"").toLowerCase();Se.includes("400")||Se.includes("invalid_argument")?We("Key DITOLAK oleh Google (Invalid)."):Se.includes("403")?We("Key valid tapi tidak punya izin (Billing/Project problem)."):Se.includes("404")?We("Model tidak ditemukan."):We("Gagal memvalidasi Key. "+(Ce.message||"Unknown error"))}finally{$(!1)}}},Z=()=>{r(T.trim()),m(L.trim(),S.trim()),y(N.trim()),x(V.trim()),v(D.trim()),e(),We("Pengaturan disimpan!")},Ae=({value:_e,hasSystemDefault:Ce=!0})=>_e&&_e.trim().length>0?l.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-green-100 text-green-700 px-2 py-0.5 rounded-md border border-green-200",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"})," Key Pribadi (Custom)"]}):Ce?l.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-blue-100 text-blue-700 px-2 py-0.5 rounded-md border border-blue-200",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"})," Key Sistem (Bawaan)"]}):l.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold bg-slate-100 text-slate-500 px-2 py-0.5 rounded-md border border-slate-200",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full"})," Nonaktif"]});return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-fade-in-up ring-1 ring-slate-900/5",children:[l.jsxs("div",{className:"bg-white px-6 py-5 border-b border-slate-100 flex items-center justify-between sticky top-0 z-10",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 border border-slate-100 flex items-center justify-center text-primary",children:l.jsx(zl,{className:"w-5 h-5"})})," ",ce.settingsTitle]}),l.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-50 hover:bg-slate-100 text-slate-400 hover:text-slate-800 transition-all",children:""})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-slate-50",children:[l.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/18889/18889881.png",className:"w-6 h-6 object-contain",alt:"Gemini"})," ",ce.googleApiTitle," (Utama)"]}),l.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:ce.googleApiDesc})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"flex items-center justify-between mb-3 px-1",children:l.jsxs("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[ce.keysStored,l.jsx("span",{className:"bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded text-[10px]",children:s.length})]})}),s.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center py-6 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50 mb-4",children:[l.jsx(zl,{className:"w-6 h-6 text-slate-300 mb-2"}),l.jsx("p",{className:"text-xs text-slate-400 font-medium text-center",children:ce.noKeysYet})]}):l.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto custom-scrollbar pr-1 mb-4",children:s.map((_e,Ce)=>l.jsxs("div",{className:`flex items-center justify-between p-3 bg-white border rounded-xl shadow-sm transition-all ${_e.isActive!==!1?"border-slate-200":"border-slate-100 bg-slate-50/50 opacity-70"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 text-xs font-bold border ${_e.isShared?"bg-green-50 text-green-600 border-green-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:_e.isShared?l.jsx(hd,{className:"w-3.5 h-3.5"}):Ce+1}),l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("span",{className:"text-xs font-mono text-slate-700 font-bold tracking-tight",children:[" ",_e.key.slice(-4)]}),l.jsx("span",{className:`text-[9px] font-bold ${_e.isActive!==!1?"text-green-500":"text-slate-400"}`,children:_e.isActive!==!1?" "+ce.active:" "+ce.inactive})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{onClick:Se=>Se.stopPropagation(),children:l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer scale-75",children:[l.jsx("input",{type:"checkbox",className:"sr-only peer",checked:_e.isActive!==!1,onChange:Se=>a(_e.key,Se.target.checked)}),l.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-green-500"})]})}),l.jsx("button",{onClick:()=>o(_e.key),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg",children:l.jsx(Jr,{className:"w-3.5 h-3.5"})})]})]},Ce))})]}),l.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-100",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer w-fit mb-3",children:[l.jsx("input",{type:"checkbox",checked:re,onChange:_e=>ne(_e.target.checked),className:"w-3.5 h-3.5 text-blue-600 rounded border-slate-300 focus:ring-blue-500"}),l.jsx("span",{className:"text-[10px] text-slate-500 font-medium",children:"Saya bertanggung jawab atas penggunaan Key ini."})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:G,onChange:_e=>ye(_e.target.value),placeholder:re?ce.addKeyPlaceholder:"Centang dulu di atas...",disabled:!re||q,maxLength:50,className:"flex-1 px-3 py-2 bg-white border rounded-lg text-xs outline-none transition-colors disabled:bg-slate-100 border-slate-200 focus:border-blue-500"}),l.jsx("button",{onClick:X,disabled:!re||!G.trim()||q,className:"px-4 py-2 bg-slate-900 text-white rounded-lg text-xs font-bold hover:bg-slate-800 disabled:bg-slate-300 disabled:cursor-not-allowed transition-all flex items-center gap-2",children:q?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-3 h-3 border-2 border-white/50 border-t-white rounded-full animate-spin"}),"Checking..."]}):"+ Add"})]}),l.jsx("div",{className:"mt-3 flex justify-center",children:l.jsxs("button",{onClick:u,className:"text-[10px] font-bold text-blue-600 hover:underline flex items-center gap-1",children:[ce.selectKeyBtn," "]})})]})]}),l.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[l.jsxs("div",{className:"mb-5 border-b border-slate-100 pb-4",children:[l.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[l.jsx("div",{className:"p-1.5 bg-emerald-50 rounded-lg",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/11681/11681335.png",className:"w-5 h-5 object-contain",alt:"API"})})," Integrasi API Eksternal"]}),l.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:"Kelola key untuk layanan Fallback (Cadangan) dan Tools tambahan."})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(pd,{className:"w-3.5 h-3.5 text-slate-400"}),l.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Fallback AI (Cadangan Chat)"})]}),l.jsxs("div",{className:"space-y-4 pl-1",children:[l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"OpenRouter (Prioritas 2)"}),l.jsx(Ae,{value:N,hasSystemDefault:!0})]}),l.jsx("input",{type:"text",value:N,onChange:_e=>M(_e.target.value),placeholder:"sk-or-v1-...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-emerald-500/10 focus:border-emerald-500 outline-none transition-all font-mono"})]}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Groq API (Prioritas 3)"}),l.jsx(Ae,{value:D,hasSystemDefault:!0})]}),l.jsx("input",{type:"text",value:D,onChange:_e=>k(_e.target.value),placeholder:"gsk_...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-orange-500/10 focus:border-orange-500 outline-none transition-all font-mono"})]}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Hugging Face (Prioritas 4)"}),l.jsx(Ae,{value:V,hasSystemDefault:!0})]}),l.jsx("input",{type:"text",value:V,onChange:_e=>P(_e.target.value),placeholder:"hf_...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:ring-2 focus:ring-yellow-500/10 focus:border-yellow-500 outline-none transition-all font-mono"})]})]})]}),l.jsx("div",{className:"h-px bg-slate-100 w-full"}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/6710/6710433.png",className:"w-4 h-4 object-contain",alt:"Tools"}),l.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider",children:"Search & Tools"})]}),l.jsxs("div",{className:"space-y-4 pl-1",children:[l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-700 flex items-center gap-2",children:"Google Search API"}),l.jsx(Ae,{value:L,hasSystemDefault:!1})]}),l.jsxs("div",{className:"grid gap-2",children:[l.jsx("input",{type:"text",value:L,onChange:_e=>U(_e.target.value),placeholder:"API Key",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-blue-500 outline-none font-mono"}),l.jsx("input",{type:"text",value:S,onChange:_e=>C(_e.target.value),placeholder:"Search Engine ID (CX)",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-blue-500 outline-none font-mono"})]})]}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-xs font-semibold text-slate-700",children:"Remove.bg API"}),l.jsx("span",{className:"text-[9px] bg-green-100 text-green-700 px-1.5 rounded-md border border-green-200",children:"Aktif"})]}),l.jsx(Ae,{value:T,hasSystemDefault:!0})]}),l.jsx("input",{type:"text",value:T,onChange:_e=>R(_e.target.value),placeholder:"API Key Remove.bg...",className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-xs focus:border-purple-500 outline-none font-mono"})]})]})]})]})]})]}),l.jsxs("div",{className:"p-5 border-t border-slate-100 bg-white flex items-center justify-end gap-3 shrink-0",children:[l.jsx("button",{onClick:e,className:"px-5 py-2.5 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded-xl font-bold text-sm transition-all",children:ce.cancel}),l.jsxs("button",{onClick:Z,className:"px-6 py-2.5 bg-slate-900 hover:bg-slate-800 text-white rounded-xl font-bold text-sm shadow-lg shadow-slate-900/20 active:scale-95 transition-all flex items-center gap-2",children:[l.jsx(_s,{className:"w-4 h-4"}),ce.save]})]})]})})},X9=({onLogin:t,language:e,onToggleLanguage:n,onClose:r})=>{const[s,i]=j.useState(!1),[o,a]=j.useState(null),u=async()=>{i(!0),a(null);try{const{user:c,credits:d,id:m}=await V3();t(c,m,d)}catch(c){console.error(c),c.code==="auth/popup-closed-by-user"?a("Login dibatalkan."):a("Gagal login dengan Google. Coba lagi.")}finally{i(!1)}};return l.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center overflow-hidden bg-slate-50",children:[l.jsx("div",{className:"absolute inset-0 z-0 opacity-40 pointer-events-none",style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"}}),l.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),l.jsxs("div",{className:"relative z-10 w-full max-w-sm rounded-[2rem] shadow-2xl animate-fade-in-up border border-slate-200 overflow-hidden bg-white p-2",children:[l.jsx("div",{className:"absolute inset-0 opacity-[0.4] pointer-events-none",style:{backgroundImage:"linear-gradient(#f1f5f9 1px, transparent 1px), linear-gradient(90deg, #f1f5f9 1px, transparent 1px)",backgroundSize:"20px 20px"}}),r&&l.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 rounded-full text-slate-400 hover:bg-slate-100 hover:text-slate-900 transition-all z-20",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),l.jsxs("div",{className:"relative z-10 p-8 flex flex-col items-center text-center bg-white/80 backdrop-blur-sm rounded-[1.5rem]",children:[l.jsx("div",{className:"relative mb-6",children:l.jsx("div",{className:"w-20 h-20 bg-white border border-slate-100 rounded-3xl shadow-sm flex items-center justify-center transform hover:rotate-3 transition-transform duration-500",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra Logo",className:"w-10 h-10 object-contain"})})}),l.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Fanra AI Studio"}),l.jsx("p",{className:"text-slate-500 text-sm mb-8 leading-relaxed font-medium",children:"Masuk untuk menyimpan riwayat chat dan mengakses fitur kreatif."}),l.jsx("button",{onClick:u,disabled:s,className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-3.5 px-6 rounded-xl flex items-center justify-center gap-3 transition-all shadow-lg shadow-slate-900/20 active:scale-95 group disabled:opacity-70 disabled:cursor-not-allowed",children:s?l.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center p-0.5",children:l.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google",className:"w-full h-full"})}),l.jsx("span",{className:"text-sm",children:"Lanjutkan dengan Google"})]})}),o&&l.jsxs("div",{className:"mt-6 flex items-center gap-2 text-red-500 bg-red-50 px-4 py-2 rounded-lg text-xs font-bold animate-pulse",children:[l.jsx("span",{children:""})," ",o]}),l.jsx("div",{className:"mt-8 flex flex-col gap-1",children:l.jsx("span",{className:"text-[10px] text-slate-400 font-semibold uppercase tracking-wider",children:"Powered by Google"})})]})]})]})},Z9=({isOpen:t,onClose:e,onNewChat:n,user:r,onLogout:s,onOpenLogin:i,language:o,tools:a,toolStatuses:u,onSelectTool:c,onExit:d,chatHistory:m=[],onLoadSession:g,currentSessionId:y})=>{const w=Su[o],[x,_]=j.useState(!1),v=x?a:a.slice(0,3),b=j.useMemo(()=>{const R={};return[...m].sort((U,S)=>S.timestamp-U.timestamp).forEach(U=>{const S=U.sessionId||"legacy";R[S]||(R[S]=[]),R[S].push(U)}),Object.keys(R).map(U=>{var M,V;const S=R[U],C=S.slice().reverse().find(P=>P.role==="user"),N=S[0];return{id:U,title:C?C.text:(V=(M=S[0])==null?void 0:M.attachments)!=null&&V.length?"Image Analysis":"Percakapan Baru",timestamp:N.timestamp,preview:N.text}}).sort((U,S)=>S.timestamp-U.timestamp)},[m]),T=(R,L)=>{L?We(w.toolLockedMsg):(c(R),window.innerWidth<768&&e())};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),l.jsx("div",{className:`
          fixed md:relative top-0 left-0 bottom-0 z-50 h-full
          bg-slate-900 text-slate-200
          overflow-hidden flex flex-col
          transition-[width,transform,opacity] duration-300 ease-in-out
          w-[280px]
          ${t?"translate-x-0 shadow-2xl":"-translate-x-full shadow-none"}
          md:transform-none md:shadow-none md:top-auto md:left-auto md:bottom-auto
          ${t?"md:w-[260px]":"md:w-0"}
        `,children:l.jsxs("div",{className:"w-[280px] md:w-[260px] h-full flex flex-col border-r border-slate-800 bg-slate-900",children:[l.jsxs("div",{className:"p-4 flex items-center justify-between h-14 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/14047/14047292.png",alt:"Fanra Logo",className:"w-8 h-8 object-contain"}),l.jsx("span",{className:"font-bold text-white tracking-wide",children:"Fanra"})]}),l.jsx("button",{onClick:e,className:"md:hidden text-slate-400 hover:text-white p-1",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto px-3 py-2 custom-scrollbar space-y-4",children:[l.jsxs("button",{onClick:()=>{n(),window.innerWidth<768&&e()},className:"w-full flex items-center gap-3 bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-xl transition-all active:scale-95 border border-slate-700 shadow-sm group",children:[l.jsx("span",{className:"text-xl font-light group-hover:scale-110 transition-transform",children:"+"}),l.jsx("span",{className:"text-sm font-medium",children:w.newChat})]}),l.jsx("div",{className:"h-px bg-slate-800/50 mx-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Creative Tools"}),l.jsxs("div",{className:"space-y-1",children:[v.map(R=>{const L=u[R.id]!==!1,U=(r==null?void 0:r.isAdmin)||!1,S=!L&&!U;return l.jsxs("button",{onClick:()=>T(R,S),className:`w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all border border-transparent group relative
                                        ${S?"opacity-70 hover:bg-slate-800/50 cursor-pointer":"hover:bg-slate-800 hover:border-slate-700/50 active:scale-95 cursor-pointer"}
                                    `,children:[l.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 ${S?"bg-slate-800 grayscale":R.color.replace("bg-","bg-opacity-90 bg-")} shadow-sm`,children:l.jsx("div",{className:"scale-75 text-slate-800",children:R.icon})}),l.jsx("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:l.jsx("span",{className:`block text-xs font-bold truncate ${S?"text-slate-500":"text-slate-200 group-hover:text-white"}`,children:w[R.nameKey]})}),S&&l.jsx("div",{className:"absolute right-2",children:l.jsx(TT,{className:"w-3 h-3 text-slate-500"})})]},R.id)}),l.jsxs("button",{onClick:()=>_(!x),className:"w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all hover:bg-slate-800 border border-transparent border-dashed hover:border-slate-700/50 group",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center shrink-0 bg-slate-800 text-slate-400",children:l.jsx(Ig,{className:"w-4 h-4"})}),l.jsx("span",{className:"text-xs font-medium text-slate-400 group-hover:text-white",children:x?w.lessTools:w.moreTools})]})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase mb-2 mt-4",children:w.historyHeader}),l.jsx("div",{className:"space-y-1",children:r?b.length>0?b.map(R=>l.jsxs("button",{onClick:()=>{g(R.id),window.innerWidth<768&&e()},className:`w-full text-left px-4 py-2.5 rounded-lg truncate transition-all group border ${y===R.id?"bg-slate-800 text-white border-slate-700":"text-slate-400 hover:bg-slate-800/50 hover:text-slate-200 border-transparent"}`,children:[l.jsx("div",{className:"text-xs font-medium truncate",children:R.title}),l.jsxs("div",{className:"text-[9px] text-slate-600 mt-0.5 group-hover:text-slate-500",children:[new Date(R.timestamp).toLocaleDateString(),"  ",new Date(R.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},R.id)):l.jsx("p",{className:"px-4 py-2 text-xs text-slate-600 italic text-center border border-slate-800/50 rounded-lg",children:"Belum ada riwayat chat."}):l.jsx("p",{className:"px-4 py-2 text-xs text-slate-600 italic text-center",children:"Login untuk melihat riwayat."})})]})]}),l.jsxs("div",{className:"p-4 border-t border-slate-800 bg-slate-900 shrink-0",children:[d&&l.jsxs("button",{onClick:d,className:"w-full mb-4 py-2.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-xl font-bold text-xs uppercase tracking-wider transition-all flex items-center justify-center gap-2 border border-slate-700/50 hover:border-slate-600 group",children:[l.jsx(Nr,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Exit Studio"]}),r?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.photoURL?l.jsx("img",{src:r.photoURL,alt:r.name,className:"w-8 h-8 rounded-full object-cover border border-slate-700"}):l.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500 flex items-center justify-center text-xs font-bold text-white shrink-0",children:r.name.charAt(0).toUpperCase()}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-white truncate",title:r.name,children:r.name.length>20?r.name.substring(0,20)+"...":r.name}),l.jsx("p",{className:"text-xs text-slate-500 truncate",children:r.school})]})]}),l.jsxs("button",{onClick:s,className:"w-full py-2 text-xs font-medium text-slate-400 hover:text-red-400 hover:bg-red-900/10 rounded-lg transition-colors flex items-center justify-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),w.logOut]})]}):l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-xs text-slate-400 mb-3",children:w.loginToSave}),l.jsxs("button",{onClick:i,className:"w-full py-2.5 bg-white text-slate-900 font-bold rounded-xl text-sm hover:bg-slate-200 transition-colors shadow-lg active:scale-95 flex items-center justify-center gap-2",children:[l.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"G",className:"w-4 h-4"}),w.loginBtn]})]})]})]})})]})};class e8{constructor(e,n,r,s,i){this.x=e,this.y=n,this.vx=0,this.vy=0,this.radius=s,this.color=r,this.friction=.92,this.ease=i,this.dx=(Math.random()-.5)*80,this.dy=(Math.random()-.5)*80,this.angle=Math.random()*Math.PI*2,this.angleSpeed=.02+Math.random()*.03,this.wobbleRadius=15+Math.random()*25}update(e,n,r){if(r)this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction;else{this.angle+=this.angleSpeed;const s=Math.cos(this.angle)*this.wobbleRadius,i=Math.sin(this.angle)*this.wobbleRadius,o=e+this.dx+s,a=n+this.dy+i;this.x+=(o-this.x)*this.ease,this.y+=(a-this.y)*this.ease,this.vx=0,this.vy=0}}shatter(){const e=Math.random()*Math.PI*2,n=Math.random()*30+15;this.vx=Math.cos(e)*n,this.vy=Math.sin(e)*n}draw(e){e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2),e.fillStyle=this.color,e.fill()}}const t8=({onEnter:t})=>{const[e,n]=j.useState(!1),[r,s]=j.useState(!1),i=j.useRef(null),o=j.useRef(!1),a=j.useRef({x:window.innerWidth/2,y:window.innerHeight/2}),u=j.useRef([]);j.useEffect(()=>{setTimeout(()=>s(!0),300);const m=i.current;if(!m)return;const g=m.getContext("2d");if(!g)return;const y=()=>{m.width=window.innerWidth,m.height=window.innerHeight};window.addEventListener("resize",y),y();const w=T=>{a.current={x:T.clientX,y:T.clientY}};window.addEventListener("mousemove",w);const x=["#0f172a","#1e293b","#312e81","#1e1b4b","#4c1d95","#2563eb"],_=[];for(let T=0;T<15;T++){const R=Math.random()*30+20,L=x[Math.floor(Math.random()*x.length)],U=Math.random()*.08+.03;_.push(new e8(m.width/2,m.height/2,L,R,U))}u.current=_;let v;const b=()=>{g.clearRect(0,0,m.width,m.height),u.current.forEach(T=>{T.update(a.current.x,a.current.y,o.current),T.draw(g)}),v=requestAnimationFrame(b)};return b(),()=>{window.removeEventListener("resize",y),window.removeEventListener("mousemove",w),cancelAnimationFrame(v)}},[]);const c=()=>{o.current||(o.current=!0,u.current.forEach(m=>m.shatter()),setTimeout(()=>{o.current=!1},1500))},d=()=>{n(!0),setTimeout(()=>{t()},900)};return l.jsxs("div",{className:`fixed inset-0 z-[999] bg-white flex flex-col items-center justify-center overflow-hidden transition-transform duration-[900ms] cubic-bezier(0.76, 0, 0.24, 1) ${e?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none shadow-none"}`,onDoubleClick:c,children:[l.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none filter blur-[60px] opacity-80",children:l.jsx("canvas",{ref:i,className:"w-full h-full"})}),l.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.4] pointer-events-none mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),l.jsxs("div",{className:`relative z-10 flex flex-col items-center max-w-lg w-full text-center px-6 transition-all duration-1000 ease-out transform select-none ${r?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,children:[l.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-slate-900 mb-2 tracking-tighter",children:["FANRA",l.jsx("span",{className:"text-blue-600",children:"."})]}),l.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-400 mb-8 tracking-widest uppercase",children:"AI Studio"}),l.jsxs("p",{className:"text-slate-500 text-sm md:text-base font-medium leading-relaxed mb-16 max-w-xs mx-auto",children:["Ruang imajinasi tanpa batas. ",l.jsx("br",{}),l.jsx("span",{className:"text-slate-800",children:"Edit, Ciptakan, dan Berdiskusi."})]}),l.jsxs("button",{onClick:d,className:"group flex flex-col items-center gap-4 transition-all outline-none cursor-pointer",children:[l.jsx("div",{className:"w-16 h-16 rounded-full border border-slate-200 bg-white/80 backdrop-blur-sm flex items-center justify-center shadow-lg transition-all duration-500 group-hover:scale-110 group-hover:bg-white group-hover:border-slate-300 group-active:scale-95 group-hover:shadow-xl",children:l.jsx(Xn,{className:"w-6 h-6 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-600 transition-colors duration-300",children:"Open Studio"})]})]})]})},n8="3JEZ69gonQmxU83WxzidFCFf",r8="AIzaSyDzwJLdjFvu5jrsF_HYtYSWLPSoQc2JYzA",s8="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",i8="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",o8="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",a8="sb_publishable_ikw-BNV8Wu3qhNPuSti8Rg_7XmPMWqV",l8="",gc=[{id:kn.BACKGROUND_REMOVER,nameKey:"toolBgRemove",descKey:"toolBgRemoveDesc",icon:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/593/593398.png",className:"w-8 h-8 object-contain",alt:"Hapus Background"}),color:"bg-blue-50",model:"gemini-2.5-flash-image",cost:1},{id:kn.HD_UPSCALE,nameKey:"toolUpscale",descKey:"toolUpscaleDesc",icon:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/17558/17558323.png",className:"w-8 h-8 object-contain",alt:"HD Upscale"}),color:"bg-amber-50",model:"gemini-2.5-flash-image",cost:3},{id:kn.CREATIVE_REMIX,nameKey:"toolRemix",descKey:"toolRemixDesc",icon:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/17142/17142644.png",className:"w-8 h-8 object-contain",alt:"Creative Remix"}),color:"bg-purple-50",model:"gemini-2.5-flash-image",cost:3},{id:kn.COLORIZE,nameKey:"toolColorize",descKey:"toolColorizeDesc",icon:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/15109/15109276.png",className:"w-8 h-8 object-contain",alt:"Warnai Foto"}),color:"bg-pink-50",model:"gemini-2.5-flash-image",cost:2},{id:kn.SKETCH_TO_REAL,nameKey:"toolSketch",descKey:"toolSketchDesc",icon:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/9798/9798973.png",className:"w-8 h-8 object-contain",alt:"Sketsa ke Nyata"}),color:"bg-emerald-50",model:"gemini-2.5-flash-image",cost:3}],u8=({language:t,code:e})=>{const[n,r]=j.useState(!1),s=()=>{navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)},i=o=>o.split(`
`).map((a,u)=>l.jsxs("div",{className:"table-row",children:[l.jsx("span",{className:"table-cell select-none text-slate-600 text-right pr-4 w-8 text-xs",children:u+1}),l.jsx("span",{className:"table-cell",children:a.split(/([<>{}"']|class|const|let|var|function|return|import|export)/g).map((c,d)=>c.startsWith("<")||c.startsWith(">")?l.jsx("span",{className:"text-blue-400",children:c},d):c.startsWith('"')||c.startsWith("'")?l.jsx("span",{className:"text-green-400",children:c},d):["const","let","var","function","return","import","export","class"].includes(c)?l.jsx("span",{className:"text-purple-400 font-bold",children:c},d):["=","{","}","(",")",";"].includes(c)?l.jsx("span",{className:"text-slate-400",children:c},d):l.jsx("span",{className:"text-slate-200",children:c},d))})]},u));return l.jsxs("div",{className:"my-4 rounded-xl overflow-hidden border border-slate-700/50 shadow-lg bg-[#1e1e1e] w-full max-w-full group",children:[l.jsxs("div",{className:"bg-[#2d2d2d] px-4 py-2 flex items-center justify-between border-b border-white/5",children:[l.jsx("span",{className:"text-xs font-mono text-slate-400 lowercase font-bold",children:t||"code"}),l.jsx("button",{onClick:s,className:"flex items-center gap-1.5 text-[10px] font-medium text-slate-400 hover:text-white bg-white/5 hover:bg-white/10 px-2 py-1 rounded transition-all",children:n?l.jsxs(l.Fragment,{children:[l.jsx(_s,{className:"w-3 h-3 text-green-400"})," Copied"]}):l.jsxs(l.Fragment,{children:[l.jsx(bT,{className:"w-3 h-3"})," Copy Code"]})})]}),l.jsx("div",{className:"p-4 overflow-x-auto custom-scrollbar",children:l.jsx("pre",{className:"font-mono text-sm leading-relaxed whitespace-pre font-normal",style:{tabSize:2},children:l.jsx("code",{className:"table w-full border-collapse",children:i(e)})})})]})},c8=({isOpen:t,onClose:e})=>t?l.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-6 shadow-2xl animate-fade-in-up border border-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center",children:l.jsx(zl,{className:"w-5 h-5"})}),l.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Cara Dapet API Key Gemini"})]}),l.jsxs("ol",{className:"space-y-4 text-sm text-slate-600 mb-6 list-decimal list-inside marker:font-bold marker:text-blue-600",children:[l.jsxs("li",{className:"pl-2",children:["Buka website ",l.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-bold hover:underline",children:"Google AI Studio"}),"."]}),l.jsx("li",{className:"pl-2",children:"Login pakai akun Google kamu."}),l.jsxs("li",{className:"pl-2",children:["Klik tombol biru besar bertuliskan ",l.jsx("b",{children:'"Create API Key"'}),"."]}),l.jsxs("li",{className:"pl-2",children:["Pilih ",l.jsx("b",{children:'"Create API key in new project"'}),"."]}),l.jsxs("li",{className:"pl-2",children:["Salin (Copy) kode yang muncul, lalu tempel di menu ",l.jsx("b",{children:"Pengaturan"})," aplikasi ini."]})]}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-xs text-slate-500 mb-6",children:[" ",l.jsx("b",{children:"Tips:"})," API Key ini gratis (Free Tier). Jangan kasih tau kode ini ke orang lain ya."]}),l.jsx("button",{onClick:e,className:"w-full py-3 bg-primary text-white rounded-xl font-bold shadow-lg shadow-primary/20 hover:bg-slate-800 transition-all active:scale-95",children:"Oke, Siap!"})]})}):null,$_=({text:t,block:e=!1})=>{const[n,r]=j.useState(t);j.useEffect(()=>{if(window.katex)try{const i=window.katex.renderToString(t,{throwOnError:!1,displayMode:e});r(i)}catch{r(t)}},[t,e]);const s=()=>{navigator.clipboard.writeText(t),We("Rumus LaTeX disalin! ")};return window.katex?l.jsx("span",{dangerouslySetInnerHTML:{__html:n},className:`${e?"block my-2 overflow-x-auto overflow-y-hidden py-1":""} cursor-pointer hover:bg-slate-100/50 rounded transition-colors`,title:"Klik 2x untuk salin rumus",onDoubleClick:s}):l.jsx("code",{children:t})},q_=t=>{const e=[],n=i=>{const o=`___TOKEN_${e.length}___`;return e.push({id:o,node:i}),o};let r=t.replace(/```([\w-]*)\n([\s\S]*?)```/g,(i,o,a)=>n(l.jsx(u8,{language:o,code:a})));return r=r.replace(/(\$\$[\s\S]*?\$\$|\\\[[\s\S]*?\\\])/g,i=>{const o=(i.startsWith("$$"),i.slice(2,-2));return n(l.jsx($_,{text:o,block:!0}))}),r=r.replace(new RegExp("(\\\\\\([\\s\\S]*?\\\\\\)|(?<!\\\\)\\$(?:[^$\\n]+?)(?<!\\\\)\\$)","g"),i=>{const o=i.startsWith("\\(")?i.slice(2,-2):i.slice(1,-1);return n(l.jsx($_,{text:o,block:!1}))}),r.split(`
`).map((i,o)=>i.trim().startsWith("### ")?l.jsx("h3",{className:"text-base font-bold text-slate-900 mt-3 mb-1",children:Gf(i.replace(/^###\s+/,""),e)},o):i.trim().startsWith("## ")?l.jsx("h2",{className:"text-lg font-bold text-slate-900 mt-4 mb-2",children:Gf(i.replace(/^##\s+/,""),e)},o):i.trim()==="***"||i.trim()==="---"?l.jsx("div",{className:"h-px bg-slate-200 my-4 w-full"},o):i.trim()===""?l.jsx("div",{className:"h-2"},o):l.jsx("div",{className:"block leading-relaxed",children:Gf(i,e)},o))},Gf=(t,e)=>t.split(/(\*\*[\s\S]*?\*\*)/g).map((r,s)=>r.startsWith("**")&&r.endsWith("**")?l.jsx("strong",{className:"font-bold text-slate-900",children:W_(r.slice(2,-2),e)},s):l.jsx(_l.Fragment,{children:W_(r,e)},s)),W_=(t,e)=>t.split(new RegExp("(?<!\\*)\\*([^*]+?)\\*(?!\\*)","g")).map((r,s)=>s%2===1?l.jsx("em",{className:"italic text-slate-800",children:K_(r,e)},s):K_(r,e)),K_=(t,e)=>t.split(/(___TOKEN_\d+___)/g).map((r,s)=>{const i=e.find(u=>u.id===r);if(i)return l.jsx(_l.Fragment,{children:i.node},s);const a=/\[(.*?)\]\((.*?)\)/g.exec(r);return a?l.jsxs(_l.Fragment,{children:[r.substring(0,a.index),l.jsx("a",{href:a[2],target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline font-medium",children:a[1]}),r.substring(a.index+a[0].length)]},s):r});function d8({onExit:t,isAdmin:e=!1}){const[n,r]=j.useState(!0),[s,i]=j.useState("id"),[o,a]=j.useState(null),[u,c]=j.useState(null),d=(o==null?void 0:o.isAdmin)||e,[m,g]=j.useState(!1),[y,w]=j.useState(!1),[x,_]=j.useState(!1),[v,b]=j.useState(!0),[T,R]=j.useState(null),[L,U]=j.useState(null),[S,C]=j.useState(null),[N,M]=j.useState(""),[V,P]=j.useState({isProcessing:!1,progress:"",error:null}),[D,k]=j.useState({}),[G,ye]=j.useState(Date.now().toString()),[re,ne]=j.useState([]),[Y,ue]=j.useState([]),[q,$]=j.useState(""),[ce,X]=j.useState([]),[Z,Ae]=j.useState(null),[_e,Ce]=j.useState(!1),[Se,Ye]=j.useState(!1),[ze,_t]=j.useState(null),lt=j.useRef(null),A=j.useRef(null),oe=j.useRef(null),Q=j.useRef(null),[B,O]=j.useState(!1),[H,ie]=j.useState(""),[ae,J]=j.useState([]),[fe,xe]=j.useState(""),[me,we]=j.useState(""),[Ne,Le]=j.useState(""),[St,bn]=j.useState(""),[Bt,se]=j.useState(""),[de,De]=j.useState(!0),[$e,et]=j.useState(!0),[Mt,gt]=j.useState(!1),[Wt,ln]=j.useState(!1),[Dt,Dn]=j.useState(!1),[Ln,sr]=j.useState(!1),[ot,Br]=j.useState(!1),[uo,yr]=j.useState(!1),[wi,kt]=j.useState(!1),[_i,ir]=j.useState(null),Qe=Su[s];j.useEffect(()=>{const W=(Me,je)=>{const it=localStorage.getItem(Me);it&&je(it)};W("remove_bg_key",ie),W("google_search_key",xe),W("google_search_cx",we),W("open_router_key",Le),W("hugging_face_key",bn),W("groq_key",se),localStorage.getItem("fanra_rb_enabled")==="false"&&De(!1),localStorage.getItem("fanra_sb_enabled")==="false"&&et(!1),localStorage.getItem("fanra_km_enabled")==="true"&&gt(!0),localStorage.getItem("fanra_wiki_enabled")==="true"&&ln(!0),(async()=>{const Me={};for(const je of gc){const it=`tool_status_${je.id}`,Lt=await P0(it);Me[je.id]=Lt!=="false"}k(Me)})(),un()},[]),j.useEffect(()=>{ot&&ae.some(W=>W.isActive)&&Br(!1)},[ae]),j.useEffect(()=>{var W;(W=A.current)==null||W.scrollIntoView({behavior:"smooth"})},[Y,V.isProcessing,ce]),j.useEffect(()=>{u&&(G3(u).then(W=>{ne(W);const be=W.filter(Me=>Me.sessionId===G);ue(be)}),O3(u).then(W=>J(W))),un()},[u,G]),j.useEffect(()=>{if(Q.current){Q.current.style.height="auto";const W=Math.min(Q.current.scrollHeight,128);Q.current.style.height=`${Math.max(42,W)}px`}},[q,ce]);const co=()=>H||n8,bi=()=>{const W=ae.filter(be=>be.isActive!==!1).map(be=>be.key);return W.length===0?[r8]:W},vr=W=>{ie(W),localStorage.setItem("remove_bg_key",W)},ho=(W,be)=>{xe(W),we(be),localStorage.setItem("google_search_key",W),localStorage.setItem("google_search_cx",be)},fo=W=>{Le(W),localStorage.setItem("open_router_key",W)},ss=W=>{bn(W),localStorage.setItem("hugging_face_key",W)},Ei=W=>{se(W),localStorage.setItem("groq_key",W)},z=async(W,be)=>{const Me={key:W,addedAt:Date.now(),isShared:be,isActive:!0},je=[...ae,Me];J(je),u&&await sw(u,je)},ee=async W=>{const be=ae.filter(Me=>Me.key!==W);J(be),u&&await B3(u,W,be)},pe=async(W,be)=>{const Me=ae.map(je=>je.key===W?{...je,isActive:be}:je);J(Me),u&&await sw(u,Me)},Pe=W=>{De(W),localStorage.setItem("fanra_rb_enabled",W.toString())},Ge=W=>{et(W),localStorage.setItem("fanra_sb_enabled",W.toString())},ut=W=>{gt(W),localStorage.setItem("fanra_km_enabled",W.toString())},tt=W=>{ln(W),localStorage.setItem("fanra_wiki_enabled",W.toString())},$n=async()=>{try{window.aistudio&&await window.aistudio.openSelectKey()}catch(W){console.error(W)}},un=()=>{if(ae.length>0){Dn(!1),sr(!1);return}const W=new Date().toISOString().split("T")[0],be=o?u||"user":"guest",Me=`fanra_limit_${W}_${be}_chat`,je=`fanra_limit_${W}_${be}_image`,it=parseInt(localStorage.getItem(Me)||"0"),Lt=parseInt(localStorage.getItem(je)||"0"),ft=o?10:3,zt=o?3:1;Dn(it>=ft),sr(Lt>=zt)},zr=W=>{if(ae.length>0)return!0;const je=`fanra_limit_${new Date().toISOString().split("T")[0]}_${o?u||"user":"guest"}_${W}`,it=parseInt(localStorage.getItem(je)||"0");let Lt=0;return o?Lt=W==="chat"?10:3:Lt=W==="chat"?3:1,it>=Lt?(un(),!1):(localStorage.setItem(je,(it+1).toString()),un(),!0)},xr=(W,be,Me,je)=>{U({data:W,mimeType:be,width:Me,height:je})},wr=(W,be,Me)=>{a(W),c(be),g(!1)},cn=()=>{U(null),C(null),M(""),R(null),P({isProcessing:!1,progress:"",error:null}),X([]),ir(null)},or=async()=>{await U3(),a(null),c(null),J([]),cn(),ne([]),ue([]),Br(!1),un()},En=()=>i(W=>W==="id"?"en":"id"),Ti=(W,be)=>{W&&navigator.clipboard.writeText(W).then(()=>{Ae(be),setTimeout(()=>Ae(null),2e3)})},Vh=W=>{_t(be=>be===W?null:W)},Cu=async(W,be)=>{if(be.stopPropagation(),!d)return;const Me=!D[W];k(je=>({...je,[W]:Me}));try{await M0(`tool_status_${W}`,Me.toString())}catch{k(it=>({...it,[W]:!Me}))}},Au=(W,be)=>{be?We(Qe.toolLockedMsg):R(W)},Nu=W=>{W.preventDefault(),W.stopPropagation(),Ce(!0)},Ra=W=>{W.preventDefault(),W.stopPropagation(),Ce(!1)},Pa=W=>{const be=new FileReader;be.onloadend=()=>{const Me=be.result,je=new Image;je.onload=()=>{xr(Me.split(",")[1],W.type,je.width,je.height)},je.src=Me},be.readAsDataURL(W)},Ma=W=>{if(W.length+ce.length>3){alert("Maksimal 3 gambar sekaligus.");return}W.forEach(be=>{if(!be.type.startsWith("image/"))return;const Me=new FileReader;Me.onloadend=()=>{const je=Me.result.split(",")[1];X(it=>[...it,{data:je,mimeType:be.type,name:be.name}])},Me.readAsDataURL(be)})},Ru=W=>{W.preventDefault(),W.stopPropagation(),Ce(!1);const be=Array.from(W.dataTransfer.files);if(be.length!==0)if(T){const Me=be[0];Me.type.startsWith("image/")&&Pa(Me)}else Ma(be)},Pu=()=>{const W=Date.now().toString();ye(W),ue([]),X([]),cn(),w(!1)},Uh=W=>{ye(W);const be=re.filter(Me=>Me.sessionId===W);ue(be),w(!1),cn()},Da=()=>{S?(ir("back"),kt(!0)):cn()},Mu=()=>{_i==="back"&&cn(),kt(!1),ir(null)},Oh=()=>{lt.current&&(lt.current.abort(),lt.current=null,P({isProcessing:!1,progress:"",error:"Stopped by user."}))},Gr=async W=>{var it,Lt;if(W==null||W.preventDefault(),!q.trim()&&ce.length===0||ot||!zr("chat")||ce.length>0&&!zr("image"))return;const be={id:Date.now().toString(),sessionId:G,role:"user",text:q,timestamp:Date.now(),attachments:[...ce]},Me={id:"temp-thinking",sessionId:G,role:"model",text:"",timestamp:Date.now()+1},je=[...Y,be,Me];ue(je),ne(ft=>[...ft,be,Me]),$(""),X([]),P({isProcessing:!0,progress:"AI Thinking...",error:null}),u&&iw(u,be);try{lt.current=new AbortController;const ft=fe&&me?{apiKey:fe,cx:me}:void 0,zt=bi(),qn=await $9(be.text,zt,Y,s,be.attachments||[],Ms=>{ue(jn=>jn.map(La=>La.id==="temp-thinking"?{...La,text:Ms}:La))},Mt,Wt,ft,lt.current.signal,Ne||s8,St||i8,Bt||o8),ar={id:(Date.now()+2).toString(),sessionId:G,role:"model",text:qn.text,timestamp:Date.now(),source:qn.source};ue(Ms=>Ms.map(jn=>jn.id==="temp-thinking"?ar:jn)),ne(Ms=>Ms.map(jn=>jn.id==="temp-thinking"?ar:jn)),u&&iw(u,ar)}catch(ft){if(ft.message==="Request cancelled by user")ue(zt=>zt.filter(qn=>qn.id!=="temp-thinking")),ne(zt=>zt.filter(qn=>qn.id!=="temp-thinking"));else{const zt={id:(Date.now()+2).toString(),sessionId:G,role:"model",text:Qe.chatFallbackError+(ft.message?` (${ft.message})`:""),timestamp:Date.now()};ue(qn=>qn.map(ar=>ar.id==="temp-thinking"?zt:ar)),ne(qn=>qn.map(ar=>ar.id==="temp-thinking"?zt:ar)),((it=ft.message)!=null&&it.includes("429")||(Lt=ft.message)!=null&&Lt.includes("quota"))&&Br(!0)}}finally{P({isProcessing:!1,progress:"",error:null}),lt.current=null}},_r=W=>{X(be=>be.filter((Me,je)=>je!==W))},Ii=()=>{var W;Ln||(W=oe.current)==null||W.click()},po=W=>{if(W.target.files){const be=Array.from(W.target.files);Ma(be)}W.target.value=""},Du=o||{name:"Guest"},dt=x?gc:gc.slice(0,3),mo=async()=>{if(!L||!T||!zr("image"))return;P({isProcessing:!0,progress:Qe.initializing,error:null}),C(null);const W=T.id===kn.BACKGROUND_REMOVER,be=co(),Me=bi();try{let je="",it=!1;if(W&&be&&de&&!it)try{P(ft=>({...ft,progress:Qe.processingStandard})),je=await K9(L.data,be),it=!0}catch{console.warn("Standard Engine failed")}if(!it&&(W||!W)&&!it&&Me.length>0)try{P(ft=>({...ft,progress:Qe.processingAI})),je=await V9({image:L,tool:T.id,prompt:T.id===kn.CREATIVE_REMIX?N:void 0,apiKeys:Me}),W&&(P(ft=>({...ft,progress:Qe.refining})),je=await q9(je)),it=!0}catch(ft){console.warn("Gemini failed",ft)}if(!it||!je)throw new Error("No available API Keys or Services found/enabled.");C(je),P({isProcessing:!1,progress:"",error:null})}catch(je){console.error("Execution Error:",je);let it=Qe.serviceBusy;const Lt=(je.message||"").toLowerCase();Lt.includes("network")||Lt.includes("fetch")?it=Qe.networkError:Lt.includes("memory")||Lt.includes("oom")?it=Qe.memoryError:(Lt.includes("no available api")||Lt.includes("enabled"))&&(it=Qe.insufficientCredits),P({isProcessing:!1,progress:"",error:it})}},Ps=Dt&&!ot&&!V.isProcessing,Si=/(\$\$|\\\[|\\\(|\$)/.test(q);return l.jsxs("div",{className:"flex h-[100dvh] bg-white font-sans text-primary overflow-hidden relative",onDragOver:Nu,onDragLeave:Ra,onDrop:Ru,children:[n&&l.jsx(t8,{onEnter:()=>r(!1)}),_e&&l.jsx("div",{className:"absolute inset-0 z-[100] bg-primary/10 backdrop-blur-sm border-4 border-primary border-dashed m-4 rounded-3xl flex items-center justify-center pointer-events-none",children:l.jsxs("div",{className:"bg-white px-8 py-4 rounded-2xl shadow-xl flex items-center gap-3",children:[l.jsx(Pv,{className:"w-6 h-6 text-primary"}),l.jsx("span",{className:"font-bold text-lg text-primary",children:"Drop files to send"})]})}),m&&l.jsx("div",{className:"fixed inset-0 z-[60] bg-white",children:l.jsx(X9,{onLogin:wr,language:s,onToggleLanguage:En,onClose:()=>g(!1)})}),l.jsx(c8,{isOpen:uo,onClose:()=>yr(!1)}),l.jsx(Q9,{isOpen:B,onClose:()=>O(!1),removeBgKey:H,onSaveRemoveBgKey:vr,storedApiKeys:ae,onAddApiKey:z,onDeleteApiKey:ee,onToggleApiKey:pe,onSelectGoogleKey:$n,knowledgeMode:Mt,onToggleKnowledgeMode:ut,wikiEnabled:Wt,onToggleWiki:tt,removeBgEnabled:de,onToggleRemoveBg:Pe,supabaseEnabled:$e,onToggleSupabase:Ge,googleSearchKey:fe,googleSearchCx:me,onSaveGoogleSearch:ho,openRouterKey:Ne,onSaveOpenRouterKey:fo,huggingFaceKey:St,onSaveHuggingFaceKey:ss,groqKey:Bt,onSaveGroqKey:Ei,language:s}),l.jsx(Iu,{isOpen:wi,title:Qe.confirmTitle,description:Qe.confirmDesc,confirmText:Qe.yesChange,onConfirm:Mu,onCancel:()=>kt(!1)}),l.jsx(Z9,{isOpen:y,onClose:()=>w(!1),onNewChat:Pu,user:o,onLogout:or,onOpenLogin:()=>g(!0),language:s,tools:gc,toolStatuses:D,onSelectTool:R,onExit:t,chatHistory:re,onLoadSession:Uh,currentSessionId:G}),l.jsxs("div",{className:"flex-1 flex flex-col h-full relative w-full overflow-hidden bg-slate-50/50",children:[l.jsx("header",{className:"absolute top-0 left-0 right-0 z-30 p-4 pointer-events-none",children:l.jsxs("div",{className:"max-w-5xl mx-auto bg-white/80 backdrop-blur-xl border border-white/40 shadow-lg shadow-slate-200/50 rounded-2xl px-4 py-3 flex items-center justify-between pointer-events-auto",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>w(!y),className:"p-2 rounded-xl hover:bg-slate-100 text-slate-600 transition-colors",children:l.jsx(_T,{className:"w-5 h-5"})}),l.jsx("div",{className:"font-bold text-lg tracking-tight bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent hidden md:block",children:"Fanra Studio"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:En,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-full text-xs font-bold text-slate-700 transition-all hover:shadow-sm active:scale-95",children:[l.jsx("img",{src:s==="id"?"https://cdn-icons-png.flaticon.com/128/11654/11654463.png":"https://cdn-icons-png.flaticon.com/128/9906/9906532.png",alt:"Lang",className:"w-4 h-4 object-contain"}),l.jsx("span",{children:s.toUpperCase()})]}),l.jsxs("button",{onClick:()=>O(!0),className:"p-2 text-slate-400 hover:text-primary hover:bg-slate-100 rounded-full transition-all relative",children:[l.jsx(Op,{className:"w-5 h-5"}),ot&&l.jsx("span",{className:"absolute top-1.5 right-1.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]})]})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto pt-24 px-4 scroll-smooth custom-scrollbar",children:l.jsxs("div",{className:"max-w-3xl mx-auto min-h-full flex flex-col pb-4",children:[Y.length===0&&!T&&l.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center py-10 animate-fade-in-up",children:[l.jsxs("div",{className:"mb-8 text-center",children:[l.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 mb-3 tracking-tight",children:[Qe.heroTitle," ",Du.name]}),l.jsx("p",{className:"text-slate-500 text-lg",children:Qe.heroSubtitle})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-5 w-full max-w-2xl px-2",children:[dt.map(W=>{const be=D[W.id]!==!1,Me=!be&&!d;return l.jsxs("button",{onClick:()=>Au(W,Me),className:`relative flex flex-col items-center text-center p-4 md:p-6 bg-white border rounded-2xl shadow-sm transition-all duration-300 group h-full ${Me?"border-slate-100 opacity-80 bg-slate-50 hover:bg-slate-100 cursor-pointer":"hover:border-primary/20 hover:shadow-xl hover:-translate-y-1 border-slate-100 cursor-pointer"}`,children:[d&&l.jsx("div",{className:"absolute top-2 right-2 z-20",onClick:je=>Cu(W.id,je),children:l.jsx("div",{className:`w-8 h-4 rounded-full transition-colors flex items-center p-0.5 ${be?"bg-green-500":"bg-slate-300"}`,children:l.jsx("div",{className:`w-3 h-3 bg-white rounded-full shadow-sm transform transition-transform ${be?"translate-x-4":"translate-x-0"}`})})}),Me&&l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsx("div",{className:"bg-slate-100 p-1.5 rounded-full shadow-sm",children:l.jsx(TT,{className:"w-3 h-3 text-slate-400"})})}),l.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 ${Me?"bg-slate-200 grayscale":W.color} rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110 shadow-sm`,children:W.icon}),l.jsx("span",{className:`text-xs md:text-sm font-bold leading-tight ${Me?"text-slate-400":"text-slate-700"}`,children:Qe[W.nameKey]}),l.jsx("span",{className:"hidden md:block text-[10px] text-slate-400 mt-2 leading-tight",children:Qe[W.descKey]})]},W.id)}),l.jsxs("button",{onClick:()=>_(!x),className:`flex flex-col items-center justify-center text-center p-4 md:p-6 bg-slate-50 border border-slate-200 border-dashed rounded-2xl hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-300 group h-full ${x?"":"col-start-2"}`,children:[l.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-slate-100 text-slate-400 rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110",children:l.jsx(Ig,{className:"w-6 h-6"})}),l.jsx("span",{className:"text-xs md:text-sm font-bold text-slate-500 group-hover:text-slate-700 leading-tight",children:x?Qe.lessTools:Qe.moreTools})]})]})]}),Y.map(W=>l.jsxs("div",{className:`flex flex-col mb-6 animate-fade-in ${W.role==="user"?"items-end":"items-start"}`,children:[W.attachments&&W.attachments.length>0&&l.jsx("div",{className:`flex flex-wrap gap-2 mb-2 max-w-[85%] ${W.role==="user"?"justify-end":"justify-start"}`,children:W.attachments.map((be,Me)=>l.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200/50 shadow-sm transition-transform hover:scale-[1.02]",children:l.jsx("img",{src:`data:${be.mimeType};base64,${be.data}`,alt:be.name,className:"h-32 w-auto object-cover md:h-48 rounded-lg bg-slate-100"})},Me))}),(W.text||W.role==="model"&&!W.text)&&l.jsxs("div",{className:`flex flex-col gap-1 max-w-lg lg:max-w-2xl ${W.role==="user"?"items-end":"items-start"}`,children:[l.jsx("div",{className:`relative px-5 py-3.5 rounded-2xl text-sm leading-relaxed shadow-sm break-words group w-full ${W.role==="user"?"bg-white text-slate-800 rounded-tr-sm border border-slate-100 shadow-slate-200/50":"bg-transparent text-slate-700 p-0 shadow-none"}`,children:W.role==="model"&&!W.text?l.jsxs("div",{className:"flex gap-1.5 h-5 items-center",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"}),l.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-100"}),l.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-200"})]}):q_(W.text)}),l.jsxs("div",{className:`flex items-center gap-2 mt-1 px-1 ${W.role==="user"?"justify-end":"justify-start"}`,children:[W.role==="model"&&W.source&&l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>Vh(W.id),className:`p-1.5 rounded-full transition-all ${ze===W.id?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-400 hover:text-slate-600"}`,title:"Info Sumber",children:l.jsx(cN,{className:"w-3.5 h-3.5"})}),ze===W.id&&l.jsxs("div",{className:"absolute bottom-8 left-0 z-10 bg-white border border-slate-200 rounded-xl shadow-xl p-2 min-w-[140px] animate-fade-in-up origin-bottom-left flex flex-col gap-1",children:[l.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider px-1",children:"Sumber Data"}),l.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg bg-slate-50 text-xs font-semibold text-slate-700",children:[W.source==="gemini"&&l.jsx(Rv,{className:"w-3.5 h-3.5"}),W.source==="openrouter"&&l.jsx("div",{className:"w-3.5 h-3.5 bg-green-500 rounded-full flex items-center justify-center text-[8px] text-white font-bold",children:"OR"}),W.source==="groq"&&l.jsx(iN,{className:"w-3.5 h-3.5 text-orange-500"}),W.source==="huggingface"&&l.jsx("div",{className:"w-3.5 h-3.5 bg-yellow-400 rounded-full flex items-center justify-center text-[8px] text-black font-bold",children:"HF"}),W.source==="google_search"&&l.jsx(Rv,{className:"w-3.5 h-3.5 text-orange-500"}),W.source==="weather"&&l.jsx(dN,{className:"w-3.5 h-3.5 text-blue-400"}),W.source==="country_fact"&&l.jsx(hN,{className:"w-3.5 h-3.5 text-red-500"}),l.jsx("span",{children:W.source==="gemini"?"Google Gemini":W.source==="openrouter"?"OpenRouter":W.source==="groq"?"Groq LPU":W.source==="huggingface"?"HuggingFace":W.source==="weather"?"Open-Meteo":W.source==="country_fact"?"RestCountries":W.source==="google_search"?"Google":W.source})]})]})]}),W.text&&l.jsx("button",{onClick:()=>Ti(W.text,W.id),className:`p-1.5 rounded-full transition-all ${Z===W.id?"bg-green-100 text-green-600":"bg-white border border-slate-100 text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:Z===W.id?l.jsx(_s,{className:"w-3.5 h-3.5"}):l.jsx(bT,{className:"w-3.5 h-3.5"})})]})]})]},W.id)),T&&l.jsxs("div",{className:"w-full animate-fade-in py-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("button",{onClick:Da,className:"text-xs flex items-center gap-1 text-slate-500 hover:text-primary px-3 py-1.5 bg-white border border-slate-200 rounded-full shadow-sm hover:shadow transition-all",children:[l.jsx(Nr,{className:"w-4 h-4"})," ",Qe.back]}),l.jsx("span",{className:"font-bold text-sm text-slate-700 bg-white px-3 py-1 rounded-full border border-slate-100 shadow-sm",children:Qe[T.nameKey]})]}),L?l.jsxs("div",{className:"space-y-4",children:[!S&&!V.isProcessing&&l.jsx("div",{className:"bg-slate-100 p-4 rounded-2xl border border-slate-200/60 max-w-sm mx-auto shadow-inner",children:l.jsx("img",{src:`data:${L.mimeType};base64,${L.data}`,className:"rounded-xl max-h-60 mx-auto object-contain shadow-sm"})}),T.id===kn.CREATIVE_REMIX&&!S&&l.jsx("textarea",{className:"w-full bg-white border border-slate-200 rounded-2xl p-4 text-sm focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none shadow-sm transition-all",placeholder:Qe.aiPromptPlaceholder,value:N,onChange:W=>M(W.target.value)}),!S&&!V.isProcessing&&l.jsx("button",{onClick:mo,disabled:T.id===kn.CREATIVE_REMIX&&!N.trim(),className:"w-full py-4 bg-primary text-white rounded-2xl font-bold shadow-xl shadow-slate-900/10 active:scale-95 transition-all hover:-translate-y-0.5",children:Qe.generateMagic}),(V.isProcessing||S)&&l.jsx(Y9,{originalImage:L,resultImageBase64:S,isProcessing:V.isProcessing,processingText:V.progress,onReset:Da,language:s})]}):l.jsx(J9,{onImageSelect:xr,language:s})]}),V.isProcessing&&T&&l.jsx("div",{className:"flex gap-4 animate-fade-in pl-5",children:l.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[l.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-100"}),l.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-200"})]})}),l.jsx("div",{ref:A})]})}),!T&&l.jsx("div",{className:"shrink-0 w-full px-4 pb-6 pt-2 z-40 bg-slate-50/50 backdrop-blur-sm",children:l.jsxs("div",{className:"max-w-3xl mx-auto",children:[ot&&l.jsx("div",{className:"mb-3 animate-fade-in-up",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 flex items-center justify-between shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[l.jsx(ou,{className:"w-5 h-5"}),l.jsx("span",{className:"text-xs font-bold",children:"Limit Chat Habis."})]}),l.jsx("button",{onClick:()=>yr(!0),className:"text-xs font-bold text-white bg-red-500 hover:bg-red-600 px-3 py-1.5 rounded-lg transition-colors shadow-sm",children:"Cara Dapet API Key?"})]})}),Ps&&l.jsxs("div",{className:"bg-slate-900 text-white rounded-t-3xl p-3 px-4 flex items-center justify-between shadow-2xl animate-fade-in z-10 relative mt-2 mx-1",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("span",{className:"text-xs font-bold leading-tight",children:o?"Limit harian habis. Besok lagi ya!":"Login/Masuk untuk lanjut mengobrol dengan Fanra"})}),!o&&l.jsx("button",{onClick:()=>g(!0),className:"text-[10px] font-bold bg-white text-slate-900 px-3 py-1.5 rounded-lg hover:bg-slate-200 transition-colors shadow-sm whitespace-nowrap",children:"Login Sekarang"})]}),l.jsxs("form",{onSubmit:Gr,className:`relative flex flex-col bg-white border shadow-2xl shadow-slate-200/60 transition-all duration-300 focus-within:shadow-xl ${ot?"border-red-200 opacity-80 rounded-3xl":Ps?"rounded-b-3xl rounded-t-sm border-t-0 border-slate-900/10":"rounded-3xl border-slate-200 focus-within:border-slate-300"}`,children:[Si&&l.jsxs("div",{className:"border-b border-slate-100 bg-slate-50/50 rounded-t-2xl animate-fade-in overflow-hidden transition-all",children:[l.jsxs("div",{onClick:()=>b(!v),className:"flex items-center justify-between p-2 cursor-pointer hover:bg-slate-100 transition-colors select-none",children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase px-1",children:"Pratinjau Rumus"}),l.jsx(Xn,{className:`w-3 h-3 text-slate-400 transition-transform ${v?"":"-rotate-90"}`})]}),v&&l.jsx("div",{className:"p-3 bg-white text-sm overflow-x-auto border-t border-slate-100 max-h-40 custom-scrollbar",children:q_(q)})]}),ce.length>0&&l.jsxs("div",{className:"p-3 border-b border-slate-100 bg-slate-50 flex items-start gap-3 animate-fade-in overflow-x-auto custom-scrollbar rounded-t-[22px]",children:[ce.map((W,be)=>l.jsxs("div",{className:"relative group flex-shrink-0",children:[l.jsx("img",{src:`data:${W.mimeType};base64,${W.data}`,alt:"Preview",className:"h-16 w-16 object-cover rounded-lg border border-slate-200 shadow-sm"}),l.jsx("button",{type:"button",onClick:()=>_r(be),className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full p-0.5 shadow-md hover:bg-red-600 transition-colors",children:l.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},be)),ce.length<3&&l.jsx("div",{onClick:Ii,className:"h-16 w-16 rounded-lg border-2 border-dashed border-slate-300 flex items-center justify-center cursor-pointer hover:border-primary hover:bg-white transition-colors flex-shrink-0 text-slate-400 hover:text-primary",children:l.jsx("span",{className:"text-xs font-bold",children:"+"})})]}),l.jsxs("div",{className:"flex items-end gap-1.5 p-2.5",children:[l.jsxs("div",{className:"relative",children:[l.jsx("button",{type:"button",onClick:()=>Ye(!Se),className:"p-2.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors flex-shrink-0 mb-0.5",children:l.jsx(aN,{className:"w-5 h-5"})}),Se&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>Ye(!1)}),l.jsxs("div",{className:"absolute bottom-12 left-0 w-48 bg-white border border-slate-200 rounded-xl shadow-xl z-[60] py-1 overflow-hidden animate-fade-in-up origin-bottom-left",children:[l.jsxs("button",{type:"button",onClick:()=>{Pu(),Ye(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-red-500 hover:bg-red-50 flex items-center gap-2",children:[l.jsx(Jr,{className:"w-4 h-4"})," Clear Chat"]}),l.jsxs("button",{type:"button",onClick:()=>{O(!0),Ye(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-2",children:[l.jsx(Op,{className:"w-4 h-4"})," Settings"]})]})]})]}),l.jsx("input",{type:"file",ref:oe,className:"hidden",accept:"image/*",multiple:!0,onChange:po}),l.jsx("button",{type:"button",onClick:Ii,disabled:Ln,className:`p-2.5 rounded-full transition-colors flex-shrink-0 mb-0.5 ${Ln?"text-slate-300 cursor-not-allowed":"text-slate-400 hover:text-slate-600 hover:bg-slate-100"}`,children:l.jsx(Pv,{className:"w-5 h-5"})}),l.jsx("textarea",{ref:Q,value:q,onChange:W=>$(W.target.value),onKeyDown:W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),Gr(W))},disabled:ot||Dt,placeholder:ot?"Limit API Key Habis.":Mt?"(Knowledge Mode Active)":ce.length>0?Qe.aiPromptPlaceholder:Qe.chatPlaceholder,className:"flex-1 bg-transparent border-none focus:ring-0 focus:outline-none resize-none max-h-32 py-3 px-2 text-sm text-primary placeholder:text-slate-400 leading-relaxed custom-scrollbar disabled:text-slate-400 disabled:cursor-not-allowed",rows:1,style:{minHeight:"44px",overflowY:"auto"}}),V.isProcessing&&!T?l.jsx("button",{type:"button",onClick:Oh,className:"p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 bg-slate-900 text-white hover:bg-slate-700 animate-pulse",title:"Stop Generation",children:l.jsx(ET,{className:"w-5 h-5"})}):l.jsx("button",{type:"submit",disabled:!q.trim()&&ce.length===0||V.isProcessing||ot||Dt&&q.trim().length>0,className:`p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 ${Mt?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-primary text-white hover:bg-slate-800"} ${ot||Dt?"bg-slate-300 text-white cursor-not-allowed opacity-50 blur-[1px]":""}`,children:l.jsx("svg",{className:"w-5 h-5 transform rotate-90",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})]})})]})]})}function yc(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pk={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,s,i){function o(c,d){if(!s[c]){if(!r[c]){var m=typeof yc=="function"&&yc;if(!d&&m)return m(c,!0);if(a)return a(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var y=s[c]={exports:{}};r[c][0].call(y.exports,function(w){var x=r[c][1][w];return o(x||w)},y,y.exports,n,r,s,i)}return s[c].exports}for(var a=typeof yc=="function"&&yc,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(u){for(var c,d,m,g,y,w,x,_=[],v=0,b=u.length,T=b,R=i.getTypeOf(u)!=="string";v<u.length;)T=b-v,m=R?(c=u[v++],d=v<b?u[v++]:0,v<b?u[v++]:0):(c=u.charCodeAt(v++),d=v<b?u.charCodeAt(v++):0,v<b?u.charCodeAt(v++):0),g=c>>2,y=(3&c)<<4|d>>4,w=1<T?(15&d)<<2|m>>6:64,x=2<T?63&m:64,_.push(a.charAt(g)+a.charAt(y)+a.charAt(w)+a.charAt(x));return _.join("")},s.decode=function(u){var c,d,m,g,y,w,x=0,_=0,v="data:";if(u.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var b,T=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===a.charAt(64)&&T--,u.charAt(u.length-2)===a.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=o.uint8array?new Uint8Array(0|T):new Array(0|T);x<u.length;)c=a.indexOf(u.charAt(x++))<<2|(g=a.indexOf(u.charAt(x++)))>>4,d=(15&g)<<4|(y=a.indexOf(u.charAt(x++)))>>2,m=(3&y)<<6|(w=a.indexOf(u.charAt(x++))),b[_++]=c,y!==64&&(b[_++]=d),w!==64&&(b[_++]=m);return b}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function c(d,m,g,y,w){this.compressedSize=d,this.uncompressedSize=m,this.crc32=g,this.compression=y,this.compressedContent=w}c.prototype={getContentWorker:function(){var d=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),m=this;return d.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,m,g){return d.pipe(new a).pipe(new u("uncompressedSize")).pipe(m.compressWorker(g)).pipe(new u("compressedSize")).withStreamInfo("compression",m)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,u=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;u[c]=a}return u}();r.exports=function(a,u){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(c,d,m,g){var y=o,w=g+m;c^=-1;for(var x=g;x<w;x++)c=c>>>8^y[255&(c^d[x])];return-1^c}(0|u,a,a.length,0):function(c,d,m,g){var y=o,w=g+m;c^=-1;for(var x=g;x<w;x++)c=c>>>8^y[255&(c^d.charCodeAt(x))];return-1^c}(0|u,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),u=n("./stream/GenericWorker"),c=i?"uint8array":"array";function d(m,g){u.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=g,this.meta={}}s.magic="\b\0",a.inherits(d,u),d.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,m.data),!1)},d.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(g){m.push({data:g,meta:m.meta})}},s.compressWorker=function(m){return new d("Deflate",m)},s.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(y,w){var x,_="";for(x=0;x<w;x++)_+=String.fromCharCode(255&y),y>>>=8;return _}function o(y,w,x,_,v,b){var T,R,L=y.file,U=y.compression,S=b!==c.utf8encode,C=a.transformTo("string",b(L.name)),N=a.transformTo("string",c.utf8encode(L.name)),M=L.comment,V=a.transformTo("string",b(M)),P=a.transformTo("string",c.utf8encode(M)),D=N.length!==L.name.length,k=P.length!==M.length,G="",ye="",re="",ne=L.dir,Y=L.date,ue={crc32:0,compressedSize:0,uncompressedSize:0};w&&!x||(ue.crc32=y.crc32,ue.compressedSize=y.compressedSize,ue.uncompressedSize=y.uncompressedSize);var q=0;w&&(q|=8),S||!D&&!k||(q|=2048);var $=0,ce=0;ne&&($|=16),v==="UNIX"?(ce=798,$|=function(Z,Ae){var _e=Z;return Z||(_e=Ae?16893:33204),(65535&_e)<<16}(L.unixPermissions,ne)):(ce=20,$|=function(Z){return 63&(Z||0)}(L.dosPermissions)),T=Y.getUTCHours(),T<<=6,T|=Y.getUTCMinutes(),T<<=5,T|=Y.getUTCSeconds()/2,R=Y.getUTCFullYear()-1980,R<<=4,R|=Y.getUTCMonth()+1,R<<=5,R|=Y.getUTCDate(),D&&(ye=i(1,1)+i(d(C),4)+N,G+="up"+i(ye.length,2)+ye),k&&(re=i(1,1)+i(d(V),4)+P,G+="uc"+i(re.length,2)+re);var X="";return X+=`
\0`,X+=i(q,2),X+=U.magic,X+=i(T,2),X+=i(R,2),X+=i(ue.crc32,4),X+=i(ue.compressedSize,4),X+=i(ue.uncompressedSize,4),X+=i(C.length,2),X+=i(G.length,2),{fileRecord:m.LOCAL_FILE_HEADER+X+C+G,dirRecord:m.CENTRAL_FILE_HEADER+i(ce,2)+X+i(V.length,2)+"\0\0\0\0"+i($,4)+i(_,4)+C+G+V}}var a=n("../utils"),u=n("../stream/GenericWorker"),c=n("../utf8"),d=n("../crc32"),m=n("../signature");function g(y,w,x,_){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=x,this.encodeFileName=_,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(g,u),g.prototype.push=function(y){var w=y.meta.percent||0,x=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,u.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:x?(w+100*(x-_-1))/x:100}}))},g.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var w=this.streamFiles&&!y.file.dir;if(w){var x=o(y,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(y){this.accumulate=!1;var w=this.streamFiles&&!y.file.dir,x=o(y,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),w)this.push({data:function(_){return m.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var y=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var x=this.bytesWritten-y,_=function(v,b,T,R,L){var U=a.transformTo("string",L(R));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(v,2)+i(v,2)+i(b,4)+i(T,4)+i(U.length,2)+U}(this.dirRecords.length,x,y,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(y){this._sources.push(y);var w=this;return y.on("data",function(x){w.processChunk(x)}),y.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),y.on("error",function(x){w.error(x)}),this},g.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(y){var w=this._sources;if(!u.prototype.error.call(this,y))return!1;for(var x=0;x<w.length;x++)try{w[x].error(y)}catch{}return!0},g.prototype.lock=function(){u.prototype.lock.call(this);for(var y=this._sources,w=0;w<y.length;w++)y[w].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,u,c){var d=new o(u.streamFiles,c,u.platform,u.encodeFileName),m=0;try{a.forEach(function(g,y){m++;var w=function(b,T){var R=b||T,L=i[R];if(!L)throw new Error(R+" is not a valid compression method !");return L}(y.options.compression,u.compression),x=y.options.compressionOptions||u.compressionOptions||{},_=y.dir,v=y.date;y._compressWorker(w,x).withStreamInfo("file",{name:g,dir:_,date:v,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(d)}),d.entriesCount=m}catch(g){d.error(g)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),u=n("./zipEntries"),c=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function m(g){return new o.Promise(function(y,w){var x=g.decompressed.getContentWorker().pipe(new c);x.on("error",function(_){w(_)}).on("end",function(){x.streamInfo.crc32!==g.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(g,y){var w=this;return y=i.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",g,!0,y.optimizedBinaryString,y.base64).then(function(x){var _=new u(y);return _.load(x),_}).then(function(x){var _=[o.Promise.resolve(x)],v=x.files;if(y.checkCRC32)for(var b=0;b<v.length;b++)_.push(m(v[b]));return o.Promise.all(_)}).then(function(x){for(var _=x.shift(),v=_.files,b=0;b<v.length;b++){var T=v[b],R=T.fileNameStr,L=i.resolve(T.fileNameStr);w.file(L,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:y.createFolders}),T.dir||(w.file(L).unsafeOriginalName=R)}return _.zipComment.length&&(w.comment=_.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(a,o),a.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,u,c){i.call(this,u),this._helper=a;var d=this;a.on("data",function(m,g){d.push(m)||d._helper.pause(),c&&c(g)}).on("error",function(m){d.emit("error",m)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(L,U,S){var C,N=a.getTypeOf(U),M=a.extend(S||{},d);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(L=v(L)),M.createFolders&&(C=_(L))&&b.call(this,C,!0);var V=N==="string"&&M.binary===!1&&M.base64===!1;S&&S.binary!==void 0||(M.binary=!V),(U instanceof m&&U.uncompressedSize===0||M.dir||!U||U.length===0)&&(M.base64=!1,M.binary=!0,U="",M.compression="STORE",N="string");var P=null;P=U instanceof m||U instanceof u?U:w.isNode&&w.isStream(U)?new x(L,U):a.prepareContent(L,U,M.binary,M.optimizedBinaryString,M.base64);var D=new g(L,P,M);this.files[L]=D}var o=n("./utf8"),a=n("./utils"),u=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),d=n("./defaults"),m=n("./compressedObject"),g=n("./zipObject"),y=n("./generate"),w=n("./nodejsUtils"),x=n("./nodejs/NodejsStreamInputAdapter"),_=function(L){L.slice(-1)==="/"&&(L=L.substring(0,L.length-1));var U=L.lastIndexOf("/");return 0<U?L.substring(0,U):""},v=function(L){return L.slice(-1)!=="/"&&(L+="/"),L},b=function(L,U){return U=U!==void 0?U:d.createFolders,L=v(L),this.files[L]||i.call(this,L,null,{dir:!0,createFolders:U}),this.files[L]};function T(L){return Object.prototype.toString.call(L)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(L){var U,S,C;for(U in this.files)C=this.files[U],(S=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&L(S,C)},filter:function(L){var U=[];return this.forEach(function(S,C){L(S,C)&&U.push(C)}),U},file:function(L,U,S){if(arguments.length!==1)return L=this.root+L,i.call(this,L,U,S),this;if(T(L)){var C=L;return this.filter(function(M,V){return!V.dir&&C.test(M)})}var N=this.files[this.root+L];return N&&!N.dir?N:null},folder:function(L){if(!L)return this;if(T(L))return this.filter(function(N,M){return M.dir&&L.test(N)});var U=this.root+L,S=b.call(this,U),C=this.clone();return C.root=S.name,C},remove:function(L){L=this.root+L;var U=this.files[L];if(U||(L.slice(-1)!=="/"&&(L+="/"),U=this.files[L]),U&&!U.dir)delete this.files[L];else for(var S=this.filter(function(N,M){return M.name.slice(0,L.length)===L}),C=0;C<S.length;C++)delete this.files[S[C].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(L){var U,S={};try{if((S=a.extend(L||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");a.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var C=S.comment||this.comment||"";U=y.generateWorker(this,S,C)}catch(N){(U=new u("error")).error(N)}return new c(U,S.type||"string",S.mimeType)},generateAsync:function(L,U){return this.generateInternalStream(L).accumulate(U)},generateNodeStream:function(L,U){return(L=L||{}).type||(L.type="nodebuffer"),this.generateInternalStream(L).toNodejsStream(U)}};r.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var u=0;u<this.data.length;u++)a[u]=255&a[u]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var u=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),m=a.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===u&&this.data[g+1]===c&&this.data[g+2]===d&&this.data[g+3]===m)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var u=a.charCodeAt(0),c=a.charCodeAt(1),d=a.charCodeAt(2),m=a.charCodeAt(3),g=this.readData(4);return u===g[0]&&c===g[1]&&d===g[2]&&m===g[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var u,c=0;for(this.checkOffset(a),u=this.index+a-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=a,c},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),u=n("./StringReader"),c=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(m){var g=i.getTypeOf(m);return i.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new c(m):o.uint8array?new d(i.transformTo("uint8array",m)):new a(i.transformTo("array",m)):new u(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(a,i),a.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(a,o),a.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=i.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(u){a.processChunk(u)}),o.on("end",function(){a.end()}),o.on("error",function(u){a.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),u=n("../base64"),c=n("../support"),d=n("../external"),m=null;if(c.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(w,x){return new d.Promise(function(_,v){var b=[],T=w._internalType,R=w._outputType,L=w._mimeType;w.on("data",function(U,S){b.push(U),x&&x(S)}).on("error",function(U){b=[],v(U)}).on("end",function(){try{var U=function(S,C,N){switch(S){case"blob":return i.newBlob(i.transformTo("arraybuffer",C),N);case"base64":return u.encode(C);default:return i.transformTo(S,C)}}(R,function(S,C){var N,M=0,V=null,P=0;for(N=0;N<C.length;N++)P+=C[N].length;switch(S){case"string":return C.join("");case"array":return Array.prototype.concat.apply([],C);case"uint8array":for(V=new Uint8Array(P),N=0;N<C.length;N++)V.set(C[N],M),M+=C[N].length;return V;case"nodebuffer":return Buffer.concat(C);default:throw new Error("concat : unsupported type '"+S+"'")}}(T,b),L);_(U)}catch(S){v(S)}b=[]}).resume()})}function y(w,x,_){var v=x;switch(x){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=x,this._mimeType=_,i.checkSupport(v),this._worker=w.pipe(new o(v)),w.lock()}catch(b){this._worker=new a("error"),this._worker.error(b)}}y.prototype={accumulate:function(w){return g(this,w)},on:function(w,x){var _=this;return w==="data"?this._worker.on(w,function(v){x.call(_,v.data,v.meta)}):this._worker.on(w,function(){i.delay(x,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),u=n("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function m(){u.call(this,"utf-8 decode"),this.leftOver=null}function g(){u.call(this,"utf-8 encode")}s.utf8encode=function(y){return o.nodebuffer?a.newBufferFrom(y,"utf-8"):function(w){var x,_,v,b,T,R=w.length,L=0;for(b=0;b<R;b++)(64512&(_=w.charCodeAt(b)))==55296&&b+1<R&&(64512&(v=w.charCodeAt(b+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),b++),L+=_<128?1:_<2048?2:_<65536?3:4;for(x=o.uint8array?new Uint8Array(L):new Array(L),b=T=0;T<L;b++)(64512&(_=w.charCodeAt(b)))==55296&&b+1<R&&(64512&(v=w.charCodeAt(b+1)))==56320&&(_=65536+(_-55296<<10)+(v-56320),b++),_<128?x[T++]=_:(_<2048?x[T++]=192|_>>>6:(_<65536?x[T++]=224|_>>>12:(x[T++]=240|_>>>18,x[T++]=128|_>>>12&63),x[T++]=128|_>>>6&63),x[T++]=128|63&_);return x}(y)},s.utf8decode=function(y){return o.nodebuffer?i.transformTo("nodebuffer",y).toString("utf-8"):function(w){var x,_,v,b,T=w.length,R=new Array(2*T);for(x=_=0;x<T;)if((v=w[x++])<128)R[_++]=v;else if(4<(b=c[v]))R[_++]=65533,x+=b-1;else{for(v&=b===2?31:b===3?15:7;1<b&&x<T;)v=v<<6|63&w[x++],b--;1<b?R[_++]=65533:v<65536?R[_++]=v:(v-=65536,R[_++]=55296|v>>10&1023,R[_++]=56320|1023&v)}return R.length!==_&&(R.subarray?R=R.subarray(0,_):R.length=_),i.applyFromCharCode(R)}(y=i.transformTo(o.uint8array?"uint8array":"array",y))},i.inherits(m,u),m.prototype.processChunk=function(y){var w=i.transformTo(o.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=w;(w=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),w.set(x,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var _=function(b,T){var R;for((T=T||b.length)>b.length&&(T=b.length),R=T-1;0<=R&&(192&b[R])==128;)R--;return R<0||R===0?T:R+c[b[R]]>T?R:T}(w),v=w;_!==w.length&&(o.uint8array?(v=w.subarray(0,_),this.leftOver=w.subarray(_,w.length)):(v=w.slice(0,_),this.leftOver=w.slice(_,w.length))),this.push({data:s.utf8decode(v),meta:y.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=m,i.inherits(g,u),g.prototype.processChunk=function(y){this.push({data:s.utf8encode(y.data),meta:y.meta})},s.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),u=n("./external");function c(x){return x}function d(x,_){for(var v=0;v<x.length;++v)_[v]=255&x.charCodeAt(v);return _}n("setimmediate"),s.newBlob=function(x,_){s.checkSupport("blob");try{return new Blob([x],{type:_})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(x),v.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(x,_,v){var b=[],T=0,R=x.length;if(R<=v)return String.fromCharCode.apply(null,x);for(;T<R;)_==="array"||_==="nodebuffer"?b.push(String.fromCharCode.apply(null,x.slice(T,Math.min(T+v,R)))):b.push(String.fromCharCode.apply(null,x.subarray(T,Math.min(T+v,R)))),T+=v;return b.join("")},stringifyByChar:function(x){for(var _="",v=0;v<x.length;v++)_+=String.fromCharCode(x[v]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function g(x){var _=65536,v=s.getTypeOf(x),b=!0;if(v==="uint8array"?b=m.applyCanBeUsed.uint8array:v==="nodebuffer"&&(b=m.applyCanBeUsed.nodebuffer),b)for(;1<_;)try{return m.stringifyByChunk(x,v,_)}catch{_=Math.floor(_/2)}return m.stringifyByChar(x)}function y(x,_){for(var v=0;v<x.length;v++)_[v]=x[v];return _}s.applyFromCharCode=g;var w={};w.string={string:c,array:function(x){return d(x,new Array(x.length))},arraybuffer:function(x){return w.string.uint8array(x).buffer},uint8array:function(x){return d(x,new Uint8Array(x.length))},nodebuffer:function(x){return d(x,a.allocBuffer(x.length))}},w.array={string:g,array:c,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(x)}},w.arraybuffer={string:function(x){return g(new Uint8Array(x))},array:function(x){return y(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:c,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return a.newBufferFrom(new Uint8Array(x))}},w.uint8array={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:c,nodebuffer:function(x){return a.newBufferFrom(x)}},w.nodebuffer={string:g,array:function(x){return y(x,new Array(x.length))},arraybuffer:function(x){return w.nodebuffer.uint8array(x).buffer},uint8array:function(x){return y(x,new Uint8Array(x.length))},nodebuffer:c},s.transformTo=function(x,_){if(_=_||"",!x)return _;s.checkSupport(x);var v=s.getTypeOf(_);return w[v][x](_)},s.resolve=function(x){for(var _=x.split("/"),v=[],b=0;b<_.length;b++){var T=_[b];T==="."||T===""&&b!==0&&b!==_.length-1||(T===".."?v.pop():v.push(T))}return v.join("/")},s.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(x)?"nodebuffer":i.uint8array&&x instanceof Uint8Array?"uint8array":i.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(x){if(!i[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(x){var _,v,b="";for(v=0;v<(x||"").length;v++)b+="\\x"+((_=x.charCodeAt(v))<16?"0":"")+_.toString(16).toUpperCase();return b},s.delay=function(x,_,v){setImmediate(function(){x.apply(v||null,_||[])})},s.inherits=function(x,_){function v(){}v.prototype=_.prototype,x.prototype=new v},s.extend=function(){var x,_,v={};for(x=0;x<arguments.length;x++)for(_ in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],_)&&v[_]===void 0&&(v[_]=arguments[x][_]);return v},s.prepareContent=function(x,_,v,b,T){return u.Promise.resolve(_).then(function(R){return i.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new u.Promise(function(L,U){var S=new FileReader;S.onload=function(C){L(C.target.result)},S.onerror=function(C){U(C.target.error)},S.readAsArrayBuffer(R)}):R}).then(function(R){var L=s.getTypeOf(R);return L?(L==="arraybuffer"?R=s.transformTo("uint8array",R):L==="string"&&(T?R=o.decode(R):v&&b!==!0&&(R=function(U){return d(U,i.uint8array?new Uint8Array(U.length):new Array(U.length))}(R))),R):u.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),u=n("./zipEntry"),c=n("./support");function d(m){this.files=[],this.loadOptions=m}d.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(m)+")")}},isSignature:function(m,g){var y=this.reader.index;this.reader.setIndex(m);var w=this.reader.readString(4)===g;return this.reader.setIndex(y),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),g=c.uint8array?"uint8array":"array",y=o.transformTo(g,m);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,g,y,w=this.zip64EndOfCentralSize-44;0<w;)m=this.reader.readInt(2),g=this.reader.readInt(4),y=this.reader.readData(g),this.zip64ExtensibleData[m]={id:m,length:g,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,g;for(m=0;m<this.files.length;m++)g=this.files[m],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(m=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var g=m;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var w=g-y;if(0<w)this.isSignature(g,a.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),u=n("./crc32"),c=n("./utf8"),d=n("./compressions"),m=n("./support");function g(y,w){this.options=y,this.loadOptions=w}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var w,x;if(y.skip(22),this.fileNameLength=y.readInt(2),x=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(_){for(var v in d)if(Object.prototype.hasOwnProperty.call(d,v)&&d[v].magic===_)return d[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,w,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var w=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(w),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var w,x,_,v=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<v;)w=y.readInt(2),x=y.readInt(2),_=y.readData(x),this.extraFields[w]={id:w,length:x,value:_};y.setIndex(v)},handleUTF8:function(){var y=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var x=o.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var v=o.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var w=i(y.value);return w.readInt(1)!==1||u(this.fileName)!==w.readInt(4)?null:c.utf8decode(w.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var w=i(y.value);return w.readInt(1)!==1||u(this.fileComment)!==w.readInt(4)?null:c.utf8decode(w.readData(y.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(w,x,_){this.name=w,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=x,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),u=n("./utf8"),c=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(w){var x=null,_="string";try{if(!w)throw new Error("No output type specified.");var v=(_=w.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),x=this._decompressWorker();var b=!this._dataBinary;b&&!v&&(x=x.pipe(new u.Utf8EncodeWorker)),!b&&v&&(x=x.pipe(new u.Utf8DecodeWorker))}catch(T){(x=new d("error")).error(T)}return new o(x,_,"")},async:function(w,x){return this.internalStream(w).accumulate(x)},nodeStream:function(w,x){return this.internalStream(w||"nodebuffer").toNodejsStream(x)},_compressWorker:function(w,x){if(this._data instanceof c&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(_,w,x)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<m.length;y++)i.prototype[m[y]]=g;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var c=0,d=new u(w),m=i.document.createTextNode("");d.observe(m,{characterData:!0}),o=function(){m.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var x=i.document.createElement("script");x.onreadystatechange=function(){w(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},i.document.documentElement.appendChild(x)}:function(){setTimeout(w,0)};else{var g=new i.MessageChannel;g.port1.onmessage=w,o=function(){g.port2.postMessage(0)}}var y=[];function w(){var x,_;a=!0;for(var v=y.length;v;){for(_=y,y=[],x=-1;++x<v;)_[x]();v=y.length}a=!1}r.exports=function(x){y.push(x)!==1||a||o()}}).call(this,typeof ls<"u"?ls:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},u=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function m(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,v!==o&&x(this,v)}function g(v,b,T){this.promise=v,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function y(v,b,T){i(function(){var R;try{R=b(T)}catch(L){return a.reject(v,L)}R===v?a.reject(v,new TypeError("Cannot resolve promise with itself")):a.resolve(v,R)})}function w(v){var b=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof b=="function")return function(){b.apply(v,arguments)}}function x(v,b){var T=!1;function R(S){T||(T=!0,a.reject(v,S))}function L(S){T||(T=!0,a.resolve(v,S))}var U=_(function(){b(L,R)});U.status==="error"&&R(U.value)}function _(v,b){var T={};try{T.value=v(b),T.status="success"}catch(R){T.status="error",T.value=R}return T}(r.exports=m).prototype.finally=function(v){if(typeof v!="function")return this;var b=this.constructor;return this.then(function(T){return b.resolve(v()).then(function(){return T})},function(T){return b.resolve(v()).then(function(){throw T})})},m.prototype.catch=function(v){return this.then(null,v)},m.prototype.then=function(v,b){if(typeof v!="function"&&this.state===c||typeof b!="function"&&this.state===u)return this;var T=new this.constructor(o);return this.state!==d?y(T,this.state===c?v:b,this.outcome):this.queue.push(new g(T,v,b)),T},g.prototype.callFulfilled=function(v){a.resolve(this.promise,v)},g.prototype.otherCallFulfilled=function(v){y(this.promise,this.onFulfilled,v)},g.prototype.callRejected=function(v){a.reject(this.promise,v)},g.prototype.otherCallRejected=function(v){y(this.promise,this.onRejected,v)},a.resolve=function(v,b){var T=_(w,b);if(T.status==="error")return a.reject(v,T.value);var R=T.value;if(R)x(v,R);else{v.state=c,v.outcome=b;for(var L=-1,U=v.queue.length;++L<U;)v.queue[L].callFulfilled(b)}return v},a.reject=function(v,b){v.state=u,v.outcome=b;for(var T=-1,R=v.queue.length;++T<R;)v.queue[T].callRejected(b);return v},m.resolve=function(v){return v instanceof this?v:a.resolve(new this(o),v)},m.reject=function(v){var b=new this(o);return a.reject(b,v)},m.all=function(v){var b=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=v.length,R=!1;if(!T)return this.resolve([]);for(var L=new Array(T),U=0,S=-1,C=new this(o);++S<T;)N(v[S],S);return C;function N(M,V){b.resolve(M).then(function(P){L[V]=P,++U!==T||R||(R=!0,a.resolve(C,L))},function(P){R||(R=!0,a.reject(C,P))})}},m.race=function(v){var b=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=v.length,R=!1;if(!T)return this.resolve([]);for(var L=-1,U=new this(o);++L<T;)S=v[L],b.resolve(S).then(function(C){R||(R=!0,a.resolve(U,C))},function(C){R||(R=!0,a.reject(U,C))});var S;return U}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),u=n("./zlib/messages"),c=n("./zlib/zstream"),d=Object.prototype.toString,m=0,g=-1,y=0,w=8;function x(v){if(!(this instanceof x))return new x(v);this.options=o.assign({level:g,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},v||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var T=i.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(T!==m)throw new Error(u[T]);if(b.header&&i.deflateSetHeader(this.strm,b.header),b.dictionary){var R;if(R=typeof b.dictionary=="string"?a.string2buf(b.dictionary):d.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(T=i.deflateSetDictionary(this.strm,R))!==m)throw new Error(u[T]);this._dict_set=!0}}function _(v,b){var T=new x(b);if(T.push(v,!0),T.err)throw T.msg||u[T.err];return T.result}x.prototype.push=function(v,b){var T,R,L=this.strm,U=this.options.chunkSize;if(this.ended)return!1;R=b===~~b?b:b===!0?4:0,typeof v=="string"?L.input=a.string2buf(v):d.call(v)==="[object ArrayBuffer]"?L.input=new Uint8Array(v):L.input=v,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new o.Buf8(U),L.next_out=0,L.avail_out=U),(T=i.deflate(L,R))!==1&&T!==m)return this.onEnd(T),!(this.ended=!0);L.avail_out!==0&&(L.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(L.output,L.next_out))):this.onData(o.shrinkBuf(L.output,L.next_out)))}while((0<L.avail_in||L.avail_out===0)&&T!==1);return R===4?(T=i.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===m):R!==2||(this.onEnd(m),!(L.avail_out=0))},x.prototype.onData=function(v){this.chunks.push(v)},x.prototype.onEnd=function(v){v===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},s.Deflate=x,s.deflate=_,s.deflateRaw=function(v,b){return(b=b||{}).raw=!0,_(v,b)},s.gzip=function(v,b){return(b=b||{}).gzip=!0,_(v,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),u=n("./zlib/constants"),c=n("./zlib/messages"),d=n("./zlib/zstream"),m=n("./zlib/gzheader"),g=Object.prototype.toString;function y(x){if(!(this instanceof y))return new y(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||x&&x.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var v=i.inflateInit2(this.strm,_.windowBits);if(v!==u.Z_OK)throw new Error(c[v]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function w(x,_){var v=new y(_);if(v.push(x,!0),v.err)throw v.msg||c[v.err];return v.result}y.prototype.push=function(x,_){var v,b,T,R,L,U,S=this.strm,C=this.options.chunkSize,N=this.options.dictionary,M=!1;if(this.ended)return!1;b=_===~~_?_:_===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof x=="string"?S.input=a.binstring2buf(x):g.call(x)==="[object ArrayBuffer]"?S.input=new Uint8Array(x):S.input=x,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new o.Buf8(C),S.next_out=0,S.avail_out=C),(v=i.inflate(S,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&N&&(U=typeof N=="string"?a.string2buf(N):g.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,v=i.inflateSetDictionary(this.strm,U)),v===u.Z_BUF_ERROR&&M===!0&&(v=u.Z_OK,M=!1),v!==u.Z_STREAM_END&&v!==u.Z_OK)return this.onEnd(v),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&v!==u.Z_STREAM_END&&(S.avail_in!==0||b!==u.Z_FINISH&&b!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=a.utf8border(S.output,S.next_out),R=S.next_out-T,L=a.buf2string(S.output,T),S.next_out=R,S.avail_out=C-R,R&&o.arraySet(S.output,S.output,T,R,0),this.onData(L)):this.onData(o.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(M=!0)}while((0<S.avail_in||S.avail_out===0)&&v!==u.Z_STREAM_END);return v===u.Z_STREAM_END&&(b=u.Z_FINISH),b===u.Z_FINISH?(v=i.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===u.Z_OK):b!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(S.avail_out=0))},y.prototype.onData=function(x){this.chunks.push(x)},y.prototype.onEnd=function(x){x===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},s.Inflate=y,s.inflate=w,s.inflateRaw=function(x,_){return(_=_||{}).raw=!0,w(x,_)},s.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var m in d)d.hasOwnProperty(m)&&(u[m]=d[m])}}return u},s.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,d,m,g){if(c.subarray&&u.subarray)u.set(c.subarray(d,d+m),g);else for(var y=0;y<m;y++)u[g+y]=c[d+y]},flattenChunks:function(u){var c,d,m,g,y,w;for(c=m=0,d=u.length;c<d;c++)m+=u[c].length;for(w=new Uint8Array(m),c=g=0,d=u.length;c<d;c++)y=u[c],w.set(y,g),g+=y.length;return w}},a={arraySet:function(u,c,d,m,g){for(var y=0;y<m;y++)u[g+y]=c[d+y]},flattenChunks:function(u){return[].concat.apply([],u)}};s.setTyped=function(u){u?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var u=new i.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(m,g){if(g<65537&&(m.subarray&&a||!m.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(m,g));for(var y="",w=0;w<g;w++)y+=String.fromCharCode(m[w]);return y}u[254]=u[254]=1,s.string2buf=function(m){var g,y,w,x,_,v=m.length,b=0;for(x=0;x<v;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(w=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),x++),b+=y<128?1:y<2048?2:y<65536?3:4;for(g=new i.Buf8(b),x=_=0;_<b;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<v&&(64512&(w=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),x++),y<128?g[_++]=y:(y<2048?g[_++]=192|y>>>6:(y<65536?g[_++]=224|y>>>12:(g[_++]=240|y>>>18,g[_++]=128|y>>>12&63),g[_++]=128|y>>>6&63),g[_++]=128|63&y);return g},s.buf2binstring=function(m){return d(m,m.length)},s.binstring2buf=function(m){for(var g=new i.Buf8(m.length),y=0,w=g.length;y<w;y++)g[y]=m.charCodeAt(y);return g},s.buf2string=function(m,g){var y,w,x,_,v=g||m.length,b=new Array(2*v);for(y=w=0;y<v;)if((x=m[y++])<128)b[w++]=x;else if(4<(_=u[x]))b[w++]=65533,y+=_-1;else{for(x&=_===2?31:_===3?15:7;1<_&&y<v;)x=x<<6|63&m[y++],_--;1<_?b[w++]=65533:x<65536?b[w++]=x:(x-=65536,b[w++]=55296|x>>10&1023,b[w++]=56320|1023&x)}return d(b,w)},s.utf8border=function(m,g){var y;for((g=g||m.length)>m.length&&(g=m.length),y=g-1;0<=y&&(192&m[y])==128;)y--;return y<0||y===0?g:y+u[m[y]]>g?y:g}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,u){for(var c=65535&i|0,d=i>>>16&65535|0,m=0;a!==0;){for(a-=m=2e3<a?2e3:a;d=d+(c=c+o[u++]|0)|0,--m;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[u]=o}return a}();r.exports=function(o,a,u,c){var d=i,m=c+u;o^=-1;for(var g=c;g<m;g++)o=o>>>8^d[255&(o^a[g])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),u=n("./adler32"),c=n("./crc32"),d=n("./messages"),m=0,g=4,y=0,w=-2,x=-1,_=4,v=2,b=8,T=9,R=286,L=30,U=19,S=2*R+1,C=15,N=3,M=258,V=M+N+1,P=42,D=113,k=1,G=2,ye=3,re=4;function ne(A,oe){return A.msg=d[oe],oe}function Y(A){return(A<<1)-(4<A?9:0)}function ue(A){for(var oe=A.length;0<=--oe;)A[oe]=0}function q(A){var oe=A.state,Q=oe.pending;Q>A.avail_out&&(Q=A.avail_out),Q!==0&&(o.arraySet(A.output,oe.pending_buf,oe.pending_out,Q,A.next_out),A.next_out+=Q,oe.pending_out+=Q,A.total_out+=Q,A.avail_out-=Q,oe.pending-=Q,oe.pending===0&&(oe.pending_out=0))}function $(A,oe){a._tr_flush_block(A,0<=A.block_start?A.block_start:-1,A.strstart-A.block_start,oe),A.block_start=A.strstart,q(A.strm)}function ce(A,oe){A.pending_buf[A.pending++]=oe}function X(A,oe){A.pending_buf[A.pending++]=oe>>>8&255,A.pending_buf[A.pending++]=255&oe}function Z(A,oe){var Q,B,O=A.max_chain_length,H=A.strstart,ie=A.prev_length,ae=A.nice_match,J=A.strstart>A.w_size-V?A.strstart-(A.w_size-V):0,fe=A.window,xe=A.w_mask,me=A.prev,we=A.strstart+M,Ne=fe[H+ie-1],Le=fe[H+ie];A.prev_length>=A.good_match&&(O>>=2),ae>A.lookahead&&(ae=A.lookahead);do if(fe[(Q=oe)+ie]===Le&&fe[Q+ie-1]===Ne&&fe[Q]===fe[H]&&fe[++Q]===fe[H+1]){H+=2,Q++;do;while(fe[++H]===fe[++Q]&&fe[++H]===fe[++Q]&&fe[++H]===fe[++Q]&&fe[++H]===fe[++Q]&&fe[++H]===fe[++Q]&&fe[++H]===fe[++Q]&&fe[++H]===fe[++Q]&&fe[++H]===fe[++Q]&&H<we);if(B=M-(we-H),H=we-M,ie<B){if(A.match_start=oe,ae<=(ie=B))break;Ne=fe[H+ie-1],Le=fe[H+ie]}}while((oe=me[oe&xe])>J&&--O!=0);return ie<=A.lookahead?ie:A.lookahead}function Ae(A){var oe,Q,B,O,H,ie,ae,J,fe,xe,me=A.w_size;do{if(O=A.window_size-A.lookahead-A.strstart,A.strstart>=me+(me-V)){for(o.arraySet(A.window,A.window,me,me,0),A.match_start-=me,A.strstart-=me,A.block_start-=me,oe=Q=A.hash_size;B=A.head[--oe],A.head[oe]=me<=B?B-me:0,--Q;);for(oe=Q=me;B=A.prev[--oe],A.prev[oe]=me<=B?B-me:0,--Q;);O+=me}if(A.strm.avail_in===0)break;if(ie=A.strm,ae=A.window,J=A.strstart+A.lookahead,fe=O,xe=void 0,xe=ie.avail_in,fe<xe&&(xe=fe),Q=xe===0?0:(ie.avail_in-=xe,o.arraySet(ae,ie.input,ie.next_in,xe,J),ie.state.wrap===1?ie.adler=u(ie.adler,ae,xe,J):ie.state.wrap===2&&(ie.adler=c(ie.adler,ae,xe,J)),ie.next_in+=xe,ie.total_in+=xe,xe),A.lookahead+=Q,A.lookahead+A.insert>=N)for(H=A.strstart-A.insert,A.ins_h=A.window[H],A.ins_h=(A.ins_h<<A.hash_shift^A.window[H+1])&A.hash_mask;A.insert&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[H+N-1])&A.hash_mask,A.prev[H&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=H,H++,A.insert--,!(A.lookahead+A.insert<N)););}while(A.lookahead<V&&A.strm.avail_in!==0)}function _e(A,oe){for(var Q,B;;){if(A.lookahead<V){if(Ae(A),A.lookahead<V&&oe===m)return k;if(A.lookahead===0)break}if(Q=0,A.lookahead>=N&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+N-1])&A.hash_mask,Q=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),Q!==0&&A.strstart-Q<=A.w_size-V&&(A.match_length=Z(A,Q)),A.match_length>=N)if(B=a._tr_tally(A,A.strstart-A.match_start,A.match_length-N),A.lookahead-=A.match_length,A.match_length<=A.max_lazy_match&&A.lookahead>=N){for(A.match_length--;A.strstart++,A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+N-1])&A.hash_mask,Q=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart,--A.match_length!=0;);A.strstart++}else A.strstart+=A.match_length,A.match_length=0,A.ins_h=A.window[A.strstart],A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+1])&A.hash_mask;else B=a._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++;if(B&&($(A,!1),A.strm.avail_out===0))return k}return A.insert=A.strstart<N-1?A.strstart:N-1,oe===g?($(A,!0),A.strm.avail_out===0?ye:re):A.last_lit&&($(A,!1),A.strm.avail_out===0)?k:G}function Ce(A,oe){for(var Q,B,O;;){if(A.lookahead<V){if(Ae(A),A.lookahead<V&&oe===m)return k;if(A.lookahead===0)break}if(Q=0,A.lookahead>=N&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+N-1])&A.hash_mask,Q=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),A.prev_length=A.match_length,A.prev_match=A.match_start,A.match_length=N-1,Q!==0&&A.prev_length<A.max_lazy_match&&A.strstart-Q<=A.w_size-V&&(A.match_length=Z(A,Q),A.match_length<=5&&(A.strategy===1||A.match_length===N&&4096<A.strstart-A.match_start)&&(A.match_length=N-1)),A.prev_length>=N&&A.match_length<=A.prev_length){for(O=A.strstart+A.lookahead-N,B=a._tr_tally(A,A.strstart-1-A.prev_match,A.prev_length-N),A.lookahead-=A.prev_length-1,A.prev_length-=2;++A.strstart<=O&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+N-1])&A.hash_mask,Q=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),--A.prev_length!=0;);if(A.match_available=0,A.match_length=N-1,A.strstart++,B&&($(A,!1),A.strm.avail_out===0))return k}else if(A.match_available){if((B=a._tr_tally(A,0,A.window[A.strstart-1]))&&$(A,!1),A.strstart++,A.lookahead--,A.strm.avail_out===0)return k}else A.match_available=1,A.strstart++,A.lookahead--}return A.match_available&&(B=a._tr_tally(A,0,A.window[A.strstart-1]),A.match_available=0),A.insert=A.strstart<N-1?A.strstart:N-1,oe===g?($(A,!0),A.strm.avail_out===0?ye:re):A.last_lit&&($(A,!1),A.strm.avail_out===0)?k:G}function Se(A,oe,Q,B,O){this.good_length=A,this.max_lazy=oe,this.nice_length=Q,this.max_chain=B,this.func=O}function Ye(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*S),this.dyn_dtree=new o.Buf16(2*(2*L+1)),this.bl_tree=new o.Buf16(2*(2*U+1)),ue(this.dyn_ltree),ue(this.dyn_dtree),ue(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(C+1),this.heap=new o.Buf16(2*R+1),ue(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*R+1),ue(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ze(A){var oe;return A&&A.state?(A.total_in=A.total_out=0,A.data_type=v,(oe=A.state).pending=0,oe.pending_out=0,oe.wrap<0&&(oe.wrap=-oe.wrap),oe.status=oe.wrap?P:D,A.adler=oe.wrap===2?0:1,oe.last_flush=m,a._tr_init(oe),y):ne(A,w)}function _t(A){var oe=ze(A);return oe===y&&function(Q){Q.window_size=2*Q.w_size,ue(Q.head),Q.max_lazy_match=i[Q.level].max_lazy,Q.good_match=i[Q.level].good_length,Q.nice_match=i[Q.level].nice_length,Q.max_chain_length=i[Q.level].max_chain,Q.strstart=0,Q.block_start=0,Q.lookahead=0,Q.insert=0,Q.match_length=Q.prev_length=N-1,Q.match_available=0,Q.ins_h=0}(A.state),oe}function lt(A,oe,Q,B,O,H){if(!A)return w;var ie=1;if(oe===x&&(oe=6),B<0?(ie=0,B=-B):15<B&&(ie=2,B-=16),O<1||T<O||Q!==b||B<8||15<B||oe<0||9<oe||H<0||_<H)return ne(A,w);B===8&&(B=9);var ae=new Ye;return(A.state=ae).strm=A,ae.wrap=ie,ae.gzhead=null,ae.w_bits=B,ae.w_size=1<<ae.w_bits,ae.w_mask=ae.w_size-1,ae.hash_bits=O+7,ae.hash_size=1<<ae.hash_bits,ae.hash_mask=ae.hash_size-1,ae.hash_shift=~~((ae.hash_bits+N-1)/N),ae.window=new o.Buf8(2*ae.w_size),ae.head=new o.Buf16(ae.hash_size),ae.prev=new o.Buf16(ae.w_size),ae.lit_bufsize=1<<O+6,ae.pending_buf_size=4*ae.lit_bufsize,ae.pending_buf=new o.Buf8(ae.pending_buf_size),ae.d_buf=1*ae.lit_bufsize,ae.l_buf=3*ae.lit_bufsize,ae.level=oe,ae.strategy=H,ae.method=Q,_t(A)}i=[new Se(0,0,0,0,function(A,oe){var Q=65535;for(Q>A.pending_buf_size-5&&(Q=A.pending_buf_size-5);;){if(A.lookahead<=1){if(Ae(A),A.lookahead===0&&oe===m)return k;if(A.lookahead===0)break}A.strstart+=A.lookahead,A.lookahead=0;var B=A.block_start+Q;if((A.strstart===0||A.strstart>=B)&&(A.lookahead=A.strstart-B,A.strstart=B,$(A,!1),A.strm.avail_out===0)||A.strstart-A.block_start>=A.w_size-V&&($(A,!1),A.strm.avail_out===0))return k}return A.insert=0,oe===g?($(A,!0),A.strm.avail_out===0?ye:re):(A.strstart>A.block_start&&($(A,!1),A.strm.avail_out),k)}),new Se(4,4,8,4,_e),new Se(4,5,16,8,_e),new Se(4,6,32,32,_e),new Se(4,4,16,16,Ce),new Se(8,16,32,32,Ce),new Se(8,16,128,128,Ce),new Se(8,32,128,256,Ce),new Se(32,128,258,1024,Ce),new Se(32,258,258,4096,Ce)],s.deflateInit=function(A,oe){return lt(A,oe,b,15,8,0)},s.deflateInit2=lt,s.deflateReset=_t,s.deflateResetKeep=ze,s.deflateSetHeader=function(A,oe){return A&&A.state?A.state.wrap!==2?w:(A.state.gzhead=oe,y):w},s.deflate=function(A,oe){var Q,B,O,H;if(!A||!A.state||5<oe||oe<0)return A?ne(A,w):w;if(B=A.state,!A.output||!A.input&&A.avail_in!==0||B.status===666&&oe!==g)return ne(A,A.avail_out===0?-5:w);if(B.strm=A,Q=B.last_flush,B.last_flush=oe,B.status===P)if(B.wrap===2)A.adler=0,ce(B,31),ce(B,139),ce(B,8),B.gzhead?(ce(B,(B.gzhead.text?1:0)+(B.gzhead.hcrc?2:0)+(B.gzhead.extra?4:0)+(B.gzhead.name?8:0)+(B.gzhead.comment?16:0)),ce(B,255&B.gzhead.time),ce(B,B.gzhead.time>>8&255),ce(B,B.gzhead.time>>16&255),ce(B,B.gzhead.time>>24&255),ce(B,B.level===9?2:2<=B.strategy||B.level<2?4:0),ce(B,255&B.gzhead.os),B.gzhead.extra&&B.gzhead.extra.length&&(ce(B,255&B.gzhead.extra.length),ce(B,B.gzhead.extra.length>>8&255)),B.gzhead.hcrc&&(A.adler=c(A.adler,B.pending_buf,B.pending,0)),B.gzindex=0,B.status=69):(ce(B,0),ce(B,0),ce(B,0),ce(B,0),ce(B,0),ce(B,B.level===9?2:2<=B.strategy||B.level<2?4:0),ce(B,3),B.status=D);else{var ie=b+(B.w_bits-8<<4)<<8;ie|=(2<=B.strategy||B.level<2?0:B.level<6?1:B.level===6?2:3)<<6,B.strstart!==0&&(ie|=32),ie+=31-ie%31,B.status=D,X(B,ie),B.strstart!==0&&(X(B,A.adler>>>16),X(B,65535&A.adler)),A.adler=1}if(B.status===69)if(B.gzhead.extra){for(O=B.pending;B.gzindex<(65535&B.gzhead.extra.length)&&(B.pending!==B.pending_buf_size||(B.gzhead.hcrc&&B.pending>O&&(A.adler=c(A.adler,B.pending_buf,B.pending-O,O)),q(A),O=B.pending,B.pending!==B.pending_buf_size));)ce(B,255&B.gzhead.extra[B.gzindex]),B.gzindex++;B.gzhead.hcrc&&B.pending>O&&(A.adler=c(A.adler,B.pending_buf,B.pending-O,O)),B.gzindex===B.gzhead.extra.length&&(B.gzindex=0,B.status=73)}else B.status=73;if(B.status===73)if(B.gzhead.name){O=B.pending;do{if(B.pending===B.pending_buf_size&&(B.gzhead.hcrc&&B.pending>O&&(A.adler=c(A.adler,B.pending_buf,B.pending-O,O)),q(A),O=B.pending,B.pending===B.pending_buf_size)){H=1;break}H=B.gzindex<B.gzhead.name.length?255&B.gzhead.name.charCodeAt(B.gzindex++):0,ce(B,H)}while(H!==0);B.gzhead.hcrc&&B.pending>O&&(A.adler=c(A.adler,B.pending_buf,B.pending-O,O)),H===0&&(B.gzindex=0,B.status=91)}else B.status=91;if(B.status===91)if(B.gzhead.comment){O=B.pending;do{if(B.pending===B.pending_buf_size&&(B.gzhead.hcrc&&B.pending>O&&(A.adler=c(A.adler,B.pending_buf,B.pending-O,O)),q(A),O=B.pending,B.pending===B.pending_buf_size)){H=1;break}H=B.gzindex<B.gzhead.comment.length?255&B.gzhead.comment.charCodeAt(B.gzindex++):0,ce(B,H)}while(H!==0);B.gzhead.hcrc&&B.pending>O&&(A.adler=c(A.adler,B.pending_buf,B.pending-O,O)),H===0&&(B.status=103)}else B.status=103;if(B.status===103&&(B.gzhead.hcrc?(B.pending+2>B.pending_buf_size&&q(A),B.pending+2<=B.pending_buf_size&&(ce(B,255&A.adler),ce(B,A.adler>>8&255),A.adler=0,B.status=D)):B.status=D),B.pending!==0){if(q(A),A.avail_out===0)return B.last_flush=-1,y}else if(A.avail_in===0&&Y(oe)<=Y(Q)&&oe!==g)return ne(A,-5);if(B.status===666&&A.avail_in!==0)return ne(A,-5);if(A.avail_in!==0||B.lookahead!==0||oe!==m&&B.status!==666){var ae=B.strategy===2?function(J,fe){for(var xe;;){if(J.lookahead===0&&(Ae(J),J.lookahead===0)){if(fe===m)return k;break}if(J.match_length=0,xe=a._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++,xe&&($(J,!1),J.strm.avail_out===0))return k}return J.insert=0,fe===g?($(J,!0),J.strm.avail_out===0?ye:re):J.last_lit&&($(J,!1),J.strm.avail_out===0)?k:G}(B,oe):B.strategy===3?function(J,fe){for(var xe,me,we,Ne,Le=J.window;;){if(J.lookahead<=M){if(Ae(J),J.lookahead<=M&&fe===m)return k;if(J.lookahead===0)break}if(J.match_length=0,J.lookahead>=N&&0<J.strstart&&(me=Le[we=J.strstart-1])===Le[++we]&&me===Le[++we]&&me===Le[++we]){Ne=J.strstart+M;do;while(me===Le[++we]&&me===Le[++we]&&me===Le[++we]&&me===Le[++we]&&me===Le[++we]&&me===Le[++we]&&me===Le[++we]&&me===Le[++we]&&we<Ne);J.match_length=M-(Ne-we),J.match_length>J.lookahead&&(J.match_length=J.lookahead)}if(J.match_length>=N?(xe=a._tr_tally(J,1,J.match_length-N),J.lookahead-=J.match_length,J.strstart+=J.match_length,J.match_length=0):(xe=a._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++),xe&&($(J,!1),J.strm.avail_out===0))return k}return J.insert=0,fe===g?($(J,!0),J.strm.avail_out===0?ye:re):J.last_lit&&($(J,!1),J.strm.avail_out===0)?k:G}(B,oe):i[B.level].func(B,oe);if(ae!==ye&&ae!==re||(B.status=666),ae===k||ae===ye)return A.avail_out===0&&(B.last_flush=-1),y;if(ae===G&&(oe===1?a._tr_align(B):oe!==5&&(a._tr_stored_block(B,0,0,!1),oe===3&&(ue(B.head),B.lookahead===0&&(B.strstart=0,B.block_start=0,B.insert=0))),q(A),A.avail_out===0))return B.last_flush=-1,y}return oe!==g?y:B.wrap<=0?1:(B.wrap===2?(ce(B,255&A.adler),ce(B,A.adler>>8&255),ce(B,A.adler>>16&255),ce(B,A.adler>>24&255),ce(B,255&A.total_in),ce(B,A.total_in>>8&255),ce(B,A.total_in>>16&255),ce(B,A.total_in>>24&255)):(X(B,A.adler>>>16),X(B,65535&A.adler)),q(A),0<B.wrap&&(B.wrap=-B.wrap),B.pending!==0?y:1)},s.deflateEnd=function(A){var oe;return A&&A.state?(oe=A.state.status)!==P&&oe!==69&&oe!==73&&oe!==91&&oe!==103&&oe!==D&&oe!==666?ne(A,w):(A.state=null,oe===D?ne(A,-3):y):w},s.deflateSetDictionary=function(A,oe){var Q,B,O,H,ie,ae,J,fe,xe=oe.length;if(!A||!A.state||(H=(Q=A.state).wrap)===2||H===1&&Q.status!==P||Q.lookahead)return w;for(H===1&&(A.adler=u(A.adler,oe,xe,0)),Q.wrap=0,xe>=Q.w_size&&(H===0&&(ue(Q.head),Q.strstart=0,Q.block_start=0,Q.insert=0),fe=new o.Buf8(Q.w_size),o.arraySet(fe,oe,xe-Q.w_size,Q.w_size,0),oe=fe,xe=Q.w_size),ie=A.avail_in,ae=A.next_in,J=A.input,A.avail_in=xe,A.next_in=0,A.input=oe,Ae(Q);Q.lookahead>=N;){for(B=Q.strstart,O=Q.lookahead-(N-1);Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[B+N-1])&Q.hash_mask,Q.prev[B&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=B,B++,--O;);Q.strstart=B,Q.lookahead=N-1,Ae(Q)}return Q.strstart+=Q.lookahead,Q.block_start=Q.strstart,Q.insert=Q.lookahead,Q.lookahead=0,Q.match_length=Q.prev_length=N-1,Q.match_available=0,A.next_in=ae,A.input=J,A.avail_in=ie,Q.wrap=H,y},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,u,c,d,m,g,y,w,x,_,v,b,T,R,L,U,S,C,N,M,V,P,D,k,G;a=i.state,u=i.next_in,k=i.input,c=u+(i.avail_in-5),d=i.next_out,G=i.output,m=d-(o-i.avail_out),g=d+(i.avail_out-257),y=a.dmax,w=a.wsize,x=a.whave,_=a.wnext,v=a.window,b=a.hold,T=a.bits,R=a.lencode,L=a.distcode,U=(1<<a.lenbits)-1,S=(1<<a.distbits)-1;e:do{T<15&&(b+=k[u++]<<T,T+=8,b+=k[u++]<<T,T+=8),C=R[b&U];t:for(;;){if(b>>>=N=C>>>24,T-=N,(N=C>>>16&255)===0)G[d++]=65535&C;else{if(!(16&N)){if(!(64&N)){C=R[(65535&C)+(b&(1<<N)-1)];continue t}if(32&N){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}M=65535&C,(N&=15)&&(T<N&&(b+=k[u++]<<T,T+=8),M+=b&(1<<N)-1,b>>>=N,T-=N),T<15&&(b+=k[u++]<<T,T+=8,b+=k[u++]<<T,T+=8),C=L[b&S];n:for(;;){if(b>>>=N=C>>>24,T-=N,!(16&(N=C>>>16&255))){if(!(64&N)){C=L[(65535&C)+(b&(1<<N)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(V=65535&C,T<(N&=15)&&(b+=k[u++]<<T,(T+=8)<N&&(b+=k[u++]<<T,T+=8)),y<(V+=b&(1<<N)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(b>>>=N,T-=N,(N=d-m)<V){if(x<(N=V-N)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(D=v,(P=0)===_){if(P+=w-N,N<M){for(M-=N;G[d++]=v[P++],--N;);P=d-V,D=G}}else if(_<N){if(P+=w+_-N,(N-=_)<M){for(M-=N;G[d++]=v[P++],--N;);if(P=0,_<M){for(M-=N=_;G[d++]=v[P++],--N;);P=d-V,D=G}}}else if(P+=_-N,N<M){for(M-=N;G[d++]=v[P++],--N;);P=d-V,D=G}for(;2<M;)G[d++]=D[P++],G[d++]=D[P++],G[d++]=D[P++],M-=3;M&&(G[d++]=D[P++],1<M&&(G[d++]=D[P++]))}else{for(P=d-V;G[d++]=G[P++],G[d++]=G[P++],G[d++]=G[P++],2<(M-=3););M&&(G[d++]=G[P++],1<M&&(G[d++]=G[P++]))}break}}break}}while(u<c&&d<g);u-=M=T>>3,b&=(1<<(T-=M<<3))-1,i.next_in=u,i.next_out=d,i.avail_in=u<c?c-u+5:5-(u-c),i.avail_out=d<g?g-d+257:257-(d-g),a.hold=b,a.bits=T}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),u=n("./inffast"),c=n("./inftrees"),d=1,m=2,g=0,y=-2,w=1,x=852,_=592;function v(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(P){var D;return P&&P.state?(D=P.state,P.total_in=P.total_out=D.total=0,P.msg="",D.wrap&&(P.adler=1&D.wrap),D.mode=w,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new i.Buf32(x),D.distcode=D.distdyn=new i.Buf32(_),D.sane=1,D.back=-1,g):y}function R(P){var D;return P&&P.state?((D=P.state).wsize=0,D.whave=0,D.wnext=0,T(P)):y}function L(P,D){var k,G;return P&&P.state?(G=P.state,D<0?(k=0,D=-D):(k=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?y:(G.window!==null&&G.wbits!==D&&(G.window=null),G.wrap=k,G.wbits=D,R(P))):y}function U(P,D){var k,G;return P?(G=new b,(P.state=G).window=null,(k=L(P,D))!==g&&(P.state=null),k):y}var S,C,N=!0;function M(P){if(N){var D;for(S=new i.Buf32(512),C=new i.Buf32(32),D=0;D<144;)P.lens[D++]=8;for(;D<256;)P.lens[D++]=9;for(;D<280;)P.lens[D++]=7;for(;D<288;)P.lens[D++]=8;for(c(d,P.lens,0,288,S,0,P.work,{bits:9}),D=0;D<32;)P.lens[D++]=5;c(m,P.lens,0,32,C,0,P.work,{bits:5}),N=!1}P.lencode=S,P.lenbits=9,P.distcode=C,P.distbits=5}function V(P,D,k,G){var ye,re=P.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new i.Buf8(re.wsize)),G>=re.wsize?(i.arraySet(re.window,D,k-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(G<(ye=re.wsize-re.wnext)&&(ye=G),i.arraySet(re.window,D,k-G,ye,re.wnext),(G-=ye)?(i.arraySet(re.window,D,k-G,G,0),re.wnext=G,re.whave=re.wsize):(re.wnext+=ye,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=ye))),0}s.inflateReset=R,s.inflateReset2=L,s.inflateResetKeep=T,s.inflateInit=function(P){return U(P,15)},s.inflateInit2=U,s.inflate=function(P,D){var k,G,ye,re,ne,Y,ue,q,$,ce,X,Z,Ae,_e,Ce,Se,Ye,ze,_t,lt,A,oe,Q,B,O=0,H=new i.Buf8(4),ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return y;(k=P.state).mode===12&&(k.mode=13),ne=P.next_out,ye=P.output,ue=P.avail_out,re=P.next_in,G=P.input,Y=P.avail_in,q=k.hold,$=k.bits,ce=Y,X=ue,oe=g;e:for(;;)switch(k.mode){case w:if(k.wrap===0){k.mode=13;break}for(;$<16;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}if(2&k.wrap&&q===35615){H[k.check=0]=255&q,H[1]=q>>>8&255,k.check=a(k.check,H,2,0),$=q=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&q)<<8)+(q>>8))%31){P.msg="incorrect header check",k.mode=30;break}if((15&q)!=8){P.msg="unknown compression method",k.mode=30;break}if($-=4,A=8+(15&(q>>>=4)),k.wbits===0)k.wbits=A;else if(A>k.wbits){P.msg="invalid window size",k.mode=30;break}k.dmax=1<<A,P.adler=k.check=1,k.mode=512&q?10:12,$=q=0;break;case 2:for(;$<16;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}if(k.flags=q,(255&k.flags)!=8){P.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){P.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=q>>8&1),512&k.flags&&(H[0]=255&q,H[1]=q>>>8&255,k.check=a(k.check,H,2,0)),$=q=0,k.mode=3;case 3:for(;$<32;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}k.head&&(k.head.time=q),512&k.flags&&(H[0]=255&q,H[1]=q>>>8&255,H[2]=q>>>16&255,H[3]=q>>>24&255,k.check=a(k.check,H,4,0)),$=q=0,k.mode=4;case 4:for(;$<16;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}k.head&&(k.head.xflags=255&q,k.head.os=q>>8),512&k.flags&&(H[0]=255&q,H[1]=q>>>8&255,k.check=a(k.check,H,2,0)),$=q=0,k.mode=5;case 5:if(1024&k.flags){for(;$<16;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}k.length=q,k.head&&(k.head.extra_len=q),512&k.flags&&(H[0]=255&q,H[1]=q>>>8&255,k.check=a(k.check,H,2,0)),$=q=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(Y<(Z=k.length)&&(Z=Y),Z&&(k.head&&(A=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),i.arraySet(k.head.extra,G,re,Z,A)),512&k.flags&&(k.check=a(k.check,G,Z,re)),Y-=Z,re+=Z,k.length-=Z),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(Y===0)break e;for(Z=0;A=G[re+Z++],k.head&&A&&k.length<65536&&(k.head.name+=String.fromCharCode(A)),A&&Z<Y;);if(512&k.flags&&(k.check=a(k.check,G,Z,re)),Y-=Z,re+=Z,A)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(Y===0)break e;for(Z=0;A=G[re+Z++],k.head&&A&&k.length<65536&&(k.head.comment+=String.fromCharCode(A)),A&&Z<Y;);if(512&k.flags&&(k.check=a(k.check,G,Z,re)),Y-=Z,re+=Z,A)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;$<16;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}if(q!==(65535&k.check)){P.msg="header crc mismatch",k.mode=30;break}$=q=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),P.adler=k.check=0,k.mode=12;break;case 10:for(;$<32;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}P.adler=k.check=v(q),$=q=0,k.mode=11;case 11:if(k.havedict===0)return P.next_out=ne,P.avail_out=ue,P.next_in=re,P.avail_in=Y,k.hold=q,k.bits=$,2;P.adler=k.check=1,k.mode=12;case 12:if(D===5||D===6)break e;case 13:if(k.last){q>>>=7&$,$-=7&$,k.mode=27;break}for(;$<3;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}switch(k.last=1&q,$-=1,3&(q>>>=1)){case 0:k.mode=14;break;case 1:if(M(k),k.mode=20,D!==6)break;q>>>=2,$-=2;break e;case 2:k.mode=17;break;case 3:P.msg="invalid block type",k.mode=30}q>>>=2,$-=2;break;case 14:for(q>>>=7&$,$-=7&$;$<32;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}if((65535&q)!=(q>>>16^65535)){P.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&q,$=q=0,k.mode=15,D===6)break e;case 15:k.mode=16;case 16:if(Z=k.length){if(Y<Z&&(Z=Y),ue<Z&&(Z=ue),Z===0)break e;i.arraySet(ye,G,re,Z,ne),Y-=Z,re+=Z,ue-=Z,ne+=Z,k.length-=Z;break}k.mode=12;break;case 17:for(;$<14;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}if(k.nlen=257+(31&q),q>>>=5,$-=5,k.ndist=1+(31&q),q>>>=5,$-=5,k.ncode=4+(15&q),q>>>=4,$-=4,286<k.nlen||30<k.ndist){P.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;$<3;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}k.lens[ie[k.have++]]=7&q,q>>>=3,$-=3}for(;k.have<19;)k.lens[ie[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,Q={bits:k.lenbits},oe=c(0,k.lens,0,19,k.lencode,0,k.work,Q),k.lenbits=Q.bits,oe){P.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;Se=(O=k.lencode[q&(1<<k.lenbits)-1])>>>16&255,Ye=65535&O,!((Ce=O>>>24)<=$);){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}if(Ye<16)q>>>=Ce,$-=Ce,k.lens[k.have++]=Ye;else{if(Ye===16){for(B=Ce+2;$<B;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}if(q>>>=Ce,$-=Ce,k.have===0){P.msg="invalid bit length repeat",k.mode=30;break}A=k.lens[k.have-1],Z=3+(3&q),q>>>=2,$-=2}else if(Ye===17){for(B=Ce+3;$<B;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}$-=Ce,A=0,Z=3+(7&(q>>>=Ce)),q>>>=3,$-=3}else{for(B=Ce+7;$<B;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}$-=Ce,A=0,Z=11+(127&(q>>>=Ce)),q>>>=7,$-=7}if(k.have+Z>k.nlen+k.ndist){P.msg="invalid bit length repeat",k.mode=30;break}for(;Z--;)k.lens[k.have++]=A}}if(k.mode===30)break;if(k.lens[256]===0){P.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,Q={bits:k.lenbits},oe=c(d,k.lens,0,k.nlen,k.lencode,0,k.work,Q),k.lenbits=Q.bits,oe){P.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,Q={bits:k.distbits},oe=c(m,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,Q),k.distbits=Q.bits,oe){P.msg="invalid distances set",k.mode=30;break}if(k.mode=20,D===6)break e;case 20:k.mode=21;case 21:if(6<=Y&&258<=ue){P.next_out=ne,P.avail_out=ue,P.next_in=re,P.avail_in=Y,k.hold=q,k.bits=$,u(P,X),ne=P.next_out,ye=P.output,ue=P.avail_out,re=P.next_in,G=P.input,Y=P.avail_in,q=k.hold,$=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;Se=(O=k.lencode[q&(1<<k.lenbits)-1])>>>16&255,Ye=65535&O,!((Ce=O>>>24)<=$);){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}if(Se&&!(240&Se)){for(ze=Ce,_t=Se,lt=Ye;Se=(O=k.lencode[lt+((q&(1<<ze+_t)-1)>>ze)])>>>16&255,Ye=65535&O,!(ze+(Ce=O>>>24)<=$);){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}q>>>=ze,$-=ze,k.back+=ze}if(q>>>=Ce,$-=Ce,k.back+=Ce,k.length=Ye,Se===0){k.mode=26;break}if(32&Se){k.back=-1,k.mode=12;break}if(64&Se){P.msg="invalid literal/length code",k.mode=30;break}k.extra=15&Se,k.mode=22;case 22:if(k.extra){for(B=k.extra;$<B;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}k.length+=q&(1<<k.extra)-1,q>>>=k.extra,$-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;Se=(O=k.distcode[q&(1<<k.distbits)-1])>>>16&255,Ye=65535&O,!((Ce=O>>>24)<=$);){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}if(!(240&Se)){for(ze=Ce,_t=Se,lt=Ye;Se=(O=k.distcode[lt+((q&(1<<ze+_t)-1)>>ze)])>>>16&255,Ye=65535&O,!(ze+(Ce=O>>>24)<=$);){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}q>>>=ze,$-=ze,k.back+=ze}if(q>>>=Ce,$-=Ce,k.back+=Ce,64&Se){P.msg="invalid distance code",k.mode=30;break}k.offset=Ye,k.extra=15&Se,k.mode=24;case 24:if(k.extra){for(B=k.extra;$<B;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}k.offset+=q&(1<<k.extra)-1,q>>>=k.extra,$-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){P.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(ue===0)break e;if(Z=X-ue,k.offset>Z){if((Z=k.offset-Z)>k.whave&&k.sane){P.msg="invalid distance too far back",k.mode=30;break}Ae=Z>k.wnext?(Z-=k.wnext,k.wsize-Z):k.wnext-Z,Z>k.length&&(Z=k.length),_e=k.window}else _e=ye,Ae=ne-k.offset,Z=k.length;for(ue<Z&&(Z=ue),ue-=Z,k.length-=Z;ye[ne++]=_e[Ae++],--Z;);k.length===0&&(k.mode=21);break;case 26:if(ue===0)break e;ye[ne++]=k.length,ue--,k.mode=21;break;case 27:if(k.wrap){for(;$<32;){if(Y===0)break e;Y--,q|=G[re++]<<$,$+=8}if(X-=ue,P.total_out+=X,k.total+=X,X&&(P.adler=k.check=k.flags?a(k.check,ye,X,ne-X):o(k.check,ye,X,ne-X)),X=ue,(k.flags?q:v(q))!==k.check){P.msg="incorrect data check",k.mode=30;break}$=q=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;$<32;){if(Y===0)break e;Y--,q+=G[re++]<<$,$+=8}if(q!==(4294967295&k.total)){P.msg="incorrect length check",k.mode=30;break}$=q=0}k.mode=29;case 29:oe=1;break e;case 30:oe=-3;break e;case 31:return-4;case 32:default:return y}return P.next_out=ne,P.avail_out=ue,P.next_in=re,P.avail_in=Y,k.hold=q,k.bits=$,(k.wsize||X!==P.avail_out&&k.mode<30&&(k.mode<27||D!==4))&&V(P,P.output,P.next_out,X-P.avail_out)?(k.mode=31,-4):(ce-=P.avail_in,X-=P.avail_out,P.total_in+=ce,P.total_out+=X,k.total+=X,k.wrap&&X&&(P.adler=k.check=k.flags?a(k.check,ye,X,P.next_out-X):o(k.check,ye,X,P.next_out-X)),P.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(ce==0&&X===0||D===4)&&oe===g&&(oe=-5),oe)},s.inflateEnd=function(P){if(!P||!P.state)return y;var D=P.state;return D.window&&(D.window=null),P.state=null,g},s.inflateGetHeader=function(P,D){var k;return P&&P.state&&2&(k=P.state).wrap?((k.head=D).done=!1,g):y},s.inflateSetDictionary=function(P,D){var k,G=D.length;return P&&P.state?(k=P.state).wrap!==0&&k.mode!==11?y:k.mode===11&&o(1,D,G,0)!==k.check?-3:V(P,D,G,G)?(k.mode=31,-4):(k.havedict=1,g):y},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,m,g,y,w,x,_,v){var b,T,R,L,U,S,C,N,M,V=v.bits,P=0,D=0,k=0,G=0,ye=0,re=0,ne=0,Y=0,ue=0,q=0,$=null,ce=0,X=new i.Buf16(16),Z=new i.Buf16(16),Ae=null,_e=0;for(P=0;P<=15;P++)X[P]=0;for(D=0;D<y;D++)X[m[g+D]]++;for(ye=V,G=15;1<=G&&X[G]===0;G--);if(G<ye&&(ye=G),G===0)return w[x++]=20971520,w[x++]=20971520,v.bits=1,0;for(k=1;k<G&&X[k]===0;k++);for(ye<k&&(ye=k),P=Y=1;P<=15;P++)if(Y<<=1,(Y-=X[P])<0)return-1;if(0<Y&&(d===0||G!==1))return-1;for(Z[1]=0,P=1;P<15;P++)Z[P+1]=Z[P]+X[P];for(D=0;D<y;D++)m[g+D]!==0&&(_[Z[m[g+D]]++]=D);if(S=d===0?($=Ae=_,19):d===1?($=o,ce-=257,Ae=a,_e-=257,256):($=u,Ae=c,-1),P=k,U=x,ne=D=q=0,R=-1,L=(ue=1<<(re=ye))-1,d===1&&852<ue||d===2&&592<ue)return 1;for(;;){for(C=P-ne,M=_[D]<S?(N=0,_[D]):_[D]>S?(N=Ae[_e+_[D]],$[ce+_[D]]):(N=96,0),b=1<<P-ne,k=T=1<<re;w[U+(q>>ne)+(T-=b)]=C<<24|N<<16|M|0,T!==0;);for(b=1<<P-1;q&b;)b>>=1;if(b!==0?(q&=b-1,q+=b):q=0,D++,--X[P]==0){if(P===G)break;P=m[g+_[D]]}if(ye<P&&(q&L)!==R){for(ne===0&&(ne=ye),U+=k,Y=1<<(re=P-ne);re+ne<G&&!((Y-=X[re+ne])<=0);)re++,Y<<=1;if(ue+=1<<re,d===1&&852<ue||d===2&&592<ue)return 1;w[R=q&L]=ye<<24|re<<16|U-x|0}}return q!==0&&(w[U+q]=P-ne<<24|64<<16|0),v.bits=ye,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function u(O){for(var H=O.length;0<=--H;)O[H]=0}var c=0,d=29,m=256,g=m+1+d,y=30,w=19,x=2*g+1,_=15,v=16,b=7,T=256,R=16,L=17,U=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(g+2));u(V);var P=new Array(2*y);u(P);var D=new Array(512);u(D);var k=new Array(256);u(k);var G=new Array(d);u(G);var ye,re,ne,Y=new Array(y);function ue(O,H,ie,ae,J){this.static_tree=O,this.extra_bits=H,this.extra_base=ie,this.elems=ae,this.max_length=J,this.has_stree=O&&O.length}function q(O,H){this.dyn_tree=O,this.max_code=0,this.stat_desc=H}function $(O){return O<256?D[O]:D[256+(O>>>7)]}function ce(O,H){O.pending_buf[O.pending++]=255&H,O.pending_buf[O.pending++]=H>>>8&255}function X(O,H,ie){O.bi_valid>v-ie?(O.bi_buf|=H<<O.bi_valid&65535,ce(O,O.bi_buf),O.bi_buf=H>>v-O.bi_valid,O.bi_valid+=ie-v):(O.bi_buf|=H<<O.bi_valid&65535,O.bi_valid+=ie)}function Z(O,H,ie){X(O,ie[2*H],ie[2*H+1])}function Ae(O,H){for(var ie=0;ie|=1&O,O>>>=1,ie<<=1,0<--H;);return ie>>>1}function _e(O,H,ie){var ae,J,fe=new Array(_+1),xe=0;for(ae=1;ae<=_;ae++)fe[ae]=xe=xe+ie[ae-1]<<1;for(J=0;J<=H;J++){var me=O[2*J+1];me!==0&&(O[2*J]=Ae(fe[me]++,me))}}function Ce(O){var H;for(H=0;H<g;H++)O.dyn_ltree[2*H]=0;for(H=0;H<y;H++)O.dyn_dtree[2*H]=0;for(H=0;H<w;H++)O.bl_tree[2*H]=0;O.dyn_ltree[2*T]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function Se(O){8<O.bi_valid?ce(O,O.bi_buf):0<O.bi_valid&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function Ye(O,H,ie,ae){var J=2*H,fe=2*ie;return O[J]<O[fe]||O[J]===O[fe]&&ae[H]<=ae[ie]}function ze(O,H,ie){for(var ae=O.heap[ie],J=ie<<1;J<=O.heap_len&&(J<O.heap_len&&Ye(H,O.heap[J+1],O.heap[J],O.depth)&&J++,!Ye(H,ae,O.heap[J],O.depth));)O.heap[ie]=O.heap[J],ie=J,J<<=1;O.heap[ie]=ae}function _t(O,H,ie){var ae,J,fe,xe,me=0;if(O.last_lit!==0)for(;ae=O.pending_buf[O.d_buf+2*me]<<8|O.pending_buf[O.d_buf+2*me+1],J=O.pending_buf[O.l_buf+me],me++,ae===0?Z(O,J,H):(Z(O,(fe=k[J])+m+1,H),(xe=S[fe])!==0&&X(O,J-=G[fe],xe),Z(O,fe=$(--ae),ie),(xe=C[fe])!==0&&X(O,ae-=Y[fe],xe)),me<O.last_lit;);Z(O,T,H)}function lt(O,H){var ie,ae,J,fe=H.dyn_tree,xe=H.stat_desc.static_tree,me=H.stat_desc.has_stree,we=H.stat_desc.elems,Ne=-1;for(O.heap_len=0,O.heap_max=x,ie=0;ie<we;ie++)fe[2*ie]!==0?(O.heap[++O.heap_len]=Ne=ie,O.depth[ie]=0):fe[2*ie+1]=0;for(;O.heap_len<2;)fe[2*(J=O.heap[++O.heap_len]=Ne<2?++Ne:0)]=1,O.depth[J]=0,O.opt_len--,me&&(O.static_len-=xe[2*J+1]);for(H.max_code=Ne,ie=O.heap_len>>1;1<=ie;ie--)ze(O,fe,ie);for(J=we;ie=O.heap[1],O.heap[1]=O.heap[O.heap_len--],ze(O,fe,1),ae=O.heap[1],O.heap[--O.heap_max]=ie,O.heap[--O.heap_max]=ae,fe[2*J]=fe[2*ie]+fe[2*ae],O.depth[J]=(O.depth[ie]>=O.depth[ae]?O.depth[ie]:O.depth[ae])+1,fe[2*ie+1]=fe[2*ae+1]=J,O.heap[1]=J++,ze(O,fe,1),2<=O.heap_len;);O.heap[--O.heap_max]=O.heap[1],function(Le,St){var bn,Bt,se,de,De,$e,et=St.dyn_tree,Mt=St.max_code,gt=St.stat_desc.static_tree,Wt=St.stat_desc.has_stree,ln=St.stat_desc.extra_bits,Dt=St.stat_desc.extra_base,Dn=St.stat_desc.max_length,Ln=0;for(de=0;de<=_;de++)Le.bl_count[de]=0;for(et[2*Le.heap[Le.heap_max]+1]=0,bn=Le.heap_max+1;bn<x;bn++)Dn<(de=et[2*et[2*(Bt=Le.heap[bn])+1]+1]+1)&&(de=Dn,Ln++),et[2*Bt+1]=de,Mt<Bt||(Le.bl_count[de]++,De=0,Dt<=Bt&&(De=ln[Bt-Dt]),$e=et[2*Bt],Le.opt_len+=$e*(de+De),Wt&&(Le.static_len+=$e*(gt[2*Bt+1]+De)));if(Ln!==0){do{for(de=Dn-1;Le.bl_count[de]===0;)de--;Le.bl_count[de]--,Le.bl_count[de+1]+=2,Le.bl_count[Dn]--,Ln-=2}while(0<Ln);for(de=Dn;de!==0;de--)for(Bt=Le.bl_count[de];Bt!==0;)Mt<(se=Le.heap[--bn])||(et[2*se+1]!==de&&(Le.opt_len+=(de-et[2*se+1])*et[2*se],et[2*se+1]=de),Bt--)}}(O,H),_e(fe,Ne,O.bl_count)}function A(O,H,ie){var ae,J,fe=-1,xe=H[1],me=0,we=7,Ne=4;for(xe===0&&(we=138,Ne=3),H[2*(ie+1)+1]=65535,ae=0;ae<=ie;ae++)J=xe,xe=H[2*(ae+1)+1],++me<we&&J===xe||(me<Ne?O.bl_tree[2*J]+=me:J!==0?(J!==fe&&O.bl_tree[2*J]++,O.bl_tree[2*R]++):me<=10?O.bl_tree[2*L]++:O.bl_tree[2*U]++,fe=J,Ne=(me=0)===xe?(we=138,3):J===xe?(we=6,3):(we=7,4))}function oe(O,H,ie){var ae,J,fe=-1,xe=H[1],me=0,we=7,Ne=4;for(xe===0&&(we=138,Ne=3),ae=0;ae<=ie;ae++)if(J=xe,xe=H[2*(ae+1)+1],!(++me<we&&J===xe)){if(me<Ne)for(;Z(O,J,O.bl_tree),--me!=0;);else J!==0?(J!==fe&&(Z(O,J,O.bl_tree),me--),Z(O,R,O.bl_tree),X(O,me-3,2)):me<=10?(Z(O,L,O.bl_tree),X(O,me-3,3)):(Z(O,U,O.bl_tree),X(O,me-11,7));fe=J,Ne=(me=0)===xe?(we=138,3):J===xe?(we=6,3):(we=7,4)}}u(Y);var Q=!1;function B(O,H,ie,ae){X(O,(c<<1)+(ae?1:0),3),function(J,fe,xe,me){Se(J),ce(J,xe),ce(J,~xe),i.arraySet(J.pending_buf,J.window,fe,xe,J.pending),J.pending+=xe}(O,H,ie)}s._tr_init=function(O){Q||(function(){var H,ie,ae,J,fe,xe=new Array(_+1);for(J=ae=0;J<d-1;J++)for(G[J]=ae,H=0;H<1<<S[J];H++)k[ae++]=J;for(k[ae-1]=J,J=fe=0;J<16;J++)for(Y[J]=fe,H=0;H<1<<C[J];H++)D[fe++]=J;for(fe>>=7;J<y;J++)for(Y[J]=fe<<7,H=0;H<1<<C[J]-7;H++)D[256+fe++]=J;for(ie=0;ie<=_;ie++)xe[ie]=0;for(H=0;H<=143;)V[2*H+1]=8,H++,xe[8]++;for(;H<=255;)V[2*H+1]=9,H++,xe[9]++;for(;H<=279;)V[2*H+1]=7,H++,xe[7]++;for(;H<=287;)V[2*H+1]=8,H++,xe[8]++;for(_e(V,g+1,xe),H=0;H<y;H++)P[2*H+1]=5,P[2*H]=Ae(H,5);ye=new ue(V,S,m+1,g,_),re=new ue(P,C,0,y,_),ne=new ue(new Array(0),N,0,w,b)}(),Q=!0),O.l_desc=new q(O.dyn_ltree,ye),O.d_desc=new q(O.dyn_dtree,re),O.bl_desc=new q(O.bl_tree,ne),O.bi_buf=0,O.bi_valid=0,Ce(O)},s._tr_stored_block=B,s._tr_flush_block=function(O,H,ie,ae){var J,fe,xe=0;0<O.level?(O.strm.data_type===2&&(O.strm.data_type=function(me){var we,Ne=4093624447;for(we=0;we<=31;we++,Ne>>>=1)if(1&Ne&&me.dyn_ltree[2*we]!==0)return o;if(me.dyn_ltree[18]!==0||me.dyn_ltree[20]!==0||me.dyn_ltree[26]!==0)return a;for(we=32;we<m;we++)if(me.dyn_ltree[2*we]!==0)return a;return o}(O)),lt(O,O.l_desc),lt(O,O.d_desc),xe=function(me){var we;for(A(me,me.dyn_ltree,me.l_desc.max_code),A(me,me.dyn_dtree,me.d_desc.max_code),lt(me,me.bl_desc),we=w-1;3<=we&&me.bl_tree[2*M[we]+1]===0;we--);return me.opt_len+=3*(we+1)+5+5+4,we}(O),J=O.opt_len+3+7>>>3,(fe=O.static_len+3+7>>>3)<=J&&(J=fe)):J=fe=ie+5,ie+4<=J&&H!==-1?B(O,H,ie,ae):O.strategy===4||fe===J?(X(O,2+(ae?1:0),3),_t(O,V,P)):(X(O,4+(ae?1:0),3),function(me,we,Ne,Le){var St;for(X(me,we-257,5),X(me,Ne-1,5),X(me,Le-4,4),St=0;St<Le;St++)X(me,me.bl_tree[2*M[St]+1],3);oe(me,me.dyn_ltree,we-1),oe(me,me.dyn_dtree,Ne-1)}(O,O.l_desc.max_code+1,O.d_desc.max_code+1,xe+1),_t(O,O.dyn_ltree,O.dyn_dtree)),Ce(O),ae&&Se(O)},s._tr_tally=function(O,H,ie){return O.pending_buf[O.d_buf+2*O.last_lit]=H>>>8&255,O.pending_buf[O.d_buf+2*O.last_lit+1]=255&H,O.pending_buf[O.l_buf+O.last_lit]=255&ie,O.last_lit++,H===0?O.dyn_ltree[2*ie]++:(O.matches++,H--,O.dyn_ltree[2*(k[ie]+m+1)]++,O.dyn_dtree[2*$(H)]++),O.last_lit===O.lit_bufsize-1},s._tr_align=function(O){X(O,2,3),Z(O,T,V),function(H){H.bi_valid===16?(ce(H,H.bi_buf),H.bi_buf=0,H.bi_valid=0):8<=H.bi_valid&&(H.pending_buf[H.pending++]=255&H.bi_buf,H.bi_buf>>=8,H.bi_valid-=8)}(O)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var u,c,d,m,g=1,y={},w=!1,x=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,u={}.toString.call(o.process)==="[object process]"?function(R){process.nextTick(function(){b(R)})}:function(){if(o.postMessage&&!o.importScripts){var R=!0,L=o.onmessage;return o.onmessage=function(){R=!1},o.postMessage("","*"),o.onmessage=L,R}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",T,!1):o.attachEvent("onmessage",T),function(R){o.postMessage(m+R,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(R){b(R.data)},function(R){d.port2.postMessage(R)}):x&&"onreadystatechange"in x.createElement("script")?(c=x.documentElement,function(R){var L=x.createElement("script");L.onreadystatechange=function(){b(R),L.onreadystatechange=null,c.removeChild(L),L=null},c.appendChild(L)}):function(R){setTimeout(b,0,R)},_.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var L=new Array(arguments.length-1),U=0;U<L.length;U++)L[U]=arguments[U+1];var S={callback:R,args:L};return y[g]=S,u(g),g++},_.clearImmediate=v}function v(R){delete y[R]}function b(R){if(w)setTimeout(b,0,R);else{var L=y[R];if(L){w=!0;try{(function(U){var S=U.callback,C=U.args;switch(C.length){case 0:S();break;case 1:S(C[0]);break;case 2:S(C[0],C[1]);break;case 3:S(C[0],C[1],C[2]);break;default:S.apply(a,C)}})(L)}finally{v(R),w=!1}}}}function T(R){R.source===o&&typeof R.data=="string"&&R.data.indexOf(m)===0&&b(+R.data.slice(m.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ls<"u"?ls:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(pk);var h8=pk.exports;const f8=Sm(h8);var mk={exports:{}};(function(t,e){(function(n,r){r()})(ls,function(){function n(c,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,d,m){var g=new XMLHttpRequest;g.open("GET",c),g.responseType="blob",g.onload=function(){u(g.response,d,m)},g.onerror=function(){console.error("could not download file")},g.send()}function s(c){var d=new XMLHttpRequest;d.open("HEAD",c,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function i(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ls=="object"&&ls.global===ls?ls:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,d,m){var g=o.URL||o.webkitURL,y=document.createElement("a");d=d||c.name||"download",y.download=d,y.rel="noopener",typeof c=="string"?(y.href=c,y.origin===location.origin?i(y):s(y.href)?r(c,d,m):i(y,y.target="_blank")):(y.href=g.createObjectURL(c),setTimeout(function(){g.revokeObjectURL(y.href)},4e4),setTimeout(function(){i(y)},0))}:"msSaveOrOpenBlob"in navigator?function(c,d,m){if(d=d||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,m),d);else if(s(c))r(c,d,m);else{var g=document.createElement("a");g.href=c,g.target="_blank",setTimeout(function(){i(g)})}}:function(c,d,m,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof c=="string")return r(c,d,m);var y=c.type==="application/octet-stream",w=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||y&&w||a)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var T=_.result;T=x?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=T:location=T,g=null},_.readAsDataURL(c)}else{var v=o.URL||o.webkitURL,b=v.createObjectURL(c);g?g.location=b:location.href=b,g=null,setTimeout(function(){v.revokeObjectURL(b)},4e4)}});o.saveAs=u.saveAs=u,t.exports=u})})(mk);var p8=mk.exports;const m8=Sm(p8),Ci=1080,J_=[{name:"Animal",items:["https://cdn-icons-png.flaticon.com/256/4193/4193243.png","https://cdn-icons-png.flaticon.com/256/4193/4193245.png","https://cdn-icons-png.flaticon.com/256/4193/4193247.png","https://cdn-icons-png.flaticon.com/256/4193/4193251.png","https://cdn-icons-png.flaticon.com/256/4193/4193254.png","https://cdn-icons-png.flaticon.com/256/4193/4193256.png","https://cdn-icons-png.flaticon.com/256/4193/4193260.png","https://cdn-icons-png.flaticon.com/256/4193/4193263.png","https://cdn-icons-png.flaticon.com/256/4193/4193266.png","https://cdn-icons-png.flaticon.com/256/4193/4193269.png","https://cdn-icons-png.flaticon.com/256/4193/4193273.png","https://cdn-icons-png.flaticon.com/256/4193/4193275.png","https://cdn-icons-png.flaticon.com/256/4193/4193279.png"]},{name:"Food",items:["https://cdn-icons-png.flaticon.com/256/4359/4359613.png","https://cdn-icons-png.flaticon.com/256/4359/4359623.png","https://cdn-icons-png.flaticon.com/256/4359/4359633.png","https://cdn-icons-png.flaticon.com/256/4359/4359642.png","https://cdn-icons-png.flaticon.com/256/4359/4359651.png","https://cdn-icons-png.flaticon.com/256/4359/4359658.png","https://cdn-icons-png.flaticon.com/256/4359/4359672.png","https://cdn-icons-png.flaticon.com/256/4359/4359682.png","https://cdn-icons-png.flaticon.com/256/4359/4359692.png","https://cdn-icons-png.flaticon.com/256/4359/4359703.png","https://cdn-icons-png.flaticon.com/256/4359/4359725.png","https://cdn-icons-png.flaticon.com/256/4359/4359746.png","https://cdn-icons-png.flaticon.com/256/4359/4359763.png","https://cdn-icons-png.flaticon.com/256/4359/4359781.png","https://cdn-icons-png.flaticon.com/256/4359/4359814.png","https://cdn-icons-png.flaticon.com/256/4359/4359840.png","https://cdn-icons-png.flaticon.com/256/4359/4359859.png","https://cdn-icons-png.flaticon.com/256/4359/4359883.png","https://cdn-icons-png.flaticon.com/256/4359/4359904.png","https://cdn-icons-png.flaticon.com/256/4359/4359922.png"]}],g8=({onExit:t})=>{var yr,wi,kt,_i,ir,Qe,co,bi,vr,ho,fo,ss,Ei;const[e,n]=j.useState([]),[r,s]=j.useState(null),[i,o]=j.useState([[]]),[a,u]=j.useState(0),[c,d]=j.useState(.5),[m,g]=j.useState({x:0,y:0}),[y,w]=j.useState(3),[x,_]=j.useState("square"),[v,b]=j.useState("#ffffff"),[T,R]=j.useState(!1),[L,U]=j.useState("add"),[S,C]=j.useState(null),[N,M]=j.useState("none"),[V,P]=j.useState(null),[D,k]=j.useState(!1),[G,ye]=j.useState(null),[re,ne]=j.useState(""),Y=j.useRef(null),ue=j.useRef(null),q=j.useRef(!1),$=j.useRef(!1),ce=j.useRef({x:0,y:0}),X=j.useRef({x:0,y:0}),Z=j.useRef({x:0,y:0}),Ae=j.useRef(!1),_e=j.useRef(!1),Ce=j.useRef({x:0,y:0}),Se=j.useRef(!1),Ye=j.useRef({x:0,y:0,w:0,h:0}),ze=j.useRef(null),_t=x==="square"?Ci:Ci*5/4,lt=y*Ci,A=_t;j.useEffect(()=>{const z=()=>P(null);return window.addEventListener("click",z),()=>window.removeEventListener("click",z)},[]);const oe=z=>{const pe=Math.max(100,z.length*42+50),Pe=60*2,Ge=`<svg xmlns="http://www.w3.org/2000/svg" width="${pe}" height="${Pe}" viewBox="0 0 ${pe} ${Pe}">
            <text x="50%" y="50%" font-family="Arial, sans-serif" font-size="60" font-weight="bold" fill="#0f172a" text-anchor="middle" dominant-baseline="middle">${z}</text>
        </svg>`;try{return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(Ge)))}`}catch(ut){return console.error("Text encoding failed",ut),`data:image/svg+xml;base64,${btoa(Ge)}`}},Q=z=>{let ee="";return z==="circle"?ee='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><circle cx="100" cy="100" r="100" fill="#1e293b"/></svg>':z==="square"?ee='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect width="200" height="200" fill="#334155"/></svg>':z==="triangle"?ee='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 10 L190 190 L10 190 Z" fill="#475569"/></svg>':z==="star"?ee='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="m100 10 25 60 65 5-50 45 15 65-55-35-55 35 15-65-50-45 65-5z" fill="#0f172a"/></svg>':z==="heart"&&(ee='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 180 C10 100 -20 50 40 20 C70 5 90 30 100 50 C110 30 130 5 160 20 C220 50 190 100 100 180 Z" fill="#ef4444"/></svg>'),`data:image/svg+xml;base64,${btoa(ee)}`},B=z=>{const ee=i.slice(0,a+1);ee.push(z),o(ee),u(ee.length-1)},O=()=>{if(a>0){const z=a-1;n(i[z]),u(z)}else a===0&&(n([]),u(-1))},H=z=>{n(z),B(z)},ie=(z,ee="image",pe)=>{const Pe=new Image;Pe.crossOrigin="anonymous",Pe.onload=()=>{const Ge=Pe.width/Pe.height,ut={id:Date.now().toString(),type:ee,textContent:pe,src:z,x:lt/2-Pe.width/2,y:A/2-Pe.height/2,width:Pe.width,height:Pe.height,originalAspectRatio:Ge,currentAspectRatio:Ge,rotation:0,scaleX:1,borderRadius:0,borderColor:"#000000",borderWidth:0,isGrayscale:!1,maskShape:"none"};ut.width>1200&&(ut.width=1200,ut.height=1200/ut.originalAspectRatio);const tt=[...e,ut];H(tt),s(ut.id),M("none")},Pe.src=z},ae=()=>{const z="Double Tap to Edit";ie(oe(z),"text",z),P(null)},J=z=>{if(z.target.files&&z.target.files[0]){const ee=z.target.files[0],pe=new FileReader;pe.onload=Pe=>{var Ge;(Ge=Pe.target)!=null&&Ge.result&&ie(Pe.target.result,"image")},pe.readAsDataURL(ee)}z.target.value=""},fe=()=>{if(!r)return;const z=e.filter(ee=>ee.id!==r);H(z),s(null),M("none")},xe=()=>{if(!r)return;const z=e.find(ee=>ee.id===r);if(z){const ee={...z,id:Date.now().toString(),x:z.x+50,y:z.y+50},pe=[...e,ee];H(pe),s(ee.id),M("none")}},me=()=>{const z=e.find(ee=>ee.id===r);!z||z.type!=="text"||(ye(z.id),ne(z.textContent||""),M("none"))},we=()=>{if(!G)return;const z=re.trim()===""?" ":re,ee=oe(z),pe=new Image;pe.onload=()=>{const Pe=pe.width/pe.height,Ge=e.map(ut=>ut.id===G?{...ut,src:ee,textContent:z,width:pe.width,height:pe.height,originalAspectRatio:Pe,currentAspectRatio:Pe}:ut);H(Ge),ye(null)},pe.src=ee},Ne=(z,ee=!0)=>{if(!r)return;const pe=e.map(Pe=>Pe.id===r?{...Pe,...z}:Pe);ee?H(pe):n(pe)},Le=()=>{const z=e.find(ee=>ee.id===r);z&&Ne({rotation:(z.rotation+90)%360})},St=()=>{const z=e.find(ee=>ee.id===r);z&&Ne({scaleX:z.scaleX*-1})},bn=()=>{if(!r)return;const z=e.find(Pe=>Pe.id===r);if(!z)return;let ee=z.originalAspectRatio;Math.abs(z.currentAspectRatio-z.originalAspectRatio)<.01?ee=1:Math.abs(z.currentAspectRatio-1)<.01?ee=.8:Math.abs(z.currentAspectRatio-.8)<.01?ee=1.77:ee=z.originalAspectRatio;const pe=z.width/ee;Ne({currentAspectRatio:ee,height:pe})},Bt=z=>{n(ee=>{const pe=ee.find(Ge=>Ge.id===z);return pe?[...ee.filter(Ge=>Ge.id!==z),pe]:ee})},se=z=>{if(!r)return;const ee=e.findIndex(Pe=>Pe.id===r);if(ee===-1)return;const pe=[...e];if(z==="front"){const[Pe]=pe.splice(ee,1);pe.push(Pe)}else if(z==="back"){const[Pe]=pe.splice(ee,1);pe.unshift(Pe)}else z==="forward"&&ee<pe.length-1?[pe[ee],pe[ee+1]]=[pe[ee+1],pe[ee]]:z==="backward"&&ee>0&&([pe[ee],pe[ee-1]]=[pe[ee-1],pe[ee]]);H(pe)},de=async()=>{k(!0);try{const z=document.createElement("canvas");z.width=lt,z.height=A;const ee=z.getContext("2d");if(!ee)throw new Error("Canvas context failed");ee.fillStyle=v,ee.fillRect(0,0,lt,A);const pe=tt=>new Promise($n=>{const un=new Image;un.crossOrigin="anonymous",un.onload=()=>{ee.save();const zr=tt.x+tt.width/2,xr=tt.y+tt.height/2;ee.translate(zr,xr),ee.rotate(tt.rotation*Math.PI/180),ee.scale(tt.scaleX,1),tt.isGrayscale&&(ee.filter="grayscale(100%)");const wr=tt.width,cn=tt.height,or=-wr/2,En=-cn/2;if(ee.beginPath(),tt.maskShape==="circle"){const Ti=Math.min(wr,cn)/2;ee.arc(0,0,Ti,0,Math.PI*2)}else(tt.maskShape==="square"||tt.borderRadius>0)&&ee.roundRect?ee.roundRect(or,En,wr,cn,tt.borderRadius):ee.rect(or,En,wr,cn);ee.closePath(),ee.save(),ee.clip(),ee.drawImage(un,or,En,wr,cn),ee.restore(),ee.filter="none",tt.borderWidth>0&&(ee.lineWidth=tt.borderWidth,ee.strokeStyle=tt.borderColor,ee.stroke()),ee.restore(),$n()},un.src=tt.src});await Promise.all(e.map(pe));const Pe=new f8,Ge=Pe.folder("instagram-panorama");for(let tt=0;tt<y;tt++){const $n=document.createElement("canvas");$n.width=Ci,$n.height=_t;const un=$n.getContext("2d");if(un){un.drawImage(z,tt*Ci,0,Ci,_t,0,0,Ci,_t);const zr=await new Promise(xr=>$n.toBlob(xr,"image/jpeg",.95));zr&&Ge&&Ge.file(`slide_${tt+1}.jpg`,zr)}}const ut=await Pe.generateAsync({type:"blob"});m8.saveAs(ut,"ig-panorama-slides.zip")}catch{alert("Gagal membuat zip.")}finally{k(!1)}},De=z=>{z.ctrlKey&&z.preventDefault();const ee=-z.deltaY*.001,pe=Math.min(Math.max(.05,c+ee),3);d(pe)},$e=z=>{const ee=z.target;(ee===ue.current||ee.classList.contains("canvas-bg"))&&!q.current&&z.pointerType==="mouse"&&($.current=!0,ce.current={x:z.clientX,y:z.clientY},Z.current={...m},z.button===0&&(s(null),ye(null),M("none")))},et=z=>{z.preventDefault(),P({x:z.clientX,y:z.clientY})},Mt=z=>{if($.current){const ee=z.clientX-ce.current.x,pe=z.clientY-ce.current.y;g({x:Z.current.x+ee,y:Z.current.y+pe});return}if(q.current&&r){Math.hypot(z.clientX-Ce.current.x,z.clientY-Ce.current.y)>3&&(Ae.current=!0);const pe=(z.clientX-ce.current.x)/c,Pe=(z.clientY-ce.current.y)/c;n(Ge=>Ge.map(ut=>ut.id===r?{...ut,x:X.current.x+pe,y:X.current.y+Pe}:ut));return}if(Se.current&&r){const ee=(z.clientX-Ye.current.x)/c,pe=Math.max(50,Ye.current.w+ee);n(Pe=>Pe.map(Ge=>Ge.id===r?{...Ge,width:pe,height:pe/Ge.currentAspectRatio}:Ge))}},gt=()=>{(q.current||Se.current)&&B(e),q.current=!1,Se.current=!1,$.current=!1,ze.current=null},Wt=(z,ee,pe)=>{if(G)return;_e.current=r===pe,s(pe),M("none"),Bt(pe),q.current=!0,Ae.current=!1,Ce.current={x:z,y:ee},ce.current={x:z,y:ee};const Pe=e.find(Ge=>Ge.id===pe);Pe&&(X.current={x:Pe.x,y:Pe.y})},ln=(z,ee)=>{z.stopPropagation(),z.preventDefault();const pe="touches"in z?z.touches[0].clientX:z.clientX,Pe="touches"in z?z.touches[0].clientY:z.clientY;Se.current=!0;const Ge=e.find(ut=>ut.id===ee);Ge&&(Ye.current={x:pe,y:Pe,w:Ge.width,h:Ge.height})},Dt=z=>{!Ae.current&&_e.current,gt()},Dn=z=>{const ee=e.find(pe=>pe.id===z);ee&&ee.type==="text"&&me()},Ln=z=>{if(z.touches.length===2){z.preventDefault(),$.current=!1;const ee=z.touches[0],pe=z.touches[1],Pe=Math.hypot(pe.clientX-ee.clientX,pe.clientY-ee.clientY),Ge={x:(ee.clientX+pe.clientX)/2,y:(ee.clientY+pe.clientY)/2};ze.current={startDist:Pe,startScale:c,startPan:{...m},startCenter:Ge}}else if(z.touches.length===1){const ee=z.target;(ee===ue.current||ee.classList.contains("canvas-bg"))&&!q.current&&(s(null),ye(null),M("none"))}},sr=z=>{if(z.touches.length===2&&ze.current){z.preventDefault();const ee=z.touches[0],pe=z.touches[1],Pe=Math.hypot(pe.clientX-ee.clientX,pe.clientY-ee.clientY),Ge={x:(ee.clientX+pe.clientX)/2,y:(ee.clientY+pe.clientY)/2},ut=Math.max(.05,Math.min(3,ze.current.startScale*(Pe/ze.current.startDist))),tt=Ge.x-ze.current.startCenter.x,$n=Ge.y-ze.current.startCenter.y;g({x:ze.current.startPan.x+tt,y:ze.current.startPan.y+$n}),d(ut)}},ot=()=>e.find(z=>z.id===r),Br=()=>d(z=>Math.min(z+.1,3)),uo=()=>d(z=>Math.max(z-.1,.05));return l.jsxs("div",{className:"h-[100dvh] bg-slate-50 text-slate-900 flex flex-col overflow-hidden font-sans relative",children:[l.jsx("style",{children:`
                    .no-scrollbar::-webkit-scrollbar { display: none; }
                    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
                `}),V&&l.jsxs("div",{className:"fixed z-[200] bg-white/90 backdrop-blur-md border border-slate-200 rounded-xl shadow-2xl p-2 animate-fade-in origin-top-left flex flex-col gap-1 w-48",style:{top:V.y,left:V.x},onClick:z=>z.stopPropagation(),children:[l.jsxs("button",{onClick:()=>{w(z=>Math.min(z+1,10)),P(null)},className:"flex items-center gap-3 px-3 py-2 text-xs font-bold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors text-left",children:[l.jsx(ST,{className:"w-4 h-4 text-slate-500"})," Tambah Slide (+1)"]}),l.jsxs("button",{onClick:()=>{var z;(z=Y.current)==null||z.click(),P(null)},className:"flex items-center gap-3 px-3 py-2 text-xs font-bold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors text-left",children:[l.jsx(ra,{className:"w-4 h-4 text-slate-500"})," Upload Foto"]}),l.jsxs("button",{onClick:ae,className:"flex items-center gap-3 px-3 py-2 text-xs font-bold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors text-left",children:[l.jsx("div",{className:"w-4 h-4 flex items-center justify-center font-serif font-black text-slate-500 border border-slate-300 rounded bg-white text-[9px]",children:"T"})," Tambah Teks"]}),l.jsx("div",{className:"h-px bg-slate-200 my-1"}),l.jsx("div",{className:"px-3 py-1 text-[9px] font-bold text-slate-400 uppercase tracking-wider",children:"Shapes"}),l.jsxs("div",{className:"flex gap-2 px-2 pb-1",children:[l.jsx("button",{onClick:()=>{ie(Q("square"),"shape"),P(null)},className:"p-2 bg-slate-50 hover:bg-slate-200 rounded-lg",children:l.jsx(Ef,{className:"w-4 h-4 text-slate-600"})}),l.jsx("button",{onClick:()=>{ie(Q("circle"),"shape"),P(null)},className:"p-2 bg-slate-50 hover:bg-slate-200 rounded-lg",children:l.jsx(bf,{className:"w-4 h-4 text-slate-600"})}),l.jsx("button",{onClick:()=>{ie(Q("star"),"shape"),P(null)},className:"p-2 bg-slate-50 hover:bg-slate-200 rounded-lg",children:l.jsx(Dv,{className:"w-4 h-4 text-slate-600"})})]})]}),l.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 pointer-events-none flex justify-between items-start",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:t,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors",children:l.jsx(Nr,{className:"w-5 h-5"})}),l.jsx("button",{onClick:O,disabled:a<0,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors disabled:opacity-50",children:l.jsx(bN,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"pointer-events-auto bg-white/90 backdrop-blur-md border border-slate-200 rounded-full flex items-center p-1 shadow-sm",children:[l.jsx("button",{onClick:uo,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:l.jsx(kN,{className:"w-4 h-4"})}),l.jsxs("div",{className:"px-2 text-xs font-mono font-bold text-slate-700 w-10 text-center select-none",children:[Math.round(c*100),"%"]}),l.jsx("button",{onClick:Br,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:l.jsx(SN,{className:"w-4 h-4"})})]}),l.jsx("button",{onClick:de,disabled:D||e.length===0,className:"pointer-events-auto bg-slate-900 hover:bg-slate-800 text-white px-4 py-2.5 rounded-full shadow-lg shadow-slate-900/10 font-bold text-xs flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 border border-slate-800",children:D?"Saving...":l.jsxs(l.Fragment,{children:[l.jsx(vT,{className:"w-4 h-4"})," Save"]})})]}),l.jsx("div",{className:"flex-1 bg-slate-100 overflow-hidden relative flex flex-col",children:l.jsx("div",{ref:ue,className:"flex-1 w-full h-full cursor-grab active:cursor-grabbing touch-none flex items-center justify-center overflow-hidden relative",onWheel:De,onPointerDown:$e,onPointerMove:Mt,onPointerUp:gt,onPointerLeave:gt,onTouchStart:Ln,onTouchMove:sr,onTouchEnd:gt,onContextMenu:et,children:l.jsx("div",{style:{transform:`translate(${m.x}px, ${m.y}px) scale(${c})`,transformOrigin:"center",display:"flex",alignItems:"center",justifyContent:"center",transition:$.current||q.current||Se.current||ze.current?"none":"transform 0.1s ease-out",willChange:"transform",pointerEvents:"none"},children:l.jsxs("div",{className:"relative shadow-2xl shrink-0 pointer-events-auto",style:{width:lt,height:A},children:[l.jsx("div",{className:"absolute inset-0 canvas-bg",style:{backgroundColor:v}}),l.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.map((z,ee)=>l.jsx("div",{className:"absolute group",style:{left:z.x,top:z.y,width:z.width,height:z.height,transform:`rotate(${z.rotation}deg) scaleX(${z.scaleX})`,zIndex:ee},children:G===z.id?l.jsx("div",{className:"w-full h-full relative",children:l.jsx("textarea",{autoFocus:!0,value:re,onChange:pe=>ne(pe.target.value),onBlur:we,onKeyDown:pe=>{pe.key==="Enter"&&!pe.shiftKey&&(pe.preventDefault(),we())},className:"w-full h-full bg-transparent border-2 border-blue-500 rounded resize-none outline-none text-center font-bold text-slate-900 overflow-hidden p-0 m-0",style:{fontFamily:"Arial, sans-serif",fontSize:"60px",lineHeight:"1.2",display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"pre-wrap"},onFocus:pe=>pe.target.select()})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`absolute -inset-0.5 pointer-events-none transition-opacity duration-200 z-50 ${r===z.id?"opacity-100":"opacity-0"}`,style:{border:"2px dashed #0f172a",borderRadius:z.maskShape==="circle"?"50%":`${z.borderRadius}px`}}),l.jsx("div",{style:{width:"100%",height:"100%",borderRadius:z.maskShape==="circle"?"50%":`${z.borderRadius}px`,overflow:"hidden",border:z.borderWidth>0?`${z.borderWidth}px solid ${z.borderColor}`:"none",filter:z.isGrayscale?"grayscale(100%)":"none",position:"relative"},onMouseDown:pe=>Wt(pe.clientX,pe.clientY,z.id),onTouchStart:pe=>{pe.touches.length===1&&Wt(pe.touches[0].clientX,pe.touches[0].clientY,z.id)},onMouseUp:Dt,onTouchEnd:Dt,onDoubleClick:()=>Dn(z.id),children:l.jsx("img",{src:z.src,alt:"item",className:"w-full h-full select-none",draggable:!1,style:{objectFit:"cover"}})})]})},z.id))}),e.map(z=>r===z.id&&!G&&l.jsxs("div",{className:"absolute pointer-events-none z-[51]",style:{left:z.x,top:z.y,width:z.width,height:z.height,transform:`rotate(${z.rotation}deg) scaleX(${z.scaleX})`},children:[l.jsx("div",{className:"absolute -bottom-3 -right-3 w-6 h-6 pointer-events-auto flex items-center justify-center cursor-nwse-resize hover:scale-110 transition-transform bg-white rounded-full shadow-md",style:{transform:`scale(${1/c})`},onMouseDown:ee=>ln(ee,z.id),onTouchStart:ee=>ln(ee,z.id),children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/11398/11398919.png",className:"w-4 h-4 object-contain",alt:"Resize",draggable:!1})}),Se.current&&l.jsxs("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-[10px] px-2 py-1 rounded shadow whitespace-nowrap",style:{transform:`translateX(-50%) scale(${1/c})`},children:[Math.round(z.width),"px"]})]},`resize-${z.id}`)),r&&ot()&&!G&&l.jsxs("div",{className:"absolute pointer-events-auto z-[100]",style:{left:ot().x+ot().width/2,top:ot().y-60/c,transform:`translateX(-50%) scale(${1/c})`,transformOrigin:"bottom center",transition:"top 0.2s ease-out"},onMouseDown:z=>z.stopPropagation(),onTouchStart:z=>z.stopPropagation(),children:[l.jsx("div",{className:"bg-white/90 backdrop-blur-md text-slate-700 rounded-full shadow-xl border border-slate-200 flex items-center p-1.5 gap-1 transition-all duration-200",children:N==="none"?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>M("layers"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",title:"Layer",children:l.jsx(_f,{className:"w-4 h-4"})}),((yr=ot())==null?void 0:yr.type)==="text"&&l.jsx("button",{onClick:me,className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",title:"Edit Teks",children:l.jsx(fd,{className:"w-4 h-4"})}),((wi=ot())==null?void 0:wi.type)!=="text"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>M("mask"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",title:"Masking",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/1215/1215945.png",className:"w-4 h-4 object-contain",alt:"Mask"})}),l.jsx("button",{onClick:()=>M("border"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",title:"Border",children:l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/33/33587.png",className:"w-4 h-4 object-contain",alt:"Border"})})]}),l.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),l.jsx("button",{onClick:Le,className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",children:l.jsx(gN,{className:"w-4 h-4"})}),l.jsx("button",{onClick:St,className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",children:l.jsx(yN,{className:"w-4 h-4"})}),((kt=ot())==null?void 0:kt.type)!=="text"&&l.jsx("button",{onClick:bn,className:"p-2 hover:bg-slate-100 rounded-full text-slate-900",children:l.jsx(_N,{className:"w-4 h-4"})}),l.jsx("button",{onClick:xe,className:"p-2 hover:bg-slate-100 rounded-full text-slate-600",children:l.jsx(vN,{className:"w-4 h-4"})}),l.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),l.jsx("button",{onClick:fe,className:"p-2 hover:bg-red-50 text-red-500 rounded-full",children:l.jsx(Jr,{className:"w-4 h-4"})})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>M("none"),className:"p-2 hover:bg-slate-200 rounded-full text-slate-900 bg-slate-100",title:"Kembali",children:l.jsx(Nr,{className:"w-4 h-4"})}),l.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),N==="layers"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>se("front"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-700",title:"Paling Depan",children:l.jsx(_f,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>se("forward"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-700",title:"Maju",children:l.jsx(xT,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>se("backward"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-700",title:"Mundur",children:l.jsx(wT,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>se("back"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-700",title:"Paling Belakang",children:l.jsx(_f,{className:"w-4 h-4 opacity-50"})})]}),N==="mask"&&((_i=ot())==null?void 0:_i.type)!=="text"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Ne({maskShape:"none",borderRadius:0}),className:`p-2 rounded-full ${((ir=ot())==null?void 0:ir.maskShape)==="none"?"bg-slate-900 text-white":"hover:bg-slate-100 text-slate-700"}`,title:"Kotak",children:l.jsx(Ef,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>Ne({maskShape:"circle"}),className:`p-2 rounded-full ${((Qe=ot())==null?void 0:Qe.maskShape)==="circle"?"bg-slate-900 text-white":"hover:bg-slate-100 text-slate-700"}`,title:"Lingkaran",children:l.jsx(bf,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>Ne({maskShape:"square",borderRadius:40}),className:`p-2 rounded-full ${((co=ot())==null?void 0:co.maskShape)==="square"?"bg-slate-900 text-white":"hover:bg-slate-100 text-slate-700"}`,title:"Rounded",children:l.jsx("div",{className:"w-4 h-4 border-2 border-current rounded-md"})})]}),N==="border"&&((bi=ot())==null?void 0:bi.type)!=="text"&&l.jsxs("div",{className:"flex items-center gap-3 px-2",children:[l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"w-6 h-6 rounded-full border border-slate-300 shadow-sm",style:{backgroundColor:(vr=ot())==null?void 0:vr.borderColor}}),l.jsx("input",{type:"color",value:(ho=ot())==null?void 0:ho.borderColor,onChange:z=>Ne({borderColor:z.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})]}),l.jsx("input",{type:"range",min:"0",max:"20",value:(fo=ot())==null?void 0:fo.borderWidth,onChange:z=>Ne({borderWidth:parseInt(z.target.value)}),className:"w-24 h-1.5 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"}),l.jsx("span",{className:"text-[10px] font-mono font-bold text-slate-500 w-4",children:(ss=ot())==null?void 0:ss.borderWidth})]})]})}),l.jsx("div",{className:"w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-t-[6px] border-t-white/90 absolute -bottom-1.5 left-1/2 -translate-x-1/2 drop-shadow-sm"})]}),l.jsx("div",{className:"absolute inset-0 pointer-events-none z-20",children:Array.from({length:y-1}).map((z,ee)=>l.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-dashed border-slate-400/50 flex flex-col justify-between items-center py-2 mix-blend-difference",style:{left:`${(ee+1)/y*100}%`},children:l.jsx("div",{style:{transform:`scale(${1/c})`},children:l.jsx(mN,{className:"w-4 h-4 text-slate-600 opacity-80 bg-white/20 rounded-full p-0.5"})})},ee))}),l.jsx("div",{className:"absolute top-0 left-0 w-full flex pointer-events-none z-20",children:Array.from({length:y}).map((z,ee)=>l.jsx("div",{className:"flex-1 border-r border-transparent h-6 flex items-center justify-center",children:l.jsxs("span",{className:"bg-white/80 text-slate-900 text-[9px] font-bold px-2 rounded-b backdrop-blur-sm shadow-sm border-x border-b border-slate-200",style:{transform:`scale(${Math.max(1,1/c)})`,transformOrigin:"top center"},children:["Slide ",ee+1]})},ee))})]})})})}),l.jsxs("div",{className:`fixed bottom-0 left-0 right-0 z-[60] flex flex-col bg-white border-t border-slate-200 transition-transform duration-300 ease-out shadow-[0_-10px_30px_-10px_rgba(0,0,0,0.05)] ${T?"translate-y-0":"translate-y-[calc(100%-40px)]"}`,children:[l.jsxs("div",{onClick:()=>R(!T),className:"h-10 flex items-center justify-center cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors border-b border-slate-200 group shrink-0",children:[l.jsx("div",{className:"w-12 h-1 bg-slate-300 rounded-full group-hover:bg-slate-400 mb-1"}),l.jsx(Xn,{className:`w-4 h-4 text-slate-400 absolute right-4 transition-transform duration-300 ${T?"":"rotate-180"}`})]}),l.jsxs("div",{className:"flex border-b border-slate-200 bg-white shrink-0",children:[l.jsx("button",{onClick:()=>{U("add"),R(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${L==="add"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Add"}),l.jsx("button",{onClick:()=>{U("canvas"),R(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${L==="canvas"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Layout"})]}),l.jsxs("div",{className:"h-28 overflow-x-auto overflow-y-hidden bg-white no-scrollbar flex items-center",children:[L==="add"&&l.jsx("div",{className:"flex items-center gap-4 px-6 min-w-max",children:S?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>C(null),className:"h-16 w-16 bg-slate-100 hover:bg-slate-200 rounded-xl text-slate-600 flex flex-col items-center justify-center gap-1 border border-transparent transition-all shrink-0",children:[l.jsx(Nr,{className:"w-5 h-5"}),l.jsx("span",{className:"text-[9px] font-bold uppercase",children:"Back"})]}),l.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0 mx-2"}),l.jsx("div",{className:"flex flex-col items-center justify-center mr-2",children:l.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase rotate-180",style:{writingMode:"vertical-rl"},children:S})}),l.jsx("div",{className:"flex gap-3",children:(Ei=J_.find(z=>z.name===S))==null?void 0:Ei.items.map((z,ee)=>l.jsx("button",{onClick:()=>ie(z,"image"),className:"bg-white w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-50 border border-slate-200 transition-all hover:scale-105 hover:shadow-sm",children:l.jsx("img",{src:z,alt:"Sticker",className:"w-10 h-10 object-contain pointer-events-none"})},ee))})]}):l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>{var z;return(z=Y.current)==null?void 0:z.click()},className:"h-20 w-20 bg-slate-50 hover:bg-slate-100 rounded-xl text-slate-700 font-bold flex flex-col items-center justify-center gap-2 border border-slate-200 transition-all shrink-0",children:[l.jsx(ra,{className:"w-6 h-6 text-slate-900"}),l.jsx("span",{className:"text-[10px] uppercase",children:"Upload"})]}),l.jsx("input",{type:"file",ref:Y,onChange:J,className:"hidden",accept:"image/*"}),l.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>ie(Q("circle"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:l.jsx(bf,{className:"w-6 h-6 text-slate-700"})}),l.jsx("button",{onClick:()=>ie(Q("square"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:l.jsx(Ef,{className:"w-6 h-6 text-slate-700"})}),l.jsx("button",{onClick:()=>ie(Q("triangle"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:l.jsx(xN,{className:"w-6 h-6 text-slate-700"})}),l.jsx("button",{onClick:()=>ie(Q("heart"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:l.jsx(wN,{className:"w-6 h-6 text-red-500"})}),l.jsx("button",{onClick:()=>ie(Q("star"),"shape"),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:l.jsx(Dv,{className:"w-6 h-6 text-slate-900"})}),l.jsx("button",{onClick:ae,className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors font-bold text-xs text-slate-700",children:"TXT"})]}),l.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0 mx-2"}),J_.map(z=>l.jsxs("button",{onClick:()=>C(z.name),className:"bg-white w-20 h-20 rounded-xl flex flex-col items-center justify-center hover:bg-slate-50 border border-slate-200 transition-all hover:scale-105 hover:shadow-sm gap-1",children:[l.jsxs("div",{className:"relative w-8 h-8",children:[l.jsx("img",{src:z.items[0],alt:"Pack",className:"w-full h-full object-contain pointer-events-none opacity-80"}),l.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full border border-white"})]}),l.jsx("span",{className:"text-[9px] font-bold text-slate-600 uppercase",children:z.name})]},z.name))]})}),L==="canvas"&&l.jsxs("div",{className:"flex items-center gap-6 px-6 min-w-max h-full",children:[l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl flex flex-col justify-center gap-1 w-48 shrink-0 border border-slate-100",children:[l.jsx("div",{className:"flex justify-between text-[10px] text-slate-500 font-bold uppercase",children:l.jsxs("span",{children:["Slides (",y,")"]})}),l.jsx("input",{type:"range",min:"2",max:"10",value:y,onChange:z=>w(parseInt(z.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>_("square"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${x==="square"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Square 1:1"}),l.jsx("button",{onClick:()=>_("portrait"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${x==="portrait"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Portrait 4:5"})]}),l.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),l.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100 flex items-center justify-between gap-3 shrink-0",children:[l.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Background"}),l.jsx("input",{type:"color",value:v,onChange:z=>b(z.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-0"})]})]})]})]})]})},y8=t=>{const e=t.toUpperCase().split("").map(n=>127397+n.charCodeAt(0));return String.fromCodePoint(...e)},v8=({data:t})=>{if(!t||t.length===0)return l.jsx("div",{className:"h-40 flex items-center justify-center text-slate-300",children:"No Data"});const e=150,n=600,r=20,s=Math.max(...t.map(o=>o.visitors),10),i=t.map((o,a)=>{const u=r+a/(t.length-1)*(n-2*r),c=e-r-o.visitors/s*(e-2*r);return`${u},${c}`}).join(" ");return l.jsxs("div",{className:"w-full overflow-hidden",children:[l.jsxs("svg",{viewBox:`0 0 ${n} ${e}`,className:"w-full h-auto",children:[l.jsx("line",{x1:r,y1:r,x2:n-r,y2:r,stroke:"#f1f5f9",strokeWidth:"1"}),l.jsx("line",{x1:r,y1:e/2,x2:n-r,y2:e/2,stroke:"#f1f5f9",strokeWidth:"1"}),l.jsx("line",{x1:r,y1:e-r,x2:n-r,y2:e-r,stroke:"#f1f5f9",strokeWidth:"1"}),l.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"3",points:i,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((o,a)=>{const u=r+a/(t.length-1)*(n-2*r),c=e-r-o.visitors/s*(e-2*r);return l.jsxs("g",{className:"group",children:[l.jsx("circle",{cx:u,cy:c,r:"4",fill:"white",stroke:"#3b82f6",strokeWidth:"2"}),l.jsx("foreignObject",{x:u-25,y:c-40,width:"50",height:"30",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx("div",{className:"bg-slate-800 text-white text-[9px] rounded py-1 text-center font-bold",children:o.visitors})})]},a)})]}),l.jsx("div",{className:"flex justify-between px-2 mt-2 text-[10px] text-slate-400 font-medium",children:t.map((o,a)=>l.jsx("span",{children:o.date.slice(5)},a))})]})},x8=()=>{const[t,e]=j.useState(!0),[n,r]=j.useState(null),[s,i]=j.useState([]),o=async()=>{e(!0);const[m,g]=await Promise.all([uj(),oj()]);r(m),i(g),e(!1)};j.useEffect(()=>{o()},[]);const a=m=>new Date(m).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});if(t)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"})});if(!n)return l.jsx("div",{className:"p-10 text-center",children:"Failed to load data."});const u=n.dailyStats.length>0?n.dailyStats[n.dailyStats.length-1].visitors:0,c=n.dailyStats.length>1?n.dailyStats[n.dailyStats.length-2].visitors:0,d=c===0?100:Math.round((u-c)/c*100);return l.jsx("div",{className:"min-h-screen bg-slate-50 p-6 md:p-10 animate-fade-in",children:l.jsxs("div",{className:"max-w-7xl mx-auto",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-10 gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Dashboard Overview"}),l.jsx("p",{className:"text-slate-500",children:"Real-time insight & system health."})]}),l.jsxs("button",{onClick:o,className:"bg-white border border-slate-200 text-slate-600 px-4 py-2 rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-slate-50 hover:text-slate-900 transition-colors shadow-sm",children:[l.jsx(rh,{className:"w-4 h-4"})," Refresh Data"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[l.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-2xl",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),d!==0&&l.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1 ${d>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[d>0?l.jsx(xT,{className:"w-3 h-3"}):l.jsx(wT,{className:"w-3 h-3"}),Math.abs(d),"%"]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-3xl font-black text-slate-900",children:n.totalVisitors}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Total Visitors (7 Days)"})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[l.jsx("div",{className:"flex justify-between items-start",children:l.jsx("div",{className:"p-3 bg-slate-900 text-white rounded-2xl",children:l.jsx(pd,{className:"w-6 h-6"})})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-3xl font-black text-slate-900",children:s.length}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Private Messages"})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col justify-between h-40",children:[l.jsx("div",{className:"flex justify-between items-start",children:l.jsx("div",{className:"p-3 bg-red-50 text-red-600 rounded-2xl",children:l.jsx(ou,{className:"w-6 h-6"})})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-3xl font-black text-slate-900",children:n.totalErrors}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"System Errors (7 Days)"})]})]})]}),l.jsx("div",{className:"mb-10",children:l.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden",children:[l.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between",children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[l.jsx(pd,{className:"w-5 h-5 text-slate-900"})," Inbox Rahasia (Private)"]}),l.jsx("span",{className:"text-xs font-bold bg-slate-200 text-slate-600 px-2 py-1 rounded-full",children:s.length})]}),l.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:s.length===0?l.jsx("div",{className:"p-12 text-center text-slate-400 text-sm",children:"Belum ada pesan rahasia masuk."}):l.jsx("div",{className:"divide-y divide-slate-50",children:s.map(m=>l.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[l.jsx("div",{className:"flex justify-between items-start mb-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold bg-slate-900 text-white px-2 py-0.5 rounded",children:"Anonim"}),l.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:a(m.timestamp)})]})}),l.jsx("p",{className:"text-slate-700 text-sm leading-relaxed whitespace-pre-wrap",children:m.content})]},m.id))})})]})}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[l.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Traffic Trend"}),l.jsx(v8,{data:n.dailyStats})]}),l.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"System Logs"}),l.jsx("div",{className:"space-y-4",children:n.logs.length===0?l.jsx("p",{className:"text-slate-400 text-sm italic",children:"No logs recorded."}):n.logs.map(m=>l.jsxs("div",{className:"flex gap-4 items-start p-3 hover:bg-slate-50 rounded-xl transition-colors border-b border-slate-50 last:border-0",children:[l.jsx("div",{className:`w-2 h-2 rounded-full mt-2 shrink-0 ${m.type==="error"?"bg-red-500":"bg-blue-500"}`}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-bold text-slate-800 truncate",children:m.message}),l.jsx("p",{className:"text-xs text-slate-500 font-mono mt-1",children:new Date(m.timestamp).toLocaleString()}),m.details&&l.jsx("p",{className:"text-xs text-slate-400 mt-1 truncate",children:m.details})]})]},m.id))})]})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[l.jsx(hd,{className:"w-5 h-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Demographics"})]}),l.jsx("div",{className:"space-y-5",children:n.geoStats.length===0?l.jsx("p",{className:"text-slate-400 text-sm italic",children:"No data yet."}):n.geoStats.map((m,g)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-700 mb-2",children:[l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg",children:y8(m.country)})," ",m.country]}),l.jsx("span",{children:m.count})]}),l.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2 overflow-hidden",children:l.jsx("div",{className:"bg-slate-900 h-2 rounded-full",style:{width:`${m.count/n.totalVisitors*100}%`}})})]},g))})]}),l.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2rem] text-white shadow-xl relative overflow-hidden",children:[l.jsxs("div",{className:"relative z-10",children:[l.jsx("h3",{className:"text-lg font-bold mb-2",children:"System Status"}),l.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[l.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),l.jsx("span",{className:"text-sm text-slate-400 font-medium",children:"All Systems Operational"})]}),l.jsxs("div",{className:"space-y-2 text-xs text-slate-500",children:[l.jsx("p",{children:"Database: Connected"}),l.jsx("p",{children:"API Latency: ~120ms"}),l.jsx("p",{children:"Version: v2.4.0 (Beta)"})]})]}),l.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-blue-600/20 rounded-full blur-3xl pointer-events-none"})]})]})]})]})})},gk=({onClose:t})=>{const e=rs();j.useEffect(()=>{t||window.scrollTo(0,0)},[t]);const n=()=>{t?t():e(-1)};return l.jsx("div",{className:`bg-white text-slate-900 pb-20 pt-12 min-h-full ${t?"":"min-h-screen animate-fade-in"}`,children:l.jsxs("div",{className:"max-w-3xl mx-auto px-6",children:[l.jsxs("button",{onClick:n,className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[l.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:t?l.jsx(Xn,{className:"w-4 h-4"}):l.jsx(Nr,{className:"w-4 h-4"})}),t?"Tutup":"Kembali"]}),l.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-2 tracking-tight",children:"Kebijakan Privasi"}),l.jsxs("p",{className:"text-slate-500 text-lg font-medium mb-12",children:["Terakhir diperbarui: ",new Date().getFullYear()]}),l.jsxs("div",{className:"prose prose-slate max-w-none prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-600 prose-p:leading-relaxed",children:[l.jsxs("p",{children:["Selamat datang di ",l.jsx("strong",{children:"Fanra AI Studio"})," (irfanrizkiaditri.site). Kami menghargai privasi Anda. Kebijakan ini menjelaskan bagaimana kami mengelola data Anda saat Anda menggunakan fitur portfolio, chat AI, dan alat pengeditan gambar di situs ini."]}),l.jsx("h3",{children:"1. Data yang Kami Kumpulkan"}),l.jsx("p",{children:"Kami mengumpulkan informasi seminimal mungkin untuk memastikan fitur berjalan lancar:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Autentikasi (Google Login):"})," Saat Anda login, kami menyimpan Nama, Email, Foto Profil, dan User ID (UID) yang disediakan oleh Google melalui Firebase Authentication. Kami tidak memiliki akses ke password Anda."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"API Key Pribadi:"})," Jika Anda memasukkan API Key sendiri (misalnya Google Gemini API Key atau Remove.bg API Key), key tersebut disimpan secara terenkripsi di penyimpanan lokal browser Anda (LocalStorage) atau di database pribadi yang hanya bisa diakses oleh akun Anda."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Konten Pengguna:"}),' Pesan yang Anda kirim ke "Public Wall" bersifat publik. Riwayat chat AI disimpan secara pribadi di database akun Anda.']}),l.jsxs("li",{children:[l.jsx("strong",{children:"File Gambar:"})," Gambar yang Anda unggah untuk fitur editing (Hapus Background, Upscale, dll) diproses sementara melalui API pihak ketiga (seperti Google Gemini Vision atau Remove.bg) dan tidak disimpan secara permanen di server kami setelah pemrosesan selesai, kecuali Anda menyimpannya ke galeri pribadi (jika fitur tersedia)."]})]}),l.jsx("h3",{children:"2. Penggunaan Data"}),l.jsx("p",{children:"Informasi yang dikumpulkan digunakan semata-mata untuk:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[l.jsx("li",{children:"Memungkinkan Anda mengakses fitur interaktif (Chatbot, Image Editing)."}),l.jsx("li",{children:"Menyimpan preferensi dan riwayat aktivitas Anda agar tidak hilang saat Anda kembali."}),l.jsx("li",{children:"Memantau performa website dan mencegah penyalahgunaan sistem (spam/bot)."})]}),l.jsx("h3",{children:"3. Layanan Pihak Ketiga"}),l.jsx("p",{children:"Website ini terhubung dengan layanan pihak ketiga untuk berfungsi. Data Anda mungkin diproses oleh layanan berikut sesuai kebijakan privasi mereka masing-masing:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Google Firebase:"})," Untuk autentikasi, database, dan hosting."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Google Generative AI (Gemini):"})," Untuk memproses percakapan chat dan analisis gambar."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Remove.bg / Supabase:"})," Untuk fitur penghapusan latar belakang gambar."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Spotify:"})," Untuk fitur pemutar musik (Music Player)."]})]}),l.jsx("h3",{children:"4. Keamanan API Key"}),l.jsxs("p",{children:["Kami memahami bahwa API Key adalah aset berharga. Platform ini didesain agar API Key yang Anda masukkan ",l.jsx("strong",{children:"hanya digunakan untuk sesi Anda sendiri"}),". Kami tidak menggunakan API Key Anda untuk kepentingan pengguna lain atau kepentingan pengembang. Namun, Anda bertanggung jawab penuh untuk menjaga kerahasiaan perangkat Anda."]}),l.jsx("h3",{children:"5. Cookies & Penyimpanan Lokal"}),l.jsxs("p",{children:["Kami menggunakan ",l.jsx("em",{children:"Local Storage"})," dan ",l.jsx("em",{children:"Cookies"})," browser untuk menyimpan pengaturan tema, status login, dan API Key Anda agar Anda tidak perlu memasukkannya berulang kali. Anda dapat menghapus data ini kapan saja melalui pengaturan browser (Clear Cache)."]}),l.jsx("h3",{children:"6. Perubahan Kebijakan"}),l.jsx("p",{children:"Kebijakan privasi ini dapat berubah seiring dengan penambahan fitur baru pada website. Perubahan signifikan akan diinformasikan melalui notifikasi di dalam website."})]}),l.jsx("div",{className:"mt-12 pt-8 border-t border-slate-200",children:l.jsxs("p",{className:"text-sm text-slate-400",children:["Jika ada pertanyaan mengenai privasi data Anda, silakan hubungi pengembang melalui email: ",l.jsx("a",{href:"mailto:irfanrizkiaditri@gmail.com",className:"text-blue-600 hover:underline",children:"irfanrizkiaditri@gmail.com"})]})})]})})},yk=({onClose:t})=>{const e=rs();j.useEffect(()=>{t||window.scrollTo(0,0)},[t]);const n=()=>{t?t():e(-1)};return l.jsx("div",{className:`bg-white text-slate-900 pb-20 pt-12 min-h-full ${t?"":"min-h-screen animate-fade-in"}`,children:l.jsxs("div",{className:"max-w-3xl mx-auto px-6",children:[l.jsxs("button",{onClick:n,className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[l.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:t?l.jsx(Xn,{className:"w-4 h-4"}):l.jsx(Nr,{className:"w-4 h-4"})}),t?"Tutup":"Kembali"]}),l.jsx("h1",{className:"text-4xl md:text-5xl font-black mb-2 tracking-tight",children:"Syarat & Ketentuan"}),l.jsxs("p",{className:"text-slate-500 text-lg font-medium mb-12",children:["Berlaku Efektif: ",new Date().getFullYear()]}),l.jsxs("div",{className:"prose prose-slate max-w-none prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-600 prose-p:leading-relaxed",children:[l.jsxs("p",{children:["Dengan mengakses dan menggunakan situs web ",l.jsx("strong",{children:"Irfan Rizki Aditri (irfanrizkiaditri.site)"})," serta fitur ",l.jsx("strong",{children:"Fanra AI Studio"})," di dalamnya, Anda setuju untuk mematuhi syarat dan ketentuan berikut."]}),l.jsx("h3",{children:"1. Penggunaan Wajar"}),l.jsx("p",{children:"Situs ini adalah proyek personal yang mencakup portfolio dan alat eksperimental (AI Tools). Anda diizinkan menggunakan fitur yang tersedia untuk tujuan personal, edukasi, dan non-komersial. Dilarang keras melakukan:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[l.jsxs("li",{children:["Upaya peretasan, ",l.jsx("em",{children:"spamming"}),", atau membebani server secara sengaja (DDoS)."]}),l.jsx("li",{children:'Mengunggah konten ilegal, pornografi, atau ujaran kebencian di fitur "Public Wall" atau saat memproses gambar.'}),l.jsx("li",{children:"Mencoba merekayasa balik (reverse engineer) kode sumber aplikasi ini untuk tujuan jahat."})]}),l.jsx("h3",{children:"2. Penafian Hasil AI (AI Disclaimer)"}),l.jsx("p",{children:"Fitur Chatbot dan Pengolahan Gambar di situs ini menggunakan teknologi Kecerdasan Buatan (Google Gemini). Harap diperhatikan:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[l.jsx("li",{children:'AI dapat membuat kesalahan atau memberikan informasi yang tidak akurat ("Halusinasi AI").'}),l.jsx("li",{children:"Jangan gunakan saran medis, hukum, atau finansial dari AI ini sebagai acuan mutlak."}),l.jsx("li",{children:"Kami tidak bertanggung jawab atas kerugian yang timbul akibat penggunaan informasi yang dihasilkan oleh AI."})]}),l.jsx("h3",{children:"3. Penggunaan API Key Mandiri"}),l.jsx("p",{children:"Fitur tertentu memungkinkan Anda memasukkan API Key pribadi (BYOK - Bring Your Own Key). Dengan menggunakan fitur ini:"}),l.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-slate-600",children:[l.jsx("li",{children:"Anda bertanggung jawab penuh atas penggunaan kuota, biaya (billing), dan keamanan API Key Anda sendiri di platform penyedia (Google Cloud, Remove.bg, dll)."}),l.jsx("li",{children:"Fanra AI Studio tidak bertanggung jawab atas tagihan yang muncul akibat kelalaian Anda dalam mengelola API Key."})]}),l.jsx("h3",{children:"4. Konten Pengguna (Public Wall)"}),l.jsx("p",{children:'Pesan yang Anda kirimkan ke fitur "Public Wall" dapat dilihat oleh siapa saja. Kami berhak (namun tidak berkewajiban) untuk menghapus pesan yang mengandung unsur SARA, promosi spam, atau konten yang tidak pantas tanpa pemberitahuan sebelumnya.'}),l.jsx("h3",{children:"5. Hak Kekayaan Intelektual"}),l.jsxs("p",{children:["Seluruh desain antarmuka, logo, kode program, dan konten tulisan (Blog) di situs ini adalah hak cipta milik ",l.jsx("strong",{children:"Irfan Rizki Aditri"}),", kecuali dinyatakan lain (seperti library open-source atau aset pihak ketiga). Anda tidak diperkenankan menyalin atau menduplikasi situs ini untuk tujuan komersial tanpa izin tertulis."]}),l.jsx("h3",{children:"6. Batasan Tanggung Jawab"}),l.jsxs("p",{children:['Layanan ini disediakan "sebagaimana adanya" (as is). Pengembang tidak memberikan jaminan bahwa layanan akan selalu aktif tanpa gangguan (uptime 100%) atau bebas dari ',l.jsx("em",{children:"bug"}),". Penggunaan situs ini sepenuhnya merupakan risiko pengguna."]}),l.jsx("h3",{children:"7. Perubahan Ketentuan"}),l.jsx("p",{children:"Kami dapat merevisi syarat dan ketentuan ini sewaktu-waktu. Dengan terus menggunakan situs ini setelah perubahan dilakukan, Anda dianggap menyetujui ketentuan yang baru."})]})]})})},w8=({onLogout:t})=>{const e=rs(),[n,r]=j.useState(!1),[s,i]=j.useState({x:20,y:window.innerHeight-80}),[o,a]=j.useState(!1),u=j.useRef({x:0,y:0}),c=j.useRef({x:0,y:0}),d=j.useRef(null);j.useEffect(()=>{const v=T=>{if(!o)return;T.preventDefault();const R=T.clientX-u.current.x,L=T.clientY-u.current.y,U=Math.max(10,Math.min(window.innerWidth-60,c.current.x+R)),S=Math.max(10,Math.min(window.innerHeight-60,c.current.y+L));i({x:U,y:S})},b=()=>{a(!1)};return o&&(window.addEventListener("mousemove",v),window.addEventListener("mouseup",b)),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",b)}},[o]);const m=v=>{n||(a(!0),u.current={x:v.clientX,y:v.clientY},c.current={...s})},g=v=>{n||(a(!0),u.current={x:v.touches[0].clientX,y:v.touches[0].clientY},c.current={...s})},y=v=>{if(!o)return;const b=v.touches[0].clientX-u.current.x,T=v.touches[0].clientY-u.current.y,R=Math.max(10,Math.min(window.innerWidth-60,c.current.x+b)),L=Math.max(10,Math.min(window.innerHeight-60,c.current.y+T));i({x:R,y:L})},w=v=>{Math.sqrt(Math.pow(v.clientX-u.current.x,2)+Math.pow(v.clientY-u.current.y,2))<5&&r(!n)},x=()=>{ow(),alert("Cache teks di memori telah dihapus. Halaman akan dimuat ulang."),window.location.reload()},_=()=>{confirm("Yakin ingin reset total? Ini akan menghapus semua pengaturan lokal dan login.")&&(localStorage.clear(),ow(),window.location.reload())};return l.jsxs(l.Fragment,{children:[n&&l.jsx("div",{className:"fixed inset-0 z-[998]",onClick:()=>r(!1)}),l.jsx("div",{className:"fixed z-[999]",style:{left:s.x,top:s.y},children:l.jsxs("div",{className:"relative",children:[l.jsx("button",{onMouseDown:m,onClick:w,onTouchStart:g,onTouchMove:y,onTouchEnd:()=>a(!1),className:`w-12 h-12 rounded-full flex items-center justify-center shadow-xl transition-all duration-200 cursor-grab active:cursor-grabbing ${n?"bg-slate-900 text-white rotate-90 scale-110":"bg-white text-slate-700 border border-slate-200 hover:scale-105"}`,style:{touchAction:"none"},children:l.jsx(Op,{className:"w-6 h-6"})}),n&&l.jsxs("div",{ref:d,className:"absolute bottom-16 left-0 bg-white/90 backdrop-blur-md border border-slate-200 rounded-2xl shadow-2xl p-2 w-60 flex flex-col gap-1 animate-fade-in-up origin-bottom-left",children:[l.jsx("div",{className:"px-3 py-2 border-b border-slate-100 mb-1",children:l.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Admin Tools"})}),l.jsxs("button",{onClick:()=>{e("/dashboard"),r(!1)},className:"flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-900 hover:bg-slate-100 rounded-xl transition-colors text-left",children:[l.jsx("div",{className:"p-1.5 bg-slate-200 text-slate-700 rounded-lg",children:l.jsx(ST,{className:"w-3.5 h-3.5"})}),l.jsxs("div",{children:[l.jsx("span",{className:"block font-bold text-xs",children:"Open Dashboard"}),l.jsx("span",{className:"block text-[9px] text-slate-400",children:"View analytics & charts"})]})]}),l.jsx("div",{className:"h-px bg-slate-100 mx-2 my-1"}),l.jsxs("button",{onClick:x,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 hover:text-blue-600 rounded-xl transition-colors text-left",children:[l.jsx("div",{className:"p-1.5 bg-blue-50 text-blue-500 rounded-lg",children:l.jsx(rh,{className:"w-3.5 h-3.5"})}),l.jsxs("div",{children:[l.jsx("span",{className:"block font-bold text-xs",children:"Hapus Cache"}),l.jsx("span",{className:"block text-[9px] text-slate-400",children:"Fix teks nyangkut"})]})]}),l.jsxs("button",{onClick:_,className:"flex items-center gap-3 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-red-50 hover:text-red-600 rounded-xl transition-colors text-left",children:[l.jsx("div",{className:"p-1.5 bg-red-50 text-red-500 rounded-lg",children:l.jsx(Jr,{className:"w-3.5 h-3.5"})}),l.jsxs("div",{children:[l.jsx("span",{className:"block font-bold text-xs",children:"Reset Total"}),l.jsx("span",{className:"block text-[9px] text-slate-400",children:"Hapus data lokal"})]})]})]})]})})]})},_8="https://cdn-icons-png.flaticon.com/128/16739/16739754.png",b8=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!1),[s,i]=j.useState(""),o=j.useRef(null),a=j.useRef(null);return j.useEffect(()=>{const u=c=>{const d=c.detail.message;e(m=>m[m.length-1]===d?m:[...m,d])};return window.addEventListener("fanra-toast",u),()=>window.removeEventListener("fanra-toast",u)},[]),j.useEffect(()=>{if(!n&&t.length>0&&!s){const u=t[0];i(u),requestAnimationFrame(()=>{r(!0)}),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{r(!1)},3e3)}},[t,n,s]),j.useEffect(()=>{!n&&s&&(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{e(u=>u.slice(1)),i("")},700))},[n,s]),j.useEffect(()=>()=>{o.current&&clearTimeout(o.current),a.current&&clearTimeout(a.current)},[]),s?l.jsx("div",{className:"fixed top-0 left-0 right-0 z-[9999] flex justify-center pointer-events-none p-4",children:l.jsxs("div",{className:`
            bg-white/90 backdrop-blur-md 
            border border-slate-200 
            shadow-[0_8px_30px_rgb(0,0,0,0.12)] 
            rounded-full 
            pl-3 pr-6 py-3
            flex items-center gap-4
            min-w-[280px] max-w-[90vw] 
            pointer-events-auto 
            transform transition-all duration-700 cubic-bezier(0.23, 1, 0.32, 1)
            will-change-transform
            ${n?"translate-y-4 opacity-100":"-translate-y-[200%] opacity-0"}
        `,children:[l.jsx("div",{className:"w-10 h-10 bg-slate-50 rounded-full flex items-center justify-center shrink-0 shadow-inner border border-slate-100",children:l.jsx("img",{src:_8,alt:"Notif",className:"w-6 h-6 object-contain"})}),l.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[l.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"Fanra Studio"}),l.jsx("p",{className:"text-sm font-bold text-slate-800 leading-tight truncate",children:s})]})]})}):null},E8=({type:t,onClose:e})=>{const[n,r]=j.useState(!1);j.useEffect(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{r(!0)})})},[]);const s=()=>{r(!1),setTimeout(()=>{e()},500)};return l.jsxs("div",{className:"fixed inset-0 z-[200] flex items-end justify-center pointer-events-none",children:[l.jsx("div",{className:`fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity duration-500 ease-in-out pointer-events-auto ${n?"opacity-100":"opacity-0"}`,onClick:s}),l.jsxs("div",{className:`
                    w-full h-[95vh] md:h-[90vh] bg-white rounded-t-[2.5rem] shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.2)] 
                    overflow-hidden transform transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1) pointer-events-auto relative
                    ${n?"translate-y-0":"translate-y-full"}
                `,children:[l.jsx("div",{className:"absolute top-0 left-0 right-0 h-8 flex justify-center pt-3 z-20 bg-white cursor-pointer",onClick:s,children:l.jsx("div",{className:"w-12 h-1.5 bg-slate-200 rounded-full"})}),l.jsxs("div",{className:"h-full overflow-y-auto custom-scrollbar pt-4",children:[t==="privacy"&&l.jsx(gk,{onClose:s}),t==="terms"&&l.jsx(yk,{onClose:s})]})]})]})},T8=({isOpen:t,onClose:e,onSuccess:n})=>{const[r,s]=j.useState(["","","","",""]),[i,o]=j.useState(!1),a=j.useRef([]);j.useEffect(()=>{t&&(s(["","","","",""]),o(!1),setTimeout(()=>{var d;return(d=a.current[0])==null?void 0:d.focus()},100))},[t]);const u=(d,m)=>{var y;if(!/^\d*$/.test(m))return;const g=[...r];g[d]=m,s(g),o(!1),m&&d<4&&((y=a.current[d+1])==null||y.focus()),g.every(w=>w!=="")&&(g.join("")==="47326"?(n(),e()):(o(!0),setTimeout(()=>{var x;s(["","","","",""]),(x=a.current[0])==null||x.focus()},500)))},c=(d,m)=>{var g;m.key==="Backspace"&&!r[d]&&d>0&&((g=a.current[d-1])==null||g.focus())};return t?l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/80 backdrop-blur-sm p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-2xl max-w-sm w-full relative overflow-hidden",children:[l.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-800",children:""}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"w-12 h-12 bg-slate-900 rounded-full flex items-center justify-center text-white mb-6 shadow-lg shadow-slate-900/30",children:l.jsx(zl,{className:"w-5 h-5"})}),l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Admin Access"}),l.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Enter secure PIN to continue"}),l.jsx("div",{className:"flex gap-3 mb-6",children:r.map((d,m)=>l.jsx("input",{ref:g=>{a.current[m]=g},type:"password",maxLength:1,value:d,onChange:g=>u(m,g.target.value),onKeyDown:g=>c(m,g),className:`w-10 h-12 border-2 rounded-lg text-center text-xl font-bold bg-slate-50 focus:bg-white transition-all outline-none ${i?"border-red-500 text-red-500 shake":"border-slate-200 focus:border-slate-900 text-slate-900"}`,autoComplete:"off",inputMode:"numeric"},m))}),i&&l.jsx("p",{className:"text-xs font-bold text-red-500 animate-pulse",children:"Access Denied"})]})]})}):null},Tr=({children:t,isAdmin:e,onOpenPrivacy:n,onOpenTerms:r})=>l.jsxs("div",{className:"min-h-screen flex flex-col font-sans bg-[#fafafa] relative overflow-x-hidden",children:[l.jsx(hj,{isAdmin:e}),l.jsx("main",{className:"flex-grow pt-24 pb-12 animate-fade-in-up",children:t}),l.jsx(Tj,{}),l.jsx(Ij,{}),l.jsxs("footer",{className:"bg-slate-950 text-white pt-32 pb-12 px-6 overflow-hidden relative mt-12",children:[l.jsx("div",{className:"absolute inset-0 z-0 opacity-20 pointer-events-none mix-blend-overlay",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),l.jsx("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"20px 20px",maskImage:"linear-gradient(to bottom, transparent, black)"}}),l.jsx("div",{className:"absolute top-0 left-0 w-full overflow-hidden leading-[0] z-20",children:l.jsx("svg",{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",className:"relative block w-full h-[50px] md:h-[90px] fill-[#fafafa]",children:l.jsx("path",{d:"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"})})}),l.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16",children:[l.jsxs("div",{className:"lg:col-span-2",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx(Bl,{className:"w-12 h-12",variant:"light"}),l.jsx(mt,{id:"footer_brand_name",defaultText:"Irfan Rizki Aditri",isAdmin:e,tag:"h2",className:"text-2xl font-black tracking-tighter uppercase"})]}),l.jsx(mt,{id:"footer_brand_desc",defaultText:"Seorang mahasiswa ITERA angkatan 2025 yang hobi mengulik kode dan berbagi cerita lewat ruang digital.",isAdmin:e,tag:"p",multiline:!0,className:"text-slate-500 text-sm max-w-sm leading-relaxed font-medium"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Communication"}),l.jsxs("a",{href:"mailto:irfanrizkiaditri@gmail.com",className:"text-sm font-bold text-slate-200 hover:text-white transition-colors flex items-center gap-3 group",children:[l.jsx(IN,{className:"w-5 h-5 group-hover:scale-110 transition-transform text-slate-400 group-hover:text-white"}),l.jsx(mt,{id:"footer_email",defaultText:"irfanrizkiaditri@gmail.com",isAdmin:e,tag:"span"})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Social Discovery"}),l.jsxs("div",{className:"flex gap-6",children:[l.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:l.jsx(EN,{className:"w-6 h-6"})}),l.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:l.jsx(TN,{className:"w-6 h-6"})}),l.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:l.jsx(kT,{className:"w-6 h-6"})})]})]})]}),l.jsxs("div",{className:"pt-8 border-t border-slate-900 flex flex-col md:flex-row justify-between items-center gap-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 md:gap-8",children:[l.jsxs("p",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:[" ",new Date().getFullYear(),"  ",l.jsx(mt,{id:"footer_copyright",defaultText:"PERSPECTIVE OF FANRA",isAdmin:e,tag:"span"})]}),l.jsxs("div",{className:"flex gap-6",children:[l.jsx("button",{onClick:n,className:"text-[9px] font-bold text-slate-500 hover:text-white uppercase tracking-widest transition-colors",children:"Privacy Policy"}),l.jsx("button",{onClick:r,className:"text-[9px] font-bold text-slate-500 hover:text-white uppercase tracking-widest transition-colors",children:"Terms of Service"})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsx("span",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:l.jsx(mt,{id:"footer_location",defaultText:"Sumatera, Indonesia",isAdmin:e,tag:"span"})})})]})]}),l.jsx("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] opacity-[0.02] pointer-events-none translate-x-20 -translate-y-20",children:l.jsx(Bl,{className:"w-full h-full",variant:"light"})})]})]}),I8=()=>{const{pathname:t}=gi();return j.useEffect(()=>{t==="/privacy"||t==="/terms"||window.scrollTo(0,0)},[t]),null},S8=()=>{const t=gi(),e=rs(),n=t.state,r=(n==null?void 0:n.background)||t,s=t.pathname==="/privacy"&&(n==null?void 0:n.background),i=t.pathname==="/terms"&&(n==null?void 0:n.background),o=s||i,[a,u]=j.useState(!0),[c,d]=j.useState(!1),[m,g]=j.useState(!1);j.useEffect(()=>{lj(),localStorage.removeItem("fanra_admin_auth")},[]),j.useEffect(()=>{const T=R=>{if(R.key.toLowerCase()==="f"){const L=R.target;if(L.tagName==="INPUT"||L.tagName==="TEXTAREA"||L.tagName==="SELECT"||L.isContentEditable)return;R.preventDefault(),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(S=>{console.error(`Error attempting to enable fullscreen: ${S.message}`)})}};return window.addEventListener("keydown",T),()=>{window.removeEventListener("keydown",T)}},[]);const y=()=>{window.scrollTo(0,0),u(!1)},w=()=>{g(!0)},x=()=>{e("/privacy",{state:{background:t}})},_=()=>{e("/terms",{state:{background:t}})},v=()=>{e(-1)},b={isAdmin:m,onOpenPrivacy:x,onOpenTerms:_};return l.jsxs(l.Fragment,{children:[l.jsx(I8,{}),l.jsx(b8,{}),l.jsx(T8,{isOpen:c,onClose:()=>d(!1),onSuccess:w}),m&&l.jsx(w8,{onLogout:()=>g(!1)}),l.jsxs(WA,{location:r,children:[l.jsx(Tn,{path:"/",element:l.jsx(Tr,{...b,children:l.jsx(vj,{onTriggerAdmin:()=>d(!0),isAdmin:m})})}),l.jsx(Tn,{path:"/projects",element:l.jsx(Tr,{...b,children:l.jsx(uw,{isAdmin:m})})}),l.jsx(Tn,{path:"/projects/:projectId",element:l.jsx(Tr,{...b,children:l.jsx(uw,{isAdmin:m})})}),l.jsx(Tn,{path:"/blog",element:l.jsx(Tr,{...b,children:l.jsx(cw,{isAdmin:m})})}),l.jsx(Tn,{path:"/blog/:id",element:l.jsx(Tr,{...b,children:l.jsx(cw,{isAdmin:m})})}),l.jsx(Tn,{path:"/gallery",element:l.jsx(Tr,{...b,children:l.jsx(_j,{isAdmin:m})})}),l.jsx(Tn,{path:"/music",element:l.jsx(Tr,{...b,children:l.jsx(bj,{isAdmin:m})})}),l.jsx(Tn,{path:"/messages",element:l.jsx(Tr,{...b,children:l.jsx(Ej,{isAdmin:m})})}),l.jsx(Tn,{path:"/dashboard",element:l.jsx(Tr,{...b,children:l.jsx(x8,{})})}),l.jsx(Tn,{path:"/studio",element:l.jsx(d8,{isAdmin:m,onExit:()=>window.location.href="/#/projects"})}),l.jsx(Tn,{path:"/panorama",element:l.jsx(g8,{onExit:()=>window.location.href="/#/projects"})}),l.jsx(Tn,{path:"/privacy",element:l.jsx(Tr,{...b,children:l.jsx(gk,{})})}),l.jsx(Tn,{path:"/terms",element:l.jsx(Tr,{...b,children:l.jsx(yk,{})})}),l.jsx(Tn,{path:"*",element:l.jsx($A,{to:"/",replace:!0})})]}),o&&l.jsx(E8,{type:s?"privacy":"terms",onClose:v}),a&&l.jsx(gj,{onComplete:y,onTriggerAdmin:()=>d(!0)})]})},k8=()=>l.jsx(eN,{children:l.jsx(S8,{})}),vk=document.getElementById("root");if(!vk)throw new Error("Could not find root element to mount to");const C8=Hf.createRoot(vk);C8.render(l.jsx(_l.StrictMode,{children:l.jsx(k8,{})}));

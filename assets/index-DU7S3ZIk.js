(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ir=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xv={exports:{}},nc={},Zv={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fa=Symbol.for("react.element"),H1=Symbol.for("react.portal"),q1=Symbol.for("react.fragment"),$1=Symbol.for("react.strict_mode"),W1=Symbol.for("react.profiler"),K1=Symbol.for("react.provider"),J1=Symbol.for("react.context"),Y1=Symbol.for("react.forward_ref"),Q1=Symbol.for("react.suspense"),X1=Symbol.for("react.memo"),Z1=Symbol.for("react.lazy"),Ym=Symbol.iterator;function eS(t){return t===null||typeof t!="object"?null:(t=Ym&&t[Ym]||t["@@iterator"],typeof t=="function"?t:null)}var e_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},t_=Object.assign,n_={};function ao(t,e,n){this.props=t,this.context=e,this.refs=n_,this.updater=n||e_}ao.prototype.isReactComponent={};ao.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ao.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function r_(){}r_.prototype=ao.prototype;function If(t,e,n){this.props=t,this.context=e,this.refs=n_,this.updater=n||e_}var Cf=If.prototype=new r_;Cf.constructor=If;t_(Cf,ao.prototype);Cf.isPureReactComponent=!0;var Qm=Array.isArray,i_=Object.prototype.hasOwnProperty,kf={current:null},s_={key:!0,ref:!0,__self:!0,__source:!0};function o_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)i_.call(e,r)&&!s_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Fa,type:t,key:s,ref:o,props:i,_owner:kf.current}}function tS(t,e){return{$$typeof:Fa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Af(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fa}function nS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xm=/\/+/g;function sd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nS(""+t.key):e.toString(36)}function Hl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Fa:case H1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+sd(o,0):r,Qm(i)?(n="",t!=null&&(n=t.replace(Xm,"$&/")+"/"),Hl(i,e,n,"",function(u){return u})):i!=null&&(Af(i)&&(i=tS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Xm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Qm(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+sd(s,a);o+=Hl(s,e,n,l,i)}else if(l=eS(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+sd(s,a++),o+=Hl(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ml(t,e,n){if(t==null)return t;var r=[],i=0;return Hl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function rS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mn={current:null},ql={transition:null},iS={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:ql,ReactCurrentOwner:kf};function a_(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:ml,forEach:function(t,e,n){ml(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ml(t,function(){e++}),e},toArray:function(t){return ml(t,function(e){return e})||[]},only:function(t){if(!Af(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fe.Component=ao;Fe.Fragment=q1;Fe.Profiler=W1;Fe.PureComponent=If;Fe.StrictMode=$1;Fe.Suspense=Q1;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iS;Fe.act=a_;Fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=t_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=kf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)i_.call(e,l)&&!s_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Fa,type:t.type,key:i,ref:s,props:r,_owner:o}};Fe.createContext=function(t){return t={$$typeof:J1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:K1,_context:t},t.Consumer=t};Fe.createElement=o_;Fe.createFactory=function(t){var e=o_.bind(null,t);return e.type=t,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(t){return{$$typeof:Y1,render:t}};Fe.isValidElement=Af;Fe.lazy=function(t){return{$$typeof:Z1,_payload:{_status:-1,_result:t},_init:rS}};Fe.memo=function(t,e){return{$$typeof:X1,type:t,compare:e===void 0?null:e}};Fe.startTransition=function(t){var e=ql.transition;ql.transition={};try{t()}finally{ql.transition=e}};Fe.unstable_act=a_;Fe.useCallback=function(t,e){return mn.current.useCallback(t,e)};Fe.useContext=function(t){return mn.current.useContext(t)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(t){return mn.current.useDeferredValue(t)};Fe.useEffect=function(t,e){return mn.current.useEffect(t,e)};Fe.useId=function(){return mn.current.useId()};Fe.useImperativeHandle=function(t,e,n){return mn.current.useImperativeHandle(t,e,n)};Fe.useInsertionEffect=function(t,e){return mn.current.useInsertionEffect(t,e)};Fe.useLayoutEffect=function(t,e){return mn.current.useLayoutEffect(t,e)};Fe.useMemo=function(t,e){return mn.current.useMemo(t,e)};Fe.useReducer=function(t,e,n){return mn.current.useReducer(t,e,n)};Fe.useRef=function(t){return mn.current.useRef(t)};Fe.useState=function(t){return mn.current.useState(t)};Fe.useSyncExternalStore=function(t,e,n){return mn.current.useSyncExternalStore(t,e,n)};Fe.useTransition=function(){return mn.current.useTransition()};Fe.version="18.3.1";Zv.exports=Fe;var te=Zv.exports;const l_=Sf(te);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sS=te,oS=Symbol.for("react.element"),aS=Symbol.for("react.fragment"),lS=Object.prototype.hasOwnProperty,uS=sS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cS={key:!0,ref:!0,__self:!0,__source:!0};function u_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lS.call(e,r)&&!cS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:oS,type:t,key:s,ref:o,props:i,_owner:uS.current}}nc.Fragment=aS;nc.jsx=u_;nc.jsxs=u_;Xv.exports=nc;var h=Xv.exports,Wd={},c_={exports:{}},Bn={},d_={exports:{}},h_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,G){var ue=Z.length;Z.push(G);e:for(;0<ue;){var H=ue-1>>>1,j=Z[H];if(0<i(j,G))Z[H]=G,Z[ue]=j,ue=H;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var G=Z[0],ue=Z.pop();if(ue!==G){Z[0]=ue;e:for(var H=0,j=Z.length,re=j>>>1;H<re;){var de=2*(H+1)-1,le=Z[de],Me=de+1,Ye=Z[Me];if(0>i(le,ue))Me<j&&0>i(Ye,le)?(Z[H]=Ye,Z[Me]=ue,H=Me):(Z[H]=le,Z[de]=ue,H=de);else if(Me<j&&0>i(Ye,ue))Z[H]=Ye,Z[Me]=ue,H=Me;else break e}}return G}function i(Z,G){var ue=Z.sortIndex-G.sortIndex;return ue!==0?ue:Z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,g=null,m=3,y=!1,x=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Z){for(var G=n(u);G!==null;){if(G.callback===null)r(u);else if(G.startTime<=Z)r(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(u)}}function P(Z){if(_=!1,S(Z),!x)if(n(l)!==null)x=!0,pe(V);else{var G=n(u);G!==null&&ee(P,G.startTime-Z)}}function V(Z,G){x=!1,_&&(_=!1,v(R),R=-1),y=!0;var ue=m;try{for(S(G),g=n(l);g!==null&&(!(g.expirationTime>G)||Z&&!F());){var H=g.callback;if(typeof H=="function"){g.callback=null,m=g.priorityLevel;var j=H(g.expirationTime<=G);G=t.unstable_now(),typeof j=="function"?g.callback=j:g===n(l)&&r(l),S(G)}else r(l);g=n(l)}if(g!==null)var re=!0;else{var de=n(u);de!==null&&ee(P,de.startTime-G),re=!1}return re}finally{g=null,m=ue,y=!1}}var O=!1,A=null,R=-1,k=5,D=-1;function F(){return!(t.unstable_now()-D<k)}function N(){if(A!==null){var Z=t.unstable_now();D=Z;var G=!0;try{G=A(!0,Z)}finally{G?M():(O=!1,A=null)}}else O=!1}var M;if(typeof E=="function")M=function(){E(N)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,J=b.port2;b.port1.onmessage=N,M=function(){J.postMessage(null)}}else M=function(){T(N,0)};function pe(Z){A=Z,O||(O=!0,M())}function ee(Z,G){R=T(function(){Z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,pe(V))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Z){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var ue=m;m=G;try{return Z()}finally{m=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,G){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ue=m;m=Z;try{return G()}finally{m=ue}},t.unstable_scheduleCallback=function(Z,G,ue){var H=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?H+ue:H):ue=H,Z){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ue+j,Z={id:d++,callback:G,priorityLevel:Z,startTime:ue,expirationTime:j,sortIndex:-1},ue>H?(Z.sortIndex=ue,e(u,Z),n(l)===null&&Z===n(u)&&(_?(v(R),R=-1):_=!0,ee(P,ue-H))):(Z.sortIndex=j,e(l,Z),x||y||(x=!0,pe(V))),Z},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(Z){var G=m;return function(){var ue=m;m=G;try{return Z.apply(this,arguments)}finally{m=ue}}}})(h_);d_.exports=h_;var dS=d_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hS=te,Fn=dS;function he(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f_=new Set,da={};function ss(t,e){qs(t,e),qs(t+"Capture",e)}function qs(t,e){for(da[t]=e,t=0;t<e.length;t++)f_.add(e[t])}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kd=Object.prototype.hasOwnProperty,fS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zm={},eg={};function pS(t){return Kd.call(eg,t)?!0:Kd.call(Zm,t)?!1:fS.test(t)?eg[t]=!0:(Zm[t]=!0,!1)}function mS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gS(t,e,n,r){if(e===null||typeof e>"u"||mS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new gn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new gn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new gn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new gn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new gn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new gn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new gn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new gn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new gn(t,5,!1,t.toLowerCase(),null,!1,!1)});var bf=/[\-:]([a-z])/g;function Rf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bf,Rf);$t[e]=new gn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bf,Rf);$t[e]=new gn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bf,Rf);$t[e]=new gn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new gn(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new gn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Nf(t,e,n,r){var i=$t.hasOwnProperty(e)?$t[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gS(e,n,i,r)&&(n=null),r||i===null?pS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Br=hS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gl=Symbol.for("react.element"),Es=Symbol.for("react.portal"),Ts=Symbol.for("react.fragment"),Pf=Symbol.for("react.strict_mode"),Jd=Symbol.for("react.profiler"),p_=Symbol.for("react.provider"),m_=Symbol.for("react.context"),Mf=Symbol.for("react.forward_ref"),Yd=Symbol.for("react.suspense"),Qd=Symbol.for("react.suspense_list"),Df=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),g_=Symbol.for("react.offscreen"),tg=Symbol.iterator;function Ro(t){return t===null||typeof t!="object"?null:(t=tg&&t[tg]||t["@@iterator"],typeof t=="function"?t:null)}var mt=Object.assign,od;function jo(t){if(od===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);od=e&&e[1]||""}return`
`+od+t}var ad=!1;function ld(t,e){if(!t||ad)return"";ad=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ad=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jo(t):""}function yS(t){switch(t.tag){case 5:return jo(t.type);case 16:return jo("Lazy");case 13:return jo("Suspense");case 19:return jo("SuspenseList");case 0:case 2:case 15:return t=ld(t.type,!1),t;case 11:return t=ld(t.type.render,!1),t;case 1:return t=ld(t.type,!0),t;default:return""}}function Xd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ts:return"Fragment";case Es:return"Portal";case Jd:return"Profiler";case Pf:return"StrictMode";case Yd:return"Suspense";case Qd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case m_:return(t.displayName||"Context")+".Consumer";case p_:return(t._context.displayName||"Context")+".Provider";case Mf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Df:return e=t.displayName||null,e!==null?e:Xd(t.type)||"Memo";case Wr:e=t._payload,t=t._init;try{return Xd(t(e))}catch{}}return null}function vS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xd(e);case 8:return e===Pf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function y_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _S(t){var e=y_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yl(t){t._valueTracker||(t._valueTracker=_S(t))}function v_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=y_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function uu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zd(t,e){var n=e.checked;return mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ng(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function __(t,e){e=e.checked,e!=null&&Nf(t,"checked",e,!1)}function eh(t,e){__(t,e);var n=hi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?th(t,e.type,n):e.hasOwnProperty("defaultValue")&&th(t,e.type,hi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function th(t,e,n){(e!=="number"||uu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zo=Array.isArray;function Vs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function nh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(he(91));return mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ig(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(he(92));if(zo(n)){if(1<n.length)throw Error(he(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hi(n)}}function w_(t,e){var n=hi(e.value),r=hi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function x_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?x_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vl,E_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vl=vl||document.createElement("div"),vl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ha(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wS=["Webkit","ms","Moz","O"];Object.keys(Yo).forEach(function(t){wS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yo[e]=Yo[t]})});function T_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yo.hasOwnProperty(t)&&Yo[t]?(""+e).trim():e+"px"}function S_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=T_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xS=mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ih(t,e){if(e){if(xS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(he(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(he(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(he(61))}if(e.style!=null&&typeof e.style!="object")throw Error(he(62))}}function sh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oh=null;function Lf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ah=null,Fs=null,Us=null;function og(t){if(t=Oa(t)){if(typeof ah!="function")throw Error(he(280));var e=t.stateNode;e&&(e=ac(e),ah(t.stateNode,t.type,e))}}function I_(t){Fs?Us?Us.push(t):Us=[t]:Fs=t}function C_(){if(Fs){var t=Fs,e=Us;if(Us=Fs=null,og(t),e)for(t=0;t<e.length;t++)og(e[t])}}function k_(t,e){return t(e)}function A_(){}var ud=!1;function b_(t,e,n){if(ud)return t(e,n);ud=!0;try{return k_(t,e,n)}finally{ud=!1,(Fs!==null||Us!==null)&&(A_(),C_())}}function fa(t,e){var n=t.stateNode;if(n===null)return null;var r=ac(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(he(231,e,typeof n));return n}var lh=!1;if(Rr)try{var No={};Object.defineProperty(No,"passive",{get:function(){lh=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{lh=!1}function ES(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Qo=!1,cu=null,du=!1,uh=null,TS={onError:function(t){Qo=!0,cu=t}};function SS(t,e,n,r,i,s,o,a,l){Qo=!1,cu=null,ES.apply(TS,arguments)}function IS(t,e,n,r,i,s,o,a,l){if(SS.apply(this,arguments),Qo){if(Qo){var u=cu;Qo=!1,cu=null}else throw Error(he(198));du||(du=!0,uh=u)}}function os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function R_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ag(t){if(os(t)!==t)throw Error(he(188))}function CS(t){var e=t.alternate;if(!e){if(e=os(t),e===null)throw Error(he(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ag(i),t;if(s===r)return ag(i),e;s=s.sibling}throw Error(he(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?t:e}function N_(t){return t=CS(t),t!==null?P_(t):null}function P_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=P_(t);if(e!==null)return e;t=t.sibling}return null}var M_=Fn.unstable_scheduleCallback,lg=Fn.unstable_cancelCallback,kS=Fn.unstable_shouldYield,AS=Fn.unstable_requestPaint,wt=Fn.unstable_now,bS=Fn.unstable_getCurrentPriorityLevel,Vf=Fn.unstable_ImmediatePriority,D_=Fn.unstable_UserBlockingPriority,hu=Fn.unstable_NormalPriority,RS=Fn.unstable_LowPriority,L_=Fn.unstable_IdlePriority,rc=null,fr=null;function NS(t){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(rc,t,void 0,(t.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:DS,PS=Math.log,MS=Math.LN2;function DS(t){return t>>>=0,t===0?32:31-(PS(t)/MS|0)|0}var _l=64,wl=4194304;function Go(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Go(a):(s&=o,s!==0&&(r=Go(s)))}else o=n&~i,o!==0?r=Go(o):s!==0&&(r=Go(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tr(e),i=1<<n,r|=t[n],e&=~i;return r}function LS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-tr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=LS(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function ch(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function V_(){var t=_l;return _l<<=1,!(_l&4194240)&&(_l=64),t}function cd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ua(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tr(e),t[e]=n}function FS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-tr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ff(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var tt=0;function F_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var U_,Uf,B_,O_,j_,dh=!1,xl=[],ti=null,ni=null,ri=null,pa=new Map,ma=new Map,Jr=[],US="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ug(t,e){switch(t){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":pa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(e.pointerId)}}function Po(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Oa(e),e!==null&&Uf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function BS(t,e,n,r,i){switch(e){case"focusin":return ti=Po(ti,t,e,n,r,i),!0;case"dragenter":return ni=Po(ni,t,e,n,r,i),!0;case"mouseover":return ri=Po(ri,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return pa.set(s,Po(pa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ma.set(s,Po(ma.get(s)||null,t,e,n,r,i)),!0}return!1}function z_(t){var e=ji(t.target);if(e!==null){var n=os(e);if(n!==null){if(e=n.tag,e===13){if(e=R_(n),e!==null){t.blockedOn=e,j_(t.priority,function(){B_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $l(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);oh=r,n.target.dispatchEvent(r),oh=null}else return e=Oa(n),e!==null&&Uf(e),t.blockedOn=n,!1;e.shift()}return!0}function cg(t,e,n){$l(t)&&n.delete(e)}function OS(){dh=!1,ti!==null&&$l(ti)&&(ti=null),ni!==null&&$l(ni)&&(ni=null),ri!==null&&$l(ri)&&(ri=null),pa.forEach(cg),ma.forEach(cg)}function Mo(t,e){t.blockedOn===e&&(t.blockedOn=null,dh||(dh=!0,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,OS)))}function ga(t){function e(i){return Mo(i,t)}if(0<xl.length){Mo(xl[0],t);for(var n=1;n<xl.length;n++){var r=xl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ti!==null&&Mo(ti,t),ni!==null&&Mo(ni,t),ri!==null&&Mo(ri,t),pa.forEach(e),ma.forEach(e),n=0;n<Jr.length;n++)r=Jr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jr.length&&(n=Jr[0],n.blockedOn===null);)z_(n),n.blockedOn===null&&Jr.shift()}var Bs=Br.ReactCurrentBatchConfig,pu=!0;function jS(t,e,n,r){var i=tt,s=Bs.transition;Bs.transition=null;try{tt=1,Bf(t,e,n,r)}finally{tt=i,Bs.transition=s}}function zS(t,e,n,r){var i=tt,s=Bs.transition;Bs.transition=null;try{tt=4,Bf(t,e,n,r)}finally{tt=i,Bs.transition=s}}function Bf(t,e,n,r){if(pu){var i=hh(t,e,n,r);if(i===null)wd(t,e,r,mu,n),ug(t,r);else if(BS(i,t,e,n,r))r.stopPropagation();else if(ug(t,r),e&4&&-1<US.indexOf(t)){for(;i!==null;){var s=Oa(i);if(s!==null&&U_(s),s=hh(t,e,n,r),s===null&&wd(t,e,r,mu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wd(t,e,r,null,n)}}var mu=null;function hh(t,e,n,r){if(mu=null,t=Lf(r),t=ji(t),t!==null)if(e=os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=R_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mu=t,null}function G_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bS()){case Vf:return 1;case D_:return 4;case hu:case RS:return 16;case L_:return 536870912;default:return 16}default:return 16}}var Xr=null,Of=null,Wl=null;function H_(){if(Wl)return Wl;var t,e=Of,n=e.length,r,i="value"in Xr?Xr.value:Xr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Wl=i.slice(t,1<r?1-r:void 0)}function Kl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function El(){return!0}function dg(){return!1}function On(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?El:dg,this.isPropagationStopped=dg,this}return mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=El)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=El)},persist:function(){},isPersistent:El}),e}var lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jf=On(lo),Ba=mt({},lo,{view:0,detail:0}),GS=On(Ba),dd,hd,Do,ic=mt({},Ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Do&&(Do&&t.type==="mousemove"?(dd=t.screenX-Do.screenX,hd=t.screenY-Do.screenY):hd=dd=0,Do=t),dd)},movementY:function(t){return"movementY"in t?t.movementY:hd}}),hg=On(ic),HS=mt({},ic,{dataTransfer:0}),qS=On(HS),$S=mt({},Ba,{relatedTarget:0}),fd=On($S),WS=mt({},lo,{animationName:0,elapsedTime:0,pseudoElement:0}),KS=On(WS),JS=mt({},lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YS=On(JS),QS=mt({},lo,{data:0}),fg=On(QS),XS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eI[t])?!!e[t]:!1}function zf(){return tI}var nI=mt({},Ba,{key:function(t){if(t.key){var e=XS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zf,charCode:function(t){return t.type==="keypress"?Kl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rI=On(nI),iI=mt({},ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pg=On(iI),sI=mt({},Ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zf}),oI=On(sI),aI=mt({},lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),lI=On(aI),uI=mt({},ic,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cI=On(uI),dI=[9,13,27,32],Gf=Rr&&"CompositionEvent"in window,Xo=null;Rr&&"documentMode"in document&&(Xo=document.documentMode);var hI=Rr&&"TextEvent"in window&&!Xo,q_=Rr&&(!Gf||Xo&&8<Xo&&11>=Xo),mg=" ",gg=!1;function $_(t,e){switch(t){case"keyup":return dI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ss=!1;function fI(t,e){switch(t){case"compositionend":return W_(e);case"keypress":return e.which!==32?null:(gg=!0,mg);case"textInput":return t=e.data,t===mg&&gg?null:t;default:return null}}function pI(t,e){if(Ss)return t==="compositionend"||!Gf&&$_(t,e)?(t=H_(),Wl=Of=Xr=null,Ss=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return q_&&e.locale!=="ko"?null:e.data;default:return null}}var mI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mI[t.type]:e==="textarea"}function K_(t,e,n,r){I_(r),e=gu(e,"onChange"),0<e.length&&(n=new jf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zo=null,ya=null;function gI(t){sw(t,0)}function sc(t){var e=ks(t);if(v_(e))return t}function yI(t,e){if(t==="change")return e}var J_=!1;if(Rr){var pd;if(Rr){var md="oninput"in document;if(!md){var vg=document.createElement("div");vg.setAttribute("oninput","return;"),md=typeof vg.oninput=="function"}pd=md}else pd=!1;J_=pd&&(!document.documentMode||9<document.documentMode)}function _g(){Zo&&(Zo.detachEvent("onpropertychange",Y_),ya=Zo=null)}function Y_(t){if(t.propertyName==="value"&&sc(ya)){var e=[];K_(e,ya,t,Lf(t)),b_(gI,e)}}function vI(t,e,n){t==="focusin"?(_g(),Zo=e,ya=n,Zo.attachEvent("onpropertychange",Y_)):t==="focusout"&&_g()}function _I(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sc(ya)}function wI(t,e){if(t==="click")return sc(e)}function xI(t,e){if(t==="input"||t==="change")return sc(e)}function EI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sr=typeof Object.is=="function"?Object.is:EI;function va(t,e){if(sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Kd.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function wg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xg(t,e){var n=wg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wg(n)}}function Q_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Q_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function X_(){for(var t=window,e=uu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uu(t.document)}return e}function Hf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TI(t){var e=X_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Q_(n.ownerDocument.documentElement,n)){if(r!==null&&Hf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=xg(n,s);var o=xg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var SI=Rr&&"documentMode"in document&&11>=document.documentMode,Is=null,fh=null,ea=null,ph=!1;function Eg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ph||Is==null||Is!==uu(r)||(r=Is,"selectionStart"in r&&Hf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ea&&va(ea,r)||(ea=r,r=gu(fh,"onSelect"),0<r.length&&(e=new jf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Is)))}function Tl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Cs={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionend:Tl("Transition","TransitionEnd")},gd={},Z_={};Rr&&(Z_=document.createElement("div").style,"AnimationEvent"in window||(delete Cs.animationend.animation,delete Cs.animationiteration.animation,delete Cs.animationstart.animation),"TransitionEvent"in window||delete Cs.transitionend.transition);function oc(t){if(gd[t])return gd[t];if(!Cs[t])return t;var e=Cs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Z_)return gd[t]=e[n];return t}var ew=oc("animationend"),tw=oc("animationiteration"),nw=oc("animationstart"),rw=oc("transitionend"),iw=new Map,Tg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wi(t,e){iw.set(t,e),ss(e,[t])}for(var yd=0;yd<Tg.length;yd++){var vd=Tg[yd],II=vd.toLowerCase(),CI=vd[0].toUpperCase()+vd.slice(1);wi(II,"on"+CI)}wi(ew,"onAnimationEnd");wi(tw,"onAnimationIteration");wi(nw,"onAnimationStart");wi("dblclick","onDoubleClick");wi("focusin","onFocus");wi("focusout","onBlur");wi(rw,"onTransitionEnd");qs("onMouseEnter",["mouseout","mouseover"]);qs("onMouseLeave",["mouseout","mouseover"]);qs("onPointerEnter",["pointerout","pointerover"]);qs("onPointerLeave",["pointerout","pointerover"]);ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function Sg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,IS(r,e,void 0,t),t.currentTarget=null}function sw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Sg(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Sg(i,a,u),s=l}}}if(du)throw t=uh,du=!1,uh=null,t}function at(t,e){var n=e[_h];n===void 0&&(n=e[_h]=new Set);var r=t+"__bubble";n.has(r)||(ow(e,t,2,!1),n.add(r))}function _d(t,e,n){var r=0;e&&(r|=4),ow(n,t,r,e)}var Sl="_reactListening"+Math.random().toString(36).slice(2);function _a(t){if(!t[Sl]){t[Sl]=!0,f_.forEach(function(n){n!=="selectionchange"&&(kI.has(n)||_d(n,!1,t),_d(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sl]||(e[Sl]=!0,_d("selectionchange",!1,e))}}function ow(t,e,n,r){switch(G_(e)){case 1:var i=jS;break;case 4:i=zS;break;default:i=Bf}n=i.bind(null,e,n,t),i=void 0,!lh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ji(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}b_(function(){var u=s,d=Lf(n),g=[];e:{var m=iw.get(t);if(m!==void 0){var y=jf,x=t;switch(t){case"keypress":if(Kl(n)===0)break e;case"keydown":case"keyup":y=rI;break;case"focusin":x="focus",y=fd;break;case"focusout":x="blur",y=fd;break;case"beforeblur":case"afterblur":y=fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=hg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=qS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=oI;break;case ew:case tw:case nw:y=KS;break;case rw:y=lI;break;case"scroll":y=GS;break;case"wheel":y=cI;break;case"copy":case"cut":case"paste":y=YS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=pg}var _=(e&4)!==0,T=!_&&t==="scroll",v=_?m!==null?m+"Capture":null:m;_=[];for(var E=u,S;E!==null;){S=E;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,v!==null&&(P=fa(E,v),P!=null&&_.push(wa(E,P,S)))),T)break;E=E.return}0<_.length&&(m=new y(m,x,null,n,d),g.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==oh&&(x=n.relatedTarget||n.fromElement)&&(ji(x)||x[Nr]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=u,x=x?ji(x):null,x!==null&&(T=os(x),x!==T||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=u),y!==x)){if(_=hg,P="onMouseLeave",v="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(_=pg,P="onPointerLeave",v="onPointerEnter",E="pointer"),T=y==null?m:ks(y),S=x==null?m:ks(x),m=new _(P,E+"leave",y,n,d),m.target=T,m.relatedTarget=S,P=null,ji(d)===u&&(_=new _(v,E+"enter",x,n,d),_.target=S,_.relatedTarget=T,P=_),T=P,y&&x)t:{for(_=y,v=x,E=0,S=_;S;S=vs(S))E++;for(S=0,P=v;P;P=vs(P))S++;for(;0<E-S;)_=vs(_),E--;for(;0<S-E;)v=vs(v),S--;for(;E--;){if(_===v||v!==null&&_===v.alternate)break t;_=vs(_),v=vs(v)}_=null}else _=null;y!==null&&Ig(g,m,y,_,!1),x!==null&&T!==null&&Ig(g,T,x,_,!0)}}e:{if(m=u?ks(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var V=yI;else if(yg(m))if(J_)V=xI;else{V=_I;var O=vI}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=wI);if(V&&(V=V(t,u))){K_(g,V,n,d);break e}O&&O(t,m,u),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&th(m,"number",m.value)}switch(O=u?ks(u):window,t){case"focusin":(yg(O)||O.contentEditable==="true")&&(Is=O,fh=u,ea=null);break;case"focusout":ea=fh=Is=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,Eg(g,n,d);break;case"selectionchange":if(SI)break;case"keydown":case"keyup":Eg(g,n,d)}var A;if(Gf)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ss?$_(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(q_&&n.locale!=="ko"&&(Ss||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ss&&(A=H_()):(Xr=d,Of="value"in Xr?Xr.value:Xr.textContent,Ss=!0)),O=gu(u,R),0<O.length&&(R=new fg(R,t,null,n,d),g.push({event:R,listeners:O}),A?R.data=A:(A=W_(n),A!==null&&(R.data=A)))),(A=hI?fI(t,n):pI(t,n))&&(u=gu(u,"onBeforeInput"),0<u.length&&(d=new fg("onBeforeInput","beforeinput",null,n,d),g.push({event:d,listeners:u}),d.data=A))}sw(g,e)})}function wa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fa(t,n),s!=null&&r.unshift(wa(t,s,i)),s=fa(t,e),s!=null&&r.push(wa(t,s,i))),t=t.return}return r}function vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ig(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=fa(n,s),l!=null&&o.unshift(wa(n,l,a))):i||(l=fa(n,s),l!=null&&o.push(wa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var AI=/\r\n?/g,bI=/\u0000|\uFFFD/g;function Cg(t){return(typeof t=="string"?t:""+t).replace(AI,`
`).replace(bI,"")}function Il(t,e,n){if(e=Cg(e),Cg(t)!==e&&n)throw Error(he(425))}function yu(){}var mh=null,gh=null;function yh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vh=typeof setTimeout=="function"?setTimeout:void 0,RI=typeof clearTimeout=="function"?clearTimeout:void 0,kg=typeof Promise=="function"?Promise:void 0,NI=typeof queueMicrotask=="function"?queueMicrotask:typeof kg<"u"?function(t){return kg.resolve(null).then(t).catch(PI)}:vh;function PI(t){setTimeout(function(){throw t})}function xd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ga(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ga(e)}function ii(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ag(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var uo=Math.random().toString(36).slice(2),hr="__reactFiber$"+uo,xa="__reactProps$"+uo,Nr="__reactContainer$"+uo,_h="__reactEvents$"+uo,MI="__reactListeners$"+uo,DI="__reactHandles$"+uo;function ji(t){var e=t[hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nr]||n[hr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ag(t);t!==null;){if(n=t[hr])return n;t=Ag(t)}return e}t=n,n=t.parentNode}return null}function Oa(t){return t=t[hr]||t[Nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(he(33))}function ac(t){return t[xa]||null}var wh=[],As=-1;function xi(t){return{current:t}}function ut(t){0>As||(t.current=wh[As],wh[As]=null,As--)}function st(t,e){As++,wh[As]=t.current,t.current=e}var fi={},an=xi(fi),Sn=xi(!1),Ji=fi;function $s(t,e){var n=t.type.contextTypes;if(!n)return fi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function In(t){return t=t.childContextTypes,t!=null}function vu(){ut(Sn),ut(an)}function bg(t,e,n){if(an.current!==fi)throw Error(he(168));st(an,e),st(Sn,n)}function aw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(he(108,vS(t)||"Unknown",i));return mt({},n,r)}function _u(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fi,Ji=an.current,st(an,t),st(Sn,Sn.current),!0}function Rg(t,e,n){var r=t.stateNode;if(!r)throw Error(he(169));n?(t=aw(t,e,Ji),r.__reactInternalMemoizedMergedChildContext=t,ut(Sn),ut(an),st(an,t)):ut(Sn),st(Sn,n)}var Sr=null,lc=!1,Ed=!1;function lw(t){Sr===null?Sr=[t]:Sr.push(t)}function LI(t){lc=!0,lw(t)}function Ei(){if(!Ed&&Sr!==null){Ed=!0;var t=0,e=tt;try{var n=Sr;for(tt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sr=null,lc=!1}catch(i){throw Sr!==null&&(Sr=Sr.slice(t+1)),M_(Vf,Ei),i}finally{tt=e,Ed=!1}}return null}var bs=[],Rs=0,wu=null,xu=0,jn=[],zn=0,Yi=null,Cr=1,kr="";function Fi(t,e){bs[Rs++]=xu,bs[Rs++]=wu,wu=t,xu=e}function uw(t,e,n){jn[zn++]=Cr,jn[zn++]=kr,jn[zn++]=Yi,Yi=t;var r=Cr;t=kr;var i=32-tr(r)-1;r&=~(1<<i),n+=1;var s=32-tr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Cr=1<<32-tr(e)+i|n<<i|r,kr=s+t}else Cr=1<<s|n<<i|r,kr=t}function qf(t){t.return!==null&&(Fi(t,1),uw(t,1,0))}function $f(t){for(;t===wu;)wu=bs[--Rs],bs[Rs]=null,xu=bs[--Rs],bs[Rs]=null;for(;t===Yi;)Yi=jn[--zn],jn[zn]=null,kr=jn[--zn],jn[zn]=null,Cr=jn[--zn],jn[zn]=null}var Ln=null,Mn=null,dt=!1,er=null;function cw(t,e){var n=Gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ng(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ln=t,Mn=ii(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ln=t,Mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yi!==null?{id:Cr,overflow:kr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ln=t,Mn=null,!0):!1;default:return!1}}function xh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Eh(t){if(dt){var e=Mn;if(e){var n=e;if(!Ng(t,e)){if(xh(t))throw Error(he(418));e=ii(n.nextSibling);var r=Ln;e&&Ng(t,e)?cw(r,n):(t.flags=t.flags&-4097|2,dt=!1,Ln=t)}}else{if(xh(t))throw Error(he(418));t.flags=t.flags&-4097|2,dt=!1,Ln=t}}}function Pg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ln=t}function Cl(t){if(t!==Ln)return!1;if(!dt)return Pg(t),dt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yh(t.type,t.memoizedProps)),e&&(e=Mn)){if(xh(t))throw dw(),Error(he(418));for(;e;)cw(t,e),e=ii(e.nextSibling)}if(Pg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(he(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mn=ii(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mn=null}}else Mn=Ln?ii(t.stateNode.nextSibling):null;return!0}function dw(){for(var t=Mn;t;)t=ii(t.nextSibling)}function Ws(){Mn=Ln=null,dt=!1}function Wf(t){er===null?er=[t]:er.push(t)}var VI=Br.ReactCurrentBatchConfig;function Lo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,t))}return t}function kl(t,e){throw t=Object.prototype.toString.call(e),Error(he(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mg(t){var e=t._init;return e(t._payload)}function hw(t){function e(v,E){if(t){var S=v.deletions;S===null?(v.deletions=[E],v.flags|=16):S.push(E)}}function n(v,E){if(!t)return null;for(;E!==null;)e(v,E),E=E.sibling;return null}function r(v,E){for(v=new Map;E!==null;)E.key!==null?v.set(E.key,E):v.set(E.index,E),E=E.sibling;return v}function i(v,E){return v=li(v,E),v.index=0,v.sibling=null,v}function s(v,E,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<E?(v.flags|=2,E):S):(v.flags|=2,E)):(v.flags|=1048576,E)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,E,S,P){return E===null||E.tag!==6?(E=bd(S,v.mode,P),E.return=v,E):(E=i(E,S),E.return=v,E)}function l(v,E,S,P){var V=S.type;return V===Ts?d(v,E,S.props.children,P,S.key):E!==null&&(E.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Wr&&Mg(V)===E.type)?(P=i(E,S.props),P.ref=Lo(v,E,S),P.return=v,P):(P=tu(S.type,S.key,S.props,null,v.mode,P),P.ref=Lo(v,E,S),P.return=v,P)}function u(v,E,S,P){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=Rd(S,v.mode,P),E.return=v,E):(E=i(E,S.children||[]),E.return=v,E)}function d(v,E,S,P,V){return E===null||E.tag!==7?(E=Wi(S,v.mode,P,V),E.return=v,E):(E=i(E,S),E.return=v,E)}function g(v,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=bd(""+E,v.mode,S),E.return=v,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case gl:return S=tu(E.type,E.key,E.props,null,v.mode,S),S.ref=Lo(v,null,E),S.return=v,S;case Es:return E=Rd(E,v.mode,S),E.return=v,E;case Wr:var P=E._init;return g(v,P(E._payload),S)}if(zo(E)||Ro(E))return E=Wi(E,v.mode,S,null),E.return=v,E;kl(v,E)}return null}function m(v,E,S,P){var V=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return V!==null?null:a(v,E,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case gl:return S.key===V?l(v,E,S,P):null;case Es:return S.key===V?u(v,E,S,P):null;case Wr:return V=S._init,m(v,E,V(S._payload),P)}if(zo(S)||Ro(S))return V!==null?null:d(v,E,S,P,null);kl(v,S)}return null}function y(v,E,S,P,V){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(S)||null,a(E,v,""+P,V);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case gl:return v=v.get(P.key===null?S:P.key)||null,l(E,v,P,V);case Es:return v=v.get(P.key===null?S:P.key)||null,u(E,v,P,V);case Wr:var O=P._init;return y(v,E,S,O(P._payload),V)}if(zo(P)||Ro(P))return v=v.get(S)||null,d(E,v,P,V,null);kl(E,P)}return null}function x(v,E,S,P){for(var V=null,O=null,A=E,R=E=0,k=null;A!==null&&R<S.length;R++){A.index>R?(k=A,A=null):k=A.sibling;var D=m(v,A,S[R],P);if(D===null){A===null&&(A=k);break}t&&A&&D.alternate===null&&e(v,A),E=s(D,E,R),O===null?V=D:O.sibling=D,O=D,A=k}if(R===S.length)return n(v,A),dt&&Fi(v,R),V;if(A===null){for(;R<S.length;R++)A=g(v,S[R],P),A!==null&&(E=s(A,E,R),O===null?V=A:O.sibling=A,O=A);return dt&&Fi(v,R),V}for(A=r(v,A);R<S.length;R++)k=y(A,v,R,S[R],P),k!==null&&(t&&k.alternate!==null&&A.delete(k.key===null?R:k.key),E=s(k,E,R),O===null?V=k:O.sibling=k,O=k);return t&&A.forEach(function(F){return e(v,F)}),dt&&Fi(v,R),V}function _(v,E,S,P){var V=Ro(S);if(typeof V!="function")throw Error(he(150));if(S=V.call(S),S==null)throw Error(he(151));for(var O=V=null,A=E,R=E=0,k=null,D=S.next();A!==null&&!D.done;R++,D=S.next()){A.index>R?(k=A,A=null):k=A.sibling;var F=m(v,A,D.value,P);if(F===null){A===null&&(A=k);break}t&&A&&F.alternate===null&&e(v,A),E=s(F,E,R),O===null?V=F:O.sibling=F,O=F,A=k}if(D.done)return n(v,A),dt&&Fi(v,R),V;if(A===null){for(;!D.done;R++,D=S.next())D=g(v,D.value,P),D!==null&&(E=s(D,E,R),O===null?V=D:O.sibling=D,O=D);return dt&&Fi(v,R),V}for(A=r(v,A);!D.done;R++,D=S.next())D=y(A,v,R,D.value,P),D!==null&&(t&&D.alternate!==null&&A.delete(D.key===null?R:D.key),E=s(D,E,R),O===null?V=D:O.sibling=D,O=D);return t&&A.forEach(function(N){return e(v,N)}),dt&&Fi(v,R),V}function T(v,E,S,P){if(typeof S=="object"&&S!==null&&S.type===Ts&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case gl:e:{for(var V=S.key,O=E;O!==null;){if(O.key===V){if(V=S.type,V===Ts){if(O.tag===7){n(v,O.sibling),E=i(O,S.props.children),E.return=v,v=E;break e}}else if(O.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Wr&&Mg(V)===O.type){n(v,O.sibling),E=i(O,S.props),E.ref=Lo(v,O,S),E.return=v,v=E;break e}n(v,O);break}else e(v,O);O=O.sibling}S.type===Ts?(E=Wi(S.props.children,v.mode,P,S.key),E.return=v,v=E):(P=tu(S.type,S.key,S.props,null,v.mode,P),P.ref=Lo(v,E,S),P.return=v,v=P)}return o(v);case Es:e:{for(O=S.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(v,E.sibling),E=i(E,S.children||[]),E.return=v,v=E;break e}else{n(v,E);break}else e(v,E);E=E.sibling}E=Rd(S,v.mode,P),E.return=v,v=E}return o(v);case Wr:return O=S._init,T(v,E,O(S._payload),P)}if(zo(S))return x(v,E,S,P);if(Ro(S))return _(v,E,S,P);kl(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(v,E.sibling),E=i(E,S),E.return=v,v=E):(n(v,E),E=bd(S,v.mode,P),E.return=v,v=E),o(v)):n(v,E)}return T}var Ks=hw(!0),fw=hw(!1),Eu=xi(null),Tu=null,Ns=null,Kf=null;function Jf(){Kf=Ns=Tu=null}function Yf(t){var e=Eu.current;ut(Eu),t._currentValue=e}function Th(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Os(t,e){Tu=t,Kf=Ns=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(Kf!==t)if(t={context:t,memoizedValue:e,next:null},Ns===null){if(Tu===null)throw Error(he(308));Ns=t,Tu.dependencies={lanes:0,firstContext:t}}else Ns=Ns.next=t;return e}var zi=null;function Qf(t){zi===null?zi=[t]:zi.push(t)}function pw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Qf(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pr(t,r)}function Pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kr=!1;function Xf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function si(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,qe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pr(t,n)}return i=r.interleaved,i===null?(e.next=e,Qf(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pr(t,n)}function Jl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ff(t,n)}}function Dg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Su(t,e,n,r){var i=t.updateQueue;Kr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var g=i.baseState;o=0,d=u=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,_=a;switch(m=e,y=n,_.tag){case 1:if(x=_.payload,typeof x=="function"){g=x.call(y,g,m);break e}g=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=_.payload,m=typeof x=="function"?x.call(y,g,m):x,m==null)break e;g=mt({},g,m);break e;case 2:Kr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=y,l=g):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=g),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xi|=o,t.lanes=o,t.memoizedState=g}}function Lg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(he(191,i));i.call(r)}}}var ja={},pr=xi(ja),Ea=xi(ja),Ta=xi(ja);function Gi(t){if(t===ja)throw Error(he(174));return t}function Zf(t,e){switch(st(Ta,e),st(Ea,t),st(pr,ja),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rh(e,t)}ut(pr),st(pr,e)}function Js(){ut(pr),ut(Ea),ut(Ta)}function gw(t){Gi(Ta.current);var e=Gi(pr.current),n=rh(e,t.type);e!==n&&(st(Ea,t),st(pr,n))}function ep(t){Ea.current===t&&(ut(pr),ut(Ea))}var ft=xi(0);function Iu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Td=[];function tp(){for(var t=0;t<Td.length;t++)Td[t]._workInProgressVersionPrimary=null;Td.length=0}var Yl=Br.ReactCurrentDispatcher,Sd=Br.ReactCurrentBatchConfig,Qi=0,pt=null,At=null,Mt=null,Cu=!1,ta=!1,Sa=0,FI=0;function Xt(){throw Error(he(321))}function np(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function rp(t,e,n,r,i,s){if(Qi=s,pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yl.current=t===null||t.memoizedState===null?jI:zI,t=n(r,i),ta){s=0;do{if(ta=!1,Sa=0,25<=s)throw Error(he(301));s+=1,Mt=At=null,e.updateQueue=null,Yl.current=GI,t=n(r,i)}while(ta)}if(Yl.current=ku,e=At!==null&&At.next!==null,Qi=0,Mt=At=pt=null,Cu=!1,e)throw Error(he(300));return t}function ip(){var t=Sa!==0;return Sa=0,t}function dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?pt.memoizedState=Mt=t:Mt=Mt.next=t,Mt}function Wn(){if(At===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=At.next;var e=Mt===null?pt.memoizedState:Mt.next;if(e!==null)Mt=e,At=t;else{if(t===null)throw Error(he(310));At=t,t={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Mt===null?pt.memoizedState=Mt=t:Mt=Mt.next=t}return Mt}function Ia(t,e){return typeof e=="function"?e(t):e}function Id(t){var e=Wn(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=At,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Qi&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var g={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=g,o=r):l=l.next=g,pt.lanes|=d,Xi|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,sr(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,pt.lanes|=s,Xi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cd(t){var e=Wn(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);sr(s,e.memoizedState)||(Tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function yw(){}function vw(t,e){var n=pt,r=Wn(),i=e(),s=!sr(r.memoizedState,i);if(s&&(r.memoizedState=i,Tn=!0),r=r.queue,sp(xw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Mt!==null&&Mt.memoizedState.tag&1){if(n.flags|=2048,Ca(9,ww.bind(null,n,r,i,e),void 0,null),Dt===null)throw Error(he(349));Qi&30||_w(n,e,i)}return i}function _w(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ww(t,e,n,r){e.value=n,e.getSnapshot=r,Ew(e)&&Tw(t)}function xw(t,e,n){return n(function(){Ew(e)&&Tw(t)})}function Ew(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch{return!0}}function Tw(t){var e=Pr(t,1);e!==null&&nr(e,t,1,-1)}function Vg(t){var e=dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:t},e.queue=t,t=t.dispatch=OI.bind(null,pt,t),[e.memoizedState,t]}function Ca(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Sw(){return Wn().memoizedState}function Ql(t,e,n,r){var i=dr();pt.flags|=t,i.memoizedState=Ca(1|e,n,void 0,r===void 0?null:r)}function uc(t,e,n,r){var i=Wn();r=r===void 0?null:r;var s=void 0;if(At!==null){var o=At.memoizedState;if(s=o.destroy,r!==null&&np(r,o.deps)){i.memoizedState=Ca(e,n,s,r);return}}pt.flags|=t,i.memoizedState=Ca(1|e,n,s,r)}function Fg(t,e){return Ql(8390656,8,t,e)}function sp(t,e){return uc(2048,8,t,e)}function Iw(t,e){return uc(4,2,t,e)}function Cw(t,e){return uc(4,4,t,e)}function kw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Aw(t,e,n){return n=n!=null?n.concat([t]):null,uc(4,4,kw.bind(null,e,t),n)}function op(){}function bw(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&np(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Rw(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&np(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Nw(t,e,n){return Qi&21?(sr(n,e)||(n=V_(),pt.lanes|=n,Xi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function UI(t,e){var n=tt;tt=n!==0&&4>n?n:4,t(!0);var r=Sd.transition;Sd.transition={};try{t(!1),e()}finally{tt=n,Sd.transition=r}}function Pw(){return Wn().memoizedState}function BI(t,e,n){var r=ai(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mw(t))Dw(e,n);else if(n=pw(t,e,n,r),n!==null){var i=fn();nr(n,t,r,i),Lw(n,e,r)}}function OI(t,e,n){var r=ai(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mw(t))Dw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,sr(a,o)){var l=e.interleaved;l===null?(i.next=i,Qf(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=pw(t,e,i,r),n!==null&&(i=fn(),nr(n,t,r,i),Lw(n,e,r))}}function Mw(t){var e=t.alternate;return t===pt||e!==null&&e===pt}function Dw(t,e){ta=Cu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Lw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ff(t,n)}}var ku={readContext:$n,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},jI={readContext:$n,useCallback:function(t,e){return dr().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:Fg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ql(4194308,4,kw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ql(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ql(4,2,t,e)},useMemo:function(t,e){var n=dr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=BI.bind(null,pt,t),[r.memoizedState,t]},useRef:function(t){var e=dr();return t={current:t},e.memoizedState=t},useState:Vg,useDebugValue:op,useDeferredValue:function(t){return dr().memoizedState=t},useTransition:function(){var t=Vg(!1),e=t[0];return t=UI.bind(null,t[1]),dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=pt,i=dr();if(dt){if(n===void 0)throw Error(he(407));n=n()}else{if(n=e(),Dt===null)throw Error(he(349));Qi&30||_w(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Fg(xw.bind(null,r,s,t),[t]),r.flags|=2048,Ca(9,ww.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=dr(),e=Dt.identifierPrefix;if(dt){var n=kr,r=Cr;n=(r&~(1<<32-tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=FI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zI={readContext:$n,useCallback:bw,useContext:$n,useEffect:sp,useImperativeHandle:Aw,useInsertionEffect:Iw,useLayoutEffect:Cw,useMemo:Rw,useReducer:Id,useRef:Sw,useState:function(){return Id(Ia)},useDebugValue:op,useDeferredValue:function(t){var e=Wn();return Nw(e,At.memoizedState,t)},useTransition:function(){var t=Id(Ia)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:yw,useSyncExternalStore:vw,useId:Pw,unstable_isNewReconciler:!1},GI={readContext:$n,useCallback:bw,useContext:$n,useEffect:sp,useImperativeHandle:Aw,useInsertionEffect:Iw,useLayoutEffect:Cw,useMemo:Rw,useReducer:Cd,useRef:Sw,useState:function(){return Cd(Ia)},useDebugValue:op,useDeferredValue:function(t){var e=Wn();return At===null?e.memoizedState=t:Nw(e,At.memoizedState,t)},useTransition:function(){var t=Cd(Ia)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:yw,useSyncExternalStore:vw,useId:Pw,unstable_isNewReconciler:!1};function Xn(t,e){if(t&&t.defaultProps){e=mt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:mt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cc={isMounted:function(t){return(t=t._reactInternals)?os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=fn(),i=ai(t),s=Ar(r,i);s.payload=e,n!=null&&(s.callback=n),e=si(t,s,i),e!==null&&(nr(e,t,i,r),Jl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=fn(),i=ai(t),s=Ar(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=si(t,s,i),e!==null&&(nr(e,t,i,r),Jl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fn(),r=ai(t),i=Ar(n,r);i.tag=2,e!=null&&(i.callback=e),e=si(t,i,r),e!==null&&(nr(e,t,r,n),Jl(e,t,r))}};function Ug(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!va(n,r)||!va(i,s):!0}function Vw(t,e,n){var r=!1,i=fi,s=e.contextType;return typeof s=="object"&&s!==null?s=$n(s):(i=In(e)?Ji:an.current,r=e.contextTypes,s=(r=r!=null)?$s(t,i):fi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Bg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cc.enqueueReplaceState(e,e.state,null)}function Ih(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Xf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=$n(s):(s=In(e)?Ji:an.current,i.context=$s(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Sh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cc.enqueueReplaceState(i,i.state,null),Su(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ys(t,e){try{var n="",r=e;do n+=yS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ch(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var HI=typeof WeakMap=="function"?WeakMap:Map;function Fw(t,e,n){n=Ar(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bu||(bu=!0,Vh=r),Ch(t,e)},n}function Uw(t,e,n){n=Ar(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ch(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ch(t,e),typeof r!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Og(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new HI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=iC.bind(null,t,e,n),e.then(t,t))}function jg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ar(-1,1),e.tag=2,si(n,e,1))),n.lanes|=1),t)}var qI=Br.ReactCurrentOwner,Tn=!1;function dn(t,e,n,r){e.child=t===null?fw(e,null,n,r):Ks(e,t.child,n,r)}function Gg(t,e,n,r,i){n=n.render;var s=e.ref;return Os(e,i),r=rp(t,e,n,r,s,i),n=ip(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mr(t,e,i)):(dt&&n&&qf(e),e.flags|=1,dn(t,e,r,i),e.child)}function Hg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!pp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Bw(t,e,s,r,i)):(t=tu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:va,n(o,r)&&t.ref===e.ref)return Mr(t,e,i)}return e.flags|=1,t=li(s,r),t.ref=e.ref,t.return=e,e.child=t}function Bw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(va(s,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,Mr(t,e,i)}return kh(t,e,n,r,i)}function Ow(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(Ms,Pn),Pn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,st(Ms,Pn),Pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,st(Ms,Pn),Pn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,st(Ms,Pn),Pn|=r;return dn(t,e,i,n),e.child}function jw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kh(t,e,n,r,i){var s=In(n)?Ji:an.current;return s=$s(e,s),Os(e,i),n=rp(t,e,n,r,s,i),r=ip(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mr(t,e,i)):(dt&&r&&qf(e),e.flags|=1,dn(t,e,n,i),e.child)}function qg(t,e,n,r,i){if(In(n)){var s=!0;_u(e)}else s=!1;if(Os(e,i),e.stateNode===null)Xl(t,e),Vw(e,n,r),Ih(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=$n(u):(u=In(n)?Ji:an.current,u=$s(e,u));var d=n.getDerivedStateFromProps,g=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Bg(e,o,r,u),Kr=!1;var m=e.memoizedState;o.state=m,Su(e,r,o,i),l=e.memoizedState,a!==r||m!==l||Sn.current||Kr?(typeof d=="function"&&(Sh(e,n,d,r),l=e.memoizedState),(a=Kr||Ug(e,n,a,r,m,l,u))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mw(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Xn(e.type,a),o.props=u,g=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$n(l):(l=In(n)?Ji:an.current,l=$s(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==g||m!==l)&&Bg(e,o,r,l),Kr=!1,m=e.memoizedState,o.state=m,Su(e,r,o,i);var x=e.memoizedState;a!==g||m!==x||Sn.current||Kr?(typeof y=="function"&&(Sh(e,n,y,r),x=e.memoizedState),(u=Kr||Ug(e,n,u,r,m,x,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Ah(t,e,n,r,s,i)}function Ah(t,e,n,r,i,s){jw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Rg(e,n,!1),Mr(t,e,s);r=e.stateNode,qI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ks(e,t.child,null,s),e.child=Ks(e,null,a,s)):dn(t,e,a,s),e.memoizedState=r.state,i&&Rg(e,n,!0),e.child}function zw(t){var e=t.stateNode;e.pendingContext?bg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bg(t,e.context,!1),Zf(t,e.containerInfo)}function $g(t,e,n,r,i){return Ws(),Wf(i),e.flags|=256,dn(t,e,n,r),e.child}var bh={dehydrated:null,treeContext:null,retryLane:0};function Rh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gw(t,e,n){var r=e.pendingProps,i=ft.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),st(ft,i&1),t===null)return Eh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=fc(o,r,0,null),t=Wi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Rh(n),e.memoizedState=bh,t):ap(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $I(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=li(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=li(a,s):(s=Wi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Rh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=bh,r}return s=t.child,t=s.sibling,r=li(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ap(t,e){return e=fc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Al(t,e,n,r){return r!==null&&Wf(r),Ks(e,t.child,null,n),t=ap(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $I(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=kd(Error(he(422))),Al(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=fc({mode:"visible",children:r.children},i,0,null),s=Wi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ks(e,t.child,null,o),e.child.memoizedState=Rh(o),e.memoizedState=bh,s);if(!(e.mode&1))return Al(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(he(419)),r=kd(s,r,void 0),Al(t,e,o,r)}if(a=(o&t.childLanes)!==0,Tn||a){if(r=Dt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pr(t,i),nr(r,t,i,-1))}return fp(),r=kd(Error(he(421))),Al(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=sC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Mn=ii(i.nextSibling),Ln=e,dt=!0,er=null,t!==null&&(jn[zn++]=Cr,jn[zn++]=kr,jn[zn++]=Yi,Cr=t.id,kr=t.overflow,Yi=e),e=ap(e,r.children),e.flags|=4096,e)}function Wg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Th(t.return,e,n)}function Ad(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Hw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dn(t,e,r.children,n),r=ft.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wg(t,n,e);else if(t.tag===19)Wg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(st(ft,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Iu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ad(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Iu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ad(e,!0,n,null,s);break;case"together":Ad(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(he(153));if(e.child!==null){for(t=e.child,n=li(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=li(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WI(t,e,n){switch(e.tag){case 3:zw(e),Ws();break;case 5:gw(e);break;case 1:In(e.type)&&_u(e);break;case 4:Zf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;st(Eu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(st(ft,ft.current&1),e.flags|=128,null):n&e.child.childLanes?Gw(t,e,n):(st(ft,ft.current&1),t=Mr(t,e,n),t!==null?t.sibling:null);st(ft,ft.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Hw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),st(ft,ft.current),r)break;return null;case 22:case 23:return e.lanes=0,Ow(t,e,n)}return Mr(t,e,n)}var qw,Nh,$w,Ww;qw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nh=function(){};$w=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Gi(pr.current);var s=null;switch(n){case"input":i=Zd(t,i),r=Zd(t,r),s=[];break;case"select":i=mt({},i,{value:void 0}),r=mt({},r,{value:void 0}),s=[];break;case"textarea":i=nh(t,i),r=nh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yu)}ih(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(da.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(da.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&at("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Ww=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vo(t,e){if(!dt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KI(t,e,n){var r=e.pendingProps;switch($f(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return In(e.type)&&vu(),Zt(e),null;case 3:return r=e.stateNode,Js(),ut(Sn),ut(an),tp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Cl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,er!==null&&(Bh(er),er=null))),Nh(t,e),Zt(e),null;case 5:ep(e);var i=Gi(Ta.current);if(n=e.type,t!==null&&e.stateNode!=null)$w(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(he(166));return Zt(e),null}if(t=Gi(pr.current),Cl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[hr]=e,r[xa]=s,t=(e.mode&1)!==0,n){case"dialog":at("cancel",r),at("close",r);break;case"iframe":case"object":case"embed":at("load",r);break;case"video":case"audio":for(i=0;i<Ho.length;i++)at(Ho[i],r);break;case"source":at("error",r);break;case"img":case"image":case"link":at("error",r),at("load",r);break;case"details":at("toggle",r);break;case"input":ng(r,s),at("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},at("invalid",r);break;case"textarea":ig(r,s),at("invalid",r)}ih(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Il(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Il(r.textContent,a,t),i=["children",""+a]):da.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&at("scroll",r)}switch(n){case"input":yl(r),rg(r,s,!0);break;case"textarea":yl(r),sg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=x_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hr]=e,t[xa]=r,qw(t,e,!1,!1),e.stateNode=t;e:{switch(o=sh(n,r),n){case"dialog":at("cancel",t),at("close",t),i=r;break;case"iframe":case"object":case"embed":at("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ho.length;i++)at(Ho[i],t);i=r;break;case"source":at("error",t),i=r;break;case"img":case"image":case"link":at("error",t),at("load",t),i=r;break;case"details":at("toggle",t),i=r;break;case"input":ng(t,r),i=Zd(t,r),at("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=mt({},r,{value:void 0}),at("invalid",t);break;case"textarea":ig(t,r),i=nh(t,r),at("invalid",t);break;default:i=r}ih(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?S_(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&E_(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ha(t,l):typeof l=="number"&&ha(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(da.hasOwnProperty(s)?l!=null&&s==="onScroll"&&at("scroll",t):l!=null&&Nf(t,s,l,o))}switch(n){case"input":yl(t),rg(t,r,!1);break;case"textarea":yl(t),sg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Vs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Vs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)Ww(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(he(166));if(n=Gi(Ta.current),Gi(pr.current),Cl(e)){if(r=e.stateNode,n=e.memoizedProps,r[hr]=e,(s=r.nodeValue!==n)&&(t=Ln,t!==null))switch(t.tag){case 3:Il(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Il(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hr]=e,e.stateNode=r}return Zt(e),null;case 13:if(ut(ft),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(dt&&Mn!==null&&e.mode&1&&!(e.flags&128))dw(),Ws(),e.flags|=98560,s=!1;else if(s=Cl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(he(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(he(317));s[hr]=e}else Ws(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),s=!1}else er!==null&&(Bh(er),er=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ft.current&1?bt===0&&(bt=3):fp())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return Js(),Nh(t,e),t===null&&_a(e.stateNode.containerInfo),Zt(e),null;case 10:return Yf(e.type._context),Zt(e),null;case 17:return In(e.type)&&vu(),Zt(e),null;case 19:if(ut(ft),s=e.memoizedState,s===null)return Zt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Vo(s,!1);else{if(bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Iu(t),o!==null){for(e.flags|=128,Vo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return st(ft,ft.current&1|2),e.child}t=t.sibling}s.tail!==null&&wt()>Qs&&(e.flags|=128,r=!0,Vo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Iu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!dt)return Zt(e),null}else 2*wt()-s.renderingStartTime>Qs&&n!==1073741824&&(e.flags|=128,r=!0,Vo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wt(),e.sibling=null,n=ft.current,st(ft,r?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return hp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pn&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(he(156,e.tag))}function JI(t,e){switch($f(e),e.tag){case 1:return In(e.type)&&vu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Js(),ut(Sn),ut(an),tp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ep(e),null;case 13:if(ut(ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(he(340));Ws()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ut(ft),null;case 4:return Js(),null;case 10:return Yf(e.type._context),null;case 22:case 23:return hp(),null;case 24:return null;default:return null}}var bl=!1,nn=!1,YI=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Ps(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){vt(t,e,r)}else n.current=null}function Ph(t,e,n){try{n()}catch(r){vt(t,e,r)}}var Kg=!1;function QI(t,e){if(mh=pu,t=X_(),Hf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,g=t,m=null;t:for(;;){for(var y;g!==n||i!==0&&g.nodeType!==3||(a=o+i),g!==s||r!==0&&g.nodeType!==3||(l=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(y=g.firstChild)!==null;)m=g,g=y;for(;;){if(g===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++d===r&&(l=o),(y=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(gh={focusedElem:t,selectionRange:n},pu=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){e=Ee;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var _=x.memoizedProps,T=x.memoizedState,v=e.stateNode,E=v.getSnapshotBeforeUpdate(e.elementType===e.type?_:Xn(e.type,_),T);v.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(P){vt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}return x=Kg,Kg=!1,x}function na(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ph(e,n,s)}i=i.next}while(i!==r)}}function dc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Mh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Kw(t){var e=t.alternate;e!==null&&(t.alternate=null,Kw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hr],delete e[xa],delete e[_h],delete e[MI],delete e[DI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jw(t){return t.tag===5||t.tag===3||t.tag===4}function Jg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yu));else if(r!==4&&(t=t.child,t!==null))for(Dh(t,e,n),t=t.sibling;t!==null;)Dh(t,e,n),t=t.sibling}function Lh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lh(t,e,n),t=t.sibling;t!==null;)Lh(t,e,n),t=t.sibling}var jt=null,Zn=!1;function $r(t,e,n){for(n=n.child;n!==null;)Yw(t,e,n),n=n.sibling}function Yw(t,e,n){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(rc,n)}catch{}switch(n.tag){case 5:nn||Ps(n,e);case 6:var r=jt,i=Zn;jt=null,$r(t,e,n),jt=r,Zn=i,jt!==null&&(Zn?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(Zn?(t=jt,n=n.stateNode,t.nodeType===8?xd(t.parentNode,n):t.nodeType===1&&xd(t,n),ga(t)):xd(jt,n.stateNode));break;case 4:r=jt,i=Zn,jt=n.stateNode.containerInfo,Zn=!0,$r(t,e,n),jt=r,Zn=i;break;case 0:case 11:case 14:case 15:if(!nn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ph(n,e,o),i=i.next}while(i!==r)}$r(t,e,n);break;case 1:if(!nn&&(Ps(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){vt(n,e,a)}$r(t,e,n);break;case 21:$r(t,e,n);break;case 22:n.mode&1?(nn=(r=nn)||n.memoizedState!==null,$r(t,e,n),nn=r):$r(t,e,n);break;default:$r(t,e,n)}}function Yg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YI),e.forEach(function(r){var i=oC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jt=a.stateNode,Zn=!1;break e;case 3:jt=a.stateNode.containerInfo,Zn=!0;break e;case 4:jt=a.stateNode.containerInfo,Zn=!0;break e}a=a.return}if(jt===null)throw Error(he(160));Yw(s,o,i),jt=null,Zn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){vt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qw(e,t),e=e.sibling}function Qw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qn(e,t),cr(t),r&4){try{na(3,t,t.return),dc(3,t)}catch(_){vt(t,t.return,_)}try{na(5,t,t.return)}catch(_){vt(t,t.return,_)}}break;case 1:Qn(e,t),cr(t),r&512&&n!==null&&Ps(n,n.return);break;case 5:if(Qn(e,t),cr(t),r&512&&n!==null&&Ps(n,n.return),t.flags&32){var i=t.stateNode;try{ha(i,"")}catch(_){vt(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&__(i,s),sh(a,o);var u=sh(a,s);for(o=0;o<l.length;o+=2){var d=l[o],g=l[o+1];d==="style"?S_(i,g):d==="dangerouslySetInnerHTML"?E_(i,g):d==="children"?ha(i,g):Nf(i,d,g,u)}switch(a){case"input":eh(i,s);break;case"textarea":w_(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Vs(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?Vs(i,!!s.multiple,s.defaultValue,!0):Vs(i,!!s.multiple,s.multiple?[]:"",!1))}i[xa]=s}catch(_){vt(t,t.return,_)}}break;case 6:if(Qn(e,t),cr(t),r&4){if(t.stateNode===null)throw Error(he(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){vt(t,t.return,_)}}break;case 3:if(Qn(e,t),cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ga(e.containerInfo)}catch(_){vt(t,t.return,_)}break;case 4:Qn(e,t),cr(t);break;case 13:Qn(e,t),cr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(cp=wt())),r&4&&Yg(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(nn=(u=nn)||d,Qn(e,t),nn=u):Qn(e,t),cr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Ee=t,d=t.child;d!==null;){for(g=Ee=d;Ee!==null;){switch(m=Ee,y=m.child,m.tag){case 0:case 11:case 14:case 15:na(4,m,m.return);break;case 1:Ps(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(_){vt(r,n,_)}}break;case 5:Ps(m,m.return);break;case 22:if(m.memoizedState!==null){Xg(g);continue}}y!==null?(y.return=m,Ee=y):Xg(g)}d=d.sibling}e:for(d=null,g=t;;){if(g.tag===5){if(d===null){d=g;try{i=g.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=g.stateNode,l=g.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=T_("display",o))}catch(_){vt(t,t.return,_)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(_){vt(t,t.return,_)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Qn(e,t),cr(t),r&4&&Yg(t);break;case 21:break;default:Qn(e,t),cr(t)}}function cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jw(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ha(i,""),r.flags&=-33);var s=Jg(t);Lh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Jg(t);Dh(t,a,o);break;default:throw Error(he(161))}}catch(l){vt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XI(t,e,n){Ee=t,Xw(t)}function Xw(t,e,n){for(var r=(t.mode&1)!==0;Ee!==null;){var i=Ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||bl;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||nn;a=bl;var u=nn;if(bl=o,(nn=l)&&!u)for(Ee=i;Ee!==null;)o=Ee,l=o.child,o.tag===22&&o.memoizedState!==null?Zg(i):l!==null?(l.return=o,Ee=l):Zg(i);for(;s!==null;)Ee=s,Xw(s),s=s.sibling;Ee=i,bl=a,nn=u}Qg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ee=s):Qg(t)}}function Qg(t){for(;Ee!==null;){var e=Ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nn||dc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Lg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lg(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&ga(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}nn||e.flags&512&&Mh(e)}catch(m){vt(e,e.return,m)}}if(e===t){Ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function Xg(t){for(;Ee!==null;){var e=Ee;if(e===t){Ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function Zg(t){for(;Ee!==null;){var e=Ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dc(4,e)}catch(l){vt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){vt(e,i,l)}}var s=e.return;try{Mh(e)}catch(l){vt(e,s,l)}break;case 5:var o=e.return;try{Mh(e)}catch(l){vt(e,o,l)}}}catch(l){vt(e,e.return,l)}if(e===t){Ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ee=a;break}Ee=e.return}}var ZI=Math.ceil,Au=Br.ReactCurrentDispatcher,lp=Br.ReactCurrentOwner,Hn=Br.ReactCurrentBatchConfig,qe=0,Dt=null,It=null,Ht=0,Pn=0,Ms=xi(0),bt=0,ka=null,Xi=0,hc=0,up=0,ra=null,xn=null,cp=0,Qs=1/0,Tr=null,bu=!1,Vh=null,oi=null,Rl=!1,Zr=null,Ru=0,ia=0,Fh=null,Zl=-1,eu=0;function fn(){return qe&6?wt():Zl!==-1?Zl:Zl=wt()}function ai(t){return t.mode&1?qe&2&&Ht!==0?Ht&-Ht:VI.transition!==null?(eu===0&&(eu=V_()),eu):(t=tt,t!==0||(t=window.event,t=t===void 0?16:G_(t.type)),t):1}function nr(t,e,n,r){if(50<ia)throw ia=0,Fh=null,Error(he(185));Ua(t,n,r),(!(qe&2)||t!==Dt)&&(t===Dt&&(!(qe&2)&&(hc|=n),bt===4&&Yr(t,Ht)),Cn(t,r),n===1&&qe===0&&!(e.mode&1)&&(Qs=wt()+500,lc&&Ei()))}function Cn(t,e){var n=t.callbackNode;VS(t,e);var r=fu(t,t===Dt?Ht:0);if(r===0)n!==null&&lg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&lg(n),e===1)t.tag===0?LI(e0.bind(null,t)):lw(e0.bind(null,t)),NI(function(){!(qe&6)&&Ei()}),n=null;else{switch(F_(r)){case 1:n=Vf;break;case 4:n=D_;break;case 16:n=hu;break;case 536870912:n=L_;break;default:n=hu}n=ox(n,Zw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zw(t,e){if(Zl=-1,eu=0,qe&6)throw Error(he(327));var n=t.callbackNode;if(js()&&t.callbackNode!==n)return null;var r=fu(t,t===Dt?Ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nu(t,r);else{e=r;var i=qe;qe|=2;var s=tx();(Dt!==t||Ht!==e)&&(Tr=null,Qs=wt()+500,$i(t,e));do try{nC();break}catch(a){ex(t,a)}while(!0);Jf(),Au.current=s,qe=i,It!==null?e=0:(Dt=null,Ht=0,e=bt)}if(e!==0){if(e===2&&(i=ch(t),i!==0&&(r=i,e=Uh(t,i))),e===1)throw n=ka,$i(t,0),Yr(t,r),Cn(t,wt()),n;if(e===6)Yr(t,r);else{if(i=t.current.alternate,!(r&30)&&!eC(i)&&(e=Nu(t,r),e===2&&(s=ch(t),s!==0&&(r=s,e=Uh(t,s))),e===1))throw n=ka,$i(t,0),Yr(t,r),Cn(t,wt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(he(345));case 2:Ui(t,xn,Tr);break;case 3:if(Yr(t,r),(r&130023424)===r&&(e=cp+500-wt(),10<e)){if(fu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){fn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=vh(Ui.bind(null,t,xn,Tr),e);break}Ui(t,xn,Tr);break;case 4:if(Yr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-tr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZI(r/1960))-r,10<r){t.timeoutHandle=vh(Ui.bind(null,t,xn,Tr),r);break}Ui(t,xn,Tr);break;case 5:Ui(t,xn,Tr);break;default:throw Error(he(329))}}}return Cn(t,wt()),t.callbackNode===n?Zw.bind(null,t):null}function Uh(t,e){var n=ra;return t.current.memoizedState.isDehydrated&&($i(t,e).flags|=256),t=Nu(t,e),t!==2&&(e=xn,xn=n,e!==null&&Bh(e)),t}function Bh(t){xn===null?xn=t:xn.push.apply(xn,t)}function eC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!sr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yr(t,e){for(e&=~up,e&=~hc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tr(e),r=1<<n;t[n]=-1,e&=~r}}function e0(t){if(qe&6)throw Error(he(327));js();var e=fu(t,0);if(!(e&1))return Cn(t,wt()),null;var n=Nu(t,e);if(t.tag!==0&&n===2){var r=ch(t);r!==0&&(e=r,n=Uh(t,r))}if(n===1)throw n=ka,$i(t,0),Yr(t,e),Cn(t,wt()),n;if(n===6)throw Error(he(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ui(t,xn,Tr),Cn(t,wt()),null}function dp(t,e){var n=qe;qe|=1;try{return t(e)}finally{qe=n,qe===0&&(Qs=wt()+500,lc&&Ei())}}function Zi(t){Zr!==null&&Zr.tag===0&&!(qe&6)&&js();var e=qe;qe|=1;var n=Hn.transition,r=tt;try{if(Hn.transition=null,tt=1,t)return t()}finally{tt=r,Hn.transition=n,qe=e,!(qe&6)&&Ei()}}function hp(){Pn=Ms.current,ut(Ms)}function $i(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RI(n)),It!==null)for(n=It.return;n!==null;){var r=n;switch($f(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vu();break;case 3:Js(),ut(Sn),ut(an),tp();break;case 5:ep(r);break;case 4:Js();break;case 13:ut(ft);break;case 19:ut(ft);break;case 10:Yf(r.type._context);break;case 22:case 23:hp()}n=n.return}if(Dt=t,It=t=li(t.current,null),Ht=Pn=e,bt=0,ka=null,up=hc=Xi=0,xn=ra=null,zi!==null){for(e=0;e<zi.length;e++)if(n=zi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}zi=null}return t}function ex(t,e){do{var n=It;try{if(Jf(),Yl.current=ku,Cu){for(var r=pt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Cu=!1}if(Qi=0,Mt=At=pt=null,ta=!1,Sa=0,lp.current=null,n===null||n.return===null){bt=1,ka=e,It=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ht,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,g=d.tag;if(!(d.mode&1)&&(g===0||g===11||g===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=jg(o);if(y!==null){y.flags&=-257,zg(y,o,a,s,e),y.mode&1&&Og(s,u,e),e=y,l=u;var x=e.updateQueue;if(x===null){var _=new Set;_.add(l),e.updateQueue=_}else x.add(l);break e}else{if(!(e&1)){Og(s,u,e),fp();break e}l=Error(he(426))}}else if(dt&&a.mode&1){var T=jg(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),zg(T,o,a,s,e),Wf(Ys(l,a));break e}}s=l=Ys(l,a),bt!==4&&(bt=2),ra===null?ra=[s]:ra.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=Fw(s,l,e);Dg(s,v);break e;case 1:a=l;var E=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(oi===null||!oi.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=Uw(s,a,e);Dg(s,P);break e}}s=s.return}while(s!==null)}rx(n)}catch(V){e=V,It===n&&n!==null&&(It=n=n.return);continue}break}while(!0)}function tx(){var t=Au.current;return Au.current=ku,t===null?ku:t}function fp(){(bt===0||bt===3||bt===2)&&(bt=4),Dt===null||!(Xi&268435455)&&!(hc&268435455)||Yr(Dt,Ht)}function Nu(t,e){var n=qe;qe|=2;var r=tx();(Dt!==t||Ht!==e)&&(Tr=null,$i(t,e));do try{tC();break}catch(i){ex(t,i)}while(!0);if(Jf(),qe=n,Au.current=r,It!==null)throw Error(he(261));return Dt=null,Ht=0,bt}function tC(){for(;It!==null;)nx(It)}function nC(){for(;It!==null&&!kS();)nx(It)}function nx(t){var e=sx(t.alternate,t,Pn);t.memoizedProps=t.pendingProps,e===null?rx(t):It=e,lp.current=null}function rx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=JI(n,e),n!==null){n.flags&=32767,It=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bt=6,It=null;return}}else if(n=KI(n,e,Pn),n!==null){It=n;return}if(e=e.sibling,e!==null){It=e;return}It=e=t}while(e!==null);bt===0&&(bt=5)}function Ui(t,e,n){var r=tt,i=Hn.transition;try{Hn.transition=null,tt=1,rC(t,e,n,r)}finally{Hn.transition=i,tt=r}return null}function rC(t,e,n,r){do js();while(Zr!==null);if(qe&6)throw Error(he(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(he(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(FS(t,s),t===Dt&&(It=Dt=null,Ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rl||(Rl=!0,ox(hu,function(){return js(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Hn.transition,Hn.transition=null;var o=tt;tt=1;var a=qe;qe|=4,lp.current=null,QI(t,n),Qw(n,t),TI(gh),pu=!!mh,gh=mh=null,t.current=n,XI(n),AS(),qe=a,tt=o,Hn.transition=s}else t.current=n;if(Rl&&(Rl=!1,Zr=t,Ru=i),s=t.pendingLanes,s===0&&(oi=null),NS(n.stateNode),Cn(t,wt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(bu)throw bu=!1,t=Vh,Vh=null,t;return Ru&1&&t.tag!==0&&js(),s=t.pendingLanes,s&1?t===Fh?ia++:(ia=0,Fh=t):ia=0,Ei(),null}function js(){if(Zr!==null){var t=F_(Ru),e=Hn.transition,n=tt;try{if(Hn.transition=null,tt=16>t?16:t,Zr===null)var r=!1;else{if(t=Zr,Zr=null,Ru=0,qe&6)throw Error(he(331));var i=qe;for(qe|=4,Ee=t.current;Ee!==null;){var s=Ee,o=s.child;if(Ee.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Ee=u;Ee!==null;){var d=Ee;switch(d.tag){case 0:case 11:case 15:na(8,d,s)}var g=d.child;if(g!==null)g.return=d,Ee=g;else for(;Ee!==null;){d=Ee;var m=d.sibling,y=d.return;if(Kw(d),d===u){Ee=null;break}if(m!==null){m.return=y,Ee=m;break}Ee=y}}}var x=s.alternate;if(x!==null){var _=x.child;if(_!==null){x.child=null;do{var T=_.sibling;_.sibling=null,_=T}while(_!==null)}}Ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ee=o;else e:for(;Ee!==null;){if(s=Ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:na(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ee=v;break e}Ee=s.return}}var E=t.current;for(Ee=E;Ee!==null;){o=Ee;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Ee=S;else e:for(o=E;Ee!==null;){if(a=Ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dc(9,a)}}catch(V){vt(a,a.return,V)}if(a===o){Ee=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,Ee=P;break e}Ee=a.return}}if(qe=i,Ei(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(rc,t)}catch{}r=!0}return r}finally{tt=n,Hn.transition=e}}return!1}function t0(t,e,n){e=Ys(n,e),e=Fw(t,e,1),t=si(t,e,1),e=fn(),t!==null&&(Ua(t,1,e),Cn(t,e))}function vt(t,e,n){if(t.tag===3)t0(t,t,n);else for(;e!==null;){if(e.tag===3){t0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oi===null||!oi.has(r))){t=Ys(n,t),t=Uw(e,t,1),e=si(e,t,1),t=fn(),e!==null&&(Ua(e,1,t),Cn(e,t));break}}e=e.return}}function iC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=fn(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(Ht&n)===n&&(bt===4||bt===3&&(Ht&130023424)===Ht&&500>wt()-cp?$i(t,0):up|=n),Cn(t,e)}function ix(t,e){e===0&&(t.mode&1?(e=wl,wl<<=1,!(wl&130023424)&&(wl=4194304)):e=1);var n=fn();t=Pr(t,e),t!==null&&(Ua(t,e,n),Cn(t,n))}function sC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ix(t,n)}function oC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(e),ix(t,n)}var sx;sx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Sn.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,WI(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,dt&&e.flags&1048576&&uw(e,xu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xl(t,e),t=e.pendingProps;var i=$s(e,an.current);Os(e,n),i=rp(null,e,r,t,i,n);var s=ip();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,In(r)?(s=!0,_u(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Xf(e),i.updater=cc,e.stateNode=i,i._reactInternals=e,Ih(e,r,t,n),e=Ah(null,e,r,!0,s,n)):(e.tag=0,dt&&s&&qf(e),dn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=lC(r),t=Xn(r,t),i){case 0:e=kh(null,e,r,t,n);break e;case 1:e=qg(null,e,r,t,n);break e;case 11:e=Gg(null,e,r,t,n);break e;case 14:e=Hg(null,e,r,Xn(r.type,t),n);break e}throw Error(he(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xn(r,i),kh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xn(r,i),qg(t,e,r,i,n);case 3:e:{if(zw(e),t===null)throw Error(he(387));r=e.pendingProps,s=e.memoizedState,i=s.element,mw(t,e),Su(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ys(Error(he(423)),e),e=$g(t,e,r,n,i);break e}else if(r!==i){i=Ys(Error(he(424)),e),e=$g(t,e,r,n,i);break e}else for(Mn=ii(e.stateNode.containerInfo.firstChild),Ln=e,dt=!0,er=null,n=fw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ws(),r===i){e=Mr(t,e,n);break e}dn(t,e,r,n)}e=e.child}return e;case 5:return gw(e),t===null&&Eh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,yh(r,i)?o=null:s!==null&&yh(r,s)&&(e.flags|=32),jw(t,e),dn(t,e,o,n),e.child;case 6:return t===null&&Eh(e),null;case 13:return Gw(t,e,n);case 4:return Zf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ks(e,null,r,n):dn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xn(r,i),Gg(t,e,r,i,n);case 7:return dn(t,e,e.pendingProps,n),e.child;case 8:return dn(t,e,e.pendingProps.children,n),e.child;case 12:return dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,st(Eu,r._currentValue),r._currentValue=o,s!==null)if(sr(s.value,o)){if(s.children===i.children&&!Sn.current){e=Mr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ar(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Th(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(he(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Th(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}dn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Os(e,n),i=$n(i),r=r(i),e.flags|=1,dn(t,e,r,n),e.child;case 14:return r=e.type,i=Xn(r,e.pendingProps),i=Xn(r.type,i),Hg(t,e,r,i,n);case 15:return Bw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xn(r,i),Xl(t,e),e.tag=1,In(r)?(t=!0,_u(e)):t=!1,Os(e,n),Vw(e,r,i),Ih(e,r,i,n),Ah(null,e,r,!0,t,n);case 19:return Hw(t,e,n);case 22:return Ow(t,e,n)}throw Error(he(156,e.tag))};function ox(t,e){return M_(t,e)}function aC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(t,e,n,r){return new aC(t,e,n,r)}function pp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lC(t){if(typeof t=="function")return pp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mf)return 11;if(t===Df)return 14}return 2}function li(t,e){var n=t.alternate;return n===null?(n=Gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")pp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ts:return Wi(n.children,i,s,e);case Pf:o=8,i|=8;break;case Jd:return t=Gn(12,n,e,i|2),t.elementType=Jd,t.lanes=s,t;case Yd:return t=Gn(13,n,e,i),t.elementType=Yd,t.lanes=s,t;case Qd:return t=Gn(19,n,e,i),t.elementType=Qd,t.lanes=s,t;case g_:return fc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case p_:o=10;break e;case m_:o=9;break e;case Mf:o=11;break e;case Df:o=14;break e;case Wr:o=16,r=null;break e}throw Error(he(130,t==null?t:typeof t,""))}return e=Gn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Wi(t,e,n,r){return t=Gn(7,t,r,e),t.lanes=n,t}function fc(t,e,n,r){return t=Gn(22,t,r,e),t.elementType=g_,t.lanes=n,t.stateNode={isHidden:!1},t}function bd(t,e,n){return t=Gn(6,t,null,e),t.lanes=n,t}function Rd(t,e,n){return e=Gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cd(0),this.expirationTimes=cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function mp(t,e,n,r,i,s,o,a,l){return t=new uC(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Gn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xf(s),t}function cC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Es,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ax(t){if(!t)return fi;t=t._reactInternals;e:{if(os(t)!==t||t.tag!==1)throw Error(he(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(In(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(he(171))}if(t.tag===1){var n=t.type;if(In(n))return aw(t,n,e)}return e}function lx(t,e,n,r,i,s,o,a,l){return t=mp(n,r,!0,t,i,s,o,a,l),t.context=ax(null),n=t.current,r=fn(),i=ai(n),s=Ar(r,i),s.callback=e??null,si(n,s,i),t.current.lanes=i,Ua(t,i,r),Cn(t,r),t}function pc(t,e,n,r){var i=e.current,s=fn(),o=ai(i);return n=ax(n),e.context===null?e.context=n:e.pendingContext=n,e=Ar(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=si(i,e,o),t!==null&&(nr(t,i,o,s),Jl(t,i,o)),o}function Pu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function n0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gp(t,e){n0(t,e),(t=t.alternate)&&n0(t,e)}function dC(){return null}var ux=typeof reportError=="function"?reportError:function(t){console.error(t)};function yp(t){this._internalRoot=t}mc.prototype.render=yp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(he(409));pc(t,e,null,null)};mc.prototype.unmount=yp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zi(function(){pc(null,t,null,null)}),e[Nr]=null}};function mc(t){this._internalRoot=t}mc.prototype.unstable_scheduleHydration=function(t){if(t){var e=O_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jr.length&&e!==0&&e<Jr[n].priority;n++);Jr.splice(n,0,t),n===0&&z_(t)}};function vp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function r0(){}function hC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Pu(o);s.call(u)}}var o=lx(e,r,t,0,null,!1,!1,"",r0);return t._reactRootContainer=o,t[Nr]=o.current,_a(t.nodeType===8?t.parentNode:t),Zi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Pu(l);a.call(u)}}var l=mp(t,0,!1,null,null,!1,!1,"",r0);return t._reactRootContainer=l,t[Nr]=l.current,_a(t.nodeType===8?t.parentNode:t),Zi(function(){pc(e,l,n,r)}),l}function yc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Pu(o);a.call(l)}}pc(e,o,t,i)}else o=hC(n,e,t,i,r);return Pu(o)}U_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Go(e.pendingLanes);n!==0&&(Ff(e,n|1),Cn(e,wt()),!(qe&6)&&(Qs=wt()+500,Ei()))}break;case 13:Zi(function(){var r=Pr(t,1);if(r!==null){var i=fn();nr(r,t,1,i)}}),gp(t,1)}};Uf=function(t){if(t.tag===13){var e=Pr(t,134217728);if(e!==null){var n=fn();nr(e,t,134217728,n)}gp(t,134217728)}};B_=function(t){if(t.tag===13){var e=ai(t),n=Pr(t,e);if(n!==null){var r=fn();nr(n,t,e,r)}gp(t,e)}};O_=function(){return tt};j_=function(t,e){var n=tt;try{return tt=t,e()}finally{tt=n}};ah=function(t,e,n){switch(e){case"input":if(eh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ac(r);if(!i)throw Error(he(90));v_(r),eh(r,i)}}}break;case"textarea":w_(t,n);break;case"select":e=n.value,e!=null&&Vs(t,!!n.multiple,e,!1)}};k_=dp;A_=Zi;var fC={usingClientEntryPoint:!1,Events:[Oa,ks,ac,I_,C_,dp]},Fo={findFiberByHostInstance:ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pC={bundleType:Fo.bundleType,version:Fo.version,rendererPackageName:Fo.rendererPackageName,rendererConfig:Fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Br.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=N_(t),t===null?null:t.stateNode},findFiberByHostInstance:Fo.findFiberByHostInstance||dC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nl.isDisabled&&Nl.supportsFiber)try{rc=Nl.inject(pC),fr=Nl}catch{}}Bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fC;Bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vp(e))throw Error(he(200));return cC(t,e,null,n)};Bn.createRoot=function(t,e){if(!vp(t))throw Error(he(299));var n=!1,r="",i=ux;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=mp(t,1,!1,null,null,n,!1,r,i),t[Nr]=e.current,_a(t.nodeType===8?t.parentNode:t),new yp(e)};Bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(he(188)):(t=Object.keys(t).join(","),Error(he(268,t)));return t=N_(e),t=t===null?null:t.stateNode,t};Bn.flushSync=function(t){return Zi(t)};Bn.hydrate=function(t,e,n){if(!gc(e))throw Error(he(200));return yc(null,t,e,!0,n)};Bn.hydrateRoot=function(t,e,n){if(!vp(t))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ux;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lx(e,null,t,1,n??null,i,!1,s,o),t[Nr]=e.current,_a(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new mc(e)};Bn.render=function(t,e,n){if(!gc(e))throw Error(he(200));return yc(null,t,e,!1,n)};Bn.unmountComponentAtNode=function(t){if(!gc(t))throw Error(he(40));return t._reactRootContainer?(Zi(function(){yc(null,null,t,!1,function(){t._reactRootContainer=null,t[Nr]=null})}),!0):!1};Bn.unstable_batchedUpdates=dp;Bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gc(n))throw Error(he(200));if(t==null||t._reactInternals===void 0)throw Error(he(38));return yc(t,e,n,!1,r)};Bn.version="18.3.1-next-f1338f8080-20240426";function cx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cx)}catch(t){console.error(t)}}cx(),c_.exports=Bn;var mC=c_.exports,i0=mC;Wd.createRoot=i0.createRoot,Wd.hydrateRoot=i0.hydrateRoot;var it=(t=>(t.Home="Home",t.Projects="Projects",t.Blog="Blog",t.Gallery="Gallery",t.Music="Music",t.Messages="Messages",t.AIStudio="AIStudio",t.IGSeamless="IGSeamless",t))(it||{}),hn=(t=>(t.BACKGROUND_REMOVER="bg_remove",t.HD_UPSCALE="hd_upscale",t.CREATIVE_REMIX="creative_remix",t.COLORIZE="colorize",t.SKETCH_TO_REAL="sketch_real",t))(hn||{});const Xs=({className:t="w-10 h-10",variant:e="dark"})=>{const n=e==="dark"?"#0f172a":"#ffffff",r=e==="dark"?"#ffffff":"#0f172a";return h.jsxs("svg",{viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[h.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",fill:n}),h.jsx("text",{x:"50%",y:"235",dominantBaseline:"middle",textAnchor:"middle",fill:r,style:{fontSize:"160px",fontWeight:"900",fontFamily:"'Plus Jakarta Sans', sans-serif",letterSpacing:"-2px",fontStyle:"normal"},children:"IRA"}),h.jsx("text",{x:"50%",y:"340",dominantBaseline:"middle",textAnchor:"middle",fill:r,textLength:"280",lengthAdjust:"spacingAndGlyphs",style:{fontSize:"32px",fontWeight:"800",fontFamily:"'Plus Jakarta Sans', sans-serif",textTransform:"uppercase",letterSpacing:"2px",opacity:.9,fontStyle:"normal"},children:"irfan rizki aditri"}),e==="light"&&h.jsx("rect",{x:"40",y:"40",width:"420",height:"420",rx:"100",stroke:"rgba(0,0,0,0.05)",strokeWidth:"2"})]})},dx=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M15 4V2"}),h.jsx("path",{d:"M15 16v-2"}),h.jsx("path",{d:"M8 9h2"}),h.jsx("path",{d:"M20 9h2"}),h.jsx("path",{d:"M17.8 11.8 19 13"}),h.jsx("path",{d:"M15 9h0"}),h.jsx("path",{d:"M17.8 6.2 19 5"}),h.jsx("path",{d:"m3 21 9-9"}),h.jsx("path",{d:"M12.2 6.2 11 5"})]}),Mu=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}),h.jsx("path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}),h.jsx("path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"})]}),_p=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4Z"})}),hx=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),h.jsx("polyline",{points:"17 8 12 3 7 8"}),h.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),fx=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),h.jsx("polyline",{points:"7 10 12 15 17 10"}),h.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),za=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m15 18-6-6 6-6"})}),vc=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m6 9 6 6 6-6"})}),Zs=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M5 12h14"}),h.jsx("path",{d:"m12 5 7 7-7 7"})]}),gC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("line",{x1:"12",x2:"12",y1:"19",y2:"5"}),h.jsx("polyline",{points:"5 12 12 5 19 12"})]}),yC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),h.jsx("polyline",{points:"19 12 12 19 5 12"})]}),s0=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.09a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),h.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),vC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"m9 7-5 5 5 5"}),h.jsx("path",{d:"m15 7 5 5-5 5"})]}),_c=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),h.jsx("path",{d:"M12 9v4"}),h.jsx("path",{d:"M12 17h.01"})]}),px=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),h.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),h.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]}),sa=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),h.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1 4-10z"})]}),mx=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-6v-4h4v4h-4z"}),h.jsx("path",{d:"M12 12.5a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 1 0v5a.5.5 0 0 1-.5.5z"}),h.jsx("path",{d:"M12 2a10 10 0 0 1 7.07 17.07l-1.41-1.41A8 8 0 1 0 5.34 4.34l1.41 1.41A10 10 0 0 1 12 2z"}),h.jsx("text",{x:"50%",y:"55%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"14",fontWeight:"bold",children:"G"})]}),o0=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),gx=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),h.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]}),Du=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("polyline",{points:"20 6 9 17 4 12"})}),_C=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("circle",{cx:"12",cy:"12",r:"1"}),h.jsx("circle",{cx:"12",cy:"5",r:"1"}),h.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),wp=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M3 6h18"}),h.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),h.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),wC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}),h.jsx("circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}),h.jsx("circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}),h.jsx("circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}),h.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"})]}),xC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),h.jsx("path",{d:"m15 5 4 4"})]}),xp=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),h.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),h.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),h.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]}),Oh=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m21 2-2 2m-7.6 7.6a6 6 0 1 1-8.4-8.4 6 6 0 0 1 8.4 8.4Zm0 0 5.7 5.7a2 2 0 0 1 0 2.8l-2.8 2.8"})}),EC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),h.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),TC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),h.jsx("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),h.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"})]}),yx=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"})}),SC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("path",{d:"M12 16v-4"}),h.jsx("path",{d:"M12 8h.01"})]}),IC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M12 2v2"}),h.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),h.jsx("path",{d:"M20 12h2"}),h.jsx("path",{d:"m19.07 4.93-1.41 1.41"}),h.jsx("path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128"}),h.jsx("path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z"})]}),CC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),h.jsx("line",{x1:"4",x2:"4",y1:"22",y2:"15"})]}),kC=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",className:t,children:h.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),AC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("circle",{cx:"6",cy:"6",r:"3"}),h.jsx("circle",{cx:"6",cy:"18",r:"3"}),h.jsx("line",{x1:"20",x2:"8.12",y1:"4",y2:"15.88"}),h.jsx("line",{x1:"14.47",x2:"20",y1:"14.48",y2:"20"}),h.jsx("line",{x1:"8.12",x2:"12",y1:"8.12",y2:"12"})]}),bC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),h.jsx("line",{x1:"3",x2:"21",y1:"9",y2:"9"}),h.jsx("line",{x1:"9",x2:"9",y1:"21",y2:"9"})]}),RC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),h.jsx("path",{d:"M3 3v5h5"})]}),NC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("polyline",{points:"16 3 21 3 21 8"}),h.jsx("line",{x1:"4",x2:"21",y1:"20",y2:"3"}),h.jsx("polyline",{points:"21 16 21 21 16 21"}),h.jsx("line",{x1:"15",x2:"21",y1:"15",y2:"21"}),h.jsx("line",{x1:"4",x2:"9",y1:"4",y2:"9"})]}),PC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("rect",{width:"13",height:"13",x:"9",y:"9",rx:"2",ry:"2"}),h.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),MC=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("circle",{cx:"12",cy:"12",r:"10"})}),DC=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"})}),LC=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"})}),VC=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"m12 2 3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),FC=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),UC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("path",{d:"M12 2a10 10 0 0 1 0 20z",fill:"currentColor",fillOpacity:"0.3"})]}),BC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M6 2v14a2 2 0 0 0 2 2h14"}),h.jsx("path",{d:"M18 22V8a2 2 0 0 0-2-2H2"})]}),OC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M3 7v6h6"}),h.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]}),jC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5"}),h.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),h.jsx("line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5"})]}),zC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}),h.jsx("path",{d:"M9 18c-4.51 2-5-2-7-2"})]}),GC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("path",{d:"M8 14.5c2.5-1 5.5-1 8 0"}),h.jsx("path",{d:"M6.5 11.5c3.5-1.5 7.5-1.5 11 0"}),h.jsx("path",{d:"M5 8.5c4.5-2 9.5-2 14 0"})]}),HC=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),h.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),qC=({activeTab:t,setActiveTab:e,isMenuOpen:n,setIsMenuOpen:r,isAdmin:i})=>{const s=[{id:it.Home,label:"Home"},{id:it.Projects,label:"Projects"},{id:it.Blog,label:"Blog"},{id:it.Gallery,label:"Gallery"},{id:it.Music,label:"Music"},{id:it.Messages,label:"Pesan"}],[o,a]=te.useState({left:0,width:0,opacity:0}),[l,u]=te.useState(!1),d=te.useRef({});te.useEffect(()=>{const m=d.current[t];m&&a({left:m.offsetLeft,width:m.offsetWidth,opacity:1})},[t]);const g=m=>{m&&e(m),u(!0),setTimeout(()=>{r(!1),u(!1)},700)};return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
          @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
          }
          
          /* Animasi Tirai Turun (Buka) */
          @keyframes curtainDown {
             from { transform: translateY(-100%); border-radius: 0 0 100px 100px; }
             to { transform: translateY(0); border-radius: 0; }
          }

          /* Animasi Tirai Naik (Tutup) */
          @keyframes curtainUp {
             from { transform: translateY(0); border-radius: 0; }
             to { transform: translateY(-100%); border-radius: 0 0 100px 100px; }
          }

          .animate-blob {
            animation: blob 10s infinite;
          }
          .animation-delay-2000 {
            animation-delay: 2s;
          }
          .animation-delay-4000 {
            animation-delay: 4s;
          }
          
          .animate-curtain-down {
             animation: curtainDown 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
          }
          
          .animate-curtain-up {
             animation: curtainUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
          }
        `}),h.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-100 transition-all",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center",children:[h.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group mr-8",onClick:()=>e(it.Home),children:[h.jsx(Xs,{className:"w-8 h-8 group-hover:rotate-12 transition-transform duration-300",variant:"dark"}),h.jsx("div",{className:"flex flex-col justify-center",children:h.jsx("span",{className:"text-sm font-black tracking-tighter uppercase text-slate-900 leading-none",children:"Irfan Rizki Aditri"})})]}),h.jsxs("div",{className:"hidden md:flex items-center relative ml-auto bg-slate-50/50 rounded-full p-1 border border-slate-200/60",children:[h.jsx("div",{className:"absolute top-1 bottom-1 bg-slate-900 rounded-full transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1)] shadow-md z-0",style:{left:o.left,width:o.width,opacity:o.opacity}}),s.map(m=>h.jsx("button",{ref:y=>{d.current[m.id]=y},onClick:()=>e(m.id),className:`relative z-10 px-6 py-2 rounded-full text-xs font-bold uppercase tracking-wide transition-colors duration-300 ${t===m.id?"text-white":"text-slate-500 hover:text-slate-900"}`,children:m.label},m.id))]}),h.jsx("button",{className:"md:hidden p-2 text-slate-600 ml-auto",onClick:()=>r(!n),children:h.jsx(px,{className:"w-6 h-6"})})]})}),(n||l)&&h.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden flex flex-col items-center justify-center p-6 overflow-hidden bg-white ${l?"animate-curtain-up":"animate-curtain-down"}`,children:[h.jsxs("div",{className:"absolute inset-0 z-0 w-full h-full pointer-events-none",children:[h.jsx("div",{className:"absolute top-0 -left-10 w-96 h-96 bg-slate-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob"}),h.jsx("div",{className:"absolute top-1/4 -right-20 w-80 h-80 bg-gray-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-2000"}),h.jsx("div",{className:"absolute -bottom-20 left-1/3 w-96 h-96 bg-zinc-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 animate-blob animation-delay-4000"}),h.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-[10px]"})]}),h.jsxs("div",{className:`relative z-10 w-full flex flex-col items-center transition-all duration-500 ${l?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:[h.jsx("button",{className:"absolute -top-32 right-0 p-3 rounded-full bg-white text-slate-400 hover:text-slate-900 transition-colors shadow-sm border border-slate-100",onClick:()=>g(),children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 6 6 18"}),h.jsx("path",{d:"m6 6 12 12"})]})}),h.jsx("div",{className:"absolute -top-32 left-0 flex items-center gap-3",children:h.jsx(Xs,{className:"w-12 h-12",variant:"dark"})}),h.jsx("div",{className:"flex flex-col gap-6 w-full max-w-xs mt-10",children:s.map((m,y)=>h.jsx("button",{onClick:()=>g(m.id),className:`
                           text-3xl font-black uppercase tracking-tight text-center py-2 relative group
                           transition-all duration-300
                           ${t===m.id?"text-slate-900 scale-110":"text-slate-300 hover:text-slate-500 hover:scale-105"}
                        `,style:{animationDelay:`${y*50}ms`},children:m.label},m.id))}),h.jsxs("div",{className:"absolute -bottom-40 flex flex-col items-center gap-2",children:[h.jsx("div",{className:"w-1 h-8 bg-slate-200 rounded-full"}),h.jsx("div",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-[0.3em]",children:"Fanra Studio"})]})]})]})]})},Nt=typeof window<"u"?new(window.AudioContext||window.webkitAudioContext):null;let Nd=null;const vx=t=>{if(Nd)return Nd;const e=t.sampleRate*2,n=t.createBuffer(1,e,t.sampleRate),r=n.getChannelData(0);for(let i=0;i<e;i++)r[i]=Math.random()*2-1;return Nd=n,n},$C=()=>{if(!Nt)return;Nt.state==="suspended"&&Nt.resume();const t=vx(Nt),e=Nt.createBufferSource();e.buffer=t;const n=Nt.createBiquadFilter();n.type="lowpass",n.Q.value=1;const r=Nt.createGain();e.connect(n),n.connect(r),r.connect(Nt.destination);const i=Nt.currentTime;n.frequency.setValueAtTime(100,i),n.frequency.exponentialRampToValueAtTime(4e3,i+.15),r.gain.setValueAtTime(.01,i),r.gain.linearRampToValueAtTime(.3,i+.05),r.gain.exponentialRampToValueAtTime(.001,i+.3),e.start(i),e.stop(i+.3)},WC=()=>{if(!Nt)return;Nt.state==="suspended"&&Nt.resume();const t=vx(Nt),e=Nt.createBufferSource();e.buffer=t;const n=Nt.createBiquadFilter();n.type="lowpass",n.Q.value=.5;const r=Nt.createGain();e.connect(n),n.connect(r),r.connect(Nt.destination);const i=Nt.currentTime;n.frequency.setValueAtTime(200,i),n.frequency.exponentialRampToValueAtTime(1200,i+.8),r.gain.setValueAtTime(.01,i),r.gain.linearRampToValueAtTime(.4,i+.2),r.gain.exponentialRampToValueAtTime(.001,i+1.2),e.start(i),e.stop(i+1.2)};class KC{constructor(e,n,r){this.x=e,this.y=n;const i=Math.random()*Math.PI*2,s=Math.random()*10+2;this.vx=Math.cos(i)*s,this.vy=Math.sin(i)*s,this.size=3,this.friction=.92,this.opacity=1,this.ease=.2-r*.015,this.ease<.05&&(this.ease=.05)}update(e,n){this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction,this.x+=(e-this.x)*this.ease,this.y+=(n-this.y)*this.ease;const r=e-this.x,i=n-this.y;return Math.sqrt(r*r+i*i)<10&&(this.opacity-=.05),this.opacity>0}draw(e){e.save(),e.globalAlpha=this.opacity,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.fillStyle="#2563eb",e.fill(),e.restore()}}const JC=({onComplete:t})=>{const[e,n]=te.useState(0),[r,i]=te.useState(!1),[s,o]=te.useState(!1),a=te.useRef(null),l=te.useRef(null),u=te.useRef([]),d=te.useRef({x:window.innerWidth/2,y:window.innerHeight/2});te.useEffect(()=>(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",window.scrollTo(0,0),()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[]),te.useEffect(()=>{const x=l.current;if(!x)return;const _=x.getContext("2d");if(!_)return;const T=()=>{x.width=window.innerWidth,x.height=window.innerHeight};window.addEventListener("resize",T),T();const v=P=>{d.current={x:P.clientX,y:P.clientY}};window.addEventListener("mousemove",v);let E;const S=()=>{_.clearRect(0,0,x.width,x.height),u.current.length>0?(u.current=u.current.filter(P=>P.update(d.current.x,d.current.y)?(P.draw(_),!0):!1),u.current.length===0&&s&&o(!1)):s&&o(!1),E=requestAnimationFrame(S)};return S(),()=>{window.removeEventListener("resize",T),window.removeEventListener("mousemove",v),cancelAnimationFrame(E)}},[s]);const g=x=>{if(s||!a.current)return;const _=a.current.getBoundingClientRect(),T=_.left+_.width/2,v=_.top+_.height/2;o(!0);let E=0;const S=10;u.current=[];const P=setInterval(()=>{if(E>=S){clearInterval(P);return}u.current.push(new KC(T,v,E)),E++},50)},m=()=>{r||($C(),i(!0),n(1),setTimeout(()=>i(!1),1e3))},y=()=>{r||(WC(),i(!0),n(2),setTimeout(()=>{window.scrollTo(0,0),t()},1e3))};return h.jsxs("div",{className:`fixed inset-0 z-[999] bg-white transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1) overflow-hidden h-[100dvh] w-screen ${e===2?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none"}`,onTouchMove:x=>x.preventDefault(),children:[h.jsx("canvas",{ref:l,className:"absolute inset-0 pointer-events-none z-50"}),h.jsxs("div",{className:"flex flex-col w-full h-[200vh] transition-transform duration-[1000ms] cubic-bezier(0.76, 0, 0.24, 1)",style:{transform:e>=1?"translateY(-50%)":"translateY(0)"},children:[h.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center relative bg-white px-6",style:{backgroundImage:"radial-gradient(#e2e8f0 1px, transparent 1px)",backgroundSize:"32px 32px"},children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-[0.03] pointer-events-none overflow-hidden",children:h.jsx(Xs,{className:"w-[150%] h-[150%] -translate-x-1/4 -translate-y-1/4",variant:"dark"})}),h.jsxs("div",{className:"relative z-10 text-center animate-fade-in-up flex flex-col items-center",children:[h.jsx("div",{className:"mb-8 flex justify-center transform hover:scale-105 transition-transform duration-500",children:h.jsx(Xs,{className:"w-32 h-32 md:w-40 md:h-40 shadow-2xl shadow-slate-200/50 rounded-[2rem] bg-white",variant:"dark"})}),h.jsxs("h1",{className:"text-4xl md:text-7xl font-black text-slate-900 mb-4 tracking-tighter leading-tight",children:["IRFAN RIZKI ADITRI",h.jsx("span",{ref:a,onDoubleClick:g,className:`text-blue-600 inline-block cursor-pointer transition-opacity duration-100 select-none ${s?"opacity-0":"opacity-100"} hover:opacity-80`,title:"Double click me!",children:"."})]}),h.jsx("p",{className:"text-slate-400 text-lg md:text-2xl font-medium tracking-widest uppercase",children:"Portfolio & Playground"}),h.jsxs("button",{onClick:m,className:"group flex flex-col items-center gap-3 transition-all outline-none cursor-pointer mt-20 hover:-translate-y-1 duration-300",children:[h.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-900 transition-colors",children:"Next"}),h.jsx("div",{className:"w-12 h-12 rounded-full border border-slate-200 bg-white hover:bg-slate-50 flex items-center justify-center shadow-lg transition-all duration-300 group-hover:border-slate-300 group-hover:shadow-xl",children:h.jsx(vc,{className:"w-5 h-5 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})})]})]})]}),h.jsxs("div",{className:"w-full h-[100vh] flex flex-col items-center justify-center bg-slate-50 px-6 relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),h.jsxs("div",{className:"relative z-10 max-w-4xl w-full grid md:grid-cols-2 gap-12 items-center",children:[h.jsxs("div",{className:"text-center md:text-left space-y-6 flex flex-col items-center md:items-start",children:[h.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-[10px] font-bold uppercase tracking-wider",children:[h.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),"Student & Developer"]}),h.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-slate-900 tracking-tight leading-none",children:["Welcome to ",h.jsx("br",{}),h.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-800 to-slate-500",children:"My Perspective."})]}),h.jsx("p",{className:"text-slate-500 text-lg leading-relaxed max-w-md",children:"Jelajahi eksperimen kode, cerita tentang alam semesta, dan tools AI buatan mahasiswa gabut."}),h.jsxs("button",{onClick:y,className:"inline-flex items-center gap-3 bg-slate-900 text-white px-8 py-4 rounded-xl font-bold shadow-xl shadow-slate-900/20 hover:bg-slate-800 transition-all hover:-translate-y-1 active:scale-95 group",children:["Explore Studio",h.jsx(Zs,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),h.jsxs("div",{className:"relative hidden md:block",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-500 to-purple-500 rounded-[2.5rem] rotate-3 opacity-20 blur-2xl transform translate-y-4"}),h.jsxs("div",{className:"relative bg-white p-8 rounded-[2.5rem] shadow-2xl border border-slate-100 rotate-[-2deg] hover:rotate-0 transition-transform duration-500",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-slate-100 pb-6",children:[h.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center text-2xl",children:""}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-slate-900",children:"Fanra AI"}),h.jsx("p",{className:"text-xs text-slate-500",children:"Intelligent Assistant"})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"bg-slate-50 p-4 rounded-xl rounded-tl-none border border-slate-100 text-sm text-slate-600",children:"Halo! Ada yang bisa gue bantu hari ini? Mau edit foto atau ngobrol soal fisika?"}),h.jsx("div",{className:"bg-blue-600 p-4 rounded-xl rounded-tr-none text-sm text-white ml-auto max-w-[80%]",children:"Gue mau coba fitur AI Studio lo dong, Fanra!"})]})]})]})]})]})]})]})};class YC{constructor(e,n,r){this.x=e,this.y=n,this.baseX=e,this.baseY=n,this.size=1.5,this.density=Math.random()*20+5,this.color=r}draw(e,n){const r=this.y/n;let i=1-Math.pow(r,.8);i=Math.max(0,i),e.fillStyle=`rgba(203, 213, 225, ${i})`,e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2),e.closePath(),e.fill()}update(e,n){const r=e.x-this.x,i=e.y-this.y,s=Math.sqrt(r*r+i*i),o=r/s,a=i/s,l=e.radius,u=(l-s)/l,d=o*u*this.density,g=a*u*this.density;if(s<e.radius)n==="repel"?(this.x-=d,this.y-=g):(this.x+=d,this.y+=g);else{if(this.x!==this.baseX){const m=this.x-this.baseX;this.x-=m/15}if(this.y!==this.baseY){const m=this.y-this.baseY;this.y-=m/15}}}}const a0=({onNavigate:t})=>{const[e]=te.useState(()=>Math.random()>.5?"repel":"attract"),n=te.useRef(null),r=te.useRef([]),i=te.useRef({x:-1e3,y:-1e3,radius:120});return te.useEffect(()=>{const s=n.current;if(!s)return;const o=s.getContext("2d");if(!o)return;const a=()=>{s.width=window.innerWidth,s.height=window.innerHeight,l()},l=()=>{r.current=[];const y=30,x=Math.ceil(s.height/y),_=Math.ceil(s.width/y);for(let T=0;T<x;T++)for(let v=0;v<_;v++){const E=v*y+y/2,S=T*y+y/2;r.current.push(new YC(E,S,"#cbd5e1"))}};a(),window.addEventListener("resize",a);const u=y=>{const x=s.getBoundingClientRect();i.current.x=y.clientX-x.left,i.current.y=y.clientY-x.top},d=()=>{i.current.x=-1e3,i.current.y=-1e3};window.addEventListener("mousemove",u),window.addEventListener("mouseout",d);let g;const m=()=>{o.clearRect(0,0,s.width,s.height),r.current.forEach(y=>{y.draw(o,s.height),y.update(i.current,e)}),g=requestAnimationFrame(m)};return m(),()=>{window.removeEventListener("resize",a),window.removeEventListener("mousemove",u),window.removeEventListener("mouseout",d),cancelAnimationFrame(g)}},[e]),h.jsxs("div",{className:"relative min-h-[90vh] flex flex-col",children:[h.jsx("canvas",{ref:n,className:"fixed inset-0 z-0 pointer-events-auto opacity-60"}),h.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 md:px-12 py-12 flex-grow w-full",children:[h.jsxs("div",{className:"mb-24 mt-8",children:[h.jsx("h1",{className:"text-6xl md:text-8xl font-black text-slate-900 mb-8 leading-tight tracking-tighter max-w-5xl flex items-center flex-wrap gap-2",children:h.jsxs("span",{children:["Fanra is ",h.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600",children:"here."})]})}),h.jsx("div",{className:"max-w-5xl mt-16 relative",children:h.jsxs("div",{className:"grid md:grid-cols-5 gap-12 items-start",children:[h.jsxs("div",{className:"md:col-span-3 space-y-4",children:[h.jsxs("h2",{className:"text-2xl font-bold text-slate-900 leading-tight",children:["Mahasiswa Fisika. ",h.jsx("br",{className:"hidden md:block"}),h.jsx("span",{className:"text-slate-400",children:"Cuma Hobi Ngoding."})]}),h.jsxs("p",{className:"text-slate-600 text-lg leading-relaxed font-medium",children:["Halo, gue ",h.jsx("b",{children:"Irfan Rizki Aditri"})," (panggil aja Fanra). Gue maba Fisika di ITERA angkatan '25.",h.jsx("br",{}),h.jsx("br",{}),"Jujur, gue bukan ",h.jsx("i",{children:"expert"})," atau anak IT. Website ini cuma proyek iseng buat belajar teknologi di sela-sela tugas kuliah. Jadi kalau ada fitur yang masih kaku atau ",h.jsx("i",{children:"bug"}),", maklumin aja yanamanya juga lagi belajar. "]})]}),h.jsxs("div",{className:"md:col-span-2 flex flex-col gap-4 pt-2",children:[h.jsxs("div",{className:"flex items-center gap-4 group",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform",children:h.jsx(_p,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider",children:"Physics Major"}),h.jsx("p",{className:"text-sm text-slate-500",children:"Institut Teknologi Sumatera '25"})]})]}),h.jsxs("div",{className:"flex items-center gap-4 group",children:[h.jsx("div",{className:"w-10 h-10 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform",children:h.jsx(yx,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider",children:"Interest"}),h.jsx("p",{className:"text-sm text-slate-500",children:"Learning AI & Web Dev"})]})]}),h.jsxs("div",{className:"flex items-center gap-4 group",children:[h.jsx("div",{className:"w-10 h-10 bg-slate-100 text-slate-600 rounded-xl flex items-center justify-center shrink-0 group-hover:scale-110 transition-transform",children:h.jsx(sa,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-bold text-slate-900 uppercase tracking-wider",children:"Based In"}),h.jsx("p",{className:"text-sm text-slate-500",children:"Sumatera, Indonesia"})]})]})]})]})})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-24",children:[h.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer",onClick:()=>t(it.Projects),children:[h.jsx("div",{className:"w-14 h-14 bg-slate-900 rounded-2xl flex items-center justify-center text-white mb-8 group-hover:scale-110 transition-transform",children:h.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),h.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-3",children:"Projects"}),h.jsx("p",{className:"text-slate-500 mb-6 text-base md:text-lg",children:"Lihat eksperimen koding gue, termasuk Fanra AI Studio."}),h.jsxs("div",{className:"flex items-center text-sm font-bold text-blue-600",children:["Explore ",h.jsx(Zs,{className:"w-5 h-5 ml-2"})]})]}),h.jsxs("div",{className:"bg-white/90 backdrop-blur-md p-10 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group cursor-pointer",onClick:()=>t(it.Blog),children:[h.jsx("div",{className:"w-14 h-14 bg-slate-100 text-slate-900 rounded-2xl flex items-center justify-center mb-8 group-hover:scale-110 transition-transform",children:h.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),h.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-3",children:"Blog & Cerita"}),h.jsx("p",{className:"text-slate-500 mb-6 text-base md:text-lg",children:"Tulisan random tentang kuliah, teknologi, dan kehidupan."}),h.jsxs("div",{className:"flex items-center text-sm font-bold text-slate-600 group-hover:text-slate-900",children:["Read Now ",h.jsx(Zs,{className:"w-5 h-5 ml-2"})]})]})]}),h.jsxs("div",{className:"relative rounded-[3rem] overflow-hidden bg-slate-900 text-white p-12 md:p-24 text-center shadow-2xl",children:[h.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto",children:[h.jsx("h2",{className:"text-4xl md:text-5xl font-black mb-6 tracking-tight",children:"Mau ngobrol atau kolaborasi?"}),h.jsx("p",{className:"text-slate-400 mb-10 text-lg max-w-xl mx-auto",children:"Gue selalu terbuka buat diskusi soal project baru atau sekadar sharing ide gila."}),h.jsx("button",{onClick:()=>t(it.Messages),className:"bg-white text-slate-900 px-10 py-4 rounded-full font-bold hover:bg-slate-200 transition-colors active:scale-95 text-lg shadow-lg shadow-white/10",children:"Kirim Pesan"})]}),h.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"})]})]})]})},QC=({onLaunchApp:t,onOpenIG:e})=>h.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12",children:[h.jsx("h1",{className:"text-4xl font-black text-slate-900 mb-4 tracking-tighter",children:"Selected Projects"}),h.jsx("p",{className:"text-slate-500 mb-8 max-w-2xl",children:"Kumpulan hasil ngoding gabut dan eksperimen serius."}),h.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl p-5 mb-12 max-w-3xl flex gap-4 items-start shadow-sm",children:[h.jsx("div",{className:"p-2 bg-amber-100 rounded-xl text-amber-600 shrink-0",children:h.jsx(_c,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-amber-900 text-sm uppercase tracking-wide mb-1",children:"Under Development (Beta)"}),h.jsx("p",{className:"text-sm text-amber-700/80 leading-relaxed font-medium",children:"Mohon diingat bahwa semua project di sini masih dalam tahap pengembangan aktif. Anda mungkin akan menemukan bug, fitur yang error, atau fungsi yang belum berjalan sempurna. Eksperimen dengan risiko sendiri ya!"})]})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"col-span-1 md:col-span-2 relative bg-slate-950 rounded-[2rem] p-8 md:p-12 overflow-hidden group cursor-pointer shadow-2xl transition-all hover:-translate-y-1 ring-1 ring-slate-800",onClick:t,children:[h.jsx("div",{className:"absolute inset-0 z-0 opacity-20 pointer-events-none mix-blend-overlay",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),h.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.07] pointer-events-none",style:{backgroundImage:`
                        linear-gradient(to right, #ffffff 1px, transparent 1px),
                        linear-gradient(to bottom, #ffffff 1px, transparent 1px)
                     `,backgroundSize:"40px 40px",maskImage:"radial-gradient(circle at top left, black, transparent 100%)"}}),h.jsx("div",{className:"absolute top-0 right-0 w-[300px] h-[300px] bg-blue-600 rounded-full blur-[120px] opacity-20 group-hover:opacity-30 transition-opacity duration-700 animate-pulse-fast"}),h.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx("div",{className:"p-2 bg-white/5 backdrop-blur-md rounded-xl text-blue-400 border border-white/10",children:h.jsx(yx,{className:"w-6 h-6"})}),h.jsx("span",{className:"text-xs font-bold text-blue-400 uppercase tracking-widest border border-blue-500/30 px-3 py-1 rounded-full bg-blue-500/10",children:"Featured Project"})]}),h.jsx("h3",{className:"text-3xl md:text-5xl font-black text-white mb-4 tracking-tight drop-shadow-sm",children:"Fanra AI Studio"}),h.jsx("p",{className:"text-slate-400 text-lg mb-8 max-w-md leading-relaxed font-medium",children:"Asisten AI hybrid yang bisa ngobrol santai, edit foto (Hapus BG, Upscale 4K), dan cari info akurat lewat Database & Wikipedia."})]}),h.jsx("div",{className:"flex items-center gap-4",children:h.jsxs("button",{className:"bg-white text-slate-950 px-8 py-3.5 rounded-xl font-bold flex items-center gap-2 hover:bg-blue-50 transition-all shadow-[0_0_20px_rgba(255,255,255,0.1)] hover:shadow-[0_0_25px_rgba(255,255,255,0.2)] active:scale-95",children:["Launch Studio ",h.jsx(Zs,{className:"w-4 h-4"})]})})]})]}),h.jsxs("div",{className:"bg-white rounded-[2rem] p-8 border border-slate-200 shadow-sm flex flex-col justify-between hover:shadow-lg transition-all cursor-pointer group hover:border-pink-200 relative overflow-hidden",onClick:e,children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-pink-400/10 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2"}),h.jsxs("div",{children:[h.jsx("div",{className:"w-12 h-12 bg-pink-50 text-pink-500 rounded-2xl mb-6 flex items-center justify-center",children:h.jsx(bC,{className:"w-6 h-6"})}),h.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2 group-hover:text-pink-600 transition-colors",children:"IG Seamless Studio"}),h.jsx("p",{className:"text-slate-500 text-sm leading-relaxed mb-6",children:"Bikin konten carousel Instagram yang nyambung (Panorama) dengan mudah. Upload, atur layout, dan auto-slice saat download."})]}),h.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[h.jsx("span",{className:"text-xs font-bold text-pink-500 uppercase tracking-wider",children:"Open App"}),h.jsx(Zs,{className:"w-4 h-4 text-pink-500 transform group-hover:translate-x-1 transition-transform"})]})]})]})]}),l0=[{id:"fermi-paradox",title:"Paradoks Fermi: Keheningan yang Memekakkan Telinga",subtitle:"Jika alam semesta ini tak terhingga luasnya dan tua usianya, di mana semua orang? Mengupas misteri terbesar dalam astronomi dan eksistensi.",category:"Sains & Filsafat",date:"9 Januari 2026, 02:14 WIB",readTime:"7 min read",author:"Fanra",image:"https://upload.wikimedia.org/wikipedia/commons/6/69/NASA-HS201427a-HubbleUltraDeepField2014-20140603.jpg",content:h.jsxs(h.Fragment,{children:[h.jsxs("p",{className:"lead text-xl text-slate-600 font-medium mb-8 leading-relaxed",children:["Pernahkah lo menatap langit malam yang cerah, melihat ribuan bintang, dan merasa betapa kecilnya kita? Lalu muncul satu pertanyaan sederhana yang menghantui para ilmuwan selama puluhan tahun: ",h.jsx("strong",{children:'"Di mana mereka semua?"'})]}),h.jsxs("figure",{className:"my-10",children:[h.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/69/NASA-HS201427a-HubbleUltraDeepField2014-20140603.jpg",alt:"Hubble Ultra Deep Field",className:"w-full rounded-2xl shadow-lg"}),h.jsx("figcaption",{className:"text-center text-xs text-slate-400 mt-3 font-medium",children:"Hubble Ultra Deep Field: Setiap titik cahaya di gambar ini adalah sebuah galaksi yang berisi miliaran bintang. (Sumber: NASA/ESA)"})]}),h.jsx("h3",{className:"text-2xl font-bold text-slate-900 mt-10 mb-4",children:"Angka yang Tidak Masuk Akal"}),h.jsx("p",{className:"mb-6 text-slate-700 leading-8",children:"Mari kita bicara matematika sebentar. Galaksi Bima Sakti kita sendiri memiliki sekitar 100 hingga 400 miliar bintang. Dan di alam semesta yang teramati, ada triliunan galaksi lain. Bahkan jika hanya sebagian kecil dari bintang-bintang itu memiliki planet yang mirip Bumi, dan sebagian kecil dari planet itu mendukung kehidupan, seharusnya ada jutaan peradaban cerdas di luar sana."}),h.jsxs("p",{className:"mb-6 text-slate-700 leading-8",children:["Alam semesta berumur sekitar 13,8 miliar tahun. Bumi baru berumur 4,5 miliar tahun. Artinya, ada peradaban lain yang mungkin sudah ada miliaran tahun sebelum kita. Bayangkan teknologi mereka. Seharusnya, mereka sudah mengkolonisasi galaksi, atau setidaknya mengirim sinyal yang bisa kita tangkap. Tapi yang kita dapatkan hanyalah... ",h.jsx("em",{children:"kesunyian"}),". Inilah yang disebut ",h.jsx("strong",{children:"Paradoks Fermi"}),"."]}),h.jsx("div",{className:"bg-slate-50 border-l-4 border-blue-500 p-6 my-8 rounded-r-xl",children:h.jsxs("p",{className:"italic text-slate-600",children:['"Dua kemungkinan ada: Entah kita sendirian di alam semesta, atau kita tidak sendirian. Keduanya sama-sama menakutkan."',h.jsx("br",{})," Arthur C. Clarke"]})}),h.jsx("h3",{className:"text-2xl font-bold text-slate-900 mt-10 mb-4",children:"Teori 1: The Great Filter (Saringan Besar)"}),h.jsxs("p",{className:"mb-6 text-slate-700 leading-8",children:['Teori ini menyarankan bahwa ada sebuah "tembok" atau rintangan evolusi yang sangat sulit dilewati oleh kehidupan. Mungkin kehidupan itu mudah muncul, tapi kehidupan ',h.jsx("em",{children:"cerdas"})," itu sangat langka. Atau mungkin, setiap peradaban cerdas cenderung menghancurkan dirinya sendiri (perang nuklir, perubahan iklim, AI yang lepas kendali) sebelum mereka bisa menjelajah antarbintang."]}),h.jsx("p",{className:"mb-6 text-slate-700 leading-8",children:"Pertanyaannya: Apakah kita sudah melewati saringan itu (kita spesial), atau saringan itu masih ada di depan kita (kita akan punah)?"}),h.jsx("h3",{className:"text-2xl font-bold text-slate-900 mt-10 mb-4",children:"Teori 2: The Dark Forest (Hutan Gelap)"}),h.jsx("p",{className:"mb-6 text-slate-700 leading-8",children:"Dipopulerkan oleh novelis Liu Cixin, teori ini jauh lebih mengerikan. Bayangkan alam semesta adalah hutan gelap di malam hari. Hutan itu penuh dengan pemburu bersenjata (peradaban lain). Jika seorang pemburu menemukan pemburu lain, reaksi pertamanya adalah menembak untuk memastikan keselamatannya sendiri."}),h.jsxs("p",{className:"mb-6 text-slate-700 leading-8",children:["Dalam skenario ini, alasan kenapa alam semesta sunyi bukan karena tidak ada orang, tapi karena semua orang ",h.jsx("strong",{children:"bersembunyi"}),'. Mengirim sinyal ke luar angkasa (seperti yang dilakukan manusia lewat proyek SETI) mungkin adalah tindakan bunuh diri yang bodoh. Kita berteriak di hutan gelap, "Aku di sini!", tanpa tahu apa yang sedang mendengarkan.']}),h.jsx("h3",{className:"text-2xl font-bold text-slate-900 mt-10 mb-4",children:"Teori 3: Hipotesis Kebun Binatang (Zoo Hypothesis)"}),h.jsx("p",{className:"mb-6 text-slate-700 leading-8",children:"Mungkin alien sudah tahu kita ada di sini. Tapi mereka sepakat untuk tidak ikut campur. Mereka mengamati kita seperti kita mengamati hewan di cagar alam atau bakteri di cawan petri. Mereka membiarkan kita berkembang secara alami tanpa intervensi, setidaknya sampai kita mencapai tingkat kematangan tertentu."}),h.jsx("h3",{className:"text-2xl font-bold text-slate-900 mt-10 mb-4",children:"Kesimpulan: Cermin bagi Kemanusiaan"}),h.jsx("p",{className:"mb-6 text-slate-700 leading-8",children:"Apapun jawabannya, Paradoks Fermi memaksa kita untuk melihat diri kita sendiri. Jika kita sendirian, maka kehidupan di Bumi adalah hal paling berharga di seluruh alam semesta, sebuah nyala api kecil yang harus kita jaga mati-matian. Jika kita tidak sendirian, maka kita harus bersiap untuk hari di mana kesunyian itu pecah."}),h.jsx("hr",{className:"my-10 border-slate-200"}),h.jsxs("div",{className:"text-sm text-slate-500",children:[h.jsx("p",{className:"font-bold uppercase tracking-wider mb-2",children:"Sumber & Bacaan Lanjutan:"}),h.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[h.jsx("li",{children:"NASA - Hubble Ultra Deep Field"}),h.jsx("li",{children:"Fermi Paradox - Wikipedia"}),h.jsx("li",{children:'"Wait But Why: The Fermi Paradox" oleh Tim Urban'}),h.jsx("li",{children:'"The Dark Forest" oleh Liu Cixin'})]})]})]})},{id:"great-attractor",title:"The Great Attractor: Monster Gravitasi yang Menarik Kita",subtitle:"Kita sedang bergerak dengan kecepatan 600 km/detik menuju sesuatu yang tidak bisa kita lihat. Apa itu Great Attractor?",category:"Astronomi",date:"15 Desember 2025, 23:45 WIB",readTime:"6 min read",author:"Fanra",image:"https://upload.wikimedia.org/wikipedia/commons/d/d5/Laniakea_slice_equatorial.jpg",content:h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"lead text-xl text-slate-600 font-medium mb-8 leading-relaxed",children:"Bayangkan lo lagi naik mobil di jalan tol yang kosong. Tiba-tiba, lo sadar mobil lodan semua mobil lain di sekitar losedang ditarik ngebut ke arah jurang gelap yang tertutup kabut tebal. Lo gak bisa ngerem, dan lo gak bisa lihat apa yang ada di balik kabut itu."}),h.jsxs("p",{className:"mb-6 text-slate-700 leading-8",children:["Itulah yang sedang terjadi pada Bumi, Matahari, dan seluruh galaksi Bima Sakti saat ini. Kita sedang ditarik oleh sesuatu yang disebut ",h.jsx("strong",{children:"The Great Attractor"})," (Penarik Agung)."]}),h.jsxs("figure",{className:"my-10",children:[h.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/d/d5/Laniakea_slice_equatorial.jpg",alt:"Laniakea Supercluster",className:"w-full rounded-2xl shadow-lg"}),h.jsx("figcaption",{className:"text-center text-xs text-slate-400 mt-3 font-medium",children:"Peta Supergugus Laniakea. Titik merah adalah Great Attractor, menarik ribuan galaksi (garis putih) ke arahnya. (Sumber: Nature Video / R. Brent Tully)"})]}),h.jsx("h3",{className:"text-2xl font-bold text-slate-900 mt-10 mb-4",children:"Zona Penghindaran (Zone of Avoidance)"}),h.jsx("p",{className:"mb-6 text-slate-700 leading-8",children:'Masalah utamanya adalah: Kita tidak bisa melihatnya secara langsung. Kenapa? Karena Great Attractor bersembunyi tepat di balik "Zona Penghindaran". Ini adalah area di langit yang tertutup oleh debu dan gas tebal dari piringan galaksi Bima Sakti kita sendiri.'}),h.jsx("p",{className:"mb-6 text-slate-700 leading-8",children:"Bayangkan lo mau lihat pemandangan di luar jendela, tapi kaca jendelanya kotor banget penuh debu. Itulah posisi para astronom. Selama bertahun-tahun, kita tahu kita bergerak ke arah sana karena anomali gravitasi, tapi kita buta akan apa penyebabnya."}),h.jsx("h3",{className:"text-2xl font-bold text-slate-900 mt-10 mb-4",children:"Apa Sebenarnya Itu?"}),h.jsx("p",{className:"mb-6 text-slate-700 leading-8",children:"Berkat teknologi sinar-X dan radio astronomi (yang bisa menembus debu), kita akhirnya mulai mendapatkan gambaran. Great Attractor bukanlah lubang hitam raksasa tunggal atau monster kosmik fiksi."}),h.jsxs("p",{className:"mb-6 text-slate-700 leading-8",children:["Ini adalah sebuah ",h.jsx("strong",{children:"konsentrasi massa yang sangat besar"}),". Kita bicara tentang ribuan galaksi yang berkumpul di satu titik. Di pusatnya terdapat Gugus Norma (Norma Cluster), dan massa total area ini diperkirakan setara dengan ",h.jsx("strong",{children:"1.000 triliun kali massa Matahari"}),"."]}),h.jsx("div",{className:"bg-slate-50 border-l-4 border-indigo-500 p-6 my-8 rounded-r-xl",children:h.jsx("p",{className:"italic text-slate-600",children:'"Gravitasi tidak kenal ampun. Jarak jutaan tahun cahaya pun tidak bisa menyelamatkan kita dari tarikannya."'})}),h.jsx("h3",{className:"text-2xl font-bold text-slate-900 mt-10 mb-4",children:"Apakah Kita Akan Menabraknya?"}),h.jsx("p",{className:"mb-6 text-slate-700 leading-8",children:"Tenang, jangan panik dulu. Meskipun kita bergerak ke arah sana dengan kecepatan gila (sekitar 600 km/detik atau 2,1 juta km/jam), kita tidak akan pernah sampai di sana."}),h.jsxs("p",{className:"mb-6 text-slate-700 leading-8",children:["Alasannya adalah ",h.jsx("strong",{children:"Energi Gelap"})," (Dark Energy). Alam semesta sedang mengembang dengan percepatan tinggi. Ekspansi alam semesta ini lebih kuat daripada tarikan gravitasi Great Attractor. Jadi, alih-alih menabrak dan hancur, kita dan Great Attractor justru akan saling menjauh seiring berjalannya waktu kosmik."]}),h.jsx("p",{className:"mb-6 text-slate-700 leading-8",children:"Great Attractor mengajarkan kita satu hal: Di alam semesta ini, kita hanyalah debu kecil yang terombang-ambing oleh kekuatan raksasa yang bahkan sulit kita pahami."}),h.jsx("hr",{className:"my-10 border-slate-200"}),h.jsxs("div",{className:"text-sm text-slate-500",children:[h.jsx("p",{className:"font-bold uppercase tracking-wider mb-2",children:"Sumber & Bacaan Lanjutan:"}),h.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[h.jsx("li",{children:'"The Laniakea supercluster of galaxies" - Nature (2014)'}),h.jsx("li",{children:"NASA - The Great Attractor"}),h.jsx("li",{children:"Space.com - What is the Great Attractor?"}),h.jsx("li",{children:"Great Attractor - Wikipedia"})]})]})]})},{id:"voyager-1",title:"Voyager 1: Pesan Botol di Lautan Kosmik",subtitle:"Benda buatan manusia terjauh yang pernah ada. Sendirian di kegelapan, membawa suara Bumi untuk siapa saja yang mungkin mendengarkan.",category:"Sejarah Antariksa",date:"28 November 2025, 22:10 WIB",readTime:"5 min read",author:"Fanra",image:"https://upload.wikimedia.org/wikipedia/commons/b/b6/Voyager_1.jpg",content:h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"lead text-xl text-slate-600 font-medium mb-8 leading-relaxed",children:"Pada tahun 1977, NASA meluncurkan dua wahana antariksa kembar. Misi awalnya sederhana: memotret Jupiter dan Saturnus. Tapi Voyager 1 menolak untuk berhenti. Hari ini, ia adalah benda buatan manusia terjauh yang pernah ada."}),h.jsxs("figure",{className:"my-10",children:[h.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/7/73/Pale_Blue_Dot.png",alt:"Pale Blue Dot",className:"w-full rounded-2xl shadow-lg bg-black p-2"}),h.jsx("figcaption",{className:"text-center text-xs text-slate-400 mt-3 font-medium",children:'"Pale Blue Dot" - Foto Bumi dari jarak 6 miliar kilometer. Titik kecil itu adalah kita. (Sumber: NASA/JPL)'})]}),h.jsx("h3",{className:"text-2xl font-bold text-slate-900 mt-10 mb-4",children:"Golden Record: Salam untuk Alien"}),h.jsxs("p",{className:"mb-6 text-slate-700 leading-8",children:["Voyager 1 tidak pergi dengan tangan kosong. Ia membawa ",h.jsx("strong",{children:"The Golden Record"}),", sebuah piringan tembaga berlapis emas yang berisi suara dan gambar dari Bumi. Ada suara hujan, detak jantung ibu, musik Mozart, Chuck Berry, dan gamelan Jawa dari Indonesia."]}),h.jsx("p",{className:"mb-6 text-slate-700 leading-8",children:'Carl Sagan, yang memimpin proyek ini, menyebutnya sebagai "pesan di dalam botol yang dilemparkan ke lautan kosmik." Jika suatu hari, jutaan tahun dari sekarang, alien menemukan rongsokan Voyager, mereka akan tahu bahwa di sebuah planet biru kecil, pernah ada spesies yang mencoba menjangkau bintang-bintang.'}),h.jsx("hr",{className:"my-10 border-slate-200"}),h.jsxs("div",{className:"text-sm text-slate-500",children:[h.jsx("p",{className:"font-bold uppercase tracking-wider mb-2",children:"Sumber:"}),h.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[h.jsx("li",{children:"NASA Voyager Mission Status"}),h.jsx("li",{children:'"Pale Blue Dot" oleh Carl Sagan'}),h.jsx("li",{children:"Voyager Golden Record - Wikipedia"})]})]})]})}],XC=()=>{const[t,e]=te.useState(null);if(!t)return h.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-12 animate-fade-in",children:[h.jsxs("div",{className:"mb-16 text-center",children:[h.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-slate-900 mb-6 tracking-tight",children:["Insights & ",h.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600",children:"Stories"})]}),h.jsx("p",{className:"text-lg text-slate-500 max-w-2xl mx-auto leading-relaxed",children:"Kumpulan pemikiran mendalam, fakta sains, dan eksplorasi ide yang mungkin bikin lo begadang mikirin alam semesta."})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[l0.map(r=>h.jsxs("div",{onClick:()=>{window.scrollTo(0,0),e(r)},className:"group cursor-pointer flex flex-col h-full",children:[h.jsxs("div",{className:"relative aspect-[4/3] bg-slate-900 rounded-[2rem] overflow-hidden mb-6 shadow-sm group-hover:shadow-xl transition-all duration-500",children:[h.jsx("img",{src:r.image,alt:r.title,className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 to-transparent"}),h.jsx("div",{className:"absolute top-6 left-6",children:h.jsx("span",{className:"bg-white/90 backdrop-blur text-slate-900 text-[10px] font-bold px-3 py-1.5 rounded-full uppercase tracking-wider",children:r.category})})]}),h.jsxs("div",{className:"flex-1 flex flex-col",children:[h.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium text-slate-400 mb-3",children:[h.jsx("span",{children:r.date}),h.jsx("span",{children:""}),h.jsx("span",{children:r.readTime})]}),h.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3 leading-tight group-hover:text-blue-600 transition-colors",children:r.title}),h.jsx("p",{className:"text-slate-500 line-clamp-3 leading-relaxed mb-6",children:r.subtitle}),h.jsxs("div",{className:"mt-auto flex items-center text-sm font-bold text-slate-900 group-hover:translate-x-2 transition-transform duration-300",children:["Baca Selengkapnya ",h.jsx(Zs,{className:"w-4 h-4 ml-2"})]})]})]},r.id)),h.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-[2rem] flex flex-col items-center justify-center p-8 text-center min-h-[400px]",children:[h.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4 text-slate-300",children:h.jsx(EC,{className:"w-6 h-6"})}),h.jsx("h3",{className:"font-bold text-slate-400 mb-2",children:"Tulisan Mendatang"}),h.jsx("p",{className:"text-sm text-slate-400 max-w-xs mx-auto",children:"Artikel tentang AI Consciousness, Sejarah Internet, dan Psikologi Warna sedang ditulis..."})]})]})]});const n=l0.filter(r=>r.id!==t.id);return h.jsx("article",{className:"min-h-screen bg-white animate-fade-in pb-20",children:h.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-12",children:[h.jsxs("button",{onClick:()=>{window.scrollTo(0,0),e(null)},className:"group flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-900 mb-10 transition-colors",children:[h.jsx("div",{className:"w-8 h-8 rounded-full border border-slate-200 flex items-center justify-center group-hover:bg-slate-100 transition-colors",children:h.jsx(za,{className:"w-4 h-4"})}),"Kembali"]}),h.jsxs("header",{className:"mb-12",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-bold uppercase tracking-wider",children:t.category}),h.jsx("span",{className:"text-slate-400 text-sm font-medium",children:t.readTime})]}),h.jsx("h1",{className:"text-3xl md:text-5xl font-black text-slate-900 mb-6 leading-tight tracking-tight",children:t.title}),h.jsx("p",{className:"text-lg md:text-xl text-slate-500 leading-relaxed font-medium",children:t.subtitle}),h.jsxs("div",{className:"flex items-center gap-4 mt-8 pt-8 border-t border-slate-100",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-900 text-white flex items-center justify-center font-bold text-sm",children:"F"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-bold text-slate-900",children:t.author}),h.jsx("p",{className:"text-xs text-slate-500",children:t.date})]})]})]}),h.jsx("div",{className:"prose prose-lg prose-slate max-w-none mb-20",children:t.content}),n.length>0&&h.jsxs("div",{className:"border-t border-slate-200 pt-12 mt-12",children:[h.jsx("h3",{className:"text-xl font-black text-slate-900 mb-8 tracking-tight",children:"Baca Artikel Lainnya"}),h.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:n.map(r=>h.jsxs("div",{onClick:()=>{window.scrollTo(0,0),e(r)},className:"group cursor-pointer flex flex-col",children:[h.jsxs("div",{className:"relative aspect-[16/9] bg-slate-100 rounded-2xl overflow-hidden mb-4 shadow-sm group-hover:shadow-md transition-all",children:[h.jsx("img",{src:r.image,alt:r.title,className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 group-hover:scale-105 transition-all duration-500"}),h.jsx("div",{className:"absolute top-3 left-3",children:h.jsx("span",{className:"bg-white/90 backdrop-blur text-slate-900 text-[9px] font-bold px-2 py-1 rounded-full uppercase tracking-wider",children:r.category})})]}),h.jsx("h4",{className:"font-bold text-slate-900 text-lg leading-tight mb-2 group-hover:text-blue-600 transition-colors",children:r.title}),h.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 leading-relaxed",children:r.subtitle})]},r.id))})]})]})})};var u0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ZC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},wx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,g=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(m=64)),r.push(n[d],n[g],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_x(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||g==null)throw new ek;const m=s<<2|a>>4;if(r.push(m),u!==64){const y=a<<4&240|u>>2;if(r.push(y),g!==64){const x=u<<6&192|g;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ek extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tk=function(t){const e=_x(t);return wx.encodeByteArray(e,!0)},Lu=function(t){return tk(t).replace(/\./g,"")},nk=function(t){try{return wx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=()=>rk().__FIREBASE_DEFAULTS__,sk=()=>{if(typeof process>"u"||typeof u0>"u")return;const t=u0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ok=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nk(t[1]);return e&&JSON.parse(e)},Ep=()=>{try{return ik()||sk()||ok()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ak=t=>{var e,n;return(n=(e=Ep())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},lk=t=>{const e=ak(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},xx=()=>{var t;return(t=Ep())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lu(JSON.stringify(n)),Lu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hk(){var t;const e=(t=Ep())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pk(){return!hk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ex(){try{return typeof indexedDB=="object"}catch{return!1}}function Tx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function mk(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="FirebaseError";class Ti extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gk,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wc.prototype.create)}}class wc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?yk(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ti(i,a,r)}}function yk(t,e){return t.replace(vk,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vk=/\{\$([^}]+)}/g;function Vu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(c0(s)&&c0(o)){if(!Vu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function c0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=1e3,wk=2,xk=4*60*60*1e3,Ek=.5;function d0(t,e=_k,n=wk){const r=e*Math.pow(n,t),i=Math.round(Ek*r*(Math.random()-.5)*2);return Math.min(xk,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t){return t&&t._delegate?t._delegate:t}class Dr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ik(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bi){return this.instances.has(e)}getOptions(e=Bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Sk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bi){return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sk(t){return t===Bi?void 0:t}function Ik(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Tk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const kk={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},Ak=He.INFO,bk={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},Rk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=bk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tp{constructor(e){this.name=e,this._logLevel=Ak,this._logHandler=Rk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const Nk=(t,e)=>e.some(n=>t instanceof n);let h0,f0;function Pk(){return h0||(h0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mk(){return f0||(f0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sx=new WeakMap,jh=new WeakMap,Ix=new WeakMap,Pd=new WeakMap,Sp=new WeakMap;function Dk(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ui(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Sx.set(n,t)}).catch(()=>{}),Sp.set(e,t),e}function Lk(t){if(jh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});jh.set(t,e)}let zh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ix.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ui(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Vk(t){zh=t(zh)}function Fk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Md(this),e,...n);return Ix.set(r,e.sort?e.sort():[e]),ui(r)}:Mk().includes(t)?function(...e){return t.apply(Md(this),e),ui(Sx.get(this))}:function(...e){return ui(t.apply(Md(this),e))}}function Uk(t){return typeof t=="function"?Fk(t):(t instanceof IDBTransaction&&Lk(t),Nk(t,Pk())?new Proxy(t,zh):t)}function ui(t){if(t instanceof IDBRequest)return Dk(t);if(Pd.has(t))return Pd.get(t);const e=Uk(t);return e!==t&&(Pd.set(t,e),Sp.set(e,t)),e}const Md=t=>Sp.get(t);function Cx(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ui(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ui(o.result),l.oldVersion,l.newVersion,ui(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Bk=["get","getKey","getAll","getAllKeys","count"],Ok=["put","add","delete","clear"],Dd=new Map;function p0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dd.get(e))return Dd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Ok.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Bk.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Dd.set(e,s),s}Vk(t=>({...t,get:(e,n,r)=>p0(e,n)||t.get(e,n,r),has:(e,n)=>!!p0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gh="@firebase/app",m0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new Tp("@firebase/app"),Gk="@firebase/app-compat",Hk="@firebase/analytics-compat",qk="@firebase/analytics",$k="@firebase/app-check-compat",Wk="@firebase/app-check",Kk="@firebase/auth",Jk="@firebase/auth-compat",Yk="@firebase/database",Qk="@firebase/data-connect",Xk="@firebase/database-compat",Zk="@firebase/functions",eA="@firebase/functions-compat",tA="@firebase/installations",nA="@firebase/installations-compat",rA="@firebase/messaging",iA="@firebase/messaging-compat",sA="@firebase/performance",oA="@firebase/performance-compat",aA="@firebase/remote-config",lA="@firebase/remote-config-compat",uA="@firebase/storage",cA="@firebase/storage-compat",dA="@firebase/firestore",hA="@firebase/vertexai-preview",fA="@firebase/firestore-compat",pA="firebase",mA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="[DEFAULT]",gA={[Gh]:"fire-core",[Gk]:"fire-core-compat",[qk]:"fire-analytics",[Hk]:"fire-analytics-compat",[Wk]:"fire-app-check",[$k]:"fire-app-check-compat",[Kk]:"fire-auth",[Jk]:"fire-auth-compat",[Yk]:"fire-rtdb",[Qk]:"fire-data-connect",[Xk]:"fire-rtdb-compat",[Zk]:"fire-fn",[eA]:"fire-fn-compat",[tA]:"fire-iid",[nA]:"fire-iid-compat",[rA]:"fire-fcm",[iA]:"fire-fcm-compat",[sA]:"fire-perf",[oA]:"fire-perf-compat",[aA]:"fire-rc",[lA]:"fire-rc-compat",[uA]:"fire-gcs",[cA]:"fire-gcs-compat",[dA]:"fire-fst",[fA]:"fire-fst-compat",[hA]:"fire-vertex","fire-js":"fire-js",[pA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new Map,yA=new Map,qh=new Map;function g0(t,e){try{t.container.addComponent(e)}catch(n){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pi(t){const e=t.name;if(qh.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;qh.set(e,t);for(const n of Fu.values())g0(n,t);for(const n of yA.values())g0(n,t);return!0}function Ga(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ci=new wc("app","Firebase",vA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=mA;function kx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ci.create("bad-app-name",{appName:String(i)});if(n||(n=xx()),!n)throw ci.create("no-options");const s=Fu.get(i);if(s){if(Vu(n,s.options)&&Vu(r,s.config))return s;throw ci.create("duplicate-app",{appName:i})}const o=new Ck(i);for(const l of qh.values())o.addComponent(l);const a=new _A(n,r,o);return Fu.set(i,a),a}function Ax(t=Hh){const e=Fu.get(t);if(!e&&t===Hh&&xx())return kx();if(!e)throw ci.create("no-app",{appName:t});return e}function mr(t,e,n){var r;let i=(r=gA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(a.join(" "));return}pi(new Dr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="firebase-heartbeat-database",EA=1,Aa="firebase-heartbeat-store";let Ld=null;function bx(){return Ld||(Ld=Cx(xA,EA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Aa)}catch(n){console.warn(n)}}}}).catch(t=>{throw ci.create("idb-open",{originalErrorMessage:t.message})})),Ld}async function TA(t){try{const n=(await bx()).transaction(Aa),r=await n.objectStore(Aa).get(Rx(t));return await n.done,r}catch(e){if(e instanceof Ti)Lr.warn(e.message);else{const n=ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(n.message)}}}async function y0(t,e){try{const r=(await bx()).transaction(Aa,"readwrite");await r.objectStore(Aa).put(e,Rx(t)),await r.done}catch(n){if(n instanceof Ti)Lr.warn(n.message);else{const r=ci.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Lr.warn(r.message)}}}function Rx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=1024,IA=30*24*60*60*1e3;class CA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new AA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=v0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=IA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Lr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=v0(),{heartbeatsToSend:r,unsentEntries:i}=kA(this._heartbeatsCache.heartbeats),s=Lu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Lr.warn(n),""}}}function v0(){return new Date().toISOString().substring(0,10)}function kA(t,e=SA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class AA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ex()?Tx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return y0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return y0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function _0(t){return Lu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){pi(new Dr("platform-logger",e=>new jk(e),"PRIVATE")),pi(new Dr("heartbeat",e=>new CA(e),"PRIVATE")),mr(Gh,m0,t),mr(Gh,m0,"esm2017"),mr("fire-js","")}bA("");var RA="firebase",NA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(RA,NA,"app");const Nx="@firebase/installations",Ip="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=1e4,Mx=`w:${Ip}`,Dx="FIS_v2",PA="https://firebaseinstallations.googleapis.com/v1",MA=60*60*1e3,DA="installations",LA="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},es=new wc(DA,LA,VA);function Lx(t){return t instanceof Ti&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx({projectId:t}){return`${PA}/projects/${t}/installations`}function Fx(t){return{token:t.token,requestStatus:2,expiresIn:UA(t.expiresIn),creationTime:Date.now()}}async function Ux(t,e){const r=(await e.json()).error;return es.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Bx({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function FA(t,{refreshToken:e}){const n=Bx(t);return n.append("Authorization",BA(e)),n}async function Ox(t){const e=await t();return e.status>=500&&e.status<600?t():e}function UA(t){return Number(t.replace("s","000"))}function BA(t){return`${Dx} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Vx(t),i=Bx(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:Dx,appId:t.appId,sdkVersion:Mx},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await Ox(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Fx(u.authToken)}}else throw await Ux("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=/^[cdef][\w-]{21}$/,$h="";function GA(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=HA(t);return zA.test(n)?n:$h}catch{return $h}}function HA(t){return jA(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=new Map;function Gx(t,e){const n=xc(t);Hx(n,e),qA(n,e)}function Hx(t,e){const n=zx.get(t);if(n)for(const r of n)r(e)}function qA(t,e){const n=$A();n&&n.postMessage({key:t,fid:e}),WA()}let Hi=null;function $A(){return!Hi&&"BroadcastChannel"in self&&(Hi=new BroadcastChannel("[Firebase] FID Change"),Hi.onmessage=t=>{Hx(t.data.key,t.data.fid)}),Hi}function WA(){zx.size===0&&Hi&&(Hi.close(),Hi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="firebase-installations-database",JA=1,ts="firebase-installations-store";let Vd=null;function Cp(){return Vd||(Vd=Cx(KA,JA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ts)}}})),Vd}async function Uu(t,e){const n=xc(t),i=(await Cp()).transaction(ts,"readwrite"),s=i.objectStore(ts),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&Gx(t,e.fid),e}async function qx(t){const e=xc(t),r=(await Cp()).transaction(ts,"readwrite");await r.objectStore(ts).delete(e),await r.done}async function Ec(t,e){const n=xc(t),i=(await Cp()).transaction(ts,"readwrite"),s=i.objectStore(ts),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&Gx(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kp(t){let e;const n=await Ec(t.appConfig,r=>{const i=YA(r),s=QA(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===$h?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function YA(t){const e=t||{fid:GA(),registrationStatus:0};return $x(e)}function QA(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(es.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=XA(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ZA(t)}:{installationEntry:e}}async function XA(t,e){try{const n=await OA(t,e);return Uu(t.appConfig,n)}catch(n){throw Lx(n)&&n.customData.serverCode===409?await qx(t.appConfig):await Uu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ZA(t){let e=await w0(t.appConfig);for(;e.registrationStatus===1;)await jx(100),e=await w0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await kp(t);return r||n}return e}function w0(t){return Ec(t,e=>{if(!e)throw es.create("installation-not-found");return $x(e)})}function $x(t){return e2(t)?{fid:t.fid,registrationStatus:0}:t}function e2(t){return t.registrationStatus===1&&t.registrationTime+Px<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2({appConfig:t,heartbeatServiceProvider:e},n){const r=n2(t,n),i=FA(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:Mx,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await Ox(()=>fetch(r,a));if(l.ok){const u=await l.json();return Fx(u)}else throw await Ux("Generate Auth Token",l)}function n2(t,{fid:e}){return`${Vx(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ap(t,e=!1){let n;const r=await Ec(t.appConfig,s=>{if(!Wx(s))throw es.create("not-registered");const o=s.authToken;if(!e&&s2(o))return s;if(o.requestStatus===1)return n=r2(t,e),s;{if(!navigator.onLine)throw es.create("app-offline");const a=a2(s);return n=i2(t,a),a}});return n?await n:r.authToken}async function r2(t,e){let n=await x0(t.appConfig);for(;n.authToken.requestStatus===1;)await jx(100),n=await x0(t.appConfig);const r=n.authToken;return r.requestStatus===0?Ap(t,e):r}function x0(t){return Ec(t,e=>{if(!Wx(e))throw es.create("not-registered");const n=e.authToken;return l2(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function i2(t,e){try{const n=await t2(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Uu(t.appConfig,r),n}catch(n){if(Lx(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await qx(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Uu(t.appConfig,r)}throw n}}function Wx(t){return t!==void 0&&t.registrationStatus===2}function s2(t){return t.requestStatus===2&&!o2(t)}function o2(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+MA}function a2(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function l2(t){return t.requestStatus===1&&t.requestTime+Px<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(t){const e=t,{installationEntry:n,registrationPromise:r}=await kp(e);return r?r.catch(console.error):Ap(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2(t,e=!1){const n=t;return await d2(n),(await Ap(n,e)).token}async function d2(t){const{registrationPromise:e}=await kp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t){if(!t||!t.options)throw Fd("App Configuration");if(!t.name)throw Fd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Fd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Fd(t){return es.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="installations",f2="installations-internal",p2=t=>{const e=t.getProvider("app").getImmediate(),n=h2(e),r=Ga(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},m2=t=>{const e=t.getProvider("app").getImmediate(),n=Ga(e,Kx).getImmediate();return{getId:()=>u2(n),getToken:i=>c2(n,i)}};function g2(){pi(new Dr(Kx,p2,"PUBLIC")),pi(new Dr(f2,m2,"PRIVATE"))}g2();mr(Nx,Ip);mr(Nx,Ip,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu="analytics",y2="firebase_id",v2="origin",_2=60*1e3,w2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn=new Tp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vn=new wc("analytics","Analytics",x2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t){if(!t.startsWith(bp)){const e=Vn.create("invalid-gtag-resource",{gtagURL:t});return kn.warn(e.message),""}return t}function Jx(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function T2(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function S2(t,e){const n=T2("firebase-js-sdk-policy",{createScriptURL:E2}),r=document.createElement("script"),i=`${bp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function I2(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function C2(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await Jx(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){kn.error(a)}t("config",i,s)}async function k2(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await Jx(n);for(const l of o){const u=a.find(g=>g.measurementId===l),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){kn.error(s)}}function A2(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await k2(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await C2(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){kn.error(a)}}return i}function b2(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=A2(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function R2(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(bp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=30,P2=1e3;class M2{constructor(e={},n=P2){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Yx=new M2;function D2(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function L2(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:D2(r)},s=w2.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Vn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function V2(t,e=Yx,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Vn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Vn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new B2;return setTimeout(async()=>{a.abort()},_2),Qx({appId:r,apiKey:i,measurementId:s},o,a,e)}async function Qx(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=Yx){var s;const{appId:o,measurementId:a}=t;try{await F2(r,e)}catch(l){if(a)return kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await L2(t);return i.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!U2(u)){if(i.deleteThrottleMetadata(o),a)return kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const d=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?d0(n,i.intervalMillis,N2):d0(n,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,g),kn.debug(`Calling attemptFetch again in ${d} millis`),Qx(t,g,r,i)}}function F2(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Vn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function U2(t){if(!(t instanceof Ti)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class B2{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function O2(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(){if(Ex())try{await Tx()}catch(t){return kn.warn(Vn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return kn.warn(Vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function z2(t,e,n,r,i,s,o){var a;const l=V2(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&kn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>kn.error(y)),e.push(l);const u=j2().then(y=>{if(y)return r.getId()}),[d,g]=await Promise.all([l,u]);R2(s)||S2(s,d.measurementId),i("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[v2]="firebase",m.update=!0,g!=null&&(m[y2]=g),i("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.app=e}_delete(){return delete oa[this.app.options.appId],Promise.resolve()}}let oa={},E0=[];const T0={};let Ud="dataLayer",H2="gtag",S0,Xx,I0=!1;function q2(){const t=[];if(fk()&&t.push("This is a browser extension environment."),mk()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Vn.create("invalid-analytics-context",{errorInfo:e});kn.warn(n.message)}}function $2(t,e,n){q2();const r=t.options.appId;if(!r)throw Vn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vn.create("no-api-key");if(oa[r]!=null)throw Vn.create("already-exists",{id:r});if(!I0){I2(Ud);const{wrappedGtag:s,gtagCore:o}=b2(oa,E0,T0,Ud,H2);Xx=s,S0=o,I0=!0}return oa[r]=z2(t,E0,T0,e,S0,Ud,n),new G2(t)}function W2(t=Ax()){t=Un(t);const e=Ga(t,Bu);return e.isInitialized()?e.getImmediate():K2(t)}function K2(t,e={}){const n=Ga(t,Bu);if(n.isInitialized()){const i=n.getImmediate();if(Vu(e,n.getOptions()))return i;throw Vn.create("already-initialized")}return n.initialize({options:e})}function J2(t,e,n,r){t=Un(t),O2(Xx,oa[t.app.options.appId],e,n,r).catch(i=>kn.error(i))}const C0="@firebase/analytics",k0="0.10.8";function Y2(){pi(new Dr(Bu,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return $2(r,i,n)},"PUBLIC")),pi(new Dr("analytics-internal",t,"PRIVATE")),mr(C0,k0),mr(C0,k0,"esm2017");function t(e){try{const n=e.getProvider(Bu).getImmediate();return{logEvent:(r,i,s)=>J2(n,r,i,s)}}catch(n){throw Vn.create("interop-component-reg-failed",{reason:n})}}}Y2();var A0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ki,Zx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,R){function k(){}k.prototype=R.prototype,A.D=R.prototype,A.prototype=new k,A.prototype.constructor=A,A.C=function(D,F,N){for(var M=Array(arguments.length-2),b=2;b<arguments.length;b++)M[b-2]=arguments[b];return R.prototype[F].apply(D,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,R,k){k||(k=0);var D=Array(16);if(typeof R=="string")for(var F=0;16>F;++F)D[F]=R.charCodeAt(k++)|R.charCodeAt(k++)<<8|R.charCodeAt(k++)<<16|R.charCodeAt(k++)<<24;else for(F=0;16>F;++F)D[F]=R[k++]|R[k++]<<8|R[k++]<<16|R[k++]<<24;R=A.g[0],k=A.g[1],F=A.g[2];var N=A.g[3],M=R+(N^k&(F^N))+D[0]+3614090360&4294967295;R=k+(M<<7&4294967295|M>>>25),M=N+(F^R&(k^F))+D[1]+3905402710&4294967295,N=R+(M<<12&4294967295|M>>>20),M=F+(k^N&(R^k))+D[2]+606105819&4294967295,F=N+(M<<17&4294967295|M>>>15),M=k+(R^F&(N^R))+D[3]+3250441966&4294967295,k=F+(M<<22&4294967295|M>>>10),M=R+(N^k&(F^N))+D[4]+4118548399&4294967295,R=k+(M<<7&4294967295|M>>>25),M=N+(F^R&(k^F))+D[5]+1200080426&4294967295,N=R+(M<<12&4294967295|M>>>20),M=F+(k^N&(R^k))+D[6]+2821735955&4294967295,F=N+(M<<17&4294967295|M>>>15),M=k+(R^F&(N^R))+D[7]+4249261313&4294967295,k=F+(M<<22&4294967295|M>>>10),M=R+(N^k&(F^N))+D[8]+1770035416&4294967295,R=k+(M<<7&4294967295|M>>>25),M=N+(F^R&(k^F))+D[9]+2336552879&4294967295,N=R+(M<<12&4294967295|M>>>20),M=F+(k^N&(R^k))+D[10]+4294925233&4294967295,F=N+(M<<17&4294967295|M>>>15),M=k+(R^F&(N^R))+D[11]+2304563134&4294967295,k=F+(M<<22&4294967295|M>>>10),M=R+(N^k&(F^N))+D[12]+1804603682&4294967295,R=k+(M<<7&4294967295|M>>>25),M=N+(F^R&(k^F))+D[13]+4254626195&4294967295,N=R+(M<<12&4294967295|M>>>20),M=F+(k^N&(R^k))+D[14]+2792965006&4294967295,F=N+(M<<17&4294967295|M>>>15),M=k+(R^F&(N^R))+D[15]+1236535329&4294967295,k=F+(M<<22&4294967295|M>>>10),M=R+(F^N&(k^F))+D[1]+4129170786&4294967295,R=k+(M<<5&4294967295|M>>>27),M=N+(k^F&(R^k))+D[6]+3225465664&4294967295,N=R+(M<<9&4294967295|M>>>23),M=F+(R^k&(N^R))+D[11]+643717713&4294967295,F=N+(M<<14&4294967295|M>>>18),M=k+(N^R&(F^N))+D[0]+3921069994&4294967295,k=F+(M<<20&4294967295|M>>>12),M=R+(F^N&(k^F))+D[5]+3593408605&4294967295,R=k+(M<<5&4294967295|M>>>27),M=N+(k^F&(R^k))+D[10]+38016083&4294967295,N=R+(M<<9&4294967295|M>>>23),M=F+(R^k&(N^R))+D[15]+3634488961&4294967295,F=N+(M<<14&4294967295|M>>>18),M=k+(N^R&(F^N))+D[4]+3889429448&4294967295,k=F+(M<<20&4294967295|M>>>12),M=R+(F^N&(k^F))+D[9]+568446438&4294967295,R=k+(M<<5&4294967295|M>>>27),M=N+(k^F&(R^k))+D[14]+3275163606&4294967295,N=R+(M<<9&4294967295|M>>>23),M=F+(R^k&(N^R))+D[3]+4107603335&4294967295,F=N+(M<<14&4294967295|M>>>18),M=k+(N^R&(F^N))+D[8]+1163531501&4294967295,k=F+(M<<20&4294967295|M>>>12),M=R+(F^N&(k^F))+D[13]+2850285829&4294967295,R=k+(M<<5&4294967295|M>>>27),M=N+(k^F&(R^k))+D[2]+4243563512&4294967295,N=R+(M<<9&4294967295|M>>>23),M=F+(R^k&(N^R))+D[7]+1735328473&4294967295,F=N+(M<<14&4294967295|M>>>18),M=k+(N^R&(F^N))+D[12]+2368359562&4294967295,k=F+(M<<20&4294967295|M>>>12),M=R+(k^F^N)+D[5]+4294588738&4294967295,R=k+(M<<4&4294967295|M>>>28),M=N+(R^k^F)+D[8]+2272392833&4294967295,N=R+(M<<11&4294967295|M>>>21),M=F+(N^R^k)+D[11]+1839030562&4294967295,F=N+(M<<16&4294967295|M>>>16),M=k+(F^N^R)+D[14]+4259657740&4294967295,k=F+(M<<23&4294967295|M>>>9),M=R+(k^F^N)+D[1]+2763975236&4294967295,R=k+(M<<4&4294967295|M>>>28),M=N+(R^k^F)+D[4]+1272893353&4294967295,N=R+(M<<11&4294967295|M>>>21),M=F+(N^R^k)+D[7]+4139469664&4294967295,F=N+(M<<16&4294967295|M>>>16),M=k+(F^N^R)+D[10]+3200236656&4294967295,k=F+(M<<23&4294967295|M>>>9),M=R+(k^F^N)+D[13]+681279174&4294967295,R=k+(M<<4&4294967295|M>>>28),M=N+(R^k^F)+D[0]+3936430074&4294967295,N=R+(M<<11&4294967295|M>>>21),M=F+(N^R^k)+D[3]+3572445317&4294967295,F=N+(M<<16&4294967295|M>>>16),M=k+(F^N^R)+D[6]+76029189&4294967295,k=F+(M<<23&4294967295|M>>>9),M=R+(k^F^N)+D[9]+3654602809&4294967295,R=k+(M<<4&4294967295|M>>>28),M=N+(R^k^F)+D[12]+3873151461&4294967295,N=R+(M<<11&4294967295|M>>>21),M=F+(N^R^k)+D[15]+530742520&4294967295,F=N+(M<<16&4294967295|M>>>16),M=k+(F^N^R)+D[2]+3299628645&4294967295,k=F+(M<<23&4294967295|M>>>9),M=R+(F^(k|~N))+D[0]+4096336452&4294967295,R=k+(M<<6&4294967295|M>>>26),M=N+(k^(R|~F))+D[7]+1126891415&4294967295,N=R+(M<<10&4294967295|M>>>22),M=F+(R^(N|~k))+D[14]+2878612391&4294967295,F=N+(M<<15&4294967295|M>>>17),M=k+(N^(F|~R))+D[5]+4237533241&4294967295,k=F+(M<<21&4294967295|M>>>11),M=R+(F^(k|~N))+D[12]+1700485571&4294967295,R=k+(M<<6&4294967295|M>>>26),M=N+(k^(R|~F))+D[3]+2399980690&4294967295,N=R+(M<<10&4294967295|M>>>22),M=F+(R^(N|~k))+D[10]+4293915773&4294967295,F=N+(M<<15&4294967295|M>>>17),M=k+(N^(F|~R))+D[1]+2240044497&4294967295,k=F+(M<<21&4294967295|M>>>11),M=R+(F^(k|~N))+D[8]+1873313359&4294967295,R=k+(M<<6&4294967295|M>>>26),M=N+(k^(R|~F))+D[15]+4264355552&4294967295,N=R+(M<<10&4294967295|M>>>22),M=F+(R^(N|~k))+D[6]+2734768916&4294967295,F=N+(M<<15&4294967295|M>>>17),M=k+(N^(F|~R))+D[13]+1309151649&4294967295,k=F+(M<<21&4294967295|M>>>11),M=R+(F^(k|~N))+D[4]+4149444226&4294967295,R=k+(M<<6&4294967295|M>>>26),M=N+(k^(R|~F))+D[11]+3174756917&4294967295,N=R+(M<<10&4294967295|M>>>22),M=F+(R^(N|~k))+D[2]+718787259&4294967295,F=N+(M<<15&4294967295|M>>>17),M=k+(N^(F|~R))+D[9]+3951481745&4294967295,A.g[0]=A.g[0]+R&4294967295,A.g[1]=A.g[1]+(F+(M<<21&4294967295|M>>>11))&4294967295,A.g[2]=A.g[2]+F&4294967295,A.g[3]=A.g[3]+N&4294967295}r.prototype.u=function(A,R){R===void 0&&(R=A.length);for(var k=R-this.blockSize,D=this.B,F=this.h,N=0;N<R;){if(F==0)for(;N<=k;)i(this,A,N),N+=this.blockSize;if(typeof A=="string"){for(;N<R;)if(D[F++]=A.charCodeAt(N++),F==this.blockSize){i(this,D),F=0;break}}else for(;N<R;)if(D[F++]=A[N++],F==this.blockSize){i(this,D),F=0;break}}this.h=F,this.o+=R},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var R=1;R<A.length-8;++R)A[R]=0;var k=8*this.o;for(R=A.length-8;R<A.length;++R)A[R]=k&255,k/=256;for(this.u(A),A=Array(16),R=k=0;4>R;++R)for(var D=0;32>D;D+=8)A[k++]=this.g[R]>>>D&255;return A};function s(A,R){var k=a;return Object.prototype.hasOwnProperty.call(k,A)?k[A]:k[A]=R(A)}function o(A,R){this.h=R;for(var k=[],D=!0,F=A.length-1;0<=F;F--){var N=A[F]|0;D&&N==R||(k[F]=N,D=!1)}this.g=k}var a={};function l(A){return-128<=A&&128>A?s(A,function(R){return new o([R|0],0>R?-1:0)}):new o([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return g;if(0>A)return T(u(-A));for(var R=[],k=1,D=0;A>=k;D++)R[D]=A/k|0,k*=4294967296;return new o(R,0)}function d(A,R){if(A.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(A.charAt(0)=="-")return T(d(A.substring(1),R));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(R,8)),D=g,F=0;F<A.length;F+=8){var N=Math.min(8,A.length-F),M=parseInt(A.substring(F,F+N),R);8>N?(N=u(Math.pow(R,N)),D=D.j(N).add(u(M))):(D=D.j(k),D=D.add(u(M)))}return D}var g=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-T(this).m();for(var A=0,R=1,k=0;k<this.g.length;k++){var D=this.i(k);A+=(0<=D?D:4294967296+D)*R,R*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(x(this))return"0";if(_(this))return"-"+T(this).toString(A);for(var R=u(Math.pow(A,6)),k=this,D="";;){var F=P(k,R).g;k=v(k,F.j(R));var N=((0<k.g.length?k.g[0]:k.h)>>>0).toString(A);if(k=F,x(k))return N+D;for(;6>N.length;)N="0"+N;D=N+D}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function x(A){if(A.h!=0)return!1;for(var R=0;R<A.g.length;R++)if(A.g[R]!=0)return!1;return!0}function _(A){return A.h==-1}t.l=function(A){return A=v(this,A),_(A)?-1:x(A)?0:1};function T(A){for(var R=A.g.length,k=[],D=0;D<R;D++)k[D]=~A.g[D];return new o(k,~A.h).add(m)}t.abs=function(){return _(this)?T(this):this},t.add=function(A){for(var R=Math.max(this.g.length,A.g.length),k=[],D=0,F=0;F<=R;F++){var N=D+(this.i(F)&65535)+(A.i(F)&65535),M=(N>>>16)+(this.i(F)>>>16)+(A.i(F)>>>16);D=M>>>16,N&=65535,M&=65535,k[F]=M<<16|N}return new o(k,k[k.length-1]&-2147483648?-1:0)};function v(A,R){return A.add(T(R))}t.j=function(A){if(x(this)||x(A))return g;if(_(this))return _(A)?T(this).j(T(A)):T(T(this).j(A));if(_(A))return T(this.j(T(A)));if(0>this.l(y)&&0>A.l(y))return u(this.m()*A.m());for(var R=this.g.length+A.g.length,k=[],D=0;D<2*R;D++)k[D]=0;for(D=0;D<this.g.length;D++)for(var F=0;F<A.g.length;F++){var N=this.i(D)>>>16,M=this.i(D)&65535,b=A.i(F)>>>16,J=A.i(F)&65535;k[2*D+2*F]+=M*J,E(k,2*D+2*F),k[2*D+2*F+1]+=N*J,E(k,2*D+2*F+1),k[2*D+2*F+1]+=M*b,E(k,2*D+2*F+1),k[2*D+2*F+2]+=N*b,E(k,2*D+2*F+2)}for(D=0;D<R;D++)k[D]=k[2*D+1]<<16|k[2*D];for(D=R;D<2*R;D++)k[D]=0;return new o(k,0)};function E(A,R){for(;(A[R]&65535)!=A[R];)A[R+1]+=A[R]>>>16,A[R]&=65535,R++}function S(A,R){this.g=A,this.h=R}function P(A,R){if(x(R))throw Error("division by zero");if(x(A))return new S(g,g);if(_(A))return R=P(T(A),R),new S(T(R.g),T(R.h));if(_(R))return R=P(A,T(R)),new S(T(R.g),R.h);if(30<A.g.length){if(_(A)||_(R))throw Error("slowDivide_ only works with positive integers.");for(var k=m,D=R;0>=D.l(A);)k=V(k),D=V(D);var F=O(k,1),N=O(D,1);for(D=O(D,2),k=O(k,2);!x(D);){var M=N.add(D);0>=M.l(A)&&(F=F.add(k),N=M),D=O(D,1),k=O(k,1)}return R=v(A,F.j(R)),new S(F,R)}for(F=g;0<=A.l(R);){for(k=Math.max(1,Math.floor(A.m()/R.m())),D=Math.ceil(Math.log(k)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),N=u(k),M=N.j(R);_(M)||0<M.l(A);)k-=D,N=u(k),M=N.j(R);x(N)&&(N=m),F=F.add(N),A=v(A,M)}return new S(F,A)}t.A=function(A){return P(this,A).h},t.and=function(A){for(var R=Math.max(this.g.length,A.g.length),k=[],D=0;D<R;D++)k[D]=this.i(D)&A.i(D);return new o(k,this.h&A.h)},t.or=function(A){for(var R=Math.max(this.g.length,A.g.length),k=[],D=0;D<R;D++)k[D]=this.i(D)|A.i(D);return new o(k,this.h|A.h)},t.xor=function(A){for(var R=Math.max(this.g.length,A.g.length),k=[],D=0;D<R;D++)k[D]=this.i(D)^A.i(D);return new o(k,this.h^A.h)};function V(A){for(var R=A.g.length+1,k=[],D=0;D<R;D++)k[D]=A.i(D)<<1|A.i(D-1)>>>31;return new o(k,A.h)}function O(A,R){var k=R>>5;R%=32;for(var D=A.g.length-k,F=[],N=0;N<D;N++)F[N]=0<R?A.i(N+k)>>>R|A.i(N+k+1)<<32-R:A.i(N+k);return new o(F,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Zx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Ki=o}).apply(typeof A0<"u"?A0:typeof self<"u"?self:typeof window<"u"?window:{});var Pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eE,qo,tE,nu,Wh,nE,rE,iE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,w,I){return f==Array.prototype||f==Object.prototype||(f[w]=I.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pl=="object"&&Pl];for(var w=0;w<f.length;++w){var I=f[w];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(f,w){if(w)e:{var I=r;f=f.split(".");for(var L=0;L<f.length-1;L++){var $=f[L];if(!($ in I))break e;I=I[$]}f=f[f.length-1],L=I[f],w=w(L),w!=L&&w!=null&&e(I,f,{configurable:!0,writable:!0,value:w})}}function s(f,w){f instanceof String&&(f+="");var I=0,L=!1,$={next:function(){if(!L&&I<f.length){var X=I++;return{value:w(X,f[X]),done:!1}}return L=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(f){return f||function(){return s(this,function(w,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var w=typeof f;return w=w!="object"?w:f?Array.isArray(f)?"array":w:"null",w=="array"||w=="object"&&typeof f.length=="number"}function u(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function d(f,w,I){return f.call.apply(f.bind,arguments)}function g(f,w,I){if(!f)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,L),f.apply(w,$)}}return function(){return f.apply(w,arguments)}}function m(f,w,I){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function y(f,w){var I=Array.prototype.slice.call(arguments,1);return function(){var L=I.slice();return L.push.apply(L,arguments),f.apply(this,L)}}function x(f,w){function I(){}I.prototype=w.prototype,f.aa=w.prototype,f.prototype=new I,f.prototype.constructor=f,f.Qb=function(L,$,X){for(var me=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)me[nt-2]=arguments[nt];return w.prototype[$].apply(L,me)}}function _(f){const w=f.length;if(0<w){const I=Array(w);for(let L=0;L<w;L++)I[L]=f[L];return I}return[]}function T(f,w){for(let I=1;I<arguments.length;I++){const L=arguments[I];if(l(L)){const $=f.length||0,X=L.length||0;f.length=$+X;for(let me=0;me<X;me++)f[$+me]=L[me]}else f.push(L)}}class v{constructor(w,I){this.i=w,this.j=I,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function E(f){return/^[\s\xa0]*$/.test(f)}function S(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function P(f){return P[" "](f),f}P[" "]=function(){};var V=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function O(f,w,I){for(const L in f)w.call(I,f[L],L,f)}function A(f,w){for(const I in f)w.call(void 0,f[I],I,f)}function R(f){const w={};for(const I in f)w[I]=f[I];return w}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(f,w){let I,L;for(let $=1;$<arguments.length;$++){L=arguments[$];for(I in L)f[I]=L[I];for(let X=0;X<k.length;X++)I=k[X],Object.prototype.hasOwnProperty.call(L,I)&&(f[I]=L[I])}}function F(f){var w=1;f=f.split(":");const I=[];for(;0<w&&f.length;)I.push(f.shift()),w--;return f.length&&I.push(f.join(":")),I}function N(f){a.setTimeout(()=>{throw f},0)}function M(){var f=G;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class b{constructor(){this.h=this.g=null}add(w,I){const L=J.get();L.set(w,I),this.h?this.h.next=L:this.g=L,this.h=L}}var J=new v(()=>new pe,f=>f.reset());class pe{constructor(){this.next=this.g=this.h=null}set(w,I){this.h=w,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,Z=!1,G=new b,ue=()=>{const f=a.Promise.resolve(void 0);ee=()=>{f.then(H)}};var H=()=>{for(var f;f=M();){try{f.h.call(f.g)}catch(I){N(I)}var w=J;w.j(f),100>w.h&&(w.h++,f.next=w.g,w.g=f)}Z=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var de=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const I=()=>{};a.addEventListener("test",I,w),a.removeEventListener("test",I,w)}catch{}return f}();function le(f,w){if(re.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var I=this.type=f.type,L=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget){if(V){e:{try{P(w.nodeName);var $=!0;break e}catch{}$=!1}$||(w=null)}}else I=="mouseover"?w=f.fromElement:I=="mouseout"&&(w=f.toElement);this.relatedTarget=w,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Me[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&le.aa.h.call(this)}}x(le,re);var Me={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ye="closure_listenable_"+(1e6*Math.random()|0),Ae=0;function Ue(f,w,I,L,$){this.listener=f,this.proxy=null,this.src=w,this.type=I,this.capture=!!L,this.ha=$,this.key=++Ae,this.da=this.fa=!1}function De(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Qe(f){this.src=f,this.g={},this.h=0}Qe.prototype.add=function(f,w,I,L,$){var X=f.toString();f=this.g[X],f||(f=this.g[X]=[],this.h++);var me=rt(f,w,L,$);return-1<me?(w=f[me],I||(w.fa=!1)):(w=new Ue(w,this.src,X,!!L,$),w.fa=I,f.push(w)),w};function kt(f,w){var I=w.type;if(I in f.g){var L=f.g[I],$=Array.prototype.indexOf.call(L,w,void 0),X;(X=0<=$)&&Array.prototype.splice.call(L,$,1),X&&(De(w),f.g[I].length==0&&(delete f.g[I],f.h--))}}function rt(f,w,I,L){for(var $=0;$<f.length;++$){var X=f[$];if(!X.da&&X.listener==w&&X.capture==!!I&&X.ha==L)return $}return-1}var C="closure_lm_"+(1e6*Math.random()|0),ne={};function Y(f,w,I,L,$){if(Array.isArray(w)){for(var X=0;X<w.length;X++)Y(f,w[X],I,L,$);return null}return I=fe(I),f&&f[Ye]?f.K(w,I,u(L)?!!L.capture:!1,$):B(f,w,I,!1,L,$)}function B(f,w,I,L,$,X){if(!w)throw Error("Invalid event type");var me=u($)?!!$.capture:!!$,nt=oe(f);if(nt||(f[C]=nt=new Qe(f)),I=nt.add(w,I,L,me,X),I.proxy)return I;if(L=U(),I.proxy=L,L.src=f,L.listener=I,f.addEventListener)de||($=me),$===void 0&&($=!1),f.addEventListener(w.toString(),L,$);else if(f.attachEvent)f.attachEvent(ae(w.toString()),L);else if(f.addListener&&f.removeListener)f.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return I}function U(){function f(I){return w.call(f.src,f.listener,I)}const w=W;return f}function z(f,w,I,L,$){if(Array.isArray(w))for(var X=0;X<w.length;X++)z(f,w[X],I,L,$);else L=u(L)?!!L.capture:!!L,I=fe(I),f&&f[Ye]?(f=f.i,w=String(w).toString(),w in f.g&&(X=f.g[w],I=rt(X,I,L,$),-1<I&&(De(X[I]),Array.prototype.splice.call(X,I,1),X.length==0&&(delete f.g[w],f.h--)))):f&&(f=oe(f))&&(w=f.g[w.toString()],f=-1,w&&(f=rt(w,I,L,$)),(I=-1<f?w[f]:null)&&ie(I))}function ie(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[Ye])kt(w.i,f);else{var I=f.type,L=f.proxy;w.removeEventListener?w.removeEventListener(I,L,f.capture):w.detachEvent?w.detachEvent(ae(I),L):w.addListener&&w.removeListener&&w.removeListener(L),(I=oe(w))?(kt(I,f),I.h==0&&(I.src=null,w[C]=null)):De(f)}}}function ae(f){return f in ne?ne[f]:ne[f]="on"+f}function W(f,w){if(f.da)f=!0;else{w=new le(w,this);var I=f.listener,L=f.ha||f.src;f.fa&&ie(f),f=I.call(L,w)}return f}function oe(f){return f=f[C],f instanceof Qe?f:null}var ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(f){return typeof f=="function"?f:(f[ge]||(f[ge]=function(w){return f.handleEvent(w)}),f[ge])}function ye(){j.call(this),this.i=new Qe(this),this.M=this,this.F=null}x(ye,j),ye.prototype[Ye]=!0,ye.prototype.removeEventListener=function(f,w,I,L){z(this,f,w,I,L)};function Ce(f,w){var I,L=f.F;if(L)for(I=[];L;L=L.F)I.push(L);if(f=f.M,L=w.type||w,typeof w=="string")w=new re(w,f);else if(w instanceof re)w.target=w.target||f;else{var $=w;w=new re(L,f),D(w,$)}if($=!0,I)for(var X=I.length-1;0<=X;X--){var me=w.g=I[X];$=ke(me,L,!0,w)&&$}if(me=w.g=f,$=ke(me,L,!0,w)&&$,$=ke(me,L,!1,w)&&$,I)for(X=0;X<I.length;X++)me=w.g=I[X],$=ke(me,L,!1,w)&&$}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var f=this.i,w;for(w in f.g){for(var I=f.g[w],L=0;L<I.length;L++)De(I[L]);delete f.g[w],f.h--}}this.F=null},ye.prototype.K=function(f,w,I,L){return this.i.add(String(f),w,!1,I,L)},ye.prototype.L=function(f,w,I,L){return this.i.add(String(f),w,!0,I,L)};function ke(f,w,I,L){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();for(var $=!0,X=0;X<w.length;++X){var me=w[X];if(me&&!me.da&&me.capture==I){var nt=me.listener,Ot=me.ha||me.src;me.fa&&kt(f.i,me),$=nt.call(Ot,L)!==!1&&$}}return $&&!L.defaultPrevented}function Et(f,w,I){if(typeof f=="function")I&&(f=m(f,I));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:a.setTimeout(f,w||0)}function yn(f){f.g=Et(()=>{f.g=null,f.i&&(f.i=!1,yn(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class Vt extends j{constructor(w,I){super(),this.m=w,this.l=I,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:yn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function q(f){j.call(this),this.h=f,this.g={}}x(q,j);var Q=[];function Se(f){O(f.g,function(w,I){this.g.hasOwnProperty(I)&&ie(w)},f),f.g={}}q.prototype.N=function(){q.aa.N.call(this),Se(this)},q.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ve=a.JSON.stringify,je=a.JSON.parse,Tt=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Oe(){}Oe.prototype.h=null;function vn(f){return f.h||(f.h=f.i())}function _n(){}var ln={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function un(){re.call(this,"d")}x(un,re);function Ft(){re.call(this,"c")}x(Ft,re);var Kt={},wr=null;function Jn(){return wr=wr||new ye}Kt.La="serverreachability";function cs(f){re.call(this,Kt.La,f)}x(cs,re);function Ri(f){const w=Jn();Ce(w,new cs(w))}Kt.STAT_EVENT="statevent";function Za(f,w){re.call(this,Kt.STAT_EVENT,f),this.stat=w}x(Za,re);function Ut(f){const w=Jn();Ce(w,new Za(w,f))}Kt.Ma="timingevent";function el(f,w){re.call(this,Kt.Ma,f),this.size=w}x(el,re);function Ni(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},w)}function zr(){this.g=!0}zr.prototype.xa=function(){this.g=!1};function Jc(f,w,I,L,$,X){f.info(function(){if(f.g)if(X)for(var me="",nt=X.split("&"),Ot=0;Ot<nt.length;Ot++){var We=nt[Ot].split("=");if(1<We.length){var Yt=We[0];We=We[1];var Qt=Yt.split("_");me=2<=Qt.length&&Qt[1]=="type"?me+(Yt+"="+We+"&"):me+(Yt+"=redacted&")}}else me=null;else me=X;return"XMLHTTP REQ ("+L+") [attempt "+$+"]: "+w+`
`+I+`
`+me})}function Yc(f,w,I,L,$,X,me){f.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+$+"]: "+w+`
`+I+`
`+X+" "+me})}function Gr(f,w,I,L){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+Xc(f,I)+(L?" "+L:"")})}function Qc(f,w){f.info(function(){return"TIMEOUT: "+w})}zr.prototype.info=function(){};function Xc(f,w){if(!f.g)return w;if(!w)return null;try{var I=JSON.parse(w);if(I){for(f=0;f<I.length;f++)if(Array.isArray(I[f])){var L=I[f];if(!(2>L.length)){var $=L[1];if(Array.isArray($)&&!(1>$.length)){var X=$[0];if(X!="noop"&&X!="stop"&&X!="close")for(var me=1;me<$.length;me++)$[me]=""}}}}return ve(I)}catch{return w}}var Pi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_o={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wo;function ds(){}x(ds,Oe),ds.prototype.g=function(){return new XMLHttpRequest},ds.prototype.i=function(){return{}},wo=new ds;function ur(f,w,I,L){this.j=f,this.i=w,this.l=I,this.R=L||1,this.U=new q(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tl}function tl(){this.i=null,this.g="",this.h=!1}var nl={},hs={};function xo(f,w,I){f.L=1,f.v=ol(xr(w)),f.m=I,f.P=!0,Mi(f,null)}function Mi(f,w){f.F=Date.now(),fs(f),f.A=xr(f.v);var I=f.A,L=f.R;Array.isArray(L)||(L=[String(L)]),Am(I.i,"t",L),f.C=0,I=f.j.J,f.h=new tl,f.g=$m(f.j,I?w:null,!f.m),0<f.O&&(f.M=new Vt(m(f.Y,f,f.g),f.O)),w=f.U,I=f.g,L=f.ca;var $="readystatechange";Array.isArray($)||($&&(Q[0]=$.toString()),$=Q);for(var X=0;X<$.length;X++){var me=Y(I,$[X],L||w.handleEvent,!1,w.h||w);if(!me)break;w.g[me.key]=me}w=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,w)):(f.u="GET",f.g.ea(f.A,f.u,null,w)),Ri(),Jc(f.i,f.u,f.A,f.l,f.R,f.m)}ur.prototype.ca=function(f){f=f.target;const w=this.M;w&&Er(f)==3?w.j():this.Y(f)},ur.prototype.Y=function(f){try{if(f==this.g)e:{const Qt=Er(this.g);var w=this.g.Ba();const ys=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||Lm(this.g)))){this.J||Qt!=4||w==7||(w==8||0>=ys?Ri(3):Ri(2)),K(this);var I=this.g.Z();this.X=I;t:if(Eo(this)){var L=Lm(this.g);f="";var $=L.length,X=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Le(this),xe(this);var me="";break t}this.h.i=new a.TextDecoder}for(w=0;w<$;w++)this.h.h=!0,f+=this.h.i.decode(L[w],{stream:!(X&&w==$-1)});L.length=0,this.h.g+=f,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=I==200,Yc(this.i,this.u,this.A,this.l,this.R,Qt,I),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,Ot=this.g;if((nt=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(nt)){var We=nt;break t}}We=null}if(I=We)Gr(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ve(this,I);else{this.o=!1,this.s=3,Ut(12),Le(this),xe(this);break e}}if(this.P){I=!0;let Yn;for(;!this.J&&this.C<me.length;)if(Yn=Zc(this,me),Yn==hs){Qt==4&&(this.s=4,Ut(14),I=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(Yn==nl){this.s=4,Ut(15),Gr(this.i,this.l,me,"[Invalid Chunk]"),I=!1;break}else Gr(this.i,this.l,Yn,null),Ve(this,Yn);if(Eo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||me.length!=0||this.h.h||(this.s=1,Ut(16),I=!1),this.o=this.o&&I,!I)Gr(this.i,this.l,me,"[Invalid Chunked Response]"),Le(this),xe(this);else if(0<me.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),rd(Yt),Yt.M=!0,Ut(11))}}else Gr(this.i,this.l,me,null),Ve(this,me);Qt==4&&Le(this),this.o&&!this.J&&(Qt==4?zm(this.j,this):(this.o=!1,fs(this)))}else z1(this.g),I==400&&0<me.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Le(this),xe(this)}}}catch{}finally{}};function Eo(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Zc(f,w){var I=f.C,L=w.indexOf(`
`,I);return L==-1?hs:(I=Number(w.substring(I,L)),isNaN(I)?nl:(L+=1,L+I>w.length?hs:(w=w.slice(L,L+I),f.C=L+I,w)))}ur.prototype.cancel=function(){this.J=!0,Le(this)};function fs(f){f.S=Date.now()+f.I,rl(f,f.I)}function rl(f,w){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ni(m(f.ba,f),w)}function K(f){f.B&&(a.clearTimeout(f.B),f.B=null)}ur.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Qc(this.i,this.A),this.L!=2&&(Ri(),Ut(17)),Le(this),this.s=2,xe(this)):rl(this,this.S-f)};function xe(f){f.j.G==0||f.J||zm(f.j,f)}function Le(f){K(f);var w=f.M;w&&typeof w.ma=="function"&&w.ma(),f.M=null,Se(f.U),f.g&&(w=f.g,f.g=null,w.abort(),w.ma())}function Ve(f,w){try{var I=f.j;if(I.G!=0&&(I.g==f||Jt(I.h,f))){if(!f.K&&Jt(I.h,f)&&I.G==3){try{var L=I.Da.g.parse(w)}catch{L=null}if(Array.isArray(L)&&L.length==3){var $=L;if($[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<f.F)hl(I),cl(I);else break e;nd(I),Ut(18)}}else I.za=$[1],0<I.za-I.T&&37500>$[2]&&I.F&&I.v==0&&!I.C&&(I.C=Ni(m(I.Za,I),6e3));if(1>=Bt(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Vi(I,11)}else if((f.K||I.g==f)&&hl(I),!E(w))for($=I.Da.g.parse(w),w=0;w<$.length;w++){let We=$[w];if(I.T=We[0],We=We[1],I.G==2)if(We[0]=="c"){I.K=We[1],I.ia=We[2];const Yt=We[3];Yt!=null&&(I.la=Yt,I.j.info("VER="+I.la));const Qt=We[4];Qt!=null&&(I.Aa=Qt,I.j.info("SVER="+I.Aa));const ys=We[5];ys!=null&&typeof ys=="number"&&0<ys&&(L=1.5*ys,I.L=L,I.j.info("backChannelRequestTimeoutMs_="+L)),L=I;const Yn=f.g;if(Yn){const pl=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pl){var X=L.h;X.g||pl.indexOf("spdy")==-1&&pl.indexOf("quic")==-1&&pl.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(wn(X,X.h),X.h=null))}if(L.D){const id=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;id&&(L.ya=id,ot(L.I,L.D,id))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-f.F,I.j.info("Handshake RTT: "+I.R+"ms")),L=I;var me=f;if(L.qa=qm(L,L.J?L.ia:null,L.W),me.K){et(L.h,me);var nt=me,Ot=L.L;Ot&&(nt.I=Ot),nt.B&&(K(nt),fs(nt)),L.g=me}else Om(L);0<I.i.length&&dl(I)}else We[0]!="stop"&&We[0]!="close"||Vi(I,7);else I.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Vi(I,7):td(I):We[0]!="noop"&&I.l&&I.l.ta(We),I.v=0)}}Ri(4)}catch{}}var Xe=class{constructor(f,w){this.g=f,this.map=w}};function $e(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ze(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Bt(f){return f.h?1:f.g?f.g.size:0}function Jt(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function wn(f,w){f.g?f.g.add(w):f.h=w}function et(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}$e.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function ht(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const I of f.g.values())w=w.concat(I.D);return w}return _(f.i)}function ct(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var w=[],I=f.length,L=0;L<I;L++)w.push(f[L]);return w}w=[],I=0;for(L in f)w[I++]=f[L];return w}function Di(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var w=[];f=f.length;for(var I=0;I<f;I++)w.push(I);return w}w=[],I=0;for(const L in f)w[I++]=L;return w}}}function ps(f,w){if(f.forEach&&typeof f.forEach=="function")f.forEach(w,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,w,void 0);else for(var I=Di(f),L=ct(f),$=L.length,X=0;X<$;X++)w.call(void 0,L[X],I&&I[X],f)}var Tm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function b1(f,w){if(f){f=f.split("&");for(var I=0;I<f.length;I++){var L=f[I].indexOf("="),$=null;if(0<=L){var X=f[I].substring(0,L);$=f[I].substring(L+1)}else X=f[I];w(X,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Li(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Li){this.h=f.h,il(this,f.j),this.o=f.o,this.g=f.g,sl(this,f.s),this.l=f.l;var w=f.i,I=new Io;I.i=w.i,w.g&&(I.g=new Map(w.g),I.h=w.h),Sm(this,I),this.m=f.m}else f&&(w=String(f).match(Tm))?(this.h=!1,il(this,w[1]||"",!0),this.o=To(w[2]||""),this.g=To(w[3]||"",!0),sl(this,w[4]),this.l=To(w[5]||"",!0),Sm(this,w[6]||"",!0),this.m=To(w[7]||"")):(this.h=!1,this.i=new Io(null,this.h))}Li.prototype.toString=function(){var f=[],w=this.j;w&&f.push(So(w,Im,!0),":");var I=this.g;return(I||w=="file")&&(f.push("//"),(w=this.o)&&f.push(So(w,Im,!0),"@"),f.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&f.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&f.push("/"),f.push(So(I,I.charAt(0)=="/"?P1:N1,!0))),(I=this.i.toString())&&f.push("?",I),(I=this.m)&&f.push("#",So(I,D1)),f.join("")};function xr(f){return new Li(f)}function il(f,w,I){f.j=I?To(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function sl(f,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);f.s=w}else f.s=null}function Sm(f,w,I){w instanceof Io?(f.i=w,L1(f.i,f.h)):(I||(w=So(w,M1)),f.i=new Io(w,f.h))}function ot(f,w,I){f.i.set(w,I)}function ol(f){return ot(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function To(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function So(f,w,I){return typeof f=="string"?(f=encodeURI(f).replace(w,R1),I&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function R1(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Im=/[#\/\?@]/g,N1=/[#\?:]/g,P1=/[#\?]/g,M1=/[#\?@]/g,D1=/#/g;function Io(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function Hr(f){f.g||(f.g=new Map,f.h=0,f.i&&b1(f.i,function(w,I){f.add(decodeURIComponent(w.replace(/\+/g," ")),I)}))}t=Io.prototype,t.add=function(f,w){Hr(this),this.i=null,f=ms(this,f);var I=this.g.get(f);return I||this.g.set(f,I=[]),I.push(w),this.h+=1,this};function Cm(f,w){Hr(f),w=ms(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function km(f,w){return Hr(f),w=ms(f,w),f.g.has(w)}t.forEach=function(f,w){Hr(this),this.g.forEach(function(I,L){I.forEach(function($){f.call(w,$,L,this)},this)},this)},t.na=function(){Hr(this);const f=Array.from(this.g.values()),w=Array.from(this.g.keys()),I=[];for(let L=0;L<w.length;L++){const $=f[L];for(let X=0;X<$.length;X++)I.push(w[L])}return I},t.V=function(f){Hr(this);let w=[];if(typeof f=="string")km(this,f)&&(w=w.concat(this.g.get(ms(this,f))));else{f=Array.from(this.g.values());for(let I=0;I<f.length;I++)w=w.concat(f[I])}return w},t.set=function(f,w){return Hr(this),this.i=null,f=ms(this,f),km(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},t.get=function(f,w){return f?(f=this.V(f),0<f.length?String(f[0]):w):w};function Am(f,w,I){Cm(f,w),0<I.length&&(f.i=null,f.g.set(ms(f,w),_(I)),f.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(var I=0;I<w.length;I++){var L=w[I];const X=encodeURIComponent(String(L)),me=this.V(L);for(L=0;L<me.length;L++){var $=X;me[L]!==""&&($+="="+encodeURIComponent(String(me[L]))),f.push($)}}return this.i=f.join("&")};function ms(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function L1(f,w){w&&!f.j&&(Hr(f),f.i=null,f.g.forEach(function(I,L){var $=L.toLowerCase();L!=$&&(Cm(this,L),Am(this,$,I))},f)),f.j=w}function V1(f,w){const I=new zr;if(a.Image){const L=new Image;L.onload=y(qr,I,"TestLoadImage: loaded",!0,w,L),L.onerror=y(qr,I,"TestLoadImage: error",!1,w,L),L.onabort=y(qr,I,"TestLoadImage: abort",!1,w,L),L.ontimeout=y(qr,I,"TestLoadImage: timeout",!1,w,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=f}else w(!1)}function F1(f,w){const I=new zr,L=new AbortController,$=setTimeout(()=>{L.abort(),qr(I,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:L.signal}).then(X=>{clearTimeout($),X.ok?qr(I,"TestPingServer: ok",!0,w):qr(I,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout($),qr(I,"TestPingServer: error",!1,w)})}function qr(f,w,I,L,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),L(I)}catch{}}function U1(){this.g=new Tt}function B1(f,w,I){const L=I||"";try{ps(f,function($,X){let me=$;u($)&&(me=ve($)),w.push(L+X+"="+encodeURIComponent(me))})}catch($){throw w.push(L+"type="+encodeURIComponent("_badmap")),$}}function al(f){this.l=f.Ub||null,this.j=f.eb||!1}x(al,Oe),al.prototype.g=function(){return new ll(this.l,this.j)},al.prototype.i=function(f){return function(){return f}}({});function ll(f,w){ye.call(this),this.D=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(ll,ye),t=ll.prototype,t.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=w,this.readyState=1,ko(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(w.body=f),(this.D||a).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ko(this)),this.g&&(this.readyState=3,ko(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bm(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function bm(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?Co(this):ko(this),this.readyState==3&&bm(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Co(this))},t.Qa=function(f){this.g&&(this.response=f,Co(this))},t.ga=function(){this.g&&Co(this)};function Co(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ko(f)}t.setRequestHeader=function(f,w){this.u.append(f,w)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var I=w.next();!I.done;)I=I.value,f.push(I[0]+": "+I[1]),I=w.next();return f.join(`\r
`)};function ko(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Rm(f){let w="";return O(f,function(I,L){w+=L,w+=":",w+=I,w+=`\r
`}),w}function ed(f,w,I){e:{for(L in I){var L=!1;break e}L=!0}L||(I=Rm(I),typeof f=="string"?I!=null&&encodeURIComponent(String(I)):ot(f,w,I))}function yt(f){ye.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(yt,ye);var O1=/^https?$/i,j1=["POST","PUT"];t=yt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,w,I,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wo.g(),this.v=this.o?vn(this.o):vn(wo),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(X){Nm(this,X);return}if(f=I||"",I=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var $ in L)I.set($,L[$]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const X of L.keys())I.set(X,L.get(X));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(I.keys()).find(X=>X.toLowerCase()=="content-type"),$=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(j1,w,void 0))||L||$||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,me]of I)this.g.setRequestHeader(X,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dm(this),this.u=!0,this.g.send(f),this.u=!1}catch(X){Nm(this,X)}};function Nm(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.m=5,Pm(f),ul(f)}function Pm(f){f.A||(f.A=!0,Ce(f,"complete"),Ce(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ce(this,"complete"),Ce(this,"abort"),ul(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ul(this,!0)),yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Mm(this):this.bb())},t.bb=function(){Mm(this)};function Mm(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Er(f)!=4||f.Z()!=2)){if(f.u&&Er(f)==4)Et(f.Ea,0,f);else if(Ce(f,"readystatechange"),Er(f)==4){f.h=!1;try{const me=f.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var I;if(!(I=w)){var L;if(L=me===0){var $=String(f.D).match(Tm)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),L=!O1.test($?$.toLowerCase():"")}I=L}if(I)Ce(f,"complete"),Ce(f,"success");else{f.m=6;try{var X=2<Er(f)?f.g.statusText:""}catch{X=""}f.l=X+" ["+f.Z()+"]",Pm(f)}}finally{ul(f)}}}}function ul(f,w){if(f.g){Dm(f);const I=f.g,L=f.v[0]?()=>{}:null;f.g=null,f.v=null,w||Ce(f,"ready");try{I.onreadystatechange=L}catch{}}}function Dm(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Er(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),je(w)}};function Lm(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function z1(f){const w={};f=(f.g&&2<=Er(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<f.length;L++){if(E(f[L]))continue;var I=F(f[L]);const $=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const X=w[$]||[];w[$]=X,X.push(I)}A(w,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ao(f,w,I){return I&&I.internalChannelParams&&I.internalChannelParams[f]||w}function Vm(f){this.Aa=0,this.i=[],this.j=new zr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ao("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ao("baseRetryDelayMs",5e3,f),this.cb=Ao("retryDelaySeedMs",1e4,f),this.Wa=Ao("forwardChannelMaxRetries",2,f),this.wa=Ao("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(f&&f.concurrentRequestLimit),this.Da=new U1,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Vm.prototype,t.la=8,t.G=1,t.connect=function(f,w,I,L){Ut(0),this.W=f,this.H=w||{},I&&L!==void 0&&(this.H.OSID=I,this.H.OAID=L),this.F=this.X,this.I=qm(this,null,this.W),dl(this)};function td(f){if(Fm(f),f.G==3){var w=f.U++,I=xr(f.I);if(ot(I,"SID",f.K),ot(I,"RID",w),ot(I,"TYPE","terminate"),bo(f,I),w=new ur(f,f.j,w),w.L=2,w.v=ol(xr(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(w.v.toString(),"")}catch{}!I&&a.Image&&(new Image().src=w.v,I=!0),I||(w.g=$m(w.j,null),w.g.ea(w.v)),w.F=Date.now(),fs(w)}Hm(f)}function cl(f){f.g&&(rd(f),f.g.cancel(),f.g=null)}function Fm(f){cl(f),f.u&&(a.clearTimeout(f.u),f.u=null),hl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function dl(f){if(!ze(f.h)&&!f.s){f.s=!0;var w=f.Ga;ee||ue(),Z||(ee(),Z=!0),G.add(w,f),f.B=0}}function G1(f,w){return Bt(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=w.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ni(m(f.Ga,f,w),Gm(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const $=new ur(this,this.j,f);let X=this.o;if(this.S&&(X?(X=R(X),D(X,this.S)):X=this.S),this.m!==null||this.O||($.H=X,X=null),this.P)e:{for(var w=0,I=0;I<this.i.length;I++){t:{var L=this.i[I];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(w+=L,4096<w){w=I;break e}if(w===4096||I===this.i.length-1){w=I+1;break e}}w=1e3}else w=1e3;w=Bm(this,$,w),I=xr(this.I),ot(I,"RID",f),ot(I,"CVER",22),this.D&&ot(I,"X-HTTP-Session-Id",this.D),bo(this,I),X&&(this.O?w="headers="+encodeURIComponent(String(Rm(X)))+"&"+w:this.m&&ed(I,this.m,X)),wn(this.h,$),this.Ua&&ot(I,"TYPE","init"),this.P?(ot(I,"$req",w),ot(I,"SID","null"),$.T=!0,xo($,I,null)):xo($,I,w),this.G=2}}else this.G==3&&(f?Um(this,f):this.i.length==0||ze(this.h)||Um(this))};function Um(f,w){var I;w?I=w.l:I=f.U++;const L=xr(f.I);ot(L,"SID",f.K),ot(L,"RID",I),ot(L,"AID",f.T),bo(f,L),f.m&&f.o&&ed(L,f.m,f.o),I=new ur(f,f.j,I,f.B+1),f.m===null&&(I.H=f.o),w&&(f.i=w.D.concat(f.i)),w=Bm(f,I,1e3),I.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),wn(f.h,I),xo(I,L,w)}function bo(f,w){f.H&&O(f.H,function(I,L){ot(w,L,I)}),f.l&&ps({},function(I,L){ot(w,L,I)})}function Bm(f,w,I){I=Math.min(f.i.length,I);var L=f.l?m(f.l.Na,f.l,f):null;e:{var $=f.i;let X=-1;for(;;){const me=["count="+I];X==-1?0<I?(X=$[0].g,me.push("ofs="+X)):X=0:me.push("ofs="+X);let nt=!0;for(let Ot=0;Ot<I;Ot++){let We=$[Ot].g;const Yt=$[Ot].map;if(We-=X,0>We)X=Math.max(0,$[Ot].g-100),nt=!1;else try{B1(Yt,me,"req"+We+"_")}catch{L&&L(Yt)}}if(nt){L=me.join("&");break e}}}return f=f.i.splice(0,I),w.D=f,L}function Om(f){if(!f.g&&!f.u){f.Y=1;var w=f.Fa;ee||ue(),Z||(ee(),Z=!0),G.add(w,f),f.v=0}}function nd(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ni(m(f.Fa,f),Gm(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,jm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ni(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),cl(this),jm(this))};function rd(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function jm(f){f.g=new ur(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var w=xr(f.qa);ot(w,"RID","rpc"),ot(w,"SID",f.K),ot(w,"AID",f.T),ot(w,"CI",f.F?"0":"1"),!f.F&&f.ja&&ot(w,"TO",f.ja),ot(w,"TYPE","xmlhttp"),bo(f,w),f.m&&f.o&&ed(w,f.m,f.o),f.L&&(f.g.I=f.L);var I=f.g;f=f.ia,I.L=1,I.v=ol(xr(w)),I.m=null,I.P=!0,Mi(I,f)}t.Za=function(){this.C!=null&&(this.C=null,cl(this),nd(this),Ut(19))};function hl(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function zm(f,w){var I=null;if(f.g==w){hl(f),rd(f),f.g=null;var L=2}else if(Jt(f.h,w))I=w.D,et(f.h,w),L=1;else return;if(f.G!=0){if(w.o)if(L==1){I=w.m?w.m.length:0,w=Date.now()-w.F;var $=f.B;L=Jn(),Ce(L,new el(L,I)),dl(f)}else Om(f);else if($=w.s,$==3||$==0&&0<w.X||!(L==1&&G1(f,w)||L==2&&nd(f)))switch(I&&0<I.length&&(w=f.h,w.i=w.i.concat(I)),$){case 1:Vi(f,5);break;case 4:Vi(f,10);break;case 3:Vi(f,6);break;default:Vi(f,2)}}}function Gm(f,w){let I=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(I*=2),I*w}function Vi(f,w){if(f.j.info("Error code "+w),w==2){var I=m(f.fb,f),L=f.Xa;const $=!L;L=new Li(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||il(L,"https"),ol(L),$?V1(L.toString(),I):F1(L.toString(),I)}else Ut(2);f.G=0,f.l&&f.l.sa(w),Hm(f),Fm(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Hm(f){if(f.G=0,f.ka=[],f.l){const w=ht(f.h);(w.length!=0||f.i.length!=0)&&(T(f.ka,w),T(f.ka,f.i),f.h.i.length=0,_(f.i),f.i.length=0),f.l.ra()}}function qm(f,w,I){var L=I instanceof Li?xr(I):new Li(I);if(L.g!="")w&&(L.g=w+"."+L.g),sl(L,L.s);else{var $=a.location;L=$.protocol,w=w?w+"."+$.hostname:$.hostname,$=+$.port;var X=new Li(null);L&&il(X,L),w&&(X.g=w),$&&sl(X,$),I&&(X.l=I),L=X}return I=f.D,w=f.ya,I&&w&&ot(L,I,w),ot(L,"VER",f.la),bo(f,L),L}function $m(f,w,I){if(w&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Ca&&!f.pa?new yt(new al({eb:I})):new yt(f.pa),w.Ha(f.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wm(){}t=Wm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fl(){}fl.prototype.g=function(f,w){return new Nn(f,w)};function Nn(f,w){ye.call(this),this.g=new Vm(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(f?f["X-WebChannel-Client-Profile"]=w.va:f={"X-WebChannel-Client-Profile":w.va}),this.g.S=f,(f=w&&w.Sb)&&!E(f)&&(this.g.m=f),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!E(w)&&(this.g.D=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new gs(this)}x(Nn,ye),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){td(this.g)},Nn.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var I={};I.__data__=f,f=I}else this.u&&(I={},I.__data__=ve(f),f=I);w.i.push(new Xe(w.Ya++,f)),w.G==3&&dl(w)},Nn.prototype.N=function(){this.g.l=null,delete this.j,td(this.g),delete this.g,Nn.aa.N.call(this)};function Km(f){un.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const I in w){f=I;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}x(Km,un);function Jm(){Ft.call(this),this.status=1}x(Jm,Ft);function gs(f){this.g=f}x(gs,Wm),gs.prototype.ua=function(){Ce(this.g,"a")},gs.prototype.ta=function(f){Ce(this.g,new Km(f))},gs.prototype.sa=function(f){Ce(this.g,new Jm)},gs.prototype.ra=function(){Ce(this.g,"b")},fl.prototype.createWebChannel=fl.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,iE=function(){return new fl},rE=function(){return Jn()},nE=Kt,Wh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pi.NO_ERROR=0,Pi.TIMEOUT=8,Pi.HTTP_ERROR=6,nu=Pi,_o.COMPLETE="complete",tE=_o,_n.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",ye.prototype.listen=ye.prototype.K,qo=_n,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,eE=yt}).apply(typeof Pl<"u"?Pl:typeof self<"u"?self:typeof window<"u"?window:{});const b0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Tp("@firebase/firestore");function Uo(){return ns.logLevel}function Te(t,...e){if(ns.logLevel<=He.DEBUG){const n=e.map(Rp);ns.debug(`Firestore (${co}): ${t}`,...n)}}function Vr(t,...e){if(ns.logLevel<=He.ERROR){const n=e.map(Rp);ns.error(`Firestore (${co}): ${t}`,...n)}}function eo(t,...e){if(ns.logLevel<=He.WARN){const n=e.map(Rp);ns.warn(`Firestore (${co}): ${t}`,...n)}}function Rp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t="Unexpected state"){const e=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: `+t;throw Vr(e),new Error(e)}function Ze(t,e){t||be()}function Re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Ti{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Q2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tn.UNAUTHENTICATED))}shutdown(){}}class X2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Z2{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ze(typeof r.accessToken=="string"),new sE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string"),new tn(e)}}class eb{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tb{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new eb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rb{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ze(this.o===void 0);const r=s=>{s.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ze(typeof n.token=="string"),this.R=n.token,new nb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ib(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ke(t,e){return t<e?-1:t>e?1:0}function to(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new we(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new we(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new we(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Rt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new Rt(0,0))}static max(){return new Pe(new Rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(),r===void 0?r=e.length-n:r>e.length-n&&be(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ba.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ba?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class lt extends ba{construct(e,n,r){return new lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new lt(n)}static emptyPath(){return new lt([])}}const sb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends ba{construct(e,n,r){return new Gt(e,n,r)}static isValidIdentifier(e){return sb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Gt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new we(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new we(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new we(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new we(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(n)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(lt.fromString(e))}static fromName(e){return new Ie(lt.fromString(e).popFirst(5))}static empty(){return new Ie(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new lt(e.slice()))}}function ob(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Pe.fromTimestamp(r===1e9?new Rt(n+1,0):new Rt(n,r));return new mi(i,Ie.empty(),e)}function ab(t){return new mi(t.readTime,t.key,-1)}class mi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mi(Pe.min(),Ie.empty(),-1)}static max(){return new mi(Pe.max(),Ie.empty(),-1)}}function lb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==ub)throw t;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ce?n:ce.resolve(n)}catch(n){return ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ce.reject(n)}static resolve(e){return new ce((n,r)=>{n(e)})}static reject(e){return new ce((n,r)=>{r(e)})}static waitFor(e){return new ce((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=ce.resolve(!1);for(const r of e)n=n.next(i=>i?ce.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ce((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new ce((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function db(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Np.oe=-1;function Tc(t){return t==null}function Ou(t){return t===0&&1/t==-1/0}function hb(t){return typeof t=="number"&&Number.isInteger(t)&&!Ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function as(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fb(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function aE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ml(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ml(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ml(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ml(this.root,e,this.comparator,!0)}}class Ml{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??zt.RED,this.left=i??zt.EMPTY,this.right=s??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new zt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,n,r,i,s){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new N0(this.data.getIterator())}getIteratorFrom(e){return new N0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class N0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new qt(Gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return to(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new lE("Invalid base64 string: "+s):s}}(e);return new Wt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const pb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(t){if(Ze(!!t),typeof t=="string"){let e=0;const n=pb.exec(t);if(Ze(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(t.seconds),nanos:_t(t.nanos)}}function _t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rs(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Mp(t){const e=t.mapValue.fields.__previous_value__;return Pp(e)?Mp(e):e}function Ra(t){const e=gi(t.mapValue.fields.__local_write_time__.timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Na{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Na("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Na&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl={mapValue:{}};function is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pp(t)?4:yb(t)?9007199254740991:gb(t)?10:11:be()}function _r(t,e){if(t===e)return!0;const n=is(t);if(n!==is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ra(t).isEqual(Ra(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=gi(i.timestampValue),a=gi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return rs(i.bytesValue).isEqual(rs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return _t(i.geoPointValue.latitude)===_t(s.geoPointValue.latitude)&&_t(i.geoPointValue.longitude)===_t(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _t(i.integerValue)===_t(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=_t(i.doubleValue),a=_t(s.doubleValue);return o===a?Ou(o)===Ou(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return to(t.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(R0(o)!==R0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!_r(o[l],a[l])))return!1;return!0}(t,e);default:return be()}}function Pa(t,e){return(t.values||[]).find(n=>_r(n,e))!==void 0}function no(t,e){if(t===e)return 0;const n=is(t),r=is(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=_t(s.integerValue||s.doubleValue),l=_t(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return P0(t.timestampValue,e.timestampValue);case 4:return P0(Ra(t),Ra(e));case 5:return Ke(t.stringValue,e.stringValue);case 6:return function(s,o){const a=rs(s),l=rs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Ke(a[u],l[u]);if(d!==0)return d}return Ke(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ke(_t(s.latitude),_t(o.latitude));return a!==0?a:Ke(_t(s.longitude),_t(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return M0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,d;const g=s.fields||{},m=o.fields||{},y=(a=g.value)===null||a===void 0?void 0:a.arrayValue,x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,_=Ke(((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:M0(y,x)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Dl.mapValue&&o===Dl.mapValue)return 0;if(s===Dl.mapValue)return 1;if(o===Dl.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let g=0;g<l.length&&g<d.length;++g){const m=Ke(l[g],d[g]);if(m!==0)return m;const y=no(a[l[g]],u[d[g]]);if(y!==0)return y}return Ke(l.length,d.length)}(t.mapValue,e.mapValue);default:throw be()}}function P0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=gi(t),r=gi(e),i=Ke(n.seconds,r.seconds);return i!==0?i:Ke(n.nanos,r.nanos)}function M0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=no(n[i],r[i]);if(s)return s}return Ke(n.length,r.length)}function ro(t){return Kh(t)}function Kh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Kh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Kh(n.fields[o])}`;return i+"}"}(t.mapValue):be()}function D0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jh(t){return!!t&&"integerValue"in t}function Dp(t){return!!t&&"arrayValue"in t}function L0(t){return!!t&&"nullValue"in t}function V0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ru(t){return!!t&&"mapValue"in t}function gb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function aa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return as(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=aa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=aa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function yb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ru(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=aa(n)}setAll(e){let n=Gt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=aa(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());ru(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ru(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){as(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new En(aa(this.value))}}function uE(t){const e=[];return as(t.fields,(n,r)=>{const i=new Gt([n]);if(ru(r)){const s=uE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rn(e,0,Pe.min(),Pe.min(),Pe.min(),En.empty(),0)}static newFoundDocument(e,n,r,i){return new rn(e,1,n,Pe.min(),r,i,0)}static newNoDocument(e,n){return new rn(e,2,n,Pe.min(),Pe.min(),En.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,Pe.min(),Pe.min(),En.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n){this.position=e,this.inclusive=n}}function F0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Ie.comparator(Ie.fromName(o.referenceValue),n.key):r=no(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function U0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_r(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n="asc"){this.field=e,this.dir=n}}function vb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{}class Ct extends cE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new wb(e,n,r):n==="array-contains"?new Tb(e,r):n==="in"?new Sb(e,r):n==="not-in"?new Ib(e,r):n==="array-contains-any"?new Cb(e,r):new Ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xb(e,r):new Eb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(no(n,this.value)):n!==null&&is(this.value)===is(n)&&this.matchesComparison(no(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class or extends cE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new or(e,n)}matches(e){return dE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function dE(t){return t.op==="and"}function hE(t){return _b(t)&&dE(t)}function _b(t){for(const e of t.filters)if(e instanceof or)return!1;return!0}function Yh(t){if(t instanceof Ct)return t.field.canonicalString()+t.op.toString()+ro(t.value);if(hE(t))return t.filters.map(e=>Yh(e)).join(",");{const e=t.filters.map(n=>Yh(n)).join(",");return`${t.op}(${e})`}}function fE(t,e){return t instanceof Ct?function(r,i){return i instanceof Ct&&r.op===i.op&&r.field.isEqual(i.field)&&_r(r.value,i.value)}(t,e):t instanceof or?function(r,i){return i instanceof or&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&fE(o,i.filters[a]),!0):!1}(t,e):void be()}function pE(t){return t instanceof Ct?function(n){return`${n.field.canonicalString()} ${n.op} ${ro(n.value)}`}(t):t instanceof or?function(n){return n.op.toString()+" {"+n.getFilters().map(pE).join(" ,")+"}"}(t):"Filter"}class wb extends Ct{constructor(e,n,r){super(e,n,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class xb extends Ct{constructor(e,n){super(e,"in",n),this.keys=mE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Eb extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=mE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ie.fromName(r.referenceValue))}class Tb extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dp(n)&&Pa(n.arrayValue,this.value)}}class Sb extends Ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pa(this.value.arrayValue,n)}}class Ib extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Pa(this.value.arrayValue,n)}}class Cb extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function B0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new kb(t,e,n,r,i,s,o)}function Lp(t){const e=Re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Yh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Tc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ro(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ro(r)).join(",")),e.ue=n}return e.ue}function Vp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!U0(t.startAt,e.startAt)&&U0(t.endAt,e.endAt)}function Qh(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ab(t,e,n,r,i,s,o,a){return new ho(t,e,n,r,i,s,o,a)}function Fp(t){return new ho(t)}function O0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gE(t){return t.collectionGroup!==null}function la(t){const e=Re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qt(Gt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ma(s,r))}),n.has(Gt.keyField().canonicalString())||e.ce.push(new Ma(Gt.keyField(),r))}return e.ce}function yr(t){const e=Re(t);return e.le||(e.le=yE(e,la(t))),e.le}function bb(t){const e=Re(t);return e.he||(e.he=yE(e,t.explicitOrderBy)),e.he}function yE(t,e){if(t.limitType==="F")return B0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ma(i.field,s)});const n=t.endAt?new ju(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ju(t.startAt.position,t.startAt.inclusive):null;return B0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xh(t,e){const n=t.filters.concat([e]);return new ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function zu(t,e,n){return new ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sc(t,e){return Vp(yr(t),yr(e))&&t.limitType===e.limitType}function vE(t){return`${Lp(yr(t))}|lt:${t.limitType}`}function _s(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>pE(i)).join(", ")}]`),Tc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ro(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ro(i)).join(",")),`Target(${r})`}(yr(t))}; limitType=${t.limitType})`}function Ic(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of la(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=F0(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,la(r),i)||r.endAt&&!function(o,a,l){const u=F0(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,la(r),i))}(t,e)}function Rb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _E(t){return(e,n)=>{let r=!1;for(const i of la(t)){const s=Nb(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Nb(t,e,n){const r=t.field.isKeyField()?Ie.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?no(l,u):be()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return aE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=new gt(Ie.comparator);function Fr(){return Pb}const wE=new gt(Ie.comparator);function $o(...t){let e=wE;for(const n of t)e=e.insert(n.key,n);return e}function xE(t){let e=wE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qi(){return ua()}function EE(){return ua()}function ua(){return new fo(t=>t.toString(),(t,e)=>t.isEqual(e))}const Mb=new gt(Ie.comparator),Db=new qt(Ie.comparator);function Be(...t){let e=Db;for(const n of t)e=e.add(n);return e}const Lb=new qt(Ke);function Vb(){return Lb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(e)?"-0":e}}function TE(t){return{integerValue:""+t}}function Fb(t,e){return hb(e)?TE(e):Up(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this._=void 0}}function Ub(t,e,n){return t instanceof Gu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Pp(s)&&(s=Mp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Da?IE(t,e):t instanceof La?CE(t,e):function(i,s){const o=SE(i,s),a=j0(o)+j0(i.Pe);return Jh(o)&&Jh(i.Pe)?TE(a):Up(i.serializer,a)}(t,e)}function Bb(t,e,n){return t instanceof Da?IE(t,e):t instanceof La?CE(t,e):n}function SE(t,e){return t instanceof Hu?function(r){return Jh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Gu extends Cc{}class Da extends Cc{constructor(e){super(),this.elements=e}}function IE(t,e){const n=kE(e);for(const r of t.elements)n.some(i=>_r(i,r))||n.push(r);return{arrayValue:{values:n}}}class La extends Cc{constructor(e){super(),this.elements=e}}function CE(t,e){let n=kE(e);for(const r of t.elements)n=n.filter(i=>!_r(i,r));return{arrayValue:{values:n}}}class Hu extends Cc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function j0(t){return _t(t.integerValue||t.doubleValue)}function kE(t){return Dp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Ob(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Da&&i instanceof Da||r instanceof La&&i instanceof La?to(r.elements,i.elements,_r):r instanceof Hu&&i instanceof Hu?_r(r.Pe,i.Pe):r instanceof Gu&&i instanceof Gu}(t.transform,e.transform)}class jb{constructor(e,n){this.version=e,this.transformResults=n}}class An{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function iu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kc{}function AE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ac(t.key,An.none()):new $a(t.key,t.data,An.none());{const n=t.data,r=En.empty();let i=new qt(Gt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Si(t.key,r,new Dn(i.toArray()),An.none())}}function zb(t,e,n){t instanceof $a?function(i,s,o){const a=i.value.clone(),l=G0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Si?function(i,s,o){if(!iu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=G0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(bE(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ca(t,e,n,r){return t instanceof $a?function(s,o,a,l){if(!iu(s.precondition,o))return a;const u=s.value.clone(),d=H0(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Si?function(s,o,a,l){if(!iu(s.precondition,o))return a;const u=H0(s.fieldTransforms,l,o),d=o.data;return d.setAll(bE(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,a){return iu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Gb(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=SE(r.transform,i||null);s!=null&&(n===null&&(n=En.empty()),n.set(r.field,s))}return n||null}function z0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&to(r,i,(s,o)=>Ob(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $a extends kc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Si extends kc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function bE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function G0(t,e,n){const r=new Map;Ze(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Bb(o,a,n[i]))}return r}function H0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Ub(s,o,e))}return r}class Ac extends kc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hb extends kc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zb(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=EE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=AE(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Be())}isEqual(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,(n,r)=>z0(n,r))&&to(this.baseMutations,e.baseMutations,(n,r)=>z0(n,r))}}class Bp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ze(e.mutations.length===r.length);let i=function(){return Mb}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Bp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Ge;function Jb(t){switch(t){default:return be();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function RE(t){if(t===void 0)return Vr("GRPC error has no .code"),se.UNKNOWN;switch(t){case St.OK:return se.OK;case St.CANCELLED:return se.CANCELLED;case St.UNKNOWN:return se.UNKNOWN;case St.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case St.INTERNAL:return se.INTERNAL;case St.UNAVAILABLE:return se.UNAVAILABLE;case St.UNAUTHENTICATED:return se.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case St.NOT_FOUND:return se.NOT_FOUND;case St.ALREADY_EXISTS:return se.ALREADY_EXISTS;case St.PERMISSION_DENIED:return se.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case St.ABORTED:return se.ABORTED;case St.OUT_OF_RANGE:return se.OUT_OF_RANGE;case St.UNIMPLEMENTED:return se.UNIMPLEMENTED;case St.DATA_LOSS:return se.DATA_LOSS;default:return be()}}(Ge=St||(St={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=new Ki([4294967295,4294967295],0);function q0(t){const e=Yb().encode(t),n=new Zx;return n.update(e),new Uint8Array(n.digest())}function $0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ki([n,r],0),new Ki([i,s],0)]}class Op{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wo(`Invalid padding: ${n}`);if(r<0)throw new Wo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ki.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ki.fromNumber(r)));return i.compare(Qb)===1&&(i=new Ki([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=q0(e),[r,i]=$0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Op(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=q0(e),[r,i]=$0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Wa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bc(Pe.min(),i,new gt(Ke),Fr(),Be())}}class Wa{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wa(r,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class NE{constructor(e,n){this.targetId=e,this.me=n}}class PE{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class W0{constructor(){this.fe=0,this.ge=J0(),this.pe=Wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Be(),n=Be(),r=Be();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:be()}}),new Wa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=J0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ze(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Xb{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fr(),this.qe=K0(),this.Qe=new gt(Ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:be()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Qh(s))if(r===0){const o=new Ie(s.path);this.Ue(n,o,rn.newNoDocument(o,Pe.min()))}else Ze(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=rs(r).toUint8Array()}catch(l){if(l instanceof lE)return eo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Op(o,i,s)}catch(l){return eo(l instanceof Wo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Qh(a.target)){const l=new Ie(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,rn.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Be();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new bc(e,n,this.Qe,this.ke,r);return this.ke=Fr(),this.qe=K0(),this.Qe=new gt(Ke),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new W0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new qt(Ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new W0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function K0(){return new gt(Ie.comparator)}function J0(){return new gt(Ie.comparator)}const Zb={asc:"ASCENDING",desc:"DESCENDING"},eR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tR={and:"AND",or:"OR"};class nR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zh(t,e){return t.useProto3Json||Tc(e)?e:{value:e}}function qu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ME(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rR(t,e){return qu(t,e.toTimestamp())}function vr(t){return Ze(!!t),Pe.fromTimestamp(function(n){const r=gi(n);return new Rt(r.seconds,r.nanos)}(t))}function jp(t,e){return ef(t,e).canonicalString()}function ef(t,e){const n=function(i){return new lt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DE(t){const e=lt.fromString(t);return Ze(OE(e)),e}function tf(t,e){return jp(t.databaseId,e.path)}function Bd(t,e){const n=DE(e);if(n.get(1)!==t.databaseId.projectId)throw new we(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new we(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(VE(n))}function LE(t,e){return jp(t.databaseId,e)}function iR(t){const e=DE(t);return e.length===4?lt.emptyPath():VE(e)}function nf(t){return new lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VE(t){return Ze(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Y0(t,e,n){return{name:tf(t,e),fields:n.value.mapValue.fields}}function sR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Ze(d===void 0||typeof d=="string"),Wt.fromBase64String(d||"")):(Ze(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Wt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?se.UNKNOWN:RE(u.code);return new we(d,u.message||"")}(o);n=new PE(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bd(t,r.document.name),s=vr(r.document.updateTime),o=r.document.createTime?vr(r.document.createTime):Pe.min(),a=new En({mapValue:{fields:r.document.fields}}),l=rn.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new su(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Bd(t,r.document),s=r.readTime?vr(r.readTime):Pe.min(),o=rn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new su([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Bd(t,r.document),s=r.removedTargetIds||[];n=new su([],s,i,null)}else{if(!("filter"in e))return be();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Kb(i,s),a=r.targetId;n=new NE(a,o)}}return n}function oR(t,e){let n;if(e instanceof $a)n={update:Y0(t,e.key,e.value)};else if(e instanceof Ac)n={delete:tf(t,e.key)};else if(e instanceof Si)n={update:Y0(t,e.key,e.data),updateMask:mR(e.fieldMask)};else{if(!(e instanceof Hb))return be();n={verify:tf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Gu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Da)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof La)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw be()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:rR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:be()}(t,e.precondition)),n}function aR(t,e){return t&&t.length>0?(Ze(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?vr(i.updateTime):vr(s);return o.isEqual(Pe.min())&&(o=vr(s)),new jb(o,i.transformResults||[])}(n,e))):[]}function lR(t,e){return{documents:[LE(t,e.path)]}}function FE(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LE(t,i);const s=function(u){if(u.length!==0)return BE(or.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Qr(m.field),direction:hR(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Zh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function uR(t,e,n,r){const{_t:i,parent:s}=FE(t,e),o={},a=[];let l=0;return n.forEach(u=>{const d="aggregate_"+l++;o[d]=u.alias,u.aggregateType==="count"?a.push({alias:d,count:{}}):u.aggregateType==="avg"?a.push({alias:d,avg:{field:Qr(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:d,sum:{field:Qr(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},ut:o,parent:s}}function cR(t){let e=iR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ze(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(g){const m=UE(g);return m instanceof or&&hE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(m=>function(x){return new Ma(ws(x.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(g){let m;return m=typeof g=="object"?g.value:g,Tc(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(g){const m=!!g.before,y=g.values||[];return new ju(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(g){const m=!g.before,y=g.values||[];return new ju(y,m)}(n.endAt)),Ab(e,i,o,s,a,"F",l,u)}function dR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function UE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ws(n.unaryFilter.field);return Ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ws(n.unaryFilter.field);return Ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ws(n.unaryFilter.field);return Ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ws(n.unaryFilter.field);return Ct.create(o,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(t):t.fieldFilter!==void 0?function(n){return Ct.create(ws(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return or.create(n.compositeFilter.filters.map(r=>UE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return be()}}(n.compositeFilter.op))}(t):be()}function hR(t){return Zb[t]}function fR(t){return eR[t]}function pR(t){return tR[t]}function Qr(t){return{fieldPath:t.canonicalString()}}function ws(t){return Gt.fromServerFormat(t.fieldPath)}function BE(t){return t instanceof Ct?function(n){if(n.op==="=="){if(V0(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NAN"}};if(L0(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(V0(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NOT_NAN"}};if(L0(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qr(n.field),op:fR(n.op),value:n.value}}}(t):t instanceof or?function(n){const r=n.getFilters().map(i=>BE(i));return r.length===1?r[0]:{compositeFilter:{op:pR(n.op),filters:r}}}(t):be()}function mR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function OE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,r,i,s=Pe.min(),o=Pe.min(),a=Wt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.ct=e}}function yR(t){const e=cR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.un=new _R}addToCollectionParentIndex(e,n){return this.un.add(n),ce.resolve()}getCollectionParents(e,n){return ce.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ce.resolve()}deleteFieldIndex(e,n){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,n){return ce.resolve()}getDocumentsMatchingTarget(e,n){return ce.resolve(null)}getIndexType(e,n){return ce.resolve(0)}getFieldIndexes(e,n){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,n){return ce.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,n){return ce.resolve(mi.min())}updateCollectionGroup(e,n,r){return ce.resolve()}updateIndexEntries(e,n){return ce.resolve()}}class _R{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qt(lt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new io(0)}static kn(){return new io(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.changes=new fo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ce.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ca(r.mutation,i,Dn.empty(),Rt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Be()){const i=qi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=$o();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=qi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Be()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Fr();const o=ua(),a=function(){return ua()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Si)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),ca(d.mutation,u,d.mutation.getFieldMask(),Rt.now())):o.set(u.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var g;return a.set(u,new xR(d,(g=o.get(u))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ua();let i=new gt((o,a)=>o-a),s=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||Dn.empty();d=a.applyToLocalView(u,d),r.set(l,d);const g=(i.get(a.batchId)||Be()).add(l);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,g=EE();d.forEach(m=>{if(!s.has(m)){const y=AE(n.get(m),r.get(m));y!==null&&g.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,g))}return ce.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ce.resolve(qi());let a=-1,l=s;return o.next(u=>ce.forEach(u,(d,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(d)?ce.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Be())).next(d=>({batchId:a,changes:xE(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next(r=>{let i=$o();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=$o();return this.indexManager.getCollectionParents(e,s).next(a=>ce.forEach(a,l=>{const u=function(g,m){return new ho(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,rn.newInvalidDocument(d)))});let a=$o();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&ca(d.mutation,u,Dn.empty(),Rt.now()),Ic(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ce.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:vr(i.createTime)}}(n)),ce.resolve()}getNamedQuery(e,n){return ce.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:yR(i.bundledQuery),readTime:vr(i.readTime)}}(n)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.overlays=new gt(Ie.comparator),this.Ir=new Map}getOverlay(e,n){return ce.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qi();return ce.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),ce.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),ce.resolve()}getOverlaysForCollection(e,n,r){const i=qi(),s=n.length+1,o=new Ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new gt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=qi(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=qi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return ce.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $b(n,r));let s=this.Ir.get(n);s===void 0&&(s=Be(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this.Tr=new qt(Pt.Er),this.dr=new qt(Pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Pt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Pt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Ie(new lt([])),r=new Pt(n,e),i=new Pt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ie(new lt([])),r=new Pt(n,e),i=new Pt(n,e+1);let s=Be();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Pt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ie.comparator(e.key,n.key)||Ke(e.wr,n.wr)}static Ar(e,n){return Ke(e.wr,n.wr)||Ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new qt(Pt.Er)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qb(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Pt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ce.resolve(o)}lookupMutationBatch(e,n){return ce.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pt(n,0),i=new Pt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qt(Ke);return n.forEach(i=>{const s=new Pt(i,0),o=new Pt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),ce.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Ie.isDocumentKey(s)||(s=s.child(""));const o=new Pt(new Ie(s),0);let a=new qt(Ke);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),ce.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ze(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ce.forEach(n.mutations,i=>{const s=new Pt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Pt(n,0),i=this.br.firstAfterOrEqual(r);return ce.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.Mr=e,this.docs=function(){return new gt(Ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ce.resolve(r?r.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():rn.newInvalidDocument(i))}),ce.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Fr();const o=n.path,a=new Ie(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||lb(ab(d),r)<=0||(i.has(d.key)||Ic(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return ce.resolve(s)}getAllFromCollectionGroup(e,n,r,i){be()}Or(e,n){return ce.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new AR(this)}getSize(e){return ce.resolve(this.size)}}class AR extends wR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ce.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.persistence=e,this.Nr=new fo(n=>Lp(n),Vp),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zp,this.targetCount=0,this.kr=io.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ce.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new io(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ce.resolve()}updateTargetData(e,n){return this.Kn(n),ce.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ce.waitFor(s).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ce.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ce.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ce.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ce.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ce.resolve(r)}containsKey(e,n){return ce.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Np(0),this.Kr=!1,this.Kr=!0,this.$r=new IR,this.referenceDelegate=e(this),this.Ur=new bR(this),this.indexManager=new vR,this.remoteDocumentCache=function(i){return new kR(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new gR(n),this.Gr=new TR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new CR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Te("MemoryPersistence","Starting transaction:",e);const i=new NR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return ce.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class NR extends cb{constructor(e){super(),this.currentSequenceNumber=e}}class Gp{constructor(e){this.persistence=e,this.Jr=new zp,this.Yr=null}static Zr(e){return new Gp(e)}get Xr(){if(this.Yr)return this.Yr;throw be()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ce.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ce.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Xr,r=>{const i=Ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Pe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ce.or([()=>ce.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Be(),i=Be();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Hp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return pk()?8:db(dk())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new PR;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Uo()<=He.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",_s(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ce.resolve()):(Uo()<=He.DEBUG&&Te("QueryEngine","Query:",_s(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Uo()<=He.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",_s(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yr(n))):ce.resolve())}Yi(e,n){if(O0(n))return ce.resolve(null);let r=yr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=zu(n,null,"F"),r=yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Be(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,zu(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return O0(n)||i.isEqual(Pe.min())?ce.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?ce.resolve(null):(Uo()<=He.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_s(n)),this.rs(e,o,n,ob(i,-1)).next(a=>a))})}ts(e,n){let r=new qt(_E(e));return n.forEach((i,s)=>{Ic(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Uo()<=He.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",_s(n)),this.Ji.getDocumentsMatchingQuery(e,n,mi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new gt(Ke),this._s=new fo(s=>Lp(s),Vp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ER(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function LR(t,e,n,r){return new DR(t,e,n,r)}async function jE(t,e){const n=Re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Be();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function VR(t,e){const n=Re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const g=u.batch,m=g.keys();let y=ce.resolve();return m.forEach(x=>{y=y.next(()=>d.getEntry(l,x)).next(_=>{const T=u.docVersions.get(x);Ze(T!==null),_.version.compareTo(T)<0&&(g.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),d.addEntry(_)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Be();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function zE(t){const e=Re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function FR(t,e){const n=Re(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,g)=>{const m=i.get(g);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,g)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?y=y.withResumeToken(Wt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(g,y),function(_,T,v){return _.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,y,d)&&a.push(n.Ur.updateTargetData(s,y))});let l=Fr(),u=Be();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(UR(s,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!r.isEqual(Pe.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return ce.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function UR(t,e,n){let r=Be(),i=Be();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Fr();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Pe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function BR(t,e){const n=Re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OR(t,e){const n=Re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,ce.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ei(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function rf(t,e,n){const r=Re(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!qa(o))throw o;Te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Q0(t,e,n){const r=Re(t);let i=Pe.min(),s=Be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const g=Re(l),m=g._s.get(d);return m!==void 0?ce.resolve(g.os.get(m)):g.Ur.getTargetData(u,d)}(r,o,yr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Pe.min(),n?s:Be())).next(a=>(jR(r,Rb(e),a),{documents:a,Ts:s})))}function jR(t,e,n){let r=t.us.get(e)||Pe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class X0{constructor(){this.activeTargetIds=Vb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zR{constructor(){this.so=new X0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new X0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll=null;function Od(){return Ll===null?Ll=function(){return 268435456+Math.round(2147483648*Math.random())}():Ll++,"0x"+Ll.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class $R extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Od(),l=this.xo(n,r.toUriEncodedString());Te("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(d=>(Te("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw eo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+co}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=HR[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Od();return new Promise((o,a)=>{const l=new eE;l.setWithCredentials(!0),l.listenOnce(tE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case nu.NO_ERROR:const d=l.getResponseJson();Te(en,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case nu.TIMEOUT:Te(en,`RPC '${e}' ${s} timed out`),a(new we(se.DEADLINE_EXCEEDED,"Request time out"));break;case nu.HTTP_ERROR:const g=l.getStatus();if(Te(en,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const x=function(T){const v=T.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(v)>=0?v:se.UNKNOWN}(y.status);a(new we(x,y.message))}else a(new we(se.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new we(se.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{Te(en,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Te(en,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Od(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iE(),a=rE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Te(en,`Creating RPC '${e}' stream ${i}: ${d}`,l);const g=o.createWebChannel(d,l);let m=!1,y=!1;const x=new qR({Io:T=>{y?Te(en,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(m||(Te(en,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),Te(en,`RPC '${e}' stream ${i} sending:`,T),g.send(T))},To:()=>g.close()}),_=(T,v,E)=>{T.listen(v,S=>{try{E(S)}catch(P){setTimeout(()=>{throw P},0)}})};return _(g,qo.EventType.OPEN,()=>{y||(Te(en,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),_(g,qo.EventType.CLOSE,()=>{y||(y=!0,Te(en,`RPC '${e}' stream ${i} transport closed`),x.So())}),_(g,qo.EventType.ERROR,T=>{y||(y=!0,eo(en,`RPC '${e}' stream ${i} transport errored:`,T),x.So(new we(se.UNAVAILABLE,"The operation could not be completed")))}),_(g,qo.EventType.MESSAGE,T=>{var v;if(!y){const E=T.data[0];Ze(!!E);const S=E,P=S.error||((v=S[0])===null||v===void 0?void 0:v.error);if(P){Te(en,`RPC '${e}' stream ${i} received error:`,P);const V=P.status;let O=function(k){const D=St[k];if(D!==void 0)return RE(D)}(V),A=P.message;O===void 0&&(O=se.INTERNAL,A="Unknown error status: "+V+" with message "+P.message),y=!0,x.So(new we(O,A)),g.close()}else Te(en,`RPC '${e}' stream ${i} received:`,E),x.bo(E)}}),_(a,nE.STAT_EVENT,T=>{T.stat===Wh.PROXY?Te(en,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Wh.NOPROXY&&Te(en,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t){return new nR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new GE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(Vr(n.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new we(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WR extends HE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=sR(this.serializer,e),r=function(s){if(!("targetChange"in s))return Pe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Pe.min():o.readTime?vr(o.readTime):Pe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=nf(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Qh(l)?{documents:lR(s,l)}:{query:FE(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ME(s,o.resumeToken);const u=Zh(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Pe.min())>0){a.readTime=qu(s,o.snapshotVersion.toTimestamp());const u=Zh(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=dR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=nf(this.serializer),n.removeTarget=e,this.a_(n)}}class KR extends HE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=aR(e.writeResults,e.commitTime),r=vr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=nf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>oR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new we(se.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,ef(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new we(se.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,ef(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(se.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class YR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vr(n),this.D_=!1):Te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ls(this)&&(Te("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Re(l);u.L_.add(4),await Ka(u),u.q_.set("Unknown"),u.L_.delete(4),await Nc(u)}(this))})}),this.q_=new YR(r,i)}}async function Nc(t){if(ls(t))for(const e of t.B_)await e(!0)}async function Ka(t){for(const e of t.B_)await e(!1)}function qE(t,e){const n=Re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Kp(n)?Wp(n):po(n).r_()&&$p(n,e))}function qp(t,e){const n=Re(t),r=po(n);n.N_.delete(e),r.r_()&&$E(n,e),n.N_.size===0&&(r.r_()?r.o_():ls(n)&&n.q_.set("Unknown"))}function $p(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}po(t).A_(e)}function $E(t,e){t.Q_.xe(e),po(t).R_(e)}function Wp(t){t.Q_=new Xb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),po(t).start(),t.q_.v_()}function Kp(t){return ls(t)&&!po(t).n_()&&t.N_.size>0}function ls(t){return Re(t).L_.size===0}function WE(t){t.Q_=void 0}async function XR(t){t.q_.set("Online")}async function ZR(t){t.N_.forEach((e,n)=>{$p(t,e)})}async function eN(t,e){WE(t),Kp(t)?(t.q_.M_(e),Wp(t)):t.q_.set("Unknown")}async function tN(t,e,n){if(t.q_.set("Online"),e instanceof PE&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $u(t,r)}else if(e instanceof su?t.Q_.Ke(e):e instanceof NE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Pe.min()))try{const r=await zE(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Wt.EMPTY_BYTE_STRING,d.snapshotVersion)),$E(s,l);const g=new ei(d.target,l,u,d.sequenceNumber);$p(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Te("RemoteStore","Failed to raise snapshot:",r),await $u(t,r)}}async function $u(t,e,n){if(!qa(e))throw e;t.L_.add(1),await Ka(t),t.q_.set("Offline"),n||(n=()=>zE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Nc(t)})}function KE(t,e){return e().catch(n=>$u(t,n,e))}async function Pc(t){const e=Re(t),n=yi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;nN(e);)try{const i=await BR(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,rN(e,i)}catch(i){await $u(e,i)}JE(e)&&YE(e)}function nN(t){return ls(t)&&t.O_.length<10}function rN(t,e){t.O_.push(e);const n=yi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function JE(t){return ls(t)&&!yi(t).n_()&&t.O_.length>0}function YE(t){yi(t).start()}async function iN(t){yi(t).p_()}async function sN(t){const e=yi(t);for(const n of t.O_)e.m_(n.mutations)}async function oN(t,e,n){const r=t.O_.shift(),i=Bp.from(r,e,n);await KE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Pc(t)}async function aN(t,e){e&&yi(t).V_&&await async function(r,i){if(function(o){return Jb(o)&&o!==se.ABORTED}(i.code)){const s=r.O_.shift();yi(r).s_(),await KE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Pc(r)}}(t,e),JE(t)&&YE(t)}async function ey(t,e){const n=Re(t);n.asyncQueue.verifyOperationInProgress(),Te("RemoteStore","RemoteStore received new credentials");const r=ls(n);n.L_.add(3),await Ka(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Nc(n)}async function lN(t,e){const n=Re(t);e?(n.L_.delete(2),await Nc(n)):e||(n.L_.add(2),await Ka(n),n.q_.set("Unknown"))}function po(t){return t.K_||(t.K_=function(n,r,i){const s=Re(n);return s.w_(),new WR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:XR.bind(null,t),Ro:ZR.bind(null,t),mo:eN.bind(null,t),d_:tN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Kp(t)?Wp(t):t.q_.set("Unknown")):(await t.K_.stop(),WE(t))})),t.K_}function yi(t){return t.U_||(t.U_=function(n,r,i){const s=Re(n);return s.w_(),new KR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:iN.bind(null,t),mo:aN.bind(null,t),f_:sN.bind(null,t),g_:oN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Pc(t)):(await t.U_.stop(),t.O_.length>0&&(Te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Jp(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yp(t,e){if(Vr("AsyncQueue",`${e}: ${t}`),qa(t))return new we(se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ie.comparator(n.key,r.key):(n,r)=>Ie.comparator(n.key,r.key),this.keyedMap=$o(),this.sortedSet=new gt(this.comparator)}static emptySet(e){return new zs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new zs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.W_=new gt(Ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):be():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class so{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new so(e,n,zs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class cN{constructor(){this.queries=ny(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Re(n),s=i.queries;i.queries=ny(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new we(se.ABORTED,"Firestore shutting down"))}}function ny(){return new fo(t=>vE(t),Sc)}async function QE(t,e){const n=Re(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new uN,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Yp(o,`Initialization of query '${_s(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Qp(n)}async function XE(t,e){const n=Re(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function dN(t,e){const n=Re(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Qp(n)}function hN(t,e,n){const r=Re(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Qp(t){t.Y_.forEach(e=>{e.next()})}var sf,ry;(ry=sf||(sf={})).ea="default",ry.Cache="cache";class ZE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new so(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=so.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==sf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.key=e}}class tT{constructor(e){this.key=e}}class fN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Be(),this.mutatedKeys=Be(),this.Aa=_E(e),this.Ra=new zs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new ty,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,g)=>{const m=i.get(d),y=Ic(this.query,g)?g:null,x=!!m&&this.mutatedKeys.has(m.key),_=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;m&&y?m.data.isEqual(y.data)?x!==_&&(r.track({type:3,doc:y}),T=!0):this.ga(m,y)||(r.track({type:2,doc:y}),T=!0,(l&&this.Aa(y,l)>0||u&&this.Aa(y,u)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),T=!0):m&&!y&&(r.track({type:1,doc:m}),T=!0,(l||u)&&(a=!0)),T&&(y?(o=o.add(y),s=_?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,g)=>function(y,x){const _=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return _(y)-_(x)}(d.type,g.type)||this.Aa(d.doc,g.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new so(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ty,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Be(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new tT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new eT(r))}),n}ba(e){this.Ta=e.Ts,this.da=Be();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return so.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class pN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class mN{constructor(e){this.key=e,this.va=!1}}class gN{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new fo(a=>vE(a),Sc),this.Ma=new Map,this.xa=new Set,this.Oa=new gt(Ie.comparator),this.Na=new Map,this.La=new zp,this.Ba={},this.ka=new Map,this.qa=io.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function yN(t,e,n=!0){const r=aT(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await nT(r,e,n,!0),i}async function vN(t,e){const n=aT(t);await nT(n,e,!0,!1)}async function nT(t,e,n,r){const i=await OR(t.localStore,yr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await _N(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&qE(t.remoteStore,i),a}async function _N(t,e,n,r,i){t.Ka=(g,m,y)=>async function(_,T,v,E){let S=T.view.ma(v);S.ns&&(S=await Q0(_.localStore,T.query,!1).then(({documents:A})=>T.view.ma(A,S)));const P=E&&E.targetChanges.get(T.targetId),V=E&&E.targetMismatches.get(T.targetId)!=null,O=T.view.applyChanges(S,_.isPrimaryClient,P,V);return sy(_,T.targetId,O.wa),O.snapshot}(t,g,m,y);const s=await Q0(t.localStore,e,!0),o=new fN(e,s.Ts),a=o.ma(s.documents),l=Wa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);sy(t,n,u.wa);const d=new pN(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function wN(t,e,n){const r=Re(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Sc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await rf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&qp(r.remoteStore,i.targetId),of(r,i.targetId)}).catch(Ha)):(of(r,i.targetId),await rf(r.localStore,i.targetId,!0))}async function xN(t,e){const n=Re(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qp(n.remoteStore,r.targetId))}async function EN(t,e,n){const r=bN(t);try{const i=await function(o,a){const l=Re(o),u=Rt.now(),d=a.reduce((y,x)=>y.add(x.key),Be());let g,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=Fr(),_=Be();return l.cs.getEntries(y,d).next(T=>{x=T,x.forEach((v,E)=>{E.isValidDocument()||(_=_.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,x)).next(T=>{g=T;const v=[];for(const E of a){const S=Gb(E,g.get(E.key).overlayedDocument);S!=null&&v.push(new Si(E.key,S,uE(S.value.mapValue),An.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,v,a)}).next(T=>{m=T;const v=T.applyToLocalDocumentSet(g,_);return l.documentOverlayCache.saveOverlays(y,T.batchId,v)})}).then(()=>({batchId:m.batchId,changes:xE(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new gt(Ke)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Ja(r,i.changes),await Pc(r.remoteStore)}catch(i){const s=Yp(i,"Failed to persist write");n.reject(s)}}async function rT(t,e){const n=Re(t);try{const r=await FR(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ze(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ze(o.va):i.removedDocuments.size>0&&(Ze(o.va),o.va=!1))}),await Ja(n,r,e)}catch(r){await Ha(r)}}function iy(t,e,n){const r=Re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Re(o);l.onlineState=a;let u=!1;l.queries.forEach((d,g)=>{for(const m of g.j_)m.Z_(a)&&(u=!0)}),u&&Qp(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function TN(t,e,n){const r=Re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new gt(Ie.comparator);o=o.insert(s,rn.newNoDocument(s,Pe.min()));const a=Be().add(s),l=new bc(Pe.min(),new Map,new gt(Ke),o,a);await rT(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Xp(r)}else await rf(r.localStore,e,!1).then(()=>of(r,e,n)).catch(Ha)}async function SN(t,e){const n=Re(t),r=e.batch.batchId;try{const i=await VR(n.localStore,e);sT(n,r,null),iT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ja(n,i)}catch(i){await Ha(i)}}async function IN(t,e,n){const r=Re(t);try{const i=await function(o,a){const l=Re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(g=>(Ze(g!==null),d=g.keys(),l.mutationQueue.removeMutationBatch(u,g))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);sT(r,e,n),iT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ja(r,i)}catch(i){await Ha(i)}}function iT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function sT(t,e,n){const r=Re(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function of(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||oT(t,r)})}function oT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(qp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Xp(t))}function sy(t,e,n){for(const r of n)r instanceof eT?(t.La.addReference(r.key,e),CN(t,r)):r instanceof tT?(Te("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||oT(t,r.key)):be()}function CN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Te("SyncEngine","New document in limbo: "+n),t.xa.add(r),Xp(t))}function Xp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ie(lt.fromString(e)),r=t.qa.next();t.Na.set(r,new mN(n)),t.Oa=t.Oa.insert(n,r),qE(t.remoteStore,new ei(yr(Fp(n.path)),r,"TargetPurposeLimboResolution",Np.oe))}}async function Ja(t,e,n){const r=Re(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const g=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(u){i.push(u);const g=Hp.Wi(l.targetId,u);s.push(g)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const d=Re(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>ce.forEach(u,m=>ce.forEach(m.$i,y=>d.persistence.referenceDelegate.addReference(g,m.targetId,y)).next(()=>ce.forEach(m.Ui,y=>d.persistence.referenceDelegate.removeReference(g,m.targetId,y)))))}catch(g){if(!qa(g))throw g;Te("LocalStore","Failed to update sequence numbers: "+g)}for(const g of u){const m=g.targetId;if(!g.fromCache){const y=d.os.get(m),x=y.snapshotVersion,_=y.withLastLimboFreeSnapshotVersion(x);d.os=d.os.insert(m,_)}}}(r.localStore,s))}async function kN(t,e){const n=Re(t);if(!n.currentUser.isEqual(e)){Te("SyncEngine","User change. New user:",e.toKey());const r=await jE(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new we(se.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ja(n,r.hs)}}function AN(t,e){const n=Re(t),r=n.Na.get(e);if(r&&r.va)return Be().add(r.key);{let i=Be();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function aT(t){const e=Re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TN.bind(null,e),e.Ca.d_=dN.bind(null,e.eventManager),e.Ca.$a=hN.bind(null,e.eventManager),e}function bN(t){const e=Re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IN.bind(null,e),e}class Wu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return LR(this.persistence,new MR,e.initialUser,this.serializer)}Ga(e){return new RR(Gp.Zr,this.serializer)}Wa(e){return new zR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wu.provider={build:()=>new Wu};class af{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>iy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kN.bind(null,this.syncEngine),await lN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cN}()}createDatastore(e){const n=Rc(e.databaseInfo.databaseId),r=function(s){return new $R(s)}(e.databaseInfo);return function(s,o,a,l){return new JR(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new QR(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>iy(this.syncEngine,n,0),function(){return Z0.D()?new Z0:new GR}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const g=new gN(i,s,o,a,l,u);return d&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Re(i);Te("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ka(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}af.provider={build:()=>new af};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=tn.UNAUTHENTICATED,this.clientId=oE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Te("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Yp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zd(t,e){t.asyncQueue.verifyOperationInProgress(),Te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await jE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function oy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await NN(t);Te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ey(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ey(e.remoteStore,i)),t._onlineComponents=e}async function NN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te("FirestoreClient","Using user provided OfflineComponentProvider");try{await zd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===se.FAILED_PRECONDITION||i.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;eo("Error using user provided cache. Falling back to memory cache: "+n),await zd(t,new Wu)}}else Te("FirestoreClient","Using default OfflineComponentProvider"),await zd(t,new Wu);return t._offlineComponents}async function Zp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te("FirestoreClient","Using user provided OnlineComponentProvider"),await oy(t,t._uninitializedComponentsProvider._online)):(Te("FirestoreClient","Using default OnlineComponentProvider"),await oy(t,new af))),t._onlineComponents}function PN(t){return Zp(t).then(e=>e.syncEngine)}function MN(t){return Zp(t).then(e=>e.datastore)}async function uT(t){const e=await Zp(t),n=e.eventManager;return n.onListen=yN.bind(null,e.syncEngine),n.onUnlisten=wN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xN.bind(null,e.syncEngine),n}function DN(t,e,n={}){const r=new gr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new lT({next:m=>{d.Za(),o.enqueueAndForget(()=>XE(s,g));const y=m.docs.has(a);!y&&m.fromCache?u.reject(new we(se.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?u.reject(new we(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),g=new ZE(Fp(a.path),d,{includeMetadataChanges:!0,_a:!0});return QE(s,g)}(await uT(t),t.asyncQueue,e,n,r)),r.promise}function LN(t,e,n={}){const r=new gr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new lT({next:m=>{d.Za(),o.enqueueAndForget(()=>XE(s,g)),m.fromCache&&l.source==="server"?u.reject(new we(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),g=new ZE(a,d,{includeMetadataChanges:!0,_a:!0});return QE(s,g)}(await uT(t),t.asyncQueue,e,n,r)),r.promise}function VN(t,e,n){const r=new gr;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await MN(t);r.resolve(async function(o,a,l){var u;const d=Re(o),{request:g,ut:m,parent:y}=uR(d.serializer,bb(a),l);d.connection.Fo||delete g.parent;const x=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,y,g,1)).filter(T=>!!T.result);Ze(x.length===1);const _=(u=x[0].result)===null||u===void 0?void 0:u.aggregateFields;return Object.keys(_).reduce((T,v)=>(T[m[v]]=_[v],T),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t,e,n){if(!n)throw new we(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FN(t,e,n,r){if(e===!0&&r===!0)throw new we(se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ly(t){if(!Ie.isDocumentKey(t))throw new we(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uy(t){if(Ie.isDocumentKey(t))throw new we(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":be()}function ar(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mc(t);throw new we(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function UN(t,e){if(e<=0)throw new we(se.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new we(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new we(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new we(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new we(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new we(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Q2;switch(r.type){case"firstParty":return new tb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ay.get(n);r&&(Te("ComponentProvider","Removing Datastore"),ay.delete(n),r.terminate())}(this),Promise.resolve()}}function BN(t,e,n,r={}){var i;const s=(t=ar(t,Dc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=tn.MOCK_USER;else{a=ck(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new we(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new tn(u)}t._authCredentials=new X2(new sE(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ii(this.firestore,e,this._query)}}class bn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bn(this.firestore,e,this._key)}}class di extends Ii{constructor(e,n,r){super(e,n,Fp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bn(this.firestore,null,new Ie(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function Rn(t,e,...n){if(t=Un(t),dT("collection","path",e),t instanceof Dc){const r=lt.fromString(e,...n);return uy(r),new di(t,null,r)}{if(!(t instanceof bn||t instanceof di))throw new we(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(lt.fromString(e,...n));return uy(r),new di(t.firestore,null,r)}}function vi(t,e,...n){if(t=Un(t),arguments.length===1&&(e=oE.newId()),dT("doc","path",e),t instanceof Dc){const r=lt.fromString(e,...n);return ly(r),new bn(t,null,new Ie(r))}{if(!(t instanceof bn||t instanceof di))throw new we(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(lt.fromString(e,...n));return ly(r),new bn(t.firestore,t instanceof di?t.converter:null,new Ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new GE(this,"async_queue_retry"),this.Vu=()=>{const r=jd();r&&Te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=jd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=jd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new gr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!qa(e))throw e;Te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Vr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Jp.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Ci extends Dc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new dy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dy(e),this._firestoreClient=void 0,await e}}}function ON(t,e){const n=typeof t=="object"?t:Ax(),r=typeof t=="string"?t:"(default)",i=Ga(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=lk("firestore");s&&BN(i,...s)}return i}function Ya(t){if(t._terminated)throw new we(se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jN(t),t._firestoreClient}function jN(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new mb(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,cT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new RN(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class GN{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oo(Wt.fromBase64String(e))}catch(n){throw new we(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new oo(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new we(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new we(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new we(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=/^__.*__$/;class qN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Si(e,this.data,this.fieldMask,n,this.fieldTransforms):new $a(e,this.data,n,this.fieldTransforms)}}class hT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Si(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class rm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new rm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ku(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(fT(this.Cu)&&HN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class $N{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rc(e)}Qu(e,n,r,i=!1){return new rm({Cu:e,methodName:n,qu:r,path:Gt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lc(t){const e=t._freezeSettings(),n=Rc(t._databaseId);return new $N(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pT(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);im("Data must be an object, but it was:",o,r);const a=yT(r,o);let l,u;if(s.merge)l=new Dn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=lf(e,g,n);if(!o.contains(m))throw new we(se.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);_T(d,m)||d.push(m)}l=new Dn(d),u=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,u=o.fieldTransforms;return new qN(new En(a),l,u)}class Vc extends em{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vc}}function mT(t,e,n,r){const i=t.Qu(1,e,n);im("Data must be an object, but it was:",i,r);const s=[],o=En.empty();as(r,(l,u)=>{const d=sm(e,l,n);u=Un(u);const g=i.Nu(d);if(u instanceof Vc)s.push(d);else{const m=Xa(u,g);m!=null&&(s.push(d),o.set(d,m))}});const a=new Dn(s);return new hT(o,a,i.fieldTransforms)}function gT(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[lf(e,r,n)],l=[i];if(s.length%2!=0)throw new we(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(lf(e,s[m])),l.push(s[m+1]);const u=[],d=En.empty();for(let m=a.length-1;m>=0;--m)if(!_T(u,a[m])){const y=a[m];let x=l[m];x=Un(x);const _=o.Nu(y);if(x instanceof Vc)u.push(y);else{const T=Xa(x,_);T!=null&&(u.push(y),d.set(y,T))}}const g=new Dn(u);return new hT(d,g,o.fieldTransforms)}function WN(t,e,n,r=!1){return Xa(n,t.Qu(r?4:3,e))}function Xa(t,e){if(vT(t=Un(t)))return im("Unsupported field value:",e,t),yT(t,e);if(t instanceof em)return function(r,i){if(!fT(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Xa(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Un(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Fb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Rt.fromDate(r);return{timestampValue:qu(i.serializer,s)}}if(r instanceof Rt){const s=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qu(i.serializer,s)}}if(r instanceof tm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oo)return{bytesValue:ME(i.serializer,r._byteString)};if(r instanceof bn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:jp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof nm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Up(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Mc(r)}`)}(t,e)}function yT(t,e){const n={};return aE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):as(t,(r,i)=>{const s=Xa(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function vT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rt||t instanceof tm||t instanceof oo||t instanceof bn||t instanceof em||t instanceof nm)}function im(t,e,n){if(!vT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Mc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function lf(t,e,n){if((e=Un(e))instanceof Qa)return e._internalPath;if(typeof e=="string")return sm(t,e);throw Ku("Field path arguments must be of type string or ",t,!1,void 0,n)}const KN=new RegExp("[~\\*/\\[\\]]");function sm(t,e,n){if(e.search(KN)>=0)throw Ku(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qa(...e.split("."))._internalPath}catch{throw Ku(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ku(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new we(se.INVALID_ARGUMENT,a+t+l)}function _T(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JN extends wT{data(){return super.data()}}function Fc(t,e){return typeof e=="string"?sm(t,e):e instanceof Qa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new we(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class om{}class am extends om{}function ki(t,e,...n){let r=[];e instanceof om&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof lm).length,a=s.filter(l=>l instanceof Uc).length;if(o>1||o>0&&a>0)throw new we(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Uc extends am{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Uc(e,n,r)}_apply(e){const n=this._parse(e);return ET(e._query,n),new Ii(e.firestore,e.converter,Xh(e._query,n))}_parse(e){const n=Lc(e.firestore);return function(s,o,a,l,u,d,g){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new we(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){fy(g,d);const y=[];for(const x of g)y.push(hy(l,s,x));m={arrayValue:{values:y}}}else m=hy(l,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||fy(g,d),m=WN(a,o,g,d==="in"||d==="not-in");return Ct.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function _i(t,e,n){const r=e,i=Fc("where",t);return Uc._create(i,r,n)}class lm extends om{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new lm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:or.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)ET(o,l),o=Xh(o,l)}(e._query,n),new Ii(e.firestore,e.converter,Xh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class um extends am{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new um(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new we(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new we(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ma(s,o)}(e._query,this._field,this._direction);return new Ii(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ho(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function cm(t,e="asc"){const n=e,r=Fc("orderBy",t);return um._create(r,n)}class dm extends am{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new dm(e,n,r)}_apply(e){return new Ii(e.firestore,e.converter,zu(e._query,this._limit,this._limitType))}}function xT(t){return UN("limit",t),dm._create("limit",t,"F")}function hy(t,e,n){if(typeof(n=Un(n))=="string"){if(n==="")throw new we(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gE(e)&&n.indexOf("/")!==-1)throw new we(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(lt.fromString(n));if(!Ie.isDocumentKey(r))throw new we(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return D0(t,new Ie(r))}if(n instanceof bn)return D0(t,n._key);throw new we(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mc(n)}.`)}function fy(t,e){if(!Array.isArray(t)||t.length===0)throw new we(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ET(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new we(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class QN{convertValue(e,n="none"){switch(is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return as(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>_t(o.doubleValue));return new nm(s)}convertGeoPoint(e){return new tm(_t(e.latitude),_t(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ra(e));default:return null}}convertTimestamp(e){const n=gi(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=lt.fromString(e);Ze(OE(r));const i=new Na(r.get(1),r.get(3)),s=new Ie(r.popFirst(5));return i.isEqual(n)||Vr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function XN(){return new zN("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ST extends wT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Fc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ou extends ST{data(e={}){return super.data(e)}}class ZN{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ko(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ou(this._firestore,this._userDataWriter,r.key,r,new Ko(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new we(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ou(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ko(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ou(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ko(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:eP(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function eP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t){t=ar(t,bn);const e=ar(t.firestore,Ci);return DN(Ya(e),t._key).then(n=>rP(e,t,n))}class hm extends QN{constructor(e){super(),this.firestore=e}convertBytes(e){return new oo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,n)}}function Ai(t){t=ar(t,Ii);const e=ar(t.firestore,Ci),n=Ya(e),r=new hm(e);return YN(t._query),LN(n,t._query).then(i=>new ZN(e,r,t,i))}function Bc(t,e,n,...r){t=ar(t,bn);const i=ar(t.firestore,Ci),s=Lc(i);let o;return o=typeof(e=Un(e))=="string"||e instanceof Qa?gT(s,"updateDoc",t._key,e,n,r):mT(s,"updateDoc",t._key,e),jc(i,[o.toMutation(t._key,An.exists(!0))])}function nP(t){return jc(ar(t.firestore,Ci),[new Ac(t._key,An.none())])}function Oc(t,e){const n=ar(t.firestore,Ci),r=vi(t),i=TT(t.converter,e);return jc(n,[pT(Lc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,An.exists(!1))]).then(()=>r)}function jc(t,e){return function(r,i){const s=new gr;return r.asyncQueue.enqueueAndForget(async()=>EN(await PN(r),i,s)),s.promise}(Ya(t),e)}function rP(t,e,n){const r=n.docs.get(e._key),i=new hm(t);return new ST(t,i,e._key,r,new Ko(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t){return iP(t,{count:XN()})}function iP(t,e){const n=ar(t.firestore,Ci),r=Ya(n),i=fb(e,(s,o)=>new Wb(o,s.aggregateType,s._internalFieldPath));return VN(r,t._query,i).then(s=>function(a,l,u){const d=new hm(a);return new GN(l,d,u)}(n,t,s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Lc(e)}set(e,n,r){this._verifyNotCommitted();const i=Gd(e,this._firestore),s=TT(i.converter,n,r),o=pT(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,An.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Gd(e,this._firestore);let o;return o=typeof(n=Un(n))=="string"||n instanceof Qa?gT(this._dataReader,"WriteBatch.update",s._key,n,r,i):mT(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,An.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Gd(e,this._firestore);return this._mutations=this._mutations.concat(new Ac(n._key,An.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gd(t,e){if((t=Un(t)).firestore!==e)throw new we(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t){return Ya(t=ar(t,Ci)),new sP(t,e=>jc(t,e))}(function(e,n=!0){(function(i){co=i})(wA),pi(new Dr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ci(new Z2(r.getProvider("auth-internal")),new rb(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new we(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Na(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),mr(b0,"4.7.3",e),mr(b0,"4.7.3","esm2017")})();const aP={apiKey:"AIzaSyDjgrBvKUaVg9U1XustHj9TeO4lHZDrcNg",authDomain:"fanra-dev.firebaseapp.com",projectId:"fanra-dev",storageBucket:"fanra-dev.firebasestorage.app",messagingSenderId:"664735861834",appId:"1:664735861834:web:6519570201553dbe4faab3",measurementId:"G-HMKEVZS65H"},CT=kx(aP);W2(CT);const xt=ON(CT),br="users",kT="chats",Ju="knowledge_base",Va="shared_api_keys",AT="gallery_photos_production",Vl=5,uf="fanra_credits_offline",bT=[{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/609923798_2054349268723214_528785191593339343_n.webp?stp=dst-webp_s960x960&_nc_cat=110&ccb=1-7&_nc_sid=9f807c&_nc_ohc=BZOOtuLCh5UQ7kNvwGKzWef&_nc_oc=AdmGNpGcSr3xRboqLJeuQ8M5KjOpRBNLbsqQVscddteG1f05EVO_Kv4iZQn5l2OjztzywzdnV5Qp-sDi35XjQWpa&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QGA47iTm-6vGLy8O36BgFnvih3m4gJ3HjjJLwTB_h1_yg&oe=6987DFA2",caption:"Awal tahun yang tenang. Duduk santai menikmati sore.",month:"Januari",year:"2026",timestamp:1768608e6},{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/611706564_2018744562412383_4672231368009984812_n.webp?stp=dst-webp_s960x960&_nc_cat=100&ccb=1-7&_nc_sid=9f807c&_nc_ohc=8vrelkTX4jwQ7kNvwFViCo8&_nc_oc=AdlRfEy9cuAAR5sdf16e20vyL3VG18VHEfqFf9Tzogwa9KkGY9w4XmvXM6r1A2UBC-bNWuVFDW7RNAseNK15Gshv&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QFgaMOdt27d4C8rMdww2Y_p6pDbScnm9zgchvdnMusprg&oe=6987E582",caption:"Langit biru cerah di minggu pertama Januari.",month:"Januari",year:"2026",timestamp:17678304e5},{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/598380092_896889149354203_4879091936783375578_n.jpg?stp=dst-jpg_s960x960_tt6&_nc_cat=105&ccb=1-7&_nc_sid=9f807c&_nc_ohc=Fd1SqIvACYkQ7kNvwEm2nkk&_nc_oc=AdmYsQUnc1IGnj0VlUq1a0ZUS7NX8txhrtix-4YMtg5AHwyMs7lV7pkGXksK7FQ-9j_rZIsP2oMCTNyOOUWaIJoO&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QFeMdYNErGOaRyNLxbQeohoytE-ksxUzti73nbhMQOxew&oe=6987EFDA",caption:"Momen refleksi diri sebelum semester baru dimulai.",month:"Januari",year:"2026",timestamp:17677e8},{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/612791370_2117831522293966_2410342274796760614_n.jpg?stp=dst-jpg_s960x960_tt6&_nc_cat=103&ccb=1-7&_nc_sid=9f807c&_nc_ohc=WL8mDXowDBsQ7kNvwHVQof1&_nc_oc=AdnRpMaXXWlbMn6T_kIcP0qfVmS48vFVfyW05qp7iLtq43XyVSyGTNmqzKE5LHqdpcEa_JbcaZOHa2IH9vNrNh96&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QHmTkH2LI2e0GO04-2KfsNqL0HpW4wzctk0hGsD4RDQ8A&oe=6987E4A0",caption:"New year, new mindset. Fokus ke depan.",month:"Januari",year:"2026",timestamp:17675e8},{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/608308490_1950643742184938_3981400827722807456_n.webp?stp=dst-webp_s960x960&_nc_cat=109&ccb=1-7&_nc_sid=9f807c&_nc_ohc=tFn5epeHIIsQ7kNvwHTCore&_nc_oc=AdkebR-I89hx_2EvCX_DdGuWd2Wg9CYaxbygtMbwHYvEXYPkB713PEK2OSbnAmzJrOq466X9uAndsVFO6kAprVo7&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QH3E2QAocwldf71A12w36lCGQZqt6AtJ5dqe4htyG_e7Q&oe=6987D453",caption:"Liburan akhir tahun. Outfit kasual favorit.",month:"Desember",year:"2025",timestamp:17670528e5},{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/609257271_2063267820878983_7152616428219081235_n.jpg?stp=dst-jpg_s960x960_tt6&_nc_cat=103&ccb=1-7&_nc_sid=9f807c&_nc_ohc=gknfjoKuUHEQ7kNvwHivUj3&_nc_oc=AdmPqTLCMXLe3N7HwtXTpDs5NjnW8dzMeBjP6w30y5fNmhE5AX4oPBvu-QDB_ZiWF-Ehs6tnleeUNXja526HGoyI&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QE_96a-tJ3ZeSSv6JbaNyoDo5n6wJ36PSpa8yJySzVHUA&oe=698803D0",caption:"Menikmati suasana Natal dan Tahun Baru di kota.",month:"Desember",year:"2025",timestamp:17668e8},{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/609789054_881771984216868_5234337706702613859_n.jpg?stp=dst-jpg_s960x960_tt6&_nc_cat=110&ccb=1-7&_nc_sid=9f807c&_nc_ohc=dSU6-yFS4BcQ7kNvwFPjjP2&_nc_oc=Adm4-TKhehwQagHsqiAXAzgFbOT17DS1GmSA9t3eLBAm9mU7_loN5DT0ywtVXoI_2VMuvO_2cXfWYnJv_6jUoB-M&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QGjePbliXKLzBAgCeEt6CilMukWhFi1mi5Se5-jVn3KZQ&oe=6987F65A",caption:"Hujan bulan Desember membawa ketenangan.",month:"Desember",year:"2025",timestamp:17662e8},{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/609223580_1389207906001390_5893268797834020955_n.webp?stp=dst-webp_s960x960&_nc_cat=101&ccb=1-7&_nc_sid=9f807c&_nc_ohc=e_tUOQP9PBQQ7kNvwEqs4A5&_nc_oc=AdnmQRS2CRUS91BEzZKkN5EDf5YCWd606bqkao8ia0gTGd7NA3nFsIuxS_oyo5na-nToQu8uHruU_jNGpitrQLmH&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QGv0sfsl-1EX3mzl8Uf7XmL_ydid8SvCR2fG04wfFtPLg&oe=6987DF67",caption:"Menemukan sudut estetik sebelum ujian akhir semester.",month:"Desember",year:"2025",timestamp:17658432e5},{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/599219119_1236679581682812_6662536942214846943_n.jpg?stp=dst-jpg_s960x960_tt6&_nc_cat=110&ccb=1-7&_nc_sid=9f807c&_nc_ohc=pE3jSBRFz0QQ7kNvwHM0Ucw&_nc_oc=AdkFK3Bma-ZJqvwCKYDqjHBbOfy01m8qkU8rbDRKPgJtydLiz7-grxPSxBvJXM-ntGh11MeSDVEJFCgBTkv8bfPF&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QFTt-JBfwOHmLt0Ybdqp4AGnKmKp4-hSjKIgsRHa6jTSg&oe=6987FF90",caption:"Belajar kelompok atau sekadar nongkrong?",month:"November",year:"2025",timestamp:17642e8},{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/608819487_2435033703579625_4140175408319169134_n.webp?stp=dst-webp_s960x960&_nc_cat=100&ccb=1-7&_nc_sid=9f807c&_nc_ohc=cNiSKwuxh9YQ7kNvwHZGt-n&_nc_oc=AdlEznQJyFabI3WsFgYJK1spoOspN1nLtbpnbqRjbU3S64V4jfPMnegr1aa5WTq5rADPJcV8xwjKoRjvoW2u5V2M&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QG0LpDsjmHi4j2RbGlT2i0FYCoExgK_K8Bb2JOC77ZKMg&oe=6987F07A",caption:"Candid moment di pertengahan November.",month:"November",year:"2025",timestamp:17636832e5},{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/611701937_2037824150331841_9077545246525900872_n.jpg?stp=dst-jpg_s960x960_tt6&_nc_cat=102&ccb=1-7&_nc_sid=9f807c&_nc_ohc=VBVzMjtswnoQ7kNvwHBTPX3&_nc_oc=AdlCErriFj9X1WnuAtV9iEMO2b4JrwKG4NP2_zbk90hMwEdkmJgodsZpN4frthCGgWRldaEJnLte5_h8YJ93cJVm&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QElJqMtEQLZojQSiI5Cir35k5s5xl9ciZxPCCQmzriQLg&oe=6987F648",caption:"Eksplorasi tempat baru di akhir pekan.",month:"November",year:"2025",timestamp:17632e8},{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/609831264_1388559615524632_3954243275870008722_n.webp?stp=dst-webp_s960x960&_nc_cat=100&ccb=1-7&_nc_sid=9f807c&_nc_ohc=PHODhbaZKrIQ7kNvwEDelwu&_nc_oc=Adk4QRWwV_ivYfRcrxtV5_RPXD9uZRw8rWmUGjsU1ep5SD7UYVJ0TaPXiBa8xgDjVWsrYQ8bmV9Yql0oqjIfa2B8&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QE5XiDUAryU23ToiivOyjAlgNdECtutWX4yT3qBviSPEw&oe=6987E305",caption:"Suasana senja November yang menenangkan.",month:"November",year:"2025",timestamp:17628192e5},{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/609929561_1564856645306340_3974811442750193753_n.jpg?stp=dst-jpg_s960x960_tt6&_nc_cat=107&ccb=1-7&_nc_sid=9f807c&_nc_ohc=jW6AC6UyAxgQ7kNvwFysyVa&_nc_oc=AdncG6pQUEmimPXEsKNWJHNvpYlaa3UyVEMHibL0WtBtQwN6tuHMcQWtKS_CbDGfYFPpU-8EXAkjbfrLz0cg8uhF&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QGgT0-0vaByyY3d2VKy9MwRhDwIWc4dnjxOeNMU5sBXpw&oe=6987EE53",caption:"Sore yang produktif dengan segelas kopi.",month:"November",year:"2025",timestamp:17625e8},{src:"https://scontent.xx.fbcdn.net/v/t1.15752-9/609019193_1605314313982212_8804073519647258635_n.webp?stp=dst-webp_s960x960&_nc_cat=104&ccb=1-7&_nc_sid=9f807c&_nc_ohc=wm7vqvdxLicQ7kNvwGBWvs8&_nc_oc=AdnQ9YC7zULjsSlfGybT0_boZHJnNKS3G_q9icSQnMpMTz2RAXfGhUvGPyzeFgOJOAvq8BChvlbEav3ALfO42dCv&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.xx&oh=03_Q7cD4QHNt0LfntWLSE5Ep3w44K8LKD5mqVTSWxsY337WnmoX5w&oe=6987FBF5",caption:"Eksperimen angle foto baru di awal bulan.",month:"November",year:"2025",timestamp:17623008e5}],RT=t=>{if(!t)return"";let e=t.toLowerCase();e=e.replace(/[?.!,@#%^&*()_+\-=\[\]{};':"\\|<>\/]/g," ");const n=["halo","hai","hi","woy","permisi","pagi","siang","sore","malam","tolong","coba","jelaskan","kasih","tau","beritahu","apa","itu","yang","dimana","kapan","kenapa","bagaimana","sih","dong","please","tell","me","about","what","is","are","how","who"];return e.split(/\s+/).filter(i=>i.length>0&&!n.includes(i)).sort().join(" ")},lP=async(t,e,n)=>{try{const r=ki(Rn(xt,br),_i("name","==",t),_i("school","==",e)),i=await Ai(r);if(i.empty){const s=t==="ira123"&&e==="ira",o={name:t,school:e,deviceId:n,isAdmin:s,credits:Vl,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),apiKeys:[]},a=await Oc(Rn(xt,br),o);return{user:{name:t,school:e,deviceId:n,isAdmin:s},credits:Vl,id:a.id}}else{const s=i.docs[0],o=s.data();return await Bc(vi(xt,br,s.id),{lastLogin:new Date().toISOString(),deviceId:n}),{user:{name:o.name,school:o.school,deviceId:o.deviceId,isAdmin:o.isAdmin||!1},credits:o.credits??Vl,id:s.id}}}catch{console.log("Using Offline Mode (Firebase unavailable or restricted)");const i=t==="ira123"&&e==="ira",s=`offline_${n}`,o=localStorage.getItem(uf),a=o?parseInt(o,10):Vl;return o||localStorage.setItem(uf,a.toString()),{user:{name:t,school:e,deviceId:n,isAdmin:i},credits:a,id:s}}},uP=async(t,e)=>{if(t.startsWith("offline_")){localStorage.setItem(uf,e.toString());return}try{const n=vi(xt,br,t);await Bc(n,{credits:e})}catch{}},cP=async t=>{if(t.startsWith("offline_"))return[];try{const e=vi(xt,br,t),n=await tP(e);return n.exists()?n.data().apiKeys||[]:[]}catch(e){return console.error("Failed to fetch keys",e),[]}},py=async(t,e)=>{if(!t.startsWith("offline_"))try{const n=vi(xt,br,t);await Bc(n,{apiKeys:e});for(const r of e)if(r.isShared){const i=ki(Rn(xt,Va),_i("key","==",r.key));(await Ai(i)).empty&&await Oc(Rn(xt,Va),{key:r.key,provider:t,addedAt:Date.now(),isActive:!0})}}catch(n){console.error("Failed to save keys",n)}},dP=async(t,e,n)=>{if(!t.startsWith("offline_"))try{const r=n.filter(a=>a.key!==e),i=vi(xt,br,t);await Bc(i,{apiKeys:r});const s=ki(Rn(xt,Va),_i("key","==",e),_i("provider","==",t));(await Ai(s)).forEach(async a=>{await nP(vi(xt,Va,a.id))})}catch(r){console.error("Failed to delete key",r)}},NT=async()=>{try{const t=ki(Rn(xt,Va),_i("isActive","==",!0),cm("addedAt","desc"),xT(10));return(await Ai(t)).docs.map(r=>r.data().key).sort(()=>.5-Math.random()).slice(0,5)}catch(t){return console.warn("Failed to fetch community keys",t),[]}},my=async(t,e)=>{if(!t.startsWith("offline_"))try{const n=Rn(xt,br,t,kT);await Oc(n,e)}catch{}},hP=async t=>{if(t.startsWith("offline_"))return[];try{const e=Rn(xt,br,t,kT),n=ki(e,cm("timestamp","asc"),xT(50));return(await Ai(n)).docs.map(i=>i.data())}catch{return[]}},fP=async(t,e)=>{try{const n=RT(t);if(!n)return;const r=ki(Rn(xt,Ju),_i("question_normalized","==",n));(await Ai(r)).empty&&await Oc(Rn(xt,Ju),{question:t,question_normalized:n,answer:e,timestamp:Date.now()})}catch(n){if(n.code==="permission-denied")return}},PT=async t=>{try{const e=RT(t);if(!e)return null;const n=ki(Rn(xt,Ju),_i("question_normalized","==",e)),r=await Ai(n);return r.empty?null:r.docs[0].data().answer}catch{return null}},pP=async()=>{try{const t=Rn(xt,Ju);return(await IT(t)).data().count}catch(t){return console.error("Error counting knowledge base:",t),0}},mP=async()=>{try{const t=Rn(xt,AT);if((await IT(t)).data().count===0){console.log("Seeding Initial Gallery Data...");const n=oP(xt);bT.forEach(r=>{const i=vi(t);n.set(i,{...r})}),await n.commit(),console.log("Gallery Seeded Successfully.")}}catch(t){if(t.code==="permission-denied"){console.warn("Gallery DB permission denied. Using local mode.");return}console.error("Gallery Seeding Error:",t)}},gP=async()=>{try{await mP();const t=ki(Rn(xt,AT),cm("timestamp","desc")),e=await Ai(t);if(e.empty)throw new Error("Empty DB");return e.docs.map(n=>({id:n.id,...n.data()}))}catch{return console.warn("Using local gallery data (DB unavailable)."),bT.map((e,n)=>({id:`local-${n}`,...e}))}},yP=({isAdmin:t})=>{const[e,n]=te.useState([]),[r,i]=te.useState(!0),[s,o]=te.useState("All"),[a,l]=te.useState(null),[u,d]=te.useState(9),g=6;te.useEffect(()=>{(async()=>{i(!0);const P=await gP();n(P),i(!1)})()},[]),te.useEffect(()=>{d(9)},[s]);const m=["All",...Array.from(new Set(e.map(S=>S.year))).sort().reverse()],y=s==="All"?e:e.filter(S=>S.year===s),x=y.slice(0,u),_=u<y.length,T=x.reduce((S,P)=>(S[P.year]||(S[P.year]=[]),S[P.year].push(P),S),{}),v=Object.keys(T).sort().reverse(),E=()=>{d(S=>S+g)};return h.jsxs("div",{className:"min-h-screen bg-white animate-fade-in pb-20",children:[h.jsxs("div",{className:"max-w-7xl mx-auto px-6 pt-12 pb-8",children:[h.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-6 gap-4",children:h.jsxs("div",{children:[h.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-slate-900 mb-4 tracking-tight",children:["Visual ",h.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Diaries"})]}),h.jsx("p",{className:"text-lg text-slate-500 max-w-2xl leading-relaxed",children:"Koleksi momen acak, dikelompokkan berdasarkan waktu."})]})}),h.jsx("div",{className:"flex flex-wrap gap-2 mt-8",children:m.map(S=>h.jsx("button",{onClick:()=>o(S),className:`px-5 py-2 rounded-full text-sm font-bold transition-all duration-300 ${s===S?"bg-slate-900 text-white shadow-lg shadow-slate-900/20":"bg-slate-50 text-slate-500 hover:bg-slate-100 hover:text-slate-900"}`,children:S},S))})]}),h.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r&&h.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[h.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),h.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Memuat Galeri..."})]}),!r&&y.length===0&&h.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-slate-200 rounded-3xl",children:[h.jsx(xp,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),h.jsx("p",{className:"text-slate-400 font-medium",children:"Belum ada foto di periode ini."})]}),!r&&x.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"space-y-16",children:v.map(S=>h.jsxs("div",{className:"animate-fade-in-up",children:[h.jsxs("div",{className:"flex items-center gap-6 mb-8 mt-4",children:[h.jsx("span",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tighter",children:S}),h.jsx("div",{className:"h-0.5 bg-slate-200 flex-1 rounded-full opacity-50"})]}),h.jsx("div",{className:"columns-1 sm:columns-2 lg:columns-3 gap-6 space-y-6",children:T[S].map(P=>h.jsxs("div",{className:"break-inside-avoid relative group cursor-pointer rounded-2xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-lg transition-all duration-300 transform translate-z-0",onClick:()=>l(P),children:[h.jsx("img",{src:P.src,alt:P.caption,loading:"lazy",className:"w-full h-auto object-cover transform transition-transform duration-700 group-hover:scale-105"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),h.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:h.jsxs("span",{className:"bg-black/30 backdrop-blur-md text-white text-[10px] font-bold px-3 py-1.5 rounded-full border border-white/20 uppercase tracking-widest shadow-sm",children:[P.month," ",P.year]})})]},P.id||P.src))})]},S))}),_&&h.jsx("div",{className:"flex justify-center mt-20 mb-8",children:h.jsxs("button",{onClick:E,className:"group flex flex-col items-center gap-2 text-slate-400 hover:text-slate-800 transition-colors",children:[h.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Lihat Momen Terdahulu"}),h.jsx("div",{className:"p-3 rounded-full bg-slate-50 border border-slate-200 group-hover:border-slate-300 group-hover:bg-white group-hover:shadow-md transition-all",children:h.jsx(vc,{className:"w-5 h-5 animate-bounce"})})]})})]})]}),a&&h.jsxs("div",{className:"fixed inset-0 z-[100] bg-white/95 backdrop-blur-xl flex items-center justify-center p-4 animate-fade-in",onClick:()=>l(null),children:[h.jsx("button",{onClick:()=>l(null),className:"absolute top-6 left-6 z-10 p-3 bg-slate-100 hover:bg-slate-200 text-slate-800 rounded-full transition-all group shadow-sm border border-slate-200",children:h.jsx(za,{className:"w-6 h-6 group-hover:-translate-x-1 transition-transform"})}),h.jsxs("div",{className:"relative max-w-5xl w-full flex flex-col items-center gap-8",onClick:S=>S.stopPropagation(),children:[h.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-2xl max-h-[75vh] bg-slate-50",children:h.jsx("img",{src:a.src,alt:"Gallery View",className:"max-w-full max-h-[75vh] object-contain"})}),h.jsxs("div",{className:"text-center max-w-2xl px-4 animate-fade-in-up",children:[h.jsxs("p",{className:"text-lg md:text-xl text-slate-900 font-medium leading-relaxed",children:['"',a.caption,'"']}),h.jsx("div",{className:"mt-4 flex items-center justify-center gap-3",children:h.jsxs("div",{className:"inline-block px-3 py-1 bg-slate-100 rounded-full text-slate-600 text-xs font-bold uppercase tracking-widest border border-slate-200",children:[a.month," ",a.year]})})]})]})]})]})},vP=()=>h.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-20 text-center",children:[h.jsx("h1",{className:"text-4xl font-black text-slate-900 mb-4",children:"Music"}),h.jsx("p",{className:"text-slate-500",children:"Playlist coding gue bakal ditaruh sini."})]}),_P=()=>h.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-20 text-center",children:[h.jsx("h1",{className:"text-4xl font-black text-slate-900 mb-4",children:"Pesan"}),h.jsx("p",{className:"text-slate-500",children:"Kirim pesan rahasia (coming soon)."})]});function wP(){return null}function xP(){return null}const mo={id:{welcome:"Halo, Siapa Disana?",welcomeSubtitle:"Biar kita makin akrab, kenalan dulu yuk! Isi nama dan sekolahmu ya, biar enak ngobrolnya.",enterName:"Aku biasa dipanggil...",enterSchool:"Aku sekolah / kuliah di...",namePlaceholder:"Contoh: Rara",schoolPlaceholder:"Contoh: SMA 1 Jakarta / UI",accessButton:"Oke, Salam Kenal!",verifying:"Lagi mencatat...",deviceIdNote:"Santai aja, ini cuma biar aku inget temen baru.",credits:"Limit",adminMode:"Mode Admin",unlimited:"Tanpa Batas",logOut:"Ganti Akun",heroTitle:"Hai,",heroSubtitle:"Sudah siap bikin karya keren hari ini?",toolBgRemove:"Hapus Background",toolBgRemoveDesc:"Hapus latar belakang secara instan dan rapi.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Pertajam detail & resolusi tinggi agar tidak pecah.",toolRemix:"Creative Remix",toolRemixDesc:"Ubah gaya gambar dengan bantuan AI.",toolColorize:"Warnai Foto",toolColorizeDesc:"Ubah foto hitam putih jadi berwarna.",toolSketch:"Sketsa ke Nyata",toolSketchDesc:"Ubah coretan tangan jadi gambar realistis.",moreTools:"Lihat Lainnya",lessTools:"Sembunyikan",back:"Kembali",preview:"Pratinjau",changePhoto:"Ganti Foto",aiPrompt:"Instruksi AI",aiPromptPlaceholder:"Jelaskan bagaimana Anda ingin mengubah gambar ini...",generate:"Mulai Proses",generateMagic:"Buat Keajaiban",processing:"Memproses",processingStandard:"Sedang meracik gambar...",processingCloud:"Mengirim ke awan...",processingAI:"AI sedang bekerja...",refining:"Sedikit polesan lagi...",optimizingLocal:"Memproses di perangkatmu (Mode Hemat)...",initializing:"Siap-siap...",resultComparison:"Hasil Karya Kamu",download:"Simpan Gambar",reset:"Ulangi",original:"ASLI",result:"HASIL",bgColor:"Ganti Warna Belakang",uploadPrompt:"Pilih foto terbaikmu untuk diedit",settingsTitle:"Pengaturan Sistem",systemPref:"Preferensi AI",knowledgeMode:"Mode Pengetahuan (Database)",knowledgeModeDesc:"Hemat Kuota. AI hanya menjawab dari database lokal tanpa Gemini API.",totalKnowledge:"Total Memori Tersimpan",wikiMode:"Izinkan Wikipedia",wikiModeDesc:"Jika info tidak ada di database, cari di Wikipedia (Tetap hemat kuota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Kelola API Key untuk fitur chat cerdas dan edit gambar.",selectKeyBtn:"Ambil Key via AI Studio",orManually:"Kelola Key Manual",customKeyActive:"Key Pribadi Aktif",defaultKeyActive:"Key Sistem (Terbatas)",removeBgTitle:"Remove.bg API",removeBgDesc:"Engine khusus hapus background presisi tinggi.",supabaseTitle:"Supabase Engine",supabaseDesc:"Engine cadangan untuk pemrosesan gambar.",googleSearchTitle:"Google Search API",googleSearchDesc:"Opsi pencarian terakhir (Fallback) jika DB & Wiki gagal.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Tutup",save:"Simpan",active:"Aktif",inactive:"Nonaktif",addKeyPlaceholder:"Tempel API Key Gemini disini...",addKeyBtn:"Tambah Key",keyDisclaimerTitle:" Peringatan Penting",keyDisclaimerText:"Dengan menambahkan API Key pribadi, saya sadar bahwa segala bentuk penggunaan, kuota, dan keamanan key tersebut adalah tanggung jawab saya sepenuhnya. Fanra AI Studio tidak bertanggung jawab atas penyalahgunaan atau tagihan yang muncul akibat kelalaian pengguna.",consentCheckbox:"Saya mengerti dan setuju untuk melanjutkan.",keysStored:"Daftar Key",noKeysYet:"Belum ada key tersimpan. Masih pakai limit bawaan.",newChat:"Percakapan Baru",historyHeader:"Riwayat",loginToSave:"Login untuk simpan progres",loginBtn:"Masuk Akun",historyItem1:"editing foto sekolah...",historyItem2:"hapus background merah...",chatPlaceholder:"ketik pesan atau tanya Fanra...",chatDisclaimer:"Fanra bisa salah. cek lagi info penting.",chatFallbackError:"duh, koneksi gue lagi putus dan gue belum pernah dapet pertanyaan ini sebelumnya. cek internet lo atau API key nya deh.",chatOfflineMode:"(Mode Database) Info tidak ditemukan di database.",chatImageResponse:"wih, kirim gambar ya? sori nih gue baru bisa edit gambar kalo lo pake menu di atas itu. coba klik ikon-ikon di atas deh.",errorTitle:"Ups, Ada Masalah",insufficientCredits:"Yah, limit habis! Masukkan API Key di pengaturan agar Unlimited.",limitReachedHQ:"Kuota High Quality harian sudah penuh.",serviceBusy:"Server lagi ramai nih. Coba lagi sebentar ya.",networkError:"Koneksi internetmu sepertinya putus nyambung.",memoryError:"HP keberatan proses gambar ini. Coba gambar lain ya.",confirmTitle:"Yakin mau ganti?",confirmDesc:"Proses yang ini belum disimpan lho. Mau ganti aktivitas?",yesChange:"Ya, Ganti Aja",uploadTitle:"Unggah Foto",uploadDesc:"Klik atau tarik fotomu ke sini",dropHere:"Lepaskan fotonya!",invalidImage:"Format file ini tidak didukung. Pakai JPG/PNG ya."},en:{welcome:"Hello, Who's There?",welcomeSubtitle:"Let's be friends! Tell me your name and school so we can chat comfortably.",enterName:"You can call me...",enterSchool:"I study at...",namePlaceholder:"Ex: Sarah",schoolPlaceholder:"Ex: High School NY / MIT",accessButton:"Okay, Nice to Meet You!",verifying:"Writing that down...",deviceIdNote:"Relax, just remembering a new friend.",credits:"Credits",adminMode:"Admin Mode",unlimited:"Unlimited",logOut:"Switch Account",heroTitle:"Hi,",heroSubtitle:"Ready to make something cool today?",toolBgRemove:"Remove Background",toolBgRemoveDesc:"Instantly remove backgrounds cleanly.",toolUpscale:"HD Upscale (4K)",toolUpscaleDesc:"Sharpen details to 4K resolution.",toolRemix:"Creative Remix",toolRemixDesc:"Reimagine image with AI assistance.",toolColorize:"Colorize Photo",toolColorizeDesc:"Turn black & white photos into color.",toolSketch:"Sketch to Real",toolSketchDesc:"Turn hand drawings into realistic images.",moreTools:"See More",lessTools:"Show Less",back:"Back",preview:"Preview",changePhoto:"Change Photo",aiPrompt:"AI Prompt",aiPromptPlaceholder:"Describe how you want to remix this image...",generate:"Generate",generateMagic:"Generate Magic",processing:"Processing",processingStandard:"Working magic...",processingCloud:"Sending to cloud...",processingAI:"AI is thinking...",refining:"Polishing details...",optimizingLocal:"Processing on device (Offline Mode)...",initializing:"Warming up...",resultComparison:"Your Masterpiece",download:"Save Image",reset:"Reset",original:"ORIGINAL",result:"RESULT",bgColor:"Background Color",uploadPrompt:"Upload an image to start editing",settingsTitle:"System Settings",systemPref:"AI Preferences",knowledgeMode:"Knowledge Mode (Database)",knowledgeModeDesc:"Save Quota. AI only answers from local database without Gemini API.",totalKnowledge:"Total Stored Memory",wikiMode:"Enable Wikipedia",wikiModeDesc:"If info not in DB, search Wikipedia (Still saves API quota).",googleApiTitle:"Google Gemini API Keys",googleApiDesc:"Manage keys for smart chat and image editing.",selectKeyBtn:"Get Key via AI Studio",orManually:"Manage Keys Manually",customKeyActive:"Custom Key Active",defaultKeyActive:"System Key (Limited)",removeBgTitle:"Remove.bg API",removeBgDesc:"Precision background removal engine.",supabaseTitle:"Supabase Engine",supabaseDesc:"Backup engine for image processing.",googleSearchTitle:"Google Search API",googleSearchDesc:"Fallback search option if DB & Wiki fail.",searchApiKey:"Custom Search API Key",searchEngineId:"Search Engine ID (CX)",cancel:"Close",save:"Save",active:"Active",inactive:"Inactive",addKeyPlaceholder:"Paste Gemini API Key here...",addKeyBtn:"Add Key",keyDisclaimerTitle:" Important Warning",keyDisclaimerText:"By adding personal API Keys, I acknowledge that all usage, quotas, and security of said keys are my sole responsibility. Fanra AI Studio is not liable for misuse or charges incurred due to user negligence.",consentCheckbox:"I understand and agree to proceed.",keysStored:"Key List",noKeysYet:"No keys saved yet. Using default limits.",newChat:"New Conversation",historyHeader:"History",loginToSave:"Login to save progress",loginBtn:"Login",historyItem1:"editing school photo...",historyItem2:"removing red background...",chatPlaceholder:"type a message or ask Fanra...",chatDisclaimer:"Fanra can make mistakes. Check important info.",chatFallbackError:"ugh, my connection is down and I haven't heard this question before. Check your internet or API key.",chatOfflineMode:"(DB Mode) Info not found in database.",chatImageResponse:"woah, sending an image? sorry, I can only edit images if you use the menu above. try clicking those icons.",errorTitle:"Whoops",insufficientCredits:"Out of credits! Enter your own Google Gemini API Key in settings for unlimited access.",limitReachedHQ:"High Quality daily limit reached.",serviceBusy:"Service is busy. Please try again.",networkError:"Connection issue. Check your internet.",memoryError:"Device memory low. Try a smaller image.",confirmTitle:"Change Activity?",confirmDesc:"Current progress will be lost. Are you sure?",yesChange:"Yes, Change",uploadTitle:"Upload Image",uploadDesc:"Click to browse or drag & drop",dropHere:"Drop it here!",invalidImage:"Please upload a valid image file (JPG/PNG)."}};var EP={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let TP,SP;function IP(){return{geminiUrl:TP,vertexUrl:SP}}function CP(t,e,n,r){var i,s;if(!(t!=null&&t.baseUrl)){const o=IP();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Or{}function _e(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function p(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const d=l[u];p(d,e.slice(s+1),n[u])}else for(const u of l)p(u,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];p(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(a=>c(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function kP(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),s=r.split("."),o=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const u=s[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}cf(t,i,s,0,o)}}function cf(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])cf(l,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(u=>!u.startsWith("_")&&!i.has(u)),l={};for(const u of a)l[u]=o[u];for(const[u,d]of Object.entries(l)){const g=[];for(const m of n.slice(r))m==="*"?g.push(u):g.push(m);p(o,g,d)}for(const u of a)delete o[u]}}else{const o=t;s in o&&cf(o[s],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fm(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AP(t){const e={},n=c(t,["operationName"]);n!=null&&p(e,["operationName"],n);const r=c(t,["resourceName"]);return r!=null&&p(e,["_url","resourceName"],r),e}function bP(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const r=c(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=c(t,["done"]);i!=null&&p(e,["done"],i);const s=c(t,["error"]);s!=null&&p(e,["error"],s);const o=c(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],NP(o)),e}function RP(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const r=c(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=c(t,["done"]);i!=null&&p(e,["done"],i);const s=c(t,["error"]);s!=null&&p(e,["error"],s);const o=c(t,["response"]);return o!=null&&p(e,["response"],PP(o)),e}function NP(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>MP(o))),p(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function PP(t){const e={},n=c(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>DP(o))),p(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function MP(t){const e={},n=c(t,["video"]);return n!=null&&p(e,["video"],OP(n)),e}function DP(t){const e={},n=c(t,["_self"]);return n!=null&&p(e,["video"],jP(n)),e}function LP(t){const e={},n=c(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function VP(t){const e={},n=c(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function FP(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const r=c(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=c(t,["done"]);i!=null&&p(e,["done"],i);const s=c(t,["error"]);s!=null&&p(e,["error"],s);const o=c(t,["response"]);return o!=null&&p(e,["response"],UP(o)),e}function UP(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&p(e,["parent"],r);const i=c(t,["documentName"]);return i!=null&&p(e,["documentName"],i),e}function MT(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const r=c(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=c(t,["done"]);i!=null&&p(e,["done"],i);const s=c(t,["error"]);s!=null&&p(e,["error"],s);const o=c(t,["response"]);return o!=null&&p(e,["response"],BP(o)),e}function BP(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&p(e,["parent"],r);const i=c(t,["documentName"]);return i!=null&&p(e,["documentName"],i),e}function OP(t){const e={},n=c(t,["uri"]);n!=null&&p(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],fm(r));const i=c(t,["encoding"]);return i!=null&&p(e,["mimeType"],i),e}function jP(t){const e={},n=c(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],fm(r));const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var gy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(gy||(gy={}));var yy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(yy||(yy={}));var vy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(vy||(vy={}));var sn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(sn||(sn={}));var _y;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(_y||(_y={}));var wy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(wy||(wy={}));var xy;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(xy||(xy={}));var Ey;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Ey||(Ey={}));var Ty;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ty||(Ty={}));var Sy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Sy||(Sy={}));var Iy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Iy||(Iy={}));var Cy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Cy||(Cy={}));var ky;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ky||(ky={}));var Ay;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Ay||(Ay={}));var by;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(by||(by={}));var Ry;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ry||(Ry={}));var Ny;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ny||(Ny={}));var Py;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Py||(Py={}));var My;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(My||(My={}));var Yu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Yu||(Yu={}));var Dy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Dy||(Dy={}));var Ly;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ly||(Ly={}));var Vy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Vy||(Vy={}));var df;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(df||(df={}));var Fy;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Fy||(Fy={}));var Uy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Uy||(Uy={}));var By;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(By||(By={}));var Oy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Oy||(Oy={}));var jy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(jy||(jy={}));var zy;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(zy||(zy={}));var Gy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Gy||(Gy={}));var Hy;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Hy||(Hy={}));var qy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(qy||(qy={}));var $y;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})($y||($y={}));var Wy;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Wy||(Wy={}));var Ky;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ky||(Ky={}));var Jy;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Jy||(Jy={}));var Yy;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Yy||(Yy={}));var Qy;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Qy||(Qy={}));var Xy;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Xy||(Xy={}));var Zy;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Zy||(Zy={}));var ev;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ev||(ev={}));var tv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(tv||(tv={}));var nv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(nv||(nv={}));var rv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(rv||(rv={}));var iv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(iv||(iv={}));var sv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(sv||(sv={}));var ov;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(ov||(ov={}));var av;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(av||(av={}));var lv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(lv||(lv={}));var uv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(uv||(uv={}));var cv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(cv||(cv={}));var dv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(dv||(dv={}));var hv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(hv||(hv={}));var fv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(fv||(fv={}));var Ds;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ds||(Ds={}));class hf{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Bo{get text(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const g=[];for(const m of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[y,x]of Object.entries(m))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(x!==null||x!==void 0)&&g.push(y);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,u+=m.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const g of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,y]of Object.entries(g))m!=="inlineData"&&(y!==null||y!==void 0)&&d.push(m);g.inlineData&&typeof g.inlineData.data=="string"&&(u+=atob(g.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,i,s,o,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,i,s,o,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class pv{}class mv{}class zP{}class GP{}class HP{}class qP{}class gv{}class yv{}class vv{}class $P{}class Qu{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Qu;let i;const s=e;return n?i=RP(s):i=bP(s),Object.assign(r,i),r}}class _v{}class wv{}class xv{}class Ev{}class WP{}class KP{}class JP{}class pm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new pm,s=FP(e);return Object.assign(r,s),r}}class YP{}class QP{}class XP{}class Tv{}class ZP{get text(){var e,n,r;let i="",s=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class eM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class mm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new mm,s=MT(e);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Je(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function DT(t,e){const n=Je(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function LT(t){return Array.isArray(t)?t.map(e=>Xu(e)):[Xu(t)]}function Xu(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function VT(t){const e=Xu(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function FT(t){const e=Xu(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Sv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function UT(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Sv(e)):[Sv(t)]}function ff(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Iv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Cv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function on(t){if(t==null)throw new Error("ContentUnion is required");return ff(t)?t:{role:"user",parts:UT(t)}}function gm(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=on(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=on(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>on(n)):[on(e)]}function qn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Iv(t)||Cv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[on(t)]}const e=[],n=[],r=ff(t[0]);for(const i of t){const s=ff(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(Iv(i)||Cv(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:UT(n)}),e}function tM(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(sn).includes(n[0].toUpperCase())?n[0].toUpperCase():sn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(sn).includes(r.toUpperCase())?r.toUpperCase():sn.TYPE_UNSPECIFIED})}}function Gs(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&tM(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(sn).includes(a.toUpperCase())?a.toUpperCase():sn.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Gs(a);else if(r.includes(o)){const l=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(Gs(u))}e[o]=l}else if(i.includes(o)){const l={};for(const[u,d]of Object.entries(a))l[u]=Gs(d);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function ym(t){return Gs(t)}function vm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function _m(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function go(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Gs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Gs(e.response));return t}function yo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function nM(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function jr(t,e){if(typeof e!="string")throw new Error("name must be a string");return nM(t,e,"cachedContents")}function BT(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function bi(t){return fm(t)}function rM(t){return t!=null&&typeof t=="object"&&"name"in t}function iM(t){return t!=null&&typeof t=="object"&&"video"in t}function sM(t){return t!=null&&typeof t=="object"&&"uri"in t}function OT(t){var e;let n;if(rM(t)&&(n=t.name),!(sM(t)&&(n=t.uri,n===void 0))&&!(iM(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function jT(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function zT(t){for(const e of["models","tunedModels","publisherModels"])if(oM(t,e))return t[e];return[]}function oM(t,e){return t!==null&&typeof t=="object"&&e in t}function aM(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function lM(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=aM(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function GT(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function uM(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function HT(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function vo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function qT(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cM(t){const e={},n=c(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const r=c(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>HM(o))),p(e,["inlinedResponses"],s)}const i=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),p(e,["inlinedEmbedContentResponses"],s)}return e}function dM(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const r=c(t,["gcsDestination","outputUriPrefix"]);r!=null&&p(e,["gcsUri"],r);const i=c(t,["bigqueryDestination","outputUri"]);return i!=null&&p(e,["bigqueryUri"],i),e}function hM(t){const e={},n=c(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const r=c(t,["gcsUri"]);r!=null&&p(e,["gcsDestination","outputUriPrefix"],r);const i=c(t,["bigqueryUri"]);if(i!=null&&p(e,["bigqueryDestination","outputUri"],i),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function au(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const r=c(t,["metadata","displayName"]);r!=null&&p(e,["displayName"],r);const i=c(t,["metadata","state"]);i!=null&&p(e,["state"],qT(i));const s=c(t,["metadata","createTime"]);s!=null&&p(e,["createTime"],s);const o=c(t,["metadata","endTime"]);o!=null&&p(e,["endTime"],o);const a=c(t,["metadata","updateTime"]);a!=null&&p(e,["updateTime"],a);const l=c(t,["metadata","model"]);l!=null&&p(e,["model"],l);const u=c(t,["metadata","output"]);return u!=null&&p(e,["dest"],cM(HT(u))),e}function pf(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const r=c(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=c(t,["state"]);i!=null&&p(e,["state"],qT(i));const s=c(t,["error"]);s!=null&&p(e,["error"],s);const o=c(t,["createTime"]);o!=null&&p(e,["createTime"],o);const a=c(t,["startTime"]);a!=null&&p(e,["startTime"],a);const l=c(t,["endTime"]);l!=null&&p(e,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&p(e,["updateTime"],u);const d=c(t,["model"]);d!=null&&p(e,["model"],d);const g=c(t,["inputConfig"]);g!=null&&p(e,["src"],fM(g));const m=c(t,["outputConfig"]);m!=null&&p(e,["dest"],dM(HT(m)));const y=c(t,["completionStats"]);return y!=null&&p(e,["completionStats"],y),e}function fM(t){const e={},n=c(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const r=c(t,["gcsSource","uris"]);r!=null&&p(e,["gcsUri"],r);const i=c(t,["bigquerySource","inputUri"]);return i!=null&&p(e,["bigqueryUri"],i),e}function pM(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=c(e,["fileName"]);r!=null&&p(n,["fileName"],r);const i=c(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>GM(t,o))),p(n,["requests","requests"],s)}return n}function mM(t){const e={},n=c(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const r=c(t,["gcsUri"]);r!=null&&p(e,["gcsSource","uris"],r);const i=c(t,["bigqueryUri"]);if(i!=null&&p(e,["bigquerySource","inputUri"],i),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function gM(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function yM(t,e){const n={},r=c(e,["name"]);return r!=null&&p(n,["_url","name"],vo(t,r)),n}function vM(t,e){const n={},r=c(e,["name"]);return r!=null&&p(n,["_url","name"],vo(t,r)),n}function _M(t){const e={},n=c(t,["content"]);n!=null&&p(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],wM(r));const i=c(t,["tokenCount"]);i!=null&&p(e,["tokenCount"],i);const s=c(t,["finishReason"]);s!=null&&p(e,["finishReason"],s);const o=c(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=c(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const l=c(t,["index"]);l!=null&&p(e,["index"],l);const u=c(t,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const d=c(t,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(y=>y)),p(e,["safetyRatings"],m)}const g=c(t,["urlContextMetadata"]);return g!=null&&p(e,["urlContextMetadata"],g),e}function wM(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),p(e,["citations"],r)}return e}function $T(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>QM(s))),p(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&p(e,["role"],r),e}function xM(t,e){const n={},r=c(t,["displayName"]);if(e!==void 0&&r!=null&&p(e,["batch","displayName"],r),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function EM(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const i=c(t,["dest"]);return e!==void 0&&i!=null&&p(e,["outputConfig"],hM(uM(i))),n}function kv(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["src"]);i!=null&&p(n,["batch","inputConfig"],pM(t,GT(t,i)));const s=c(e,["config"]);return s!=null&&xM(s,n),n}function TM(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["model"],Je(t,r));const i=c(e,["src"]);i!=null&&p(n,["inputConfig"],mM(GT(t,i)));const s=c(e,["config"]);return s!=null&&EM(s,n),n}function SM(t,e){const n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["batch","displayName"],r),n}function IM(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["src"]);i!=null&&p(n,["batch","inputConfig"],PM(t,i));const s=c(e,["config"]);return s!=null&&SM(s,n),n}function CM(t,e){const n={},r=c(e,["name"]);return r!=null&&p(n,["_url","name"],vo(t,r)),n}function kM(t,e){const n={},r=c(e,["name"]);return r!=null&&p(n,["_url","name"],vo(t,r)),n}function AM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&p(e,["name"],r);const i=c(t,["done"]);i!=null&&p(e,["done"],i);const s=c(t,["error"]);return s!=null&&p(e,["error"],s),e}function bM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&p(e,["name"],r);const i=c(t,["done"]);i!=null&&p(e,["done"],i);const s=c(t,["error"]);return s!=null&&p(e,["error"],s),e}function RM(t,e){const n={},r=c(e,["contents"]);if(r!=null){let s=gm(t,r);Array.isArray(s)&&(s=s.map(o=>o)),p(n,["requests[]","request","content"],s)}const i=c(e,["config"]);return i!=null&&(p(n,["_self"],NM(i,n)),kP(n,{"requests[].*":"requests[].request.*"})),n}function NM(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&p(e,["requests[]","title"],i);const s=c(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&p(e,["requests[]","outputDimensionality"],s),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function PM(t,e){const n={},r=c(e,["fileName"]);r!=null&&p(n,["file_name"],r);const i=c(e,["inlinedRequests"]);return i!=null&&p(n,["requests"],RM(t,i)),n}function MM(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function DM(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const r=c(t,["args"]);r!=null&&p(e,["args"],r);const i=c(t,["name"]);if(i!=null&&p(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function LM(t){const e={},n=c(t,["mode"]);n!=null&&p(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function VM(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&p(n,["systemInstruction"],$T(on(i)));const s=c(e,["temperature"]);s!=null&&p(r,["temperature"],s);const o=c(e,["topP"]);o!=null&&p(r,["topP"],o);const a=c(e,["topK"]);a!=null&&p(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&p(r,["maxOutputTokens"],u);const d=c(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const g=c(e,["responseLogprobs"]);g!=null&&p(r,["responseLogprobs"],g);const m=c(e,["logprobs"]);m!=null&&p(r,["logprobs"],m);const y=c(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const x=c(e,["frequencyPenalty"]);x!=null&&p(r,["frequencyPenalty"],x);const _=c(e,["seed"]);_!=null&&p(r,["seed"],_);const T=c(e,["responseMimeType"]);T!=null&&p(r,["responseMimeType"],T);const v=c(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],ym(v));const E=c(e,["responseJsonSchema"]);if(E!=null&&p(r,["responseJsonSchema"],E),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=c(e,["safetySettings"]);if(n!==void 0&&S!=null){let M=S;Array.isArray(M)&&(M=M.map(b=>XM(b))),p(n,["safetySettings"],M)}const P=c(e,["tools"]);if(n!==void 0&&P!=null){let M=yo(P);Array.isArray(M)&&(M=M.map(b=>eD(go(b)))),p(n,["tools"],M)}const V=c(e,["toolConfig"]);if(n!==void 0&&V!=null&&p(n,["toolConfig"],ZM(V)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=c(e,["cachedContent"]);n!==void 0&&O!=null&&p(n,["cachedContent"],jr(t,O));const A=c(e,["responseModalities"]);A!=null&&p(r,["responseModalities"],A);const R=c(e,["mediaResolution"]);R!=null&&p(r,["mediaResolution"],R);const k=c(e,["speechConfig"]);if(k!=null&&p(r,["speechConfig"],vm(k)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=c(e,["thinkingConfig"]);D!=null&&p(r,["thinkingConfig"],D);const F=c(e,["imageConfig"]);F!=null&&p(r,["imageConfig"],zM(F));const N=c(e,["enableEnhancedCivicAnswers"]);return N!=null&&p(r,["enableEnhancedCivicAnswers"],N),r}function FM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>_M(u))),p(e,["candidates"],l)}const i=c(t,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const s=c(t,["promptFeedback"]);s!=null&&p(e,["promptFeedback"],s);const o=c(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function UM(t,e){const n={},r=c(e,["name"]);return r!=null&&p(n,["_url","name"],vo(t,r)),n}function BM(t,e){const n={},r=c(e,["name"]);return r!=null&&p(n,["_url","name"],vo(t,r)),n}function OM(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function jM(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function zM(t){const e={},n=c(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=c(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function GM(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["request","model"],Je(t,r));const i=c(e,["contents"]);if(i!=null){let a=qn(i);Array.isArray(a)&&(a=a.map(l=>$T(l))),p(n,["request","contents"],a)}const s=c(e,["metadata"]);s!=null&&p(n,["metadata"],s);const o=c(e,["config"]);return o!=null&&p(n,["request","generationConfig"],VM(t,o,c(n,["request"],{}))),n}function HM(t){const e={},n=c(t,["response"]);n!=null&&p(e,["response"],FM(n));const r=c(t,["error"]);return r!=null&&p(e,["error"],r),e}function qM(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);if(e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function $M(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const s=c(t,["filter"]);return e!==void 0&&s!=null&&p(e,["_query","filter"],s),n}function WM(t){const e={},n=c(t,["config"]);return n!=null&&qM(n,e),e}function KM(t){const e={},n=c(t,["config"]);return n!=null&&$M(n,e),e}function JM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=c(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>au(o))),p(e,["batchJobs"],s)}return e}function YM(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=c(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>pf(o))),p(e,["batchJobs"],s)}return e}function QM(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const s=c(t,["fileData"]);s!=null&&p(e,["fileData"],MM(s));const o=c(t,["functionCall"]);o!=null&&p(e,["functionCall"],DM(o));const a=c(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&p(e,["inlineData"],gM(l));const u=c(t,["text"]);u!=null&&p(e,["text"],u);const d=c(t,["thought"]);d!=null&&p(e,["thought"],d);const g=c(t,["thoughtSignature"]);g!=null&&p(e,["thoughtSignature"],g);const m=c(t,["videoMetadata"]);return m!=null&&p(e,["videoMetadata"],m),e}function XM(t){const e={},n=c(t,["category"]);if(n!=null&&p(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function ZM(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],LM(n));const r=c(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function eD(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(g=>g)),p(e,["functionDeclarations"],d)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&p(e,["computerUse"],i);const s=c(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const o=c(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],OM(a));const l=c(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],jM(l));const u=c(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ur;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ur||(Ur={}));class us{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tD extends Or{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new us(Ur.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=kv(this.apiClient,e),r=n._url,i=_e("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const d of l){const g=Object.assign({},d);if(g.systemInstruction){const m=g.systemInstruction;delete g.systemInstruction;const y=g.request;y.systemInstruction=m,g.request=y}u.push(g)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=TM(this.apiClient,e);return a=_e("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>pf(d))}else{const u=kv(this.apiClient,e);return a=_e("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>au(d))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=IM(this.apiClient,e);return s=_e("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>au(l))}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=BM(this.apiClient,e);return a=_e("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>pf(d))}else{const u=UM(this.apiClient,e);return a=_e("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>au(d))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=vM(this.apiClient,e);o=_e("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=yM(this.apiClient,e);o=_e("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=KM(e);return a=_e("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=YM(d),m=new Tv;return Object.assign(m,g),m})}else{const u=WM(e);return a=_e("batches",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=JM(d),m=new Tv;return Object.assign(m,g),m})}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=kM(this.apiClient,e);return a=_e("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>bM(d))}else{const u=CM(this.apiClient,e);return a=_e("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>AM(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nD(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Av(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>ID(s))),p(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&p(e,["role"],r),e}function rD(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=c(t,["expireTime"]);e!==void 0&&i!=null&&p(e,["expireTime"],i);const s=c(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let d=qn(o);Array.isArray(d)&&(d=d.map(g=>Av(g))),p(e,["contents"],d)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],Av(on(a)));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>kD(g))),p(e,["tools"],d)}const u=c(t,["toolConfig"]);if(e!==void 0&&u!=null&&p(e,["toolConfig"],CD(u)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function iD(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=c(t,["expireTime"]);e!==void 0&&i!=null&&p(e,["expireTime"],i);const s=c(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let g=qn(o);Array.isArray(g)&&(g=g.map(m=>m)),p(e,["contents"],g)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],on(a));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let g=l;Array.isArray(g)&&(g=g.map(m=>AD(m))),p(e,["tools"],g)}const u=c(t,["toolConfig"]);e!==void 0&&u!=null&&p(e,["toolConfig"],u);const d=c(t,["kmsKeyName"]);return e!==void 0&&d!=null&&p(e,["encryption_spec","kmsKeyName"],d),n}function sD(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["model"],DT(t,r));const i=c(e,["config"]);return i!=null&&rD(i,n),n}function oD(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["model"],DT(t,r));const i=c(e,["config"]);return i!=null&&iD(i,n),n}function aD(t,e){const n={},r=c(e,["name"]);return r!=null&&p(n,["_url","name"],jr(t,r)),n}function lD(t,e){const n={},r=c(e,["name"]);return r!=null&&p(n,["_url","name"],jr(t,r)),n}function uD(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function cD(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function dD(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function hD(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const r=c(t,["args"]);r!=null&&p(e,["args"],r);const i=c(t,["name"]);if(i!=null&&p(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fD(t){const e={},n=c(t,["mode"]);n!=null&&p(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function pD(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&p(e,["description"],n);const r=c(t,["name"]);r!=null&&p(e,["name"],r);const i=c(t,["parameters"]);i!=null&&p(e,["parameters"],i);const s=c(t,["parametersJsonSchema"]);s!=null&&p(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&p(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function mD(t,e){const n={},r=c(e,["name"]);return r!=null&&p(n,["_url","name"],jr(t,r)),n}function gD(t,e){const n={},r=c(e,["name"]);return r!=null&&p(n,["_url","name"],jr(t,r)),n}function yD(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function vD(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function _D(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function wD(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function xD(t){const e={},n=c(t,["config"]);return n!=null&&_D(n,e),e}function ED(t){const e={},n=c(t,["config"]);return n!=null&&wD(n,e),e}function TD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=c(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),p(e,["cachedContents"],s)}return e}function SD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=c(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),p(e,["cachedContents"],s)}return e}function ID(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const s=c(t,["fileData"]);s!=null&&p(e,["fileData"],dD(s));const o=c(t,["functionCall"]);o!=null&&p(e,["functionCall"],hD(o));const a=c(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&p(e,["inlineData"],nD(l));const u=c(t,["text"]);u!=null&&p(e,["text"],u);const d=c(t,["thought"]);d!=null&&p(e,["thought"],d);const g=c(t,["thoughtSignature"]);g!=null&&p(e,["thoughtSignature"],g);const m=c(t,["videoMetadata"]);return m!=null&&p(e,["videoMetadata"],m),e}function CD(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],fD(n));const r=c(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function kD(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(g=>g)),p(e,["functionDeclarations"],d)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&p(e,["computerUse"],i);const s=c(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const o=c(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],yD(a));const l=c(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],vD(l));const u=c(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function AD(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>pD(m))),p(e,["functionDeclarations"],g)}const r=c(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const i=c(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const s=c(t,["computerUse"]);if(s!=null&&p(e,["computerUse"],s),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=c(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=c(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=c(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],u);const d=c(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function bD(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=c(t,["expireTime"]);return e!==void 0&&i!=null&&p(e,["expireTime"],i),n}function RD(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=c(t,["expireTime"]);return e!==void 0&&i!=null&&p(e,["expireTime"],i),n}function ND(t,e){const n={},r=c(e,["name"]);r!=null&&p(n,["_url","name"],jr(t,r));const i=c(e,["config"]);return i!=null&&bD(i,n),n}function PD(t,e){const n={},r=c(e,["name"]);r!=null&&p(n,["_url","name"],jr(t,r));const i=c(e,["config"]);return i!=null&&RD(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MD extends Or{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new us(Ur.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=oD(this.apiClient,e);return a=_e("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=sD(this.apiClient,e);return a=_e("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=gD(this.apiClient,e);return a=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=mD(this.apiClient,e);return a=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=lD(this.apiClient,e);return a=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=cD(d),m=new xv;return Object.assign(m,g),m})}else{const u=aD(this.apiClient,e);return a=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=uD(d),m=new xv;return Object.assign(m,g),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=PD(this.apiClient,e);return a=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const u=ND(this.apiClient,e);return a=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=ED(e);return a=_e("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=SD(d),m=new Ev;return Object.assign(m,g),m})}else{const u=xD(e);return a=_e("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=TD(d),m=new Ev;return Object.assign(m,g),m})}}}function Zu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function bv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ne(t){return this instanceof Ne?(this.v=t,this):new Ne(t)}function rr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(x){return Promise.resolve(x).then(y,g)}}function a(y,x){r[y]&&(i[y]=function(_){return new Promise(function(T,v){s.push([y,_,T,v])>1||l(y,_)})},x&&(i[y]=x(i[y])))}function l(y,x){try{u(r[y](x))}catch(_){m(s[0][3],_)}}function u(y){y.value instanceof Ne?Promise.resolve(y.value.v).then(d,g):m(s[0][2],y)}function d(y){l("next",y)}function g(y){l("throw",y)}function m(y,x){y(x),s.shift(),s.length&&l(s[0][0],s[0][1])}}function ir(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof bv=="function"?bv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DD(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:WT(n)}function WT(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function LD(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Rv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!WT(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class VD{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new FD(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class FD{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),LD(s)}async sendMessage(e){var n;await this.sendPromise;const r=on(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await i,u=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,d=l.automaticFunctionCallingHistory,g=this.getHistory(!0).length;let m=[];d!=null&&(m=(a=d.slice(g))!==null&&a!==void 0?a:[]);const y=u?[u]:[];this.recordHistory(r,y,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=on(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?Rv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return rr(this,arguments,function*(){var i,s,o,a,l,u;const d=[];try{for(var g=!0,m=ir(e),y;y=yield Ne(m.next()),i=y.done,!i;g=!0){a=y.value,g=!1;const x=a;if(DD(x)){const _=(u=(l=x.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;_!==void 0&&d.push(_)}yield yield Ne(x)}}catch(x){s={error:x}}finally{try{!g&&!i&&(o=m.return)&&(yield Ne(o.call(m)))}finally{if(s)throw s.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Rv(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zc extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,zc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UD(t){const e={},n=c(t,["file"]);return n!=null&&p(e,["file"],n),e}function BD(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function OD(t){const e={},n=c(t,["name"]);return n!=null&&p(e,["_url","file"],OT(n)),e}function jD(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function zD(t){const e={},n=c(t,["name"]);return n!=null&&p(e,["_url","file"],OT(n)),e}function GD(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function HD(t){const e={},n=c(t,["config"]);return n!=null&&GD(n,e),e}function qD(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=c(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),p(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $D extends Or{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new us(Ur.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=HD(e);return s=_e("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const u=qD(l),d=new YP;return Object.assign(d,u),d})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=UD(e);return s=_e("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=BD(l),d=new QP;return Object.assign(d,u),d})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zD(e);return s=_e("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=OD(e);return s=_e("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const u=jD(l),d=new XP;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lu(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function WD(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>u4(s))),p(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&p(e,["role"],r),e}function KD(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function JD(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const r=c(t,["args"]);r!=null&&p(e,["args"],r);const i=c(t,["name"]);if(i!=null&&p(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function YD(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&p(e,["description"],n);const r=c(t,["name"]);r!=null&&p(e,["name"],r);const i=c(t,["parameters"]);i!=null&&p(e,["parameters"],i);const s=c(t,["parametersJsonSchema"]);s!=null&&p(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&p(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function QD(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=c(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const i=c(t,["audioTimestamp"]);i!=null&&p(e,["audioTimestamp"],i);const s=c(t,["candidateCount"]);s!=null&&p(e,["candidateCount"],s);const o=c(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=c(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const l=c(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const u=c(t,["maxOutputTokens"]);u!=null&&p(e,["maxOutputTokens"],u);const d=c(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const g=c(t,["presencePenalty"]);g!=null&&p(e,["presencePenalty"],g);const m=c(t,["responseLogprobs"]);m!=null&&p(e,["responseLogprobs"],m);const y=c(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const x=c(t,["responseModalities"]);x!=null&&p(e,["responseModalities"],x);const _=c(t,["responseSchema"]);_!=null&&p(e,["responseSchema"],_);const T=c(t,["routingConfig"]);T!=null&&p(e,["routingConfig"],T);const v=c(t,["seed"]);v!=null&&p(e,["seed"],v);const E=c(t,["speechConfig"]);E!=null&&p(e,["speechConfig"],E);const S=c(t,["stopSequences"]);S!=null&&p(e,["stopSequences"],S);const P=c(t,["temperature"]);P!=null&&p(e,["temperature"],P);const V=c(t,["thinkingConfig"]);V!=null&&p(e,["thinkingConfig"],V);const O=c(t,["topK"]);O!=null&&p(e,["topK"],O);const A=c(t,["topP"]);if(A!=null&&p(e,["topP"],A),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function XD(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function ZD(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function e4(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","responseModalities"],i);const s=c(t,["temperature"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const g=c(t,["speechConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","speechConfig"],_m(g));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","thinkingConfig"],m);const y=c(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&p(e,["setup","systemInstruction"],WD(on(x)));const _=c(t,["tools"]);if(e!==void 0&&_!=null){let O=yo(_);Array.isArray(O)&&(O=O.map(A=>d4(go(A)))),p(e,["setup","tools"],O)}const T=c(t,["sessionResumption"]);e!==void 0&&T!=null&&p(e,["setup","sessionResumption"],c4(T));const v=c(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const E=c(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],E);const S=c(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&p(e,["setup","realtimeInputConfig"],S);const P=c(t,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],P);const V=c(t,["proactivity"]);if(e!==void 0&&V!=null&&p(e,["setup","proactivity"],V),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function t4(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],QD(r));const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","responseModalities"],i);const s=c(t,["temperature"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const g=c(t,["speechConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","speechConfig"],_m(g));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","thinkingConfig"],m);const y=c(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&p(e,["setup","systemInstruction"],on(x));const _=c(t,["tools"]);if(e!==void 0&&_!=null){let A=yo(_);Array.isArray(A)&&(A=A.map(R=>h4(go(R)))),p(e,["setup","tools"],A)}const T=c(t,["sessionResumption"]);e!==void 0&&T!=null&&p(e,["setup","sessionResumption"],T);const v=c(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const E=c(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],E);const S=c(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&p(e,["setup","realtimeInputConfig"],S);const P=c(t,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],P);const V=c(t,["proactivity"]);e!==void 0&&V!=null&&p(e,["setup","proactivity"],V);const O=c(t,["explicitVadSignal"]);return e!==void 0&&O!=null&&p(e,["setup","explicitVadSignal"],O),n}function n4(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["setup","model"],Je(t,r));const i=c(e,["config"]);return i!=null&&p(n,["config"],e4(i,n)),n}function r4(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["setup","model"],Je(t,r));const i=c(e,["config"]);return i!=null&&p(n,["config"],t4(i,n)),n}function i4(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function s4(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),p(e,["weightedPrompts"],r)}return e}function o4(t){const e={},n=c(t,["media"]);if(n!=null){let u=LT(n);Array.isArray(u)&&(u=u.map(d=>lu(d))),p(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&p(e,["audio"],lu(FT(r)));const i=c(t,["audioStreamEnd"]);i!=null&&p(e,["audioStreamEnd"],i);const s=c(t,["video"]);s!=null&&p(e,["video"],lu(VT(s)));const o=c(t,["text"]);o!=null&&p(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function a4(t){const e={},n=c(t,["media"]);if(n!=null){let u=LT(n);Array.isArray(u)&&(u=u.map(d=>d)),p(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&p(e,["audio"],FT(r));const i=c(t,["audioStreamEnd"]);i!=null&&p(e,["audioStreamEnd"],i);const s=c(t,["video"]);s!=null&&p(e,["video"],VT(s));const o=c(t,["text"]);o!=null&&p(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function l4(t){const e={},n=c(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const r=c(t,["serverContent"]);r!=null&&p(e,["serverContent"],r);const i=c(t,["toolCall"]);i!=null&&p(e,["toolCall"],i);const s=c(t,["toolCallCancellation"]);s!=null&&p(e,["toolCallCancellation"],s);const o=c(t,["usageMetadata"]);o!=null&&p(e,["usageMetadata"],f4(o));const a=c(t,["goAway"]);a!=null&&p(e,["goAway"],a);const l=c(t,["sessionResumptionUpdate"]);l!=null&&p(e,["sessionResumptionUpdate"],l);const u=c(t,["voiceActivityDetectionSignal"]);return u!=null&&p(e,["voiceActivityDetectionSignal"],u),e}function u4(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const s=c(t,["fileData"]);s!=null&&p(e,["fileData"],KD(s));const o=c(t,["functionCall"]);o!=null&&p(e,["functionCall"],JD(o));const a=c(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&p(e,["inlineData"],lu(l));const u=c(t,["text"]);u!=null&&p(e,["text"],u);const d=c(t,["thought"]);d!=null&&p(e,["thought"],d);const g=c(t,["thoughtSignature"]);g!=null&&p(e,["thoughtSignature"],g);const m=c(t,["videoMetadata"]);return m!=null&&p(e,["videoMetadata"],m),e}function c4(t){const e={},n=c(t,["handle"]);if(n!=null&&p(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function d4(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(g=>g)),p(e,["functionDeclarations"],d)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&p(e,["computerUse"],i);const s=c(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const o=c(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],XD(a));const l=c(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],ZD(l));const u=c(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function h4(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>YD(m))),p(e,["functionDeclarations"],g)}const r=c(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const i=c(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const s=c(t,["computerUse"]);if(s!=null&&p(e,["computerUse"],s),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=c(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=c(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=c(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],u);const d=c(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function f4(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const r=c(t,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const i=c(t,["candidatesTokenCount"]);i!=null&&p(e,["responseTokenCount"],i);const s=c(t,["toolUsePromptTokenCount"]);s!=null&&p(e,["toolUsePromptTokenCount"],s);const o=c(t,["thoughtsTokenCount"]);o!=null&&p(e,["thoughtsTokenCount"],o);const a=c(t,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);const l=c(t,["promptTokensDetails"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(x=>x)),p(e,["promptTokensDetails"],y)}const u=c(t,["cacheTokensDetails"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(x=>x)),p(e,["cacheTokensDetails"],y)}const d=c(t,["candidatesTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(x=>x)),p(e,["responseTokensDetails"],y)}const g=c(t,["toolUsePromptTokensDetails"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(x=>x)),p(e,["toolUsePromptTokensDetails"],y)}const m=c(t,["trafficType"]);return m!=null&&p(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p4(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function m4(t){const e={},n=c(t,["content"]);n!=null&&p(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],g4(r));const i=c(t,["tokenCount"]);i!=null&&p(e,["tokenCount"],i);const s=c(t,["finishReason"]);s!=null&&p(e,["finishReason"],s);const o=c(t,["avgLogprobs"]);o!=null&&p(e,["avgLogprobs"],o);const a=c(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const l=c(t,["index"]);l!=null&&p(e,["index"],l);const u=c(t,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const d=c(t,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(y=>y)),p(e,["safetyRatings"],m)}const g=c(t,["urlContextMetadata"]);return g!=null&&p(e,["urlContextMetadata"],g),e}function g4(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),p(e,["citations"],r)}return e}function y4(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["contents"]);if(i!=null){let s=qn(i);Array.isArray(s)&&(s=s.map(o=>o)),p(n,["contents"],s)}return n}function v4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),p(e,["tokensInfo"],i)}return e}function _4(t){const e={},n=c(t,["values"]);n!=null&&p(e,["values"],n);const r=c(t,["statistics"]);return r!=null&&p(e,["statistics"],w4(r)),e}function w4(t){const e={},n=c(t,["truncated"]);n!=null&&p(e,["truncated"],n);const r=c(t,["token_count"]);return r!=null&&p(e,["tokenCount"],r),e}function Gc(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>b5(s))),p(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&p(e,["role"],r),e}function x4(t){const e={},n=c(t,["controlType"]);n!=null&&p(e,["controlType"],n);const r=c(t,["enableControlImageComputation"]);return r!=null&&p(e,["computeControl"],r),e}function E4(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function T4(t,e){const n={},r=c(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],on(r));const i=c(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>QT(a))),p(e,["tools"],o)}const s=c(t,["generationConfig"]);return e!==void 0&&s!=null&&p(e,["generationConfig"],p5(s)),n}function S4(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["contents"]);if(i!=null){let o=qn(i);Array.isArray(o)&&(o=o.map(a=>Gc(a))),p(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&E4(s),n}function I4(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["contents"]);if(i!=null){let o=qn(i);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&T4(s,n),n}function C4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);r!=null&&p(e,["totalTokens"],r);const i=c(t,["cachedContentTokenCount"]);return i!=null&&p(e,["cachedContentTokenCount"],i),e}function k4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);return r!=null&&p(e,["totalTokens"],r),e}function A4(t,e){const n={},r=c(e,["model"]);return r!=null&&p(n,["_url","name"],Je(t,r)),n}function b4(t,e){const n={},r=c(e,["model"]);return r!=null&&p(n,["_url","name"],Je(t,r)),n}function R4(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function N4(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function P4(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const i=c(t,["negativePrompt"]);e!==void 0&&i!=null&&p(e,["parameters","negativePrompt"],i);const s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=c(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const g=c(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&p(e,["parameters","includeRaiReason"],m);const y=c(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const x=c(t,["outputMimeType"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","mimeType"],x);const _=c(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","compressionQuality"],_);const T=c(t,["addWatermark"]);e!==void 0&&T!=null&&p(e,["parameters","addWatermark"],T);const v=c(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const E=c(t,["editMode"]);e!==void 0&&E!=null&&p(e,["parameters","editMode"],E);const S=c(t,["baseSteps"]);return e!==void 0&&S!=null&&p(e,["parameters","editConfig","baseSteps"],S),n}function M4(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const s=c(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>L5(l))),p(n,["instances[0]","referenceImages"],a)}const o=c(e,["config"]);return o!=null&&P4(o,n),n}function D4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Hc(s))),p(e,["generatedImages"],i)}return e}function L4(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&p(e,["requests[]","title"],i);const s=c(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&p(e,["requests[]","outputDimensionality"],s),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function V4(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&p(e,["instances[]","title"],i);const s=c(t,["outputDimensionality"]);e!==void 0&&s!=null&&p(e,["parameters","outputDimensionality"],s);const o=c(t,["mimeType"]);e!==void 0&&o!=null&&p(e,["instances[]","mimeType"],o);const a=c(t,["autoTruncate"]);return e!==void 0&&a!=null&&p(e,["parameters","autoTruncate"],a),n}function F4(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["contents"]);if(i!=null){let a=gm(t,i);Array.isArray(a)&&(a=a.map(l=>l)),p(n,["requests[]","content"],a)}const s=c(e,["config"]);s!=null&&L4(s,n);const o=c(e,["model"]);return o!==void 0&&p(n,["requests[]","model"],Je(t,o)),n}function U4(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["contents"]);if(i!=null){let o=gm(t,i);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["instances[]","content"],o)}const s=c(e,["config"]);return s!=null&&V4(s,n),n}function B4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),p(e,["embeddings"],s)}const i=c(t,["metadata"]);return i!=null&&p(e,["metadata"],i),e}function O4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>_4(o))),p(e,["embeddings"],s)}const i=c(t,["metadata"]);return i!=null&&p(e,["metadata"],i),e}function j4(t){const e={},n=c(t,["endpoint"]);n!=null&&p(e,["name"],n);const r=c(t,["deployedModelId"]);return r!=null&&p(e,["deployedModelId"],r),e}function z4(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function G4(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const r=c(t,["args"]);r!=null&&p(e,["args"],r);const i=c(t,["name"]);if(i!=null&&p(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function H4(t){const e={},n=c(t,["mode"]);n!=null&&p(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&p(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function q4(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&p(e,["description"],n);const r=c(t,["name"]);r!=null&&p(e,["name"],r);const i=c(t,["parameters"]);i!=null&&p(e,["parameters"],i);const s=c(t,["parametersJsonSchema"]);s!=null&&p(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&p(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function $4(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&p(n,["systemInstruction"],Gc(on(i)));const s=c(e,["temperature"]);s!=null&&p(r,["temperature"],s);const o=c(e,["topP"]);o!=null&&p(r,["topP"],o);const a=c(e,["topK"]);a!=null&&p(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&p(r,["maxOutputTokens"],u);const d=c(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const g=c(e,["responseLogprobs"]);g!=null&&p(r,["responseLogprobs"],g);const m=c(e,["logprobs"]);m!=null&&p(r,["logprobs"],m);const y=c(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const x=c(e,["frequencyPenalty"]);x!=null&&p(r,["frequencyPenalty"],x);const _=c(e,["seed"]);_!=null&&p(r,["seed"],_);const T=c(e,["responseMimeType"]);T!=null&&p(r,["responseMimeType"],T);const v=c(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],ym(v));const E=c(e,["responseJsonSchema"]);if(E!=null&&p(r,["responseJsonSchema"],E),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=c(e,["safetySettings"]);if(n!==void 0&&S!=null){let M=S;Array.isArray(M)&&(M=M.map(b=>V5(b))),p(n,["safetySettings"],M)}const P=c(e,["tools"]);if(n!==void 0&&P!=null){let M=yo(P);Array.isArray(M)&&(M=M.map(b=>G5(go(b)))),p(n,["tools"],M)}const V=c(e,["toolConfig"]);if(n!==void 0&&V!=null&&p(n,["toolConfig"],z5(V)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=c(e,["cachedContent"]);n!==void 0&&O!=null&&p(n,["cachedContent"],jr(t,O));const A=c(e,["responseModalities"]);A!=null&&p(r,["responseModalities"],A);const R=c(e,["mediaResolution"]);R!=null&&p(r,["mediaResolution"],R);const k=c(e,["speechConfig"]);if(k!=null&&p(r,["speechConfig"],vm(k)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=c(e,["thinkingConfig"]);D!=null&&p(r,["thinkingConfig"],D);const F=c(e,["imageConfig"]);F!=null&&p(r,["imageConfig"],_5(F));const N=c(e,["enableEnhancedCivicAnswers"]);return N!=null&&p(r,["enableEnhancedCivicAnswers"],N),r}function W4(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&p(n,["systemInstruction"],on(i));const s=c(e,["temperature"]);s!=null&&p(r,["temperature"],s);const o=c(e,["topP"]);o!=null&&p(r,["topP"],o);const a=c(e,["topK"]);a!=null&&p(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&p(r,["maxOutputTokens"],u);const d=c(e,["stopSequences"]);d!=null&&p(r,["stopSequences"],d);const g=c(e,["responseLogprobs"]);g!=null&&p(r,["responseLogprobs"],g);const m=c(e,["logprobs"]);m!=null&&p(r,["logprobs"],m);const y=c(e,["presencePenalty"]);y!=null&&p(r,["presencePenalty"],y);const x=c(e,["frequencyPenalty"]);x!=null&&p(r,["frequencyPenalty"],x);const _=c(e,["seed"]);_!=null&&p(r,["seed"],_);const T=c(e,["responseMimeType"]);T!=null&&p(r,["responseMimeType"],T);const v=c(e,["responseSchema"]);v!=null&&p(r,["responseSchema"],ym(v));const E=c(e,["responseJsonSchema"]);E!=null&&p(r,["responseJsonSchema"],E);const S=c(e,["routingConfig"]);S!=null&&p(r,["routingConfig"],S);const P=c(e,["modelSelectionConfig"]);P!=null&&p(r,["modelConfig"],P);const V=c(e,["safetySettings"]);if(n!==void 0&&V!=null){let pe=V;Array.isArray(pe)&&(pe=pe.map(ee=>ee)),p(n,["safetySettings"],pe)}const O=c(e,["tools"]);if(n!==void 0&&O!=null){let pe=yo(O);Array.isArray(pe)&&(pe=pe.map(ee=>QT(go(ee)))),p(n,["tools"],pe)}const A=c(e,["toolConfig"]);n!==void 0&&A!=null&&p(n,["toolConfig"],A);const R=c(e,["labels"]);n!==void 0&&R!=null&&p(n,["labels"],R);const k=c(e,["cachedContent"]);n!==void 0&&k!=null&&p(n,["cachedContent"],jr(t,k));const D=c(e,["responseModalities"]);D!=null&&p(r,["responseModalities"],D);const F=c(e,["mediaResolution"]);F!=null&&p(r,["mediaResolution"],F);const N=c(e,["speechConfig"]);N!=null&&p(r,["speechConfig"],vm(N));const M=c(e,["audioTimestamp"]);M!=null&&p(r,["audioTimestamp"],M);const b=c(e,["thinkingConfig"]);b!=null&&p(r,["thinkingConfig"],b);const J=c(e,["imageConfig"]);if(J!=null&&p(r,["imageConfig"],w5(J)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function Nv(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["contents"]);if(i!=null){let o=qn(i);Array.isArray(o)&&(o=o.map(a=>Gc(a))),p(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&p(n,["generationConfig"],$4(t,s,n)),n}function Pv(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["contents"]);if(i!=null){let o=qn(i);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&p(n,["generationConfig"],W4(t,s,n)),n}function Mv(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>m4(u))),p(e,["candidates"],l)}const i=c(t,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const s=c(t,["promptFeedback"]);s!=null&&p(e,["promptFeedback"],s);const o=c(t,["responseId"]);o!=null&&p(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function Dv(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),p(e,["candidates"],u)}const i=c(t,["createTime"]);i!=null&&p(e,["createTime"],i);const s=c(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const o=c(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&p(e,["responseId"],a);const l=c(t,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function K4(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const i=c(t,["aspectRatio"]);e!==void 0&&i!=null&&p(e,["parameters","aspectRatio"],i);const s=c(t,["guidanceScale"]);if(e!==void 0&&s!=null&&p(e,["parameters","guidanceScale"],s),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=c(t,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const l=c(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&p(e,["parameters","includeSafetyAttributes"],l);const u=c(t,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const d=c(t,["language"]);e!==void 0&&d!=null&&p(e,["parameters","language"],d);const g=c(t,["outputMimeType"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","mimeType"],g);const m=c(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=c(t,["imageSize"]);if(e!==void 0&&y!=null&&p(e,["parameters","sampleImageSize"],y),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function J4(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const i=c(t,["negativePrompt"]);e!==void 0&&i!=null&&p(e,["parameters","negativePrompt"],i);const s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=c(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const g=c(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&p(e,["parameters","includeRaiReason"],m);const y=c(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const x=c(t,["outputMimeType"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","mimeType"],x);const _=c(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","compressionQuality"],_);const T=c(t,["addWatermark"]);e!==void 0&&T!=null&&p(e,["parameters","addWatermark"],T);const v=c(t,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const E=c(t,["imageSize"]);e!==void 0&&E!=null&&p(e,["parameters","sampleImageSize"],E);const S=c(t,["enhancePrompt"]);return e!==void 0&&S!=null&&p(e,["parameters","enhancePrompt"],S),n}function Y4(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const s=c(e,["config"]);return s!=null&&K4(s,n),n}function Q4(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const s=c(e,["config"]);return s!=null&&J4(s,n),n}function X4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>c5(o))),p(e,["generatedImages"],s)}const i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&p(e,["positivePromptSafetyAttributes"],JT(i)),e}function Z4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Hc(o))),p(e,["generatedImages"],s)}const i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&p(e,["positivePromptSafetyAttributes"],YT(i)),e}function e5(t,e){const n={},r=c(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=c(t,["durationSeconds"]);if(e!==void 0&&i!=null&&p(e,["parameters","durationSeconds"],i),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=c(t,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const o=c(t,["resolution"]);e!==void 0&&o!=null&&p(e,["parameters","resolution"],o);const a=c(t,["personGeneration"]);if(e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=c(t,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const u=c(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&p(e,["parameters","enhancePrompt"],u),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=c(t,["lastFrame"]);e!==void 0&&d!=null&&p(e,["instances[0]","lastFrame"],qc(d));const g=c(t,["referenceImages"]);if(e!==void 0&&g!=null){let m=g;Array.isArray(m)&&(m=m.map(y=>n3(y))),p(e,["instances[0]","referenceImages"],m)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function t5(t,e){const n={},r=c(t,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const s=c(t,["fps"]);e!==void 0&&s!=null&&p(e,["parameters","fps"],s);const o=c(t,["durationSeconds"]);e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o);const a=c(t,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const l=c(t,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const u=c(t,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const d=c(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const g=c(t,["pubsubTopic"]);e!==void 0&&g!=null&&p(e,["parameters","pubsubTopic"],g);const m=c(t,["negativePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","negativePrompt"],m);const y=c(t,["enhancePrompt"]);e!==void 0&&y!=null&&p(e,["parameters","enhancePrompt"],y);const x=c(t,["generateAudio"]);e!==void 0&&x!=null&&p(e,["parameters","generateAudio"],x);const _=c(t,["lastFrame"]);e!==void 0&&_!=null&&p(e,["instances[0]","lastFrame"],lr(_));const T=c(t,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(P=>r3(P))),p(e,["instances[0]","referenceImages"],S)}const v=c(t,["mask"]);e!==void 0&&v!=null&&p(e,["instances[0]","mask"],t3(v));const E=c(t,["compressionQuality"]);return e!==void 0&&E!=null&&p(e,["parameters","compressionQuality"],E),n}function n5(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const r=c(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=c(t,["done"]);i!=null&&p(e,["done"],i);const s=c(t,["error"]);s!=null&&p(e,["error"],s);const o=c(t,["response","generateVideoResponse"]);return o!=null&&p(e,["response"],o5(o)),e}function r5(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const r=c(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=c(t,["done"]);i!=null&&p(e,["done"],i);const s=c(t,["error"]);s!=null&&p(e,["error"],s);const o=c(t,["response"]);return o!=null&&p(e,["response"],a5(o)),e}function i5(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const s=c(e,["image"]);s!=null&&p(n,["instances[0]","image"],qc(s));const o=c(e,["video"]);o!=null&&p(n,["instances[0]","video"],XT(o));const a=c(e,["source"]);a!=null&&l5(a,n);const l=c(e,["config"]);return l!=null&&e5(l,n),n}function s5(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const s=c(e,["image"]);s!=null&&p(n,["instances[0]","image"],lr(s));const o=c(e,["video"]);o!=null&&p(n,["instances[0]","video"],ZT(o));const a=c(e,["source"]);a!=null&&u5(a,n);const l=c(e,["config"]);return l!=null&&t5(l,n),n}function o5(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>h5(o))),p(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function a5(t){const e={},n=c(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>f5(o))),p(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function l5(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&p(e,["instances[0]","image"],qc(i));const s=c(t,["video"]);return e!==void 0&&s!=null&&p(e,["instances[0]","video"],XT(s)),n}function u5(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&p(e,["instances[0]","image"],lr(i));const s=c(t,["video"]);return e!==void 0&&s!=null&&p(e,["instances[0]","video"],ZT(s)),n}function c5(t){const e={},n=c(t,["_self"]);n!=null&&p(e,["image"],x5(n));const r=c(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const i=c(t,["_self"]);return i!=null&&p(e,["safetyAttributes"],JT(i)),e}function Hc(t){const e={},n=c(t,["_self"]);n!=null&&p(e,["image"],KT(n));const r=c(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const i=c(t,["_self"]);i!=null&&p(e,["safetyAttributes"],YT(i));const s=c(t,["prompt"]);return s!=null&&p(e,["enhancedPrompt"],s),e}function d5(t){const e={},n=c(t,["_self"]);n!=null&&p(e,["mask"],KT(n));const r=c(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),p(e,["labels"],i)}return e}function h5(t){const e={},n=c(t,["video"]);return n!=null&&p(e,["video"],Z5(n)),e}function f5(t){const e={},n=c(t,["_self"]);return n!=null&&p(e,["video"],e3(n)),e}function p5(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=c(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const i=c(t,["audioTimestamp"]);i!=null&&p(e,["audioTimestamp"],i);const s=c(t,["candidateCount"]);s!=null&&p(e,["candidateCount"],s);const o=c(t,["enableAffectiveDialog"]);o!=null&&p(e,["enableAffectiveDialog"],o);const a=c(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const l=c(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const u=c(t,["maxOutputTokens"]);u!=null&&p(e,["maxOutputTokens"],u);const d=c(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const g=c(t,["presencePenalty"]);g!=null&&p(e,["presencePenalty"],g);const m=c(t,["responseLogprobs"]);m!=null&&p(e,["responseLogprobs"],m);const y=c(t,["responseMimeType"]);y!=null&&p(e,["responseMimeType"],y);const x=c(t,["responseModalities"]);x!=null&&p(e,["responseModalities"],x);const _=c(t,["responseSchema"]);_!=null&&p(e,["responseSchema"],_);const T=c(t,["routingConfig"]);T!=null&&p(e,["routingConfig"],T);const v=c(t,["seed"]);v!=null&&p(e,["seed"],v);const E=c(t,["speechConfig"]);E!=null&&p(e,["speechConfig"],E);const S=c(t,["stopSequences"]);S!=null&&p(e,["stopSequences"],S);const P=c(t,["temperature"]);P!=null&&p(e,["temperature"],P);const V=c(t,["thinkingConfig"]);V!=null&&p(e,["thinkingConfig"],V);const O=c(t,["topK"]);O!=null&&p(e,["topK"],O);const A=c(t,["topP"]);if(A!=null&&p(e,["topP"],A),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function m5(t,e){const n={},r=c(e,["model"]);return r!=null&&p(n,["_url","name"],Je(t,r)),n}function g5(t,e){const n={},r=c(e,["model"]);return r!=null&&p(n,["_url","name"],Je(t,r)),n}function y5(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function v5(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function _5(t){const e={},n=c(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=c(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function w5(t){const e={},n=c(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=c(t,["imageSize"]);r!=null&&p(e,["imageSize"],r);const i=c(t,["outputMimeType"]);i!=null&&p(e,["imageOutputOptions","mimeType"],i);const s=c(t,["outputCompressionQuality"]);return s!=null&&p(e,["imageOutputOptions","compressionQuality"],s),e}function x5(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],bi(n));const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function KT(t){const e={},n=c(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&p(e,["imageBytes"],bi(r));const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function qc(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],bi(n));const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function lr(t){const e={},n=c(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=c(t,["imageBytes"]);r!=null&&p(e,["bytesBase64Encoded"],bi(r));const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function E5(t,e,n){const r={},i=c(e,["pageSize"]);n!==void 0&&i!=null&&p(n,["_query","pageSize"],i);const s=c(e,["pageToken"]);n!==void 0&&s!=null&&p(n,["_query","pageToken"],s);const o=c(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],jT(t,a)),r}function T5(t,e,n){const r={},i=c(e,["pageSize"]);n!==void 0&&i!=null&&p(n,["_query","pageSize"],i);const s=c(e,["pageToken"]);n!==void 0&&s!=null&&p(n,["_query","pageToken"],s);const o=c(e,["filter"]);n!==void 0&&o!=null&&p(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],jT(t,a)),r}function S5(t,e){const n={},r=c(e,["config"]);return r!=null&&E5(t,r,n),n}function I5(t,e){const n={},r=c(e,["config"]);return r!=null&&T5(t,r,n),n}function C5(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=c(t,["_self"]);if(i!=null){let s=zT(i);Array.isArray(s)&&(s=s.map(o=>mf(o))),p(e,["models"],s)}return e}function k5(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=c(t,["_self"]);if(i!=null){let s=zT(i);Array.isArray(s)&&(s=s.map(o=>gf(o))),p(e,["models"],s)}return e}function A5(t){const e={},n=c(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const r=c(t,["segmentationClasses"]);r!=null&&p(e,["maskClasses"],r);const i=c(t,["maskDilation"]);return i!=null&&p(e,["dilation"],i),e}function mf(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const r=c(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=c(t,["description"]);i!=null&&p(e,["description"],i);const s=c(t,["version"]);s!=null&&p(e,["version"],s);const o=c(t,["_self"]);o!=null&&p(e,["tunedModelInfo"],H5(o));const a=c(t,["inputTokenLimit"]);a!=null&&p(e,["inputTokenLimit"],a);const l=c(t,["outputTokenLimit"]);l!=null&&p(e,["outputTokenLimit"],l);const u=c(t,["supportedGenerationMethods"]);u!=null&&p(e,["supportedActions"],u);const d=c(t,["temperature"]);d!=null&&p(e,["temperature"],d);const g=c(t,["maxTemperature"]);g!=null&&p(e,["maxTemperature"],g);const m=c(t,["topP"]);m!=null&&p(e,["topP"],m);const y=c(t,["topK"]);y!=null&&p(e,["topK"],y);const x=c(t,["thinking"]);return x!=null&&p(e,["thinking"],x),e}function gf(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const r=c(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=c(t,["description"]);i!=null&&p(e,["description"],i);const s=c(t,["versionId"]);s!=null&&p(e,["version"],s);const o=c(t,["deployedModels"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(m=>j4(m))),p(e,["endpoints"],g)}const a=c(t,["labels"]);a!=null&&p(e,["labels"],a);const l=c(t,["_self"]);l!=null&&p(e,["tunedModelInfo"],q5(l));const u=c(t,["defaultCheckpointId"]);u!=null&&p(e,["defaultCheckpointId"],u);const d=c(t,["checkpoints"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(m=>m)),p(e,["checkpoints"],g)}return e}function b5(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const s=c(t,["fileData"]);s!=null&&p(e,["fileData"],z4(s));const o=c(t,["functionCall"]);o!=null&&p(e,["functionCall"],G4(o));const a=c(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&p(e,["inlineData"],p4(l));const u=c(t,["text"]);u!=null&&p(e,["text"],u);const d=c(t,["thought"]);d!=null&&p(e,["thought"],d);const g=c(t,["thoughtSignature"]);g!=null&&p(e,["thoughtSignature"],g);const m=c(t,["videoMetadata"]);return m!=null&&p(e,["videoMetadata"],m),e}function R5(t){const e={},n=c(t,["productImage"]);return n!=null&&p(e,["image"],lr(n)),e}function N5(t,e){const n={},r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const i=c(t,["baseSteps"]);e!==void 0&&i!=null&&p(e,["parameters","baseSteps"],i);const s=c(t,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const o=c(t,["seed"]);e!==void 0&&o!=null&&p(e,["parameters","seed"],o);const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const l=c(t,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const u=c(t,["addWatermark"]);e!==void 0&&u!=null&&p(e,["parameters","addWatermark"],u);const d=c(t,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const g=c(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g);const m=c(t,["enhancePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","enhancePrompt"],m);const y=c(t,["labels"]);return e!==void 0&&y!=null&&p(e,["labels"],y),n}function P5(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["source"]);i!=null&&D5(i,n);const s=c(e,["config"]);return s!=null&&N5(s,n),n}function M5(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Hc(i))),p(e,["generatedImages"],r)}return e}function D5(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const i=c(t,["personImage"]);e!==void 0&&i!=null&&p(e,["instances[0]","personImage","image"],lr(i));const s=c(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>R5(a))),p(e,["instances[0]","productImages"],o)}return n}function L5(t){const e={},n=c(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],lr(n));const r=c(t,["referenceId"]);r!=null&&p(e,["referenceId"],r);const i=c(t,["referenceType"]);i!=null&&p(e,["referenceType"],i);const s=c(t,["maskImageConfig"]);s!=null&&p(e,["maskImageConfig"],A5(s));const o=c(t,["controlImageConfig"]);o!=null&&p(e,["controlImageConfig"],x4(o));const a=c(t,["styleImageConfig"]);a!=null&&p(e,["styleImageConfig"],a);const l=c(t,["subjectImageConfig"]);return l!=null&&p(e,["subjectImageConfig"],l),e}function JT(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const i=c(t,["contentType"]);return i!=null&&p(e,["contentType"],i),e}function YT(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const i=c(t,["contentType"]);return i!=null&&p(e,["contentType"],i),e}function V5(t){const e={},n=c(t,["category"]);if(n!=null&&p(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function F5(t){const e={},n=c(t,["image"]);return n!=null&&p(e,["image"],lr(n)),e}function U5(t,e){const n={},r=c(t,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const i=c(t,["maxPredictions"]);e!==void 0&&i!=null&&p(e,["parameters","maxPredictions"],i);const s=c(t,["confidenceThreshold"]);e!==void 0&&s!=null&&p(e,["parameters","confidenceThreshold"],s);const o=c(t,["maskDilation"]);e!==void 0&&o!=null&&p(e,["parameters","maskDilation"],o);const a=c(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","binaryColorThreshold"],a);const l=c(t,["labels"]);return e!==void 0&&l!=null&&p(e,["labels"],l),n}function B5(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["source"]);i!=null&&j5(i,n);const s=c(e,["config"]);return s!=null&&U5(s,n),n}function O5(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>d5(i))),p(e,["generatedMasks"],r)}return e}function j5(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&p(e,["instances[0]","image"],lr(i));const s=c(t,["scribbleImage"]);return e!==void 0&&s!=null&&p(e,["instances[0]","scribble"],F5(s)),n}function z5(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],H4(n));const r=c(t,["retrievalConfig"]);return r!=null&&p(e,["retrievalConfig"],r),e}function G5(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(g=>g)),p(e,["functionDeclarations"],d)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&p(e,["computerUse"],i);const s=c(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const o=c(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],y5(a));const l=c(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],v5(l));const u=c(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function QT(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(m=>q4(m))),p(e,["functionDeclarations"],g)}const r=c(t,["retrieval"]);r!=null&&p(e,["retrieval"],r);const i=c(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const s=c(t,["computerUse"]);if(s!=null&&p(e,["computerUse"],s),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=c(t,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=c(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=c(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],u);const d=c(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function H5(t){const e={},n=c(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&p(e,["createTime"],r);const i=c(t,["updateTime"]);return i!=null&&p(e,["updateTime"],i),e}function q5(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&p(e,["createTime"],r);const i=c(t,["updateTime"]);return i!=null&&p(e,["updateTime"],i),e}function $5(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const i=c(t,["description"]);e!==void 0&&i!=null&&p(e,["description"],i);const s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&p(e,["defaultCheckpointId"],s),n}function W5(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const i=c(t,["description"]);e!==void 0&&i!=null&&p(e,["description"],i);const s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&p(e,["defaultCheckpointId"],s),n}function K5(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","name"],Je(t,r));const i=c(e,["config"]);return i!=null&&$5(i,n),n}function J5(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["config"]);return i!=null&&W5(i,n),n}function Y5(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const i=c(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&p(e,["parameters","safetySetting"],i);const s=c(t,["personGeneration"]);e!==void 0&&s!=null&&p(e,["parameters","personGeneration"],s);const o=c(t,["includeRaiReason"]);e!==void 0&&o!=null&&p(e,["parameters","includeRaiReason"],o);const a=c(t,["outputMimeType"]);e!==void 0&&a!=null&&p(e,["parameters","outputOptions","mimeType"],a);const l=c(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&p(e,["parameters","outputOptions","compressionQuality"],l);const u=c(t,["enhanceInputImage"]);e!==void 0&&u!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],u);const d=c(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const g=c(t,["labels"]);e!==void 0&&g!=null&&p(e,["labels"],g);const m=c(t,["numberOfImages"]);e!==void 0&&m!=null&&p(e,["parameters","sampleCount"],m);const y=c(t,["mode"]);return e!==void 0&&y!=null&&p(e,["parameters","mode"],y),n}function Q5(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["_url","model"],Je(t,r));const i=c(e,["image"]);i!=null&&p(n,["instances[0]","image"],lr(i));const s=c(e,["upscaleFactor"]);s!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=c(e,["config"]);return o!=null&&Y5(o,n),n}function X5(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Hc(s))),p(e,["generatedImages"],i)}return e}function Z5(t){const e={},n=c(t,["uri"]);n!=null&&p(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],bi(r));const i=c(t,["encoding"]);return i!=null&&p(e,["mimeType"],i),e}function e3(t){const e={},n=c(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],bi(r));const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function t3(t){const e={},n=c(t,["image"]);n!=null&&p(e,["_self"],lr(n));const r=c(t,["maskMode"]);return r!=null&&p(e,["maskMode"],r),e}function n3(t){const e={},n=c(t,["image"]);n!=null&&p(e,["image"],qc(n));const r=c(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function r3(t){const e={},n=c(t,["image"]);n!=null&&p(e,["image"],lr(n));const r=c(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function XT(t){const e={},n=c(t,["uri"]);n!=null&&p(e,["uri"],n);const r=c(t,["videoBytes"]);r!=null&&p(e,["encodedVideo"],bi(r));const i=c(t,["mimeType"]);return i!=null&&p(e,["encoding"],i),e}function ZT(t){const e={},n=c(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const r=c(t,["videoBytes"]);r!=null&&p(e,["bytesBase64Encoded"],bi(r));const i=c(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i3(t,e){const n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["displayName"],r),n}function s3(t){const e={},n=c(t,["config"]);return n!=null&&i3(n,e),e}function o3(t,e){const n={},r=c(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function a3(t){const e={},n=c(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=c(t,["config"]);return r!=null&&o3(r,e),e}function l3(t){const e={},n=c(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function u3(t,e){const n={},r=c(t,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),p(e,["customMetadata"],s)}const i=c(t,["chunkingConfig"]);return e!==void 0&&i!=null&&p(e,["chunkingConfig"],i),n}function c3(t){const e={},n=c(t,["name"]);n!=null&&p(e,["name"],n);const r=c(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=c(t,["done"]);i!=null&&p(e,["done"],i);const s=c(t,["error"]);s!=null&&p(e,["error"],s);const o=c(t,["response"]);return o!=null&&p(e,["response"],h3(o)),e}function d3(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=c(t,["fileName"]);r!=null&&p(e,["fileName"],r);const i=c(t,["config"]);return i!=null&&u3(i,e),e}function h3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&p(e,["parent"],r);const i=c(t,["documentName"]);return i!=null&&p(e,["documentName"],i),e}function f3(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function p3(t){const e={},n=c(t,["config"]);return n!=null&&f3(n,e),e}function m3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=c(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),p(e,["fileSearchStores"],s)}return e}function e1(t,e){const n={},r=c(t,["mimeType"]);e!==void 0&&r!=null&&p(e,["mimeType"],r);const i=c(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const s=c(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["customMetadata"],a)}const o=c(t,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),n}function g3(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=c(t,["config"]);return r!=null&&e1(r,e),e}function y3(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const v3="Content-Type",_3="X-Server-Timeout",w3="User-Agent",yf="x-goog-api-client",x3="1.34.0",E3=`google-genai-sdk/${x3}`,T3="v1beta1",S3="v1beta";class I3{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:T3,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:S3,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const s=new AbortController,o=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&C3(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Lv(i),new hf(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Lv(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return rr(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:d}=yield Ne(i.read());if(u){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=s.decode(d,{stream:!0});try{const x=JSON.parse(g);if("error"in x){const _=JSON.parse(JSON.stringify(x.error)),T=_.status,v=_.code,E=`got status: ${T}. ${JSON.stringify(x)}`;if(v>=400&&v<600)throw new zc({message:E,status:v})}}catch(x){if(x.name==="ApiError")throw x}o+=g;let m=-1,y=0;for(;;){m=-1,y=0;for(const T of l){const v=o.indexOf(T);v!==-1&&(m===-1||v<m)&&(m=v,y=T.length)}if(m===-1)break;const x=o.substring(0,m);o=o.substring(m+y);const _=x.trim();if(_.startsWith(a)){const T=_.substring(a.length).trim();try{const v=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ne(new hf(v))}catch(v){throw new Error(`exception parsing stream chunk ${T}. ${v}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=E3+" "+this.clientOptions.userAgentExtra;return e[w3]=n,e[yf]=n,e[v3]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append(_3,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},u=this.getFileName(e),d=_e("upload/v1beta/files",l._url),g=await this.fetchUploadUrl(d,i.sizeBytes,i.mimeType,u,l,n==null?void 0:n.httpOptions);return s.upload(e,g,this)}async uploadFileToFileSearchStore(e,n,r){var i;const s=this.clientOptions.uploader,o=await s.stat(n),a=String(o.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),g={};r!=null&&e1(r,g);const m=await this.fetchUploadUrl(u,a,l,d,g,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,s,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function Lv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new zc({message:i,status:n}):new Error(i)}}function C3(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const u=o[l],d=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=r(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k3="mcp_used/unknown";let A3=!1;function t1(t){for(const e of t)if(b3(e)||typeof e=="object"&&"inputSchema"in e)return!0;return A3}function n1(t){var e;const n=(e=t[yf])!==null&&e!==void 0?e:"";t[yf]=(n+` ${k3}`).trimStart()}function b3(t){return t!==null&&typeof t=="object"&&t instanceof wm}function R3(t){return rr(this,arguments,function*(n,r=100){let i,s=0;for(;s<r;){const o=yield Ne(n.listTools({cursor:i}));for(const a of o.tools)yield yield Ne(a),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class wm{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new wm(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const d of this.mcpClients)try{for(var a=!0,l=(n=void 0,ir(R3(d))),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const g=i;o.push(g);const m=g.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=d}}catch(g){n={error:g}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),lM(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function N3(t,e,n){const r=new eM;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class P3{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=L3(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const d=new Promise(S=>{u=S}),g=e.callbacks,m=function(){u({})},y=this.apiClient,x={onopen:m,onmessage:S=>{N3(y,g.onmessage,S)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(S){},onclose:(r=g==null?void 0:g.onclose)!==null&&r!==void 0?r:function(S){}},_=this.webSocketFactory.create(l,D3(o),x);_.connect(),await d;const E={setup:{model:Je(this.apiClient,e.model)}};return _.send(JSON.stringify(E)),new M3(_,this.apiClient)}}class M3{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=s4(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=i4(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ds.PLAY)}pause(){this.sendPlaybackControl(Ds.PAUSE)}stop(){this.sendPlaybackControl(Ds.STOP)}resetContext(){this.sendPlaybackControl(Ds.RESET_CONTEXT)}close(){this.conn.close()}}function D3(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function L3(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V3="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function F3(t,e,n){const r=new ZP;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=l4(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}class U3{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new P3(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const g=this.apiClient.getHeaders();e.config&&e.config.tools&&t1(e.config.tools)&&n1(g);const m=z3(g);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,d);else{const k=this.apiClient.getApiKey();let D="BidiGenerateContent",F="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),D="BidiGenerateContentConstrained",F="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${D}?${F}=${k}`}let y=()=>{};const x=new Promise(k=>{y=k}),_=e.callbacks,T=function(){var k;(k=_==null?void 0:_.onopen)===null||k===void 0||k.call(_),y({})},v=this.apiClient,E={onopen:T,onmessage:k=>{F3(v,_.onmessage,k)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=_==null?void 0:_.onclose)!==null&&r!==void 0?r:function(k){}},S=this.webSocketFactory.create(d,j3(m),E);S.connect(),await x;let P=Je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const k=this.apiClient.getProject(),D=this.apiClient.getLocation();P=`projects/${k}/locations/${D}/`+P}let V={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Yu.AUDIO]}:e.config.responseModalities=[Yu.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],A=[];for(const k of O)if(this.isCallableTool(k)){const D=k;A.push(await D.tool())}else A.push(k);A.length>0&&(e.config.tools=A);const R={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=r4(this.apiClient,R):V=n4(this.apiClient,R),delete V.config,S.send(JSON.stringify(V)),new O3(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const B3={turnComplete:!0};class O3{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=qn(n.turns),e.isVertexAI()||(r=r.map(i=>Gc(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(V3)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},B3),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:a4(e)}:n={realtimeInput:o4(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function j3(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function z3(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vv=10;function Fv(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Hs(o)){i=!0;break}if(!i)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Hs(t){return"callTool"in t&&typeof t.callTool=="function"}function G3(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Hs(i)))!==null&&r!==void 0?r:!1}function Uv(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Hs(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(i)}),n}function Bv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H3 extends Or{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!G3(n)||Fv(n.config))return await this.generateContentInternal(l);const u=Uv(n);if(u.length>0){const _=u.map(T=>`tools[${T}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${_}.`)}let d,g;const m=qn(l.contents),y=(s=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:Vv;let x=0;for(;x<y&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){const _=d.candidates[0].content,T=[];for(const v of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Hs(v)){const S=await v.callTool(d.functionCalls);T.push(...S)}x++,g={role:"user",parts:T},l.contents=qn(l.contents),l.contents.push(_),l.contents.push(g),Bv(l.config)&&(m.push(_),m.push(g))}return Bv(l.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{var r,i,s,o,a;if(this.maybeMoveToResponseJsonSchem(n),Fv(n.config)){const g=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(g)}const l=Uv(n);if(l.length>0){const g=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${g}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(s=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,d=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new us(Ur.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>Hs(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&t1(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),n1(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Hs(o)){const a=o,l=await a.tool();for(const u of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,a)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Vv;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(u,d,g){return rr(this,arguments,function*(){for(var m,y,x,_,T,v;a<s;){o&&(a++,o=!1);const V=yield Ne(u.processParamsMaybeAddMcpUsage(g)),O=yield Ne(u.generateContentStreamInternal(V)),A=[],R=[];try{for(var E=!0,S=(y=void 0,ir(O)),P;P=yield Ne(S.next()),m=P.done,!m;E=!0){_=P.value,E=!1;const k=_;if(yield yield Ne(k),k.candidates&&(!((T=k.candidates[0])===null||T===void 0)&&T.content)){R.push(k.candidates[0].content);for(const D of(v=k.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<s&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(D.functionCall.name)){const F=yield Ne(d.get(D.functionCall.name).callTool([D.functionCall]));A.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(k){y={error:k}}finally{try{!E&&!m&&(x=S.return)&&(yield Ne(x.call(S)))}finally{if(y)throw y.error}}if(A.length>0){o=!0;const k=new Bo;k.candidates=[{content:{role:"user",parts:A}}],yield yield Ne(k);const D=[];D.push(...R),D.push({role:"user",parts:A});const F=qn(g.contents).concat(D);g.contents=F}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Pv(this.apiClient,e);return a=_e("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=Dv(d),m=new Bo;return Object.assign(m,g),m})}else{const u=Nv(this.apiClient,e);return a=_e("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=Mv(d),m=new Bo;return Object.assign(m,g),m})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Pv(this.apiClient,e);return a=_e("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(g){return rr(this,arguments,function*(){var m,y,x,_;try{for(var T=!0,v=ir(g),E;E=yield Ne(v.next()),m=E.done,!m;T=!0){_=E.value,T=!1;const S=_,P=Dv(yield Ne(S.json()));P.sdkHttpResponse={headers:S.headers};const V=new Bo;Object.assign(V,P),yield yield Ne(V)}}catch(S){y={error:S}}finally{try{!T&&!m&&(x=v.return)&&(yield Ne(x.call(v)))}finally{if(y)throw y.error}}})})}else{const u=Nv(this.apiClient,e);return a=_e("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(g){return rr(this,arguments,function*(){var m,y,x,_;try{for(var T=!0,v=ir(g),E;E=yield Ne(v.next()),m=E.done,!m;T=!0){_=E.value,T=!1;const S=_,P=Mv(yield Ne(S.json()));P.sdkHttpResponse={headers:S.headers};const V=new Bo;Object.assign(V,P),yield yield Ne(V)}}catch(S){y={error:S}}finally{try{!T&&!m&&(x=v.return)&&(yield Ne(x.call(v)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=U4(this.apiClient,e);return a=_e("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=O4(d),m=new pv;return Object.assign(m,g),m})}else{const u=F4(this.apiClient,e);return a=_e("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=B4(d),m=new pv;return Object.assign(m,g),m})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Q4(this.apiClient,e);return a=_e("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=Z4(d),m=new mv;return Object.assign(m,g),m})}else{const u=Y4(this.apiClient,e);return a=_e("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=X4(d),m=new mv;return Object.assign(m,g),m})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=M4(this.apiClient,e);return s=_e("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const u=D4(l),d=new zP;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Q5(this.apiClient,e);return s=_e("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const u=X5(l),d=new GP;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=P5(this.apiClient,e);return s=_e("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=M5(l),d=new HP;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=B5(this.apiClient,e);return s=_e("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=O5(l),d=new qP;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=g5(this.apiClient,e);return a=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>gf(d))}else{const u=m5(this.apiClient,e);return a=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>mf(d))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=I5(this.apiClient,e);return a=_e("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=k5(d),m=new gv;return Object.assign(m,g),m})}else{const u=S5(this.apiClient,e);return a=_e("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=C5(d),m=new gv;return Object.assign(m,g),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=J5(this.apiClient,e);return a=_e("{model}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>gf(d))}else{const u=K5(this.apiClient,e);return a=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>mf(d))}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=b4(this.apiClient,e);return a=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=N4(d),m=new yv;return Object.assign(m,g),m})}else{const u=A4(this.apiClient,e);return a=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=R4(d),m=new yv;return Object.assign(m,g),m})}}async countTokens(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=I4(this.apiClient,e);return a=_e("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=k4(d),m=new vv;return Object.assign(m,g),m})}else{const u=S4(this.apiClient,e);return a=_e("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=C4(d),m=new vv;return Object.assign(m,g),m})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=y4(this.apiClient,e);return s=_e("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const u=v4(l),d=new $P;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=s5(this.apiClient,e);return a=_e("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const g=r5(d),m=new Qu;return Object.assign(m,g),m})}else{const u=i5(this.apiClient,e);return a=_e("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>{const g=n5(d),m=new Qu;return Object.assign(m,g),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q3 extends Or{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=VP(e);return a=_e("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}else{const u=LP(e);return a=_e("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=AP(e);return s=_e("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $3(t){const e={},n=c(t,["data"]);if(n!=null&&p(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function W3(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>nL(s))),p(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&p(e,["role"],r),e}function K3(t,e,n){const r={},i=c(e,["expireTime"]);n!==void 0&&i!=null&&p(n,["expireTime"],i);const s=c(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&p(n,["newSessionExpireTime"],s);const o=c(e,["uses"]);n!==void 0&&o!=null&&p(n,["uses"],o);const a=c(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&p(n,["bidiGenerateContentSetup"],tL(t,a));const l=c(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&p(n,["fieldMask"],l),r}function J3(t,e){const n={},r=c(e,["config"]);return r!=null&&p(n,["config"],K3(t,r,n)),n}function Y3(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Q3(t){const e={},n=c(t,["id"]);n!=null&&p(e,["id"],n);const r=c(t,["args"]);r!=null&&p(e,["args"],r);const i=c(t,["name"]);if(i!=null&&p(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function X3(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function Z3(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function eL(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","responseModalities"],i);const s=c(t,["temperature"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const d=c(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const g=c(t,["speechConfig"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","speechConfig"],_m(g));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","thinkingConfig"],m);const y=c(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],y);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&p(e,["setup","systemInstruction"],W3(on(x)));const _=c(t,["tools"]);if(e!==void 0&&_!=null){let O=yo(_);Array.isArray(O)&&(O=O.map(A=>iL(go(A)))),p(e,["setup","tools"],O)}const T=c(t,["sessionResumption"]);e!==void 0&&T!=null&&p(e,["setup","sessionResumption"],rL(T));const v=c(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&p(e,["setup","inputAudioTranscription"],v);const E=c(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&p(e,["setup","outputAudioTranscription"],E);const S=c(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&p(e,["setup","realtimeInputConfig"],S);const P=c(t,["contextWindowCompression"]);e!==void 0&&P!=null&&p(e,["setup","contextWindowCompression"],P);const V=c(t,["proactivity"]);if(e!==void 0&&V!=null&&p(e,["setup","proactivity"],V),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function tL(t,e){const n={},r=c(e,["model"]);r!=null&&p(n,["setup","model"],Je(t,r));const i=c(e,["config"]);return i!=null&&p(n,["config"],eL(i,n)),n}function nL(t){const e={},n=c(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const s=c(t,["fileData"]);s!=null&&p(e,["fileData"],Y3(s));const o=c(t,["functionCall"]);o!=null&&p(e,["functionCall"],Q3(o));const a=c(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&p(e,["inlineData"],$3(l));const u=c(t,["text"]);u!=null&&p(e,["text"],u);const d=c(t,["thought"]);d!=null&&p(e,["thought"],d);const g=c(t,["thoughtSignature"]);g!=null&&p(e,["thoughtSignature"],g);const m=c(t,["videoMetadata"]);return m!=null&&p(e,["videoMetadata"],m),e}function rL(t){const e={},n=c(t,["handle"]);if(n!=null&&p(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function iL(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(g=>g)),p(e,["functionDeclarations"],d)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&p(e,["computerUse"],i);const s=c(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const o=c(t,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],X3(a));const l=c(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],Z3(l));const u=c(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sL(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function oL(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=sL(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(u=>o.includes(u)?`generationConfig.${u}`:u));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class aL extends Or{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=J3(this.apiClient,e);s=_e("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=oL(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lL(t,e){const n={},r=c(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function uL(t){const e={},n=c(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=c(t,["config"]);return r!=null&&lL(r,e),e}function cL(t){const e={},n=c(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function dL(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function hL(t){const e={},n=c(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const r=c(t,["config"]);return r!=null&&dL(r,e),e}function fL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=c(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),p(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pL extends Or{constructor(e){super(),this.apiClient=e,this.list=async n=>new us(Ur.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=cL(e);return s=_e("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=uL(e);i=_e("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hL(e);return s=_e("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=fL(l),d=new WP;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mL extends Or{constructor(e,n=new pL(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new us(Ur.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=s3(e);return s=_e("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=l3(e);return s=_e("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=a3(e);i=_e("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=p3(e);return s=_e("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=m3(l),d=new KP;return Object.assign(d,u),d})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=g3(e);return s=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=y3(l),d=new JP;return Object.assign(d,u),d})}}async importFile(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=d3(e);return s=_e("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=c3(l),d=new pm;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let r1=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return r1=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const gL=()=>r1();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vf(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const _f=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kn extends Error{}class pn extends Kn{constructor(e,n,r,i){super(`${pn.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new $c({message:r,cause:_f(n)});const s=n;return e===400?new s1(e,s,r,i):e===401?new o1(e,s,r,i):e===403?new a1(e,s,r,i):e===404?new l1(e,s,r,i):e===409?new u1(e,s,r,i):e===422?new c1(e,s,r,i):e===429?new d1(e,s,r,i):e>=500?new h1(e,s,r,i):new pn(e,s,r,i)}}class wf extends pn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class $c extends pn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class i1 extends $c{constructor({message:e}={}){super({message:e??"Request timed out."})}}class s1 extends pn{}class o1 extends pn{}class a1 extends pn{}class l1 extends pn{}class u1 extends pn{}class c1 extends pn{}class d1 extends pn{}class h1 extends pn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yL=/^[a-z][a-z0-9+.-]*:/i,vL=t=>yL.test(t);let xf=t=>(xf=Array.isArray,xf(t));const _L=xf;let wL=_L;const Ov=wL;function xL(t){if(!t)return!0;for(const e in t)return!1;return!0}function EL(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const TL=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Kn(`${t} must be an integer`);if(e<0)throw new Kn(`${t} must be a positive integer`);return e},SL=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IL=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xs="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CL(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const kL=()=>{var t,e,n,r,i;const s=CL();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":xs,"X-Stainless-OS":zv(Deno.build.os),"X-Stainless-Arch":jv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":xs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":xs,"X-Stainless-OS":zv((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":jv((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const o=AL();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":xs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":xs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function AL(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const jv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",zv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Fl;const bL=()=>Fl??(Fl=kL());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RL(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function f1(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function NL(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return f1({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function p1(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function PL(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ML=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m1=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Hd(t,e,n){return m1(),new File(t,e??"unknown_file",n)}function DL(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const LL=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g1=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",VL=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&g1(t),FL=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function UL(t,e,n){if(m1(),t=await t,VL(t))return t instanceof File?t:Hd([await t.arrayBuffer()],t.name);if(FL(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Hd(await Ef(i),e,n)}const r=await Ef(t);if(e||(e=DL(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return Hd(r,e,n)}async function Ef(t){var e,n,r,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(g1(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(LL(t))try{for(var a=!0,l=ir(t),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const d=i;o.push(...await Ef(d))}}catch(d){n={error:d}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const d=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${BL(t)}`)}return o}function BL(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y1{constructor(e){this._client=e}}y1._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v1(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Gv=Object.freeze(Object.create(null)),OL=(t=v1)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((d,g,m)=>{var y,x,_;/[?#]/.test(g)&&(i=!0);const T=r[m];let v=(i?encodeURIComponent:t)(""+T);return m!==r.length&&(T==null||typeof T=="object"&&T.toString===((_=Object.getPrototypeOf((x=Object.getPrototypeOf((y=T.hasOwnProperty)!==null&&y!==void 0?y:Gv))!==null&&x!==void 0?x:Gv))===null||_===void 0?void 0:_.toString))&&(v=T+"",s.push({start:d.length+g.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(T).slice(8,-1)} is not a valid path parameter`})),d+g+(m===r.length?"":v)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((d,g)=>d.start-g.start),s.length>0){let d=0;const g=s.reduce((m,y)=>{const x=" ".repeat(y.start-d),_="^".repeat(y.length);return d=y.start+y.length,m+x+_},"");throw new Kn(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${g}`)}return o},Ul=OL(v1);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _1 extends y1{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,s=Zu(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new Kn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new Kn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ul`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Ul`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Ul`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const s=n??{},{api_version:o=this._client.apiVersion}=s,a=Zu(s,["api_version"]);return this._client.get(Ul`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}_1._key=Object.freeze(["interactions"]);class w1 extends _1{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jL(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let Bl;function xm(t){let e;return(Bl??(e=new globalThis.TextEncoder,Bl=e.encode.bind(e)))(t)}let Ol;function Hv(t){let e;return(Ol??(e=new globalThis.TextDecoder,Ol=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xm(e):e;this.buffer=jL([this.buffer,n]);const r=[];let i;for(;(i=zL(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(Hv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=Hv(this.buffer.subarray(0,s));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Wc.NEWLINE_CHARS=new Set([`
`,"\r"]);Wc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function zL(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function GL(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ec={off:0,error:200,warn:300,info:400,debug:500},qv=(t,e,n)=>{if(t){if(EL(ec,t))return t;cn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ec))}`)}};function Jo(){}function jl(t,e,n){return!e||ec[t]>ec[n]?Jo:e[t].bind(e)}const HL={error:Jo,warn:Jo,info:Jo,debug:Jo};let $v=new WeakMap;function cn(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return HL;const i=$v.get(n);if(i&&i[0]===r)return i[1];const s={error:jl("error",n,r),warn:jl("warn",n,r),info:jl("info",n,r),debug:jl("debug",n,r)};return $v.set(n,[r,s]),s}const Oi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ls{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const s=r?cn(r):console;function o(){return rr(this,arguments,function*(){var l,u,d,g;if(i)throw new Kn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var y=!0,x=ir(qL(e,n)),_;_=yield Ne(x.next()),l=_.done,!l;y=!0){g=_.value,y=!1;const T=g;if(!m)if(T.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield Ne(JSON.parse(T.data))}catch(v){throw s.error("Could not parse message into JSON:",T.data),s.error("From chunk:",T.raw),v}}}catch(T){u={error:T}}finally{try{!y&&!l&&(d=x.return)&&(yield Ne(d.call(x)))}finally{if(u)throw u.error}}m=!0}catch(T){if(vf(T))return yield Ne(void 0);throw T}finally{m||n.abort()}})}return new Ls(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function s(){return rr(this,arguments,function*(){var l,u,d,g;const m=new Wc,y=p1(e);try{for(var x=!0,_=ir(y),T;T=yield Ne(_.next()),l=T.done,!l;x=!0){g=T.value,x=!1;const v=g;for(const E of m.decode(v))yield yield Ne(E)}}catch(v){u={error:v}}finally{try{!x&&!l&&(d=_.return)&&(yield Ne(d.call(_)))}finally{if(u)throw u.error}}for(const v of m.flush())yield yield Ne(v)})}function o(){return rr(this,arguments,function*(){var l,u,d,g;if(i)throw new Kn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var y=!0,x=ir(s()),_;_=yield Ne(x.next()),l=_.done,!l;y=!0){g=_.value,y=!1;const T=g;m||T&&(yield yield Ne(JSON.parse(T)))}}catch(T){u={error:T}}finally{try{!y&&!l&&(d=x.return)&&(yield Ne(d.call(x)))}finally{if(u)throw u.error}}m=!0}catch(T){if(vf(T))return yield Ne(void 0);throw T}finally{m||n.abort()}})}return new Ls(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new Ls(()=>i(e),this.controller,this.client),new Ls(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return f1({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=xm(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function qL(t,e){return rr(this,arguments,function*(){var r,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Kn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Kn("Attempted to iterate over a response with no body");const a=new WL,l=new Wc,u=p1(t.body);try{for(var d=!0,g=ir($L(u)),m;m=yield Ne(g.next()),r=m.done,!r;d=!0){o=m.value,d=!1;const y=o;for(const x of l.decode(y)){const _=a.decode(x);_&&(yield yield Ne(_))}}}catch(y){i={error:y}}finally{try{!d&&!r&&(s=g.return)&&(yield Ne(s.call(g)))}finally{if(i)throw i.error}}for(const y of l.flush()){const x=a.decode(y);x&&(yield yield Ne(x))}})}function $L(t){return rr(this,arguments,function*(){var n,r,i,s;let o=new Uint8Array;try{for(var a=!0,l=ir(t),u;u=yield Ne(l.next()),n=u.done,!n;a=!0){s=u.value,a=!1;const d=s;if(d==null)continue;const g=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?xm(d):d;let m=new Uint8Array(o.length+g.length);m.set(o),m.set(g,o.length),o=m;let y;for(;(y=GL(o))!==-1;)yield yield Ne(o.slice(0,y)),o=o.slice(y)}}catch(d){r={error:d}}finally{try{!a&&!n&&(i=l.return)&&(yield Ne(i.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield Ne(o))})}class WL{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=KL(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function KL(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function JL(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return cn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ls.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return cn(t).debug(`[${r}] response parsed`,Oi({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Em extends Promise{constructor(e,n,r=JL){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Em(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x1=Symbol("brand.privateNullableHeaders");function*YL(t){if(!t)return;if(x1 in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Ov(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=Ov(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const Oo=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of YL(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[x1]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qd=t=>{var e,n,r,i,s,o;if(typeof globalThis.process<"u")return(r=(n=(e=EP)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var E1;class Kc{constructor(e){var n,r,i,s,o,a,l,{baseURL:u=qd("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=qd("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:g="v1beta"}=e,m=Zu(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:d,apiVersion:g},m),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(r=y.timeout)!==null&&r!==void 0?r:Kc.DEFAULT_TIMEOUT,this.logger=(i=y.logger)!==null&&i!==void 0?i:console;const x="warn";this.logLevel=x,this.logLevel=(o=(s=qv(y.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:qv(qd("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:x,this.fetchOptions=y.fetchOptions,this.maxRetries=(a=y.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=y.fetch)!==null&&l!==void 0?l:RL(),this.encoder=ML,this._options=y,this.apiKey=d,this.apiVersion=g,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Oo([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Oo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Oo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Kn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${xs}`}defaultIdempotencyKey(){return`stainless-node-retry-${gL()}`}makeStatusError(e,n,r,i){return pn.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,s=vL(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return xL(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new Em(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,s,o;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:u,url:d,timeout:g}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(u,{url:d,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=r===void 0?"":`, retryOf: ${r}`,x=Date.now();if(cn(this).debug(`[${m}] sending request`,Oi({retryOfRequestLogID:r,method:a.method,url:d,options:a,headers:u.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new wf;const _=new AbortController,T=await this.fetchWithTimeout(d,u,g,_).catch(_f),v=Date.now();if(T instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new wf;const P=vf(T)||/timed? ?out/i.test(String(T)+("cause"in T?String(T.cause):""));if(n)return cn(this).info(`[${m}] connection ${P?"timed out":"failed"} - ${S}`),cn(this).debug(`[${m}] connection ${P?"timed out":"failed"} (${S})`,Oi({retryOfRequestLogID:r,url:d,durationMs:v-x,message:T.message})),this.retryRequest(a,n,r??m);throw cn(this).info(`[${m}] connection ${P?"timed out":"failed"} - error; no more retries left`),cn(this).debug(`[${m}] connection ${P?"timed out":"failed"} (error; no more retries left)`,Oi({retryOfRequestLogID:r,url:d,durationMs:v-x,message:T.message})),P?new i1:new $c({cause:T})}const E=`[${m}${y}] ${u.method} ${d} ${T.ok?"succeeded":"failed"} with status ${T.status} in ${v-x}ms`;if(!T.ok){const S=await this.shouldRetry(T);if(n&&S){const k=`retrying, ${n} attempts remaining`;return await PL(T.body),cn(this).info(`${E} - ${k}`),cn(this).debug(`[${m}] response error (${k})`,Oi({retryOfRequestLogID:r,url:T.url,status:T.status,headers:T.headers,durationMs:v-x})),this.retryRequest(a,n,r??m,T.headers)}const P=S?"error; no more retries left":"error; not retryable";cn(this).info(`${E} - ${P}`);const V=await T.text().catch(k=>_f(k).message),O=SL(V),A=O?void 0:V;throw cn(this).debug(`[${m}] response error (${P})`,Oi({retryOfRequestLogID:r,url:T.url,status:T.status,headers:T.headers,message:A,durationMs:Date.now()-x})),this.makeStatusError(T.status,O,A,T.headers)}return cn(this).info(E),cn(this).debug(`[${m}] response start`,Oi({retryOfRequestLogID:r,url:T.url,status:T.status,headers:T.headers,durationMs:v-x})),{response:T,options:a,controller:_,requestLogID:m,retryOfRequestLogID:r,startTime:x}}async fetchWithTimeout(e,n,r,i){const s=n||{},{signal:o,method:a}=s,l=Zu(s,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),r),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,g=Object.assign(Object.assign(Object.assign({signal:i.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(g.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,g)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var s;let o;const a=i==null?void 0:i.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(o=u)}const l=i==null?void 0:i.get("retry-after");if(l&&!o){const u=parseFloat(l);Number.isNaN(u)?o=Date.parse(l)-Date.now():o=u*1e3}if(!(o&&0<=o&&o<60*1e3)){const u=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,u)}return await IL(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,s;const o=Object.assign({},e),{method:a,path:l,query:u,defaultBaseURL:d}=o,g=this.buildURL(l,u,d);"timeout"in o&&TL("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:m,body:y}=this.buildBody({options:o}),x=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:x},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:g,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=Oo([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),bL()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Oo([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:NL(e)}:this.encoder({body:e,headers:r})}}Kc.DEFAULT_TIMEOUT=6e4;class Lt extends Kc{constructor(){super(...arguments),this.interactions=new w1(this)}}E1=Lt;Lt.GeminiNextGenAPIClient=E1;Lt.GeminiNextGenAPIClientError=Kn;Lt.APIError=pn;Lt.APIConnectionError=$c;Lt.APIConnectionTimeoutError=i1;Lt.APIUserAbortError=wf;Lt.NotFoundError=l1;Lt.ConflictError=u1;Lt.RateLimitError=d1;Lt.BadRequestError=s1;Lt.AuthenticationError=o1;Lt.InternalServerError=h1;Lt.PermissionDeniedError=a1;Lt.UnprocessableEntityError=c1;Lt.toFile=UL;Lt.Interactions=w1;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QL(t,e){const n={},r=c(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function XL(t,e){const n={},r=c(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function ZL(t,e){const n={},r=c(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function eV(t,e){const n={},r=c(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function tV(t,e,n){const r={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=c(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&p(e,["displayName"],i),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=c(t,["epochCount"]);e!==void 0&&s!=null&&p(e,["tuningTask","hyperparameters","epochCount"],s);const o=c(t,["learningRateMultiplier"]);if(o!=null&&p(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=c(t,["batchSize"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","batchSize"],a);const l=c(t,["learningRate"]);if(e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","learningRate"],l),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function nV(t,e,n){const r={};let i=c(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const y=c(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec"],Wv(y))}else if(i==="PREFERENCE_TUNING"){const y=c(t,["validationDataset"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec"],Wv(y))}const s=c(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&p(e,["tunedModelDisplayName"],s);const o=c(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);let a=c(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const y=c(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(a==="PREFERENCE_TUNING"){const y=c(t,["epochCount"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let l=c(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const y=c(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(l==="PREFERENCE_TUNING"){const y=c(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const y=c(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(u==="PREFERENCE_TUNING"){const y=c(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let d=c(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=c(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(d==="PREFERENCE_TUNING"){const y=c(t,["adapterSize"]);e!==void 0&&y!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const g=c(t,["labels"]);e!==void 0&&g!=null&&p(e,["labels"],g);const m=c(t,["beta"]);return e!==void 0&&m!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function rV(t,e){const n={},r=c(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const i=c(t,["preTunedModel"]);i!=null&&p(n,["preTunedModel"],i);const s=c(t,["trainingDataset"]);s!=null&&pV(s);const o=c(t,["config"]);return o!=null&&tV(o,n),n}function iV(t,e){const n={},r=c(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const i=c(t,["preTunedModel"]);i!=null&&p(n,["preTunedModel"],i);const s=c(t,["trainingDataset"]);s!=null&&mV(s,n,e);const o=c(t,["config"]);return o!=null&&nV(o,n,e),n}function sV(t,e){const n={},r=c(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function oV(t,e){const n={},r=c(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function aV(t,e,n){const r={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=c(t,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const o=c(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function lV(t,e,n){const r={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=c(t,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const o=c(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),r}function uV(t,e){const n={},r=c(t,["config"]);return r!=null&&aV(r,n),n}function cV(t,e){const n={},r=c(t,["config"]);return r!=null&&lV(r,n),n}function dV(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=c(t,["nextPageToken"]);i!=null&&p(n,["nextPageToken"],i);const s=c(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>T1(a))),p(n,["tuningJobs"],o)}return n}function hV(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=c(t,["nextPageToken"]);i!=null&&p(n,["nextPageToken"],i);const s=c(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Tf(a))),p(n,["tuningJobs"],o)}return n}function fV(t,e){const n={},r=c(t,["name"]);r!=null&&p(n,["model"],r);const i=c(t,["name"]);return i!=null&&p(n,["endpoint"],i),n}function pV(t,e){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=c(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),p(n,["examples","examples"],i)}return n}function mV(t,e,n){const r={};let i=c(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=c(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=c(t,["gcsUri"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let s=c(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=c(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=c(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function T1(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=c(t,["name"]);i!=null&&p(n,["name"],i);const s=c(t,["state"]);s!=null&&p(n,["state"],BT(s));const o=c(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=c(t,["tuningTask","startTime"]);a!=null&&p(n,["startTime"],a);const l=c(t,["tuningTask","completeTime"]);l!=null&&p(n,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&p(n,["updateTime"],u);const d=c(t,["description"]);d!=null&&p(n,["description"],d);const g=c(t,["baseModel"]);g!=null&&p(n,["baseModel"],g);const m=c(t,["_self"]);return m!=null&&p(n,["tunedModel"],fV(m)),n}function Tf(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=c(t,["name"]);i!=null&&p(n,["name"],i);const s=c(t,["state"]);s!=null&&p(n,["state"],BT(s));const o=c(t,["createTime"]);o!=null&&p(n,["createTime"],o);const a=c(t,["startTime"]);a!=null&&p(n,["startTime"],a);const l=c(t,["endTime"]);l!=null&&p(n,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&p(n,["updateTime"],u);const d=c(t,["error"]);d!=null&&p(n,["error"],d);const g=c(t,["description"]);g!=null&&p(n,["description"],g);const m=c(t,["baseModel"]);m!=null&&p(n,["baseModel"],m);const y=c(t,["tunedModel"]);y!=null&&p(n,["tunedModel"],y);const x=c(t,["preTunedModel"]);x!=null&&p(n,["preTunedModel"],x);const _=c(t,["supervisedTuningSpec"]);_!=null&&p(n,["supervisedTuningSpec"],_);const T=c(t,["preferenceOptimizationSpec"]);T!=null&&p(n,["preferenceOptimizationSpec"],T);const v=c(t,["tuningDataStats"]);v!=null&&p(n,["tuningDataStats"],v);const E=c(t,["encryptionSpec"]);E!=null&&p(n,["encryptionSpec"],E);const S=c(t,["partnerModelTuningSpec"]);S!=null&&p(n,["partnerModelTuningSpec"],S);const P=c(t,["customBaseModel"]);P!=null&&p(n,["customBaseModel"],P);const V=c(t,["experiment"]);V!=null&&p(n,["experiment"],V);const O=c(t,["labels"]);O!=null&&p(n,["labels"],O);const A=c(t,["outputUri"]);A!=null&&p(n,["outputUri"],A);const R=c(t,["pipelineJob"]);R!=null&&p(n,["pipelineJob"],R);const k=c(t,["serviceAccount"]);k!=null&&p(n,["serviceAccount"],k);const D=c(t,["tunedModelDisplayName"]);D!=null&&p(n,["tunedModelDisplayName"],D);const F=c(t,["veoTuningSpec"]);return F!=null&&p(n,["veoTuningSpec"],F),n}function gV(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=c(t,["name"]);i!=null&&p(n,["name"],i);const s=c(t,["metadata"]);s!=null&&p(n,["metadata"],s);const o=c(t,["done"]);o!=null&&p(n,["done"],o);const a=c(t,["error"]);return a!=null&&p(n,["error"],a),n}function Wv(t,e){const n={},r=c(t,["gcsUri"]);r!=null&&p(n,["validationDatasetUri"],r);const i=c(t,["vertexDatasetResource"]);return i!=null&&p(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yV extends Or{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new us(Ur.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:df.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=oV(e);return a=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>Tf(d))}else{const u=sV(e);return a=_e("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>T1(d))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=cV(e);return a=_e("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=hV(d),m=new _v;return Object.assign(m,g),m})}else{const u=uV(e);return a=_e("tunedModels",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=dV(d),m=new _v;return Object.assign(m,g),m})}}async cancel(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=XL(e);return a=_e("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=eV(d),m=new wv;return Object.assign(m,g),m})}else{const u=QL(e);return a=_e("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(g=>{const m=g;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const g=ZL(d),m=new wv;return Object.assign(m,g),m})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=iV(e,e);return s=_e("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>Tf(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=rV(e);return s=_e("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>gV(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vV{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const _V=1024*1024*8,wV=3,xV=1e3,EV=2,tc="x-goog-upload-status";async function TV(t,e,n){var r;const i=await S1(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[tc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function SV(t,e,n){var r;const i=await S1(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[tc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=MT(s),a=new mm;return Object.assign(a,o),a}async function S1(t,e,n){var r,i;let s=0,o=0,a=new hf(new Response),l="upload";for(s=t.size;o<s;){const u=Math.min(_V,s-o),d=t.slice(o,o+u);o+u>=s&&(l+=", finalize");let g=0,m=xV;for(;g<wV&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(u)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[tc]));)g++,await CV(m),m=m*EV;if(o+=u,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[tc])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function IV(t){return{size:t.size,type:t.type}}function CV(t){return new Promise(e=>setTimeout(e,t))}class kV{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TV(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await SV(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IV(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AV{create(e,n,r){return new bV(e,n,r)}}class bV{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kv="x-goog-api-key";class RV{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Kv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Kv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NV="gl-node/";class I1{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Lt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=CP(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new RV(this.apiKey);this.apiClient=new I3({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:NV+"web",uploader:new kV,downloader:new vV}),this.models=new H3(this.apiClient),this.live=new U3(this.apiClient,i,new AV),this.batches=new tD(this.apiClient),this.chats=new VD(this.models,this.apiClient),this.caches=new MD(this.apiClient),this.files=new $D(this.apiClient),this.operations=new q3(this.apiClient),this.authTokens=new aL(this.apiClient),this.tunings=new yV(this.apiClient),this.fileSearchStores=new mL(this.apiClient)}}const Jv=async(t,e="id")=>{var n,r,i;try{const s=`https://${e}.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(t)}&format=json&origin=*&srlimit=1`,a=await(await fetch(s)).json();if(!((r=(n=a.query)==null?void 0:n.search)!=null&&r.length))return e==="id"?"Tidak ditemukan informasi di Wikipedia.":"No information found on Wikipedia.";const l=a.query.search[0].title,u=`https://${e}.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&explaintext&titles=${encodeURIComponent(l)}&format=json&origin=*`,m=(i=(await(await fetch(u)).json()).query)==null?void 0:i.pages;if(!m)return"Wikipedia Error.";const y=Object.keys(m)[0],x=m[y].extract;return x?x.substring(0,1e3)+"...":e==="id"?"Halaman ditemukan tapi kosong.":"Page found but empty."}catch(s){return console.error("Wikipedia API Error",s),e==="id"?"Gagal menghubungi Wikipedia.":"Failed to contact Wikipedia."}},PV=async(t,e,n)=>{try{if(!e||!n)throw new Error("Missing Google Search API credentials");const r=`https://www.googleapis.com/customsearch/v1?key=${e}&cx=${n}&q=${encodeURIComponent(t)}&num=3`,i=await fetch(r),s=await i.json();if(!i.ok)return console.error("Google Search API Error",s),"";if(!s.items||s.items.length===0)return"No results found on Google.";let o=`Google Search Results:

`;return s.items.forEach((a,l)=>{o+=`${l+1}. ${a.title}
   Snippet: ${a.snippet}

`}),o}catch(r){return console.error("Google Search Service Error",r),""}},MV=async t=>{try{const e=`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(t)}&count=1&language=en&format=json`,r=await(await fetch(e)).json();return r.results&&r.results.length>0?r.results[0]:null}catch(e){return console.error("Geocoding Error:",e),null}},DV=async t=>{try{const e=await MV(t);if(!e)return`Maaf, tidak dapat menemukan lokasi kota "${t}". Pastikan ejaan benar.`;const n=`https://api.open-meteo.com/v1/forecast?latitude=${e.latitude}&longitude=${e.longitude}&current=temperature_2m,relative_humidity_2m,apparent_temperature,precipitation,rain,showers,snowfall,weather_code,cloud_cover,wind_speed_10m&timezone=auto`,i=await(await fetch(n)).json();if(!i.current)return"Data cuaca tidak tersedia saat ini.";const s=i.current,o=i.current_units;let a="Cerah/Berawan";const l=s.weather_code;return l===0?a="Cerah (Clear Sky)":l<=3?a="Berawan (Cloudy)":l<=48?a="Berkabut (Foggy)":l<=55?a="Gerimis (Drizzle)":l<=65?a="Hujan (Rain)":l<=77?a="Salju (Snow)":l>=95&&(a="Badai Petir (Thunderstorm)"),`
Laporan Cuaca untuk ${e.name}, ${e.country}:
- Kondisi: ${a}
- Suhu: ${s.temperature_2m}${o.temperature_2m} (Terasa seperti ${s.apparent_temperature}${o.temperature_2m})
- Kelembapan: ${s.relative_humidity_2m}${o.relative_humidity_2m}
- Angin: ${s.wind_speed_10m}${o.wind_speed_10m}
- Awan: ${s.cloud_cover}${o.cloud_cover}
        `.trim()}catch(e){return console.error("Weather API Error:",e),"Gagal mengambil data cuaca dari Open-Meteo."}},LV=async t=>{try{const e=`https://restcountries.com/v3.1/name/${encodeURIComponent(t)}`,n=await fetch(e);if(!n.ok)return`Data negara "${t}" tidak ditemukan.`;const i=(await n.json())[0],s=i.currencies?Object.values(i.currencies).map(a=>`${a.name} (${a.symbol})`).join(", "):"-",o=i.languages?Object.values(i.languages).join(", "):"-";return`
Fakta Negara ${i.name.common} (${i.name.official}):
- Ibukota: ${i.capital?i.capital[0]:"-"}
- Wilayah: ${i.region}, ${i.subregion}
- Populasi: ${i.population.toLocaleString()} jiwa
- Mata Uang: ${s}
- Bahasa: ${o}
- Zona Waktu: ${i.timezones?i.timezones[0]:"-"}
- Bendera: ${i.flag}
- Sisi Mengemudi: ${i.car?i.car.side:"-"}
        `.trim()}catch(e){return console.error("Country API Error:",e),"Gagal mengambil data negara."}},VV=(t,e)=>{const n=t/e;return[{label:"1:1",value:1},{label:"3:4",value:.75},{label:"4:3",value:1.33},{label:"9:16",value:.5625},{label:"16:9",value:1.7778}].reduce((s,o)=>Math.abs(o.value-n)<Math.abs(s.value-n)?o:s).label},FV=(t,e,n,r)=>{const i=VV(e,n);switch(t){case hn.BACKGROUND_REMOVER:return{model:"gemini-2.5-flash-image",prompt:"Edit this image. Your task is to keep the foreground subject EXACTLY as it is. Do not alter the subject's face, body, clothing, lighting, or resolution. Do not 'redraw' or 'regenerate' the subject. Simply COPY the main subject and place it against a solid bright Green background (Hex Code #00FF00). If the subject is cropped in the original, keep it cropped. Do not add new details.",config:{imageConfig:{aspectRatio:i}}};case hn.HD_UPSCALE:return{model:"gemini-3-pro-image-preview",prompt:"Upscale this image to high definition (4K quality). Sharpen all details and improve lighting. IMPORTANT: Keep the image composition, colors, and BACKGROUND exactly the same as the original. Do not remove the background. Do not change the subject's identity.",config:{imageConfig:{aspectRatio:i,imageSize:"4K"}}};case hn.CREATIVE_REMIX:return{model:"gemini-2.5-flash-image",prompt:r||"Make a creative cyberpunk variation of this image.",config:{imageConfig:{aspectRatio:i}}};case hn.COLORIZE:return{model:"gemini-2.5-flash-image",prompt:"Colorize this black and white image realistically. Keep the subject and background details exactly the same, just add natural colors. Do not change the content.",config:{imageConfig:{aspectRatio:i}}};case hn.SKETCH_TO_REAL:return{model:"gemini-2.5-flash-image",prompt:"Turn this sketch or drawing into a photorealistic image. Keep the composition and subject exactly as drawn, but make it look like a high-quality photograph.",config:{imageConfig:{aspectRatio:i}}};default:throw new Error("Unknown tool type")}},UV=async t=>{const{tool:e,image:n,prompt:r,apiKeys:i}=t,s=FV(e,n.width,n.height,r);let o=[...i||[]];o.push("PLACEHOLDER_API_KEY"),o=Array.from(new Set(o.filter(u=>!!u)));let a=!1,l=null;for(let u=0;u<o.length;u++){const d=o[u];try{const m=await new I1({apiKey:d}).models.generateContent({model:s.model,contents:{parts:[{inlineData:{mimeType:n.mimeType,data:n.data}},{text:s.prompt}]},config:s.config});if(m.candidates&&m.candidates[0].content.parts){for(const y of m.candidates[0].content.parts)if(y.inlineData&&y.inlineData.data)return y.inlineData.data}throw new Error("No image data returned from Gemini.")}catch(g){console.warn(`Key ending in ...${d.slice(-4)} failed.`),l=g;const m=(g.message||"").toLowerCase(),y=JSON.stringify(g).toLowerCase(),x=m.includes("429")||m.includes("quota")||m.includes("exhausted")||m.includes("503"),_=m.includes("fetch")||m.includes("xhr")||m.includes("network")||m.includes("rpc")||m.includes("500")||y.includes("xhr")||y.includes("rpc");if(u===o.length-1&&(x||_)&&!a){console.log("Personal & System keys exhausted. Fetching Community Keys...");try{const T=await NT();if(T.length>0){const v=T.filter(E=>!o.includes(E));o.push(...v),a=!0;continue}}catch{console.error("Failed to fetch community keys")}}if(!x&&!_)break}}throw l||new Error("All API keys (Personal, System, and Community) failed.")},BV={name:"searchWikipedia",description:"Search Wikipedia for facts, history, people, places, definitions, or concepts. PRIMARY SOURCE after Database.",parameters:{type:sn.OBJECT,properties:{query:{type:sn.STRING,description:"The search keywords."}},required:["query"]}},OV={name:"searchWeather",description:"Get REAL-TIME weather data for a specific city. Use this when asked about 'weather', 'temperature', 'rain', or 'climate' in a specific location.",parameters:{type:sn.OBJECT,properties:{city:{type:sn.STRING,description:"The name of the city to get weather for (e.g., Jakarta, Bandung, New York)."}},required:["city"]}},jV={name:"searchCountryFact",description:"Get detailed facts about a country (Capital, Population, Currency, Flag, Region). Use when asked about specific country details.",parameters:{type:sn.OBJECT,properties:{country_name:{type:sn.STRING,description:"The name of the country (e.g., Indonesia, Japan, Brazil)."}},required:["country_name"]}},zV={name:"searchGoogle",description:"Search Google using Custom Search API. LAST RESORT source. Use ONLY if Wiki/Weather/Country is missing or for cross-website info/references/news.",parameters:{type:sn.OBJECT,properties:{query:{type:sn.STRING,description:"The search keywords."}},required:["query"]}},zl=async(t,e)=>{if(!e)return t;const n=t.split(/(\s+)/);let r="";for(const i of n)r+=i,e(r),await new Promise(s=>setTimeout(s,Math.random()*20+10));return t},GV=t=>{const r=t==="id"?["Berdasarkan ingatan gue, ","Kalau gak salah sih, ","Dari data yang pernah lo kasih, ","Seinget gue, ","Oh itu, setau gue, "]:["If I recall correctly, ","Based on my memory, ","From what you told me before, ","I remember this, ","Oh right, "];return r[Math.floor(Math.random()*r.length)]},HV=async(t,e,n=[],r="id",i=[],s,o=!1,a=!1,l,u)=>{var V,O,A,R,k,D,F,N,M;if(t.trim().length>0){const b=await PT(t);if(b){const J=GV(r),pe=b.startsWith(J)?b:J+b.charAt(0).toLowerCase()+b.slice(1);return{text:await zl(pe,s),source:"knowledge_base"}}}if(o){if(a){const pe=await Jv(t,r);return{text:await zl(pe,s),source:"wikipedia"}}return{text:await zl(r==="id"?"Maaf, informasi ini belum ada di database saya. Coba aktifkan 'Wikipedia' atau 'Google Search' di pengaturan.":"Sorry, this info is not in my database. Try enabling 'Wikipedia' or 'Google Search' in settings.",s),source:"knowledge_base"}}let d=[...e||[]];d.push("PLACEHOLDER_API_KEY"),d=Array.from(new Set(d.filter(b=>!!b)));let g=!1;const m=n.slice(-10).map(b=>({role:b.role,parts:[{text:b.text}]})),y=[];t?y.push({text:t}):i.length>0&&y.push({text:"Describe these images or answer based on them."}),i&&i.length>0&&i.forEach(b=>{y.push({inlineData:{mimeType:b.mimeType,data:b.data}})});let x=[...m,{role:"user",parts:y}];const _=!!(l!=null&&l.apiKey&&l.cx),T=[{functionDeclarations:[BV,OV,jV]}];_&&T[0].functionDeclarations.push(zV);const v=`
        Nama lo: Fanra.
        Pembuat: Irfan Rizki Aditri (biasa dipanggil Fanra Dev).
        Sifat: Cool, santai, & solutif. Gaya ngomong: lo-gue, normal, nggak kaku.

        DETAIL TENTANG IRFAN (PENCIPTA LO):
        - Status: Mahasiswa di Institut Teknologi Sumatera (ITERA).
        - Prodi: Fisika (BUKAN Informatika).
        - Role: Dia BUKAN developer profesional/ahli. Dia cuma cowok biasa yang hobi ngoding dan iseng bikin project ini.
        - Fisik: Cowok, tinggi sekitar 170-an cm.
        - Keluarga: Anak bungsu (terakhir) dari 3 bersaudara.
        
        ATURAN PRIVASI (PENTING):
        - JANGAN PERNAH JAWAB pertanyaan tentang: Agama, Suku, Alamat Lengkap, atau Status Hubungan (Pacaran/Single).
        - Jika ditanya hal di atas, jawab "Itu privasi, gue gak tau." atau alihkan pembicaraan.
        
        TONE & GAYA BICARA:
        - JANGAN LEBAY/SOMBONG.
        - Jangan bilang Irfan "ganteng", "jago", "expert", atau "jenius".
        - Bilang aja dia mahasiswa yang hobi ngulik teknologi di waktu luang.
        - Jawab pertanyaan dengan padat & jelas.
        
        FORMAT TEKS:
        - JANGAN GUNAKAN MARKDOWN (tanda bintang * atau **). Tulis teks biasa saja.
    `,E=`
        Your Name: Fanra.
        Creator: Irfan Rizki Aditri (Fanra Dev).
        
        DETAILS ABOUT CREATOR:
        - Status: Student at Institut Teknologi Sumatera (ITERA).
        - Major: Physics (NOT Informatics).
        - Role: NOT a professional developer. Just a guy with a coding hobby who built this for fun.
        - Facts: Male, ~170cm tall, youngest of 3 siblings.
        
        STRICT PRIVACY RULES:
        - DO NOT disclose: Religion, Ethnicity, Address, or Relationship Status. State that it is private.
        
        TONE:
        - Humble and casual.
        - DO NOT praise Irfan excessively (no "handsome", "genius", "expert"). Just say he is a hobbyist.
        
        FORMAT:
        - NO MARKDOWN (no asterisks). Plain text only.
    `;let S=null,P="gemini";for(let b=0;b<d.length;b++){const J=d[b];if(u!=null&&u.aborted)throw new Error("Request cancelled by user");try{const pe=new I1({apiKey:J}),ee="gemini-3-flash-preview",Z=await pe.models.generateContent({model:ee,contents:x,config:{systemInstruction:r==="id"?v:E,tools:T}});if(u!=null&&u.aborted)throw new Error("Request cancelled by user");const G=(k=(R=(A=(O=(V=Z.candidates)==null?void 0:V[0])==null?void 0:O.content)==null?void 0:A.parts)==null?void 0:R.filter(j=>j.functionCall))==null?void 0:k.map(j=>j.functionCall);if(G&&G.length>0){const j=G[0];if(Z.candidates&&Z.candidates[0].content&&x.push(Z.candidates[0].content),j&&j.name==="searchWikipedia"){const re=j.args.query,de=await Jv(re,r);P="wikipedia",x.push({role:"user",parts:[{functionResponse:{name:"searchWikipedia",response:{result:de}}}]})}else if(j&&j.name==="searchWeather"){const re=j.args.city,de=await DV(re);P="weather",x.push({role:"user",parts:[{functionResponse:{name:"searchWeather",response:{result:de}}}]})}else if(j&&j.name==="searchCountryFact"){const re=j.args.country_name,de=await LV(re);P="country_fact",x.push({role:"user",parts:[{functionResponse:{name:"searchCountryFact",response:{result:de}}}]})}else if(j&&j.name==="searchGoogle"&&_){const re=j.args.query,de=await PV(re,l.apiKey,l.cx);P="google_search",x.push({role:"user",parts:[{functionResponse:{name:"searchGoogle",response:{result:de}}}]})}}else{const j=(M=(N=(F=(D=Z.candidates)==null?void 0:D[0])==null?void 0:F.content)==null?void 0:N.parts)==null?void 0:M.find(de=>de.text),re=j?j.text:"";if(re)return await zl(re,s),{text:re,source:"gemini"}}if(u!=null&&u.aborted)throw new Error("Request cancelled by user");const ue=await pe.models.generateContentStream({model:ee,contents:x,config:{systemInstruction:r==="id"?v:E}});let H="";for await(const j of ue){if(u!=null&&u.aborted)break;const re=j.text;re&&(H+=re,s&&s(H))}return{text:H,source:P}}catch(pe){if(pe.message==="Request cancelled by user")throw pe;console.warn(`Key ending in ...${J.slice(-4)} failed.`),S=pe;const ee=(pe.message||"").toLowerCase(),Z=JSON.stringify(pe).toLowerCase(),G=ee.includes("429")||ee.includes("quota")||ee.includes("exhausted"),ue=ee.includes("fetch")||ee.includes("xhr")||ee.includes("network")||ee.includes("rpc")||ee.includes("500")||Z.includes("xhr")||Z.includes("rpc");if(b===d.length-1&&(G||ue)&&!g)try{const H=await NT();if(H.length>0){const j=H.filter(re=>!d.includes(re));d.push(...j),g=!0;continue}}catch{}if(!G&&!ue)break}}throw S||new Error("All chat keys failed.")},qV=t=>new Promise((e,n)=>{const r=new Image;r.src=`data:image/png;base64,${t}`,r.crossOrigin="Anonymous",r.onload=()=>{const i=document.createElement("canvas");i.width=r.width,i.height=r.height;const s=i.getContext("2d");if(!s){n(new Error("Could not get canvas context"));return}s.drawImage(r,0,0);const o=s.getImageData(0,0,i.width,i.height),a=o.data;for(let l=0;l<a.length;l+=4){const u=a[l],d=a[l+1],g=a[l+2],m=Math.max(u,g);let y=d-m;const x=10,_=60;if(y>x){const T=1-Math.max(0,Math.min(1,(y-x)/(_-x)));a[l+3]=Math.floor(255*T),d>m&&(a[l+1]=m)}}s.putImageData(o,0,0),e(i.toDataURL("image/png",1).split(",")[1])},r.onerror=i=>n(new Error("Failed to load image for processing"))}),$V=(t,e="image/png")=>{const n=t.replace(/[\n\r]/g,"").trim(),r=atob(n),i=new Array(r.length);for(let o=0;o<r.length;o++)i[o]=r.charCodeAt(o);const s=new Uint8Array(i);return new Blob([s],{type:e})},WV=async(t,e)=>{const n=new FormData,r=$V(t);n.append("image_file",r,"image.png"),n.append("size","auto");try{const i=await fetch("https://api.remove.bg/v1.0/removebg",{method:"POST",headers:{"X-Api-Key":e},body:n});if(!i.ok){let o="Failed to remove background via Remove.bg";try{const a=await i.json();a.errors&&a.errors[0]&&(o=a.errors[0].title)}catch{o=`Remove.bg Error: ${i.statusText}`}throw new Error(o)}const s=await i.blob();return new Promise((o,a)=>{const l=new FileReader;l.onloadend=()=>{const u=l.result;o(u.split(",")[1])},l.onerror=a,l.readAsDataURL(s)})}catch(i){throw console.error("Remove.bg Service Error:",i),i}};const KV=({onImageSelect:t,language:e})=>{const n=te.useRef(null),[r,i]=te.useState(!1),s=mo[e],o=g=>{if(!g.type.startsWith("image/")){alert(s.invalidImage);return}const m=new FileReader;m.onloadend=()=>{const y=m.result,x=new Image;x.onload=()=>{const _=document.createElement("canvas");_.width=x.width,_.height=x.height;const T=_.getContext("2d");if(!T)return;T.drawImage(x,0,0);const v="image/png",S=_.toDataURL(v).split(",")[1];t(S,v,x.width,x.height)},x.src=y},m.readAsDataURL(g)},a=g=>{var y;const m=(y=g.target.files)==null?void 0:y[0];m&&o(m)},l=g=>{g.preventDefault(),g.stopPropagation(),i(!0)},u=g=>{g.preventDefault(),g.stopPropagation(),i(!1)},d=g=>{var y;g.preventDefault(),g.stopPropagation(),i(!1);const m=(y=g.dataTransfer.files)==null?void 0:y[0];m&&o(m)};return h.jsxs("div",{className:`w-full max-w-xl mx-auto border-2 border-dashed rounded-2xl p-12 flex flex-col items-center justify-center text-center cursor-pointer transition-all duration-300 group bg-white ${r?"border-primary bg-slate-50 scale-[1.02] shadow-xl":"border-slate-300 hover:border-primary hover:bg-slate-50"}`,onClick:()=>{var g;return(g=n.current)==null?void 0:g.click()},onDragOver:l,onDragLeave:u,onDrop:d,children:[h.jsx("input",{type:"file",ref:n,onChange:a,className:"hidden",accept:"image/png, image/jpeg, image/webp"}),h.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 transition-transform duration-300 ${r?"scale-110 bg-white shadow-md":"bg-slate-50 group-hover:scale-110"}`,children:h.jsx(hx,{className:`w-6 h-6 ${r?"text-primary":"text-slate-400 group-hover:text-primary"}`})}),h.jsx("h3",{className:`text-lg font-bold mb-2 transition-colors ${r?"text-primary":"text-slate-700 group-hover:text-primary"}`,children:r?s.dropHere:s.uploadTitle}),h.jsx("p",{className:"text-slate-500 text-sm",children:s.uploadDesc})]})},Yv=[{label:"Transparent",value:null,hex:"transparent"},{label:"White",value:"#FFFFFF",hex:"#FFFFFF"},{label:"Black",value:"#000000",hex:"#000000"},{label:"Red",value:"#DB2828",hex:"#DB2828"},{label:"Blue",value:"#2185D0",hex:"#2185D0"},{label:"Green",value:"#21BA45",hex:"#21BA45"},{label:"Yellow",value:"#FBBD08",hex:"#FBBD08"}],JV=({originalImage:t,resultImageBase64:e,isProcessing:n,processingText:r,onReset:i,language:s})=>{const[o,a]=te.useState(50),[l,u]=te.useState(!1),[d,g]=te.useState(null),m=te.useRef(null),y=te.useRef(null),x=mo[s],_=()=>{if(!e)return;if(!d){const A=document.createElement("a");A.href=`data:image/png;base64,${e}`,A.download="pixelmagic-edited.png",document.body.appendChild(A),A.click(),document.body.removeChild(A);return}const P=document.createElement("canvas"),V=P.getContext("2d"),O=new Image;O.onload=()=>{if(P.width=O.width,P.height=O.height,V){V.fillStyle=d,V.fillRect(0,0,P.width,P.height),V.drawImage(O,0,0);const A=document.createElement("a");A.href=P.toDataURL("image/png"),A.download="pixelmagic-edited-bg.png",document.body.appendChild(A),A.click(),document.body.removeChild(A)}},O.src=`data:image/png;base64,${e}`},T=te.useCallback(()=>u(!0),[]),v=te.useCallback(()=>u(!1),[]),E=te.useCallback(P=>{if(!l||!m.current)return;const{left:V,width:O}=m.current.getBoundingClientRect();let A;"touches"in P?A=P.touches[0].clientX:A=P.clientX;const R=(A-V)/O*100;a(Math.min(100,Math.max(0,R)))},[l]);te.useEffect(()=>(window.addEventListener("mousemove",E),window.addEventListener("mouseup",v),window.addEventListener("touchmove",E),window.addEventListener("touchend",v),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",v),window.removeEventListener("touchmove",E),window.removeEventListener("touchend",v)}),[E,v]);const S=()=>d?{backgroundColor:d}:{backgroundColor:"#f8fafc",backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"24px 24px"};return h.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-6 animate-fade-in pb-10",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[h.jsx("h2",{className:"text-xl font-bold text-primary self-start md:self-auto",children:n?h.jsxs("span",{className:"flex items-center gap-2",children:[x.processing,h.jsxs("span",{className:"flex gap-1",children:[h.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce"}),h.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-100"}),h.jsx("span",{className:"w-1 h-1 bg-primary rounded-full animate-bounce delay-200"})]})]}):x.resultComparison}),!n&&h.jsxs("div",{className:"flex items-center gap-3 self-end md:self-auto",children:[h.jsx("button",{onClick:i,className:"px-4 py-2 text-sm font-medium text-slate-500 hover:text-primary transition-colors hover:bg-slate-50 rounded-lg active:scale-95 duration-200",children:x.reset}),e&&h.jsxs("button",{onClick:_,className:"flex items-center gap-2 bg-primary hover:bg-slate-800 text-white px-5 py-2 rounded-lg font-semibold text-sm transition-all shadow-lg shadow-slate-900/10 active:scale-95 hover:shadow-xl hover:-translate-y-0.5",children:[h.jsx(fx,{className:"w-4 h-4"}),x.download," ",d?"JPG":"PNG"]})]})]}),h.jsxs("div",{className:"relative w-full h-[60vh] rounded-xl overflow-hidden border border-slate-200 shadow-xl shadow-slate-200/50 bg-white select-none mx-auto group",ref:m,children:[n&&h.jsxs("div",{className:"absolute inset-0 z-50 bg-white/90 backdrop-blur-md flex flex-col items-center justify-center transition-all duration-300",children:[h.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,className:"absolute inset-0 w-full h-full object-contain opacity-10 blur-md scale-105",alt:"Background Blur"}),h.jsxs("div",{className:"relative z-10 flex flex-col items-center p-8 bg-white/80 rounded-2xl shadow-sm border border-slate-100/50 backdrop-blur-xl",children:[h.jsxs("div",{className:"relative mb-6",children:[h.jsx("div",{className:"w-16 h-16 border-4 border-slate-100 rounded-full"}),h.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"})})]}),h.jsx("p",{className:"font-bold text-lg tracking-wide animate-shimmer-text",children:r||"..."})]})]}),!n&&e&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center transition-colors duration-300",style:S(),children:h.jsx("img",{src:`data:image/png;base64,${e}`,alt:"Result",className:"max-w-full max-h-full object-contain animate-fade-in",draggable:!1})}),h.jsxs("div",{className:"absolute inset-0 w-full h-full overflow-hidden",style:{clipPath:`inset(0 ${100-o}% 0 0)`},children:[h.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white/95",children:h.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain",draggable:!1})}),h.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur text-primary text-[10px] font-bold px-2 py-1 rounded shadow-sm border border-slate-100 select-none",children:x.original})]}),h.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white z-30 cursor-ew-resize shadow-[0_0_10px_rgba(0,0,0,0.2)] hover:bg-blue-100 transition-colors",style:{left:`${o}%`},onMouseDown:T,onTouchStart:T,children:h.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-lg border border-slate-100 flex items-center justify-center text-primary transform hover:scale-110 active:scale-95 transition-all duration-200 cursor-ew-resize",children:h.jsx(vC,{className:"w-4 h-4"})})}),h.jsx("div",{className:"absolute top-4 right-4 bg-primary/90 backdrop-blur text-white text-[10px] font-bold px-2 py-1 rounded shadow-sm z-20 select-none",children:x.result})]}),!n&&!e&&h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx("img",{src:`data:${t.mimeType};base64,${t.data}`,alt:"Original",className:"max-w-full max-h-full object-contain"})})]}),!n&&e&&h.jsxs("div",{className:"flex flex-col items-center gap-3 animate-fade-in-up",children:[h.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider",children:x.bgColor}),h.jsxs("div",{className:"flex flex-wrap justify-center gap-3 bg-white p-3 rounded-2xl border border-slate-200 shadow-sm transition-all hover:shadow-md",children:[Yv.map(P=>h.jsx("button",{onClick:()=>g(P.value),className:`w-10 h-10 rounded-full border-2 transition-all duration-200 hover:scale-110 active:scale-95 flex items-center justify-center ${d===P.value?"border-primary ring-2 ring-primary/20 scale-110":"border-slate-200 hover:border-slate-300"}`,style:{backgroundColor:P.value||"white"},title:P.label,children:P.value===null&&h.jsx("div",{className:"w-full h-full rounded-full opacity-40",style:{backgroundImage:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 0 4px, 4px -4px, -4px 0px"}})},P.label)),h.jsx("div",{className:"w-px h-8 bg-slate-200 mx-2 self-center"}),h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"color",ref:y,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:P=>g(P.target.value),value:d||"#ffffff"}),h.jsx("button",{className:`w-10 h-10 rounded-full border-2 flex items-center justify-center bg-white hover:bg-slate-50 transition-all duration-200 hover:scale-110 active:scale-95 ${d&&!Yv.find(P=>P.value===d)?"border-primary ring-2 ring-primary/20":"border-slate-200 group-hover:border-slate-300"}`,title:"Custom Color",children:h.jsx("span",{className:"text-xl leading-none pb-1 text-slate-400 group-hover:text-primary transition-colors",children:"+"})})]})]})]}),!n&&!e&&h.jsx("p",{className:"text-center text-slate-400 text-xs animate-fade-in",children:x.uploadPrompt})]})},YV=({isOpen:t,onClose:e,removeBgKey:n,onSaveRemoveBgKey:r,storedApiKeys:i,onAddApiKey:s,onDeleteApiKey:o,onToggleApiKey:a,onSelectGoogleKey:l,knowledgeMode:u,onToggleKnowledgeMode:d,wikiEnabled:g,onToggleWiki:m,removeBgEnabled:y,onToggleRemoveBg:x,supabaseEnabled:_,onToggleSupabase:T,googleSearchKey:v,googleSearchCx:E,onSaveGoogleSearch:S,language:P})=>{const[V,O]=te.useState(n),[A,R]=te.useState(v),[k,D]=te.useState(E),[F,N]=te.useState(""),[M,b]=te.useState(!1),[J,pe]=te.useState(!1),[ee,Z]=te.useState(0),G=mo[P];if(te.useEffect(()=>{O(n),R(v),D(E),t?pP().then(Z):(b(!1),N(""),pe(!1))},[n,v,E,t]),!t)return null;const ue=()=>{!F.trim()||!M||(s(F.trim(),J),N(""),pe(!1))},H=()=>{r(V.trim()),S(A.trim(),k.trim()),e()},j=({checked:re,onChange:de})=>h.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[h.jsx("input",{type:"checkbox",className:"sr-only peer",checked:re,onChange:le=>de(le.target.checked)}),h.jsx("div",{className:`w-11 h-6 rounded-full peer peer-focus:outline-none peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${re?"bg-primary peer-checked:bg-primary":"bg-slate-200"}`})]});return h.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:h.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-fade-in-up ring-1 ring-slate-900/5",children:[h.jsxs("div",{className:"bg-white px-6 py-5 border-b border-slate-100 flex items-center justify-between sticky top-0 z-10",children:[h.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 border border-slate-100 flex items-center justify-center text-primary",children:h.jsx(Oh,{className:"w-5 h-5"})}),G.settingsTitle]}),h.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-50 hover:bg-slate-100 text-slate-400 hover:text-slate-800 transition-all",children:""})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6 bg-slate-50",children:[h.jsxs("section",{className:"bg-white rounded-2xl p-5 border border-slate-200 shadow-sm",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx("div",{className:"p-1.5 bg-indigo-100 text-indigo-600 rounded-lg",children:h.jsx(dx,{className:"w-4 h-4"})}),h.jsx("h3",{className:"text-sm font-bold text-slate-800",children:G.systemPref})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"flex items-start justify-between p-3 bg-indigo-50/50 rounded-xl border border-indigo-100",children:h.jsxs("div",{className:"pr-4 w-full",children:[h.jsxs("div",{className:"flex justify-between items-start mb-1",children:[h.jsx("h4",{className:"text-xs font-bold text-slate-700",children:G.knowledgeMode}),h.jsx(j,{checked:u,onChange:d})]}),h.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed mb-2",children:G.knowledgeModeDesc}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("div",{className:"text-[10px] font-bold text-indigo-600 bg-indigo-100 px-2 py-1 rounded-md w-fit flex items-center gap-1.5",children:[h.jsx(TC,{className:"w-3 h-3"}),G.totalKnowledge,": ",ee]})})]})}),h.jsxs("div",{className:"flex items-start justify-between p-3 bg-slate-50 rounded-xl border border-slate-200",children:[h.jsxs("div",{className:"pr-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx(sa,{className:"w-3 h-3 text-slate-500"}),h.jsx("h4",{className:"text-xs font-bold text-slate-700",children:G.wikiMode})]}),h.jsx("p",{className:"text-[10px] text-slate-500 leading-relaxed",children:G.wikiModeDesc})]}),h.jsx(j,{checked:g,onChange:m})]})]})]}),h.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[h.jsxs("div",{className:"mb-4",children:[h.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[h.jsx("div",{className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",children:h.jsx(mx,{className:"w-4 h-4"})}),G.googleSearchTitle]}),h.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:G.googleSearchDesc})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("input",{type:"text",value:A,onChange:re=>R(re.target.value),placeholder:G.searchApiKey,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all placeholder:text-slate-400 font-mono shadow-sm"}),h.jsx("input",{type:"text",value:k,onChange:re=>D(re.target.value),placeholder:G.searchEngineId,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all placeholder:text-slate-400 font-mono shadow-sm"})]})]}),h.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[h.jsxs("div",{className:"mb-4",children:[h.jsxs("h3",{className:"text-base font-bold text-slate-800 flex items-center gap-2",children:[h.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 shadow-sm shadow-blue-500/50"}),G.googleApiTitle]}),h.jsx("p",{className:"text-xs text-slate-500 mt-1.5 leading-relaxed",children:G.googleApiDesc})]}),h.jsx("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4 mb-5",children:h.jsxs("div",{className:"flex gap-3 items-start",children:[h.jsx(_c,{className:"w-5 h-5 text-amber-500 shrink-0 mt-0.5"}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-bold text-amber-800 uppercase tracking-wide mb-1.5",children:G.keyDisclaimerTitle}),h.jsx("p",{className:"text-[11px] text-amber-800/80 leading-relaxed mb-3 text-justify",children:G.keyDisclaimerText}),h.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group w-fit select-none",children:[h.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors shadow-sm ${M?"bg-amber-500 border-amber-500":"bg-white border-amber-300"}`,children:M&&h.jsx(Du,{className:"w-3 h-3 text-white"})}),h.jsx("input",{type:"checkbox",checked:M,onChange:re=>b(re.target.checked),className:"hidden"}),h.jsx("span",{className:`text-xs font-semibold transition-colors ${M?"text-amber-700":"text-amber-600/70"}`,children:G.consentCheckbox})]})]})]})}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",value:F,onChange:re=>N(re.target.value),placeholder:M?G.addKeyPlaceholder:G.consentCheckbox,disabled:!M,className:"w-full pl-4 pr-32 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none transition-all disabled:opacity-50 disabled:cursor-not-allowed font-mono placeholder:font-sans shadow-sm"}),h.jsx("button",{onClick:ue,disabled:!M||!F.trim(),className:"absolute right-1.5 top-1.5 bottom-1.5 px-4 bg-slate-800 text-white rounded-lg text-xs font-bold hover:bg-slate-700 disabled:bg-slate-200 disabled:text-slate-400 disabled:cursor-not-allowed transition-all shadow-md active:scale-95",children:G.addKeyBtn})]}),h.jsxs("div",{className:`flex items-center justify-between bg-slate-50 p-3 rounded-xl border border-slate-200 transition-all ${M?"":"opacity-50 pointer-events-none grayscale"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg transition-colors ${J?"bg-green-100 text-green-600":"bg-slate-200 text-slate-500"}`,children:h.jsx(sa,{className:"w-5 h-5"})}),h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-xs font-bold text-slate-700",children:"Donasi ke Komunitas"}),h.jsx("span",{className:"text-[10px] text-slate-500",children:"Izinkan orang lain pakai key ini (Shared)"})]})]}),h.jsx(j,{checked:J,onChange:pe})]})]}),h.jsxs("div",{className:"mt-8",children:[h.jsx("div",{className:"flex items-center justify-between mb-3 px-1",children:h.jsxs("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[G.keysStored,h.jsx("span",{className:"bg-slate-100 text-slate-600 px-1.5 py-0.5 rounded text-[10px]",children:i.length})]})}),i.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center py-8 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:[h.jsx(Oh,{className:"w-8 h-8 text-slate-300 mb-2"}),h.jsx("p",{className:"text-xs text-slate-400 font-medium text-center max-w-[200px] leading-relaxed",children:G.noKeysYet})]}):h.jsx("div",{className:"space-y-2.5 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:i.map((re,de)=>h.jsxs("div",{className:`flex items-center justify-between p-3 bg-white border rounded-xl shadow-sm transition-all ${re.isActive!==!1?"border-slate-200":"border-slate-100 bg-slate-50/50 opacity-70"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center shrink-0 text-xs font-bold border ${re.isShared?"bg-green-50 text-green-600 border-green-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:re.isShared?h.jsx(sa,{className:"w-4 h-4"}):de+1}),h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("span",{className:"text-xs font-mono text-slate-700 font-bold tracking-tight",children:["  ",re.key.slice(-4)]}),h.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[h.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded-md font-bold uppercase tracking-wide border ${re.isShared?"bg-green-100 text-green-700 border-green-200":"bg-slate-100 text-slate-600 border-slate-200"}`,children:re.isShared?"Donasi":"Pribadi"}),h.jsx("span",{className:`text-[9px] font-bold ${re.isActive!==!1?"text-green-500":"text-slate-400"}`,children:re.isActive!==!1?" "+G.active:" "+G.inactive})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{onClick:le=>le.stopPropagation(),children:h.jsxs("label",{className:"relative inline-flex items-center cursor-pointer scale-75 origin-right",children:[h.jsx("input",{type:"checkbox",className:"sr-only peer",checked:re.isActive!==!1,onChange:le=>a(re.key,le.target.checked)}),h.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-green-500"})]})}),h.jsx("button",{onClick:()=>o(re.key),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",title:"Hapus Key",children:h.jsx(wp,{className:"w-4 h-4"})})]})]},de))}),h.jsx("div",{className:"mt-5 flex justify-center",children:h.jsxs("button",{onClick:l,className:"text-xs font-bold text-blue-600 bg-blue-50 px-4 py-2 rounded-lg hover:bg-blue-100 transition-colors flex items-center gap-1.5 group border border-blue-100",children:[G.selectKeyBtn,h.jsx("span",{className:"group-hover:translate-x-0.5 transition-transform",children:""})]})})]})]}),h.jsxs("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg shadow-sm",children:h.jsx(Mu,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-bold text-slate-800",children:G.removeBgTitle}),h.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:G.removeBgDesc})]})]}),h.jsx(j,{checked:y,onChange:x})]}),h.jsx("div",{className:`relative transition-opacity ${y?"":"opacity-50 pointer-events-none"}`,children:h.jsx("input",{type:"text",value:V,onChange:re=>O(re.target.value),placeholder:"Tempel API Key Remove.bg disini...",className:"w-full pl-4 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-800 text-sm focus:ring-2 focus:ring-purple-500/10 focus:border-purple-500 outline-none transition-all placeholder:text-slate-400 font-mono shadow-sm"})})]}),h.jsx("section",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm",children:h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg shadow-sm",children:h.jsx(_p,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-bold text-slate-800",children:G.supabaseTitle}),h.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:G.supabaseDesc})]})]}),h.jsx(j,{checked:_,onChange:T})]})})]}),h.jsxs("div",{className:"p-5 border-t border-slate-100 bg-white flex items-center justify-end gap-3 shrink-0",children:[h.jsx("button",{onClick:e,className:"px-5 py-2.5 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded-xl font-bold text-sm transition-all",children:G.cancel}),h.jsxs("button",{onClick:H,className:"px-6 py-2.5 bg-slate-900 hover:bg-slate-800 text-white rounded-xl font-bold text-sm shadow-lg shadow-slate-900/20 active:scale-95 transition-all flex items-center gap-2",children:[h.jsx(Du,{className:"w-4 h-4"}),G.save]})]})]})})},QV=({isOpen:t,title:e,description:n,onConfirm:r,onCancel:i,confirmText:s="Yes, Leave"})=>t?h.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",children:h.jsx("div",{className:"bg-white w-full max-w-sm rounded-2xl p-6 shadow-2xl transform transition-all scale-100 animate-fade-in-up border border-slate-100",children:h.jsxs("div",{className:"flex flex-col items-center text-center",children:[h.jsx("div",{className:"w-12 h-12 bg-amber-50 text-amber-500 rounded-full flex items-center justify-center mb-4 border border-amber-100",children:h.jsx(_c,{className:"w-6 h-6"})}),h.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:e}),h.jsx("p",{className:"text-sm text-slate-500 mb-6 leading-relaxed",children:n}),h.jsxs("div",{className:"flex w-full gap-3",children:[h.jsx("button",{onClick:i,className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 rounded-xl font-medium hover:bg-slate-50 transition-colors text-sm",children:"Cancel"}),h.jsx("button",{onClick:r,className:"flex-1 px-4 py-2.5 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition-colors shadow-lg shadow-red-500/20 text-sm",children:s})]})]})})}):null,XV=({onLogin:t,language:e,onToggleLanguage:n,onClose:r})=>{const[i,s]=te.useState(""),[o,a]=te.useState(""),[l,u]=te.useState(!1),[d,g]=te.useState(null),m=mo[e],y=()=>{let _=localStorage.getItem("pixelmagic_device_id");return _||(_="dev_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36),localStorage.setItem("pixelmagic_device_id",_)),_},x=async _=>{if(_.preventDefault(),!(!i.trim()||!o.trim())){u(!0),g(null);try{const T=i.trim(),v=o.trim(),E=y(),{user:S,credits:P,id:V}=await lP(T,v,E);t(S,V,P)}catch(T){console.error(T),g("Connection failed. Please check internet.")}finally{u(!1)}}};return h.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-surface p-4 relative animate-fade-in",children:[r&&h.jsx("button",{onClick:r,className:"absolute top-6 left-6 p-2 rounded-full bg-white shadow-sm border border-slate-200 text-slate-400 hover:text-slate-900 transition-colors z-20",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),h.jsx("button",{onClick:n,className:"absolute top-6 right-6 text-xs font-bold px-3 py-1.5 rounded bg-white shadow-sm border border-slate-200 text-slate-600 hover:bg-slate-50 uppercase z-10",children:e}),h.jsxs("div",{className:"bg-white w-full max-w-md p-8 rounded-2xl shadow-xl border border-slate-100 animate-fade-in-up",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"w-12 h-12 bg-primary text-white rounded-xl flex items-center justify-center text-xl font-bold mx-auto mb-4 shadow-lg shadow-primary/20",children:"F"}),h.jsx("h1",{className:"text-2xl font-bold text-primary",children:m.welcome}),h.jsx("p",{className:"text-slate-500 text-sm mt-2 leading-relaxed",children:m.welcomeSubtitle})]}),h.jsxs("form",{onSubmit:x,className:"space-y-5",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:m.enterName}),h.jsx("input",{type:"text",required:!0,maxLength:50,value:i,onChange:_=>s(_.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-lg p-3 text-primary focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400",placeholder:m.namePlaceholder}),h.jsx("div",{className:"text-right mt-1",children:h.jsxs("span",{className:"text-[10px] text-slate-400",children:[i.length,"/50"]})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:m.enterSchool}),h.jsx("input",{type:"text",required:!0,maxLength:60,value:o,onChange:_=>a(_.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-lg p-3 text-primary focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400",placeholder:m.schoolPlaceholder}),h.jsx("div",{className:"text-right mt-1",children:h.jsxs("span",{className:"text-[10px] text-slate-400",children:[o.length,"/60"]})})]}),d&&h.jsx("p",{className:"text-red-500 text-xs text-center",children:d}),h.jsx("div",{className:"pt-2",children:h.jsx("button",{type:"submit",disabled:l,className:`w-full py-3 rounded-xl font-bold text-white transition-all shadow-lg ${l?"bg-slate-400 cursor-wait":"bg-primary hover:bg-slate-800 hover:shadow-xl active:scale-95"}`,children:l?m.verifying:m.accessButton})}),h.jsxs("p",{className:"text-center text-[10px] text-slate-400 mt-4",children:["Fanra Dev | ",m.deviceIdNote]})]})]})]})},ZV=({isOpen:t,onClose:e,onNewChat:n,user:r,onLogout:i,onOpenLogin:s,credits:o,isUnlimited:a,language:l,tools:u,onSelectTool:d,onExit:g})=>{const m=mo[l],[y,x]=te.useState(!1),_=y?u:u.slice(0,3);return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:`fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),h.jsx("div",{className:`
          /* Positioning & Layout */
          fixed md:relative top-0 left-0 bottom-0 z-50 h-full
          bg-slate-900 text-slate-200
          overflow-hidden flex flex-col

          /* Transitions */
          transition-[width,transform,opacity] duration-300 ease-in-out

          /* MOBILE STATE: Fixed width, Slide in/out */
          w-[280px]
          ${t?"translate-x-0 shadow-2xl":"-translate-x-full shadow-none"}

          /* DESKTOP STATE: Relative, Collapse Width, Reset Transform */
          md:transform-none md:shadow-none md:top-auto md:left-auto md:bottom-auto
          ${t?"md:w-[260px]":"md:w-0"}
        `,children:h.jsxs("div",{className:"w-[280px] md:w-[260px] h-full flex flex-col border-r border-slate-800 bg-slate-900",children:[h.jsxs("div",{className:"p-4 flex items-center justify-between h-14 shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 bg-white text-slate-900 rounded-lg flex items-center justify-center font-bold",children:"F"}),h.jsx("span",{className:"font-bold text-white tracking-wide",children:"Fanra"})]}),h.jsx("button",{onClick:e,className:"md:hidden text-slate-400 hover:text-white p-1",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto px-3 py-2 custom-scrollbar space-y-4",children:[h.jsxs("button",{onClick:()=>{n(),window.innerWidth<768&&e()},className:"w-full flex items-center gap-3 bg-slate-800 hover:bg-slate-700 text-white px-4 py-3 rounded-xl transition-all active:scale-95 border border-slate-700 shadow-sm group",children:[h.jsx("span",{className:"text-xl font-light group-hover:scale-110 transition-transform",children:"+"}),h.jsx("span",{className:"text-sm font-medium",children:m.newChat})]}),h.jsx("div",{className:"h-px bg-slate-800/50 mx-2"}),h.jsxs("div",{children:[h.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Creative Tools"}),h.jsxs("div",{className:"space-y-1",children:[_.map(T=>h.jsxs("button",{onClick:()=>{d(T),window.innerWidth<768&&e()},className:"w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all hover:bg-slate-800 border border-transparent hover:border-slate-700/50 group active:scale-95",children:[h.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center shrink-0 ${T.color.replace("bg-","bg-opacity-90 bg-")} shadow-sm`,children:h.jsx("div",{className:"scale-75 text-slate-800",children:T.icon})}),h.jsx("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:h.jsx("span",{className:"block text-xs font-bold text-slate-200 group-hover:text-white truncate",children:m[T.nameKey]})})]},T.id)),h.jsxs("button",{onClick:()=>x(!y),className:"w-full flex items-center gap-3 p-2 rounded-xl text-left transition-all hover:bg-slate-800 border border-transparent border-dashed hover:border-slate-700/50 group",children:[h.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center shrink-0 bg-slate-800 text-slate-400",children:h.jsx(xp,{className:"w-4 h-4"})}),h.jsx("span",{className:"text-xs font-medium text-slate-400 group-hover:text-white",children:y?m.lessTools:m.moreTools})]})]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"px-2 text-[10px] font-bold text-slate-500 uppercase mb-2 mt-4",children:m.historyHeader}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("button",{className:"w-full text-left px-4 py-2.5 text-sm text-slate-400 hover:bg-slate-800/50 hover:text-white rounded-lg truncate transition-colors group",children:m.historyItem1}),h.jsx("button",{className:"w-full text-left px-4 py-2.5 text-sm text-slate-400 hover:bg-slate-800/50 hover:text-white rounded-lg truncate transition-colors",children:m.historyItem2})]})]})]}),h.jsxs("div",{className:"p-4 border-t border-slate-800 bg-slate-900 shrink-0",children:[g&&h.jsxs("button",{onClick:g,className:"w-full mb-4 py-2.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-xl font-bold text-xs uppercase tracking-wider transition-all flex items-center justify-center gap-2 border border-slate-700/50 hover:border-slate-600 group",children:[h.jsx(za,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Exit Studio"]}),r?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500 flex items-center justify-center text-xs font-bold text-white shrink-0",children:r.name.charAt(0).toUpperCase()}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-sm font-medium text-white truncate",children:r.name}),h.jsx("p",{className:"text-xs text-slate-500 truncate",children:r.school})]})]}),h.jsxs("div",{className:"flex items-center justify-between text-xs mb-3 bg-slate-800 rounded-lg p-2",children:[h.jsxs("span",{className:"text-slate-400",children:[m.credits,":"]}),h.jsx("span",{className:`font-bold ${a?"text-amber-400":"text-white"}`,children:a?m.unlimited:o})]}),h.jsxs("button",{onClick:i,className:"w-full py-2 text-xs font-medium text-slate-400 hover:text-red-400 hover:bg-red-900/10 rounded-lg transition-colors flex items-center justify-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),m.logOut]})]}):h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-xs text-slate-400 mb-3",children:m.loginToSave}),h.jsx("button",{onClick:s,className:"w-full py-2.5 bg-white text-slate-900 font-bold rounded-xl text-sm hover:bg-slate-200 transition-colors shadow-lg active:scale-95",children:m.loginBtn})]})]})]})})]})};class e6{constructor(e,n,r,i,s){this.x=e,this.y=n,this.vx=0,this.vy=0,this.radius=i,this.color=r,this.friction=.92,this.ease=s,this.dx=(Math.random()-.5)*80,this.dy=(Math.random()-.5)*80,this.angle=Math.random()*Math.PI*2,this.angleSpeed=.02+Math.random()*.03,this.wobbleRadius=15+Math.random()*25}update(e,n,r){if(r)this.x+=this.vx,this.y+=this.vy,this.vx*=this.friction,this.vy*=this.friction;else{this.angle+=this.angleSpeed;const i=Math.cos(this.angle)*this.wobbleRadius,s=Math.sin(this.angle)*this.wobbleRadius,o=e+this.dx+i,a=n+this.dy+s;this.x+=(o-this.x)*this.ease,this.y+=(a-this.y)*this.ease,this.vx=0,this.vy=0}}shatter(){const e=Math.random()*Math.PI*2,n=Math.random()*30+15;this.vx=Math.cos(e)*n,this.vy=Math.sin(e)*n}draw(e){e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2),e.fillStyle=this.color,e.fill()}}const t6=({onEnter:t})=>{const[e,n]=te.useState(!1),[r,i]=te.useState(!1),s=te.useRef(null),o=te.useRef(!1),a=te.useRef({x:window.innerWidth/2,y:window.innerHeight/2}),l=te.useRef([]);te.useEffect(()=>{setTimeout(()=>i(!0),300);const g=s.current;if(!g)return;const m=g.getContext("2d");if(!m)return;const y=()=>{g.width=window.innerWidth,g.height=window.innerHeight};window.addEventListener("resize",y),y();const x=S=>{a.current={x:S.clientX,y:S.clientY}};window.addEventListener("mousemove",x);const _=["#0f172a","#1e293b","#312e81","#1e1b4b","#4c1d95","#2563eb"],T=[];for(let S=0;S<15;S++){const P=Math.random()*30+20,V=_[Math.floor(Math.random()*_.length)],O=Math.random()*.08+.03;T.push(new e6(g.width/2,g.height/2,V,P,O))}l.current=T;let v;const E=()=>{m.clearRect(0,0,g.width,g.height),l.current.forEach(S=>{S.update(a.current.x,a.current.y,o.current),S.draw(m)}),v=requestAnimationFrame(E)};return E(),()=>{window.removeEventListener("resize",y),window.removeEventListener("mousemove",x),cancelAnimationFrame(v)}},[]);const u=()=>{o.current||(o.current=!0,l.current.forEach(g=>g.shatter()),setTimeout(()=>{o.current=!1},1500))},d=()=>{n(!0),setTimeout(()=>{t()},900)};return h.jsxs("div",{className:`fixed inset-0 z-[999] bg-white flex flex-col items-center justify-center overflow-hidden transition-transform duration-[900ms] cubic-bezier(0.76, 0, 0.24, 1) ${e?"-translate-y-full rounded-b-[3rem] shadow-2xl":"translate-y-0 rounded-none shadow-none"}`,onDoubleClick:u,children:[h.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none filter blur-[60px] opacity-80",children:h.jsx("canvas",{ref:s,className:"w-full h-full"})}),h.jsx("div",{className:"absolute inset-0 z-0 opacity-[0.4] pointer-events-none mix-blend-multiply",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),h.jsxs("div",{className:`relative z-10 flex flex-col items-center max-w-lg w-full text-center px-6 transition-all duration-1000 ease-out transform select-none ${r?"translate-y-0 opacity-100":"translate-y-12 opacity-0"}`,children:[h.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-slate-900 mb-2 tracking-tighter",children:["IRFAN",h.jsx("span",{className:"text-blue-600",children:"."})]}),h.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-400 mb-8 tracking-widest uppercase",children:"Rizki Aditri"}),h.jsxs("p",{className:"text-slate-500 text-sm md:text-base font-medium leading-relaxed mb-16 max-w-xs mx-auto",children:["Welcome to my digital playground. ",h.jsx("br",{}),h.jsx("span",{className:"text-slate-800",children:"Explore projects, stories, and ideas."})]}),h.jsxs("button",{onClick:d,className:"group flex flex-col items-center gap-4 transition-all outline-none cursor-pointer",children:[h.jsx("div",{className:"w-16 h-16 rounded-full border border-slate-200 bg-white/80 backdrop-blur-sm flex items-center justify-center shadow-lg transition-all duration-500 group-hover:scale-110 group-hover:bg-white group-hover:border-slate-300 group-active:scale-95 group-hover:shadow-xl",children:h.jsx(vc,{className:"w-6 h-6 text-slate-400 group-hover:text-slate-900 transition-colors duration-300 transform group-hover:translate-y-0.5"})}),h.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 group-hover:text-slate-600 transition-colors duration-300",children:"Enter Site"})]})]})]})},n6="3JEZ69gonQmxU83WxzidFCFf",r6="AIzaSyCV_HdKiAs1y5-F5eSGxTFUZ1vAGUOymQg",i6="sb_publishable_ikw-BNV8Wu3qhNPuSti8Rg_7XmPMWqV",s6="",Qv=5,$d=[{id:hn.BACKGROUND_REMOVER,nameKey:"toolBgRemove",descKey:"toolBgRemoveDesc",icon:h.jsx(Mu,{className:"w-5 h-5 md:w-6 md:h-6"}),color:"text-blue-600 bg-blue-50",model:"gemini-2.5-flash-image",cost:1},{id:hn.HD_UPSCALE,nameKey:"toolUpscale",descKey:"toolUpscaleDesc",icon:h.jsx(_p,{className:"w-5 h-5 md:w-6 md:h-6"}),color:"text-amber-600 bg-amber-50",model:"gemini-2.5-flash-image",cost:3},{id:hn.CREATIVE_REMIX,nameKey:"toolRemix",descKey:"toolRemixDesc",icon:h.jsx(dx,{className:"w-5 h-5 md:w-6 md:h-6"}),color:"text-purple-600 bg-purple-50",model:"gemini-2.5-flash-image",cost:3},{id:hn.COLORIZE,nameKey:"toolColorize",descKey:"toolColorizeDesc",icon:h.jsx(wC,{className:"w-5 h-5 md:w-6 md:h-6"}),color:"text-pink-600 bg-pink-50",model:"gemini-2.5-flash-image",cost:2},{id:hn.SKETCH_TO_REAL,nameKey:"toolSketch",descKey:"toolSketchDesc",icon:h.jsx(xC,{className:"w-5 h-5 md:w-6 md:h-6"}),color:"text-emerald-600 bg-emerald-50",model:"gemini-2.5-flash-image",cost:3}],o6=({language:t,code:e})=>{const[n,r]=te.useState(!1),i=()=>{navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)},s=o=>o.split(`
`).map((a,l)=>h.jsxs("div",{className:"table-row",children:[h.jsx("span",{className:"table-cell select-none text-slate-600 text-right pr-4 w-8 text-xs",children:l+1}),h.jsx("span",{className:"table-cell",children:a.split(/([<>{}"']|class|const|let|var|function|return|import|export)/g).map((u,d)=>u.startsWith("<")||u.startsWith(">")?h.jsx("span",{className:"text-blue-400",children:u},d):u.startsWith('"')||u.startsWith("'")?h.jsx("span",{className:"text-green-400",children:u},d):["const","let","var","function","return","import","export","class"].includes(u)?h.jsx("span",{className:"text-purple-400 font-bold",children:u},d):["=","{","}","(",")",";"].includes(u)?h.jsx("span",{className:"text-slate-400",children:u},d):h.jsx("span",{className:"text-slate-200",children:u},d))})]},l));return h.jsxs("div",{className:"my-4 rounded-xl overflow-hidden border border-slate-700/50 shadow-lg bg-[#1e1e1e] w-full max-w-full group",children:[h.jsxs("div",{className:"bg-[#2d2d2d] px-4 py-2 flex items-center justify-between border-b border-white/5",children:[h.jsx("span",{className:"text-xs font-mono text-slate-400 lowercase font-bold",children:t||"code"}),h.jsx("button",{onClick:i,className:"flex items-center gap-1.5 text-[10px] font-medium text-slate-400 hover:text-white bg-white/5 hover:bg-white/10 px-2 py-1 rounded transition-all",children:n?h.jsxs(h.Fragment,{children:[h.jsx(Du,{className:"w-3 h-3 text-green-400"})," Copied"]}):h.jsxs(h.Fragment,{children:[h.jsx(gx,{className:"w-3 h-3"})," Copy Code"]})})]}),h.jsx("div",{className:"p-4 overflow-x-auto custom-scrollbar",children:h.jsx("pre",{className:"font-mono text-sm leading-relaxed whitespace-pre font-normal",style:{tabSize:2},children:h.jsx("code",{className:"table w-full border-collapse",children:s(e)})})})]})},a6=({isOpen:t,onClose:e})=>t?h.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",children:h.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-6 shadow-2xl animate-fade-in-up border border-slate-100",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center",children:h.jsx(Oh,{className:"w-5 h-5"})}),h.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Cara Dapet API Key Gemini"})]}),h.jsxs("ol",{className:"space-y-4 text-sm text-slate-600 mb-6 list-decimal list-inside marker:font-bold marker:text-blue-600",children:[h.jsxs("li",{className:"pl-2",children:["Buka website ",h.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-bold hover:underline",children:"Google AI Studio"}),"."]}),h.jsx("li",{className:"pl-2",children:"Login pakai akun Google kamu."}),h.jsxs("li",{className:"pl-2",children:["Klik tombol biru besar bertuliskan ",h.jsx("b",{children:'"Create API Key"'}),"."]}),h.jsxs("li",{className:"pl-2",children:["Pilih ",h.jsx("b",{children:'"Create API key in new project"'}),"."]}),h.jsxs("li",{className:"pl-2",children:["Salin (Copy) kode yang muncul, lalu tempel di menu ",h.jsx("b",{children:"Pengaturan"})," aplikasi ini."]})]}),h.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-xs text-slate-500 mb-6",children:[" ",h.jsx("b",{children:"Tips:"})," API Key ini gratis (Free Tier). Jangan kasih tau kode ini ke orang lain ya."]}),h.jsx("button",{onClick:e,className:"w-full py-3 bg-primary text-white rounded-xl font-bold shadow-lg shadow-primary/20 hover:bg-slate-800 transition-all active:scale-95",children:"Oke, Siap!"})]})}):null;function l6({onExit:t}){const[e,n]=te.useState(!0),[r,i]=te.useState("id"),[s,o]=te.useState(null),[a,l]=te.useState(null),[u,d]=te.useState(Qv),[g,m]=te.useState(!1),[y,x]=te.useState(!1),[_,T]=te.useState(!1),[v,E]=te.useState(null),[S,P]=te.useState(null),[V,O]=te.useState(null),[A,R]=te.useState(""),[k,D]=te.useState({isProcessing:!1,progress:"",error:null}),[F,N]=te.useState([]),[M,b]=te.useState(""),[J,pe]=te.useState([]),[ee,Z]=te.useState(null),[G,ue]=te.useState(!1),[H,j]=te.useState(!1),[re,de]=te.useState(null),le=te.useRef(null),Me=te.useRef(null),Ye=te.useRef(null),Ae=te.useRef(null),[Ue,De]=te.useState(!1),[Qe,kt]=te.useState(""),[rt,C]=te.useState([]),[ne,Y]=te.useState(""),[B,U]=te.useState(""),[z,ie]=te.useState(!1),[ae,W]=te.useState(!1),[oe,ge]=te.useState(!0),[fe,ye]=te.useState(!0),[Ce,ke]=te.useState(!1),[Et,yn]=te.useState(!1),[Vt,q]=te.useState(!1),[Q,Se]=te.useState(null),ve=mo[r];te.useEffect(()=>{const K=localStorage.getItem("remove_bg_key");K&&kt(K);const xe=localStorage.getItem("google_search_key");xe&&Y(xe);const Le=localStorage.getItem("google_search_cx");Le&&U(Le),localStorage.getItem("fanra_know_mode")==="true"&&ie(!0),localStorage.getItem("fanra_wiki_mode")==="true"&&W(!0),localStorage.getItem("fanra_rb_enabled")==="false"&&ge(!1),localStorage.getItem("fanra_sb_enabled")==="false"&&ye(!1)},[]),te.useEffect(()=>{Ce&&(rt.some(K=>K.isActive)||z)&&ke(!1)},[rt,z]),te.useEffect(()=>{var K;(K=Me.current)==null||K.scrollIntoView({behavior:"smooth"})},[F,k.isProcessing,J]),te.useEffect(()=>{a&&(hP(a).then(K=>{K.length>0&&N(K)}),cP(a).then(K=>{C(K)}))},[a]),te.useEffect(()=>{if(Ae.current){Ae.current.style.height="auto";const K=Math.min(Ae.current.scrollHeight,128);Ae.current.style.height=`${Math.max(42,K)}px`}},[M,J]);const je=K=>{if(Tt())return;const xe=Math.max(0,u-K);d(xe),a&&uP(a,xe)},Tt=()=>!!(s!=null&&s.isAdmin||rt.some(K=>K.isActive!==!1)),Oe=()=>Qe||n6,vn=()=>{const K=rt.filter(xe=>xe.isActive!==!1).map(xe=>xe.key);return K.length===0?[r6]:K},_n=K=>{kt(K),localStorage.setItem("remove_bg_key",K)},ln=(K,xe)=>{Y(K),U(xe),localStorage.setItem("google_search_key",K),localStorage.setItem("google_search_cx",xe)},un=async(K,xe)=>{if(!a)return;const Le={key:K,addedAt:Date.now(),isShared:xe,isActive:!0},Ve=[...rt,Le];C(Ve),await py(a,Ve)},Ft=async K=>{if(!a)return;const xe=rt.filter(Le=>Le.key!==K);C(xe),await dP(a,K,xe)},Kt=async(K,xe)=>{if(!a)return;const Le=rt.map(Ve=>Ve.key===K?{...Ve,isActive:xe}:Ve);C(Le),await py(a,Le)},wr=K=>{ie(K),localStorage.setItem("fanra_know_mode",K.toString())},Jn=K=>{W(K),localStorage.setItem("fanra_wiki_mode",K.toString())},cs=K=>{ge(K),localStorage.setItem("fanra_rb_enabled",K.toString())},Ri=K=>{ye(K),localStorage.setItem("fanra_sb_enabled",K.toString())},Za=async()=>{try{window.aistudio&&await window.aistudio.openSelectKey()}catch(K){console.error(K)}},Ut=(K,xe,Le,Ve)=>{P({data:K,mimeType:xe,width:Le,height:Ve})},el=(K,xe,Le)=>{o(K),l(xe),d(Le),m(!1)},Ni=()=>{o(null),l(null),d(Qv),C([]),Mi(),N([]),ke(!1)},zr=()=>i(K=>K==="id"?"en":"id"),Jc=(K,xe)=>{if(K)try{navigator.clipboard.writeText(K).then(()=>{Z(xe),setTimeout(()=>Z(null),2e3)})}catch{Z(xe),setTimeout(()=>Z(null),2e3)}},Yc=K=>{de(xe=>xe===K?null:K)},Gr=K=>{const xe=[];if(K.text){const Ve=K.text.split(/(```[\w-]*\n[\s\S]*?```)/g).map((Xe,$e)=>{if(Xe.startsWith("```")){const ze=Xe.match(/```([\w-]*)\n([\s\S]*?)```/);return ze?h.jsx(o6,{language:ze[1],code:ze[2]},$e):null}return h.jsx("div",{children:Xe.split("***").map((ze,Bt)=>h.jsxs("div",{children:[Bt>0&&h.jsx("div",{className:"h-px bg-slate-200 my-4 w-full"}),h.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:ze.split(/\*\*(.*?)\*\*/g).map((Jt,wn)=>{if(wn%2===1)return h.jsx("strong",{className:"font-bold text-slate-900",children:Jt},wn);const et=Jt.split(/\[(.*?)\]\((.*?)\)/g);if(et.length>1){const ht=[];for(let ct=0;ct<et.length;ct+=3)ht.push(et[ct]),ct+1<et.length&&ht.push(h.jsx("a",{href:et[ct+2],target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 underline font-medium",children:et[ct+1]},ct));return h.jsx(l_.Fragment,{children:ht},wn)}return Jt})})]},Bt))},$e)});xe.push(h.jsx("div",{children:Ve},"text"))}return xe},Qc=async()=>{if(!S||!v)return;if(!Tt()&&u<v.cost){D({isProcessing:!1,progress:"",error:ve.insufficientCredits});return}D({isProcessing:!0,progress:ve.initializing,error:null}),O(null);const K=v.id===hn.BACKGROUND_REMOVER,xe=Oe(),Le=vn();try{let Ve="",Xe=!1;if(K&&xe&&oe&&!Xe)try{D(ze=>({...ze,progress:ve.processingStandard})),Ve=await WV(S.data,xe),Xe=!0}catch{console.warn("Standard Engine failed")}if(!Xe&&(K||!K)&&!Xe&&Le.length>0)try{D(ze=>({...ze,progress:ve.processingAI})),Ve=await UV({image:S,tool:v.id,prompt:v.id===hn.CREATIVE_REMIX?A:void 0,apiKeys:Le}),K&&(D(ze=>({...ze,progress:ve.refining})),Ve=await qV(Ve)),Xe=!0}catch(ze){console.warn("Gemini failed",ze)}if(!Xe||!Ve)throw new Error("No available API Keys or Services found/enabled.");je(v.cost),O(Ve),D({isProcessing:!1,progress:"",error:null})}catch(Ve){console.error("Execution Error:",Ve);let Xe=ve.serviceBusy;const $e=(Ve.message||"").toLowerCase();$e.includes("network")||$e.includes("fetch")?Xe=ve.networkError:$e.includes("memory")||$e.includes("oom")?Xe=ve.memoryError:($e.includes("no available api")||$e.includes("enabled"))&&(Xe=ve.insufficientCredits),D({isProcessing:!1,progress:"",error:Xe})}},Xc=()=>{le.current&&(le.current.abort(),le.current=null,D(K=>({...K,isProcessing:!1})))},Pi=async K=>{var wn;if(K.preventDefault(),!M.trim()&&J.length===0)return;const xe={id:Date.now().toString(),role:"user",text:M,timestamp:Date.now(),attachments:J.length>0?[...J]:void 0};N(et=>[...et,xe]),b(""),pe([]),Ae.current&&(Ae.current.style.height="auto"),a&&my(a,xe);const Le=vn(),Ve=(Date.now()+1).toString(),Xe={id:Ve,role:"model",text:"",timestamp:Date.now()};N(et=>[...et,Xe]);let $e="",ze="gemini";const Bt=new AbortController;le.current=Bt,D(et=>({...et,isProcessing:!0}));try{const et=await HV(xe.text,Le,F,r,xe.attachments,ct=>{N(Di=>Di.map(ps=>ps.id===Ve?{...ps,text:ct}:ps))},z,ae,{apiKey:ne,cx:B},Bt.signal);$e=et.text,ze=et.source;const ht=$e.includes(ve.chatFallbackError)||$e.includes("Maaf, informasi ini belum ada")||$e.includes("Sorry, this info is not");xe.text&&!ht&&ze!=="weather"&&ze!=="country_fact"&&fP(xe.text,$e)}catch(et){if(et.name==="AbortError"||et.message==="Request cancelled by user")console.log("Generation stopped by user"),$e=((wn=F.find(ht=>ht.id===Ve))==null?void 0:wn.text)||" (Stopped)";else{console.warn("API Call Failed",et);const ht=(et.message||"").toLowerCase();if(ht.includes("all chat keys failed")||ht.includes("429")||ht.includes("quota"))$e="hehe api key gua abis, mau ga mau ya harus aktifin mode knowladge di pengaturan atau ngga kamu bisa kasih aku api key kanu dan ada di pengaturan juga hehe, nah saat api key habis maka ga bisa ngirim pesan lagi ya, bisa jika udah ada api key lagi oke, atau ngga ya pake mode knowladge itu baru bisa, bilang aja knowladge itu terbatas karena yaa itu deh belum ada banyak oke",ke(!0),ze="gemini";else{let ct=xe.text?await PT(xe.text):null;ct?($e=`${ct} ${ve.chatOfflineMode}`,ze="knowledge_base"):($e=ve.chatFallbackError,ze="gemini")}}N(ht=>ht.map(ct=>ct.id===Ve?{...ct,text:$e}:ct))}finally{D(et=>({...et,isProcessing:!1})),le.current=null}const Jt={...Xe,text:$e,source:ze};N(et=>et.map(ht=>ht.id===Ve?Jt:ht)),a&&my(a,Jt)},_o=()=>{var K;(K=Ye.current)==null||K.click()},wo=K=>{const xe=K.target.files;if(!xe)return;const Le=[],Ve=3-J.length,Xe=Math.min(xe.length,Ve);if(Xe===0&&xe.length>0){alert("Maximum 3 images allowed.");return}let $e=0;for(let ze=0;ze<Xe;ze++){const Bt=xe[ze],Jt=new FileReader;Jt.onload=wn=>{var ct;const ht=((ct=wn.target)==null?void 0:ct.result).split(",")[1];Le.push({data:ht,mimeType:Bt.type,name:Bt.name}),$e++,$e===Xe&&pe(Di=>[...Di,...Le])},Jt.readAsDataURL(Bt)}K.target.value=""},ds=K=>{pe(xe=>xe.filter((Le,Ve)=>Ve!==K))},ur=K=>{K.preventDefault(),K.stopPropagation(),v||ue(!0)},tl=K=>{K.preventDefault(),K.stopPropagation(),ue(!1)},nl=K=>{if(K.preventDefault(),K.stopPropagation(),ue(!1),v)return;const xe=K.dataTransfer.files;if(!xe)return;const Le=[],Ve=3-J.length,Xe=Math.min(xe.length,Ve);if(Xe===0&&xe.length>0){alert("Maximum 3 images allowed.");return}let $e=0;for(let ze=0;ze<Xe;ze++){const Bt=xe[ze];if(!Bt.type.startsWith("image/"))continue;const Jt=new FileReader;Jt.onload=wn=>{var ct;const ht=((ct=wn.target)==null?void 0:ct.result).split(",")[1];Le.push({data:ht,mimeType:Bt.type,name:Bt.name}),$e++,$e===Xe&&pe(Di=>[...Di,...Le])},Jt.readAsDataURL(Bt)}},hs=()=>{S&&(k.isProcessing||V)?(Se("back"),q(!0)):Mi()},xo=()=>{q(!1),Q==="back"?Mi():Q==="change_photo"&&(P(null),O(null),D({isProcessing:!1,progress:"",error:null})),Se(null)},Mi=()=>{P(null),O(null),E(null),R(""),D({isProcessing:!1,progress:"",error:null})},Eo=()=>{Mi(),N([]),ke(!1)},Zc=Tt(),fs=s||{name:"Tamu"},rl=_?$d:$d.slice(0,3);return h.jsxs("div",{className:"flex h-[100dvh] bg-white font-sans text-primary overflow-hidden relative",onDragOver:ur,onDragLeave:tl,onDrop:nl,children:[e&&h.jsx(t6,{onEnter:()=>n(!1)}),G&&h.jsx("div",{className:"absolute inset-0 z-[100] bg-primary/10 backdrop-blur-sm border-4 border-primary border-dashed m-4 rounded-3xl flex items-center justify-center pointer-events-none animate-fade-in",children:h.jsxs("div",{className:"bg-white px-8 py-4 rounded-2xl shadow-xl flex items-center gap-3",children:[h.jsx(o0,{className:"w-6 h-6 text-primary"}),h.jsx("span",{className:"font-bold text-lg text-primary",children:"Drop files to send"})]})}),g&&h.jsx("div",{className:"fixed inset-0 z-[60] bg-white",children:h.jsx(XV,{onLogin:el,language:r,onToggleLanguage:zr,onClose:()=>m(!1)})}),h.jsx(a6,{isOpen:Et,onClose:()=>yn(!1)}),h.jsx(YV,{isOpen:Ue,onClose:()=>De(!1),removeBgKey:Qe,onSaveRemoveBgKey:_n,storedApiKeys:rt,onAddApiKey:un,onDeleteApiKey:Ft,onToggleApiKey:Kt,onSelectGoogleKey:Za,knowledgeMode:z,onToggleKnowledgeMode:wr,wikiEnabled:ae,onToggleWiki:Jn,removeBgEnabled:oe,onToggleRemoveBg:cs,supabaseEnabled:fe,onToggleSupabase:Ri,googleSearchKey:ne,googleSearchCx:B,onSaveGoogleSearch:ln,language:r}),h.jsx(QV,{isOpen:Vt,title:ve.confirmTitle,description:ve.confirmDesc,confirmText:ve.yesChange,onConfirm:xo,onCancel:()=>q(!1)}),h.jsx(ZV,{isOpen:y,onClose:()=>x(!1),onNewChat:Eo,user:s,onLogout:Ni,onOpenLogin:()=>m(!0),credits:u,isUnlimited:Zc,language:r,tools:$d,onSelectTool:E,onExit:t}),h.jsxs("div",{className:"flex-1 flex flex-col h-full relative w-full overflow-hidden bg-slate-50/50",children:[h.jsx("header",{className:"absolute top-0 left-0 right-0 z-30 p-4 pointer-events-none",children:h.jsxs("div",{className:"max-w-5xl mx-auto bg-white/80 backdrop-blur-xl border border-white/40 shadow-lg shadow-slate-200/50 rounded-2xl px-4 py-3 flex items-center justify-between pointer-events-auto",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:()=>x(!y),className:"p-2 rounded-xl hover:bg-slate-100 text-slate-600 transition-colors",children:h.jsx(px,{className:"w-5 h-5"})}),h.jsx("div",{className:"font-bold text-lg tracking-tight bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent hidden md:block",children:"Fanra Studio"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("button",{onClick:zr,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-full text-xs font-semibold text-slate-600 transition-all hover:shadow-sm active:scale-95",children:[h.jsx(sa,{className:"w-3.5 h-3.5"}),h.jsx("span",{children:r.toUpperCase()})]}),h.jsxs("button",{onClick:()=>De(!0),className:"p-2 text-slate-400 hover:text-primary hover:bg-slate-100 rounded-full transition-all relative",children:[h.jsx(s0,{className:"w-5 h-5"}),Ce&&h.jsx("span",{className:"absolute top-1.5 right-1.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]})]})]})}),h.jsx("div",{className:"flex-1 overflow-y-auto pt-24 px-4 scroll-smooth custom-scrollbar",children:h.jsxs("div",{className:"max-w-3xl mx-auto min-h-full flex flex-col pb-4",children:[F.length===0&&!v&&h.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center py-10 animate-fade-in-up",children:[h.jsxs("div",{className:"mb-8 text-center",children:[h.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 mb-3 tracking-tight",children:[ve.heroTitle," ",fs.name]}),h.jsx("p",{className:"text-slate-500 text-lg",children:ve.heroSubtitle})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-5 w-full max-w-2xl px-2",children:[rl.map(K=>h.jsxs("button",{onClick:()=>E(K),className:"flex flex-col items-center text-center p-4 md:p-6 bg-white border border-slate-100 rounded-2xl shadow-sm hover:border-primary/20 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group h-full",children:[h.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 ${K.color} rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110 shadow-sm`,children:K.icon}),h.jsx("span",{className:"text-xs md:text-sm font-bold text-slate-700 leading-tight",children:ve[K.nameKey]}),h.jsx("span",{className:"hidden md:block text-[10px] text-slate-400 mt-2 leading-tight",children:ve[K.descKey]})]},K.id)),h.jsxs("button",{onClick:()=>T(!_),className:`flex flex-col items-center justify-center text-center p-4 md:p-6 bg-slate-50 border border-slate-200 border-dashed rounded-2xl hover:bg-white hover:border-slate-300 hover:shadow-md transition-all duration-300 group h-full ${_?"":"col-start-2"}`,children:[h.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-slate-100 text-slate-400 rounded-2xl flex items-center justify-center mb-4 transition-transform group-hover:scale-110",children:h.jsx(xp,{className:"w-6 h-6"})}),h.jsx("span",{className:"text-xs md:text-sm font-bold text-slate-500 group-hover:text-slate-700 leading-tight",children:_?ve.lessTools:ve.moreTools})]})]})]}),F.map(K=>h.jsxs("div",{className:`flex flex-col mb-6 animate-fade-in ${K.role==="user"?"items-end":"items-start"}`,children:[K.attachments&&K.attachments.length>0&&h.jsx("div",{className:`flex flex-wrap gap-2 mb-2 max-w-[85%] ${K.role==="user"?"justify-end":"justify-start"}`,children:K.attachments.map((xe,Le)=>h.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200/50 shadow-sm transition-transform hover:scale-[1.02]",children:h.jsx("img",{src:`data:${xe.mimeType};base64,${xe.data}`,alt:xe.name,className:"h-32 w-auto object-cover md:h-48 rounded-lg bg-slate-100"})},Le))}),(K.text||K.role==="model"&&!K.text)&&h.jsxs("div",{className:`flex flex-col gap-1 max-w-lg lg:max-w-2xl ${K.role==="user"?"items-end":"items-start"}`,children:[h.jsx("div",{className:`relative px-5 py-3.5 rounded-2xl text-sm leading-relaxed shadow-sm break-words group w-full ${K.role==="user"?"bg-white text-slate-800 rounded-tr-sm border border-slate-100 shadow-slate-200/50":"bg-transparent text-slate-700 p-0 shadow-none"}`,children:K.role==="model"&&!K.text?h.jsxs("div",{className:"flex gap-1.5 h-5 items-center",children:[h.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"}),h.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-100"}),h.jsx("div",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-200"})]}):Gr(K)}),h.jsxs("div",{className:`flex items-center gap-2 mt-1 px-1 ${K.role==="user"?"justify-end":"justify-start"}`,children:[K.role==="model"&&K.source&&K.source!=="gemini"&&h.jsxs("div",{className:"relative",children:[h.jsx("button",{onClick:()=>Yc(K.id),className:`p-1.5 rounded-full transition-all ${re===K.id?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-400 hover:text-slate-600"}`,title:"Info Sumber",children:h.jsx(SC,{className:"w-3.5 h-3.5"})}),re===K.id&&h.jsxs("div",{className:"absolute bottom-8 left-0 z-10 bg-white border border-slate-200 rounded-xl shadow-xl p-2 min-w-[120px] animate-fade-in-up origin-bottom-left flex flex-col gap-1",children:[h.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider px-1",children:"Sumber Data"}),h.jsxs("div",{className:"flex items-center gap-2 p-1.5 rounded-lg bg-slate-50 text-xs font-semibold text-slate-700",children:[K.source==="wikipedia"&&h.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center font-serif font-bold text-slate-600",children:"W"}),K.source==="knowledge_base"&&h.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center text-indigo-500 font-bold",children:"DB"}),K.source==="google_search"&&h.jsx(mx,{className:"w-3.5 h-3.5 text-orange-500"}),K.source==="weather"&&h.jsx(IC,{className:"w-3.5 h-3.5 text-blue-400"}),K.source==="country_fact"&&h.jsx(CC,{className:"w-3.5 h-3.5 text-red-500"}),h.jsx("span",{children:K.source==="wikipedia"?"Wikipedia":K.source==="knowledge_base"?"Database":K.source==="weather"?"Open-Meteo":K.source==="country_fact"?"RestCountries":K.source==="google_search"?"Google":"Unknown"})]})]})]}),K.text&&h.jsx("button",{onClick:()=>Jc(K.text,K.id),className:`p-1.5 rounded-full transition-all ${ee===K.id?"bg-green-100 text-green-600":"bg-white border border-slate-100 text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:ee===K.id?h.jsx(Du,{className:"w-3.5 h-3.5"}):h.jsx(gx,{className:"w-3.5 h-3.5"})})]})]})]},K.id)),v&&h.jsxs("div",{className:"w-full animate-fade-in py-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("button",{onClick:hs,className:"text-xs flex items-center gap-1 text-slate-500 hover:text-primary px-3 py-1.5 bg-white border border-slate-200 rounded-full shadow-sm hover:shadow transition-all",children:[h.jsx(za,{className:"w-4 h-4"})," ",ve.back]}),h.jsx("span",{className:"font-bold text-sm text-slate-700 bg-white px-3 py-1 rounded-full border border-slate-100 shadow-sm",children:ve[v.nameKey]})]}),S?h.jsxs("div",{className:"space-y-4",children:[!V&&!k.isProcessing&&h.jsx("div",{className:"bg-slate-100 p-4 rounded-2xl border border-slate-200/60 max-w-sm mx-auto shadow-inner",children:h.jsx("img",{src:`data:${S.mimeType};base64,${S.data}`,className:"rounded-xl max-h-60 mx-auto object-contain shadow-sm"})}),v.id===hn.CREATIVE_REMIX&&!V&&h.jsx("textarea",{className:"w-full bg-white border border-slate-200 rounded-2xl p-4 text-sm focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none shadow-sm transition-all",placeholder:ve.aiPromptPlaceholder,value:A,onChange:K=>R(K.target.value)}),!V&&!k.isProcessing&&h.jsx("button",{onClick:Qc,disabled:v.id===hn.CREATIVE_REMIX&&!A.trim(),className:"w-full py-4 bg-primary text-white rounded-2xl font-bold shadow-xl shadow-slate-900/10 active:scale-95 transition-all hover:-translate-y-0.5",children:ve.generateMagic}),(k.isProcessing||V)&&h.jsx(JV,{originalImage:S,resultImageBase64:V,isProcessing:k.isProcessing,processingText:k.progress,onReset:hs,language:r})]}):h.jsx(KV,{onImageSelect:Ut,language:r})]}),k.isProcessing&&v&&h.jsx("div",{className:"flex gap-4 animate-fade-in pl-5",children:h.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[h.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce"}),h.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-100"}),h.jsx("div",{className:"w-2 h-2 bg-slate-300 rounded-full animate-bounce delay-200"})]})}),h.jsx("div",{ref:Me})]})}),!v&&h.jsx("div",{className:"shrink-0 w-full px-4 pb-6 pt-2 z-40 bg-slate-50/50 backdrop-blur-sm",children:h.jsxs("div",{className:"max-w-3xl mx-auto",children:[Ce&&h.jsx("div",{className:"mb-3 animate-fade-in-up",children:h.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 flex items-center justify-between shadow-sm",children:[h.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[h.jsx(_c,{className:"w-5 h-5"}),h.jsx("span",{className:"text-xs font-bold",children:"Limit Chat Habis."})]}),h.jsx("button",{onClick:()=>yn(!0),className:"text-xs font-bold text-white bg-red-500 hover:bg-red-600 px-3 py-1.5 rounded-lg transition-colors shadow-sm",children:"Cara Dapet API Key?"})]})}),h.jsxs("form",{onSubmit:Pi,className:`relative flex flex-col bg-white rounded-3xl border shadow-2xl shadow-slate-200/60 transition-all duration-300 focus-within:shadow-xl ${Ce?"border-red-200 opacity-80":"border-slate-200 focus-within:border-slate-300"}`,children:[J.length>0&&h.jsxs("div",{className:"p-3 border-b border-slate-100 bg-slate-50 flex items-start gap-3 animate-fade-in overflow-x-auto custom-scrollbar rounded-t-[22px]",children:[J.map((K,xe)=>h.jsxs("div",{className:"relative group flex-shrink-0",children:[h.jsx("img",{src:`data:${K.mimeType};base64,${K.data}`,alt:"Preview",className:"h-16 w-16 object-cover rounded-lg border border-slate-200 shadow-sm"}),h.jsx("button",{type:"button",onClick:()=>ds(xe),className:"absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full p-0.5 shadow-md hover:bg-red-600 transition-colors",children:h.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},xe)),J.length<3&&h.jsx("div",{onClick:_o,className:"h-16 w-16 rounded-lg border-2 border-dashed border-slate-300 flex items-center justify-center cursor-pointer hover:border-primary hover:bg-white transition-colors flex-shrink-0 text-slate-400 hover:text-primary",children:h.jsx("span",{className:"text-xs font-bold",children:"+"})})]}),h.jsxs("div",{className:"flex items-end gap-1.5 p-2.5",children:[h.jsxs("div",{className:"relative",children:[h.jsx("button",{type:"button",onClick:()=>j(!H),className:"p-2.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors flex-shrink-0 mb-0.5",children:h.jsx(_C,{className:"w-5 h-5"})}),H&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>j(!1)}),h.jsxs("div",{className:"absolute bottom-12 left-0 w-48 bg-white border border-slate-200 rounded-xl shadow-xl z-[60] py-1 overflow-hidden animate-fade-in-up origin-bottom-left",children:[h.jsxs("button",{type:"button",onClick:()=>{Eo(),j(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-red-500 hover:bg-red-50 flex items-center gap-2",children:[h.jsx(wp,{className:"w-4 h-4"}),"Clear Chat"]}),h.jsxs("button",{type:"button",onClick:()=>{De(!0),j(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-2",children:[h.jsx(s0,{className:"w-4 h-4"}),"Settings"]})]})]})]}),h.jsx("input",{type:"file",ref:Ye,className:"hidden",accept:"image/*",multiple:!0,onChange:wo}),h.jsx("button",{type:"button",onClick:_o,className:"p-2.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-full transition-colors flex-shrink-0 mb-0.5",children:h.jsx(o0,{className:"w-5 h-5"})}),h.jsx("textarea",{ref:Ae,value:M,onChange:K=>b(K.target.value),onKeyDown:K=>{K.key==="Enter"&&!K.shiftKey&&(K.preventDefault(),Pi(K))},disabled:Ce,placeholder:Ce?"Chat Terkunci (Limit Habis). Tambah Key dulu ya.":z?"(Knowledge Mode Active)":J.length>0?ve.aiPromptPlaceholder:ve.chatPlaceholder,className:"flex-1 bg-transparent border-none focus:ring-0 focus:outline-none resize-none max-h-32 py-3 px-2 text-sm text-primary placeholder:text-slate-400 leading-relaxed custom-scrollbar disabled:text-slate-400 disabled:cursor-not-allowed",rows:1,style:{minHeight:"44px",overflowY:"auto"}}),k.isProcessing&&!v?h.jsx("button",{type:"button",onClick:Xc,className:"p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 bg-slate-900 text-white hover:bg-slate-700 animate-pulse",title:"Stop Generation",children:h.jsx(kC,{className:"w-5 h-5"})}):h.jsx("button",{type:"submit",disabled:!M.trim()&&J.length===0||k.isProcessing||Ce,className:`p-2.5 rounded-full transition-all shadow-md active:scale-90 flex-shrink-0 mb-0.5 ${z?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-primary text-white hover:bg-slate-800 disabled:bg-slate-200 disabled:text-slate-400 disabled:cursor-not-allowed"}`,children:h.jsx("svg",{className:"w-5 h-5 transform rotate-90",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})]})})]})]})}function Gl(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var C1={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(u,d){if(!i[u]){if(!r[u]){var g=typeof Gl=="function"&&Gl;if(!d&&g)return g(u,!0);if(a)return a(u,!0);var m=new Error("Cannot find module '"+u+"'");throw m.code="MODULE_NOT_FOUND",m}var y=i[u]={exports:{}};r[u][0].call(y.exports,function(x){var _=r[u][1][x];return o(_||x)},y,y.exports,n,r,i,s)}return i[u].exports}for(var a=typeof Gl=="function"&&Gl,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u,d,g,m,y,x,_,T=[],v=0,E=l.length,S=E,P=s.getTypeOf(l)!=="string";v<l.length;)S=E-v,g=P?(u=l[v++],d=v<E?l[v++]:0,v<E?l[v++]:0):(u=l.charCodeAt(v++),d=v<E?l.charCodeAt(v++):0,v<E?l.charCodeAt(v++):0),m=u>>2,y=(3&u)<<4|d>>4,x=1<S?(15&d)<<2|g>>6:64,_=2<S?63&g:64,T.push(a.charAt(m)+a.charAt(y)+a.charAt(x)+a.charAt(_));return T.join("")},i.decode=function(l){var u,d,g,m,y,x,_=0,T=0,v="data:";if(l.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var E,S=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&S--,l.charAt(l.length-2)===a.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=o.uint8array?new Uint8Array(0|S):new Array(0|S);_<l.length;)u=a.indexOf(l.charAt(_++))<<2|(m=a.indexOf(l.charAt(_++)))>>4,d=(15&m)<<4|(y=a.indexOf(l.charAt(_++)))>>2,g=(3&y)<<6|(x=a.indexOf(l.charAt(_++))),E[T++]=u,y!==64&&(E[T++]=d),x!==64&&(E[T++]=g);return E}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(d,g,m,y,x){this.compressedSize=d,this.uncompressedSize=g,this.crc32=m,this.compression=y,this.compressedContent=x}u.prototype={getContentWorker:function(){var d=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),g=this;return d.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,g,m){return d.pipe(new a).pipe(new l("uncompressedSize")).pipe(g.compressWorker(m)).pipe(new l("compressedSize")).withStreamInfo("compression",g)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(u,d,g,m){var y=o,x=m+g;u^=-1;for(var _=m;_<x;_++)u=u>>>8^y[255&(u^d[_])];return-1^u}(0|l,a,a.length,0):function(u,d,g,m){var y=o,x=m+g;u^=-1;for(var _=m;_<x;_++)u=u>>>8^y[255&(u^d.charCodeAt(_))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),u=s?"uint8array":"array";function d(g,m){l.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=m,this.meta={}}i.magic="\b\0",a.inherits(d,l),d.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,g.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(m){g.push({data:m,meta:g.meta})}},i.compressWorker=function(g){return new d("Deflate",g)},i.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(y,x){var _,T="";for(_=0;_<x;_++)T+=String.fromCharCode(255&y),y>>>=8;return T}function o(y,x,_,T,v,E){var S,P,V=y.file,O=y.compression,A=E!==u.utf8encode,R=a.transformTo("string",E(V.name)),k=a.transformTo("string",u.utf8encode(V.name)),D=V.comment,F=a.transformTo("string",E(D)),N=a.transformTo("string",u.utf8encode(D)),M=k.length!==V.name.length,b=N.length!==D.length,J="",pe="",ee="",Z=V.dir,G=V.date,ue={crc32:0,compressedSize:0,uncompressedSize:0};x&&!_||(ue.crc32=y.crc32,ue.compressedSize=y.compressedSize,ue.uncompressedSize=y.uncompressedSize);var H=0;x&&(H|=8),A||!M&&!b||(H|=2048);var j=0,re=0;Z&&(j|=16),v==="UNIX"?(re=798,j|=function(le,Me){var Ye=le;return le||(Ye=Me?16893:33204),(65535&Ye)<<16}(V.unixPermissions,Z)):(re=20,j|=function(le){return 63&(le||0)}(V.dosPermissions)),S=G.getUTCHours(),S<<=6,S|=G.getUTCMinutes(),S<<=5,S|=G.getUTCSeconds()/2,P=G.getUTCFullYear()-1980,P<<=4,P|=G.getUTCMonth()+1,P<<=5,P|=G.getUTCDate(),M&&(pe=s(1,1)+s(d(R),4)+k,J+="up"+s(pe.length,2)+pe),b&&(ee=s(1,1)+s(d(F),4)+N,J+="uc"+s(ee.length,2)+ee);var de="";return de+=`
\0`,de+=s(H,2),de+=O.magic,de+=s(S,2),de+=s(P,2),de+=s(ue.crc32,4),de+=s(ue.compressedSize,4),de+=s(ue.uncompressedSize,4),de+=s(R.length,2),de+=s(J.length,2),{fileRecord:g.LOCAL_FILE_HEADER+de+R+J,dirRecord:g.CENTRAL_FILE_HEADER+s(re,2)+de+s(F.length,2)+"\0\0\0\0"+s(j,4)+s(T,4)+R+J+F}}var a=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),g=n("../signature");function m(y,x,_,T){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=_,this.encodeFileName=T,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(m,l),m.prototype.push=function(y){var x=y.meta.percent||0,_=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,l.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:_?(x+100*(_-T-1))/_:100}}))},m.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var x=this.streamFiles&&!y.file.dir;if(x){var _=o(y,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(y){this.accumulate=!1;var x=this.streamFiles&&!y.file.dir,_=o(y,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),x)this.push({data:function(T){return g.DATA_DESCRIPTOR+s(T.crc32,4)+s(T.compressedSize,4)+s(T.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var y=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var _=this.bytesWritten-y,T=function(v,E,S,P,V){var O=a.transformTo("string",V(P));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(v,2)+s(v,2)+s(E,4)+s(S,4)+s(O.length,2)+O}(this.dirRecords.length,_,y,this.zipComment,this.encodeFileName);this.push({data:T,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(y){this._sources.push(y);var x=this;return y.on("data",function(_){x.processChunk(_)}),y.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),y.on("error",function(_){x.error(_)}),this},m.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(y){var x=this._sources;if(!l.prototype.error.call(this,y))return!1;for(var _=0;_<x.length;_++)try{x[_].error(y)}catch{}return!0},m.prototype.lock=function(){l.prototype.lock.call(this);for(var y=this._sources,x=0;x<y.length;x++)y[x].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,l,u){var d=new o(l.streamFiles,u,l.platform,l.encodeFileName),g=0;try{a.forEach(function(m,y){g++;var x=function(E,S){var P=E||S,V=s[P];if(!V)throw new Error(P+" is not a valid compression method !");return V}(y.options.compression,l.compression),_=y.options.compressionOptions||l.compressionOptions||{},T=y.dir,v=y.date;y._compressWorker(x,_).withStreamInfo("file",{name:m,dir:T,date:v,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(d)}),d.entriesCount=g}catch(m){d.error(m)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function g(m){return new o.Promise(function(y,x){var _=m.decompressed.getContentWorker().pipe(new u);_.on("error",function(T){x(T)}).on("end",function(){_.streamInfo.crc32!==m.decompressed.crc32?x(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(m,y){var x=this;return y=s.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(m)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",m,!0,y.optimizedBinaryString,y.base64).then(function(_){var T=new l(y);return T.load(_),T}).then(function(_){var T=[o.Promise.resolve(_)],v=_.files;if(y.checkCRC32)for(var E=0;E<v.length;E++)T.push(g(v[E]));return o.Promise.all(T)}).then(function(_){for(var T=_.shift(),v=T.files,E=0;E<v.length;E++){var S=v[E],P=S.fileNameStr,V=s.resolve(S.fileNameStr);x.file(V,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:y.createFolders}),S.dir||(x.file(V).unsafeOriginalName=P)}return T.zipComment.length&&(x.comment=T.zipComment),x})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,l,u){s.call(this,l),this._helper=a;var d=this;a.on("data",function(g,m){d.push(g)||d._helper.pause(),u&&u(m)}).on("error",function(g){d.emit("error",g)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(V,O,A){var R,k=a.getTypeOf(O),D=a.extend(A||{},d);D.date=D.date||new Date,D.compression!==null&&(D.compression=D.compression.toUpperCase()),typeof D.unixPermissions=="string"&&(D.unixPermissions=parseInt(D.unixPermissions,8)),D.unixPermissions&&16384&D.unixPermissions&&(D.dir=!0),D.dosPermissions&&16&D.dosPermissions&&(D.dir=!0),D.dir&&(V=v(V)),D.createFolders&&(R=T(V))&&E.call(this,R,!0);var F=k==="string"&&D.binary===!1&&D.base64===!1;A&&A.binary!==void 0||(D.binary=!F),(O instanceof g&&O.uncompressedSize===0||D.dir||!O||O.length===0)&&(D.base64=!1,D.binary=!0,O="",D.compression="STORE",k="string");var N=null;N=O instanceof g||O instanceof l?O:x.isNode&&x.isStream(O)?new _(V,O):a.prepareContent(V,O,D.binary,D.optimizedBinaryString,D.base64);var M=new m(V,N,D);this.files[V]=M}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),g=n("./compressedObject"),m=n("./zipObject"),y=n("./generate"),x=n("./nodejsUtils"),_=n("./nodejs/NodejsStreamInputAdapter"),T=function(V){V.slice(-1)==="/"&&(V=V.substring(0,V.length-1));var O=V.lastIndexOf("/");return 0<O?V.substring(0,O):""},v=function(V){return V.slice(-1)!=="/"&&(V+="/"),V},E=function(V,O){return O=O!==void 0?O:d.createFolders,V=v(V),this.files[V]||s.call(this,V,null,{dir:!0,createFolders:O}),this.files[V]};function S(V){return Object.prototype.toString.call(V)==="[object RegExp]"}var P={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(V){var O,A,R;for(O in this.files)R=this.files[O],(A=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&V(A,R)},filter:function(V){var O=[];return this.forEach(function(A,R){V(A,R)&&O.push(R)}),O},file:function(V,O,A){if(arguments.length!==1)return V=this.root+V,s.call(this,V,O,A),this;if(S(V)){var R=V;return this.filter(function(D,F){return!F.dir&&R.test(D)})}var k=this.files[this.root+V];return k&&!k.dir?k:null},folder:function(V){if(!V)return this;if(S(V))return this.filter(function(k,D){return D.dir&&V.test(k)});var O=this.root+V,A=E.call(this,O),R=this.clone();return R.root=A.name,R},remove:function(V){V=this.root+V;var O=this.files[V];if(O||(V.slice(-1)!=="/"&&(V+="/"),O=this.files[V]),O&&!O.dir)delete this.files[V];else for(var A=this.filter(function(k,D){return D.name.slice(0,V.length)===V}),R=0;R<A.length;R++)delete this.files[A[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(V){var O,A={};try{if((A=a.extend(V||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");a.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var R=A.comment||this.comment||"";O=y.generateWorker(this,A,R)}catch(k){(O=new l("error")).error(k)}return new u(O,A.type||"string",A.mimeType)},generateAsync:function(V,O){return this.generateInternalStream(V).accumulate(O)},generateNodeStream:function(V,O){return(V=V||{}).type||(V.type="nodebuffer"),this.generateInternalStream(V).toNodejsStream(O)}};r.exports=P},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),d=a.charCodeAt(2),g=a.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===l&&this.data[m+1]===u&&this.data[m+2]===d&&this.data[m+3]===g)return m-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),d=a.charCodeAt(2),g=a.charCodeAt(3),m=this.readData(4);return l===m[0]&&u===m[1]&&d===m[2]&&g===m[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(g){var m=s.getTypeOf(g);return s.checkSupport(m),m!=="string"||o.uint8array?m==="nodebuffer"?new u(g):o.uint8array?new d(s.transformTo("uint8array",g)):new a(s.transformTo("array",g)):new l(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=s.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),u=n("../support"),d=n("../external"),g=null;if(u.nodestream)try{g=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(x,_){return new d.Promise(function(T,v){var E=[],S=x._internalType,P=x._outputType,V=x._mimeType;x.on("data",function(O,A){E.push(O),_&&_(A)}).on("error",function(O){E=[],v(O)}).on("end",function(){try{var O=function(A,R,k){switch(A){case"blob":return s.newBlob(s.transformTo("arraybuffer",R),k);case"base64":return l.encode(R);default:return s.transformTo(A,R)}}(P,function(A,R){var k,D=0,F=null,N=0;for(k=0;k<R.length;k++)N+=R[k].length;switch(A){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(F=new Uint8Array(N),k=0;k<R.length;k++)F.set(R[k],D),D+=R[k].length;return F;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+A+"'")}}(S,E),V);T(O)}catch(A){v(A)}E=[]}).resume()})}function y(x,_,T){var v=_;switch(_){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=_,this._mimeType=T,s.checkSupport(v),this._worker=x.pipe(new o(v)),x.lock()}catch(E){this._worker=new a("error"),this._worker.error(E)}}y.prototype={accumulate:function(x){return m(this,x)},on:function(x,_){var T=this;return x==="data"?this._worker.on(x,function(v){_.call(T,v.data,v.meta)}):this._worker.on(x,function(){s.delay(_,arguments,T)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(x){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},x)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function g(){l.call(this,"utf-8 decode"),this.leftOver=null}function m(){l.call(this,"utf-8 encode")}i.utf8encode=function(y){return o.nodebuffer?a.newBufferFrom(y,"utf-8"):function(x){var _,T,v,E,S,P=x.length,V=0;for(E=0;E<P;E++)(64512&(T=x.charCodeAt(E)))==55296&&E+1<P&&(64512&(v=x.charCodeAt(E+1)))==56320&&(T=65536+(T-55296<<10)+(v-56320),E++),V+=T<128?1:T<2048?2:T<65536?3:4;for(_=o.uint8array?new Uint8Array(V):new Array(V),E=S=0;S<V;E++)(64512&(T=x.charCodeAt(E)))==55296&&E+1<P&&(64512&(v=x.charCodeAt(E+1)))==56320&&(T=65536+(T-55296<<10)+(v-56320),E++),T<128?_[S++]=T:(T<2048?_[S++]=192|T>>>6:(T<65536?_[S++]=224|T>>>12:(_[S++]=240|T>>>18,_[S++]=128|T>>>12&63),_[S++]=128|T>>>6&63),_[S++]=128|63&T);return _}(y)},i.utf8decode=function(y){return o.nodebuffer?s.transformTo("nodebuffer",y).toString("utf-8"):function(x){var _,T,v,E,S=x.length,P=new Array(2*S);for(_=T=0;_<S;)if((v=x[_++])<128)P[T++]=v;else if(4<(E=u[v]))P[T++]=65533,_+=E-1;else{for(v&=E===2?31:E===3?15:7;1<E&&_<S;)v=v<<6|63&x[_++],E--;1<E?P[T++]=65533:v<65536?P[T++]=v:(v-=65536,P[T++]=55296|v>>10&1023,P[T++]=56320|1023&v)}return P.length!==T&&(P.subarray?P=P.subarray(0,T):P.length=T),s.applyFromCharCode(P)}(y=s.transformTo(o.uint8array?"uint8array":"array",y))},s.inherits(g,l),g.prototype.processChunk=function(y){var x=s.transformTo(o.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var _=x;(x=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),x.set(_,this.leftOver.length)}else x=this.leftOver.concat(x);this.leftOver=null}var T=function(E,S){var P;for((S=S||E.length)>E.length&&(S=E.length),P=S-1;0<=P&&(192&E[P])==128;)P--;return P<0||P===0?S:P+u[E[P]]>S?P:S}(x),v=x;T!==x.length&&(o.uint8array?(v=x.subarray(0,T),this.leftOver=x.subarray(T,x.length)):(v=x.slice(0,T),this.leftOver=x.slice(T,x.length))),this.push({data:i.utf8decode(v),meta:y.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=g,s.inherits(m,l),m.prototype.processChunk=function(y){this.push({data:i.utf8encode(y.data),meta:y.meta})},i.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function u(_){return _}function d(_,T){for(var v=0;v<_.length;++v)T[v]=255&_.charCodeAt(v);return T}n("setimmediate"),i.newBlob=function(_,T){i.checkSupport("blob");try{return new Blob([_],{type:T})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(_),v.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(_,T,v){var E=[],S=0,P=_.length;if(P<=v)return String.fromCharCode.apply(null,_);for(;S<P;)T==="array"||T==="nodebuffer"?E.push(String.fromCharCode.apply(null,_.slice(S,Math.min(S+v,P)))):E.push(String.fromCharCode.apply(null,_.subarray(S,Math.min(S+v,P)))),S+=v;return E.join("")},stringifyByChar:function(_){for(var T="",v=0;v<_.length;v++)T+=String.fromCharCode(_[v]);return T},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function m(_){var T=65536,v=i.getTypeOf(_),E=!0;if(v==="uint8array"?E=g.applyCanBeUsed.uint8array:v==="nodebuffer"&&(E=g.applyCanBeUsed.nodebuffer),E)for(;1<T;)try{return g.stringifyByChunk(_,v,T)}catch{T=Math.floor(T/2)}return g.stringifyByChar(_)}function y(_,T){for(var v=0;v<_.length;v++)T[v]=_[v];return T}i.applyFromCharCode=m;var x={};x.string={string:u,array:function(_){return d(_,new Array(_.length))},arraybuffer:function(_){return x.string.uint8array(_).buffer},uint8array:function(_){return d(_,new Uint8Array(_.length))},nodebuffer:function(_){return d(_,a.allocBuffer(_.length))}},x.array={string:m,array:u,arraybuffer:function(_){return new Uint8Array(_).buffer},uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return a.newBufferFrom(_)}},x.arraybuffer={string:function(_){return m(new Uint8Array(_))},array:function(_){return y(new Uint8Array(_),new Array(_.byteLength))},arraybuffer:u,uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return a.newBufferFrom(new Uint8Array(_))}},x.uint8array={string:m,array:function(_){return y(_,new Array(_.length))},arraybuffer:function(_){return _.buffer},uint8array:u,nodebuffer:function(_){return a.newBufferFrom(_)}},x.nodebuffer={string:m,array:function(_){return y(_,new Array(_.length))},arraybuffer:function(_){return x.nodebuffer.uint8array(_).buffer},uint8array:function(_){return y(_,new Uint8Array(_.length))},nodebuffer:u},i.transformTo=function(_,T){if(T=T||"",!_)return T;i.checkSupport(_);var v=i.getTypeOf(T);return x[v][_](T)},i.resolve=function(_){for(var T=_.split("/"),v=[],E=0;E<T.length;E++){var S=T[E];S==="."||S===""&&E!==0&&E!==T.length-1||(S===".."?v.pop():v.push(S))}return v.join("/")},i.getTypeOf=function(_){return typeof _=="string"?"string":Object.prototype.toString.call(_)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(_)?"nodebuffer":s.uint8array&&_ instanceof Uint8Array?"uint8array":s.arraybuffer&&_ instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(_){if(!s[_.toLowerCase()])throw new Error(_+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(_){var T,v,E="";for(v=0;v<(_||"").length;v++)E+="\\x"+((T=_.charCodeAt(v))<16?"0":"")+T.toString(16).toUpperCase();return E},i.delay=function(_,T,v){setImmediate(function(){_.apply(v||null,T||[])})},i.inherits=function(_,T){function v(){}v.prototype=T.prototype,_.prototype=new v},i.extend=function(){var _,T,v={};for(_=0;_<arguments.length;_++)for(T in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],T)&&v[T]===void 0&&(v[T]=arguments[_][T]);return v},i.prepareContent=function(_,T,v,E,S){return l.Promise.resolve(T).then(function(P){return s.blob&&(P instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(P))!==-1)&&typeof FileReader<"u"?new l.Promise(function(V,O){var A=new FileReader;A.onload=function(R){V(R.target.result)},A.onerror=function(R){O(R.target.error)},A.readAsArrayBuffer(P)}):P}).then(function(P){var V=i.getTypeOf(P);return V?(V==="arraybuffer"?P=i.transformTo("uint8array",P):V==="string"&&(S?P=o.decode(P):v&&E!==!0&&(P=function(O){return d(O,s.uint8array?new Uint8Array(O.length):new Array(O.length))}(P))),P):l.Promise.reject(new Error("Can't read the data of '"+_+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),u=n("./support");function d(g){this.files=[],this.loadOptions=g}d.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(m)+", expected "+o.pretty(g)+")")}},isSignature:function(g,m){var y=this.reader.index;this.reader.setIndex(g);var x=this.reader.readString(4)===m;return this.reader.setIndex(y),x},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),m=u.uint8array?"uint8array":"array",y=o.transformTo(m,g);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,m,y,x=this.zip64EndOfCentralSize-44;0<x;)g=this.reader.readInt(2),m=this.reader.readInt(4),y=this.reader.readData(m),this.zip64ExtensibleData[g]={id:g,length:m,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,m;for(g=0;g<this.files.length;g++)m=this.files[g],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(g=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var m=g;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var x=m-y;if(0<x)this.isSignature(m,a.CENTRAL_FILE_HEADER)||(this.reader.zero=x);else if(x<0)throw new Error("Corrupted zip: missing "+Math.abs(x)+" bytes.")},prepareReader:function(g){this.reader=s(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),d=n("./compressions"),g=n("./support");function m(y,x){this.options=y,this.loadOptions=x}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var x,_;if(y.skip(22),this.fileNameLength=y.readInt(2),_=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(_),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((x=function(T){for(var v in d)if(Object.prototype.hasOwnProperty.call(d,v)&&d[v].magic===T)return d[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,x,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var x=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(x),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var x,_,T,v=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<v;)x=y.readInt(2),_=y.readInt(2),T=y.readData(_),this.extraFields[x]={id:x,length:_,value:T};y.setIndex(v)},handleUTF8:function(){var y=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var x=this.findExtraFieldUnicodePath();if(x!==null)this.fileNameStr=x;else{var _=o.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var v=o.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var x=s(y.value);return x.readInt(1)!==1||l(this.fileName)!==x.readInt(4)?null:u.utf8decode(x.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var x=s(y.value);return x.readInt(1)!==1||l(this.fileComment)!==x.readInt(4)?null:u.utf8decode(x.readData(y.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(x,_,T){this.name=x,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=_,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");s.prototype={internalStream:function(x){var _=null,T="string";try{if(!x)throw new Error("No output type specified.");var v=(T=x.toLowerCase())==="string"||T==="text";T!=="binarystring"&&T!=="text"||(T="string"),_=this._decompressWorker();var E=!this._dataBinary;E&&!v&&(_=_.pipe(new l.Utf8EncodeWorker)),!E&&v&&(_=_.pipe(new l.Utf8DecodeWorker))}catch(S){(_=new d("error")).error(S)}return new o(_,T,"")},async:function(x,_){return this.internalStream(x).accumulate(_)},nodeStream:function(x,_){return this.internalStream(x||"nodebuffer").toNodejsStream(_)},_compressWorker:function(x,_){if(this._data instanceof u&&this._data.compression.magic===x.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(T,x,_)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<g.length;y++)s.prototype[g[y]]=m;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var u=0,d=new l(x),g=s.document.createTextNode("");d.observe(g,{characterData:!0}),o=function(){g.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var _=s.document.createElement("script");_.onreadystatechange=function(){x(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},s.document.documentElement.appendChild(_)}:function(){setTimeout(x,0)};else{var m=new s.MessageChannel;m.port1.onmessage=x,o=function(){m.port2.postMessage(0)}}var y=[];function x(){var _,T;a=!0;for(var v=y.length;v;){for(T=y,y=[],_=-1;++_<v;)T[_]();v=y.length}a=!1}r.exports=function(_){y.push(_)!==1||a||o()}}).call(this,typeof Ir<"u"?Ir:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function g(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,v!==o&&_(this,v)}function m(v,E,S){this.promise=v,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function y(v,E,S){s(function(){var P;try{P=E(S)}catch(V){return a.reject(v,V)}P===v?a.reject(v,new TypeError("Cannot resolve promise with itself")):a.resolve(v,P)})}function x(v){var E=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof E=="function")return function(){E.apply(v,arguments)}}function _(v,E){var S=!1;function P(A){S||(S=!0,a.reject(v,A))}function V(A){S||(S=!0,a.resolve(v,A))}var O=T(function(){E(V,P)});O.status==="error"&&P(O.value)}function T(v,E){var S={};try{S.value=v(E),S.status="success"}catch(P){S.status="error",S.value=P}return S}(r.exports=g).prototype.finally=function(v){if(typeof v!="function")return this;var E=this.constructor;return this.then(function(S){return E.resolve(v()).then(function(){return S})},function(S){return E.resolve(v()).then(function(){throw S})})},g.prototype.catch=function(v){return this.then(null,v)},g.prototype.then=function(v,E){if(typeof v!="function"&&this.state===u||typeof E!="function"&&this.state===l)return this;var S=new this.constructor(o);return this.state!==d?y(S,this.state===u?v:E,this.outcome):this.queue.push(new m(S,v,E)),S},m.prototype.callFulfilled=function(v){a.resolve(this.promise,v)},m.prototype.otherCallFulfilled=function(v){y(this.promise,this.onFulfilled,v)},m.prototype.callRejected=function(v){a.reject(this.promise,v)},m.prototype.otherCallRejected=function(v){y(this.promise,this.onRejected,v)},a.resolve=function(v,E){var S=T(x,E);if(S.status==="error")return a.reject(v,S.value);var P=S.value;if(P)_(v,P);else{v.state=u,v.outcome=E;for(var V=-1,O=v.queue.length;++V<O;)v.queue[V].callFulfilled(E)}return v},a.reject=function(v,E){v.state=l,v.outcome=E;for(var S=-1,P=v.queue.length;++S<P;)v.queue[S].callRejected(E);return v},g.resolve=function(v){return v instanceof this?v:a.resolve(new this(o),v)},g.reject=function(v){var E=new this(o);return a.reject(E,v)},g.all=function(v){var E=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=v.length,P=!1;if(!S)return this.resolve([]);for(var V=new Array(S),O=0,A=-1,R=new this(o);++A<S;)k(v[A],A);return R;function k(D,F){E.resolve(D).then(function(N){V[F]=N,++O!==S||P||(P=!0,a.resolve(R,V))},function(N){P||(P=!0,a.reject(R,N))})}},g.race=function(v){var E=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=v.length,P=!1;if(!S)return this.resolve([]);for(var V=-1,O=new this(o);++V<S;)A=v[V],E.resolve(A).then(function(R){P||(P=!0,a.resolve(O,R))},function(R){P||(P=!0,a.reject(O,R))});var A;return O}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,g=0,m=-1,y=0,x=8;function _(v){if(!(this instanceof _))return new _(v);this.options=o.assign({level:m,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},v||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var S=s.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(S!==g)throw new Error(l[S]);if(E.header&&s.deflateSetHeader(this.strm,E.header),E.dictionary){var P;if(P=typeof E.dictionary=="string"?a.string2buf(E.dictionary):d.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(S=s.deflateSetDictionary(this.strm,P))!==g)throw new Error(l[S]);this._dict_set=!0}}function T(v,E){var S=new _(E);if(S.push(v,!0),S.err)throw S.msg||l[S.err];return S.result}_.prototype.push=function(v,E){var S,P,V=this.strm,O=this.options.chunkSize;if(this.ended)return!1;P=E===~~E?E:E===!0?4:0,typeof v=="string"?V.input=a.string2buf(v):d.call(v)==="[object ArrayBuffer]"?V.input=new Uint8Array(v):V.input=v,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new o.Buf8(O),V.next_out=0,V.avail_out=O),(S=s.deflate(V,P))!==1&&S!==g)return this.onEnd(S),!(this.ended=!0);V.avail_out!==0&&(V.avail_in!==0||P!==4&&P!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(V.output,V.next_out))):this.onData(o.shrinkBuf(V.output,V.next_out)))}while((0<V.avail_in||V.avail_out===0)&&S!==1);return P===4?(S=s.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===g):P!==2||(this.onEnd(g),!(V.avail_out=0))},_.prototype.onData=function(v){this.chunks.push(v)},_.prototype.onEnd=function(v){v===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Deflate=_,i.deflate=T,i.deflateRaw=function(v,E){return(E=E||{}).raw=!0,T(v,E)},i.gzip=function(v,E){return(E=E||{}).gzip=!0,T(v,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),g=n("./zlib/gzheader"),m=Object.prototype.toString;function y(_){if(!(this instanceof y))return new y(_);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},_||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||_&&_.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&!(15&T.windowBits)&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var v=s.inflateInit2(this.strm,T.windowBits);if(v!==l.Z_OK)throw new Error(u[v]);this.header=new g,s.inflateGetHeader(this.strm,this.header)}function x(_,T){var v=new y(T);if(v.push(_,!0),v.err)throw v.msg||u[v.err];return v.result}y.prototype.push=function(_,T){var v,E,S,P,V,O,A=this.strm,R=this.options.chunkSize,k=this.options.dictionary,D=!1;if(this.ended)return!1;E=T===~~T?T:T===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof _=="string"?A.input=a.binstring2buf(_):m.call(_)==="[object ArrayBuffer]"?A.input=new Uint8Array(_):A.input=_,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(R),A.next_out=0,A.avail_out=R),(v=s.inflate(A,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&k&&(O=typeof k=="string"?a.string2buf(k):m.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,v=s.inflateSetDictionary(this.strm,O)),v===l.Z_BUF_ERROR&&D===!0&&(v=l.Z_OK,D=!1),v!==l.Z_STREAM_END&&v!==l.Z_OK)return this.onEnd(v),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&v!==l.Z_STREAM_END&&(A.avail_in!==0||E!==l.Z_FINISH&&E!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=a.utf8border(A.output,A.next_out),P=A.next_out-S,V=a.buf2string(A.output,S),A.next_out=P,A.avail_out=R-P,P&&o.arraySet(A.output,A.output,S,P,0),this.onData(V)):this.onData(o.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(D=!0)}while((0<A.avail_in||A.avail_out===0)&&v!==l.Z_STREAM_END);return v===l.Z_STREAM_END&&(E=l.Z_FINISH),E===l.Z_FINISH?(v=s.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===l.Z_OK):E!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(A.avail_out=0))},y.prototype.onData=function(_){this.chunks.push(_)},y.prototype.onEnd=function(_){_===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},i.Inflate=y,i.inflate=x,i.inflateRaw=function(_,T){return(T=T||{}).raw=!0,x(_,T)},i.ungzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var g in d)d.hasOwnProperty(g)&&(l[g]=d[g])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,d,g,m){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+g),m);else for(var y=0;y<g;y++)l[m+y]=u[d+y]},flattenChunks:function(l){var u,d,g,m,y,x;for(u=g=0,d=l.length;u<d;u++)g+=l[u].length;for(x=new Uint8Array(g),u=m=0,d=l.length;u<d;u++)y=l[u],x.set(y,m),m+=y.length;return x}},a={arraySet:function(l,u,d,g,m){for(var y=0;y<g;y++)l[m+y]=u[d+y]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(g,m){if(m<65537&&(g.subarray&&a||!g.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(g,m));for(var y="",x=0;x<m;x++)y+=String.fromCharCode(g[x]);return y}l[254]=l[254]=1,i.string2buf=function(g){var m,y,x,_,T,v=g.length,E=0;for(_=0;_<v;_++)(64512&(y=g.charCodeAt(_)))==55296&&_+1<v&&(64512&(x=g.charCodeAt(_+1)))==56320&&(y=65536+(y-55296<<10)+(x-56320),_++),E+=y<128?1:y<2048?2:y<65536?3:4;for(m=new s.Buf8(E),_=T=0;T<E;_++)(64512&(y=g.charCodeAt(_)))==55296&&_+1<v&&(64512&(x=g.charCodeAt(_+1)))==56320&&(y=65536+(y-55296<<10)+(x-56320),_++),y<128?m[T++]=y:(y<2048?m[T++]=192|y>>>6:(y<65536?m[T++]=224|y>>>12:(m[T++]=240|y>>>18,m[T++]=128|y>>>12&63),m[T++]=128|y>>>6&63),m[T++]=128|63&y);return m},i.buf2binstring=function(g){return d(g,g.length)},i.binstring2buf=function(g){for(var m=new s.Buf8(g.length),y=0,x=m.length;y<x;y++)m[y]=g.charCodeAt(y);return m},i.buf2string=function(g,m){var y,x,_,T,v=m||g.length,E=new Array(2*v);for(y=x=0;y<v;)if((_=g[y++])<128)E[x++]=_;else if(4<(T=l[_]))E[x++]=65533,y+=T-1;else{for(_&=T===2?31:T===3?15:7;1<T&&y<v;)_=_<<6|63&g[y++],T--;1<T?E[x++]=65533:_<65536?E[x++]=_:(_-=65536,E[x++]=55296|_>>10&1023,E[x++]=56320|1023&_)}return d(E,x)},i.utf8border=function(g,m){var y;for((m=m||g.length)>g.length&&(m=g.length),y=m-1;0<=y&&(192&g[y])==128;)y--;return y<0||y===0?m:y+l[g[y]]>m?y:m}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,l){for(var u=65535&s|0,d=s>>>16&65535|0,g=0;a!==0;){for(a-=g=2e3<a?2e3:a;d=d+(u=u+o[l++]|0)|0,--g;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,u){var d=s,g=u+l;o^=-1;for(var m=u;m<g;m++)o=o>>>8^d[255&(o^a[m])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),u=n("./crc32"),d=n("./messages"),g=0,m=4,y=0,x=-2,_=-1,T=4,v=2,E=8,S=9,P=286,V=30,O=19,A=2*P+1,R=15,k=3,D=258,F=D+k+1,N=42,M=113,b=1,J=2,pe=3,ee=4;function Z(C,ne){return C.msg=d[ne],ne}function G(C){return(C<<1)-(4<C?9:0)}function ue(C){for(var ne=C.length;0<=--ne;)C[ne]=0}function H(C){var ne=C.state,Y=ne.pending;Y>C.avail_out&&(Y=C.avail_out),Y!==0&&(o.arraySet(C.output,ne.pending_buf,ne.pending_out,Y,C.next_out),C.next_out+=Y,ne.pending_out+=Y,C.total_out+=Y,C.avail_out-=Y,ne.pending-=Y,ne.pending===0&&(ne.pending_out=0))}function j(C,ne){a._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,ne),C.block_start=C.strstart,H(C.strm)}function re(C,ne){C.pending_buf[C.pending++]=ne}function de(C,ne){C.pending_buf[C.pending++]=ne>>>8&255,C.pending_buf[C.pending++]=255&ne}function le(C,ne){var Y,B,U=C.max_chain_length,z=C.strstart,ie=C.prev_length,ae=C.nice_match,W=C.strstart>C.w_size-F?C.strstart-(C.w_size-F):0,oe=C.window,ge=C.w_mask,fe=C.prev,ye=C.strstart+D,Ce=oe[z+ie-1],ke=oe[z+ie];C.prev_length>=C.good_match&&(U>>=2),ae>C.lookahead&&(ae=C.lookahead);do if(oe[(Y=ne)+ie]===ke&&oe[Y+ie-1]===Ce&&oe[Y]===oe[z]&&oe[++Y]===oe[z+1]){z+=2,Y++;do;while(oe[++z]===oe[++Y]&&oe[++z]===oe[++Y]&&oe[++z]===oe[++Y]&&oe[++z]===oe[++Y]&&oe[++z]===oe[++Y]&&oe[++z]===oe[++Y]&&oe[++z]===oe[++Y]&&oe[++z]===oe[++Y]&&z<ye);if(B=D-(ye-z),z=ye-D,ie<B){if(C.match_start=ne,ae<=(ie=B))break;Ce=oe[z+ie-1],ke=oe[z+ie]}}while((ne=fe[ne&ge])>W&&--U!=0);return ie<=C.lookahead?ie:C.lookahead}function Me(C){var ne,Y,B,U,z,ie,ae,W,oe,ge,fe=C.w_size;do{if(U=C.window_size-C.lookahead-C.strstart,C.strstart>=fe+(fe-F)){for(o.arraySet(C.window,C.window,fe,fe,0),C.match_start-=fe,C.strstart-=fe,C.block_start-=fe,ne=Y=C.hash_size;B=C.head[--ne],C.head[ne]=fe<=B?B-fe:0,--Y;);for(ne=Y=fe;B=C.prev[--ne],C.prev[ne]=fe<=B?B-fe:0,--Y;);U+=fe}if(C.strm.avail_in===0)break;if(ie=C.strm,ae=C.window,W=C.strstart+C.lookahead,oe=U,ge=void 0,ge=ie.avail_in,oe<ge&&(ge=oe),Y=ge===0?0:(ie.avail_in-=ge,o.arraySet(ae,ie.input,ie.next_in,ge,W),ie.state.wrap===1?ie.adler=l(ie.adler,ae,ge,W):ie.state.wrap===2&&(ie.adler=u(ie.adler,ae,ge,W)),ie.next_in+=ge,ie.total_in+=ge,ge),C.lookahead+=Y,C.lookahead+C.insert>=k)for(z=C.strstart-C.insert,C.ins_h=C.window[z],C.ins_h=(C.ins_h<<C.hash_shift^C.window[z+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[z+k-1])&C.hash_mask,C.prev[z&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=z,z++,C.insert--,!(C.lookahead+C.insert<k)););}while(C.lookahead<F&&C.strm.avail_in!==0)}function Ye(C,ne){for(var Y,B;;){if(C.lookahead<F){if(Me(C),C.lookahead<F&&ne===g)return b;if(C.lookahead===0)break}if(Y=0,C.lookahead>=k&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+k-1])&C.hash_mask,Y=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),Y!==0&&C.strstart-Y<=C.w_size-F&&(C.match_length=le(C,Y)),C.match_length>=k)if(B=a._tr_tally(C,C.strstart-C.match_start,C.match_length-k),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=k){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+k-1])&C.hash_mask,Y=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else B=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(B&&(j(C,!1),C.strm.avail_out===0))return b}return C.insert=C.strstart<k-1?C.strstart:k-1,ne===m?(j(C,!0),C.strm.avail_out===0?pe:ee):C.last_lit&&(j(C,!1),C.strm.avail_out===0)?b:J}function Ae(C,ne){for(var Y,B,U;;){if(C.lookahead<F){if(Me(C),C.lookahead<F&&ne===g)return b;if(C.lookahead===0)break}if(Y=0,C.lookahead>=k&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+k-1])&C.hash_mask,Y=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=k-1,Y!==0&&C.prev_length<C.max_lazy_match&&C.strstart-Y<=C.w_size-F&&(C.match_length=le(C,Y),C.match_length<=5&&(C.strategy===1||C.match_length===k&&4096<C.strstart-C.match_start)&&(C.match_length=k-1)),C.prev_length>=k&&C.match_length<=C.prev_length){for(U=C.strstart+C.lookahead-k,B=a._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-k),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=U&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+k-1])&C.hash_mask,Y=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=k-1,C.strstart++,B&&(j(C,!1),C.strm.avail_out===0))return b}else if(C.match_available){if((B=a._tr_tally(C,0,C.window[C.strstart-1]))&&j(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return b}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(B=a._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<k-1?C.strstart:k-1,ne===m?(j(C,!0),C.strm.avail_out===0?pe:ee):C.last_lit&&(j(C,!1),C.strm.avail_out===0)?b:J}function Ue(C,ne,Y,B,U){this.good_length=C,this.max_lazy=ne,this.nice_length=Y,this.max_chain=B,this.func=U}function De(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*A),this.dyn_dtree=new o.Buf16(2*(2*V+1)),this.bl_tree=new o.Buf16(2*(2*O+1)),ue(this.dyn_ltree),ue(this.dyn_dtree),ue(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(R+1),this.heap=new o.Buf16(2*P+1),ue(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*P+1),ue(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Qe(C){var ne;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=v,(ne=C.state).pending=0,ne.pending_out=0,ne.wrap<0&&(ne.wrap=-ne.wrap),ne.status=ne.wrap?N:M,C.adler=ne.wrap===2?0:1,ne.last_flush=g,a._tr_init(ne),y):Z(C,x)}function kt(C){var ne=Qe(C);return ne===y&&function(Y){Y.window_size=2*Y.w_size,ue(Y.head),Y.max_lazy_match=s[Y.level].max_lazy,Y.good_match=s[Y.level].good_length,Y.nice_match=s[Y.level].nice_length,Y.max_chain_length=s[Y.level].max_chain,Y.strstart=0,Y.block_start=0,Y.lookahead=0,Y.insert=0,Y.match_length=Y.prev_length=k-1,Y.match_available=0,Y.ins_h=0}(C.state),ne}function rt(C,ne,Y,B,U,z){if(!C)return x;var ie=1;if(ne===_&&(ne=6),B<0?(ie=0,B=-B):15<B&&(ie=2,B-=16),U<1||S<U||Y!==E||B<8||15<B||ne<0||9<ne||z<0||T<z)return Z(C,x);B===8&&(B=9);var ae=new De;return(C.state=ae).strm=C,ae.wrap=ie,ae.gzhead=null,ae.w_bits=B,ae.w_size=1<<ae.w_bits,ae.w_mask=ae.w_size-1,ae.hash_bits=U+7,ae.hash_size=1<<ae.hash_bits,ae.hash_mask=ae.hash_size-1,ae.hash_shift=~~((ae.hash_bits+k-1)/k),ae.window=new o.Buf8(2*ae.w_size),ae.head=new o.Buf16(ae.hash_size),ae.prev=new o.Buf16(ae.w_size),ae.lit_bufsize=1<<U+6,ae.pending_buf_size=4*ae.lit_bufsize,ae.pending_buf=new o.Buf8(ae.pending_buf_size),ae.d_buf=1*ae.lit_bufsize,ae.l_buf=3*ae.lit_bufsize,ae.level=ne,ae.strategy=z,ae.method=Y,kt(C)}s=[new Ue(0,0,0,0,function(C,ne){var Y=65535;for(Y>C.pending_buf_size-5&&(Y=C.pending_buf_size-5);;){if(C.lookahead<=1){if(Me(C),C.lookahead===0&&ne===g)return b;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var B=C.block_start+Y;if((C.strstart===0||C.strstart>=B)&&(C.lookahead=C.strstart-B,C.strstart=B,j(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-F&&(j(C,!1),C.strm.avail_out===0))return b}return C.insert=0,ne===m?(j(C,!0),C.strm.avail_out===0?pe:ee):(C.strstart>C.block_start&&(j(C,!1),C.strm.avail_out),b)}),new Ue(4,4,8,4,Ye),new Ue(4,5,16,8,Ye),new Ue(4,6,32,32,Ye),new Ue(4,4,16,16,Ae),new Ue(8,16,32,32,Ae),new Ue(8,16,128,128,Ae),new Ue(8,32,128,256,Ae),new Ue(32,128,258,1024,Ae),new Ue(32,258,258,4096,Ae)],i.deflateInit=function(C,ne){return rt(C,ne,E,15,8,0)},i.deflateInit2=rt,i.deflateReset=kt,i.deflateResetKeep=Qe,i.deflateSetHeader=function(C,ne){return C&&C.state?C.state.wrap!==2?x:(C.state.gzhead=ne,y):x},i.deflate=function(C,ne){var Y,B,U,z;if(!C||!C.state||5<ne||ne<0)return C?Z(C,x):x;if(B=C.state,!C.output||!C.input&&C.avail_in!==0||B.status===666&&ne!==m)return Z(C,C.avail_out===0?-5:x);if(B.strm=C,Y=B.last_flush,B.last_flush=ne,B.status===N)if(B.wrap===2)C.adler=0,re(B,31),re(B,139),re(B,8),B.gzhead?(re(B,(B.gzhead.text?1:0)+(B.gzhead.hcrc?2:0)+(B.gzhead.extra?4:0)+(B.gzhead.name?8:0)+(B.gzhead.comment?16:0)),re(B,255&B.gzhead.time),re(B,B.gzhead.time>>8&255),re(B,B.gzhead.time>>16&255),re(B,B.gzhead.time>>24&255),re(B,B.level===9?2:2<=B.strategy||B.level<2?4:0),re(B,255&B.gzhead.os),B.gzhead.extra&&B.gzhead.extra.length&&(re(B,255&B.gzhead.extra.length),re(B,B.gzhead.extra.length>>8&255)),B.gzhead.hcrc&&(C.adler=u(C.adler,B.pending_buf,B.pending,0)),B.gzindex=0,B.status=69):(re(B,0),re(B,0),re(B,0),re(B,0),re(B,0),re(B,B.level===9?2:2<=B.strategy||B.level<2?4:0),re(B,3),B.status=M);else{var ie=E+(B.w_bits-8<<4)<<8;ie|=(2<=B.strategy||B.level<2?0:B.level<6?1:B.level===6?2:3)<<6,B.strstart!==0&&(ie|=32),ie+=31-ie%31,B.status=M,de(B,ie),B.strstart!==0&&(de(B,C.adler>>>16),de(B,65535&C.adler)),C.adler=1}if(B.status===69)if(B.gzhead.extra){for(U=B.pending;B.gzindex<(65535&B.gzhead.extra.length)&&(B.pending!==B.pending_buf_size||(B.gzhead.hcrc&&B.pending>U&&(C.adler=u(C.adler,B.pending_buf,B.pending-U,U)),H(C),U=B.pending,B.pending!==B.pending_buf_size));)re(B,255&B.gzhead.extra[B.gzindex]),B.gzindex++;B.gzhead.hcrc&&B.pending>U&&(C.adler=u(C.adler,B.pending_buf,B.pending-U,U)),B.gzindex===B.gzhead.extra.length&&(B.gzindex=0,B.status=73)}else B.status=73;if(B.status===73)if(B.gzhead.name){U=B.pending;do{if(B.pending===B.pending_buf_size&&(B.gzhead.hcrc&&B.pending>U&&(C.adler=u(C.adler,B.pending_buf,B.pending-U,U)),H(C),U=B.pending,B.pending===B.pending_buf_size)){z=1;break}z=B.gzindex<B.gzhead.name.length?255&B.gzhead.name.charCodeAt(B.gzindex++):0,re(B,z)}while(z!==0);B.gzhead.hcrc&&B.pending>U&&(C.adler=u(C.adler,B.pending_buf,B.pending-U,U)),z===0&&(B.gzindex=0,B.status=91)}else B.status=91;if(B.status===91)if(B.gzhead.comment){U=B.pending;do{if(B.pending===B.pending_buf_size&&(B.gzhead.hcrc&&B.pending>U&&(C.adler=u(C.adler,B.pending_buf,B.pending-U,U)),H(C),U=B.pending,B.pending===B.pending_buf_size)){z=1;break}z=B.gzindex<B.gzhead.comment.length?255&B.gzhead.comment.charCodeAt(B.gzindex++):0,re(B,z)}while(z!==0);B.gzhead.hcrc&&B.pending>U&&(C.adler=u(C.adler,B.pending_buf,B.pending-U,U)),z===0&&(B.status=103)}else B.status=103;if(B.status===103&&(B.gzhead.hcrc?(B.pending+2>B.pending_buf_size&&H(C),B.pending+2<=B.pending_buf_size&&(re(B,255&C.adler),re(B,C.adler>>8&255),C.adler=0,B.status=M)):B.status=M),B.pending!==0){if(H(C),C.avail_out===0)return B.last_flush=-1,y}else if(C.avail_in===0&&G(ne)<=G(Y)&&ne!==m)return Z(C,-5);if(B.status===666&&C.avail_in!==0)return Z(C,-5);if(C.avail_in!==0||B.lookahead!==0||ne!==g&&B.status!==666){var ae=B.strategy===2?function(W,oe){for(var ge;;){if(W.lookahead===0&&(Me(W),W.lookahead===0)){if(oe===g)return b;break}if(W.match_length=0,ge=a._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++,ge&&(j(W,!1),W.strm.avail_out===0))return b}return W.insert=0,oe===m?(j(W,!0),W.strm.avail_out===0?pe:ee):W.last_lit&&(j(W,!1),W.strm.avail_out===0)?b:J}(B,ne):B.strategy===3?function(W,oe){for(var ge,fe,ye,Ce,ke=W.window;;){if(W.lookahead<=D){if(Me(W),W.lookahead<=D&&oe===g)return b;if(W.lookahead===0)break}if(W.match_length=0,W.lookahead>=k&&0<W.strstart&&(fe=ke[ye=W.strstart-1])===ke[++ye]&&fe===ke[++ye]&&fe===ke[++ye]){Ce=W.strstart+D;do;while(fe===ke[++ye]&&fe===ke[++ye]&&fe===ke[++ye]&&fe===ke[++ye]&&fe===ke[++ye]&&fe===ke[++ye]&&fe===ke[++ye]&&fe===ke[++ye]&&ye<Ce);W.match_length=D-(Ce-ye),W.match_length>W.lookahead&&(W.match_length=W.lookahead)}if(W.match_length>=k?(ge=a._tr_tally(W,1,W.match_length-k),W.lookahead-=W.match_length,W.strstart+=W.match_length,W.match_length=0):(ge=a._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++),ge&&(j(W,!1),W.strm.avail_out===0))return b}return W.insert=0,oe===m?(j(W,!0),W.strm.avail_out===0?pe:ee):W.last_lit&&(j(W,!1),W.strm.avail_out===0)?b:J}(B,ne):s[B.level].func(B,ne);if(ae!==pe&&ae!==ee||(B.status=666),ae===b||ae===pe)return C.avail_out===0&&(B.last_flush=-1),y;if(ae===J&&(ne===1?a._tr_align(B):ne!==5&&(a._tr_stored_block(B,0,0,!1),ne===3&&(ue(B.head),B.lookahead===0&&(B.strstart=0,B.block_start=0,B.insert=0))),H(C),C.avail_out===0))return B.last_flush=-1,y}return ne!==m?y:B.wrap<=0?1:(B.wrap===2?(re(B,255&C.adler),re(B,C.adler>>8&255),re(B,C.adler>>16&255),re(B,C.adler>>24&255),re(B,255&C.total_in),re(B,C.total_in>>8&255),re(B,C.total_in>>16&255),re(B,C.total_in>>24&255)):(de(B,C.adler>>>16),de(B,65535&C.adler)),H(C),0<B.wrap&&(B.wrap=-B.wrap),B.pending!==0?y:1)},i.deflateEnd=function(C){var ne;return C&&C.state?(ne=C.state.status)!==N&&ne!==69&&ne!==73&&ne!==91&&ne!==103&&ne!==M&&ne!==666?Z(C,x):(C.state=null,ne===M?Z(C,-3):y):x},i.deflateSetDictionary=function(C,ne){var Y,B,U,z,ie,ae,W,oe,ge=ne.length;if(!C||!C.state||(z=(Y=C.state).wrap)===2||z===1&&Y.status!==N||Y.lookahead)return x;for(z===1&&(C.adler=l(C.adler,ne,ge,0)),Y.wrap=0,ge>=Y.w_size&&(z===0&&(ue(Y.head),Y.strstart=0,Y.block_start=0,Y.insert=0),oe=new o.Buf8(Y.w_size),o.arraySet(oe,ne,ge-Y.w_size,Y.w_size,0),ne=oe,ge=Y.w_size),ie=C.avail_in,ae=C.next_in,W=C.input,C.avail_in=ge,C.next_in=0,C.input=ne,Me(Y);Y.lookahead>=k;){for(B=Y.strstart,U=Y.lookahead-(k-1);Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[B+k-1])&Y.hash_mask,Y.prev[B&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=B,B++,--U;);Y.strstart=B,Y.lookahead=k-1,Me(Y)}return Y.strstart+=Y.lookahead,Y.block_start=Y.strstart,Y.insert=Y.lookahead,Y.lookahead=0,Y.match_length=Y.prev_length=k-1,Y.match_available=0,C.next_in=ae,C.input=W,C.avail_in=ie,Y.wrap=z,y},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,l,u,d,g,m,y,x,_,T,v,E,S,P,V,O,A,R,k,D,F,N,M,b,J;a=s.state,l=s.next_in,b=s.input,u=l+(s.avail_in-5),d=s.next_out,J=s.output,g=d-(o-s.avail_out),m=d+(s.avail_out-257),y=a.dmax,x=a.wsize,_=a.whave,T=a.wnext,v=a.window,E=a.hold,S=a.bits,P=a.lencode,V=a.distcode,O=(1<<a.lenbits)-1,A=(1<<a.distbits)-1;e:do{S<15&&(E+=b[l++]<<S,S+=8,E+=b[l++]<<S,S+=8),R=P[E&O];t:for(;;){if(E>>>=k=R>>>24,S-=k,(k=R>>>16&255)===0)J[d++]=65535&R;else{if(!(16&k)){if(!(64&k)){R=P[(65535&R)+(E&(1<<k)-1)];continue t}if(32&k){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}D=65535&R,(k&=15)&&(S<k&&(E+=b[l++]<<S,S+=8),D+=E&(1<<k)-1,E>>>=k,S-=k),S<15&&(E+=b[l++]<<S,S+=8,E+=b[l++]<<S,S+=8),R=V[E&A];n:for(;;){if(E>>>=k=R>>>24,S-=k,!(16&(k=R>>>16&255))){if(!(64&k)){R=V[(65535&R)+(E&(1<<k)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(F=65535&R,S<(k&=15)&&(E+=b[l++]<<S,(S+=8)<k&&(E+=b[l++]<<S,S+=8)),y<(F+=E&(1<<k)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(E>>>=k,S-=k,(k=d-g)<F){if(_<(k=F-k)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(M=v,(N=0)===T){if(N+=x-k,k<D){for(D-=k;J[d++]=v[N++],--k;);N=d-F,M=J}}else if(T<k){if(N+=x+T-k,(k-=T)<D){for(D-=k;J[d++]=v[N++],--k;);if(N=0,T<D){for(D-=k=T;J[d++]=v[N++],--k;);N=d-F,M=J}}}else if(N+=T-k,k<D){for(D-=k;J[d++]=v[N++],--k;);N=d-F,M=J}for(;2<D;)J[d++]=M[N++],J[d++]=M[N++],J[d++]=M[N++],D-=3;D&&(J[d++]=M[N++],1<D&&(J[d++]=M[N++]))}else{for(N=d-F;J[d++]=J[N++],J[d++]=J[N++],J[d++]=J[N++],2<(D-=3););D&&(J[d++]=J[N++],1<D&&(J[d++]=J[N++]))}break}}break}}while(l<u&&d<m);l-=D=S>>3,E&=(1<<(S-=D<<3))-1,s.next_in=l,s.next_out=d,s.avail_in=l<u?u-l+5:5-(l-u),s.avail_out=d<m?m-d+257:257-(d-m),a.hold=E,a.bits=S}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),d=1,g=2,m=0,y=-2,x=1,_=852,T=592;function v(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(N){var M;return N&&N.state?(M=N.state,N.total_in=N.total_out=M.total=0,N.msg="",M.wrap&&(N.adler=1&M.wrap),M.mode=x,M.last=0,M.havedict=0,M.dmax=32768,M.head=null,M.hold=0,M.bits=0,M.lencode=M.lendyn=new s.Buf32(_),M.distcode=M.distdyn=new s.Buf32(T),M.sane=1,M.back=-1,m):y}function P(N){var M;return N&&N.state?((M=N.state).wsize=0,M.whave=0,M.wnext=0,S(N)):y}function V(N,M){var b,J;return N&&N.state?(J=N.state,M<0?(b=0,M=-M):(b=1+(M>>4),M<48&&(M&=15)),M&&(M<8||15<M)?y:(J.window!==null&&J.wbits!==M&&(J.window=null),J.wrap=b,J.wbits=M,P(N))):y}function O(N,M){var b,J;return N?(J=new E,(N.state=J).window=null,(b=V(N,M))!==m&&(N.state=null),b):y}var A,R,k=!0;function D(N){if(k){var M;for(A=new s.Buf32(512),R=new s.Buf32(32),M=0;M<144;)N.lens[M++]=8;for(;M<256;)N.lens[M++]=9;for(;M<280;)N.lens[M++]=7;for(;M<288;)N.lens[M++]=8;for(u(d,N.lens,0,288,A,0,N.work,{bits:9}),M=0;M<32;)N.lens[M++]=5;u(g,N.lens,0,32,R,0,N.work,{bits:5}),k=!1}N.lencode=A,N.lenbits=9,N.distcode=R,N.distbits=5}function F(N,M,b,J){var pe,ee=N.state;return ee.window===null&&(ee.wsize=1<<ee.wbits,ee.wnext=0,ee.whave=0,ee.window=new s.Buf8(ee.wsize)),J>=ee.wsize?(s.arraySet(ee.window,M,b-ee.wsize,ee.wsize,0),ee.wnext=0,ee.whave=ee.wsize):(J<(pe=ee.wsize-ee.wnext)&&(pe=J),s.arraySet(ee.window,M,b-J,pe,ee.wnext),(J-=pe)?(s.arraySet(ee.window,M,b-J,J,0),ee.wnext=J,ee.whave=ee.wsize):(ee.wnext+=pe,ee.wnext===ee.wsize&&(ee.wnext=0),ee.whave<ee.wsize&&(ee.whave+=pe))),0}i.inflateReset=P,i.inflateReset2=V,i.inflateResetKeep=S,i.inflateInit=function(N){return O(N,15)},i.inflateInit2=O,i.inflate=function(N,M){var b,J,pe,ee,Z,G,ue,H,j,re,de,le,Me,Ye,Ae,Ue,De,Qe,kt,rt,C,ne,Y,B,U=0,z=new s.Buf8(4),ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return y;(b=N.state).mode===12&&(b.mode=13),Z=N.next_out,pe=N.output,ue=N.avail_out,ee=N.next_in,J=N.input,G=N.avail_in,H=b.hold,j=b.bits,re=G,de=ue,ne=m;e:for(;;)switch(b.mode){case x:if(b.wrap===0){b.mode=13;break}for(;j<16;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}if(2&b.wrap&&H===35615){z[b.check=0]=255&H,z[1]=H>>>8&255,b.check=a(b.check,z,2,0),j=H=0,b.mode=2;break}if(b.flags=0,b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&H)<<8)+(H>>8))%31){N.msg="incorrect header check",b.mode=30;break}if((15&H)!=8){N.msg="unknown compression method",b.mode=30;break}if(j-=4,C=8+(15&(H>>>=4)),b.wbits===0)b.wbits=C;else if(C>b.wbits){N.msg="invalid window size",b.mode=30;break}b.dmax=1<<C,N.adler=b.check=1,b.mode=512&H?10:12,j=H=0;break;case 2:for(;j<16;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}if(b.flags=H,(255&b.flags)!=8){N.msg="unknown compression method",b.mode=30;break}if(57344&b.flags){N.msg="unknown header flags set",b.mode=30;break}b.head&&(b.head.text=H>>8&1),512&b.flags&&(z[0]=255&H,z[1]=H>>>8&255,b.check=a(b.check,z,2,0)),j=H=0,b.mode=3;case 3:for(;j<32;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}b.head&&(b.head.time=H),512&b.flags&&(z[0]=255&H,z[1]=H>>>8&255,z[2]=H>>>16&255,z[3]=H>>>24&255,b.check=a(b.check,z,4,0)),j=H=0,b.mode=4;case 4:for(;j<16;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}b.head&&(b.head.xflags=255&H,b.head.os=H>>8),512&b.flags&&(z[0]=255&H,z[1]=H>>>8&255,b.check=a(b.check,z,2,0)),j=H=0,b.mode=5;case 5:if(1024&b.flags){for(;j<16;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}b.length=H,b.head&&(b.head.extra_len=H),512&b.flags&&(z[0]=255&H,z[1]=H>>>8&255,b.check=a(b.check,z,2,0)),j=H=0}else b.head&&(b.head.extra=null);b.mode=6;case 6:if(1024&b.flags&&(G<(le=b.length)&&(le=G),le&&(b.head&&(C=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Array(b.head.extra_len)),s.arraySet(b.head.extra,J,ee,le,C)),512&b.flags&&(b.check=a(b.check,J,le,ee)),G-=le,ee+=le,b.length-=le),b.length))break e;b.length=0,b.mode=7;case 7:if(2048&b.flags){if(G===0)break e;for(le=0;C=J[ee+le++],b.head&&C&&b.length<65536&&(b.head.name+=String.fromCharCode(C)),C&&le<G;);if(512&b.flags&&(b.check=a(b.check,J,le,ee)),G-=le,ee+=le,C)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=8;case 8:if(4096&b.flags){if(G===0)break e;for(le=0;C=J[ee+le++],b.head&&C&&b.length<65536&&(b.head.comment+=String.fromCharCode(C)),C&&le<G;);if(512&b.flags&&(b.check=a(b.check,J,le,ee)),G-=le,ee+=le,C)break e}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(512&b.flags){for(;j<16;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}if(H!==(65535&b.check)){N.msg="header crc mismatch",b.mode=30;break}j=H=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),N.adler=b.check=0,b.mode=12;break;case 10:for(;j<32;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}N.adler=b.check=v(H),j=H=0,b.mode=11;case 11:if(b.havedict===0)return N.next_out=Z,N.avail_out=ue,N.next_in=ee,N.avail_in=G,b.hold=H,b.bits=j,2;N.adler=b.check=1,b.mode=12;case 12:if(M===5||M===6)break e;case 13:if(b.last){H>>>=7&j,j-=7&j,b.mode=27;break}for(;j<3;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}switch(b.last=1&H,j-=1,3&(H>>>=1)){case 0:b.mode=14;break;case 1:if(D(b),b.mode=20,M!==6)break;H>>>=2,j-=2;break e;case 2:b.mode=17;break;case 3:N.msg="invalid block type",b.mode=30}H>>>=2,j-=2;break;case 14:for(H>>>=7&j,j-=7&j;j<32;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}if((65535&H)!=(H>>>16^65535)){N.msg="invalid stored block lengths",b.mode=30;break}if(b.length=65535&H,j=H=0,b.mode=15,M===6)break e;case 15:b.mode=16;case 16:if(le=b.length){if(G<le&&(le=G),ue<le&&(le=ue),le===0)break e;s.arraySet(pe,J,ee,le,Z),G-=le,ee+=le,ue-=le,Z+=le,b.length-=le;break}b.mode=12;break;case 17:for(;j<14;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}if(b.nlen=257+(31&H),H>>>=5,j-=5,b.ndist=1+(31&H),H>>>=5,j-=5,b.ncode=4+(15&H),H>>>=4,j-=4,286<b.nlen||30<b.ndist){N.msg="too many length or distance symbols",b.mode=30;break}b.have=0,b.mode=18;case 18:for(;b.have<b.ncode;){for(;j<3;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}b.lens[ie[b.have++]]=7&H,H>>>=3,j-=3}for(;b.have<19;)b.lens[ie[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,Y={bits:b.lenbits},ne=u(0,b.lens,0,19,b.lencode,0,b.work,Y),b.lenbits=Y.bits,ne){N.msg="invalid code lengths set",b.mode=30;break}b.have=0,b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;Ue=(U=b.lencode[H&(1<<b.lenbits)-1])>>>16&255,De=65535&U,!((Ae=U>>>24)<=j);){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}if(De<16)H>>>=Ae,j-=Ae,b.lens[b.have++]=De;else{if(De===16){for(B=Ae+2;j<B;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}if(H>>>=Ae,j-=Ae,b.have===0){N.msg="invalid bit length repeat",b.mode=30;break}C=b.lens[b.have-1],le=3+(3&H),H>>>=2,j-=2}else if(De===17){for(B=Ae+3;j<B;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}j-=Ae,C=0,le=3+(7&(H>>>=Ae)),H>>>=3,j-=3}else{for(B=Ae+7;j<B;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}j-=Ae,C=0,le=11+(127&(H>>>=Ae)),H>>>=7,j-=7}if(b.have+le>b.nlen+b.ndist){N.msg="invalid bit length repeat",b.mode=30;break}for(;le--;)b.lens[b.have++]=C}}if(b.mode===30)break;if(b.lens[256]===0){N.msg="invalid code -- missing end-of-block",b.mode=30;break}if(b.lenbits=9,Y={bits:b.lenbits},ne=u(d,b.lens,0,b.nlen,b.lencode,0,b.work,Y),b.lenbits=Y.bits,ne){N.msg="invalid literal/lengths set",b.mode=30;break}if(b.distbits=6,b.distcode=b.distdyn,Y={bits:b.distbits},ne=u(g,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,Y),b.distbits=Y.bits,ne){N.msg="invalid distances set",b.mode=30;break}if(b.mode=20,M===6)break e;case 20:b.mode=21;case 21:if(6<=G&&258<=ue){N.next_out=Z,N.avail_out=ue,N.next_in=ee,N.avail_in=G,b.hold=H,b.bits=j,l(N,de),Z=N.next_out,pe=N.output,ue=N.avail_out,ee=N.next_in,J=N.input,G=N.avail_in,H=b.hold,j=b.bits,b.mode===12&&(b.back=-1);break}for(b.back=0;Ue=(U=b.lencode[H&(1<<b.lenbits)-1])>>>16&255,De=65535&U,!((Ae=U>>>24)<=j);){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}if(Ue&&!(240&Ue)){for(Qe=Ae,kt=Ue,rt=De;Ue=(U=b.lencode[rt+((H&(1<<Qe+kt)-1)>>Qe)])>>>16&255,De=65535&U,!(Qe+(Ae=U>>>24)<=j);){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}H>>>=Qe,j-=Qe,b.back+=Qe}if(H>>>=Ae,j-=Ae,b.back+=Ae,b.length=De,Ue===0){b.mode=26;break}if(32&Ue){b.back=-1,b.mode=12;break}if(64&Ue){N.msg="invalid literal/length code",b.mode=30;break}b.extra=15&Ue,b.mode=22;case 22:if(b.extra){for(B=b.extra;j<B;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}b.length+=H&(1<<b.extra)-1,H>>>=b.extra,j-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=23;case 23:for(;Ue=(U=b.distcode[H&(1<<b.distbits)-1])>>>16&255,De=65535&U,!((Ae=U>>>24)<=j);){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}if(!(240&Ue)){for(Qe=Ae,kt=Ue,rt=De;Ue=(U=b.distcode[rt+((H&(1<<Qe+kt)-1)>>Qe)])>>>16&255,De=65535&U,!(Qe+(Ae=U>>>24)<=j);){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}H>>>=Qe,j-=Qe,b.back+=Qe}if(H>>>=Ae,j-=Ae,b.back+=Ae,64&Ue){N.msg="invalid distance code",b.mode=30;break}b.offset=De,b.extra=15&Ue,b.mode=24;case 24:if(b.extra){for(B=b.extra;j<B;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}b.offset+=H&(1<<b.extra)-1,H>>>=b.extra,j-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){N.msg="invalid distance too far back",b.mode=30;break}b.mode=25;case 25:if(ue===0)break e;if(le=de-ue,b.offset>le){if((le=b.offset-le)>b.whave&&b.sane){N.msg="invalid distance too far back",b.mode=30;break}Me=le>b.wnext?(le-=b.wnext,b.wsize-le):b.wnext-le,le>b.length&&(le=b.length),Ye=b.window}else Ye=pe,Me=Z-b.offset,le=b.length;for(ue<le&&(le=ue),ue-=le,b.length-=le;pe[Z++]=Ye[Me++],--le;);b.length===0&&(b.mode=21);break;case 26:if(ue===0)break e;pe[Z++]=b.length,ue--,b.mode=21;break;case 27:if(b.wrap){for(;j<32;){if(G===0)break e;G--,H|=J[ee++]<<j,j+=8}if(de-=ue,N.total_out+=de,b.total+=de,de&&(N.adler=b.check=b.flags?a(b.check,pe,de,Z-de):o(b.check,pe,de,Z-de)),de=ue,(b.flags?H:v(H))!==b.check){N.msg="incorrect data check",b.mode=30;break}j=H=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;j<32;){if(G===0)break e;G--,H+=J[ee++]<<j,j+=8}if(H!==(4294967295&b.total)){N.msg="incorrect length check",b.mode=30;break}j=H=0}b.mode=29;case 29:ne=1;break e;case 30:ne=-3;break e;case 31:return-4;case 32:default:return y}return N.next_out=Z,N.avail_out=ue,N.next_in=ee,N.avail_in=G,b.hold=H,b.bits=j,(b.wsize||de!==N.avail_out&&b.mode<30&&(b.mode<27||M!==4))&&F(N,N.output,N.next_out,de-N.avail_out)?(b.mode=31,-4):(re-=N.avail_in,de-=N.avail_out,N.total_in+=re,N.total_out+=de,b.total+=de,b.wrap&&de&&(N.adler=b.check=b.flags?a(b.check,pe,de,N.next_out-de):o(b.check,pe,de,N.next_out-de)),N.data_type=b.bits+(b.last?64:0)+(b.mode===12?128:0)+(b.mode===20||b.mode===15?256:0),(re==0&&de===0||M===4)&&ne===m&&(ne=-5),ne)},i.inflateEnd=function(N){if(!N||!N.state)return y;var M=N.state;return M.window&&(M.window=null),N.state=null,m},i.inflateGetHeader=function(N,M){var b;return N&&N.state&&2&(b=N.state).wrap?((b.head=M).done=!1,m):y},i.inflateSetDictionary=function(N,M){var b,J=M.length;return N&&N.state?(b=N.state).wrap!==0&&b.mode!==11?y:b.mode===11&&o(1,M,J,0)!==b.check?-3:F(N,M,J,J)?(b.mode=31,-4):(b.havedict=1,m):y},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,g,m,y,x,_,T,v){var E,S,P,V,O,A,R,k,D,F=v.bits,N=0,M=0,b=0,J=0,pe=0,ee=0,Z=0,G=0,ue=0,H=0,j=null,re=0,de=new s.Buf16(16),le=new s.Buf16(16),Me=null,Ye=0;for(N=0;N<=15;N++)de[N]=0;for(M=0;M<y;M++)de[g[m+M]]++;for(pe=F,J=15;1<=J&&de[J]===0;J--);if(J<pe&&(pe=J),J===0)return x[_++]=20971520,x[_++]=20971520,v.bits=1,0;for(b=1;b<J&&de[b]===0;b++);for(pe<b&&(pe=b),N=G=1;N<=15;N++)if(G<<=1,(G-=de[N])<0)return-1;if(0<G&&(d===0||J!==1))return-1;for(le[1]=0,N=1;N<15;N++)le[N+1]=le[N]+de[N];for(M=0;M<y;M++)g[m+M]!==0&&(T[le[g[m+M]]++]=M);if(A=d===0?(j=Me=T,19):d===1?(j=o,re-=257,Me=a,Ye-=257,256):(j=l,Me=u,-1),N=b,O=_,Z=M=H=0,P=-1,V=(ue=1<<(ee=pe))-1,d===1&&852<ue||d===2&&592<ue)return 1;for(;;){for(R=N-Z,D=T[M]<A?(k=0,T[M]):T[M]>A?(k=Me[Ye+T[M]],j[re+T[M]]):(k=96,0),E=1<<N-Z,b=S=1<<ee;x[O+(H>>Z)+(S-=E)]=R<<24|k<<16|D|0,S!==0;);for(E=1<<N-1;H&E;)E>>=1;if(E!==0?(H&=E-1,H+=E):H=0,M++,--de[N]==0){if(N===J)break;N=g[m+T[M]]}if(pe<N&&(H&V)!==P){for(Z===0&&(Z=pe),O+=b,G=1<<(ee=N-Z);ee+Z<J&&!((G-=de[ee+Z])<=0);)ee++,G<<=1;if(ue+=1<<ee,d===1&&852<ue||d===2&&592<ue)return 1;x[P=H&V]=pe<<24|ee<<16|O-_|0}}return H!==0&&(x[O+H]=N-Z<<24|64<<16|0),v.bits=pe,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function l(U){for(var z=U.length;0<=--z;)U[z]=0}var u=0,d=29,g=256,m=g+1+d,y=30,x=19,_=2*m+1,T=15,v=16,E=7,S=256,P=16,V=17,O=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(m+2));l(F);var N=new Array(2*y);l(N);var M=new Array(512);l(M);var b=new Array(256);l(b);var J=new Array(d);l(J);var pe,ee,Z,G=new Array(y);function ue(U,z,ie,ae,W){this.static_tree=U,this.extra_bits=z,this.extra_base=ie,this.elems=ae,this.max_length=W,this.has_stree=U&&U.length}function H(U,z){this.dyn_tree=U,this.max_code=0,this.stat_desc=z}function j(U){return U<256?M[U]:M[256+(U>>>7)]}function re(U,z){U.pending_buf[U.pending++]=255&z,U.pending_buf[U.pending++]=z>>>8&255}function de(U,z,ie){U.bi_valid>v-ie?(U.bi_buf|=z<<U.bi_valid&65535,re(U,U.bi_buf),U.bi_buf=z>>v-U.bi_valid,U.bi_valid+=ie-v):(U.bi_buf|=z<<U.bi_valid&65535,U.bi_valid+=ie)}function le(U,z,ie){de(U,ie[2*z],ie[2*z+1])}function Me(U,z){for(var ie=0;ie|=1&U,U>>>=1,ie<<=1,0<--z;);return ie>>>1}function Ye(U,z,ie){var ae,W,oe=new Array(T+1),ge=0;for(ae=1;ae<=T;ae++)oe[ae]=ge=ge+ie[ae-1]<<1;for(W=0;W<=z;W++){var fe=U[2*W+1];fe!==0&&(U[2*W]=Me(oe[fe]++,fe))}}function Ae(U){var z;for(z=0;z<m;z++)U.dyn_ltree[2*z]=0;for(z=0;z<y;z++)U.dyn_dtree[2*z]=0;for(z=0;z<x;z++)U.bl_tree[2*z]=0;U.dyn_ltree[2*S]=1,U.opt_len=U.static_len=0,U.last_lit=U.matches=0}function Ue(U){8<U.bi_valid?re(U,U.bi_buf):0<U.bi_valid&&(U.pending_buf[U.pending++]=U.bi_buf),U.bi_buf=0,U.bi_valid=0}function De(U,z,ie,ae){var W=2*z,oe=2*ie;return U[W]<U[oe]||U[W]===U[oe]&&ae[z]<=ae[ie]}function Qe(U,z,ie){for(var ae=U.heap[ie],W=ie<<1;W<=U.heap_len&&(W<U.heap_len&&De(z,U.heap[W+1],U.heap[W],U.depth)&&W++,!De(z,ae,U.heap[W],U.depth));)U.heap[ie]=U.heap[W],ie=W,W<<=1;U.heap[ie]=ae}function kt(U,z,ie){var ae,W,oe,ge,fe=0;if(U.last_lit!==0)for(;ae=U.pending_buf[U.d_buf+2*fe]<<8|U.pending_buf[U.d_buf+2*fe+1],W=U.pending_buf[U.l_buf+fe],fe++,ae===0?le(U,W,z):(le(U,(oe=b[W])+g+1,z),(ge=A[oe])!==0&&de(U,W-=J[oe],ge),le(U,oe=j(--ae),ie),(ge=R[oe])!==0&&de(U,ae-=G[oe],ge)),fe<U.last_lit;);le(U,S,z)}function rt(U,z){var ie,ae,W,oe=z.dyn_tree,ge=z.stat_desc.static_tree,fe=z.stat_desc.has_stree,ye=z.stat_desc.elems,Ce=-1;for(U.heap_len=0,U.heap_max=_,ie=0;ie<ye;ie++)oe[2*ie]!==0?(U.heap[++U.heap_len]=Ce=ie,U.depth[ie]=0):oe[2*ie+1]=0;for(;U.heap_len<2;)oe[2*(W=U.heap[++U.heap_len]=Ce<2?++Ce:0)]=1,U.depth[W]=0,U.opt_len--,fe&&(U.static_len-=ge[2*W+1]);for(z.max_code=Ce,ie=U.heap_len>>1;1<=ie;ie--)Qe(U,oe,ie);for(W=ye;ie=U.heap[1],U.heap[1]=U.heap[U.heap_len--],Qe(U,oe,1),ae=U.heap[1],U.heap[--U.heap_max]=ie,U.heap[--U.heap_max]=ae,oe[2*W]=oe[2*ie]+oe[2*ae],U.depth[W]=(U.depth[ie]>=U.depth[ae]?U.depth[ie]:U.depth[ae])+1,oe[2*ie+1]=oe[2*ae+1]=W,U.heap[1]=W++,Qe(U,oe,1),2<=U.heap_len;);U.heap[--U.heap_max]=U.heap[1],function(ke,Et){var yn,Vt,q,Q,Se,ve,je=Et.dyn_tree,Tt=Et.max_code,Oe=Et.stat_desc.static_tree,vn=Et.stat_desc.has_stree,_n=Et.stat_desc.extra_bits,ln=Et.stat_desc.extra_base,un=Et.stat_desc.max_length,Ft=0;for(Q=0;Q<=T;Q++)ke.bl_count[Q]=0;for(je[2*ke.heap[ke.heap_max]+1]=0,yn=ke.heap_max+1;yn<_;yn++)un<(Q=je[2*je[2*(Vt=ke.heap[yn])+1]+1]+1)&&(Q=un,Ft++),je[2*Vt+1]=Q,Tt<Vt||(ke.bl_count[Q]++,Se=0,ln<=Vt&&(Se=_n[Vt-ln]),ve=je[2*Vt],ke.opt_len+=ve*(Q+Se),vn&&(ke.static_len+=ve*(Oe[2*Vt+1]+Se)));if(Ft!==0){do{for(Q=un-1;ke.bl_count[Q]===0;)Q--;ke.bl_count[Q]--,ke.bl_count[Q+1]+=2,ke.bl_count[un]--,Ft-=2}while(0<Ft);for(Q=un;Q!==0;Q--)for(Vt=ke.bl_count[Q];Vt!==0;)Tt<(q=ke.heap[--yn])||(je[2*q+1]!==Q&&(ke.opt_len+=(Q-je[2*q+1])*je[2*q],je[2*q+1]=Q),Vt--)}}(U,z),Ye(oe,Ce,U.bl_count)}function C(U,z,ie){var ae,W,oe=-1,ge=z[1],fe=0,ye=7,Ce=4;for(ge===0&&(ye=138,Ce=3),z[2*(ie+1)+1]=65535,ae=0;ae<=ie;ae++)W=ge,ge=z[2*(ae+1)+1],++fe<ye&&W===ge||(fe<Ce?U.bl_tree[2*W]+=fe:W!==0?(W!==oe&&U.bl_tree[2*W]++,U.bl_tree[2*P]++):fe<=10?U.bl_tree[2*V]++:U.bl_tree[2*O]++,oe=W,Ce=(fe=0)===ge?(ye=138,3):W===ge?(ye=6,3):(ye=7,4))}function ne(U,z,ie){var ae,W,oe=-1,ge=z[1],fe=0,ye=7,Ce=4;for(ge===0&&(ye=138,Ce=3),ae=0;ae<=ie;ae++)if(W=ge,ge=z[2*(ae+1)+1],!(++fe<ye&&W===ge)){if(fe<Ce)for(;le(U,W,U.bl_tree),--fe!=0;);else W!==0?(W!==oe&&(le(U,W,U.bl_tree),fe--),le(U,P,U.bl_tree),de(U,fe-3,2)):fe<=10?(le(U,V,U.bl_tree),de(U,fe-3,3)):(le(U,O,U.bl_tree),de(U,fe-11,7));oe=W,Ce=(fe=0)===ge?(ye=138,3):W===ge?(ye=6,3):(ye=7,4)}}l(G);var Y=!1;function B(U,z,ie,ae){de(U,(u<<1)+(ae?1:0),3),function(W,oe,ge,fe){Ue(W),re(W,ge),re(W,~ge),s.arraySet(W.pending_buf,W.window,oe,ge,W.pending),W.pending+=ge}(U,z,ie)}i._tr_init=function(U){Y||(function(){var z,ie,ae,W,oe,ge=new Array(T+1);for(W=ae=0;W<d-1;W++)for(J[W]=ae,z=0;z<1<<A[W];z++)b[ae++]=W;for(b[ae-1]=W,W=oe=0;W<16;W++)for(G[W]=oe,z=0;z<1<<R[W];z++)M[oe++]=W;for(oe>>=7;W<y;W++)for(G[W]=oe<<7,z=0;z<1<<R[W]-7;z++)M[256+oe++]=W;for(ie=0;ie<=T;ie++)ge[ie]=0;for(z=0;z<=143;)F[2*z+1]=8,z++,ge[8]++;for(;z<=255;)F[2*z+1]=9,z++,ge[9]++;for(;z<=279;)F[2*z+1]=7,z++,ge[7]++;for(;z<=287;)F[2*z+1]=8,z++,ge[8]++;for(Ye(F,m+1,ge),z=0;z<y;z++)N[2*z+1]=5,N[2*z]=Me(z,5);pe=new ue(F,A,g+1,m,T),ee=new ue(N,R,0,y,T),Z=new ue(new Array(0),k,0,x,E)}(),Y=!0),U.l_desc=new H(U.dyn_ltree,pe),U.d_desc=new H(U.dyn_dtree,ee),U.bl_desc=new H(U.bl_tree,Z),U.bi_buf=0,U.bi_valid=0,Ae(U)},i._tr_stored_block=B,i._tr_flush_block=function(U,z,ie,ae){var W,oe,ge=0;0<U.level?(U.strm.data_type===2&&(U.strm.data_type=function(fe){var ye,Ce=4093624447;for(ye=0;ye<=31;ye++,Ce>>>=1)if(1&Ce&&fe.dyn_ltree[2*ye]!==0)return o;if(fe.dyn_ltree[18]!==0||fe.dyn_ltree[20]!==0||fe.dyn_ltree[26]!==0)return a;for(ye=32;ye<g;ye++)if(fe.dyn_ltree[2*ye]!==0)return a;return o}(U)),rt(U,U.l_desc),rt(U,U.d_desc),ge=function(fe){var ye;for(C(fe,fe.dyn_ltree,fe.l_desc.max_code),C(fe,fe.dyn_dtree,fe.d_desc.max_code),rt(fe,fe.bl_desc),ye=x-1;3<=ye&&fe.bl_tree[2*D[ye]+1]===0;ye--);return fe.opt_len+=3*(ye+1)+5+5+4,ye}(U),W=U.opt_len+3+7>>>3,(oe=U.static_len+3+7>>>3)<=W&&(W=oe)):W=oe=ie+5,ie+4<=W&&z!==-1?B(U,z,ie,ae):U.strategy===4||oe===W?(de(U,2+(ae?1:0),3),kt(U,F,N)):(de(U,4+(ae?1:0),3),function(fe,ye,Ce,ke){var Et;for(de(fe,ye-257,5),de(fe,Ce-1,5),de(fe,ke-4,4),Et=0;Et<ke;Et++)de(fe,fe.bl_tree[2*D[Et]+1],3);ne(fe,fe.dyn_ltree,ye-1),ne(fe,fe.dyn_dtree,Ce-1)}(U,U.l_desc.max_code+1,U.d_desc.max_code+1,ge+1),kt(U,U.dyn_ltree,U.dyn_dtree)),Ae(U),ae&&Ue(U)},i._tr_tally=function(U,z,ie){return U.pending_buf[U.d_buf+2*U.last_lit]=z>>>8&255,U.pending_buf[U.d_buf+2*U.last_lit+1]=255&z,U.pending_buf[U.l_buf+U.last_lit]=255&ie,U.last_lit++,z===0?U.dyn_ltree[2*ie]++:(U.matches++,z--,U.dyn_ltree[2*(b[ie]+g+1)]++,U.dyn_dtree[2*j(z)]++),U.last_lit===U.lit_bufsize-1},i._tr_align=function(U){de(U,2,3),le(U,S,F),function(z){z.bi_valid===16?(re(z,z.bi_buf),z.bi_buf=0,z.bi_valid=0):8<=z.bi_valid&&(z.pending_buf[z.pending++]=255&z.bi_buf,z.bi_buf>>=8,z.bi_valid-=8)}(U)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,u,d,g,m=1,y={},x=!1,_=o.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(o);T=T&&T.setTimeout?T:o,l={}.toString.call(o.process)==="[object process]"?function(P){process.nextTick(function(){E(P)})}:function(){if(o.postMessage&&!o.importScripts){var P=!0,V=o.onmessage;return o.onmessage=function(){P=!1},o.postMessage("","*"),o.onmessage=V,P}}()?(g="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",S,!1):o.attachEvent("onmessage",S),function(P){o.postMessage(g+P,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(P){E(P.data)},function(P){d.port2.postMessage(P)}):_&&"onreadystatechange"in _.createElement("script")?(u=_.documentElement,function(P){var V=_.createElement("script");V.onreadystatechange=function(){E(P),V.onreadystatechange=null,u.removeChild(V),V=null},u.appendChild(V)}):function(P){setTimeout(E,0,P)},T.setImmediate=function(P){typeof P!="function"&&(P=new Function(""+P));for(var V=new Array(arguments.length-1),O=0;O<V.length;O++)V[O]=arguments[O+1];var A={callback:P,args:V};return y[m]=A,l(m),m++},T.clearImmediate=v}function v(P){delete y[P]}function E(P){if(x)setTimeout(E,0,P);else{var V=y[P];if(V){x=!0;try{(function(O){var A=O.callback,R=O.args;switch(R.length){case 0:A();break;case 1:A(R[0]);break;case 2:A(R[0],R[1]);break;case 3:A(R[0],R[1],R[2]);break;default:A.apply(a,R)}})(V)}finally{v(P),x=!1}}}}function S(P){P.source===o&&typeof P.data=="string"&&P.data.indexOf(g)===0&&E(+P.data.slice(g.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Ir<"u"?Ir:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(C1);var u6=C1.exports;const c6=Sf(u6);var k1={exports:{}};(function(t,e){(function(n,r){r()})(Ir,function(){function n(u,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,d,g){var m=new XMLHttpRequest;m.open("GET",u),m.responseType="blob",m.onload=function(){l(m.response,d,g)},m.onerror=function(){console.error("could not download file")},m.send()}function i(u){var d=new XMLHttpRequest;d.open("HEAD",u,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function s(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ir=="object"&&Ir.global===Ir?Ir:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(u,d,g){var m=o.URL||o.webkitURL,y=document.createElement("a");d=d||u.name||"download",y.download=d,y.rel="noopener",typeof u=="string"?(y.href=u,y.origin===location.origin?s(y):i(y.href)?r(u,d,g):s(y,y.target="_blank")):(y.href=m.createObjectURL(u),setTimeout(function(){m.revokeObjectURL(y.href)},4e4),setTimeout(function(){s(y)},0))}:"msSaveOrOpenBlob"in navigator?function(u,d,g){if(d=d||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,g),d);else if(i(u))r(u,d,g);else{var m=document.createElement("a");m.href=u,m.target="_blank",setTimeout(function(){s(m)})}}:function(u,d,g,m){if(m=m||open("","_blank"),m&&(m.document.title=m.document.body.innerText="downloading..."),typeof u=="string")return r(u,d,g);var y=u.type==="application/octet-stream",x=/constructor/i.test(o.HTMLElement)||o.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||y&&x||a)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var S=T.result;S=_?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=S:location=S,m=null},T.readAsDataURL(u)}else{var v=o.URL||o.webkitURL,E=v.createObjectURL(u);m?m.location=E:location.href=E,m=null,setTimeout(function(){v.revokeObjectURL(E)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(k1);var d6=k1.exports;const h6=Sf(d6),f6=({className:t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[h.jsx("line",{x1:"12",x2:"12",y1:"5",y2:"19"}),h.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})]}),p6=({className:t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:h.jsx("line",{x1:"5",x2:"19",y1:"12",y2:"12"})}),m6=({onExit:t})=>{var ye,Ce,ke,Et,yn,Vt;const[e,n]=te.useState(3),[r,i]=te.useState("portrait"),[s,o]=te.useState([]),[a,l]=te.useState([]),[u,d]=te.useState(-1),[g,m]=te.useState(null),[y,x]=te.useState(!1),[_,T]=te.useState(.25),[v,E]=te.useState(!0),[S,P]=te.useState("add"),[V,O]=te.useState("#ffffff"),A=1080,D=r==="square"?1080:1350,F=e*A,N=D,M=te.useRef(null),b=te.useRef(null),J=te.useRef(!1),pe=te.useRef({x:0,y:0}),ee=te.useRef({x:0,y:0}),Z=te.useRef(!1),G=te.useRef({x:0,y:0,w:0,h:0}),ue=te.useRef(0),H=te.useRef(.2),j=q=>{let Q="";return q==="circle"?Q='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><circle cx="100" cy="100" r="100" fill="#1e293b"/></svg>':q==="square"?Q='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect width="200" height="200" fill="#334155"/></svg>':q==="triangle"?Q='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 10 L190 190 L10 190 Z" fill="#475569"/></svg>':q==="star"?Q='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="m100 10 25 60 65 5-50 45 15 65-55-35-55 35 15-65-50-45 65-5z" fill="#0f172a"/></svg>':q==="heart"?Q='<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M100 180 C10 100 -20 50 40 20 C70 5 90 30 100 50 C110 30 130 5 160 20 C220 50 190 100 100 180 Z" fill="#ef4444"/></svg>':q==="text"&&(Q='<svg xmlns="http://www.w3.org/2000/svg" width="300" height="100"><rect width="100%" height="100%" fill="transparent"/><text x="50%" y="50%" font-family="Arial" font-size="60" font-weight="bold" fill="#000000" text-anchor="middle" dominant-baseline="middle">Text Here</text></svg>'),`data:image/svg+xml;base64,${btoa(Q)}`},re=q=>{const Q=a.slice(0,u+1);Q.push(q),l(Q),d(Q.length-1)},de=()=>{if(u>0){const q=u-1;o(a[q]),d(q)}else u===0&&(o([]),d(-1))},le=q=>{o(q),re(q)},Me=q=>{const Q=new Image;Q.onload=()=>{const Se=Q.width/Q.height,ve={id:Date.now().toString(),src:q,x:F/2-Q.width/2,y:N/2-Q.height/2,width:Q.width,height:Q.height,originalAspectRatio:Se,currentAspectRatio:Se,rotation:0,scaleX:1,borderRadius:0,borderColor:"#000000",borderWidth:0,isGrayscale:!1,maskShape:"none"};ve.width>1200&&(ve.width=1200,ve.height=1200/ve.originalAspectRatio);const je=[...s,ve];le(je),m(ve.id),P("edit"),E(!0)},Q.src=q},Ye=q=>{if(q.target.files&&q.target.files[0]){const Q=q.target.files[0],Se=new FileReader;Se.onload=ve=>{var je;(je=ve.target)!=null&&je.result&&Me(ve.target.result)},Se.readAsDataURL(Q)}q.target.value=""},Ae=()=>{if(!g)return;const q=s.filter(Q=>Q.id!==g);le(q),m(null),P("add")},Ue=()=>{if(!g)return;const q=s.find(Q=>Q.id===g);if(q){const Q={...q,id:Date.now().toString(),x:q.x+50,y:q.y+50},Se=[...s,Q];le(Se),m(Q.id)}},De=(q,Q=!0)=>{if(!g)return;const Se=s.map(ve=>ve.id===g?{...ve,...q}:ve);Q?le(Se):o(Se)},Qe=()=>{const q=s.find(Q=>Q.id===g);q&&De({rotation:(q.rotation+90)%360})},kt=()=>{const q=s.find(Q=>Q.id===g);q&&De({scaleX:q.scaleX*-1})},rt=()=>{if(!g)return;const q=s.find(ve=>ve.id===g);if(!q)return;let Q=q.originalAspectRatio;Math.abs(q.currentAspectRatio-q.originalAspectRatio)<.01?Q=1:Math.abs(q.currentAspectRatio-1)<.01?Q=.8:Math.abs(q.currentAspectRatio-.8)<.01?Q=1.77:Q=q.originalAspectRatio;const Se=q.width/Q;De({currentAspectRatio:Q,height:Se})},C=q=>{o(Q=>{const Se=Q.find(je=>je.id===q);return Se?[...Q.filter(je=>je.id!==q),Se]:Q})},ne=q=>{if(!g)return;const Q=s.findIndex(ve=>ve.id===g);if(Q===-1)return;const Se=[...s];if(q==="front"){const[ve]=Se.splice(Q,1);Se.push(ve)}else if(q==="back"){const[ve]=Se.splice(Q,1);Se.unshift(ve)}else q==="forward"&&Q<Se.length-1?[Se[Q],Se[Q+1]]=[Se[Q+1],Se[Q]]:q==="backward"&&Q>0&&([Se[Q],Se[Q-1]]=[Se[Q-1],Se[Q]]);le(Se)},Y=async()=>{x(!0);try{const q=document.createElement("canvas");q.width=F,q.height=N;const Q=q.getContext("2d");if(!Q)throw new Error("Canvas context failed");Q.fillStyle=V,Q.fillRect(0,0,F,N);const Se=Oe=>new Promise(vn=>{const _n=new Image;_n.crossOrigin="anonymous",_n.onload=()=>{Q.save();const ln=Oe.x+Oe.width/2,un=Oe.y+Oe.height/2;Q.translate(ln,un),Q.rotate(Oe.rotation*Math.PI/180),Q.scale(Oe.scaleX,1),Oe.isGrayscale&&(Q.filter="grayscale(100%)");const Ft=Oe.width,Kt=Oe.height,wr=-Ft/2,Jn=-Kt/2;if(Q.beginPath(),Oe.maskShape==="circle"){const cs=Math.min(Ft,Kt)/2;Q.arc(0,0,cs,0,Math.PI*2)}else(Oe.maskShape==="square"||Oe.borderRadius>0)&&Q.roundRect?Q.roundRect(wr,Jn,Ft,Kt,Oe.borderRadius):Q.rect(wr,Jn,Ft,Kt);Q.closePath(),Q.save(),Q.clip(),Q.drawImage(_n,wr,Jn,Ft,Kt),Q.restore(),Q.filter="none",Oe.borderWidth>0&&(Q.lineWidth=Oe.borderWidth,Q.strokeStyle=Oe.borderColor,Q.stroke()),Q.restore(),vn()},_n.src=Oe.src});await Promise.all(s.map(Se));const ve=new c6,je=ve.folder("instagram-panorama");for(let Oe=0;Oe<e;Oe++){const vn=document.createElement("canvas");vn.width=A,vn.height=D;const _n=vn.getContext("2d");if(_n){_n.drawImage(q,Oe*A,0,A,D,0,0,A,D);const ln=await new Promise(un=>vn.toBlob(un,"image/jpeg",.95));ln&&je&&je.file(`slide_${Oe+1}.jpg`,ln)}}const Tt=await ve.generateAsync({type:"blob"});h6.saveAs(Tt,"ig-panorama-slides.zip")}catch{alert("Gagal membuat zip.")}finally{x(!1)}},B=(q,Q,Se)=>{m(Se),P("edit"),E(!0),C(Se),J.current=!0,pe.current={x:q,y:Q};const ve=s.find(je=>je.id===Se);ve&&(ee.current={x:ve.x,y:ve.y})},U=(q,Q)=>{q.stopPropagation(),q.preventDefault();const Se="touches"in q?q.touches[0].clientX:q.clientX,ve="touches"in q?q.touches[0].clientY:q.clientY;Z.current=!0;const je=s.find(Tt=>Tt.id===Q);je&&(G.current={x:Se,y:ve,w:je.width,h:je.height})},z=(q,Q)=>{if(Z.current&&g){const Se=(q-G.current.x)/_,ve=Math.max(50,G.current.w+Se);s.find(Tt=>Tt.id===g)&&o(Tt=>Tt.map(Oe=>Oe.id===g?{...Oe,width:ve,height:ve/Oe.currentAspectRatio}:Oe));return}if(J.current&&g){const Se=(q-pe.current.x)/_,ve=(Q-pe.current.y)/_;o(je=>je.map(Tt=>Tt.id===g?{...Tt,x:ee.current.x+Se,y:ee.current.y+ve}:Tt))}},ie=()=>{(J.current||Z.current)&&re(s),J.current=!1,Z.current=!1,ue.current=0},ae=q=>{if(q.touches.length===2){const Q=Math.hypot(q.touches[0].clientX-q.touches[1].clientX,q.touches[0].clientY-q.touches[1].clientY);ue.current=Q,H.current=_}},W=q=>{if(q.touches.length===2&&ue.current>0){const Se=Math.hypot(q.touches[0].clientX-q.touches[1].clientX,q.touches[0].clientY-q.touches[1].clientY)-ue.current,ve=Math.max(.05,Math.min(1.5,H.current+Se*.001));T(ve)}},oe=()=>s.find(q=>q.id===g),ge=()=>T(q=>Math.min(q+.05,1.5)),fe=()=>T(q=>Math.max(q-.05,.05));return h.jsxs("div",{className:"h-[100dvh] bg-slate-50 text-slate-900 flex flex-col overflow-hidden font-sans relative",children:[h.jsx("style",{children:`
                    .no-scrollbar::-webkit-scrollbar { display: none; }
                    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
                `}),h.jsxs("div",{className:"absolute top-0 left-0 right-0 z-50 p-4 pointer-events-none flex justify-between items-start",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:t,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors",children:h.jsx(za,{className:"w-5 h-5"})}),h.jsx("button",{onClick:de,disabled:u<0,className:"pointer-events-auto bg-white/90 backdrop-blur text-slate-600 p-2.5 rounded-full shadow-sm border border-slate-200 hover:text-slate-900 hover:bg-white transition-colors disabled:opacity-50",children:h.jsx(OC,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"pointer-events-auto bg-white/90 backdrop-blur-md border border-slate-200 rounded-full flex items-center p-1 shadow-sm",children:[h.jsx("button",{onClick:fe,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:h.jsx(p6,{className:"w-4 h-4"})}),h.jsxs("div",{className:"px-2 text-xs font-mono font-bold text-slate-700 w-10 text-center select-none",children:[Math.round(_*100),"%"]}),h.jsx("button",{onClick:ge,className:"p-2.5 text-slate-500 hover:text-slate-900 rounded-full",children:h.jsx(f6,{className:"w-4 h-4"})})]}),h.jsx("button",{onClick:Y,disabled:y||s.length===0,className:"pointer-events-auto bg-slate-900 hover:bg-slate-800 text-white px-4 py-2.5 rounded-full shadow-lg shadow-slate-900/10 font-bold text-xs flex items-center gap-2 transition-all active:scale-95 disabled:opacity-50 border border-slate-800",children:y?"Saving...":h.jsxs(h.Fragment,{children:[h.jsx(fx,{className:"w-4 h-4"})," Save"]})})]}),h.jsx("div",{className:"flex-1 bg-slate-100 overflow-hidden relative flex flex-col",children:h.jsx("div",{className:"flex-1 overflow-auto no-scrollbar relative w-full h-full grid place-items-center p-8 canvas-bg touch-none transition-all duration-300",style:{paddingBottom:v?"140px":"0px"},ref:b,onClick:q=>{q.target===b.current&&m(null)},onMouseMove:q=>z(q.clientX,q.clientY),onTouchMove:q=>{if(q.touches.length===2){W(q);return}z(q.touches[0].clientX,q.touches[0].clientY)},onMouseUp:ie,onTouchEnd:ie,onTouchStart:ae,children:h.jsxs("div",{className:"relative shadow-2xl transition-transform duration-75 ease-linear shrink-0",style:{width:F*_,height:N*_},children:[h.jsx("div",{className:"absolute inset-0 canvas-bg",style:{backgroundColor:V}}),h.jsx("div",{className:"absolute inset-0 overflow-hidden",children:s.map(q=>h.jsxs("div",{className:"absolute group",style:{left:q.x*_,top:q.y*_,width:q.width*_,height:q.height*_,transform:`rotate(${q.rotation}deg) scaleX(${q.scaleX})`,zIndex:g===q.id?50:1},children:[h.jsx("div",{className:`absolute -inset-0.5 pointer-events-none transition-opacity duration-200 z-50 ${g===q.id?"opacity-100":"opacity-0"}`,style:{border:"2px dashed #0f172a",borderRadius:q.maskShape==="circle"?"50%":`${q.borderRadius}px`}}),h.jsx("div",{style:{width:"100%",height:"100%",borderRadius:q.maskShape==="circle"?"50%":`${q.borderRadius}px`,overflow:"hidden",border:q.borderWidth>0?`${q.borderWidth*_}px solid ${q.borderColor}`:"none",filter:q.isGrayscale?"grayscale(100%)":"none",position:"relative"},onMouseDown:Q=>B(Q.clientX,Q.clientY,q.id),onTouchStart:Q=>{Q.touches.length===1&&B(Q.touches[0].clientX,Q.touches[0].clientY,q.id)},children:h.jsx("img",{src:q.src,alt:"item",className:"w-full h-full select-none",draggable:!1,style:{objectFit:"cover"}})})]},q.id))}),g&&oe()&&h.jsxs("div",{className:"absolute pointer-events-auto z-[100]",style:{left:(oe().x+oe().width/2)*_,top:Math.max(-50,oe().y*_-60),transform:"translateX(-50%)"},onMouseDown:q=>q.stopPropagation(),onTouchStart:q=>q.stopPropagation(),children:[h.jsxs("div",{className:"bg-white/90 backdrop-blur-md text-slate-700 rounded-xl shadow-xl border border-slate-200 flex items-center p-1.5 gap-1",children:[h.jsx("button",{onClick:Qe,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:h.jsx(RC,{className:"w-4 h-4"})}),h.jsx("button",{onClick:kt,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:h.jsx(NC,{className:"w-4 h-4"})}),h.jsx("button",{onClick:rt,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-900",children:h.jsx(BC,{className:"w-4 h-4"})}),h.jsx("button",{onClick:Ue,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600",children:h.jsx(PC,{className:"w-4 h-4"})}),h.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1"}),h.jsx("button",{onClick:Ae,className:"p-2 hover:bg-red-50 text-red-500 rounded-lg",children:h.jsx(wp,{className:"w-4 h-4"})})]}),h.jsx("div",{className:"w-3 h-3 bg-white/90 rotate-45 absolute -bottom-1.5 left-1/2 -translate-x-1/2 border-r border-b border-slate-200"})]}),s.map(q=>g===q.id&&h.jsxs("div",{className:"absolute pointer-events-none z-[51]",style:{left:q.x*_,top:q.y*_,width:q.width*_,height:q.height*_,transform:`rotate(${q.rotation}deg) scaleX(${q.scaleX})`},children:[h.jsx("div",{className:"absolute -bottom-3 -right-3 w-6 h-6 bg-slate-900 rounded-full border-2 border-white shadow-md pointer-events-auto flex items-center justify-center cursor-nwse-resize hover:scale-110 transition-transform",onMouseDown:Q=>U(Q,q.id),onTouchStart:Q=>U(Q,q.id),children:h.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),Z.current&&h.jsxs("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-[10px] px-2 py-1 rounded shadow whitespace-nowrap",children:[Math.round(q.width),"px"]})]},`resize-${q.id}`)),h.jsx("div",{className:"absolute inset-0 pointer-events-none z-20",children:Array.from({length:e-1}).map((q,Q)=>h.jsx("div",{className:"absolute top-0 bottom-0 border-l-2 border-dashed border-slate-400/50 flex flex-col justify-between items-center py-2 mix-blend-difference",style:{left:`${(Q+1)/e*100}%`},children:h.jsx(AC,{className:"w-4 h-4 text-slate-600 opacity-80 bg-white/20 rounded-full p-0.5"})},Q))}),h.jsx("div",{className:"absolute top-0 left-0 w-full flex pointer-events-none z-20",children:Array.from({length:e}).map((q,Q)=>h.jsx("div",{className:"flex-1 border-r border-transparent h-6 flex items-center justify-center",children:h.jsxs("span",{className:"bg-white/80 text-slate-900 text-[9px] font-bold px-2 rounded-b backdrop-blur-sm shadow-sm border-x border-b border-slate-200",children:["Slide ",Q+1]})},Q))})]})})}),h.jsxs("div",{className:`fixed bottom-0 left-0 right-0 z-[60] flex flex-col bg-white border-t border-slate-200 transition-transform duration-300 ease-out shadow-[0_-10px_30px_-10px_rgba(0,0,0,0.05)] ${v?"translate-y-0":"translate-y-[calc(100%-40px)]"}`,children:[h.jsxs("div",{onClick:()=>E(!v),className:"h-10 flex items-center justify-center cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors border-b border-slate-200 group shrink-0",children:[h.jsx("div",{className:"w-12 h-1 bg-slate-300 rounded-full group-hover:bg-slate-400 mb-1"}),h.jsx(vc,{className:`w-4 h-4 text-slate-400 absolute right-4 transition-transform duration-300 ${v?"":"rotate-180"}`})]}),h.jsxs("div",{className:"flex border-b border-slate-200 bg-white shrink-0",children:[h.jsx("button",{onClick:()=>{P("add"),E(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${S==="add"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Add"}),h.jsx("button",{onClick:()=>{P("canvas"),E(!0)},className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${S==="canvas"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-400 hover:text-slate-600"}`,children:"Layout"}),h.jsx("button",{onClick:()=>{P("edit"),E(!0)},disabled:!g,className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors ${S==="edit"?"text-slate-900 border-b-2 border-slate-900 bg-slate-50":"text-slate-300 cursor-not-allowed"}`,children:"Edit"})]}),h.jsxs("div",{className:"h-28 overflow-x-auto overflow-y-hidden bg-white no-scrollbar flex items-center",children:[S==="add"&&h.jsxs("div",{className:"flex items-center gap-4 px-6 min-w-max",children:[h.jsxs("button",{onClick:()=>{var q;return(q=M.current)==null?void 0:q.click()},className:"h-20 w-20 bg-slate-50 hover:bg-slate-100 rounded-xl text-slate-700 font-bold flex flex-col items-center justify-center gap-2 border border-slate-200 transition-all shrink-0",children:[h.jsx(hx,{className:"w-6 h-6 text-slate-900"}),h.jsx("span",{className:"text-[10px] uppercase",children:"Upload"})]}),h.jsx("input",{type:"file",ref:M,onChange:Ye,className:"hidden",accept:"image/*"}),h.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>Me(j("circle")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:h.jsx(MC,{className:"w-6 h-6 text-slate-700"})}),h.jsx("button",{onClick:()=>Me(j("square")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:h.jsx(DC,{className:"w-6 h-6 text-slate-700"})}),h.jsx("button",{onClick:()=>Me(j("triangle")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:h.jsx(LC,{className:"w-6 h-6 text-slate-700"})}),h.jsx("button",{onClick:()=>Me(j("heart")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:h.jsx(FC,{className:"w-6 h-6 text-red-500"})}),h.jsx("button",{onClick:()=>Me(j("star")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors",children:h.jsx(VC,{className:"w-6 h-6 text-slate-900"})}),h.jsx("button",{onClick:()=>Me(j("text")),className:"bg-slate-50 w-16 h-16 rounded-xl flex items-center justify-center hover:bg-slate-100 border border-slate-100 transition-colors font-bold text-xs text-slate-700",children:"TXT"})]})]}),S==="canvas"&&h.jsxs("div",{className:"flex items-center gap-6 px-6 min-w-max h-full",children:[h.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl flex flex-col justify-center gap-1 w-48 shrink-0 border border-slate-100",children:[h.jsx("div",{className:"flex justify-between text-[10px] text-slate-500 font-bold uppercase",children:h.jsxs("span",{children:["Slides (",e,")"]})}),h.jsx("input",{type:"range",min:"2",max:"10",value:e,onChange:q=>n(parseInt(q.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>i("square"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${r==="square"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Square 1:1"}),h.jsx("button",{onClick:()=>i("portrait"),className:`px-4 py-3 rounded-xl text-xs font-bold border transition-all flex items-center justify-center gap-2 ${r==="portrait"?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Portrait 4:5"})]}),h.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),h.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100 flex items-center justify-between gap-3 shrink-0",children:[h.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Background"}),h.jsx("input",{type:"color",value:V,onChange:q=>O(q.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-0"})]})]}),S==="edit"&&g&&h.jsxs("div",{className:"flex items-center gap-5 px-6 min-w-max h-full",children:[h.jsxs("div",{className:"flex flex-col gap-1 items-center shrink-0",children:[h.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Layers"}),h.jsxs("div",{className:"flex gap-1 bg-slate-50 border border-slate-100 p-1 rounded-lg",children:[h.jsx("button",{onClick:()=>ne("front"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Bring to Front",children:h.jsx(Mu,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>ne("forward"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Step Forward",children:h.jsx(gC,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>ne("backward"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Step Backward",children:h.jsx(yC,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>ne("back"),className:"p-2 hover:bg-slate-200 rounded text-slate-600",title:"Send to Back",children:h.jsx(Mu,{className:"w-4 h-4 opacity-50"})})]})]}),h.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),h.jsxs("div",{className:"flex flex-col gap-1 w-40 shrink-0",children:[h.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Size"}),h.jsx("input",{type:"range",min:"10",max:"250",defaultValue:"100",onChange:q=>De({width:oe().originalAspectRatio*100*(parseInt(q.target.value)/10),height:oe().originalAspectRatio*100*(parseInt(q.target.value)/10)/oe().currentAspectRatio},!1),onMouseUp:()=>re(s),onTouchEnd:()=>re(s),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900 cursor-pointer"})]}),h.jsxs("div",{className:"flex flex-col gap-1 shrink-0",children:[h.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Mask"}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:()=>De({maskShape:"none",borderRadius:0}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((ye=oe())==null?void 0:ye.maskShape)==="none"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Box"}),h.jsx("button",{onClick:()=>De({maskShape:"circle"}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((Ce=oe())==null?void 0:Ce.maskShape)==="circle"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Circle"}),h.jsx("button",{onClick:()=>De({maskShape:"square",borderRadius:20}),className:`p-1.5 rounded text-[10px] border w-12 text-center transition-colors ${((ke=oe())==null?void 0:ke.maskShape)==="square"?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"Round"})]})]}),h.jsx("div",{className:"w-px h-12 bg-slate-100 shrink-0"}),h.jsxs("div",{className:"flex flex-col gap-1 w-40 shrink-0",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Border"}),h.jsx("input",{type:"color",value:(Et=oe())==null?void 0:Et.borderColor,onChange:q=>De({borderColor:q.target.value}),className:"w-4 h-4 rounded bg-transparent border-0 cursor-pointer"})]}),h.jsx("input",{type:"range",min:"0",max:"20",value:(yn=oe())==null?void 0:yn.borderWidth,onChange:q=>De({borderWidth:parseInt(q.target.value)}),className:"w-full h-2 bg-slate-200 rounded-lg accent-slate-900"})]}),h.jsxs("button",{onClick:()=>{var q;return De({isGrayscale:!((q=oe())!=null&&q.isGrayscale)})},className:`h-12 px-3 rounded-lg text-[10px] font-bold border transition-colors flex flex-col items-center justify-center gap-1 shrink-0 ${(Vt=oe())!=null&&Vt.isGrayscale?"bg-slate-100 text-slate-900 border-slate-300":"bg-white border-slate-200 text-slate-400 hover:border-slate-300"}`,children:[h.jsx(UC,{className:"w-4 h-4"}),"B&W"]})]})]})]})]})},g6=()=>{const[t,e]=te.useState(it.Home),[n,r]=te.useState(!0),[i,s]=te.useState(!1),[o,a]=te.useState(()=>localStorage.getItem("fanra_admin_auth")==="true");te.useEffect(()=>{window.scrollTo(0,0)},[t]),te.useEffect(()=>{const g=m=>{const y=m.target;["INPUT","TEXTAREA"].includes(y.tagName)||y.isContentEditable||m.key.toLowerCase()==="f"&&(m.preventDefault(),document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(x=>{console.log(`Error attempting to enable fullscreen: ${x.message}`)}))};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[]);const l=()=>{window.scrollTo(0,0),r(!1)},u=t===it.AIStudio||t===it.IGSeamless,d=()=>{switch(t){case it.Home:return h.jsx(a0,{onNavigate:e});case it.Projects:return h.jsx(QC,{isAdmin:o,onLaunchApp:()=>e(it.AIStudio),onOpenIG:()=>e(it.IGSeamless)});case it.Blog:return h.jsx(XC,{isAdmin:o});case it.Gallery:return h.jsx(yP,{isAdmin:o});case it.Music:return h.jsx(vP,{isAdmin:o});case it.Messages:return h.jsx(_P,{});case it.AIStudio:return h.jsx(l6,{onExit:()=>e(it.Projects)});case it.IGSeamless:return h.jsx(m6,{onExit:()=>e(it.Projects)});default:return h.jsx(a0,{onNavigate:e})}};return h.jsxs("div",{className:"min-h-screen flex flex-col font-sans bg-[#fafafa] relative overflow-x-hidden",children:[!u&&h.jsx(qC,{activeTab:t,setActiveTab:e,isMenuOpen:i,setIsMenuOpen:s,isAdmin:o}),h.jsx("main",{className:`${u?"pt-0 h-screen overflow-hidden":"flex-grow pt-24 pb-12"}`,children:h.jsx("div",{className:"animate-fade-in-up h-full",children:d()},t)}),n&&h.jsx(JC,{onComplete:l}),!u&&h.jsxs(h.Fragment,{children:[h.jsx(wP,{}),h.jsx(xP,{}),h.jsxs("footer",{className:"bg-slate-950 text-white pt-32 pb-12 px-6 overflow-hidden relative mt-12",children:[h.jsx("div",{className:"absolute inset-0 z-0 opacity-20 pointer-events-none mix-blend-overlay",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),h.jsx("div",{className:"absolute inset-0 z-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"20px 20px",maskImage:"linear-gradient(to bottom, transparent, black)"}}),h.jsx("div",{className:"absolute top-0 left-0 w-full overflow-hidden leading-[0] z-20",children:h.jsx("svg",{"data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1200 120",preserveAspectRatio:"none",className:"relative block w-full h-[50px] md:h-[90px] fill-[#fafafa]",children:h.jsx("path",{d:"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"})})}),h.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16",children:[h.jsxs("div",{className:"lg:col-span-2",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[h.jsx(Xs,{className:"w-12 h-12",variant:"light"}),h.jsx("h2",{className:"text-2xl font-black tracking-tighter uppercase",children:"Irfan Rizki Aditri"})]}),h.jsx("p",{className:"text-slate-500 text-sm max-w-sm leading-relaxed font-medium",children:"Seorang mahasiswa ITERA angkatan 2025 yang hobi mengulik kode dan berbagi cerita lewat ruang digital."})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Communication"}),h.jsxs("a",{href:"mailto:irfanrizkiaditri@gmail.com",className:"text-sm font-bold text-slate-200 hover:text-white transition-colors flex items-center gap-3 group",children:[h.jsx(HC,{className:"w-5 h-5 group-hover:scale-110 transition-transform text-slate-400 group-hover:text-white"}),"irfanrizkiaditri@gmail.com"]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-6",children:"Social Discovery"}),h.jsxs("div",{className:"flex gap-6",children:[h.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:h.jsx(jC,{className:"w-6 h-6"})}),h.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:h.jsx(zC,{className:"w-6 h-6"})}),h.jsx("a",{href:"#",className:"text-slate-400 hover:text-white transition-all hover:scale-125",children:h.jsx(GC,{className:"w-6 h-6"})})]})]})]}),h.jsxs("div",{className:"pt-8 border-t border-slate-900 flex flex-col md:flex-row justify-between items-center gap-6",children:[h.jsxs("p",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:[" ",new Date().getFullYear(),"  PERSPECTIVE OF FANRA"]}),h.jsx("div",{className:"flex items-center gap-4",children:h.jsx("span",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.4em]",children:"Sumatera, Indonesia"})})]})]}),h.jsx("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] opacity-[0.02] pointer-events-none translate-x-20 -translate-y-20",children:h.jsx(Xs,{className:"w-full h-full",variant:"light"})})]})]})]})},A1=document.getElementById("root");if(!A1)throw new Error("Could not find root element to mount to");const y6=Wd.createRoot(A1);y6.render(h.jsx(l_.StrictMode,{children:h.jsx(g6,{})}));
